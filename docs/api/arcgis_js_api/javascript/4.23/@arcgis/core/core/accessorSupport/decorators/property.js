/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
import{L as t}from"../../../chunks/Logger.js";import{b as r,a as e,i as n,c as s,d as o,f as i,g as a,h as c,j as u,e as p}from"../../../chunks/ensureType.js";import{g as f}from"../../../chunks/get.js";import{g as l,m as g}from"../../../chunks/metadata.js";import m from"../../Error.js";import{h as d}from"../../lang.js";import"../../../config.js";import"../../../chunks/object.js";import"../../../chunks/string.js";import"../../../chunks/utils.js";import"../../../chunks/handleUtils.js";function y(t,r,e){if(t&&r)if("object"==typeof r)for(const e of Object.getOwnPropertyNames(r))y(t,e,r[e]);else{if(-1!==r.indexOf(".")){const n=r.split("."),s=n.splice(n.length-1,1)[0];return void y(f(t,n),s,e)}const n=t.__accessor__;null!=n&&function(t,r){if(d("esri-unknown-property-errors")&&!function(t,r){return null!=r.metadatas[t]}(t,r))throw new m("set:unknown-property",function(t,r){return"setting unknown property '"+t+"' on instance of "+r.host.declaredClass}(t,r))}(r,n),t[r]=e}}function h(m={}){return(d,h)=>{if(d===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${d.name}.${h}. Accessor does not support static properties.`);const j=Object.getOwnPropertyDescriptor(d,h),O=l(d,h);j&&(j.get||j.set?(O.get=j.get||O.get,O.set=j.set||O.set):"value"in j&&("value"in m&&t.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${h}" on "${d.constructor.name}" already defined in the metadata`,m),O.value=m.value=j.value)),null!=m.readOnly&&(O.readOnly=m.readOnly);const k=m.aliasOf;if(k){const t="string"==typeof k?k:k.source,r="string"==typeof k?null:!0===k.overridable;let e;O.dependsOn=[t],O.get=function(){let r=f(this,t);if("function"==typeof r){e||(e=t.split(".").slice(0,-1).join("."));const n=f(this,e);n&&(r=r.bind(n))}return r},O.readOnly||(O.set=r?function(t){void 0!==t?this._override(h,t):this._clearOverride(h)}:function(r){y(this,t,r)})}const w=m.type,b=m.types;O.cast||(w?O.cast=function(t){let r=0,e=t;if(n(t))return s(t);for(;Array.isArray(e)&&1===e.length&&"string"!=typeof e[0]&&"number"!=typeof e[0];)e=e[0],r++;const f=e;if(o(f))return 0===r?i(f):a(i(f),r);if(1===r)return c(f);if(r>1)return u(f,r);const l=t;if(l.from)return l.from;return p(l)}(w):b&&(Array.isArray(b)?O.cast=r(e(b[0])):O.cast=e(b))),m.range&&(O.cast=v(O.cast,m.range)),g(O,m)}}function j(t,r,e){const n=l(t,e);n.json||(n.json={});let s=n.json;return void 0!==r&&(s.origins||(s.origins={}),s.origins[r]||(s.origins[r]={}),s=s.origins[r]),s}function v(t,r){return e=>{let n=+t(e);return null!=r.step&&(n=Math.round(n/r.step)*r.step),null!=r.min&&(n=Math.max(r.min,n)),null!=r.max&&(n=Math.min(r.max,n)),n}}t.getLogger("esri.core.accessorSupport.set");export{v as ensureRange,h as property,j as propertyJSONMeta,y as s};
