/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
import{_ as t}from"../chunks/tslib.es6.js";import r from"../core/Collection.js";import{r as s,c as e}from"../chunks/collectionUtils.js";import{L as o}from"../chunks/Logger.js";import{isAbsolute as i,normalize as l,hasSamePortal as m}from"../core/urlUtils.js";import{subclass as n,W as a}from"../core/accessorSupport/decorators/subclass.js";import{property as p}from"../core/accessorSupport/decorators/property.js";import"../core/lang.js";import{cast as y}from"../core/accessorSupport/decorators/cast.js";import{r as c}from"../chunks/reader.js";import{w as u}from"../chunks/writer.js";import j from"../portal/Portal.js";import{f as h,t as d}from"../chunks/persistableUrlUtils.js";import g from"./ExtrudeSymbol3DLayer.js";import b from"./FillSymbol3DLayer.js";import k from"./IconSymbol3DLayer.js";import f from"./LineSymbol3DLayer.js";import S from"./ObjectSymbol3DLayer.js";import U from"./PathSymbol3DLayer.js";import L from"./Symbol.js";import D from"./Symbol3DLayer.js";import O from"./TextSymbol3DLayer.js";import w from"./WaterSymbol3DLayer.js";import _ from"../core/Accessor.js";import"../chunks/ensureType.js";import{T as N}from"../chunks/Thumbnail.js";import"../chunks/ArrayPool.js";import"../chunks/Evented.js";import"../chunks/handleUtils.js";import"../core/scheduling.js";import"../chunks/nextTick.js";import"../core/promiseUtils.js";import"../core/Error.js";import"../chunks/object.js";import"../config.js";import"../chunks/string.js";import"../chunks/shared.js";import"../chunks/tracking.js";import"../chunks/utils.js";import"../chunks/get.js";import"../chunks/metadata.js";import"../chunks/deprecate.js";import"../chunks/watch.js";import"../kernel.js";import"../request.js";import"../chunks/JSONSupport.js";import"../chunks/Loadable.js";import"../chunks/Promise.js";import"../geometry/Extent.js";import"../geometry/Geometry.js";import"../geometry/SpatialReference.js";import"../geometry/Point.js";import"../geometry/support/webMercatorUtils.js";import"../chunks/Ellipsoid.js";import"../chunks/locale.js";import"../portal/PortalQueryParams.js";import"../chunks/jsonMap.js";import"../portal/PortalQueryResult.js";import"../portal/PortalUser.js";import"../portal/PortalFolder.js";import"../portal/PortalGroup.js";import"../chunks/enumeration.js";import"../chunks/utils3.js";import"./edges/Edges3D.js";import"../Color.js";import"../chunks/colorUtils.js";import"../chunks/mathUtils.js";import"../chunks/common.js";import"../chunks/screenUtils.js";import"../chunks/materialUtils.js";import"../chunks/opacityUtils.js";import"./edges/SketchEdges3D.js";import"./edges/SolidEdges3D.js";import"../chunks/Symbol3DMaterial.js";import"./patterns/LineStylePattern3D.js";import"./patterns/StylePattern3D.js";import"../chunks/utils4.js";import"../chunks/colors.js";import"../chunks/symbolLayerUtils3D.js";import"../chunks/aaBoundingBox.js";import"../chunks/aaBoundingRect.js";import"./LineStyleMarker3D.js";import"../chunks/Clonable.js";import"../chunks/lineMarkers.js";import"./Font.js";var P;let v=P=class extends _{constructor(){super(...arguments),this.portal=null}clone(){return new P({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};t([p({type:String})],v.prototype,"name",void 0),t([p({type:String})],v.prototype,"styleUrl",void 0),t([p({type:String})],v.prototype,"styleName",void 0),t([p({type:j})],v.prototype,"portal",void 0),v=P=t([n("esri.symbols.support.StyleOrigin")],v);const x=v,E={icon:k,object:S,line:f,path:U,fill:b,extrude:g,text:O,water:w},T=r.ofType({base:D,key:"type",typeMap:E,errorContext:"symbol-layer"}),C=o.getLogger("esri.symbols.Symbol3D");let M=class extends L{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const s=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,e=s&&s.type||r;this._set("symbolLayers",new e)}get color(){return null}set color(t){this.initialized&&C.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){s(t,this._get("symbolLayers"))}readStyleOrigin(t,r,s){if(t.styleUrl&&t.name){const r=h(t.styleUrl,s);return new x({styleUrl:r,name:t.name})}if(t.styleName&&t.name)return new x({portal:s&&s.portal||j.getDefault(),styleName:t.styleName,name:t.name});s&&s.messages&&s.messages.push(new a("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:s,definition:t}))}writeStyleOrigin(t,r,s,e){if(t.styleUrl&&t.name){let s=d(t.styleUrl,e);i(s)&&(s=l(s)),r.styleOrigin={styleUrl:s,name:t.name}}else t.styleName&&t.name&&(t.portal&&e&&e.portal&&!m(t.portal.restUrl,e.portal.restUrl)?e&&e.messages&&e.messages.push(new a("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):r.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof D||t&&E[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};t([p({json:{read:!1,write:!1}})],M.prototype,"color",null),t([p({type:T,nonNullable:!0,json:{write:!0}}),y(e)],M.prototype,"symbolLayers",null),t([p({type:x})],M.prototype,"styleOrigin",void 0),t([c("styleOrigin")],M.prototype,"readStyleOrigin",null),t([u("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],M.prototype,"writeStyleOrigin",null),t([p({type:N,json:{read:!1}})],M.prototype,"thumbnail",void 0),t([p({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],M.prototype,"type",void 0),M=t([n("esri.symbols.Symbol3D")],M);const A=M;export{x as S,A as default};
