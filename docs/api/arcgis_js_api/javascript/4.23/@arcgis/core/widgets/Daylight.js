/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
import{_ as s}from"../chunks/tslib.es6.js";import{L as t}from"../chunks/Logger.js";import{i as e,m as i}from"../core/lang.js";import{watch as o,initial as r,when as n}from"../core/reactiveUtils.js";import{aliasOf as p}from"../core/accessorSupport/decorators/aliasOf.js";import{cast as m}from"../core/accessorSupport/decorators/cast.js";import{property as l}from"../core/accessorSupport/decorators/property.js";import{subclass as a}from"../core/accessorSupport/decorators/subclass.js";import c from"./Widget.js";import u,{S as h,O as j}from"./Daylight/DaylightViewModel.js";import{e as d}from"../core/promiseUtils.js";import"../chunks/ensureType.js";import k from"./Slider.js";import"../chunks/widgetUtils.js";import{t as y}from"../chunks/jsxFactory.js";import g from"./support/DatePicker.js";import{H as b}from"../chunks/Heading.js";import{f as w,g as v}from"../chunks/timeWidgetUtils.js";import{m as f}from"../chunks/messageBundle.js";import"../config.js";import"../chunks/object.js";import"../chunks/string.js";import"../chunks/handleUtils.js";import"../chunks/watch.js";import"../chunks/ArrayPool.js";import"../core/scheduling.js";import"../chunks/nextTick.js";import"../core/Error.js";import"../chunks/get.js";import"../chunks/utils.js";import"../chunks/tracking.js";import"../chunks/metadata.js";import"../intl.js";import"../chunks/number.js";import"../chunks/jsonMap.js";import"../chunks/locale.js";import"../chunks/messages.js";import"../request.js";import"../kernel.js";import"../core/urlUtils.js";import"../chunks/assets.js";import"../chunks/deprecate.js";import"../chunks/domUtils.js";import"../chunks/Evented.js";import"../core/Accessor.js";import"../core/Handles.js";import"../core/Collection.js";import"../chunks/shared.js";import"../chunks/Promise.js";import"../chunks/uuid.js";import"../chunks/projector.js";import"../chunks/jsxWidgetSupport.js";import"../chunks/widgetThemeUtils.js";import"../core/HandleOwner.js";import"../chunks/timeUtils.js";import"../views/SceneView.js";import"../Camera.js";import"../chunks/Clonable.js";import"../chunks/JSONSupport.js";import"../chunks/mathUtils.js";import"../chunks/common.js";import"../chunks/reader.js";import"../chunks/writer.js";import"../geometry/Point.js";import"../geometry/Geometry.js";import"../geometry/SpatialReference.js";import"../geometry/support/webMercatorUtils.js";import"../chunks/Ellipsoid.js";import"../chunks/mathUtils2.js";import"../geometry.js";import"../geometry/Extent.js";import"../geometry/Multipoint.js";import"../chunks/zmUtils.js";import"../geometry/Polygon.js";import"../chunks/extentUtils.js";import"../geometry/Polyline.js";import"../chunks/typeUtils.js";import"../geometry/support/jsonUtils.js";import"../Graphic.js";import"../PopupTemplate.js";import"../layers/support/fieldUtils.js";import"../chunks/arcadeOnDemand.js";import"../popup/content.js";import"../popup/content/AttachmentsContent.js";import"../popup/content/Content.js";import"../popup/content/CustomContent.js";import"../popup/content/ExpressionContent.js";import"../popup/ElementExpressionInfo.js";import"../popup/content/FieldsContent.js";import"../popup/FieldInfo.js";import"../chunks/enumeration.js";import"../popup/support/FieldInfoFormat.js";import"../chunks/date.js";import"../popup/content/MediaContent.js";import"../popup/content/BarChartMediaInfo.js";import"../chunks/chartMediaInfoUtils.js";import"../chunks/MediaInfo.js";import"../popup/content/support/ChartMediaInfoValue.js";import"../popup/content/support/ChartMediaInfoValueSeries.js";import"../popup/content/ColumnChartMediaInfo.js";import"../popup/content/ImageMediaInfo.js";import"../popup/content/support/ImageMediaInfoValue.js";import"../popup/content/LineChartMediaInfo.js";import"../popup/content/PieChartMediaInfo.js";import"../popup/content/TextContent.js";import"../popup/ExpressionInfo.js";import"../popup/LayerOptions.js";import"../popup/RelatedRecordsInfo.js";import"../popup/support/RelatedRecordsInfoFieldOrder.js";import"../support/actions/ActionBase.js";import"../chunks/Identifiable.js";import"../support/actions/ActionButton.js";import"../support/actions/ActionToggle.js";import"../symbols.js";import"../symbols/CIMSymbol.js";import"../symbols/Symbol.js";import"../Color.js";import"../chunks/colorUtils.js";import"../symbols/ExtrudeSymbol3DLayer.js";import"../symbols/Symbol3DLayer.js";import"../chunks/utils3.js";import"../symbols/edges/Edges3D.js";import"../chunks/screenUtils.js";import"../chunks/materialUtils.js";import"../chunks/opacityUtils.js";import"../symbols/edges/SketchEdges3D.js";import"../symbols/edges/SolidEdges3D.js";import"../chunks/Symbol3DMaterial.js";import"../symbols/FillSymbol.js";import"../symbols/SimpleLineSymbol.js";import"../symbols/LineSymbol.js";import"../symbols/LineSymbolMarker.js";import"../chunks/lineMarkers.js";import"../symbols/FillSymbol3DLayer.js";import"../symbols/patterns/LineStylePattern3D.js";import"../symbols/patterns/StylePattern3D.js";import"../chunks/utils4.js";import"../chunks/colors.js";import"../chunks/symbolLayerUtils3D.js";import"../chunks/aaBoundingBox.js";import"../chunks/aaBoundingRect.js";import"../symbols/Font.js";import"../symbols/IconSymbol3DLayer.js";import"../chunks/persistableUrlUtils.js";import"../symbols/LabelSymbol3D.js";import"../symbols/Symbol3D.js";import"../chunks/collectionUtils.js";import"../portal/Portal.js";import"../chunks/Loadable.js";import"../portal/PortalQueryParams.js";import"../portal/PortalQueryResult.js";import"../portal/PortalUser.js";import"../portal/PortalFolder.js";import"../portal/PortalGroup.js";import"../symbols/LineSymbol3DLayer.js";import"../symbols/LineStyleMarker3D.js";import"../symbols/ObjectSymbol3DLayer.js";import"../symbols/PathSymbol3DLayer.js";import"../symbols/TextSymbol3DLayer.js";import"../symbols/WaterSymbol3DLayer.js";import"../chunks/Thumbnail.js";import"../chunks/Symbol3DVerticalOffset.js";import"../symbols/callouts/Callout3D.js";import"../symbols/callouts/LineCallout3D.js";import"../symbols/LineSymbol3D.js";import"../symbols/MarkerSymbol.js";import"../symbols/MeshSymbol3D.js";import"../symbols/PictureFillSymbol.js";import"../chunks/urlUtils.js";import"../symbols/PictureMarkerSymbol.js";import"../symbols/PointSymbol3D.js";import"../symbols/PolygonSymbol3D.js";import"../symbols/SimpleFillSymbol.js";import"../symbols/SimpleMarkerSymbol.js";import"../symbols/TextSymbol.js";import"../symbols/WebStyleSymbol.js";import"../Ground.js";import"../chunks/compilerUtils.js";import"../chunks/loadAll.js";import"../chunks/asyncUtils.js";import"../Viewpoint.js";import"../chunks/iteratorUtils.js";import"../core/workers/workers.js";import"../core/workers/Connection.js";import"../core/workers/RemoteClient.js";import"../chunks/GraphicsCollection.js";import"../geometry/HeightModelInfo.js";import"../chunks/unitUtils.js";import"../chunks/projectionEllipsoid.js";import"../geometry/projection.js";import"../chunks/mat4.js";import"../chunks/pe.js";import"../chunks/geodesicConstants.js";import"../geometry/support/GeographicTransformation.js";import"../geometry/support/GeographicTransformationStep.js";import"../chunks/zscale.js";import"../chunks/boundedPlane.js";import"../chunks/vectorStacks.js";import"../chunks/byteSizeEstimations.js";import"../chunks/quatf64.js";import"../chunks/mat4f64.js";import"../chunks/vec2f64.js";import"../chunks/vec4f64.js";import"../chunks/sphere.js";import"../chunks/ray.js";import"../chunks/lineSegment.js";import"../chunks/plane.js";import"../chunks/RenderCoordsHelper.js";import"../chunks/ElevationProvider.js";import"../chunks/ViewingMode.js";import"../chunks/spatialReferenceSupport.js";import"../chunks/scaleUtils.js";import"../chunks/VoxelWasmManager.js";import"../chunks/RenderSlot.js";import"../chunks/context-util.js";import"../chunks/enums.js";import"../chunks/layerUtils.js";import"../views/View.js";import"../Map.js";import"../Basemap.js";import"../portal/PortalItem.js";import"../portal/PortalItemResource.js";import"../portal/PortalRating.js";import"../chunks/writeUtils.js";import"../chunks/CollectionFlattener.js";import"../chunks/basemapUtils.js";import"../chunks/TablesMixin.js";import"../layers/Layer.js";import"../TimeExtent.js";import"../views/BasemapView.js";import"../core/watchUtils.js";import"../views/Magnifier.js";import"../chunks/Scheduler.js";import"../chunks/debugFlags.js";import"../chunks/InputManager.js";import"../chunks/Queue.js";import"../chunks/IViewEvents.js";import"../chunks/interfaces.js";import"../chunks/screenUtils2.js";import"../views/input/Input.js";import"../views/input/gamepad/GamepadSettings.js";import"../views/input/gamepad/GamepadInputDevice.js";import"../views/navigation/Navigation.js";import"../views/navigation/gamepad/GamepadSettings.js";import"../chunks/heightModelInfoUtils.js";import"../chunks/arcgisLayerUrl.js";import"../chunks/WebGLRequirements.js";import"../chunks/capabilities2.js";import"../chunks/DOMContainer.js";import"./Popup.js";import"../chunks/throttle.js";import"./Feature.js";import"./Attachments.js";import"../chunks/unitFormatUtils.js";import"./Attachments/AttachmentsViewModel.js";import"../rest/query/support/AttachmentInfo.js";import"../rest/support/AttachmentQuery.js";import"./Feature/FeatureViewModel.js";import"../chunks/languageUtils.js";import"../chunks/datetime.js";import"../chunks/number3.js";import"../layers/support/Field.js";import"../chunks/domains.js";import"../layers/support/CodedValueDomain.js";import"../layers/support/Domain.js";import"../layers/support/InheritedDomain.js";import"../layers/support/RangeDomain.js";import"../chunks/fieldType.js";import"../rest/support/Query.js";import"../chunks/DataLayerSource.js";import"../rest/support/StatisticDefinition.js";import"../rest/support/RelationshipQuery.js";import"../tasks/QueryTask.js";import"../chunks/executeForTopCount.js";import"../chunks/utils5.js";import"../chunks/floorFilterUtils.js";import"../chunks/query.js";import"../geometry/support/normalizeUtils.js";import"../chunks/normalizeUtilsCommon.js";import"../chunks/pbfQueryUtils.js";import"../chunks/pbf.js";import"../chunks/OptimizedFeature.js";import"../chunks/OptimizedFeatureSet.js";import"../chunks/queryZScale.js";import"../chunks/featureConversionUtils.js";import"../rest/support/FeatureSet.js";import"../rest/support/TopFeaturesQuery.js";import"../rest/support/TopFilter.js";import"../chunks/executeQueryJSON.js";import"../tasks/Task.js";import"../layers/FeatureLayer.js";import"../renderers/ClassBreaksRenderer.js";import"../renderers/Renderer.js";import"../renderers/support/AuthoringInfo.js";import"../renderers/support/AuthoringInfoVisualVariable.js";import"../chunks/colorRamps.js";import"../rest/support/AlgorithmicColorRamp.js";import"../rest/support/ColorRamp.js";import"../rest/support/MultipartColorRamp.js";import"../chunks/VisualVariablesMixin.js";import"../renderers/visualVariables/ColorVariable.js";import"../renderers/visualVariables/VisualVariable.js";import"../chunks/LegendOptions.js";import"../renderers/visualVariables/support/ColorStop.js";import"../renderers/visualVariables/OpacityVariable.js";import"../renderers/visualVariables/support/OpacityStop.js";import"../renderers/visualVariables/RotationVariable.js";import"../renderers/visualVariables/SizeVariable.js";import"../renderers/visualVariables/support/SizeStop.js";import"../chunks/sizeVariableUtils.js";import"../chunks/visualVariableUtils.js";import"../chunks/lengthUtils.js";import"../renderers/support/ClassBreakInfo.js";import"../chunks/commonProperties2.js";import"../symbols/support/jsonUtils.js";import"../chunks/symbolConversion.js";import"../renderers/DictionaryRenderer.js";import"../chunks/DictionaryLoader.js";import"../chunks/LRUCache.js";import"../chunks/MemCache.js";import"../renderers/DotDensityRenderer.js";import"../renderers/support/AttributeColorInfo.js";import"../renderers/HeatmapRenderer.js";import"../renderers/support/HeatmapColorStop.js";import"../renderers/SimpleRenderer.js";import"../renderers/UniqueValueRenderer.js";import"../chunks/diffUtils.js";import"../renderers/support/UniqueValueInfo.js";import"../chunks/styleUtils.js";import"../renderers/support/jsonUtils.js";import"../chunks/MultiOriginJSONSupport.js";import"../core/sql.js";import"../form/FormTemplate.js";import"../form/ExpressionInfo.js";import"../form/elements/GroupElement.js";import"../form/elements/FieldElement.js";import"../form/elements/support/inputs.js";import"../form/elements/inputs/BarcodeScannerInput.js";import"../form/elements/inputs/TextInput.js";import"../form/elements/inputs/Input.js";import"../form/elements/inputs/ComboBoxInput.js";import"../form/elements/inputs/DateTimePickerInput.js";import"../form/elements/inputs/RadioButtonsInput.js";import"../form/elements/inputs/SwitchInput.js";import"../form/elements/inputs/TextAreaInput.js";import"../form/elements/inputs/TextBoxInput.js";import"../form/support/elements.js";import"../chunks/FeatureIndex.js";import"../chunks/APIKeyMixin.js";import"../chunks/ArcGISService.js";import"../chunks/BlendLayer.js";import"../chunks/jsonUtils.js";import"../chunks/parser.js";import"../chunks/mat4f32.js";import"../chunks/_commonjsHelpers.js";import"../chunks/CustomParametersMixin.js";import"../chunks/FeatureEffectLayer.js";import"../layers/support/FeatureEffect.js";import"../layers/support/FeatureFilter.js";import"../chunks/OperationalLayer.js";import"../chunks/commonProperties.js";import"../support/timeUtils.js";import"../chunks/ElevationInfo.js";import"../chunks/unitConversionUtils.js";import"../chunks/OrderedLayer.js";import"../chunks/PortalLayer.js";import"../chunks/RefreshableLayer.js";import"../chunks/ScaleRangeLayer.js";import"../chunks/TemporalLayer.js";import"../TimeInterval.js";import"../layers/support/TimeInfo.js";import"../chunks/featureReductionUtils.js";import"../layers/support/FeatureReductionSelection.js";import"../layers/support/FeatureReductionCluster.js";import"../layers/support/LabelClass.js";import"../chunks/labelUtils.js";import"../chunks/defaultsJSON.js";import"../layers/support/FeatureTemplate.js";import"../layers/support/FeatureType.js";import"../chunks/fieldProperties.js";import"../layers/support/FieldsIndex.js";import"../layers/support/GeometryFieldsInfo.js";import"../chunks/labelingInfo.js";import"../layers/support/LayerFloorInfo.js";import"../layers/support/Relationship.js";import"../chunks/versionUtils.js";import"../chunks/styleUtils2.js";import"../support/popupUtils.js";import"./support/widget.js";import"../chunks/accessibleHandler.js";import"../chunks/vmEvent.js";import"./Spinner/SpinnerViewModel.js";import"../chunks/AnchorElementViewModel.js";import"./Popup/PopupViewModel.js";import"../symbols/support/symbolUtils.js";import"../chunks/utils6.js";import"../chunks/ItemCache.js";import"../symbols/support/cimSymbolUtils.js";import"../chunks/utils7.js";import"../chunks/layerViewUtils.js";import"../chunks/actions.js";import"../chunks/GoTo.js";import"../views/GroundView.js";import"../layers/support/ElevationSampler.js";import"../chunks/TerrainConst.js";import"../layers/support/TileInfo.js";import"../layers/support/LOD.js";import"../views/ViewAnimation.js";import"../views/3d/environment/SunLighting.js";import"../webscene/Lighting.js";import"../views/3d/environment/VirtualLighting.js";import"../views/3d/environment/SunnyWeather.js";import"../chunks/weather.js";import"../views/3d/environment/CloudyWeather.js";import"../views/3d/environment/FoggyWeather.js";import"../views/3d/environment/RainyWeather.js";import"../webscene/Environment.js";import"../webscene/background/Background.js";import"../webscene/background/ColorBackground.js";import"../chunks/vec2.js";import"../chunks/VisualVariables.glsl.js";import"../chunks/ShaderBuilder.js";import"../chunks/glUtil3D.js";import"../chunks/basicInterfaces.js";import"../chunks/Util.js";import"../chunks/Material.js";import"../chunks/VertexAttribute.js";import"../chunks/utils2.js";import"../chunks/doublePrecisionUtils.js";import"../chunks/geometryDataUtils.js";import"../chunks/triangle.js";import"../chunks/BufferView.js";import"../chunks/Texture.js";import"../chunks/VertexElementDescriptor.js";import"../chunks/VertexArrayObject.js";import"../chunks/vec3f32.js";import"../chunks/lineUtils.js";import"../chunks/triangulationUtils.js";import"../chunks/earcut.js";import"../chunks/deduplicate.js";import"../chunks/DefaultBufferWriter.js";import"../chunks/frustum.js";import"../chunks/dehydratedFeatures.js";import"../chunks/quantizationUtils.js";import"../chunks/InterleavedLayout.js";import"../chunks/types.js";import"../chunks/vec2f32.js";import"../chunks/FramebufferObject.js";import"../chunks/NestedMap.js";import"../chunks/Camera.js";import"../chunks/glUtil.js";import"../chunks/OrderIndependentTransparency.js";import"../chunks/ReadShadowMap.glsl.js";import"../chunks/heatmapUtils.js";import"../chunks/ScreenSpacePass.js";import"../chunks/Intersector.js";import"../chunks/verticalOffsetUtils.js";import"../chunks/mat3.js";import"../chunks/quat.js";import"../chunks/floatRGBA.js";import"../chunks/requestImageUtils.js";import"../chunks/GeometryUtil.js";import"../chunks/pointUtils.js";import"../chunks/VerticalOffset.glsl.js";import"../chunks/GLMaterialTexture.js";import"../chunks/Texture2.js";import"../chunks/earthUtils.js";import"../chunks/ShadowCast.glsl.js";import"../chunks/CameraSpace.glsl.js";import"../chunks/LayerView3D.js";import"../chunks/RenderGeometry.js";import"../chunks/vec3.js";import"../chunks/objectResourceUtils.js";import"../chunks/devEnvironmentUtils.js";import"../chunks/DefaultMaterial_COLOR_GAMMA.js";import"../chunks/Version.js";import"../chunks/VertexColor.glsl.js";import"../chunks/callExpressionWithFeature.js";import"../chunks/lineStippleUtils.js";import"../geometry/support/MeshComponent.js";import"../geometry/support/MeshMaterial.js";import"../geometry/support/MeshTexture.js";import"../chunks/screenshotUtils.js";import"../geometry/support/MeshMaterialMetallicRoughness.js";import"../chunks/projection.js";import"../chunks/NativeLineMaterial.js";import"../chunks/ColorMaterial.js";import"../chunks/viewpointUtils.js";import"../chunks/ray2.js";import"../chunks/RenderingContext.js";import"../chunks/Program.js";import"../chunks/ProgramCache.js";import"../chunks/DefaultVertexAttributeLayouts.js";import"../chunks/labelFormatUtils.js";import"../chunks/FeatureTileDescriptor3D.js";import"../chunks/vec4f32.js";import"../chunks/geometryServiceUtils.js";import"../chunks/project.js";import"../rest/support/ProjectParameters.js";import"../views/3d/support/SceneViewPerformanceInfo.js";import"../views/3d/support/LayerPerformanceInfo.js";import"../chunks/terrainUtils.js";import"../chunks/ElevationQueryTileCache.js";import"../chunks/LercDecoder.js";import"../chunks/WorkerHandle.js";import"../chunks/VectorTile.js";import"../chunks/mat3f32.js";import"../chunks/enums3.js";import"../chunks/config.js";import"../chunks/TiledDisplayObject.js";import"../chunks/DisplayObject.js";import"../chunks/TileKey.js";import"../views/layers/LayerView.js";import"../chunks/tileUtils.js";import"../views/2d/ViewState.js";import"../chunks/mat2d.js";import"../chunks/mat2df32.js";import"../chunks/mat2df64.js";import"../chunks/quatf32.js";import"../chunks/EdgeProcessingWorker.js";import"../chunks/intersectorUtilsConversions.js";import"../chunks/hitTestSelectUtils.js";import"../views/ui/DefaultUI.js";import"../views/ui/UI.js";import"./Attribution.js";import"./Attribution/AttributionViewModel.js";import"./Compass.js";import"./Compass/CompassViewModel.js";import"./NavigationToggle.js";import"./NavigationToggle/NavigationToggleViewModel.js";import"./Zoom.js";import"./Zoom/ZoomViewModel.js";import"./Slider/SliderViewModel.js";import"./support/DatePickerViewModel.js";import"../chunks/DateTimeElementViewModel.js";import"../chunks/Popover.js";const S="esri-interactive",M="esri-slider__label",_="esri-slider-with-dropdown__box",D="esri-slider-with-dropdown__dropdown-root",U=" esri-widget__anchor esri-slider-with-dropdown__anchor",C="esri-slider-with-dropdown__anchor--open",I="esri-slider-with-dropdown__anchor--closed",V="esri-slider-with-dropdown__list",O="esri-slider-with-dropdown__list-item",T="esri-slider-with-dropdown__list-item--selected",P="esri-slider-with-dropdown__box--drop-down-on",x="esri-slider-with-dropdown__box--drop-down-off",L="Enter",E="Escape",F="ArrowUp",R="ArrowDown";let A=class extends k{constructor(s,t){super(s,t),this.viewModel=new h,this.buttonTooltip="",this.showDropDown=!0,this.currentIndex=0,this._rootNode=null}renderThumbLabel(s){const t={[P]:this.showDropDown,[x]:!this.showDropDown};return y("div",{class:this.classes(_,M,t)},super.renderThumbLabel(s),this.showDropDown?y("div",{bind:this,afterCreate:this._onRootNodeCreate,class:D},y("button",{class:this.classes(S,U,this.isDropdownOpen?C:I),bind:this,onclick:this._onAnchorClick,onpointerdown:this._killEvent,"aria-label":this.buttonTooltip,title:this.buttonTooltip,"aria-expanded":this.isDropdownOpen.toString(),"aria-haspopup":"listbox",type:"button"},this.currentItem?this.currentItem.name+" ":""),this.isDropdownOpen?y("ol",{class:this.classes(V),onpointerdown:this._killEvent,onblur:this._onDropdownBlur,bind:this,tabindex:"-1","aria-label":this.buttonTooltip,role:"listbox",onkeydown:this._onOlKeyDown,afterCreate:this._focusOnSelectedItem},this.items.map(((s,t)=>y("li",{class:t===this.currentIndex?this.classes(S,O,T):this.classes(S,O),bind:this,onclick:this._onDropdownItemClick,"data-result":t,"aria-label":s.label.join(" "),role:"option","aria-selected":(t===this.currentIndex).toString(),onkeydown:this._onLiKeyDown,onblur:this._onDropdownBlur,tabindex:"0"},s.label.map((s=>y("span",{bind:this},s))))))):null):null)}_onRootNodeCreate(s){this._rootNode=s}_focusOnSelectedItem(s){var t;const i=null!=(t=s.querySelector(`.${T}`))?t:s.firstChild;e(i)&&i instanceof HTMLElement&&(i.scrollIntoView(),i.focus())}_onAnchorClick(){return this.viewModel.toggle(),!0}_onDropdownItemClick(s){const t=s.currentTarget;this.viewModel.selectItem(t["data-result"])}_onDropdownBlur(s){let t=s.relatedTarget;null===t&&(t=document.activeElement),e(this._rootNode)&&!this._rootNode.contains(t)&&t!==this._rootNode.parentElement&&t!==this._rootNode.parentElement.parentElement&&(this.viewModel.isDropdownOpen=!1)}_killEvent(s){return s.stopPropagation(),!0}_onOlKeyDown(s){s.stopPropagation(),d(s)===E&&(this.viewModel.isDropdownOpen=!1)}_onLiKeyDown(s){const t=s.target;switch(d(s)){case F:if(t.previousElementSibling){t.previousElementSibling.focus()}break;case R:if(t.nextElementSibling){t.nextElementSibling.focus()}break;case L:t.click()}}};s([l()],A.prototype,"viewModel",void 0),s([l()],A.prototype,"buttonTooltip",void 0),s([l()],A.prototype,"showDropDown",void 0),s([l({aliasOf:"viewModel.items"})],A.prototype,"items",void 0),s([l({aliasOf:"viewModel.currentIndex"})],A.prototype,"currentIndex",void 0),s([l({aliasOf:"viewModel.currentItem"})],A.prototype,"currentItem",void 0),s([l({aliasOf:"viewModel.isDropdownOpen"})],A.prototype,"isDropdownOpen",void 0),A=s([a("esri.widgets.Daylight.SliderWithDropdown")],A);const B=A,z="esri-daylight",G="esri-icon-environment-settings",N="esri-button",W="esri-daylight__checkbox",q="esri-icon-checkbox-checked",H="esri-daylight__container esri-daylight__day-container",Q="esri-daylight__container esri-daylight__date-container",K="esri-interactive",$=" esri-widget__anchor",J="esri-daylight__container__labelled-tick",Z="esri-icon-pause",Y="esri-icon-play",X="esri-daylight__play-pause-button",ss="esri-select",ts="esri-daylight__season-picker",es="esri-daylight__shadow-container",is="esri-slider--shadow-off",os="esri-slider--shadow-on",rs="esri-daylight__container__tick",ns="esri-icon-checkbox-unchecked",ps="esri-widget",ms="esri-slider--date-on",ls="esri-slider--date-off",as="esri-daylight__panel--error",cs={playButtons:!0,shadowsToggle:!0,datePicker:!0,timezone:!0},us=/(.*)\s(.*)/,hs=t.getLogger("esri.widgets.Daylight");let js=class extends c{constructor(s,t){var e;super(s,t),this.headingLevel=3,this.iconClass=G,this.label=void 0,this.playSpeedMultiplier=1,this.timeSliderSteps=5,this.view=null,this.viewModel=new u,this.visibleElements={...cs},this.dateOrSeason="date",this._timeSlider=new B({viewModel:this.viewModel.timeSliderViewModel,labelFormatFunction:w,inputFormatFunction:w,min:0,max:1439,steps:null!=(e=this.timeSliderSteps)?e:5,values:[0],labelInputsEnabled:!1,visibleElements:{labels:!0},tickConfigs:[{mode:"position",values:[0,360,720,1080,1439],labelsVisible:!0,tickCreatedFunction:this._onPrimaryTickCreated.bind(this)},{mode:"position",values:[120,240,480,600,840,960,1200,1320],tickCreatedFunction:this._onSecondaryTickCreated.bind(this)}],items:[]}),this._datePicker=new g({viewModel:this.viewModel.datePickerViewModel,commitOnMonthChange:!0})}get gmtOffsets(){return i(this.timezoneMessages,v)}castVisibleElements(s){return{...cs,...s}}postInitialize(){this.viewModel.isSupported&&this.own(o((()=>this.viewModel.datePickerViewModel),(s=>this._datePicker.viewModel=s),r),o((()=>this.viewModel.timeSliderViewModel),(s=>this._timeSlider.viewModel=s),r),o((()=>{var s;return null==(s=this.timezoneMessages)?void 0:s.chooseTimezone}),(s=>this._timeSlider.buttonTooltip=s),r),o((()=>{var s;return null==(s=this.visibleElements)?void 0:s.timezone}),(s=>this._timeSlider.showDropDown=s),r),n((()=>this.gmtOffsets),(s=>{this._timeSlider.items=s.map((s=>({utcOffset:s.utcOffset,name:s.short,label:[s.shortWithUTC,s.long]})))}),r),o((()=>[this.viewModel.utcOffset,this.gmtOffsets]),(()=>this._onUTCOffsetChange()),r))}destroy(){this._datePicker.destroy(),this._timeSlider.destroy()}render(){return this.viewModel.isSupported?y("div",{class:this.classes(z,ps)},y(b,{level:this.headingLevel},this.messages.title),this.renderTimeOptions(),this.visibleElements.datePicker?"date"===this.dateOrSeason?this.renderDateOptions():this.renderSeasonOptions():null,this.visibleElements.shadowsToggle?this.renderShadowOptions():null):y("div",{class:this.classes(z,ps)},y("div",{key:"daylight__unsupported",class:as},y("p",null,this.messages.unsupported)))}renderTimeOptions(){const s={[Y]:!this.viewModel.dayPlaying,[Z]:this.viewModel.dayPlaying},t={[os]:this.viewModel.directShadowsEnabled,[is]:!this.viewModel.directShadowsEnabled},e={[ms]:this.visibleElements.datePicker,[ls]:!this.visibleElements.datePicker};return y("div",{class:this.classes(H,t,e),key:"daylight-time-options"},this._timeSlider.render(),this.visibleElements.playButtons?y("button",{bind:this.viewModel,onclick:this.viewModel.toggleDayPlaying,"aria-label":this.messages.playDay,title:this.messages.playDay,type:"button",class:this.classes(N,X,s)},y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},y("path",{d:"M6 3.745L11.255 8 6 12.255z"}))):null)}renderDateOptions(){const s={[Y]:!this.viewModel.yearPlaying,[Z]:this.viewModel.yearPlaying};return y("div",{class:Q,key:"daylight-date-options"},this._datePicker.render(),this.visibleElements.playButtons?y("button",{bind:this.viewModel,onclick:this.viewModel.toggleYearPlaying,"aria-label":this.messages.playYear,title:this.messages.playYear,type:"button",class:this.classes(N,X,s)},y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},y("path",{d:"M6 3.745L11.255 8 6 12.255z"}))):null)}renderShadowOptions(){const s=`${this.id}__shadowButton`,t={[q]:this.viewModel.directShadowsEnabled,[ns]:!this.viewModel.directShadowsEnabled};return y("div",{class:es,key:"daylight-shadow-options"},y("button",{bind:this.viewModel,onclick:this.viewModel.toggleDirectShadows,name:s,class:this.classes(N,W,t),"aria-label":this.messages.directShadow,title:this.messages.directShadow,type:"button"}),y("label",{bind:this.viewModel,onclick:this.viewModel.toggleDirectShadows,for:s,class:this.classes($,K),"aria-label":this.messages.directShadow,title:this.messages.directShadow},this.messages.directShadow))}renderSeasonOptions(){return y("select",{bind:this,onchange:this._onSeasonChange,class:this.classes(ss,ts),value:this.viewModel.currentSeason,"aria-label":this.messages.season},j.map((s=>y("option",{value:s},this.messages[s]))))}_onSeasonChange(s){const t=s.target;this.viewModel.currentSeason=t.value}_onUTCOffsetChange(){var s;const t=this.viewModel.utcOffset,i=null==(s=this._timeSlider.currentItem)?void 0:s.utcOffset,o=this.gmtOffsets;if(!e(o)||i===t)return;const r=o.findIndex((({utcOffset:s})=>s===t));r>-1&&(this._timeSlider.currentIndex=r)}_onPrimaryTickCreated(s,t,e){t.className+=" esri-interactive esri-widget__anchor "+rs+" "+J,e.className+=" esri-interactive esri-widget__anchor";const i=()=>{this.viewModel.timeSliderPosition=s};t.onclick=i,e.onclick=i;const o=e.innerText.match(us);o&&(e.innerHTML=`${o[1]}<br><div class="esri-label__ampm">${o[2]}</div>`)}_onSecondaryTickCreated(s,t){t.className+=" esri-interactive esri-widget__anchor "+rs,t.onclick=()=>{this.viewModel.timeSliderPosition=s}}};s([l({readOnly:!0})],js.prototype,"gmtOffsets",null),s([l(),f("esri/widgets/Daylight/t9n/Daylight")],js.prototype,"messages",void 0),s([l(),f("esri/widgets/support/t9n/timezone")],js.prototype,"timezoneMessages",void 0),s([l()],js.prototype,"headingLevel",void 0),s([l()],js.prototype,"iconClass",void 0),s([l({aliasOf:{source:"messages.title",overridable:!0}})],js.prototype,"label",void 0),s([p("viewModel.playSpeedMultiplier")],js.prototype,"playSpeedMultiplier",void 0),s([p("_timeSlider.steps")],js.prototype,"timeSliderSteps",void 0),s([p("viewModel.view")],js.prototype,"view",void 0),s([l({type:u})],js.prototype,"viewModel",void 0),s([l()],js.prototype,"visibleElements",void 0),s([m("visibleElements")],js.prototype,"castVisibleElements",null),s([l({cast:s=>"season"===s||"date"===s?s:(hs.warn(`"${s}" is not a valid option. Acceptable values are only "date" or "season". Defaulting to "date".`),"date")})],js.prototype,"dateOrSeason",void 0),s([l()],js.prototype,"_timeSlider",void 0),s([l()],js.prototype,"_datePicker",void 0),js=s([a("esri.widgets.Daylight")],js);const ds=js;export{ds as default};
