/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
import{_ as e}from"../chunks/tslib.es6.js";import"../intl.js";import{d as t}from"../chunks/deprecate.js";import{b as s}from"../chunks/domUtils.js";import{E as r}from"../chunks/Evented.js";import n from"../core/Handles.js";import{x as o,clone as l}from"../core/lang.js";import{L as i}from"../chunks/Logger.js";import{a}from"../chunks/Promise.js";import{debounce as c,throwIfNotAbortError as $,eachAlways as d}from"../core/promiseUtils.js";import{watch as h,when as p,initial as m}from"../core/reactiveUtils.js";import{g as u}from"../chunks/uuid.js";import{property as f}from"../core/accessorSupport/decorators/property.js";import{cast as g}from"../core/accessorSupport/decorators/cast.js";import{subclass as y}from"../core/accessorSupport/decorators/subclass.js";import{r as v}from"../chunks/tracking.js";import{S as w}from"../chunks/watch.js";import{d as k}from"../chunks/projector.js";import{g as b}from"../chunks/assets.js";import{makeAbsolute as j}from"../core/urlUtils.js";import{i as N,p as _,W as R}from"../chunks/jsxWidgetSupport.js";import{g as S,a as T,d as x,c as E,b as C}from"../chunks/widgetUtils.js";import{g as L}from"../chunks/widgetThemeUtils.js";import{o as P}from"../chunks/locale.js";import{f as O}from"../chunks/messages.js";import"../chunks/number.js";import"../chunks/jsonMap.js";import"../chunks/object.js";import"../chunks/string.js";import"../request.js";import"../config.js";import"../kernel.js";import"../core/Error.js";import"../core/Accessor.js";import"../chunks/get.js";import"../chunks/utils.js";import"../chunks/handleUtils.js";import"../chunks/metadata.js";import"../chunks/ArrayPool.js";import"../chunks/ensureType.js";import"../core/scheduling.js";import"../chunks/nextTick.js";import"../core/Collection.js";import"../chunks/shared.js";const A={handleInterceptedEvent:(e,t,s,r)=>(e.scheduleRender(),t.properties[`on${r.type}`].apply(t.properties.bind||s,[r]))},H={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,s)=>{e.style[t]=s}},M=(e,t,s=!1)=>{let r=e;return t.forEach(((e,n)=>{var o;const l=null!=(o=r)&&o.children?(i=r.children,a=t=>t.domNode===e,i.find(a)):void 0;var i,a;s&&!l&&n!==t.length-1||(r=l)})),r},U=!0,F=!0,I=!0,B=!0,D=!0,W=!0,z=!0,V=!0,q=!0,G=!0,Y=!1,J=!1,K=!1,Q=!1,X=!0,Z=!1,ee=!0;let te,se,re,ne=!1,oe=!1,le=!1,ie=!1,ae=null,ce=!1;const $e="undefined"!=typeof window?window:{};!1&&$e.CSS;const de=$e.document||{head:{}},he=$e.HTMLElement||class{},pe={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,s,r)=>e.addEventListener(t,s,r),rel:(e,t,s,r)=>e.removeEventListener(t,s,r),ce:(e,t)=>new CustomEvent(e,t)},me=!Z||!I||(()=>(de.head.attachShadow+"").indexOf("[native")>-1)(),ue=(()=>{let e=!1;try{de.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch(e){}return e})(),fe=!!ee&&(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch(e){}return!1})(),ge=(e,t,s,r)=>{s&&s.map((([s,r,n])=>{const o=ve(e,s),l=ye(t,n),i=we(s);pe.ael(o,r,l,i),(t.$rmListeners$=t.$rmListeners$||[]).push((()=>pe.rel(o,r,l,i)))}))},ye=(e,t)=>s=>{try{Q||e.$hostElement$[t](s)}catch(e){vt(e)}},ve=(e,t)=>4&t?de:8&t?$e:16&t?de.body:e,we=e=>ue?{passive:0!=(1&e),capture:0!=(2&e)}:0!=(2&e),ke="http://www.w3.org/1999/xlink",be=new WeakMap,je=e=>{const t=e.$cmpMeta$,s=e.$hostElement$,r=t.$flags$,n=(t.$tagName$,()=>{}),o=((e,t,s,r)=>{let n=Ne(t,s),o=jt.get(n);if(e=11===e.nodeType?e:de,o)if("string"==typeof o){e=e.head||e;let t,s=be.get(e);s||be.set(e,s=new Set),s.has(n)||(t=de.createElement("style"),t.innerHTML=o,e.insertBefore(t,e.querySelector("link")),s&&s.add(n))}else e.adoptedStyleSheets.includes(o)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,o]);return n})(me&&s.shadowRoot?s.shadowRoot:s.getRootNode(),t,e.$modeName$);10&r&&(s["s-sc"]=o,s.classList.add(o+"-h"),2&r&&s.classList.add(o+"-s")),n()},Ne=(e,t)=>"sc-"+(t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$),_e={},Re=e=>"object"===(e=typeof e)||"function"===e,Se=(e,t,...s)=>{let r=null,n=null,o=null,l=!1,i=!1,a=[];const c=t=>{for(let s=0;s<t.length;s++)r=t[s],Array.isArray(r)?c(r):null!=r&&"boolean"!=typeof r&&((l="function"!=typeof e&&!Re(r))&&(r=String(r)),l&&i?a[a.length-1].$text$+=r:a.push(l?Te(null,r):r),i=l)};if(c(s),t&&(Y&&"input"===e&&Oe(t),V&&t.key&&(n=t.key),X&&t.name&&(o=t.name),W)){const e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter((t=>e[t])).join(" "))}if(Y&&a.some(Ee)&&kt("The <Host> must be the single root component. Make sure:\n- You are NOT using hostData() and <Host> in the same component.\n- <Host> is used once, and it's the single root component of the render() function."),z&&"function"==typeof e)return e(null===t?{}:t,a,Ce);const $=Te(e,null);return $.$attrs$=t,a.length>0&&($.$children$=a),V&&($.$key$=n),X&&($.$name$=o),$},Te=(e,t)=>{const s={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return D&&(s.$attrs$=null),V&&(s.$key$=null),X&&(s.$name$=null),s},xe={},Ee=e=>e&&e.$tag$===xe,Ce={forEach:(e,t)=>e.map(Le).forEach(t),map:(e,t)=>e.map(Le).map(t).map(Pe)},Le=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),Pe=e=>{if("function"==typeof e.vtag){const t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),Se(e.vtag,t,...e.vchildren||[])}const t=Te(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},Oe=e=>{const t=Object.keys(e),s=t.indexOf("value");if(-1===s)return;const r=t.indexOf("type"),n=t.indexOf("min"),o=t.indexOf("max"),l=t.indexOf("step");(s<r||s<n||s<o||s<l)&&bt('The "value" prop of <input> should be set after "min", "max", "type" and "step"')},Ae=(e,t,s,r,n,o)=>{if(s!==r){let l=yt(e,t),i=t.toLowerCase();if("class"===t){const t=e.classList,n=Me(s),o=Me(r);t.remove(...n.filter((e=>e&&!o.includes(e)))),t.add(...o.filter((e=>e&&!n.includes(e))))}else if("style"===t){for(const t in s)r&&null!=r[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in r)s&&r[t]===s[t]||(t.includes("-")?e.style.setProperty(t,r[t]):e.style[t]=r[t])}else if("key"===t);else if("ref"===t)r&&r(e);else if(e.__lookupSetter__(t)||"o"!==t[0]||"n"!==t[1]){const a=Re(r);if((l||a&&null!==r)&&!n)try{if(e.tagName.includes("-"))e[t]=r;else{let n=null==r?"":r;"list"===t?l=!1:null!=s&&e[t]==n||(e[t]=n)}}catch(e){}let c=!1;i!==(i=i.replace(/^xlink\:?/,""))&&(t=i,c=!0),null==r||!1===r?!1===r&&""!==e.getAttribute(t)||(c?e.removeAttributeNS(ke,t):e.removeAttribute(t)):(!l||4&o||n)&&!a&&(r=!0===r?"":r,c?e.setAttributeNS(ke,t,r):e.setAttribute(t,r))}else t="-"===t[2]?t.slice(3):yt($e,i)?i.slice(2):i[2]+t.slice(3),s&&pe.rel(e,t,s,!1),r&&pe.ael(e,t,r,!1)}},He=/\s/,Me=e=>e?e.split(He):[],Ue=(e,t,s,r)=>{const n=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,o=e&&e.$attrs$||_e,l=t.$attrs$||_e;for(r in o)r in l||Ae(n,r,o[r],void 0,s,t.$flags$);for(r in l)Ae(n,r,o[r],l[r],s,t.$flags$)},Fe=(e,t,s,r)=>{let n,o,l,i=t.$children$[s],a=0;if(ne||(le=!0,"slot"===i.$tag$&&(te&&r.classList.add(te+"-s"),i.$flags$|=i.$children$?2:1)),null!==i.$text$)n=i.$elm$=de.createTextNode(i.$text$);else if(1&i.$flags$)n=i.$elm$=de.createTextNode("");else{if(ie||(ie="svg"===i.$tag$),n=i.$elm$=de.createElementNS(ie?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&i.$flags$?"slot-fb":i.$tag$),ie&&"foreignObject"===i.$tag$&&(ie=!1),Ue(null,i,ie),null!=te&&n["s-si"]!==te&&n.classList.add(n["s-si"]=te),i.$children$)for(a=0;a<i.$children$.length;++a)o=Fe(e,i,a,n),o&&n.appendChild(o);"svg"===i.$tag$?ie=!1:"foreignObject"===n.tagName&&(ie=!0)}return n["s-hn"]=re,3&i.$flags$&&(n["s-sr"]=!0,n["s-cr"]=se,n["s-sn"]=i.$name$||"",l=e&&e.$children$&&e.$children$[s],l&&l.$tag$===i.$tag$&&e.$elm$&&Ie(e.$elm$,!1)),n},Ie=(e,t)=>{pe.$flags$|=1;const s=e.childNodes;for(let e=s.length-1;e>=0;e--){const r=s[e];r["s-hn"]!==re&&r["s-ol"]&&(Ve(r).insertBefore(r,ze(r)),r["s-ol"].remove(),r["s-ol"]=void 0,le=!0),t&&Ie(r,t)}pe.$flags$&=-2},Be=(e,t,s,r,n,o)=>{let l,i=e["s-cr"]&&e["s-cr"].parentNode||e;for(i.shadowRoot&&i.tagName===re&&(i=i.shadowRoot);n<=o;++n)r[n]&&(l=Fe(null,s,n,e),l&&(r[n].$elm$=l,i.insertBefore(l,ze(t))))},De=(e,t,s,r,n)=>{for(;t<=s;++t)(r=e[t])&&(n=r.$elm$,Qe(r),oe=!0,n["s-ol"]?n["s-ol"].remove():Ie(n,!0),n.remove())},We=(e,t)=>e.$tag$===t.$tag$&&("slot"===e.$tag$?e.$name$===t.$name$:e.$key$===t.$key$),ze=e=>e&&e["s-ol"]||e,Ve=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,qe=(e,t)=>{const s=t.$elm$=e.$elm$,r=e.$children$,n=t.$children$,o=t.$tag$,l=t.$text$;let i;null===l?(ie="svg"===o||"foreignObject"!==o&&ie,"slot"===o||Ue(e,t,ie),null!==r&&null!==n?((e,t,s,r)=>{let n,o,l=0,i=0,a=0,c=0,$=t.length-1,d=t[0],h=t[$],p=r.length-1,m=r[0],u=r[p];for(;l<=$&&i<=p;)if(null==d)d=t[++l];else if(null==h)h=t[--$];else if(null==m)m=r[++i];else if(null==u)u=r[--p];else if(We(d,m))qe(d,m),d=t[++l],m=r[++i];else if(We(h,u))qe(h,u),h=t[--$],u=r[--p];else if(We(d,u))"slot"!==d.$tag$&&"slot"!==u.$tag$||Ie(d.$elm$.parentNode,!1),qe(d,u),e.insertBefore(d.$elm$,h.$elm$.nextSibling),d=t[++l],u=r[--p];else if(We(h,m))"slot"!==d.$tag$&&"slot"!==u.$tag$||Ie(h.$elm$.parentNode,!1),qe(h,m),e.insertBefore(h.$elm$,d.$elm$),h=t[--$],m=r[++i];else{for(a=-1,c=l;c<=$;++c)if(t[c]&&null!==t[c].$key$&&t[c].$key$===m.$key$){a=c;break}a>=0?(o=t[a],o.$tag$!==m.$tag$?n=Fe(t&&t[i],s,a,e):(qe(o,m),t[a]=void 0,n=o.$elm$),m=r[++i]):(n=Fe(t&&t[i],s,i,e),m=r[++i]),n&&Ve(d.$elm$).insertBefore(n,ze(d.$elm$))}l>$?Be(e,null==r[p+1]?null:r[p+1].$elm$,s,r,i,p):i>p&&De(t,l,$)})(s,r,t,n):null!==n?(null!==e.$text$&&(s.textContent=""),Be(s,null,t,n,0,n.length-1)):null!==r&&De(r,0,r.length-1),ie&&"svg"===o&&(ie=!1)):(i=s["s-cr"])?i.parentNode.textContent=l:e.$text$!==l&&(s.data=l)},Ge=e=>{let t,s,r,n,o,l,i=e.childNodes;for(s=0,r=i.length;s<r;s++)if(t=i[s],1===t.nodeType){if(t["s-sr"])for(o=t["s-sn"],t.hidden=!1,n=0;n<r;n++)if(l=i[n].nodeType,i[n]["s-hn"]!==t["s-hn"]||""!==o){if(1===l&&o===i[n].getAttribute("slot")){t.hidden=!0;break}}else if(1===l||3===l&&""!==i[n].textContent.trim()){t.hidden=!0;break}Ge(t)}},Ye=[],Je=e=>{let t,s,r,n,o,l,i=0,a=e.childNodes,c=a.length;for(;i<c;i++){if(t=a[i],t["s-sr"]&&(s=t["s-cr"])&&s.parentNode)for(r=s.parentNode.childNodes,n=t["s-sn"],l=r.length-1;l>=0;l--)s=r[l],s["s-cn"]||s["s-nr"]||s["s-hn"]===t["s-hn"]||(Ke(s,n)?(o=Ye.find((e=>e.$nodeToRelocate$===s)),oe=!0,s["s-sn"]=s["s-sn"]||n,o?o.$slotRefNode$=t:Ye.push({$slotRefNode$:t,$nodeToRelocate$:s}),s["s-sr"]&&Ye.map((e=>{Ke(e.$nodeToRelocate$,s["s-sn"])&&(o=Ye.find((e=>e.$nodeToRelocate$===s)),o&&!e.$slotRefNode$&&(e.$slotRefNode$=o.$slotRefNode$))}))):Ye.some((e=>e.$nodeToRelocate$===s))||Ye.push({$nodeToRelocate$:s}));1===t.nodeType&&Je(t)}},Ke=(e,t)=>1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t,Qe=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(Qe)},Xe=(e,t,s)=>{const r=(e=>Q?ft(e).$hostElement$:e)(e);return{emit:e=>(Y&&!r.isConnected&&bt(`The "${t}" event was emitted, but the dispatcher node is no longer connected to the dom.`),Ze(r,t,{bubbles:!!(4&s),composed:!!(2&s),cancelable:!!(1&s),detail:e}))}},Ze=(e,t,s)=>{const r=pe.ce(t,s);return e.dispatchEvent(r),r},et=(e,t)=>{G&&B&&(e.$flags$|=16),e.$ancestorComponent$;const s=()=>tt(e,t);return G?Ct(s):s()},tt=(e,t)=>{const s=e.$hostElement$,r=(e.$cmpMeta$.$tagName$,()=>{}),n=s;let o;return o=lt(n,t?"componentWillLoad":"componentWillUpdate"),o=it(o,(()=>lt(n,"componentWillRender"))),r(),it(o,(()=>st(e,n,t)))},st=async(e,t,s)=>{const r=e.$hostElement$,n=(e.$cmpMeta$.$tagName$,()=>{});r["s-rc"],s&&je(e);const o=(e.$cmpMeta$.$tagName$,()=>{});rt(e,t,r),o(),n(),nt(e)},rt=(e,t,s)=>{try{ae=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(U||F)&&(q||F)&&(K||((e,t)=>{const s=e.$hostElement$,r=e.$cmpMeta$,n=e.$vnode$||Te(null,null),o=Ee(t)?t:Se(null,null,t);if(re=s.tagName,r.$attrsToReflect$&&(o.$attrs$=o.$attrs$||{},r.$attrsToReflect$.map((([e,t])=>o.$attrs$[t]=s[e]))),o.$tag$=null,o.$flags$|=4,e.$vnode$=o,o.$elm$=n.$elm$=s.shadowRoot||s,te=s["s-sc"],se=s["s-cr"],ne=me&&0!=(1&r.$flags$),oe=!1,qe(n,o),pe.$flags$|=1,le){let e,t,s,r,n,l;Je(o.$elm$);let i=0;for(;i<Ye.length;i++)e=Ye[i],t=e.$nodeToRelocate$,t["s-ol"]||(s=de.createTextNode(""),s["s-nr"]=t,t.parentNode.insertBefore(t["s-ol"]=s,t));for(i=0;i<Ye.length;i++)if(e=Ye[i],t=e.$nodeToRelocate$,e.$slotRefNode$){for(r=e.$slotRefNode$.parentNode,n=e.$slotRefNode$.nextSibling,s=t["s-ol"];s=s.previousSibling;)if(l=s["s-nr"],l&&l["s-sn"]===t["s-sn"]&&r===l.parentNode&&(l=l.nextSibling,!l||!l["s-nr"])){n=l;break}(!n&&r!==t.parentNode||t.nextSibling!==n)&&t!==n&&(!t["s-hn"]&&t["s-ol"]&&(t["s-hn"]=t["s-ol"].parentNode.nodeName),r.insertBefore(t,n))}else 1===t.nodeType&&(t.hidden=!0)}oe&&Ge(o.$elm$),pe.$flags$&=-2,Ye.length=0})(e,t))}catch(t){vt(t,e.$hostElement$)}return ae=null,null},nt=e=>{e.$cmpMeta$.$tagName$;const t=()=>{},s=e.$hostElement$;e.$ancestorComponent$,lt(s,"componentDidRender"),64&e.$flags$?(lt(s,"componentDidUpdate"),t()):(e.$flags$|=64,lt(s,"componentDidLoad"),t())},ot=e=>{if(B){const t=ft(e),s=t.$hostElement$.isConnected;return s&&2==(18&t.$flags$)&&et(t,!1),s}return!1},lt=(e,t,s)=>{if(e&&e[t])try{return e[t](s)}catch(e){vt(e)}},it=(e,t)=>e&&e.then?e.then(t):t(),at=(e,t,s,r)=>{const n=ft(e),o=e,l=n.$instanceValues$.get(t),i=n.$flags$,a=o;var c,$;if(c=s,$=r.$members$[t][0],(s=null==c||Re(c)?c:4&$?"false"!==c&&(""===c||!!c):2&$?parseFloat(c):1&$?String(c):c)!==l){if(n.$instanceValues$.set(t,s),r.$watchers$&&128&i){const e=r.$watchers$[t];e&&e.map((e=>{try{a[e](s,l,t)}catch(e){vt(e,o)}}))}if(2==(18&i)){if(a.componentShouldUpdate&&!1===a.componentShouldUpdate(s,l,t))return;et(n,!1)}}},ct=(e,t,s)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const s=Object.entries(t.$members$),r=e.prototype;s.map((([e,[s]])=>{(31&s||32&s)&&Object.defineProperty(r,e,{get(){return t=e,ft(this).$instanceValues$.get(t);var t},set(s){at(this,e,s,t)},configurable:!0,enumerable:!0})}));{const n=new Map;r.attributeChangedCallback=function(e,t,s){pe.jmp((()=>{const t=n.get(e);if(this.hasOwnProperty(t))s=this[t],delete this[t];else if(r.hasOwnProperty(t)&&"number"==typeof this[t]&&this[t]==s)return;this[t]=(null!==s||"boolean"!=typeof this[t])&&s}))},e.observedAttributes=s.filter((([e,t])=>15&t[0])).map((([e,s])=>{const r=s[1]||e;return n.set(r,e),512&s[0]&&t.$attrsToReflect$.push([e,r]),r}))}}return e},$t=async(e,t,s,r,n)=>{if(0==(32&t.$flags$)&&(n=e.constructor,t.$flags$|=32,customElements.whenDefined(s.$tagName$).then((()=>t.$flags$|=128)),n.style)){let r=n.style;"string"!=typeof r&&(r=r[t.$modeName$=(e=>Nt.map((t=>t(e))).find((e=>!!e)))(e)]);const o=Ne(s,t.$modeName$);if(!jt.has(o)){const e=(s.$tagName$,()=>{});((e,t,s)=>{let r=jt.get(e);fe&&s?(r=r||new CSSStyleSheet,r.replace(t)):r=t,jt.set(e,r)})(o,r,!!(1&s.$flags$)),e()}}t.$ancestorComponent$;et(t,!0)},dt=e=>{const t=e["s-cr"]=de.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},ht=(e,t)=>{const s={$flags$:t[0],$tagName$:t[1]};s.$members$=t[2],s.$listeners$=t[3],s.$watchers$=e.$watchers$,s.$attrsToReflect$=[],!me&&1&s.$flags$&&(s.$flags$|=8);const r=e.prototype.connectedCallback,n=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){gt(this,s)},connectedCallback(){(e=>{if(0==(1&pe.$flags$)){const t=ft(e),s=t.$cmpMeta$,r=(s.$tagName$,()=>{});1&t.$flags$?(ge(e,t,s.$listeners$),t.$lazyInstance$):(t.$flags$|=1,12&s.$flags$&&dt(e),s.$members$&&Object.entries(s.$members$).map((([t,[s]])=>{if(31&s&&e.hasOwnProperty(t)){const s=e[t];delete e[t],e[t]=s}})),$t(e,t,s)),r()}})(this),r&&r.call(this)},disconnectedCallback(){(e=>{if(0==(1&pe.$flags$)){const t=ft(e);t.$rmListeners$&&(t.$rmListeners$.map((e=>e())),t.$rmListeners$=void 0)}})(this),n&&n.call(this)},__attachShadow(){me?this.attachShadow({mode:"open",delegatesFocus:!!(16&s.$flags$)}):this.shadowRoot=this}}),e.is=s.$tagName$,ct(e,s)},pt=e=>{const t=new URL(e,pe.$resourcesUrl$);return t.origin!==$e.location.origin?t.href:t.pathname},mt=(e,t)=>t,ut=new WeakMap,ft=e=>ut.get(e),gt=(e,t)=>{const s={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return ge(e,s,t.$listeners$),ut.set(e,s)},yt=(e,t)=>t in e,vt=(e,t)=>(0,console.error)(e,t),wt=J?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"],kt=(...e)=>console.error(...wt,...e),bt=(...e)=>console.warn(...wt,...e),jt=new Map,Nt=[],_t=[],Rt=[],St=(e,t)=>s=>{e.push(s),ce||(ce=!0,t&&4&pe.$flags$?Et(xt):pe.raf(xt))},Tt=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(e){vt(e)}e.length=0},xt=()=>{Tt(_t),Tt(Rt),(ce=_t.length>0)&&pe.raf(xt)},Et=e=>{return Promise.resolve(t).then(e);var t},Ct=St(Rt,!0),Lt={isDev:!!Y,isBrowser:!0,isServer:!1,isTesting:!!J};let Pt;function Ot(){var e;e=j(b("esri/widgets/support/components/assets")),pe.$resourcesUrl$=e}Pt="esri/widgets/support/components/assets";const At=i.getLogger("esri.widgets.Widget");let Ht=0;const Mt="esri-icon-checkbox-unchecked";function Ut(e,t){for(const s in t)null!=e[s]&&("object"==typeof e[s]&&"object"==typeof t[s]?Ut(e[s],t[s]):e[s]=t[s]);return e}const Ft=(e=>{let t;const s={...A,...e},r=(e=>({...H,...e}))(s),n=r.performanceLogger;let o,l=!0,i=!1;const a=[],c=[],$=(e,o,l)=>{let i;r.eventHandlerInterceptor=(e,r,o,l)=>function(e){let r;n("domEvent",e);const o=((e,t)=>{const s=[];for(;e&&e!==t;)s.push(e),e=e.parentNode;return s})(e.currentTarget,i.domNode),l=o.some((e=>{var t;return customElements.get(null==e||null==(t=e.tagName)?void 0:t.toLowerCase())}));if(e.eventPhase===Event.CAPTURING_PHASE||!l)o.reverse(),r=M(i.getLastRender(),o);else{const t=e.composedPath(),s=t.slice(t.indexOf(e.currentTarget),t.indexOf(i.domNode)).filter((e=>e.getRootNode()===e.ownerDocument)).reverse();r=M(i.getLastRender(),s,!0)}let a;return r&&(a=s.handleInterceptedEvent(t,r,this,e)),n("domEventProcessed",e),a},null==s.postProcessProjectionOptions||s.postProcessProjectionOptions(r);const $=l();i=e(o,$,r),a.push(i),c.push(l),s.afterFirstVNodeRendered&&s.afterFirstVNodeRendered(i,$)};let d=()=>{if(o=void 0,l){l=!1,n("renderStart",void 0);for(let e=0;e<a.length;e++){const t=c[e]();n("rendered",void 0),a[e].update(t),n("patched",void 0)}n("renderDone",void 0),l=!0}};return s.modifyDoRenderImplementation&&(d=s.modifyDoRenderImplementation(d,a,c)),t={renderNow:d,scheduleRender:()=>{o||i||(o=requestAnimationFrame(d))},stop:()=>{o&&(cancelAnimationFrame(o),o=void 0),i=!0},resume:()=>{i=!1,l=!0,t.scheduleRender()},append:(e,t)=>{$(k.append,e,t)},insertBefore:(e,t)=>{$(k.insertBefore,e,t)},merge:(e,t)=>{$(k.merge,e,t)},replace:(e,t)=>{$(k.replace,e,t)},detach:e=>{for(let t=0;t<c.length;t++)if(c[t]===e)return c.splice(t,1),a.splice(t,1)[0];throw new Error("renderFunction was not found")}},t})({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,s=/capture$/i;e.eventHandlerInterceptor=(e,r,n,o)=>{const l=t(e,r,n,o),i=s.test(e);if(!((e=e.replace(s,"")).toLowerCase()in n)||i){const t=e[2].toLowerCase()+e.slice(3),s=e=>l.call(n,e);n.addEventListener(t,s,i);const r=()=>n.removeEventListener(t,s,i),a=o.afterRemoved;o.afterRemoved=e=>{null==a||a(e),r()}}return l}},handleInterceptedEvent(e,t,s,r){const{eventPhase:n,type:o}=r,l=n===Event.CAPTURING_PHASE;let i=`on${o}${l?"capture":""}`;const a=t.properties;(i in a||(i=`on${o[0].toUpperCase()}${o.slice(1)}${l?"Capture":""}`,i in a))&&(C(),e.scheduleRender(),a[i].call(a.bind||s,r))}});let It=!1,Bt=class extends(a(r.EventedAccessor)){constructor(e,s){super(e,s),this._attached=!1,this._internalHandles=new n,this._projector=Ft,this._readyForTrueRender=!1,this.domNode=null,this.iconClass=Mt,this.label=this.declaredClass.split(".").pop(),this.visible=!0,this.key=this,this._loadLocale=c((async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const e=await d(this._messageBundleProps.map((async({bundlePath:e,propertyName:t})=>{let s=await O(e);this.uiStrings&&Object.keys(this.uiStrings)&&(s=Ut(l(s),this.uiStrings)),this[t]=s})));for(const t of e)t.error&&At.error("widget-intl:locale-error",this.declaredClass,t.error)}await this.loadLocale()})),Ot();const r=L()||"light";["light","dark"].includes(r)||t(At,"The following themes are deprecated: light-blue, dark-blue, light-green, dark-green, light-purple, dark-purple, light-red, and dark-red.",{version:"4.19",warnOnce:!0,see:"https://developers.arcgis.com/javascript/latest/styling/"});const o="esri-widget-uid-"+u(),i=this.render.bind(this);this._trackingTarget=new w((()=>this.scheduleRender()));const a=()=>{var e;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:o,class:"",styles:{display:"none"}},domNode:void 0,children:void 0,text:void 0};const t=i();let{properties:s}=t;s||(t.properties=s={});let{key:r,styles:n}=s;r||(s.key=o),n||(s.styles=n={}),n.display||(n.display="");let l=0;return null==(e=t.children)||e.forEach((e=>{if(N(e.vnodeSelector))return;let{properties:t}=e;t||(e.properties=t={}),t.key||(t.key=`${this.id}--${l++}`)})),_(this,t)};this.render=()=>{if(It)return a();let e=S(this);if(e)return e;this._trackingTarget.clear(),It=!0;try{e=v(this._trackingTarget,a)}finally{It=!1}return T(this,e),e},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then((()=>{this._readyForTrueRender=!0,this._postInitialize()})))}normalizeCtorArgs(e,t){const s={...e};return t&&(s.container=t),s}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then((()=>{})).catch($)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(this._trackingTarget=o(this._trackingTarget),this.viewModel=o(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,x(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return s(e)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+Ht++}set id(e){e&&this._set("id",e)}get renderable(){return this._resourcesFetch}get test(){return{projector:this._projector,handles:this._internalHandles}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(x(this),this._projector.scheduleRender())}classes(...e){return E.apply(this,e)}own(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments)),this._internalHandles.add(e)}renderNow(){x(this),this._projector.renderNow()}_postInitialize(){var e;if(this.destroyed)return;this.scheduleRender(),null!=(e=this._delegatedEventNames)&&e.length&&this._internalHandles.add(h((()=>this.viewModel),((e,t)=>{t&&this._internalHandles.remove("delegated-events"),e&&this._internalHandles.add(this._delegatedEventNames.map((t=>e.on(t,(e=>{this.emit(t,e)})))),"delegated-events")}),m)),this.postInitialize();const t=async()=>{await this._loadLocale().catch($),this.scheduleRender()};this._internalHandles.add([P(t),h((()=>this.uiStrings),t),p((()=>this.container),(e=>{this.destroyed||this._attach(e)}),{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){e&&this._attached&&(this._projector.detach(this.render),e.parentNode&&e.parentNode.removeChild(e),this._attached=!1)}};Bt[R]=!0,e([f()],Bt.prototype,"_readyForTrueRender",void 0),e([f({value:null})],Bt.prototype,"container",null),e([g("container")],Bt.prototype,"castContainer",null),e([f({aliasOf:"container"})],Bt.prototype,"domNode",void 0),e([f()],Bt.prototype,"iconClass",void 0),e([f()],Bt.prototype,"id",null),e([f()],Bt.prototype,"label",void 0),e([f()],Bt.prototype,"renderable",null),e([f()],Bt.prototype,"uiStrings",void 0),e([f()],Bt.prototype,"viewModel",void 0),e([f()],Bt.prototype,"visible",void 0),e([f()],Bt.prototype,"key",void 0),e([f()],Bt.prototype,"children",void 0),e([f()],Bt.prototype,"afterCreate",void 0),e([f()],Bt.prototype,"afterUpdate",void 0),e([f()],Bt.prototype,"afterRemoved",void 0),Bt=e([y("esri.widgets.Widget")],Bt);const Dt=Bt;export{Lt as B,mt as F,he as H,xe as a,Xe as c,Dt as default,ot as f,pt as g,Se as h,ht as p};
