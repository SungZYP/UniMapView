/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
import{C as e}from"./context-util.js";import{b as t,T as a,a as n,g as s,c as r,f as i,q as o,D as u}from"./enums.js";import"./FramebufferObject.js";import{T as f}from"./Texture.js";import{V as m}from"./VertexElementDescriptor.js";function l(o,u,m="nearest",l=!1){var c;const _=!(l&&"u8"===u.pixelType),p=_?t.FLOAT:t.UNSIGNED_BYTE,T=null==u.pixels||0===u.pixels.length?null:_?u.getAsRGBAFloat():u.getAsRGBA(),g=null==(c=o.capabilities.textureFloat)?void 0:c.textureFloatLinear,E={width:u.width,height:u.height,target:a.TEXTURE_2D,pixelFormat:n.RGBA,internalFormat:o.type===e.WEBGL2&&_?s.RGBA32F:n.RGBA,samplingMode:!g||"bilinear"!==m&&"cubic"!==m?r.NEAREST:r.LINEAR,dataType:p,wrapMode:i.CLAMP_TO_EDGE,flipped:!1};return new f(o,E,T)}function c(o,u){const{spacing:m,offsets:l,coefficients:c,size:[_,p]}=u,T=m[0]>1,g={width:T?4*_:_,height:p,target:a.TEXTURE_2D,pixelFormat:n.RGBA,internalFormat:o.type===e.WEBGL2?s.RGBA32F:n.RGBA,dataType:t.FLOAT,samplingMode:r.NEAREST,wrapMode:i.CLAMP_TO_EDGE,flipped:!1},E=new Float32Array(T?_*p*16:2*l.length);if(T)for(let e=0,t=0;e<c.length;e++)E[t++]=c[e],e%3==2&&(E[t++]=1);else for(let e=0;e<p;e++)for(let t=0;t<_;t++){const a=4*(e*_+t),n=2*(t*p+e);E[a]=l[n],E[a+1]=l[n+1],E[a+3]=-1===l[n]?0:1}return new f(o,g,E)}function _(e,s){const o={width:s.length/4,height:1,target:a.TEXTURE_2D,pixelFormat:n.RGBA,internalFormat:n.RGBA,dataType:t.UNSIGNED_BYTE,samplingMode:r.NEAREST,wrapMode:i.CLAMP_TO_EDGE,flipped:!1};return new f(e,o,s)}function p(e,t,a,n=1,s=!0,r=!1){return{u_flipY:s,u_isFloatTexture:r,u_applyTransform:!!e,u_opacity:n,u_transformSpacing:e?e.spacing:null,u_transformGridSize:e?e.size:null,u_targetImageSize:t,u_srcImageSize:a}}function T(e,t){return{u_colormapOffset:t||0,u_colormapMaxIndex:e?e.length/4-1:null}}function g(e,t){return{u_scale:e,u_offset:t}}function E(e){return{u_bandCount:e.bandCount,u_minOutput:e.outMin,u_maxOutput:e.outMax,u_minCutOff:e.minCutOff,u_maxCutOff:e.maxCutOff,u_factor:e.factor,u_useGamma:e.useGamma,u_gamma:e.gamma,u_gammaCorrection:e.gammaCorrection}}function A(e){return{u_hillshadeType:e.hillshadeType,u_sinZcosAs:e.sinZcosAs,u_sinZsinAs:e.sinZsinAs,u_cosZs:e.cosZs,u_weights:e.weights,u_factor:e.factor,u_minValue:e.minValue,u_maxValue:e.maxValue}}function O(e,t){const a=e.gl,n=t.glName,s=a.getProgramParameter(n,a.ACTIVE_UNIFORMS),r=new Map;let i;for(let e=0;e<s;e++)i=a.getActiveUniform(n,e),i&&r.set(i.name,{location:a.getUniformLocation(n,i.name),info:i});return r}function h(e,t,a){Object.keys(a).forEach((n=>{const s=t.get(n)||t.get(n+"[0]");s&&function(e,t,a,n){if(null===n||null==a)return!1;const{info:s}=n;switch(s.type){case o.FLOAT:s.size>1?e.setUniform1fv(t,a):e.setUniform1f(t,a);break;case o.FLOAT_VEC2:e.setUniform2fv(t,a);break;case o.FLOAT_VEC3:e.setUniform3fv(t,a);break;case o.FLOAT_VEC4:e.setUniform4fv(t,a);break;case o.FLOAT_MAT3:e.setUniformMatrix3fv(t,a);break;case o.FLOAT_MAT4:e.setUniformMatrix4fv(t,a);break;case o.INT:s.size>1?e.setUniform1iv(t,a):e.setUniform1i(t,a);break;case o.BOOL:e.setUniform1i(t,a?1:0);break;case o.INT_VEC2:case o.BOOL_VEC2:e.setUniform2iv(t,a);break;case o.INT_VEC3:case o.BOOL_VEC3:e.setUniform3iv(t,a);break;case o.INT_VEC4:case o.BOOL_VEC4:e.setUniform4iv(t,a);break;default:return!1}}(e,n,a[n],s)}))}function d(e,t,a,n){a.length===n.length&&(n.some((e=>null==e))||a.some((e=>null==e))||a.forEach(((a,s)=>{t.setUniform1i(a,s),e.bindTexture(n[s],s)})))}const x={geometry:[new m("a_pos",2,u.BYTE,0,2)]},F={geometry:[new m("a_pos",2,u.BYTE,0,4),new m("a_tex",2,u.BYTE,2,4)]},U={geometry:[new m("a_pos",2,u.UNSIGNED_SHORT,0,4)]};export{x as P,l as a,_ as b,c,h as d,T as e,E as f,p as g,A as h,O as i,g as j,U as k,F as l,d as s};
