/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
import{h as r}from"./handleUtils.js";import{clone as t,a as n}from"../core/lang.js";function e(r){return r?r.__accessor__?r.__accessor__:r.propertyInvalidated?r:null:null}function a(r,t){return null!=r&&r.metadatas&&null!=r.metadatas[t]}function i(r,t,n){if(n){return s(r,t,{policy:n,path:""})}return s(r,t,null)}function s(r,e,a){return e?Object.keys(e).reduce((function(r,i){let o=null,u="merge";if(a&&(o=a.path?`${a.path}.${i}`:i,u=a.policy(o)),"replace"===u)return r[i]=e[i],r;if(void 0===r[i])return r[i]=t(e[i]),r;let l=r[i],c=e[i];if(l===c)return r;if(Array.isArray(c)||Array.isArray(r))l=l?Array.isArray(l)?r[i]=l.concat():r[i]=[l]:r[i]=[],c&&(Array.isArray(c)||(c=[c]),c.forEach((r=>{-1===l.indexOf(r)&&l.push(r)})));else if(c&&"object"==typeof c)if(a){const t=a.path;a.path=n(o),r[i]=s(l,c,a),a.path=t}else r[i]=s(l,c,null);else r.hasOwnProperty(i)&&!e.hasOwnProperty(i)||(r[i]=c);return r}),r||{}):r}function o(r){return Array.isArray(r)?r:r.split(".")}function u(r){return r.indexOf(",")>-1?r.split(",").map((r=>r.trim())):[r.trim()]}function l(t,n,e,a){const i=function(r){if(Array.isArray(r)){const t=[];for(const n of r)t.push(...u(n));return t}return u(r)}(n);if(1!==i.length){const n=i.map((r=>a(t,r,e)));return r(n)}return a(t,i[0],e)}function c(r){let t=!1;return()=>{t||(t=!0,r())}}export{l as a,e as g,a as i,i as m,c as o,o as p};
