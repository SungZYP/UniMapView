/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
import{i as e}from"../core/lang.js";import{s}from"./jsonMap.js";import{g as r}from"./projectionEllipsoid.js";import t,{b as i,c as n,d as a,o as u}from"../geometry/SpatialReference.js";import{e as c,m as o,a as l}from"./Ellipsoid.js";const m=39.37,f=c.radius*Math.PI/200,d=/UNIT\[([^\]]+)\]\]$/i,U=u,q=/UNIT\[([^\]]+)\]/i,B=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),k=s()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),h=e=>e*e,b=e=>e*e*e,p={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:h(.001)},"square-centimeters":{inBaseUnits:h(.01)},"square-decimeters":{inBaseUnits:h(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:h(1e3)},"square-inches":{inBaseUnits:h(.0254)},"square-feet":{inBaseUnits:h(.3048)},"square-yards":{inBaseUnits:h(.9144)},"square-miles":{inBaseUnits:h(1609.344)},"square-us-feet":{inBaseUnits:h(1200/3937)},acres:{inBaseUnits:.0015625*h(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*b(.001)},"cubic-centimeters":{inBaseUnits:1e3*b(.01)},"cubic-decimeters":{inBaseUnits:1e3*b(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*b(1e3)},"cubic-inches":{inBaseUnits:1e3*b(.0254)},"cubic-feet":{inBaseUnits:1e3*b(.3048)},"cubic-yards":{inBaseUnits:1e3*b(.9144)},"cubic-miles":{inBaseUnits:1e3*b(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},y=function(){const e={};for(const s in p)for(const r in p[s].units)e[r]=s;return e}();const _=["metric","imperial","square-inches","square-feet","square-yards","square-miles","square-us-feet","square-meters","square-kilometers","acres","ares","hectares"],g=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"];function w(e){return"imperial"===e||"metric"===e}function S(e){const s=y[e];if(s)return s;throw new Error("unknown type")}function M(e,s=null){return s=s||S(e),p[s].baseUnit===e}function j(e,s,r){if(s===r)return e;const t=S(s);if(t!==S(r))throw new Error("incompatible units");const i=M(s,t)?e:function(e,s,r){return e*p[r].units[s].inBaseUnits}(e,s,t);return M(r,t)?i:function(e,s,r){return e/p[r].units[s].inBaseUnits}(i,r,t)}function P(e,s,r){switch(r){case"metric":return I(e,s);case"imperial":return D(e,s);default:return r}}function x(e,s,r){switch(r){case"metric":return C(e,s);case"imperial":return v(e,s);default:return r}}function I(e,s){return j(e,s,"meters")<3e3?"meters":"kilometers"}function C(e,s){return j(e,s,"meters")<1e5?"meters":"kilometers"}function D(e,s){return j(e,s,"feet")<1e3?"feet":"miles"}function v(e,s){return j(e,s,"feet")<1e5?"feet":"miles"}function E(e,s){return j(e,s,"square-meters")<3e6?"square-meters":"square-kilometers"}function F(e,s){return j(e,s,"square-feet")<1e6?"square-feet":"square-miles"}function N(e,s,r){return j(e,s,"meters")/(r*Math.PI/180)}function O(e){return k.fromJSON(e.toLowerCase())||null}function A(e){if(e&&"object"==typeof e&&!i(e))return 1;const s=K(e);return s>1e5?1:s}function J(e){return K(e)>=(e instanceof t?r(e).metersPerDegree:1e5)?"meters":G(e)}function K(e,s=c.metersPerDegree){return R(e,!0)||s}function R(e,s=!1){let r,t,i=null;if(null!=e&&("object"==typeof e?(r=e.wkid,t=e.wkt):"number"==typeof e?r=e:"string"==typeof e&&(t=e)),r){if(n(r))return o.metersPerDegree;if(a(r))return l.metersPerDegree;i=U.values[U[r]],!i&&s&&B.has(r)&&(i=f)}else t&&(L(t)?i=T(d.exec(t),i):H(t)&&(i=T(q.exec(t),i)));return i}function T(e,s){return e&&e[1]?Y(e[1]):s}function Y(e){return parseFloat(e.split(",")[1])}function G(s){let r,t,i=null;if(null!=s&&("object"==typeof s?(r=s.wkid,t=s.wkt):"number"==typeof s?r=s:"string"==typeof s&&(t=s)),r)i=U.units[U[r]];else if(t){const e=L(t)?d:H(t)?q:null;if(e){const s=e.exec(t);s&&s[1]&&(i=function(e){const s=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let r=s&&s[1];if(!r||-1===U.units.indexOf(r)){const s=Y(e);r=null;const t=U.values;for(let e=0;e<t.length;++e)if(Math.abs(s-t[e])<1e-7){r=U.units[e];break}}return r}(s[1]))}}return e(i)?O(i):null}function H(e){return/^GEOCCS/i.test(e)}function L(e){return/^PROJCS/i.test(e)}function $(e){if(!e)return null;switch(G(e)){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric";case null:case void 0:return null}return null}const z={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},Q={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},V=s()(z),W=s()(Q);s()({...z,...Q});export{g as a,A as b,j as c,J as d,R as e,V as f,K as g,W as h,m as i,E as j,D as k,N as l,_ as m,I as n,$ as o,F as p,S as q,C as r,v as s,w as t,O as u,G as v,P as w,x};
