// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/handleUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../widgets/Widget ../widgets/support/widget ../widgets/support/decorators/messageBundle ../widgets/support/jsxFactory".split(" "),function(da,y,ea,B,N,ua,va,fa,t,ha,ia,v){function S(a,b){var d=Object.keys(a);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(a);
b&&(e=e.filter(function(g){return Object.getOwnPropertyDescriptor(a,g).enumerable}));d.push.apply(d,e)}return d}function ja(a){for(var b=1;b<arguments.length;b++){var d=null!=arguments[b]?arguments[b]:{};b%2?S(Object(d),!0).forEach(function(e){var g=d[e];e in a?Object.defineProperty(a,e,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[e]=g}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(d)):S(Object(d)).forEach(function(e){Object.defineProperty(a,
e,Object.getOwnPropertyDescriptor(d,e))})}return a}N='input select textarea a[href] button [tabindex] audio[controls] video[controls] [contenteditable]:not([contenteditable\x3d"false"]) details\x3esummary:first-of-type details'.split(" ");var O=N.join(","),C="undefined"===typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,T=function(a,b,d){var e=Array.prototype.slice.apply(a.querySelectorAll(O));b&&C.call(a,O)&&e.unshift(a);
return e=e.filter(d)},U=function(a){var b=parseInt(a.getAttribute("tabindex"),10);return isNaN(b)?"true"===a.contentEditable||("AUDIO"===a.nodeName||"VIDEO"===a.nodeName||"DETAILS"===a.nodeName)&&null===a.getAttribute("tabindex")?0:a.tabIndex:b},ka=function(a,b){return a.tabIndex===b.tabIndex?a.documentOrder-b.documentOrder:a.tabIndex-b.tabIndex},la=function(a){return"DETAILS"===a.tagName&&Array.prototype.slice.apply(a.children).some(function(b){return"SUMMARY"===b.tagName})},ma=function(a,b){for(var d=
0;d<a.length;d++)if(a[d].checked&&a[d].form===b)return a[d]},na=function(a){if(!a.name)return!0;var b=a.form||a.ownerDocument,d=function(g){return b.querySelectorAll('input[type\x3d"radio"][name\x3d"'+g+'"]')};if("undefined"!==typeof window&&"undefined"!==typeof window.CSS&&"function"===typeof window.CSS.escape)var e=d(window.CSS.escape(a.name));else try{e=d(a.name)}catch(g){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",
g.message),!1}d=ma(e,a.form);return!d||d===a},oa=function(a,b){if("hidden"===getComputedStyle(a).visibility)return!0;var d=C.call(a,"details\x3esummary:first-of-type")?a.parentElement:a;if(C.call(d,"details:not([open]) *"))return!0;if(!b||"full"===b)for(;a;){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}else if("non-zero-area"===b)return a=a.getBoundingClientRect(),b=a.height,0===a.width&&0===b;return!1},P=function(a,b){var d;(d=b.disabled)||(d="INPUT"===b.tagName&&"hidden"===
b.type);if(!(a=d||oa(b,a.displayCheck)||la(b)))a:{if("INPUT"===b.tagName||"SELECT"===b.tagName||"TEXTAREA"===b.tagName||"BUTTON"===b.tagName)for(a=b.parentElement;a;){if("FIELDSET"===a.tagName&&a.disabled){for(d=0;d<a.children.length;d++){var e=a.children.item(d);if("LEGEND"===e.tagName){if(e.contains(b)){a=!1;break a}break}}a=!0;break a}a=a.parentElement}a=!1}return a?!1:!0},V=function(a,b){(a=!P(a,b))||(a="INPUT"===b.tagName&&"radio"===b.type&&!na(b));return a||0>U(b)?!1:!0},pa=function(a,b){b=
b||{};var d=[],e=[];T(a,b.includeContainer,V.bind(null,b)).forEach(function(g,h){var u=U(g);0===u?d.push(g):e.push({documentOrder:h,tabIndex:u,node:g})});return e.sort(ka).map(function(g){return g.node}).concat(d)},qa=function(a,b){b=b||{};return T(a,b.includeContainer,P.bind(null,b))},J=function(a,b){b=b||{};if(!a)throw Error("No node provided");return!1===C.call(a,O)?!1:V(b,a)},ra=N.concat("iframe").join(","),Q=function(a,b){b=b||{};if(!a)throw Error("No node provided");return!1===C.call(a,ra)?
!1:P(b,a)},W=function(){var a=[];return{activateTrap:function(b){if(0<a.length){var d=a[a.length-1];d!==b&&d.pause()}d=a.indexOf(b);-1!==d&&a.splice(d,1);a.push(b)},deactivateTrap:function(b){b=a.indexOf(b);-1!==b&&a.splice(b,1);0<a.length&&a[a.length-1].unpause()}}}(),R=function(a,b){var d=-1;a.every(function(e,g){return b(e)?(d=g,!1):!0});return d},D=function(a){for(var b=arguments.length,d=Array(1<b?b-1:0),e=1;e<b;e++)d[e-1]=arguments[e];return"function"===typeof a?a.apply(void 0,d):a},K=function(a){return a.target.shadowRoot&&
"function"===typeof a.composedPath?a.composedPath()[0]:a.target},ta=function(a,b){var d=(null===b||void 0===b?void 0:b.document)||document,e=ja({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},b),g=[],h=[],u=null,z=null,p=!1,w=!1,E=void 0,q=function(k,c,f){return k&&void 0!==k[c]?k[c]:e[f||c]},A=function(k){return!(!k||!g.some(function(c){return c.contains(k)}))},F=function(k){var c=e[k];if("function"===typeof c){for(var f=arguments.length,l=Array(1<f?f-1:0),m=1;m<f;m++)l[m-
1]=arguments[m];c=c.apply(void 0,l)}if(!c){if(void 0===c||!1===c)return c;throw Error("`".concat(k,"` was specified but was not a node, or did not return a node"));}f=c;if("string"===typeof c&&(f=d.querySelector(c),!f))throw Error("`".concat(k,"` as selector refers to no known node"));return f},L=function(){var k=F("initialFocus");if(!1===k)return!1;void 0===k&&(k=A(d.activeElement)?d.activeElement:(k=h[0])&&k.firstTabbableNode||F("fallbackFocus"));if(!k)throw Error("Your focus-trap needs to have at least one focusable element");
return k},G=function(){h=g.map(function(k){var c=pa(k),f=qa(k);if(0<c.length)return{container:k,firstTabbableNode:c[0],lastTabbableNode:c[c.length-1],nextTabbableNode:function(l){var m=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,r=f.findIndex(function(n){return n===l});return m?f.slice(r+1).find(function(n){return J(n)}):f.slice(0,r).reverse().find(function(n){return J(n)})}}}).filter(function(k){return!!k});if(0>=h.length&&!F("fallbackFocus"))throw Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");
},H=function f(c){!1!==c&&c!==d.activeElement&&(c&&c.focus?(c.focus({preventScroll:!!e.preventScroll}),z=c,c.tagName&&"input"===c.tagName.toLowerCase()&&"function"===typeof c.select&&c.select()):f(L()))},X=function(c){var f=F("setReturnFocus",c);return f?f:!1===f?!1:c},M=function(c){var f=K(c);A(f)||(D(e.clickOutsideDeactivates,c)?x.deactivate({returnFocus:e.returnFocusOnDeactivate&&!Q(f)}):D(e.allowOutsideClick,c)||c.preventDefault())},Y=function(c){var f=K(c),l=A(f);l||f instanceof Document?l&&
(z=f):(c.stopImmediatePropagation(),H(z||L()))},sa=function(c){var f=K(c);G();var l=null;if(0<h.length){var m=R(h,function(I){return I.container.contains(f)}),r=0<=m?h[m]:void 0;if(0>m)l=c.shiftKey?h[h.length-1].lastTabbableNode:h[0].firstTabbableNode;else if(c.shiftKey){var n=R(h,function(I){return f===I.firstTabbableNode});0>n&&(r.container===f||Q(f)&&!J(f)&&!r.nextTabbableNode(f,!1))&&(n=m);0<=n&&(l=h[0===n?h.length-1:n-1].lastTabbableNode)}else n=R(h,function(I){return f===I.lastTabbableNode}),
0>n&&(r.container===f||Q(f)&&!J(f)&&!r.nextTabbableNode(f))&&(n=m),0<=n&&(l=h[n===h.length-1?0:n+1].firstTabbableNode)}else l=F("fallbackFocus");l&&(c.preventDefault(),H(l))},Z=function(c){"Escape"!==c.key&&"Esc"!==c.key&&27!==c.keyCode||!1===D(e.escapeDeactivates,c)?"Tab"!==c.key&&9!==c.keyCode||sa(c):(c.preventDefault(),x.deactivate())},aa=function(c){if(!D(e.clickOutsideDeactivates,c)){var f=K(c);A(f)||D(e.allowOutsideClick,c)||(c.preventDefault(),c.stopImmediatePropagation())}},ba=function(){if(p)return W.activateTrap(x),
E=e.delayInitialFocus?setTimeout(function(){H(L())},0):H(L()),d.addEventListener("focusin",Y,!0),d.addEventListener("mousedown",M,{capture:!0,passive:!1}),d.addEventListener("touchstart",M,{capture:!0,passive:!1}),d.addEventListener("click",aa,{capture:!0,passive:!1}),d.addEventListener("keydown",Z,{capture:!0,passive:!1}),x},ca=function(){if(p)return d.removeEventListener("focusin",Y,!0),d.removeEventListener("mousedown",M,!0),d.removeEventListener("touchstart",M,!0),d.removeEventListener("click",
aa,!0),d.removeEventListener("keydown",Z,!0),x};var x={activate:function(c){if(p)return this;var f=q(c,"onActivate"),l=q(c,"onPostActivate"),m=q(c,"checkCanFocusTrap");m||G();p=!0;w=!1;u=d.activeElement;f&&f();c=function(){m&&G();ba();l&&l()};if(m)return m(g.concat()).then(c,c),this;c();return this},deactivate:function(c){if(!p)return this;clearTimeout(E);E=void 0;ca();w=p=!1;W.deactivateTrap(x);var f=q(c,"onDeactivate"),l=q(c,"onPostDeactivate"),m=q(c,"checkCanReturnFocus");f&&f();var r=q(c,"returnFocus",
"returnFocusOnDeactivate");c=function(){setTimeout(function(){r&&H(X(u));l&&l()},0)};if(r&&m)return m(X(u)).then(c,c),this;c();return this},pause:function(){if(w||!p)return this;w=!0;ca();return this},unpause:function(){if(!w||!p)return this;w=!1;G();ba();return this},updateContainerElements:function(c){g=[].concat(c).filter(Boolean).map(function(f){return"string"===typeof f?d.querySelector(f):f});p&&G();return this}};x.updateContainerElements(a);return x};t=function(a){function b(e,g){var h=a.call(this,
e,g)||this;h.container=document.createElement("div");h.content=null;h.open=!1;h._close=()=>{h.open=!1};document.body.appendChild(h.container);h.own(h.watch("open",()=>h._toggleFocusTrap()));return h}da._inheritsLoose(b,a);var d=b.prototype;d.destroy=function(){this._destroyFocusTrap()};d.render=function(){var e=this.id;const {open:g,content:h,title:u,messages:z}=this;var p=g&&!!h;const w={["esri-identity-modal--open"]:p,["esri-identity-modal--closed"]:!p},E=v.tsx("button",{class:"esri-identity-modal__close-button",
"aria-label":z.close,title:z.close,bind:this,onclick:this._close},v.tsx("span",{"aria-hidden":"true",class:"esri-icon-close"})),q=`${e}_title`;e=`${e}_content`;const A=u?v.tsx("h1",{id:q,class:"esri-identity-modal__title"},u):null;p=p?v.tsx("div",{bind:this,class:"esri-identity-modal__dialog",role:"dialog","aria-labelledby":q,"aria-describedby":e,afterCreate:this._createFocusTrap},E,A,this._renderContent(e)):null;return v.tsx("div",{tabIndex:-1,class:this.classes("esri-identity-modal",w)},p)};d._destroyFocusTrap=
function(){var e;null==(e=this._focusTrap)?void 0:e.deactivate({onDeactivate:null});this._focusTrap=null};d._toggleFocusTrap=function(){const {_focusTrap:e,open:g}=this;e&&(g?e.activate():e.deactivate())};d._createFocusTrap=function(e){this._destroyFocusTrap();const g=requestAnimationFrame(()=>{this._focusTrap=ta(e,{initialFocus:"input",onDeactivate:this._close});this._toggleFocusTrap()});this.own(ea.makeHandle(()=>cancelAnimationFrame(g)))};d._renderContent=function(e){const g=this.content;return"string"===
typeof g?v.tsx("div",{class:"esri-identity-modal__content",id:e,innerHTML:g}):ha.isWidget(g)?v.tsx("div",{class:"esri-identity-modal__content",id:e},g.render()):g instanceof HTMLElement?v.tsx("div",{class:"esri-identity-modal__content",id:e,bind:g,afterCreate:this._attachToNode}):null};d._attachToNode=function(e){e.appendChild(this)};return b}(t);y.__decorate([B.property({readOnly:!0})],t.prototype,"container",void 0);y.__decorate([B.property()],t.prototype,"content",void 0);y.__decorate([B.property()],
t.prototype,"open",void 0);y.__decorate([B.property(),ia.messageBundle("esri/t9n/common")],t.prototype,"messages",void 0);y.__decorate([B.property({aliasOf:"messages.auth.signIn"})],t.prototype,"title",void 0);return t=y.__decorate([fa.subclass("esri.identity.IdentityModal")],t)});