// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
define(["exports","../../core/maybe","../../geometry/support/jsonUtils","../utils"],function(h,m,n,p){h.identifyToIdentifyRESTParameters=function(a,b){const {dpi:q,gdbVersion:k,geometry:r,geometryPrecision:t,height:u,layerOption:v,mapExtent:c,maxAllowableOffset:w,returnFieldName:x,returnGeometry:y,returnUnformattedValues:z,returnZ:A,spatialReference:d,timeExtent:e,tolerance:B,width:C}=a.toJSON(),{dynamicLayers:f,layerDefs:g,layerIds:l}=p.toDynamicLayersJSON(a);b=b&&m.isSome(b.geometry)?b.geometry:
null;a={geometryPrecision:t,maxAllowableOffset:w,returnFieldName:x,returnGeometry:y,returnUnformattedValues:z,returnZ:A,tolerance:B};b=b&&b.toJSON()||r;a.imageDisplay=`${C},${u},${q}`;k&&(a.gdbVersion=k);b&&(delete b.spatialReference,a.geometry=JSON.stringify(b),a.geometryType=n.getJsonType(b));d?a.sr=d.wkid||JSON.stringify(d):b&&b.spatialReference?a.sr=b.spatialReference.wkid||JSON.stringify(b.spatialReference):c&&c.spatialReference&&(a.sr=c.spatialReference.wkid||JSON.stringify(c.spatialReference));
a.time=e?[e.start,e.end].join():null;if(c){const {xmin:D,ymin:E,xmax:F,ymax:G}=c;a.mapExtent=`${D},${E},${F},${G}`}g&&(a.layerDefs=g);f&&!g&&(a.dynamicLayers=f);a.layers=v;l&&!f&&(a.layers+=`:${l.join(",")}`);return a};Object.defineProperty(h,"__esModule",{value:!0})});