// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/mixins/ArcGISImageService":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../rasterRenderers ../../request ../../core/Error ../../core/jsonMap ../../core/lang ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/urlUtils ../../core/accessorSupport/decorators/aliasOf ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../support/commonProperties ../support/DimensionalDefinition ../support/ExportImageServiceParameters ../support/Field ../support/FieldsIndex ../support/imageryRendererUtils ../support/MosaicRule ../support/PixelBlock ../support/rasterEnums ../support/RasterFunction ../support/RasterInfo ../support/RasterJobHandler ../support/rasterFormats/RasterCodec ../support/rasterFunctions/vectorFieldUtils ../../renderers/support/rasterRendererHelper ../../renderers/support/RasterSymbolizer ../../rest/imageService ../../core/unitUtils ../../kernel ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../../rest/query/executeForCount ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/normalizeUtils ../../core/pbf ../../geometry/support/spatialReferenceUtils ../../rest/support/Query ../../rest/query/executeForIds ../../rest/query/executeQueryJSON ../../core/has ../graphics/featureConversionUtils ../../rest/support/FeatureSet ../../rest/support/RelationshipQuery ../../rest/support/TopFeaturesQuery ../../rest/support/ImageAngleParameters ../../rest/support/ImageHistogramParameters ../../rest/support/ImageIdentifyParameters ../../rest/support/ImagePixelLocationParameters ../../rest/support/ImageSampleParameters ../../views/2d/engine/flow/dataUtils ../../geometry/SpatialReference".split(" "),
function(R,z,r,G,m,T,O,W,K,L,q,d,t,B,x,A,a,k,f,g,u,h,l,b,c,e,n,v,w,J,y,C,p,E,N,U,D,F,M,Q,S,X,Z,ca,aa,ea,fa,P,Y,ha,da,ja,ka,ma,ra,na,za,ta,wa,Aa,xa,va,ya,Ma,Ia,Ka){function Oa(oa){if(!oa)return null;oa=JSON.stringify(oa).match(/"rasterFunction":"(.*?")/gi);return(oa=null==oa?void 0:oa.map(Na=>Na.replace('"rasterFunction":"',"").replace('"',"")))?oa.join("/"):null}const Qa=q.getLogger("esri.layers.mixins.ArcGISImageService"),Ja=K.strict()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",
U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"}),La=new Set("png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" ")),Ya=a.ensureRange(A.ensureNumber,{min:0,max:255});R.ArcGISImageService=oa=>{oa=function(Na){function Ra(){var I=Na.apply(this,arguments)||this;I._functionRasterInfos={};I._rasterJobHandler={instance:null,refCount:0,connectionPromise:null};I._defaultServiceMosaicRule=null;I._serviceSourceType=null;I._serviceSupportsMosaicRule=null;I.rasterAttributeTableFieldPrefix=
"Raster.";I.adjustAspectRatio=null;I.bandCount=null;I.bandIds=void 0;I.capabilities=null;I.compressionQuality=void 0;I.compressionTolerance=.01;I.copyright=null;I.definitionExpression=null;I.exportImageServiceParameters=null;I.rasterInfo=null;I.fields=null;I.fullExtent=null;I.hasMultidimensions=!1;I.imageMaxHeight=4100;I.imageMaxWidth=4100;I.interpolation=void 0;I.minScale=0;I.maxScale=0;I.multidimensionalInfo=null;I.noData=null;I.noDataInterpretation=void 0;I.objectIdField=null;I.geometryType="polygon";
I.typeIdField=null;I.types=[];I.pixelSizeX=null;I.pixelSizeY=null;I.pixelFilter=null;I.raster=void 0;I.viewId=void 0;I.symbolizer=null;I.rasterAttributeTable=null;I.rasterFunctionInfos=null;I.serviceDataType=null;I.spatialReference=null;I.pixelType=null;I.serviceRasterInfo=null;I.sourceJSON=null;I.url=null;I.version=void 0;return I}z._inheritsLoose(Ra,Na);var pa=Ra.prototype;pa.initialize=function(){this._set("exportImageServiceParameters",new l.ExportImageServiceParameters({layer:this}))};pa.readDefaultServiceMosaicRule=
function(I,H){return this._serviceSupportsMosaicRule?n.fromJSON(H):null};pa.readServiceSourceType=function(I,H){return this._isMosaicDataset(H)?"mosaic-dataset":"raster-dataset"};pa.readServiceSupportsMosaicRule=function(I,H){return this._isMosaicRuleSupported(H)};pa.readBandIds=function(I,H){if(Array.isArray(I)&&0<I.length&&I.every(V=>"number"===typeof V))return I};pa.readCapabilities=function(I,H){return this._readCapabilities(H)};pa.writeCompressionQuality=function(I,H,V){null!=I&&"lerc"!==this.format&&
(H[V]=I)};pa.writeCompressionTolerance=function(I,H,V){"lerc"===this.format&&null!=I&&(H[V]=I)};pa.readFormat=function(I,H){return"esriImageServiceDataTypeVector-UV"===H.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===H.serviceDataType?"lerc":null!=this.pixelFilter?"lerc":"jpgpng"};pa.readMinScale=function(I,H){return null!=H.minLOD&&null!=H.maxLOD?I:0};pa.readMaxScale=function(I,H){return null!=H.minLOD&&null!=H.maxLOD?I:0};pa.readMosaicRule=function(I,H){return(I=I||H.mosaicRule)?n.fromJSON(I):
this._isMosaicRuleSupported(H)?n.fromJSON(H):null};pa.writeMosaicRule=function(I,H,V){I=this.mosaicRule;const ba=this.definitionExpression;I?ba&&ba!==I.where&&(I=I.clone(),I.where=ba):ba&&(I=new n({where:ba}));this._isValidCustomizedMosaicRule(I)&&(H[V]=I.toJSON())};pa.writeNoData=function(I,H,V){null!=I&&"number"===typeof I&&(H[V]=Ya(I))};pa.readObjectIdField=function(I,H){I||(I=(I=H.fields.filter(V=>"esriFieldTypeOID"===V.type||"oid"===V.type))&&I[0]&&I[0].name);return I};pa.readRenderer=function(I,
H,V){var ba,ia;I=null==H?void 0:null==(ba=H.layerDefinition)?void 0:null==(ia=ba.drawingInfo)?void 0:ia.renderer;V=T.read(I,V);if(null==V)return null;"vector-field"===V.type&&H.symbolTileSize&&!I.symbolTileSize&&(V.symbolTileSize=H.symbolTileSize);e.isSupportedRendererType(V)||Qa.warn("ArcGISImageService","Imagery layer doesn't support given renderer type.");return V};pa.writeRenderer=function(I,H,V){H.layerDefinition=H.layerDefinition||{};H.layerDefinition.drawingInfo=H.layerDefinition.drawingInfo||
{};H.layerDefinition.drawingInfo.renderer=I.toJSON();"vector-field"===I.type&&(H.symbolTileSize=I.symbolTileSize)};pa.readRenderingRule=function(I,H){I=H.rasterFunctionInfos;return H.renderingRule||I&&I.length&&"None"!==I[0].name?this._isRFTJson(H.renderingRule)?J.fromJSON({rasterFunctionDefinition:H.renderingRule}):J.fromJSON(H.renderingRule||{rasterFunctionInfos:H.rasterFunctionInfos}):null};pa.writeRenderingRule=function(I,H,V){I=I.toJSON();H[V]=I.rasterFunctionDefinition?I.rasterFunctionDefinition:
I};pa.readSpatialReference=function(I,H){return(I=I||H.extent.spatialReference)?Ka.fromJSON(I):null};pa.readPixelType=function(I){return Ja.fromJSON(I)||I};pa.writePixelType=function(I,H,V){if(d.isNone(this.serviceRasterInfo)||this.pixelType!==this.serviceRasterInfo.pixelType)H[V]=Ja.toJSON(I)};pa.readVersion=function(I,H){(I=H.currentVersion)||(I=H.hasOwnProperty("fields")||H.hasOwnProperty("timeInfo")?10:9.3);return I};pa.applyFilter=function(I){let H=I;this.pixelFilter&&(H=this._clonePixelData(I),
this.pixelFilter(H));return H};pa.applyRenderer=function(){var I=z._asyncToGenerator(function*(H,V){var ba=H;if(!this._isPicture()&&this.renderer&&this.symbolizer&&!this.pixelFilter){ba=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(this.renderer.toJSON());const ia=this._rasterJobHandler.instance,{bandIds:la}=this;ia?(ba&&(this.symbolizer.bind(),yield ia.updateSymbolizer(this.symbolizer,V),this._cachedRendererJson=this.renderer.toJSON()),V=yield ia.symbolize({bandIds:la,...H},V),ba={extent:H.extent,
pixelBlock:V}):ba={extent:H.extent,pixelBlock:this.symbolizer.symbolize({bandIds:la,...H})}}return ba});return function(H,V){return I.apply(this,arguments)}}();pa.destroy=function(){this._shutdownJobHandler()};pa.increaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount++};pa.decreaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount--;0>=this._rasterJobHandler.refCount&&this._shutdownJobHandler()};pa.computeAngles=function(){var I=z._asyncToGenerator(function*(H,V){yield this._fetchCapabilities(null==
V?void 0:V.signal);if(!this.capabilities.operations.supportsComputeAngles)throw new W("imagery-layer:compute-angles","this operation is not supported on the input image service");H=A.ensureClass(Aa,H).clone();return D.computeAngles(this.url,H,this._getRequestOptions(V))});return function(H,V){return I.apply(this,arguments)}}();pa.computePixelSpaceLocations=function(){var I=z._asyncToGenerator(function*(H,V){yield this._fetchCapabilities(null==V?void 0:V.signal);if(!this.capabilities.operations.supportsComputePixelLocation)throw new W("imagery-layer:compute-pixel-space-locations",
"this operation is not supported on the input image service");H=A.ensureClass(ya,H).clone();return D.computePixelSpaceLocations(this.url,H,this._getRequestOptions(V))});return function(H,V){return I.apply(this,arguments)}}();pa.computeHistograms=function(){var I=z._asyncToGenerator(function*(H,V){yield this._fetchCapabilities(null==V?void 0:V.signal);if(!this.capabilities.operations.supportsComputeHistograms)throw new W("imagery-layer:compute-histograms","this operation is not supported on the input image service");
H=A.ensureClass(xa,H).clone();const {raster:ba,mosaicRule:ia,renderingRule:la}=this;la&&null==H.renderingRule&&(H.renderingRule=la);ia&&null==H.mosaicRule&&(H.mosaicRule=ia);ba&&null==H.raster&&(H.raster=ba);return D.computeHistograms(this.url,H,this._getRequestOptions(V))});return function(H,V){return I.apply(this,arguments)}}();pa.computeStatisticsHistograms=function(){var I=z._asyncToGenerator(function*(H,V){yield this._fetchCapabilities(null==V?void 0:V.signal);if(!this.capabilities.operations.supportsComputeStatisticsHistograms)throw new W("imagery-layer:compute-statistics-histograms",
"this operation is not supported on the input image service");H=A.ensureClass(xa,H).clone();const {raster:ba,mosaicRule:ia,renderingRule:la}=this;la&&null==H.renderingRule&&(H.renderingRule=la);ia&&null==H.mosaicRule&&(H.mosaicRule=ia);ba&&null==H.raster&&(H.raster=ba);return D.computeStatisticsHistograms(this.url,H,this._getRequestOptions(V))});return function(H,V){return I.apply(this,arguments)}}();pa.getField=function(I){const {fieldsIndex:H}=this;return d.isSome(H)?H.get(I):void 0};pa.getFieldDomain=
function(I,H){return(I=this.getField(I))?I.domain:null};pa.fetchImage=function(I,H,V,ba={}){if(null==I||null==H||null==V)return Promise.reject(new W("imagery-layer:fetch-image","Insufficient parameters for requesting an image. A valid extent, width and height values are required."));const ia=this.renderer||this.symbolizer?this.generateRasterInfo(this.renderingRule,{signal:ba.signal}):null;return t.when(ia).then(la=>{la&&(this.rasterInfo=la);la={imageServiceParameters:this.getExportImageServiceParameters(I,
H,V,ba.timeExtent),imageProps:{extent:I,width:H,height:V,format:this.format},requestAsImageElement:ba.requestAsImageElement&&!this.pixelFilter||!1,signal:ba.signal};return this._requestArrayBuffer(la)})};pa.fetchKeyProperties=function(I){return O(this.parsedUrl.path+"/keyProperties",{query:this._getQueryParams({renderingRule:10.3<=this.version?null==I?void 0:I.renderingRule:null})}).then(H=>H.data)};pa.fetchRasterAttributeTable=function(I){return 10.1>this.version?Promise.reject(new W("#fetchRasterAttributeTable()",
"Failed to get rasterAttributeTable")):O(this.parsedUrl.path+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:10.3<=this.version?null==I?void 0:I.renderingRule:null})}).then(H=>za.fromJSON(H.data))};pa.getCatalogItemRasterInfo=function(){var I=z._asyncToGenerator(function*(H,V){var ba=O(this.parsedUrl.path+"/"+H+"/info",{query:this._getQueryParams(),...V}).then(ia=>ia.data);H=O(this.parsedUrl.path+"/"+H+"/info/keyProperties",{query:this._getQueryParams(),...V}).then(ia=>ia.data).catch(()=>
{});ba=yield Promise.all([ba,H]);if(ba[0])return H=Z.fromJSON(ba[0].extent),V=ba[0].statistics?ba[0].statistics.map(ia=>({min:ia[0],max:ia[1],avg:ia[2],stddev:ia[3]})):null,new y({bandCount:ba[0].bandCount,extent:H,spatialReference:H.sr,pixelSize:new ea({x:ba[0].pixelSizeX,y:ba[0].pixelSizeY,spatialReference:H.sr}),pixelType:ba[0].pixelType.toLowerCase(),statistics:V,histograms:ba[0].histograms,keyProperties:ba[1]||{}})});return function(H,V){return I.apply(this,arguments)}}();pa.getCatalogItemICSInfo=
function(){var I=z._asyncToGenerator(function*(H,V){var {data:ba}=yield O(this.parsedUrl.path+"/"+H+"/info/ics",{query:this._getQueryParams(),...V});if(ba=ba&&ba.ics){var ia=null;try{ia=(yield O(this.parsedUrl.path+"/"+H+"/info",{query:this._getQueryParams(),...V})).data.extent}catch{}if(!ia||!ia.spatialReference)return{ics:ba,icsToPixelTransform:null,icsExtent:null,northDirection:null};var la=10.7<=this.version?O(this.parsedUrl.path+"/"+H+"/info/icstopixel",{query:this._getQueryParams(),...V}).then(Ha=>
Ha.data).catch(()=>({})):{},qa=ia.spatialReference,ua={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",geometries:[ia]}),inSR:qa.wkid||JSON.stringify(qa),outSR:"0:"+H};ua=O(this.parsedUrl.path+"/project",{query:this._getQueryParams(ua),...V}).then(Ha=>Ha.data).catch(()=>({}));var sa=(ia.xmin+ia.xmax)/2,Ba=(ia.ymax-ia.ymin)/6;ia=ia.ymin+Ba;var Da=[];for(let Ha=0;5>Ha;Ha++)Da.push({x:sa,y:ia+Ba*Ha});H={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:Da}),inSR:qa.wkid||
JSON.stringify(qa),outSR:"0:"+H};V=O(this.parsedUrl.path+"/project",{query:this._getQueryParams(H),...V}).then(Ha=>Ha.data).catch(()=>({}));la=yield Promise.all([la,ua,V]);V=la[0].ipxf;if(null==V){var Ea,Ca,Fa;H=null==(Ea=ba.geodataXform)?void 0:Ea.xf_0;"topup"===(null==H?void 0:null==(Ca=H.name)?void 0:Ca.toLowerCase())&&6===(null==H?void 0:null==(Fa=H.coefficients)?void 0:Fa.length)&&(V={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",coefficients:H.coefficients,cellsizeRatio:0,
type:"GeometricXform"}})}if(Ea=Z.fromJSON(la[1]&&la[1].geometries&&la[1].geometries[0]))Ea.spatialReference=new Ka({wkid:0,imageCoordinateSystem:ba});Ca=la[2].geometries?la[2].geometries.filter(Ha=>null!=Ha&&null!=Ha.x&&null!=Ha.y&&"NaN"!==Ha.x&&"NaN"!==Ha.y):[];Fa=Ca.length;if(3>Fa)return{ics:ba,icsToPixelTransform:V,icsExtent:Ea,northDirection:null};qa=ua=H=la=0;for(sa=0;sa<Fa;sa++)la+=Ca[sa].x,H+=Ca[sa].y,ua+=Ca[sa].x*Ca[sa].x,qa+=Ca[sa].x*Ca[sa].y;Fa=(Fa*qa-la*H)/(Fa*ua-la*la);la=0;H=Ca[4].x>
Ca[0].x;Ca=Ca[4].y>Ca[0].y;Infinity===Fa?la=Ca?90:270:0===Fa?la=H?0:180:0<Fa?la=H?180*Math.atan(Fa)/Math.PI:180*Math.atan(Fa)/Math.PI+180:0>Fa&&(la=Ca?180+180*Math.atan(Fa)/Math.PI:360+180*Math.atan(Fa)/Math.PI);return{ics:ba,icsToPixelTransform:V,icsExtent:Ea,northDirection:la}}});return function(H,V){return I.apply(this,arguments)}}();pa.generateRasterInfo=function(){var I=z._asyncToGenerator(function*(H,V){var ba;if((!H||"none"===(null==H?void 0:null==(ba=H.functionName)?void 0:ba.toLowerCase())||
this._isVectorFieldResampleFunction(H))&&d.isSome(this.serviceRasterInfo))return this.serviceRasterInfo;ba=Oa(H);if(this._functionRasterInfos[ba])return this._functionRasterInfos[ba];H=this._generateRasterInfo(H,V);this._functionRasterInfos[ba]=H;try{return yield H}catch{return this._functionRasterInfos[ba]=null}});return function(H,V){return I.apply(this,arguments)}}();pa.getExportImageServiceParameters=function(I,H,V,ba){var ia;I=I.clone().shiftCentralMeridian();const la=D.getImageSpatialReferenceQueryParameter(I.spatialReference,
this.parsedUrl.path);d.isSome(this.serviceRasterInfo)&&this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);const qa=this.exportImageServiceParameters.toJSON(),{bandIds:ua,noData:sa}=qa;var {renderingRule:Ba}=qa,Da=null==(ia=this.renderingRule)?void 0:ia.rasterFunctionDefinition;ia=!this.renderer||"raster-stretch"===this.renderer.type;null!=ua&&ua.length&&this._hasRenderingRule(this.renderingRule)&&!Da&&ia?(Da={rasterFunction:"ExtractBand",
rasterFunctionArguments:{BandIds:ua}},"Stretch"===Ba.rasterFunction?(Da.rasterFunctionArguments.Raster=Ba.rasterFunctionArguments.Raster,Ba.rasterFunctionArguments.Raster=Da):"Colormap"===Ba.rasterFunction?(ia=Ba.rasterFunctionArguments.Raster,"Stretch"===(null==ia?void 0:ia.rasterFunction)?(Da.rasterFunctionArguments.Raster=ia.rasterFunctionArguments.Raster,ia.rasterFunctionArguments.Raster=Da):(Da.rasterFunctionArguments.Raster=ia,Ba.rasterFunctionArguments.Raster=Da)):(Da.rasterFunctionArguments.Raster=
Ba,Ba=Da),qa.bandIds=void 0):qa.bandIds=null==ua?void 0:ua.join(",");sa instanceof Array&&0<sa.length&&(qa.noData=sa.join(","));Da=this._serviceSupportsMosaicRule?this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,ba):null;qa.mosaicRule=Da&&JSON.stringify(Da);qa.renderingRule=this._getRenderingRuleString(J.fromJSON(Ba));Ba={};if(ba){const {start:Ea,end:Ca}=ba.toJSON();if(Ea&&Ca&&Ea===Ca)Ba.time=""+Ea;else if(null!=Ea||null!=Ca)Ba.time=`${null==Ea?"null":Ea},${null==
Ca?"null":Ca}`}return{bbox:I.xmin+","+I.ymin+","+I.xmax+","+I.ymax,bboxSR:la,imageSR:la,size:H+","+V,...qa,...Ba}};pa.getSamples=function(){var I=z._asyncToGenerator(function*(H,V){yield this._fetchCapabilities(null==V?void 0:V.signal);if(!this.capabilities.operations.supportsGetSamples)throw new W("imagery-layer:get-samples","getSamples operation is not supported on the input image service");H=A.ensureClass(Ma,H).clone();const {raster:ba}=this;ba&&null==H.raster&&(H.raster=ba);return D.getSamples(this.url,
H,this._getRequestOptions(V))});return function(H,V){return I.apply(this,arguments)}}();pa.identify=function(){var I=z._asyncToGenerator(function*(H,V){yield this._fetchCapabilities(null==V?void 0:V.signal);if(!this.capabilities.operations.supportsIdentify)throw new W("imagery-layer:query-rasters","query operation is not supported on the input image service");H=A.ensureClass(va,H).clone();const {raster:ba,mosaicRule:ia,renderingRule:la}=this;la&&null==H.renderingRule&&(H.renderingRule=la);if(ia&&
null==H.mosaicRule){const qa=this._combineMosaicRuleWithTimeExtent(ia,H.timeExtent);H.mosaicRule=d.unwrap(qa)}ba&&null==H.raster&&(H.raster=ba);return D.identify(this.url,H,this._getRequestOptions(V))});return function(H,V){return I.apply(this,arguments)}}();pa.createQuery=function(){const I=new ja;I.outFields=["*"];I.returnGeometry=!0;I.where=this.definitionExpression||"1\x3d1";return I};pa.queryRasters=function(){var I=z._asyncToGenerator(function*(H,V){({query:H,requestOptions:V}=yield this._prepareForQuery(H,
V));return ma.executeQueryJSON(this.url,H,V)});return function(H,V){return I.apply(this,arguments)}}();pa.queryObjectIds=function(){var I=z._asyncToGenerator(function*(H,V){({query:H,requestOptions:V}=yield this._prepareForQuery(H,V));return ka.executeForIds(this.url,H,V)});return function(H,V){return I.apply(this,arguments)}}();pa.queryRasterCount=function(){var I=z._asyncToGenerator(function*(H,V){({query:H,requestOptions:V}=yield this._prepareForQuery(H,V));return X.executeForCount(this.url,H,
V)});return function(H,V){return I.apply(this,arguments)}}();pa.queryVisibleRasters=function(){var I=z._asyncToGenerator(function*(H,V){if(!H)throw new W("imagery-layer: query-visible-rasters","missing query parameter");const {pixelSize:ba,returnDomainValues:ia,returnTopmostRaster:la,showNoDataRecords:qa}=V||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1};let ua=!1;var sa=null,Ba=null;const Da=this.rasterFunctionNamesIndex;d.isSome(H.outFields)&&(ua=H.outFields.some(Ga=>
-1===Ga.toLowerCase().indexOf("raster.servicepixelvalue")),10.4<=this.version&&(Ba=H.outFields.filter(Ga=>-1<Ga.toLowerCase().indexOf("raster.servicepixelvalue")&&24<Ga.length).map(Ga=>{Ga=Ga.slice(25);return[this._updateRenderingRulesFunctionName(Ga,Da),Ga]}),sa=Ba.map(Ga=>new J({functionName:Ga[0]})),Ba=Ba.map(Ga=>Ga[1]),0===sa.length?this.renderingRule?(sa.push(this.renderingRule),Ba.push(this.renderingRule.functionName)):sa=null:this.renderingRule&&!sa.some(Ga=>Ga.functionName===this.renderingRule.functionName)&&
(sa.push(this.renderingRule),Ba.push(this.renderingRule.functionName))));const Ea=d.isNone(H.outSpatialReference)||H.outSpatialReference.equals(this.spatialReference),Ca=H.timeExtent||this.timeExtent,Fa=this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,Ca);sa=this._getQueryParams({geometry:H.geometry,timeExtent:Ca,mosaicRule:Fa,renderingRule:10.4>this.version?this.renderingRule:null,renderingRules:sa,pixelSize:ba,returnCatalogItems:ua,returnGeometry:Ea,raster:this.raster,
maxItemCount:la?1:null});delete sa.f;sa=new va(sa);try{var Ha,Va;yield this.generateRasterInfo(this.renderingRule);const Ga=yield D.identify(this.url,sa,{signal:null==V?void 0:V.signal,query:{...this.customParameters}}),Wa=H.outFields,Za=-1<Ga.value.toLowerCase().indexOf("nodata");if(!(ua&&!Ea&&(null==Ga?0:null==(Ha=Ga.catalogItems)?0:Ha.features.length))||!qa&&Za)return this._processVisibleRastersResponse(Ga,{returnDomainValues:ia,templateRRFunctionNames:Ba,showNoDataRecords:qa,templateFields:Wa});
const Sa=this.objectIdField||"ObjectId",Xa=Ga.catalogItems.features,$a=Xa.map(Ta=>{var Pa;return null==(Pa=Ta.attributes)?void 0:Pa[Sa]}),ab=new ja({objectIds:$a,returnGeometry:!0,outSpatialReference:H.outSpatialReference,outFields:[Sa]}),Ua=yield this.queryRasters(ab);null!=Ua&&null!=(Va=Ua.features)&&Va.length&&Ua.features.forEach(Ta=>{Xa.forEach(Pa=>{Pa.attributes[Sa]===Ta.attributes[Sa]&&(Pa.geometry=new fa(Ta.geometry),d.isSome(H.outSpatialReference)&&(Pa.geometry.spatialReference=H.outSpatialReference))})});
return this._processVisibleRastersResponse(Ga,{returnDomainValues:ia,templateRRFunctionNames:Ba,showNoDataRecords:qa,templateFields:Wa})}catch{throw new W("imagery-layer:query-visible-rasters","encountered error when querying visible rasters");}});return function(H,V){return I.apply(this,arguments)}}();pa.fetchVariableStatisticsHistograms=function(){var I=z._asyncToGenerator(function*(H,V){var ba=O(this.parsedUrl.path+"/statistics",{query:this._getQueryParams({variable:H}),signal:V}).then(ia=>{var la;
return null==(la=ia.data)?void 0:la.statistics});H=O(this.parsedUrl.path+"/histograms",{query:this._getQueryParams({variable:H}),signal:V}).then(ia=>{var la;return null==(la=ia.data)?void 0:la.histograms});ba=yield Promise.all([ba,H]);ba[0]&&ba[0].forEach(ia=>{ia.avg=ia.mean;ia.stddev=ia.standardDeviation});return{statistics:ba[0]||null,histograms:ba[1]||null}});return function(H,V){return I.apply(this,arguments)}}();pa.createStreamlinesMesh=function(){var I=z._asyncToGenerator(function*(H,V){const ba=
this._rasterJobHandler.instance;return ba?ba.createStreamlinesMesh(H,V):Ia.createStreamlinesMesh(H.rendererSettings,H.flowData,d.isSome(V.signal)?V.signal:(new AbortController).signal)});return function(H,V){return I.apply(this,arguments)}}();pa._fetchService=function(){var I=z._asyncToGenerator(function*(H){yield this._fetchServiceInfo(H);d.isSome(this.serviceRasterInfo)&&!this.rasterInfo&&(this.rasterInfo=this.serviceRasterInfo);var V=this.sourceJSON;V=d.isSome(this.serviceRasterInfo)?Promise.resolve(this.serviceRasterInfo):
this._fetchAuxiliaryRasterInfo({serviceInfo:V,signal:H}).then(ia=>{this._set("serviceRasterInfo",ia);return ia});H=this._hasRenderingRule(this.renderingRule)?this.generateRasterInfo(this.renderingRule,{signal:H}):null;const ba=this._getRasterFunctionInfos();return Promise.all([V,H,ba]).then(ia=>{ia[1]?this._set("rasterInfo",ia[1]):this._set("rasterInfo",ia[0]);ia[2]&&this._set("rasterFunctionInfos",ia[2]);this.renderer&&!this._isSupportedRenderer(this.renderer)&&(this._set("renderer",null),Qa.warn("ArcGISImageService",
"Switching to the default renderer. Renderer applied is not valid for this Imagery Layer"));this._set("renderer",this._configRenderer(this.renderer));this.watch("renderingRule",la=>{(this.renderer||this.symbolizer||this.popupEnabled&&this.popupTemplate)&&this.generateRasterInfo(la).then(qa=>{qa&&(this.rasterInfo=qa)})});(ia=d.isSome(this.serviceRasterInfo)&&this.serviceRasterInfo.multidimensionalInfo)&&this._updateMultidimensionalDefinition(ia)})});return function(H){return I.apply(this,arguments)}}();
pa._combineMosaicRuleWithTimeExtent=function(I,H){var V=this.timeInfo;if(d.isNone(I)||d.isNone(this.multidimensionalInfo)||d.isNone(H)||d.isNone(null==V?void 0:V.startField))return I;const {startField:ba}=V;I=I.clone();if("mosaic-dataset"===this._serviceSourceType){var ia;I.multidimensionalDefinition=null==(ia=I.multidimensionalDefinition)?void 0:ia.filter(sa=>sa.dimensionName!==ba);return this._cleanupMultidimensionalDefinition(I)}I.multidimensionalDefinition=I.multidimensionalDefinition||[];V=I.multidimensionalDefinition.filter(sa=>
sa.dimensionName===ba);ia=d.isSome(H.start)?H.start.getTime():null;H=d.isSome(H.end)?H.end.getTime():null;const la=null==ia||null==H||ia===H,qa=la?[ia||H]:[[ia,H]],ua=10.8<=this.version;V.length?V.forEach(sa=>{sa.dimensionName===ba&&(ua?(sa.dimensionName=null,sa.isSlice=null,sa.values=null):(sa.isSlice=la,sa.values=qa))}):ua||(H=I.multidimensionalDefinition.filter(sa=>null!=sa.variableName&&null==sa.dimensionName),H.length?H.forEach(sa=>{sa.dimensionName=ba;sa.isSlice=la;sa.values=qa}):I.multidimensionalDefinition.push(new h({variableName:"",
dimensionName:ba,isSlice:la,values:qa})));return this._cleanupMultidimensionalDefinition(I)};pa._cleanupMultidimensionalDefinition=function(I){if(d.isNone(I))return null;I.multidimensionalDefinition&&(I.multidimensionalDefinition=I.multidimensionalDefinition.filter(H=>!(!H.variableName&&!H.dimensionName)),0===I.multidimensionalDefinition.length&&(I.multidimensionalDefinition=null));return"mosaic-dataset"!==this._serviceSourceType&&null==I.multidimensionalDefinition?null:I};pa._prepareForQuery=function(){var I=
z._asyncToGenerator(function*(H,V){var ba;yield this._fetchCapabilities(null==(ba=V)?void 0:ba.signal);if(!this.capabilities.operations.supportsQuery)throw new W("imagery-layer:query-rasters","query operation is not supported on the input image service");H=d.isSome(H)?A.ensureClass(ja,H):this.createQuery();V=this._getRequestOptions(V);this.raster&&(V.query={...V.query,raster:this.raster});return{query:H,requestOptions:V}});return function(H,V){return I.apply(this,arguments)}}();pa._initJobHandler=
function(){var I=z._asyncToGenerator(function*(){if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;const H=new C;this._rasterJobHandler.connectionPromise=H.initialize().then(()=>{this._rasterJobHandler.instance=H},()=>null);yield this._rasterJobHandler.connectionPromise});return function(){return I.apply(this,arguments)}}();pa._shutdownJobHandler=function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy();this._rasterJobHandler.instance=
null;this._rasterJobHandler.connectionPromise=null;this._rasterJobHandler.refCount=0};pa._isSupportedRenderer=function(I){const {rasterInfo:H,renderingRule:V}=this;return"unique-value"===I.type&&this._hasRenderingRule(V)&&1===H.bandCount&&["u8","s8"].includes(H.pixelType)||N.getSupportedRendererTypes(this.rasterInfo).includes(this.renderer.type)};pa._fetchCapabilities=function(){var I=z._asyncToGenerator(function*(H){if(this.capabilities)return this.capabilities;yield this._fetchServiceInfo(H);return this.capabilities});
return function(H){return I.apply(this,arguments)}}();pa._fetchServiceInfo=function(){var I=z._asyncToGenerator(function*(H){var V;let ba=this.sourceJSON;if(!ba){const {data:ia,ssl:la}=yield O(this.parsedUrl.path,{query:this._getQueryParams(),signal:H});this.sourceJSON=ba=ia;la&&(this.url=this.url.replace(/^http:/i,"https:"))}if(-1<(null==(V=ba.capabilities)?void 0:V.toLowerCase().split(",").map(ia=>ia.trim()).indexOf("tilesonly")))throw new W("imagery-layer:fetch-service-info","use ImageryTileLayer to open tiles-only image services");
this.read(ba,{origin:"service",url:this.parsedUrl})});return function(H){return I.apply(this,arguments)}}();pa._isMosaicDataset=function(I){var H;return I.serviceSourceType?"esriImageServiceSourceTypeMosaicDataset"===I.serviceSourceType:0<(null==(H=I.fields)?void 0:H.length)};pa._isMosaicRuleSupported=function(I){var H;if(!I)return!1;const V=this._isMosaicDataset(I);I=10.71<=I.currentVersion&&I.hasMultidimensions&&I.timeInfo&&!(I.objectIdField&&1<(null==(H=I.fields)?void 0:H.length));return V||I};
pa._isVectorFieldResampleFunction=function(I){if(!d.isSome(I))return!1;const {functionName:H,functionArguments:V}=I;I="resample"===(null==H?void 0:H.toLowerCase());const ba=(null==V?void 0:V.ResampleType)||(null==V?void 0:V.resampleType);return I&&(7===ba||10===ba)};pa._isPicture=function(){return!this.format||-1<this.format.indexOf("jpg")||-1<this.format.indexOf("png")};pa._configRenderer=function(I){if(!this._isPicture()&&!this.pixelFilter){if(!this.bandIds&&3<=this.rasterInfo.bandCount){const ba=
N.getDefaultBandCombination(this.rasterInfo);!ba||3===this.rasterInfo.bandCount&&0===ba[0]&&1===ba[1]&&2===ba[2]||(this.bandIds=ba)}if(!I){var H,V;I=N.createDefaultRenderer(this.rasterInfo,{bandIds:this.bandIds,variableName:this.renderingRule?null:null==(H=this.mosaicRule)?void 0:null==(V=H.multidimensionalDefinition)?void 0:V[0].variableName})}H=N.normalizeRendererJSON(I.toJSON());this.symbolizer?(this.symbolizer.rendererJSON=H,this.symbolizer.rasterInfo=this.rasterInfo):this.symbolizer=new U({rendererJSON:H,
rasterInfo:this.rasterInfo});this.symbolizer.bind().success||(this.symbolizer=null)}return I};pa._clonePixelData=function(I){return null==I?I:{extent:I.extent&&I.extent.clone(),pixelBlock:d.isSome(I.pixelBlock)&&I.pixelBlock.clone()}};pa._getQueryParams=function(I){d.isSome(null==I?void 0:I.renderingRule)&&"string"!==typeof I.renderingRule&&(I.renderingRule=this._getRenderingRuleString(I.renderingRule));const {raster:H,viewId:V}=this;return{raster:H,viewId:V,f:"json",...I,...this.customParameters}};
pa._getRequestOptions=function(I){return{...I,query:{...null==I?void 0:I.query,...this.customParameters}}};pa._decodePixelBlock=function(I,H,V){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:I,options:H}):p.decode(I,H,V)};pa._fetchMultidimensionalInfo=function(){var I=z._asyncToGenerator(function*(H){var V;H=yield O(this.parsedUrl.path+"/multidimensionalInfo",{query:this._getQueryParams(),signal:H}).then(ba=>{var ia;return null==(ia=ba.data)?void 0:ia.multidimensionalInfo});
null!=(V=H.variables)&&V.length&&H.variables.forEach(ba=>{var ia;null!=(ia=ba.statistics)&&ia.length&&ba.statistics.forEach(la=>{la.avg=la.mean;la.stddev=la.standardDeviation})});return H});return function(H){return I.apply(this,arguments)}}();pa._getRasterFunctionInfos=function(){var I=z._asyncToGenerator(function*(H){const V=this.sourceJSON.rasterFunctionInfos;if(this.serviceRasterInfo)return V;if(V&&10.3<=this.version){var ba;return 1===V.length&&"none"===V[0].name.toLowerCase()?V:null==(ba=(yield O(this.parsedUrl.path+
"/rasterFunctionInfos",{query:this._getQueryParams(),signal:H})).data)?void 0:ba.rasterFunctionInfos}return null});return function(H){return I.apply(this,arguments)}}();pa._fetchAuxiliaryRasterInfo=function(){var I=z._asyncToGenerator(function*(H){const V=H&&H.serviceInfo;if(!V)return Promise.reject(new W("imagery-layer:fetch-metadata","valid serviceInfo is required"));var ba=H.signal,ia=V.hasRasterAttributeTable&&10.1<=this.version?O(this.parsedUrl.path+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:10.1<=
this.version?null==H?void 0:H.renderingRule:null}),signal:ba}).then(ua=>za.fromJSON(ua.data)).catch(()=>null):!1,la=V.hasColormap&&10.1<=this.version?O(this.parsedUrl.path+"/colormap",{query:this._getQueryParams({renderingRule:10.6<=this.version?null==H?void 0:H.renderingRule:null}),signal:ba}).then(ua=>{var sa;return null==(sa=ua.data)?void 0:sa.colormap}):!1,qa=V.hasHistograms&&10.1<=this.version?O(this.parsedUrl.path+"/histograms",{query:this._getQueryParams({renderingRule:10.1<=this.version?null==
H?void 0:H.renderingRule:null}),signal:ba}).then(ua=>{var sa;return null==(sa=ua.data)?void 0:sa.histograms}):!1;H=10.3<=this.version?O(this.parsedUrl.path+"/keyProperties",{query:this._getQueryParams({renderingRule:null==H?void 0:H.renderingRule}),signal:ba}).then(ua=>ua.data).catch(()=>{}):!1;ba=V.hasMultidimensions&&10.3<=this.version?this._fetchMultidimensionalInfo():!1;ia=yield Promise.all([ia,la,qa,H,ba]);la=null;if(V.minValues&&V.minValues.length===V.bandCount)for(la=[],qa=0;qa<V.minValues.length;qa++)la.push({min:V.minValues[qa],
max:V.maxValues[qa],avg:V.meanValues[qa],stddev:V.stdvValues[qa]});qa=Math.ceil((V.extent.xmax-V.extent.xmin)/V.pixelSizeX-.1);H=Math.ceil((V.extent.ymax-V.extent.ymin)/V.pixelSizeY-.1);ba=Ka.fromJSON(V.spatialReference||V.extent.spatialReference);return new y({width:qa,height:H,bandCount:V.bandCount,extent:Z.fromJSON(V.extent),spatialReference:ba,pixelSize:new ea({x:V.pixelSizeX,y:V.pixelSizeY,spatialReference:ba}),pixelType:V.pixelType.toLowerCase(),statistics:la,attributeTable:ia[0]||null,colormap:ia[1]||
null,histograms:ia[2]||null,keyProperties:ia[3]||{},multidimensionalInfo:ia[4]||null})});return function(H){return I.apply(this,arguments)}}();pa._requestArrayBuffer=function(){var I=z._asyncToGenerator(function*(H){var V;const {imageProps:ba,requestAsImageElement:ia,signal:la}=H;if(ia&&!this.pixelFilter&&-1<(null==(V=ba.format)?void 0:V.indexOf("png")))return{imageElement:(yield O(this.parsedUrl.path+"/exportImage",{responseType:"image",query:this._getQueryParams({f:"image",...H.imageServiceParameters}),
signal:la})).data,params:ba};V=this._initJobHandler();H=O(this.parsedUrl.path+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams({f:"image",...H.imageServiceParameters}),signal:la});H=(yield Promise.all([H,V]))[0].data;var qa=V=ba.format||"jpgpng";"bsq"!==qa&&"bip"!==qa&&(qa=p.getFormat(H));if(!qa)throw new W("imagery-layer:fetch-image","unsupported format signature "+String.fromCharCode.apply(null,new Uint8Array(H)));qa="gif"===V||"bmp"===V||-1<V.indexOf("png")&&("png"===qa||
"jpg"===qa);const ua={signal:la};return{pixelData:{pixelBlock:yield qa?p.decode(H,{useCanvas:!0,...ba},ua):this._decodePixelBlock(H,{width:ba.width,height:ba.height,planes:null,pixelType:null,noDataValue:null,format:V},ua),extent:ba.extent},params:ba}});return function(H){return I.apply(this,arguments)}}();pa._generateRasterInfo=function(){var I=z._asyncToGenerator(function*(H,V){const {data:ba}=yield O(this.parsedUrl.path,{query:this._getQueryParams({renderingRule:H}),...V});return yield this._fetchAuxiliaryRasterInfo({serviceInfo:ba,
renderingRule:H,...V})});return function(H,V){return I.apply(this,arguments)}}();pa._isValidCustomizedMosaicRule=function(I){var H;return I&&JSON.stringify(I.toJSON())!==JSON.stringify(null==(H=this._defaultServiceMosaicRule)?void 0:H.toJSON())};pa._updateMultidimensionalDefinition=function(I){if(!this._isValidCustomizedMosaicRule(this.mosaicRule)){var H=I.variables[0].dimensions;I=[];for(var V in H)if(H.hasOwnProperty(V)){const ba=H[V],ia=ba.extent;let la=!0,qa=[ia[0]];ba.hasRanges&&!0===ba.hasRanges?
(la=!1,qa=[ba.values[0]]):"stdz"===ba.name.toLowerCase()&&Math.abs(ia[1])<=Math.abs(ia[0])&&(qa=[ia[1]]);I.push(new h({variableName:"",dimensionName:H[V].name,isSlice:la,values:qa}))}0<I.length&&(this.mosaicRule=this.mosaicRule||new n,V=this.mosaicRule.multidimensionalDefinition,!V||V&&0>=V.length)&&(this.mosaicRule.multidimensionalDefinition=I)}};pa._formatAttributeValue=function(I,H){if("string"===typeof I&&(H=(H=this._getFieldInfo(this.popupTemplate&&this.popupTemplate.fieldInfos,H))&&H.format)){let V,
ba;return-1<I.trim().indexOf(",")?(V=",",ba=V+" ",this._formatDelimitedString(I,V,ba,H)):-1<I.trim().indexOf(";")?(V=";",ba=V+" ",this._formatDelimitedString(I,V,ba,H)):-1<I.trim().indexOf(" ")?(V=ba=" ",this._formatDelimitedString(I,V,ba,H)):this._formatNumberFromString(I,H)}return I};pa._getFieldInfo=function(I,H){if(I&&I.length&&H){var V=H.toLowerCase(),ba=void 0;I.some(ia=>!ia.fieldName||ia.fieldName.toLowerCase()!==V&&ia.fieldName.toLowerCase()!==V.replace(/ /g,"_")?!1:(ba=ia,!0));return ba}};
pa._formatDelimitedString=function(I,H,V,ba){return I&&H&&V&&ba?I.trim().split(H).map(ia=>this._formatNumberFromString(ia,ba)).join(V):I};pa._formatNumberFromString=function(I,H){if(!I||!H)return I;const V=Number(I);return isNaN(V)?I:H.format(V)};pa._processVisibleRastersResponse=function(I,H){H=H||{};const V=I.value,{templateRRFunctionNames:ba,showNoDataRecords:ia,returnDomainValues:la,templateFields:qa}=H;H=I.processedValues;var ua=I.catalogItems&&I.catalogItems.features;let sa=I.properties&&I.properties.Values&&
I.properties.Values.map(Ha=>Ha.replace(/ /gi,", "))||[];var Ba=this.objectIdField||"ObjectId",Da="string"===typeof V&&-1<V.toLowerCase().indexOf("nodata");I=[];!V||ua||Da||(ua={},ua[Ba]=0,ua=new m(this.fullExtent,null,ua),sa=[V],ua=[ua]);if(!ua)return[];this._updateResponseFieldNames(ua,qa);Da&&!ia&&(ua=[]);for(Ba=0;Ba<ua.length;Ba++){Da=ua[Ba];if(null!=V){var Ea=sa[Ba];var Ca=this.renderingRule&&H&&0<H.length&&ba&&0<ba.length&&-1<ba.indexOf(this.renderingRule.functionName)?H[ba.indexOf(this.renderingRule.functionName)]:
V;if("nodata"===Ea.toLowerCase()&&!ia)continue;Da.attributes["Raster.ItemPixelValue"]=this._formatAttributeValue(Ea,"Raster.ItemPixelValue");Da.attributes["Raster.ServicePixelValue"]=this._formatAttributeValue(Ca,"Raster.ServicePixelValue");this._updateFeatureWithMagDirValues(Da,Ea);var Fa=this.fields&&0<this.fields.length;Ca=this.renderingRule&&d.isSome(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable?Fa?Ea:V:Ca;this.renderingRule||(Ca=Fa?Ea:V);this._updateFeatureWithRasterAttributeTableValues(Da,
Ca)}Da.sourceLayer=Da.layer=this;la&&this._updateFeatureWithDomainValues(Da);if(ba&&H&&ba.length===H.length)for(Ea=0;Ea<ba.length;Ea++)Fa="Raster.ServicePixelValue."+ba[Ea],Da.attributes[Fa]=this._formatAttributeValue(H[Ea],Fa);I.push(ua[Ba])}return I};pa._updateFeatureWithRasterAttributeTableValues=function(I,H){var V=this.rasterInfo&&this.rasterInfo.attributeTable||d.isSome(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable;const ba=V&&V.features;if(ba){V=V.fields;var ia=V.map(ua=>ua.name).filter(ua=>
"value"===ua.toLowerCase()),la=ia&&ia[0];if(la){var qa=ba.filter(ua=>ua.attributes[la]===(null!=H?parseInt(H,10):null));qa&&qa[0]&&V.forEach(ua=>{const sa=this.rasterAttributeTableFieldPrefix+ua.name;I.attributes[sa]=this._formatAttributeValue(qa[0].attributes[ua.name],sa)})}}};pa._updateFeatureWithMagDirValues=function(I,H){if("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType){var V=H.split(/,\s*/).map(ba=>parseFloat(ba));H=
V.map(ba=>[ba]);V=V.map(ba=>({minValue:ba,maxValue:ba,noDataValue:null}));H=new v({height:1,width:1,pixelType:"f32",pixels:H,statistics:V});null!=this.pixelFilter&&this.pixelFilter({pixelBlock:H,extent:new Z(0,0,0,0,this.spatialReference)});H="esriImageServiceDataTypeVector-MagDir"===this.serviceDataType?[H.pixels[0][0],H.pixels[1][0]]:E.uvComponentToVector([H.pixels[0][0],H.pixels[1][0]]);I.attributes["Raster.Magnitude"]=H[0];I.attributes["Raster.Direction"]=H[1]}};pa._updateFeatureWithDomainValues=
function(I){const H=this.fields&&this.fields.filter(V=>V.domain&&"coded-value"===V.domain.type);null!=H&&H.forEach(V=>{const ba=I.attributes[V.name];if(null!=ba){const ia=V.domain.codedValues.find(la=>la.code===ba);ia&&(I.attributes[V.name]=ia.name)}})};pa._updateResponseFieldNames=function(I,H){if(H&&!(1>H.length)){var V=this.fieldsIndex;d.isSome(V)&&I.forEach(ba=>{if(ba&&ba.attributes)for(const ia of H)if(V.has(ia)){const la=V.get(ia).name;la!==ia&&(ba.attributes[ia]=ba.attributes[la],delete ba.attributes[la])}})}};
pa._getRenderingRuleString=function(I){if(this._hasRenderingRule(I)){var H;I=I.toJSON();I=null!=(H=I.rasterFunctionDefinition)?H:I;if(I.thumbnail||I.thumbnailEx)I.thumbnail=I.thumbnailEx=null;return JSON.stringify(I)}return null};pa._hasRenderingRule=function(I){return I&&I.functionName&&"none"!==I.functionName.toLowerCase()};pa._updateRenderingRulesFunctionName=function(I,H){if(I&&!(1>I.length)){if("Raw"===I)return I.replace("Raw","None");var V=I.toLowerCase().replace(/ /gi,"_");return H.has(V)?
H.get(V):I}};pa._isRFTJson=function(I){return I&&I.name&&I.arguments&&I.function&&I.hasOwnProperty("functionType")};pa._readCapabilities=function(I){const H=I.capabilities?I.capabilities.toLowerCase().split(",").map(Ba=>Ba.trim()):["image","catalog"],{currentVersion:V,advancedQueryCapabilities:ba,maxRecordCount:ia}=I,la=-1<H.indexOf("image"),qa="esriImageServiceDataTypeElevation"===I.serviceDataType,ua=!!(I.spatialReference||I.extent&&I.extent.spatialReference),sa=H.includes("edit");return{data:{supportsAttachment:!1},
operations:{supportsComputeHistograms:la,supportsExportImage:la,supportsIdentify:la,supportsMeasure:-1<H.indexOf("mensuration")&&ua,supportsDownload:-1<H.indexOf("download"),supportsQuery:-1<H.indexOf("catalog")&&I.fields&&0<I.fields.length,supportsGetSamples:10.2<=V&&la,supportsProject:10.3<=V&&la,supportsComputeStatisticsHistograms:10.4<=V&&la,supportsQueryBoundary:10.6<=V&&la,supportsCalculateVolume:10.7<=V&&qa,supportsComputePixelLocation:10.7<=V&&-1<H.indexOf("catalog"),supportsComputeAngles:10.91<=
V,supportsAdd:sa,supportsDelete:sa,supportsEditing:sa,supportsUpdate:sa,supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsChangeTracking:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsExceedsLimitStatistics:!1},query:{maxRecordCount:ia,maxRecordCountFactor:void 0,supportsStatistics:!(null==ba||!ba.supportsStatistics),supportsOrderBy:!(null==ba||!ba.supportsOrderBy),supportsDistinct:!(null==ba||!ba.supportsDistinct),supportsPagination:!(null==
ba||!ba.supportsPagination),supportsStandardizedQueriesOnly:!(null==ba||!ba.useStandardizedQueries),supportsPercentileStatistics:!(null==ba||!ba.supportsPercentileStatistics),supportsCentroid:!(null==ba||!ba.supportsReturningGeometryCentroid),supportsDistance:!(null==ba||!ba.supportsQueryWithDistance),supportsExtent:!(null==ba||!ba.supportsReturningQueryExtent),supportsGeometryProperties:!(null==ba||!ba.supportsReturningGeometryProperties),supportsHavingClause:!(null==ba||!ba.supportsHavingClause),
supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsMaxRecordCountFactor:!1,supportsSqlExpression:!1,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!1,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!1,supportsCacheHint:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!(null==ba||!ba.supportsDefaultSR),
supportsCompactGeometry:!1,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}}};z._createClass(Ra,[{key:"rasterFunctionNamesIndex",get:function(){const I=new Map;if(!this.rasterFunctionInfos||d.isSome(this.rasterFunctionInfos)&&1>this.rasterFunctionInfos.length)return I;d.isSome(this.rasterFunctionInfos)&&this.rasterFunctionInfos.forEach(H=>{I.set(H.name.toLowerCase().replace(/ /gi,"_"),H.name)});return I}},{key:"fieldsIndex",get:function(){return this.fields?new c(this.fields):null}},{key:"format",
set:function(I){I&&La.has(I.toLowerCase())&&this._set("format",I.toLowerCase())}},{key:"mosaicRule",set:function(I){I&&I.mosaicMethod&&(I=n.fromJSON({...I.toJSON(),mosaicMethod:I.mosaicMethod,mosaicOperation:I.mosaicOperation}));this._set("mosaicRule",I)}},{key:"parsedUrl",get:function(){return this.url?B.urlToObject(this.url):null}},{key:"renderer",set:function(I){this.loaded&&(I=this._configRenderer(I));this._set("renderer",I)}},{key:"rasterFields",get:function(){const I=this.rasterAttributeTableFieldPrefix||
"Raster.";var H=new b({name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"});const V=new b({name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),ba=new b({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"string"});let ia=this.fields?L.clone(this.fields):[];ia.push(V);this.capabilities.operations.supportsQuery&&this.fields&&0<this.fields.length&&
ia.push(H);10.4<=this.version&&d.isSome(this.rasterFunctionInfos)&&this.rasterFunctionInfos.some(la=>"none"===la.name.toLowerCase())&&ia.push(ba);d.isSome(this.rasterFunctionInfos)&&this.rasterFunctionInfos.filter(la=>"none"!==la.name.toLowerCase()).forEach(la=>{ia.push(new b({name:"Raster.ServicePixelValue."+la.name,alias:la.name,domain:null,editable:!1,length:50,type:"string"}))});null==this.pixelFilter||"esriImageServiceDataTypeVector-UV"!==this.serviceDataType&&"esriImageServiceDataTypeVector-MagDir"!==
this.serviceDataType||(ia.push(new b({name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"})),ia.push(new b({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));(H=this.rasterInfo.attributeTable&&this.rasterInfo.attributeTable.fields||null)&&0<H.length&&(H=H.filter(la=>"esriFieldTypeOID"!==la.type&&"value"!==la.name.toLowerCase()).map(la=>{const qa=L.clone(la);qa.name=I+la.name;return qa}),ia=ia.concat(H));return ia}},{key:"renderingRule",
set:function(I){I&&I.rasterFunction&&(I=J.fromJSON({...I.toJSON(),rasterFunction:I.rasterFunction,rasterFunctionArguments:I.rasterFunctionArguments}));this._set("renderingRule",I)}}]);return Ra}(oa);r.__decorate([a.property()],oa.prototype,"_functionRasterInfos",void 0);r.__decorate([a.property()],oa.prototype,"_rasterJobHandler",void 0);r.__decorate([a.property({dependsOn:["_serviceSupportsMosaicRule"]})],oa.prototype,"_defaultServiceMosaicRule",void 0);r.__decorate([k.reader("_defaultServiceMosaicRule",
["defaultMosaicMethod"])],oa.prototype,"readDefaultServiceMosaicRule",null);r.__decorate([a.property()],oa.prototype,"_cachedRendererJson",void 0);r.__decorate([a.property({readOnly:!0})],oa.prototype,"_serviceSourceType",void 0);r.__decorate([k.reader("_serviceSourceType",["serviceSourceType","fields"])],oa.prototype,"readServiceSourceType",null);r.__decorate([a.property({readOnly:!0})],oa.prototype,"_serviceSupportsMosaicRule",void 0);r.__decorate([k.reader("_serviceSupportsMosaicRule",["currentVersion",
"fields"])],oa.prototype,"readServiceSupportsMosaicRule",null);r.__decorate([a.property()],oa.prototype,"rasterAttributeTableFieldPrefix",void 0);r.__decorate([a.property({readOnly:!0})],oa.prototype,"rasterFunctionNamesIndex",null);r.__decorate([a.property()],oa.prototype,"adjustAspectRatio",void 0);r.__decorate([a.property({readOnly:!0}),x.aliasOf("serviceRasterInfo.bandCount")],oa.prototype,"bandCount",void 0);r.__decorate([a.property({type:[A.Integer],json:{write:!0}})],oa.prototype,"bandIds",
void 0);r.__decorate([k.reader("bandIds")],oa.prototype,"readBandIds",null);r.__decorate([a.property({readOnly:!0,json:{read:!1}})],oa.prototype,"capabilities",void 0);r.__decorate([k.reader("service","capabilities",["capabilities","currentVersion","serviceDataType"])],oa.prototype,"readCapabilities",null);r.__decorate([a.property({type:Number})],oa.prototype,"compressionQuality",void 0);r.__decorate([g.writer("compressionQuality")],oa.prototype,"writeCompressionQuality",null);r.__decorate([a.property({type:Number})],
oa.prototype,"compressionTolerance",void 0);r.__decorate([g.writer("compressionTolerance")],oa.prototype,"writeCompressionTolerance",null);r.__decorate([a.property({json:{read:{source:"copyrightText"}}})],oa.prototype,"copyright",void 0);r.__decorate([a.property({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],oa.prototype,"definitionExpression",void 0);r.__decorate([a.property({readOnly:!0,constructOnly:!0})],oa.prototype,"exportImageServiceParameters",
void 0);r.__decorate([a.property()],oa.prototype,"rasterInfo",void 0);r.__decorate([a.property({readOnly:!0,type:[b]})],oa.prototype,"fields",void 0);r.__decorate([a.property({readOnly:!0})],oa.prototype,"fieldsIndex",null);r.__decorate([a.property({type:"png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" "),json:{write:!0}})],oa.prototype,"format",null);r.__decorate([k.reader("service","format",["serviceDataType"])],oa.prototype,"readFormat",null);r.__decorate([a.property({type:Z})],oa.prototype,
"fullExtent",void 0);r.__decorate([a.property({readOnly:!0})],oa.prototype,"hasMultidimensions",void 0);r.__decorate([a.property({json:{read:{source:"maxImageHeight"}}})],oa.prototype,"imageMaxHeight",void 0);r.__decorate([a.property({json:{read:{source:"maxImageWidth"}}})],oa.prototype,"imageMaxWidth",void 0);r.__decorate([a.property({type:String,json:{type:w.interpolationKebab.jsonValues,read:w.interpolationKebab.read,write:w.interpolationKebab.write}})],oa.prototype,"interpolation",void 0);r.__decorate([a.property()],
oa.prototype,"minScale",void 0);r.__decorate([k.reader("service","minScale")],oa.prototype,"readMinScale",null);r.__decorate([a.property()],oa.prototype,"maxScale",void 0);r.__decorate([k.reader("service","maxScale")],oa.prototype,"readMaxScale",null);r.__decorate([a.property({type:n})],oa.prototype,"mosaicRule",null);r.__decorate([k.reader("mosaicRule",["mosaicRule","defaultMosaicMethod"])],oa.prototype,"readMosaicRule",null);r.__decorate([g.writer("mosaicRule")],oa.prototype,"writeMosaicRule",null);
r.__decorate([a.property({readOnly:!0}),x.aliasOf("serviceRasterInfo.multidimensionalInfo")],oa.prototype,"multidimensionalInfo",void 0);r.__decorate([a.property({json:{type:A.Integer}})],oa.prototype,"noData",void 0);r.__decorate([g.writer("noData")],oa.prototype,"writeNoData",null);r.__decorate([a.property({type:String,json:{type:w.noDataInterpretationKebab.jsonValues,read:w.noDataInterpretationKebab.read,write:w.noDataInterpretationKebab.write}})],oa.prototype,"noDataInterpretation",void 0);r.__decorate([a.property({type:String,
readOnly:!0,json:{read:{source:["fields"]}}})],oa.prototype,"objectIdField",void 0);r.__decorate([k.reader("objectIdField")],oa.prototype,"readObjectIdField",null);r.__decorate([a.property({})],oa.prototype,"geometryType",void 0);r.__decorate([a.property({})],oa.prototype,"typeIdField",void 0);r.__decorate([a.property({})],oa.prototype,"types",void 0);r.__decorate([a.property({readOnly:!0})],oa.prototype,"parsedUrl",null);r.__decorate([a.property({readOnly:!0}),x.aliasOf("serviceRasterInfo.pixelSize.x")],
oa.prototype,"pixelSizeX",void 0);r.__decorate([a.property({readOnly:!0}),x.aliasOf("serviceRasterInfo.pixelSize.y")],oa.prototype,"pixelSizeY",void 0);r.__decorate([a.property({type:Function})],oa.prototype,"pixelFilter",void 0);r.__decorate([a.property()],oa.prototype,"raster",void 0);r.__decorate([a.property()],oa.prototype,"viewId",void 0);r.__decorate([a.property({types:T.rasterRendererTypes,json:{name:"layerDefinition.drawingInfo.renderer",origins:{"web-scene":{types:T.websceneRasterRendererTypes,
name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy(Na){return{enabled:Na&&"vector-field"!==Na.type&&"flow"!==Na.type}}}}}}})],oa.prototype,"renderer",null);r.__decorate([k.reader("renderer")],oa.prototype,"readRenderer",null);r.__decorate([g.writer("renderer")],oa.prototype,"writeRenderer",null);r.__decorate([a.property()],oa.prototype,"symbolizer",void 0);r.__decorate([a.property(u.opacity)],oa.prototype,"opacity",void 0);r.__decorate([a.property({readOnly:!0}),x.aliasOf("serviceRasterInfo.attributeTable")],
oa.prototype,"rasterAttributeTable",void 0);r.__decorate([a.property({readOnly:!0})],oa.prototype,"rasterFields",null);r.__decorate([a.property({constructOnly:!0})],oa.prototype,"rasterFunctionInfos",void 0);r.__decorate([a.property({type:J})],oa.prototype,"renderingRule",null);r.__decorate([k.reader("renderingRule",["renderingRule","rasterFunctionInfos"])],oa.prototype,"readRenderingRule",null);r.__decorate([g.writer("renderingRule")],oa.prototype,"writeRenderingRule",null);r.__decorate([a.property()],
oa.prototype,"serviceDataType",void 0);r.__decorate([a.property({readOnly:!0,type:Ka})],oa.prototype,"spatialReference",void 0);r.__decorate([k.reader("spatialReference",["spatialReference","extent"])],oa.prototype,"readSpatialReference",null);r.__decorate([a.property({json:{type:Ja.jsonValues}})],oa.prototype,"pixelType",void 0);r.__decorate([k.reader("pixelType")],oa.prototype,"readPixelType",null);r.__decorate([g.writer("pixelType")],oa.prototype,"writePixelType",null);r.__decorate([a.property({constructOnly:!0,
type:y})],oa.prototype,"serviceRasterInfo",void 0);r.__decorate([a.property()],oa.prototype,"sourceJSON",void 0);r.__decorate([a.property(u.url)],oa.prototype,"url",void 0);r.__decorate([a.property({readOnly:!0})],oa.prototype,"version",void 0);r.__decorate([k.reader("version",["currentVersion","fields","timeInfo"])],oa.prototype,"readVersion",null);return oa=r.__decorate([f.subclass("esri.layers.mixins.ArcGISImageService")],oa)};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/rasterRenderers":function(){define("exports ./core/Warning ./renderers/ClassBreaksRenderer ./renderers/FlowRenderer ./renderers/RasterColormapRenderer ./renderers/RasterShadedReliefRenderer ./renderers/RasterStretchRenderer ./renderers/UniqueValueRenderer ./renderers/VectorFieldRenderer".split(" "),
function(R,z,r,G,m,T,O,W,K){function L(B,x){if(!B)return null;if("classBreaks"===B.type&&B.classificationMethod){var A=B.authoringInfo||{classificationMethod:""};A.classificationMethod=B.classificationMethod;B.authoringInfo=A}"vectorField"===B.type&&B.visualVariables&&!Array.isArray(B.visualVariables)&&(B.visualVariables=[B.visualVariables]);A=B?t[B.type]||null:null;if(A)return A=new A,A.read(B,x),A;x&&x.messages&&B&&x.messages.push(new z("renderer:unsupported","Renderers of type '"+(B.type||"unknown")+
"' are not supported",{definition:B,context:x}));return null}const q={key:"type",base:null,typeMap:{"unique-value":W,"class-breaks":r,"raster-colormap":m,"raster-stretch":O,"vector-field":K,"raster-shaded-relief":T,flow:G}},d={...q,typeMap:{...q.typeMap}};delete d.typeMap["vector-field"];delete d.typeMap.flow;const t={uniqueValue:W,classBreaks:r,rasterStretch:O,rasterColormap:m,vectorField:K,rasterShadedRelief:T,flowRenderer:G};R.ClassBreaksRenderer=r;R.FlowRenderer=G;R.RasterColormapRenderer=m;R.RasterShadedReliefRenderer=
T;R.RasterStretchRenderer=O;R.UniqueValueRenderer=W;R.VectorFieldRenderer=K;R.fromJSON=function(B,x){return L(B,x)};R.rasterRendererTypes=q;R.read=L;R.websceneRasterRendererTypes=d;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/renderers/FlowRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./mixins/VisualVariablesMixin ./support/AuthoringInfo ./support/LegendOptions".split(" "),
function(R,z,r,G,m,T,O,W,K,L,q,d,t,B,x){var A;G=new G.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});m=A=function(a){function k(g){g=a.call(this,g)||this;g.density=.8;g.color=new r([255,255,255,1]);g.maxPathLength=200;g.trailWidth=1.5;g.flowSpeed=10;g.trailLength=100;g.smoothing=0;g.flowRepresentation="flow-from";g.type="flow";g.authoringInfo=null;g.legendOptions=null;return g}R._inheritsLoose(k,a);var f=k.prototype;f.clone=function(){var g,u;const {density:h,maxPathLength:l,trailWidth:b,flowSpeed:c,
trailLength:e,smoothing:n,flowRepresentation:v}=this,w=this.color.clone(),J=(this.visualVariables||[]).map(C=>C.clone()),y=null==(g=this.authoringInfo)?void 0:g.clone();g=null==(u=this.legendOptions)?void 0:u.clone();return new A({density:h,color:w,maxPathLength:l,trailWidth:b,flowSpeed:c,trailLength:e,smoothing:n,flowRepresentation:v,visualVariables:J,authoringInfo:y,legendOptions:g})};f.getSymbol=function(g,u){};f.getSymbolAsync=function(){var g=R._asyncToGenerator(function*(u,h){});return function(u,
h){return g.apply(this,arguments)}}();f.getSymbols=function(){return[]};return k}(t.VisualVariablesMixin(m.JSONSupport));z.__decorate([O.property({type:Number,json:{write:!0}})],m.prototype,"density",void 0);z.__decorate([O.property({type:r,json:{write:{allowNull:!0}}})],m.prototype,"color",void 0);z.__decorate([O.property({type:Number,cast:T.toPt,json:{write:!0}})],m.prototype,"maxPathLength",void 0);z.__decorate([O.property({type:Number,cast:T.toPt,json:{write:!0}})],m.prototype,"trailWidth",void 0);
z.__decorate([O.property({type:Number,json:{write:!0}})],m.prototype,"flowSpeed",void 0);z.__decorate([O.property({type:Number,json:{write:!0}})],m.prototype,"trailLength",void 0);z.__decorate([O.property({type:Number,cast:T.toPt,json:{write:!1}})],m.prototype,"smoothing",void 0);z.__decorate([O.property({type:G.apiValues,json:{type:G.jsonValues,read:{reader:G.read},write:{writer:G.write}}})],m.prototype,"flowRepresentation",void 0);z.__decorate([q.enumeration({flowRenderer:"flow"})],m.prototype,
"type",void 0);z.__decorate([O.property({type:B,json:{write:!0}})],m.prototype,"authoringInfo",void 0);z.__decorate([O.property({type:x.default,json:{write:!0}})],m.prototype,"legendOptions",void 0);return m=A=z.__decorate([d.subclass("esri.renderers.FlowRenderer")],m)})},"esri/renderers/RasterColormapRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./support/ColormapInfo ./support/colorRampUtils".split(" "),
function(R,z,r,G,m,T,O,W,K,L,q){var d;r=d=function(t){function B(A){A=t.call(this,A)||this;A.colormapInfos=null;A.type="raster-colormap";return A}R._inheritsLoose(B,t);B.createFromColormap=function(A,a){if(!A)return null;const k=5===A[0].length;A=[...A].sort(f=>f[0][0]-f[1][0]).map(f=>{var g;return L.fromJSON({value:f[0],color:k?f.slice(1,5):f.slice(1,4).concat([255]),label:a?null!=(g=a[f[0]])?g:"":f[0]})});return new d({colormapInfos:A})};B.createFromColorramp=function(A){A=q.convertColorRampToColormap(A,
256);return d.createFromColormap(A)};var x=B.prototype;x.clone=function(){return new d({colormapInfos:this.colormapInfos.map(A=>A.toJSON())})};x.extractColormap=function(){return this.colormapInfos.map(({value:A,color:a})=>[A,a.r,a.g,a.b,1<a.a?a.a:255*a.a&255]).sort((A,a)=>A[0]-a[0])};return B}(r.JSONSupport);z.__decorate([G.property({type:[L],json:{write:!0}})],r.prototype,"colormapInfos",void 0);z.__decorate([W.enumeration({rasterColormap:"raster-colormap"})],r.prototype,"type",void 0);return r=
d=z.__decorate([K.subclass("esri.renderers.RasterColormapRenderer")],r)})},"esri/renderers/support/ColormapInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(R,z,r,G,m,T,O,W,K){G=function(L){function q(){var d=L.apply(this,arguments)||this;
d.value=null;d.label=null;d.color=null;return d}R._inheritsLoose(q,L);return q}(G.JSONSupport);z.__decorate([m.property({type:Number,json:{write:!0}})],G.prototype,"value",void 0);z.__decorate([m.property({type:String,json:{write:!0}})],G.prototype,"label",void 0);z.__decorate([m.property({type:r,json:{type:[W.Integer],write:!0}})],G.prototype,"color",void 0);return G=z.__decorate([K.subclass("esri.renderers.support.ColormapInfo")],G)})},"esri/renderers/support/colorRampUtils":function(){define(["exports",
"../../Color","../../core/colorUtils"],function(R,z,r){function G(q,d){if(!q||!d||q.length!==d.length)return!1;for(let t=0;t<q.length;t++)if(q[t]>d[t]+2||q[t]<d[t]-2)return!1;return!0}function m(q,d){if(q){d=d?d:K;var t=null,B;"algorithmic"===q.type?d.some(x=>{if(G(q.fromColor.toRgb(),x.fromColor)&&G(q.toColor.toRgb(),x.toColor))return t=x.id,!0}):"multipart"===q.type&&d.some(x=>{if(q.colorRamps&&x.colorRamps&&q.colorRamps.length===x.colorRamps.length&&(B=q.colorRamps,!x.colorRamps.some((A,a)=>{if(!G(B[a].fromColor.toRgb(),
(new z(A.fromColor)).toRgb())||!G(B[a].toColor.toRgb(),(new z(A.toColor)).toRgb()))return!0}))){if(t)return!0;t=x.id}});return t}}function T(q){return(q=m(q))?L[q]:null}function O(q){if(q){var d=q.toJSON();return{Algorithm:(null==d?void 0:d.Algorithm)||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:W(q.fromColor),ToColor:W(q.toColor)}}}function W(q){q=r.toHSV(q);return{type:"HsvColor",Hue:q.h,Saturation:q.s,Value:q.v,AlphaValue:255}}const K=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,
190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,
255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,
130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],
toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,
240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},
{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",
type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,
173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,
13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},
{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],
toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,
17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",
type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,
168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",
colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,
0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",
type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],L={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",
blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",
cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",
partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",
purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",
redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",
yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};R.PREDEFINED_COLOR_RAMP_NAME_MAP=L;R.PREDEFINED_JSON_COLOR_RAMPS=K;R.convertColorRampToColormap=function(q,d,t=!1){if(q&&d&&!(1>d)){var B="toJSON"in q?q.toJSON():q,x="multipart"===B.type?B.colorRamps.length:1;q=[];var A=[],a,k,f,g=0;if(1===d){var u="multipart"===B.type?B.colorRamps[0].fromColor:B.fromColor;A.push([0].concat(u));return A}for(let l=0;l<x;l++)q[l]={start:null,end:null},
q[l].start=g,q[l].end=g+1/x,g=q[l].end;for(let l=0;l<d;l++){var h=l/(d-1);q.forEach((b,c)=>{if(h>=b.start&&(h<b.end||l===d-1&&c===x-1)){f=(h-b.start)/(b.end-b.start);"multipart"===B.type?(u=B.colorRamps[c].fromColor,a=B.colorRamps[c].toColor):(u=B.fromColor,a=B.toColor);if(0===l)A.push([l].concat(u.slice(0,3)));else if(l===d-1)A.push([l].concat(a.slice(0,3)));else{var e={r:a[0],g:a[1],b:a[2]};b=f;c=r.toLAB({r:u[0],g:u[1],b:u[2]});e=r.toLAB(e);k=r.toRGB({l:c.l*(1-b)+b*e.l,a:c.a*(1-b)+b*e.a,b:c.b*(1-
b)+b*e.b});A.push([l,k.r,k.g,k.b])}b=null!=u[3]?1<u[3]?u[3]/255:u[3]:1;c=null!=a[3]?1<a[3]?a[3]/255:a[3]:1;t&&A[l].push(Math.min(255,Math.round(255*(b*(1-f)+c*f))))}})}return A}};R.getColorRampId=m;R.getColorRampName=T;R.getRFxArgColorRampValue=function(q){const d=T(q);if(q){if("algorithmic"===q.type)return{...O(q),Name:d};if(q.colorRamps)return q=q.colorRamps.map(O),{type:"MultiPartColorRamp",NumColorRamps:q.length,ArrayOfColorRamp:q,Name:d}}};R.rgbaConvertTo32Bit=function(q){q=q.reverse().map(d=>
{d=d.toString(16);return 2>d.length?"0"+d:d});return 4294967295&Number.parseInt(q.join(""),16)};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/core/colorUtils":function(){define(["exports"],function(R){function z(L,q){const d=[];let t,B;if(L[0].length!==q.length)throw"dimensions do not match";const x=L.length,A=L[0].length;let a=0;for(t=0;t<x;t++){for(B=a=0;B<A;B++)a+=L[t][B]*q[B];d.push(a)}return d}function r(L){L=[L.r/255,L.g/255,L.b/255].map(q=>.04045>=q?q/12.92:((q+.055)/1.055)**2.4);
L=z(W,L);return{x:100*L[0],y:100*L[1],z:100*L[2]}}function G(L){L=z(K,[L.x/100,L.y/100,L.z/100]).map(q=>Math.min(1,Math.max(.0031308>=q?12.92*q:1.055*q**(1/2.4)-.055,0)));return{r:Math.round(255*L[0]),g:Math.round(255*L[1]),b:Math.round(255*L[2])}}function m(L){L=[L.x/95.047,L.y/100,L.z/108.883].map(q=>q>(6/29)**3?q**(1/3):1/3*(29/6)**2*q+4/29);return{l:116*L[1]-16,a:500*(L[0]-L[1]),b:200*(L[1]-L[2])}}function T(L){const q=L.l;L=[(q+16)/116+L.a/500,(q+16)/116,(q+16)/116-L.b/200].map(d=>d>6/29?d**
3:3*(6/29)**2*(d-4/29));return{x:95.047*L[0],y:100*L[1],z:108.883*L[2]}}function O(L){if("r"in L&&"g"in L&&"b"in L)return L;if("l"in L&&"c"in L&&"h"in L){var q=L.c;var d=L.h;q={l:L.l,a:q*Math.cos(d),b:q*Math.sin(d)};return G(T(q))}if("l"in L&&"a"in L&&"b"in L)return G(T(L));if("x"in L&&"y"in L&&"z"in L)return G(L);if("h"in L&&"s"in L&&"v"in L){{d=(L.h+360)%360/60;q=L.v/100*255;L=L.s/100*q;const t=L*(1-Math.abs(d%2-1));switch(Math.floor(d)){case 0:d={r:L,g:t,b:0};break;case 1:d={r:t,g:L,b:0};break;
case 2:d={r:0,g:L,b:t};break;case 3:d={r:0,g:t,b:L};break;case 4:d={r:t,g:0,b:L};break;case 5:case 6:d={r:L,g:0,b:t};break;default:d={r:0,g:0,b:0}}d.r=Math.round(d.r+q-L);d.g=Math.round(d.g+q-L);d.b=Math.round(d.b+q-L);q=d}return q}return L}const W=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],K=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];R.darken=function(L,q){L=m(r(L));L.l*=1-q;return G(T(L))};R.toHSV=function(L){if("h"in L&&"s"in L&&"v"in L)return L;var q=
O(L);{L=q.r;const d=q.g,t=q.b;q=Math.max(L,d,t);const B=q-Math.min(L,d,t);L=0===B?0:q===L?(d-t)/B%6:q===d?(t-L)/B+2:(L-d)/B+4;0>L&&(L+=6);L={h:60*L,s:100*(0===B?0:B/q),v:100/255*q}}return L};R.toLAB=function(L){return"l"in L&&"a"in L&&"b"in L?L:m(r(O(L)))};R.toLCH=function(L){if(!("l"in L&&"c"in L&&"h"in L)){{var q=m(r(O(L)));L=q.l;var d=q.a;const t=q.b;q=Math.sqrt(d*d+t*t);d=Math.atan2(t,d);d=0<d?d:d+2*Math.PI;L={l:L,c:q,h:d}}}return L};R.toRGB=O;R.toXYZ=function(L){return"x"in L&&"y"in L&&"z"in
L?L:r(O(L))};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/renderers/RasterShadedReliefRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../rest/support/colorRamps".split(" "),function(R,z,r,G,m,T,O,W,K,L){var q;
r=q=function(d){function t(x){x=d.call(this,x)||this;x.altitude=45;x.azimuth=315;x.colorRamp=null;x.hillshadeType="multi-directional";x.pixelSizePower=.664;x.pixelSizeFactor=.024;x.scalingType="none";x.type="raster-shaded-relief";x.zFactor=1;return x}R._inheritsLoose(t,d);var B=t.prototype;B.readColorRamp=function(x){return L.fromJSON(x)};B.clone=function(){return new q({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,scalingType:this.scalingType,
pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:G.clone(this.colorRamp)})};return t}(r.JSONSupport);z.__decorate([m.property({type:Number,json:{write:!0}})],r.prototype,"altitude",void 0);z.__decorate([m.property({type:Number,json:{write:!0}})],r.prototype,"azimuth",void 0);z.__decorate([m.property({types:L.types,json:{write:!0}})],r.prototype,"colorRamp",void 0);z.__decorate([W.reader("colorRamp")],r.prototype,"readColorRamp",null);z.__decorate([m.property({type:["traditional",
"multi-directional"],json:{write:!0}})],r.prototype,"hillshadeType",void 0);z.__decorate([m.property({type:Number,json:{write:!0}})],r.prototype,"pixelSizePower",void 0);z.__decorate([m.property({type:Number,json:{write:!0}})],r.prototype,"pixelSizeFactor",void 0);z.__decorate([m.property({type:["none","adjusted"],json:{write:!0}})],r.prototype,"scalingType",void 0);z.__decorate([O.enumeration({rasterShadedRelief:"raster-shaded-relief"})],r.prototype,"type",void 0);z.__decorate([m.property({type:Number,
json:{write:!0}})],r.prototype,"zFactor",void 0);return r=q=z.__decorate([K.subclass("esri.renderers.RasterShadedReliefRenderer")],r)})},"esri/renderers/RasterStretchRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./support/stretchRendererUtils ../rest/support/colorRamps".split(" "),
function(R,z,r,G,m,T,O,W,K,L,q,d){var t;r=t=function(B){function x(a){a=B.call(this,a)||this;a.colorRamp=null;a.computeGamma=!1;a.dynamicRangeAdjustment=!1;a.gamma=[];a.maxPercent=null;a.minPercent=null;a.numberOfStandardDeviations=null;a.outputMax=null;a.outputMin=null;a.sigmoidStrengthLevel=null;a.statistics=[];a.histograms=null;a.useGamma=!1;a.stretchType="none";a.type="raster-stretch";return a}R._inheritsLoose(x,B);var A=x.prototype;A.readColorRamp=function(a){if(a)return d.fromJSON(a)};A.writeStatistics=
function(a,k,f){var g;null!=(g=a)&&g.length&&(Array.isArray(a[0])||(a=a.map(u=>[u.min,u.max,u.avg,u.stddev])),k[f]=a)};A.readStretchType=function(a,k){a=k.stretchType;"number"===typeof a&&(a=q.stretchTypeFunctionEnum[a]);return q.stretchTypeJSONDict.read(a)};A.clone=function(){return new t({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:G.clone(this.statistics),gamma:G.clone(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,
numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:G.clone(this.colorRamp),histograms:G.clone(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})};return x}(r.JSONSupport);z.__decorate([m.property({types:d.types,json:{write:!0}})],r.prototype,"colorRamp",void 0);z.__decorate([W.reader("colorRamp")],r.prototype,"readColorRamp",null);z.__decorate([m.property({type:Boolean,json:{write:!0}})],r.prototype,"computeGamma",
void 0);z.__decorate([m.property({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],r.prototype,"dynamicRangeAdjustment",void 0);z.__decorate([m.property({type:[Number],json:{write:!0}})],r.prototype,"gamma",void 0);z.__decorate([m.property({type:Number,json:{write:!0}})],r.prototype,"maxPercent",void 0);z.__decorate([m.property({type:Number,json:{write:!0}})],r.prototype,"minPercent",void 0);z.__decorate([m.property({type:Number,json:{write:!0}})],r.prototype,"numberOfStandardDeviations",
void 0);z.__decorate([m.property({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],r.prototype,"outputMax",void 0);z.__decorate([m.property({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],r.prototype,"outputMin",void 0);z.__decorate([m.property({type:Number,json:{write:!0}})],r.prototype,"sigmoidStrengthLevel",void 0);z.__decorate([m.property({json:{type:[[Number]],write:!0}})],r.prototype,"statistics",void 0);z.__decorate([m.property()],r.prototype,"histograms",void 0);
z.__decorate([L.writer("statistics")],r.prototype,"writeStatistics",null);z.__decorate([m.property({type:Boolean,json:{write:!0}})],r.prototype,"useGamma",void 0);z.__decorate([m.property({type:q.stretchTypeJSONDict.apiValues,json:{type:q.stretchTypeJSONDict.jsonValues,write:q.stretchTypeJSONDict.write}})],r.prototype,"stretchType",void 0);z.__decorate([W.reader("stretchType",["stretchType"])],r.prototype,"readStretchType",null);z.__decorate([O.enumeration({rasterStretch:"raster-stretch"})],r.prototype,
"type",void 0);return r=t=z.__decorate([K.subclass("esri.renderers.RasterStretchRenderer")],r)})},"esri/renderers/support/stretchRendererUtils":function(){define(["exports","../../core/jsonMap"],function(R,z){z=new z.JSONMap({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"});R.stretchTypeFunctionEnum={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};
R.stretchTypeJSONDict=z;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/renderers/VectorFieldRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../geometry ../Graphic ../symbols ../core/jsonMap ../core/JSONSupport ../core/lang ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/support/normalizeUtils ../layers/support/rasterFunctions/vectorFieldUtils ./ClassBreaksRenderer ./mixins/VisualVariablesMixin ./support/ClassBreakInfo ./visualVariables/RotationVariable ./visualVariables/SizeVariable ./visualVariables/support/visualVariableUtils ../symbols/SimpleLineSymbol ../symbols/SimpleMarkerSymbol ../symbols/support/utils ../symbols/PictureMarkerSymbol ../geometry/Point".split(" "),
function(R,z,r,G,m,T,O,W,K,L,q,d,t,B,x,A,a,k,f,g,u,h,l,b,c,e,n,v){var w;const J=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]);G=new O.JSONMap({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"});
O=new O.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});W=w=function(y){function C(E){E=y.call(this,E)||this;E.attributeField="Magnitude";E.flowRepresentation="flow-from";E.rotationType="arithmetic";E.style="single-arrow";E.symbolTileSize=50;E.type="vector-field";return E}R._inheritsLoose(C,y);var p=C.prototype;p.readInputUnit=function(E,N){return J.has(E)?a.unitKebabDict.fromJSON(E):null};p.readOutputUnit=function(E,N){return J.has(E)?a.unitKebabDict.fromJSON(E):null};p.clone=function(){return new w({attributeField:this.attributeField,
flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:K.clone(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})};p.getGraphicsFromPixelData=function(){var E=R._asyncToGenerator(function*(N,U=!1,D=[]){var F;const M=[];var Q=a.getUnitConversionFactor(this.inputUnit,this.outputUnit),S=(null==(F=this.rotationVariables[0])?void 0:F.rotationType)||this.rotationType;U=U?a.convertVectorFieldData(N.pixelBlock,
"vector-uv",S,Q):a.convertVectorFieldUnit(N.pixelBlock,"vector-magdir",Q);if(L.isNone(U))return M;N=N.extent;F=U.mask&&0<U.mask.length;Q=0;S=(N.xmax-N.xmin)/U.width;const X=(N.ymax-N.ymin)/U.height;for(let ca=0;ca<U.height;ca++)for(let aa=0;aa<U.width;aa++,Q++){let ea=new v({x:N.xmin+aa*S+S/2,y:N.ymax-ca*X-X/2,spatialReference:N.spatialReference});ea=(yield A.normalizeCentralMeridian(ea))[0];var Z=D.some(fa=>fa.intersects(ea));F&&!U.mask[Q]||Z||(Z=new m({geometry:{type:"point",x:ea.x,y:ea.y,spatialReference:N.spatialReference},
attributes:{Magnitude:U.pixels[0][Q],Direction:U.pixels[1][Q]}}),Z.symbol=this._getVisualVariablesAppliedSymbol(Z),M.push(Z))}return M});return function(N){return E.apply(this,arguments)}}();p.getSymbol=function(E,N){};p.getSymbolAsync=function(){var E=R._asyncToGenerator(function*(N,U){});return function(N,U){return E.apply(this,arguments)}}();p.getSymbols=function(){return[]};p.getClassBreakInfos=function(){var E;return null==(E=this.styleRenderer)?void 0:E.classBreakInfos};p.getDefaultSymbol=function(){var E;
return null==(E=this.styleRenderer)?void 0:E.defaultSymbol};p._getDefaultSymbol=function(E){return new c({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new b({width:0}),size:20,color:E||new r([0,92,230])})};p._getVisualVariablesAppliedSymbol=function(E){if(E){var N=this.styleRenderer&&this.styleRenderer.getSymbol(E);N=N.clone();var U=this.sizeVariables,D=this.rotationVariables;U&&U.length&&this.sizeVariables.forEach(F=>e.applySizesToSymbol(N,l.getAllSizes([F],E)));D&&D.length&&(E.attributes.Direction+=
"flow-to"===this.flowRepresentation===("ocean-current-kn"===this.style||"ocean-current-m"===this.style)?0:180,this.rotationVariables.forEach(F=>e.applyRotationToSymbol(N,l.getRotationAngle(F,E),F.axis)));return N}};p._createStyleRenderer=function(E){let N={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(E){case "single-arrow":N=this._createSingleArrowRenderer();break;case "beaufort-kn":N=this._createBeaufortKnotsRenderer();break;case "beaufort-m":N=this._createBeaufortMeterRenderer();
break;case "beaufort-ft":N=this._createBeaufortFeetRenderer();break;case "beaufort-mi":N=this._createBeaufortMilesRenderer();break;case "beaufort-km":N=this._createBeaufortKilometersRenderer();break;case "ocean-current-m":N=this._createCurrentMeterRenderer();break;case "ocean-current-kn":N=this._createCurrentKnotsRenderer();break;case "simple-scalar":N=this._createSimpleScalarRenderer();break;case "wind-barb":N=this._createWindBarbsRenderer();break;case "classified-arrow":N=this._createClassifiedArrowRenderer()}return new k(N)};
p._createSingleArrowRenderer=function(){return{defaultSymbol:this._getDefaultSymbol()}};p._createBeaufortKnotsRenderer=function(){const E=this._getDefaultSymbol(new r([214,47,39])),N=this._getClassBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]]);return{defaultSymbol:E,classBreakInfos:N}};p._createBeaufortMeterRenderer=function(){const E=this._getDefaultSymbol(new r([214,
47,39])),N=this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:E,classBreakInfos:N}};p._createBeaufortFeetRenderer=function(){const E=this._getDefaultSymbol(new r([214,47,39]));var N=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];N=N.map(U=>3.28084*U);N=this._getClassBreaks(N,[[69,
117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:E,classBreakInfos:N}};p._createBeaufortMilesRenderer=function(){const E=this._getDefaultSymbol(new r([214,47,39]));var N=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];N=N.map(U=>2.23694*U);N=this._getClassBreaks(N,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],
[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:E,classBreakInfos:N}};p._createBeaufortKilometersRenderer=function(){const E=this._getDefaultSymbol(new r([214,47,39]));var N=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];N=N.map(U=>3.6*U);N=this._getClassBreaks(N,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:E,
classBreakInfos:N}};p._createCurrentMeterRenderer=function(){const E=this._getDefaultSymbol(new r([177,177,177])),N=this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]]);return{defaultSymbol:E,classBreakInfos:N}};p._createCurrentKnotsRenderer=function(){const E=this._getDefaultSymbol(new r([177,177,177])),N=this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]]);
return{defaultSymbol:E,classBreakInfos:N}};p._createClassifiedArrowRenderer=function(){var E;const N=this._getDefaultSymbol(new r([56,168,0]));var U=[0,1E-6,3.5,7,10.5,14];if(null!=(E=this.sizeVariables)&&E.length){const D=this.sizeVariables[0].minDataValue;E=this.sizeVariables[0].maxDataValue;if(D&&E){const F=(E-D)/5;U=Array.from(Array(6).keys()).map(M=>D+F*M)}}U=this._getClassBreaks(U,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]]);return{defaultSymbol:N,classBreakInfos:U}};p._createSimpleScalarRenderer=
function(){return{defaultSymbol:n.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII\x3d",
height:20,width:20,type:"esriPMS",angle:0})}};p._createWindBarbsRenderer=function(){const E=Array.from(Array(31).keys()).map(F=>5*F),N=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"90-95",
path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"}],U=n.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",
height:20,width:20,type:"esriPMS",angle:0}),D=E.map((F,M)=>{if(M!==E.length-1)if(0===M)var Q={minValue:F,maxValue:E[M+1],symbol:U};else Q=n.fromJSON({type:"esriPMS",imageData:N[M].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0}),Q={minValue:F,maxValue:E[M+1],symbol:Q};return new g(Q)});return{defaultSymbol:U,classBreakInfos:D}};p._getClassBreaks=function(E,N){return N.map((U,D)=>new g({minValue:E[D],maxValue:E[D+1],symbol:this._getDefaultSymbol(new r(U))}))};R._createClass(C,[{key:"styleRenderer",
get:function(){const E=this.attributeField,N=this._createStyleRenderer(this.style);N.field=E;return N}},{key:"sizeVariables",get:function(){const E=[];if(this.visualVariables)for(var N of this.visualVariables)"size"===N.type&&E.push(N);0===E.length&&(N=new h({field:"Magnitude",minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize}),this.visualVariables?this.visualVariables.push(N):this._set("visualVariables",[N]),E.push(N));return E}},{key:"rotationVariables",get:function(){const E=[];if(this.visualVariables)for(var N of this.visualVariables)"rotation"===
N.type&&E.push(N);0===E.length&&(N=new u({field:"Direction",rotationType:this.rotationType}),this.visualVariables?this.visualVariables.push(N):this._set("visualVariables",[N]),E.push(N));return E}}]);return C}(f.VisualVariablesMixin(W.JSONSupport));z.__decorate([q.property({type:String,json:{write:!0}})],W.prototype,"attributeField",void 0);z.__decorate([q.property({type:O.apiValues,json:{type:O.jsonValues,read:{reader:O.read},write:{writer:O.write}}})],W.prototype,"flowRepresentation",void 0);z.__decorate([q.property({type:["geographic",
"arithmetic"],json:{write:!0}})],W.prototype,"rotationType",void 0);z.__decorate([q.property({type:G.apiValues,json:{type:G.jsonValues,read:{reader:G.read},write:{writer:G.write}}})],W.prototype,"style",void 0);z.__decorate([q.property({json:{write:!0}})],W.prototype,"symbolTileSize",void 0);z.__decorate([q.property({type:a.unitKebabDict.apiValues,json:{type:a.unitKebabDict.jsonValues,write:{writer:a.unitKebabDict.write}}})],W.prototype,"inputUnit",void 0);z.__decorate([B.reader("inputUnit")],W.prototype,
"readInputUnit",null);z.__decorate([q.property({type:a.unitKebabDict.apiValues,json:{type:a.unitKebabDict.jsonValues,read:{reader:a.unitKebabDict.read},write:{writer:a.unitKebabDict.write}}})],W.prototype,"outputUnit",void 0);z.__decorate([B.reader("outputUnit")],W.prototype,"readOutputUnit",null);z.__decorate([t.enumeration({vectorField:"vector-field"})],W.prototype,"type",void 0);z.__decorate([q.property({type:k})],W.prototype,"styleRenderer",null);z.__decorate([q.property({type:h})],W.prototype,
"sizeVariables",null);z.__decorate([q.property({type:u})],W.prototype,"rotationVariables",null);return W=w=z.__decorate([x.subclass("esri.renderers.VectorFieldRenderer")],W)})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports","../../../core/jsonMap","../../../core/maybe","../PixelBlock","./pixelUtils"],function(R,z,r,G,m){function T(b,c){return A.get(b)/A.get(c)||1}function O(b,c="geographic"){const [e,n]=b;b=Math.sqrt(e*e+n*n);let v=Math.atan2(n,e)*a;v=(360+v)%
360;"geographic"===c&&(v=(450-v)%360);return[b,v]}function W(b,c="geographic"){let e=b[1];"geographic"===c&&(e=(450-e)%360);e%=360;b=b[0];return[b*Math.cos(e/a),b*Math.sin(e/a)]}function K(b,c,e="geographic",n=1){if(!m.isValidPixelBlock(b))return b;const {pixels:v,width:w,height:J}=b;var y=w*J;const C=v[0],p=v[1],E=b.pixelType.startsWith("f")?b.pixelType:"f32",N=G.createEmptyBand(E,y);y=G.createEmptyBand(E,y);let U=0;for(let D=0;D<J;D++)for(let F=0;F<w;F++)"vector-uv"===c?([N[U],y[U]]=O([C[U],p[U]],
e),N[U]*=n):([N[U],y[U]]=W([C[U],p[U]],e),N[U]*=n,y[U]*=n),U++;b=new G({pixelType:E,width:b.width,height:b.height,mask:b.mask,validPixelCount:b.validPixelCount,maskIsAlpha:b.maskIsAlpha,pixels:[N,y]});b.updateStatistics();return b}function L(b=0,c=Math.PI,e=!0){e&&(c=(2*Math.PI-c)%(2*Math.PI));var n=e?-1:1;e=5*n;const v=20*n,w=25*n;n*=2;let [J,y]=[5,0-v],[C,p]=[J+2,y],[E,N]=[C-0,p+n],[U,D]=[-5,0-w],[F,M]=[U+0,D-n];b=Math.ceil(b/5);let Q=Math.floor(b/10);b-=8*Q;const S=[],X=[];for(let da=0;da<b/2;da++,
Q--){0>=Q&&1===b%2&&da===(b-1)/2&&(U=0,F=U+0,D=(D+y)/2,M=D-n);const [ja,ka]=q(U,D,c,45);if(0<Q){const [ma,ra]=q(C,D,c,45),[na,za]=q(J,y,c,45);S.push(ma);S.push(ra);S.push(ja);S.push(ka);S.push(na);S.push(za)}else{const [ma,ra]=q(C,p,c,45),[na,za]=q(E,N,c,45),[ta,wa]=q(F,M,c,45);X.push(ja);X.push(ka);X.push(ta);X.push(wa);X.push(na);X.push(za);X.push(ma);X.push(ra)}D+=e;y+=e;p+=e;N+=e;M+=e}const [Z,ca]=q(5,0+v,c,45),[aa,ea]=q(7,0+v,c,45),[fa,P]=q(5,0-w,c,45),[Y,ha]=q(7,0-w,c,45);return{pennants:S,
barbs:X,shaft:[Z,ca,aa,ea,fa,P,Y,ha]}}function q(b,c,e,n=1){return[Math.sqrt(b*b+c*c)/n,(2*Math.PI+(2*Math.PI+Math.atan2(c,b))%(2*Math.PI)-e)%(2*Math.PI)]}function d(b,c,e,n){e=T(n||"knots",e);for(n=1;n<c.length;n++)if(n===c.length-1){if(b<c[n]*e)break}else if(b<=c[n]*e)break;return Math.min(n-1,c.length-2)}function t(b,c,e,n,v){let w=0;switch(c){case "beaufort_kn":w=d(b,g,"knots",e);break;case "beaufort_km":w=d(b,g,"kilometer-per-hour",e);break;case "beaufort_ft":w=d(b,g,"feet-per-second",e);break;
case "beaufort_m":w=d(b,g,"meter-per-second",e);break;case "classified_arrow":w=d(b,v,n,e);break;case "ocean_current_m":w=d(b,u,"meter-per-second",e);break;case "ocean_current_kn":w=d(b,h,"knots",e)}return w}function B(b,c){const {style:e,inputUnit:n,outputUnit:v,breakValues:w}=c;c=k.fromJSON(n);const J=k.fromJSON(v);let y=0,C=0;const {width:p,height:E,mask:N}=b,U=b.pixels[0];b=b.pixels[1];var D=N?N.filter(S=>0<S).length:p*E;const F=new Float32Array(42*D);D=new Uint32Array(15*D);for(let S=0;S<E;S++)for(let X=
0;X<p;X++){var M=S*p+X;if(!N||N[S*p+X]){var Q;const Z=null!=(Q=(b[M]+360)%360/180*Math.PI)?Q:2*Math.PI*Math.random(),ca=t(U[M],e,c,J,w);for(let aa=0;aa<f.length;aa+=2)F[y++]=(X+.5)/p,F[y++]=(S+.5)/E,F[y++]=f[aa],F[y++]=f[aa+1]+Z,F[y++]=ca,F[y++]=U[M];M=7*(y/42-1);D[C++]=M;D[C++]=M+1;D[C++]=M+2;D[C++]=M+0;D[C++]=M+4;D[C++]=M+3;D[C++]=M+0;D[C++]=M+2;D[C++]=M+3;D[C++]=M+2;D[C++]=M+5;D[C++]=M+3;D[C++]=M+5;D[C++]=M+6;D[C++]=M+3}}return{vertexData:F,indexData:D}}function x(b,c){let e=0,n=0;const {width:v,
height:w,mask:J}=b;b=b.pixels[0];const y=[],C=[];var p=k.fromJSON(c.inputUnit);p=T(p,"knots");c="wind_speed"===c.style?5:Number.MAX_VALUE;for(let N=0;N<w;N++)for(let U=0;U<v;U++){var E=b[N*v+U]*p;if((!J||J[N*v+U])&&E<c){for(let D=0;4>D;D++)y[e++]=(U+.5)/v,y[e++]=(N+.5)/w,y[e++]=2>D?-.5:.5,y[e++]=0===D%2?-.5:.5,y[e++]=0,y[e++]=E;E=4*(e/24-1);C[n++]=E;C[n++]=E+1;C[n++]=E+2;C[n++]=E+1;C[n++]=E+2;C[n++]=E+3}}return{vertexData:new Float32Array(y),indexData:new Uint32Array(C)}}const A=new Map;A.set("meter-per-second",
1);A.set("kilometer-per-hour",.277778);A.set("knots",.514444);A.set("feet-per-second",.3048);A.set("mile-per-hour",.44704);const a=180/Math.PI,k=new z.JSONMap({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"}),f=function(b=0,c=0,e=Math.PI,n=!0){n&&(e=(2*Math.PI-e)%(2*Math.PI));n=n?-1:1;const v=-7*n,w=-2*n,J=-16*n,[y,C]=q(0,c+13*n,e,21.75),[p,E]=q(b-5.5,c+v,e,21.75),[N,U]=q(b+5.5,
c+v,e,21.75),[D,F]=q(b-1.5,c+w,e,21.75),[M,Q]=q(b+1.5,c+w,e,21.75),[S,X]=q(b-1.5,c+J,e,21.75),[Z,ca]=q(b+1.5,c+J,e,21.75);return[y,C,p,E,D,F,M,Q,N,U,S,X,Z,ca]}(0,0,0),g=[0,1,3,6,10,16,21,27,33,40,47,55,63],u=[0,.5,1,1.5,2],h=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],l=[];R.convertToLocalDirections=function(b,c,e,n="geographic"){if(!m.isValidPixelBlock(b)||r.isNone(e))return b;b="vector-magdir"===c?b.clone():r.unwrap(K(b,c));const v=b.pixels[1];for(let w=0;w<v.length;w++)v[w]="geographic"===n?(v[w]+e[w]+270)%
360:(v[w]+360-e[w])%360;return"vector-magdir"===c?b:K(b,"vector-magdir")};R.convertVectorFieldData=K;R.convertVectorFieldUnit=function(b,c,e=1){if(1===e||!m.isValidPixelBlock(b))return b;b=b.clone();const {pixels:n,width:v,height:w}=b,J=n[0],y=n[1];let C=0;for(let p=0;p<w;p++)for(let E=0;E<v;E++)"vector-uv"===c?(J[C]*=e,y[C]*=e):J[C]*=e,C++;b.updateStatistics();return b};R.createVFMesh=function(b,c){if("simple_scalar"===c.style)var e=x(b,c);else if("wind_speed"===c.style){{if(0===l.length)for(var n=
0;30>n;n++)l.push(L(5*n,0));c=k.fromJSON(c.inputUnit);c=T(c,"knots");const {width:y,height:C,mask:p}=b;n=b.pixels[0];b=b.pixels[1];const E=[],N=[];let U=0,D=0;for(let F=0;F<C;F++)for(let M=0;M<y;M++){var v=F*y+M,w=n[v]*c;if((!p||p[F*y+M])&&5<=w){const Q=null!=(e=(b[v]+360)%360/180*Math.PI)?e:2*Math.PI*Math.random(),{pennants:S,barbs:X,shaft:Z}=l[Math.min(Math.floor(w/5),29)];if(0===S.length+X.length)continue;v=E.length/6;const ca=(M+.5)/y,aa=(F+.5)/C;for(var J=0;J<S.length;J+=2)E[U++]=ca,E[U++]=aa,
E[U++]=S[J],E[U++]=S[J+1]+Q,E[U++]=0,E[U++]=w;for(J=0;J<X.length;J+=2)E[U++]=ca,E[U++]=aa,E[U++]=X[J],E[U++]=X[J+1]+Q,E[U++]=0,E[U++]=w;for(J=0;J<Z.length;J+=2)E[U++]=ca,E[U++]=aa,E[U++]=Z[J],E[U++]=Z[J+1]+Q,E[U++]=0,E[U++]=w;for(w=0;w<S.length/6;w++)N[D++]=v,N[D++]=v+1,N[D++]=v+2,v+=3;for(w=0;w<X.length/8;w++)N[D++]=v,N[D++]=v+1,N[D++]=v+2,N[D++]=v+1,N[D++]=v+2,N[D++]=v+3,v+=4;N[D++]=v+0;N[D++]=v+1;N[D++]=v+2;N[D++]=v+1;N[D++]=v+3;N[D++]=v+2;v+=4}}e={vertexData:new Float32Array(E),indexData:new Uint32Array(N)}}}else e=
B(b,c);return e};R.createVFMeshScalar=x;R.getUnitConversionFactor=T;R.sampleVectorField=function(b,c,e,n=[0,0],v=.5){const {width:w,height:J,mask:y}=b,[C,p]=b.pixels,[E,N]=n;b=Math.round((w-E)/e);n=Math.round((J-N)/e);var U=b*n;const D=new Float32Array(U),F=new Float32Array(U);U=new Uint8Array(U);c="vector-uv"===c;for(let Q=0;Q<n;Q++)for(let S=0;S<b;S++){let X=0;const Z=Q*b+S,ca=Math.max(0,Q*e+N),aa=Math.max(0,S*e+E),ea=Math.min(J,ca+e),fa=Math.min(w,aa+e);for(let P=ca;P<ea;P++)for(let Y=aa;Y<fa;Y++){var M=
P*w+Y;if(!y||y[M]){X++;M=c?[C[M],p[M]]:[C[M],(360+p[M])%360];const [ha,da]=c?M:W(M);D[Z]+=ha;F[Z]+=da}}if(X>=(ea-ca)*(fa-aa)*(1-v)){U[Z]=1;const [P,Y]=O([D[Z]/X,F[Z]/X]);D[Z]=P;F[Z]=Y}else U[Z]=0,D[Z]=0,F[Z]=0}e=new G({width:b,height:n,pixels:[D,F],mask:U});e.updateStatistics();return e};R.snapImageToSymbolTile=function(b,c,e,n,v){if(!r.isSome(v)||!v.spatialReference.equals(b.spatialReference))return{extent:b,width:Math.round(c/n),height:Math.round(e/n),resolution:b.width/c};const w=v.xmin;v=v.ymax;
c=(b.xmax-b.xmin)/c*n;e=(b.ymax-b.ymin)/e*n;b.xmin=w+Math.floor((b.xmin-w)/c)*c;b.xmax=w+Math.ceil((b.xmax-w)/c)*c;b.ymin=v+Math.floor((b.ymin-v)/e)*e;b.ymax=v+Math.ceil((b.ymax-v)/e)*e;return{extent:b,width:Math.round(b.width/c),height:Math.round(b.height/e),resolution:(c+e)/2}};R.unitKebabDict=k;R.uvComponentToVector=O;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass".split(" "),
function(R,z,r,G,m,T,O,W,K,L,q){var d;const t=O.getLogger("esri.layers.support.PixelBlock");r=d=function(B){function x(a){a=B.call(this,a)||this;a.width=null;a.height=null;a.pixelType="f32";a.validPixelCount=null;a.mask=null;a.maskIsAlpha=!1;a.pixels=null;a.statistics=null;return a}R._inheritsLoose(x,B);x.createEmptyBand=function(a,k){return new (d.getPixelArrayConstructor(a))(k)};x.getPixelArrayConstructor=function(a){let k;switch(a){case "u1":case "u2":case "u4":case "u8":k=Uint8Array;break;case "u16":k=
Uint16Array;break;case "u32":k=Uint32Array;break;case "s8":k=Int8Array;break;case "s16":k=Int16Array;break;case "s32":k=Int32Array;break;case "f32":k=Float32Array;break;case "f64":k=Float64Array;break;case "c64":case "c128":case "unknown":k=Float32Array}return k};var A=x.prototype;A.castPixelType=function(a){if(!a)return"f32";a=a.toLowerCase();-1<["u1","u2","u4"].indexOf(a)?a="u8":-1==="unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").indexOf(a)&&(a="f32");return a};A.getPlaneCount=function(){return this.pixels&&
this.pixels.length};A.addData=function(a){if(!a.pixels||a.pixels.length!==this.width*this.height)throw new G("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(a.pixels);this.statistics.push(a.statistics||{minValue:null,maxValue:null})};A.getAsRGBA=function(){const a=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(a);
break;default:this._fillFrom8Bit(a)}return new Uint8ClampedArray(a)};A.getAsRGBAFloat=function(){const a=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(a);return a};A.updateStatistics=function(){this.statistics=this.pixels.map(f=>this._calculateBandStatistics(f,this.mask));const a=this.mask;let k=0;if(a)for(let f=0;f<a.length;f++)a[f]&&k++;else k=this.width*this.height;this.validPixelCount=k};A.clamp=function(a){if(a&&"f64"!==a&&"f32"!==a){switch(a){case "u8":var k=[0,255];break;case "u16":k=
[0,65535];break;case "u32":k=[0,4294967295];break;case "s8":k=[-128,127];break;case "s16":k=[-32768,32767];break;case "s32":k=[-2147483648,2147483647];break;default:k=[-3.4*1E39,3.4*1E39]}var [f,g]=k;k=this.pixels;var u=this.width*this.height,h=k.length,l=[];for(let n=0;n<h;n++){var b=d.createEmptyBand(a,u);var c=k[n];for(let v=0;v<u;v++){var e=c[v];b[v]=e>g?g:e<f?f:e}l.push(b)}this.pixels=l;this.pixelType=a}};A.extractBands=function(a){if(W.isNone(a)||0===a.length||null==this.pixels||0===this.pixels.length)return this;
var k=this.pixels.length;const f=a.some(g=>g>=this.pixels.length);k=k===a.length&&!a.some((g,u)=>g!==u);return f||k?this:new d({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:a.map(g=>this.pixels[g]),statistics:this.statistics&&a.map(g=>this.statistics[g])})};A.clone=function(){const a=new d({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});
this.mask&&(a.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));let k;const f=d.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){a.pixels=[];const g=this.pixels[0].slice;for(k=0;k<this.pixels.length;k++)a.pixels[k]=g?this.pixels[k].slice(0,this.pixels[k].length):new f(this.pixels[k])}if(this.statistics)for(a.statistics=[],k=0;k<this.statistics.length;k++)a.statistics[k]=T.clone(this.statistics[k]);return a};A._fillFrom8Bit=function(a){const {mask:k,
maskIsAlpha:f,pixels:g}=this;if(a&&g&&g.length){var u,h;var l=u=h=g[0];3<=g.length?(u=g[1],h=g[2]):2===g.length&&(u=g[1]);var b=new Uint32Array(a),c=this.width*this.height;if(l.length!==c)t.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(k&&k.length===c)if(f)for(a=0;a<c;a++)k[a]&&(b[a]=k[a]<<24|h[a]<<16|u[a]<<8|l[a]);else for(a=0;a<c;a++)k[a]&&(b[a]=-16777216|h[a]<<16|u[a]<<8|l[a]);else for(a=0;a<c;a++)b[a]=-16777216|h[a]<<16|u[a]<<8|l[a]}else t.error("getAsRGBA()",
"Unable to convert to RGBA. The input pixel block is empty.")};A._fillFromNon8Bit=function(a){const {pixels:k,mask:f,statistics:g}=this;if(a&&k&&k.length){var u=this.pixelType,h=1,l=0;h=1;g&&0<g.length?(l=g.map(v=>v.minValue).reduce((v,w)=>Math.min(v,w)),h=g.map(v=>v.maxValue-v.minValue).reduce((v,w)=>Math.max(v,w)),h=255/h):(h=255,"s8"===u?(l=-128,h=127):"u16"===u?h=65535:"s16"===u?(l=-32768,h=32767):"u32"===u?h=4294967295:"s32"===u?(l=-2147483648,h=2147483647):"f32"===u?(l=-3.4*1E39,h=3.4*1E39):
"f64"===u&&(l=-Number.MAX_VALUE,h=Number.MAX_VALUE),h=255/(h-l));a=new Uint32Array(a);u=this.width*this.height;var b,c,e;var n=b=c=k[0];if(n.length!==u)return t.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=k.length)if(b=k[1],3<=k.length&&(c=k[2]),f&&f.length===u)for(e=0;e<u;e++)f[e]&&(a[e]=-16777216|(c[e]-l)*h<<16|(b[e]-l)*h<<8|(n[e]-l)*h);else for(e=0;e<u;e++)a[e]=-16777216|(c[e]-l)*h<<16|(b[e]-l)*h<<8|(n[e]-l)*h;else if(f&&f.length===u)for(e=0;e<u;e++)b=(n[e]-
l)*h,f[e]&&(a[e]=-16777216|b<<16|b<<8|b);else for(e=0;e<u;e++)b=(n[e]-l)*h,a[e]=-16777216|b<<16|b<<8|b}else t.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};A._fillFrom32Bit=function(a){const {pixels:k,mask:f}=this;if(!a||!k||!k.length)return t.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");let g,u,h,l;g=u=h=k[0];3<=k.length?(u=k[1],h=k[2]):2===k.length&&(u=k[1]);const b=this.width*this.height;if(g.length!==b)return t.error("getAsRGBAFloat()",
"Unable to convert to RGBA. The pixelblock is invalid.");let c=0;if(f&&f.length===b)for(l=0;l<b;l++)a[c++]=g[l],a[c++]=u[l],a[c++]=h[l],a[c++]=f[l]&1;else for(l=0;l<b;l++)a[c++]=g[l],a[c++]=u[l],a[c++]=h[l],a[c++]=1};A._calculateBandStatistics=function(a,k){let f=Infinity,g=-Infinity;const u=a.length;let h,l=0;if(k)for(h=0;h<u;h++)k[h]&&(l=a[h],f=l<f?l:f,g=l>g?l:g);else for(h=0;h<u;h++)l=a[h],f=l<f?l:f,g=l>g?l:g;return{minValue:f,maxValue:g}};return x}(m.JSONSupport);z.__decorate([K.property({json:{write:!0}})],
r.prototype,"width",void 0);z.__decorate([K.property({json:{write:!0}})],r.prototype,"height",void 0);z.__decorate([K.property({json:{write:!0}})],r.prototype,"pixelType",void 0);z.__decorate([L.cast("pixelType")],r.prototype,"castPixelType",null);z.__decorate([K.property({json:{write:!0}})],r.prototype,"validPixelCount",void 0);z.__decorate([K.property({json:{write:!0}})],r.prototype,"mask",void 0);z.__decorate([K.property({json:{write:!0}})],r.prototype,"maskIsAlpha",void 0);z.__decorate([K.property({json:{write:!0}})],
r.prototype,"pixels",void 0);z.__decorate([K.property({json:{write:!0}})],r.prototype,"statistics",void 0);return r=d=z.__decorate([q.subclass("esri.layers.support.PixelBlock")],r)})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../../../core/maybe","../PixelBlock"],function(R,z,r){function G(a){return z.isSome(a)&&"esri.layers.support.PixelBlock"===a.declaredClass&&a.pixels&&0<a.pixels.length}function m(a,k){a=Math.min(Math.max(a,-100),100);k=Math.min(Math.max(k,
-100),100);let f,g;const u=new Uint8Array(256);for(f=0;256>f;f++)0<a&&100>a?g=(200*f-25500+510*k)/(2*(100-a))+128:0>=a&&-100<a?g=(200*f-25500+510*k)*(100+a)/2E4+128:100===a?(g=200*f-25500+256*(100-a)+510*k,g=0<g?255:0):-100===a&&(g=128),u[f]=255<g?255:0>g?0:g;return u}function T(a,k,f,g,u,h,l,b){return{xmin:u<=f*a?0:u<f*a+a?u-f*a:a,ymin:h<=g*k?0:h<g*k+k?h-g*k:k,xmax:u+l<=f*a?0:u+l<f*a+a?u+l-f*a:a,ymax:h+b<=g*k?0:h+b<g*k+k?h+b-g*k:k}}function O(a,k,f,g,u,h){const {width:l,height:b}=f.block,{x:c,y:e}=
f.offset,{width:n,height:v}=f.mosaic;f=T(l,b,g,u,c,e,n,v);let w=0;var J=0;if(h){var y=h.hasGCSSShiftTransform?360:h.halfWorldWidth,C=l*h.resolutionX,p=h.startX+g*C;C=p+C;p<y&&C>y?J=h.rightPadding:p>=y&&(w=h.leftMargin-h.rightPadding,J=0)}f.xmax-=J;if("number"===typeof k)for(h=f.ymin;h<f.ymax;h++)for(J=(u*b+h-e)*n+(g*l-c)+w,y=f.xmin;y<f.xmax;y++)a[J+y]=k;else for(h=f.ymin;h<f.ymax;h++)for(J=(u*b+h-e)*n+(g*l-c)+w,y=h*l,p=f.xmin;p<f.xmax;p++)a[J+p]=k[y+p]}function W(a,k,f={}){const {clipOffset:g,clipSize:u,
alignmentInfo:h,blockWidths:l}=f;if(l)return K(a,k,{blockWidths:l});var b=a.find(N=>G(N));if(z.isNone(b))return null;f=u?u.width:k.width;const c=u?u.height:k.height;var e=b.width,n=b.height;const v=k.width/e,w=k.height/n;k={offset:g||{x:0,y:0},mosaic:u||k,block:{width:e,height:n}};e=b.pixelType;n=r.getPixelArrayConstructor(e);var J=b.pixels.length;b=[];for(var y=0;y<J;y++){var C=new n(f*c);for(let N=0;N<w;N++)for(let U=0;U<v;U++){var p=a[N*v+U];G(p)&&(p=p.pixels[y],O(C,p,k,U,N,h))}b.push(C)}let E;
if(a.some(N=>z.isNone(N)||N.mask&&0<N.mask.length))for(E=new Uint8Array(f*c),n=0;n<w;n++)for(J=0;J<v;J++)C=a[n*v+J],(y=z.isSome(C)?C.mask:null)?O(E,y,k,J,n,h):C?O(E,1,k,J,n,h):O(E,0,k,J,n,h);a=new r({width:f,height:c,pixels:b,pixelType:e,mask:E});a.updateStatistics();return a}function K(a,k,f){const g=a.find(J=>z.isSome(J));if(!z.isSome(g))return null;var u=a.some(J=>z.isSome(J)?!!J.mask:!0);const {width:h,height:l}=k;k=u?new Uint8Array(h*l):null;({blockWidths:f}=f);const b=[],c=g.getPlaneCount(),
e=r.getPixelArrayConstructor(g.pixelType);if(u)for(let J=0,y=0;J<a.length;y+=f[J],J++)if(u=a[J],G(u)){var n=u.mask;for(var v=0;v<l;v++)for(var w=0;w<f[J];w++)k[v*h+w+y]=null==n?255:n[v*u.width+w]}for(u=0;u<c;u++){n=new e(h*l);for(let J=0,y=0;J<a.length;y+=f[J],J++)if(v=a[J],G(v)&&(w=v.pixels[u],null!=w))for(let C=0;C<l;C++)for(let p=0;p<f[J];p++)n[C*h+p+y]=w[C*v.width+p];b.push(n)}a=new r({width:h,height:l,mask:k,pixels:b,pixelType:g.pixelType});a.updateStatistics();return a}function L(a){if(!G(a))return null;
const k=a.clone(),{width:f,height:g,pixels:u,mask:h}=a;var l=u[0];a=k.pixels[0];for(let e=2;e<g-1;e++){const n=new Map;for(var b=e-2;b<e+2;b++)for(var c=0;4>c;c++){const v=b*f+c;t(n,l[v],h?h[v]:1)}a[e*f]=q(n);a[e*f+1]=a[e*f+2]=a[e*f];for(b=3;b<f-1;b++)c=(e-2)*f+b+1,t(n,l[c],h?h[c]:1),c=(e-1)*f+b+1,t(n,l[c],h?h[c]:1),c=e*f+b+1,t(n,l[c],h?h[c]:1),c=(e+1)*f+b+1,t(n,l[c],h?h[c]:1),c=(e-2)*f+b-3,d(n,l[c],h?h[c]:1),c=(e-1)*f+b-3,d(n,l[c],h?h[c]:1),c=e*f+b-3,d(n,l[c],h?h[c]:1),c=(e+1)*f+b-3,d(n,l[c],h?h[c]:
1),a[e*f+b]=q(n);a[e*f+b+1]=a[e*f+b]}for(l=0;l<f;l++)a[l]=a[f+l]=a[2*f+l],a[(g-1)*f+l]=a[(g-2)*f+l];k.updateStatistics();return k}function q(a){if(0===a.size)return 0;let k=0,f=-1,g=0;const u=a.keys();let h=u.next();for(;!h.done;)g=a.get(h.value),g>k&&(f=h.value,k=g),h=u.next();return f}function d(a,k,f){0!==f&&(f=a.get(k),1===f?a.delete(k):a.set(k,f-1))}function t(a,k,f){0!==f&&a.set(k,a.has(k)?a.get(k)+1:1)}function B(a,k,f){let {x:g,y:u}=k;const {width:h,height:l}=f;if(0===g&&0===u&&l===a.height&&
h===a.width)return a;const {width:b,height:c}=a;k=Math.max(0,u);const e=Math.max(0,g),n=Math.min(g+h,b),v=Math.min(u+l,c);if(0>n||0>v||!G(a))return null;g=Math.max(0,-g);u=Math.max(0,-u);const {pixels:w,mask:J}=a;var y=h*l,C=w.length;const p=[];for(var E=0;E<C;E++){var N=w[E],U=r.createEmptyBand(a.pixelType,y);for(let D=k;D<v;D++){const F=D*b;let M=(D+u-k)*h+g;for(let Q=e;Q<n;Q++)U[M++]=N[F+Q]}p.push(U)}y=new Uint8Array(y);for(C=k;C<v;C++)for(E=C*b,N=(C+u-k)*h+g,U=e;U<n;U++)y[N++]=J?J[E+U]:1;a=new r({width:f.width,
height:f.height,pixelType:a.pixelType,pixels:p,mask:y});a.updateStatistics();return a}function x(a,k=!0){if(!G(a))return null;const {pixels:f,width:g,height:u,mask:h,pixelType:l}=a;a=[];const b=Math.round(g/2),c=Math.round(u/2),e=u-1,n=g-1;for(var v=0;v<f.length;v++){var w=f[v],J=r.createEmptyBand(l,b*c),y=0;for(var C=0;C<u;C+=2)for(var p=0;p<g;p+=2){var E=w[C*g+p];if(k){var N=p===n?E:w[C*g+p+1];const U=C===e?E:w[C*g+p+g],D=p===n?U:C===e?N:w[C*g+p+g+1];J[y++]=(E+N+U+D)/4}else J[y++]=E}a.push(J)}v=
null;if(h)for(v=new Uint8Array(b*c),w=0,J=0;J<u;J+=2)for(y=0;y<g;y+=2)C=h[J*g+y],k?(p=y===n?C:h[J*g+y+1],E=J===e?C:h[J*g+y+g],N=y===n?E:J===e?p:h[J*g+y+g+1],v[w++]=C*p*E*N?1:0):v[w++]=C;return new r({width:b,height:c,pixelType:l,pixels:a,mask:v})}function A(a,k,f,g,u=.5){const {width:h,height:l}=a,{width:b,height:c}=k;a=g.cols;g=g.rows;k=Math.ceil(b/a-.1/a);const e=Math.ceil(c/g-.1/g);let n,v,w,J,y;const C=k*a;var p=C*e*g;const E=new Float32Array(p),N=new Float32Array(p),U=new Uint32Array(p),D=new Uint32Array(p);
let F=0,M,Q;for(let Z=0;Z<e;Z++)for(let ca=0;ca<k;ca++){var S=12*(Z*k+ca);p=f[S];n=f[S+1];v=f[S+2];w=f[S+3];J=f[S+4];y=f[S+5];for(var X=0;X<g;X++){F=(Z*g+X)*C+ca*a;Q=(X+.5)/g;for(let aa=0;aa<X;aa++)M=(aa+.5)/a,E[F+aa]=(p*M+n*Q+v)*h-u,N[F+aa]=(w*M+J*Q+y)*l-u,U[F+aa]=Math.round(E[F+aa]),D[F+aa]=Math.round(N[F+aa])}S+=6;p=f[S];n=f[S+1];v=f[S+2];w=f[S+3];J=f[S+4];y=f[S+5];for(S=0;S<g;S++)for(F=(Z*g+S)*C+ca*a,Q=(S+.5)/g,X=S;X<a;X++)M=(X+.5)/a,E[F+X]=(p*M+n*Q+v)*h-u,N[F+X]=(w*M+J*Q+y)*l-u,U[F+X]=Math.round(E[F+
X]),D[F+X]=Math.round(N[F+X])}return{offsets_x:E,offsets_y:N,offsets_xi:U,offsets_yi:D,gridWidth:C}}R.approximateTransform=function(a,k,f,g,u="nearest"){if(!G(a))return null;"majority"===u&&(a=L(a));const {pixels:h,mask:l,pixelType:b}=a,c=a.width;var e=a.height;const n=r.getPixelArrayConstructor(b),v=h.length,{width:w,height:J}=k;a=!1;for(let D=0;D<f.length;D+=3)-1===f[D]&&-1===f[D+1]&&-1===f[D+2]&&(a=!0);const {offsets_x:y,offsets_y:C,offsets_xi:p,offsets_yi:E,gridWidth:N}=A({width:c,height:e},k,
f,g,"majority"===u?0:.5);let U;k=(D,F,M)=>{const Q=D instanceof Float32Array||D instanceof Float64Array?0:.5;for(let S=0;S<J;S++){U=S*N;for(let X=0;X<w;X++){if(0>y[U]||0>C[U])D[S*w+X]=0;else if(M)D[S*w+X]=F[p[U]+E[U]*c];else{const Z=Math.floor(y[U]),ca=Math.floor(C[U]),aa=Math.ceil(y[U]),ea=Math.ceil(C[U]),fa=y[U]-Z,P=C[U]-ca;D[S*w+X]=!l||l[Z+ca*c]&&l[Z+ca*c]&&l[Z+ea*c]&&l[aa+ea*c]?(1-P)*((1-fa)*F[Z+ca*c]+fa*F[aa+ca*c])+P*((1-fa)*F[Z+ea*c]+fa*F[aa+ea*c])+Q:F[p[U]+E[U]*c]}U++}}};f=[];for(e=0;e<v;e++)g=
new n(w*J),k(g,h[e],"nearest"===u||"majority"===u),f.push(g);u=new r({width:w,height:J,pixelType:b,pixels:f});if(l)u.mask=new Uint8Array(w*J),k(u.mask,l,!0);else if(a)for(u.mask=new Uint8Array(w*J),a=0;a<w*J;a++)u.mask[a]=0>y[a]||0>C[a]?0:1;u.updateStatistics();return u};R.clip=B;R.colorize=function(a,k){if(!G(a)||!k&&(k.indexedColormap||k.indexed2DColormap))return a;const f=a.clone();var g=f.pixels;let u=f.mask;const h=f.width*f.height;if(1!==g.length)return a;const {indexedColormap:l,indexed2DColormap:b,
offset:c,alphaSpecified:e}=k;k=l.length-1;a=0;g=g[0];const n=new Uint8Array(g.length),v=new Uint8Array(g.length),w=new Uint8Array(g.length);let J=0;if(l)if(u)for(a=0;a<h;a++)u[a]&&(J=4*(g[a]-c),J<c||J>k?u[a]=0:(n[a]=l[J],v[a]=l[J+1],w[a]=l[J+2],u[a]=l[J+3]));else{u=new Uint8Array(h);for(a=0;a<h;a++)J=4*(g[a]-c),J<c||J>k?u[a]=0:(n[a]=l[J],v[a]=l[J+1],w[a]=l[J+2],u[a]=l[J+3]);f.mask=u}else if(u)for(a=0;a<h;a++)u[a]&&(k=b[g[a]],n[a]=k[0],v[a]=k[1],w[a]=k[2],u[a]=k[3]);else{u=new Uint8Array(h);for(a=
0;a<h;a++)k=b[g[a]],n[a]=k[0],v[a]=k[1],w[a]=k[2],u[a]=k[3];f.mask=u}f.pixels=[n,v,w];f.statistics=null;f.pixelType="u8";f.maskIsAlpha=e;return f};R.createColormapLUT=function(a){if(a){var k=a.colormap;if(k&&0!==k.length){k=k.sort((e,n)=>e[0]-n[0]);var f=0;0>k[0][0]&&(f=k[0][0]);var g=Math.max(256,k[k.length-1][0]-f+1),u=new Uint8Array(4*g),h=[],l=0,b=0,c=5===k[0].length;if(65536<g)return k.forEach(e=>{h[e[0]-f]=c?e.slice(1):e.slice(1).concat([255])}),{indexed2DColormap:h,offset:f,alphaSpecified:c};
if(a.fillUnspecified)for(a=k[b],l=a[0]-f;l<g;l++)u[4*l]=a[1],u[4*l+1]=a[2],u[4*l+2]=a[3],u[4*l+3]=c?a[4]:255,l===a[0]-f&&(a=b===k.length-1?a:k[++b]);else for(l=0;l<k.length;l++)a=k[l],b=4*(a[0]-f),u[b]=a[1],u[b+1]=a[2],u[b+2]=a[3],u[b+3]=c?a[4]:255;return{indexedColormap:u,offset:f,alphaSpecified:c}}}};R.createContrastBrightnessLUT=m;R.createHistogramEqualizationLUT=function(a,k=256){k=Math.min(k,256);const {size:f,counts:g}=a;a=new Uint8Array(f);var u=g.reduce((e,n)=>e+n/k,0);let h=0;var l=0;let b=
0,c=u;for(let e=0;e<f;e++)if(b+=g[e],!(e<f-1&&b+g[e+1]<c)){for(;h<k-1&&c<b;)h++,c+=u;for(;l<=e;l++)a[l]=h;l=e+1}for(u=l;u<f;u++)a[u]=k-1;return a};R.createStretchLUT=function(a){const {minCutOff:k,maxCutOff:f,gamma:g,pixelType:u}=a,h=a.outMin||0,l=a.outMax||255;if(-1===["u8","u16","s8","s16"].indexOf(u))return null;const b=k.length;let c;let e=0;"s8"===u?e=-127:"s16"===u&&(e=-32767);let n=256;-1<["u16","s16"].indexOf(u)&&(n=65536);const v=[],w=l-h;for(c=0;c<b;c++)v[c]=f[c]-k[c];var J=g&&g.length>=
b;const y=[];if(J)for(c=0;c<b;c++)y[c]=1<g[c]?2<g[c]?6.5+(g[c]-2)**2.5:6.5+100*(2-g[c])**4:1;let C;const p=[];let E,N,U;if(J)for(c=0;c<b;c++){U=[];for(J=0;J<n;J++)E=J+e,C=(E-k[c])/v[c],N=1,1<g[c]&&(N-=(1/w)**(C*y[c])),U[J]=E<f[c]&&E>k[c]?Math.floor(N*w*C**(1/g[c]))+h:E>=f[c]?l:h;p[c]=U}else for(c=0;c<b;c++){U=[];for(J=0;J<n;J++)E=J+e,U[J]=E<=k[c]?h:E>=f[c]?l:Math.floor((E-k[c])/v[c]*w)+h;p[c]=U}if(null!=a.contrastOffset)for(a=m(a.contrastOffset,a.brightnessOffset),c=0;c<b;c++)for(U=p[c],J=0;J<n;J++)U[J]=
a[U[J]];return{lut:p,offset:e}};R.estimateStatisticsFromHistograms=function(a){const k=[];for(let h=0;h<a.length;h++){const {min:l,max:b,size:c,counts:e}=a[h];let n=0;var f=0;for(var g=0;g<c;g++)n+=e[g],f+=g*e[g];f/=n;g=0;for(var u=0;u<c;u++)g+=e[u]*(u-f)**2;u=(b-l)/c;k.push({min:l,max:b,avg:(f+.5)*u+l,stddev:Math.sqrt(g/(n-1))*u})}return k};R.estimateStatisticsHistograms=function(a){if(!G(a))return null;a.statistics||a.updateStatistics();const {pixels:k,mask:f,pixelType:g,statistics:u}=a;a=a.width*
a.height;const h=k.length;let l,b;let c;var e;const n=[],v=[];for(c=0;c<h;c++){var w=new Uint32Array(256);var J=k[c];if("u8"===g)if(l=-.5,b=255.5,f)for(e=0;e<a;e++)f[e]&&w[J[e]]++;else for(e=0;e<a;e++)w[J[e]]++;else{l=u[c].minValue;b=u[c].maxValue;var y=(b-l)/256;var C=new Uint32Array(257);if(f)for(e=0;e<a;e++)f[e]&&C[Math.floor((J[e]-l)/y)]++;else for(e=0;e<a;e++)C[Math.floor((J[e]-l)/y)]++;for(e=0;255>e;e++)w[e]=C[e];w[255]=C[255]+C[256]}n.push({min:l,max:b,size:256,counts:w});for(e=J=C=y=0;256>
e;e++)y+=w[e],C+=e*w[e];C/=y;for(e=0;256>e;e++)J+=w[e]*(e-C)**2;w=Math.sqrt(J/(y-1));y=(b-l)/256;e=(C+.5)*y+l;w*=y;v.push({min:l,max:b,avg:e,stddev:w})}return{statistics:v,histograms:n}};R.extractBands=function(a,k){if(null==k||!k.length||!G(a))return a;const f=a.pixels.length;return k&&k.some(g=>g>=f)||1===f&&1===k.length&&0===k[0]||f===k.length&&!k.some((g,u)=>g!==u)?a:new r({pixelType:a.pixelType,width:a.width,height:a.height,mask:a.mask,validPixelCount:a.validPixelCount,maskIsAlpha:a.maskIsAlpha,
pixels:k.map(g=>a.pixels[g]),statistics:a.statistics&&k.map(g=>a.statistics[g])})};R.getClipBounds=T;R.getLocalArithmeticNorthRotations=function(a,k){const {coefficients:f,spacing:g}=k,{offsets_x:u,offsets_y:h,gridWidth:l}=A(a,a,f,{rows:g[0],cols:g[1]},.5),{width:b,height:c}=a;a=new Float32Array(b*c);k=180/Math.PI;for(let v=0;v<c;v++)for(let w=0;w<b;w++){var e=v*l+w,n=0===v?e:e-l;const J=v===c-1?e:e+l;e=u[n]-u[J];n=h[J]-h[n];isNaN(e)||isNaN(n)?a[v*b+w]=90:(n=Math.atan2(n,e)*k,n=(360+n)%360,a[v*b+
w]=n)}return a};R.isValidPixelBlock=G;R.lookupPixels=function(a,k){if(!G(a))return null;const {pixels:f,mask:g}=a,u=a.width*a.height,h=f.length;let l=k.lut;({offset:k}=k);let b,c;l&&1===l[0].length&&(l=f.map(()=>l));const e=[];let n,v,w;if(k)if(null==g)for(b=0;b<h;b++){n=f[b];v=l[b];w=new Uint8Array(u);for(c=0;c<u;c++)w[c]=v[n[c]-k];e.push(w)}else for(b=0;b<h;b++){n=f[b];v=l[b];w=new Uint8Array(u);for(c=0;c<u;c++)g[c]&&(w[c]=v[n[c]-k]);e.push(w)}else if(null==g)for(b=0;b<h;b++){n=f[b];v=l[b];w=new Uint8Array(u);
for(c=0;c<u;c++)w[c]=v[n[c]];e.push(w)}else for(b=0;b<h;b++){n=f[b];v=l[b];w=new Uint8Array(u);for(c=0;c<u;c++)g[c]&&(w[c]=v[n[c]]);e.push(w)}a=new r({width:a.width,height:a.height,pixels:e,mask:g,pixelType:"u8"});a.updateStatistics();return a};R.mosaic=W;R.mosaicPixelData=function(a,k){if(!a||0===a.length)return null;var f=a.find(v=>v.pixelBlock);if(!f||z.isNone(f.pixelBlock))return null;var g=(f.extent.xmax-f.extent.xmin)/f.pixelBlock.width;const u=(f.extent.ymax-f.extent.ymin)/f.pixelBlock.height,
h=.01*Math.min(g,u),l=a.sort((v,w)=>Math.abs(v.extent.ymax-w.extent.ymax)>h?w.extent.ymax-v.extent.ymax:Math.abs(v.extent.xmin-w.extent.xmin)>h?v.extent.xmin-w.extent.xmin:0);var b=Math.min.apply(null,l.map(v=>v.extent.xmin));const c=Math.min.apply(null,l.map(v=>v.extent.ymin)),e=Math.max.apply(null,l.map(v=>v.extent.xmax)),n=Math.max.apply(null,l.map(v=>v.extent.ymax));a={x:Math.round((k.xmin-b)/g),y:Math.round((n-k.ymax)/u)};b={width:Math.round((e-b)/g),height:Math.round((n-c)/u)};g={width:Math.round((k.xmax-
k.xmin)/g),height:Math.round((k.ymax-k.ymin)/u)};if(Math.round(b.width/f.pixelBlock.width)*Math.round(b.height/f.pixelBlock.height)!==l.length||0>a.x||0>a.y||b.width<g.width||b.height<g.height)return null;f=l.map(v=>v.pixelBlock);f=W(f,b,{clipOffset:a,clipSize:g});return{extent:k,pixelBlock:f}};R.remapColor=function(a,k){if(!G(a))return null;a=a.clone();var {pixels:f}=a;const g=a.width*a.height,u=k.length,h=Math.floor(u/2),l=k[Math.floor(h)];f=f[0];let b,c,e,n,v,w,J=!1;const y=new Uint8Array(g),C=
new Uint8Array(g),p=new Uint8Array(g);let E=a.mask;const N=4===k[0].mappedColor.length;E||(E=new Uint8Array(g),E.fill(N?255:1),a.mask=E);for(v=0;v<g;v++)if(E[v]){b=f[v];J=!1;w=h;c=l;e=0;for(n=u-1;1<n-e;){if(b===c.value){J=!0;break}b>c.value?e=w:n=w;w=Math.floor((e+n)/2);c=k[Math.floor(w)]}J||(b===k[e].value?(c=k[e],J=!0):b===k[n].value?(c=k[n],J=!0):b<k[e].value?(J=!1,c=null):b>k[e].value&&(b<k[n].value?(c=k[e],J=!0):n===u-1?(J=!1,c=null):(c=k[n],J=!0)));J?(y[v]=c.mappedColor[0],C[v]=c.mappedColor[1],
p[v]=c.mappedColor[2],E[v]=c.mappedColor[3]):y[v]=C[v]=p[v]=E[v]=0}a.pixels=[y,C,p];a.mask=E;a.pixelType="u8";a.maskIsAlpha=N;return a};R.resampleByMajority=L;R.setValidBoundary=function(a,k,f){if(!G(a))return null;const {width:g,height:u}=a,h=k.x;k=k.y;const l=f.width+h;f=f.height+k;if(0>h||0>k||l>g||f>u||0===h&&0===k&&l===g&&f===u)return a;a.mask||(a.mask=new Uint8Array(g*u));const b=a.mask;for(let c=0;c<u;c++){const e=c*g;for(let n=0;n<g;n++)b[e+n]=c<k||c>=f||n<h||n>=l?0:1}a.updateStatistics();
return a};R.split=function(a,k,f){if(!G(a))return null;const {width:g,height:u}=k;let {width:h,height:l}=a;const b=new Map,c={x:0,y:0};f=null==f?1:1+f;for(let e=0;e<f;e++){const n=Math.ceil(h/g),v=Math.ceil(l/u);for(let w=0;w<v;w++){c.y=w*u;for(let J=0;J<n;J++){c.x=J*g;const y=B(a,c,k);b.set(`${e}/${w}/${J}`,y)}}e<f-1&&(a=x(a));h=Math.round(h/2);l=Math.round(l/2)}return b};R.stretch=function(a,k){if(!G(a))return null;a=a.clone();const {pixels:f,mask:g}=a,{minCutOff:u,maxCutOff:h,gamma:l}=k,b=k.outMin||
0;k=k.outMax||255;const c=a.width*a.height,e=f.length;let n;let v,w,J;const y=k-b,C=[];for(n=0;n<e;n++)C[n]=h[n]-u[n];var p=l&&l.length>=e;const E=[];if(p)for(n=0;n<e;n++)E[n]=1<l[n]?2<l[n]?6.5+(l[n]-2)**2.5:6.5+100*(2-l[n])**4:1;if(p)if(null!=g)for(p=0;p<c;p++){if(g[p])for(n=0;n<e;n++)v=f[n][p],J=(v-u[n])/C[n],w=1,1<l[n]&&(w-=(1/y)**(J*E[n])),f[n][p]=v<h[n]&&v>u[n]?Math.floor(w*y*J**(1/l[n]))+b:v>=h[n]?k:b}else for(p=0;p<c;p++)for(n=0;n<e;n++)v=f[n][p],J=(v-u[n])/C[n],w=1,1<l[n]&&(w-=(1/y)**(J*E[n])),
f[n][p]=v<h[n]&&v>u[n]?Math.floor(w*y*J**(1/l[n]))+b:v>=h[n]?k:b;else if(null!=g)for(p=0;p<c;p++){if(g[p])for(n=0;n<e;n++)v=f[n][p],f[n][p]=v<h[n]&&v>u[n]?Math.floor((v-u[n])/C[n]*y)+b:v>=h[n]?k:b}else for(p=0;p<c;p++)for(n=0;n<e;n++)v=f[n][p],f[n][p]=v<h[n]&&v>u[n]?Math.floor((v-u[n])/C[n]*y)+b:v>=h[n]?k:b;a.pixelType="u8";a.updateStatistics();return a};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(R,z,r,G,m,T,O,W,K,L,q,d,t){function B(y){y=y.symbolLayers;if(!y)return null;let C=null;y.forEach(p=>{if("object"!==p.type||null==p.resource.href)C="water"===p.type?W.unwrap(p.color):W.isSome(p.material)?W.unwrap(p.material.color):null});return C?new G(C):null}function x(y,C){if(null==C)return y;y=y.toRgba();y[3]*=C;return new G(y)}function A(y,C,p){if(y=y.symbolLayers){var E=N=>{N=W.isSome(N)?N:null;C=C||N||null!=p&&J;return x(C,p)};y.forEach(N=>{if("object"!==N.type||null==N.resource.href||
C)if("water"===N.type)N.color=E(N.color);else{var U=W.isSome(N.material)?N.material.color:null;U=E(U);W.isNone(N.material)?N.material=new t.Symbol3DMaterial({color:U}):N.material.color=U;null!=p&&"outline"in N&&W.isSome(N.outline)&&W.isSome(N.outline.color)&&(N.outline.color=x(N.outline.color,p))}})}}function a(y,C){return k.apply(this,arguments)}function k(){k=r._asyncToGenerator(function*(y,C){(y=y.symbolLayers)&&(yield T.forEach(y,function(){var p=r._asyncToGenerator(function*(E){return f(E,C)});
return function(E){return p.apply(this,arguments)}}()))});return k.apply(this,arguments)}function f(y,C){return g.apply(this,arguments)}function g(){g=r._asyncToGenerator(function*(y,C){switch(y.type){case "extrude":y.size="number"===typeof C[2]?C[2]:0;break;case "icon":case "line":case "text":C=u(C);W.isSome(C)&&(y.size=C);break;case "path":{const p=b(C,L.ONES,[y.width,void 0,y.height]);y.width=n(C[0],y.width,1,p);y.height=n(C[2],y.height,1,p)}break;case "object":yield h(y,C)}});return g.apply(this,
arguments)}function u(y){for(const C of y)if("number"===typeof C)return C;return null}function h(y,C){return l.apply(this,arguments)}function l(){l=r._asyncToGenerator(function*(y,C){const {resourceSize:p,symbolSize:E}=yield c(y),N=b(C,p,E);y.width=n(C[0],E[0],p[0],N);y.depth=n(C[1],E[1],p[1],N);y.height=n(C[2],E[2],p[2],N)});return l.apply(this,arguments)}function b(y,C,p){for(let E=0;3>E;E++){const N=y[E];switch(N){case "symbol-value":return null!=p[E]?p[E]/C[E]:1;case "proportional":break;default:if(N&&
C[E])return N/C[E]}}return 1}function c(y){return e.apply(this,arguments)}function e(){e=r._asyncToGenerator(function*(y){const C=yield(yield new Promise((F,M)=>R(["./symbolLayerUtils"],F,M))).computeObjectLayerResourceSize(y,10),{width:p,height:E,depth:N}=y;y=[p,N,E];let U=1;for(var D=0;3>D;D++)if(null!=y[D]){U=y[D]/C[D];break}for(D=0;3>D;D++)null==y[D]&&(y[D]=C[D]*U);return{resourceSize:C,symbolSize:y}});return e.apply(this,arguments)}function n(y,C,p,E){switch(y){case "proportional":return p*E;
case "symbol-value":return null!=C?C:p;default:return y}}function v(){v=r._asyncToGenerator(function*(y,C){if(y&&C){if(m.isSymbol3D(y))return a(y,C);if(m.isSymbol2D(y)&&(C=u(C),!W.isNone(C)))switch(y.type){case "simple-marker":y.size=C;break;case "picture-marker":{const p=y.width/y.height;1<p?(y.width=C,y.height=C*p):(y.width=C*p,y.height=C);break}case "simple-line":y.width=C;break;case "text":y.font.size=C}}});return v.apply(this,arguments)}const w=/\/resource\/(.*?)\.svg$/,J=new G("white");z.applyColorToSymbol=
function(y,C,p){if(y&&(C||null!=p))if(C&&(C=new G(C)),m.isSymbol3D(y))A(y,C,p);else if(m.isSymbol2D(y)){if(C=C||y.color)y.color=x(C,p);null!=p&&"outline"in y&&y.outline&&y.outline.color&&(y.outline.color=x(y.outline.color,p))}};z.applyOpacityToColor=x;z.applyRotationToSymbol=function(y,C,p){y&&null!=C&&(m.isSymbol3D(y)?(y=y.symbolLayers)&&y.forEach(E=>{if(E&&"object"===E.type)switch(p){case "tilt":E.tilt=C;break;case "roll":E.roll=C;break;default:E.heading=C}}):!m.isSymbol2D(y)||"simple-marker"!==
y.type&&"picture-marker"!==y.type&&"text"!==y.type||(y.angle=C))};z.applySizesToSymbol=function(y,C){return v.apply(this,arguments)};z.getCSSFilterFromEffectList=function(y){if(!y)return null;y=y.effects.filter(C=>"bloom"!==C.type).map(C=>C.toJSON());return q.effectFunctionsFromJSON(y)};z.getColorFromSymbol=function(y,C){if(!y)return null;let p=null;m.isSymbol3D(y)?p=B(y):m.isSymbol2D(y)&&(p=y.color?new G(y.color):null);return p?x(p,C):null};z.getIconHref=function(y,C){C=C.resource.href;return!O("esri-canvas-svg-support")&&
y.styleOrigin&&w.test(C)?C.replace(w,"/resource/png/$1.png"):C};z.getSymbolOutlineSize=function(y){if(!y)return 0;if(m.isSymbol3D(y)){{const C=y.symbolLayers&&y.symbolLayers.length;C?(y=y.symbolLayers.getItemAt(C-1),y="outline"in y?W.get(y,"outline","size"):void 0):y=void 0}return W.isSome(y)?y:0}return(y=d.getStroke(y))&&K.px2pt(y.width)||0};z.isVolumetricSymbol=function(y){if(W.isNone(y)||!("symbolLayers"in y)||W.isNone(y.symbolLayers))return!1;switch(y.type){case "point-3d":return y.symbolLayers.some(C=>
"object"===C.type);case "line-3d":return y.symbolLayers.some(C=>"path"===C.type);case "polygon-3d":return y.symbolLayers.some(C=>"object"===C.type||"extrude"===C.type);default:return!1}};Object.defineProperty(z,"__esModule",{value:!0})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(R,z,r,G,m,T,O){function W(t){if(!t)return null;let B;switch(t.type){case "simple-fill":case "picture-fill":case "simple-marker":B=
W(t.outline);break;case "simple-line":{const x=T.pt2px(t.width);"none"!==t.style&&0!==x&&(B={color:t.color,style:d(t.style),width:x,cap:t.cap,join:"miter"===t.join?T.pt2px(t.miterLimit):t.join});break}default:B=null}return B}const K={left:"start",center:"middle",right:"end",justify:"start"},L={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},q=new m(1E3),d=function(){const t={};return function(B){if(t[B])return t[B];const x=B.replace(/-/g,"");return t[B]=x}}();
r=new r([128,128,128]);R.defaultThematicColor=r;R.dekebabifyLineStyle=d;R.getFill=function(t){const B=t.style;let x=null;if(t)switch(t.type){case "simple-marker":"cross"!==B&&"x"!==B&&(x=t.color);break;case "simple-fill":"solid"===B?x=t.color:"none"!==B&&(x={type:"pattern",x:0,y:0,src:z.getAssetUrl(`esri/symbols/patterns/${B}.png`),width:5,height:5});break;case "picture-fill":x={type:"pattern",src:t.url,width:T.pt2px(t.width)*t.xscale,height:T.pt2px(t.height)*t.yscale,x:T.pt2px(t.xoffset),y:T.pt2px(t.yoffset)};
break;case "text":x=t.color;break;case "cim":x=O.getCIMSymbolColor(t)}return x};R.getPatternUrlWithColor=function(t,B){const x=t+"-"+B;return void 0!==q.get(x)?Promise.resolve(q.get(x)):G(t,{responseType:"image"}).then(A=>{A=A.data;const a=A.naturalWidth,k=A.naturalHeight,f=document.createElement("canvas");f.width=a;f.height=k;const g=f.getContext("2d");g.fillStyle=B;g.fillRect(0,0,a,k);g.globalCompositeOperation="destination-in";g.drawImage(A,0,0);A=f.toDataURL();q.put(x,A);return A})};R.getSVGAlign=
function(t){return t=(t=t.horizontalAlignment)&&K[t.toLowerCase()]||"middle"};R.getSVGBaseline=function(t){return(t=t.verticalAlignment)&&L[t.toLowerCase()]||"alphabetic"};R.getSVGBaselineShift=function(t){return"bottom"===t.verticalAlignment?"super":null};R.getStroke=W;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(R){return function(){function z(G,m){this._storage=new R.MemCacheStorage;this._storage.maxSize=G;m&&this._storage.registerRemoveFunc("",
m)}var r=z.prototype;r.put=function(G,m){this._storage.put(G,m,1,1)};r.pop=function(G){return this._storage.pop(G)};r.get=function(G){return this._storage.get(G)};r.clear=function(){this._storage.clearAll()};r.destroy=function(){this._storage.destroy()};return z}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(R,z,r){function G(d){d=r.toCIMSymbolJSON(d);if("CIMTextSymbol"===d.type)return d.height;let t=0;if(d.symbolLayers)for(const B of d.symbolLayers)r.isCIMMarker(B)&&
B.size>t?t=B.size:r.isCIMStroke(B)&&B.width>t?t=B.width:r.isCIMFill(B);return t}function m(d,t,B,x){if("CIMTextSymbol"===d.type)d.height*=t;else{if(B&&d.effects)for(const A of d.effects)W(A,t);if(d.symbolLayers)for(const A of d.symbolLayers)switch(A.type){case "CIMPictureMarker":case "CIMVectorMarker":T(A,t,x);break;case "CIMPictureStroke":case "CIMSolidStroke":null!=x&&x.preserveOutlineWidth||!A.width||(A.width*=t);break;case "CIMPictureFill":A.height&&(A.height*=t);A.offsetX&&(A.offsetX*=t);A.offsetY&&
(A.offsetY*=t);break;case "CIMHatchFill":m(A.lineSymbol,t,!0,{...x,preserveOutlineWidth:!1}),A.offsetX&&(A.offsetX*=t),A.offsetY&&(A.offsetY*=t),A.separation&&(A.separation*=t)}}}function T(d,t,B){d.markerPlacement&&O(d.markerPlacement,t);d.offsetX&&(d.offsetX*=t);d.offsetY&&(d.offsetY*=t);d.anchorPoint&&"Absolute"===d.anchorPointUnits&&(d.anchorPoint={x:d.anchorPoint.x*t,y:d.anchorPoint.y*t});d.size*=t;if("CIMVectorMarker"===d.type&&d.markerGraphics)for(const x of d.markerGraphics)d.scaleSymbolsProportionally||
m(x.symbol,t,!0,B)}function O(d,t){r.isCIMMarkerStrokePlacement(d)&&d.offset&&(d.offset*=t);switch(d.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":d.customEndingOffset&&(d.customEndingOffset*=t);d.offsetAlongLine&&(d.offsetAlongLine*=t);if(d.placementTemplate&&d.placementTemplate.length){var B=d.placementTemplate.map(x=>x*t);d.placementTemplate=B}break;case "CIMMarkerPlacementAlongLineVariableSize":d.maxRandomOffset&&(d.maxRandomOffset*=t);d.placementTemplate&&
d.placementTemplate.length&&(B=d.placementTemplate.map(x=>x*t),d.placementTemplate=B);break;case "CIMMarkerPlacementOnLine":d.startPointOffset&&(d.startPointOffset*=t);break;case "CIMMarkerPlacementAtExtremities":d.offsetAlongLine&&(d.offsetAlongLine*=t);break;case "CIMMarkerPlacementAtRatioPositions":d.beginPosition&&(d.beginPosition*=t);d.endPosition&&(d.endPosition*=t);break;case "CIMMarkerPlacementPolygonCenter":d.offsetX&&(d.offsetX*=t);d.offsetY&&(d.offsetY*=t);break;case "CIMMarkerPlacementInsidePolygon":d.offsetX&&
(d.offsetX*=t),d.offsetY&&(d.offsetY*=t),d.stepX&&(d.stepX*=t),d.stepY&&(d.stepY*=t)}}function W(d,t){switch(d.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":d.width&&(d.width*=t);break;case "CIMGeometricEffectBuffer":d.size&&(d.size*=t);break;case "CIMGeometricEffectCut":d.beginCut&&(d.beginCut*=t);d.endCut&&(d.endCut*=t);d.middleCut&&(d.middleCut*=t);break;case "CIMGeometricEffectDashes":d.customEndingOffset&&(d.customEndingOffset*=t);d.offsetAlongLine&&(d.offsetAlongLine*=
t);if(d.dashTemplate&&d.dashTemplate.length){const B=d.dashTemplate.map(x=>x*t);d.dashTemplate=B}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":d.length&&(d.length*=t);break;case "CIMGeometricEffectMove":d.offsetX&&(d.offsetX*=t);d.offsetY&&(d.offsetY*=t);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":d.offset&&(d.offset*=t);break;case "CIMGeometricEffectRegularPolygon":d.radius&&(d.radius*=t);break;case "CIMGeometricEffectTaperedPolygon":d.fromWidth&&
(d.fromWidth*=t);d.length&&(d.length*=t);d.toWidth&&(d.toWidth*=t);break;case "CIMGeometricEffectWave":d.amplitude&&(d.amplitude*=t),d.period&&(d.period*=t)}}function K(d,t){let B;B="CIMTextSymbol"===d.type?d.symbol:d;d="CIMPolygonSymbol"===d.type;if(B.symbolLayers)for(const x of B.symbolLayers)if(!(x.colorLocked||d&&(r.isCIMStroke(x)||r.isCIMMarker(x)&&x.markerPlacement&&r.isCIMMarkerStrokePlacement(x.markerPlacement))))switch(x.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":x.tintColor&&
L(t,x.tintColor);break;case "CIMVectorMarker":x.markerGraphics.forEach(A=>{K(A.symbol,t)});break;case "CIMSolidStroke":case "CIMSolidFill":L(t,x.color);break;case "CIMHatchFill":K(x.lineSymbol,t)}}function L(d,t){for(const B of d)if(B.join(".")===t.join("."))return;d.push(t)}function q(d,t,B){var x="CIMTextSymbol"===d.type?d.symbol:d;d="CIMPolygonSymbol"===x.type?!0:!1;if(x.symbolLayers)for(const A of x.symbolLayers)if(!A.colorLocked){if(d)if(B){if({layersToColor:x}=B,(r.isCIMStroke(A)||r.isCIMMarker(A)&&
A.markerPlacement&&r.isCIMMarkerStrokePlacement(A.markerPlacement))&&"fill"===x||r.isCIMFill(A)&&"outline"===x)continue}else if(r.isCIMStroke(A)||r.isCIMMarker(A)&&A.markerPlacement&&r.isCIMMarkerStrokePlacement(A.markerPlacement))continue;x=t.toArray();switch(A.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":A.tintColor=x;break;case "CIMVectorMarker":A.markerGraphics.forEach(a=>{q(a.symbol,t,B)});break;case "CIMSolidStroke":case "CIMSolidFill":A.color=x;break;case "CIMHatchFill":q(A.lineSymbol,
t,B)}}}R.applyCIMSymbolColor=function(d,t,B){t instanceof z||(t=new z(t));(d=r.toCIMSymbolJSON(d))&&q(d,t,B)};R.applyCIMSymbolRotation=function(d,t,B=!1){d=r.toCIMSymbolJSON(d);B&&0!==t&&(t=360-t);if("CIMTextSymbol"===d.type)d.angle=t;else if("CIMPointSymbol"===d.type&&d.symbolLayers){B=t-(d.angle||0);for(const x of d.symbolLayers)if(r.isCIMMarker(x)){let A=x.rotation||0;A=x.rotateClockwise?A-B:A+B;x.rotation=A}d.angle=t}};R.getCIMSymbolColor=function(d){d=r.toCIMSymbolJSON(d);const t=[];K(d,t);return t.length?
new z(r.fromCIMColor(t[0])):null};R.getCIMSymbolRotation=function(d,t=!1){d=r.toCIMSymbolJSON(d);return"CIMTextSymbol"===d.type||"CIMPointSymbol"===d.type?t&&0!==d.angle?360-d.angle:d.angle||0:0};R.getCIMSymbolSize=G;R.scaleCIMMarker=T;R.scaleCIMSymbolTo=function(d,t,B){const x=r.toCIMSymbolJSON(d);d=G(d);if(0===d)if("CIMTextSymbol"===x.type)x.height=t;else{if(x.symbolLayers)for(const A of x.symbolLayers)switch(A.type){case "CIMPictureMarker":case "CIMVectorMarker":A.size=t;break;case "CIMPictureStroke":case "CIMSolidStroke":A.width=
t}}else m(x,t/d,!1,B)};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/symbols/cim/utils":function(){define(["require","exports"],function(R,z){function r(G,m){"string"!==typeof G&&(G=String(G));switch(m){case "LowerCase":return G.toLowerCase();case "Allcaps":return G.toUpperCase();default:return G}}z._adjustTextCase=r;z.colorToArray=function(G){return[G.r,G.g,G.b,G.a]};z.createLabelOverrideFunction=function(G,m,T){const O=q=>{let d=q.length;for(;d--;)if(-1===" /-,\n".indexOf(q.charAt(d)))return!1;
return!0},W=[];var K=0;let L=-1;do L=m.indexOf("[",K),L>=K&&(L>K&&(K=m.substr(K,L-K),W.push([K,null,O(K)])),K=L+1,L=m.indexOf("]",K),L>=K&&(L>K&&(K=m.substr(K,L-K),(K=G[K])&&W.push([null,K,!1])),K=L+1));while(-1!==L);K<m.length-1&&(G=m.substr(K),W.push([G,null,O(G)]));return q=>{let d="",t=null;for(const B of W){const [x,A,a]=B;if(x)a?t=x:(t&&(d+=t,t=null),d+=x);else{const k=q.attributes[A];k&&(t&&(d+=t,t=null),d+=k)}}return r(d,T)}};z.evaluateValueOrFunction=function(G,m,T,O){return"function"===
typeof G?G(m,T,O):G};z.fromCIMColor=function(G){return G?{r:G[0],g:G[1],b:G[2],a:G[3]/255}:{r:0,g:0,b:0,a:0}};z.getValue=G=>isNaN(G)||!G?0:G;z.importGeometryEngine=function(){return new Promise((G,m)=>R(["../../geometry/geometryEngineJSON"],G,m))};z.isCIMFill=function(G){return"CIMGradientFill"===G.type||"CIMHatchFill"===G.type||"CIMPictureFill"===G.type||"CIMSolidFill"===G.type||"CIMWaterFill"===G.type};z.isCIMMarker=function(G){return"CIMVectorMarker"===G.type||"CIMPictureMarker"===G.type||"CIMBarChartMarker"===
G.type||"CIMCharacterMarker"===G.type||"CIMPieChartMarker"===G.type||"CIMStackedBarChartMarker"===G.type};z.isCIMMarkerStrokePlacement=function(G){return"CIMMarkerPlacementAlongLineRandomSize"===G.type||"CIMMarkerPlacementAlongLineSameSize"===G.type||"CIMMarkerPlacementAlongLineVariableSize"===G.type||"CIMMarkerPlacementAtExtremities"===G.type||"CIMMarkerPlacementAtMeasuredUnits"===G.type||"CIMMarkerPlacementAtRatioPositions"===G.type||"CIMMarkerPlacementOnLine"===G.type||"CIMMarkerPlacementOnVertices"===
G.type};z.isCIMStroke=function(G){return"CIMGradientStroke"===G.type||"CIMPictureStroke"===G.type||"CIMSolidStroke"===G.type};z.isGeometryEngineRequired=G=>{if(!G)return!1;for(const m of G)switch(m.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":return!0}return!1};z.resampleHermite=function(G,m,T,O,W,K,L=!0){const q=m/W;T/=K;const d=Math.ceil(q/2),t=Math.ceil(T/2);for(let A=0;A<K;A++)for(let a=0;a<W;a++){const k=4*(a+(L?K-A-1:A)*W);var B=0;let f=0,g=0,u=0,h=0,l=0,b=0;const c=
(A+.5)*T;for(let e=Math.floor(A*T);e<(A+1)*T;e++){var x=Math.abs(c-(e+.5))/t;const n=(a+.5)*q;x*=x;for(let v=Math.floor(a*q);v<(a+1)*q;v++){let w=Math.abs(n-(v+.5))/d;B=Math.sqrt(x+w*w);-1<=B&&1>=B&&(B=2*B*B*B-3*B*B+1,0<B&&(w=4*(v+e*m),b+=B*G[w+3],g+=B,255>G[w+3]&&(B=B*G[w+3]/250),u+=B*G[w],h+=B*G[w+1],l+=B*G[w+2],f+=B))}}O[k]=u/f;O[k+1]=h/f;O[k+2]=l/f;O[k+3]=b/g}};z.toCIMSymbolJSON=function(G){var m;return null==(m=G.data)?void 0:m.symbol};Object.defineProperty(z,"__esModule",{value:!0})})},"esri/layers/support/DimensionalDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(R,z,r,G,m,T,O){var W;r=W=function(K){function L(q){q=K.call(this,q)||this;q.variableName=null;q.dimensionName=null;q.values=[];q.isSlice=!1;return q}R._inheritsLoose(L,K);L.prototype.clone=function(){return new W({variableName:this.variableName,dimensionName:this.dimensionName,values:G.clone(this.values),isSlice:this.isSlice})};return L}(r.JSONSupport);z.__decorate([m.property({type:String,json:{write:!0}})],r.prototype,"variableName",void 0);z.__decorate([m.property({type:String,json:{write:!0}})],
r.prototype,"dimensionName",void 0);z.__decorate([m.property({type:T.types.array(T.types.oneOf([T.types.native(Number),T.types.array(T.types.native(Number))])),json:{write:!0}})],r.prototype,"values",void 0);z.__decorate([m.property({type:Boolean,json:{write:!0}})],r.prototype,"isSlice",void 0);return r=W=z.__decorate([O.subclass("esri.layers.support.DimensionalDefinition")],r)})},"esri/layers/support/ExportImageServiceParameters":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./imageryRendererUtils ./MosaicRule ./rasterEnums ./RasterFunction".split(" "),
function(R,z,r,G,m,T,O,W,K,L,q,d,t,B,x){R.ExportImageServiceParameters=function(A){function a(){var f=A.apply(this,arguments)||this;f.layer=null;f.adjustAspectRatio=void 0;f.bandIds=void 0;f.compression=void 0;f.compressionQuality=void 0;f.compressionTolerance=.01;f.format=null;f.interpolation=null;f.noData=null;f.noDataInterpretation=void 0;f.pixelType=void 0;f.lercVersion=2;return f}z._inheritsLoose(a,A);var k=a.prototype;k.writeAdjustAspectRatio=function(f,g,u){10.3>this.layer.version||(g[u]=f)};
k.writeCompressionQuality=function(f,g,u){this.format&&-1<this.format.toLowerCase().indexOf("jpg")&&null!=f&&(g[u]=f)};k.writeCompressionTolerance=function(f,g,u){"lerc"===this.format&&null!=f&&(g[u]=f)};k.writeLercVersion=function(f,g,u){"lerc"===this.format&&10.5<=this.layer.version&&(g[u]=f)};k.combineRendererWithRenderingRule=function(){var f;const g=this.layer,{rasterInfo:u,renderingRule:h,renderer:l}=g;return l&&d.isSupportedRendererType(l)?d.combineRenderingRules(d.convertRendererToRenderingRule(l,
{rasterAttributeTable:u.attributeTable,pixelType:u.pixelType,dataType:u.dataType,bandProperties:null==(f=u.keyProperties)?void 0:f.BandProperties,convertColorRampToColormap:10.6>g.version,convertToRFT:null!=h&&h.rasterFunctionDefinition?!0:!1}),h):h};k._addResampleRasterFunction=function(f){var g;if("vector-field"!==(null==(g=this.layer.renderer)?void 0:g.type)||"Resample"===(null==f?void 0:f.functionName))return f;g=new x({functionName:"Resample",functionArguments:{ResamplingType:"esriImageServiceDataTypeVector-UV"===
this.layer.serviceDataType?7:10,InputCellSize:{x:this.layer.pixelSizeX,y:this.layer.pixelSizeY}}});g=null!=f&&f.rasterFunctionDefinition?new x({rasterFunctionDefinition:d.convertRenderingRuleToRFT(g)}):g;return d.combineRenderingRules(g,f)};z._createClass(a,[{key:"version",get:function(){const f=this.layer;f.commitProperty("bandIds");f.commitProperty("format");f.commitProperty("compressionQuality");f.commitProperty("compressionTolerance");f.commitProperty("interpolation");f.commitProperty("noData");
f.commitProperty("noDataInterpretation");f.commitProperty("mosaicRule");f.commitProperty("renderingRule");f.commitProperty("adjustAspectRatio");f.commitProperty("pixelFilter");f.commitProperty("renderer");f.commitProperty("definitionExpression");return(this._get("version")||0)+1},set:function(f){this._set("version",f)}},{key:"mosaicRule",get:function(){var f=this.layer;let g=f.mosaicRule;f=f.definitionExpression;g?f&&f!==g.where&&(g=g.clone(),g.where=f):f&&(g=new t({where:f}));return g}},{key:"renderingRule",
get:function(){var f=this.layer;let g=f.renderingRule;const u=f.pixelFilter;f=!f.format||-1<f.format.indexOf("jpg")||-1<f.format.indexOf("png");g=this._addResampleRasterFunction(g);f&&!u&&(g=this.combineRendererWithRenderingRule());return g}}]);return a}(G.JSONSupport);r.__decorate([K.property()],R.ExportImageServiceParameters.prototype,"layer",void 0);r.__decorate([K.property({json:{write:!0}})],R.ExportImageServiceParameters.prototype,"adjustAspectRatio",void 0);r.__decorate([q.writer("adjustAspectRatio")],
R.ExportImageServiceParameters.prototype,"writeAdjustAspectRatio",null);r.__decorate([K.property({json:{write:!0}}),m.aliasOf("layer.bandIds")],R.ExportImageServiceParameters.prototype,"bandIds",void 0);r.__decorate([K.property({json:{write:!0}})],R.ExportImageServiceParameters.prototype,"compression",void 0);r.__decorate([K.property({json:{write:!0}}),m.aliasOf("layer.compressionQuality")],R.ExportImageServiceParameters.prototype,"compressionQuality",void 0);r.__decorate([q.writer("compressionQuality")],
R.ExportImageServiceParameters.prototype,"writeCompressionQuality",null);r.__decorate([K.property({json:{write:!0}}),m.aliasOf("layer.compressionTolerance")],R.ExportImageServiceParameters.prototype,"compressionTolerance",void 0);r.__decorate([q.writer("compressionTolerance")],R.ExportImageServiceParameters.prototype,"writeCompressionTolerance",null);r.__decorate([K.property({json:{write:!0}}),m.aliasOf("layer.format")],R.ExportImageServiceParameters.prototype,"format",void 0);r.__decorate([K.property({type:String,
json:{read:{reader:B.interpolationKebab.read},write:{writer:B.interpolationKebab.write}}}),m.aliasOf("layer.interpolation")],R.ExportImageServiceParameters.prototype,"interpolation",void 0);r.__decorate([K.property({json:{write:!0}}),m.aliasOf("layer.noData")],R.ExportImageServiceParameters.prototype,"noData",void 0);r.__decorate([K.property({type:String,json:{read:{reader:B.noDataInterpretationKebab.read},write:{writer:B.noDataInterpretationKebab.write}}}),m.aliasOf("layer.noDataInterpretation")],
R.ExportImageServiceParameters.prototype,"noDataInterpretation",void 0);r.__decorate([K.property({json:{write:!0}})],R.ExportImageServiceParameters.prototype,"pixelType",void 0);r.__decorate([K.property({json:{write:!0}})],R.ExportImageServiceParameters.prototype,"lercVersion",void 0);r.__decorate([q.writer("lercVersion")],R.ExportImageServiceParameters.prototype,"writeLercVersion",null);r.__decorate([K.property({type:Number})],R.ExportImageServiceParameters.prototype,"version",null);r.__decorate([K.property({json:{write:!0}})],
R.ExportImageServiceParameters.prototype,"mosaicRule",null);r.__decorate([K.property({json:{write:!0}})],R.ExportImageServiceParameters.prototype,"renderingRule",null);R.ExportImageServiceParameters=r.__decorate([L.subclass("esri.layers.mixins.ExportImageServiceParameters")],R.ExportImageServiceParameters);Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/imageryRendererUtils":function(){define("exports ../../core/lang ./RasterFunction ./rasterFunctionUtils ../../renderers/support/colorRampUtils ../../renderers/support/stretchRendererUtils ../../renderers/visualVariables/SizeVariable".split(" "),
function(R,z,r,G,m,T,O){function W(h,l){for(const b in h)"raster"===b.toLowerCase()&&("RasterFunctionVariable"===h[b].type?(h[b]=l.rasterFunctionDefinition,h[b].type="RasterFunctionTemplate"):"RasterFunctionTemplate"===h[b].type&&W(h[b].arguments,l))}function K(h){const l=z.clone(G.schema[h.functionName+"Function"]);h=h.functionArguments;for(const b in h)"raster"===b.toLowerCase()?(l.arguments[b]=K(h[b]),l.arguments[b].type="RasterFunctionTemplate"):"colormap"===b.toLowerCase()?(l.arguments[b].value=
a(h[b]),l.arguments.ColorSchemeType.value=0):l.arguments[b].value=h[b];return l}function L(h){const l=h.Raster;return l&&"esri.layers.support.RasterFunction"===l.declaredClass?L(l.functionArguments):h}function q(h,l){const b=new r;b.functionName="VectorFieldRenderer";const {dataType:c,bandProperties:e}=l,n="vector-uv"===c?!0:!1;let v,w;e&&2===e.length&&(v=e.map(p=>p.BandName.toLowerCase()).indexOf("magnitude"),w=e.map(p=>p.BandName.toLowerCase()).indexOf("direction"));if(-1===v||null===v)v=0,w=1;
const J="arithmetic"===h.rotationType?1:2,y="flow-from"===h.flowRepresentation?0:1,C=h.visualVariables?h.visualVariables.find(p=>"Magnitude"===p.field):new O;h={magnitudeBandID:v,directionBandID:w,isUVComponents:n,referenceSystem:J,massFlowAngleRepresentation:y,symbolTileSize:50,symbolTileSizeUnits:100,calculationMethod:"Vector Average",symbologyName:f[h.style.toLowerCase().replace("-","_")],minimumMagnitude:C.minDataValue,maximumMagnitude:C.maxDataValue,minimumSymbolSize:C.minSize,maximumSymbolSize:C.maxSize};
b.functionArguments=h;return l.convertToRFT?new r({rasterFunctionDefinition:K(b)}):b}function d(h,l){const b=[],c=[],e=[],n=[],{pixelType:v,rasterAttributeTable:w}=l,J=w&&w.features,y=B(w);if(J&&Array.isArray(J)&&h.classBreakInfos){h.classBreakInfos.forEach((N,U)=>{const D=N.symbol.color;let F;D.a&&J.forEach(M=>{F=M.attributes[h.field];(F>=N.minValue&&F<N.maxValue||U===h.classBreakInfos.length-1&&F>=N.minValue)&&n.push([M.attributes[y],D.r,D.g,D.b])})});var C=v?t(n,v):n,p=new r;p.functionName="Colormap";
p.functionArguments={};p.functionArguments.Colormap=C;p.variableName="Raster";return l.convertToRFT?new r({rasterFunctionDefinition:K(p)}):p}h.classBreakInfos.forEach((N,U)=>{const D=N.symbol&&N.symbol.color;D.a?(0===U?b.push(N.minValue,N.maxValue+1E-6):b.push(N.minValue+1E-6,N.maxValue+1E-6),c.push(U),n.push([U,D.r,D.g,D.b])):e.push(N.minValue,N.maxValue)});C=v?t(n,v):n;p=new r;p.functionName="Remap";p.functionArguments={InputRanges:b,OutputValues:c,NoDataRanges:e};p.variableName="Raster";const E=
new r;E.functionName="Colormap";E.functionArguments={Colormap:C,Raster:p};return l.convertToRFT?new r({rasterFunctionDefinition:K(E)}):E}function t(h,l){(l=k[String(l).toLowerCase()])&&h.push([Math.floor(l[0]-1),0,0,0],[Math.ceil(l[1]+1),0,0,0]);return h}function B(h){if(h)return{fields:h}=h,(h=h&&h.find(l=>l&&l.name&&"value"===l.name.toLowerCase()))&&h.name}function x(h,l){var b,c;const e=[],{pixelType:n,rasterAttributeTable:v}=l;var w=v&&v.features;const J=B(v),y=null==(b=h.defaultSymbol)?void 0:
null==(c=b.color)?void 0:c.toRgb();if(b=h.uniqueValueInfos)if(w){const C=new Map;b.forEach(E=>{var N;const U=E.value;E=null==(N=E.symbol.color)?void 0:N.toRgb();null!=U&&E&&C.set(String(U),E)});const p=h.field;w.forEach(({attributes:E})=>{var N=String(E[p]);E=E[J];C.has(N)?(N=C.get(N),e.push([E,...N])):y&&e.push([E,...y])})}else for(h=0;h<b.length;h++)if(c=b[h],w=c.symbol.color,c=+c.value,null!=w&&w.a){if(isNaN(c))return null;e.push([c,w.r,w.g,w.b])}b=n&&0<e.length?t(e,n):e;h=new r;h.functionName=
"Colormap";h.functionArguments={};h.functionArguments.Colormap=b;h.variableName="Raster";return l.convertToRFT?new r({rasterFunctionDefinition:K(h)}):h}function A(h){const l=[];h.forEach(b=>{Array.isArray(b)?l.push(b):null!=b.min&&null!=b.max&&l.push([b.min,b.max,b.avg||0,b.stddev||0])});return l}function a(h){const l=[],b=[];h.forEach(c=>{l.push(c[0]);b.push(m.rgbaConvertTo32Bit([...c.slice(1),255]))});return{type:"RasterColormap",values:l,colors:b}}const k={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],
s8:[-128,127],u16:[0,65535],s16:[-32768,32767]},f={simple_scalar:"Simple Scalar",wind_barb:"Wind Barb",single_arrow:"Single Arrow",beaufort_kn:"Beaufort Wind (Knots)",beaufort_m:"Beaufort Wind (MetersPerSecond)",ocean_current_m:"Ocean Current (MetersPerSecond)",ocean_current_kn:"Ocean Current (Knots)"},g=new Set("raster-stretch unique-value class-breaks raster-shaded-relief vector-field raster-colormap".split(" ")),u={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9};
R.combineRenderingRules=function(h,l){if(!h||!l)return z.clone(h||l);h=z.clone(h);if(l.rasterFunctionDefinition){const b=l.rasterFunctionDefinition;if(b.thumbnail||b.thumbnailEx)b.thumbnail=b.thumbnailEx=null;W(h.rasterFunctionDefinition.arguments,l)}else"none"!==l.functionName.toLowerCase()&&(L(h.functionArguments).Raster=l);return h};R.convertRendererToRenderingRule=function(h,l){l=l||{};switch(h.type){case "raster-stretch":var b=l;l=b.convertToRFT;var c=new r;c.functionName="Stretch";var e=u[T.stretchTypeJSONDict.toJSON(h.stretchType)],
n=A(h.statistics);n={StretchType:e,Statistics:n,DRA:h.dynamicRangeAdjustment,UseGamma:h.useGamma,Gamma:h.gamma,ComputeGamma:h.computeGamma};null!=h.outputMin&&(n.Min=h.outputMin);null!=h.outputMax&&(n.Max=h.outputMax);e===u.standardDeviation?(n.NumberOfStandardDeviations=h.numberOfStandardDeviations,c.outputPixelType="u8"):e===u.percentClip?(n.MinPercent=h.minPercent,n.MaxPercent=h.maxPercent,c.outputPixelType="u8"):e===u.minMax?c.outputPixelType="u8":e===u.sigmoid&&(n.SigmoidStrengthLevel=h.sigmoidStrengthLevel);
c.functionArguments=n;c.variableName="Raster";if(h.colorRamp){e=h.colorRamp;n=new r;if(l)n.functionArguments={ColorRamp:m.getRFxArgColorRampValue(e)};else{const v=m.getColorRampName(e);n.functionArguments=v?{colorRamp:v}:!b.convertColorRampToColormap||"algorithmic"!==e.type&&"multipart"!==e.type?{colorRamp:h.colorRamp.toJSON()}:{Colormap:m.convertColorRampToColormap(e,256)}}n.variableName="Raster";n.functionName="Colormap";n.functionArguments.Raster=c;h=l?new r({rasterFunctionDefinition:K(n)}):n}else h=
l?new r({rasterFunctionDefinition:K(c)}):c;return h;case "class-breaks":return d(h,l);case "unique-value":return x(h,l);case "raster-colormap":return b=l,(l=h.extractColormap())&&0!==l.length?({pixelType:h}=b,h=h?t(l,h):l,l=new r,l.functionName="Colormap",l.functionArguments={},l.functionArguments.Colormap=h,h=b.convertToRFT?new r({rasterFunctionDefinition:K(l)}):l):h=void 0,h;case "vector-field":return q(h,l);case "raster-shaded-relief":return b=l.convertToRFT,"elevation"!==l.dataType?h=new r:(l=
new r,l.functionName="Hillshade",c="traditional"===h.hillshadeType?0:1,e="none"===h.scalingType?1:3,n={HillshadeType:c,SlopeType:e,ZFactor:h.zFactor},0===c&&(n.Azimuth=h.azimuth,n.Altitude=h.altitude),3===e&&(n.PSPower=h.pixelSizePower,n.PSZFactor=h.pixelSizeFactor),l.functionArguments=n,l.variableName="Raster",h.colorRamp&&(l.functionName="ShadedRelief",b?n.ColorRamp=m.getRFxArgColorRampValue(h.colorRamp):n.Colormap=m.convertColorRampToColormap(h.colorRamp,256)),h=b?new r({rasterFunctionDefinition:K(l)}):
l),h;case "flow":throw Error("Unsupported rendering rule.");}};R.convertRenderingRuleToRFT=K;R.isSupportedRendererType=function(h){return g.has(h.type)};R.pixelTypeRanges=k;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/RasterFunction":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),
function(R,z,r,G,m,T,O,W,K,L){var q;const d=new Set(["raster","raster2","dem","fillraster"]),t=new Set(["rasters"]),B=f=>f&&f.rasterFunction?k.fromJSON(f):f,x=f=>f&&f instanceof k?f.toJSON():f,A=f=>(null==f?void 0:f.functionName)&&!f.declaredClass,a=f=>A(f)?new k(f):f;let k=q=function(f){function g(h){h=f.call(this,h)||this;h.functionName=null;h.outputPixelType="unknown";h.variableName=null;h.rasterFunctionDefinition=null;return h}R._inheritsLoose(g,f);var u=g.prototype;u.readFunctionArguments=function(h){if(null==
h)var l=null;else{h=G.clone(h);var b={};for(l of Object.keys(h))d.has(l.toLowerCase())?b[l]=B(h[l]):t.has(l.toLowerCase())&&Array.isArray(h[l])?b[l]=h[l].map(B):b[l]=h[l];l=b}return l};u.writeFunctionArguments=function(h,l,b){const c={};for(const e of Object.keys(h))d.has(e.toLowerCase())?c[e]=x(h[e]):t.has(e.toLowerCase())&&Array.isArray(h[e])?c[e]=h[e].map(x):c[e]=x(h[e]);l[b]=c};u.readFunctionName=function(h,l){h=l.rasterFunctionInfos;const b=l.name;return b?b:h&&h.length&&"None"!==h[0].name?h[0].name:
l.rasterFunctionDefinition?l.rasterFunctionDefinition.name:l.rasterFunction};u.clone=function(){return new q({functionName:this.functionName,functionArguments:G.clone(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,rasterFunctionDefinition:G.clone(this.rasterFunctionDefinition)})};R._createClass(g,[{key:"functionArguments",set:function(h){if(h){const l=Object.keys(h);if(l.some(b=>d.has(b.toLowerCase())&&A(h[b]))||l.some(b=>t.has(b.toLowerCase())&&Array.isArray(h[b])&&
h[b].some(c=>A(c)))){h=G.clone(h);for(const b of l)d.has(b.toLowerCase())?h[b]=a(h[b]):t.has(b.toLowerCase())&&Array.isArray(h[b])&&(h[b]=h[b].map(c=>a(c)))}}this._set("functionArguments",h)}}]);return g}(r.JSONSupport);z.__decorate([m.property({json:{type:Object,name:"rasterFunctionArguments"}})],k.prototype,"functionArguments",null);z.__decorate([W.reader("functionArguments")],k.prototype,"readFunctionArguments",null);z.__decorate([L.writer("functionArguments")],k.prototype,"writeFunctionArguments",
null);z.__decorate([m.property({json:{type:String,write:{target:"rasterFunction"}}})],k.prototype,"functionName",void 0);z.__decorate([W.reader("functionName",["rasterFunction","rasterFunctionInfos","rasterFunctionDefinition"])],k.prototype,"readFunctionName",null);z.__decorate([O.enumeration({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),m.property({json:{default:"unknown"}})],k.prototype,
"outputPixelType",void 0);z.__decorate([m.property({type:String,json:{read:!0,write:!0}})],k.prototype,"variableName",void 0);z.__decorate([m.property({type:Object,json:{name:"rasterFunctionDefinition"}})],k.prototype,"rasterFunctionDefinition",void 0);return k=q=z.__decorate([K.subclass("esri.layers.support.RasterFunction")],k)})},"esri/layers/support/rasterFunctionUtils":function(){define(["exports"],function(R){R.schema={StretchFunction:{arguments:{ComputeGamma:{isDataset:!1,isPublic:!1,name:"ComputeGamma",
type:"RasterFunctionVariable",value:!1},DRA:{isDataset:!1,isPublic:!1,name:"DRA",type:"RasterFunctionVariable",value:!1},EstimateStatsHistogram:{isDataset:!1,isPublic:!1,name:"EstimateStatsHistogram",type:"RasterFunctionVariable",value:!1},Gamma:{displayName:"Gamma",isDataset:!1,isPublic:!1,name:"Gamma",type:"RasterFunctionVariable"},Histograms:{isDataset:!1,isPublic:!1,name:"Histograms",type:"RasterFunctionVariable"},Max:{isDataset:!1,isPublic:!1,name:"Max",type:"RasterFunctionVariable",value:255},
MaxPercent:{isDataset:!1,isPublic:!1,name:"MaxPercent",type:"RasterFunctionVariable",value:.5},Min:{isDataset:!1,isPublic:!1,name:"Min",type:"RasterFunctionVariable",value:0},MinPercent:{isDataset:!1,isPublic:!1,name:"MinPercent",type:"RasterFunctionVariable",value:.25},NumberOfStandardDeviations:{isDataset:!1,isPublic:!1,name:"NumberOfStandardDeviation",type:"RasterFunctionVariable",value:2},Raster:{isDataset:!0,isPublic:!1,name:"Raster",type:"RasterFunctionVariable"},SigmoidStrengthLevel:{isDataset:!1,
isPublic:!1,name:"SigmoidStrengthLevel",type:"RasterFunctionVariable",value:2},Statistics:{isDataset:!1,isPublic:!1,name:"Statistics",type:"RasterFunctionVariable"},StretchType:{isDataset:!1,isPublic:!1,name:"StretchType",type:"RasterFunctionVariable",value:0},type:"StretchFunctionArguments",UseGamma:{isDataset:!1,isPublic:!1,name:"UseGamma",type:"RasterFunctionVariable",value:!1}},description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",
function:{description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",name:"Stretch",pixelType:"UNKNOWN",type:"StretchFunction"},functionType:0,name:"Stretch",thumbnail:""},RemapFunction:{name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table.",function:{type:"RemapFunction",
pixelType:"UNKNOWN",name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},UseTable:{name:"UseTable",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},InputRanges:{name:"InputRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"Input Ranges"},OutputValues:{name:"OutputValues",isPublic:!1,isDataset:!1,
type:"RasterFunctionVariable",displayName:"Output Values"},NoDataRanges:{name:"NoDataRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"NoData Ranges"},Table:{name:"Table",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputField:{name:"InputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},OutputField:{name:"OutputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputMaxField:{name:"InputMaxField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},
RemapTableType:{name:"RemapTableType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},AllowUnmatched:{name:"AllowUnmatched",isPublic:!1,isDataset:!1,value:!0,type:"RasterFunctionVariable"},type:"RemapFunctionArguments"},functionType:0,thumbnail:""},ColormapFunction:{name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp.",function:{type:"ColormapFunction",pixelType:"UNKNOWN",
name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},ColormapName:{name:"ColormapName",isPublic:!1,isDataset:!1,
value:"Gray",type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},type:"ColormapFunctionArguments"},functionType:0,thumbnail:""},ShadedReliefFunction:{name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image.",function:{type:"ShadedReliefFunction",pixelType:"UNKNOWN",name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image."},
arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,
value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",
isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"ShadedReliefFunctionArguments"},functionType:0,thumbnail:""},HillshadeFunction:{name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image",function:{type:"HillshadeFunction",pixelType:"UNKNOWN",name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image"},
arguments:{DEM:{name:"DEM",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,
value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"HillshadeFunctionArguments"},functionType:0,thumbnail:""},ResampleFunction:{name:"Resample",description:"Changes the cell size of a raster.",function:{type:"ResampleFunction",
pixelType:"UNKNOWN",name:"Resample",description:"Changes the cell size of a raster."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ResamplingType:{name:"ResamplingType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},InputCellSize:{name:"InputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},OutputCellSize:{name:"OutputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},type:"ResampleFunctionArguments"},
functionType:0,thumbnail:""}};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/MosaicRule":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/ensureType ../../geometry/Point ./DimensionalDefinition ./RasterFunction".split(" "),
function(R,z,r,G,m,T,O,W,K,L,q,d,t){var B;const x=r.strict()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),A=r.strict()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});r=B=function(a){function k(g){g=a.call(this,g)||this;g.ascending=!0;g.itemRenderingRule=
null;g.lockRasterIds=null;g.method=null;g.multidimensionalDefinition=null;g.objectIds=null;g.operation=null;g.sortField=null;g.sortValue=null;g.viewpoint=null;g.where=null;return g}R._inheritsLoose(k,a);var f=k.prototype;f.readAscending=function(g,u){return null!=u.ascending?u.ascending:null!=u.sortAscending?u.sortAscending:!0};f.readMethod=function(g,u){g=u.mosaicMethod||u.defaultMosaicMethod;switch(g?g.toLowerCase().replace("esrimosaic",""):""){case "byattribute":case "attribute":g="esriMosaicAttribute";
break;case "lockraster":g="esriMosaicLockRaster";break;case "center":g="esriMosaicCenter";break;case "northwest":g="esriMosaicNorthwest";break;case "nadir":g="esriMosaicNadir";break;case "viewpoint":g="esriMosaicViewpoint";break;case "seamline":g="esriMosaicSeamline";break;case "none":g="esriMosaicNone";break;default:g="esriMosaicNone"}return g=A.fromJSON(g)};f.readOperation=function(g,u){g=u.mosaicOperation;u=u.mosaicOperator&&u.mosaicOperator.toLowerCase();u=g||(u?x.toJSON(u):null);return x.fromJSON(u)||
"first"};f.castSortValue=function(g){return null==g||"string"===typeof g||"number"===typeof g?g:`${g}`};f.clone=function(){return new B({ascending:this.ascending,itemRenderingRule:m.clone(this.itemRenderingRule),lockRasterIds:m.clone(this.lockRasterIds),method:this.method,multidimensionalDefinition:m.clone(this.multidimensionalDefinition),objectIds:m.clone(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:m.clone(this.viewpoint),where:this.where})};
return k}(G.JSONSupport);z.__decorate([T.property({type:Boolean,json:{write:!0}})],r.prototype,"ascending",void 0);z.__decorate([W.reader("ascending",["ascending","sortAscending"])],r.prototype,"readAscending",null);z.__decorate([T.property({type:t,json:{write:!0}})],r.prototype,"itemRenderingRule",void 0);z.__decorate([T.property({type:[L.Integer],json:{write:{overridePolicy(){return{enabled:"lock-raster"===this.method}}}}})],r.prototype,"lockRasterIds",void 0);z.__decorate([T.property({type:String,
json:{type:A.jsonValues,write:{target:"mosaicMethod",writer:A.write}}})],r.prototype,"method",void 0);z.__decorate([W.reader("method",["mosaicMethod","defaultMosaicMethod"])],r.prototype,"readMethod",null);z.__decorate([T.property({type:[d],json:{write:!0}})],r.prototype,"multidimensionalDefinition",void 0);z.__decorate([T.property({type:[L.Integer],json:{name:"fids",write:!0}})],r.prototype,"objectIds",void 0);z.__decorate([T.property({json:{type:x.jsonValues,read:{reader:x.read},write:{target:"mosaicOperation",
writer:x.write}}})],r.prototype,"operation",void 0);z.__decorate([W.reader("operation",["mosaicOperation","mosaicOperator"])],r.prototype,"readOperation",null);z.__decorate([T.property({type:String,json:{write:{overridePolicy(){return{enabled:"attribute"===this.method}}}}})],r.prototype,"sortField",void 0);z.__decorate([T.property({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:"attribute"===this.method,allowNull:!0}}}}})],r.prototype,"sortValue",void 0);z.__decorate([O.cast("sortValue")],
r.prototype,"castSortValue",null);z.__decorate([T.property({type:q,json:{write:!0}})],r.prototype,"viewpoint",void 0);z.__decorate([T.property({type:String,json:{write:!0}})],r.prototype,"where",void 0);return r=B=z.__decorate([K.subclass("esri.layers.support.MosaicRule")],r)})},"esri/layers/support/rasterEnums":function(){define(["exports","../../core/jsonMap"],function(R,z){const r=z.strict()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"});
z=z.strict()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"});R.interpolationKebab=r;R.noDataInterpretationKebab=z;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ./RasterStorageInfo".split(" "),
function(R,z,r,G,m,T,O,W,K,L,q,d){r=function(t){function B(x){x=t.call(this,x)||this;x.attributeTable=null;x.bandCount=null;x.colormap=null;x.extent=null;x.format=void 0;x.height=null;x.width=null;x.histograms=null;x.keyProperties={};x.multidimensionalInfo=null;x.noDataValue=null;x.pixelSize=null;x.pixelType=null;x.isPseudoSpatialReference=!1;x.spatialReference=null;x.statistics=null;x.storageInfo=null;x.transform=null;return x}R._inheritsLoose(B,t);R._createClass(B,[{key:"dataType",get:function(){var x,
A,a;const k=null!=(x=null==(A=this.keyProperties)?void 0:null==(a=A.DataType)?void 0:a.toLowerCase())?x:"generic";return"stdtime"===k?"standard-time":k}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(x){x&&this._set("nativeExtent",x)}},{key:"nativePixelSize",get:function(){if(!G.isSome(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;const x=this.nativeExtent;return{x:x.width/this.width,y:x.height/this.height}}}]);return B}(r.JSONSupport);
z.__decorate([m.property({json:{write:!0}})],r.prototype,"attributeTable",void 0);z.__decorate([m.property({json:{write:!0}})],r.prototype,"bandCount",void 0);z.__decorate([m.property({json:{write:!0}})],r.prototype,"colormap",void 0);z.__decorate([m.property({type:String,readOnly:!0})],r.prototype,"dataType",null);z.__decorate([m.property({type:L,json:{write:!0}})],r.prototype,"extent",void 0);z.__decorate([m.property({type:L,json:{write:!0}})],r.prototype,"nativeExtent",null);z.__decorate([m.property({json:{write:!0}})],
r.prototype,"nativePixelSize",null);z.__decorate([m.property({json:{write:!0}})],r.prototype,"format",void 0);z.__decorate([m.property({json:{write:!0}})],r.prototype,"height",void 0);z.__decorate([m.property({json:{write:!0}})],r.prototype,"width",void 0);z.__decorate([m.property({json:{write:!0}})],r.prototype,"histograms",void 0);z.__decorate([m.property({json:{write:!0}})],r.prototype,"keyProperties",void 0);z.__decorate([m.property({json:{write:!0}})],r.prototype,"multidimensionalInfo",void 0);
z.__decorate([m.property()],r.prototype,"noDataValue",void 0);z.__decorate([m.property({json:{write:!0}})],r.prototype,"pixelSize",void 0);z.__decorate([m.property({json:{write:!0}})],r.prototype,"pixelType",void 0);z.__decorate([m.property()],r.prototype,"isPseudoSpatialReference",void 0);z.__decorate([m.property({type:q,json:{write:!0}})],r.prototype,"spatialReference",void 0);z.__decorate([m.property({json:{write:!0}})],r.prototype,"statistics",void 0);z.__decorate([m.property({type:d,json:{write:!0}})],
r.prototype,"storageInfo",void 0);z.__decorate([m.property({json:{write:!0}})],r.prototype,"transform",void 0);return r=z.__decorate([K.subclass("esri.layers.support.RasterInfo")],r)})},"esri/layers/support/RasterStorageInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(R,z,r,G,m,T,O,W,K){r=function(L){function q(){var d=L.apply(this,arguments)||this;d.blockWidth=void 0;d.blockHeight=void 0;d.compression=null;d.origin=null;d.firstPyramidLevel=null;d.maximumPyramidLevel=null;d.pyramidScalingFactor=2;d.pyramidBlockWidth=null;d.pyramidBlockHeight=null;d.isVirtualTileInfo=!1;d.tileInfo=null;d.blockBoundary=null;return d}R._inheritsLoose(q,L);return q}(r.JSONSupport);z.__decorate([G.property({type:Number,json:{write:!0}})],r.prototype,"blockWidth",void 0);z.__decorate([G.property({type:Number,
json:{write:!0}})],r.prototype,"blockHeight",void 0);z.__decorate([G.property({type:String,json:{write:!0}})],r.prototype,"compression",void 0);z.__decorate([G.property({type:K,json:{write:!0}})],r.prototype,"origin",void 0);z.__decorate([G.property({type:Number,json:{write:!0}})],r.prototype,"firstPyramidLevel",void 0);z.__decorate([G.property({type:Number,json:{write:!0}})],r.prototype,"maximumPyramidLevel",void 0);z.__decorate([G.property({json:{write:!0}})],r.prototype,"pyramidResolutions",void 0);
z.__decorate([G.property({type:Number,json:{write:!0}})],r.prototype,"pyramidScalingFactor",void 0);z.__decorate([G.property({type:Number,json:{write:!0}})],r.prototype,"pyramidBlockWidth",void 0);z.__decorate([G.property({type:Number,json:{write:!0}})],r.prototype,"pyramidBlockHeight",void 0);z.__decorate([G.property({type:Boolean,json:{write:!0}})],r.prototype,"isVirtualTileInfo",void 0);z.__decorate([G.property({json:{write:!0}})],r.prototype,"tileInfo",void 0);z.__decorate([G.property()],r.prototype,
"blockBoundary",void 0);return r=z.__decorate([W.subclass("esri.layers.support.RasterStorageInfo")],r)})},"esri/layers/support/RasterJobHandler":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/Error","../../core/maybe","../../core/workers/workers","./PixelBlock"],function(R,z,r,G,m){return function(){function T(){this._workerThread=null;this._destroyed=!1}var O=T.prototype;O.initialize=function(){var W=R._asyncToGenerator(function*(){const K=yield G.open("RasterWorker");this._destroyed?
K.close():this._workerThread=K});return function(){return W.apply(this,arguments)}}();O.destroy=function(){this._destroyed=!0;this._workerThread&&(this._workerThread.close(),this._workerThread=null)};O.convertVectorFieldData=function(){var W=R._asyncToGenerator(function*(K,L){if(!this._workerThread)throw new z("raster-jobhandler:no-connection","no available worker connection");return(K=yield this._workerThread.invoke("convertVectorFieldData",{pixelBlock:K.pixelBlock.toJSON(),type:K.dataType},L))?
new m(K):null});return function(K,L){return W.apply(this,arguments)}}();O.decode=function(){var W=R._asyncToGenerator(function*(K,L){if(!this._workerThread)throw new z("raster-jobhandler:no-connection","no available worker connection");return(K=yield this._workerThread.invoke("decode",K,L))?new m(K):null});return function(K,L){return W.apply(this,arguments)}}();O.symbolize=function(){var W=R._asyncToGenerator(function*(K,L){if(!this._workerThread)throw new z("raster-jobhandler:no-connection","no available worker connection");
K={extent:K.extent&&K.extent.toJSON(),pixelBlock:r.isSome(K.pixelBlock)&&K.pixelBlock.toJSON(),simpleStretchParams:K.simpleStretchParams,bandIds:K.bandIds};return(L=yield this._workerThread.invoke("symbolize",K,L))?new m(L):null});return function(K,L){return W.apply(this,arguments)}}();O.updateSymbolizer=function(){var W=R._asyncToGenerator(function*(K,L){var q;if(!this._workerThread)throw new z("raster-jobhandler:no-connection","no available worker connection");const d=null==K?void 0:null==(q=K.rendererJSON)?
void 0:q.histograms;yield Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:K.toJSON(),histograms:d},L))});return function(K,L){return W.apply(this,arguments)}}();O.stretch=function(){var W=R._asyncToGenerator(function*(K,L){if(!this._workerThread)throw new z("raster-jobhandler:no-connection","no available worker connection");if(null==K||!K.pixelBlock)return null;K={srcPixelBlock:K.pixelBlock.toJSON(),stretchParams:K.stretchParams};return(L=yield this._workerThread.invoke("stretch",
K,L))?new m(L):null});return function(K,L){return W.apply(this,arguments)}}();O.split=function(){var W=R._asyncToGenerator(function*(K,L){if(!this._workerThread)throw new z("raster-jobhandler:no-connection","no available worker connection");if(null==K||!K.pixelBlock)return null;K={srcPixelBlock:K.pixelBlock.toJSON(),tileSize:K.tileSize,maximumPyramidLevel:K.maximumPyramidLevel};const q=yield this._workerThread.invoke("split",K,L);q&&q.forEach((d,t)=>{q.set(t,d?m.fromJSON(d):null)});return Promise.resolve(q)});
return function(K,L){return W.apply(this,arguments)}}();O.estimateStatisticsHistograms=function(){var W=R._asyncToGenerator(function*(K,L){if(!this._workerThread)throw new z("raster-jobhandler:no-connection","no available worker connection");if(null==K||!K.pixelBlock)return null;K={srcPixelBlock:K.pixelBlock.toJSON()};L=yield this._workerThread.invoke("estimateStatisticsHistograms",K,L);return Promise.resolve(L)});return function(K,L){return W.apply(this,arguments)}}();O.mosaicAndTransform=function(){var W=
R._asyncToGenerator(function*(K,L){var q;if(!this._workerThread)throw new z("raster-jobhandler:no-connection","no available worker connection");if(null==K||null==(q=K.srcPixelBlocks)||!q.length)return{pixelBlock:null};K={...K,srcPixelBlocks:K.srcPixelBlocks.map(d=>r.isSome(d)?d.toJSON():null)};L=yield this._workerThread.invoke("mosaicAndTransform",K,L);return{pixelBlock:L.pixelBlock?new m(L.pixelBlock):null,localNorthDirections:L.localNorthDirections}});return function(K,L){return W.apply(this,arguments)}}();
O.createStreamlinesMesh=function(){var W=R._asyncToGenerator(function*(K,L){if(!this._workerThread)throw new z("raster-jobhandler:no-connection","no available worker connection");const q={buffer:K.flowData.data.buffer,width:K.flowData.width,height:K.flowData.height};K=yield this._workerThread.invoke("createStreamlinesMesh",{flowData:q,rendererSettings:K.rendererSettings},{...L,transferList:[q.buffer]});return{vertexData:new Float32Array(K.vertexBuffer),indexData:new Uint32Array(K.indexBuffer)}});
return function(K,L){return W.apply(this,arguments)}}();O.getProjectionOffsetGrid=function(W,K){if(!this._workerThread)throw new z("raster-jobhandler:no-connection","no available worker connection");const L=r.isSome(W.datumTransformation)?W.datumTransformation.steps.map(d=>({wkid:d.wkid,wkt:d.wkt,isInverse:d.isInverse})):null,q=r.isSome(W.rasterTransform)?W.rasterTransform.toJSON():null;W={projectedExtent:W.projectedExtent.toJSON(),srcBufferExtent:W.srcBufferExtent.toJSON(),pixelSize:W.pixelSize,
hasWrapAround:W.hasWrapAround,spacing:W.spacing,datumTransformationSteps:L,rasterTransform:q,isAdaptive:W.isAdaptive,includeGCSGrid:W.includeGCSGrid};return this._workerThread.invoke("getProjectionOffsetGrid",W,K)};return T}()})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../PixelBlock ./ImageCanvasDecoder ./JpgPlus ./Lerc ./Lzw ../../../chunks/Zlib ./Raw ./TiffDecoder ./utils".split(" "),function(R,z,r,
G,m,T,O,W,K,L,q,d){function t(p,E){return B.apply(this,arguments)}function B(){B=z._asyncToGenerator(function*(p,E){var N;if(!d.isPlatformLittleEndian)throw new r("rasterCoded:decode","lerc decoder is not supported on big endian platform");yield O.load();const {offset:U,noDataValue:D}=E;(E=null==(N=E.pixelType)?void 0:N.toUpperCase())&&!C.has(E)&&(E=null);const {width:F,height:M,pixelType:Q,statistics:S,pixels:X,mask:Z}=O.decode(p,{inputOffset:U,noDataValue:D,pixelType:E});return new G({width:F,height:M,
pixelType:Q.toLowerCase(),pixels:X,mask:Z,statistics:S})});return B.apply(this,arguments)}function x(p,E){return A.apply(this,arguments)}function A(){A=z._asyncToGenerator(function*(p,E){p=yield q.decode(p,E.pyramidLevel||0);p=new G({width:p.width,height:p.height,pixels:p.pixels,pixelType:p.pixelType.toLowerCase(),mask:p.mask,statistics:null});p.updateStatistics();return p});return A.apply(this,arguments)}function a(p,E){return k.apply(this,arguments)}function k(){k=z._asyncToGenerator(function*(p,
E){p=yield q.decodeTileOrStrip(p,E.customOptions);p=new G({width:p.width,height:p.height,pixels:p.pixels,pixelType:p.pixelType.toLowerCase(),mask:p.mask,statistics:null});p.updateStatistics();return p});return k.apply(this,arguments)}function f(p,E){const N=E.pixelType||"u8",U=G.getPixelArrayConstructor(N),D="u8"===N?p:new U(p.buffer),F=[],M=E.planes||1;if(1===M)F.push(D);else for(let Q=0;Q<M;Q++){const S=(E.width||1)*(E.height||p.length),X=new U(S);for(let Z=0;Z<S;Z++)X[Z]=D[Z*M+Q];F.push(X)}p=new G({width:E.width||
1,height:E.height||p.length,pixels:F,pixelType:N,statistics:null});p.updateStatistics();return p}function g(p,E){p=(new K.Zlib(new Uint8Array(p))).getBytes();return f(p,E)}function u(p,E){p=W.decode(p,E.offset,E.eof,!E.isInputBigEndian);return f(p,E)}function h(p){p=T.decode(p);p=new G({width:p.width,height:p.height,pixels:p.pixels,pixelType:"U8",mask:p.mask,statistics:null});p.updateStatistics();return p}function l(p,E){p=new Uint8Array(p);p=new J(p);const {width:N,height:U}=E;E=N*U;p=p.decode();
let D=0;var F=0;let M;F=new Uint8Array(E);for(D=0;D<E;D++)F[D]=p[4*D+3];const Q=new G({width:N,height:U,pixels:[],pixelType:"U8",mask:F,statistics:[]});for(D=0;3>D;D++){M=new Uint8Array(E);for(F=0;F<E;F++)M[F]=p[4*F+D];Q.addData({pixels:M})}Q.updateStatistics();return Q}function b(p,E,N,U){return c.apply(this,arguments)}function c(){c=z._asyncToGenerator(function*(p,E,N,U){p=yield(new m).decode(p,{applyJpegMask:!1,format:E,...N},U);p=new G(p);p.updateStatistics();return p});return c.apply(this,arguments)}
function e(p){if(null==p)throw new r("rasterCodec:decode","parameter encodeddata is required.");p=new Uint8Array(p,0,10);let E="";255===p[0]&&216===p[1]?E="jpg":137===p[0]&&80===p[1]&&78===p[2]&&71===p[3]?E="png":67===p[0]&&110===p[1]&&116===p[2]&&90===p[3]&&73===p[4]&&109===p[5]&&97===p[6]&&103===p[7]&&101===p[8]&&32===p[9]?E="lerc":76===p[0]&&101===p[1]&&114===p[2]&&99===p[3]&&50===p[4]&&32===p[5]?E="lerc2":73===p[0]&&73===p[1]&&42===p[2]&&0===p[3]||77===p[0]&&77===p[1]&&0===p[2]&&42===p[3]||73===
p[0]&&73===p[1]&&43===p[2]&&0===p[3]||77===p[0]&&77===p[1]&&0===p[2]&&43===p[3]?E="tiff":71===p[0]&&73===p[1]&&70===p[2]?E="gif":66===p[0]&&77===p[1]?E="bmp":-1<String.fromCharCode.apply(null,p).toLowerCase().indexOf("error")&&(E="error");return E}function n(p){let E=null;switch(p){case "lerc":case "lerc2":E=t;break;case "jpg":E=h;break;case "png":E=l;break;case "bsq":case "bip":E=(N,U)=>{{var D=U.pixelType;var F=null;let M=null;switch(D?D.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":M=
255;F=Uint8Array;break;case "u16":M=M||65535;F=Uint16Array;break;case "u32":M=M||2**32-1;F=Uint32Array;break;case "s8":M=M||-128;F=Int8Array;break;case "s16":M=M||-32768;F=Int16Array;break;case "s32":M=M||-(2**31);F=Int32Array;break;default:F=Float32Array}D={pixelTypeCtor:F,noDataValue:M}}({pixelTypeCtor:D}=D);F=L.decode;N=F(N,{width:U.width,height:U.height,pixelType:D,format:p});U=new G({width:U.width,height:U.height,pixels:N.pixels,pixelType:U.pixelType,mask:N.mask,statistics:null});U.updateStatistics();
return U};break;case "tiff":E=x;break;case "deflate":E=g;break;case "lzw":E=u;break;case "error":E=()=>{throw new r("rasterCodec:decode","input data contains error");};break;default:E=()=>{throw new r("rasterCodec:decode","unsupported raster format");}}return E}function v(p,E=1){if(p){var {pixels:N,width:U,height:D,mask:F}=p;if(N&&0!==N.length){var M=N.length,Q=U-1,S=D-1,X=[],Z,ca,aa=G.getPixelArrayConstructor(p.pixelType);if(0===E){for(E=0;E<M;E++){var ea=N[E];var fa=new aa(Q*S);for(Z=0;Z<S;Z++){var P=
Z*U;for(ca=0;ca<Q;ca++)fa[Z*Q+ca]=ea[P+ca]}X.push(fa)}if(F){var Y=new Uint8Array(Q*S);for(Z=0;Z<S;Z++)for(P=Z*U,ca=0;ca<Q;ca++)Y[Z*Q+ca]=F[P+ca]}}else{for(E=0;E<M;E++){ea=N[E];fa=new aa(Q*S);for(Z=0;Z<S;Z++)for(P=Z*U,ca=0;ca<Q;ca++)fa[Z*Q+ca]=(ea[P+ca]+ea[P+ca+1]+ea[P+U+ca]+ea[P+U+ca+1])/4;X.push(fa)}if(F)for(Y=new Uint8Array(Q*S),Z=0;Z<S;Z++)for(P=Z*U,ca=0;ca<Q;ca++)Y[Z*Q+ca]=Math.min.apply(null,[F[P+ca],F[P+ca+1],F[P+U+ca],F[P+U+ca+1]])}p.width=Q;p.height=S;p.mask=Y;p.pixels=X}}}function w(){w=
z._asyncToGenerator(function*(p,E={},N){if(null==p)throw new r("rasterCodec:decode","missing encodeddata parameter.");let U=E.format&&E.format.toLowerCase();if(!("bsq"!==U&&"bip"!==U||null!=E.width&&null!=E.height))throw new r("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===U&&E.customOptions)return a(p,E);if(!U||"bsq"!==U&&"bip"!==U&&"deflate"!==U&&"lzw"!==U)U=e(p);E.useCanvas&&y.has(U)?p=yield b(p,U,E,N):(N=n(U),E.isPoint&&(E={...E},E.width++,E.height++),p=yield N(p,
E),E.isPoint&&v(p));return p});return w.apply(this,arguments)}var J=function(p){function E(F){var M,Q;this.data=F;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(Q=null;;){var S=this.readUInt32();var X=F=void 0;F=[];for(X=0;4>X;++X)F.push(String.fromCharCode(this.data[this.pos++]));F=F.join("");switch(F){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=
this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(S);break;case "fcTL":Q&&this.animation.frames.push(Q);this.pos+=4;Q={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};F=this.readUInt16();S=this.readUInt16()||100;Q.delay=1E3*F/S;Q.disposeOp=this.data[this.pos++];
Q.blendOp=this.data[this.pos++];Q.data=[];break;case "IDAT":case "fdAT":"fdAT"===F&&(this.pos+=4,S-=4);F=(null!=Q?Q.data:void 0)||this.imgData;for(X=0;0<=S?X<S:X>S;0<=S?++X:--X)F.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(S);S=255-this.transparency.indexed.length;if(0<S)for(F=0;0<=S?F<S:F>S;0<=S?++F:--F)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(S)[0];break;case 2:this.transparency.rgb=
this.read(S)}break;case "tEXt":X=this.read(S);S=X.indexOf(0);F=String.fromCharCode.apply(String,X.slice(0,S));this.text[F]=String.fromCharCode.apply(String,X.slice(S+1));break;case "IEND":Q&&this.animation.frames.push(Q);a:{switch(this.colorType){case 0:case 3:case 4:Q=1;break a;case 2:case 6:Q=3;break a}Q=void 0}this.colors=Q;this.hasAlphaChannel=4===(M=this.colorType)||6===M;M=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*M;a:{switch(this.colors){case 1:M="DeviceGray";break a;
case 3:M="DeviceRGB";break a}M=void 0}this.colorSpace=M;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=S}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var N;E.load=function(F,M,Q){"function"===typeof M&&(Q=M);var S=new XMLHttpRequest;S.open("GET",F,!0);S.responseType="arraybuffer";S.onload=function(){var X=new Uint8Array(S.response||S.mozResponseArrayBuffer);X=new E(X);"function"===typeof(null!=M?M.getContext:void 0)&&X.render(M);return"function"===
typeof Q?Q(X):void 0};return S.send(null)};E.prototype.read=function(F){var M;var Q=[];for(M=0;0<=F?M<F:M>F;0<=F?++M:--M)Q.push(this.data[this.pos++]);return Q};E.prototype.readUInt32=function(){var F=this.data[this.pos++]<<24;var M=this.data[this.pos++]<<16;var Q=this.data[this.pos++]<<8;var S=this.data[this.pos++];return F|M|Q|S};E.prototype.readUInt16=function(){var F=this.data[this.pos++]<<8;var M=this.data[this.pos++];return F|M};E.prototype.decodePixels=function(F){var M,Q,S,X,Z,ca,aa,ea;null==
F&&(F=this.imgData);if(0===F.length)return new Uint8Array(0);F=new K.Zlib(F);F=F.getBytes();var fa=this.pixelBitlength/8;var P=fa*this.width;var Y=new Uint8Array(P*this.height);var ha=F.length;for(Q=X=Z=0;X<ha;){switch(F[X++]){case 0:for(S=M=0;M<P;S=M+=1)Y[Q++]=F[X++];break;case 1:for(S=ca=0;ca<P;S=ca+=1){M=F[X++];var da=S<fa?0:Y[Q-fa];Y[Q++]=(M+da)%256}break;case 2:for(S=da=0;da<P;S=da+=1){M=F[X++];var ja=(S-S%fa)/fa;ca=Z&&Y[(Z-1)*P+ja*fa+S%fa];Y[Q++]=(ca+M)%256}break;case 3:for(S=ea=0;ea<P;S=ea+=
1)M=F[X++],ja=(S-S%fa)/fa,da=S<fa?0:Y[Q-fa],ca=Z&&Y[(Z-1)*P+ja*fa+S%fa],Y[Q++]=(M+Math.floor((da+ca)/2))%256;break;case 4:for(S=ea=0;ea<P;S=ea+=1){M=F[X++];ja=(S-S%fa)/fa;da=S<fa?0:Y[Q-fa];0===Z?ca=aa=0:(ca=Y[(Z-1)*P+ja*fa+S%fa],aa=ja&&Y[(Z-1)*P+(ja-1)*fa+S%fa]);var ka=da+ca-aa;S=Math.abs(ka-da);ja=Math.abs(ka-ca);ka=Math.abs(ka-aa);da=S<=ja&&S<=ka?da:ja<=ka?ca:aa;Y[Q++]=(M+da)%256}break;default:throw Error("Invalid filter algorithm: "+F[X-1]);}Z++}return Y};E.prototype.decodePalette=function(){var F,
M,Q,S,X;var Z=this.palette;var ca=this.transparency.indexed||[];var aa=new Uint8Array((ca.length||0)+Z.length);var ea=Q=F=M=0;for(S=Z.length;Q<S;ea=Q+=3)aa[M++]=Z[ea],aa[M++]=Z[ea+1],aa[M++]=Z[ea+2],aa[M++]=null!=(X=ca[F++])?X:255;return aa};E.prototype.copyToImageData=function(F,M){var Q,S;var X=this.colors;var Z=null;var ca=this.hasAlphaChannel;this.palette.length&&(Z=null!=(Q=this._decodedPalette)?Q:this._decodedPalette=this.decodePalette(),X=4,ca=!0);F=F.data||F;var aa=F.length;var ea=Z||M;Q=
S=0;if(1===X)for(;Q<aa;)X=Z?4*M[Q/4]:S,S=ea[X++],F[Q++]=S,F[Q++]=S,F[Q++]=S,F[Q++]=ca?ea[X++]:this.transparency.grayscale&&this.transparency.grayscale===S?0:255,S=X;else for(;Q<aa;)X=Z?4*M[Q/4]:S,F[Q++]=ea[X++],F[Q++]=ea[X++],F[Q++]=ea[X++],F[Q++]=ca?ea[X++]:this.transparency.rgb&&this.transparency.rgb[1]===ea[X-3]&&this.transparency.rgb[3]===ea[X-2]&&this.transparency.rgb[5]===ea[X-1]?0:255,S=X};E.prototype.decode=function(){var F=new Uint8Array(this.width*this.height*4);this.copyToImageData(F,this.decodePixels());
return F};var U=(N=p.document&&p.document.createElement("canvas"))&&N.getContext("2d");var D=function(F){U.width=F.width;U.height=F.height;U.clearRect(0,0,F.width,F.height);U.putImageData(F,0,0);F=new Image;F.src=N.toDataURL();return F};E.prototype.decodeFrames=function(F){var M,Q;if(this.animation){var S=this.animation.frames;var X=[];var Z=M=0;for(Q=S.length;M<Q;Z=++M){Z=S[Z];var ca=F.createImageData(Z.width,Z.height);var aa=this.decodePixels(new Uint8Array(Z.data));this.copyToImageData(ca,aa);
Z.imageData=ca;X.push(Z.image=D(ca))}return X}};E.prototype.renderFrame=function(F,M){var Q=this.animation.frames;var S=Q[M];Q=Q[M-1];0===M&&F.clearRect(0,0,this.width,this.height);1===(null!=Q?Q.disposeOp:void 0)?F.clearRect(Q.xOffset,Q.yOffset,Q.width,Q.height):2===(null!=Q?Q.disposeOp:void 0)&&F.putImageData(Q.imageData,Q.xOffset,Q.yOffset);0===S.blendOp&&F.clearRect(S.xOffset,S.yOffset,S.width,S.height);return F.drawImage(S.image,S.xOffset,S.yOffset)};E.prototype.animate=function(F){var M,Q=this;
var S=0;var X=this.animation;var Z=X.numFrames;var ca=X.frames;var aa=X.numPlays;return(M=function(){var ea=S++%Z;var fa=ca[ea];Q.renderFrame(F,ea);if(1<Z&&S/Z<aa)return Q.animation._timeout=setTimeout(M,fa.delay)})()};E.prototype.stopAnimation=function(){var F;return clearTimeout(null!=(F=this.animation)?F._timeout:void 0)};E.prototype.render=function(F){F._png&&F._png.stopAnimation();F._png=this;F.width=this.width;F.height=this.height;F=F.getContext("2d");if(this.animation)return this.decodeFrames(F),
this.animate(F);var M=F.createImageData(this.width,this.height);this.copyToImageData(M,this.decodePixels());return F.putImageData(M,0,0)};return E}(self);const y=new Set(["jpg","png","bmp","gif"]),C=new Set("S8 U8 S16 U16 S32 U32 F32 F64".split(" "));R.decode=function(p){return w.apply(this,arguments)};R.getFormat=function(p){p=e(p);"lerc2"===p?p="lerc":"error"===p&&(p="");return p};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../core/Error",
"../../../core/promiseUtils","../../../chunks/Zlib"],function(R,z,r){return function(){function G(m){m&&(this.canvas=m.canvas,this.ctx=m.ctx||m.canvas&&m.canvas.getContext("2d"))}G.prototype.decode=function(m,T,O){if(!m||10>m.byteLength)throw new R("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:W,height:K,format:L}=T;const {applyJpegMask:q}=T;if(q&&(!W||!K))throw new R("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");
return new Promise((d,t)=>{let B=null;"jpg"===L&&q&&(B=G._getMask(m,{width:W,height:K}));const x=new Blob([new Uint8Array(m)],{type:"jpg"==="image/"+L?"jpeg":L}),A=URL.createObjectURL(x),a=new Image;let k;a.src=A;a.onload=()=>{URL.revokeObjectURL(A);if(z.isAborted(O))t(z.createAbortError());else{W=a.width;K=a.height;if(this.canvas){if(this.canvas.width!==W||this.canvas.height!==K)this.canvas.width=W,this.canvas.height=K;this.ctx.clearRect(0,0,W,K)}else this.canvas=document.createElement("canvas"),
this.canvas.width=W,this.canvas.height=K,this.ctx=this.canvas.getContext("2d");this.ctx.drawImage(a,0,0);var f=this.ctx.getImageData(0,0,W,K);k=f.data;var g;if(T.renderOnCanvas){if(B)for(g=0;g<B.length;g++)k[4*g+3]=B[g]?255:0;this.ctx.putImageData(f,0,0);d(null)}else{f=W*K;var u=new Uint8Array(f),h=new Uint8Array(f),l=new Uint8Array(f);if(B)for(g=0;g<f;g++)u[g]=k[4*g],h[g]=k[4*g+1],l[g]=k[4*g+2];else for(B=new Uint8Array(f),g=0;g<f;g++)u[g]=k[4*g],h[g]=k[4*g+1],l[g]=k[4*g+2],B[g]=k[4*g+3];d({width:W,
height:K,pixels:[u,h,l],mask:B,pixelType:"u8"})}}};a.onerror=()=>{URL.revokeObjectURL(A);t("cannot load image")}})};G._getMask=function(m,T){let O=null;try{var W=new Uint8Array(m);m=0;var K=W.length-2;for(m=Math.ceil(W.length/2);m<K&&(255!==W[m]||217!==W[m+1]);m++);m+=2;if(m<W.length-1){const L=(new r.Zlib(W.subarray(m))).getBytes();O=new Uint8Array(T.width*T.height);T=0;for(W=0;W<L.length;W++)for(K=7;0<=K;K--)O[T++]=L[W]>>K&1}}catch(L){}return O};return G}()})},"esri/chunks/Zlib":function(){define(["exports"],
function(R){var z={exports:{}};(function(r){(function(G){G=G();void 0!==G&&(r.exports=G)})(function(){var G=function(){function m(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}m.prototype={ensureBuffer:function(T){var O=this.buffer,W=O?O.byteLength:0;if(T<W)return O;for(var K=512;K<T;)K<<=1;T=new Uint8Array(K);for(K=0;K<W;++K)T[K]=O[K];return this.buffer=T},getByte:function(){for(var T=this.pos;this.bufferLength<=T;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},
getBytes:function(T){var O=this.pos;if(T){this.ensureBuffer(O+T);for(T=O+T;!this.eof&&this.bufferLength<T;)this.readBlock();var W=this.bufferLength;T>W&&(T=W)}else{for(;!this.eof;)this.readBlock();T=this.bufferLength}this.pos=T;return this.buffer.subarray(O,T)},lookChar:function(){for(var T=this.pos;this.bufferLength<=T;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var T=this.pos;this.bufferLength<=T;){if(this.eof)return null;
this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(T,O,W){for(var K=T+O;this.bufferLength<=K&&!this.eof;)this.readBlock();return new Stream(this.buffer,T,O,W)},skip:function(T){T||(T=1);this.pos+=T},reset:function(){this.pos=0}};return m}();return function(){function m(d){throw Error(d);}function T(d){var t=0,B=d[t++],x=d[t++];-1!=B&&-1!=x||m("Invalid header in flate stream");8!=(B&15)&&m("Unknown compression method in flate stream");0!=((B<<8)+x)%31&&m("Bad FCHECK in flate stream");
x&32&&m("FDICT bit set in flate stream");this.bytes=d;this.bytesPos=t;this.codeBuf=this.codeSize=0;G.call(this)}if(!self||!self.Uint32Array)return null;var O=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),W=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),K=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,
393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),L=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,
524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,
524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,
524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,
524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,
524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,
524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,
524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],q=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];T.prototype=Object.create(G.prototype);T.prototype.getBits=function(d){for(var t=
this.codeSize,B=this.codeBuf,x=this.bytes,A=this.bytesPos,a;t<d;)"undefined"==typeof(a=x[A++])&&m("Bad encoding in flate stream"),B|=a<<t,t+=8;this.codeBuf=B>>d;this.codeSize=t-=d;this.bytesPos=A;return B&(1<<d)-1};T.prototype.getCode=function(d){var t=d[0],B=d[1];d=this.codeSize;for(var x=this.codeBuf,A=this.bytes,a=this.bytesPos;d<B;){var k;"undefined"==typeof(k=A[a++])&&m("Bad encoding in flate stream");x|=k<<d;d+=8}B=t[x&(1<<B)-1];t=B>>16;B&=65535;(0==d||d<t||0==t)&&m("Bad encoding in flate stream");
this.codeBuf=x>>t;this.codeSize=d-t;this.bytesPos=a;return B};T.prototype.generateHuffmanTable=function(d){for(var t=d.length,B=0,x=0;x<t;++x)d[x]>B&&(B=d[x]);for(var A=1<<B,a=new Uint32Array(A),k=1,f=0,g=2;k<=B;++k,f<<=1,g<<=1)for(var u=0;u<t;++u)if(d[u]==k){var h=0,l=f;for(x=0;x<k;++x)h=h<<1|l&1,l>>=1;for(x=h;x<A;x+=g)a[x]=k<<16|u;++f}return[a,B]};T.prototype.readBlock=function(){function d(h,l,b,c,e){for(h=h.getBits(b)+c;0<h--;)l[f++]=e}var t=this.getBits(3);t&1&&(this.eof=!0);t>>=1;if(0==t){var B=
this.bytes,x=this.bytesPos,A;"undefined"==typeof(A=B[x++])&&m("Bad block header in flate stream");var a=A;"undefined"==typeof(A=B[x++])&&m("Bad block header in flate stream");a|=A<<8;"undefined"==typeof(A=B[x++])&&m("Bad block header in flate stream");t=A;"undefined"==typeof(A=B[x++])&&m("Bad block header in flate stream");(t|A<<8)!=(~a&65535)&&m("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;A=this.bufferLength;t=this.ensureBuffer(A+a);this.bufferLength=a=A+a;for(var k=
A;k<a;++k){if("undefined"==typeof(A=B[x++])){this.eof=!0;break}t[k]=A}this.bytesPos=x}else{if(1==t)x=L,A=q;else if(2==t){t=this.getBits(5)+257;A=this.getBits(5)+1;B=this.getBits(4)+4;x=Array(O.length);for(var f=0;f<B;)x[O[f++]]=this.getBits(3);x=this.generateHuffmanTable(x);f=B=0;A=t+A;for(a=Array(A);f<A;)k=this.getCode(x),16==k?d(this,a,2,3,B):17==k?d(this,a,3,3,B=0):18==k?d(this,a,7,11,B=0):a[f++]=B=k;x=this.generateHuffmanTable(a.slice(0,t));A=this.generateHuffmanTable(a.slice(t,A))}else m("Unknown block type in flate stream");
a=(t=this.buffer)?t.length:0;for(k=this.bufferLength;;){var g=this.getCode(x);if(256>g)k+1>=a&&(t=this.ensureBuffer(k+1),a=t.length),t[k++]=g;else{if(256==g){this.bufferLength=k;break}g-=257;g=W[g];var u=g>>16;0<u&&(u=this.getBits(u));B=(g&65535)+u;g=this.getCode(A);g=K[g];u=g>>16;0<u&&(u=this.getBits(u));g=(g&65535)+u;k+B>=a&&(t=this.ensureBuffer(k+B),a=t.length);for(u=0;u<B;++u,++k)t[k]=t[k-g]}}}};return T}()})})(z);R.Zlib=z.exports})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/Jpg",
"../../../chunks/Zlib"],function(R,z){return function(){function r(){}r.decode=function(G){var m=new Uint8Array(G);G=new R.JpegImage;G.parse(m);const {width:T,height:O,numComponents:W,eof:K}=G;G=G.getData(T,O,!0);let L;const q=T*O;let d=0;var t=0,B=0;if(K<m.length-1)for(m=(new z.Zlib(m.subarray(K))).getBytes(),L=new Uint8Array(q),d=t=0;d<m.length;d++)for(B=7;0<=B;B--)L[t++]=m[d]>>B&1;m=null;if(1===W)m=[G,G,G];else{m=[];for(d=0;3>d;d++)B=new Uint8Array(q),m.push(B);for(t=B=0;t<q;t++)for(d=0;3>d;d++)m[d][t]=
G[B++]}return{width:T,height:O,pixels:m,mask:L}};return r}()})},"esri/chunks/Jpg":function(){define(["exports"],function(R){var z={exports:{}};(function(r){(function(G){G=G();void 0!==G&&(r.exports=G)})(function(){var G=function(){function m(T){this.message="JPEG error: "+T}m.prototype=Error();m.prototype.name="JpegError";return m.constructor=m}();return function(){function m(){this.decodeTransform=null;this.colorTransform=-1}function T(q,d){for(var t=0,B=[],x,A,a=16;0<a&&!q[a-1];)a--;B.push({children:[],
index:0});var k=B[0],f;for(x=0;x<a;x++){for(A=0;A<q[x];A++){k=B.pop();for(k.children[k.index]=d[t];0<k.index;)k=B.pop();k.index++;for(B.push(k);B.length<=x;)B.push(f={children:[],index:0}),k.children[k.index]=f.children,k=f;t++}x+1<a&&(B.push(f={children:[],index:0}),k.children[k.index]=f.children,k=f)}return B[0].children}function O(q,d,t,B,x,A,a,k,f){function g(){if(0<C)return C--,y>>C&1;y=q[d++];if(255===y){var ea=q[d++];if(ea)throw new G("unexpected marker "+(y<<8|ea).toString(16));}C=7;return y>>>
7}function u(ea){for(;;){ea=ea[g()];if("number"===typeof ea)return ea;if("object"!==typeof ea)throw new G("invalid huffman sequence");}}function h(ea){for(var fa=0;0<ea;)fa=fa<<1|g(),ea--;return fa}function l(ea){if(1===ea)return 1===g()?1:-1;var fa=h(ea);return fa>=1<<ea-1?fa:fa+(-1<<ea)+1}function b(ea,fa){var P=u(ea.huffmanTableDC);P=0===P?0:l(P);ea.blockData[fa]=ea.pred+=P;for(P=1;64>P;){var Y=u(ea.huffmanTableAC),ha=Y&15;Y>>=4;if(0===ha){if(15>Y)break;P+=16}else P+=Y,ea.blockData[fa+L[P]]=l(ha),
P++}}function c(ea,fa){var P=u(ea.huffmanTableDC);P=0===P?0:l(P)<<f;ea.blockData[fa]=ea.pred+=P}function e(ea,fa){ea.blockData[fa]|=g()<<f}function n(ea,fa){if(0<p)p--;else for(var P=A;P<=a;){var Y=u(ea.huffmanTableAC),ha=Y&15;Y>>=4;if(0===ha){if(15>Y){p=h(Y)+(1<<Y)-1;break}P+=16}else P+=Y,ea.blockData[fa+L[P]]=l(ha)*(1<<f),P++}}function v(ea,fa){for(var P=A,Y=0,ha;P<=a;){ha=L[P];switch(E){case 0:Y=u(ea.huffmanTableAC);ha=Y&15;Y>>=4;if(0===ha)15>Y?(p=h(Y)+(1<<Y),E=4):(Y=16,E=1);else{if(1!==ha)throw new G("invalid ACn encoding");
N=l(ha);E=Y?2:3}continue;case 1:case 2:ea.blockData[fa+ha]?ea.blockData[fa+ha]+=g()<<f:(Y--,0===Y&&(E=2===E?3:0));break;case 3:ea.blockData[fa+ha]?ea.blockData[fa+ha]+=g()<<f:(ea.blockData[fa+ha]=N<<f,E=0);break;case 4:ea.blockData[fa+ha]&&(ea.blockData[fa+ha]+=g()<<f)}P++}4===E&&(p--,0===p&&(E=0))}var w=t.mcusPerLine,J=d,y=0,C=0,p=0,E=0,N,U=B.length,D,F,M,Q;k=t.progressive?0===A?0===k?c:e:0===k?n:v:b;var S=0;t=1===U?B[0].blocksPerLine*B[0].blocksPerColumn:w*t.mcusPerColumn;for(var X,Z;S<t;){var ca=
x?Math.min(t-S,x):t;for(D=0;D<U;D++)B[D].pred=0;p=0;if(1===U){var aa=B[0];for(Q=0;Q<ca;Q++)k(aa,64*((aa.blocksPerLine+1)*(S/aa.blocksPerLine|0)+S%aa.blocksPerLine)),S++}else for(Q=0;Q<ca;Q++){for(D=0;D<U;D++)for(aa=B[D],X=aa.h,Z=aa.v,F=0;F<Z;F++)for(M=0;M<X;M++)k(aa,64*((aa.blocksPerLine+1)*((S/w|0)*aa.v+F)+(S%w*aa.h+M)));S++}C=0;(aa=K(q,d))&&aa.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+aa.invalid),d=aa.offset);aa=aa&&aa.marker;if(!aa||65280>=aa)throw new G("marker was not found");
if(65488<=aa&&65495>=aa)d+=2;else break}(aa=K(q,d))&&aa.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+aa.invalid),d=aa.offset);return d-J}function W(q,d){q=d.blocksPerLine;for(var t=d.blocksPerColumn,B=new Int16Array(64),x=0;x<t;x++)for(var A=0;A<q;A++){var a=void 0,k=void 0,f=void 0,g=void 0,u=void 0,h=void 0,l=void 0,b=void 0,c=u=h=g=k=a=void 0,e=void 0,n=void 0,v=void 0,w=64*((d.blocksPerLine+1)*x+A),J=B,y=d.quantizationTable,C=d.blockData;if(!y)throw new G("missing required Quantization Table.");
for(var p=0;64>p;p+=8)a=C[w+p],b=C[w+p+1],l=C[w+p+2],h=C[w+p+3],u=C[w+p+4],g=C[w+p+5],f=C[w+p+6],k=C[w+p+7],a*=y[p],0===(b|l|h|u|g|f|k)?(a=5793*a+512>>10,J[p]=a,J[p+1]=a,J[p+2]=a,J[p+3]=a,J[p+4]=a,J[p+5]=a,J[p+6]=a,J[p+7]=a):(b*=y[p+1],l*=y[p+2],h*=y[p+3],u*=y[p+4],g*=y[p+5],f*=y[p+6],k*=y[p+7],v=5793*a+128>>8,n=5793*u+128>>8,e=l,c=f,u=2896*(b-k)+128>>8,k=2896*(b+k)+128>>8,h<<=4,g<<=4,v=v+n+1>>1,n=v-n,a=3784*e+1567*c+128>>8,e=1567*e-3784*c+128>>8,c=a,u=u+g+1>>1,g=u-g,k=k+h+1>>1,h=k-h,v=v+c+1>>1,c=
v-c,n=n+e+1>>1,e=n-e,a=2276*u+3406*k+2048>>12,u=3406*u-2276*k+2048>>12,k=a,a=799*h+4017*g+2048>>12,h=4017*h-799*g+2048>>12,g=a,J[p]=v+k,J[p+7]=v-k,J[p+1]=n+g,J[p+6]=n-g,J[p+2]=e+h,J[p+5]=e-h,J[p+3]=c+u,J[p+4]=c-u);for(y=0;8>y;++y)a=J[y],b=J[y+8],l=J[y+16],h=J[y+24],u=J[y+32],g=J[y+40],f=J[y+48],k=J[y+56],0===(b|l|h|u|g|f|k)?(a=5793*a+8192>>14,a=-2040>a?0:2024<=a?255:a+2056>>4,C[w+y]=a,C[w+y+8]=a,C[w+y+16]=a,C[w+y+24]=a,C[w+y+32]=a,C[w+y+40]=a,C[w+y+48]=a,C[w+y+56]=a):(v=5793*a+2048>>12,n=5793*u+2048>>
12,e=l,c=f,u=2896*(b-k)+2048>>12,k=2896*(b+k)+2048>>12,v=(v+n+1>>1)+4112,n=v-n,a=3784*e+1567*c+2048>>12,e=1567*e-3784*c+2048>>12,c=a,u=u+g+1>>1,g=u-g,k=k+h+1>>1,h=k-h,v=v+c+1>>1,c=v-c,n=n+e+1>>1,e=n-e,a=2276*u+3406*k+2048>>12,u=3406*u-2276*k+2048>>12,k=a,a=799*h+4017*g+2048>>12,h=4017*h-799*g+2048>>12,g=a,a=v+k,k=v-k,b=n+g,f=n-g,l=e+h,g=e-h,h=c+u,u=c-u,a=16>a?0:4080<=a?255:a>>4,b=16>b?0:4080<=b?255:b>>4,l=16>l?0:4080<=l?255:l>>4,h=16>h?0:4080<=h?255:h>>4,u=16>u?0:4080<=u?255:u>>4,g=16>g?0:4080<=g?
255:g>>4,f=16>f?0:4080<=f?255:f>>4,k=16>k?0:4080<=k?255:k>>4,C[w+y]=a,C[w+y+8]=b,C[w+y+16]=l,C[w+y+24]=h,C[w+y+32]=u,C[w+y+40]=g,C[w+y+48]=f,C[w+y+56]=k)}return d.blockData}function K(q,d,t){var B=q.length-1;t=t<d?t:d;if(d>=B)return null;var x=q[d]<<8|q[d+1];if(65472<=x&&65534>=x)return{invalid:null,marker:x,offset:d};for(d=q[t]<<8|q[t+1];!(65472<=d&&65534>=d);){if(++t>=B)return null;d=q[t]<<8|q[t+1]}return{invalid:x.toString(16),marker:d,offset:t}}if(!self||!self.Uint8ClampedArray)return null;var L=
new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);m.prototype={parse:function(q){function d(){var y=q[x]<<8|q[x+1];x+=2;return y}function t(){var y=d();y=x+y-2;var C=K(q,y,x);C&&C.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+C.invalid),y=C.offset);y=q.subarray(x,y);x+=y.length;return y}function B(y){for(var C=Math.ceil(y.samplesPerLine/
8/y.maxH),p=Math.ceil(y.scanLines/8/y.maxV),E=0;E<y.components.length;E++){J=y.components[E];var N=Math.ceil(Math.ceil(y.samplesPerLine/8)*J.h/y.maxH),U=Math.ceil(Math.ceil(y.scanLines/8)*J.v/y.maxV);J.blockData=new Int16Array(64*p*J.v*(C*J.h+1));J.blocksPerLine=N;J.blocksPerColumn=U}y.mcusPerLine=C;y.mcusPerColumn=p}var x=0,A=null,a=null,k=[],f=[],g=[],u=d();if(65496!==u)throw new G("SOI not found");for(u=d();65497!==u;){switch(u){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var h=
t();65504===u&&74===h[0]&&70===h[1]&&73===h[2]&&70===h[3]&&0===h[4]&&(A={version:{major:h[5],minor:h[6]},densityUnits:h[7],xDensity:h[8]<<8|h[9],yDensity:h[10]<<8|h[11],thumbWidth:h[12],thumbHeight:h[13],thumbData:h.subarray(14,14+3*h[12]*h[13])});65518===u&&65===h[0]&&100===h[1]&&111===h[2]&&98===h[3]&&101===h[4]&&(a={version:h[5]<<8|h[6],flags0:h[7]<<8|h[8],flags1:h[9]<<8|h[10],transformCode:h[11]});break;case 65499:u=d()+x-2;for(var l;x<u;){var b=q[x++],c=new Uint16Array(64);if(0===b>>4)for(h=
0;64>h;h++)l=L[h],c[l]=q[x++];else if(1===b>>4)for(h=0;64>h;h++)l=L[h],c[l]=d();else throw new G("DQT - invalid table spec");k[b&15]=c}break;case 65472:case 65473:case 65474:if(e)throw new G("Only single frame JPEGs supported");d();var e={};e.extended=65473===u;e.progressive=65474===u;e.precision=q[x++];e.scanLines=d();e.samplesPerLine=d();e.components=[];e.componentIds={};h=q[x++];for(u=c=b=0;u<h;u++){l=q[x];var n=q[x+1]>>4;var v=q[x+1]&15;b<n&&(b=n);c<v&&(c=v);n=e.components.push({h:n,v,quantizationId:q[x+
2],quantizationTable:null});e.componentIds[l]=n-1;x+=3}e.maxH=b;e.maxV=c;B(e);break;case 65476:l=d();for(u=2;u<l;){b=q[x++];c=new Uint8Array(16);for(h=n=0;16>h;h++,x++)n+=c[h]=q[x];v=new Uint8Array(n);for(h=0;h<n;h++,x++)v[h]=q[x];u+=17+n;(0===b>>4?g:f)[b&15]=T(c,v)}break;case 65501:d();var w=d();break;case 65498:d();l=q[x++];h=[];for(u=0;u<l;u++){b=e.componentIds[q[x++]];var J=e.components[b];b=q[x++];J.huffmanTableDC=g[b>>4];J.huffmanTableAC=f[b&15];h.push(J)}u=q[x++];l=q[x++];b=q[x++];u=O(q,x,
e,h,w,u,l,b>>4,b&15);x+=u;break;case 65535:255!==q[x]&&x--;break;default:if(255===q[x-3]&&192<=q[x-2]&&254>=q[x-2])x-=3;else throw new G("unknown marker "+u.toString(16));}u=d()}this.width=e.samplesPerLine;this.height=e.scanLines;this.jfif=A;this.eof=x;this.adobe=a;this.components=[];for(u=0;u<e.components.length;u++){J=e.components[u];if(A=k[J.quantizationId])J.quantizationTable=A;this.components.push({output:W(e,J),scaleX:J.h/e.maxH,scaleY:J.v/e.maxV,blocksPerLine:J.blocksPerLine,blocksPerColumn:J.blocksPerColumn})}this.numComponents=
this.components.length},_getLinearizedBlockData:function(q,d){var t=this.width/q,B=this.height/d,x,A,a=0,k=this.components.length,f=q*d*k,g=new Uint8ClampedArray(f),u=new Uint32Array(q);for(A=0;A<k;A++){var h=this.components[A];var l=h.scaleX*t;var b=h.scaleY*B;a=A;var c=h.output;var e=h.blocksPerLine+1<<3;for(x=0;x<q;x++)h=0|x*l,u[x]=(h&4294967288)<<3|h&7;for(l=0;l<d;l++)for(h=0|l*b,h=e*(h&4294967288)|(h&7)<<3,x=0;x<q;x++)g[a]=c[h+u[x]],a+=k}if(d=this.decodeTransform)for(A=0;A<f;)for(q=h=0;h<k;h++,
A++,q+=2)g[A]=(g[A]*d[q]>>8)+d[q+1];return g},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(q){for(var d,t,B,x=0,A=q.length;x<A;x+=3)d=q[x],t=q[x+1],B=q[x+2],q[x]=d-179.456+1.402*B,q[x+1]=d+135.459-.344*t-.714*B,q[x+2]=d-226.816+1.772*t;return q},_convertYcckToRgb:function(q){for(var d,t,B,x,A=0,a=0,k=q.length;a<k;a+=4)d=q[a],t=q[a+1],B=q[a+2],x=q[a+3],q[A++]=
-122.67195406894+t*(-6.60635669420364E-5*t+4.37130475926232E-4*B-5.4080610064599E-5*d+4.8449797120281E-4*x-.154362151871126)+B*(-9.57964378445773E-4*B+8.17076911346625E-4*d-.00477271405408747*x+1.53380253221734)+d*(9.61250184130688E-4*d-.00266257332283933*x+.48357088451265)+x*(-3.36197177618394E-4*x+.484791561490776),q[A++]=107.268039397724+t*(2.19927104525741E-5*t-6.40992018297945E-4*B+6.59397001245577E-4*d+4.26105652938837E-4*x-.176491792462875)+B*(-7.78269941513683E-4*B+.00130872261408275*d+7.70482631801132E-4*
x-.151051492775562)+d*(.00126935368114843*d-.00265090189010898*x+.25802910206845)+x*(-3.18913117588328E-4*x-.213742400323665),q[A++]=-20.810012546947+t*(-5.70115196973677E-4*t-2.63409051004589E-5*B+.0020741088115012*d-.00288260236853442*x+.814272968359295)+B*(-1.53496057440975E-5*B-1.32689043961446E-4*d+5.60833691242812E-4*x-.195152027534049)+d*(.00174418132927582*d-.00255243321439347*x+.116935020465145)+x*(-3.43531996510555E-4*x+.24165260232407);return q},_convertYcckToCmyk:function(q){for(var d,
t,B,x=0,A=q.length;x<A;x+=4)d=q[x],t=q[x+1],B=q[x+2],q[x]=434.456-d-1.402*B,q[x+1]=119.541-d+.344*t+.714*B,q[x+2]=481.816-d-1.772*t;return q},_convertCmykToRgb:function(q){for(var d,t,B,x,A=0,a=1/255,k=0,f=q.length;k<f;k+=4)d=q[k]*a,t=q[k+1]*a,B=q[k+2]*a,x=q[k+3]*a,q[A++]=255+d*(-4.387332384609988*d+54.48615194189176*t+18.82290502165302*B+212.25662451639585*x-285.2331026137004)+t*(1.7149763477362134*t-5.6096736904047315*B-17.873870861415444*x-5.497006427196366)+B*(-2.5217340131683033*B-21.248923337353073*
x+17.5119270841813)-x*(21.86122147463605*x+189.48180835922747),q[A++]=255+d*(8.841041422036149*d+60.118027045597366*t+6.871425592049007*B+31.159100130055922*x-79.2970844816548)+t*(-15.310361306967817*t+17.575251261109482*B+131.35250912493976*x-190.9453302588951)+B*(4.444339102852739*B+9.8632861493405*x-24.86741582555878)-x*(20.737325471181034*x+187.80453709719578),q[A++]=255+d*(.8842522430003296*d+8.078677503112928*t+30.89978309703729*B-.23883238689178934*x-14.183576799673286)+t*(10.49593273432072*
t+63.02378494754052*B+50.606957656360734*x-112.23884253719248)+B*(.03296041114873217*B+115.60384449646641*x-193.58209356861505)-x*(22.33816807309886*x+180.12613974708367);return q},getData:function(q,d,t){if(4<this.numComponents)throw new G("Unsupported color mode");q=this._getLinearizedBlockData(q,d);if(1===this.numComponents&&t){t=q.length;d=new Uint8ClampedArray(3*t);for(var B=0,x=0;x<t;x++){var A=q[x];d[B++]=A;d[B++]=A;d[B++]=A}return d}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(q);
if(4===this.numComponents){if(this._isColorConversionNeeded())return t?this._convertYcckToRgb(q):this._convertYcckToCmyk(q);if(t)return this._convertCmykToRgb(q)}return q}};return m}()})})(z);R.JpegImage=z.exports})},"esri/layers/support/rasterFormats/Lerc":function(){define(["require","exports","../../../assets"],function(R,z,r){function G(K){const {_malloc:L,_free:q,_lerc_getBlobInfo:d,_lerc_getDataRanges:t,_lerc_decode_4D:B,asm:x}=K;let A;const a=Object.values(x).find(f=>f&&"buffer"in f&&f.buffer===
K.HEAPU8.buffer),k=f=>{f=f.map(h=>(h>>3<<3)+16);var g=f.reduce((h,l)=>h+l),u=L(g);A=new Uint8Array(a.buffer);g=f[0];f[0]=u;for(u=1;u<f.length;u++){const h=f[u];f[u]=f[u-1]+g;g=h}return f};W.getBlobInfo=f=>{var g=new Uint8Array(48),u=new Uint8Array(24);const [h,l,b]=k([f.length,g.length,u.length]);A.set(f,h);A.set(g,l);A.set(u,b);var c=d(h,f.length,l,b,12,3);if(c)throw q(h),`lerc-getBlobInfo: error code is ${c}`;A=new Uint8Array(a.buffer);g.set(A.slice(l,l+g.length));u.set(A.slice(b,b+u.length));g=
new Uint32Array(g.buffer);var e=new Float64Array(u.buffer);const [n,v,w,J,y,C,p,E,N,,U]=g;u={version:n,dimCount:w,width:J,height:y,validPixelCount:p,bandCount:C,blobSize:E,maskCount:N,dataType:v,minValue:e[0],maxValue:e[1],maxZerror:e[2],statistics:[],bandCountWithNoData:U};if(U)return u;if(1===w&&1===C)return q(h),u.statistics.push({minValue:e[0],maxValue:e[1]}),u;var D=w*C*8,F=new Uint8Array(D),M=new Uint8Array(D);g=h;e=0;let Q=!1;A.byteLength<h+2*D?(q(h),Q=!0,[g,e,S]=k([f.length,D,D]),A.set(f,
g)):[e,S]=k([D,D]);A.set(F,e);A.set(M,S);if(c=t(h,f.length,w,C,e,S))throw q(g),Q||q(e),`lerc-getDataRanges: error code is ${c}`;A=new Uint8Array(a.buffer);F.set(A.slice(e,e+D));M.set(A.slice(S,S+D));f=new Float64Array(F.buffer);c=new Float64Array(M.buffer);M=u.statistics;for(D=0;D<C;D++)if(1<w){F=f.slice(D*w,(D+1)*w);var S=c.slice(D*w,(D+1)*w);const X=Math.min.apply(null,F),Z=Math.max.apply(null,S);M.push({minValue:X,maxValue:Z,dimStats:{minValues:F,maxValues:S}})}else M.push({minValue:f[D],maxValue:c[D]});
q(g);Q||q(e);return u};W.decode=(f,g)=>{const {maskCount:u,dimCount:h,bandCount:l,width:b,height:c,dataType:e,bandCountWithNoData:n}=g;var v=m[e],w=b*c;g=new Uint8Array(w*l);const J=w*h*l*v.size;v=new Uint8Array(J);const y=new Uint8Array(l),C=8*l,p=new Uint8Array(C),[E,N,U,D,F]=k([f.length,g.length,v.length,y.length,p.length]);A.set(f,E);A.set(g,N);A.set(v,U);A.set(y,D);A.set(p,F);if(f=B(E,f.length,u,N,h,b,c,l,e,U,D,F))throw q(E),`lerc-decode: error code is ${f}`;A=new Uint8Array(a.buffer);v.set(A.slice(U,
U+J));g.set(A.slice(N,N+w));f=null;if(n)for(y.set(A.slice(D,D+l)),p.set(A.slice(F,F+C)),f=[],w=0;w<y.length;w++)f.push(y[w]?p[w]:null);q(E);return{data:v,maskData:g,noDataValues:f}}}const m=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,128]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",
size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-3.4027999387901484E38,3.4027999387901484E38]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-1.7976931348623157E308,1.7976931348623157E308]}];let T=null,O=!1;const W={getBlobInfo:null,decode:null};z.decode=function(K,L={}){var q,d=null!=(q=L.inputOffset)?q:0;q=K instanceof Uint8Array?K.subarray(d):new Uint8Array(K,d);K=W.getBlobInfo(q);const {data:t,maskData:B}=W.decode(q,K),{width:x,height:A,bandCount:a,
dimCount:k,dataType:f,maskCount:g,statistics:u}=K;q=m[f];var h=new q.ctor(t.buffer);d=[];const l=[],b=x*A;var c=b*k;for(var e=0;e<a;e++){var n=h.subarray(e*c,(e+1)*c);if(L.returnPixelInterleavedDims)d.push(n);else{a:{var v=b,w=k;if(2>w)break a;const J=new q.ctor(v*w);for(let y=0,C=0;y<v;y++)for(let p=0,E=y;p<w;p++,E+=v)J[E]=n[C++];n=J}d.push(n)}l.push(B.subarray(e*c,(e+1)*c))}h=0===g?null:1===g?l[0]:new Uint8Array(b);if(1<g)for(h.set(l[0]),c=1;c<l.length;c++)for(e=l[c],n=0;n<b;n++)h[n]&=e[n];({noDataValue:c}=
L);c=null!=c&&q.range[0]<=c&&q.range[1]>=c;if(0<g&&c)for({noDataValue:c}=L,e=0;e<a;e++)for(n=d[e],v=l[e]||h,w=0;w<b;w++)0===v[w]&&(n[w]=c);return{width:x,height:A,bandCount:a,pixelType:L.pixelType&&0===K.version?L.pixelType:q.pixelType,dimCount:k,statistics:u,pixels:d,mask:h,bandMasks:g===a&&1<a?l:null}};z.getBlobInfo=function(K,L={}){var q,d;K=K instanceof Uint8Array?K.subarray(null!=(q=L.inputOffset)?q:0):new Uint8Array(K,null!=(d=L.inputOffset)?d:0);return W.getBlobInfo(K)};z.isLoaded=function(){return O};
z.load=function(){return T?T:T=(new Promise((K,L)=>R(["../../../chunks/lerc-wasm"],K,L))).then(K=>K.lercWasm).then(({default:K})=>K({locateFile:L=>r.getAssetUrl(`esri/layers/support/rasterFormats/${L}`)})).then(K=>{G(K);O=!0})};Object.defineProperty(z,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(R){function z(T,O,W,K=!0){if(0!==O%4||0!==W%4){var L=new ArrayBuffer(4*Math.ceil(W/4));L=new Uint8Array(L);T=new Uint8Array(T,O,W);if(K)for(K=
0;K<L.length;K+=4)L[K]=T[K+3],L[K+1]=T[K+2],L[K+2]=T[K+1],L[K+3]=T[K];else L.set(T);return new Uint32Array(L.buffer)}if(K){K=new Uint8Array(T,O,W);L=new Uint8Array(K.length);for(T=0;T<L.length;T+=4)L[T]=K[T+3],L[T+1]=K[T+2],L[T+2]=K[T+1],L[T+3]=K[T];return new Uint32Array(L.buffer)}return new Uint32Array(T,O,W/4)}function r(){const T=[];for(let O=0;257>=O;O++)T[O]=[O];return T}function G(T,O){for(let W=0;W<O.length;W++)T.push(O[W])}const m=new Set;m.add(511);m.add(1023);m.add(2047);m.add(4095);m.add(8191);
R.decode=function(T,O,W,K=!0){T=z(T,O,W,K);O=9;K=r();let L=32,q=K.length,d=[],t=1,B=T[0],x=0;const A=T.length;W=8*(4*A-W);const a=[];for(;null!=B;){if(L>=O)L-=O,x=B>>>32-O,B<<=O;else{x=B>>>32-L;B=T[t++];var k=O-L;L=32-k;x=(x<<k)+(B>>>L);B<<=k}if(257===x)break;if(256===x)O=9,K=r(),q=K.length,d=[];else{k=K[x];if(null==k){if(x>K.length)throw"data integrity issue: code does not exist on code page";d.push(d[0]);K[q++]=d.slice();G(a,d)}else G(a,k),d.push(k[0]),1<d.length&&(K[q++]=d.slice()),d=k.slice();
m.has(q)&&O++;0===L&&(B=T[t++],L=32);if(t>A||t===A&&L<=W)break}}return new Uint8Array(a)};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/Raw":function(){define(function(){const R=function(z){let r=1;switch(z){case Uint8Array:case Int8Array:r=1;break;case Uint16Array:case Int16Array:r=2;break;case Uint32Array:case Int32Array:case Float32Array:r=4;break;case Float64Array:r=8}return r};return function(){function z(){}z.decode=function(r,G){var m=G.pixelType;const T=
[],O=G.width*G.height;var W=Math.floor(r.byteLength/(G.width*G.height*R(G.pixelType)));const {bandIds:K,format:L}=G;G=K&&K.length||Math.floor(r.byteLength/(G.width*G.height*R(G.pixelType)));var q=r.byteLength-r.byteLength%(O*R(m));const d=new m(r,0,O*W);let t,B;let x,A;if("bip"===L)for(t=0;t<G;t++){x=new m(O);A=K?K[t]:t;for(B=0;B<O;B++)x[B]=d[B*W+A];T.push(x)}else if("bsq"===L)for(t=0;t<G;t++)A=K?K[t]:t,T.push(d.subarray(A*O,(A+1)*O));if(q<r.byteLength-1)if(r=r.slice(q),8*r.byteLength<O)var a=null;
else{r=new Uint8Array(r,0,Math.ceil(O/8));m=new Uint8Array(O);for(G=q=G=a=W=0;G<r.length-1;G++)for(a=r[G],q=7;0<=q;q--)m[W++]=a>>q&1;for(q=7;W<O-1;)a=r[r.length-1],m[W++]=a>>q&1,q--;a=m}return{pixels:T,mask:a}};return z}()})},"esri/layers/support/rasterFormats/TiffDecoder":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../rasterDatasets/byteStreamUtils ../../../chunks/Jpg ./Lerc ./Lzw ./TiffTags ./utils ../../../chunks/Zlib".split(" "),function(R,z,r,G,m,T,O,W,K){function L(D,
F){let M="unknown";3===D?M="f32":1===D?1===F?M="u1":2===F?M="u2":4===F?M="u4":8>=F?M="u8":16>=F?M="u16":32>=F&&(M="u32"):2===D&&(8>=F?M="s8":16>=F?M="s16":32>=F&&(M="s32"));return M}function q(D){let F=null;switch(D?D.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":F=Uint8Array;break;case "u16":F=Uint16Array;break;case "u32":F=Uint32Array;break;case "s8":F=Int8Array;break;case "s16":F=Int16Array;break;case "s32":F=Int32Array;break;default:F=Float32Array}return F}function d(D,F){return{x:F[0]*
D.x+F[1]*D.y+F[2],y:F[3]*D.x+F[4]*D.y+F[5]}}function t(D,F){var M;return null==(M=D.get(F))?void 0:M.values}function B(D,F){var M;return null==(M=D.get(F))?void 0:M.values}function x(D,F){var M;return null==(M=D.get(F))?void 0:M.values[0]}function A(D,F){var M;return null==(M=D.get(F))?void 0:M.values[0]}function a(D,F,M,Q=0,S=O.TIFF_TAGS,X=4){var Z=8===X;const ca=Z?e(new DataView(D,M,8),0,F):(new DataView(D,M,2)).getUint16(0,F),aa=4+2*X;var ea=Z?8:2;Z=ea+ca*aa;if(M+Z>D.byteLength)return{success:!1,
ifd:null,nextIFD:null,requiredBufferSize:Z};const fa=M+Z+4<=D.byteLength?n(new DataView(D,M+Z,8===X?8:4),0,F,8===X):null;M+=ea;ea=new Map;let P,Y,ha,da,ja;for(let ma=0;ma<ca;ma++){var ka=new DataView(D,M+aa*ma,aa);P=ka.getUint16(0,F);ha=ka.getUint16(2,F);Y=O.getTagName(P,S);const ra=[];2===X?(da=ka.getUint16(4,F),ja=ka.getUint16(6,F)):4===X?(da=ka.getUint32(4,F),ja=ka.getUint32(8,F)):8===X&&(da=n(ka,4,F,!0),ja=n(ka,12,F,!0),ra.push(ka.getUint32(12,F)),ra.push(ka.getUint32(16,F)));ka={id:P,type:ha,
valueCount:da,valueOffset:ja,valueOffsets:ra,values:null};h(D,F,ka,Q,!1,X);ea.set(Y,ka)}return{success:!0,ifd:ea,nextIFD:fa,requiredBufferSize:Z}}function k(D,F,M,Q,S){return f.apply(this,arguments)}function f(){f=z._asyncToGenerator(function*(D,F,M,Q,S){var X,Z,ca=W.isPlatformLittleEndian===F,aa=A(M,"BITSPERSAMPLE");const ea=null!=(X=A(M,"SAMPLEFORMAT"))?X:1;X=L(ea,aa);aa=null!=(Z=A(M,"COMPRESSION"))?Z:1;Z=q(X);if(34887===aa)return yield m.load(),m.decode(D,{inputOffset:Q}).pixels[0];if(1===aa){var fa=
D.slice(Q,Q+S);var P=new Uint8Array(fa)}else if(8===aa||32946===aa)P=new Uint8Array(D,Q,S),P=new K.Zlib(P),D=P.getBytes(),fa=new ArrayBuffer(D.length),P=new Uint8Array(fa),P.set(D);else if(6===aa)P=new Uint8Array(D,Q,S),fa=new G.JpegImage,fa.parse(P),D=fa.getData(fa.width,fa.height,!0),fa=new ArrayBuffer(D.length),P=new Uint8Array(fa),P.set(D);else if(7===aa){F=M.get("JPEGTABLES").values;fa=F.length-2;P=new Uint8Array(fa+S-2);for(M=0;M<fa;M++)P[M]=F[M];D=new Uint8Array(D,Q+2,S-2);for(Q=0;Q<D.length;Q++)P[fa+
Q]=D[Q];fa=new G.JpegImage;fa.parse(P);D=fa.getData(fa.width,fa.height,!0);fa=new ArrayBuffer(D.length);P=new Uint8Array(fa);P.set(D)}else 5===aa&&(P=T.decode(D,Q,S,F),fa=P.buffer);if("u8"!==X&&"s8"!==X&&!ca)switch(fa=new ArrayBuffer(P.length),ca=new Uint8Array(fa),X){case "u16":case "s16":for(X=0;X<P.length;X+=2)ca[X]=P[X+1],ca[X+1]=P[X];break;case "u32":case "s32":case "f32":for(X=0;X<P.length;X+=4)ca[X]=P[X+3],ca[X+1]=P[X+2],ca[X+2]=P[X+1],ca[X+3]=P[X]}return new Z(fa)});return f.apply(this,arguments)}
function g(D,F,M){return u.apply(this,arguments)}function u(){u=z._asyncToGenerator(function*(D,F,M){var Q;const S=B(M,"TILEOFFSETS");if(void 0===S)return null;const X=B(M,"TILEBYTECOUNTS"),{width:Z,height:ca,pixelType:aa,tileWidth:ea,tileHeight:fa}=l([M]);var P=b(M,F);const Y=F.planes;var ha=Z*ca,da=A(M,"BITSPERSAMPLE"),ja=34887===(null!=(Q=A(M,"COMPRESSION"))?Q:1),ka=q(aa);Q=[];for(var ma=0;ma<Y;ma++)Q.push(new ka(ha));let ra,na,za,ta,wa,Aa,xa,va;ha=Math.ceil(Z/ea);if(0===da%8)if(ja&&P&&1<Y)for(P=
Math.round(S.length/Y),da=0;da<P;da++){var ya=Math.floor(da/ha)*fa;za=da%ha*ea;ka=ya*Z+za;for(ja=0;ja<Y;ja++)for(ma=da*Y+ja,ma=yield k(D,F.littleEndian,M,S[ma],X[ma]),wa=0,ta=ka,xa=Math.min(ea,Z-za),Aa=Math.min(fa,ca-ya),va=Q[ja],ra=0;ra<Aa;ra++)for(ta=ka+ra*Z,wa=ra*ea,na=0;na<xa;na++,ta++,wa++)va[ta]=ma[wa]}else for(da=0;da<S.length;da++)for(ya=Math.floor(da/ha)*fa,za=da%ha*ea,ka=ya*Z+za,ma=yield k(D,F.littleEndian,M,S[da],X[da]),wa=0,ta=ka,xa=Math.min(ea,Z-za),Aa=Math.min(fa,ca-ya),ya=0;ya<Y;ya++)if(va=
Q[ya],P||ja)for(ra=0;ra<Aa;ra++)for(ta=ka+ra*Z,wa=ea*fa*ya+ra*ea,na=0;na<xa;na++,ta++,wa++)va[ta]=ma[wa];else for(ra=0;ra<Aa;ra++)for(ta=ka+ra*Z,wa=ra*ea*Y+ya,na=0;na<xa;na++,ta++,wa+=Y)va[ta]=ma[wa];return{width:Z,height:ca,pixelType:aa,pixels:Q}});return u.apply(this,arguments)}function h(D,F,M,Q=0,S=!1,X=4){if(M.values)return!0;var Z=M.type,ca=M.valueCount,aa=M.valueOffset;let ea=[];var fa=p[Z],P=8*fa,Y=ca*fa,ha=ca*p[Z]*8,da=8===X?64:32;X=M.valueOffsets;if(ha>da&&Y>(S?D.byteLength:D?D.byteLength-
aa+Q:0))return M.offlineOffsetSize=[aa,Y],M.values=null,!1;if(ha<=da)if(F||(32>=da?aa>>>=32-ha:(D=null!=X&&X.length?X[0]:aa>>>0,F=null!=X&&X.length?X[1]:Math.round((aa-D)/4294967296),32>=ha?(aa=D>>>32-ha,X[0]=aa):(aa=D*2**(32-ha)+(F>>>32-ha),X[0]=D,X[1]=F>>>32-ha))),1===ca&&P===da)ea=[aa];else if(64===da)for(D=null!=X&&X.length?X[0]:aa>>>0,aa=null!=X&&X.length?X[1]:Math.round((aa-D)/4294967296),F=D,fa=32,D=1;D<=ca;D++)Y=32-P*D%32,fa<P?(Y=F<<Y>>>32-fa,ha=aa<<32-fa>>>32-fa,F=aa,ea.push(Y+ha*2**(P-fa)),
fa-=32-(P-fa)):(ea.push(F<<Y>>>32-P),fa-=P),0===fa&&(fa=32,F=aa);else for(D=1;D<=ca;D++)ea.push(aa<<32-P*D>>>32-P);else for(aa-=Q,S&&(aa=0),ca=aa;ca<aa+Y;ca+=fa){switch(Z){case 1:P=(new DataView(D,ca,1)).getUint8(0);break;case 2:P=(new DataView(D,ca,1)).getUint8(0);break;case 3:P=(new DataView(D,ca,2)).getUint16(0,F);break;case 4:case 13:P=(new DataView(D,ca,4)).getUint32(0,F);break;case 5:P=(new DataView(D,ca,4)).getUint32(0,F)/(new DataView(D,ca+4,4)).getUint32(0,F);break;case 6:P=(new DataView(D,
ca,1)).getInt8(0);break;case 7:P=(new DataView(D,ca,1)).getUint8(0);break;case 8:P=(new DataView(D,ca,2)).getInt16(0,F);break;case 9:P=(new DataView(D,ca,4)).getInt32(0,F);break;case 10:P=(new DataView(D,ca,4)).getInt32(0,F)/(new DataView(D,ca+4,4)).getInt32(0,F);break;case 11:P=(new DataView(D,ca,4)).getFloat32(0,F);break;case 12:P=(new DataView(D,ca,8)).getFloat64(0,F);break;case 16:case 18:P=e(new DataView(D,ca,8),0,F);break;case 17:X=new DataView(D,ca,8);ha=(P=F)?X.getInt32(0,P):X.getUint32(0,
P);X=P?X.getUint32(4,P):X.getInt32(4,P);da=0<=(P?ha:X)?1:-1;P?ha*=da:X*=da;P=da*(P?4294967296*X+ha:4294967296*ha+X);break;default:P=null}ea.push(P)}if(2===Z){Z="";aa=ea;ea=[];for(D=0;D<aa.length;D++)0===aa[D]&&""!==Z?(ea.push(Z),Z=""):Z+=String.fromCharCode(aa[D]);""===Z&&0!==ea.length||ea.push(Z)}M.values=ea;return!0}function l(D){var F,M,Q=D[0];const S=A(Q,"TILEWIDTH"),X=A(Q,"TILELENGTH"),Z=A(Q,"IMAGEWIDTH"),ca=A(Q,"IMAGELENGTH");var aa=A(Q,"BITSPERSAMPLE");const ea=A(Q,"SAMPLESPERPIXEL");var fa=
null!=(F=A(Q,"SAMPLEFORMAT"))?F:1;F=L(fa,aa);const P=b(Q);var Y=t(Q,"GDAL_NODATA");let ha;null!=Y&&Y.length&&(ha=Y.map(va=>parseFloat(va)),ha.some(va=>isNaN(va))&&(ha=null));var da=null!=(M=A(Q,"COMPRESSION"))?M:1;switch(da){case 1:M="NONE";break;case 2:case 3:case 4:case 32771:M="CCITT";break;case 5:M="LZW";break;case 6:case 7:M="JPEG";break;case 32773:M="PACKBITS";break;case 8:case 32946:M="DEFLATE";break;case 34712:M="JPEG2000";break;case 34887:M="LERC";break;default:M=String(da)}Y=!0;let ja="";
E.has(da)||(Y=!1,ja+="unsupported tag compression "+da);3<fa&&(Y=!1,ja+="unsupported tag sampleFormat "+fa);0!==aa%8&&(Y=!1,ja+="unsupported tag bitsPerSample "+aa);aa=x(Q,"GEOASCIIPARAMS");if(aa){var ka=(ka=aa.split("|").find(va=>-1<va.indexOf("ESRI PE String \x3d ")))?ka.replace("ESRI PE String \x3d ",""):"";ka=ka.startsWith("COMPD_CS")||ka.startsWith("PROJCS")||ka.startsWith("GEOGCS")?{wkid:null,wkt:ka}:null}fa=B(Q,"GEOTIEPOINTS");aa=B(Q,"GEOPIXELSCALE");da=B(Q,"GEOTRANSMATRIX");var ma=Q.has("GEOKEYDIRECTORY")?
Q.get("GEOKEYDIRECTORY").data:null;Q=!1;if(ma){Q=2===A(ma,"GTRasterTypeGeoKey");var ra=A(ma,"GTModelTypeGeoKey");2===ra?(ma=A(ma,"GeographicTypeGeoKey"),1024<=ma&&32766>=ma&&(ka={wkid:ma})):1===ra&&(ma=A(ma,"ProjectedCSTypeGeoKey"),1024<=ma&&32766>=ma&&(ka={wkid:ma}))}let na;aa&&fa&&6<=fa.length?(na=[aa[0],0,fa[3]-fa[0]*aa[0],0,-Math.abs(aa[1]),fa[4]-fa[1]*aa[1]],Q&&(na[2]-=.5*na[0]+.5*na[1],na[5]-=.5*na[3]+.5*na[4])):da&&16===da.length&&(na=Q?[da[0],da[1],da[3]-.5*da[0],da[4],da[5],da[7]-.5*da[5]]:
[da[0],da[1],da[3],da[4],da[5],da[7]]);if(na){Q=[{x:0,y:ca},{x:0,y:0},{x:Z,y:ca},{x:Z,y:0}];ma=da=Number.POSITIVE_INFINITY;let va=ra=Number.NEGATIVE_INFINITY;for(let ya=0;ya<Q.length;ya++)fa=d(Q[ya],na),da=fa.x>da?da:fa.x,ra=fa.x<ra?ra:fa.x,ma=fa.y>ma?ma:fa.y,va=fa.y<va?va:fa.y;ka={xmin:da,xmax:ra,ymin:ma,ymax:va,spatialReference:ka}}else ka={xmin:-.5,ymin:.5-ca,xmax:Z-.5,ymax:.5,spatialReference:ka};Q=D.filter(va=>1===x(va,"NEWSUBFILETYPE"));let za,ta,wa;if(0<Q.length){za=Math.round(Math.log(Z/A(Q[0],
"IMAGEWIDTH"))/Math.LN2);var Aa=Q[Q.length-1];ta=Math.round(Math.log(Z/A(Aa,"IMAGEWIDTH"))/Math.LN2);wa=A(Aa,"TILEWIDTH");Aa=A(Aa,"TILELENGTH")}wa=0<ta?wa||S:null;Aa=0<ta?Aa||X:null;let xa;S&&(xa=[{maxCol:Math.ceil(Z/S)-1,maxRow:Math.ceil(ca/X)-1,minRow:0,minCol:0}],Q.forEach(va=>{xa.push({maxCol:Math.ceil(A(va,"IMAGEWIDTH")/A(va,"TILEWIDTH"))-1,maxRow:Math.ceil(A(va,"IMAGELENGTH")/A(va,"TILELENGTH"))-1,minRow:0,minCol:0})}));Q=x(D[0],"GDAL_METADATA");Q=U(Q);ja+=" "+J({width:Z,height:ca,tileWidth:S,
tileHeight:X,planes:ea,ifds:D});return{width:Z,height:ca,tileWidth:S,tileHeight:X,planes:ea,isBSQ:P,pixelType:F,compression:M,noData:ha,isSupported:Y,message:ja,extent:ka,affine:aa?null:na,firstPyramidLevel:za,maximumPyramidLevel:ta,pyramidBlockWidth:wa,pyramidBlockHeight:Aa,tileBoundary:xa,metadata:Q}}function b(D,F){return(D=t(D,"PLANARCONFIGURATION"))?2===D[0]:F?F.isBSQ:!1}function c(D){const {littleEndian:F,isBigTiff:M,firstIFD:Q}=v(D);var S=Q;const X=[];do if(S=w(D,F,S,0,O.TIFF_TAGS,M?8:4),S.success)X.push(S.ifd),
S=S.nextIFD;else break;while(0<S);return{...l(X),littleEndian:F,isBigTiff:M,ifds:X}}function e(D,F,M){const Q=D.getUint32(F,M);D=D.getUint32(F+4,M);return M?4294967296*D+Q:4294967296*Q+D}function n(D,F,M,Q){return Q?e(D,F,M):D.getUint32(F,M)}function v(D){var F=new DataView(D,0,16),M=F.getUint16(0,!1);D=null;if(18761===M)D=!0;else if(19789===M)D=!1;else throw"unexpected endianess byte";var Q=F.getUint16(2,D);if(42!==Q&&43!==Q)throw"unexpected tiff identifier";M=4;if(Q=43===Q){const S=F.getUint16(M,
D);M+=2;if(8!==S)throw"unsupported bigtiff version";if(0!==F.getUint16(M,D))throw"unsupported bigtiff version";M+=2}F=n(F,M,D,Q);return{littleEndian:D,isBigTiff:Q,firstIFD:F}}function w(D,F,M,Q=0,S=O.TIFF_TAGS,X=4){M=a(D,F,M,Q,S,X);let Z;const ca=M.ifd;ca&&(O.ifdTags.forEach((aa,ea)=>{ca.has(ea)&&(Z=ca.get(ea),Z.data=a(D,F,Z.valueOffset-Q,Q,aa).ifd)}),ca.has("GEOKEYDIRECTORY")&&(Z=ca.get("GEOKEYDIRECTORY"),(S=Z.values)&&4<S.length&&(S=S[0]+"."+S[1]+"."+S[2],Z.data=a(D,F,Z.valueOffset+6-Q,Q,O.GEO_KEYS,
2).ifd,Z.data&&Z.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[S]}))),ca.has("XMP")&&(Z=ca.get("XMP"),S=Z.values,"number"===typeof S[0]&&7===Z.type&&(Z.values=[r.bytesToUTF8(new Uint8Array(S))])));return M}function J(D){const {width:F,height:M,tileHeight:Q,tileWidth:S}=D,X=D.planes,Z=S?S*Q:F*M;D=A(D.ifds[0],"BITSPERSAMPLE");let ca="";Z*X>2**30/(8<D?D/8:1)&&(ca=S?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported");
return ca}function y(){y=z._asyncToGenerator(function*(D,F){var M;const {headerInfo:Q,ifd:S,offsets:X,sizes:Z}=F;var ca=[];for(var aa=0;aa<X.length;aa++){var ea=yield k(D,Q.littleEndian,S,X[aa],Z[aa]||D.byteLength);ca.push(ea)}var fa=b(S,Q);const {pixelType:P,planes:Y}=Q;var ha=q(P);D=A(S,"TILEWIDTH");aa=A(S,"TILELENGTH");var da=null!=(M=A(S,"COMPRESSION"))?M:1;M=D*aa;ea=[];let ja=ca[0];const ka=34887===da;for(let na=0;na<Y;na++){da=new ha(M);if(fa&&ka){ja=ca[na];for(var ma=0;ma<M;ma++)da[ma]=ja[na][ma+
na]}else if(fa||ka&&!fa)da=ja.slice(M*na,M*(na+1));else for(ma=0;ma<M;ma++)da[ma]=ja[ma*Y+na];ea.push(da)}ca=Q.noData?Q.noData[0]:null;fa=(ha=Q.metadata?Q.metadata.statistics:null)?ha.map(na=>na.min):null;ha=ha?ha.map(na=>na.max):null;let ra;if(null!=ca)if(ra=new Uint8Array(M),1E24<Math.abs(ca))for(F=0;F<M;F++)ra[F]=1E-6>Math.abs((ea[0][F]-ca)/ca)?0:1;else for(F=0;F<M;F++)ra[F]=ea[0][F]===ca?0:1;else fa&&ha&&F.applyMinMaxConstraint&&(ra=N(ea,fa,ha));return{pixelType:P,width:D,height:aa,pixels:ea,
mask:ra,noDataValue:ca}});return y.apply(this,arguments)}function C(){C=z._asyncToGenerator(function*(D,F=0,M){M=M||c(D);const {ifds:Q,noData:S}=M;if(0===Q.length)throw"no valid image file directory";var X=J(M);if(X)throw X;var Z=-1===F?Q[Q.length-1]:Q[F];F=S?S[0]:null;if(M.tileWidth)M=yield g(D,M,Z);else{{var ca=M,aa;const Aa=W.isPlatformLittleEndian===ca.littleEndian,xa=B(Z,"STRIPOFFSETS");if(void 0===xa)D=null;else{var {width:ea,height:fa,pixelType:P}=l([Z]);M=ca.planes;X=ea*fa;var Y=A(Z,"BITSPERSAMPLE"),
ha=q(P),da=new ha(X*M),ja=B(Z,"STRIPBYTECOUNTS"),ka=A(Z,"ROWSPERSTRIP");Z=null!=(aa=A(Z,"COMPRESSION"))?aa:1;var ma=ka;if(0===Y%8)for(aa=0;aa<xa.length;aa++){var ra=aa*ka*ea*M;ma=(aa+1)*ka>fa?fa-aa*ka:ka;if("u8"===P||"s8"===P||Aa)if(8===Z||32946===Z){var na=new Uint8Array(D,xa[aa],ja[aa]);na=new K.Zlib(na);var za=na.getBytes();var ta=new ArrayBuffer(za.length);na=new Uint8Array(ta);na.set(za);na.length!==ma*ea*M*Y/8&&console.log("strip byte counts is different than expected")}else 6===Z?(na=new Uint8Array(D,
xa[aa],ja[aa]),ta=new G.JpegImage,ta.parse(na),ma=ta.getData(ta.width,ta.height,!0),ta=new ArrayBuffer(ma.length),na=new Uint8Array(ta),na.set(ma)):5===Z?(na=T.decode(D,xa[aa],ja[aa],ca.littleEndian),ta=na.buffer):1===Z&&(ja[aa]!==ma*ea*M*Y/8&&console.log("strip byte counts is different than expected"),ta=D.slice(xa[aa],xa[aa]+ja[aa]));else{if(6===Z||8===Z||32946===Z){na=new Uint8Array(D,xa[aa],ja[aa]);na=new K.Zlib(na);na=na.getBytes();ta=new ArrayBuffer(na.length);var wa=new Uint8Array(ta);na.length!==
ma*ea*M*Y/8&&console.log("strip byte counts is different than expected")}else 1===Z&&(ja[aa]!==ma*ea*M*Y/8&&console.log("strip byte counts is different than expected"),ta=new ArrayBuffer(ja[aa]),na=new Uint8Array(D,xa[aa],ja[aa]),wa=new Uint8Array(ta));switch(P){case "u16":case "s16":for(ma=0;ma<na.length;ma+=2)wa[ma]=na[ma+1],wa[ma+1]=na[ma];break;case "u32":case "s32":case "f32":for(ma=0;ma<na.length;ma+=4)wa[ma]=na[ma+3],wa[ma+1]=na[ma+2],wa[ma+2]=na[ma+1],wa[ma+3]=na[ma]}}ma=new ha(ta);da.set(ma,
ra)}na=[];if(1===M)na.push(da);else for(aa=0;aa<M;aa++){wa=new ha(X);for(D=0;D<X;D++)wa[D]=da[D*M+aa];na.push(wa)}D={width:ea,height:fa,pixelType:P,pixels:na}}}M=yield D}if(null!==F){M.mask=new Uint8Array(M.width*M.height);if(1E24<Math.abs(F))for(D=0;D<M.width*M.height;D++)M.mask[D]=1E-6>Math.abs((M.pixels[0][D]-F)/F)?0:1;else for(D=0;D<M.width*M.height;D++)M.mask[D]=M.pixels[0][D]===F?0:1;M.noDataValue=F}return M});return C.apply(this,arguments)}const p=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],
E=new Set([1,5,6,7,8,34712,34887]),N=function(D,F,M){if(!(D&&0<D.length&&F&&M))return null;let Q,S,X;const Z=D[0].length,ca=D.length,aa=new Uint8Array(Z);for(let fa=0;fa<ca;fa++)if(Q=D[fa],S=F[fa],X=M[fa],0===fa)for(var ea=0;ea<Z;ea++)aa[ea]=Q[ea]<S||Q[ea]>X?0:1;else for(ea=0;ea<Z;ea++)aa[ea]&&(aa[ea]=Q[ea]<S||Q[ea]>X?0:1);return aa},U=function(D){if(!D)return null;var F=D.match(/<Item(.*?)Item>/gi);if(!F||0===F.length)return null;D=new Map;var M;for(var Q=0;Q<F.length;Q++){var S=F[Q];var X=S.slice(6,
S.indexOf("\x3e"));var Z=S.indexOf("sample\x3d");-1<Z&&(M=S.slice(Z+8,S.indexOf('"',Z+8)));Z=S.indexOf("name\x3d");-1<Z&&(X=S.slice(Z+6,S.indexOf('"',Z+6)));X&&(S=S.slice(S.indexOf("\x3e")+1,S.indexOf("\x3c/Item\x3e")).trim(),null!=M?D.has(X)?D.get(X)[M]=S:D.set(X,[S]):D.set(X,S));M=null}F=D.get("STATISTICS_MINIMUM");X=D.get("STATISTICS_MAXIMUM");Q=D.get("STATISTICS_MEAN");S=D.get("STATISTICS_STDDEV");M=null;if(F&&X)for(M=[],Z=0;Z<F.length;Z++)M.push({min:parseFloat(F[Z]),max:parseFloat(X[Z]),avg:Q&&
parseFloat(Q[Z]),stddev:S&&parseFloat(S[Z])});X=D.get("BandName");Q=D.get("WavelengthMin");S=D.get("WavelengthMax");F=null;if(X)for(F=[],Z=0;Z<X.length;Z++)F.push({BandName:X[Z],WavelengthMin:Q&&parseFloat(Q[Z]),WavelengthMax:S&&parseFloat(S[Z])});X=D.get("DataType");return{statistics:M,bandProperties:F,dataType:X,rawMetadata:D}};R.decode=function(D){return C.apply(this,arguments)};R.decodeTileOrStrip=function(D,F){return y.apply(this,arguments)};R.getImageInfo=l;R.isBSQConfig=b;R.parseFieldValues=
h;R.parseHeader=c;R.parseIFD=w;R.parseSignature=v;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],function(R){R.bytesToUTF8=function(z,r){let G=0,m="",T=0,O=0;const W=z.length;for(;G<W;)if(O=z[G++],T=O>>4,8>T?T=1:15===T?(T=4,O=(O&7)<<18|(z[G++]&63)<<12|(z[G++]&63)<<6|z[G++]&63):14===T?(T=3,O=(O&15)<<12|(z[G++]&63)<<6|z[G++]&63):(T=2,O=(O&31)<<6|z[G++]&63),0!==O||r)m+=String.fromCharCode(O);return m};Object.defineProperty(R,
"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const R=(()=>{const m=[];m[254]="NEWSUBFILETYPE";m[255]="SUBFILETYPE";m[256]="IMAGEWIDTH";m[257]="IMAGELENGTH";m[258]="BITSPERSAMPLE";m[259]="COMPRESSION";m[262]="PHOTOMETRICINTERPRETATION";m[263]="THRESHHOLDING";m[264]="CELLWIDTH";m[265]="CELLLENGTH";m[266]="FILLORDER";m[269]="DOCUMENTNAME";m[270]="IMAGEDESCRIPTION";m[271]="MAKE";m[272]="MODEL";m[273]="STRIPOFFSETS";m[274]="ORIENTATION";m[277]="SAMPLESPERPIXEL";
m[278]="ROWSPERSTRIP";m[279]="STRIPBYTECOUNTS";m[280]="MINSAMPLEVALUE";m[281]="MAXSAMPLEVALUE";m[282]="XRESOLUTION";m[283]="YRESOLUTION";m[284]="PLANARCONFIGURATION";m[285]="PAGENAME";m[286]="XPOSITION";m[287]="YPOSITION";m[288]="FREEOFFSETS";m[289]="FREEBYTECOUNTS";m[290]="GRAYRESPONSEUNIT";m[291]="GRAYRESPONSECURVE";m[292]="T4OPTIONS";m[293]="T6OPTIONS";m[296]="RESOLUTIONUNIT";m[297]="PAGENUMBER";m[300]="COLORRESPONSEUNIT";m[301]="TRANSFERFUNCTION";m[305]="SOFTWARE";m[306]="DATETIME";m[315]="ARTIST";
m[316]="HOSTCOMPUTER";m[317]="PREDICTOR";m[318]="WHITEPOINT";m[319]="PRIMARYCHROMATICITIES";m[320]="COLORMAP";m[321]="HALFTONEHINTS";m[322]="TILEWIDTH";m[323]="TILELENGTH";m[324]="TILEOFFSETS";m[325]="TILEBYTECOUNTS";m[326]="BADFAXLINES";m[327]="CLEANFAXDATA";m[328]="CONSECUTIVEBADFAXLINES";m[330]="SUBIFD";m[332]="INKSET";m[333]="INKNAMES";m[334]="NUMBEROFINKS";m[336]="DOTRANGE";m[337]="TARGETPRINTER";m[338]="EXTRASAMPLES";m[339]="SAMPLEFORMAT";m[340]="SMINSAMPLEVALUE";m[341]="SMAXSAMPLEVALUE";m[342]=
"TRANSFERRANGE";m[347]="JPEGTABLES";m[512]="JPEGPROC";m[513]="JPEGIFOFFSET";m[514]="JPEGIFBYTECOUNT";m[515]="JPEGRESTARTINTERVAL";m[517]="JPEGLOSSLESSPREDICTORS";m[518]="JPEGPOINTTRANSFORM";m[519]="JPEGQTABLES";m[520]="JPEGDCTABLES";m[521]="JPEGACTABLES";m[529]="YCBCRCOEFFICIENTS";m[530]="YCBCRSUBSAMPLING";m[531]="YCBCRPOSITIONING";m[532]="REFERENCEBLACKWHITE";m[700]="XMP";m[33550]="GEOPIXELSCALE";m[33922]="GEOTIEPOINTS";m[33432]="COPYRIGHT";m[42112]="GDAL_METADATA";m[42113]="GDAL_NODATA";m[50844]=
"RPCCOEFFICIENT";m[34264]="GEOTRANSMATRIX";m[34735]="GEOKEYDIRECTORY";m[34736]="GEODOUBLEPARAMS";m[34737]="GEOASCIIPARAMS";m[34665]="EXIFIFD";m[34853]="GPSIFD";m[40965]="INTEROPERABILITYIFD";return m})(),z=(()=>{const m=[].concat(R);m[36864]="ExifVersion";m[40960]="FlashpixVersion";m[40961]="ColorSpace";m[42240]="Gamma";m[37121]="ComponentsConfiguration";m[37122]="CompressedBitsPerPixel";m[40962]="PixelXDimension";m[40963]="PixelYDimension";m[37500]="MakerNote";m[37510]="UserComment";m[40964]="RelatedSoundFile";
m[36867]="DateTimeOriginal";m[36868]="DateTimeDigitized";m[36880]="OffsetTime";m[36881]="OffsetTimeOriginal";m[36882]="OffsetTimeDigitized";m[37520]="SubSecTime";m[37521]="SubSecTimeOriginal";m[37522]="SubSecTimeDigitized";m[37888]="Temperature";m[37889]="Humidity";m[37890]="Pressure";m[37891]="WaterDepth";m[37892]="Acceleration";m[37893]="CameraElevationAngle";m[42016]="ImageUniqueID";m[42032]="CameraOwnerName";m[42033]="BodySerialNumber";m[42034]="LensSpecification";m[42035]="LensMake";m[42036]=
"LensModel";m[42037]="LensSerialNumber";m[33434]="ExposureTime";m[33437]="FNumber";m[34850]="ExposureProgram";m[34852]="SpectralSensitivity";m[34855]="PhotographicSensitivity";m[34856]="OECF";m[34864]="SensitivityType";m[34865]="StandardOutputSensitivity";m[34866]="RecommendedExposureIndex";m[34867]="ISOSpeed";m[34868]="ISOSpeedLatitudeyyy";m[34869]="ISOSpeedLatitudezzz";m[37377]="ShutterSpeedValue";m[37378]="ApertureValue";m[37379]="BrightnessValue";m[37380]="ExposureBiasValue";m[37381]="MaxApertureValue";
m[37382]="SubjectDistance";m[37383]="MeteringMode";m[37384]="LightSource";m[37385]="Flash";m[37386]="FocalLength";m[37396]="SubjectArea";m[41483]="FlashEnergy";m[41484]="SpatialFrequencyResponse";m[41486]="FocalPlaneXResolution";m[41487]="FocalPlaneYResolution";m[41488]="FocalPlaneResolutionUnit";m[41492]="SubjectLocation";m[41493]="ExposureIndex";m[41495]="SensingMethod";m[41728]="FileSource";m[41729]="SceneType";m[41730]="CFAPattern";m[41985]="CustomRendered";m[41986]="ExposureMode";m[41987]="WhiteBalance";
m[41988]="DigitalZoomRatio";m[41989]="FocalLengthIn35mmFilm";m[41990]="SceneCaptureType";m[41991]="GainControl";m[41992]="Contrast";m[41993]="Saturation";m[41994]="Sharpness";m[41995]="DeviceSettingDescription";m[41996]="SubjectDistanceRange";return m})(),r=(()=>{const m=[];m[1024]="GTModelTypeGeoKey";m[1025]="GTRasterTypeGeoKey";m[1026]="GTCitationGeoKey";m[2048]="GeographicTypeGeoKey";m[2049]="GeogCitationGeoKey";m[2050]="GeogGeodeticDatumGeoKey";m[2051]="GeogPrimeMeridianGeoKey";m[2052]="GeogLinearUnitsGeoKey";
m[2053]="GeogLinearUnitSizeGeoKey";m[2054]="GeogAngularUnitsGeoKey";m[2055]="GeogAngularUnitSizeGeoKey";m[2056]="GeogEllipsoidGeoKey";m[2057]="GeogSemiMajorAxisGeoKey";m[2058]="GeogSemiMinorAxisGeoKey";m[2059]="GeogInvFlatteningGeoKey";m[2061]="GeogPrimeMeridianLongGeoKey";m[2060]="GeogAzimuthUnitsGeoKey";m[3072]="ProjectedCSTypeGeoKey";m[3073]="PCSCitationGeoKey";m[3074]="ProjectionGeoKey";m[3075]="ProjCoordTransGeoKey";m[3076]="ProjLinearUnitsGeoKey";m[3077]="ProjLinearUnitSizeGeoKey";m[3078]="ProjStdParallel1GeoKey";
m[3079]="ProjStdParallel2GeoKey";m[3080]="ProjNatOriginLongGeoKey";m[3081]="ProjNatOriginLatGeoKey";m[3082]="ProjFalseEastingGeoKey";m[3083]="ProjFalseNorthingGeoKey";m[3084]="ProjFalseOriginLongGeoKey";m[3085]="ProjFalseOriginLatGeoKey";m[3086]="ProjFalseOriginEastingGeoKey";m[3087]="ProjFalseOriginNorthingGeoKey";m[3088]="ProjCenterLongGeoKey";m[3090]="ProjCenterEastingGeoKey";m[3091]="ProjCenterNorthingGeoKey";m[3092]="ProjScaleAtNatOriginGeoKey";m[3093]="ProjScaleAtCenterGeoKey";m[3094]="ProjAzimuthAngleGeoKey";
m[3095]="ProjStraightVertPoleLongGeoKey";m[4096]="VerticalCSTypeGeoKey";m[4097]="VerticalCitationGeoKey";m[4098]="VerticalDatumGeoKey";m[4099]="VerticalUnitsGeoKey";return m})(),G=new Map;G.set("EXIFIFD",z);G.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:R,ifdTags:G,GEO_KEYS:r,getTagName:function(m,T){T=(T||R)[m];void 0===T&&(T="unknown"+String(m));return T}}})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(R){{var z=new ArrayBuffer(4);const r=new Uint8Array(z);(new Uint32Array(z))[0]=1;z=1===r[0]}R.isPlatformLittleEndian=z;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/renderers/support/rasterRendererHelper":function(){define("exports ../../Color ../../rasterRenderers ../../core/maybe ../../core/unitUtils ../../layers/support/Field ../../layers/support/RasterInfo ../FlowRenderer ./AuthoringInfo ./ClassBreakInfo ./colorRampUtils ./UniqueValueInfo ../../rest/support/AlgorithmicColorRamp ../../rest/support/ClassBreaksDefinition ../../rest/support/generateRendererUtils ../../rest/support/MultipartColorRamp ../RasterStretchRenderer ../UniqueValueRenderer ../RasterColormapRenderer ../RasterShadedReliefRenderer ../ClassBreaksRenderer ../VectorFieldRenderer".split(" "),
function(R,z,r,G,m,T,O,W,K,L,q,d,t,B,x,A,a,k,f,g,u,h){function l(P,Y){var ha,da,ja,ka;P=b(P,null==Y?void 0:Y.variableName);const {bandCount:ma}=P;let {bandIds:ra,stretchType:na}=Y||{};null!=(ha=ra)&&ha.some(Aa=>Aa>=ma)&&(ra=null);let za=G.unwrap(P.statistics),ta=G.unwrap(P.histograms);if(1<ma){var wa;ra=null!=(wa=ra)&&wa.length?ra:c(P);za=null==za?null:ra.map(Aa=>za[Aa]);ta=null==ta?null:ra.map(Aa=>ta[Aa])}else ra=[0];null==na&&(na=n(P));ha=!1;switch(na){case "none":ha=!1;break;case "percent-clip":ha=
!(null!=(da=ta)&&da.length);break;default:ha=!(null!=(ja=za)&&ja.length)}({dataType:da}=P);da=1===(null==(ka=ra)?void 0:ka.length)&&ea.has(da)?ca:null;ka=new a({stretchType:na,dynamicRangeAdjustment:ha,colorRamp:da,outputMin:0,outputMax:255,gamma:1===ra.length?[1]:[1,1,1],useGamma:!1});"percent-clip"===na?ka.maxPercent=ka.minPercent=.25:"standard-deviation"===na&&(ka.numberOfStandardDeviations=2);if(!ha&&(G.isSome(P.multidimensionalInfo)||null!=Y&&Y.includeStatisticsInStretch))if("percent-clip"===
na)ka.histograms=ta;else if("min-max"===na||"standard-deviation"===na)ka.statistics=za;return ka}function b(P,Y){if(null==Y)return P;let ha=G.unwrap(P.statistics),da=G.unwrap(P.histograms);const {multidimensionalInfo:ja}=P;if(Y&&G.isSome(ja)){const {statistics:ka,histograms:ma}=ja.variables.find(ra=>ra.name===Y);null!=ka&&ka.length&&(ha=ka);null!=ma&&ma.length&&(da=ma)}return O.fromJSON({...P.toJSON(),statistics:ha,histograms:da})}function c(P){const Y=P.bandCount;if(1===Y)return null;if(2===Y)return[0];
P=P.keyProperties&&P.keyProperties.BandProperties;let ha;if(P&&P.length===Y){const {red:da,green:ja,blue:ka,nir:ma}=e(P);null!=da&&null!=ja&&null!=ka?ha=[da,ja,ka]:null!=ma&&null!=da&&null!=ja&&(ha=[ma,da,ja])}!ha&&3<=Y&&(ha=[0,1,2]);return ha}function e(P){const Y={};for(let ka=0;ka<P.length;ka++){var ha,da=P[ka],ja=null==(ha=da.BandName)?void 0:ha.toLowerCase();"red"===ja?Y.red=ka:"green"===ja?Y.green=ka:"blue"===ja?Y.blue=ka:"nearinfrared"===ja||"nearinfrared_1"===ja||"nir"===ja?Y.nir=ka:da.WavelengthMax&&
da.WavelengthMin&&(ja=da.WavelengthMin,da=da.WavelengthMax,null==Y.blue&&410<=ja&&480>=ja&&480<=da&&540>=da?Y.blue=ka:null==Y.green&&490<=ja&&560>=ja&&560<=da&&610>=da?Y.green=ka:null==Y.red&&595<=ja&&670>=ja&&660<=da&&730>=da?Y.red=ka:null==Y.nir&&700<=ja&&860>=ja&&800<=da&&950>=da&&(Y.nir=ka))}return Y}function n(P){let Y="percent-clip";const {pixelType:ha,dataType:da,histograms:ja,statistics:ka}=P;"u8"!==ha||"processed"!==da&&G.isSome(ja)&&G.isSome(ka)?"u8"===ha||"elevation"===da||ea.has(da)?Y=
"min-max":G.isSome(ja)?Y="percent-clip":G.isSome(ka)&&(Y=Y="min-max"):Y="none";return Y}function v(P,Y,ha,da){if(!C(P,Y))return null;const {attributeTable:ja,statistics:ka}=P,ma=w(ja,Y),ra=y(ja,"red"),na=y(ja,"green"),za=y(ja,"blue");P=new K;const ta=[],wa=new Set,Aa=!!(ra&&na&&za);if(G.isSome(ja))ja.features.forEach(xa=>{var va=xa.attributes[ma.name];wa.has(xa.attributes[ma.name])||null==va||(wa.add(va),va=!Aa||"single"!==ra.type&&"double"!==ra.type||"single"!==na.type&&"double"!==na.type||"single"!==
za.type&&"double"!==za.type||ja.features.some(ya=>1<ya.attributes[ra.name]||1<ya.attributes[na.name]||1<ya.attributes[za.name])?1:255,ta.push(new d({value:xa.attributes[ma.name],label:xa.attributes[ma.name]+"",symbol:{type:"simple-fill",style:"solid",outline:null,color:Aa?new z([xa.attributes[ra.name]*va,xa.attributes[na.name]*va,xa.attributes[za.name]*va,1]):new z([0,0,0,0])}})))});else if(null!=ka&&ka[0])for(Y=ka[0].min;Y<=ka[0].max;Y++)ta.push(new d({value:Y,label:Y.toString(),symbol:{type:"simple-fill",
style:"solid",outline:null,color:new z([0,0,0,0])}}));ta.sort((xa,va)=>xa.value&&"string"===typeof xa.value.valueOf()?0:xa.value>va.value?1:-1);if(!Aa){const xa=q.convertColorRampToColormap(aa,ta.length);ta.forEach((va,ya)=>va.symbol.color=new z(xa[ya].slice(1,4)));P.colorRamp=aa}if(ha||da){const xa=ha||q.convertColorRampToColormap(da,ta.length).map(va=>va.slice(1));ta.forEach((va,ya)=>va.symbol.color=new z(xa[ya]));P.colorRamp=da}return new k({field:ma.name,uniqueValueInfos:ta,authoringInfo:P})}
function w(P,Y,ha){let da;G.isSome(P)?(da=Y?P.fields.find(ja=>Y.toLowerCase()===ja.name.toLowerCase()):J(P.fields),da||(ha||(da=P.fields.find(ja=>"string"===ja.type)),da||(da=y(P,"value")))):da=new T({name:"value"});return da}function J(P){let Y;for(let ha=0;ha<P.length;ha++){const da=P[ha].name.toLowerCase();if("string"===P[ha].type){if(da.startsWith("class")){Y=P[ha];break}null==Y&&(da.endsWith("name")||da.endsWith("type"))&&(Y=P[ha])}}return Y}function y(P,Y){return G.isSome(P)?P.fields.find(ha=>
ha.name.toLowerCase()===Y):null}function C(P,Y){const {attributeTable:ha,bandCount:da}=P;return!G.isSome(ha)&&F(P)?!0:!G.isSome(ha)||1<da||Y&&null==ha.fields.find(ja=>ja.name.toLowerCase()===Y.toLowerCase())?!1:!0}function p(P){const {bandCount:Y,colormap:ha}=P;return G.isSome(ha)&&ha.length&&1===Y}function E(P){if(!p(P))return null;let Y;const {attributeTable:ha,colormap:da}=P;if(G.isSome(ha)){const ja=y(ha,"value"),ka=w(ha,null,!0);"string"===ka.type&&(Y={},ha.features.forEach(ma=>{ma=ma.attributes;
Y[ma[ja.name]]=ka?ma[ka.name]:ma[ja.name]}))}return f.createFromColormap(G.unwrap(da),Y)}function N(P){return"elevation"===P.dataType}function U(P){const {attributeTable:Y,bandCount:ha}=P;return 1===ha&&(G.isSome(Y)||G.isSome(P.histograms))}function D(P,Y,ha){let da=0,ja=0;G.isSome(P.attributeTable)?(P=P.attributeTable,da=ja=P.features[0].attributes[Y.name],P.features.forEach(ka=>{ka=ka.attributes[Y.name];ka<da&&(da=ka);ka>ja&&(ja=ka)})):G.isSome(P.histograms)&&(P=P.histograms,da=P[0].min,ja=P[0].max);
return(ja-da)/ha}function F(P){var Y,ha,da;return-1<["u8","s8"].indexOf(P.pixelType)&&null!=(null==(Y=P.statistics)?void 0:null==(ha=Y[0])?void 0:ha.min)&&null!=(null==(da=P.statistics[0])?void 0:da.max)&&1===P.bandCount}function M(P){({dataType:P}=P);return"vector-uv"===P||"vector-magdir"===P}function Q(P){({dataType:P}=P);return"vector-uv"===P||"vector-magdir"===P}function S(P){if(!M(P))return null;if(G.isSome(P.statistics)&&P.statistics.length&&("vector-magdir"===P.dataType||"vector-uv"===P.dataType)){const {minMagnitude:ha,
maxMagnitude:da}=Z(P.dataType,P.statistics);var Y=[{type:"size",field:"Magnitude",minSize:10,maxSize:40,minDataValue:ha,maxDataValue:da}]}P=G.isSome(P.multidimensionalInfo)?fa.get(P.multidimensionalInfo.variables[0].unit):null;Y=new h({visualVariables:Y,inputUnit:P,rotationType:"geographic"});Y.visualVariables=[...Y.sizeVariables,...Y.rotationVariables];return Y}function X(P){var Y;return{color:null==(Y=P.symbolLayers[0].material)?void 0:Y.color,type:"esriSFS",style:"esriSFSSolid"}}function Z(P,Y){if("vector-magdir"===
P)P=Y[0].min,Y=Y[0].max;else{const ha=Y[0].min,da=Y[0].max,ja=Y[1].min;Y=Y[1].max;P=0;Y=Math.max(Math.abs(ha),Math.abs(ja),Math.abs(da),Math.abs(Y))}return{minMagnitude:P,maxMagnitude:Y}}const ca=A.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),aa=A.fromJSON(q.PREDEFINED_JSON_COLOR_RAMPS[0]),ea=new Set("scientific standard-time vector-uv vector-magdir vector-u vector-v vector-magnitude vector-direction".split(" ")),
fa=new Map([["m/s","meter-per-second"],["km/h","kilometer-per-hour"],["knots","knots"],["ft/s","feet-per-second"],["mph","mile-per-hour"]]);R.createClassBreaksRenderer=function(P,Y){P=b(P,null==Y?void 0:Y.variableName);const {attributeTable:ha}=P;if(!U(P))return null;const da=G.isSome(P.histograms)?P.histograms[0]:null,ja=isFinite(null==Y?void 0:Y.numClasses)?Y.numClasses:5,ka=new K({classificationMethod:null==Y?void 0:Y.classificationMethod,colorRamp:null==Y?void 0:Y.colorRamp});let ma=(null==Y?
void 0:Y.field)||"value";const ra=[],na=[],za=G.isSome(ha),ta=za&&ha.fields.find(ya=>"count"===ya.name.toLowerCase()),wa=za&&ha.fields.find(ya=>ya.name.toLowerCase()===ma.toLowerCase());if(wa){ma=wa.name;const ya=ha.features.length;let Ma=0;ha.features.forEach(Ia=>Ma+=(ta?Ia.attributes[ta.name]:50)/ya);ha.features.forEach(Ia=>{const Ka=Ia.attributes[wa.name];Ia=ta?Ia.attributes[ta.name]:50;if(0<Ia){na.push(Ia);Ia=Math.max(1,Math.round(Ia/ya/Ma*1E3));for(let Oa=0;Oa<Ia;Oa++)ra.push(Ka)}})}else{var {pixelType:Aa}=
P;const ya=(da.max-da.min)/da.size,Ma=(Aa=-1<Aa.indexOf("s")||-1<Aa.indexOf("u"))&&1===ya?Math.floor(da.min+.5):da.min,Ia=Aa&&1===ya?Math.floor(da.max-.5):da.max,Ka=da.size;let Oa=0,Qa;da.counts.forEach(Ja=>Oa+=Ja/Ka);da.counts.forEach((Ja,La)=>{if(0<Ja)for(na.push(Ja),Ja=Math.max(1,Math.round(Ja/Ka/Oa*1E3)),Qa=za?ha.features[La].attributes[wa.name]:0===La?Ma:La===Ka-1?Ia:da.min+ya*(La+.5),La=0;La<Ja;La++)ra.push(Qa)})}Aa=(null==Y?void 0:Y.classificationMethod)||"natural-breaks";let xa=null==Y?void 0:
Y.definedInterval;"defined-interval"!==Aa||xa||(xa=D(P,wa,ja));P=x.createGenerateRendererClassBreaks({values:ra,valueFrequency:na,normalizationTotal:null,definition:new B({classificationMethod:Aa,breakCount:ja,definedInterval:xa})});let va=null==Y?void 0:Y.colors;va||(Y=(null==Y?void 0:Y.colorRamp)||ca,ka.colorRamp=Y,va=q.convertColorRampToColormap(Y,P.classBreaks.length,!0).map(ya=>ya.slice(1)));Y=P.classBreaks.map((ya,Ma)=>new L({minValue:ya.minValue,maxValue:ya.maxValue,label:ya.label,symbol:{type:"simple-fill",
color:va[Ma]}}));return new u({field:ma,classBreakInfos:Y,authoringInfo:ka})};R.createColorRamp=function(P){const Y=[];for(let ha=0;ha<P.length-1;ha++)Y[ha]=new t({algorithm:"hsv",fromColor:P[ha],toColor:P[ha+1]||new z({r:255,g:255,b:255,a:1})});return 2<P.length?new A({colorRamps:Y}):Y[0]};R.createColormapRenderer=E;R.createDefaultRenderer=function(P,Y){const {attributeTable:ha,colormap:da}=P;if(M(P)){var ja=S(P);if(G.isSome(ja))return ja}return G.isSome(da)&&(ja=E(P),G.isSome(ja))||G.isSome(ha)&&
(ja=v(P),G.isSome(ja))?ja:l(P,Y)};R.createFlowRenderer=function(P){if(!Q(P))return null;let Y;if(G.isSome(P.statistics)&&0<P.statistics.length&&("vector-magdir"===P.dataType||"vector-uv"===P.dataType)){const {minMagnitude:ha,maxMagnitude:da}=Z(P.dataType,P.statistics);Y=[{type:"color",field:"Magnitude",stops:[{value:ha,color:"#1020C0"},{value:da,color:"#C02010"}]}]}return new W({visualVariables:Y})};R.createShadedReliefRenderer=function(P,Y){var ha;if(!N(P))return null;({extent:P}=P);P=P.width*m.getMetersPerUnitForSR(P.spatialReference);
Y=null!=(ha=Y)?ha:"multi-directional";return new g({hillshadeType:Y,scalingType:5E6<P?"adjusted":"none"})};R.createStretchRenderer=l;R.createUVRenderer=v;R.createVectorFieldRenderer=S;R.estimateMagnitudeRange=Z;R.getBandNames=function(P,Y){var ha;const da=P.keyProperties&&P.keyProperties.BandProperties;Y=null!=(ha=Y)&&ha.length?Y:Array.from(Array(P.bandCount).keys());return Y.map(ja=>da&&da.length===P.bandCount?da[ja]&&da[ja].BandName||"band_"+(ja+1):"band_"+(ja+1))};R.getClassField=w;R.getDefaultBandCombination=
c;R.getDefaultInterpolation=function(P,Y,ha){const da=["nearest","bilinear","cubic","majority"].find(ja=>ja===(null==ha?void 0:ha.toLowerCase()));return"Map"===Y?null!=da?da:"bilinear":"standard-time"===P.dataType?null!=da?da:"nearest":"thematic"===P.dataType||P.attributeTable||P.colormap?"nearest"===da||"majority"===da?da:"nearest":null!=da?da:"bilinear"};R.getDefinedInterval=D;R.getField=y;R.getSupportedRendererTypes=function(P){const Y=["raster-stretch"];p(P)&&Y.push("raster-colormap");C(P)&&Y.push("unique-value");
U(P)&&Y.push("class-breaks");N(P)&&Y.push("raster-shaded-relief");M(P)&&Y.push("vector-field");Q(P)&&Y.push("flow");return Y};R.getWellKnownBandIndexes=e;R.isClassBreaksSupported=U;R.isColormapRendererSupported=p;R.isFlowRendererSupported=Q;R.isShadedReliefRendererSupported=N;R.isSingleBand8BitRasterWithStats=F;R.isUVRendererSupported=C;R.isVectorFieldRendererSupported=M;R.normalizeRendererJSON=function(P){if("uniqueValue"===P.type){var Y,ha=P.uniqueValueInfos,da=ha[0].symbol;null!=da&&null!=(Y=da.symbolLayers)&&
Y.length&&(P.uniqueValueInfos=ha.map(ja=>({value:ja.value,label:ja.label,symbol:ja.symbol?X(ja.symbol):null})));return P}"classBreaks"===P.type&&(Y=P.classBreakInfos,da=Y[0].symbol,null!=da&&null!=(ha=da.symbolLayers)&&ha.length&&(P.classBreakInfos=Y.map(ja=>({classMinValue:ja.classMinValue,classMaxValue:ja.classMaxValue,label:ja.label,symbol:ja.symbol?X(ja.symbol):null}))));return P};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(R,z,r,G,m,T,O,W,K){m=new r.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});r=new r.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});K=function(L){function q(){var d=L.apply(this,arguments)||this;d.breakCount=null;d.classificationField=
null;d.classificationMethod=null;d.normalizationField=null;d.normalizationType=null;d.type="class-breaks-definition";return d}R._inheritsLoose(q,L);R._createClass(q,[{key:"standardDeviationInterval",set:function(d){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",d)}},{key:"definedInterval",set:function(d){"defined-interval"===this.classificationMethod&&this._set("definedInterval",d)}}]);return q}(K);z.__decorate([G.property({json:{write:!0}})],K.prototype,"breakCount",
void 0);z.__decorate([G.property({json:{write:!0}})],K.prototype,"classificationField",void 0);z.__decorate([G.property({type:String,json:{read:m.read,write:m.write}})],K.prototype,"classificationMethod",void 0);z.__decorate([G.property({json:{write:!0}})],K.prototype,"normalizationField",void 0);z.__decorate([G.property({json:{read:r.read,write:r.write}})],K.prototype,"normalizationType",void 0);z.__decorate([G.property({value:null,json:{write:!0}})],K.prototype,"standardDeviationInterval",null);
z.__decorate([G.property({value:null,json:{write:!0}})],K.prototype,"definedInterval",null);z.__decorate([G.property()],K.prototype,"type",void 0);return K=z.__decorate([W.subclass("esri.rest.support.ClassBreaksDefinition")],K)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(R,z,r,G,m,T,O,W,K,L,q){r=new r.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});G=function(d){function t(){var B=d.apply(this,arguments)||this;B.baseSymbol=null;B.colorRamp=null;B.type=null;return B}R._inheritsLoose(t,d);return t}(G.JSONSupport);z.__decorate([m.property({type:q,json:{write:!0}})],G.prototype,"baseSymbol",void 0);z.__decorate([m.property({types:L.types,json:{read:{reader:L.fromJSON},write:!0}})],G.prototype,"colorRamp",void 0);z.__decorate([m.property({json:{read:r.read,
write:r.write}})],G.prototype,"type",void 0);return G=z.__decorate([K.subclass("esri.rest.support.ClassificationDefinition")],G)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(R){function z(q){const {classificationMethod:d,breakCount:t,normalizationType:B,definedInterval:x}=q.definition,A=[];var a=q.values;if(0===a.length)return[];a=a.sort((l,b)=>l-b);var k=a[0],f=a[a.length-1];if("equal-interval"===d)if(a.length>=t){a=(f-k)/t;q=k;for(var g=1;g<t;g++){var u=Number((k+
g*a).toFixed(6));A.push({minValue:q,maxValue:u,label:r(q,u,B)});q=u}A.push({minValue:q,maxValue:f,label:r(q,f,B)})}else a.forEach(l=>{A.push({minValue:l,maxValue:l,label:r(l,l,B)})});else if("natural-breaks"===d){a=G(a);q=m(a.uniqueValues,q.valueFrequency||a.valueFrequency,t);for(g=1;g<t;g++)a.uniqueValues.length>g&&(u=Number(a.uniqueValues[q[g]].toFixed(6)),A.push({minValue:k,maxValue:u,label:r(k,u,B)}),k=u);A.push({minValue:k,maxValue:f,label:r(k,f,B)})}else if("quantile"===d)if(a.length>=t&&k!==
f){q=Math.ceil(a.length/t);g=0;for(u=1;u<t;u++){var h=q+g-1;h>a.length&&(h=a.length-1);0>h&&(h=0);A.push({minValue:k,maxValue:a[h],label:r(k,a[h],B)});k=a[h];g+=q;q=Math.ceil((a.length-g)/(t-u))}A.push({minValue:k,maxValue:f,label:r(k,f,B)})}else for(f=-1,k=0;k<a.length;k++)q=a[k],q!==f&&(f=q,A.push({minValue:f,maxValue:q,label:r(f,q,B)}),f=q);else if("standard-deviation"===d)if(q=W(a),g=K(a,q),0===g)A.push({minValue:a[0],maxValue:a[0],label:r(a[0],a[0],B)});else{a=O(k,f,t,q,g)*g;g=0;for(u=t;1<=u;u--)h=
Number((q-(u-.5)*a).toFixed(6)),A.push({minValue:k,maxValue:h,label:r(k,h,B)}),k=h,g++;u=Number((q+.5*a).toFixed(6));A.push({minValue:k,maxValue:u,label:r(k,u,B)});k=u;g++;for(h=1;h<=t;h++)u=g===2*t?f:Number((q+(h+.5)*a).toFixed(6)),A.push({minValue:k,maxValue:u,label:r(k,u,B)}),k=u,g++}else if("defined-interval"===d){if(!x)return A;f=a[0];a=a[a.length-1];k=Math.ceil((a-f)/x);q=f;for(g=1;g<k;g++)u=Number((f+g*x).toFixed(6)),A.push({minValue:q,maxValue:u,label:r(q,u,B)}),q=u;A.push({minValue:q,maxValue:a,
label:r(q,a,B)})}return A}function r(q,d,t){let B=null;return B=q===d?t&&"percent-of-total"===t?q+"%":q.toString():t&&"percent-of-total"===t?q+"% - "+d+"%":q+" - "+d}function G(q){const d=[],t=[];let B=Number.MIN_VALUE,x=1,A=-1;for(let a=0;a<q.length;a++){const k=q[a];k===B?(x++,t[A]=x):null!==k&&(d.push(k),B=k,x=1,t.push(x),A++)}return{uniqueValues:d,valueFrequency:t}}function m(q,d,t){var B=q.length;const x=[];t>B&&(t=B);for(var A=0;A<t;A++)x.push(Math.round(A*B/t-1));x.push(B-1);A=T(x,q,d,t);{B=
A.mean;A=A.sdcm;var a=t,k=0,f=0;let u=0,h=0,l=!0;for(let b=0;2>b&&l;b++){0===b&&(l=!1);for(var g=0;g<a-1;g++)for(;x[g+1]+1!==x[g+2];)if(x[g+1]+=1,k=L(g,x,q,d),u=k.sbMean,k=k.sbSdcm,f=L(g+1,x,q,d),h=f.sbMean,f=f.sbSdcm,k+f<A[g]+A[g+1])A[g]=k,A[g+1]=f,B[g]=u,B[g+1]=h,l=!0;else{--x[g+1];break}for(g=a-1;0<g;g--)for(;x[g]!==x[g-1]+1;)if(--x[g],k=L(g-1,x,q,d),u=k.sbMean,k=k.sbSdcm,f=L(g,x,q,d),h=f.sbMean,f=f.sbSdcm,k+f<A[g-1]+A[g])A[g-1]=k,A[g]=f,B[g-1]=u,B[g]=h,l=!0;else{x[g]+=1;break}}B=l}B&&(A=T(x,q,
d,t));return x}function T(q,d,t,B){let x=[];var A=[],a=[];let k=0;const f=[],g=[];for(var u=0;u<B;u++){var h=L(u,q,d,t);f.push(h.sbMean);g.push(h.sbSdcm);k+=g[u]}h=k;for(u=!0;u||k<h;){u=!1;x=[];for(A=0;A<B;A++)x.push(q[A]);for(a=0;a<B;a++)for(h=q[a]+1;h<=q[a+1];h++)if(A=d[h],0<a&&h!==q[a+1]&&Math.abs(A-f[a])>Math.abs(A-f[a-1]))q[a]=h;else if(a<B-1&&q[a]!==h-1&&Math.abs(A-f[a])>Math.abs(A-f[a+1])){q[a+1]=h-1;break}h=k;k=0;A=[];a=[];for(let l=0;l<B;l++){A.push(f[l]);a.push(g[l]);const b=L(l,q,d,t);
f[l]=b.sbMean;g[l]=b.sbSdcm;k+=g[l]}}if(k>h){for(d=0;d<B;d++)q[d]=x[d],f[d]=A[d],g[d]=a[d];k=h}return{mean:f,sdcm:g}}function O(q,d,t,B,x){q=Math.max(B-q,d-B)/x/t;return 1<=q?1:.5<=q?.5:.25}function W(q){let d=0;for(let t=0;t<q.length;t++)d+=q[t];return d/=q.length}function K(q,d){let t=0;for(let B=0;B<q.length;B++){const x=q[B];t+=(x-d)*(x-d)}t/=q.length;return Math.sqrt(t)}function L(q,d,t,B){var x=0,A=0;for(var a=d[q]+1;a<=d[q+1];a++){const k=B[a];x+=t[a]*k;A+=k}0>=A&&console.log("Exception in Natural Breaks calculation");
x/=A;A=0;for(a=d[q]+1;a<=d[q+1];a++)A+=B[a]*(t[a]-x)**2;return{sbMean:x,sbSdcm:A}}R.createGenerateRendererClassBreaks=function(q){const {normalizationTotal:d}=q;return{classBreaks:z(q),normalizationTotal:d}};R.createGenerateRendererUniqueValues=function(q){q=G(q);const d=[],t=q.uniqueValues.length;for(let B=0;B<t;B++){const x=q.uniqueValues[B];d.push({value:x,count:q.valueFrequency[B],label:x.toString()})}return{uniqueValues:d}};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/colorUtils ../../core/JSONSupport ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/surfaceUtils ./colorRampUtils".split(" "),
function(R,z,r,G,m,T,O,W,K,L,q,d,t,B,x){function A(u,h){const {attributeTable:l,bandCount:b}=u;return!T.isSome(l)||1<b||h&&null==l.fields.find(c=>c.name.toLowerCase()===h.toLowerCase())?!1:!0}function a(u){const {bandCount:h,colormap:l}=u;return T.isSome(l)&&l.length&&1===h}function k(u){return t.isValidPixelBlock(u)&&0!==u.validPixelCount}const f=m.getLogger("esri.renderers.support.RasterSymbolizer"),g={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,
4294967295],s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*1E39],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};G=function(u){function h(b){return u.call(this,b)||this}R._inheritsLoose(h,u);var l=h.prototype;l.bind=function(){const {rendererJSON:b}=this;if(!b)return{success:!1};this.lookup={rendererJSON:{}};let c;switch(b.type){case "uniqueValue":c=this._updateUVRenderer(b);break;case "rasterColormap":c=this._updateColormapRenderer(b);break;case "rasterStretch":c=this._updateStretchRenderer(b);break;
case "classBreaks":c=this._updateClassBreaksRenderer(b);break;case "rasterShadedRelief":c=this._updateShadedReliefRenderer(b);break;case "vectorField":c=this._updateVectorFieldRenderer();break;case "flowRenderer":c=this._updateFlowRenderer()}return c};l.symbolize=function(b){let c=b&&b.pixelBlock;if(!k(c))return c;if(b.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(c,b.simpleStretchParams);try{3<c.pixels.length&&(c=t.extractBands(c,[0,1,2]));let e;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":e=
this._symbolizeColormap(c);break;case "classBreaks":e=this._symbolizeClassBreaks(c);break;case "rasterStretch":e=this._symbolizeStretch(c,b.bandIds);break;case "rasterShadedRelief":({extent:b}=b),e=this._symbolizeShadedRelief(c,{isGCS:b.spatialReference.isGeographic,resolution:{x:(b.xmax-b.xmin)/c.width,y:(b.ymax-b.ymin)/c.height}})}return e}catch(e){return f.error("symbolize",e.message),c}};l.simpleStretch=function(b,c){if(!k(b))return b;try{return 3<b.pixels.length&&(b=t.extractBands(b,[0,1,2])),
t.stretch(b,c)}catch(e){return f.error("symbolize",e.message),b}};l.generateWebGLParameters=function(b){if(-1<["uniqueValue","rasterColormap","classBreaks"].indexOf(this.rendererJSON.type)){var c;const {indexedColormap:J,offset:y}=(null==(c=this.lookup)?void 0:c.colormapLut)||{};return{colormap:J,colormapOffset:y,type:"lut"}}const {pixelBlock:e,isGCS:n,resolution:v,bandIds:w}=b;({rendererJSON:b}=this);return"rasterStretch"===b.type?this._generateStretchWebGLParams(e,b,w):"rasterShadedRelief"===b.type?
this._generateShadedReliefWebGLParams(b,n,v):"vectorField"===b.type?this._generateVectorFieldWebGLParams(b):null};l._isLUTChanged=function(b){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const c=this.rendererJSON.colorRamp;if(b)return JSON.stringify(c)!==JSON.stringify(this.lookup.rendererJSON.colorRamp);({...this.rendererJSON});({...this.lookup.rendererJSON})}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)};l._symbolizeColormap=
function(b){return this._isLUTChanged()&&!this.bind().success?b:t.colorize(b,this.lookup.colormapLut)};l._symbolizeClassBreaks=function(b){const c=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType);return this._isLUTChanged()&&!this.bind().success?b:c?t.colorize(b,this.lookup.colormapLut):t.remapColor(b,this.lookup.remapLut)};l._symbolizeStretch=function(b,c){const {pixelType:e,bandCount:n}=this.rasterInfo,v=this.rendererJSON,w=-1<["u8","u16","s8","s16"].indexOf(e);let J;var {dra:y}=v;
var C=v.useGamma?v.gamma:null;if("histogramEqualization"===v.stretchType){var p=y?null:this.lookup.histogramLut;c=this._getStretchCutoff(v,b,c,!p);C=t.stretch(b,{...c,gamma:C});C=t.lookupPixels(C,{lut:y?c.histogramLut:p,offset:0})}else if(w){var E;if(y)y=this._getStretchCutoff(v,b,c),J=t.createStretchLUT({pixelType:e,...y,gamma:C});else{if(this._isLUTChanged()&&!this.bind().success)return b;J=this.lookup?this.lookup.stretchLut:null}if(!J)return b;1<n&&(null==c?void 0:c.length)===(null==(p=T.unwrap(b))?
void 0:p.pixels.length)&&(null==(E=J)?void 0:E.lut.length)===n&&(J={lut:c.map(N=>J.lut[N]),offset:J.offset});C=t.lookupPixels(b,J)}else y=this._getStretchCutoff(v,b,c),C=t.stretch(b,{...y,gamma:C});if(v.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return b;C=t.colorize(C,this.lookup.colormapLut)}return C};l._symbolizeShadedRelief=function(b,c){var e,n,v=this.rendererJSON;c=B.hillshade(b,{...v,...c});if(!v.colorRamp||this._isLUTChanged(!0)&&!this.bind().success)return c;v=this.lookup?
this.lookup.hsvMap:null;if(!v)return c;const w=null!=(e=null==(n=T.unwrap(this.rasterInfo.statistics))?void 0:n[0])?e:{min:0,max:8E3};B.tintHillshade(c,b,v,w);return c};l._isVectorFieldData=function(){const {bandCount:b,dataType:c}=this.rasterInfo;return 2===b&&("vector-magdir"===c||"vector-uv"===c)};l._updateVectorFieldRenderer=function(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}};
l._updateFlowRenderer=function(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}};l._updateUVRenderer=function(b){const {bandCount:c,attributeTable:e,pixelType:n}=this.rasterInfo,v=b.field1;if(!v)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const w=b.defaultSymbol;var J=1===c&&["u8","s8"].includes(n);if(!A(this.rasterInfo,v)&&!J)return{success:!1,
error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};const y=[];if(e){const C=e.fields.find(p=>"value"===p.name.toLowerCase());if(!C)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};e.features.forEach(p=>{var E,N=b.uniqueValueInfos.find(U=>String(U.value)===String(p.attributes[v]));(N=null==N?void 0:null==(E=N.symbol)?void 0:E.color)?y.push([p.attributes[C.name]].concat(N)):
w&&y.push([p.attributes[C.name]].concat(w.color))})}else{if("value"!==v.toLowerCase())return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not availalbe.'};b.uniqueValueInfos.forEach(C=>{var p;const E=null==C?void 0:null==(p=C.symbol)?void 0:p.color;E?y.push([parseInt(""+C.value,10)].concat(E)):w&&y.push([parseInt(""+C.value,10)].concat(w.color))})}if(0===y.length)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};
J=t.createColormapLUT({colormap:y});this.lookup={rendererJSON:b,colormapLut:J};this.canRenderInWebGL=!0;return{success:!0}};l._updateColormapRenderer=function(b){if(!a(this.rasterInfo))return{success:!1,error:"Unsupported data; the data source does not have a colormap."};var c=b.colormapInfos.map(e=>[e.value].concat(e.color)).sort((e,n)=>e[0]-n[0]);if(!c||0===c.length)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};c=t.createColormapLUT({colormap:c});
this.lookup={rendererJSON:b,colormapLut:c};this.canRenderInWebGL=!0;return{success:!0}};l._updateShadedReliefRenderer=function(b){if("elevation"!==this.rasterInfo.dataType)return{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation".`};if(b.colorRamp){var c=x.convertColorRampToColormap(b.colorRamp,256,!0);c=t.createColormapLUT({colormap:c});const e=[],n=c.indexedColormap;for(let v=0;v<n.length;v+=4){const w=r.toHSV({r:n[v],g:n[v+1],b:n[v+
2]});e.push([w.h/60,w.s/100,255*w.v/100])}this.lookup={rendererJSON:b,colormapLut:c,hsvMap:e}}else this.lookup=null;this.canRenderInWebGL=!0;return{success:!0}};l._updateClassBreaksRenderer=function(b){var c=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType),e=b.classBreakInfos;if(null==e||!e.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};e=e.sort((y,C)=>y.classMaxValue-C.classMaxValue);const n=e[e.length-1];var v=b.minValue;
if(!c){c=[];for(var w=0;w<e.length;w++){var J;c.push({value:null!=(J=e[w].classMinValue)?J:v,mappedColor:e[w].symbol.color});v=e[w].classMaxValue}c.push({value:n.classMaxValue,mappedColor:n.symbol.color});this.lookup={rendererJSON:b,remapLut:c};this.canRenderInWebGL=!1;return{success:!0}}J=[];v=Math.floor(b.minValue);for(c=0;c<e.length;c++){for(w=e[c];v<w.classMaxValue;v++)J.push([v].concat(w.symbol.color));v=Math.ceil(w.classMaxValue)}n.classMaxValue===v&&J.push([n.classMaxValue].concat(n.symbol.color));
e=t.createColormapLUT({colormap:J,fillUnspecified:!1});this.lookup={rendererJSON:b,colormapLut:e};this.canRenderInWebGL=!0;return{success:!0}};l._isHistogramRequired=function(b){return"percentClip"===b||"histogramEqualization"===b};l._isValidRasterStatistics=function(b){return T.isSome(b)&&0<b.length&&null!=b[0].min&&null!=b[0].max};l._updateStretchRenderer=function(b){var c;let {stretchType:e,dra:n}=b;if(!("none"===e||null!=(c=b.statistics)&&c.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||
n))return{success:!1,error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};var v=T.unwrap(b.histograms||this.rasterInfo.histograms);!this._isHistogramRequired(b.stretchType)||null!=v&&v.length||n||(e="minMax");const {gamma:w,useGamma:J,colorRamp:y}=b;c=this.rasterInfo.pixelType;const C=!n&&-1<["u8","u16","s8","s16"].indexOf(c);"histogramEqualization"===e?(c=v.map(p=>t.createHistogramEqualizationLUT(p)),this.lookup={rendererJSON:b,histogramLut:c}):
C&&(v=this._getStretchCutoff(b),c=t.createStretchLUT({pixelType:c,...v,gamma:J?w:null}),this.lookup={rendererJSON:b,stretchLut:c});y&&(c=x.convertColorRampToColormap(y,256,!0),this.lookup||(this.lookup={rendererJSON:b}),this.lookup.colormapLut=t.createColormapLUT({colormap:c}),this.lookup.rendererJSON=b);this.canRenderInWebGL=!0;return{success:!0}};l._getStretchCutoff=function(b,c=null,e,n){var v,w,J,y=b.stretchType;if(b.dra)if("minMax"===y&&T.isSome(c)&&c.statistics)c=c.statistics.map(Q=>[Q.minValue,
Q.maxValue,0,0]);else{var C=t.estimateStatisticsHistograms(c);c=T.isSome(C)?C.statistics:null;C=T.isSome(C)?C.histograms:null}else{var p;c=0<(null==(p=b.statistics)?void 0:p.length)?b.statistics:T.unwrap(this.rasterInfo.statistics);C=b.histograms||T.unwrap(this.rasterInfo.histograms)}!this._isHistogramRequired(y)||null!=(v=C)&&v.length||(y="minMax");p=(null==(w=c)?void 0:w.length)||(null==(J=C)?void 0:J.length)||this.rasterInfo.bandCount;w=[];J=[];let E;let N,U,D;c&&!Array.isArray(c[0])&&(c=c.map(Q=>
[Q.min,Q.max,Q.avg,Q.stddev]));switch(y){case "none":c=g[this.rasterInfo.pixelType]||g.f32;for(v=0;v<p;v++)w[v]=c[0],J[v]=c[1];break;case "minMax":for(v=0;v<p;v++)w[v]=c[v][0],J[v]=c[v][1];break;case "standardDeviation":for(v=0;v<p;v++)w[v]=c[v][2]-b.numberOfStandardDeviations*c[v][3],J[v]=c[v][2]+b.numberOfStandardDeviations*c[v][3],w[v]<c[v][0]&&(w[v]=c[v][0]),J[v]>c[v][1]&&(J[v]=c[v][1]);break;case "histogramEqualization":for(v=0;v<p;v++)w[v]=C[v].min,J[v]=C[v].max;break;case "percentClip":for(v=
0;v<C.length;v++){c=C[v];N=new Uint32Array(c.size);var F=[...c.counts];20<=F.length&&(F[0]=F[1]=F[2]=F[F.length-1]=F[F.length-2]=0);E=0;p=(c.max-c.min)/c.size;U=-.5===c.min&&1===p?.5:0;for(D=0;D<c.size;D++)E+=F[D],N[D]=E;F=(b.minPercent||0)*E/100;for(D=0;D<c.size;D++)if(N[D]>F){w[v]=c.min+p*(D+U);break}F=(1-(b.maxPercent||0)/100)*E;for(D=c.size-2;0<=D;D--)if(N[D]<F){J[v]=c.min+p*(D+2-U);break}}break;default:for(v=0;v<p;v++)w[v]=c[v][0],J[v]=c[v][1]}let M;"histogramEqualization"===y?(y=C[0].size||
256,b=0,n&&(M=C.map(Q=>t.createHistogramEqualizationLUT(Q)))):(y=b.max||255,b=b.min||0);return this._getSelectedBandCutoffs({minCutOff:w,maxCutOff:J,outMax:y,outMin:b,histogramLut:M},e)};l._getSelectedBandCutoffs=function(b,c){if(null==c||0===c.length)return b;const e=Math.max.apply(null,c),{minCutOff:n,maxCutOff:v,outMin:w,outMax:J,histogramLut:y}=b;return n.length===c.length||n.length<=e?b:{minCutOff:c.map(C=>n[C]),maxCutOff:c.map(C=>v[C]),histogramLut:y?c.map(C=>y[C]):null,outMin:w,outMax:J}};
l._generateStretchWebGLParams=function(b,c,e){let n=null,v=null;var w=this.lookup&&this.lookup.colormapLut;c.colorRamp&&w&&(n=w.indexedColormap,v=w.offset);"histogramEqualization"===c.stretchType&&(c={...c,stretchType:"minMax"});({gamma:w}=c);const J=!!(c.useGamma&&w&&w.some(F=>1!==F)),{minCutOff:y,maxCutOff:C,outMin:p,outMax:E}=this._getStretchCutoff(c,b,e);var N=0;T.isSome(b)&&(N=b.getPlaneCount(),2===N&&(b=b.clone(),b.statistics=[b.statistics[0]],b.pixels=[b.pixels[0]]));b=Math.min(3,(null==e?
void 0:e.length)||N||this.rasterInfo.bandCount);e=new Float32Array(b);N=n||J?1:255;let U;for(U=0;U<b;U++)e[U]=(E-p)/(C[U]-y[U])/N;const D=new Float32Array(b);if(J)for(U=0;U<b;U++)D[U]=1<w[U]?2<w[U]?6.5+(w[U]-2)**2.5:6.5+100*(2-w[U])**4:1;return{bandCount:b,outMin:p/N,outMax:E/N,minCutOff:y,maxCutOff:C,factor:e,useGamma:J,gamma:J?w:[1,1,1],gammaCorrection:J?D:[1,1,1],colormap:n,colormapOffset:v,stretchType:c.stretchType,type:"stretch"}};l._generateShadedReliefWebGLParams=function(b,c,e){var n,v,w;
let J=null,y=null;const C=this.lookup&&this.lookup.colormapLut;b.colorRamp&&C&&(J=C.indexedColormap,y=C.offset);c=B.calculateHillshadeParams({...b,isGCS:c,resolution:e});e=null==(n=T.unwrap(this.rasterInfo.statistics))?void 0:n[0];return{...c,minValue:null!=(v=null==e?void 0:e.min)?v:0,maxValue:null!=(w=null==e?void 0:e.max)?w:8E3,hillshadeType:"traditional"===b.hillshadeType?0:1,type:"hillshade",colormap:J,colormapOffset:y}};l._generateVectorFieldWebGLParams=function(b){var c,e,n,v,w,J,y,C;const {style:p,
inputUnit:E,outputUnit:N,visualVariables:U,symbolTileSize:D,flowRepresentation:F}=b;let M;var Q=null!=(c=null==(e=this.rasterInfo.statistics)?void 0:e[0].min)?c:0;c=null!=(n=null==(v=this.rasterInfo.statistics)?void 0:v[0].max)?n:50;n=null!=(w=null==U?void 0:U.find(S=>"sizeInfo"===S.type))?w:{type:"sizeInfo",field:"Magnitude",maxDataValue:c,maxSize:.8*D,minDataValue:Q,minSize:.2*D};w=null!=(J=n.minDataValue)?J:Q;Q=null!=(y=n.maxDataValue)?y:c;y=T.isSome(n.maxSize)&&T.isSome(n.minSize)?[n.minSize/
D,n.maxSize/D]:[.2,.8];"wind_speed"===p&&(y[0]=y[1]=(y[0]+y[1])/2);J=T.isSome(w)&&T.isSome(Q)?[w,Q]:null;if("classified_arrow"===p)if(T.isSome(w)&&T.isSome(Q)&&T.isSome(n))for(M=[],w=(n.maxDataValue-n.minDataValue)/5,Q=0;6>Q;Q++)M.push(n.minDataValue+w*Q);else M=[0,1E-6,3.5,7,10.5,14];n="flow_to"===F===("ocean_current_kn"===p||"ocean_current_m"===p)?0:Math.PI;w=null==U?void 0:U.find(S=>"rotationInfo"===S.type);b=(null==(C=this.rasterInfo.storageInfo)?0:C.tileInfo)&&"vector-uv"===this.rasterInfo.dataType?
"geographic":(null==w?void 0:w.rotationType)||b.rotationType;return{breakValues:M,dataRange:J,inputUnit:E,outputUnit:N,symbolTileSize:D,symbolPercentRange:y,style:p||"single_arrow",rotation:n,rotationType:b,type:"vectorField"}};return h}(G.JSONSupport);z.__decorate([O.property({json:{write:!0}})],G.prototype,"rendererJSON",void 0);z.__decorate([O.property({type:d,json:{write:!0}})],G.prototype,"rasterInfo",void 0);z.__decorate([O.property({json:{write:!0}})],G.prototype,"lookup",void 0);z.__decorate([O.property()],
G.prototype,"canRenderInWebGL",void 0);return G=z.__decorate([q.subclass("esri.renderers.support.RasterSymbolizer")],G)})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports","../PixelBlock","./pixelUtils"],function(R,z,r){function G(m){let {altitude:T,azimuth:O}=m;const {hillshadeType:W,pixelSizePower:K,pixelSizeFactor:L,scalingType:q,isGCS:d,resolution:t}=m;var B="multi-directional"===W?2*m.zFactor:m.zFactor;const {x,y:A}=t;m=B/(8*x);var a=B/(8*A);d&&.001<B&&(m/=111E3,
a/=111E3);"adjusted"===q&&(d?(m=111E3*x,a=111E3*A,m=(B+m**K*L)/(8*m),a=(B+a**K*L)/(8*a)):(m=(B+x**K*L)/(8*x),a=(B+A**K*L)/(8*A)));var k=(90-T)*Math.PI/180;B=Math.cos(k);let f=(360-O+90)*Math.PI/180,g=Math.sin(k)*Math.cos(f);k=Math.sin(k)*Math.sin(f);const u=[315,270,225,360,180,0],h=[60,60,60,60,60,90];var l=new Float32Array([3,5,3,2,1,4]);const b=l.reduce((w,J)=>w+J);l=l.map(w=>w/b);const c="multi-directional"===W?u.length:1,e=new Float32Array(6),n=new Float32Array(6),v=new Float32Array(6);if("multi-directional"===
W)for(let w=0;w<c;w++)T=h[w],O=u[w],k=(90-T)*Math.PI/180,B=Math.cos(k),f=(360-O+90)*Math.PI/180,g=Math.sin(k)*Math.cos(f),k=Math.sin(k)*Math.sin(f),e[w]=B,n[w]=g,v[w]=k;else e.fill(B),n.fill(g),v.fill(k);return{resolution:t,factor:[m,a],sinZcosA:g,sinZsinA:k,cosZ:B,sinZcosAs:n,sinZsinAs:v,cosZs:e,weights:l,hillshadeType:["traditional","multi-directional"].indexOf(W)}}R.calculateHillshadeParams=G;R.hillshade=function(m,T){if(!r.isValidPixelBlock(m))return m;const {width:O,height:W,mask:K}=m,L=new Uint8Array(O*
W);K&&L.set(K);const {factor:q,sinZcosA:d,sinZsinA:t,cosZ:B,sinZcosAs:x,sinZsinAs:A,cosZs:a,weights:k}=G(T),[f,g]=q;var {hillshadeType:u}=T;const h=m.pixels[0];T=new Uint8Array(O*W);let l;for(let y=1;y<W-1;y++){const C=y*O;for(let p=1;p<O-1;p++)if(K&&!K[C+p])T[C+p]=0;else{var b=8;if(K&&(b=K[C-O+p-1]+K[C-O+p]+K[C-O+p+1]+K[C+p-1]+K[C+p+1]+K[C+O+p-1]+K[C+O+p]+K[C+O+p+1],7>b)){T[C+p]=0;L[C+p]=0;continue}if(7===b){var c=K[C-O+p-1]?h[C-O+p-1]:h[C+p];var e=K[C-O+p]?h[C-O+p]:h[C+p];var n=K[C-O+p+1]?h[C-O+
p+1]:h[C+p];b=K[C+p-1]?h[C+p-1]:h[C+p];l=K[C+p+1]?h[C+p+1]:h[C+p];var v=K[C+O+p-1]?h[C+O+p-1]:h[C+p];var w=K[C+O+p]?h[C+O+p]:h[C+p];var J=K[C+O+p+1]?h[C+O+p+1]:h[C+p]}else c=h[C-O+p-1],e=h[C-O+p],n=h[C-O+p+1],b=h[C+p-1],l=h[C+p+1],v=h[C+O+p-1],w=h[C+O+p],J=h[C+O+p+1];b=(n+l+l+J-(c+b+b+v))*f;c=(v+w+w+J-(c+e+e+n))*g;e=Math.sqrt(1+b*b+c*c);n=0;if("traditional"===u)b=255*(B+t*c-d*b)/e,0>b&&(b=0),n=b;else for(v=A.length,w=0;w<v;w++)J=255*(a[w]+A[w]*c-x[w]*b)/e,0>J&&(J=0),n+=J*k[w];T[C+p]=n&255}}for(u=
0;u<W;u++)T[u*O]=T[u*O+1],T[(u+1)*O-1]=T[(u+1)*O-2];for(u=1;u<O-1;u++)T[u]=T[u+O],T[u+(W-1)*O]=T[u+(W-2)*O];return new z({width:O,height:W,pixels:[T],mask:K?L:null,pixelType:"u8",validPixelCount:m.validPixelCount,statistics:[{minValue:0,maxValue:255}]})};R.tintHillshade=function(m,T,O,W){if(r.isValidPixelBlock(m)&&r.isValidPixelBlock(T)){var {min:K,max:L}=W;W=m.pixels[0];var {pixels:q,mask:d}=T;T=q[0];var t=255.00001/(L-K),B=new Uint8ClampedArray(T.length),x=new Uint8ClampedArray(T.length),A=new Uint8ClampedArray(T.length),
a=O.length-1;for(let g=0;g<T.length;g++){if(d&&0===d[g])continue;var k=Math.floor((T[g]-K)*t);const [u,h]=O[0>k?0:k>a?a:k];var f=W[g];k=f*h;const l=k*(1-Math.abs(u%2-1));f-=k;switch(Math.floor(u)){case 0:B[g]=k+f;x[g]=l+f;A[g]=f;break;case 1:B[g]=l+f;x[g]=k+f;A[g]=f;break;case 2:B[g]=f;x[g]=k+f;A[g]=l+f;break;case 3:B[g]=f;x[g]=l+f;A[g]=k+f;break;case 4:B[g]=l+f;x[g]=f;A[g]=k+f;break;case 5:case 6:B[g]=k+f,x[g]=f,A[g]=l+f}}m.pixels=[B,x,A];m.updateStatistics()}};Object.defineProperty(R,"__esModule",
{value:!0})})},"esri/rest/imageService":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../geometry ../request ../core/maybe ../geometry/support/normalizeUtils ./utils ./support/ImageAngleResult ./support/ImageIdentifyResult ./support/ImageSampleResult ./support/ImagePixelLocationResult ../geometry/SpatialReference".split(" "),function(R,z,r,G,m,T,O,W,K,L,q,d){function t(b){const c=null==b?void 0:b.time;if(c&&(null!=c.start||null!=c.end)){const e=[];null!=c.start&&e.push(c.start);null!=
c.end&&-1===e.indexOf(c.end)&&e.push(c.end);b.time=e.join(",")}}function B(b,c,e){return x.apply(this,arguments)}function x(){x=z._asyncToGenerator(function*(b,c,e){b=O.parseUrl(b);var n=yield T.normalizeCentralMeridian(c.geometry?[c.geometry]:[]);c=c.toJSON();t(c);n=n&&n[0];m.isSome(n)&&(c.geometry=n.toJSON());b=O.encode({...b.query,f:"json",...c});return O.asValidOptions(b,e)});return x.apply(this,arguments)}function A(){A=z._asyncToGenerator(function*(b,c,e){var n,v=c.toJSON();m.isSome(v.angleName)&&
(v.angleName=v.angleName.join(","));m.isSome(c.point)&&null!=(n=c.point.spatialReference)&&n.imageCoordinateSystem&&(v.point.spatialReference=h(c.point.spatialReference));m.isSome(c.spatialReference)&&c.spatialReference.imageCoordinateSystem&&(v.spatialReference=l(c.spatialReference));b=O.parseUrl(b);v=O.encode({...b.query,f:"json",...v});e=O.asValidOptions(v,e);({data:e}=yield G(`${b.path}/computeAngles`,e));e.spatialReference=e.spatialReference?null!=e.spatialReference.geodataXform?new d({wkid:0,
imageCoordinateSystem:e.spatialReference}):d.fromJSON(e.spatialReference):null;"NaN"===e.north&&(e.north=null);"NaN"===e.up&&(e.up=null);return new W(e)});return A.apply(this,arguments)}function a(){a=z._asyncToGenerator(function*(b,c,e){var n=c.toJSON();({geometries:c}=c);for(let w=0;w<c.length;w++){var v;null!=(v=c[w].spatialReference)&&v.imageCoordinateSystem&&(n.geometries.geometries[w].spatialReference=h(c[w].spatialReference))}b=O.parseUrl(b);n=O.encode({...b.query,f:"json",...n});e=O.asValidOptions(n,
e);({data:e}=yield G(`${b.path}/computePixelLocation`,e));return q.fromJSON(e)});return a.apply(this,arguments)}function k(){k=z._asyncToGenerator(function*(b,c,e){c=yield B(b,c,e);b=O.parseUrl(b);({data:b}=yield G(`${b.path}/computeStatisticsHistograms`,c));({statistics:c}=b);null!=c&&c.length&&c.forEach(n=>{n.avg=n.mean;n.stddev=n.standardDeviation});return{statistics:c,histograms:b.histograms}});return k.apply(this,arguments)}function f(){f=z._asyncToGenerator(function*(b,c,e){c=yield B(b,c,e);
b=O.parseUrl(b);({data:b}=yield G(`${b.path}/computeHistograms`,c));return{histograms:b.histograms}});return f.apply(this,arguments)}function g(){g=z._asyncToGenerator(function*(b,c,e){var n,v,w=c.toJSON();t(w);null!=(n=w.outFields)&&n.length&&(w.outFields=w.outFields.join(","));c=yield T.normalizeCentralMeridian(c.geometry);c=null==c?void 0:c[0];m.isSome(c)&&(w.geometry=c.toJSON());b=O.parseUrl(b);w=O.encode({...b.query,f:"json",...w});e=O.asValidOptions(w,e);({data:e}=yield G(`${b.path}/getSamples`,
e));e=null==e?void 0:null==(v=e.samples)?void 0:v.map(J=>{const y="NaN"===J.value||""===J.value?null:J.value.split(" ").map(C=>Number(C));return{...J,pixelValue:y}});return L.fromJSON({samples:e})});return g.apply(this,arguments)}function u(){u=z._asyncToGenerator(function*(b,c,e){const n=O.parseUrl(b);return T.normalizeCentralMeridian(c.geometry?[c.geometry]:[]).then(v=>{var w=c.toJSON();v=v&&v[0];m.isSome(v)&&(w.geometry=JSON.stringify(v.toJSON()));w=O.encode({...n.query,f:"json",...w});w=O.asValidOptions(w,
e);return G(n.path+"/identify",w)}).then(v=>K.fromJSON(v.data))});return u.apply(this,arguments)}function h(b){const {imageCoordinateSystem:c}=b;if(c){const {id:e,referenceServiceName:n}=c;return null!=e?n?{icsid:e,icsns:n}:{icsid:e}:{ics:c}}return b.toJSON()}function l(b,c){b=h(b);const {icsid:e,icsns:n,wkid:v}=b;return null!=e?null==n||null!=c&&c.toLowerCase().includes("/"+n.toLowerCase()+"/")?`0:${e}`:JSON.stringify(b):v?v.toString():JSON.stringify(b)}R.computeAngles=function(b,c,e){return A.apply(this,
arguments)};R.computeHistograms=function(b,c,e){return f.apply(this,arguments)};R.computePixelSpaceLocations=function(b,c,e){return a.apply(this,arguments)};R.computeStatisticsHistograms=function(b,c,e){return k.apply(this,arguments)};R.getImageSpatialReferenceJSON=h;R.getImageSpatialReferenceQueryParameter=l;R.getSamples=function(b,c,e){return g.apply(this,arguments)};R.identify=function(b,c,e){return u.apply(this,arguments)};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/rest/support/ImageAngleResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/SpatialReference".split(" "),
function(R,z,r,G,m,T,O,W,K,L){r=function(q){function d(){var t=q.apply(this,arguments)||this;t.north=null;t.up=null;t.spatialReference=null;return t}R._inheritsLoose(d,q);return d}(G.JSONSupport);z.__decorate([m.property({type:Number,json:{write:!0}})],r.prototype,"north",void 0);z.__decorate([m.property({type:Number,json:{write:!0}})],r.prototype,"up",void 0);z.__decorate([m.property({type:L,json:{write:!0}})],r.prototype,"spatialReference",void 0);return r=z.__decorate([K.subclass("esri.rest.support.ImageAngleResult")],
r)})},"esri/rest/support/ImageIdentifyResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point ./FeatureSet".split(" "),function(R,z,r,G,m,T,O,W,K,L){r=function(q){function d(){var t=q.apply(this,arguments)||this;t.catalogItemVisibilities=null;t.catalogItems=
null;t.location=null;t.name=null;t.objectId=null;t.processedValues=null;t.properties=null;t.value=null;return t}R._inheritsLoose(d,q);return d}(r.JSONSupport);z.__decorate([G.property({json:{write:!0}})],r.prototype,"catalogItemVisibilities",void 0);z.__decorate([G.property({type:L,json:{write:!0}})],r.prototype,"catalogItems",void 0);z.__decorate([G.property({type:K,json:{write:!0}})],r.prototype,"location",void 0);z.__decorate([G.property({json:{write:!0}})],r.prototype,"name",void 0);z.__decorate([G.property({json:{write:!0}})],
r.prototype,"objectId",void 0);z.__decorate([G.property({json:{write:!0}})],r.prototype,"processedValues",void 0);z.__decorate([G.property({json:{write:!0}})],r.prototype,"properties",void 0);z.__decorate([G.property({json:{write:!0}})],r.prototype,"value",void 0);return r=z.__decorate([W.subclass("esri.rest.support.ImageIdentifyResult")],r)})},"esri/rest/support/ImageSampleResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ImageSample".split(" "),
function(R,z,r,G,m,T,O,W,K){r=function(L){function q(){var d=L.apply(this,arguments)||this;d.samples=null;return d}R._inheritsLoose(q,L);return q}(r.JSONSupport);z.__decorate([G.property({type:[K],json:{write:!0}})],r.prototype,"samples",void 0);return r=z.__decorate([W.subclass("esri.rest.support.ImageSampleResult")],r)})},"esri/rest/support/ImageSample":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(R,z,r,G,m,T,O,W,K){r=function(L){function q(){var d=L.apply(this,arguments)||this;d.attributes=null;d.location=null;d.locationId=null;d.rasterId=null;d.resolution=null;d.pixelValue=null;return d}R._inheritsLoose(q,L);return q}(r.JSONSupport);z.__decorate([G.property({json:{write:!0}})],r.prototype,"attributes",void 0);z.__decorate([G.property({type:K,json:{write:!0}})],r.prototype,"location",void 0);z.__decorate([G.property({json:{write:!0}})],r.prototype,"locationId",void 0);z.__decorate([G.property({json:{write:!0}})],
r.prototype,"rasterId",void 0);z.__decorate([G.property({json:{write:!0}})],r.prototype,"resolution",void 0);z.__decorate([G.property({json:{write:!0}})],r.prototype,"pixelValue",void 0);return r=z.__decorate([W.subclass("esri.rest.support.ImageSample")],r)})},"esri/rest/support/ImagePixelLocationResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(R,z,r,G,m,T,O,W){r=function(K){function L(){var q=K.apply(this,arguments)||this;q.geometries=null;return q}R._inheritsLoose(L,K);return L}(r.JSONSupport);z.__decorate([G.property({json:{write:!0}})],r.prototype,"geometries",void 0);return r=z.__decorate([W.subclass("esri.rest.support.ImagePixelLocationResult")],r)})},"esri/rest/support/ImageAngleParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../geometry/SpatialReference".split(" "),
function(R,z,r,G,m,T,O,W,K,L){var q;r=q=function(d){function t(){var B=d.apply(this,arguments)||this;B.angleNames=null;B.point=null;B.spatialReference=null;B.rasterId=null;return B}R._inheritsLoose(t,d);t.prototype.clone=function(){return new q(m.clone({angleNames:this.angleNames,point:this.point,spatialReference:this.spatialReference,rasterId:this.rasterId}))};return t}(G.JSONSupport);z.__decorate([T.property({type:[String],json:{name:"angleName",write:!0}})],r.prototype,"angleNames",void 0);z.__decorate([T.property({type:K,
json:{write:!0}})],r.prototype,"point",void 0);z.__decorate([T.property({type:L,json:{write:!0}})],r.prototype,"spatialReference",void 0);z.__decorate([T.property({type:O.Integer,json:{write:!0}})],r.prototype,"rasterId",void 0);return r=q=z.__decorate([W.subclass("esri.rest.support.ImageAngleParameters")],r)})},"esri/rest/support/ImageHistogramParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/RasterFunction ../../geometry/Point".split(" "),
function(R,z,r,G,m,T,O,W,K,L,q,d,t,B){var x;m=x=function(A){function a(){var f=A.apply(this,arguments)||this;f.geometry=null;f.mosaicRule=null;f.renderingRule=null;f.pixelSize=null;f.raster=void 0;f.timeExtent=null;return f}R._inheritsLoose(a,A);var k=a.prototype;k.writeGeometry=function(f,g,u){null!=f&&(g.geometryType=q.getJsonType(f),g[u]=f.toJSON())};k.clone=function(){return new x(T.clone({geometry:this.geometry,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,
raster:this.raster,timeExtent:this.timeExtent}))};return a}(m.JSONSupport);z.__decorate([O.property({types:r.geometryTypes,json:{read:q.fromJSON}})],m.prototype,"geometry",void 0);z.__decorate([L.writer("geometry")],m.prototype,"writeGeometry",null);z.__decorate([O.property({type:d,json:{write:!0}})],m.prototype,"mosaicRule",void 0);z.__decorate([O.property({type:t,json:{write:!0}})],m.prototype,"renderingRule",void 0);z.__decorate([O.property({type:B,json:{write:!0}})],m.prototype,"pixelSize",void 0);
z.__decorate([O.property({json:{write:!0}})],m.prototype,"raster",void 0);z.__decorate([O.property({type:G,json:{read:{source:"time"},write:{target:"time"}}})],m.prototype,"timeExtent",void 0);return m=x=z.__decorate([K.subclass("esri.rest.support.ImageHistogramParameters")],m)})},"esri/rest/support/ImageIdentifyParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/RasterFunction".split(" "),
function(R,z,r,G,m,T,O,W,K,L,q,d,t,B){var x;G=x=function(A){function a(){var f=A.apply(this,arguments)||this;f.geometry=null;f.renderingRules=null;f.pixelSize=null;f.returnGeometry=!0;f.returnCatalogItems=!0;f.returnPixelValues=!0;f.maxItemCount=null;f.timeExtent=null;f.raster=void 0;f.viewId=void 0;f.processAsMultidimensional=!1;return f}R._inheritsLoose(a,A);var k=a.prototype;k.writeGeometry=function(f,g,u){null!=f&&(g.geometryType=d.getJsonType(f),g[u]=JSON.stringify(f.toJSON()))};k.writeMosaicRule=
function(f,g,u){null!=f&&(g[u]=JSON.stringify(f.toJSON()))};k.writeRenderingRule=function(f,g,u){null!=f&&(g[u]=JSON.stringify(f.toJSON()));f.rasterFunctionDefinition&&(g[u]=JSON.stringify(f.rasterFunctionDefinition))};k.writeRenderingRules=function(f,g,u){null!=f&&(g[u]=JSON.stringify(f.map(h=>h.rasterFunctionDefinition||h.toJSON())))};k.writePixelSize=function(f,g,u){null!=f&&(g[u]=JSON.stringify(f))};k.writeTimeExtent=function(f,g,u){if(null!=f){const h=T.isSome(f.start)?f.start.getTime():null;
f=T.isSome(f.end)?f.end.getTime():null;g[u]=null!=h?null!=f?`${h},${f}`:`${h}`:null}};k.clone=function(){return new x(m.clone({geometry:this.geometry,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,returnPixelValues:this.returnPixelValues,maxItemCount:this.maxItemCount,processAsMultidimensional:this.processAsMultidimensional,raster:this.raster,viewId:this.viewId,timeExtent:this.timeExtent}))};
R._createClass(a,[{key:"mosaicRule",set:function(f){f&&f.mosaicMethod&&(f=t.fromJSON({...f.toJSON(),mosaicMethod:f.mosaicMethod,mosaicOperation:f.mosaicOperation}));this._set("mosaicRule",f)}},{key:"renderingRule",set:function(f){f&&f.rasterFunction&&(f=B.fromJSON({...f.toJSON(),rasterFunction:f.rasterFunction,rasterFunctionArguments:f.rasterFunctionArguments}));this._set("renderingRule",f)}}]);return a}(G.JSONSupport);z.__decorate([O.property({json:{write:!0}})],G.prototype,"geometry",void 0);z.__decorate([L.writer("geometry")],
G.prototype,"writeGeometry",null);z.__decorate([O.property({type:t,json:{write:!0}})],G.prototype,"mosaicRule",null);z.__decorate([L.writer("mosaicRule")],G.prototype,"writeMosaicRule",null);z.__decorate([O.property({type:B,json:{write:!0}})],G.prototype,"renderingRule",null);z.__decorate([L.writer("renderingRule")],G.prototype,"writeRenderingRule",null);z.__decorate([O.property({type:[B],json:{write:!0}})],G.prototype,"renderingRules",void 0);z.__decorate([L.writer("renderingRules")],G.prototype,
"writeRenderingRules",null);z.__decorate([O.property({type:q,json:{write:!0}})],G.prototype,"pixelSize",void 0);z.__decorate([L.writer("pixelSize")],G.prototype,"writePixelSize",null);z.__decorate([O.property({type:Boolean,json:{write:!0}})],G.prototype,"returnGeometry",void 0);z.__decorate([O.property({type:Boolean,json:{write:!0}})],G.prototype,"returnCatalogItems",void 0);z.__decorate([O.property({type:Boolean,json:{write:!0}})],G.prototype,"returnPixelValues",void 0);z.__decorate([O.property({type:Number,
json:{write:!0}})],G.prototype,"maxItemCount",void 0);z.__decorate([O.property({type:r,json:{write:{target:"time"}}})],G.prototype,"timeExtent",void 0);z.__decorate([L.writer("timeExtent")],G.prototype,"writeTimeExtent",null);z.__decorate([O.property({json:{write:!0}})],G.prototype,"raster",void 0);z.__decorate([O.property({json:{write:!0}})],G.prototype,"viewId",void 0);z.__decorate([O.property({type:Boolean,json:{write:!0}})],G.prototype,"processAsMultidimensional",void 0);return G=x=z.__decorate([K.subclass("esri.rest.support.ImageIdentifyParameters")],
G)})},"esri/rest/support/ImagePixelLocationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point".split(" "),function(R,z,r,G,m,T,O,W,K,L,q){var d;r=d=function(t){function B(){var A=t.apply(this,
arguments)||this;A.geometries=null;A.rasterId=null;return A}R._inheritsLoose(B,t);var x=B.prototype;x.writeGeometry=function(A,a,k){a.geometries={geometryType:"esriGeometryPoint",geometries:A.map(f=>f.toJSON())}};x.clone=function(){return new d({geometries:this.geometries.map(A=>A.clone()),rasterId:this.rasterId})};return B}(G.JSONSupport);z.__decorate([m.property({type:[q],json:{write:!0}})],r.prototype,"geometries",void 0);z.__decorate([L.writer("geometries")],r.prototype,"writeGeometry",null);
z.__decorate([m.property({type:W.Integer,json:{write:!0}})],r.prototype,"rasterId",void 0);return r=d=z.__decorate([K.subclass("esri.rest.support.ImagePixelLocationParameters")],r)})},"esri/rest/support/ImageSampleParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/rasterEnums ../../geometry/Point ../../geometry/Multipoint".split(" "),
function(R,z,r,G,m,T,O,W,K,L,q,d,t,B,x){var A;m=A=function(a){function k(){var g=a.apply(this,arguments)||this;g.geometry=null;g.interpolation="nearest";g.mosaicRule=null;g.outFields=null;g.pixelSize=null;g.returnFirstValueOnly=!0;g.sampleDistance=null;g.sampleCount=null;g.sliceId=null;g.timeExtent=null;return g}R._inheritsLoose(k,a);var f=k.prototype;f.writeGeometry=function(g,u,h){null!=g&&(u.geometryType=q.getJsonType(g),u[h]=g.toJSON())};f.clone=function(){return new A(T.clone({geometry:this.geometry,
locations:this.locations,interpolation:this.interpolation,mosaicRule:this.mosaicRule,outFields:this.outFields,raster:this.raster,returnFirstValueOnly:this.returnFirstValueOnly,sampleDistance:this.sampleDistance,sampleCount:this.sampleCount,sliceId:this.sliceId,pixelSize:this.pixelSize,timeExtent:this.timeExtent}))};R._createClass(k,[{key:"locations",set:function(g){if(null!=g&&g.length){const u=new x({spatialReference:g[0].spatialReference});u.points=g.map(h=>[h.x,h.y]);this._set("locations",g);this.geometry=
u}}}]);return k}(m.JSONSupport);z.__decorate([O.property({types:r.geometryTypes,json:{read:q.fromJSON}})],m.prototype,"geometry",void 0);z.__decorate([L.writer("geometry")],m.prototype,"writeGeometry",null);z.__decorate([O.property()],m.prototype,"locations",null);z.__decorate([O.property({type:String,json:{type:t.interpolationKebab.jsonValues,read:t.interpolationKebab.read,write:t.interpolationKebab.write}})],m.prototype,"interpolation",void 0);z.__decorate([O.property({type:d,json:{write:!0}})],
m.prototype,"mosaicRule",void 0);z.__decorate([O.property({type:[String],json:{write:!0}})],m.prototype,"outFields",void 0);z.__decorate([O.property({type:B,json:{write:!0}})],m.prototype,"pixelSize",void 0);z.__decorate([O.property({type:String,json:{write:!0}})],m.prototype,"raster",void 0);z.__decorate([O.property({type:Boolean,json:{write:!0}})],m.prototype,"returnFirstValueOnly",void 0);z.__decorate([O.property({type:Number,json:{write:!0}})],m.prototype,"sampleDistance",void 0);z.__decorate([O.property({type:Number,
json:{write:!0}})],m.prototype,"sampleCount",void 0);z.__decorate([O.property({type:Number,json:{write:!0}})],m.prototype,"sliceId",void 0);z.__decorate([O.property({type:G,json:{read:{source:"time"},write:{target:"time"}}})],m.prototype,"timeExtent",void 0);return m=A=z.__decorate([K.subclass("esri.rest.support.ImageSampleParameters")],m)})},"esri/views/2d/engine/flow/dataUtils":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../geometry ../../../../core/Logger ../../../../core/mathUtils ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/RandomLCG ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/Extent".split(" "),
function(R,z,r,G,m,T,O,W,K,L){function q(){q=z._asyncToGenerator(function*(l,b,c){const e=performance.now();var n=d(l,b);const v=performance.now();n=B(l,n,b.width,b.height);b=performance.now();var w=A(n,!0);n=performance.now();w=a(w);const J=performance.now();l.profile&&h.info("createStreamlinesMesh profile",{"_createFlowFieldFromData()":Math.round(v-e),"_getStreamlines()":Math.round(b-v),"createAnimatedLinesData()":Math.round(n-b),"createLinesMesh()":Math.round(J-n),"Total elapsed time":Math.round(J-
e)});yield Promise.resolve();O.throwIfAborted(c);return w});return q.apply(this,arguments)}function d(l,b){const c=x(b.data,b.width,b.height,l.smoothing);return l.interpolate?(e,n)=>{const v=Math.floor(e),w=Math.floor(n);if(0>v||v>=b.width||0>w||w>=b.height)return[0,0];e-=v;n-=w;const J=v<b.width-1?v+1:v,y=w<b.height-1?w+1:w;return[(c[2*(w*b.width+v)]*(1-n)+c[2*(y*b.width+v)]*n)*(1-e)+(c[2*(w*b.width+J)]*(1-n)+c[2*(y*b.width+J)]*n)*e,(c[2*(w*b.width+v)+1]*(1-n)+c[2*(y*b.width+v)+1]*n)*(1-e)+(c[2*
(w*b.width+J)+1]*(1-n)+c[2*(y*b.width+J)+1]*n)*e]}:(e,n)=>{e=Math.round(e);n=Math.round(n);return 0>e||e>=b.width||0>n||n>=b.height?[0,0]:[c[2*(n*b.width+e)],c[2*(n*b.width+e)+1]]}}function t(l,b,c,e,n,v,w,J,y){const C=[];let p=0,[E,N]=b(c,e);E*=l.velocityScale;N*=l.velocityScale;C.push({x:c,y:e,t:p,speed:Math.sqrt(E*E+N*N)});for(let F=0;F<l.verticesPerLine;F++){let [M,Q]=b(c,e);M*=l.velocityScale;Q*=l.velocityScale;const S=Math.sqrt(M*M+Q*Q);if(S<l.minSpeedThreshold)break;const X=M/S,Z=Q/S;c+=X*
l.segmentLength;e+=Z*l.segmentLength;p+=l.segmentLength/S;if(Math.acos(X*U+Z*D)>l.maxTurnAngle)break;if(l.mergeLines){var U=Math.round(c*y);var D=Math.round(e*y);if(0>U||U>w-1||0>D||D>J-1)break;const ca=v[D*w+U];if(-1!==ca&&ca!==n)break;v[D*w+U]=n}C.push({x:c,y:e,t:p,speed:S});U=X;D=Z}return C}function B(l,b,c,e){const n=[],v=new W,w=1/Math.max(l.lineCollisionWidth,1),J=Math.round(c*w),y=Math.round(e*w),C=new Int32Array(J*y);for(var p=0;p<C.length;p++)C[p]=-1;p=[];for(let E=0;E<e;E+=l.lineSpacing)for(let N=
0;N<c;N+=l.lineSpacing)p.push({x:N,y:E,sort:v.getFloat()});p.sort((E,N)=>E.sort-N.sort);for(const {x:E,y:N}of p)v.getFloat()<l.density&&(c=t(l,b,E,N,n.length,C,J,y,w),2>c.length||n.push(c));return n}function x(l,b,c,e){if(0===e)return l;const n=Math.round(3*e),v=Array(2*n+1);var w=0;for(var J=-n;J<=n;J++){var y=Math.exp(-J*J/(e*e));v[J+n]=y;w+=y}for(e=-n;e<=n;e++)v[e+n]/=w;w=new Float32Array(l.length);for(e=0;e<c;e++)for(J=0;J<b;J++){var C=y=0;for(var p=-n;p<=n;p++)if(!(0>J+p||J+p>=b)){var E=v[p+
n];y+=E*l[2*(e*b+(J+p))];C+=E*l[2*(e*b+(J+p))+1]}w[2*(e*b+J)]=y;w[2*(e*b+J)+1]=C}l=new Float32Array(l.length);for(e=0;e<b;e++)for(J=0;J<c;J++){C=y=0;for(p=-n;p<=n;p++)0>J+p||J+p>=c||(E=v[p+n],y+=E*w[2*((J+p)*b+e)],C+=E*w[2*((J+p)*b+e)+1]);l[2*(J*b+e)]=y;l[2*(J*b+e)+1]=C}return l}function A(l,b){const c=new W;var e=l.reduce((J,y)=>J+y.length,0);e=new Float32Array(4*e);const n=Array(l.length);let v=0,w=0;for(const J of l){l=v;for(const y of J)e[4*v]=y.x,e[4*v+1]=y.y,e[4*v+2]=y.t,e[4*v+3]=y.speed,v++;
n[w++]={startVertex:l,numberOfVertices:J.length,totalTime:J[J.length-1].t,timeSeed:b?c.getFloat():0}}return{lineVertices:e,lineDescriptors:n}}function a(l,b=10){function c(U,D,F,M,Q,S,X,Z){const ca=9*y;let aa=0;J[ca+aa++]=U;J[ca+aa++]=D;J[ca+aa++]=1;J[ca+aa++]=F;J[ca+aa++]=S;J[ca+aa++]=X;J[ca+aa++]=M/2;J[ca+aa++]=Q/2;J[ca+aa++]=Z;y++;J[ca+aa++]=U;J[ca+aa++]=D;J[ca+aa++]=-1;J[ca+aa++]=F;J[ca+aa++]=S;J[ca+aa++]=X;J[ca+aa++]=-M/2;J[ca+aa++]=-Q/2;J[ca+aa++]=Z;y++}const {lineVertices:e,lineDescriptors:n}=
l;var v=l=0;for(var w of n)l+=2*w.numberOfVertices,v+=6*(w.numberOfVertices-1);const J=new Float32Array(9*l);w=new Uint32Array(v);let y=0;l=0;for(const U of n){const {totalTime:D,timeSeed:F}=U;let M=v=null,Q=null;var C=null,p=null,E=null;for(let S=0;S<U.numberOfVertices;S++){C=e[4*(U.startVertex+S)];const X=e[4*(U.startVertex+S)+1],Z=e[4*(U.startVertex+S)+2],ca=e[4*(U.startVertex+S)+3];let aa=null,ea=null;var N=null;let fa=null;0<S&&(aa=C-v,ea=X-M,N=Math.sqrt(aa*aa+ea*ea),aa/=N,ea/=N,1<S?(p=aa+p,
E=ea+E,N=Math.sqrt(p*p+E*E),p/=N,E/=N,N=Math.min(1/(p*aa+E*ea),b),p*=N,E*=N,N=-E,fa=p):(N=-ea,fa=aa),null!==N&&null!==fa&&(c(v,M,Q,N,fa,D,F,ca),w[l++]=y-2,w[l++]=y,w[l++]=y-1,w[l++]=y,w[l++]=y+1,w[l++]=y-1));v=C;M=X;Q=Z;p=aa;E=ea;C=ca}c(v,M,Q,-E,p,D,F,C)}return{vertexData:J,indexData:w}}function k(l,b){const c=b.pixels,{width:e,height:n}=b;b=new Float32Array(e*n*2);if("vector-uv"===l)for(l=0;l<e*n;l++)b[2*l]=c[0][l],b[2*l+1]=-c[1][l];else if("vector-magdir"===l)for(l=0;l<e*n;l++){const v=c[0][l],
w=m.deg2rad(c[1][l]),J=Math.sin(w-Math.PI/2);b[2*l]=Math.cos(w-Math.PI/2)*v;b[2*l+1]=J*v}return{data:b,width:e,height:n}}function f(){f=z._asyncToGenerator(function*(l,b,c,e,n,v){var w=K.getInfo(b.spatialReference);if(!w)return g(l,b,c,e,n,v);const [J,y]=w.valid;w=Math.ceil(b.width/(y-J));const C=b.width/w,p=Math.round(c/w);let E=b.xmin;const N=[];for(let U=0;U<w;U++){const D=new L({xmin:E,xmax:E+C,ymin:b.ymin,ymax:b.ymax,spatialReference:b.spatialReference});N.push(g(l,D,p,e,n,v));E+=C}b=yield Promise.all(N);
e={data:new Float32Array(c*e*2),width:c,height:e};l=0;for(const U of b){for(b=0;b<U.height;b++)for(n=0;n<U.width;n++)l+n>=c||(e.data[2*(b*c+l+n)]=U.data[2*(b*U.width+n)],e.data[2*(b*c+l+n)+1]=U.data[2*(b*U.width+n)+1]);l+=U.width}return e});return f.apply(this,arguments)}function g(l,b,c,e,n,v){return u.apply(this,arguments)}function u(){u=z._asyncToGenerator(function*(l,b,c,e,n,v){const w={requestProjectedLocalDirections:!0,signal:v};T.isSome(n)&&(w.timeExtent=n);if("imagery"===l.type)return yield l.load({signal:v}),
n=l.rasterInfo.dataType,l=yield l.fetchImage(b,c,e,w),!l||T.isNone(l.pixelData)||T.isNone(l.pixelData.pixelBlock)?{data:new Float32Array(c*e*2),width:c,height:e}:k(n,l.pixelData.pixelBlock);yield l.load({signal:v});n=l.rasterInfo.dataType;l=yield l.fetchPixels(b,c,e,w);return!l||T.isNone(l.pixelBlock)?{data:new Float32Array(c*e*2),width:c,height:e}:k(n,l.pixelBlock)});return u.apply(this,arguments)}const h=G.getLogger("esri.views.2d.engine.flow.dataUtils");R.createAnimatedLinesData=A;R.createLinesMesh=
a;R.createStreamlinesMesh=function(l,b,c){return q.apply(this,arguments)};R.fetchPart=g;R.loadImagery=function(l,b,c,e,n,v){return f.apply(this,arguments)};Object.defineProperty(R,"__esModule",{value:!0})})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../PopupTemplate ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./Layer ./mixins/ArcGISImageService ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/TemporalLayer ./support/commonProperties ./support/versionUtils ../support/popupUtils".split(" "),function(R,
z,r,G,m,T,O,W,K,L,q,d,t,B,x,A,a,k,f,g,u,h,l,b,c){m=function(e){function n(...w){w=e.call(this,...w)||this;w.legendEnabled=!0;w.isReference=null;w.operationalLayerType="ArcGISImageServiceLayer";w.popupEnabled=!0;w.popupTemplate=null;w.type="imagery";return w}R._inheritsLoose(n,e);var v=n.prototype;v.normalizeCtorArgs=function(w,J){return"string"===typeof w?{url:w,...J}:w};v.load=function(w){const J=G.isSome(w)?w.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},
w).catch(T.throwIfAbortError).then(()=>this._fetchService(J)));return Promise.resolve(this)};v.writeOperationalLayerType=function(w,J,y){var C;w="vector-field"===(null==(C=this.renderer)?void 0:C.type);J[y]=w?"ArcGISImageServiceVectorLayer":"ArcGISImageServiceLayer"};v.createPopupTemplate=function(w){const J=this.rasterFields,y=this.title,C=new Set;var p=!1;let E=!1;this.capabilities&&(E=(p=this.capabilities.operations.supportsQuery&&this.fields&&0<this.fields.length)&&("esriImageServiceDataTypeVector-UV"===
this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType));const N=new Set;p&&(N.add("raster.itempixelvalue"),E&&N.add("raster.magnitude").add("raster.direction"));for(const U of J)p=U.name.toLowerCase(),N.has(p)||-1<p.indexOf("raster.servicepixelvalue.")||C.add(U.name);return c.createPopupTemplate({fields:J,title:y},{...w,visibleFieldNames:C})};v.queryFeatures=function(w,J){return this.queryRasters(w,J).then(y=>{if(null!=y&&y.features)for(const C of y.features)C.layer=
C.sourceLayer=this;return y})};v.queryFeatureCount=function(w,J){return this.queryRasterCount(w,J)};v.redraw=function(){this.emit("redraw")};v.serviceSupportsSpatialReference=function(w){return b.serviceSupportsSpatialReference(this,w)};R._createClass(n,[{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}}]);return n}(A.BlendLayer(h.TemporalLayer(g.RefreshableLayer(u.ScaleRangeLayer(k.OperationalLayer(f.PortalLayer(B.ArcGISImageService(a.CustomParametersMixin(x.ArcGISService(m.MultiOriginJSONMixin(t)))))))))));
z.__decorate([O.property(l.legendEnabled)],m.prototype,"legendEnabled",void 0);z.__decorate([O.property({type:["show","hide"]})],m.prototype,"listMode",void 0);z.__decorate([O.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],m.prototype,"isReference",void 0);z.__decorate([O.property({type:["ArcGISImageServiceLayer"],json:{origins:{"web-map":{type:["ArcGISImageServiceLayer","ArcGISImageServiceVectorLayer"],read:!1,write:{target:"layerType",ignoreOrigin:!0}}}}})],
m.prototype,"operationalLayerType",void 0);z.__decorate([d.writer("web-map","operationalLayerType")],m.prototype,"writeOperationalLayerType",null);z.__decorate([O.property(l.popupEnabled)],m.prototype,"popupEnabled",void 0);z.__decorate([O.property({type:r,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],m.prototype,"popupTemplate",void 0);z.__decorate([O.property({readOnly:!0})],m.prototype,"defaultPopupTemplate",null);z.__decorate([O.property({readOnly:!0,json:{read:!1}})],m.prototype,
"type",void 0);return m=z.__decorate([q.subclass("esri.layers.ImageryLayer")],m)});