// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
require({cache:{"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(Q){return function(){function t(W){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(W&&W.steps)for(const u of W.steps)u instanceof Q?this.steps.push(u):this.steps.push(new Q({wkid:u.wkid,wkt:u.wkt,isInverse:u.isInverse}))}t.cacheKey=function(W,u){return[void 0!==W.wkid&&null!==W.wkid?W.wkid.toString():"-1",void 0!==W.wkt&&null!==W.wkt?W.wkt.toString():
"",void 0!==u.wkid&&null!==u.wkid?u.wkid.toString():"-1",void 0!==u.wkt&&null!==u.wkt?u.wkt.toString():""].join()};t.fromGE=function(W){const u=new t;let T="";for(const ha of W.steps)W=Q.fromGE(ha),u.steps.push(W),T+=W.uid.toString()+",";u._cached_projection={};u._gtlistentry=null;u._chain=T;return u};var ca=t.prototype;ca.getInverse=function(){const W=new t;W.steps=[];for(let u=this.steps.length-1;0<=u;u--)W.steps.push(this.steps[u].getInverse());return W};ca.getGTListEntry=function(){let W="";for(const u of this.steps)W+=
u.uid.toString()+",";W!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=W);return this._gtlistentry};ca.assignCachedGe=function(W,u,T){this._cached_projection[t.cacheKey(W,u)]=T};ca.getCachedGeTransformation=function(W,u){let T="";for(const ha of this.steps)T+=ha.uid.toString()+",";T!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=T);W=this._cached_projection[t.cacheKey(W,u)];return void 0===W?null:W};return t}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(Q){let t=0;return function(){function ca(W=null){this.uid=t++;W?(this._wkt=void 0!==W.wkt?W.wkt:null,this._wkid=void 0!==W.wkid?W.wkid:-1,this._isInverse=void 0!==W.isInverse?!0===W.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}ca.fromGE=function(W){const u=new ca;u._wkt=W.wkt;u._wkid=W.wkid;u._isInverse=W.isInverse;return u};ca.prototype.getInverse=function(){const W=new ca;W._wkt=this.wkt;W._wkid=this._wkid;W._isInverse=!this.isInverse;return W};Q._createClass(ca,[{key:"wkt",
get:function(){return this._wkt},set:function(W){this._wkt=W;this.uid=t++}},{key:"wkid",get:function(){return this._wkid},set:function(W){this._wkid=W;this.uid=t++}},{key:"isInverse",get:function(){return this._isInverse},set:function(W){this._isInverse=W;this.uid=t++}}]);return ca}()})},"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass".split(" "),
function(Q,t,ca,W,u,T,ha,na,ja,ma,O){var S;const U=ha.getLogger("esri.layers.support.PixelBlock");ca=S=function(z){function A(b){b=z.call(this,b)||this;b.width=null;b.height=null;b.pixelType="f32";b.validPixelCount=null;b.mask=null;b.maskIsAlpha=!1;b.pixels=null;b.statistics=null;return b}Q._inheritsLoose(A,z);A.createEmptyBand=function(b,h){return new (S.getPixelArrayConstructor(b))(h)};A.getPixelArrayConstructor=function(b){let h;switch(b){case "u1":case "u2":case "u4":case "u8":h=Uint8Array;break;
case "u16":h=Uint16Array;break;case "u32":h=Uint32Array;break;case "s8":h=Int8Array;break;case "s16":h=Int16Array;break;case "s32":h=Int32Array;break;case "f32":h=Float32Array;break;case "f64":h=Float64Array;break;case "c64":case "c128":case "unknown":h=Float32Array}return h};var w=A.prototype;w.castPixelType=function(b){if(!b)return"f32";b=b.toLowerCase();-1<["u1","u2","u4"].indexOf(b)?b="u8":-1==="unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").indexOf(b)&&(b="f32");return b};w.getPlaneCount=
function(){return this.pixels&&this.pixels.length};w.addData=function(b){if(!b.pixels||b.pixels.length!==this.width*this.height)throw new W("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(b.pixels);this.statistics.push(b.statistics||{minValue:null,maxValue:null})};w.getAsRGBA=function(){const b=new ArrayBuffer(this.width*this.height*
4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(b);break;default:this._fillFrom8Bit(b)}return new Uint8ClampedArray(b)};w.getAsRGBAFloat=function(){const b=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(b);return b};w.updateStatistics=function(){this.statistics=this.pixels.map(q=>this._calculateBandStatistics(q,this.mask));const b=this.mask;let h=0;if(b)for(let q=0;q<b.length;q++)b[q]&&h++;else h=this.width*
this.height;this.validPixelCount=h};w.clamp=function(b){if(b&&"f64"!==b&&"f32"!==b){switch(b){case "u8":var h=[0,255];break;case "u16":h=[0,65535];break;case "u32":h=[0,4294967295];break;case "s8":h=[-128,127];break;case "s16":h=[-32768,32767];break;case "s32":h=[-2147483648,2147483647];break;default:h=[-3.4*1E39,3.4*1E39]}var [q,g]=h;h=this.pixels;var k=this.width*this.height,p=h.length,m=[];for(let v=0;v<p;v++){var c=S.createEmptyBand(b,k);var f=h[v];for(let y=0;y<k;y++){var l=f[y];c[y]=l>g?g:l<
q?q:l}m.push(c)}this.pixels=m;this.pixelType=b}};w.extractBands=function(b){if(na.isNone(b)||0===b.length||null==this.pixels||0===this.pixels.length)return this;var h=this.pixels.length;const q=b.some(g=>g>=this.pixels.length);h=h===b.length&&!b.some((g,k)=>g!==k);return q||h?this:new S({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:b.map(g=>this.pixels[g]),statistics:this.statistics&&b.map(g=>this.statistics[g])})};
w.clone=function(){const b=new S({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});this.mask&&(b.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));let h;const q=S.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){b.pixels=[];const g=this.pixels[0].slice;for(h=0;h<this.pixels.length;h++)b.pixels[h]=g?this.pixels[h].slice(0,this.pixels[h].length):new q(this.pixels[h])}if(this.statistics)for(b.statistics=
[],h=0;h<this.statistics.length;h++)b.statistics[h]=T.clone(this.statistics[h]);return b};w._fillFrom8Bit=function(b){const {mask:h,maskIsAlpha:q,pixels:g}=this;if(b&&g&&g.length){var k,p;var m=k=p=g[0];3<=g.length?(k=g[1],p=g[2]):2===g.length&&(k=g[1]);var c=new Uint32Array(b),f=this.width*this.height;if(m.length!==f)U.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(h&&h.length===f)if(q)for(b=0;b<f;b++)h[b]&&(c[b]=h[b]<<24|p[b]<<16|k[b]<<8|m[b]);else for(b=0;b<
f;b++)h[b]&&(c[b]=-16777216|p[b]<<16|k[b]<<8|m[b]);else for(b=0;b<f;b++)c[b]=-16777216|p[b]<<16|k[b]<<8|m[b]}else U.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};w._fillFromNon8Bit=function(b){const {pixels:h,mask:q,statistics:g}=this;if(b&&h&&h.length){var k=this.pixelType,p=1,m=0;p=1;g&&0<g.length?(m=g.map(y=>y.minValue).reduce((y,C)=>Math.min(y,C)),p=g.map(y=>y.maxValue-y.minValue).reduce((y,C)=>Math.max(y,C)),p=255/p):(p=255,"s8"===k?(m=-128,p=127):"u16"===
k?p=65535:"s16"===k?(m=-32768,p=32767):"u32"===k?p=4294967295:"s32"===k?(m=-2147483648,p=2147483647):"f32"===k?(m=-3.4*1E39,p=3.4*1E39):"f64"===k&&(m=-Number.MAX_VALUE,p=Number.MAX_VALUE),p=255/(p-m));b=new Uint32Array(b);k=this.width*this.height;var c,f,l;var v=c=f=h[0];if(v.length!==k)return U.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=h.length)if(c=h[1],3<=h.length&&(f=h[2]),q&&q.length===k)for(l=0;l<k;l++)q[l]&&(b[l]=-16777216|(f[l]-m)*p<<16|(c[l]-m)*p<<
8|(v[l]-m)*p);else for(l=0;l<k;l++)b[l]=-16777216|(f[l]-m)*p<<16|(c[l]-m)*p<<8|(v[l]-m)*p;else if(q&&q.length===k)for(l=0;l<k;l++)c=(v[l]-m)*p,q[l]&&(b[l]=-16777216|c<<16|c<<8|c);else for(l=0;l<k;l++)c=(v[l]-m)*p,b[l]=-16777216|c<<16|c<<8|c}else U.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};w._fillFrom32Bit=function(b){const {pixels:h,mask:q}=this;if(!b||!h||!h.length)return U.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");
let g,k,p,m;g=k=p=h[0];3<=h.length?(k=h[1],p=h[2]):2===h.length&&(k=h[1]);const c=this.width*this.height;if(g.length!==c)return U.error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let f=0;if(q&&q.length===c)for(m=0;m<c;m++)b[f++]=g[m],b[f++]=k[m],b[f++]=p[m],b[f++]=q[m]&1;else for(m=0;m<c;m++)b[f++]=g[m],b[f++]=k[m],b[f++]=p[m],b[f++]=1};w._calculateBandStatistics=function(b,h){let q=Infinity,g=-Infinity;const k=b.length;let p,m=0;if(h)for(p=0;p<k;p++)h[p]&&(m=b[p],
q=m<q?m:q,g=m>g?m:g);else for(p=0;p<k;p++)m=b[p],q=m<q?m:q,g=m>g?m:g;return{minValue:q,maxValue:g}};return A}(u.JSONSupport);t.__decorate([ja.property({json:{write:!0}})],ca.prototype,"width",void 0);t.__decorate([ja.property({json:{write:!0}})],ca.prototype,"height",void 0);t.__decorate([ja.property({json:{write:!0}})],ca.prototype,"pixelType",void 0);t.__decorate([ma.cast("pixelType")],ca.prototype,"castPixelType",null);t.__decorate([ja.property({json:{write:!0}})],ca.prototype,"validPixelCount",
void 0);t.__decorate([ja.property({json:{write:!0}})],ca.prototype,"mask",void 0);t.__decorate([ja.property({json:{write:!0}})],ca.prototype,"maskIsAlpha",void 0);t.__decorate([ja.property({json:{write:!0}})],ca.prototype,"pixels",void 0);t.__decorate([ja.property({json:{write:!0}})],ca.prototype,"statistics",void 0);return ca=S=t.__decorate([O.subclass("esri.layers.support.PixelBlock")],ca)})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../PixelBlock ./ImageCanvasDecoder ./JpgPlus ./Lerc ./Lzw ../../../chunks/Zlib ./Raw ./TiffDecoder ./utils".split(" "),
function(Q,t,ca,W,u,T,ha,na,ja,ma,O,S){function U(n,I){return z.apply(this,arguments)}function z(){z=t._asyncToGenerator(function*(n,I){var ka;if(!S.isPlatformLittleEndian)throw new ca("rasterCoded:decode","lerc decoder is not supported on big endian platform");yield ha.load();const {offset:Y,noDataValue:E}=I;(I=null==(ka=I.pixelType)?void 0:ka.toUpperCase())&&!L.has(I)&&(I=null);const {width:e,height:r,pixelType:x,statistics:B,pixels:J,mask:M}=ha.decode(n,{inputOffset:Y,noDataValue:E,pixelType:I});
return new W({width:e,height:r,pixelType:x.toLowerCase(),pixels:J,mask:M,statistics:B})});return z.apply(this,arguments)}function A(n,I){return w.apply(this,arguments)}function w(){w=t._asyncToGenerator(function*(n,I){n=yield O.decode(n,I.pyramidLevel||0);n=new W({width:n.width,height:n.height,pixels:n.pixels,pixelType:n.pixelType.toLowerCase(),mask:n.mask,statistics:null});n.updateStatistics();return n});return w.apply(this,arguments)}function b(n,I){return h.apply(this,arguments)}function h(){h=
t._asyncToGenerator(function*(n,I){n=yield O.decodeTileOrStrip(n,I.customOptions);n=new W({width:n.width,height:n.height,pixels:n.pixels,pixelType:n.pixelType.toLowerCase(),mask:n.mask,statistics:null});n.updateStatistics();return n});return h.apply(this,arguments)}function q(n,I){const ka=I.pixelType||"u8",Y=W.getPixelArrayConstructor(ka),E="u8"===ka?n:new Y(n.buffer),e=[],r=I.planes||1;if(1===r)e.push(E);else for(let x=0;x<r;x++){const B=(I.width||1)*(I.height||n.length),J=new Y(B);for(let M=0;M<
B;M++)J[M]=E[M*r+x];e.push(J)}n=new W({width:I.width||1,height:I.height||n.length,pixels:e,pixelType:ka,statistics:null});n.updateStatistics();return n}function g(n,I){n=(new ja.Zlib(new Uint8Array(n))).getBytes();return q(n,I)}function k(n,I){n=na.decode(n,I.offset,I.eof,!I.isInputBigEndian);return q(n,I)}function p(n){n=T.decode(n);n=new W({width:n.width,height:n.height,pixels:n.pixels,pixelType:"U8",mask:n.mask,statistics:null});n.updateStatistics();return n}function m(n,I){n=new Uint8Array(n);
n=new F(n);const {width:ka,height:Y}=I;I=ka*Y;n=n.decode();let E=0;var e=0;let r;e=new Uint8Array(I);for(E=0;E<I;E++)e[E]=n[4*E+3];const x=new W({width:ka,height:Y,pixels:[],pixelType:"U8",mask:e,statistics:[]});for(E=0;3>E;E++){r=new Uint8Array(I);for(e=0;e<I;e++)r[e]=n[4*e+E];x.addData({pixels:r})}x.updateStatistics();return x}function c(n,I,ka,Y){return f.apply(this,arguments)}function f(){f=t._asyncToGenerator(function*(n,I,ka,Y){n=yield(new u).decode(n,{applyJpegMask:!1,format:I,...ka},Y);n=
new W(n);n.updateStatistics();return n});return f.apply(this,arguments)}function l(n){if(null==n)throw new ca("rasterCodec:decode","parameter encodeddata is required.");n=new Uint8Array(n,0,10);let I="";255===n[0]&&216===n[1]?I="jpg":137===n[0]&&80===n[1]&&78===n[2]&&71===n[3]?I="png":67===n[0]&&110===n[1]&&116===n[2]&&90===n[3]&&73===n[4]&&109===n[5]&&97===n[6]&&103===n[7]&&101===n[8]&&32===n[9]?I="lerc":76===n[0]&&101===n[1]&&114===n[2]&&99===n[3]&&50===n[4]&&32===n[5]?I="lerc2":73===n[0]&&73===
n[1]&&42===n[2]&&0===n[3]||77===n[0]&&77===n[1]&&0===n[2]&&42===n[3]||73===n[0]&&73===n[1]&&43===n[2]&&0===n[3]||77===n[0]&&77===n[1]&&0===n[2]&&43===n[3]?I="tiff":71===n[0]&&73===n[1]&&70===n[2]?I="gif":66===n[0]&&77===n[1]?I="bmp":-1<String.fromCharCode.apply(null,n).toLowerCase().indexOf("error")&&(I="error");return I}function v(n){let I=null;switch(n){case "lerc":case "lerc2":I=U;break;case "jpg":I=p;break;case "png":I=m;break;case "bsq":case "bip":I=(ka,Y)=>{{var E=Y.pixelType;var e=null;let r=
null;switch(E?E.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":r=255;e=Uint8Array;break;case "u16":r=r||65535;e=Uint16Array;break;case "u32":r=r||2**32-1;e=Uint32Array;break;case "s8":r=r||-128;e=Int8Array;break;case "s16":r=r||-32768;e=Int16Array;break;case "s32":r=r||-(2**31);e=Int32Array;break;default:e=Float32Array}E={pixelTypeCtor:e,noDataValue:r}}({pixelTypeCtor:E}=E);e=ma.decode;ka=e(ka,{width:Y.width,height:Y.height,pixelType:E,format:n});Y=new W({width:Y.width,height:Y.height,
pixels:ka.pixels,pixelType:Y.pixelType,mask:ka.mask,statistics:null});Y.updateStatistics();return Y};break;case "tiff":I=A;break;case "deflate":I=g;break;case "lzw":I=k;break;case "error":I=()=>{throw new ca("rasterCodec:decode","input data contains error");};break;default:I=()=>{throw new ca("rasterCodec:decode","unsupported raster format");}}return I}function y(n,I=1){if(n){var {pixels:ka,width:Y,height:E,mask:e}=n;if(ka&&0!==ka.length){var r=ka.length,x=Y-1,B=E-1,J=[],M,R,P=W.getPixelArrayConstructor(n.pixelType);
if(0===I){for(I=0;I<r;I++){var X=ka[I];var Z=new P(x*B);for(M=0;M<B;M++){var a=M*Y;for(R=0;R<x;R++)Z[M*x+R]=X[a+R]}J.push(Z)}if(e){var d=new Uint8Array(x*B);for(M=0;M<B;M++)for(a=M*Y,R=0;R<x;R++)d[M*x+R]=e[a+R]}}else{for(I=0;I<r;I++){X=ka[I];Z=new P(x*B);for(M=0;M<B;M++)for(a=M*Y,R=0;R<x;R++)Z[M*x+R]=(X[a+R]+X[a+R+1]+X[a+Y+R]+X[a+Y+R+1])/4;J.push(Z)}if(e)for(d=new Uint8Array(x*B),M=0;M<B;M++)for(a=M*Y,R=0;R<x;R++)d[M*x+R]=Math.min.apply(null,[e[a+R],e[a+R+1],e[a+Y+R],e[a+Y+R+1]])}n.width=x;n.height=
B;n.mask=d;n.pixels=J}}}function C(){C=t._asyncToGenerator(function*(n,I={},ka){if(null==n)throw new ca("rasterCodec:decode","missing encodeddata parameter.");let Y=I.format&&I.format.toLowerCase();if(!("bsq"!==Y&&"bip"!==Y||null!=I.width&&null!=I.height))throw new ca("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===Y&&I.customOptions)return b(n,I);if(!Y||"bsq"!==Y&&"bip"!==Y&&"deflate"!==Y&&"lzw"!==Y)Y=l(n);I.useCanvas&&N.has(Y)?n=yield c(n,Y,I,ka):(ka=v(Y),I.isPoint&&
(I={...I},I.width++,I.height++),n=yield ka(n,I),I.isPoint&&y(n));return n});return C.apply(this,arguments)}var F=function(n){function I(e){var r,x;this.data=e;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(x=null;;){var B=this.readUInt32();var J=e=void 0;e=[];for(J=0;4>J;++J)e.push(String.fromCharCode(this.data[this.pos++]));e=e.join("");switch(e){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];
this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(B);break;case "fcTL":x&&this.animation.frames.push(x);this.pos+=4;x={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};e=this.readUInt16();
B=this.readUInt16()||100;x.delay=1E3*e/B;x.disposeOp=this.data[this.pos++];x.blendOp=this.data[this.pos++];x.data=[];break;case "IDAT":case "fdAT":"fdAT"===e&&(this.pos+=4,B-=4);e=(null!=x?x.data:void 0)||this.imgData;for(J=0;0<=B?J<B:J>B;0<=B?++J:--J)e.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(B);B=255-this.transparency.indexed.length;if(0<B)for(e=0;0<=B?e<B:e>B;0<=B?++e:--e)this.transparency.indexed.push(255);
break;case 0:this.transparency.grayscale=this.read(B)[0];break;case 2:this.transparency.rgb=this.read(B)}break;case "tEXt":J=this.read(B);B=J.indexOf(0);e=String.fromCharCode.apply(String,J.slice(0,B));this.text[e]=String.fromCharCode.apply(String,J.slice(B+1));break;case "IEND":x&&this.animation.frames.push(x);a:{switch(this.colorType){case 0:case 3:case 4:x=1;break a;case 2:case 6:x=3;break a}x=void 0}this.colors=x;this.hasAlphaChannel=4===(r=this.colorType)||6===r;r=this.colors+(this.hasAlphaChannel?
1:0);this.pixelBitlength=this.bits*r;a:{switch(this.colors){case 1:r="DeviceGray";break a;case 3:r="DeviceRGB";break a}r=void 0}this.colorSpace=r;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=B}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var ka;I.load=function(e,r,x){"function"===typeof r&&(x=r);var B=new XMLHttpRequest;B.open("GET",e,!0);B.responseType="arraybuffer";B.onload=function(){var J=new Uint8Array(B.response||B.mozResponseArrayBuffer);
J=new I(J);"function"===typeof(null!=r?r.getContext:void 0)&&J.render(r);return"function"===typeof x?x(J):void 0};return B.send(null)};I.prototype.read=function(e){var r;var x=[];for(r=0;0<=e?r<e:r>e;0<=e?++r:--r)x.push(this.data[this.pos++]);return x};I.prototype.readUInt32=function(){var e=this.data[this.pos++]<<24;var r=this.data[this.pos++]<<16;var x=this.data[this.pos++]<<8;var B=this.data[this.pos++];return e|r|x|B};I.prototype.readUInt16=function(){var e=this.data[this.pos++]<<8;var r=this.data[this.pos++];
return e|r};I.prototype.decodePixels=function(e){var r,x,B,J,M,R,P,X;null==e&&(e=this.imgData);if(0===e.length)return new Uint8Array(0);e=new ja.Zlib(e);e=e.getBytes();var Z=this.pixelBitlength/8;var a=Z*this.width;var d=new Uint8Array(a*this.height);var D=e.length;for(x=J=M=0;J<D;){switch(e[J++]){case 0:for(B=r=0;r<a;B=r+=1)d[x++]=e[J++];break;case 1:for(B=R=0;R<a;B=R+=1){r=e[J++];var G=B<Z?0:d[x-Z];d[x++]=(r+G)%256}break;case 2:for(B=G=0;G<a;B=G+=1){r=e[J++];var aa=(B-B%Z)/Z;R=M&&d[(M-1)*a+aa*Z+
B%Z];d[x++]=(R+r)%256}break;case 3:for(B=X=0;X<a;B=X+=1)r=e[J++],aa=(B-B%Z)/Z,G=B<Z?0:d[x-Z],R=M&&d[(M-1)*a+aa*Z+B%Z],d[x++]=(r+Math.floor((G+R)/2))%256;break;case 4:for(B=X=0;X<a;B=X+=1){r=e[J++];aa=(B-B%Z)/Z;G=B<Z?0:d[x-Z];0===M?R=P=0:(R=d[(M-1)*a+aa*Z+B%Z],P=aa&&d[(M-1)*a+(aa-1)*Z+B%Z]);var da=G+R-P;B=Math.abs(da-G);aa=Math.abs(da-R);da=Math.abs(da-P);G=B<=aa&&B<=da?G:aa<=da?R:P;d[x++]=(r+G)%256}break;default:throw Error("Invalid filter algorithm: "+e[J-1]);}M++}return d};I.prototype.decodePalette=
function(){var e,r,x,B,J;var M=this.palette;var R=this.transparency.indexed||[];var P=new Uint8Array((R.length||0)+M.length);var X=x=e=r=0;for(B=M.length;x<B;X=x+=3)P[r++]=M[X],P[r++]=M[X+1],P[r++]=M[X+2],P[r++]=null!=(J=R[e++])?J:255;return P};I.prototype.copyToImageData=function(e,r){var x,B;var J=this.colors;var M=null;var R=this.hasAlphaChannel;this.palette.length&&(M=null!=(x=this._decodedPalette)?x:this._decodedPalette=this.decodePalette(),J=4,R=!0);e=e.data||e;var P=e.length;var X=M||r;x=B=
0;if(1===J)for(;x<P;)J=M?4*r[x/4]:B,B=X[J++],e[x++]=B,e[x++]=B,e[x++]=B,e[x++]=R?X[J++]:this.transparency.grayscale&&this.transparency.grayscale===B?0:255,B=J;else for(;x<P;)J=M?4*r[x/4]:B,e[x++]=X[J++],e[x++]=X[J++],e[x++]=X[J++],e[x++]=R?X[J++]:this.transparency.rgb&&this.transparency.rgb[1]===X[J-3]&&this.transparency.rgb[3]===X[J-2]&&this.transparency.rgb[5]===X[J-1]?0:255,B=J};I.prototype.decode=function(){var e=new Uint8Array(this.width*this.height*4);this.copyToImageData(e,this.decodePixels());
return e};var Y=(ka=n.document&&n.document.createElement("canvas"))&&ka.getContext("2d");var E=function(e){Y.width=e.width;Y.height=e.height;Y.clearRect(0,0,e.width,e.height);Y.putImageData(e,0,0);e=new Image;e.src=ka.toDataURL();return e};I.prototype.decodeFrames=function(e){var r,x;if(this.animation){var B=this.animation.frames;var J=[];var M=r=0;for(x=B.length;r<x;M=++r){M=B[M];var R=e.createImageData(M.width,M.height);var P=this.decodePixels(new Uint8Array(M.data));this.copyToImageData(R,P);M.imageData=
R;J.push(M.image=E(R))}return J}};I.prototype.renderFrame=function(e,r){var x=this.animation.frames;var B=x[r];x=x[r-1];0===r&&e.clearRect(0,0,this.width,this.height);1===(null!=x?x.disposeOp:void 0)?e.clearRect(x.xOffset,x.yOffset,x.width,x.height):2===(null!=x?x.disposeOp:void 0)&&e.putImageData(x.imageData,x.xOffset,x.yOffset);0===B.blendOp&&e.clearRect(B.xOffset,B.yOffset,B.width,B.height);return e.drawImage(B.image,B.xOffset,B.yOffset)};I.prototype.animate=function(e){var r,x=this;var B=0;var J=
this.animation;var M=J.numFrames;var R=J.frames;var P=J.numPlays;return(r=function(){var X=B++%M;var Z=R[X];x.renderFrame(e,X);if(1<M&&B/M<P)return x.animation._timeout=setTimeout(r,Z.delay)})()};I.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)};I.prototype.render=function(e){e._png&&e._png.stopAnimation();e._png=this;e.width=this.width;e.height=this.height;e=e.getContext("2d");if(this.animation)return this.decodeFrames(e),this.animate(e);
var r=e.createImageData(this.width,this.height);this.copyToImageData(r,this.decodePixels());return e.putImageData(r,0,0)};return I}(self);const N=new Set(["jpg","png","bmp","gif"]),L=new Set("S8 U8 S16 U16 S32 U32 F32 F64".split(" "));Q.decode=function(n){return C.apply(this,arguments)};Q.getFormat=function(n){n=l(n);"lerc2"===n?n="lerc":"error"===n&&(n="");return n};Object.defineProperty(Q,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../core/Error",
"../../../core/promiseUtils","../../../chunks/Zlib"],function(Q,t,ca){return function(){function W(u){u&&(this.canvas=u.canvas,this.ctx=u.ctx||u.canvas&&u.canvas.getContext("2d"))}W.prototype.decode=function(u,T,ha){if(!u||10>u.byteLength)throw new Q("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:na,height:ja,format:ma}=T;const {applyJpegMask:O}=T;if(O&&(!na||!ja))throw new Q("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");
return new Promise((S,U)=>{let z=null;"jpg"===ma&&O&&(z=W._getMask(u,{width:na,height:ja}));const A=new Blob([new Uint8Array(u)],{type:"jpg"==="image/"+ma?"jpeg":ma}),w=URL.createObjectURL(A),b=new Image;let h;b.src=w;b.onload=()=>{URL.revokeObjectURL(w);if(t.isAborted(ha))U(t.createAbortError());else{na=b.width;ja=b.height;if(this.canvas){if(this.canvas.width!==na||this.canvas.height!==ja)this.canvas.width=na,this.canvas.height=ja;this.ctx.clearRect(0,0,na,ja)}else this.canvas=document.createElement("canvas"),
this.canvas.width=na,this.canvas.height=ja,this.ctx=this.canvas.getContext("2d");this.ctx.drawImage(b,0,0);var q=this.ctx.getImageData(0,0,na,ja);h=q.data;var g;if(T.renderOnCanvas){if(z)for(g=0;g<z.length;g++)h[4*g+3]=z[g]?255:0;this.ctx.putImageData(q,0,0);S(null)}else{q=na*ja;var k=new Uint8Array(q),p=new Uint8Array(q),m=new Uint8Array(q);if(z)for(g=0;g<q;g++)k[g]=h[4*g],p[g]=h[4*g+1],m[g]=h[4*g+2];else for(z=new Uint8Array(q),g=0;g<q;g++)k[g]=h[4*g],p[g]=h[4*g+1],m[g]=h[4*g+2],z[g]=h[4*g+3];S({width:na,
height:ja,pixels:[k,p,m],mask:z,pixelType:"u8"})}}};b.onerror=()=>{URL.revokeObjectURL(w);U("cannot load image")}})};W._getMask=function(u,T){let ha=null;try{var na=new Uint8Array(u);u=0;var ja=na.length-2;for(u=Math.ceil(na.length/2);u<ja&&(255!==na[u]||217!==na[u+1]);u++);u+=2;if(u<na.length-1){const ma=(new ca.Zlib(na.subarray(u))).getBytes();ha=new Uint8Array(T.width*T.height);T=0;for(na=0;na<ma.length;na++)for(ja=7;0<=ja;ja--)ha[T++]=ma[na]>>ja&1}}catch(ma){}return ha};return W}()})},"esri/chunks/Zlib":function(){define(["exports"],
function(Q){var t={exports:{}};(function(ca){(function(W){W=W();void 0!==W&&(ca.exports=W)})(function(){var W=function(){function u(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}u.prototype={ensureBuffer:function(T){var ha=this.buffer,na=ha?ha.byteLength:0;if(T<na)return ha;for(var ja=512;ja<T;)ja<<=1;T=new Uint8Array(ja);for(ja=0;ja<na;++ja)T[ja]=ha[ja];return this.buffer=T},getByte:function(){for(var T=this.pos;this.bufferLength<=T;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},
getBytes:function(T){var ha=this.pos;if(T){this.ensureBuffer(ha+T);for(T=ha+T;!this.eof&&this.bufferLength<T;)this.readBlock();var na=this.bufferLength;T>na&&(T=na)}else{for(;!this.eof;)this.readBlock();T=this.bufferLength}this.pos=T;return this.buffer.subarray(ha,T)},lookChar:function(){for(var T=this.pos;this.bufferLength<=T;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var T=this.pos;this.bufferLength<=T;){if(this.eof)return null;
this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(T,ha,na){for(var ja=T+ha;this.bufferLength<=ja&&!this.eof;)this.readBlock();return new Stream(this.buffer,T,ha,na)},skip:function(T){T||(T=1);this.pos+=T},reset:function(){this.pos=0}};return u}();return function(){function u(S){throw Error(S);}function T(S){var U=0,z=S[U++],A=S[U++];-1!=z&&-1!=A||u("Invalid header in flate stream");8!=(z&15)&&u("Unknown compression method in flate stream");0!=((z<<8)+A)%
31&&u("Bad FCHECK in flate stream");A&32&&u("FDICT bit set in flate stream");this.bytes=S;this.bytesPos=U;this.codeBuf=this.codeSize=0;W.call(this)}if(!self||!self.Uint32Array)return null;var ha=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),na=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),ja=new Uint32Array([1,2,3,4,65541,65543,131081,131085,
196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),ma=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,
590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,
590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,
590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,
590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,
590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,
590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,
590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],O=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];T.prototype=Object.create(W.prototype);
T.prototype.getBits=function(S){for(var U=this.codeSize,z=this.codeBuf,A=this.bytes,w=this.bytesPos,b;U<S;)"undefined"==typeof(b=A[w++])&&u("Bad encoding in flate stream"),z|=b<<U,U+=8;this.codeBuf=z>>S;this.codeSize=U-=S;this.bytesPos=w;return z&(1<<S)-1};T.prototype.getCode=function(S){var U=S[0],z=S[1];S=this.codeSize;for(var A=this.codeBuf,w=this.bytes,b=this.bytesPos;S<z;){var h;"undefined"==typeof(h=w[b++])&&u("Bad encoding in flate stream");A|=h<<S;S+=8}z=U[A&(1<<z)-1];U=z>>16;z&=65535;(0==
S||S<U||0==U)&&u("Bad encoding in flate stream");this.codeBuf=A>>U;this.codeSize=S-U;this.bytesPos=b;return z};T.prototype.generateHuffmanTable=function(S){for(var U=S.length,z=0,A=0;A<U;++A)S[A]>z&&(z=S[A]);for(var w=1<<z,b=new Uint32Array(w),h=1,q=0,g=2;h<=z;++h,q<<=1,g<<=1)for(var k=0;k<U;++k)if(S[k]==h){var p=0,m=q;for(A=0;A<h;++A)p=p<<1|m&1,m>>=1;for(A=p;A<w;A+=g)b[A]=h<<16|k;++q}return[b,z]};T.prototype.readBlock=function(){function S(p,m,c,f,l){for(p=p.getBits(c)+f;0<p--;)m[q++]=l}var U=this.getBits(3);
U&1&&(this.eof=!0);U>>=1;if(0==U){var z=this.bytes,A=this.bytesPos,w;"undefined"==typeof(w=z[A++])&&u("Bad block header in flate stream");var b=w;"undefined"==typeof(w=z[A++])&&u("Bad block header in flate stream");b|=w<<8;"undefined"==typeof(w=z[A++])&&u("Bad block header in flate stream");U=w;"undefined"==typeof(w=z[A++])&&u("Bad block header in flate stream");(U|w<<8)!=(~b&65535)&&u("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;w=this.bufferLength;U=this.ensureBuffer(w+
b);this.bufferLength=b=w+b;for(var h=w;h<b;++h){if("undefined"==typeof(w=z[A++])){this.eof=!0;break}U[h]=w}this.bytesPos=A}else{if(1==U)A=ma,w=O;else if(2==U){U=this.getBits(5)+257;w=this.getBits(5)+1;z=this.getBits(4)+4;A=Array(ha.length);for(var q=0;q<z;)A[ha[q++]]=this.getBits(3);A=this.generateHuffmanTable(A);q=z=0;w=U+w;for(b=Array(w);q<w;)h=this.getCode(A),16==h?S(this,b,2,3,z):17==h?S(this,b,3,3,z=0):18==h?S(this,b,7,11,z=0):b[q++]=z=h;A=this.generateHuffmanTable(b.slice(0,U));w=this.generateHuffmanTable(b.slice(U,
w))}else u("Unknown block type in flate stream");b=(U=this.buffer)?U.length:0;for(h=this.bufferLength;;){var g=this.getCode(A);if(256>g)h+1>=b&&(U=this.ensureBuffer(h+1),b=U.length),U[h++]=g;else{if(256==g){this.bufferLength=h;break}g-=257;g=na[g];var k=g>>16;0<k&&(k=this.getBits(k));z=(g&65535)+k;g=this.getCode(w);g=ja[g];k=g>>16;0<k&&(k=this.getBits(k));g=(g&65535)+k;h+z>=b&&(U=this.ensureBuffer(h+z),b=U.length);for(k=0;k<z;++k,++h)U[h]=U[h-g]}}}};return T}()})})(t);Q.Zlib=t.exports})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/Jpg",
"../../../chunks/Zlib"],function(Q,t){return function(){function ca(){}ca.decode=function(W){var u=new Uint8Array(W);W=new Q.JpegImage;W.parse(u);const {width:T,height:ha,numComponents:na,eof:ja}=W;W=W.getData(T,ha,!0);let ma;const O=T*ha;let S=0;var U=0,z=0;if(ja<u.length-1)for(u=(new t.Zlib(u.subarray(ja))).getBytes(),ma=new Uint8Array(O),S=U=0;S<u.length;S++)for(z=7;0<=z;z--)ma[U++]=u[S]>>z&1;u=null;if(1===na)u=[W,W,W];else{u=[];for(S=0;3>S;S++)z=new Uint8Array(O),u.push(z);for(U=z=0;U<O;U++)for(S=
0;3>S;S++)u[S][U]=W[z++]}return{width:T,height:ha,pixels:u,mask:ma}};return ca}()})},"esri/chunks/Jpg":function(){define(["exports"],function(Q){var t={exports:{}};(function(ca){(function(W){W=W();void 0!==W&&(ca.exports=W)})(function(){var W=function(){function u(T){this.message="JPEG error: "+T}u.prototype=Error();u.prototype.name="JpegError";return u.constructor=u}();return function(){function u(){this.decodeTransform=null;this.colorTransform=-1}function T(O,S){for(var U=0,z=[],A,w,b=16;0<b&&!O[b-
1];)b--;z.push({children:[],index:0});var h=z[0],q;for(A=0;A<b;A++){for(w=0;w<O[A];w++){h=z.pop();for(h.children[h.index]=S[U];0<h.index;)h=z.pop();h.index++;for(z.push(h);z.length<=A;)z.push(q={children:[],index:0}),h.children[h.index]=q.children,h=q;U++}A+1<b&&(z.push(q={children:[],index:0}),h.children[h.index]=q.children,h=q)}return z[0].children}function ha(O,S,U,z,A,w,b,h,q){function g(){if(0<L)return L--,N>>L&1;N=O[S++];if(255===N){var X=O[S++];if(X)throw new W("unexpected marker "+(N<<8|X).toString(16));
}L=7;return N>>>7}function k(X){for(;;){X=X[g()];if("number"===typeof X)return X;if("object"!==typeof X)throw new W("invalid huffman sequence");}}function p(X){for(var Z=0;0<X;)Z=Z<<1|g(),X--;return Z}function m(X){if(1===X)return 1===g()?1:-1;var Z=p(X);return Z>=1<<X-1?Z:Z+(-1<<X)+1}function c(X,Z){var a=k(X.huffmanTableDC);a=0===a?0:m(a);X.blockData[Z]=X.pred+=a;for(a=1;64>a;){var d=k(X.huffmanTableAC),D=d&15;d>>=4;if(0===D){if(15>d)break;a+=16}else a+=d,X.blockData[Z+ma[a]]=m(D),a++}}function f(X,
Z){var a=k(X.huffmanTableDC);a=0===a?0:m(a)<<q;X.blockData[Z]=X.pred+=a}function l(X,Z){X.blockData[Z]|=g()<<q}function v(X,Z){if(0<n)n--;else for(var a=w;a<=b;){var d=k(X.huffmanTableAC),D=d&15;d>>=4;if(0===D){if(15>d){n=p(d)+(1<<d)-1;break}a+=16}else a+=d,X.blockData[Z+ma[a]]=m(D)*(1<<q),a++}}function y(X,Z){for(var a=w,d=0,D;a<=b;){D=ma[a];switch(I){case 0:d=k(X.huffmanTableAC);D=d&15;d>>=4;if(0===D)15>d?(n=p(d)+(1<<d),I=4):(d=16,I=1);else{if(1!==D)throw new W("invalid ACn encoding");ka=m(D);I=
d?2:3}continue;case 1:case 2:X.blockData[Z+D]?X.blockData[Z+D]+=g()<<q:(d--,0===d&&(I=2===I?3:0));break;case 3:X.blockData[Z+D]?X.blockData[Z+D]+=g()<<q:(X.blockData[Z+D]=ka<<q,I=0);break;case 4:X.blockData[Z+D]&&(X.blockData[Z+D]+=g()<<q)}a++}4===I&&(n--,0===n&&(I=0))}var C=U.mcusPerLine,F=S,N=0,L=0,n=0,I=0,ka,Y=z.length,E,e,r,x;h=U.progressive?0===w?0===h?f:l:0===h?v:y:c;var B=0;U=1===Y?z[0].blocksPerLine*z[0].blocksPerColumn:C*U.mcusPerColumn;for(var J,M;B<U;){var R=A?Math.min(U-B,A):U;for(E=0;E<
Y;E++)z[E].pred=0;n=0;if(1===Y){var P=z[0];for(x=0;x<R;x++)h(P,64*((P.blocksPerLine+1)*(B/P.blocksPerLine|0)+B%P.blocksPerLine)),B++}else for(x=0;x<R;x++){for(E=0;E<Y;E++)for(P=z[E],J=P.h,M=P.v,e=0;e<M;e++)for(r=0;r<J;r++)h(P,64*((P.blocksPerLine+1)*((B/C|0)*P.v+e)+(B%C*P.h+r)));B++}L=0;(P=ja(O,S))&&P.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+P.invalid),S=P.offset);P=P&&P.marker;if(!P||65280>=P)throw new W("marker was not found");if(65488<=P&&65495>=P)S+=2;else break}(P=
ja(O,S))&&P.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+P.invalid),S=P.offset);return S-F}function na(O,S){O=S.blocksPerLine;for(var U=S.blocksPerColumn,z=new Int16Array(64),A=0;A<U;A++)for(var w=0;w<O;w++){var b=void 0,h=void 0,q=void 0,g=void 0,k=void 0,p=void 0,m=void 0,c=void 0,f=k=p=g=h=b=void 0,l=void 0,v=void 0,y=void 0,C=64*((S.blocksPerLine+1)*A+w),F=z,N=S.quantizationTable,L=S.blockData;if(!N)throw new W("missing required Quantization Table.");for(var n=0;64>
n;n+=8)b=L[C+n],c=L[C+n+1],m=L[C+n+2],p=L[C+n+3],k=L[C+n+4],g=L[C+n+5],q=L[C+n+6],h=L[C+n+7],b*=N[n],0===(c|m|p|k|g|q|h)?(b=5793*b+512>>10,F[n]=b,F[n+1]=b,F[n+2]=b,F[n+3]=b,F[n+4]=b,F[n+5]=b,F[n+6]=b,F[n+7]=b):(c*=N[n+1],m*=N[n+2],p*=N[n+3],k*=N[n+4],g*=N[n+5],q*=N[n+6],h*=N[n+7],y=5793*b+128>>8,v=5793*k+128>>8,l=m,f=q,k=2896*(c-h)+128>>8,h=2896*(c+h)+128>>8,p<<=4,g<<=4,y=y+v+1>>1,v=y-v,b=3784*l+1567*f+128>>8,l=1567*l-3784*f+128>>8,f=b,k=k+g+1>>1,g=k-g,h=h+p+1>>1,p=h-p,y=y+f+1>>1,f=y-f,v=v+l+1>>1,
l=v-l,b=2276*k+3406*h+2048>>12,k=3406*k-2276*h+2048>>12,h=b,b=799*p+4017*g+2048>>12,p=4017*p-799*g+2048>>12,g=b,F[n]=y+h,F[n+7]=y-h,F[n+1]=v+g,F[n+6]=v-g,F[n+2]=l+p,F[n+5]=l-p,F[n+3]=f+k,F[n+4]=f-k);for(N=0;8>N;++N)b=F[N],c=F[N+8],m=F[N+16],p=F[N+24],k=F[N+32],g=F[N+40],q=F[N+48],h=F[N+56],0===(c|m|p|k|g|q|h)?(b=5793*b+8192>>14,b=-2040>b?0:2024<=b?255:b+2056>>4,L[C+N]=b,L[C+N+8]=b,L[C+N+16]=b,L[C+N+24]=b,L[C+N+32]=b,L[C+N+40]=b,L[C+N+48]=b,L[C+N+56]=b):(y=5793*b+2048>>12,v=5793*k+2048>>12,l=m,f=q,
k=2896*(c-h)+2048>>12,h=2896*(c+h)+2048>>12,y=(y+v+1>>1)+4112,v=y-v,b=3784*l+1567*f+2048>>12,l=1567*l-3784*f+2048>>12,f=b,k=k+g+1>>1,g=k-g,h=h+p+1>>1,p=h-p,y=y+f+1>>1,f=y-f,v=v+l+1>>1,l=v-l,b=2276*k+3406*h+2048>>12,k=3406*k-2276*h+2048>>12,h=b,b=799*p+4017*g+2048>>12,p=4017*p-799*g+2048>>12,g=b,b=y+h,h=y-h,c=v+g,q=v-g,m=l+p,g=l-p,p=f+k,k=f-k,b=16>b?0:4080<=b?255:b>>4,c=16>c?0:4080<=c?255:c>>4,m=16>m?0:4080<=m?255:m>>4,p=16>p?0:4080<=p?255:p>>4,k=16>k?0:4080<=k?255:k>>4,g=16>g?0:4080<=g?255:g>>4,q=
16>q?0:4080<=q?255:q>>4,h=16>h?0:4080<=h?255:h>>4,L[C+N]=b,L[C+N+8]=c,L[C+N+16]=m,L[C+N+24]=p,L[C+N+32]=k,L[C+N+40]=g,L[C+N+48]=q,L[C+N+56]=h)}return S.blockData}function ja(O,S,U){var z=O.length-1;U=U<S?U:S;if(S>=z)return null;var A=O[S]<<8|O[S+1];if(65472<=A&&65534>=A)return{invalid:null,marker:A,offset:S};for(S=O[U]<<8|O[U+1];!(65472<=S&&65534>=S);){if(++U>=z)return null;S=O[U]<<8|O[U+1]}return{invalid:A.toString(16),marker:S,offset:U}}if(!self||!self.Uint8ClampedArray)return null;var ma=new Uint8Array([0,
1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);u.prototype={parse:function(O){function S(){var N=O[A]<<8|O[A+1];A+=2;return N}function U(){var N=S();N=A+N-2;var L=ja(O,N,A);L&&L.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+L.invalid),N=L.offset);N=O.subarray(A,N);A+=N.length;return N}function z(N){for(var L=Math.ceil(N.samplesPerLine/
8/N.maxH),n=Math.ceil(N.scanLines/8/N.maxV),I=0;I<N.components.length;I++){F=N.components[I];var ka=Math.ceil(Math.ceil(N.samplesPerLine/8)*F.h/N.maxH),Y=Math.ceil(Math.ceil(N.scanLines/8)*F.v/N.maxV);F.blockData=new Int16Array(64*n*F.v*(L*F.h+1));F.blocksPerLine=ka;F.blocksPerColumn=Y}N.mcusPerLine=L;N.mcusPerColumn=n}var A=0,w=null,b=null,h=[],q=[],g=[],k=S();if(65496!==k)throw new W("SOI not found");for(k=S();65497!==k;){switch(k){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var p=
U();65504===k&&74===p[0]&&70===p[1]&&73===p[2]&&70===p[3]&&0===p[4]&&(w={version:{major:p[5],minor:p[6]},densityUnits:p[7],xDensity:p[8]<<8|p[9],yDensity:p[10]<<8|p[11],thumbWidth:p[12],thumbHeight:p[13],thumbData:p.subarray(14,14+3*p[12]*p[13])});65518===k&&65===p[0]&&100===p[1]&&111===p[2]&&98===p[3]&&101===p[4]&&(b={version:p[5]<<8|p[6],flags0:p[7]<<8|p[8],flags1:p[9]<<8|p[10],transformCode:p[11]});break;case 65499:k=S()+A-2;for(var m;A<k;){var c=O[A++],f=new Uint16Array(64);if(0===c>>4)for(p=
0;64>p;p++)m=ma[p],f[m]=O[A++];else if(1===c>>4)for(p=0;64>p;p++)m=ma[p],f[m]=S();else throw new W("DQT - invalid table spec");h[c&15]=f}break;case 65472:case 65473:case 65474:if(l)throw new W("Only single frame JPEGs supported");S();var l={};l.extended=65473===k;l.progressive=65474===k;l.precision=O[A++];l.scanLines=S();l.samplesPerLine=S();l.components=[];l.componentIds={};p=O[A++];for(k=f=c=0;k<p;k++){m=O[A];var v=O[A+1]>>4;var y=O[A+1]&15;c<v&&(c=v);f<y&&(f=y);v=l.components.push({h:v,v:y,quantizationId:O[A+
2],quantizationTable:null});l.componentIds[m]=v-1;A+=3}l.maxH=c;l.maxV=f;z(l);break;case 65476:m=S();for(k=2;k<m;){c=O[A++];f=new Uint8Array(16);for(p=v=0;16>p;p++,A++)v+=f[p]=O[A];y=new Uint8Array(v);for(p=0;p<v;p++,A++)y[p]=O[A];k+=17+v;(0===c>>4?g:q)[c&15]=T(f,y)}break;case 65501:S();var C=S();break;case 65498:S();m=O[A++];p=[];for(k=0;k<m;k++){c=l.componentIds[O[A++]];var F=l.components[c];c=O[A++];F.huffmanTableDC=g[c>>4];F.huffmanTableAC=q[c&15];p.push(F)}k=O[A++];m=O[A++];c=O[A++];k=ha(O,A,
l,p,C,k,m,c>>4,c&15);A+=k;break;case 65535:255!==O[A]&&A--;break;default:if(255===O[A-3]&&192<=O[A-2]&&254>=O[A-2])A-=3;else throw new W("unknown marker "+k.toString(16));}k=S()}this.width=l.samplesPerLine;this.height=l.scanLines;this.jfif=w;this.eof=A;this.adobe=b;this.components=[];for(k=0;k<l.components.length;k++){F=l.components[k];if(w=h[F.quantizationId])F.quantizationTable=w;this.components.push({output:na(l,F),scaleX:F.h/l.maxH,scaleY:F.v/l.maxV,blocksPerLine:F.blocksPerLine,blocksPerColumn:F.blocksPerColumn})}this.numComponents=
this.components.length},_getLinearizedBlockData:function(O,S){var U=this.width/O,z=this.height/S,A,w,b=0,h=this.components.length,q=O*S*h,g=new Uint8ClampedArray(q),k=new Uint32Array(O);for(w=0;w<h;w++){var p=this.components[w];var m=p.scaleX*U;var c=p.scaleY*z;b=w;var f=p.output;var l=p.blocksPerLine+1<<3;for(A=0;A<O;A++)p=0|A*m,k[A]=(p&4294967288)<<3|p&7;for(m=0;m<S;m++)for(p=0|m*c,p=l*(p&4294967288)|(p&7)<<3,A=0;A<O;A++)g[b]=f[p+k[A]],b+=h}if(S=this.decodeTransform)for(w=0;w<q;)for(O=p=0;p<h;p++,
w++,O+=2)g[w]=(g[w]*S[O]>>8)+S[O+1];return g},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(O){for(var S,U,z,A=0,w=O.length;A<w;A+=3)S=O[A],U=O[A+1],z=O[A+2],O[A]=S-179.456+1.402*z,O[A+1]=S+135.459-.344*U-.714*z,O[A+2]=S-226.816+1.772*U;return O},_convertYcckToRgb:function(O){for(var S,U,z,A,w=0,b=0,h=O.length;b<h;b+=4)S=O[b],U=O[b+1],z=O[b+2],A=O[b+3],O[w++]=
-122.67195406894+U*(-6.60635669420364E-5*U+4.37130475926232E-4*z-5.4080610064599E-5*S+4.8449797120281E-4*A-.154362151871126)+z*(-9.57964378445773E-4*z+8.17076911346625E-4*S-.00477271405408747*A+1.53380253221734)+S*(9.61250184130688E-4*S-.00266257332283933*A+.48357088451265)+A*(-3.36197177618394E-4*A+.484791561490776),O[w++]=107.268039397724+U*(2.19927104525741E-5*U-6.40992018297945E-4*z+6.59397001245577E-4*S+4.26105652938837E-4*A-.176491792462875)+z*(-7.78269941513683E-4*z+.00130872261408275*S+7.70482631801132E-4*
A-.151051492775562)+S*(.00126935368114843*S-.00265090189010898*A+.25802910206845)+A*(-3.18913117588328E-4*A-.213742400323665),O[w++]=-20.810012546947+U*(-5.70115196973677E-4*U-2.63409051004589E-5*z+.0020741088115012*S-.00288260236853442*A+.814272968359295)+z*(-1.53496057440975E-5*z-1.32689043961446E-4*S+5.60833691242812E-4*A-.195152027534049)+S*(.00174418132927582*S-.00255243321439347*A+.116935020465145)+A*(-3.43531996510555E-4*A+.24165260232407);return O},_convertYcckToCmyk:function(O){for(var S,
U,z,A=0,w=O.length;A<w;A+=4)S=O[A],U=O[A+1],z=O[A+2],O[A]=434.456-S-1.402*z,O[A+1]=119.541-S+.344*U+.714*z,O[A+2]=481.816-S-1.772*U;return O},_convertCmykToRgb:function(O){for(var S,U,z,A,w=0,b=1/255,h=0,q=O.length;h<q;h+=4)S=O[h]*b,U=O[h+1]*b,z=O[h+2]*b,A=O[h+3]*b,O[w++]=255+S*(-4.387332384609988*S+54.48615194189176*U+18.82290502165302*z+212.25662451639585*A-285.2331026137004)+U*(1.7149763477362134*U-5.6096736904047315*z-17.873870861415444*A-5.497006427196366)+z*(-2.5217340131683033*z-21.248923337353073*
A+17.5119270841813)-A*(21.86122147463605*A+189.48180835922747),O[w++]=255+S*(8.841041422036149*S+60.118027045597366*U+6.871425592049007*z+31.159100130055922*A-79.2970844816548)+U*(-15.310361306967817*U+17.575251261109482*z+131.35250912493976*A-190.9453302588951)+z*(4.444339102852739*z+9.8632861493405*A-24.86741582555878)-A*(20.737325471181034*A+187.80453709719578),O[w++]=255+S*(.8842522430003296*S+8.078677503112928*U+30.89978309703729*z-.23883238689178934*A-14.183576799673286)+U*(10.49593273432072*
U+63.02378494754052*z+50.606957656360734*A-112.23884253719248)+z*(.03296041114873217*z+115.60384449646641*A-193.58209356861505)-A*(22.33816807309886*A+180.12613974708367);return O},getData:function(O,S,U){if(4<this.numComponents)throw new W("Unsupported color mode");O=this._getLinearizedBlockData(O,S);if(1===this.numComponents&&U){U=O.length;S=new Uint8ClampedArray(3*U);for(var z=0,A=0;A<U;A++){var w=O[A];S[z++]=w;S[z++]=w;S[z++]=w}return S}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(O);
if(4===this.numComponents){if(this._isColorConversionNeeded())return U?this._convertYcckToRgb(O):this._convertYcckToCmyk(O);if(U)return this._convertCmykToRgb(O)}return O}};return u}()})})(t);Q.JpegImage=t.exports})},"esri/layers/support/rasterFormats/Lerc":function(){define(["require","exports","../../../assets"],function(Q,t,ca){function W(ja){const {_malloc:ma,_free:O,_lerc_getBlobInfo:S,_lerc_getDataRanges:U,_lerc_decode_4D:z,asm:A}=ja;let w;const b=Object.values(A).find(q=>q&&"buffer"in q&&q.buffer===
ja.HEAPU8.buffer),h=q=>{q=q.map(p=>(p>>3<<3)+16);var g=q.reduce((p,m)=>p+m),k=ma(g);w=new Uint8Array(b.buffer);g=q[0];q[0]=k;for(k=1;k<q.length;k++){const p=q[k];q[k]=q[k-1]+g;g=p}return q};na.getBlobInfo=q=>{var g=new Uint8Array(48),k=new Uint8Array(24);const [p,m,c]=h([q.length,g.length,k.length]);w.set(q,p);w.set(g,m);w.set(k,c);var f=S(p,q.length,m,c,12,3);if(f)throw O(p),`lerc-getBlobInfo: error code is ${f}`;w=new Uint8Array(b.buffer);g.set(w.slice(m,m+g.length));k.set(w.slice(c,c+k.length));
g=new Uint32Array(g.buffer);var l=new Float64Array(k.buffer);const [v,y,C,F,N,L,n,I,ka,,Y]=g;k={version:v,dimCount:C,width:F,height:N,validPixelCount:n,bandCount:L,blobSize:I,maskCount:ka,dataType:y,minValue:l[0],maxValue:l[1],maxZerror:l[2],statistics:[],bandCountWithNoData:Y};if(Y)return k;if(1===C&&1===L)return O(p),k.statistics.push({minValue:l[0],maxValue:l[1]}),k;var E=C*L*8,e=new Uint8Array(E),r=new Uint8Array(E);g=p;l=0;let x=!1;w.byteLength<p+2*E?(O(p),x=!0,[g,l,B]=h([q.length,E,E]),w.set(q,
g)):[l,B]=h([E,E]);w.set(e,l);w.set(r,B);if(f=U(p,q.length,C,L,l,B))throw O(g),x||O(l),`lerc-getDataRanges: error code is ${f}`;w=new Uint8Array(b.buffer);e.set(w.slice(l,l+E));r.set(w.slice(B,B+E));q=new Float64Array(e.buffer);f=new Float64Array(r.buffer);r=k.statistics;for(E=0;E<L;E++)if(1<C){e=q.slice(E*C,(E+1)*C);var B=f.slice(E*C,(E+1)*C);const J=Math.min.apply(null,e),M=Math.max.apply(null,B);r.push({minValue:J,maxValue:M,dimStats:{minValues:e,maxValues:B}})}else r.push({minValue:q[E],maxValue:f[E]});
O(g);x||O(l);return k};na.decode=(q,g)=>{const {maskCount:k,dimCount:p,bandCount:m,width:c,height:f,dataType:l,bandCountWithNoData:v}=g;var y=u[l],C=c*f;g=new Uint8Array(C*m);const F=C*p*m*y.size;y=new Uint8Array(F);const N=new Uint8Array(m),L=8*m,n=new Uint8Array(L),[I,ka,Y,E,e]=h([q.length,g.length,y.length,N.length,n.length]);w.set(q,I);w.set(g,ka);w.set(y,Y);w.set(N,E);w.set(n,e);if(q=z(I,q.length,k,ka,p,c,f,m,l,Y,E,e))throw O(I),`lerc-decode: error code is ${q}`;w=new Uint8Array(b.buffer);y.set(w.slice(Y,
Y+F));g.set(w.slice(ka,ka+C));q=null;if(v)for(N.set(w.slice(E,E+m)),n.set(w.slice(e,e+L)),q=[],C=0;C<N.length;C++)q.push(N[C]?n[C]:null);O(I);return{data:y,maskData:g,noDataValues:q}}}const u=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,128]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",
size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-3.4027999387901484E38,3.4027999387901484E38]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-1.7976931348623157E308,1.7976931348623157E308]}];let T=null,ha=!1;const na={getBlobInfo:null,decode:null};t.decode=function(ja,ma={}){var O,S=null!=(O=ma.inputOffset)?O:0;O=ja instanceof Uint8Array?ja.subarray(S):new Uint8Array(ja,S);ja=na.getBlobInfo(O);const {data:U,maskData:z}=na.decode(O,ja),{width:A,height:w,
bandCount:b,dimCount:h,dataType:q,maskCount:g,statistics:k}=ja;O=u[q];var p=new O.ctor(U.buffer);S=[];const m=[],c=A*w;var f=c*h;for(var l=0;l<b;l++){var v=p.subarray(l*f,(l+1)*f);if(ma.returnPixelInterleavedDims)S.push(v);else{a:{var y=c,C=h;if(2>C)break a;const F=new O.ctor(y*C);for(let N=0,L=0;N<y;N++)for(let n=0,I=N;n<C;n++,I+=y)F[I]=v[L++];v=F}S.push(v)}m.push(z.subarray(l*f,(l+1)*f))}p=0===g?null:1===g?m[0]:new Uint8Array(c);if(1<g)for(p.set(m[0]),f=1;f<m.length;f++)for(l=m[f],v=0;v<c;v++)p[v]&=
l[v];({noDataValue:f}=ma);f=null!=f&&O.range[0]<=f&&O.range[1]>=f;if(0<g&&f)for({noDataValue:f}=ma,l=0;l<b;l++)for(v=S[l],y=m[l]||p,C=0;C<c;C++)0===y[C]&&(v[C]=f);return{width:A,height:w,bandCount:b,pixelType:ma.pixelType&&0===ja.version?ma.pixelType:O.pixelType,dimCount:h,statistics:k,pixels:S,mask:p,bandMasks:g===b&&1<b?m:null}};t.getBlobInfo=function(ja,ma={}){var O,S;ja=ja instanceof Uint8Array?ja.subarray(null!=(O=ma.inputOffset)?O:0):new Uint8Array(ja,null!=(S=ma.inputOffset)?S:0);return na.getBlobInfo(ja)};
t.isLoaded=function(){return ha};t.load=function(){return T?T:T=(new Promise((ja,ma)=>Q(["../../../chunks/lerc-wasm"],ja,ma))).then(ja=>ja.lercWasm).then(({default:ja})=>ja({locateFile:ma=>ca.getAssetUrl(`esri/layers/support/rasterFormats/${ma}`)})).then(ja=>{W(ja);ha=!0})};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(Q){function t(T,ha,na,ja=!0){if(0!==ha%4||0!==na%4){var ma=new ArrayBuffer(4*Math.ceil(na/4));ma=
new Uint8Array(ma);T=new Uint8Array(T,ha,na);if(ja)for(ja=0;ja<ma.length;ja+=4)ma[ja]=T[ja+3],ma[ja+1]=T[ja+2],ma[ja+2]=T[ja+1],ma[ja+3]=T[ja];else ma.set(T);return new Uint32Array(ma.buffer)}if(ja){ja=new Uint8Array(T,ha,na);ma=new Uint8Array(ja.length);for(T=0;T<ma.length;T+=4)ma[T]=ja[T+3],ma[T+1]=ja[T+2],ma[T+2]=ja[T+1],ma[T+3]=ja[T];return new Uint32Array(ma.buffer)}return new Uint32Array(T,ha,na/4)}function ca(){const T=[];for(let ha=0;257>=ha;ha++)T[ha]=[ha];return T}function W(T,ha){for(let na=
0;na<ha.length;na++)T.push(ha[na])}const u=new Set;u.add(511);u.add(1023);u.add(2047);u.add(4095);u.add(8191);Q.decode=function(T,ha,na,ja=!0){T=t(T,ha,na,ja);ha=9;ja=ca();let ma=32,O=ja.length,S=[],U=1,z=T[0],A=0;const w=T.length;na=8*(4*w-na);const b=[];for(;null!=z;){if(ma>=ha)ma-=ha,A=z>>>32-ha,z<<=ha;else{A=z>>>32-ma;z=T[U++];var h=ha-ma;ma=32-h;A=(A<<h)+(z>>>ma);z<<=h}if(257===A)break;if(256===A)ha=9,ja=ca(),O=ja.length,S=[];else{h=ja[A];if(null==h){if(A>ja.length)throw"data integrity issue: code does not exist on code page";
S.push(S[0]);ja[O++]=S.slice();W(b,S)}else W(b,h),S.push(h[0]),1<S.length&&(ja[O++]=S.slice()),S=h.slice();u.has(O)&&ha++;0===ma&&(z=T[U++],ma=32);if(U>w||U===w&&ma<=na)break}}return new Uint8Array(b)};Object.defineProperty(Q,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/Raw":function(){define(function(){const Q=function(t){let ca=1;switch(t){case Uint8Array:case Int8Array:ca=1;break;case Uint16Array:case Int16Array:ca=2;break;case Uint32Array:case Int32Array:case Float32Array:ca=
4;break;case Float64Array:ca=8}return ca};return function(){function t(){}t.decode=function(ca,W){var u=W.pixelType;const T=[],ha=W.width*W.height;var na=Math.floor(ca.byteLength/(W.width*W.height*Q(W.pixelType)));const {bandIds:ja,format:ma}=W;W=ja&&ja.length||Math.floor(ca.byteLength/(W.width*W.height*Q(W.pixelType)));var O=ca.byteLength-ca.byteLength%(ha*Q(u));const S=new u(ca,0,ha*na);let U,z;let A,w;if("bip"===ma)for(U=0;U<W;U++){A=new u(ha);w=ja?ja[U]:U;for(z=0;z<ha;z++)A[z]=S[z*na+w];T.push(A)}else if("bsq"===
ma)for(U=0;U<W;U++)w=ja?ja[U]:U,T.push(S.subarray(w*ha,(w+1)*ha));if(O<ca.byteLength-1)if(ca=ca.slice(O),8*ca.byteLength<ha)var b=null;else{ca=new Uint8Array(ca,0,Math.ceil(ha/8));u=new Uint8Array(ha);for(W=O=W=b=na=0;W<ca.length-1;W++)for(b=ca[W],O=7;0<=O;O--)u[na++]=b>>O&1;for(O=7;na<ha-1;)b=ca[ca.length-1],u[na++]=b>>O&1,O--;b=u}return{pixels:T,mask:b}};return t}()})},"esri/layers/support/rasterFormats/TiffDecoder":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../rasterDatasets/byteStreamUtils ../../../chunks/Jpg ./Lerc ./Lzw ./TiffTags ./utils ../../../chunks/Zlib".split(" "),
function(Q,t,ca,W,u,T,ha,na,ja){function ma(E,e){let r="unknown";3===E?r="f32":1===E?1===e?r="u1":2===e?r="u2":4===e?r="u4":8>=e?r="u8":16>=e?r="u16":32>=e&&(r="u32"):2===E&&(8>=e?r="s8":16>=e?r="s16":32>=e&&(r="s32"));return r}function O(E){let e=null;switch(E?E.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":e=Uint8Array;break;case "u16":e=Uint16Array;break;case "u32":e=Uint32Array;break;case "s8":e=Int8Array;break;case "s16":e=Int16Array;break;case "s32":e=Int32Array;break;default:e=
Float32Array}return e}function S(E,e){return{x:e[0]*E.x+e[1]*E.y+e[2],y:e[3]*E.x+e[4]*E.y+e[5]}}function U(E,e){var r;return null==(r=E.get(e))?void 0:r.values}function z(E,e){var r;return null==(r=E.get(e))?void 0:r.values}function A(E,e){var r;return null==(r=E.get(e))?void 0:r.values[0]}function w(E,e){var r;return null==(r=E.get(e))?void 0:r.values[0]}function b(E,e,r,x=0,B=ha.TIFF_TAGS,J=4){var M=8===J;const R=M?l(new DataView(E,r,8),0,e):(new DataView(E,r,2)).getUint16(0,e),P=4+2*J;var X=M?
8:2;M=X+R*P;if(r+M>E.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:M};const Z=r+M+4<=E.byteLength?v(new DataView(E,r+M,8===J?8:4),0,e,8===J):null;r+=X;X=new Map;let a,d,D,G,aa;for(let ba=0;ba<R;ba++){var da=new DataView(E,r+P*ba,P);a=da.getUint16(0,e);D=da.getUint16(2,e);d=ha.getTagName(a,B);const ia=[];2===J?(G=da.getUint16(4,e),aa=da.getUint16(6,e)):4===J?(G=da.getUint32(4,e),aa=da.getUint32(8,e)):8===J&&(G=v(da,4,e,!0),aa=v(da,12,e,!0),ia.push(da.getUint32(12,e)),ia.push(da.getUint32(16,
e)));da={id:a,type:D,valueCount:G,valueOffset:aa,valueOffsets:ia,values:null};p(E,e,da,x,!1,J);X.set(d,da)}return{success:!0,ifd:X,nextIFD:Z,requiredBufferSize:M}}function h(E,e,r,x,B){return q.apply(this,arguments)}function q(){q=t._asyncToGenerator(function*(E,e,r,x,B){var J,M,R=na.isPlatformLittleEndian===e,P=w(r,"BITSPERSAMPLE");const X=null!=(J=w(r,"SAMPLEFORMAT"))?J:1;J=ma(X,P);P=null!=(M=w(r,"COMPRESSION"))?M:1;M=O(J);if(34887===P)return yield u.load(),u.decode(E,{inputOffset:x}).pixels[0];
if(1===P){var Z=E.slice(x,x+B);var a=new Uint8Array(Z)}else if(8===P||32946===P)a=new Uint8Array(E,x,B),a=new ja.Zlib(a),E=a.getBytes(),Z=new ArrayBuffer(E.length),a=new Uint8Array(Z),a.set(E);else if(6===P)a=new Uint8Array(E,x,B),Z=new W.JpegImage,Z.parse(a),E=Z.getData(Z.width,Z.height,!0),Z=new ArrayBuffer(E.length),a=new Uint8Array(Z),a.set(E);else if(7===P){e=r.get("JPEGTABLES").values;Z=e.length-2;a=new Uint8Array(Z+B-2);for(r=0;r<Z;r++)a[r]=e[r];E=new Uint8Array(E,x+2,B-2);for(x=0;x<E.length;x++)a[Z+
x]=E[x];Z=new W.JpegImage;Z.parse(a);E=Z.getData(Z.width,Z.height,!0);Z=new ArrayBuffer(E.length);a=new Uint8Array(Z);a.set(E)}else 5===P&&(a=T.decode(E,x,B,e),Z=a.buffer);if("u8"!==J&&"s8"!==J&&!R)switch(Z=new ArrayBuffer(a.length),R=new Uint8Array(Z),J){case "u16":case "s16":for(J=0;J<a.length;J+=2)R[J]=a[J+1],R[J+1]=a[J];break;case "u32":case "s32":case "f32":for(J=0;J<a.length;J+=4)R[J]=a[J+3],R[J+1]=a[J+2],R[J+2]=a[J+1],R[J+3]=a[J]}return new M(Z)});return q.apply(this,arguments)}function g(E,
e,r){return k.apply(this,arguments)}function k(){k=t._asyncToGenerator(function*(E,e,r){var x;const B=z(r,"TILEOFFSETS");if(void 0===B)return null;const J=z(r,"TILEBYTECOUNTS"),{width:M,height:R,pixelType:P,tileWidth:X,tileHeight:Z}=m([r]);var a=c(r,e);const d=e.planes;var D=M*R,G=w(r,"BITSPERSAMPLE"),aa=34887===(null!=(x=w(r,"COMPRESSION"))?x:1),da=O(P);x=[];for(var ba=0;ba<d;ba++)x.push(new da(D));let ia,fa,oa,pa,qa,ta,ra,va;D=Math.ceil(M/X);if(0===G%8)if(aa&&a&&1<d)for(a=Math.round(B.length/d),
G=0;G<a;G++){var wa=Math.floor(G/D)*Z;oa=G%D*X;da=wa*M+oa;for(aa=0;aa<d;aa++)for(ba=G*d+aa,ba=yield h(E,e.littleEndian,r,B[ba],J[ba]),qa=0,pa=da,ra=Math.min(X,M-oa),ta=Math.min(Z,R-wa),va=x[aa],ia=0;ia<ta;ia++)for(pa=da+ia*M,qa=ia*X,fa=0;fa<ra;fa++,pa++,qa++)va[pa]=ba[qa]}else for(G=0;G<B.length;G++)for(wa=Math.floor(G/D)*Z,oa=G%D*X,da=wa*M+oa,ba=yield h(E,e.littleEndian,r,B[G],J[G]),qa=0,pa=da,ra=Math.min(X,M-oa),ta=Math.min(Z,R-wa),wa=0;wa<d;wa++)if(va=x[wa],a||aa)for(ia=0;ia<ta;ia++)for(pa=da+
ia*M,qa=X*Z*wa+ia*X,fa=0;fa<ra;fa++,pa++,qa++)va[pa]=ba[qa];else for(ia=0;ia<ta;ia++)for(pa=da+ia*M,qa=ia*X*d+wa,fa=0;fa<ra;fa++,pa++,qa+=d)va[pa]=ba[qa];return{width:M,height:R,pixelType:P,pixels:x}});return k.apply(this,arguments)}function p(E,e,r,x=0,B=!1,J=4){if(r.values)return!0;var M=r.type,R=r.valueCount,P=r.valueOffset;let X=[];var Z=n[M],a=8*Z,d=R*Z,D=R*n[M]*8,G=8===J?64:32;J=r.valueOffsets;if(D>G&&d>(B?E.byteLength:E?E.byteLength-P+x:0))return r.offlineOffsetSize=[P,d],r.values=null,!1;
if(D<=G)if(e||(32>=G?P>>>=32-D:(E=null!=J&&J.length?J[0]:P>>>0,e=null!=J&&J.length?J[1]:Math.round((P-E)/4294967296),32>=D?(P=E>>>32-D,J[0]=P):(P=E*2**(32-D)+(e>>>32-D),J[0]=E,J[1]=e>>>32-D))),1===R&&a===G)X=[P];else if(64===G)for(E=null!=J&&J.length?J[0]:P>>>0,P=null!=J&&J.length?J[1]:Math.round((P-E)/4294967296),e=E,Z=32,E=1;E<=R;E++)d=32-a*E%32,Z<a?(d=e<<d>>>32-Z,D=P<<32-Z>>>32-Z,e=P,X.push(d+D*2**(a-Z)),Z-=32-(a-Z)):(X.push(e<<d>>>32-a),Z-=a),0===Z&&(Z=32,e=P);else for(E=1;E<=R;E++)X.push(P<<
32-a*E>>>32-a);else for(P-=x,B&&(P=0),R=P;R<P+d;R+=Z){switch(M){case 1:a=(new DataView(E,R,1)).getUint8(0);break;case 2:a=(new DataView(E,R,1)).getUint8(0);break;case 3:a=(new DataView(E,R,2)).getUint16(0,e);break;case 4:case 13:a=(new DataView(E,R,4)).getUint32(0,e);break;case 5:a=(new DataView(E,R,4)).getUint32(0,e)/(new DataView(E,R+4,4)).getUint32(0,e);break;case 6:a=(new DataView(E,R,1)).getInt8(0);break;case 7:a=(new DataView(E,R,1)).getUint8(0);break;case 8:a=(new DataView(E,R,2)).getInt16(0,
e);break;case 9:a=(new DataView(E,R,4)).getInt32(0,e);break;case 10:a=(new DataView(E,R,4)).getInt32(0,e)/(new DataView(E,R+4,4)).getInt32(0,e);break;case 11:a=(new DataView(E,R,4)).getFloat32(0,e);break;case 12:a=(new DataView(E,R,8)).getFloat64(0,e);break;case 16:case 18:a=l(new DataView(E,R,8),0,e);break;case 17:J=new DataView(E,R,8);D=(a=e)?J.getInt32(0,a):J.getUint32(0,a);J=a?J.getUint32(4,a):J.getInt32(4,a);G=0<=(a?D:J)?1:-1;a?D*=G:J*=G;a=G*(a?4294967296*J+D:4294967296*D+J);break;default:a=
null}X.push(a)}if(2===M){M="";P=X;X=[];for(E=0;E<P.length;E++)0===P[E]&&""!==M?(X.push(M),M=""):M+=String.fromCharCode(P[E]);""===M&&0!==X.length||X.push(M)}r.values=X;return!0}function m(E){var e,r,x=E[0];const B=w(x,"TILEWIDTH"),J=w(x,"TILELENGTH"),M=w(x,"IMAGEWIDTH"),R=w(x,"IMAGELENGTH");var P=w(x,"BITSPERSAMPLE");const X=w(x,"SAMPLESPERPIXEL");var Z=null!=(e=w(x,"SAMPLEFORMAT"))?e:1;e=ma(Z,P);const a=c(x);var d=U(x,"GDAL_NODATA");let D;null!=d&&d.length&&(D=d.map(va=>parseFloat(va)),D.some(va=>
isNaN(va))&&(D=null));var G=null!=(r=w(x,"COMPRESSION"))?r:1;switch(G){case 1:r="NONE";break;case 2:case 3:case 4:case 32771:r="CCITT";break;case 5:r="LZW";break;case 6:case 7:r="JPEG";break;case 32773:r="PACKBITS";break;case 8:case 32946:r="DEFLATE";break;case 34712:r="JPEG2000";break;case 34887:r="LERC";break;default:r=String(G)}d=!0;let aa="";I.has(G)||(d=!1,aa+="unsupported tag compression "+G);3<Z&&(d=!1,aa+="unsupported tag sampleFormat "+Z);0!==P%8&&(d=!1,aa+="unsupported tag bitsPerSample "+
P);P=A(x,"GEOASCIIPARAMS");if(P){var da=(da=P.split("|").find(va=>-1<va.indexOf("ESRI PE String \x3d ")))?da.replace("ESRI PE String \x3d ",""):"";da=da.startsWith("COMPD_CS")||da.startsWith("PROJCS")||da.startsWith("GEOGCS")?{wkid:null,wkt:da}:null}Z=z(x,"GEOTIEPOINTS");P=z(x,"GEOPIXELSCALE");G=z(x,"GEOTRANSMATRIX");var ba=x.has("GEOKEYDIRECTORY")?x.get("GEOKEYDIRECTORY").data:null;x=!1;if(ba){x=2===w(ba,"GTRasterTypeGeoKey");var ia=w(ba,"GTModelTypeGeoKey");2===ia?(ba=w(ba,"GeographicTypeGeoKey"),
1024<=ba&&32766>=ba&&(da={wkid:ba})):1===ia&&(ba=w(ba,"ProjectedCSTypeGeoKey"),1024<=ba&&32766>=ba&&(da={wkid:ba}))}let fa;P&&Z&&6<=Z.length?(fa=[P[0],0,Z[3]-Z[0]*P[0],0,-Math.abs(P[1]),Z[4]-Z[1]*P[1]],x&&(fa[2]-=.5*fa[0]+.5*fa[1],fa[5]-=.5*fa[3]+.5*fa[4])):G&&16===G.length&&(fa=x?[G[0],G[1],G[3]-.5*G[0],G[4],G[5],G[7]-.5*G[5]]:[G[0],G[1],G[3],G[4],G[5],G[7]]);if(fa){x=[{x:0,y:R},{x:0,y:0},{x:M,y:R},{x:M,y:0}];ba=G=Number.POSITIVE_INFINITY;let va=ia=Number.NEGATIVE_INFINITY;for(let wa=0;wa<x.length;wa++)Z=
S(x[wa],fa),G=Z.x>G?G:Z.x,ia=Z.x<ia?ia:Z.x,ba=Z.y>ba?ba:Z.y,va=Z.y<va?va:Z.y;da={xmin:G,xmax:ia,ymin:ba,ymax:va,spatialReference:da}}else da={xmin:-.5,ymin:.5-R,xmax:M-.5,ymax:.5,spatialReference:da};x=E.filter(va=>1===A(va,"NEWSUBFILETYPE"));let oa,pa,qa;if(0<x.length){oa=Math.round(Math.log(M/w(x[0],"IMAGEWIDTH"))/Math.LN2);var ta=x[x.length-1];pa=Math.round(Math.log(M/w(ta,"IMAGEWIDTH"))/Math.LN2);qa=w(ta,"TILEWIDTH");ta=w(ta,"TILELENGTH")}qa=0<pa?qa||B:null;ta=0<pa?ta||J:null;let ra;B&&(ra=[{maxCol:Math.ceil(M/
B)-1,maxRow:Math.ceil(R/J)-1,minRow:0,minCol:0}],x.forEach(va=>{ra.push({maxCol:Math.ceil(w(va,"IMAGEWIDTH")/w(va,"TILEWIDTH"))-1,maxRow:Math.ceil(w(va,"IMAGELENGTH")/w(va,"TILELENGTH"))-1,minRow:0,minCol:0})}));x=A(E[0],"GDAL_METADATA");x=Y(x);aa+=" "+F({width:M,height:R,tileWidth:B,tileHeight:J,planes:X,ifds:E});return{width:M,height:R,tileWidth:B,tileHeight:J,planes:X,isBSQ:a,pixelType:e,compression:r,noData:D,isSupported:d,message:aa,extent:da,affine:P?null:fa,firstPyramidLevel:oa,maximumPyramidLevel:pa,
pyramidBlockWidth:qa,pyramidBlockHeight:ta,tileBoundary:ra,metadata:x}}function c(E,e){return(E=U(E,"PLANARCONFIGURATION"))?2===E[0]:e?e.isBSQ:!1}function f(E){const {littleEndian:e,isBigTiff:r,firstIFD:x}=y(E);var B=x;const J=[];do if(B=C(E,e,B,0,ha.TIFF_TAGS,r?8:4),B.success)J.push(B.ifd),B=B.nextIFD;else break;while(0<B);return{...m(J),littleEndian:e,isBigTiff:r,ifds:J}}function l(E,e,r){const x=E.getUint32(e,r);E=E.getUint32(e+4,r);return r?4294967296*E+x:4294967296*x+E}function v(E,e,r,x){return x?
l(E,e,r):E.getUint32(e,r)}function y(E){var e=new DataView(E,0,16),r=e.getUint16(0,!1);E=null;if(18761===r)E=!0;else if(19789===r)E=!1;else throw"unexpected endianess byte";var x=e.getUint16(2,E);if(42!==x&&43!==x)throw"unexpected tiff identifier";r=4;if(x=43===x){const B=e.getUint16(r,E);r+=2;if(8!==B)throw"unsupported bigtiff version";if(0!==e.getUint16(r,E))throw"unsupported bigtiff version";r+=2}e=v(e,r,E,x);return{littleEndian:E,isBigTiff:x,firstIFD:e}}function C(E,e,r,x=0,B=ha.TIFF_TAGS,J=4){r=
b(E,e,r,x,B,J);let M;const R=r.ifd;R&&(ha.ifdTags.forEach((P,X)=>{R.has(X)&&(M=R.get(X),M.data=b(E,e,M.valueOffset-x,x,P).ifd)}),R.has("GEOKEYDIRECTORY")&&(M=R.get("GEOKEYDIRECTORY"),(B=M.values)&&4<B.length&&(B=B[0]+"."+B[1]+"."+B[2],M.data=b(E,e,M.valueOffset+6-x,x,ha.GEO_KEYS,2).ifd,M.data&&M.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[B]}))),R.has("XMP")&&(M=R.get("XMP"),B=M.values,"number"===typeof B[0]&&7===M.type&&(M.values=[ca.bytesToUTF8(new Uint8Array(B))])));
return r}function F(E){const {width:e,height:r,tileHeight:x,tileWidth:B}=E,J=E.planes,M=B?B*x:e*r;E=w(E.ifds[0],"BITSPERSAMPLE");let R="";M*J>2**30/(8<E?E/8:1)&&(R=B?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported");return R}function N(){N=t._asyncToGenerator(function*(E,e){var r;const {headerInfo:x,ifd:B,offsets:J,sizes:M}=e;var R=[];for(var P=0;P<J.length;P++){var X=yield h(E,x.littleEndian,B,J[P],M[P]||E.byteLength);R.push(X)}var Z=
c(B,x);const {pixelType:a,planes:d}=x;var D=O(a);E=w(B,"TILEWIDTH");P=w(B,"TILELENGTH");var G=null!=(r=w(B,"COMPRESSION"))?r:1;r=E*P;X=[];let aa=R[0];const da=34887===G;for(let fa=0;fa<d;fa++){G=new D(r);if(Z&&da){aa=R[fa];for(var ba=0;ba<r;ba++)G[ba]=aa[fa][ba+fa]}else if(Z||da&&!Z)G=aa.slice(r*fa,r*(fa+1));else for(ba=0;ba<r;ba++)G[ba]=aa[ba*d+fa];X.push(G)}R=x.noData?x.noData[0]:null;Z=(D=x.metadata?x.metadata.statistics:null)?D.map(fa=>fa.min):null;D=D?D.map(fa=>fa.max):null;let ia;if(null!=R)if(ia=
new Uint8Array(r),1E24<Math.abs(R))for(e=0;e<r;e++)ia[e]=1E-6>Math.abs((X[0][e]-R)/R)?0:1;else for(e=0;e<r;e++)ia[e]=X[0][e]===R?0:1;else Z&&D&&e.applyMinMaxConstraint&&(ia=ka(X,Z,D));return{pixelType:a,width:E,height:P,pixels:X,mask:ia,noDataValue:R}});return N.apply(this,arguments)}function L(){L=t._asyncToGenerator(function*(E,e=0,r){r=r||f(E);const {ifds:x,noData:B}=r;if(0===x.length)throw"no valid image file directory";var J=F(r);if(J)throw J;var M=-1===e?x[x.length-1]:x[e];e=B?B[0]:null;if(r.tileWidth)r=
yield g(E,r,M);else{{var R=r,P;const ta=na.isPlatformLittleEndian===R.littleEndian,ra=z(M,"STRIPOFFSETS");if(void 0===ra)E=null;else{var {width:X,height:Z,pixelType:a}=m([M]);r=R.planes;J=X*Z;var d=w(M,"BITSPERSAMPLE"),D=O(a),G=new D(J*r),aa=z(M,"STRIPBYTECOUNTS"),da=w(M,"ROWSPERSTRIP");M=null!=(P=w(M,"COMPRESSION"))?P:1;var ba=da;if(0===d%8)for(P=0;P<ra.length;P++){var ia=P*da*X*r;ba=(P+1)*da>Z?Z-P*da:da;if("u8"===a||"s8"===a||ta)if(8===M||32946===M){var fa=new Uint8Array(E,ra[P],aa[P]);fa=new ja.Zlib(fa);
var oa=fa.getBytes();var pa=new ArrayBuffer(oa.length);fa=new Uint8Array(pa);fa.set(oa);fa.length!==ba*X*r*d/8&&console.log("strip byte counts is different than expected")}else 6===M?(fa=new Uint8Array(E,ra[P],aa[P]),pa=new W.JpegImage,pa.parse(fa),ba=pa.getData(pa.width,pa.height,!0),pa=new ArrayBuffer(ba.length),fa=new Uint8Array(pa),fa.set(ba)):5===M?(fa=T.decode(E,ra[P],aa[P],R.littleEndian),pa=fa.buffer):1===M&&(aa[P]!==ba*X*r*d/8&&console.log("strip byte counts is different than expected"),
pa=E.slice(ra[P],ra[P]+aa[P]));else{if(6===M||8===M||32946===M){fa=new Uint8Array(E,ra[P],aa[P]);fa=new ja.Zlib(fa);fa=fa.getBytes();pa=new ArrayBuffer(fa.length);var qa=new Uint8Array(pa);fa.length!==ba*X*r*d/8&&console.log("strip byte counts is different than expected")}else 1===M&&(aa[P]!==ba*X*r*d/8&&console.log("strip byte counts is different than expected"),pa=new ArrayBuffer(aa[P]),fa=new Uint8Array(E,ra[P],aa[P]),qa=new Uint8Array(pa));switch(a){case "u16":case "s16":for(ba=0;ba<fa.length;ba+=
2)qa[ba]=fa[ba+1],qa[ba+1]=fa[ba];break;case "u32":case "s32":case "f32":for(ba=0;ba<fa.length;ba+=4)qa[ba]=fa[ba+3],qa[ba+1]=fa[ba+2],qa[ba+2]=fa[ba+1],qa[ba+3]=fa[ba]}}ba=new D(pa);G.set(ba,ia)}fa=[];if(1===r)fa.push(G);else for(P=0;P<r;P++){qa=new D(J);for(E=0;E<J;E++)qa[E]=G[E*r+P];fa.push(qa)}E={width:X,height:Z,pixelType:a,pixels:fa}}}r=yield E}if(null!==e){r.mask=new Uint8Array(r.width*r.height);if(1E24<Math.abs(e))for(E=0;E<r.width*r.height;E++)r.mask[E]=1E-6>Math.abs((r.pixels[0][E]-e)/e)?
0:1;else for(E=0;E<r.width*r.height;E++)r.mask[E]=r.pixels[0][E]===e?0:1;r.noDataValue=e}return r});return L.apply(this,arguments)}const n=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],I=new Set([1,5,6,7,8,34712,34887]),ka=function(E,e,r){if(!(E&&0<E.length&&e&&r))return null;let x,B,J;const M=E[0].length,R=E.length,P=new Uint8Array(M);for(let Z=0;Z<R;Z++)if(x=E[Z],B=e[Z],J=r[Z],0===Z)for(var X=0;X<M;X++)P[X]=x[X]<B||x[X]>J?0:1;else for(X=0;X<M;X++)P[X]&&(P[X]=x[X]<B||x[X]>J?0:1);return P},Y=function(E){if(!E)return null;
var e=E.match(/<Item(.*?)Item>/gi);if(!e||0===e.length)return null;E=new Map;var r;for(var x=0;x<e.length;x++){var B=e[x];var J=B.slice(6,B.indexOf("\x3e"));var M=B.indexOf("sample\x3d");-1<M&&(r=B.slice(M+8,B.indexOf('"',M+8)));M=B.indexOf("name\x3d");-1<M&&(J=B.slice(M+6,B.indexOf('"',M+6)));J&&(B=B.slice(B.indexOf("\x3e")+1,B.indexOf("\x3c/Item\x3e")).trim(),null!=r?E.has(J)?E.get(J)[r]=B:E.set(J,[B]):E.set(J,B));r=null}e=E.get("STATISTICS_MINIMUM");J=E.get("STATISTICS_MAXIMUM");x=E.get("STATISTICS_MEAN");
B=E.get("STATISTICS_STDDEV");r=null;if(e&&J)for(r=[],M=0;M<e.length;M++)r.push({min:parseFloat(e[M]),max:parseFloat(J[M]),avg:x&&parseFloat(x[M]),stddev:B&&parseFloat(B[M])});J=E.get("BandName");x=E.get("WavelengthMin");B=E.get("WavelengthMax");e=null;if(J)for(e=[],M=0;M<J.length;M++)e.push({BandName:J[M],WavelengthMin:x&&parseFloat(x[M]),WavelengthMax:B&&parseFloat(B[M])});J=E.get("DataType");return{statistics:r,bandProperties:e,dataType:J,rawMetadata:E}};Q.decode=function(E){return L.apply(this,
arguments)};Q.decodeTileOrStrip=function(E,e){return N.apply(this,arguments)};Q.getImageInfo=m;Q.isBSQConfig=c;Q.parseFieldValues=p;Q.parseHeader=f;Q.parseIFD=C;Q.parseSignature=y;Object.defineProperty(Q,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],function(Q){Q.bytesToUTF8=function(t,ca){let W=0,u="",T=0,ha=0;const na=t.length;for(;W<na;)if(ha=t[W++],T=ha>>4,8>T?T=1:15===T?(T=4,ha=(ha&7)<<18|(t[W++]&63)<<12|(t[W++]&63)<<6|t[W++]&63):
14===T?(T=3,ha=(ha&15)<<12|(t[W++]&63)<<6|t[W++]&63):(T=2,ha=(ha&31)<<6|t[W++]&63),0!==ha||ca)u+=String.fromCharCode(ha);return u};Object.defineProperty(Q,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const Q=(()=>{const u=[];u[254]="NEWSUBFILETYPE";u[255]="SUBFILETYPE";u[256]="IMAGEWIDTH";u[257]="IMAGELENGTH";u[258]="BITSPERSAMPLE";u[259]="COMPRESSION";u[262]="PHOTOMETRICINTERPRETATION";u[263]="THRESHHOLDING";u[264]="CELLWIDTH";u[265]="CELLLENGTH";
u[266]="FILLORDER";u[269]="DOCUMENTNAME";u[270]="IMAGEDESCRIPTION";u[271]="MAKE";u[272]="MODEL";u[273]="STRIPOFFSETS";u[274]="ORIENTATION";u[277]="SAMPLESPERPIXEL";u[278]="ROWSPERSTRIP";u[279]="STRIPBYTECOUNTS";u[280]="MINSAMPLEVALUE";u[281]="MAXSAMPLEVALUE";u[282]="XRESOLUTION";u[283]="YRESOLUTION";u[284]="PLANARCONFIGURATION";u[285]="PAGENAME";u[286]="XPOSITION";u[287]="YPOSITION";u[288]="FREEOFFSETS";u[289]="FREEBYTECOUNTS";u[290]="GRAYRESPONSEUNIT";u[291]="GRAYRESPONSECURVE";u[292]="T4OPTIONS";
u[293]="T6OPTIONS";u[296]="RESOLUTIONUNIT";u[297]="PAGENUMBER";u[300]="COLORRESPONSEUNIT";u[301]="TRANSFERFUNCTION";u[305]="SOFTWARE";u[306]="DATETIME";u[315]="ARTIST";u[316]="HOSTCOMPUTER";u[317]="PREDICTOR";u[318]="WHITEPOINT";u[319]="PRIMARYCHROMATICITIES";u[320]="COLORMAP";u[321]="HALFTONEHINTS";u[322]="TILEWIDTH";u[323]="TILELENGTH";u[324]="TILEOFFSETS";u[325]="TILEBYTECOUNTS";u[326]="BADFAXLINES";u[327]="CLEANFAXDATA";u[328]="CONSECUTIVEBADFAXLINES";u[330]="SUBIFD";u[332]="INKSET";u[333]="INKNAMES";
u[334]="NUMBEROFINKS";u[336]="DOTRANGE";u[337]="TARGETPRINTER";u[338]="EXTRASAMPLES";u[339]="SAMPLEFORMAT";u[340]="SMINSAMPLEVALUE";u[341]="SMAXSAMPLEVALUE";u[342]="TRANSFERRANGE";u[347]="JPEGTABLES";u[512]="JPEGPROC";u[513]="JPEGIFOFFSET";u[514]="JPEGIFBYTECOUNT";u[515]="JPEGRESTARTINTERVAL";u[517]="JPEGLOSSLESSPREDICTORS";u[518]="JPEGPOINTTRANSFORM";u[519]="JPEGQTABLES";u[520]="JPEGDCTABLES";u[521]="JPEGACTABLES";u[529]="YCBCRCOEFFICIENTS";u[530]="YCBCRSUBSAMPLING";u[531]="YCBCRPOSITIONING";u[532]=
"REFERENCEBLACKWHITE";u[700]="XMP";u[33550]="GEOPIXELSCALE";u[33922]="GEOTIEPOINTS";u[33432]="COPYRIGHT";u[42112]="GDAL_METADATA";u[42113]="GDAL_NODATA";u[50844]="RPCCOEFFICIENT";u[34264]="GEOTRANSMATRIX";u[34735]="GEOKEYDIRECTORY";u[34736]="GEODOUBLEPARAMS";u[34737]="GEOASCIIPARAMS";u[34665]="EXIFIFD";u[34853]="GPSIFD";u[40965]="INTEROPERABILITYIFD";return u})(),t=(()=>{const u=[].concat(Q);u[36864]="ExifVersion";u[40960]="FlashpixVersion";u[40961]="ColorSpace";u[42240]="Gamma";u[37121]="ComponentsConfiguration";
u[37122]="CompressedBitsPerPixel";u[40962]="PixelXDimension";u[40963]="PixelYDimension";u[37500]="MakerNote";u[37510]="UserComment";u[40964]="RelatedSoundFile";u[36867]="DateTimeOriginal";u[36868]="DateTimeDigitized";u[36880]="OffsetTime";u[36881]="OffsetTimeOriginal";u[36882]="OffsetTimeDigitized";u[37520]="SubSecTime";u[37521]="SubSecTimeOriginal";u[37522]="SubSecTimeDigitized";u[37888]="Temperature";u[37889]="Humidity";u[37890]="Pressure";u[37891]="WaterDepth";u[37892]="Acceleration";u[37893]=
"CameraElevationAngle";u[42016]="ImageUniqueID";u[42032]="CameraOwnerName";u[42033]="BodySerialNumber";u[42034]="LensSpecification";u[42035]="LensMake";u[42036]="LensModel";u[42037]="LensSerialNumber";u[33434]="ExposureTime";u[33437]="FNumber";u[34850]="ExposureProgram";u[34852]="SpectralSensitivity";u[34855]="PhotographicSensitivity";u[34856]="OECF";u[34864]="SensitivityType";u[34865]="StandardOutputSensitivity";u[34866]="RecommendedExposureIndex";u[34867]="ISOSpeed";u[34868]="ISOSpeedLatitudeyyy";
u[34869]="ISOSpeedLatitudezzz";u[37377]="ShutterSpeedValue";u[37378]="ApertureValue";u[37379]="BrightnessValue";u[37380]="ExposureBiasValue";u[37381]="MaxApertureValue";u[37382]="SubjectDistance";u[37383]="MeteringMode";u[37384]="LightSource";u[37385]="Flash";u[37386]="FocalLength";u[37396]="SubjectArea";u[41483]="FlashEnergy";u[41484]="SpatialFrequencyResponse";u[41486]="FocalPlaneXResolution";u[41487]="FocalPlaneYResolution";u[41488]="FocalPlaneResolutionUnit";u[41492]="SubjectLocation";u[41493]=
"ExposureIndex";u[41495]="SensingMethod";u[41728]="FileSource";u[41729]="SceneType";u[41730]="CFAPattern";u[41985]="CustomRendered";u[41986]="ExposureMode";u[41987]="WhiteBalance";u[41988]="DigitalZoomRatio";u[41989]="FocalLengthIn35mmFilm";u[41990]="SceneCaptureType";u[41991]="GainControl";u[41992]="Contrast";u[41993]="Saturation";u[41994]="Sharpness";u[41995]="DeviceSettingDescription";u[41996]="SubjectDistanceRange";return u})(),ca=(()=>{const u=[];u[1024]="GTModelTypeGeoKey";u[1025]="GTRasterTypeGeoKey";
u[1026]="GTCitationGeoKey";u[2048]="GeographicTypeGeoKey";u[2049]="GeogCitationGeoKey";u[2050]="GeogGeodeticDatumGeoKey";u[2051]="GeogPrimeMeridianGeoKey";u[2052]="GeogLinearUnitsGeoKey";u[2053]="GeogLinearUnitSizeGeoKey";u[2054]="GeogAngularUnitsGeoKey";u[2055]="GeogAngularUnitSizeGeoKey";u[2056]="GeogEllipsoidGeoKey";u[2057]="GeogSemiMajorAxisGeoKey";u[2058]="GeogSemiMinorAxisGeoKey";u[2059]="GeogInvFlatteningGeoKey";u[2061]="GeogPrimeMeridianLongGeoKey";u[2060]="GeogAzimuthUnitsGeoKey";u[3072]=
"ProjectedCSTypeGeoKey";u[3073]="PCSCitationGeoKey";u[3074]="ProjectionGeoKey";u[3075]="ProjCoordTransGeoKey";u[3076]="ProjLinearUnitsGeoKey";u[3077]="ProjLinearUnitSizeGeoKey";u[3078]="ProjStdParallel1GeoKey";u[3079]="ProjStdParallel2GeoKey";u[3080]="ProjNatOriginLongGeoKey";u[3081]="ProjNatOriginLatGeoKey";u[3082]="ProjFalseEastingGeoKey";u[3083]="ProjFalseNorthingGeoKey";u[3084]="ProjFalseOriginLongGeoKey";u[3085]="ProjFalseOriginLatGeoKey";u[3086]="ProjFalseOriginEastingGeoKey";u[3087]="ProjFalseOriginNorthingGeoKey";
u[3088]="ProjCenterLongGeoKey";u[3090]="ProjCenterEastingGeoKey";u[3091]="ProjCenterNorthingGeoKey";u[3092]="ProjScaleAtNatOriginGeoKey";u[3093]="ProjScaleAtCenterGeoKey";u[3094]="ProjAzimuthAngleGeoKey";u[3095]="ProjStraightVertPoleLongGeoKey";u[4096]="VerticalCSTypeGeoKey";u[4097]="VerticalCitationGeoKey";u[4098]="VerticalDatumGeoKey";u[4099]="VerticalUnitsGeoKey";return u})(),W=new Map;W.set("EXIFIFD",t);W.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:Q,ifdTags:W,GEO_KEYS:ca,getTagName:function(u,T){T=(T||Q)[u];void 0===T&&(T="unknown"+String(u));return T}}})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(Q){{var t=new ArrayBuffer(4);const ca=new Uint8Array(t);(new Uint32Array(t))[0]=1;t=1===ca[0]}Q.isPlatformLittleEndian=t;Object.defineProperty(Q,"__esModule",{value:!0})})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../../../core/maybe","../PixelBlock"],function(Q,
t,ca){function W(b){return t.isSome(b)&&"esri.layers.support.PixelBlock"===b.declaredClass&&b.pixels&&0<b.pixels.length}function u(b,h){b=Math.min(Math.max(b,-100),100);h=Math.min(Math.max(h,-100),100);let q,g;const k=new Uint8Array(256);for(q=0;256>q;q++)0<b&&100>b?g=(200*q-25500+510*h)/(2*(100-b))+128:0>=b&&-100<b?g=(200*q-25500+510*h)*(100+b)/2E4+128:100===b?(g=200*q-25500+256*(100-b)+510*h,g=0<g?255:0):-100===b&&(g=128),k[q]=255<g?255:0>g?0:g;return k}function T(b,h,q,g,k,p,m,c){return{xmin:k<=
q*b?0:k<q*b+b?k-q*b:b,ymin:p<=g*h?0:p<g*h+h?p-g*h:h,xmax:k+m<=q*b?0:k+m<q*b+b?k+m-q*b:b,ymax:p+c<=g*h?0:p+c<g*h+h?p+c-g*h:h}}function ha(b,h,q,g,k,p){const {width:m,height:c}=q.block,{x:f,y:l}=q.offset,{width:v,height:y}=q.mosaic;q=T(m,c,g,k,f,l,v,y);let C=0;var F=0;if(p){var N=p.hasGCSSShiftTransform?360:p.halfWorldWidth,L=m*p.resolutionX,n=p.startX+g*L;L=n+L;n<N&&L>N?F=p.rightPadding:n>=N&&(C=p.leftMargin-p.rightPadding,F=0)}q.xmax-=F;if("number"===typeof h)for(p=q.ymin;p<q.ymax;p++)for(F=(k*c+
p-l)*v+(g*m-f)+C,N=q.xmin;N<q.xmax;N++)b[F+N]=h;else for(p=q.ymin;p<q.ymax;p++)for(F=(k*c+p-l)*v+(g*m-f)+C,N=p*m,n=q.xmin;n<q.xmax;n++)b[F+n]=h[N+n]}function na(b,h,q={}){const {clipOffset:g,clipSize:k,alignmentInfo:p,blockWidths:m}=q;if(m)return ja(b,h,{blockWidths:m});var c=b.find(ka=>W(ka));if(t.isNone(c))return null;q=k?k.width:h.width;const f=k?k.height:h.height;var l=c.width,v=c.height;const y=h.width/l,C=h.height/v;h={offset:g||{x:0,y:0},mosaic:k||h,block:{width:l,height:v}};l=c.pixelType;
v=ca.getPixelArrayConstructor(l);var F=c.pixels.length;c=[];for(var N=0;N<F;N++){var L=new v(q*f);for(let ka=0;ka<C;ka++)for(let Y=0;Y<y;Y++){var n=b[ka*y+Y];W(n)&&(n=n.pixels[N],ha(L,n,h,Y,ka,p))}c.push(L)}let I;if(b.some(ka=>t.isNone(ka)||ka.mask&&0<ka.mask.length))for(I=new Uint8Array(q*f),v=0;v<C;v++)for(F=0;F<y;F++)L=b[v*y+F],(N=t.isSome(L)?L.mask:null)?ha(I,N,h,F,v,p):L?ha(I,1,h,F,v,p):ha(I,0,h,F,v,p);b=new ca({width:q,height:f,pixels:c,pixelType:l,mask:I});b.updateStatistics();return b}function ja(b,
h,q){const g=b.find(F=>t.isSome(F));if(!t.isSome(g))return null;var k=b.some(F=>t.isSome(F)?!!F.mask:!0);const {width:p,height:m}=h;h=k?new Uint8Array(p*m):null;({blockWidths:q}=q);const c=[],f=g.getPlaneCount(),l=ca.getPixelArrayConstructor(g.pixelType);if(k)for(let F=0,N=0;F<b.length;N+=q[F],F++)if(k=b[F],W(k)){var v=k.mask;for(var y=0;y<m;y++)for(var C=0;C<q[F];C++)h[y*p+C+N]=null==v?255:v[y*k.width+C]}for(k=0;k<f;k++){v=new l(p*m);for(let F=0,N=0;F<b.length;N+=q[F],F++)if(y=b[F],W(y)&&(C=y.pixels[k],
null!=C))for(let L=0;L<m;L++)for(let n=0;n<q[F];n++)v[L*p+n+N]=C[L*y.width+n];c.push(v)}b=new ca({width:p,height:m,mask:h,pixels:c,pixelType:g.pixelType});b.updateStatistics();return b}function ma(b){if(!W(b))return null;const h=b.clone(),{width:q,height:g,pixels:k,mask:p}=b;var m=k[0];b=h.pixels[0];for(let l=2;l<g-1;l++){const v=new Map;for(var c=l-2;c<l+2;c++)for(var f=0;4>f;f++){const y=c*q+f;U(v,m[y],p?p[y]:1)}b[l*q]=O(v);b[l*q+1]=b[l*q+2]=b[l*q];for(c=3;c<q-1;c++)f=(l-2)*q+c+1,U(v,m[f],p?p[f]:
1),f=(l-1)*q+c+1,U(v,m[f],p?p[f]:1),f=l*q+c+1,U(v,m[f],p?p[f]:1),f=(l+1)*q+c+1,U(v,m[f],p?p[f]:1),f=(l-2)*q+c-3,S(v,m[f],p?p[f]:1),f=(l-1)*q+c-3,S(v,m[f],p?p[f]:1),f=l*q+c-3,S(v,m[f],p?p[f]:1),f=(l+1)*q+c-3,S(v,m[f],p?p[f]:1),b[l*q+c]=O(v);b[l*q+c+1]=b[l*q+c]}for(m=0;m<q;m++)b[m]=b[q+m]=b[2*q+m],b[(g-1)*q+m]=b[(g-2)*q+m];h.updateStatistics();return h}function O(b){if(0===b.size)return 0;let h=0,q=-1,g=0;const k=b.keys();let p=k.next();for(;!p.done;)g=b.get(p.value),g>h&&(q=p.value,h=g),p=k.next();
return q}function S(b,h,q){0!==q&&(q=b.get(h),1===q?b.delete(h):b.set(h,q-1))}function U(b,h,q){0!==q&&b.set(h,b.has(h)?b.get(h)+1:1)}function z(b,h,q){let {x:g,y:k}=h;const {width:p,height:m}=q;if(0===g&&0===k&&m===b.height&&p===b.width)return b;const {width:c,height:f}=b;h=Math.max(0,k);const l=Math.max(0,g),v=Math.min(g+p,c),y=Math.min(k+m,f);if(0>v||0>y||!W(b))return null;g=Math.max(0,-g);k=Math.max(0,-k);const {pixels:C,mask:F}=b;var N=p*m,L=C.length;const n=[];for(var I=0;I<L;I++){var ka=C[I],
Y=ca.createEmptyBand(b.pixelType,N);for(let E=h;E<y;E++){const e=E*c;let r=(E+k-h)*p+g;for(let x=l;x<v;x++)Y[r++]=ka[e+x]}n.push(Y)}N=new Uint8Array(N);for(L=h;L<y;L++)for(I=L*c,ka=(L+k-h)*p+g,Y=l;Y<v;Y++)N[ka++]=F?F[I+Y]:1;b=new ca({width:q.width,height:q.height,pixelType:b.pixelType,pixels:n,mask:N});b.updateStatistics();return b}function A(b,h=!0){if(!W(b))return null;const {pixels:q,width:g,height:k,mask:p,pixelType:m}=b;b=[];const c=Math.round(g/2),f=Math.round(k/2),l=k-1,v=g-1;for(var y=0;y<
q.length;y++){var C=q[y],F=ca.createEmptyBand(m,c*f),N=0;for(var L=0;L<k;L+=2)for(var n=0;n<g;n+=2){var I=C[L*g+n];if(h){var ka=n===v?I:C[L*g+n+1];const Y=L===l?I:C[L*g+n+g],E=n===v?Y:L===l?ka:C[L*g+n+g+1];F[N++]=(I+ka+Y+E)/4}else F[N++]=I}b.push(F)}y=null;if(p)for(y=new Uint8Array(c*f),C=0,F=0;F<k;F+=2)for(N=0;N<g;N+=2)L=p[F*g+N],h?(n=N===v?L:p[F*g+N+1],I=F===l?L:p[F*g+N+g],ka=N===v?I:F===l?n:p[F*g+N+g+1],y[C++]=L*n*I*ka?1:0):y[C++]=L;return new ca({width:c,height:f,pixelType:m,pixels:b,mask:y})}
function w(b,h,q,g,k=.5){const {width:p,height:m}=b,{width:c,height:f}=h;b=g.cols;g=g.rows;h=Math.ceil(c/b-.1/b);const l=Math.ceil(f/g-.1/g);let v,y,C,F,N;const L=h*b;var n=L*l*g;const I=new Float32Array(n),ka=new Float32Array(n),Y=new Uint32Array(n),E=new Uint32Array(n);let e=0,r,x;for(let M=0;M<l;M++)for(let R=0;R<h;R++){var B=12*(M*h+R);n=q[B];v=q[B+1];y=q[B+2];C=q[B+3];F=q[B+4];N=q[B+5];for(var J=0;J<g;J++){e=(M*g+J)*L+R*b;x=(J+.5)/g;for(let P=0;P<J;P++)r=(P+.5)/b,I[e+P]=(n*r+v*x+y)*p-k,ka[e+
P]=(C*r+F*x+N)*m-k,Y[e+P]=Math.round(I[e+P]),E[e+P]=Math.round(ka[e+P])}B+=6;n=q[B];v=q[B+1];y=q[B+2];C=q[B+3];F=q[B+4];N=q[B+5];for(B=0;B<g;B++)for(e=(M*g+B)*L+R*b,x=(B+.5)/g,J=B;J<b;J++)r=(J+.5)/b,I[e+J]=(n*r+v*x+y)*p-k,ka[e+J]=(C*r+F*x+N)*m-k,Y[e+J]=Math.round(I[e+J]),E[e+J]=Math.round(ka[e+J])}return{offsets_x:I,offsets_y:ka,offsets_xi:Y,offsets_yi:E,gridWidth:L}}Q.approximateTransform=function(b,h,q,g,k="nearest"){if(!W(b))return null;"majority"===k&&(b=ma(b));const {pixels:p,mask:m,pixelType:c}=
b,f=b.width;var l=b.height;const v=ca.getPixelArrayConstructor(c),y=p.length,{width:C,height:F}=h;b=!1;for(let E=0;E<q.length;E+=3)-1===q[E]&&-1===q[E+1]&&-1===q[E+2]&&(b=!0);const {offsets_x:N,offsets_y:L,offsets_xi:n,offsets_yi:I,gridWidth:ka}=w({width:f,height:l},h,q,g,"majority"===k?0:.5);let Y;h=(E,e,r)=>{const x=E instanceof Float32Array||E instanceof Float64Array?0:.5;for(let B=0;B<F;B++){Y=B*ka;for(let J=0;J<C;J++){if(0>N[Y]||0>L[Y])E[B*C+J]=0;else if(r)E[B*C+J]=e[n[Y]+I[Y]*f];else{const M=
Math.floor(N[Y]),R=Math.floor(L[Y]),P=Math.ceil(N[Y]),X=Math.ceil(L[Y]),Z=N[Y]-M,a=L[Y]-R;E[B*C+J]=!m||m[M+R*f]&&m[M+R*f]&&m[M+X*f]&&m[P+X*f]?(1-a)*((1-Z)*e[M+R*f]+Z*e[P+R*f])+a*((1-Z)*e[M+X*f]+Z*e[P+X*f])+x:e[n[Y]+I[Y]*f]}Y++}}};q=[];for(l=0;l<y;l++)g=new v(C*F),h(g,p[l],"nearest"===k||"majority"===k),q.push(g);k=new ca({width:C,height:F,pixelType:c,pixels:q});if(m)k.mask=new Uint8Array(C*F),h(k.mask,m,!0);else if(b)for(k.mask=new Uint8Array(C*F),b=0;b<C*F;b++)k.mask[b]=0>N[b]||0>L[b]?0:1;k.updateStatistics();
return k};Q.clip=z;Q.colorize=function(b,h){if(!W(b)||!h&&(h.indexedColormap||h.indexed2DColormap))return b;const q=b.clone();var g=q.pixels;let k=q.mask;const p=q.width*q.height;if(1!==g.length)return b;const {indexedColormap:m,indexed2DColormap:c,offset:f,alphaSpecified:l}=h;h=m.length-1;b=0;g=g[0];const v=new Uint8Array(g.length),y=new Uint8Array(g.length),C=new Uint8Array(g.length);let F=0;if(m)if(k)for(b=0;b<p;b++)k[b]&&(F=4*(g[b]-f),F<f||F>h?k[b]=0:(v[b]=m[F],y[b]=m[F+1],C[b]=m[F+2],k[b]=m[F+
3]));else{k=new Uint8Array(p);for(b=0;b<p;b++)F=4*(g[b]-f),F<f||F>h?k[b]=0:(v[b]=m[F],y[b]=m[F+1],C[b]=m[F+2],k[b]=m[F+3]);q.mask=k}else if(k)for(b=0;b<p;b++)k[b]&&(h=c[g[b]],v[b]=h[0],y[b]=h[1],C[b]=h[2],k[b]=h[3]);else{k=new Uint8Array(p);for(b=0;b<p;b++)h=c[g[b]],v[b]=h[0],y[b]=h[1],C[b]=h[2],k[b]=h[3];q.mask=k}q.pixels=[v,y,C];q.statistics=null;q.pixelType="u8";q.maskIsAlpha=l;return q};Q.createColormapLUT=function(b){if(b){var h=b.colormap;if(h&&0!==h.length){h=h.sort((l,v)=>l[0]-v[0]);var q=
0;0>h[0][0]&&(q=h[0][0]);var g=Math.max(256,h[h.length-1][0]-q+1),k=new Uint8Array(4*g),p=[],m=0,c=0,f=5===h[0].length;if(65536<g)return h.forEach(l=>{p[l[0]-q]=f?l.slice(1):l.slice(1).concat([255])}),{indexed2DColormap:p,offset:q,alphaSpecified:f};if(b.fillUnspecified)for(b=h[c],m=b[0]-q;m<g;m++)k[4*m]=b[1],k[4*m+1]=b[2],k[4*m+2]=b[3],k[4*m+3]=f?b[4]:255,m===b[0]-q&&(b=c===h.length-1?b:h[++c]);else for(m=0;m<h.length;m++)b=h[m],c=4*(b[0]-q),k[c]=b[1],k[c+1]=b[2],k[c+2]=b[3],k[c+3]=f?b[4]:255;return{indexedColormap:k,
offset:q,alphaSpecified:f}}}};Q.createContrastBrightnessLUT=u;Q.createHistogramEqualizationLUT=function(b,h=256){h=Math.min(h,256);const {size:q,counts:g}=b;b=new Uint8Array(q);var k=g.reduce((l,v)=>l+v/h,0);let p=0;var m=0;let c=0,f=k;for(let l=0;l<q;l++)if(c+=g[l],!(l<q-1&&c+g[l+1]<f)){for(;p<h-1&&f<c;)p++,f+=k;for(;m<=l;m++)b[m]=p;m=l+1}for(k=m;k<q;k++)b[k]=h-1;return b};Q.createStretchLUT=function(b){const {minCutOff:h,maxCutOff:q,gamma:g,pixelType:k}=b,p=b.outMin||0,m=b.outMax||255;if(-1===["u8",
"u16","s8","s16"].indexOf(k))return null;const c=h.length;let f;let l=0;"s8"===k?l=-127:"s16"===k&&(l=-32767);let v=256;-1<["u16","s16"].indexOf(k)&&(v=65536);const y=[],C=m-p;for(f=0;f<c;f++)y[f]=q[f]-h[f];var F=g&&g.length>=c;const N=[];if(F)for(f=0;f<c;f++)N[f]=1<g[f]?2<g[f]?6.5+(g[f]-2)**2.5:6.5+100*(2-g[f])**4:1;let L;const n=[];let I,ka,Y;if(F)for(f=0;f<c;f++){Y=[];for(F=0;F<v;F++)I=F+l,L=(I-h[f])/y[f],ka=1,1<g[f]&&(ka-=(1/C)**(L*N[f])),Y[F]=I<q[f]&&I>h[f]?Math.floor(ka*C*L**(1/g[f]))+p:I>=
q[f]?m:p;n[f]=Y}else for(f=0;f<c;f++){Y=[];for(F=0;F<v;F++)I=F+l,Y[F]=I<=h[f]?p:I>=q[f]?m:Math.floor((I-h[f])/y[f]*C)+p;n[f]=Y}if(null!=b.contrastOffset)for(b=u(b.contrastOffset,b.brightnessOffset),f=0;f<c;f++)for(Y=n[f],F=0;F<v;F++)Y[F]=b[Y[F]];return{lut:n,offset:l}};Q.estimateStatisticsFromHistograms=function(b){const h=[];for(let p=0;p<b.length;p++){const {min:m,max:c,size:f,counts:l}=b[p];let v=0;var q=0;for(var g=0;g<f;g++)v+=l[g],q+=g*l[g];q/=v;g=0;for(var k=0;k<f;k++)g+=l[k]*(k-q)**2;k=(c-
m)/f;h.push({min:m,max:c,avg:(q+.5)*k+m,stddev:Math.sqrt(g/(v-1))*k})}return h};Q.estimateStatisticsHistograms=function(b){if(!W(b))return null;b.statistics||b.updateStatistics();const {pixels:h,mask:q,pixelType:g,statistics:k}=b;b=b.width*b.height;const p=h.length;let m,c;let f;var l;const v=[],y=[];for(f=0;f<p;f++){var C=new Uint32Array(256);var F=h[f];if("u8"===g)if(m=-.5,c=255.5,q)for(l=0;l<b;l++)q[l]&&C[F[l]]++;else for(l=0;l<b;l++)C[F[l]]++;else{m=k[f].minValue;c=k[f].maxValue;var N=(c-m)/256;
var L=new Uint32Array(257);if(q)for(l=0;l<b;l++)q[l]&&L[Math.floor((F[l]-m)/N)]++;else for(l=0;l<b;l++)L[Math.floor((F[l]-m)/N)]++;for(l=0;255>l;l++)C[l]=L[l];C[255]=L[255]+L[256]}v.push({min:m,max:c,size:256,counts:C});for(l=F=L=N=0;256>l;l++)N+=C[l],L+=l*C[l];L/=N;for(l=0;256>l;l++)F+=C[l]*(l-L)**2;C=Math.sqrt(F/(N-1));N=(c-m)/256;l=(L+.5)*N+m;C*=N;y.push({min:m,max:c,avg:l,stddev:C})}return{statistics:y,histograms:v}};Q.extractBands=function(b,h){if(null==h||!h.length||!W(b))return b;const q=b.pixels.length;
return h&&h.some(g=>g>=q)||1===q&&1===h.length&&0===h[0]||q===h.length&&!h.some((g,k)=>g!==k)?b:new ca({pixelType:b.pixelType,width:b.width,height:b.height,mask:b.mask,validPixelCount:b.validPixelCount,maskIsAlpha:b.maskIsAlpha,pixels:h.map(g=>b.pixels[g]),statistics:b.statistics&&h.map(g=>b.statistics[g])})};Q.getClipBounds=T;Q.getLocalArithmeticNorthRotations=function(b,h){const {coefficients:q,spacing:g}=h,{offsets_x:k,offsets_y:p,gridWidth:m}=w(b,b,q,{rows:g[0],cols:g[1]},.5),{width:c,height:f}=
b;b=new Float32Array(c*f);h=180/Math.PI;for(let y=0;y<f;y++)for(let C=0;C<c;C++){var l=y*m+C,v=0===y?l:l-m;const F=y===f-1?l:l+m;l=k[v]-k[F];v=p[F]-p[v];isNaN(l)||isNaN(v)?b[y*c+C]=90:(v=Math.atan2(v,l)*h,v=(360+v)%360,b[y*c+C]=v)}return b};Q.isValidPixelBlock=W;Q.lookupPixels=function(b,h){if(!W(b))return null;const {pixels:q,mask:g}=b,k=b.width*b.height,p=q.length;let m=h.lut;({offset:h}=h);let c,f;m&&1===m[0].length&&(m=q.map(()=>m));const l=[];let v,y,C;if(h)if(null==g)for(c=0;c<p;c++){v=q[c];
y=m[c];C=new Uint8Array(k);for(f=0;f<k;f++)C[f]=y[v[f]-h];l.push(C)}else for(c=0;c<p;c++){v=q[c];y=m[c];C=new Uint8Array(k);for(f=0;f<k;f++)g[f]&&(C[f]=y[v[f]-h]);l.push(C)}else if(null==g)for(c=0;c<p;c++){v=q[c];y=m[c];C=new Uint8Array(k);for(f=0;f<k;f++)C[f]=y[v[f]];l.push(C)}else for(c=0;c<p;c++){v=q[c];y=m[c];C=new Uint8Array(k);for(f=0;f<k;f++)g[f]&&(C[f]=y[v[f]]);l.push(C)}b=new ca({width:b.width,height:b.height,pixels:l,mask:g,pixelType:"u8"});b.updateStatistics();return b};Q.mosaic=na;Q.mosaicPixelData=
function(b,h){if(!b||0===b.length)return null;var q=b.find(y=>y.pixelBlock);if(!q||t.isNone(q.pixelBlock))return null;var g=(q.extent.xmax-q.extent.xmin)/q.pixelBlock.width;const k=(q.extent.ymax-q.extent.ymin)/q.pixelBlock.height,p=.01*Math.min(g,k),m=b.sort((y,C)=>Math.abs(y.extent.ymax-C.extent.ymax)>p?C.extent.ymax-y.extent.ymax:Math.abs(y.extent.xmin-C.extent.xmin)>p?y.extent.xmin-C.extent.xmin:0);var c=Math.min.apply(null,m.map(y=>y.extent.xmin));const f=Math.min.apply(null,m.map(y=>y.extent.ymin)),
l=Math.max.apply(null,m.map(y=>y.extent.xmax)),v=Math.max.apply(null,m.map(y=>y.extent.ymax));b={x:Math.round((h.xmin-c)/g),y:Math.round((v-h.ymax)/k)};c={width:Math.round((l-c)/g),height:Math.round((v-f)/k)};g={width:Math.round((h.xmax-h.xmin)/g),height:Math.round((h.ymax-h.ymin)/k)};if(Math.round(c.width/q.pixelBlock.width)*Math.round(c.height/q.pixelBlock.height)!==m.length||0>b.x||0>b.y||c.width<g.width||c.height<g.height)return null;q=m.map(y=>y.pixelBlock);q=na(q,c,{clipOffset:b,clipSize:g});
return{extent:h,pixelBlock:q}};Q.remapColor=function(b,h){if(!W(b))return null;b=b.clone();var {pixels:q}=b;const g=b.width*b.height,k=h.length,p=Math.floor(k/2),m=h[Math.floor(p)];q=q[0];let c,f,l,v,y,C,F=!1;const N=new Uint8Array(g),L=new Uint8Array(g),n=new Uint8Array(g);let I=b.mask;const ka=4===h[0].mappedColor.length;I||(I=new Uint8Array(g),I.fill(ka?255:1),b.mask=I);for(y=0;y<g;y++)if(I[y]){c=q[y];F=!1;C=p;f=m;l=0;for(v=k-1;1<v-l;){if(c===f.value){F=!0;break}c>f.value?l=C:v=C;C=Math.floor((l+
v)/2);f=h[Math.floor(C)]}F||(c===h[l].value?(f=h[l],F=!0):c===h[v].value?(f=h[v],F=!0):c<h[l].value?(F=!1,f=null):c>h[l].value&&(c<h[v].value?(f=h[l],F=!0):v===k-1?(F=!1,f=null):(f=h[v],F=!0)));F?(N[y]=f.mappedColor[0],L[y]=f.mappedColor[1],n[y]=f.mappedColor[2],I[y]=f.mappedColor[3]):N[y]=L[y]=n[y]=I[y]=0}b.pixels=[N,L,n];b.mask=I;b.pixelType="u8";b.maskIsAlpha=ka;return b};Q.resampleByMajority=ma;Q.setValidBoundary=function(b,h,q){if(!W(b))return null;const {width:g,height:k}=b,p=h.x;h=h.y;const m=
q.width+p;q=q.height+h;if(0>p||0>h||m>g||q>k||0===p&&0===h&&m===g&&q===k)return b;b.mask||(b.mask=new Uint8Array(g*k));const c=b.mask;for(let f=0;f<k;f++){const l=f*g;for(let v=0;v<g;v++)c[l+v]=f<h||f>=q||v<p||v>=m?0:1}b.updateStatistics();return b};Q.split=function(b,h,q){if(!W(b))return null;const {width:g,height:k}=h;let {width:p,height:m}=b;const c=new Map,f={x:0,y:0};q=null==q?1:1+q;for(let l=0;l<q;l++){const v=Math.ceil(p/g),y=Math.ceil(m/k);for(let C=0;C<y;C++){f.y=C*k;for(let F=0;F<v;F++){f.x=
F*g;const N=z(b,f,h);c.set(`${l}/${C}/${F}`,N)}}l<q-1&&(b=A(b));p=Math.round(p/2);m=Math.round(m/2)}return c};Q.stretch=function(b,h){if(!W(b))return null;b=b.clone();const {pixels:q,mask:g}=b,{minCutOff:k,maxCutOff:p,gamma:m}=h,c=h.outMin||0;h=h.outMax||255;const f=b.width*b.height,l=q.length;let v;let y,C,F;const N=h-c,L=[];for(v=0;v<l;v++)L[v]=p[v]-k[v];var n=m&&m.length>=l;const I=[];if(n)for(v=0;v<l;v++)I[v]=1<m[v]?2<m[v]?6.5+(m[v]-2)**2.5:6.5+100*(2-m[v])**4:1;if(n)if(null!=g)for(n=0;n<f;n++){if(g[n])for(v=
0;v<l;v++)y=q[v][n],F=(y-k[v])/L[v],C=1,1<m[v]&&(C-=(1/N)**(F*I[v])),q[v][n]=y<p[v]&&y>k[v]?Math.floor(C*N*F**(1/m[v]))+c:y>=p[v]?h:c}else for(n=0;n<f;n++)for(v=0;v<l;v++)y=q[v][n],F=(y-k[v])/L[v],C=1,1<m[v]&&(C-=(1/N)**(F*I[v])),q[v][n]=y<p[v]&&y>k[v]?Math.floor(C*N*F**(1/m[v]))+c:y>=p[v]?h:c;else if(null!=g)for(n=0;n<f;n++){if(g[n])for(v=0;v<l;v++)y=q[v][n],q[v][n]=y<p[v]&&y>k[v]?Math.floor((y-k[v])/L[v]*N)+c:y>=p[v]?h:c}else for(n=0;n<f;n++)for(v=0;v<l;v++)y=q[v][n],q[v][n]=y<p[v]&&y>k[v]?Math.floor((y-
k[v])/L[v]*N)+c:y>=p[v]?h:c;b.pixelType="u8";b.updateStatistics();return b};Object.defineProperty(Q,"__esModule",{value:!0})})},"esri/layers/support/rasterFunctions/rasterProjectionHelper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/unitUtils ../../../chunks/pe ../../../geometry/projection ../../../geometry/Extent ../../../geometry/Point ../../../geometry/SpatialReference".split(" "),function(Q,t,ca,W,
u,T,ha,na,ja,ma,O){function S(e,r,x){return!na.canProjectWithoutEngine(e,r,x)}function U(e,r,x){if((e=S(e,r,x))&&!na.isLoaded())throw new W("rasterprojectionhelper-project","projection engine is not loaded");return e}function z(){z=t._asyncToGenerator(function*(){if(na.isLoaded())return null;yield na.load()});return z.apply(this,arguments)}function A(e,r,x,B=null){const J=e.spatialReference;if(J.equals(r))return e;U(J,r,B);x=x.center;x=new ja({xmin:x.x-e.x/2,xmax:x.x+e.x/2,ymin:x.y-e.y/2,ymax:x.y+
e.y/2,spatialReference:J});B=na.project(x,r,B);if(u.isNone(B))return null;B={x:B.xmax-B.xmin,y:B.ymax-B.ymin};x=y(r);u.isSome(x)&&B.x>=x&&(r=T.getMetersPerUnitForSR(J)/T.getMetersPerUnitForSR(r),B.x=e.x*r,B.y=e.y*r);return B}function w(e,r=.01){return T.getMetersPerUnitForSR(e)?r/T.getMetersPerUnitForSR(e):0}function b(e,r,x=null,B=!0){var J=e.spatialReference;if(J.equals(r))return e;U(J,r,x);x=na.project(e,r,x);if(!B||!x)return x;B=C(J,!0);r=C(r,!0);(J=w(J))&&u.isSome(B)&&u.isSome(r)&&(0<x.x&&Math.abs(e.x-
B[0])<J?x.x-=r[1]-r[0]:0>x.x&&Math.abs(e.x-B[1])<J&&(x.x+=r[1]-r[0]));return x}function h(e){const {inSR:r,outSR:x,datumTransformation:B,preferPE:J}=e;if(r.equals(x))return{points:e}=m(e,null),e;if(r.isWebMercator&&x.isWGS84||r.isWGS84&&x.isWebMercator){{const {cols:Z,rows:a,xres:d,yres:D,usePixelCenter:G,inSR:aa,outSR:da}=e;let {xmin:ba,ymax:ia}=e;G&&(ba+=d/2,ia-=D/2);e=[];var M=[],R=Math.max(Z,a);for(var P=0;P<R;P++){var X=na.project(new ma({x:ba+d*Math.min(Z,P),y:ia-D*Math.min(a,P),spatialReference:aa}),
da);P<=Z&&e.push(X.x);P<=a&&M.push(X.y)}R=[];for(P=0;P<Z;P++)for(X=0;X<a;X++)R.push([e[P],M[X]]);e=R}return e}if(U(r,x,B)&&J){if(r.isGeographic)return g(e);M=k(r);if(u.isSome(M))return g(e)}return q(e)}function q(e){var {points:r}=m(e,null);r=r.map(x=>new ma(x[0],x[1],e.inSR));return na.project(r,e.outSR,e.datumTransformation).map(x=>x?[x.x,x.y]:[NaN,NaN])}function g(e){const {inSR:r,outSR:x,datumTransformation:B}=e,J=k(r),{points:M,mask:R}=m(e,J);r.isGeographic||(e=r.wkid?ha.PeFactory.coordsys(r.wkid):
ha.PeFactory.fromString(r.isGeographic?ha.PeDefs.PE_TYPE_GEOGCS:ha.PeDefs.PE_TYPE_PROJCS,r.wkt),ha.PeCSTransformations.projToGeog(e,M.length,M));u.isSome(B)&&B.steps.length&&B.steps.forEach(P=>{const X=P.wkid?ha.PeFactory.geogtran(P.wkid):ha.PeFactory.fromString(ha.PeDefs.PE_TYPE_GEOGTRAN,P.wkt);ha.PeGTTransformations.geogToGeog(X,M.length,M,null,P.isInverse?ha.PeDefs.PE_TRANSFORM_2_TO_1:ha.PeDefs.PE_TRANSFORM_1_TO_2)});x.isGeographic||(e=k(x,!0),e=u.isSome(e)&&e.isEnvelope?[e.bbox[1],e.bbox[3]]:
[-90,90],c(M,e),e=x.wkid?ha.PeFactory.coordsys(x.wkid):ha.PeFactory.fromString(x.isGeographic?ha.PeDefs.PE_TYPE_GEOGCS:ha.PeDefs.PE_TYPE_PROJCS,x.wkt),ha.PeCSTransformations.geogToProj(e,M.length,M));e=M;if(R&&M.length!==R.length){e=[];for(let P=0,X=0;P<R.length;P++)R[P]?e.push(M[X++]):e.push([NaN,NaN])}return e}function k(e,r=!1){var x=e.wkid||e.wkt;if(!x||e.isGeographic)return null;x=String(x);if(Y.has(x))return x=Y.get(x),r?null==x?void 0:x.gcs:null==x?void 0:x.pcs;var B=e.wkid?ha.PeFactory.coordsys(e.wkid):
ha.PeFactory.fromString(e.isGeographic?ha.PeDefs.PE_TYPE_GEOGCS:ha.PeDefs.PE_TYPE_PROJCS,e.wkt);e=w(e,1E-4);e=p(B,e);B=p(B,0,!0);Y.set(x,{pcs:e,gcs:B});return r?B:e}function p(e,r=0,x=!1){var B=ha.PePCSInfo.generate(e),J=x?e.horizonGcsGenerate():e.horizonPcsGenerate();if(null==J||!J.length)return null;x=!1;e=J.find(Z=>1===Z.getInclusive()&&1===Z.getKind());if(!e){e=J.find(Z=>1===Z.getInclusive()&&0===Z.getKind());if(!e)return null;x=!0}B=B.isPannableRectangle();e=e.getCoord();if(x)return{isEnvelope:x,
isPannable:B,vertices:e,coef:null,bbox:[e[0][0]-r,e[0][1]-r,e[1][0]+r,e[1][1]+r]};r=0;x=[];let [M,R]=e[0],[P,X]=e[0];for(let Z=0,a=e.length;Z<a;Z++){r++;r===a&&(r=0);const [d,D]=e[Z],[G,aa]=e[r];if(aa===D)x.push([d,G,D,aa,2]);else{J=(G-d)/(aa-D||1E-4);const da=d-J*D;D<aa?x.push([J,da,D,aa,0]):x.push([J,da,aa,D,1])}M=M<d?M:d;R=R<D?R:D;P=P>d?P:d;X=X>D?X:D}return{isEnvelope:!1,isPannable:B,vertices:e,coef:x,bbox:[M,R,P,X]}}function m(e,r){const x=[],{cols:B,rows:J,xres:M,yres:R,usePixelCenter:P}=e;let {xmin:X,
ymax:Z}=e;P&&(X+=M/2,Z-=R/2);if(!u.isSome(r)){for(e=0;e<B;e++)for(r=0;r<J;r++)x.push([X+M*e,Z-R*r]);return{points:x}}e=new Uint8Array(B*J);if(r.isEnvelope){const {bbox:[ba,ia,fa,oa]}=r;for(let pa=0,qa=0;pa<B;pa++){var a=X+M*pa,d=r.isPannable||a>=ba&&a<=fa;for(var D=0;D<J;D++,qa++){var G=Z-R*D;d&&G>=ia&&G<=oa&&(x.push([a,G]),e[qa]=1)}}return{points:x,mask:e}}({coef:a}=r);r=[];for(d=0;d<J;d++){var aa=Z-R*d;D=[];G=[];for(var da=0;da<a.length;da++){const [ba,ia,fa,oa,pa]=a[da];aa===fa&&fa===oa?(D.push(ba),
D.push(ia),G.push(2),G.push(2)):aa>=fa&&aa<=oa&&(D.push(ba*aa+ia),G.push(pa))}aa=D;if(2<D.length){da=2===G[0]?0:G[0];let ba=D[0];aa=[];for(let ia=1;ia<G.length;ia++)if(2!==G[ia]||ia===G.length-1)G[ia]!==da&&(aa.push(0===da?Math.min(ba,D[ia-1]):Math.max(ba,D[ia-1])),da=G[ia],ba=D[ia]),ia===G.length-1&&aa.push(0===G[ia]?Math.min(ba,D[ia]):Math.max(ba,D[ia]));aa.sort((ia,fa)=>ia-fa)}else D[0]>D[1]&&(aa=[D[1],D[0]]);r.push(aa)}for(let ba=0,ia=0;ba<B;ba++)for(a=X+M*ba,d=0;d<J;d++,ia++)if(D=Z-R*d,G=r[d],
2===G.length)a>=G[0]&&a<=G[1]&&(x.push([a,D]),e[ia]=1);else if(2<G.length){aa=!1;for(da=0;da<G.length;da+=2)if(a>=G[da]&&a<=G[da+1]){aa=!0;break}aa&&(x.push([a,D]),e[ia]=1)}return{points:x,mask:e}}function c(e,r){const [x,B]=r;for(r=0;r<e.length;r++){const J=e[r][1];if(J<x||J>B)e[r]=[NaN,NaN]}}function f(e){const r=y(e[0].spatialReference);if(2>e.length||!u.isSome(r))return e[0];let {xmin:x,xmax:B,ymin:J,ymax:M}=e[0];for(let R=1;R<e.length;R++){const P=e[R];B=P.xmax+r*R;J=Math.min(J,P.ymin);M=Math.max(M,
P.ymax)}return new ja({xmin:x,xmax:B,ymin:J,ymax:M,spatialReference:e[0].spatialReference})}function l(e,r,x=null,B=!0){if(e.spatialReference.equals(r))return e;const J=N(e),M=y(e.spatialReference,!0);var R=y(r);if(0===J||u.isNone(M)||u.isNone(R))return v(e,r,x,B);R=e.clone().normalize();if(1===R.length&&e.xmax<M&&e.xmax-M/2>w(e.spatialReference)){const {xmin:P,xmax:X}=e;for(let Z=0;Z<=J;Z++)R[Z]=new ja({xmin:0===Z?P:-M/2,xmax:Z===J?X-M*Z:M/2,ymin:e.ymin,ymax:e.ymax,spatialReference:e.spatialReference})}e=
R.map(P=>v(P,r,x,B));return f(e.filter(P=>!!P))}function v(e,r,x=null,B=!0,J=!0){const M=e.spatialReference;if(M.equals(r))return e;U(M,r,x);const R=na.project(e,r,x);if(J&&r.isWebMercator&&R&&(R.ymax=Math.min(2.0037508342787E7,R.ymax),R.ymin=Math.max(-2.0037508342787E7,R.ymin),R.ymin>=R.ymax))return null;if(!B||!R)return R;var P=C(M,!0);B=C(r,!0);if(u.isNone(P)||u.isNone(B))return R;J=w(M,.001);const X=w(M,500);var Z=w(r,.001);if(Math.abs(R.xmin-B[0])<Z&&Math.abs(R.xmax-B[1])<Z){Z=Math.abs(e.xmin-
P[0]);P=Math.abs(P[1]-e.xmax);if(Z<J&&P>X){R.xmin=B[0];var a=[];a.push(new ma(e.xmax,e.ymin,M));a.push(new ma(e.xmax,(e.ymin+e.ymax)/2,M));a.push(new ma(e.xmax,e.ymax,M));a=a.map(d=>b(d,r,x)).filter(d=>!isNaN(null==d?void 0:d.x)).map(d=>d.x);R.xmax=Math.max.apply(null,a)}P<J&&Z>X&&(R.xmax=B[1],B=[],B.push(new ma(e.xmin,e.ymin,M)),B.push(new ma(e.xmin,(e.ymin+e.ymax)/2,M)),B.push(new ma(e.xmin,e.ymax,M)),e=B.map(d=>b(d,r,x)).filter(d=>!isNaN(null==d?void 0:d.x)).map(d=>d.x),R.xmin=Math.min.apply(null,
e))}else e=w(r,.001),Math.abs(R.xmin-B[0])<e&&(R.xmin=B[0]),Math.abs(R.xmax-B[1])<e&&(R.xmax=B[1]);return R}function y(e,r=!1){return e.isWebMercator?2*(r?2.0037508342787E7:2.0037508342788905E7):e.wkid&&e.isGeographic?360:2*ka[e.wkid]||null}function C(e,r=!1){if(e.isGeographic)return[-180,180];e=y(e,r);return u.isSome(e)?[-e/2,e/2]:null}function F(e,r,x,B){e=(e-r)/x;0!==e-Math.floor(e)?e=Math.floor(e):B&&--e;return e}function N(e,r=!1){var x=y(e.spatialReference);if(!u.isSome(x))return 0;const B=
r?0:-(x/2),J=w(e.spatialReference),M=!r&&Math.abs(e.xmin+x/2)<J?-x/2:e.xmin;e=F(!r&&Math.abs(e.xmax-x/2)<J?x/2:e.xmax,B,x,!0);x=F(M,B,x,!1);return e-x}function L(e){const {projectedExtent:r,srcBufferExtent:x,pixelSize:B,datumTransformation:J,rasterTransform:M}=e;var R=r.spatialReference;const P=x.spatialReference;U(R,P);const {xmin:X,ymin:Z,xmax:a,ymax:d}=r,D=y(P),G=u.isSome(D)&&(e.hasWrapAround||"gcs-shift"===(null==M?void 0:M.type));e=e.spacing||[32,32];var aa=e[0]*B.x,da=e[1]*B.y;const ba=1===
e[0],ia=Math.ceil((a-X)/aa-.1/e[0])+(ba?0:1),fa=Math.ceil((d-Z)/da-.1/e[1])+(ba?0:1);R=h({cols:ia,rows:fa,xmin:X,ymax:d,xres:aa,yres:da,inSR:R,outSR:P,datumTransformation:J,preferPE:4>=e[0],usePixelCenter:ba});aa=[];let oa;da=0;const pa=ba?-1:NaN,{xmin:qa,xmax:ta,ymax:ra,width:va,height:wa}=x,xa=w(P,500);for(let Ca=0;Ca<ia;Ca++){const Ba=[];for(let za=0;za<fa;za++){var Aa=R[Ca*fa+za];G&&Aa[0]>ta&&Aa[0]>D/2-xa&&(Aa[0]-=D);!Aa||isNaN(Aa[0])||isNaN(Aa[1])?(aa.push(pa),aa.push(pa),Ba.push(null),da++):
(M&&(Aa=M.inverseTransform(new ma({x:Aa[0],y:Aa[1],spatialReference:P})),Aa=[Aa.x,Aa.y]),Ba.push(Aa),0<Ca&&G&&oa[za]&&Aa[0]<oa[za][0]&&(Aa[0]+=D),aa.push((Aa[0]-qa)/va),aa.push((ra-Aa[1])/wa))}oa=Ba}return{offsets:aa,error:null,coefficients:null,outofBoundPointCount:da,spacing:e,size:ba?[ia,fa]:[ia-1,fa-1]}}function n(e,r,x){const {cols:B,rows:J}=r;r=new Float32Array((B-1)*(J-1)*12);const M=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),R=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let D=0;D<B-1;D++){for(var P=
0;P<J-1;P++){var X=D*J*2+2*P,Z=e[X];const G=e[X+1];var a=e[X+2],d=e[X+3];X+=2*J;const aa=e[X],da=e[X+1],ba=e[X+2];X=e[X+3];let ia=0,fa=12*(P*(B-1)+D);for(let oa=0;3>oa;oa++)r[fa++]=M[ia++]*Z+M[ia++]*a+M[ia++]*ba;ia=0;for(a=0;3>a;a++)r[fa++]=M[ia++]*G+M[ia++]*d+M[ia++]*X;ia=0;for(d=0;3>d;d++)r[fa++]=R[ia++]*Z+R[ia++]*aa+R[ia++]*ba;ia=0;for(Z=0;3>Z;Z++)r[fa++]=R[ia++]*G+R[ia++]*da+R[ia++]*X}if(x)for(P=0;P<r.length;P++)isNaN(r[P])&&(r[P]=-1)}return r}const I=function(e,r,x,B=0){if(1===x[0])return[0,
0];var J=1,M=-1,R=1,P=-1;for(var X=0;X<e.length;X+=2)isNaN(e[X])||(J=J>e[X]?e[X]:J,M=M>e[X]?M:e[X],R=R>e[X+1]?e[X+1]:R,P=P>e[X+1]?P:e[X+1]);const {cols:Z,rows:a}=r;r=(M-J)/Z/x[0];x=(P-R)/a/x[1];B*=2;R=0;P=!1;J=[0,0];for(M=0;M<Z-3;M++){for(X=0;X<a-3;X++){var d=M*a*2+2*X;const D=Math.abs(((e[d]+e[d+4]+e[d+4*a]+e[d+4*a+4])/4-e[d+2*a+2])/r);d=Math.abs(((e[d+1]+e[d+5]+e[d+4*a+1]+e[d+4*a+5])/4-e[d+2*a+3])/x);D+d>R&&(R=D+d,J=[D,d]);if(B&&R>B){P=!0;break}}if(P)break}return J},ka={3395:2.0037508342789244E7,
3410:1.7334193943686873E7,3857:2.0037508342788905E7,3975:1.7367530445161372E7,4087:2.0037508342789244E7,4088:2.0015108787169147E7,6933:1.7367530445161372E7,32662:2.0037508342789244E7,53001:2.001508679602057E7,53002:1.000754339801029E7,53003:2.001508679602057E7,53004:2.001508679602057E7,53016:1.4152803599503474E7,53017:1.7333573624304302E7,53034:2.001508679602057E7,53079:2.0015114352186374E7,53080:2.0015114352186374E7,54001:2.0037508342789244E7,54002:1.0018754171394624E7,54003:2.0037508342789244E7,
54004:2.0037508342789244E7,54016:1.4168658027268292E7,54017:1.736753044516137E7,54034:2.0037508342789244E7,54079:2.0037508342789244E7,54080:2.0037508342789244E7,54100:2.0037508342789244E7,54101:2.0037508342789244E7},Y=new Map,E=new Map;Q.computeProjectedScales=function(e,r,x=512,B=!0){const {extent:J,spatialReference:M,pixelSize:R}=e,P=A(new ma({x:R.x,y:R.y,spatialReference:M}),r,J);if(null==P)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};var X=(P.x+P.y)/
2,Z=T.getMetersPerUnitForSR(r);X=X*Z*96*39.37;const a=r.isGeographic?256/x*2.958287637958547E8:256/x*5.91657527591555E8;x="vector-magdir"===e.dataType||"vector-uv"===e.dataType;const d=l(J,r);x||B&&(r.isGeographic||r.isWebMercator)&&(x=0>d.xmin*d.xmax);B=X;if(x)B=a,e=r.isGeographic?1.341104507446289E-6:.29858214164761665,Z=96*e*Z*39.37,r=A(new ma({x:e,y:e,spatialReference:{wkid:r.isGeographic?4326:3857}}),M,d),r.x*=B/Z,r.y*=B/Z;else{r={x:R.x,y:R.y};e=Math.ceil(Math.log(Math.min(e.width,e.height)/
32)/Math.LN2);for(Z=0;B<.5005*a&&Z<e;)Z++,B*=2,r.x*=2,r.y*=2;1.001>=Math.max(B,a)/Math.min(B,a)&&(B=a)}e=[B];Z=[{x:r.x,y:r.y}];for(X=Math.min(70.5310735,X)/1.001;B>=X;)B/=2,r.x/=2,r.y/=2,e.push(B),Z.push({x:r.x,y:r.y});return{projectedPixelSize:P,scales:e,srcResolutions:Z,isCustomTilingScheme:!x}};Q.defaultGridSpacing=32;Q.defaultProjectionToleranceInPixels=4;Q.getDefaultDatumTransformationForDataset=function(e,r,x){return U(e.spatialReference,r)?x?na.getTransformation(r,e.spatialReference,e):na.getTransformation(e.spatialReference,
r,e):null};Q.getProjectedGridPoints=h;Q.getProjectionOffsetGrid=function(e){var r=e.isAdaptive&&null==e.spacing;let x=e.spacing||[32,32],B=L(e);var J={cols:B.size[0]+1,rows:B.size[1]+1};const M=0<B.outofBoundPointCount&&B.outofBoundPointCount<B.offsets.length/2;let R=B.outofBoundPointCount===B.offsets.length/2||r&&M?[0,0]:I(B.offsets,J,x,4);const P=(R[0]+R[1])/2;var X=e.projectedExtent.spatialReference;const Z=e.srcBufferExtent.spatialReference;r&&(M||4<P)&&(S(X,Z,e.datumTransformation)&&(X.isGeographic||
u.isSome(k(X))),x=[4,4],B=L({...e,spacing:x}),J={cols:B.size[0]+1,rows:B.size[1]+1},R=I(B.offsets,J,x,4));B.error=R;1<x[0]&&(B.coefficients=n(B.offsets,J,M));!e.includeGCSGrid||X.isGeographic||X.isWebMercator||(Z.isGeographic?B.gcsGrid={offsets:B.offsets,coefficients:B.coefficients,spacing:x}:(r=k(X),u.isSome(r)&&!r.isEnvelope&&(X&&!X.isGeographic&&(r=String(X.wkid||X.wkt),E.has(r)?X=E.get(r):(X=(X.wkid?ha.PeFactory.coordsys(X.wkid):ha.PeFactory.fromString(ha.PeDefs.PE_TYPE_PROJCS,X.wkt)).getGeogcs().getCode(),
E.set(r,X)),X=new O({wkid:X})),X=l(e.projectedExtent,X),{offsets:e}=L({...e,srcBufferExtent:X,spacing:x}),J=n(e,J,M),B.gcsGrid={offsets:e,coefficients:J,spacing:x})));return B};Q.getRasterDatasetAlignmentInfo=function(e){const r=e.storageInfo.origin.x;var x=y(e.spatialReference,!0);if(!u.isSome(x))return{originX:r,halfWorldWidth:null,pyramidsInfo:null};const B=x/2,{nativePixelSize:J,storageInfo:M,extent:R}=e,{maximumPyramidLevel:P,blockWidth:X,pyramidScalingFactor:Z}=M;let a=J.x;const d=[];e=u.isSome(e.transform)&&
"gcs-shift"===e.transform.type;const D=r+(e?0:B);x=e?x-r:B-r;for(let G=0;G<=P;G++){const aa=(R.xmax-r)/a/X,da=x/a/X;d.push({resolutionX:a,blockWidth:X,datsetColumnCount:0===aa-Math.floor(aa)?aa:Math.ceil(aa),worldColumnCountFromOrigin:0===da-Math.floor(da)?da:Math.ceil(da),leftMargin:Math.round(D/a)%X,rightPadding:(X-Math.round(x/a)%X)%X,originColumnOffset:Math.floor(D/a/X)});a*=Z}return{originX:r,halfWorldWidth:B,pyramidsInfo:d,hasGCSSShiftTransform:e}};Q.getWorldWidth=y;Q.getWorldWrapCount=N;Q.load=
function(){return z.apply(this,arguments)};Q.minimumGridSpacing=4;Q.projectExtent=l;Q.projectPoint=b;Q.projectResolution=A;Q.requirePE=S;Q.snapExtent=function(e){e=e.clone().normalize();return 1===e.length?e[0]:f(e)};Q.snapPyramid=function(e,r,x){const {storageInfo:B,pixelSize:J}=r;let M=!1;var {pyramidResolutions:R}=B;if(u.isSome(R)&&R.length){e=(e.x+e.y)/2;var P=R[R.length-1];P=(P.x+P.y)/2;var X=(J.x+J.y)/2;if(e<=X)var Z=0;else if(e>=P)Z=R.length,M=8<e/P;else{P=X;for(let a=1;a<=R.length;a++){X=
(R[a-1].x+R[a-1].y)/2;if(e<=X){e===X?Z=a:"down"===x?(Z=a-1,M=8<e/P):Z="up"===x?a:e-P>X-e||2<e/P?a:a-1;break}P=X}}x=0===Z?J:R[Z-1];return{pyramidLevel:Z,pyramidResolution:new ma({x:x.x,y:x.y,spatialReference:r.spatialReference}),excessiveReading:M}}Z=Math.log(e.x/J.x)/Math.LN2;e=Math.log(e.y/J.y)/Math.LN2;R=r.storageInfo.maximumPyramidLevel||0;Z="down"===x?Math.floor(Math.min(Z,e)):"up"===x?Math.ceil(Math.max(Z,e)):Math.round((Z+e)/2);0>Z?Z=0:Z>R&&(M=Z>R+3,Z=R);x=2**Z;r=new ma({x:x*r.nativePixelSize.x,
y:x*r.nativePixelSize.y,spatialReference:r.spatialReference});return{pyramidLevel:Z,pyramidResolution:r,excessiveReading:M}};Object.defineProperty(Q,"__esModule",{value:!0})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ./maybe ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),function(Q,t,ca,W,u,T,ha,na,ja){function ma(n){if(n=F[n])return n;throw Error("unknown type");
}function O(n){return C[n].baseUnit}function S(n,I=null){I=I||ma(n);return C[I].baseUnit===n}function U(n,I,ka){if(I===ka)return n;const Y=ma(I);if(Y!==ma(ka))throw Error("incompatible units");n=S(I,Y)?n:n*C[Y].units[I].inBaseUnits;return S(ka,Y)?n:n/C[Y].units[ka].inBaseUnits}function z(n,I){return 3E3>U(n,I,"meters")?"meters":"kilometers"}function A(n,I){return 1E5>U(n,I,"meters")?"meters":"kilometers"}function w(n,I){return 1E3>U(n,I,"feet")?"feet":"miles"}function b(n,I){return 1E5>U(n,I,"feet")?
"feet":"miles"}function h(n){return y.fromJSON(n.toLowerCase())||null}function q(n,I=ha.earth.metersPerDegree){return g(n,!0)||I}function g(n,I=!1){let ka,Y,E=null;null!=n&&("object"===typeof n?(ka=n.wkid,Y=n.wkt):"number"===typeof n?ka=n:"string"===typeof n&&(Y=n));if(ka){if(na.isWKIDFromMars(ka))return ha.mars.metersPerDegree;if(na.isWKIDFromMoon(ka))return ha.moon.metersPerDegree;E=f.values[f[ka]];!E&&I&&v.has(ka)&&(E=m)}else Y&&(/^PROJCS/i.test(Y)?E=k(c.exec(Y),E):/^GEOCCS/i.test(Y)&&(E=k(l.exec(Y),
E)));return E}function k(n,I){return n&&n[1]?parseFloat(n[1].split(",")[1]):I}function p(n){var I=null;if(null!=n)if("object"===typeof n){var ka=n.wkid;var Y=n.wkt}else"number"===typeof n?ka=n:"string"===typeof n&&(Y=n);if(ka)I=f.units[f[ka]];else if(Y&&(n=/^PROJCS/i.test(Y)?c:/^GEOCCS/i.test(Y)?l:null)&&(Y=n.exec(Y))&&Y[1]&&(Y=Y[1],I=(I=/[\\"\\']{1}([^\\"\\']+)/.exec(Y))&&I[1],!I||-1===f.units.indexOf(I)))for(Y=parseFloat(Y.split(",")[1]),I=null,n=f.values,ka=0;ka<n.length;++ka)if(1E-7>Math.abs(Y-
n[ka])){I=f.units[ka];break}return W.isSome(I)?h(I):null}const m=ha.earth.radius*Math.PI/200,c=/UNIT\[([^\]]+)\]\]$/i,f=ja,l=/UNIT\[([^\]]+)\]/i,v=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),y=ca.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",
yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});t={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/
3937}};ja={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(n=>n*n)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const C=
{length:{baseUnit:"meters",units:t},area:{baseUnit:"square-meters",units:ja},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",
units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},F=function(){const n={};for(const I in C)for(const ka in C[I].units)n[ka]=I;return n}(),N={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",
esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},L={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};t=ca.strict()(N);ja=ca.strict()(L);ca=ca.strict()({...N,...L});Q.areaUnitsJSONMap=t;Q.baseUnitForUnit=function(n){return O(ma(n))};Q.baseUnitForUnitType=O;Q.convertUnit=U;Q.getDefaultUnitSystem=
function(n){if(!n)return null;switch(p(n)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};Q.getMetersPerUnit=g;Q.getMetersPerUnitForSR=q;Q.getMetersPerVerticalUnitForSR=function(n){if(n&&
"object"===typeof n&&!na.isEarth(n))return 1;n=q(n);return 1E5<n?1:n};Q.getUnitString=p;Q.getVerticalUnitStringForSR=function(n){const I=q(n),ka=n instanceof T?u.getReferenceEllipsoid(n).metersPerDegree:1E5;return I>=ka?"meters":p(n)};Q.inchesPerMeter=39.37;Q.isBaseUnit=S;Q.isMeasurementSystem=function(n){return"imperial"===n||"metric"===n};Q.lengthToDegrees=function(n,I,ka){return U(n,I,"meters")/(ka*Math.PI/180)};Q.lengthUnitsJSONMap=ja;Q.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");
Q.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");Q.preferredImperialAreaUnit=function(n,I){return 1E6>U(n,I,"square-feet")?"square-feet":"square-miles"};Q.preferredImperialLengthUnit=w;Q.preferredImperialVerticalLengthUnit=b;Q.preferredLengthUnit=function(n,I,ka){switch(ka){case "metric":return z(n,I);case "imperial":return w(n,I);default:return ka}};Q.preferredMetricAreaUnit=function(n,I){return 3E6>U(n,I,"square-meters")?"square-meters":
"square-kilometers"};Q.preferredMetricLengthUnit=z;Q.preferredMetricVerticalLengthUnit=A;Q.preferredVerticalLengthUnit=function(n,I,ka){switch(ka){case "metric":return A(n,I);case "imperial":return b(n,I);default:return ka}};Q.unitFromRESTJSON=h;Q.unitToRESTJSON=function(n){return y.toJSON(n)||null};Q.unitType=ma;Q.unitsJSONMap=ca;Object.defineProperty(Q,"__esModule",{value:!0})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],
function(Q,t,ca,W){function u(ma){return new t({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${ma.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}const T=u(ca.earth),ha=u(ca.mars),na=u(ca.moon),ja=new t({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${ca.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});
Q.SphericalECEFSpatialReference=T;Q.SphericalPCPFMars=ha;Q.SphericalPCPFMoon=na;Q.WGS84ECEFSpatialReference=ja;Q.createSphericalPCPF=u;Q.getReferenceEllipsoid=function(ma){return ma&&(W.isMars(ma)||ma===ha)?ca.mars:ma&&(W.isMoon(ma)||ma===na)?ca.moon:ca.earth};Q.getReferenceEllipsoidFromWKID=function(ma){return W.isWKIDFromMars(ma)?ca.mars:W.isWKIDFromMoon(ma)?ca.moon:ca.earth};Q.getSphericalPCPF=function(ma){return ma&&(W.isMars(ma)||ma===ha)?ha:ma&&(W.isMoon(ma)||ma===na)?na:T};Q.getSphericalPCPFForEllipsoid=
function(ma){return ma&&ma===ca.mars?ha:ma&&ma===ca.moon?na:T};Object.defineProperty(Q,"__esModule",{value:!0})})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(Q,t,ca,W,u){function T(){return!!t._pe}function ha(){return!!u("esri-wasm")}function na(){return z?z:z=(new Promise((w,b)=>Q(["./pe-wasm"],w,b))).then(w=>w.peWasm).then(({default:w})=>w({locateFile:b=>W.getAssetUrl(`esri/geometry/support/${b}`)})).then(w=>{ja(w)})}
function ja(w){function b(g,k,p){g[k]=p(g[k])}t._pe=w;t.PeDefs.init();t.PeGTlistExtended.init();t.PeNotationMgrs.init();t.PeNotationUtm.init();t.PePCSInfo.init();t.PeGCSExtent=function(g){function k(){return g.apply(this,arguments)||this}ca._inheritsLoose(k,g);k.prototype.destroy=function(){t._pe.destroy(this)};return k}(t._pe.PeGCSExtent);w=[t._pe.PeDatum,t._pe.PeGeogcs,t._pe.PeGeogtran,t._pe.PeObject,t._pe.PeParameter,t._pe.PePrimem,t._pe.PeProjcs,t._pe.PeSpheroid,t._pe.PeUnit];for(var h of w)b(h.prototype,
"getName",g=>function(){return g.call(this,Array(t.PeDefs.PE_NAME_MAX))});for(const g of[t._pe.PeGeogtran,t._pe.PeProjcs])b(g.prototype,"getParameters",k=>function(){const p=Array(t.PeDefs.PE_PARM_MAX);let m=k.call(this);for(let c=0;c<p.length;c++){const f=t._pe.getValue(m,"*");p[c]=f?t._pe.wrapPointer(f,t._pe.PeParameter):null;m+=Int32Array.BYTES_PER_ELEMENT}return p});b(t._pe.PeHorizon.prototype,"getCoord",g=>function(){const k=this.getSize();if(!k)return null;const p=[],m=g.call(this);U(p,k,m);
return p});b(t._pe.PeGTlistExtendedEntry.prototype,"getEntries",g=>{const k=t._pe._pe_getPeGTlistExtendedGTsSize();return function(){let p=null;var m=g.call(this);if(!t._pe.compare(m,t._pe.NULL)){p=[m];const c=this.getSteps();if(1<c){m=t._pe.getPointer(m);for(let f=1;f<c;f++)p.push(t._pe.wrapPointer(m+k*f,t._pe.PeGTlistExtendedGTs))}}return p}});const q=t._pe._pe_getPeHorizonSize();h=g=>function(){let k=this._cache;k||(this._cache=k=new Map);if(k.has(g))return k.get(g);let p=null;var m=g.call(this);
if(!t._pe.compare(m,t._pe.NULL)){p=[m];const c=m.getNump();if(1<c){m=t._pe.getPointer(m);for(let f=1;f<c;f++)p.push(t._pe.wrapPointer(m+q*f,t._pe.PeHorizon))}}k.set(g,p);return p};b(t._pe.PeProjcs.prototype,"horizonGcsGenerate",h);b(t._pe.PeProjcs.prototype,"horizonPcsGenerate",h);t._pe.PeObject.prototype.toString=function(g=t.PeDefs.PE_STR_OPTS_NONE){t._pe.ensureCache.prepare();const k=t._pe.getPointer(this),p=t._pe.ensureInt8(Array(t.PeDefs.PE_BUFFER_MAX));return t._pe.UTF8ToString(t._pe._pe_object_to_string_ext(k,
g,p))}}function ma(w){if(w){var b=t._pe.getClass(w);b&&(b=t._pe.getCache(b))&&(w=t._pe.getPointer(w))&&delete b[w]}}function O(w,b){const h=[];b=Array(b);for(let q=0;q<w;q++)h.push(t._pe.ensureInt8(b));return h}function S(w){let b;Array.isArray(w[0])?(b=[],w.forEach(h=>{b.push(h[0],h[1])})):b=w;return b}function U(w,b,h,q=!1){if(q)for(q=0;q<2*b;q++)w[q]=t._pe.getValue(h+q*Float64Array.BYTES_PER_ELEMENT,"double");else{q=0===w.length;for(let g=0;g<b;g++)q&&(w[g]=Array(2)),w[g][0]=t._pe.getValue(h,"double"),
w[g][1]=t._pe.getValue(h+Float64Array.BYTES_PER_ELEMENT,"double"),h+=2*Float64Array.BYTES_PER_ELEMENT}}let z;t._pe=null;t.PeCSTransformations=void 0;(function(w){function b(g,k,p){t._pe.ensureCache.prepare();var m=S(p);const c=p===m;m=t._pe.ensureFloat64(m);(g=t._pe._pe_geog_to_proj(t._pe.getPointer(g),k,m))&&U(p,k,m,c);return g}function h(g,k,p){return q(g,k,p,0)}function q(g,k,p,m){t._pe.ensureCache.prepare();var c=S(p);const f=p===c;c=t._pe.ensureFloat64(c);(g=t._pe._pe_proj_to_geog_center(t._pe.getPointer(g),
k,c,m))&&U(p,k,c,f);return g}w.geogToProj=b;w.projGeog=function(g,k,p,m){switch(m){case t.PeDefs.PE_TRANSFORM_P_TO_G:return h(g,k,p);case t.PeDefs.PE_TRANSFORM_G_TO_P:return b(g,k,p)}return 0};w.projToGeog=h;w.projToGeogCenter=q})(t.PeCSTransformations||(t.PeCSTransformations={}));t.PeDefs=void 0;(function(w){w.init=function(){w.PE_BUFFER_MAX=t._pe.PeDefs.prototype.PE_BUFFER_MAX;w.PE_NAME_MAX=t._pe.PeDefs.prototype.PE_NAME_MAX;w.PE_MGRS_MAX=t._pe.PeDefs.prototype.PE_MGRS_MAX;w.PE_USNG_MAX=t._pe.PeDefs.prototype.PE_USNG_MAX;
w.PE_DD_MAX=t._pe.PeDefs.prototype.PE_DD_MAX;w.PE_DDM_MAX=t._pe.PeDefs.prototype.PE_DDM_MAX;w.PE_DMS_MAX=t._pe.PeDefs.prototype.PE_DMS_MAX;w.PE_UTM_MAX=t._pe.PeDefs.prototype.PE_UTM_MAX;w.PE_PARM_MAX=t._pe.PeDefs.prototype.PE_PARM_MAX;w.PE_TYPE_NONE=t._pe.PeDefs.prototype.PE_TYPE_NONE;w.PE_TYPE_GEOGCS=t._pe.PeDefs.prototype.PE_TYPE_GEOGCS;w.PE_TYPE_PROJCS=t._pe.PeDefs.prototype.PE_TYPE_PROJCS;w.PE_TYPE_GEOGTRAN=t._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;w.PE_TYPE_COORDSYS=t._pe.PeDefs.prototype.PE_TYPE_COORDSYS;
w.PE_TYPE_UNIT=t._pe.PeDefs.prototype.PE_TYPE_UNIT;w.PE_TYPE_LINUNIT=t._pe.PeDefs.prototype.PE_TYPE_LINUNIT;w.PE_STR_OPTS_NONE=t._pe.PeDefs.prototype.PE_STR_OPTS_NONE;w.PE_STR_AUTH_NONE=t._pe.PeDefs.prototype.PE_STR_AUTH_NONE;w.PE_STR_AUTH_TOP=t._pe.PeDefs.prototype.PE_STR_AUTH_TOP;w.PE_STR_NAME_CANON=t._pe.PeDefs.prototype.PE_STR_NAME_CANON;w.PE_PARM_X0=t._pe.PeDefs.prototype.PE_PARM_X0;w.PE_PARM_ND=t._pe.PeDefs.prototype.PE_PARM_ND;w.PE_TRANSFORM_1_TO_2=t._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;
w.PE_TRANSFORM_2_TO_1=t._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;w.PE_TRANSFORM_P_TO_G=t._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;w.PE_TRANSFORM_G_TO_P=t._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;w.PE_HORIZON_RECT=t._pe.PeDefs.prototype.PE_HORIZON_RECT;w.PE_HORIZON_POLY=t._pe.PeDefs.prototype.PE_HORIZON_POLY;w.PE_HORIZON_LINE=t._pe.PeDefs.prototype.PE_HORIZON_LINE;w.PE_HORIZON_DELTA=t._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(t.PeDefs||(t.PeDefs={}));t.PeFactory=void 0;(function(w){function b(k,p){let m=
null,c=h[k];c||(c={},h[k]=c);c.hasOwnProperty(String(p))?m=c[p]:(k=t._pe.PeFactory.prototype.factoryByType(k,p),t._pe.compare(k,t._pe.NULL)||(m=k,c[p]=m));return m=g(m)}const h={},q={},g=k=>{if(k){const p=k.getType();switch(p){case t.PeDefs.PE_TYPE_GEOGCS:k=t._pe.castObject(k,t._pe.PeGeogcs);break;case t.PeDefs.PE_TYPE_PROJCS:k=t._pe.castObject(k,t._pe.PeProjcs);break;case t.PeDefs.PE_TYPE_GEOGTRAN:k=t._pe.castObject(k,t._pe.PeGeogtran);break;default:p&t.PeDefs.PE_TYPE_UNIT&&(k=t._pe.castObject(k,
t._pe.PeUnit))}}return k};w.initialize=function(){t._pe.PeFactory.prototype.initialize(null)};w.coordsys=function(k){return b(t.PeDefs.PE_TYPE_COORDSYS,k)};w.factoryByType=b;w.fromString=function(k,p){let m=null,c=q[k];c||(c={},q[k]=c);c.hasOwnProperty(p)?m=c[p]:(k=t._pe.PeFactory.prototype.fromString(k,p),t._pe.compare(k,t._pe.NULL)||(m=k,c[p]=m));return m=g(m)};w.geogcs=function(k){return b(t.PeDefs.PE_TYPE_GEOGCS,k)};w.geogtran=function(k){return b(t.PeDefs.PE_TYPE_GEOGTRAN,k)};w.getCode=function(k){return t._pe.PeFactory.prototype.getCode(k)};
w.projcs=function(k){return b(t.PeDefs.PE_TYPE_PROJCS,k)};w.unit=function(k){return b(t.PeDefs.PE_TYPE_UNIT,k)}})(t.PeFactory||(t.PeFactory={}));t.PeGCSExtent=null;t.PeGTlistExtended=void 0;(function(w){let b;w.init=function(){w.PE_GTLIST_OPTS_COMMON=t._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;b=t._pe._pe_getPeGTlistExtendedEntrySize()};w.getGTlist=function(h,q,g,k,p,m){let c=null;const f=new t._pe.PeInteger(m);try{const l=t._pe.PeGTlistExtended.prototype.getGTlist(h,q,g,k,p,f);if(m=f.val)if(c=
[l],1<m){const v=t._pe.getPointer(l);for(h=1;h<m;h++)c.push(t._pe.wrapPointer(v+b*h,t._pe.PeGTlistExtendedEntry))}}finally{t._pe.destroy(f)}return c}})(t.PeGTlistExtended||(t.PeGTlistExtended={}));t.PeGTlistExtendedEntry=void 0;(function(w){w.destroy=function(b){if(b&&b.length){for(const h of b)ma(h),h.getEntries().forEach(q=>{ma(q);q=q.getGeogtran();ma(q);q.getParameters().forEach(ma);[q.getGeogcs1(),q.getGeogcs2()].forEach(g=>{ma(g);const k=g.getDatum();ma(k);ma(k.getSpheroid());ma(g.getPrimem());
ma(g.getUnit())})});t._pe.PeGTlistExtendedEntry.prototype.Delete(b[0])}}})(t.PeGTlistExtendedEntry||(t.PeGTlistExtendedEntry={}));t.PeGTTransformations=void 0;(function(w){w.geogToGeog=function(b,h,q,g,k){t._pe.ensureCache.prepare();var p=S(q);const m=q===p;p=t._pe.ensureFloat64(p);let c=0;g&&(c=t._pe.ensureFloat64(g));(b=t._pe._pe_geog_to_geog(t._pe.getPointer(b),h,p,c,k))&&U(q,h,p,m);return b}})(t.PeGTTransformations||(t.PeGTTransformations={}));t.PeNotationDms=void 0;(function(w){const b=(q,g,
k,p,m,c)=>{t._pe.ensureCache.prepare();switch(q){case "dd":var f=t._pe._pe_geog_to_dd;var l=t.PeDefs.PE_DD_MAX;break;case "ddm":f=t._pe._pe_geog_to_ddm;l=t.PeDefs.PE_DDM_MAX;break;case "dms":f=t._pe._pe_geog_to_dms,l=t.PeDefs.PE_DMS_MAX}q=0;g&&(q=t._pe.getPointer(g));g=S(p);g=t._pe.ensureFloat64(g);l=O(k,l);p=t._pe.ensureInt32(l);if(m=f(q,k,g,m,p))for(f=0;f<k;f++)c[f]=t._pe.UTF8ToString(l[f]);return m},h=(q,g,k,p,m)=>{t._pe.ensureCache.prepare();switch(q){case "dd":var c=t._pe._pe_dd_to_geog;break;
case "ddm":c=t._pe._pe_ddm_to_geog;break;case "dms":c=t._pe._pe_dms_to_geog}q=0;g&&(q=t._pe.getPointer(g));g=p.map(f=>t._pe.ensureString(f));p=t._pe.ensureInt32(g);g=t._pe.ensureFloat64(Array(2*k));(c=c(q,k,p,g))&&U(m,k,g);return c};w.geogToDms=function(q,g,k,p,m){return b("dms",q,g,k,p,m)};w.dmsToGeog=function(q,g,k,p){return h("dms",q,g,k,p)};w.geogToDdm=function(q,g,k,p,m){return b("ddm",q,g,k,p,m)};w.ddmToGeog=function(q,g,k,p){return h("ddm",q,g,k,p)};w.geogToDd=function(q,g,k,p,m){return b("dd",
q,g,k,p,m)};w.ddToGeog=function(q,g,k,p){return h("dd",q,g,k,p)}})(t.PeNotationDms||(t.PeNotationDms={}));t.PeNotationMgrs=void 0;(function(w){w.init=function(){w.PE_MGRS_STYLE_NEW=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;w.PE_MGRS_STYLE_OLD=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;w.PE_MGRS_STYLE_AUTO=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;w.PE_MGRS_180_ZONE_1_PLUS=t._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;w.PE_MGRS_ADD_SPACES=t._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};
w.geogToMgrsExtended=function(b,h,q,g,k,p,m){t._pe.ensureCache.prepare();let c=0;b&&(c=t._pe.getPointer(b));b=S(q);q=t._pe.ensureFloat64(b);b=O(h,t.PeDefs.PE_MGRS_MAX);const f=t._pe.ensureInt32(b);if(g=t._pe._pe_geog_to_mgrs_extended(c,h,q,g,k,p,f))for(k=0;k<h;k++)m[k]=t._pe.UTF8ToString(b[k]);return g};w.mgrsToGeogExtended=function(b,h,q,g,k){t._pe.ensureCache.prepare();let p=0;b&&(p=t._pe.getPointer(b));b=q.map(m=>t._pe.ensureString(m));q=t._pe.ensureInt32(b);b=t._pe.ensureFloat64(Array(2*h));(g=
t._pe._pe_mgrs_to_geog_extended(p,h,q,g,b))&&U(k,h,b);return g}})(t.PeNotationMgrs||(t.PeNotationMgrs={}));t.PeNotationUsng=void 0;(function(w){w.geogToUsng=function(b,h,q,g,k,p,m){t._pe.ensureCache.prepare();let c=0;b&&(c=t._pe.getPointer(b));b=S(q);q=t._pe.ensureFloat64(b);b=O(h,t.PeDefs.PE_MGRS_MAX);const f=t._pe.ensureInt32(b);if(g=t._pe._pe_geog_to_usng(c,h,q,g,k,p,f))for(k=0;k<h;k++)m[k]=t._pe.UTF8ToString(b[k]);return g};w.usngToGeog=function(b,h,q,g){t._pe.ensureCache.prepare();var k=0;b&&
(k=t._pe.getPointer(b));b=q.map(p=>t._pe.ensureString(p));q=t._pe.ensureInt32(b);b=t._pe.ensureFloat64(Array(2*h));(k=t._pe._pe_usng_to_geog(k,h,q,b))&&U(g,h,b);return k}})(t.PeNotationUsng||(t.PeNotationUsng={}));t.PeNotationUtm=void 0;(function(w){w.init=function(){w.PE_UTM_OPTS_NONE=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;w.PE_UTM_OPTS_ADD_SPACES=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;w.PE_UTM_OPTS_NS=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};w.geogToUtm=function(b,h,q,
g,k){t._pe.ensureCache.prepare();var p=0;b&&(p=t._pe.getPointer(b));b=S(q);q=t._pe.ensureFloat64(b);b=O(h,t.PeDefs.PE_UTM_MAX);const m=t._pe.ensureInt32(b);if(g=t._pe._pe_geog_to_utm(p,h,q,g,m))for(p=0;p<h;p++)k[p]=t._pe.UTF8ToString(b[p]);return g};w.utmToGeog=function(b,h,q,g,k){t._pe.ensureCache.prepare();let p=0;b&&(p=t._pe.getPointer(b));b=q.map(m=>t._pe.ensureString(m));q=t._pe.ensureInt32(b);b=t._pe.ensureFloat64(Array(2*h));(g=t._pe._pe_utm_to_geog(p,h,q,g,b))&&U(k,h,b);return g}})(t.PeNotationUtm||
(t.PeNotationUtm={}));t.PePCSInfo=void 0;(function(w){const b=new Map;w.init=function(){w.PE_PCSINFO_OPTION_NONE=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;w.PE_PCSINFO_OPTION_DOMAIN=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;w.PE_POLE_OUTSIDE_BOUNDARY=t._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;w.PE_POLE_POINT=t._pe.PePCSInfo.prototype.PE_POLE_POINT};w.generate=function(h,q=w.PE_PCSINFO_OPTION_DOMAIN){let g,k;b.has(h)&&(k=b.get(h),k[q]&&(g=k[q]));g||(g=t._pe.PePCSInfo.prototype.generate(h,
q),k||(k=[],b.set(h,k)),k[q]=g);return g}})(t.PePCSInfo||(t.PePCSInfo={}));t.PeVersion=void 0;(function(w){w.versionString=function(){return t._pe.PeVersion.prototype.version_string()}})(t.PeVersion||(t.PeVersion={}));const A=Object.freeze({__proto__:null,get _pe(){return t._pe},isLoaded:T,isSupported:ha,load:na,get PeCSTransformations(){return t.PeCSTransformations},get PeDefs(){return t.PeDefs},get PeFactory(){return t.PeFactory},get PeGCSExtent(){return t.PeGCSExtent},get PeGTlistExtended(){return t.PeGTlistExtended},
get PeGTlistExtendedEntry(){return t.PeGTlistExtendedEntry},get PeGTTransformations(){return t.PeGTTransformations},get PeNotationDms(){return t.PeNotationDms},get PeNotationMgrs(){return t.PeNotationMgrs},get PeNotationUsng(){return t.PeNotationUsng},get PeNotationUtm(){return t.PeNotationUtm},get PePCSInfo(){return t.PePCSInfo},get PeVersion(){return t.PeVersion},_init:ja});t._init=ja;t.isLoaded=T;t.isSupported=ha;t.load=na;t.pe=A})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(Q,t,ca,W,u,T,ha,na,ja,ma,O,S,U,z,A,w,b,h,q,g,k,p,m,c,f){function l(){return!!Ja&&z.isLoaded()}function v(H){T.isNone(Na)&&(Na=Promise.all([z.load(),(new Promise((V,K)=>Q(["../chunks/geometryEngineBase"],V,K))).then(V=>V.geometryEngineBase),new Promise((V,K)=>Q(["./geometryAdapters/hydrated"],V,K))]));return Na.then(([,V,{hydratedAdapter:K}])=>{ha.throwIfAborted(H);Ma=K;Ja=V.default;Ja._enableProjection(z.pe)})}function y(H,V,K=null){return Array.isArray(H)?0===H.length?[]:C(Ma,H,H[0].spatialReference,
V,K):C(Ma,[H],H.spatialReference,V,K)[0]}function C(H,V,K,la,sa=null){if(T.isNone(K)||T.isNone(la))return V;if(N(K,la,sa))return V.map(ua=>T.unwrap(n(ua,K,la)));if(T.isNone(sa)){const ua=p.cacheKey(K,la);void 0!==Ga[ua]?sa=Ga[ua]:(sa=F(K,la,null),T.isNone(sa)&&(sa=new p),Ga[ua]=sa)}if(T.isNone(Ja))throw new Ya;return Ja._project(H,V,K,la,sa)}function F(H,V,K=null){if(T.isNone(Ja))throw new Ya;if(T.isNone(H)||T.isNone(V))return null;H=Ja._getTransformation(Ma,H,V,K,null==K?void 0:K.spatialReference);
return null!==H?p.fromGE(H):null}function N(H,V,K){return K?!1:m.equals(H,V)?!0:m.isValid(H)&&m.isValid(V)&&!!Oa(H,V,cb)}function L(){L=ca._asyncToGenerator(function*(H,V,K,la){if(!l())if(Array.isArray(H))for(const {source:sa,dest:ua,geographicTransformation:ya}of H){if(!N(sa,ua,ya))return v(la)}else if(!N(H,V,K))return v(la)});return L.apply(this,arguments)}function n(H,V,K){return H?"x"in H?I(H,V,new A,K,0):"xmin"in H?e(H,V,new S,K,0):"rings"in H?E(H,V,new w,K,0):"paths"in H?Y(H,V,new b,K,0):"points"in
H?ka(H,V,new U,K,0):null:null}function I(H,V,K,la,sa){Ea[0]=H.x;Ea[1]=H.y;const ua=H.z;Ea[2]=void 0!==ua?ua:sa;if(!J(Ea,V,0,Ea,la,0,1))return null;K.x=Ea[0];K.y=Ea[1];K.spatialReference=la;void 0===ua?(K.z=void 0,K.hasZ=!1):(K.z=Ea[2],K.hasZ=!0);void 0===H.m?(K.m=void 0,K.hasM=!1):(K.m=H.m,K.hasM=!0);return K}function ka(H,V,K,la,sa){const {points:ua,hasZ:ya,hasM:Da}=H;H=[];const La=ua.length,Ka=[];for(var Ia of ua)Ka.push(Ia[0],Ia[1],ya?Ia[2]:sa);if(!J(Ka,V,0,Ka,la,0,La))return null;for(V=0;V<La;++V){sa=
3*V;Ia=Ka[sa];const Qa=Ka[sa+1];ya&&Da?H.push([Ia,Qa,Ka[sa+2],ua[V][3]]):ya?H.push([Ia,Qa,Ka[sa+2]]):Da?H.push([Ia,Qa,ua[V][2]]):H.push([Ia,Qa])}K.points=H;K.spatialReference=la;K.hasZ=ya;K.hasM=Da;return K}function Y(H,V,K,la,sa){const {paths:ua,hasZ:ya,hasM:Da}=H;H=[];if(!M(ua,ya,Da,V,H,la,sa))return null;K.paths=H;K.spatialReference=la;K.hasZ=ya;K.hasM=Da;return K}function E(H,V,K,la,sa){const {rings:ua,hasZ:ya,hasM:Da}=H;H=[];if(!M(ua,ya,Da,V,H,la,sa))return null;K.rings=H;K.spatialReference=
la;K.hasZ=ya;K.hasM=Da;return K}function e(H,V,K,la,sa){const {xmin:ua,ymin:ya,xmax:Da,ymax:La,hasZ:Ka,hasM:Ia}=H;if(!r(ua,ya,Ka?H.zmin:sa,V,Ea,la))return null;K.xmin=Ea[0];K.ymin=Ea[1];Ka&&(K.zmin=Ea[2]);if(!r(Da,La,Ka?H.zmax:sa,V,Ea,la))return null;K.xmax=Ea[0];K.ymax=Ea[1];Ka&&(K.zmax=Ea[2]);Ia&&(K.mmin=H.mmin,K.mmax=H.mmax);K.spatialReference=la;return K}function r(H,V,K,la,sa,ua){Ha[0]=H;Ha[1]=V;Ha[2]=K;return J(Ha,la,0,sa,ua,0,1)}function x(H,V,K,la){if(T.isNone(V)||T.isNone(la)||2>H.length)return!1;
2===H.length&&(Ha[0]=H[0],Ha[1]=H[1],Ha[2]=0,H=Ha);return J(H,V,0,K,la,0,1)}function B(H,V,K){if(T.isNone(V))return!1;V=Z(V,ab);V=Va[V][ea.WGS84_COMPARABLE_LON_LAT];if(T.isNone(V))return!1;V(H,0,Ha,0);K!==Ha&&(K[0]=Ha[0],K[1]=Ha[1],2<K.length&&(K[2]=Ha[2]));return!0}function J(H,V,K,la,sa,ua,ya=1){V=Oa(V,sa,cb);if(T.isNone(V))return!1;if(V===a){if(H===la&&K===ua)return!0;ya=K+3*ya;for(let Da=K,La=ua;Da<ya;Da++,La++)la[La]=H[Da];return!0}ya=K+3*ya;for(let Da=K,La=ua;Da<ya;Da+=3,La+=3)V(H,Da,la,La);
return!0}function M(H,V,K,la,sa,ua,ya=0){const Da=[];for(const La of H)for(const Ka of La)Da.push(Ka[0],Ka[1],V?Ka[2]:ya);if(!J(Da,la,0,Da,ua,0,Da.length/3))return!1;la=0;sa.length=0;for(const La of H){H=[];for(const Ka of La)V&&K?H.push([Da[la++],Da[la++],Da[la++],Ka[3]]):V?H.push([Da[la++],Da[la++],Da[la++]]):(K?H.push([Da[la++],Da[la++],Ka[2]]):H.push([Da[la++],Da[la++]]),la++);sa.push(H)}return!0}function R(H,V,K,la){V=la+V;if(V<la/2||K>V)return Number.MAX_VALUE;H=Math.abs(Ta*H)+Math.asin(K/V);
return H>=Math.PI/2?Number.MAX_VALUE:K/Math.cos(H)}function P(H,V,K){const la=Math.sin(H);H=Math.cos(H);const sa=Math.sin(V);V=Math.cos(V);K[0]=-la;K[4]=-sa*H;K[8]=V*H;K[12]=0;K[1]=H;K[5]=-sa*la;K[9]=V*la;K[13]=0;K[2]=0;K[6]=V;K[10]=sa;K[14]=0;K[3]=0;K[7]=0;K[11]=0;K[15]=1;return K}function X(H,V,K){P(H,V,K);ja.transpose(K,K);return K}function Z(H,V){if(V.spatialReference===H)return V.spatialReferenceId;V.spatialReference=H;"metersPerUnit"in V&&(V.metersPerUnit=na.getMetersPerUnitForSR(H,1));return H.wkt===
h.SphericalECEFSpatialReference.wkt?V.spatialReferenceId=ea.SPHERICAL_ECEF:m.isWGS84(H)?V.spatialReferenceId=ea.WGS84:m.isWebMercator(H)?V.spatialReferenceId=ea.WEB_MERCATOR:m.isPlateCarree(H)?V.spatialReferenceId=ea.PLATE_CARREE:H.wkt===h.WGS84ECEFSpatialReference.wkt?V.spatialReferenceId=ea.WGS84_ECEF:H.wkid===c.SupportedGCSWkids.CGCS2000?V.spatialReferenceId=ea.CGCS2000:H.wkt===h.SphericalPCPFMars.wkt?V.spatialReferenceId=ea.SPHERICAL_MARS_PCPF:H.wkt===h.SphericalPCPFMoon.wkt?V.spatialReferenceId=
ea.SPHERICAL_MOON_PCPF:m.isMars(H)?V.spatialReferenceId=ea.GCSMARS2000:m.isMoon(H)?V.spatialReferenceId=ea.GCSMOON2000:V.spatialReferenceId=ea.UNKNOWN}function a(H,V,K,la){H!==K&&(K[la++]=H[V++],K[la++]=H[V++],K[la]=H[V])}function d(H,V,K,la){K[la++]=Za*(H[V++]/g.earth.radius);K[la++]=Za*(Math.PI/2-2*Math.atan(Math.exp(-H[V++]/g.earth.radius)));K[la]=H[V]}function D(H,V,K,la){d(H,V,K,la);ta(K,la,K,la)}function G(H,V,K,la){d(H,V,K,la);Ba(K,la,K,la)}function aa(H,V,K,la,sa){var ua=.4999999*Math.PI;
ua=u.clamp(Ta*H[V+1],-ua,ua);ua=Math.sin(ua);K[la++]=Ta*H[V]*sa.radius;K[la++]=sa.halfSemiMajorAxis*Math.log((1+ua)/(1-ua));K[la]=H[V+2]}function da(H,V,K,la){aa(H,V,K,la,g.earth)}function ba(H,V,K,la){K[la]=H[V]*db;K[la+1]=H[V+1]*db;K[la+2]=H[V+2]}function ia(H,V,K,la){K[la]=H[V]*$a;K[la+1]=H[V+1]*$a;K[la+2]=H[V+2]}function fa(H,V,K,la){d(H,V,K,la);ba(K,la,K,la)}function oa(H,V,K,la,sa){sa+=H[V+2];const ua=Ta*H[V+1];H=Ta*H[V];V=Math.cos(ua);K[la++]=Math.cos(H)*V*sa;K[la++]=Math.sin(H)*V*sa;K[la]=
Math.sin(ua)*sa}function pa(H,V,K,la){oa(H,V,K,la,g.moon.radius)}function qa(H,V,K,la){oa(H,V,K,la,g.mars.radius)}function ta(H,V,K,la){oa(H,V,K,la,g.earth.radius)}function ra(H,V,K,la,sa){var ua=H[V];const ya=H[V+1];V=H[V+2];H=Math.sqrt(ua*ua+ya*ya+V*V);V=u.asinClamped(V/(0===H?1:H));ua=Math.atan2(ya,ua);K[la++]=Za*ua;K[la++]=Za*V;K[la]=H-sa}function va(H,V,K,la){ra(H,V,K,la,g.moon.radius)}function wa(H,V,K,la){ra(H,V,K,la,g.mars.radius)}function xa(H,V,K,la){ra(H,V,K,la,g.earth.radius)}function Aa(H,
V,K,la){xa(H,V,K,la);da(K,la,K,la)}function Ca(H,V,K,la){xa(H,V,K,la);Ba(K,la,K,la)}function Ba(H,V,K,la){{var sa=g.earth;const ya=Ta*H[V];var ua=Ta*H[V+1];H=H[V+2];V=Math.sin(ua);ua=Math.cos(ua);const Da=sa.radius/Math.sqrt(1-sa.eccentricitySquared*V*V);K[la++]=(Da+H)*ua*Math.cos(ya);K[la++]=(Da+H)*ua*Math.sin(ya);K[la++]=(Da*(1-sa.eccentricitySquared)+H)*V}}function za(H,V,K,la){var sa=k.earthEllipsoidConstants,ua=H[V],ya=H[V+1];H=H[V+2];let Da;V=Math.abs(H);var La=ua*ua+ya*ya;var Ka=Math.sqrt(La);
var Ia=La+H*H;var Qa=Math.sqrt(Ia);ua=Math.atan2(ya,ua);var Wa=H*H/Ia;Ia=La/Ia;ya=sa.a2/Qa;La=sa.a3-sa.a4/Qa;.3<Ia?(Wa=V/Qa*(1+Ia*(sa.a1+ya+Wa*La)/Qa),Qa=Math.asin(Wa),ya=Wa*Wa,Ia=Math.sqrt(1-ya)):(Ia=Ka/Qa*(1-Wa*(sa.a5-ya-Ia*La)/Qa),Qa=Math.acos(Ia),ya=1-Ia*Ia,Wa=Math.sqrt(ya));Da=1-g.earth.eccentricitySquared*ya;ya=g.earth.radius/Math.sqrt(Da);sa=sa.a6*ya;ya=Ka-ya*Ia;La=V-sa*Wa;V=Ia*ya+Wa*La;Ka=Ia*La-Wa*ya;sa=Ka/(sa/Da+V);Qa+=sa;0>H&&(Qa=-Qa);K[la++]=Za*ua;K[la++]=Za*Qa;K[la]=V+Ka*sa/2}function Fa(H,
V,K,la){za(H,V,K,la);ta(K,la,K,la)}function Ra(H,V,K,la){za(H,V,K,la);da(K,la,K,la)}function Oa(H,V,K=Pa()){return T.isNone(H)||T.isNone(V)?null:Sa(H,V,K).projector}function Sa(H,V,K){if(T.isNone(H)||T.isNone(V)||K.source.spatialReference===H&&K.dest.spatialReference===V)return K;const la=Z(H,K.source),sa=Z(V,K.dest);la===ea.UNKNOWN&&sa===ea.UNKNOWN?m.equals(H,V)?K.projector=a:K.projector=null:K.projector=Va[la][sa];return K}function Pa(){return{source:{spatialReference:null,spatialReferenceId:ea.UNKNOWN,
metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:ea.UNKNOWN,metersPerUnit:1},projector:a}}let Ja=null,Ma=null,Na=null,Ga={},Ya=function(H){function V(){return H.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}ca._inheritsLoose(V,H);return V}(W);var ea;(function(H){H[H.UNKNOWN=0]="UNKNOWN";H[H.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";H[H.WGS84=2]="WGS84";H[H.WEB_MERCATOR=3]="WEB_MERCATOR";H[H.WGS84_ECEF=4]="WGS84_ECEF";H[H.CGCS2000=5]=
"CGCS2000";H[H.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";H[H.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";H[H.GCSMARS2000=8]="GCSMARS2000";H[H.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";H[H.GCSMOON2000=10]="GCSMOON2000";H[H.LON_LAT=11]="LON_LAT";H[H.PLATE_CARREE=12]="PLATE_CARREE"})(ea||(ea={}));const db=g.earth.radius*Math.PI/180,$a=180/(g.earth.radius*Math.PI),Va={[ea.WGS84]:{[ea.CGCS2000]:null,[ea.GCSMARS2000]:null,[ea.GCSMOON2000]:null,[ea.LON_LAT]:a,[ea.WGS84_COMPARABLE_LON_LAT]:a,
[ea.SPHERICAL_ECEF]:ta,[ea.SPHERICAL_MARS_PCPF]:null,[ea.SPHERICAL_MOON_PCPF]:null,[ea.UNKNOWN]:null,[ea.WEB_MERCATOR]:da,[ea.PLATE_CARREE]:ba,[ea.WGS84]:a,[ea.WGS84_ECEF]:Ba},[ea.CGCS2000]:{[ea.CGCS2000]:a,[ea.GCSMARS2000]:null,[ea.GCSMOON2000]:null,[ea.LON_LAT]:a,[ea.WGS84_COMPARABLE_LON_LAT]:a,[ea.SPHERICAL_ECEF]:ta,[ea.SPHERICAL_MARS_PCPF]:null,[ea.SPHERICAL_MOON_PCPF]:null,[ea.UNKNOWN]:null,[ea.WEB_MERCATOR]:null,[ea.PLATE_CARREE]:ba,[ea.WGS84]:null,[ea.WGS84_ECEF]:Ba},[ea.GCSMARS2000]:{[ea.CGCS2000]:null,
[ea.GCSMARS2000]:a,[ea.GCSMOON2000]:null,[ea.LON_LAT]:a,[ea.WGS84_COMPARABLE_LON_LAT]:null,[ea.SPHERICAL_ECEF]:null,[ea.SPHERICAL_MARS_PCPF]:qa,[ea.SPHERICAL_MOON_PCPF]:null,[ea.UNKNOWN]:null,[ea.WEB_MERCATOR]:null,[ea.PLATE_CARREE]:null,[ea.WGS84]:null,[ea.WGS84_ECEF]:null},[ea.GCSMOON2000]:{[ea.CGCS2000]:null,[ea.GCSMARS2000]:null,[ea.GCSMOON2000]:a,[ea.LON_LAT]:a,[ea.WGS84_COMPARABLE_LON_LAT]:null,[ea.SPHERICAL_ECEF]:null,[ea.SPHERICAL_MARS_PCPF]:null,[ea.SPHERICAL_MOON_PCPF]:pa,[ea.UNKNOWN]:null,
[ea.WEB_MERCATOR]:null,[ea.PLATE_CARREE]:null,[ea.WGS84]:null,[ea.WGS84_ECEF]:null},[ea.WEB_MERCATOR]:{[ea.CGCS2000]:null,[ea.GCSMARS2000]:null,[ea.GCSMOON2000]:null,[ea.LON_LAT]:d,[ea.WGS84_COMPARABLE_LON_LAT]:d,[ea.SPHERICAL_ECEF]:D,[ea.SPHERICAL_MARS_PCPF]:null,[ea.SPHERICAL_MOON_PCPF]:null,[ea.UNKNOWN]:null,[ea.WEB_MERCATOR]:a,[ea.PLATE_CARREE]:fa,[ea.WGS84]:d,[ea.WGS84_ECEF]:G},[ea.WGS84_ECEF]:{[ea.CGCS2000]:za,[ea.GCSMARS2000]:null,[ea.GCSMOON2000]:null,[ea.LON_LAT]:za,[ea.WGS84_COMPARABLE_LON_LAT]:za,
[ea.SPHERICAL_ECEF]:Fa,[ea.SPHERICAL_MARS_PCPF]:null,[ea.SPHERICAL_MOON_PCPF]:null,[ea.UNKNOWN]:null,[ea.WEB_MERCATOR]:Ra,[ea.PLATE_CARREE]:function(H,V,K,la){za(H,V,K,la);ba(K,la,K,la)},[ea.WGS84]:za,[ea.WGS84_ECEF]:a},[ea.SPHERICAL_ECEF]:{[ea.CGCS2000]:xa,[ea.GCSMARS2000]:null,[ea.GCSMOON2000]:null,[ea.LON_LAT]:xa,[ea.WGS84_COMPARABLE_LON_LAT]:xa,[ea.SPHERICAL_ECEF]:a,[ea.SPHERICAL_MARS_PCPF]:null,[ea.SPHERICAL_MOON_PCPF]:null,[ea.UNKNOWN]:null,[ea.WEB_MERCATOR]:Aa,[ea.PLATE_CARREE]:function(H,
V,K,la){xa(H,V,K,la);ba(K,la,K,la)},[ea.WGS84]:xa,[ea.WGS84_ECEF]:Ca},[ea.SPHERICAL_MARS_PCPF]:{[ea.CGCS2000]:null,[ea.GCSMARS2000]:wa,[ea.GCSMOON2000]:null,[ea.LON_LAT]:wa,[ea.WGS84_COMPARABLE_LON_LAT]:null,[ea.SPHERICAL_ECEF]:null,[ea.SPHERICAL_MARS_PCPF]:a,[ea.SPHERICAL_MOON_PCPF]:null,[ea.UNKNOWN]:null,[ea.WEB_MERCATOR]:null,[ea.PLATE_CARREE]:null,[ea.WGS84]:null,[ea.WGS84_ECEF]:null},[ea.SPHERICAL_MOON_PCPF]:{[ea.CGCS2000]:null,[ea.GCSMARS2000]:null,[ea.GCSMOON2000]:va,[ea.LON_LAT]:va,[ea.WGS84_COMPARABLE_LON_LAT]:null,
[ea.SPHERICAL_ECEF]:null,[ea.SPHERICAL_MARS_PCPF]:null,[ea.SPHERICAL_MOON_PCPF]:a,[ea.UNKNOWN]:null,[ea.WEB_MERCATOR]:null,[ea.PLATE_CARREE]:null,[ea.WGS84]:null,[ea.WGS84_ECEF]:null},[ea.UNKNOWN]:{[ea.CGCS2000]:null,[ea.GCSMARS2000]:null,[ea.GCSMOON2000]:null,[ea.LON_LAT]:null,[ea.WGS84_COMPARABLE_LON_LAT]:null,[ea.SPHERICAL_ECEF]:null,[ea.SPHERICAL_MARS_PCPF]:null,[ea.SPHERICAL_MOON_PCPF]:null,[ea.UNKNOWN]:a,[ea.WEB_MERCATOR]:null,[ea.PLATE_CARREE]:null,[ea.WGS84]:null,[ea.WGS84_ECEF]:null},[ea.LON_LAT]:{[ea.CGCS2000]:a,
[ea.GCSMARS2000]:a,[ea.GCSMOON2000]:a,[ea.LON_LAT]:a,[ea.WGS84_COMPARABLE_LON_LAT]:a,[ea.SPHERICAL_ECEF]:ta,[ea.SPHERICAL_MARS_PCPF]:qa,[ea.SPHERICAL_MOON_PCPF]:pa,[ea.UNKNOWN]:null,[ea.WEB_MERCATOR]:da,[ea.PLATE_CARREE]:ba,[ea.WGS84]:a,[ea.WGS84_ECEF]:Ba},[ea.WGS84_COMPARABLE_LON_LAT]:{[ea.CGCS2000]:null,[ea.GCSMARS2000]:null,[ea.GCSMOON2000]:null,[ea.LON_LAT]:a,[ea.WGS84_COMPARABLE_LON_LAT]:a,[ea.SPHERICAL_ECEF]:ta,[ea.SPHERICAL_MARS_PCPF]:null,[ea.SPHERICAL_MOON_PCPF]:null,[ea.UNKNOWN]:null,[ea.WEB_MERCATOR]:null,
[ea.PLATE_CARREE]:ba,[ea.WGS84]:a,[ea.WGS84_ECEF]:Ba},[ea.PLATE_CARREE]:{[ea.CGCS2000]:ia,[ea.GCSMARS2000]:null,[ea.GCSMOON2000]:null,[ea.LON_LAT]:ia,[ea.WGS84_COMPARABLE_LON_LAT]:ia,[ea.SPHERICAL_ECEF]:function(H,V,K,la){ia(H,V,K,la);ta(K,la,K,la)},[ea.SPHERICAL_MARS_PCPF]:null,[ea.SPHERICAL_MOON_PCPF]:null,[ea.UNKNOWN]:null,[ea.WEB_MERCATOR]:function(H,V,K,la){ia(H,V,K,la);da(K,la,K,la)},[ea.PLATE_CARREE]:a,[ea.WGS84]:ia,[ea.WGS84_ECEF]:function(H,V,K,la){ia(H,V,K,la);Ba(K,la,K,la)}}},ab={spatialReference:null,
spatialReferenceId:ea.UNKNOWN},eb={spatialReference:null,spatialReferenceId:ea.UNKNOWN},cb=Pa(),fb=Pa(),Ta=u.deg2rad(1),Za=u.rad2deg(1),Ha=O.create(),Ua=O.create(),Xa=O.create(),Ea=O.create(),bb=O.create();t.canProjectToWGS84ComparableLonLat=function(H){if(T.isNone(H))return!1;H=Z(H,ab);return!!Va[H][ea.WGS84_COMPARABLE_LON_LAT]};t.canProjectWithoutEngine=N;t.computeENUToSphericalPCPFLocalRotation=P;t.computeSphericalPCPFToENULocalRotation=X;t.computeTranslationToOriginAndRotation=function(H,V,K,
la){if(T.isNone(H)||T.isNone(la))return!1;var sa=Z(H,ab),ua=Z(la,eb);if(sa===ua&&ua!==ea.SPHERICAL_ECEF&&ua!==ea.SPHERICAL_MARS_PCPF&&ua!==ea.SPHERICAL_MOON_PCPF&&(sa!==ea.UNKNOWN||m.equals(H,la)))return ja.fromTranslation(K,V),!0;if(ua===ea.SPHERICAL_ECEF||ua===ea.SPHERICAL_MARS_PCPF||ua===ea.SPHERICAL_MOON_PCPF){sa=Va[sa][ea.LON_LAT];ua=Va[ea.LON_LAT][ua];if(T.isNone(sa)||T.isNone(ua))return!1;sa(V,0,Ua,0);ua(Ua,0,Xa,0);P(Ta*Ua[0],Ta*Ua[1],K);K[12]=Xa[0];K[13]=Xa[1];K[14]=Xa[2];return!0}if((ua===
ea.WEB_MERCATOR||ua===ea.PLATE_CARREE)&&(sa===ea.WGS84||sa===ea.CGCS2000&&ua===ea.PLATE_CARREE||sa===ea.SPHERICAL_ECEF||sa===ea.WEB_MERCATOR)){H=Va[sa][ea.LON_LAT];ua=Va[ea.LON_LAT][ua];if(T.isNone(H)||T.isNone(ua))return!1;H(V,0,Ua,0);ua(Ua,0,Xa,0);sa===ea.SPHERICAL_ECEF?X(Ta*Ua[0],Ta*Ua[1],K):ja.identity(K);K[12]=Xa[0];K[13]=Xa[1];K[14]=Xa[2];return!0}return!1};t.getProjectorName=function(H,V){switch(Oa(H,V,cb)){case a:return"copy3";case ta:return"wgs84ToSphericalECEF";case da:return"wgs84ToWebMercator";
case ba:return"wgs84ToPlateCarree";case Ba:return"wgs84ToWGS84ECEF";case d:return"webMercatorToWGS84";case D:return"webMercatorToSphericalECEF";case G:return"webMercatorToWGS84ECEF";case fa:return"webMercatorToPlateCarree";case za:return"wgs84ECEFToWGS84";case Fa:return"wgs84ECEFToSphericalECEF";case Ra:return"wgs84ECEFToWebMercator";case xa:return"sphericalECEFToWGS84";case Aa:return"sphericalECEFToWebMercator";case wa:return"sphericalMarsPCPFToMars2000";case va:return"sphericalMoonPCPFToMoon2000";
case Ca:return"sphericalECEFToWGS84ECEF";case qa:return"mars2000ToSphericalPCPF";case pa:return"moon2000ToSphericalPCPF";default:return null}};t.getTransformation=F;t.getTransformations=function(H,V,K=null){if(T.isNone(Ja))throw new Ya;H=Ja._getTransformationBySuitability(Ma,H,V,K,null==K?void 0:K.spatialReference);if(null!==H){V=[];for(const la of H)V.push(p.fromGE(la));return V}return[]};t.initializeProjection=function(H,V,K,la){return L.apply(this,arguments)};t.isLoaded=l;t.load=v;t.localLinearScaleFactors=
function(H,V,K,la){if(T.isNone(V)||T.isNone(la))return!1;const sa=Z(V,ab);var ua=Z(la,eb);if(sa===ua&&sa!==ea.UNKNOWN||m.equals(V,la))return K[0]=1,K[1]=1,K[2]=1,!0;if(sa===ea.SPHERICAL_ECEF){V=ma.length(H);H=V/Math.sqrt(H[0]*H[0]+H[1]*H[1]);V/=g.earth.radius;if(ua===ea.WEB_MERCATOR)return K[0]=H*V,K[1]=H*V,K[2]=1,!0;if(ua===ea.WGS84||ua===ea.CGCS2000)return ua=$a,K[0]=ua*H*V,K[1]=ua*V,K[2]=1,!0}else if(sa===ea.PLATE_CARREE){if(ua===ea.WGS84||ua===ea.CGCS2000)return K[0]=$a,K[1]=$a,K[2]=1,!0;if(ua===
ea.WEB_MERCATOR)return ua=H[1]/g.earth.radius,K[0]=1,K[1]=1/Math.cos(ua),K[2]=1,!0}return!1};t.lonLatToSphericalPCPF=function(H,V,K,la,sa=0){la+=sa;sa=Math.cos(K);H[0]=Math.cos(V)*sa*la;H[1]=Math.sin(V)*sa*la;H[2]=Math.sin(K)*la};t.lonLatToWebMercatorComparable=aa;t.project=y;t.projectBoundingRect=function(H,V,K,la){if(null==H)return!1;if(m.equals(V,la))return q.copy(K,H),!0;Ha[0]=H[0];Ha[1]=H[1];Ha[2]=0;if(!J(Ha,V,0,Ha,la,0,1))return!1;K[0]=Ha[0];K[1]=Ha[1];Ha[0]=H[2];Ha[1]=H[3];Ha[2]=0;if(!J(Ha,
V,0,Ha,la,0,1))return!1;K[2]=Ha[0];K[3]=Ha[1];return!0};t.projectBoundingSphere=function(H,V,K,la){if(T.isNone(V)||T.isNone(la))return!1;V=Sa(V,la,fb);if(V.projector===a)return K[0]=H[0],K[1]=H[1],K[2]=H[2],K[3]=H[3],!0;if(T.isNone(V.projector))return!1;const {source:sa,dest:ua}=V;if(ua.spatialReferenceId===ea.WEB_MERCATOR){V=Va[sa.spatialReferenceId][ea.WGS84];if(T.isNone(V))return!1;V(H,0,Ua,0);da(Ua,0,K,0);K[3]=R(Ua[1],H[2],H[3],g.earth.radius);return!0}if(sa.spatialReferenceId!==ea.WGS84&&sa.spatialReferenceId!==
ea.CGCS2000||ua.spatialReferenceId!==ea.PLATE_CARREE)V.projector(H,0,K,0),K[3]=H[3]*sa.metersPerUnit/ua.metersPerUnit;else{la=Va[ea.SPHERICAL_ECEF][ea.PLATE_CARREE];let ya=H[3];T.isSome(Va[sa.spatialReferenceId][ea.SPHERICAL_ECEF])&&T.isSome(la)&&(ya=R(H[1],H[2],H[3],g.earth.radius));V.projector(H,0,K,0);K[3]=ya}return!0};t.projectBuffer=J;t.projectDirection=function(H,V,K,la,sa){ma.copy(Ea,H);ma.add(bb,H,V);x(Ea,K,Ea,sa);x(bb,K,bb,sa);ma.subtract(la,bb,Ea);ma.normalize(la,la)};t.projectExtent=function(H,
V,K=V.spatialReference,la=0){return T.isSome(K)&&T.isSome(e(H,H.spatialReference,V,K,la))};t.projectMany=C;t.projectMultipoint=function(H,V,K=V.spatialReference,la=0){return T.isNone(K)?!1:T.isSome(ka(H,H.spatialReference,V,K,la))};t.projectPoint=function(H,V,K=V.spatialReference,la=0){return T.isNone(K)?!1:T.isSome(I(H,H.spatialReference,V,K,la))};t.projectPointToVector=function(H,V,K,la=0){Ea[0]=H.x;Ea[1]=H.y;const sa=H.z;Ea[2]=void 0!==sa?sa:la;return J(Ea,H.spatialReference,0,V,K,0,1)};t.projectPointToWGS84ComparableLonLat=
function(H,V){Ea[0]=H.x;Ea[1]=H.y;const K=H.z;Ea[2]=void 0!==K?K:0;return B(Ea,H.spatialReference,V)};t.projectPolygon=function(H,V,K=V.spatialReference,la=0){return T.isSome(K)&&T.isSome(E(H,H.spatialReference,V,K,la))};t.projectPolyline=function(H,V,K=V.spatialReference,la=0){return T.isSome(K)&&T.isSome(Y(H,H.spatialReference,V,K,la))};t.projectVectorToDehydratedPoint=function(H,V,K){return J(H,V,0,Ea,K.spatialReference,0,1)?(K.x=Ea[0],K.y=Ea[1],K.z=Ea[2],K):null};t.projectVectorToPoint=function(H,
V,K){if(T.isNone(V)||T.isNone(K))return null;const la=new A({spatialReference:K});return J(H,V,0,Ea,K,0,1)?(la.x=Ea[0],la.y=Ea[1],la.z=Ea[2],la):null};t.projectVectorToVector=x;t.projectVectorToWGS84ComparableLonLat=function(H,V,K){return B(H,V,K)};t.projectWithoutEngine=n;t.projectXYZToVector=r;t.sphericalPCPFtoLonLatElevation=ra;t.tryProjectWithZConversion=function(H,V){try{const K=y(H,V);if(null==K)return null;"xmin"in H&&"xmin"in K&&(K.zmin=H.zmin,K.zmax=H.zmax);const la=f.getGeometryZScaler(K.type,
H.spatialReference,V);T.isSome(la)&&la(K);return K}catch(K){if(!(K instanceof Ya))throw K;return null}};t.unload=function(){Na=Ma=Ja=null;Ga={}};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(Q,t,ca){function W(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];a[4]=d[4];a[5]=d[5];a[6]=d[6];a[7]=d[7];a[8]=d[8];a[9]=d[9];a[10]=d[10];a[11]=d[11];a[12]=d[12];a[13]=d[13];a[14]=d[14];a[15]=d[15];return a}function u(a,d,D,G,
aa,da,ba,ia,fa,oa,pa,qa,ta,ra,va,wa,xa){a[0]=d;a[1]=D;a[2]=G;a[3]=aa;a[4]=da;a[5]=ba;a[6]=ia;a[7]=fa;a[8]=oa;a[9]=pa;a[10]=qa;a[11]=ta;a[12]=ra;a[13]=va;a[14]=wa;a[15]=xa;return a}function T(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function ha(a,d){if(a===d){const D=d[1],G=d[2],aa=d[3],da=d[6],ba=d[7],ia=d[11];a[1]=d[4];a[2]=d[8];a[3]=d[12];a[4]=D;a[6]=d[9];a[7]=d[13];a[8]=G;a[9]=da;a[11]=d[14];a[12]=aa;a[13]=
ba;a[14]=ia}else a[0]=d[0],a[1]=d[4],a[2]=d[8],a[3]=d[12],a[4]=d[1],a[5]=d[5],a[6]=d[9],a[7]=d[13],a[8]=d[2],a[9]=d[6],a[10]=d[10],a[11]=d[14],a[12]=d[3],a[13]=d[7],a[14]=d[11],a[15]=d[15];return a}function na(a,d){const D=d[0],G=d[1],aa=d[2],da=d[3],ba=d[4],ia=d[5],fa=d[6],oa=d[7],pa=d[8],qa=d[9],ta=d[10],ra=d[11],va=d[12],wa=d[13],xa=d[14];d=d[15];const Aa=D*ia-G*ba,Ca=D*fa-aa*ba,Ba=D*oa-da*ba,za=G*fa-aa*ia,Fa=G*oa-da*ia,Ra=aa*oa-da*fa,Oa=pa*wa-qa*va,Sa=pa*xa-ta*va,Pa=pa*d-ra*va,Ja=qa*xa-ta*wa,
Ma=qa*d-ra*wa,Na=ta*d-ra*xa;let Ga=Aa*Na-Ca*Ma+Ba*Ja+za*Pa-Fa*Sa+Ra*Oa;if(!Ga)return null;Ga=1/Ga;a[0]=(ia*Na-fa*Ma+oa*Ja)*Ga;a[1]=(aa*Ma-G*Na-da*Ja)*Ga;a[2]=(wa*Ra-xa*Fa+d*za)*Ga;a[3]=(ta*Fa-qa*Ra-ra*za)*Ga;a[4]=(fa*Pa-ba*Na-oa*Sa)*Ga;a[5]=(D*Na-aa*Pa+da*Sa)*Ga;a[6]=(xa*Ba-va*Ra-d*Ca)*Ga;a[7]=(pa*Ra-ta*Ba+ra*Ca)*Ga;a[8]=(ba*Ma-ia*Pa+oa*Oa)*Ga;a[9]=(G*Pa-D*Ma-da*Oa)*Ga;a[10]=(va*Fa-wa*Ba+d*Aa)*Ga;a[11]=(qa*Ba-pa*Fa-ra*Aa)*Ga;a[12]=(ia*Sa-ba*Ja-fa*Oa)*Ga;a[13]=(D*Ja-G*Sa+aa*Oa)*Ga;a[14]=(wa*Ca-va*
za-xa*Aa)*Ga;a[15]=(pa*za-qa*Ca+ta*Aa)*Ga;return a}function ja(a,d){const D=d[0],G=d[1],aa=d[2],da=d[3],ba=d[4],ia=d[5],fa=d[6],oa=d[7],pa=d[8],qa=d[9],ta=d[10],ra=d[11],va=d[12],wa=d[13],xa=d[14];d=d[15];a[0]=ia*(ta*d-ra*xa)-qa*(fa*d-oa*xa)+wa*(fa*ra-oa*ta);a[1]=-(G*(ta*d-ra*xa)-qa*(aa*d-da*xa)+wa*(aa*ra-da*ta));a[2]=G*(fa*d-oa*xa)-ia*(aa*d-da*xa)+wa*(aa*oa-da*fa);a[3]=-(G*(fa*ra-oa*ta)-ia*(aa*ra-da*ta)+qa*(aa*oa-da*fa));a[4]=-(ba*(ta*d-ra*xa)-pa*(fa*d-oa*xa)+va*(fa*ra-oa*ta));a[5]=D*(ta*d-ra*xa)-
pa*(aa*d-da*xa)+va*(aa*ra-da*ta);a[6]=-(D*(fa*d-oa*xa)-ba*(aa*d-da*xa)+va*(aa*oa-da*fa));a[7]=D*(fa*ra-oa*ta)-ba*(aa*ra-da*ta)+pa*(aa*oa-da*fa);a[8]=ba*(qa*d-ra*wa)-pa*(ia*d-oa*wa)+va*(ia*ra-oa*qa);a[9]=-(D*(qa*d-ra*wa)-pa*(G*d-da*wa)+va*(G*ra-da*qa));a[10]=D*(ia*d-oa*wa)-ba*(G*d-da*wa)+va*(G*oa-da*ia);a[11]=-(D*(ia*ra-oa*qa)-ba*(G*ra-da*qa)+pa*(G*oa-da*ia));a[12]=-(ba*(qa*xa-ta*wa)-pa*(ia*xa-fa*wa)+va*(ia*ta-fa*qa));a[13]=D*(qa*xa-ta*wa)-pa*(G*xa-aa*wa)+va*(G*ta-aa*qa);a[14]=-(D*(ia*xa-fa*wa)-ba*
(G*xa-aa*wa)+va*(G*fa-aa*ia));a[15]=D*(ia*ta-fa*qa)-ba*(G*ta-aa*qa)+pa*(G*fa-aa*ia);return a}function ma(a){const d=a[0],D=a[1],G=a[2],aa=a[3],da=a[4],ba=a[5],ia=a[6],fa=a[7],oa=a[8],pa=a[9],qa=a[10],ta=a[11],ra=a[12],va=a[13],wa=a[14];a=a[15];return(d*ba-D*da)*(qa*a-ta*wa)-(d*ia-G*da)*(pa*a-ta*va)+(d*fa-aa*da)*(pa*wa-qa*va)+(D*ia-G*ba)*(oa*a-ta*ra)-(D*fa-aa*ba)*(oa*wa-qa*ra)+(G*fa-aa*ia)*(oa*va-pa*ra)}function O(a,d,D){const G=d[0],aa=d[1],da=d[2],ba=d[3],ia=d[4],fa=d[5],oa=d[6],pa=d[7],qa=d[8],
ta=d[9],ra=d[10],va=d[11],wa=d[12],xa=d[13],Aa=d[14];d=d[15];let Ca=D[0],Ba=D[1],za=D[2],Fa=D[3];a[0]=Ca*G+Ba*ia+za*qa+Fa*wa;a[1]=Ca*aa+Ba*fa+za*ta+Fa*xa;a[2]=Ca*da+Ba*oa+za*ra+Fa*Aa;a[3]=Ca*ba+Ba*pa+za*va+Fa*d;Ca=D[4];Ba=D[5];za=D[6];Fa=D[7];a[4]=Ca*G+Ba*ia+za*qa+Fa*wa;a[5]=Ca*aa+Ba*fa+za*ta+Fa*xa;a[6]=Ca*da+Ba*oa+za*ra+Fa*Aa;a[7]=Ca*ba+Ba*pa+za*va+Fa*d;Ca=D[8];Ba=D[9];za=D[10];Fa=D[11];a[8]=Ca*G+Ba*ia+za*qa+Fa*wa;a[9]=Ca*aa+Ba*fa+za*ta+Fa*xa;a[10]=Ca*da+Ba*oa+za*ra+Fa*Aa;a[11]=Ca*ba+Ba*pa+za*va+
Fa*d;Ca=D[12];Ba=D[13];za=D[14];Fa=D[15];a[12]=Ca*G+Ba*ia+za*qa+Fa*wa;a[13]=Ca*aa+Ba*fa+za*ta+Fa*xa;a[14]=Ca*da+Ba*oa+za*ra+Fa*Aa;a[15]=Ca*ba+Ba*pa+za*va+Fa*d;return a}function S(a,d,D){const G=D[0],aa=D[1];D=D[2];let da=void 0,ba=void 0,ia=void 0,fa=void 0,oa=void 0,pa=void 0,qa=void 0,ta=void 0,ra=void 0,va=void 0,wa=void 0,xa=void 0;d===a?(a[12]=d[0]*G+d[4]*aa+d[8]*D+d[12],a[13]=d[1]*G+d[5]*aa+d[9]*D+d[13],a[14]=d[2]*G+d[6]*aa+d[10]*D+d[14],a[15]=d[3]*G+d[7]*aa+d[11]*D+d[15]):(da=d[0],ba=d[1],
ia=d[2],fa=d[3],oa=d[4],pa=d[5],qa=d[6],ta=d[7],ra=d[8],va=d[9],wa=d[10],xa=d[11],a[0]=da,a[1]=ba,a[2]=ia,a[3]=fa,a[4]=oa,a[5]=pa,a[6]=qa,a[7]=ta,a[8]=ra,a[9]=va,a[10]=wa,a[11]=xa,a[12]=da*G+oa*aa+ra*D+d[12],a[13]=ba*G+pa*aa+va*D+d[13],a[14]=ia*G+qa*aa+wa*D+d[14],a[15]=fa*G+ta*aa+xa*D+d[15]);return a}function U(a,d,D){const G=D[0],aa=D[1];D=D[2];a[0]=d[0]*G;a[1]=d[1]*G;a[2]=d[2]*G;a[3]=d[3]*G;a[4]=d[4]*aa;a[5]=d[5]*aa;a[6]=d[6]*aa;a[7]=d[7]*aa;a[8]=d[8]*D;a[9]=d[9]*D;a[10]=d[10]*D;a[11]=d[11]*D;a[12]=
d[12];a[13]=d[13];a[14]=d[14];a[15]=d[15];return a}function z(a,d,D,G){let aa=G[0],da=G[1];G=G[2];let ba=Math.sqrt(aa*aa+da*da+G*G);var ia=void 0,fa=void 0;let oa=void 0,pa=void 0,qa=void 0,ta=void 0,ra=void 0,va=void 0,wa=void 0,xa=void 0,Aa=void 0,Ca=void 0,Ba=void 0,za=void 0,Fa=void 0,Ra=void 0,Oa=void 0,Sa=void 0,Pa=void 0,Ja=void 0,Ma=void 0,Na=void 0;fa=ia=void 0;if(ba<ca.EPSILON)return null;ba=1/ba;aa*=ba;da*=ba;G*=ba;ia=Math.sin(D);fa=Math.cos(D);oa=1-fa;pa=d[0];qa=d[1];ta=d[2];ra=d[3];va=
d[4];wa=d[5];xa=d[6];Aa=d[7];Ca=d[8];Ba=d[9];za=d[10];Fa=d[11];Ra=aa*aa*oa+fa;Oa=da*aa*oa+G*ia;Sa=G*aa*oa-da*ia;Pa=aa*da*oa-G*ia;Ja=da*da*oa+fa;Ma=G*da*oa+aa*ia;Na=aa*G*oa+da*ia;ia=da*G*oa-aa*ia;fa=G*G*oa+fa;a[0]=pa*Ra+va*Oa+Ca*Sa;a[1]=qa*Ra+wa*Oa+Ba*Sa;a[2]=ta*Ra+xa*Oa+za*Sa;a[3]=ra*Ra+Aa*Oa+Fa*Sa;a[4]=pa*Pa+va*Ja+Ca*Ma;a[5]=qa*Pa+wa*Ja+Ba*Ma;a[6]=ta*Pa+xa*Ja+za*Ma;a[7]=ra*Pa+Aa*Ja+Fa*Ma;a[8]=pa*Na+va*ia+Ca*fa;a[9]=qa*Na+wa*ia+Ba*fa;a[10]=ta*Na+xa*ia+za*fa;a[11]=ra*Na+Aa*ia+Fa*fa;d!==a&&(a[12]=d[12],
a[13]=d[13],a[14]=d[14],a[15]=d[15]);return a}function A(a,d,D){const G=Math.sin(D);D=Math.cos(D);const aa=d[4],da=d[5],ba=d[6],ia=d[7],fa=d[8],oa=d[9],pa=d[10],qa=d[11];d!==a&&(a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3],a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);a[4]=aa*D+fa*G;a[5]=da*D+oa*G;a[6]=ba*D+pa*G;a[7]=ia*D+qa*G;a[8]=fa*D-aa*G;a[9]=oa*D-da*G;a[10]=pa*D-ba*G;a[11]=qa*D-ia*G;return a}function w(a,d,D){const G=Math.sin(D);D=Math.cos(D);const aa=d[0],da=d[1],ba=d[2],ia=d[3],fa=d[8],oa=d[9],
pa=d[10],qa=d[11];d!==a&&(a[4]=d[4],a[5]=d[5],a[6]=d[6],a[7]=d[7],a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);a[0]=aa*D-fa*G;a[1]=da*D-oa*G;a[2]=ba*D-pa*G;a[3]=ia*D-qa*G;a[8]=aa*G+fa*D;a[9]=da*G+oa*D;a[10]=ba*G+pa*D;a[11]=ia*G+qa*D;return a}function b(a,d,D){const G=Math.sin(D);D=Math.cos(D);const aa=d[0],da=d[1],ba=d[2],ia=d[3],fa=d[4],oa=d[5],pa=d[6],qa=d[7];d!==a&&(a[8]=d[8],a[9]=d[9],a[10]=d[10],a[11]=d[11],a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);a[0]=aa*D+fa*G;a[1]=da*D+oa*G;a[2]=
ba*D+pa*G;a[3]=ia*D+qa*G;a[4]=fa*D-aa*G;a[5]=oa*D-da*G;a[6]=pa*D-ba*G;a[7]=qa*D-ia*G;return a}function h(a,d){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=d[0];a[13]=d[1];a[14]=d[2];a[15]=1;return a}function q(a,d){a[0]=d[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=d[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=d[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function g(a,d,D){let G=D[0],aa=D[1];D=D[2];let da=Math.sqrt(G*G+aa*aa+D*D),ba=void 0,ia=void 0,fa=void 0;
if(da<ca.EPSILON)return null;da=1/da;G*=da;aa*=da;D*=da;ba=Math.sin(d);ia=Math.cos(d);fa=1-ia;a[0]=G*G*fa+ia;a[1]=aa*G*fa+D*ba;a[2]=D*G*fa-aa*ba;a[3]=0;a[4]=G*aa*fa-D*ba;a[5]=aa*aa*fa+ia;a[6]=D*aa*fa+G*ba;a[7]=0;a[8]=G*D*fa+aa*ba;a[9]=aa*D*fa-G*ba;a[10]=D*D*fa+ia;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function k(a,d){const D=Math.sin(d);d=Math.cos(d);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=d;a[6]=D;a[7]=0;a[8]=0;a[9]=-D;a[10]=d;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function p(a,
d){const D=Math.sin(d);d=Math.cos(d);a[0]=d;a[1]=0;a[2]=-D;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=D;a[9]=0;a[10]=d;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function m(a,d){const D=Math.sin(d);d=Math.cos(d);a[0]=d;a[1]=D;a[2]=0;a[3]=0;a[4]=-D;a[5]=d;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function c(a,d,D){var G=d[0],aa=d[1],da=d[2],ba=d[3],ia=G+G,fa=aa+aa;const oa=da+da;d=G*ia;const pa=G*fa;G*=oa;const qa=aa*fa;aa*=oa;da*=oa;ia*=ba;fa*=ba;ba*=
oa;a[0]=1-(qa+da);a[1]=pa+ba;a[2]=G-fa;a[3]=0;a[4]=pa-ba;a[5]=1-(d+da);a[6]=aa+ia;a[7]=0;a[8]=G+fa;a[9]=aa-ia;a[10]=1-(d+qa);a[11]=0;a[12]=D[0];a[13]=D[1];a[14]=D[2];a[15]=1;return a}function f(a,d){const D=Z,G=-d[0],aa=-d[1],da=-d[2],ba=d[3],ia=d[4],fa=d[5],oa=d[6],pa=d[7],qa=G*G+aa*aa+da*da+ba*ba;0<qa?(D[0]=2*(ia*ba+pa*G+fa*da-oa*aa)/qa,D[1]=2*(fa*ba+pa*aa+oa*G-ia*da)/qa,D[2]=2*(oa*ba+pa*da+ia*aa-fa*G)/qa):(D[0]=2*(ia*ba+pa*G+fa*da-oa*aa),D[1]=2*(fa*ba+pa*aa+oa*G-ia*da),D[2]=2*(oa*ba+pa*da+ia*aa-
fa*G));c(a,d,D);return a}function l(a,d){a[0]=d[12];a[1]=d[13];a[2]=d[14];return a}function v(a,d){const D=d[0],G=d[1],aa=d[2],da=d[4],ba=d[5],ia=d[6],fa=d[8],oa=d[9];d=d[10];a[0]=Math.sqrt(D*D+G*G+aa*aa);a[1]=Math.sqrt(da*da+ba*ba+ia*ia);a[2]=Math.sqrt(fa*fa+oa*oa+d*d);return a}function y(a,d){const D=d[0]+d[5]+d[10];let G=0;0<D?(G=2*Math.sqrt(D+1),a[3]=.25*G,a[0]=(d[6]-d[9])/G,a[1]=(d[8]-d[2])/G,a[2]=(d[1]-d[4])/G):d[0]>d[5]&&d[0]>d[10]?(G=2*Math.sqrt(1+d[0]-d[5]-d[10]),a[3]=(d[6]-d[9])/G,a[0]=
.25*G,a[1]=(d[1]+d[4])/G,a[2]=(d[8]+d[2])/G):d[5]>d[10]?(G=2*Math.sqrt(1+d[5]-d[0]-d[10]),a[3]=(d[8]-d[2])/G,a[0]=(d[1]+d[4])/G,a[1]=.25*G,a[2]=(d[6]+d[9])/G):(G=2*Math.sqrt(1+d[10]-d[0]-d[5]),a[3]=(d[1]-d[4])/G,a[0]=(d[8]+d[2])/G,a[1]=(d[6]+d[9])/G,a[2]=.25*G);return a}function C(a,d,D,G){var aa=d[0],da=d[1],ba=d[2],ia=d[3],fa=aa+aa,oa=da+da,pa=ba+ba;d=aa*fa;const qa=aa*oa;aa*=pa;const ta=da*oa;da*=pa;ba*=pa;fa*=ia;oa*=ia;ia*=pa;pa=G[0];const ra=G[1];G=G[2];a[0]=(1-(ta+ba))*pa;a[1]=(qa+ia)*pa;a[2]=
(aa-oa)*pa;a[3]=0;a[4]=(qa-ia)*ra;a[5]=(1-(d+ba))*ra;a[6]=(da+fa)*ra;a[7]=0;a[8]=(aa+oa)*G;a[9]=(da-fa)*G;a[10]=(1-(d+ta))*G;a[11]=0;a[12]=D[0];a[13]=D[1];a[14]=D[2];a[15]=1;return a}function F(a,d,D,G,aa){var da=d[0],ba=d[1],ia=d[2],fa=d[3],oa=da+da,pa=ba+ba,qa=ia+ia;d=da*oa;var ta=da*pa,ra=da*qa;da=ba*pa;ba*=qa;var va=ia*qa;ia=fa*oa;pa*=fa;const wa=fa*qa;var xa=G[0],Aa=G[1];qa=G[2];G=aa[0];fa=aa[1];aa=aa[2];oa=(1-(da+va))*xa;const Ca=(ta+wa)*xa;xa*=ra-pa;ta=(ta-wa)*Aa;va=(1-(d+va))*Aa;Aa*=ba+ia;
ra=(ra+pa)*qa;ba=(ba-ia)*qa;d=(1-(d+da))*qa;a[0]=oa;a[1]=Ca;a[2]=xa;a[3]=0;a[4]=ta;a[5]=va;a[6]=Aa;a[7]=0;a[8]=ra;a[9]=ba;a[10]=d;a[11]=0;a[12]=D[0]+G-(oa*G+ta*fa+ra*aa);a[13]=D[1]+fa-(Ca*G+va*fa+ba*aa);a[14]=D[2]+aa-(xa*G+Aa*fa+d*aa);a[15]=1;return a}function N(a,d){var D=d[0],G=d[1],aa=d[2];d=d[3];var da=D+D,ba=G+G;const ia=aa+aa;D*=da;const fa=G*da;G*=ba;const oa=aa*da,pa=aa*ba;aa*=ia;da*=d;ba*=d;d*=ia;a[0]=1-G-aa;a[1]=fa+d;a[2]=oa-ba;a[3]=0;a[4]=fa-d;a[5]=1-D-aa;a[6]=pa+da;a[7]=0;a[8]=oa+ba;a[9]=
pa-da;a[10]=1-D-G;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function L(a,d,D,G,aa,da,ba){const ia=1/(D-d),fa=1/(aa-G),oa=1/(da-ba);a[0]=2*da*ia;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*da*fa;a[6]=0;a[7]=0;a[8]=(D+d)*ia;a[9]=(aa+G)*fa;a[10]=(ba+da)*oa;a[11]=-1;a[12]=0;a[13]=0;a[14]=ba*da*2*oa;a[15]=0;return a}function n(a,d,D,G,aa){d=1/Math.tan(d/2);let da=void 0;a[0]=d/D;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=d;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=aa&&Infinity!==aa?(da=1/
(G-aa),a[10]=(aa+G)*da,a[14]=2*aa*G*da):(a[10]=-1,a[14]=-2*G);return a}function I(a,d,D,G){const aa=Math.tan(d.upDegrees*Math.PI/180),da=Math.tan(d.downDegrees*Math.PI/180),ba=Math.tan(d.leftDegrees*Math.PI/180);d=Math.tan(d.rightDegrees*Math.PI/180);const ia=2/(ba+d),fa=2/(aa+da);a[0]=ia;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=fa;a[6]=0;a[7]=0;a[8]=-((ba-d)*ia*.5);a[9]=(aa-da)*fa*.5;a[10]=G/(D-G);a[11]=-1;a[12]=0;a[13]=0;a[14]=G*D/(D-G);a[15]=0;return a}function ka(a,d,D,G,aa,da,ba){const ia=1/(d-D),fa=
1/(G-aa),oa=1/(da-ba);a[0]=-2*ia;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*fa;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*oa;a[11]=0;a[12]=(d+D)*ia;a[13]=(aa+G)*fa;a[14]=(ba+da)*oa;a[15]=1;return a}function Y(a,d,D,G){let aa=void 0,da=void 0;var ba=void 0,ia=void 0;let fa=void 0,oa=void 0;var pa=void 0,qa=void 0;let ta=void 0,ra=void 0;const va=d[0],wa=d[1];d=d[2];ba=G[0];ia=G[1];G=G[2];pa=D[0];qa=D[1];D=D[2];if(Math.abs(va-pa)<ca.EPSILON&&Math.abs(wa-qa)<ca.EPSILON&&Math.abs(d-D)<ca.EPSILON)return T(a);pa=va-
pa;qa=wa-qa;ta=d-D;ra=1/Math.sqrt(pa*pa+qa*qa+ta*ta);pa*=ra;qa*=ra;ta*=ra;aa=ia*ta-G*qa;da=G*pa-ba*ta;ba=ba*qa-ia*pa;(ra=Math.sqrt(aa*aa+da*da+ba*ba))?(ra=1/ra,aa*=ra,da*=ra,ba*=ra):ba=da=aa=0;ia=qa*ba-ta*da;fa=ta*aa-pa*ba;oa=pa*da-qa*aa;(ra=Math.sqrt(ia*ia+fa*fa+oa*oa))?(ra=1/ra,ia*=ra,fa*=ra,oa*=ra):oa=fa=ia=0;a[0]=aa;a[1]=ia;a[2]=pa;a[3]=0;a[4]=da;a[5]=fa;a[6]=qa;a[7]=0;a[8]=ba;a[9]=oa;a[10]=ta;a[11]=0;a[12]=-(aa*va+da*wa+ba*d);a[13]=-(ia*va+fa*wa+oa*d);a[14]=-(pa*va+qa*wa+ta*d);a[15]=1;return a}
function E(a,d,D,G){const aa=d[0],da=d[1];d=d[2];var ba=G[0];const ia=G[1];var fa=G[2];G=aa-D[0];let oa=da-D[1];D=d-D[2];let pa=G*G+oa*oa+D*D;0<pa&&(pa=1/Math.sqrt(pa),G*=pa,oa*=pa,D*=pa);let qa=ia*D-fa*oa;fa=fa*G-ba*D;ba=ba*oa-ia*G;pa=qa*qa+fa*fa+ba*ba;0<pa&&(pa=1/Math.sqrt(pa),qa*=pa,fa*=pa,ba*=pa);a[0]=qa;a[1]=fa;a[2]=ba;a[3]=0;a[4]=oa*ba-D*fa;a[5]=D*qa-G*ba;a[6]=G*fa-oa*qa;a[7]=0;a[8]=G;a[9]=oa;a[10]=D;a[11]=0;a[12]=aa;a[13]=da;a[14]=d;a[15]=1;return a}function e(a){return"mat4("+a[0]+", "+a[1]+
", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}function r(a){return Math.sqrt(a[0]**2+a[1]**2+a[2]**2+a[3]**2+a[4]**2+a[5]**2+a[6]**2+a[7]**2+a[8]**2+a[9]**2+a[10]**2+a[11]**2+a[12]**2+a[13]**2+a[14]**2+a[15]**2)}function x(a,d,D){a[0]=d[0]+D[0];a[1]=d[1]+D[1];a[2]=d[2]+D[2];a[3]=d[3]+D[3];a[4]=d[4]+D[4];a[5]=d[5]+D[5];a[6]=d[6]+D[6];a[7]=d[7]+D[7];a[8]=d[8]+D[8];a[9]=d[9]+D[9];a[10]=d[10]+D[10];
a[11]=d[11]+D[11];a[12]=d[12]+D[12];a[13]=d[13]+D[13];a[14]=d[14]+D[14];a[15]=d[15]+D[15];return a}function B(a,d,D){a[0]=d[0]-D[0];a[1]=d[1]-D[1];a[2]=d[2]-D[2];a[3]=d[3]-D[3];a[4]=d[4]-D[4];a[5]=d[5]-D[5];a[6]=d[6]-D[6];a[7]=d[7]-D[7];a[8]=d[8]-D[8];a[9]=d[9]-D[9];a[10]=d[10]-D[10];a[11]=d[11]-D[11];a[12]=d[12]-D[12];a[13]=d[13]-D[13];a[14]=d[14]-D[14];a[15]=d[15]-D[15];return a}function J(a,d,D){a[0]=d[0]*D;a[1]=d[1]*D;a[2]=d[2]*D;a[3]=d[3]*D;a[4]=d[4]*D;a[5]=d[5]*D;a[6]=d[6]*D;a[7]=d[7]*D;a[8]=
d[8]*D;a[9]=d[9]*D;a[10]=d[10]*D;a[11]=d[11]*D;a[12]=d[12]*D;a[13]=d[13]*D;a[14]=d[14]*D;a[15]=d[15]*D;return a}function M(a,d,D,G){a[0]=d[0]+D[0]*G;a[1]=d[1]+D[1]*G;a[2]=d[2]+D[2]*G;a[3]=d[3]+D[3]*G;a[4]=d[4]+D[4]*G;a[5]=d[5]+D[5]*G;a[6]=d[6]+D[6]*G;a[7]=d[7]+D[7]*G;a[8]=d[8]+D[8]*G;a[9]=d[9]+D[9]*G;a[10]=d[10]+D[10]*G;a[11]=d[11]+D[11]*G;a[12]=d[12]+D[12]*G;a[13]=d[13]+D[13]*G;a[14]=d[14]+D[14]*G;a[15]=d[15]+D[15]*G;return a}function R(a,d){return a[0]===d[0]&&a[1]===d[1]&&a[2]===d[2]&&a[3]===d[3]&&
a[4]===d[4]&&a[5]===d[5]&&a[6]===d[6]&&a[7]===d[7]&&a[8]===d[8]&&a[9]===d[9]&&a[10]===d[10]&&a[11]===d[11]&&a[12]===d[12]&&a[13]===d[13]&&a[14]===d[14]&&a[15]===d[15]}function P(a,d){if(a===d)return!0;const D=a[0],G=a[1],aa=a[2],da=a[3],ba=a[4],ia=a[5],fa=a[6],oa=a[7],pa=a[8],qa=a[9],ta=a[10],ra=a[11],va=a[12],wa=a[13],xa=a[14];a=a[15];const Aa=d[0],Ca=d[1],Ba=d[2],za=d[3],Fa=d[4],Ra=d[5],Oa=d[6],Sa=d[7],Pa=d[8],Ja=d[9],Ma=d[10],Na=d[11],Ga=d[12],Ya=d[13],ea=d[14];d=d[15];return Math.abs(D-Aa)<=ca.EPSILON*
Math.max(1,Math.abs(D),Math.abs(Aa))&&Math.abs(G-Ca)<=ca.EPSILON*Math.max(1,Math.abs(G),Math.abs(Ca))&&Math.abs(aa-Ba)<=ca.EPSILON*Math.max(1,Math.abs(aa),Math.abs(Ba))&&Math.abs(da-za)<=ca.EPSILON*Math.max(1,Math.abs(da),Math.abs(za))&&Math.abs(ba-Fa)<=ca.EPSILON*Math.max(1,Math.abs(ba),Math.abs(Fa))&&Math.abs(ia-Ra)<=ca.EPSILON*Math.max(1,Math.abs(ia),Math.abs(Ra))&&Math.abs(fa-Oa)<=ca.EPSILON*Math.max(1,Math.abs(fa),Math.abs(Oa))&&Math.abs(oa-Sa)<=ca.EPSILON*Math.max(1,Math.abs(oa),Math.abs(Sa))&&
Math.abs(pa-Pa)<=ca.EPSILON*Math.max(1,Math.abs(pa),Math.abs(Pa))&&Math.abs(qa-Ja)<=ca.EPSILON*Math.max(1,Math.abs(qa),Math.abs(Ja))&&Math.abs(ta-Ma)<=ca.EPSILON*Math.max(1,Math.abs(ta),Math.abs(Ma))&&Math.abs(ra-Na)<=ca.EPSILON*Math.max(1,Math.abs(ra),Math.abs(Na))&&Math.abs(va-Ga)<=ca.EPSILON*Math.max(1,Math.abs(va),Math.abs(Ga))&&Math.abs(wa-Ya)<=ca.EPSILON*Math.max(1,Math.abs(wa),Math.abs(Ya))&&Math.abs(xa-ea)<=ca.EPSILON*Math.max(1,Math.abs(xa),Math.abs(ea))&&Math.abs(a-d)<=ca.EPSILON*Math.max(1,
Math.abs(a),Math.abs(d))}function X(a){const d=ca.EPSILON,D=a[0],G=a[1],aa=a[2],da=a[4],ba=a[5],ia=a[6],fa=a[8],oa=a[9];a=a[10];return Math.abs(1-(D*D+da*da+fa*fa))<=d&&Math.abs(1-(G*G+ba*ba+oa*oa))<=d&&Math.abs(1-(aa*aa+ia*ia+a*a))<=d}const Z=t.create();t=Object.freeze({__proto__:null,copy:W,set:u,identity:T,transpose:ha,invert:na,adjoint:ja,determinant:ma,multiply:O,translate:S,scale:U,rotate:z,rotateX:A,rotateY:w,rotateZ:b,fromTranslation:h,fromScaling:q,fromRotation:g,fromXRotation:k,fromYRotation:p,
fromZRotation:m,fromRotationTranslation:c,fromQuat2:f,getTranslation:l,getScaling:v,getRotation:y,fromRotationTranslationScale:C,fromRotationTranslationScaleOrigin:F,fromQuat:N,frustum:L,perspective:n,perspectiveFromFieldOfView:I,ortho:ka,lookAt:Y,targetTo:E,str:e,frob:r,add:x,subtract:B,multiplyScalar:J,multiplyScalarAndAdd:M,exactEquals:R,equals:P,isOrthoNormal:X,mul:O,sub:B});Q.add=x;Q.adjoint=ja;Q.copy=W;Q.determinant=ma;Q.equals=P;Q.exactEquals=R;Q.frob=r;Q.fromQuat=N;Q.fromQuat2=f;Q.fromRotation=
g;Q.fromRotationTranslation=c;Q.fromRotationTranslationScale=C;Q.fromRotationTranslationScaleOrigin=F;Q.fromScaling=q;Q.fromTranslation=h;Q.fromXRotation=k;Q.fromYRotation=p;Q.fromZRotation=m;Q.frustum=L;Q.getRotation=y;Q.getScaling=v;Q.getTranslation=l;Q.identity=T;Q.invert=na;Q.isOrthoNormal=X;Q.lookAt=Y;Q.mat4=t;Q.mul=O;Q.multiply=O;Q.multiplyScalar=J;Q.multiplyScalarAndAdd=M;Q.ortho=ka;Q.perspective=n;Q.perspectiveFromFieldOfView=I;Q.rotate=z;Q.rotateX=A;Q.rotateY=w;Q.rotateZ=b;Q.scale=U;Q.set=
u;Q.str=e;Q.sub=B;Q.subtract=B;Q.targetTo=E;Q.translate=S;Q.transpose=ha})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(Q,t,ca,W,u){function T(z=U){return[z[0],z[1],z[2],z[3]]}function ha(z,A){z!==A&&(z[0]=A[0],z[1]=A[1],z[2]=A[2],z[3]=A[3]);return z}function na(z){return W.isNone(z)||z[0]>=z[2]?0:z[2]-z[0]}function ja(z){return z[1]>=z[3]?0:z[3]-z[1]}function ma(z,A,w){return A>=z[0]&&w>=z[1]&&
A<=z[2]&&w<=z[3]}function O(z){return null!=z&&4===z.length}const S=[Infinity,Infinity,-Infinity,-Infinity],U=[0,0,0,0];Q.NEGATIVE_INFINITY=S;Q.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];Q.UNIT=[0,0,1,1];Q.ZERO=U;Q.allFinite=function(z){for(let A=0;4>A;A++)if(!isFinite(z[A]))return!1;return!0};Q.area=function(z){return na(z)*ja(z)};Q.center=function(z,A=[0,0]){A[0]=(z[0]+z[2])/2;A[1]=(z[1]+z[3])/2;return A};Q.clone=function(z){return[z[0],z[1],z[2],z[3]]};Q.contains=function(z,A){return A[0]>=
z[0]&&A[2]<=z[2]&&A[1]>=z[1]&&A[3]<=z[3]};Q.containsPoint=function(z,A){return ma(z,A[0],A[1])};Q.containsPointObject=function(z,A){return ma(z,A.x,A.y)};Q.containsPointWithMargin=function(z,A,w){return A[0]>=z[0]-w&&A[1]>=z[1]-w&&A[0]<=z[2]+w&&A[1]<=z[3]+w};Q.containsXY=ma;Q.copy=ha;Q.create=T;Q.distance=function(z,A){const w=(z[1]+z[3])/2,b=Math.max(Math.abs(A[0]-(z[0]+z[2])/2)-na(z)/2,0);z=Math.max(Math.abs(A[1]-w)-ja(z)/2,0);return Math.sqrt(b*b+z*z)};Q.empty=function(z){return z?ha(z,S):T(S)};
Q.equals=function(z,A){return O(z)&&O(A)?z[0]===A[0]&&z[1]===A[1]&&z[2]===A[2]&&z[3]===A[3]:z===A};Q.expand=function(z,A,w){if(W.isNone(A))ha(w,z);else if("length"in A)if(O(A))w[0]=Math.min(z[0],A[0]),w[1]=Math.min(z[1],A[1]),w[2]=Math.max(z[2],A[2]),w[3]=Math.max(z[3],A[3]);else{if(2===A.length||3===A.length)w[0]=Math.min(z[0],A[0]),w[1]=Math.min(z[1],A[1]),w[2]=Math.max(z[2],A[0]),w[3]=Math.max(z[3],A[1])}else switch(A.type){case "extent":w[0]=Math.min(z[0],A.xmin);w[1]=Math.min(z[1],A.ymin);w[2]=
Math.max(z[2],A.xmax);w[3]=Math.max(z[3],A.ymax);break;case "point":w[0]=Math.min(z[0],A.x),w[1]=Math.min(z[1],A.y),w[2]=Math.max(z[2],A.x),w[3]=Math.max(z[3],A.y)}};Q.expandPointInPlace=function(z,A){A[0]<z[0]&&(z[0]=A[0]);A[0]>z[2]&&(z[2]=A[0]);A[1]<z[1]&&(z[1]=A[1]);A[1]>z[3]&&(z[3]=A[1])};Q.expandWithNestedArray=function(z,A,w=z){const b=A.length;let h=z[0],q=z[1],g=z[2];z=z[3];for(let k=0;k<b;k++){const p=A[k];h=Math.min(h,p[0]);q=Math.min(q,p[1]);g=Math.max(g,p[0]);z=Math.max(z,p[1])}w[0]=h;
w[1]=q;w[2]=g;w[3]=z;return w};Q.fromExtent=function(z,A=T()){A[0]=z.xmin;A[1]=z.ymin;A[2]=z.xmax;A[3]=z.ymax;return A};Q.fromValues=function(z,A,w,b,h=T()){h[0]=z;h[1]=A;h[2]=w;h[3]=b;return h};Q.height=ja;Q.intersection=function(z,A,w){if(W.isNone(A))return ha(w,z);const b=A[0],h=A[1],q=A[2];A=A[3];w[0]=ca.clamp(z[0],b,q);w[1]=ca.clamp(z[1],h,A);w[2]=ca.clamp(z[2],b,q);w[3]=ca.clamp(z[3],h,A);return w};Q.intersects=function(z,A){return Math.max(A[0],z[0])<=Math.min(A[2],z[2])&&Math.max(A[1],z[1])<=
Math.min(A[3],z[3])};Q.intersectsSegment=function(z,A,w){const b=z[0],h=z[1],q=z[2];z=z[3];const {x:g,y:k}=A,{x:p,y:m}=w;var c=(l,v)=>0>(m-k)*l+(g-p)*v+(p*k-g*m);A=c(b,z);w=c(q,z);const f=c(q,h);c=c(b,h);return A===w&&w===f&&f===c&&c===A||g<b&&p<b||g>q&&p>q||k>z&&m>z||k<h&&m<h?!1:!0};Q.intersectsSphere=function(z,A){const w=A[3];var b=Math.abs(A[0]-.5*(z[0]+z[2]));const h=.5*(z[2]-z[0]);if(b>w+h)return!1;var q=.5*(z[3]-z[1]);z=Math.abs(A[1]-.5*(z[1]+z[3]));if(z>w+q)return!1;if(b<h||z<q)return!0;b-=
h;q=z-q;return b*b+q*q<=w*w};Q.is=O;Q.isPoint=function(z){return(0===na(z)||!isFinite(z[0]))&&(0===ja(z)||!isFinite(z[1]))};Q.offset=function(z,A,w,b=z){b[0]=z[0]+A;b[1]=z[1]+w;b[2]=z[2]+A;b[3]=z[3]+w;return b};Q.pad=function(z,A,w=z){w[0]=z[0]-A;w[1]=z[1]-A;w[2]=z[2]+A;w[3]=z[3]+A;return w};Q.setMax=function(z,A,w=z){w[2]=A[0];w[3]=A[1];w!==z&&(w[0]=z[0],w[1]=z[1]);return z};Q.setMin=function(z,A,w=z){w[0]=A[0];w[1]=A[1];w!==z&&(w[2]=z[2],w[3]=z[3]);return w};Q.size=function(z,A){A[0]=z[2]-z[0];
A[1]=z[3]-z[1]};Q.toExtent=function(z,A){return new u({xmin:z[0],ymin:z[1],xmax:z[2],ymax:z[3],spatialReference:A})};Q.width=na;Object.defineProperty(Q,"__esModule",{value:!0})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(Q,t){const ca=Math.PI/180;var W=t.earth.radius;const u=t.earth.eccentricitySquared;W={a1:W*u,a2:W*u*W*u,a3:W*u*u/2,a4:W*u*W*u*2.5,a5:W*u+W*u*u/2,a6:1-u};t={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},
4326:{a:t.earth.radius,f:t.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:t.moon.radius,f:t.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:t.mars.radius,f:t.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,
f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,
f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},
104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:t.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};Q.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;Q.earthEllipsoidConstants=W;Q.spheroids=t;Q.toRadians=ca;Object.defineProperty(Q,"__esModule",{value:!0})})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],
function(Q,t,ca,W){Q.getGeometryZScaler=function(u,T,ha){if(t.isNone(T)||t.isNone(ha)||ha.vcsWkid||W.equals(T,ha))return null;T=ca.getMetersPerVerticalUnitForSR(T);ha=ca.getMetersPerVerticalUnitForSR(ha);const na=T/ha;if(1===na)return null;switch(u){case "point":case "esriGeometryPoint":return ja=>{ja&&null!=ja.z&&(ja.z*=na)};case "polyline":case "esriGeometryPolyline":return ja=>{if(ja)for(const ma of ja.paths)for(const O of ma)2<O.length&&(O[2]*=na)};case "polygon":case "esriGeometryPolygon":return ja=>
{if(ja)for(const ma of ja.rings)for(const O of ma)2<O.length&&(O[2]*=na)};case "multipoint":case "esriGeometryMultipoint":return ja=>{if(ja)for(const ma of ja.points)2<ma.length&&(ma[2]*=na)};case "extent":case "esriGeometryExtent":return ja=>{ja&&null!=ja.zmin&&null!=ja.zmax&&(ja.zmin*=na,ja.zmax*=na)};default:return null}};Object.defineProperty(Q,"__esModule",{value:!0})})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports","../../../core/jsonMap","../../../core/maybe",
"../PixelBlock","./pixelUtils"],function(Q,t,ca,W,u){function T(c,f){return w.get(c)/w.get(f)||1}function ha(c,f="geographic"){const [l,v]=c;c=Math.sqrt(l*l+v*v);let y=Math.atan2(v,l)*b;y=(360+y)%360;"geographic"===f&&(y=(450-y)%360);return[c,y]}function na(c,f="geographic"){let l=c[1];"geographic"===f&&(l=(450-l)%360);l%=360;c=c[0];return[c*Math.cos(l/b),c*Math.sin(l/b)]}function ja(c,f,l="geographic",v=1){if(!u.isValidPixelBlock(c))return c;const {pixels:y,width:C,height:F}=c;var N=C*F;const L=
y[0],n=y[1],I=c.pixelType.startsWith("f")?c.pixelType:"f32",ka=W.createEmptyBand(I,N);N=W.createEmptyBand(I,N);let Y=0;for(let E=0;E<F;E++)for(let e=0;e<C;e++)"vector-uv"===f?([ka[Y],N[Y]]=ha([L[Y],n[Y]],l),ka[Y]*=v):([ka[Y],N[Y]]=na([L[Y],n[Y]],l),ka[Y]*=v,N[Y]*=v),Y++;c=new W({pixelType:I,width:c.width,height:c.height,mask:c.mask,validPixelCount:c.validPixelCount,maskIsAlpha:c.maskIsAlpha,pixels:[ka,N]});c.updateStatistics();return c}function ma(c=0,f=Math.PI,l=!0){l&&(f=(2*Math.PI-f)%(2*Math.PI));
var v=l?-1:1;l=5*v;const y=20*v,C=25*v;v*=2;let [F,N]=[5,0-y],[L,n]=[F+2,N],[I,ka]=[L-0,n+v],[Y,E]=[-5,0-C],[e,r]=[Y+0,E-v];c=Math.ceil(c/5);let x=Math.floor(c/10);c-=8*x;const B=[],J=[];for(let G=0;G<c/2;G++,x--){0>=x&&1===c%2&&G===(c-1)/2&&(Y=0,e=Y+0,E=(E+N)/2,r=E-v);const [aa,da]=O(Y,E,f,45);if(0<x){const [ba,ia]=O(L,E,f,45),[fa,oa]=O(F,N,f,45);B.push(ba);B.push(ia);B.push(aa);B.push(da);B.push(fa);B.push(oa)}else{const [ba,ia]=O(L,n,f,45),[fa,oa]=O(I,ka,f,45),[pa,qa]=O(e,r,f,45);J.push(aa);J.push(da);
J.push(pa);J.push(qa);J.push(fa);J.push(oa);J.push(ba);J.push(ia)}E+=l;N+=l;n+=l;ka+=l;r+=l}const [M,R]=O(5,0+y,f,45),[P,X]=O(7,0+y,f,45),[Z,a]=O(5,0-C,f,45),[d,D]=O(7,0-C,f,45);return{pennants:B,barbs:J,shaft:[M,R,P,X,Z,a,d,D]}}function O(c,f,l,v=1){return[Math.sqrt(c*c+f*f)/v,(2*Math.PI+(2*Math.PI+Math.atan2(f,c))%(2*Math.PI)-l)%(2*Math.PI)]}function S(c,f,l,v){l=T(v||"knots",l);for(v=1;v<f.length;v++)if(v===f.length-1){if(c<f[v]*l)break}else if(c<=f[v]*l)break;return Math.min(v-1,f.length-2)}function U(c,
f,l,v,y){let C=0;switch(f){case "beaufort_kn":C=S(c,g,"knots",l);break;case "beaufort_km":C=S(c,g,"kilometer-per-hour",l);break;case "beaufort_ft":C=S(c,g,"feet-per-second",l);break;case "beaufort_m":C=S(c,g,"meter-per-second",l);break;case "classified_arrow":C=S(c,y,v,l);break;case "ocean_current_m":C=S(c,k,"meter-per-second",l);break;case "ocean_current_kn":C=S(c,p,"knots",l)}return C}function z(c,f){const {style:l,inputUnit:v,outputUnit:y,breakValues:C}=f;f=h.fromJSON(v);const F=h.fromJSON(y);
let N=0,L=0;const {width:n,height:I,mask:ka}=c,Y=c.pixels[0];c=c.pixels[1];var E=ka?ka.filter(B=>0<B).length:n*I;const e=new Float32Array(42*E);E=new Uint32Array(15*E);for(let B=0;B<I;B++)for(let J=0;J<n;J++){var r=B*n+J;if(!ka||ka[B*n+J]){var x;const M=null!=(x=(c[r]+360)%360/180*Math.PI)?x:2*Math.PI*Math.random(),R=U(Y[r],l,f,F,C);for(let P=0;P<q.length;P+=2)e[N++]=(J+.5)/n,e[N++]=(B+.5)/I,e[N++]=q[P],e[N++]=q[P+1]+M,e[N++]=R,e[N++]=Y[r];r=7*(N/42-1);E[L++]=r;E[L++]=r+1;E[L++]=r+2;E[L++]=r+0;E[L++]=
r+4;E[L++]=r+3;E[L++]=r+0;E[L++]=r+2;E[L++]=r+3;E[L++]=r+2;E[L++]=r+5;E[L++]=r+3;E[L++]=r+5;E[L++]=r+6;E[L++]=r+3}}return{vertexData:e,indexData:E}}function A(c,f){let l=0,v=0;const {width:y,height:C,mask:F}=c;c=c.pixels[0];const N=[],L=[];var n=h.fromJSON(f.inputUnit);n=T(n,"knots");f="wind_speed"===f.style?5:Number.MAX_VALUE;for(let ka=0;ka<C;ka++)for(let Y=0;Y<y;Y++){var I=c[ka*y+Y]*n;if((!F||F[ka*y+Y])&&I<f){for(let E=0;4>E;E++)N[l++]=(Y+.5)/y,N[l++]=(ka+.5)/C,N[l++]=2>E?-.5:.5,N[l++]=0===E%2?
-.5:.5,N[l++]=0,N[l++]=I;I=4*(l/24-1);L[v++]=I;L[v++]=I+1;L[v++]=I+2;L[v++]=I+1;L[v++]=I+2;L[v++]=I+3}}return{vertexData:new Float32Array(N),indexData:new Uint32Array(L)}}const w=new Map;w.set("meter-per-second",1);w.set("kilometer-per-hour",.277778);w.set("knots",.514444);w.set("feet-per-second",.3048);w.set("mile-per-hour",.44704);const b=180/Math.PI,h=new t.JSONMap({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",
esriMilesPerHour:"mile-per-hour"}),q=function(c=0,f=0,l=Math.PI,v=!0){v&&(l=(2*Math.PI-l)%(2*Math.PI));v=v?-1:1;const y=-7*v,C=-2*v,F=-16*v,[N,L]=O(0,f+13*v,l,21.75),[n,I]=O(c-5.5,f+y,l,21.75),[ka,Y]=O(c+5.5,f+y,l,21.75),[E,e]=O(c-1.5,f+C,l,21.75),[r,x]=O(c+1.5,f+C,l,21.75),[B,J]=O(c-1.5,f+F,l,21.75),[M,R]=O(c+1.5,f+F,l,21.75);return[N,L,n,I,E,e,r,x,ka,Y,B,J,M,R]}(0,0,0),g=[0,1,3,6,10,16,21,27,33,40,47,55,63],k=[0,.5,1,1.5,2],p=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],m=[];Q.convertToLocalDirections=function(c,
f,l,v="geographic"){if(!u.isValidPixelBlock(c)||ca.isNone(l))return c;c="vector-magdir"===f?c.clone():ca.unwrap(ja(c,f));const y=c.pixels[1];for(let C=0;C<y.length;C++)y[C]="geographic"===v?(y[C]+l[C]+270)%360:(y[C]+360-l[C])%360;return"vector-magdir"===f?c:ja(c,"vector-magdir")};Q.convertVectorFieldData=ja;Q.convertVectorFieldUnit=function(c,f,l=1){if(1===l||!u.isValidPixelBlock(c))return c;c=c.clone();const {pixels:v,width:y,height:C}=c,F=v[0],N=v[1];let L=0;for(let n=0;n<C;n++)for(let I=0;I<y;I++)"vector-uv"===
f?(F[L]*=l,N[L]*=l):F[L]*=l,L++;c.updateStatistics();return c};Q.createVFMesh=function(c,f){if("simple_scalar"===f.style)var l=A(c,f);else if("wind_speed"===f.style){{if(0===m.length)for(var v=0;30>v;v++)m.push(ma(5*v,0));f=h.fromJSON(f.inputUnit);f=T(f,"knots");const {width:N,height:L,mask:n}=c;v=c.pixels[0];c=c.pixels[1];const I=[],ka=[];let Y=0,E=0;for(let e=0;e<L;e++)for(let r=0;r<N;r++){var y=e*N+r,C=v[y]*f;if((!n||n[e*N+r])&&5<=C){const x=null!=(l=(c[y]+360)%360/180*Math.PI)?l:2*Math.PI*Math.random(),
{pennants:B,barbs:J,shaft:M}=m[Math.min(Math.floor(C/5),29)];if(0===B.length+J.length)continue;y=I.length/6;const R=(r+.5)/N,P=(e+.5)/L;for(var F=0;F<B.length;F+=2)I[Y++]=R,I[Y++]=P,I[Y++]=B[F],I[Y++]=B[F+1]+x,I[Y++]=0,I[Y++]=C;for(F=0;F<J.length;F+=2)I[Y++]=R,I[Y++]=P,I[Y++]=J[F],I[Y++]=J[F+1]+x,I[Y++]=0,I[Y++]=C;for(F=0;F<M.length;F+=2)I[Y++]=R,I[Y++]=P,I[Y++]=M[F],I[Y++]=M[F+1]+x,I[Y++]=0,I[Y++]=C;for(C=0;C<B.length/6;C++)ka[E++]=y,ka[E++]=y+1,ka[E++]=y+2,y+=3;for(C=0;C<J.length/8;C++)ka[E++]=
y,ka[E++]=y+1,ka[E++]=y+2,ka[E++]=y+1,ka[E++]=y+2,ka[E++]=y+3,y+=4;ka[E++]=y+0;ka[E++]=y+1;ka[E++]=y+2;ka[E++]=y+1;ka[E++]=y+3;ka[E++]=y+2;y+=4}}l={vertexData:new Float32Array(I),indexData:new Uint32Array(ka)}}}else l=z(c,f);return l};Q.createVFMeshScalar=A;Q.getUnitConversionFactor=T;Q.sampleVectorField=function(c,f,l,v=[0,0],y=.5){const {width:C,height:F,mask:N}=c,[L,n]=c.pixels,[I,ka]=v;c=Math.round((C-I)/l);v=Math.round((F-ka)/l);var Y=c*v;const E=new Float32Array(Y),e=new Float32Array(Y);Y=new Uint8Array(Y);
f="vector-uv"===f;for(let x=0;x<v;x++)for(let B=0;B<c;B++){let J=0;const M=x*c+B,R=Math.max(0,x*l+ka),P=Math.max(0,B*l+I),X=Math.min(F,R+l),Z=Math.min(C,P+l);for(let a=R;a<X;a++)for(let d=P;d<Z;d++){var r=a*C+d;if(!N||N[r]){J++;r=f?[L[r],n[r]]:[L[r],(360+n[r])%360];const [D,G]=f?r:na(r);E[M]+=D;e[M]+=G}}if(J>=(X-R)*(Z-P)*(1-y)){Y[M]=1;const [a,d]=ha([E[M]/J,e[M]/J]);E[M]=a;e[M]=d}else Y[M]=0,E[M]=0,e[M]=0}l=new W({width:c,height:v,pixels:[E,e],mask:Y});l.updateStatistics();return l};Q.snapImageToSymbolTile=
function(c,f,l,v,y){if(!ca.isSome(y)||!y.spatialReference.equals(c.spatialReference))return{extent:c,width:Math.round(f/v),height:Math.round(l/v),resolution:c.width/f};const C=y.xmin;y=y.ymax;f=(c.xmax-c.xmin)/f*v;l=(c.ymax-c.ymin)/l*v;c.xmin=C+Math.floor((c.xmin-C)/f)*f;c.xmax=C+Math.ceil((c.xmax-C)/f)*f;c.ymin=y+Math.floor((c.ymin-y)/l)*l;c.ymax=y+Math.ceil((c.ymax-y)/l)*l;return{extent:c,width:Math.round(c.width/f),height:Math.round(c.height/l),resolution:(f+l)/2}};Q.unitKebabDict=h;Q.uvComponentToVector=
ha;Object.defineProperty(Q,"__esModule",{value:!0})})},"esri/layers/support/rasterTransforms/utils":function(){define(["exports","./GCSShiftTransform","./IdentityTransform","./PolynomialTransform"],function(Q,t,ca,W){const u={GCSShiftXform:t,IdentityXform:ca,PolynomialXform:W},T=Object.keys(u);Q.isTransformSupported=function(ha){const na=null==ha?void 0:ha.type;return!ha||T.includes(na)};Q.readTransform=function(ha){if(null==ha||!ha.type)return null;var na=u[null==ha?void 0:ha.type];return na?(na=
new na,na.read(ha),na):null};Object.defineProperty(Q,"__esModule",{value:!0})})},"esri/layers/support/rasterTransforms/GCSShiftTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseRasterTransform".split(" "),function(Q,
t,ca,W,u,T,ha,na,ja){W=function(ma){function O(){var U=ma.apply(this,arguments)||this;U.type="gcs-shift";U.tolerance=1E-8;return U}Q._inheritsLoose(O,ma);var S=O.prototype;S.forwardTransform=function(U){U=U.clone();if("point"===U.type)return U.x>180+this.tolerance&&(U.x-=360),U;U.xmin>=180-this.tolerance?(U.xmax-=360,U.xmin-=360):U.xmax>180+this.tolerance&&(U.xmin=-180,U.xmax=180);return U};S.inverseTransform=function(U){U=U.clone();if("point"===U.type)return U.x<-this.tolerance&&(U.x+=360),U;U.xmin<
-this.tolerance&&(U.xmin+=360,U.xmax+=360);return U};return O}(ja);t.__decorate([ha.enumeration({GCSShiftXform:"gcs-shift"})],W.prototype,"type",void 0);t.__decorate([ca.property()],W.prototype,"tolerance",void 0);return W=t.__decorate([na.subclass("esri.layers.support.rasterTransforms.GCSShiftTransform")],W)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(Q,t,ca){Q.enumeration=function(W,u={}){var T;W=W instanceof t.JSONMap?
W:new t.JSONMap(W,u);W={type:(null!=(T=null==u?void 0:u.ignoreUnknown)?T:1)?W.apiValues:String,json:{type:W.jsonValues,read:null!=u&&u.readOnly?!1:{reader:W.read},write:{writer:W.write}}};void 0!==(null==u?void 0:u.readOnly)&&(W.readOnly=!!u.readOnly);void 0!==(null==u?void 0:u.default)&&(W.json.default=u.default);void 0!==(null==u?void 0:u.name)&&(W.json.name=u.name);return ca.property(W)};Object.defineProperty(Q,"__esModule",{value:!0})})},"esri/layers/support/rasterTransforms/BaseRasterTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(Q,t,ca,W,u,T,ha,na){ca=function(ja){function ma(){return ja.apply(this,arguments)||this}Q._inheritsLoose(ma,ja);var O=ma.prototype;O.forwardTransform=function(S){return S};O.inverseTransform=function(S){return S};Q._createClass(ma,[{key:"affectsPixelSize",get:function(){return!1}}]);return ma}(ca.JSONSupport);t.__decorate([W.property()],ca.prototype,"affectsPixelSize",null);t.__decorate([W.property({json:{write:!0}})],ca.prototype,"spatialReference",void 0);return ca=t.__decorate([na.subclass("esri.layers.support.rasterTransforms.BaseRasterTransform")],
ca)})},"esri/layers/support/rasterTransforms/IdentityTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/set ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseRasterTransform".split(" "),function(Q,t,ca,W,u,T,ha,na,ja,ma){ca=function(O){function S(){var U=O.apply(this,
arguments)||this;U.type="identity";return U}Q._inheritsLoose(S,O);return S}(ma);t.__decorate([na.enumeration({IdentityXform:"identity"})],ca.prototype,"type",void 0);return ca=t.__decorate([ja.subclass("esri.layers.support.rasterTransforms.IdentityTransform")],ca)})},"esri/layers/support/rasterTransforms/PolynomialTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseRasterTransform ../../../geometry/Point ../../../geometry/Extent".split(" "),
function(Q,t,ca,W,u,T,ha,na,ja,ma,O,S,U,z){function A(b,h,q){const {x:g,y:k}=h;if(2>q)return{x:b[0]+g*b[2]+k*b[4],y:b[1]+g*b[3]+k*b[5]};if(2===q){h=g*g;q=k*k;var p=g*k;return{x:b[0]+g*b[2]+k*b[4]+h*b[6]+p*b[8]+q*b[10],y:b[1]+g*b[3]+k*b[5]+h*b[7]+p*b[9]+q*b[11]}}h=g*g;q=k*k;p=g*k;const m=h*g,c=h*k,f=g*q,l=k*q;return{x:b[0]+g*b[2]+k*b[4]+h*b[6]+p*b[8]+q*b[10]+m*b[12]+c*b[14]+f*b[16]+l*b[18],y:b[1]+g*b[3]+k*b[5]+h*b[7]+p*b[9]+q*b[11]+m*b[13]+c*b[15]+f*b[17]+l*b[19]}}function w(b,h,q){const {xmin:g,ymin:k,
xmax:p,ymax:m,spatialReference:c}=h;h=[];if(2>q)h.push({x:g,y:m}),h.push({x:p,y:m}),h.push({x:g,y:k}),h.push({x:p,y:k});else{var f=10;for(var l=0;l<f;l++)h.push({x:g,y:k+(m-k)*l/(f-1)}),h.push({x:p,y:k+(m-k)*l/(f-1)});f=8;for(l=1;l<=f;l++)h.push({x:g+(p-g)*l/f,y:k}),h.push({x:g+(p-g)*l/f,y:m})}h=h.map(v=>A(b,v,q));f=h.map(v=>v.x);h=h.map(v=>v.y);return new z({xmin:Math.min.apply(null,f),xmax:Math.max.apply(null,f),ymin:Math.min.apply(null,h),ymax:Math.max.apply(null,h),spatialReference:c})}ca=function(b){function h(){var g=
b.apply(this,arguments)||this;g.polynomialOrder=1;g.type="polynomial";return g}Q._inheritsLoose(h,b);var q=h.prototype;q.readForwardCoefficients=function(g,k){const {coeffX:p,coeffY:m}=k;if(null==p||!p.length||null==m||!m.length||p.length!==m.length)return null;g=[];for(k=0;k<p.length;k++)g.push(p[k]),g.push(m[k]);return g};q.writeForwardCoefficients=function(g,k,p){p=[];const m=[];for(let c=0;c<(null==g?void 0:g.length);c++)0===c%2?p.push(g[c]):m.push(g[c]);k.coeffX=p;k.coeffY=m};q.readInverseCoefficients=
function(g,k){const {inverseCoeffX:p,inverseCoeffY:m}=k;if(null==p||!p.length||null==m||!m.length||p.length!==m.length)return null;g=[];for(k=0;k<p.length;k++)g.push(p[k]),g.push(m[k]);return g};q.writeInverseCoefficients=function(g,k,p){p=[];const m=[];for(let c=0;c<(null==g?void 0:g.length);c++)0===c%2?p.push(g[c]):m.push(g[c]);k.inverseCoeffX=p;k.inverseCoeffY=m};q.forwardTransform=function(g){if("point"===g.type){const k=A(this.forwardCoefficients,g,this.polynomialOrder);return new U({x:k.x,y:k.y,
spatialReference:g.spatialReference})}return w(this.forwardCoefficients,g,this.polynomialOrder)};q.inverseTransform=function(g){if("point"===g.type){const k=A(this.inverseCoefficients,g,this.polynomialOrder);return new U({x:k.x,y:k.y,spatialReference:g.spatialReference})}return w(this.inverseCoefficients,g,this.polynomialOrder)};Q._createClass(h,[{key:"inverseCoefficients",get:function(){var g=this._get("inverseCoefficients"),k=this._get("forwardCoefficients");if(!g&&k&&2>this.polynomialOrder){{const [p,
m,c,f,l,v]=k;g=c*v-l*f;k=l*f-c*v;g=[(l*m-p*v)/g,(c*m-p*f)/k,v/g,f/k,-l/g,-c/k]}}return g},set:function(g){this._set("inverseCoefficients",g)}},{key:"affectsPixelSize",get:function(){return 0<this.polynomialOrder}}]);return h}(S);t.__decorate([W.property({json:{write:!0}})],ca.prototype,"polynomialOrder",void 0);t.__decorate([W.property()],ca.prototype,"forwardCoefficients",void 0);t.__decorate([ja.reader("forwardCoefficients",["coeffX","coeffY"])],ca.prototype,"readForwardCoefficients",null);t.__decorate([O.writer("forwardCoefficients")],
ca.prototype,"writeForwardCoefficients",null);t.__decorate([W.property({json:{write:!0}})],ca.prototype,"inverseCoefficients",null);t.__decorate([ja.reader("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],ca.prototype,"readInverseCoefficients",null);t.__decorate([O.writer("inverseCoefficients")],ca.prototype,"writeInverseCoefficients",null);t.__decorate([W.property()],ca.prototype,"affectsPixelSize",null);t.__decorate([na.enumeration({PolynomialXform:"polynomial"})],ca.prototype,"type",void 0);
return ca=t.__decorate([ma.subclass("esri.layers.support.rasterTransforms.PolynomialTransform")],ca)})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/colorUtils ../../core/JSONSupport ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/surfaceUtils ./colorRampUtils".split(" "),
function(Q,t,ca,W,u,T,ha,na,ja,ma,O,S,U,z,A){function w(k,p){const {attributeTable:m,bandCount:c}=k;return!T.isSome(m)||1<c||p&&null==m.fields.find(f=>f.name.toLowerCase()===p.toLowerCase())?!1:!0}function b(k){const {bandCount:p,colormap:m}=k;return T.isSome(m)&&m.length&&1===p}function h(k){return U.isValidPixelBlock(k)&&0!==k.validPixelCount}const q=u.getLogger("esri.renderers.support.RasterSymbolizer"),g={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,
4294967295],s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*1E39],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};W=function(k){function p(c){return k.call(this,c)||this}Q._inheritsLoose(p,k);var m=p.prototype;m.bind=function(){const {rendererJSON:c}=this;if(!c)return{success:!1};this.lookup={rendererJSON:{}};let f;switch(c.type){case "uniqueValue":f=this._updateUVRenderer(c);break;case "rasterColormap":f=this._updateColormapRenderer(c);break;case "rasterStretch":f=this._updateStretchRenderer(c);break;
case "classBreaks":f=this._updateClassBreaksRenderer(c);break;case "rasterShadedRelief":f=this._updateShadedReliefRenderer(c);break;case "vectorField":f=this._updateVectorFieldRenderer();break;case "flowRenderer":f=this._updateFlowRenderer()}return f};m.symbolize=function(c){let f=c&&c.pixelBlock;if(!h(f))return f;if(c.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(f,c.simpleStretchParams);try{3<f.pixels.length&&(f=U.extractBands(f,[0,1,2]));let l;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":l=
this._symbolizeColormap(f);break;case "classBreaks":l=this._symbolizeClassBreaks(f);break;case "rasterStretch":l=this._symbolizeStretch(f,c.bandIds);break;case "rasterShadedRelief":({extent:c}=c),l=this._symbolizeShadedRelief(f,{isGCS:c.spatialReference.isGeographic,resolution:{x:(c.xmax-c.xmin)/f.width,y:(c.ymax-c.ymin)/f.height}})}return l}catch(l){return q.error("symbolize",l.message),f}};m.simpleStretch=function(c,f){if(!h(c))return c;try{return 3<c.pixels.length&&(c=U.extractBands(c,[0,1,2])),
U.stretch(c,f)}catch(l){return q.error("symbolize",l.message),c}};m.generateWebGLParameters=function(c){if(-1<["uniqueValue","rasterColormap","classBreaks"].indexOf(this.rendererJSON.type)){var f;const {indexedColormap:F,offset:N}=(null==(f=this.lookup)?void 0:f.colormapLut)||{};return{colormap:F,colormapOffset:N,type:"lut"}}const {pixelBlock:l,isGCS:v,resolution:y,bandIds:C}=c;({rendererJSON:c}=this);return"rasterStretch"===c.type?this._generateStretchWebGLParams(l,c,C):"rasterShadedRelief"===c.type?
this._generateShadedReliefWebGLParams(c,v,y):"vectorField"===c.type?this._generateVectorFieldWebGLParams(c):null};m._isLUTChanged=function(c){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const f=this.rendererJSON.colorRamp;if(c)return JSON.stringify(f)!==JSON.stringify(this.lookup.rendererJSON.colorRamp);({...this.rendererJSON});({...this.lookup.rendererJSON})}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)};m._symbolizeColormap=
function(c){return this._isLUTChanged()&&!this.bind().success?c:U.colorize(c,this.lookup.colormapLut)};m._symbolizeClassBreaks=function(c){const f=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType);return this._isLUTChanged()&&!this.bind().success?c:f?U.colorize(c,this.lookup.colormapLut):U.remapColor(c,this.lookup.remapLut)};m._symbolizeStretch=function(c,f){const {pixelType:l,bandCount:v}=this.rasterInfo,y=this.rendererJSON,C=-1<["u8","u16","s8","s16"].indexOf(l);let F;var {dra:N}=y;
var L=y.useGamma?y.gamma:null;if("histogramEqualization"===y.stretchType){var n=N?null:this.lookup.histogramLut;f=this._getStretchCutoff(y,c,f,!n);L=U.stretch(c,{...f,gamma:L});L=U.lookupPixels(L,{lut:N?f.histogramLut:n,offset:0})}else if(C){var I;if(N)N=this._getStretchCutoff(y,c,f),F=U.createStretchLUT({pixelType:l,...N,gamma:L});else{if(this._isLUTChanged()&&!this.bind().success)return c;F=this.lookup?this.lookup.stretchLut:null}if(!F)return c;1<v&&(null==f?void 0:f.length)===(null==(n=T.unwrap(c))?
void 0:n.pixels.length)&&(null==(I=F)?void 0:I.lut.length)===v&&(F={lut:f.map(ka=>F.lut[ka]),offset:F.offset});L=U.lookupPixels(c,F)}else N=this._getStretchCutoff(y,c,f),L=U.stretch(c,{...N,gamma:L});if(y.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return c;L=U.colorize(L,this.lookup.colormapLut)}return L};m._symbolizeShadedRelief=function(c,f){var l,v,y=this.rendererJSON;f=z.hillshade(c,{...y,...f});if(!y.colorRamp||this._isLUTChanged(!0)&&!this.bind().success)return f;y=this.lookup?
this.lookup.hsvMap:null;if(!y)return f;const C=null!=(l=null==(v=T.unwrap(this.rasterInfo.statistics))?void 0:v[0])?l:{min:0,max:8E3};z.tintHillshade(f,c,y,C);return f};m._isVectorFieldData=function(){const {bandCount:c,dataType:f}=this.rasterInfo;return 2===c&&("vector-magdir"===f||"vector-uv"===f)};m._updateVectorFieldRenderer=function(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}};
m._updateFlowRenderer=function(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}};m._updateUVRenderer=function(c){const {bandCount:f,attributeTable:l,pixelType:v}=this.rasterInfo,y=c.field1;if(!y)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const C=c.defaultSymbol;var F=1===f&&["u8","s8"].includes(v);if(!w(this.rasterInfo,y)&&!F)return{success:!1,
error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};const N=[];if(l){const L=l.fields.find(n=>"value"===n.name.toLowerCase());if(!L)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};l.features.forEach(n=>{var I,ka=c.uniqueValueInfos.find(Y=>String(Y.value)===String(n.attributes[y]));(ka=null==ka?void 0:null==(I=ka.symbol)?void 0:I.color)?N.push([n.attributes[L.name]].concat(ka)):
C&&N.push([n.attributes[L.name]].concat(C.color))})}else{if("value"!==y.toLowerCase())return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not availalbe.'};c.uniqueValueInfos.forEach(L=>{var n;const I=null==L?void 0:null==(n=L.symbol)?void 0:n.color;I?N.push([parseInt(""+L.value,10)].concat(I)):C&&N.push([parseInt(""+L.value,10)].concat(C.color))})}if(0===N.length)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};
F=U.createColormapLUT({colormap:N});this.lookup={rendererJSON:c,colormapLut:F};this.canRenderInWebGL=!0;return{success:!0}};m._updateColormapRenderer=function(c){if(!b(this.rasterInfo))return{success:!1,error:"Unsupported data; the data source does not have a colormap."};var f=c.colormapInfos.map(l=>[l.value].concat(l.color)).sort((l,v)=>l[0]-v[0]);if(!f||0===f.length)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};f=U.createColormapLUT({colormap:f});
this.lookup={rendererJSON:c,colormapLut:f};this.canRenderInWebGL=!0;return{success:!0}};m._updateShadedReliefRenderer=function(c){if("elevation"!==this.rasterInfo.dataType)return{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation".`};if(c.colorRamp){var f=A.convertColorRampToColormap(c.colorRamp,256,!0);f=U.createColormapLUT({colormap:f});const l=[],v=f.indexedColormap;for(let y=0;y<v.length;y+=4){const C=ca.toHSV({r:v[y],g:v[y+1],
b:v[y+2]});l.push([C.h/60,C.s/100,255*C.v/100])}this.lookup={rendererJSON:c,colormapLut:f,hsvMap:l}}else this.lookup=null;this.canRenderInWebGL=!0;return{success:!0}};m._updateClassBreaksRenderer=function(c){var f=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType),l=c.classBreakInfos;if(null==l||!l.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};l=l.sort((N,L)=>N.classMaxValue-L.classMaxValue);const v=l[l.length-1];var y=c.minValue;
if(!f){f=[];for(var C=0;C<l.length;C++){var F;f.push({value:null!=(F=l[C].classMinValue)?F:y,mappedColor:l[C].symbol.color});y=l[C].classMaxValue}f.push({value:v.classMaxValue,mappedColor:v.symbol.color});this.lookup={rendererJSON:c,remapLut:f};this.canRenderInWebGL=!1;return{success:!0}}F=[];y=Math.floor(c.minValue);for(f=0;f<l.length;f++){for(C=l[f];y<C.classMaxValue;y++)F.push([y].concat(C.symbol.color));y=Math.ceil(C.classMaxValue)}v.classMaxValue===y&&F.push([v.classMaxValue].concat(v.symbol.color));
l=U.createColormapLUT({colormap:F,fillUnspecified:!1});this.lookup={rendererJSON:c,colormapLut:l};this.canRenderInWebGL=!0;return{success:!0}};m._isHistogramRequired=function(c){return"percentClip"===c||"histogramEqualization"===c};m._isValidRasterStatistics=function(c){return T.isSome(c)&&0<c.length&&null!=c[0].min&&null!=c[0].max};m._updateStretchRenderer=function(c){var f;let {stretchType:l,dra:v}=c;if(!("none"===l||null!=(f=c.statistics)&&f.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||
v))return{success:!1,error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};var y=T.unwrap(c.histograms||this.rasterInfo.histograms);!this._isHistogramRequired(c.stretchType)||null!=y&&y.length||v||(l="minMax");const {gamma:C,useGamma:F,colorRamp:N}=c;f=this.rasterInfo.pixelType;const L=!v&&-1<["u8","u16","s8","s16"].indexOf(f);"histogramEqualization"===l?(f=y.map(n=>U.createHistogramEqualizationLUT(n)),this.lookup={rendererJSON:c,histogramLut:f}):
L&&(y=this._getStretchCutoff(c),f=U.createStretchLUT({pixelType:f,...y,gamma:F?C:null}),this.lookup={rendererJSON:c,stretchLut:f});N&&(f=A.convertColorRampToColormap(N,256,!0),this.lookup||(this.lookup={rendererJSON:c}),this.lookup.colormapLut=U.createColormapLUT({colormap:f}),this.lookup.rendererJSON=c);this.canRenderInWebGL=!0;return{success:!0}};m._getStretchCutoff=function(c,f=null,l,v){var y,C,F,N=c.stretchType;if(c.dra)if("minMax"===N&&T.isSome(f)&&f.statistics)f=f.statistics.map(x=>[x.minValue,
x.maxValue,0,0]);else{var L=U.estimateStatisticsHistograms(f);f=T.isSome(L)?L.statistics:null;L=T.isSome(L)?L.histograms:null}else{var n;f=0<(null==(n=c.statistics)?void 0:n.length)?c.statistics:T.unwrap(this.rasterInfo.statistics);L=c.histograms||T.unwrap(this.rasterInfo.histograms)}!this._isHistogramRequired(N)||null!=(y=L)&&y.length||(N="minMax");n=(null==(C=f)?void 0:C.length)||(null==(F=L)?void 0:F.length)||this.rasterInfo.bandCount;C=[];F=[];let I;let ka,Y,E;f&&!Array.isArray(f[0])&&(f=f.map(x=>
[x.min,x.max,x.avg,x.stddev]));switch(N){case "none":f=g[this.rasterInfo.pixelType]||g.f32;for(y=0;y<n;y++)C[y]=f[0],F[y]=f[1];break;case "minMax":for(y=0;y<n;y++)C[y]=f[y][0],F[y]=f[y][1];break;case "standardDeviation":for(y=0;y<n;y++)C[y]=f[y][2]-c.numberOfStandardDeviations*f[y][3],F[y]=f[y][2]+c.numberOfStandardDeviations*f[y][3],C[y]<f[y][0]&&(C[y]=f[y][0]),F[y]>f[y][1]&&(F[y]=f[y][1]);break;case "histogramEqualization":for(y=0;y<n;y++)C[y]=L[y].min,F[y]=L[y].max;break;case "percentClip":for(y=
0;y<L.length;y++){f=L[y];ka=new Uint32Array(f.size);var e=[...f.counts];20<=e.length&&(e[0]=e[1]=e[2]=e[e.length-1]=e[e.length-2]=0);I=0;n=(f.max-f.min)/f.size;Y=-.5===f.min&&1===n?.5:0;for(E=0;E<f.size;E++)I+=e[E],ka[E]=I;e=(c.minPercent||0)*I/100;for(E=0;E<f.size;E++)if(ka[E]>e){C[y]=f.min+n*(E+Y);break}e=(1-(c.maxPercent||0)/100)*I;for(E=f.size-2;0<=E;E--)if(ka[E]<e){F[y]=f.min+n*(E+2-Y);break}}break;default:for(y=0;y<n;y++)C[y]=f[y][0],F[y]=f[y][1]}let r;"histogramEqualization"===N?(N=L[0].size||
256,c=0,v&&(r=L.map(x=>U.createHistogramEqualizationLUT(x)))):(N=c.max||255,c=c.min||0);return this._getSelectedBandCutoffs({minCutOff:C,maxCutOff:F,outMax:N,outMin:c,histogramLut:r},l)};m._getSelectedBandCutoffs=function(c,f){if(null==f||0===f.length)return c;const l=Math.max.apply(null,f),{minCutOff:v,maxCutOff:y,outMin:C,outMax:F,histogramLut:N}=c;return v.length===f.length||v.length<=l?c:{minCutOff:f.map(L=>v[L]),maxCutOff:f.map(L=>y[L]),histogramLut:N?f.map(L=>N[L]):null,outMin:C,outMax:F}};
m._generateStretchWebGLParams=function(c,f,l){let v=null,y=null;var C=this.lookup&&this.lookup.colormapLut;f.colorRamp&&C&&(v=C.indexedColormap,y=C.offset);"histogramEqualization"===f.stretchType&&(f={...f,stretchType:"minMax"});({gamma:C}=f);const F=!!(f.useGamma&&C&&C.some(e=>1!==e)),{minCutOff:N,maxCutOff:L,outMin:n,outMax:I}=this._getStretchCutoff(f,c,l);var ka=0;T.isSome(c)&&(ka=c.getPlaneCount(),2===ka&&(c=c.clone(),c.statistics=[c.statistics[0]],c.pixels=[c.pixels[0]]));c=Math.min(3,(null==
l?void 0:l.length)||ka||this.rasterInfo.bandCount);l=new Float32Array(c);ka=v||F?1:255;let Y;for(Y=0;Y<c;Y++)l[Y]=(I-n)/(L[Y]-N[Y])/ka;const E=new Float32Array(c);if(F)for(Y=0;Y<c;Y++)E[Y]=1<C[Y]?2<C[Y]?6.5+(C[Y]-2)**2.5:6.5+100*(2-C[Y])**4:1;return{bandCount:c,outMin:n/ka,outMax:I/ka,minCutOff:N,maxCutOff:L,factor:l,useGamma:F,gamma:F?C:[1,1,1],gammaCorrection:F?E:[1,1,1],colormap:v,colormapOffset:y,stretchType:f.stretchType,type:"stretch"}};m._generateShadedReliefWebGLParams=function(c,f,l){var v,
y,C;let F=null,N=null;const L=this.lookup&&this.lookup.colormapLut;c.colorRamp&&L&&(F=L.indexedColormap,N=L.offset);f=z.calculateHillshadeParams({...c,isGCS:f,resolution:l});l=null==(v=T.unwrap(this.rasterInfo.statistics))?void 0:v[0];return{...f,minValue:null!=(y=null==l?void 0:l.min)?y:0,maxValue:null!=(C=null==l?void 0:l.max)?C:8E3,hillshadeType:"traditional"===c.hillshadeType?0:1,type:"hillshade",colormap:F,colormapOffset:N}};m._generateVectorFieldWebGLParams=function(c){var f,l,v,y,C,F,N,L;const {style:n,
inputUnit:I,outputUnit:ka,visualVariables:Y,symbolTileSize:E,flowRepresentation:e}=c;let r;var x=null!=(f=null==(l=this.rasterInfo.statistics)?void 0:l[0].min)?f:0;f=null!=(v=null==(y=this.rasterInfo.statistics)?void 0:y[0].max)?v:50;v=null!=(C=null==Y?void 0:Y.find(B=>"sizeInfo"===B.type))?C:{type:"sizeInfo",field:"Magnitude",maxDataValue:f,maxSize:.8*E,minDataValue:x,minSize:.2*E};C=null!=(F=v.minDataValue)?F:x;x=null!=(N=v.maxDataValue)?N:f;N=T.isSome(v.maxSize)&&T.isSome(v.minSize)?[v.minSize/
E,v.maxSize/E]:[.2,.8];"wind_speed"===n&&(N[0]=N[1]=(N[0]+N[1])/2);F=T.isSome(C)&&T.isSome(x)?[C,x]:null;if("classified_arrow"===n)if(T.isSome(C)&&T.isSome(x)&&T.isSome(v))for(r=[],C=(v.maxDataValue-v.minDataValue)/5,x=0;6>x;x++)r.push(v.minDataValue+C*x);else r=[0,1E-6,3.5,7,10.5,14];v="flow_to"===e===("ocean_current_kn"===n||"ocean_current_m"===n)?0:Math.PI;C=null==Y?void 0:Y.find(B=>"rotationInfo"===B.type);c=(null==(L=this.rasterInfo.storageInfo)?0:L.tileInfo)&&"vector-uv"===this.rasterInfo.dataType?
"geographic":(null==C?void 0:C.rotationType)||c.rotationType;return{breakValues:r,dataRange:F,inputUnit:I,outputUnit:ka,symbolTileSize:E,symbolPercentRange:N,style:n||"single_arrow",rotation:v,rotationType:c,type:"vectorField"}};return p}(W.JSONSupport);t.__decorate([ha.property({json:{write:!0}})],W.prototype,"rendererJSON",void 0);t.__decorate([ha.property({type:S,json:{write:!0}})],W.prototype,"rasterInfo",void 0);t.__decorate([ha.property({json:{write:!0}})],W.prototype,"lookup",void 0);t.__decorate([ha.property()],
W.prototype,"canRenderInWebGL",void 0);return W=t.__decorate([O.subclass("esri.renderers.support.RasterSymbolizer")],W)})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ./RasterStorageInfo".split(" "),
function(Q,t,ca,W,u,T,ha,na,ja,ma,O,S){ca=function(U){function z(A){A=U.call(this,A)||this;A.attributeTable=null;A.bandCount=null;A.colormap=null;A.extent=null;A.format=void 0;A.height=null;A.width=null;A.histograms=null;A.keyProperties={};A.multidimensionalInfo=null;A.noDataValue=null;A.pixelSize=null;A.pixelType=null;A.isPseudoSpatialReference=!1;A.spatialReference=null;A.statistics=null;A.storageInfo=null;A.transform=null;return A}Q._inheritsLoose(z,U);Q._createClass(z,[{key:"dataType",get:function(){var A,
w,b;const h=null!=(A=null==(w=this.keyProperties)?void 0:null==(b=w.DataType)?void 0:b.toLowerCase())?A:"generic";return"stdtime"===h?"standard-time":h}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(A){A&&this._set("nativeExtent",A)}},{key:"nativePixelSize",get:function(){if(!W.isSome(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;const A=this.nativeExtent;return{x:A.width/this.width,y:A.height/this.height}}}]);return z}(ca.JSONSupport);
t.__decorate([u.property({json:{write:!0}})],ca.prototype,"attributeTable",void 0);t.__decorate([u.property({json:{write:!0}})],ca.prototype,"bandCount",void 0);t.__decorate([u.property({json:{write:!0}})],ca.prototype,"colormap",void 0);t.__decorate([u.property({type:String,readOnly:!0})],ca.prototype,"dataType",null);t.__decorate([u.property({type:ma,json:{write:!0}})],ca.prototype,"extent",void 0);t.__decorate([u.property({type:ma,json:{write:!0}})],ca.prototype,"nativeExtent",null);t.__decorate([u.property({json:{write:!0}})],
ca.prototype,"nativePixelSize",null);t.__decorate([u.property({json:{write:!0}})],ca.prototype,"format",void 0);t.__decorate([u.property({json:{write:!0}})],ca.prototype,"height",void 0);t.__decorate([u.property({json:{write:!0}})],ca.prototype,"width",void 0);t.__decorate([u.property({json:{write:!0}})],ca.prototype,"histograms",void 0);t.__decorate([u.property({json:{write:!0}})],ca.prototype,"keyProperties",void 0);t.__decorate([u.property({json:{write:!0}})],ca.prototype,"multidimensionalInfo",
void 0);t.__decorate([u.property()],ca.prototype,"noDataValue",void 0);t.__decorate([u.property({json:{write:!0}})],ca.prototype,"pixelSize",void 0);t.__decorate([u.property({json:{write:!0}})],ca.prototype,"pixelType",void 0);t.__decorate([u.property()],ca.prototype,"isPseudoSpatialReference",void 0);t.__decorate([u.property({type:O,json:{write:!0}})],ca.prototype,"spatialReference",void 0);t.__decorate([u.property({json:{write:!0}})],ca.prototype,"statistics",void 0);t.__decorate([u.property({type:S,
json:{write:!0}})],ca.prototype,"storageInfo",void 0);t.__decorate([u.property({json:{write:!0}})],ca.prototype,"transform",void 0);return ca=t.__decorate([ja.subclass("esri.layers.support.RasterInfo")],ca)})},"esri/layers/support/RasterStorageInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(Q,t,ca,W,u,T,ha,na,ja){ca=function(ma){function O(){var S=ma.apply(this,arguments)||this;S.blockWidth=void 0;S.blockHeight=void 0;S.compression=null;S.origin=null;S.firstPyramidLevel=null;S.maximumPyramidLevel=null;S.pyramidScalingFactor=2;S.pyramidBlockWidth=null;S.pyramidBlockHeight=null;S.isVirtualTileInfo=!1;S.tileInfo=null;S.blockBoundary=null;return S}Q._inheritsLoose(O,ma);return O}(ca.JSONSupport);t.__decorate([W.property({type:Number,json:{write:!0}})],ca.prototype,"blockWidth",
void 0);t.__decorate([W.property({type:Number,json:{write:!0}})],ca.prototype,"blockHeight",void 0);t.__decorate([W.property({type:String,json:{write:!0}})],ca.prototype,"compression",void 0);t.__decorate([W.property({type:ja,json:{write:!0}})],ca.prototype,"origin",void 0);t.__decorate([W.property({type:Number,json:{write:!0}})],ca.prototype,"firstPyramidLevel",void 0);t.__decorate([W.property({type:Number,json:{write:!0}})],ca.prototype,"maximumPyramidLevel",void 0);t.__decorate([W.property({json:{write:!0}})],
ca.prototype,"pyramidResolutions",void 0);t.__decorate([W.property({type:Number,json:{write:!0}})],ca.prototype,"pyramidScalingFactor",void 0);t.__decorate([W.property({type:Number,json:{write:!0}})],ca.prototype,"pyramidBlockWidth",void 0);t.__decorate([W.property({type:Number,json:{write:!0}})],ca.prototype,"pyramidBlockHeight",void 0);t.__decorate([W.property({type:Boolean,json:{write:!0}})],ca.prototype,"isVirtualTileInfo",void 0);t.__decorate([W.property({json:{write:!0}})],ca.prototype,"tileInfo",
void 0);t.__decorate([W.property()],ca.prototype,"blockBoundary",void 0);return ca=t.__decorate([na.subclass("esri.layers.support.RasterStorageInfo")],ca)})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports","../PixelBlock","./pixelUtils"],function(Q,t,ca){function W(u){let {altitude:T,azimuth:ha}=u;const {hillshadeType:na,pixelSizePower:ja,pixelSizeFactor:ma,scalingType:O,isGCS:S,resolution:U}=u;var z="multi-directional"===na?2*u.zFactor:u.zFactor;const {x:A,y:w}=U;
u=z/(8*A);var b=z/(8*w);S&&.001<z&&(u/=111E3,b/=111E3);"adjusted"===O&&(S?(u=111E3*A,b=111E3*w,u=(z+u**ja*ma)/(8*u),b=(z+b**ja*ma)/(8*b)):(u=(z+A**ja*ma)/(8*A),b=(z+w**ja*ma)/(8*w)));var h=(90-T)*Math.PI/180;z=Math.cos(h);let q=(360-ha+90)*Math.PI/180,g=Math.sin(h)*Math.cos(q);h=Math.sin(h)*Math.sin(q);const k=[315,270,225,360,180,0],p=[60,60,60,60,60,90];var m=new Float32Array([3,5,3,2,1,4]);const c=m.reduce((C,F)=>C+F);m=m.map(C=>C/c);const f="multi-directional"===na?k.length:1,l=new Float32Array(6),
v=new Float32Array(6),y=new Float32Array(6);if("multi-directional"===na)for(let C=0;C<f;C++)T=p[C],ha=k[C],h=(90-T)*Math.PI/180,z=Math.cos(h),q=(360-ha+90)*Math.PI/180,g=Math.sin(h)*Math.cos(q),h=Math.sin(h)*Math.sin(q),l[C]=z,v[C]=g,y[C]=h;else l.fill(z),v.fill(g),y.fill(h);return{resolution:U,factor:[u,b],sinZcosA:g,sinZsinA:h,cosZ:z,sinZcosAs:v,sinZsinAs:y,cosZs:l,weights:m,hillshadeType:["traditional","multi-directional"].indexOf(na)}}Q.calculateHillshadeParams=W;Q.hillshade=function(u,T){if(!ca.isValidPixelBlock(u))return u;
const {width:ha,height:na,mask:ja}=u,ma=new Uint8Array(ha*na);ja&&ma.set(ja);const {factor:O,sinZcosA:S,sinZsinA:U,cosZ:z,sinZcosAs:A,sinZsinAs:w,cosZs:b,weights:h}=W(T),[q,g]=O;var {hillshadeType:k}=T;const p=u.pixels[0];T=new Uint8Array(ha*na);let m;for(let N=1;N<na-1;N++){const L=N*ha;for(let n=1;n<ha-1;n++)if(ja&&!ja[L+n])T[L+n]=0;else{var c=8;if(ja&&(c=ja[L-ha+n-1]+ja[L-ha+n]+ja[L-ha+n+1]+ja[L+n-1]+ja[L+n+1]+ja[L+ha+n-1]+ja[L+ha+n]+ja[L+ha+n+1],7>c)){T[L+n]=0;ma[L+n]=0;continue}if(7===c){var f=
ja[L-ha+n-1]?p[L-ha+n-1]:p[L+n];var l=ja[L-ha+n]?p[L-ha+n]:p[L+n];var v=ja[L-ha+n+1]?p[L-ha+n+1]:p[L+n];c=ja[L+n-1]?p[L+n-1]:p[L+n];m=ja[L+n+1]?p[L+n+1]:p[L+n];var y=ja[L+ha+n-1]?p[L+ha+n-1]:p[L+n];var C=ja[L+ha+n]?p[L+ha+n]:p[L+n];var F=ja[L+ha+n+1]?p[L+ha+n+1]:p[L+n]}else f=p[L-ha+n-1],l=p[L-ha+n],v=p[L-ha+n+1],c=p[L+n-1],m=p[L+n+1],y=p[L+ha+n-1],C=p[L+ha+n],F=p[L+ha+n+1];c=(v+m+m+F-(f+c+c+y))*q;f=(y+C+C+F-(f+l+l+v))*g;l=Math.sqrt(1+c*c+f*f);v=0;if("traditional"===k)c=255*(z+U*f-S*c)/l,0>c&&(c=
0),v=c;else for(y=w.length,C=0;C<y;C++)F=255*(b[C]+w[C]*f-A[C]*c)/l,0>F&&(F=0),v+=F*h[C];T[L+n]=v&255}}for(k=0;k<na;k++)T[k*ha]=T[k*ha+1],T[(k+1)*ha-1]=T[(k+1)*ha-2];for(k=1;k<ha-1;k++)T[k]=T[k+ha],T[k+(na-1)*ha]=T[k+(na-2)*ha];return new t({width:ha,height:na,pixels:[T],mask:ja?ma:null,pixelType:"u8",validPixelCount:u.validPixelCount,statistics:[{minValue:0,maxValue:255}]})};Q.tintHillshade=function(u,T,ha,na){if(ca.isValidPixelBlock(u)&&ca.isValidPixelBlock(T)){var {min:ja,max:ma}=na;na=u.pixels[0];
var {pixels:O,mask:S}=T;T=O[0];var U=255.00001/(ma-ja),z=new Uint8ClampedArray(T.length),A=new Uint8ClampedArray(T.length),w=new Uint8ClampedArray(T.length),b=ha.length-1;for(let g=0;g<T.length;g++){if(S&&0===S[g])continue;var h=Math.floor((T[g]-ja)*U);const [k,p]=ha[0>h?0:h>b?b:h];var q=na[g];h=q*p;const m=h*(1-Math.abs(k%2-1));q-=h;switch(Math.floor(k)){case 0:z[g]=h+q;A[g]=m+q;w[g]=q;break;case 1:z[g]=m+q;A[g]=h+q;w[g]=q;break;case 2:z[g]=q;A[g]=h+q;w[g]=m+q;break;case 3:z[g]=q;A[g]=m+q;w[g]=h+
q;break;case 4:z[g]=m+q;A[g]=q;w[g]=h+q;break;case 5:case 6:z[g]=h+q,A[g]=q,w[g]=m+q}}u.pixels=[z,A,w];u.updateStatistics()}};Object.defineProperty(Q,"__esModule",{value:!0})})},"esri/renderers/support/colorRampUtils":function(){define(["exports","../../Color","../../core/colorUtils"],function(Q,t,ca){function W(O,S){if(!O||!S||O.length!==S.length)return!1;for(let U=0;U<O.length;U++)if(O[U]>S[U]+2||O[U]<S[U]-2)return!1;return!0}function u(O,S){if(O){S=S?S:ja;var U=null,z;"algorithmic"===O.type?S.some(A=>
{if(W(O.fromColor.toRgb(),A.fromColor)&&W(O.toColor.toRgb(),A.toColor))return U=A.id,!0}):"multipart"===O.type&&S.some(A=>{if(O.colorRamps&&A.colorRamps&&O.colorRamps.length===A.colorRamps.length&&(z=O.colorRamps,!A.colorRamps.some((w,b)=>{if(!W(z[b].fromColor.toRgb(),(new t(w.fromColor)).toRgb())||!W(z[b].toColor.toRgb(),(new t(w.toColor)).toRgb()))return!0}))){if(U)return!0;U=A.id}});return U}}function T(O){return(O=u(O))?ma[O]:null}function ha(O){if(O){var S=O.toJSON();return{Algorithm:(null==
S?void 0:S.Algorithm)||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:na(O.fromColor),ToColor:na(O.toColor)}}}function na(O){O=ca.toHSV(O);return{type:"HsvColor",Hue:O.h,Saturation:O.s,Value:O.v,AlphaValue:255}}const ja=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,
52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",
fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,
214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",
type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,
171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,
10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,
233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],
toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",
colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,
250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,
12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,
255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,
191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],
toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],
toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,
128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,
245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],ma={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",
brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",
errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",
pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",
purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",
spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};Q.PREDEFINED_COLOR_RAMP_NAME_MAP=
ma;Q.PREDEFINED_JSON_COLOR_RAMPS=ja;Q.convertColorRampToColormap=function(O,S,U=!1){if(O&&S&&!(1>S)){var z="toJSON"in O?O.toJSON():O,A="multipart"===z.type?z.colorRamps.length:1;O=[];var w=[],b,h,q,g=0;if(1===S){var k="multipart"===z.type?z.colorRamps[0].fromColor:z.fromColor;w.push([0].concat(k));return w}for(let m=0;m<A;m++)O[m]={start:null,end:null},O[m].start=g,O[m].end=g+1/A,g=O[m].end;for(let m=0;m<S;m++){var p=m/(S-1);O.forEach((c,f)=>{if(p>=c.start&&(p<c.end||m===S-1&&f===A-1)){q=(p-c.start)/
(c.end-c.start);"multipart"===z.type?(k=z.colorRamps[f].fromColor,b=z.colorRamps[f].toColor):(k=z.fromColor,b=z.toColor);if(0===m)w.push([m].concat(k.slice(0,3)));else if(m===S-1)w.push([m].concat(b.slice(0,3)));else{var l={r:b[0],g:b[1],b:b[2]};c=q;f=ca.toLAB({r:k[0],g:k[1],b:k[2]});l=ca.toLAB(l);h=ca.toRGB({l:f.l*(1-c)+c*l.l,a:f.a*(1-c)+c*l.a,b:f.b*(1-c)+c*l.b});w.push([m,h.r,h.g,h.b])}c=null!=k[3]?1<k[3]?k[3]/255:k[3]:1;f=null!=b[3]?1<b[3]?b[3]/255:b[3]:1;U&&w[m].push(Math.min(255,Math.round(255*
(c*(1-q)+f*q))))}})}return w}};Q.getColorRampId=u;Q.getColorRampName=T;Q.getRFxArgColorRampValue=function(O){const S=T(O);if(O){if("algorithmic"===O.type)return{...ha(O),Name:S};if(O.colorRamps)return O=O.colorRamps.map(ha),{type:"MultiPartColorRamp",NumColorRamps:O.length,ArrayOfColorRamp:O,Name:S}}};Q.rgbaConvertTo32Bit=function(O){O=O.reverse().map(S=>{S=S.toString(16);return 2>S.length?"0"+S:S});return 4294967295&Number.parseInt(O.join(""),16)};Object.defineProperty(Q,"__esModule",{value:!0})})},
"esri/views/2d/engine/flow/dataUtils":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../geometry ../../../../core/Logger ../../../../core/mathUtils ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/RandomLCG ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/Extent".split(" "),function(Q,t,ca,W,u,T,ha,na,ja,ma){function O(){O=t._asyncToGenerator(function*(m,c,f){const l=performance.now();var v=S(m,c);const y=performance.now();
v=z(m,v,c.width,c.height);c=performance.now();var C=w(v,!0);v=performance.now();C=b(C);const F=performance.now();m.profile&&p.info("createStreamlinesMesh profile",{"_createFlowFieldFromData()":Math.round(y-l),"_getStreamlines()":Math.round(c-y),"createAnimatedLinesData()":Math.round(v-c),"createLinesMesh()":Math.round(F-v),"Total elapsed time":Math.round(F-l)});yield Promise.resolve();ha.throwIfAborted(f);return C});return O.apply(this,arguments)}function S(m,c){const f=A(c.data,c.width,c.height,
m.smoothing);return m.interpolate?(l,v)=>{const y=Math.floor(l),C=Math.floor(v);if(0>y||y>=c.width||0>C||C>=c.height)return[0,0];l-=y;v-=C;const F=y<c.width-1?y+1:y,N=C<c.height-1?C+1:C;return[(f[2*(C*c.width+y)]*(1-v)+f[2*(N*c.width+y)]*v)*(1-l)+(f[2*(C*c.width+F)]*(1-v)+f[2*(N*c.width+F)]*v)*l,(f[2*(C*c.width+y)+1]*(1-v)+f[2*(N*c.width+y)+1]*v)*(1-l)+(f[2*(C*c.width+F)+1]*(1-v)+f[2*(N*c.width+F)+1]*v)*l]}:(l,v)=>{l=Math.round(l);v=Math.round(v);return 0>l||l>=c.width||0>v||v>=c.height?[0,0]:[f[2*
(v*c.width+l)],f[2*(v*c.width+l)+1]]}}function U(m,c,f,l,v,y,C,F,N){const L=[];let n=0,[I,ka]=c(f,l);I*=m.velocityScale;ka*=m.velocityScale;L.push({x:f,y:l,t:n,speed:Math.sqrt(I*I+ka*ka)});for(let e=0;e<m.verticesPerLine;e++){let [r,x]=c(f,l);r*=m.velocityScale;x*=m.velocityScale;const B=Math.sqrt(r*r+x*x);if(B<m.minSpeedThreshold)break;const J=r/B,M=x/B;f+=J*m.segmentLength;l+=M*m.segmentLength;n+=m.segmentLength/B;if(Math.acos(J*Y+M*E)>m.maxTurnAngle)break;if(m.mergeLines){var Y=Math.round(f*N);
var E=Math.round(l*N);if(0>Y||Y>C-1||0>E||E>F-1)break;const R=y[E*C+Y];if(-1!==R&&R!==v)break;y[E*C+Y]=v}L.push({x:f,y:l,t:n,speed:B});Y=J;E=M}return L}function z(m,c,f,l){const v=[],y=new na,C=1/Math.max(m.lineCollisionWidth,1),F=Math.round(f*C),N=Math.round(l*C),L=new Int32Array(F*N);for(var n=0;n<L.length;n++)L[n]=-1;n=[];for(let I=0;I<l;I+=m.lineSpacing)for(let ka=0;ka<f;ka+=m.lineSpacing)n.push({x:ka,y:I,sort:y.getFloat()});n.sort((I,ka)=>I.sort-ka.sort);for(const {x:I,y:ka}of n)y.getFloat()<
m.density&&(f=U(m,c,I,ka,v.length,L,F,N,C),2>f.length||v.push(f));return v}function A(m,c,f,l){if(0===l)return m;const v=Math.round(3*l),y=Array(2*v+1);var C=0;for(var F=-v;F<=v;F++){var N=Math.exp(-F*F/(l*l));y[F+v]=N;C+=N}for(l=-v;l<=v;l++)y[l+v]/=C;C=new Float32Array(m.length);for(l=0;l<f;l++)for(F=0;F<c;F++){var L=N=0;for(var n=-v;n<=v;n++)if(!(0>F+n||F+n>=c)){var I=y[n+v];N+=I*m[2*(l*c+(F+n))];L+=I*m[2*(l*c+(F+n))+1]}C[2*(l*c+F)]=N;C[2*(l*c+F)+1]=L}m=new Float32Array(m.length);for(l=0;l<c;l++)for(F=
0;F<f;F++){L=N=0;for(n=-v;n<=v;n++)0>F+n||F+n>=f||(I=y[n+v],N+=I*C[2*((F+n)*c+l)],L+=I*C[2*((F+n)*c+l)+1]);m[2*(F*c+l)]=N;m[2*(F*c+l)+1]=L}return m}function w(m,c){const f=new na;var l=m.reduce((F,N)=>F+N.length,0);l=new Float32Array(4*l);const v=Array(m.length);let y=0,C=0;for(const F of m){m=y;for(const N of F)l[4*y]=N.x,l[4*y+1]=N.y,l[4*y+2]=N.t,l[4*y+3]=N.speed,y++;v[C++]={startVertex:m,numberOfVertices:F.length,totalTime:F[F.length-1].t,timeSeed:c?f.getFloat():0}}return{lineVertices:l,lineDescriptors:v}}
function b(m,c=10){function f(Y,E,e,r,x,B,J,M){const R=9*N;let P=0;F[R+P++]=Y;F[R+P++]=E;F[R+P++]=1;F[R+P++]=e;F[R+P++]=B;F[R+P++]=J;F[R+P++]=r/2;F[R+P++]=x/2;F[R+P++]=M;N++;F[R+P++]=Y;F[R+P++]=E;F[R+P++]=-1;F[R+P++]=e;F[R+P++]=B;F[R+P++]=J;F[R+P++]=-r/2;F[R+P++]=-x/2;F[R+P++]=M;N++}const {lineVertices:l,lineDescriptors:v}=m;var y=m=0;for(var C of v)m+=2*C.numberOfVertices,y+=6*(C.numberOfVertices-1);const F=new Float32Array(9*m);C=new Uint32Array(y);let N=0;m=0;for(const Y of v){const {totalTime:E,
timeSeed:e}=Y;let r=y=null,x=null;var L=null,n=null,I=null;for(let B=0;B<Y.numberOfVertices;B++){L=l[4*(Y.startVertex+B)];const J=l[4*(Y.startVertex+B)+1],M=l[4*(Y.startVertex+B)+2],R=l[4*(Y.startVertex+B)+3];let P=null,X=null;var ka=null;let Z=null;0<B&&(P=L-y,X=J-r,ka=Math.sqrt(P*P+X*X),P/=ka,X/=ka,1<B?(n=P+n,I=X+I,ka=Math.sqrt(n*n+I*I),n/=ka,I/=ka,ka=Math.min(1/(n*P+I*X),c),n*=ka,I*=ka,ka=-I,Z=n):(ka=-X,Z=P),null!==ka&&null!==Z&&(f(y,r,x,ka,Z,E,e,R),C[m++]=N-2,C[m++]=N,C[m++]=N-1,C[m++]=N,C[m++]=
N+1,C[m++]=N-1));y=L;r=J;x=M;n=P;I=X;L=R}f(y,r,x,-I,n,E,e,L)}return{vertexData:F,indexData:C}}function h(m,c){const f=c.pixels,{width:l,height:v}=c;c=new Float32Array(l*v*2);if("vector-uv"===m)for(m=0;m<l*v;m++)c[2*m]=f[0][m],c[2*m+1]=-f[1][m];else if("vector-magdir"===m)for(m=0;m<l*v;m++){const y=f[0][m],C=u.deg2rad(f[1][m]),F=Math.sin(C-Math.PI/2);c[2*m]=Math.cos(C-Math.PI/2)*y;c[2*m+1]=F*y}return{data:c,width:l,height:v}}function q(){q=t._asyncToGenerator(function*(m,c,f,l,v,y){var C=ja.getInfo(c.spatialReference);
if(!C)return g(m,c,f,l,v,y);const [F,N]=C.valid;C=Math.ceil(c.width/(N-F));const L=c.width/C,n=Math.round(f/C);let I=c.xmin;const ka=[];for(let Y=0;Y<C;Y++){const E=new ma({xmin:I,xmax:I+L,ymin:c.ymin,ymax:c.ymax,spatialReference:c.spatialReference});ka.push(g(m,E,n,l,v,y));I+=L}c=yield Promise.all(ka);l={data:new Float32Array(f*l*2),width:f,height:l};m=0;for(const Y of c){for(c=0;c<Y.height;c++)for(v=0;v<Y.width;v++)m+v>=f||(l.data[2*(c*f+m+v)]=Y.data[2*(c*Y.width+v)],l.data[2*(c*f+m+v)+1]=Y.data[2*
(c*Y.width+v)+1]);m+=Y.width}return l});return q.apply(this,arguments)}function g(m,c,f,l,v,y){return k.apply(this,arguments)}function k(){k=t._asyncToGenerator(function*(m,c,f,l,v,y){const C={requestProjectedLocalDirections:!0,signal:y};T.isSome(v)&&(C.timeExtent=v);if("imagery"===m.type)return yield m.load({signal:y}),v=m.rasterInfo.dataType,m=yield m.fetchImage(c,f,l,C),!m||T.isNone(m.pixelData)||T.isNone(m.pixelData.pixelBlock)?{data:new Float32Array(f*l*2),width:f,height:l}:h(v,m.pixelData.pixelBlock);
yield m.load({signal:y});v=m.rasterInfo.dataType;m=yield m.fetchPixels(c,f,l,C);return!m||T.isNone(m.pixelBlock)?{data:new Float32Array(f*l*2),width:f,height:l}:h(v,m.pixelBlock)});return k.apply(this,arguments)}const p=W.getLogger("esri.views.2d.engine.flow.dataUtils");Q.createAnimatedLinesData=w;Q.createLinesMesh=b;Q.createStreamlinesMesh=function(m,c,f){return O.apply(this,arguments)};Q.fetchPart=g;Q.loadImagery=function(m,c,f,l,v,y){return q.apply(this,arguments)};Object.defineProperty(Q,"__esModule",
{value:!0})})},"*noref":1}});
define("../../chunks/_rollupPluginBabelHelpers ../../geometry ../../core/maybe ../../geometry/support/GeographicTransformation ./PixelBlock ./rasterFormats/RasterCodec ./rasterFunctions/pixelUtils ./rasterFunctions/rasterProjectionHelper ./rasterFunctions/vectorFieldUtils ./rasterTransforms/utils ../../renderers/support/RasterSymbolizer ../../views/2d/engine/flow/dataUtils ../../geometry/Extent".split(" "),function(Q,t,ca,W,u,T,ha,na,ja,ma,O,S,U){return function(){function z(){}var A=z.prototype;
A.convertVectorFieldData=function(w){const b=u.fromJSON(w.pixelBlock);w=ja.convertVectorFieldData(b,w.type);return Promise.resolve(ca.isSome(w)&&w.toJSON())};A.decode=function(){var w=Q._asyncToGenerator(function*(b){return(b=yield T.decode(b.data,b.options))&&b.toJSON()});return function(b){return w.apply(this,arguments)}}();A.symbolize=function(w){w.pixelBlock=u.fromJSON(w.pixelBlock);w.extent=w.extent?U.fromJSON(w.extent):null;w=this.symbolizer.symbolize(w);return Promise.resolve(ca.isSome(w)&&
w.toJSON())};A.updateSymbolizer=function(){var w=Q._asyncToGenerator(function*(b){var h;this.symbolizer=O.fromJSON(b.symbolizerJSON);b.histograms&&"rasterStretch"===(null==(h=this.symbolizer)?void 0:h.rendererJSON.type)&&(this.symbolizer.rendererJSON.histograms=b.histograms)});return function(b){return w.apply(this,arguments)}}();A.stretch=function(w){w=this.symbolizer.simpleStretch(u.fromJSON(w.srcPixelBlock),w.stretchParams);return Promise.resolve(ca.isSome(w)&&w.toJSON())};A.estimateStatisticsHistograms=
function(w){w=ha.estimateStatisticsHistograms(u.fromJSON(w.srcPixelBlock));return Promise.resolve(w)};A.split=function(w){const b=ha.split(u.fromJSON(w.srcPixelBlock),w.tileSize,w.maximumPyramidLevel);b&&b.forEach((h,q)=>{b.set(q,null==h?void 0:h.toJSON())});return Promise.resolve(b)};A.mosaicAndTransform=function(){var w=Q._asyncToGenerator(function*(b){var h,q=b.srcPixelBlocks.map(p=>p?new u(p):null);let g=q=ha.mosaic(q,b.srcMosaicSize,{blockWidths:b.blockWidths,alignmentInfo:b.alignmentInfo,clipOffset:b.clipOffset,
clipSize:b.clipSize});b.coefs&&(g=ha.approximateTransform(q,b.destDimension,b.coefs,b.sampleSpacing,b.interpolation));let k;b.projectDirections&&b.gcsGrid&&(k=ha.getLocalArithmeticNorthRotations(b.destDimension,b.gcsGrid),g=ca.unwrap(ja.convertToLocalDirections(g,b.isUV?"vector-uv":"vector-magdir",k)));return{pixelBlock:null==(h=g)?void 0:h.toJSON(),localNorthDirections:k}});return function(b){return w.apply(this,arguments)}}();A.createStreamlinesMesh=function(){var w=Q._asyncToGenerator(function*(b,
h){const q={data:new Float32Array(b.flowData.buffer),width:b.flowData.width,height:b.flowData.height},{vertexData:g,indexData:k}=yield S.createStreamlinesMesh(b.rendererSettings,q,h.signal);return{result:{vertexBuffer:g.buffer,indexBuffer:k.buffer},transferList:[g.buffer,k.buffer]}});return function(b,h){return w.apply(this,arguments)}}();A.getProjectionOffsetGrid=function(){var w=Q._asyncToGenerator(function*(b){const h=U.fromJSON(b.projectedExtent),q=U.fromJSON(b.srcBufferExtent);let g=null;b.datumTransformationSteps&&
(g=new W({steps:b.datumTransformationSteps}));if(b.includeGCSGrid||na.requirePE(h.spatialReference,q.spatialReference,g))yield na.load();const k=b.rasterTransform?ma.readTransform(b.rasterTransform):null;return na.getProjectionOffsetGrid({...b,projectedExtent:h,srcBufferExtent:q,datumTransformation:g,rasterTransform:k})});return function(b){return w.apply(this,arguments)}}();return z}()});