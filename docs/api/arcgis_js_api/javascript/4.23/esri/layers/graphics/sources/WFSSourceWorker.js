// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(k,e,W,U,p,D,x,q){function r(g,y){return g?y?4:3:y?3:2}function t(g,y,S,V){if(g){if(S)return y&&V?a:Pa;if(y&&V)return va}else if(y&&V)return Pa;return Ra}function A({scale:g,translate:y},S){return Math.round((S-y[0])/g[0])}function P({scale:g,translate:y},
S){return Math.round((y[1]-S)/g[1])}function O({scale:g,translate:y},S){return S*g[0]+y[0]}function m({scale:g,translate:y},S){return y[1]-S*g[1]}function I(g){g=g.coords;return{x:g[0],y:g[1]}}function d(g,y){g.coords[0]=y.x;g.coords[1]=y.y;return g}function l(g){g=g.coords;return{x:g[0],y:g[1],z:g[2]}}function K(g,y){g.coords[0]=y.x;g.coords[1]=y.y;g.coords[2]=y.z;return g}function G(g){g=g.coords;return{x:g[0],y:g[1],m:g[2]}}function u(g,y){g.coords[0]=y.x;g.coords[1]=y.y;g.coords[2]=y.m;return g}
function B(g){g=g.coords;return{x:g[0],y:g[1],z:g[2],m:g[3]}}function C(g,y){g.coords[0]=y.x;g.coords[1]=y.y;g.coords[2]=y.z;g.coords[3]=y.m;return g}function z(g,y){return g&&y?C:g?K:y?u:d}function M(g,y,S,V,fa){S=z(S,V);for(const ha of y){const {geometry:L,attributes:R}=ha;let ea;L&&(ea=S(new q,L));g.push(new D.OptimizedFeature(ea,R,null,R[fa]))}return g}function N(g,y,S,V){for(const fa of y){const {geometry:ha,attributes:L}=fa;let R;ha&&(R=da(ha,S,V));g.push({attributes:L,geometry:R})}return g}
function da(g,y,S){if(U.isNone(g))return null;const V=r(y,S),fa=[];for(let ha=0;ha<g.coords.length;ha+=V){const L=[];for(let R=0;R<V;R++)L.push(g.coords[ha+R]);fa.push(L)}return y?S?{points:fa,hasZ:y,hasM:S}:{points:fa,hasZ:y}:S?{points:fa,hasM:S}:{points:fa}}function F(g,y,S,V,fa){S=r(S,V);for(const ha of y){y=ha.geometry;V=ha.attributes;let L;y&&(L=H(new q,y,S));g.push(new D.OptimizedFeature(L,V,null,V[fa]))}return g}function H(g,y,S=r(y.hasZ,y.hasM)){g.lengths[0]=y.points.length;const V=g.coords;
let fa=0;for(const ha of y.points)for(y=0;y<S;y++)V[fa++]=ha[y];return g}function T(g,y,S){if(!g)return null;const V=r(y,S),{coords:fa,lengths:ha}=g;g=[];let L=0;for(const R of ha){const ea=[];for(let qa=0;qa<R;qa++){const ra=[];for(let xa=0;xa<V;xa++)ra.push(fa[L++]);ea.push(ra)}g.push(ea)}return y?S?{paths:g,hasZ:y,hasM:S}:{paths:g,hasZ:y}:S?{paths:g,hasM:S}:{paths:g}}function ba(g,y,S,V,fa){S=r(S,V);for(const ha of y){y=ha.geometry;V=ha.attributes;let L;y&&(L=J(new q,y,S));g.push(new D.OptimizedFeature(L,
V,null,V[fa]))}return g}function J(g,y,S=r(y.hasZ,y.hasM)){const {lengths:V,coords:fa}=g;let ha=0;for(const L of y.paths){for(const R of L)for(y=0;y<S;y++)fa[ha++]=R[y];V.push(L.length)}return g}function w(g,y,S){if(!g)return null;const V=r(y,S),{coords:fa,lengths:ha}=g;g=[];let L=0;for(const R of ha){const ea=[];for(let qa=0;qa<R;qa++){const ra=[];for(let xa=0;xa<V;xa++)ra.push(fa[L++]);ea.push(ra)}g.push(ea)}return y?S?{rings:g,hasZ:y,hasM:S}:{rings:g,hasZ:y}:S?{rings:g,hasM:S}:{rings:g}}function c(g,
y,S,V,fa){for(const ha of y){y=ha.geometry;const L=ha.centroid,R=ha.attributes;let ea;y&&(ea=n(new q,y,S,V));U.isSome(L)?g.push(new D.OptimizedFeature(ea,R,d(new q,L),R[fa])):g.push(new D.OptimizedFeature(ea,R,null,R[fa]))}return g}function n(g,y,S=y.hasZ,V=y.hasM){Q(g,y.rings,S,V);return g}function Q(g,y,S,V){S=r(S,V);const {lengths:fa,coords:ha}=g;V=0;fa.length=ha.length=0;for(const L of y){for(const R of L)for(y=0;y<S;y++)ha[V++]=R[y];fa.push(L.length)}return g}function Z(g,y,S,V,fa,ha){g.length=
0;if(!S){for(const L of y)g.push(new D.OptimizedFeature(null,L.attributes,null,L.attributes[ha]));return g}switch(S){case "esriGeometryPoint":return M(g,y,V,fa,ha);case "esriGeometryMultipoint":return F(g,y,V,fa,ha);case "esriGeometryPolyline":return ba(g,y,V,fa,ha);case "esriGeometryPolygon":return c(g,y,V,fa,ha);default:Ca.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${S}'`)),g.length=0}return g}function ja(g,y,S,V){g=g&&("coords"in g?g:g.geometry);
if(U.isNone(g))return null;switch(y){case "esriGeometryPoint":return y=I,S&&V?y=B:S?y=l:V&&(y=G),y(g);case "esriGeometryMultipoint":return da(g,S,V);case "esriGeometryPolyline":return T(g,S,V);case "esriGeometryPolygon":return w(g,S,V);default:Ca.error("convertToGeometry:unknown-geometry",new e(`Unable to parse unknown geometry type '${y}'`))}}function oa(g,y,S,V,fa){g.length=0;if(U.isNone(S)){for(const R of y)g.push({attributes:R.attributes});return g}switch(S){case "esriGeometryPoint":var ha=I;
V&&fa?ha=B:V?ha=l:fa&&(ha=G);for(var L of y){const {geometry:R,attributes:ea}=L;V=U.isSome(R)?ha(R):null;g.push({attributes:ea,geometry:V})}break;case "esriGeometryMultipoint":return N(g,y,V,fa);case "esriGeometryPolyline":for(const R of y){const {geometry:ea,attributes:qa}=R;let ra;U.isSome(ea)&&(ra=T(ea,V,fa));g.push({attributes:qa,geometry:ra})}break;case "esriGeometryPolygon":for(ha of y){const {geometry:R,attributes:ea,centroid:qa}=ha;let ra;U.isSome(R)&&(ra=w(R,V,fa));U.isSome(qa)?(L=I(qa),
g.push({attributes:ea,centroid:L,geometry:ra})):g.push({attributes:ea,geometry:ra})}break;default:Ca.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${S}'`))}return g}function ma(g,y,S,V,fa,ha,L=S,R=V){g.lengths.length&&(g.lengths.length=0);g.coords.length&&(g.coords.length=0);if(U.isNone(y)||!y.coords.length)return null;fa=Ka[fa];const {coords:ea,lengths:qa}=y;y=r(S,V);const ra=r(S&&L,V&&R);S=t(S,V,L,R);if(!qa.length)return S(g.coords,ea,0,0,A(ha,ea[0]),
P(ha,ea[1])),g.lengths.length&&(g.lengths.length=0),g.coords.length=y,g;let xa,za=0,Ba,Ia=0;for(const Ha of qa){if(Ha<fa)continue;let Fa=0;Ba=Ia;R=V=A(ha,ea[za]);xa=L=P(ha,ea[za+1]);S(g.coords,ea,Ba,za,R,xa);Fa++;za+=y;Ba+=ra;for(let Ea=1;Ea<Ha;Ea++,za+=y)if(R=A(ha,ea[za]),xa=P(ha,ea[za+1]),R!==V||xa!==L)S(g.coords,ea,Ba,za,R-V,xa-L),Ba+=ra,Fa++,V=R,L=xa;Fa>=fa&&(g.lengths.push(Fa),Ia=Ba)}g.coords.length=Ia;return g.coords.length?g:null}function la(g,y,S,V,fa,ha,L){let R=V,ea=0;for(let ra=ha+S;ra<
L;ra+=S){{var qa=y[ra];const xa=y[ra+1],za=y[L],Ba=y[L+1];let Ia=y[ha],Ha=y[ha+1],Fa=za-Ia,Ea=Ba-Ha;if(0!==Fa||0!==Ea){const Ga=((qa-Ia)*Fa+(xa-Ha)*Ea)/(Fa*Fa+Ea*Ea);1<Ga?(Ia=za,Ha=Ba):0<Ga&&(Ia+=Fa*Ga,Ha+=Ea*Ga)}Fa=qa-Ia;Ea=xa-Ha;qa=Fa*Fa+Ea*Ea}qa>R&&(ea=ra,R=qa)}R>V&&(ea-ha>S&&la(g,y,S,V,fa,ha,ea),fa(g,y,g.length,ea,y[ea],y[ea+1]),L-ea>S&&la(g,y,S,V,fa,ea,L))}function pa(g,y,S,V,fa){const {coords:ha,lengths:L}=y,R=S?V?a:Pa:V?Pa:Ra;S=r(S,V);if(!ha.length)return g!==y&&(g.lengths.length=0,g.coords.length=
0),g;if(!L.length)return R(g.coords,ha,0,0,O(fa,ha[0]),m(fa,ha[1])),g!==y&&(g.lengths.length=0,g.coords.length=S),g;const [ea,qa]=fa.scale;V=0;for(let ra=0;ra<L.length;ra++){const xa=L[ra];g.lengths[ra]=xa;let za=O(fa,ha[V]),Ba=m(fa,ha[V+1]);R(g.coords,ha,V,V,za,Ba);V+=S;for(let Ia=1;Ia<xa;Ia++,V+=S)za+=ha[V]*ea,Ba-=ha[V+1]*qa,R(g.coords,ha,V,V,za,Ba)}g!==y&&(g.lengths.length=L.length,g.coords.length=ha.length);return g}function wa(g,y,S,V){let fa=0,ha=g[V*y],L=g[V*(y+1)];for(let R=1;R<S;R++){const ea=
ha+g[V*(y+R)],qa=L+g[V*(y+R)+1],ra=(ea-ha)*(qa+L);ha=ea;L=qa;fa+=ra}return.5*fa}const Ca=W.getLogger("esri.layers.graphics.featureConversionUtils"),Ka={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Ra=(g,y,S,V,fa,ha)=>{g[S]=fa;g[S+1]=ha},Pa=(g,y,S,V,fa,ha)=>{g[S]=fa;g[S+1]=ha;g[S+2]=y[V+2]},va=(g,y,S,V,fa,ha)=>{g[S]=fa;g[S+1]=ha;g[S+2]=y[V+3]},a=(g,y,S,V,fa,ha)=>{g[S]=fa;g[S+1]=ha;g[S+2]=y[V+2];g[S+3]=y[V+3]},h=[],Y=[];k.convertFromFeature=function(g,y,
S,V,fa){h[0]=g;[g]=Z(Y,h,y,S,V,fa);h.length=Y.length=0;return g};k.convertFromFeatureSet=function(g,y){const S=new x,{hasM:V,hasZ:fa,features:ha,objectIdFieldName:L,spatialReference:R,geometryType:ea,exceededTransferLimit:qa,transform:ra,fields:xa}=g;xa&&(S.fields=xa);S.geometryType=ea;S.objectIdFieldName=L||y;S.spatialReference=R;if(!S.objectIdFieldName)return Ca.error(new e("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),S;ha&&Z(S.features,ha,ea,fa,V,S.objectIdFieldName);
qa&&(S.exceededTransferLimit=qa);V&&(S.hasM=V);fa&&(S.hasZ=fa);ra&&(S.transform=ra);return S};k.convertFromFeatures=Z;k.convertFromGeometry=function(g,y,S){if(U.isNone(g))return null;const V=new q;"hasZ"in g&&null==y&&(y=g.hasZ);"hasM"in g&&null==S&&(S=g.hasM);if(p.isPoint(g))return z(null!=y?y:null!=g.z,null!=S?S:null!=g.m)(V,g);if(p.isPolygon(g))return n(V,g,y,S);if(p.isPolyline(g))return J(V,g,r(y,S));if(p.isMultipoint(g))return H(V,g,r(y,S));Ca.error("convertFromGeometry:unknown-geometry",new e(`Unable to parse unknown geometry type '${g}'`))};
k.convertFromGraphics=function(g,y,S,V,fa,ha){const L=g.length;switch(S){case "esriGeometryPoint":M(g,y,V,fa,ha);break;case "esriGeometryMultipoint":F(g,y,V,fa,ha);break;case "esriGeometryPolyline":ba(g,y,V,fa,ha);break;case "esriGeometryPolygon":c(g,y,V,fa,ha);break;default:Ca.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${S}'`))}for(V=0;V<y.length;V++)g[V+L].geometryType=S,g[V+L].insertAfter=y[V].insertAfter,g[V+L].groupId=y[V].groupId;return g};k.convertFromMultipoint=
H;k.convertFromMultipointFeatures=F;k.convertFromNestedArray=Q;k.convertFromPoint=function(g,y,S=z(null!=y.z,null!=y.m)){return S(g,y)};k.convertFromPointFeatures=M;k.convertFromPolygon=n;k.convertFromPolyline=J;k.convertFromPolylineFeatures=ba;k.convertToFeature=function(g,y,S,V){Y[0]=g;oa(h,Y,y,S,V);g=h[0];h.length=Y.length=0;return g};k.convertToFeatureSet=function(g){const {objectIdFieldName:y,spatialReference:S,transform:V,fields:fa,hasM:ha,hasZ:L,features:R,geometryType:ea,exceededTransferLimit:qa,
uniqueIdField:ra,queryGeometry:xa,queryGeometryType:za}=g;g=oa([],R,ea,L,ha);const Ba=ja(xa,za,!1,!1);g={features:g,fields:fa,geometryType:ea,objectIdFieldName:y,spatialReference:S,uniqueIdField:ra,queryGeometry:Ba};V&&(g.transform=V);qa&&(g.exceededTransferLimit=qa);ha&&(g.hasM=ha);L&&(g.hasZ=L);return g};k.convertToFeatures=oa;k.convertToGeometry=ja;k.convertToMultipoint=da;k.convertToMultipointFeatures=N;k.convertToPoint=function(g,y,S){return g?y?S?B(g):l(g):S?G(g):I(g):null};k.convertToPolygon=
w;k.convertToPolyline=T;k.deltaDecodeGeometry=function(g,y){if(U.isNone(g))return null;const S=g.clone(),V=g.coords;g=g.lengths;let fa=0;for(let R=0;R<g.length;R++){const ea=g[R];var ha=V[y*fa],L=V[y*fa+1];for(let qa=1;qa<ea;qa++)ha+=V[y*(fa+qa)],L+=V[y*(fa+qa)+1],S.coords[y*(fa+qa)]=ha,S.coords[y*(fa+qa)+1]=L;fa+=ea}return S};k.deltaEncodeGeometry=function(g,y){const S=g.clone(),V=g.coords;g=g.lengths;let fa=0;for(let L=0;L<g.length;L++){const R=g[L];let ea=V[y*fa];var ha=V[y*fa+1];for(let qa=1;qa<
R;qa++){const ra=V[y*(fa+qa)],xa=V[y*(fa+qa)+1];ha=xa-ha;S.coords[y*(fa+qa)]=ra-ea;S.coords[y*(fa+qa)+1]=ha;ea=ra;ha=xa}fa+=R}return S};k.generalizeOptimizedGeometry=function(g,y,S,V,fa,ha,L=S,R=V){g.lengths.length&&(g.lengths.length=0);g.coords.length&&(g.coords.length=0);if(!y||!y.coords.length)return null;fa=Ka[fa];const {coords:ea,lengths:qa}=y;y=r(S,V);const ra=r(S&&L,V&&R);S=t(S,V,L,R);if(!qa.length)return S(g.coords,ea,0,0,ea[0],ea[1]),g.lengths.length&&(g.lengths.length=0),g.coords.length=
y,g;V=0;ha*=ha;for(const xa of qa){if(xa<fa){V+=xa*y;continue}L=g.coords.length/ra;R=V;const za=V+(xa-1)*y;S(g.coords,ea,g.coords.length,R,ea[R],ea[R+1]);la(g.coords,ea,y,ha,S,R,za);S(g.coords,ea,g.coords.length,za,ea[za],ea[za+1]);R=g.coords.length/ra-L;R>=fa?g.lengths.push(R):g.coords.length=L*ra;V+=xa*y}return g.coords.length?g:null};k.getBoundsOptimizedGeometry=function(g,y,S,V){if(U.isNone(y)||!y.coords||!y.coords.length)return null;S=r(S,V);let fa=V=Number.POSITIVE_INFINITY,ha=Number.NEGATIVE_INFINITY,
L=Number.NEGATIVE_INFINITY;if(y&&y.coords){y=y.coords;for(let R=0;R<y.length;R+=S){const ea=y[R],qa=y[R+1];V=Math.min(V,ea);ha=Math.max(ha,ea);fa=Math.min(fa,qa);L=Math.max(L,qa)}}g[0]=V;g[1]=fa;g[2]=ha;g[3]=L;return g};k.getQuantizedArea=function(g,y){const {coords:S,lengths:V}=g;let fa=g=0;for(let ha=0;ha<V.length;ha++)fa+=wa(S,g,V[ha],y),g+=ha;return Math.abs(fa)};k.getQuantizedBoundsOptimizedGeometry=function(g,y,S,V){S=r(S,V);const {lengths:fa,coords:ha}=y;V=y=Number.POSITIVE_INFINITY;let L=
Number.NEGATIVE_INFINITY,R=Number.NEGATIVE_INFINITY,ea=0;for(const qa of fa){let ra=ha[ea],xa=ha[ea+1];y=Math.min(ra,y);V=Math.min(xa,V);L=Math.max(ra,L);R=Math.max(xa,R);ea+=S;for(let za=1;za<qa;za++,ea+=S){const Ba=ha[ea],Ia=ha[ea+1];ra+=Ba;xa+=Ia;0>Ba&&(y=Math.min(y,ra));0<Ba&&(L=Math.max(L,ra));0>Ia?V=Math.min(V,xa):0<Ia&&(R=Math.max(R,xa))}}g[0]=y;g[1]=V;g[2]=L;g[3]=R;return g};k.getSignedQuantizedRingArea=wa;k.quantizeOptimizedFeatureSet=function(g,y){const {geometryType:S,features:V,hasM:fa,
hasZ:ha}=y;if(!g)return y;for(let L=0;L<V.length;L++){const R=V[L],ea=R.weakClone();ea.geometry=new q;ma(ea.geometry,R.geometry,fa,ha,S,g);R.centroid&&(ea.centroid=new q,ma(ea.centroid,R.centroid,fa,ha,"esriGeometryPoint",g));V[L]=ea}y.transform=g;return y};k.quantizeOptimizedGeometry=ma;k.quantizeX=A;k.quantizeY=P;k.removeCollinearVectices=function(g,y,S,V,fa){if(!y||!y.coords||!y.coords.length)return null;S=Ka[S];const {coords:ha,lengths:L}=y;y=t(V,fa,V,fa);V=r(V,fa);let R=fa=0,ea=0,qa=0;for(const za of L){R=
qa;y(g.coords,ha,R,fa,ha[fa],ha[fa+1]);fa+=V;var ra=ha[fa];let Ba=ha[fa+1],Ia=ra,Ha=Ba;var xa=Ba/ra;R+=V;y(g.coords,ha,R,fa,Ia,Ha);fa+=V;for(let Fa=2;Fa<za;Fa++){ra=ha[fa];Ba=ha[fa+1];const Ea=Ba/ra,Ga=xa===Ea||!isFinite(xa)&&!isFinite(Ea);xa=Ga&&isFinite(Ea)?0<=xa&&0<=Ea||0>=xa&&0>=Ea:0<=Ha&&0<=Ba||0>=Ha&&0>=Ba;Ga&&xa?(Ia+=ra,Ha+=Ba):(Ia=ra,Ha=Ba,R+=V);y(g.coords,ha,R,fa,Ia,Ha);fa+=V;xa=Ea}R+=V;ra=(R-qa)/V;ra>=S&&(g.lengths[ea]=ra,qa=R,ea++)}g.coords.length>qa&&(g.coords.length=qa);g.lengths.length>
ea&&(g.lengths.length=ea);return g.coords.length&&g.lengths.length?g:null};k.removeZMValues=function(g,y,S,V,fa,ha){const L=r(S,V);S=t(S,V,fa,ha);V=y.coords;g.coords.length=0;g.lengths.length=0;g.lengths.push(...y.lengths);for(y=0;y<V.length;y+=L)S(g.coords,V,g.coords.length,y,V[y],V[y+1]);return g};k.unquantizeOptimizedFeatureSet=function(g){const {transform:y,features:S,hasM:V,hasZ:fa}=g;if(!y)return g;for(const ha of S)U.isSome(ha.geometry)&&pa(ha.geometry,ha.geometry,V,fa,y),U.isSome(ha.centroid)&&
pa(ha.centroid,ha.centroid,V,fa,y);g.transform=null;return g};k.unquantizeOptimizedGeometry=pa;k.unquantizeX=O;k.unquantizeY=m;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(k,e,W){let U=function(){function D(x=null,q={},r,t){this.geometry=x;this.attributes=q;this.centroid=r;this.objectId=t;this.geohashY=this.geohashX=this.displayId=0}D.prototype.weakClone=
function(){const x=new D(this.geometry,this.attributes,this.centroid,this.objectId);x.displayId=this.displayId;x.geohashX=this.geohashX;x.geohashY=this.geohashY;return x};return D}(),p=function(D){function x(){return D.apply(this,arguments)||this}e._inheritsLoose(x,D);return x}(U);k.OptimizedFeature=U;k.OptimizedFeatureWithGeometry=p;k.hasGeometry=function(D){return!(W.isNone(D.geometry)||!D.geometry.coords||!D.geometry.coords.length)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function k(){this.spatialReference=
this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}k.prototype.weakClone=function(){const e=new k;e.objectIdFieldName=this.objectIdFieldName;e.globalIdFieldName=this.globalIdFieldName;e.geohashFieldName=this.geohashFieldName;e.geometryProperties=this.geometryProperties;
e.geometryType=this.geometryType;e.spatialReference=this.spatialReference;e.hasZ=this.hasZ;e.hasM=this.hasM;e.features=this.features;e.fields=this.fields;e.transform=this.transform;e.exceededTransferLimit=this.exceededTransferLimit;e.uniqueIdField=this.uniqueIdField;e.queryGeometry=this.queryGeometry;e.queryGeometryType=this.queryGeometryType;return e};return k}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(k){return function(){function e(U=
[],p=[],D=!1){this.lengths=null!=U?U:[];this.coords=null!=p?p:[];this.hasIndeterminateRingOrder=D}var W=e.prototype;W.forEachVertex=function(U){let p=0;this.lengths.length||U(this.coords[0],this.coords[1]);for(let D=0;D<this.lengths.length;D++){const x=this.lengths[D];for(let q=0;q<x;q++)U(this.coords[2*(q+p)],this.coords[2*(q+p)+1]);p+=x}};W.clone=function(U){return U?(U.set(this.coords),new e(this.lengths.slice(),U,this.hasIndeterminateRingOrder)):new e(this.lengths.slice(),this.coords.slice(),
this.hasIndeterminateRingOrder)};k._createClass(e,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((U,p)=>U+p)}}]);return e}()})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),
function(k,e,W,U,p,D,x,q,r,t){return function(){function A(O){this.geometryInfo=O;this._boundsStore=new r.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new W;this.featureAdapter=t.optimizedFeatureQueryEngineAdapter}var P=A.prototype;P.add=function(O){this._add(O);this._emitChanged()};P.addMany=function(O){for(const m of O)this._add(m);this._emitChanged()};P.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};P.removeById=function(O){O=
this._featuresById.get(O);if(!O)return null;this._remove(O);this._emitChanged();return O};P.removeManyById=function(O){this._boundsStore.invalidateIndex();for(const m of O)(O=this._featuresById.get(m))&&this._remove(O);this._emitChanged()};P.forEachBounds=function(O,m,I){for(const d of O)(O=this._boundsStore.get(d.objectId))&&m(D.fromRect(I,O))};P.getFeature=function(O){return this._featuresById.get(O)};P.has=function(O){return this._featuresById.has(O)};P.forEach=function(O){this._featuresById.forEach(m=>
O(m))};P.forEachInBounds=function(O,m){this._boundsStore.forEachInBounds(O,I=>{m(this._featuresById.get(I))})};P.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};P.sweep=function(){let O=!1;this._featuresById.forEach((m,I)=>{this._markedIds.has(I)||(O=!0,this._remove(m))});this._markedIds.clear();O&&this._emitChanged()};P._emitChanged=function(){this.events.emit("changed",void 0)};P._add=function(O){if(O){var m=O.objectId;if(null==m)U.getLogger("esri.layers.graphics.data.FeatureStore").error(new e("featurestore:invalid-feature",
"feature id is missing",{feature:O}));else{var I=this._featuresById.get(m);this._markedIds.add(m);if(I){O.displayId=I.displayId;var d=this._boundsStore.get(m);this._boundsStore.delete(m)}else if(p.isSome(this.onFeatureAdd))this.onFeatureAdd(O);!p.isNone(O.geometry)&&O.geometry.coords&&O.geometry.coords.length?(d=q.getBoundsOptimizedGeometry(p.isSome(d)?d:x.create(),O.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),p.isSome(d)&&this._boundsStore.set(m,d)):this._boundsStore.set(m,null);this._featuresById.set(m,
O)}}};P._remove=function(O){if(p.isSome(this.onFeatureRemove))this.onFeatureRemove(O);this._markedIds.delete(O.objectId);this._boundsStore.delete(O.objectId);this._featuresById.delete(O.objectId);return O};k._createClass(A,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",
get:function(){if(!this.numFeatures)return null;const O=x.create(x.NEGATIVE_INFINITY);this._featuresById.forEach(m=>{if(m=this._boundsStore.get(m.objectId))O[0]=Math.min(m[0],O[0]),O[1]=Math.min(m[1],O[1]),O[2]=Math.max(m[2],O[2]),O[3]=Math.max(m[3],O[3])});return O}},{key:"storeStatistics",get:function(){let O=0;this._featuresById.forEach(m=>{p.isSome(m.geometry)&&m.geometry.coords&&(O+=m.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:O/(this.hasZ?this.hasM?4:3:
this.hasM?3:2)}}}]);return A}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(k,e,W,U,p){let D=function(){function x(){this._emitter=new x.EventEmitter(this)}var q=x.prototype;q.emit=function(r,t){return this._emitter.emit(r,t)};q.on=function(r,t){return this._emitter.on(r,t)};q.once=function(r,t){return this._emitter.once(r,t)};q.hasEventListener=function(r){return this._emitter.hasEventListener(r)};
return x}();(function(x){let q=function(){function t(P=null){this.target=P;this._listenersMap=null}var A=t.prototype;A.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};A.emit=function(P,O){P=this._listenersMap&&this._listenersMap.get(P);if(!P)return!1;const m=this.target||this;[...P].forEach(I=>{I.call(m,O)});return 0<P.length};A.on=function(P,O){if(Array.isArray(P)){var m=P.map(I=>this.on(I,O));return U.handlesGroup(m)}if(-1<P.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);m=this._listenersMap.get(P)||[];m.push(O);this._listenersMap.set(P,m);return{remove:()=>{const I=this._listenersMap&&this._listenersMap.get(P)||[],d=I.indexOf(O);0<=d&&I.splice(d,1)}}};A.once=function(P,O){const m=this.on(P,I=>{m.remove();O.call(null,I)});return m};A.hasEventListener=function(P){P=this._listenersMap&&this._listenersMap.get(P);return null!=P&&0<P.length};return t}();x.EventEmitter=q;x.EventedMixin=t=>{t=function(A){function P(){var m=
A.apply(this,arguments)||this;m._emitter=new q;return m}k._inheritsLoose(P,A);var O=P.prototype;O.destroy=function(){this._emitter.clear()};O.emit=function(m,I){return this._emitter.emit(m,I)};O.on=function(m,I){return this._emitter.on(m,I)};O.once=function(m,I){return this._emitter.once(m,I)};O.hasEventListener=function(m){return this._emitter.hasEventListener(m)};return P}(t);return t=e.__decorate([p.subclass("esri.core.Evented")],t)};let r=function(t){function A(){var O=t.apply(this,arguments)||
this;O._emitter=new D.EventEmitter(k._assertThisInitialized(O));return O}k._inheritsLoose(A,t);var P=A.prototype;P.destroy=function(){this._emitter.clear()};P.emit=function(O,m){return this._emitter.emit(O,m)};P.on=function(O,m){return this._emitter.on(O,m)};P.once=function(O,m){return this._emitter.once(O,m)};P.hasEventListener=function(O){return this._emitter.hasEventListener(O)};return A}(W);r=e.__decorate([p.subclass("esri.core.Evented")],r);x.EventedAccessor=r})(D||(D={}));return D})},"esri/geometry/support/aaBoundingBox":function(){define(["exports",
"../../core/maybe","../Extent","./aaBoundingRect"],function(k,e,W,U){function p(d=m){return[d[0],d[1],d[2],d[3],d[4],d[5]]}function D(d,l,K,G,u,B,C=p()){C[0]=d;C[1]=l;C[2]=K;C[3]=G;C[4]=u;C[5]=B;return C}function x(d){return d[0]>=d[3]?0:d[3]-d[0]}function q(d){return d[1]>=d[4]?0:d[4]-d[1]}function r(d){return d[2]>=d[5]?0:d[5]-d[2]}function t(d,l){return Math.max(l[0],d[0])<=Math.min(l[3],d[3])&&Math.max(l[1],d[1])<=Math.min(l[4],d[4])&&Math.max(l[2],d[2])<=Math.min(l[5],d[5])}function A(d,l){d[0]=
l[0];d[1]=l[1];d[2]=l[2];d[3]=l[3];d[4]=l[4];d[5]=l[5];return d}function P(d){return 6===d.length}const O=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],m=[0,0,0,0,0,0],I=p();k.NEGATIVE_INFINITY=O;k.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];k.ZERO=m;k.allFinite=function(d){for(let l=0;6>l;l++)if(!isFinite(d[l]))return!1;return!0};k.center=function(d,l=[0,0,0]){l[0]=d[0]+x(d)/2;l[1]=d[1]+q(d)/2;l[2]=d[2]+r(d)/2;return l};k.contains=function(d,l){return l[0]>=
d[0]&&l[1]>=d[1]&&l[2]>=d[2]&&l[3]<=d[3]&&l[4]<=d[4]&&l[5]<=d[5]};k.containsPoint=function(d,l){return l[0]>=d[0]&&l[1]>=d[1]&&l[2]>=d[2]&&l[0]<=d[3]&&l[1]<=d[4]&&l[2]<=d[5]};k.containsPointWithMargin=function(d,l,K){return l[0]>=d[0]-K&&l[1]>=d[1]-K&&l[2]>=d[2]-K&&l[0]<=d[3]+K&&l[1]<=d[4]+K&&l[2]<=d[5]+K};k.create=p;k.depth=q;k.diameter=function(d){const l=x(d),K=r(d);d=q(d);return Math.sqrt(l*l+K*K+d*d)};k.empty=function(d){return d?A(d,O):p(O)};k.equals=function(d,l,K){if(e.isNone(d)||e.isNone(l))return d===
l;if(!P(d)||!P(l))return!1;if(K)for(let G=0;G<d.length;G++){if(!K(d[G],l[G]))return!1}else for(K=0;K<d.length;K++)if(d[K]!==l[K])return!1;return!0};k.expandWithAABB=function(d,l){d[0]=Math.min(d[0],l[0]);d[1]=Math.min(d[1],l[1]);d[2]=Math.min(d[2],l[2]);d[3]=Math.max(d[3],l[3]);d[4]=Math.max(d[4],l[4]);d[5]=Math.max(d[5],l[5])};k.expandWithBuffer=function(d,l,K=0,G=l.length/3){let u=d[0],B=d[1],C=d[2],z=d[3],M=d[4],N=d[5];for(let da=0;da<G;da++)u=Math.min(u,l[K+3*da]),B=Math.min(B,l[K+3*da+1]),C=
Math.min(C,l[K+3*da+2]),z=Math.max(z,l[K+3*da]),M=Math.max(M,l[K+3*da+1]),N=Math.max(N,l[K+3*da+2]);d[0]=u;d[1]=B;d[2]=C;d[3]=z;d[4]=M;d[5]=N};k.expandWithNestedArray=function(d,l,K){const G=l.length;let u=d[0],B=d[1],C=d[2],z=d[3],M=d[4],N=d[5];if(K)for(K=0;K<G;K++){var da=l[K];u=Math.min(u,da[0]);B=Math.min(B,da[1]);C=Math.min(C,da[2]);z=Math.max(z,da[0]);M=Math.max(M,da[1]);N=Math.max(N,da[2])}else for(K=0;K<G;K++)da=l[K],u=Math.min(u,da[0]),B=Math.min(B,da[1]),z=Math.max(z,da[0]),M=Math.max(M,
da[1]);d[0]=u;d[1]=B;d[2]=C;d[3]=z;d[4]=M;d[5]=N};k.expandWithOffset=function(d,l,K,G){d[0]=Math.min(d[0],d[0]+l);d[3]=Math.max(d[3],d[3]+l);d[1]=Math.min(d[1],d[1]+K);d[4]=Math.max(d[4],d[4]+K);d[2]=Math.min(d[2],d[2]+G);d[5]=Math.max(d[5],d[5]+G)};k.expandWithRect=function(d,l){d[0]=Math.min(d[0],l[0]);d[1]=Math.min(d[1],l[1]);d[3]=Math.max(d[3],l[2]);d[4]=Math.max(d[4],l[3])};k.expandWithVec3=function(d,l){d[0]=Math.min(d[0],l[0]);d[1]=Math.min(d[1],l[1]);d[2]=Math.min(d[2],l[2]);d[3]=Math.max(d[3],
l[0]);d[4]=Math.max(d[4],l[1]);d[5]=Math.max(d[5],l[2])};k.fromExtent=function(d,l=p()){l[0]=d.xmin;l[1]=d.ymin;l[2]=d.zmin;l[3]=d.xmax;l[4]=d.ymax;l[5]=d.zmax;return l};k.fromMinMax=function(d,l,K=p()){K[0]=d[0];K[1]=d[1];K[2]=d[2];K[3]=l[0];K[4]=l[1];K[5]=l[2];return K};k.fromRect=function(d,l){d[0]=l[0];d[1]=l[1];d[2]=Number.NEGATIVE_INFINITY;d[3]=l[2];d[4]=l[3];d[5]=Number.POSITIVE_INFINITY;return d};k.fromValues=D;k.getMax=function(d,l){l[0]=d[3];l[1]=d[4];l[2]=d[5];return l};k.getMin=function(d,
l){l[0]=d[0];l[1]=d[1];l[2]=d[2];return l};k.height=r;k.intersects=t;k.intersectsClippingArea=function(d,l){return e.isNone(l)?!0:t(d,l)};k.is=P;k.isPoint=function(d){return 0===x(d)&&0===q(d)&&0===r(d)};k.maximumDimension=function(d){return Math.max(x(d),r(d),q(d))};k.offset=function(d,l,K,G,u=d){u[0]=d[0]+l;u[1]=d[1]+K;u[2]=d[2]+G;u[3]=d[3]+l;u[4]=d[4]+K;u[5]=d[5]+G;return u};k.scale=function(d,l,K=d){const G=d[0]+x(d)/2,u=d[1]+q(d)/2,B=d[2]+r(d)/2;K[0]=G+(d[0]-G)*l;K[1]=u+(d[1]-u)*l;K[2]=B+(d[2]-
B)*l;K[3]=G+(d[3]-G)*l;K[4]=u+(d[4]-u)*l;K[5]=B+(d[5]-B)*l;return K};k.set=A;k.setMax=function(d,l,K=d){K[3]=l[0];K[4]=l[1];K[5]=l[2];K!==d&&(K[0]=d[0],K[1]=d[1],K[2]=d[2]);return d};k.setMin=function(d,l,K=d){K[0]=l[0];K[1]=l[1];K[2]=l[2];K!==d&&(K[3]=d[3],K[4]=d[4],K[5]=d[5]);return K};k.size=function(d,l=[0,0,0]){l[0]=x(d);l[1]=q(d);l[2]=r(d);return l};k.toExtent=function(d,l){return isFinite(d[2])||isFinite(d[5])?new W({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],zmin:d[2],zmax:d[5],spatialReference:l}):
new W({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],spatialReference:l})};k.toRect=function(d,l){l||(l=U.create());l[0]=d[0];l[1]=d[1];l[2]=d[3];l[3]=d[4];return l};k.width=x;k.wrap=function(d,l,K,G,u,B){return D(d,l,K,G,u,B,I)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(k,e,W,U,p){function D(m=O){return[m[0],m[1],m[2],m[3]]}function x(m,I){m!==I&&
(m[0]=I[0],m[1]=I[1],m[2]=I[2],m[3]=I[3]);return m}function q(m){return U.isNone(m)||m[0]>=m[2]?0:m[2]-m[0]}function r(m){return m[1]>=m[3]?0:m[3]-m[1]}function t(m,I,d){return I>=m[0]&&d>=m[1]&&I<=m[2]&&d<=m[3]}function A(m){return null!=m&&4===m.length}const P=[Infinity,Infinity,-Infinity,-Infinity],O=[0,0,0,0];k.NEGATIVE_INFINITY=P;k.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];k.UNIT=[0,0,1,1];k.ZERO=O;k.allFinite=function(m){for(let I=0;4>I;I++)if(!isFinite(m[I]))return!1;return!0};
k.area=function(m){return q(m)*r(m)};k.center=function(m,I=[0,0]){I[0]=(m[0]+m[2])/2;I[1]=(m[1]+m[3])/2;return I};k.clone=function(m){return[m[0],m[1],m[2],m[3]]};k.contains=function(m,I){return I[0]>=m[0]&&I[2]<=m[2]&&I[1]>=m[1]&&I[3]<=m[3]};k.containsPoint=function(m,I){return t(m,I[0],I[1])};k.containsPointObject=function(m,I){return t(m,I.x,I.y)};k.containsPointWithMargin=function(m,I,d){return I[0]>=m[0]-d&&I[1]>=m[1]-d&&I[0]<=m[2]+d&&I[1]<=m[3]+d};k.containsXY=t;k.copy=x;k.create=D;k.distance=
function(m,I){const d=(m[1]+m[3])/2,l=Math.max(Math.abs(I[0]-(m[0]+m[2])/2)-q(m)/2,0);m=Math.max(Math.abs(I[1]-d)-r(m)/2,0);return Math.sqrt(l*l+m*m)};k.empty=function(m){return m?x(m,P):D(P)};k.equals=function(m,I){return A(m)&&A(I)?m[0]===I[0]&&m[1]===I[1]&&m[2]===I[2]&&m[3]===I[3]:m===I};k.expand=function(m,I,d){if(U.isNone(I))x(d,m);else if("length"in I)if(A(I))d[0]=Math.min(m[0],I[0]),d[1]=Math.min(m[1],I[1]),d[2]=Math.max(m[2],I[2]),d[3]=Math.max(m[3],I[3]);else{if(2===I.length||3===I.length)d[0]=
Math.min(m[0],I[0]),d[1]=Math.min(m[1],I[1]),d[2]=Math.max(m[2],I[0]),d[3]=Math.max(m[3],I[1])}else switch(I.type){case "extent":d[0]=Math.min(m[0],I.xmin);d[1]=Math.min(m[1],I.ymin);d[2]=Math.max(m[2],I.xmax);d[3]=Math.max(m[3],I.ymax);break;case "point":d[0]=Math.min(m[0],I.x),d[1]=Math.min(m[1],I.y),d[2]=Math.max(m[2],I.x),d[3]=Math.max(m[3],I.y)}};k.expandPointInPlace=function(m,I){I[0]<m[0]&&(m[0]=I[0]);I[0]>m[2]&&(m[2]=I[0]);I[1]<m[1]&&(m[1]=I[1]);I[1]>m[3]&&(m[3]=I[1])};k.expandWithNestedArray=
function(m,I,d=m){const l=I.length;let K=m[0],G=m[1],u=m[2];m=m[3];for(let B=0;B<l;B++){const C=I[B];K=Math.min(K,C[0]);G=Math.min(G,C[1]);u=Math.max(u,C[0]);m=Math.max(m,C[1])}d[0]=K;d[1]=G;d[2]=u;d[3]=m;return d};k.fromExtent=function(m,I=D()){I[0]=m.xmin;I[1]=m.ymin;I[2]=m.xmax;I[3]=m.ymax;return I};k.fromValues=function(m,I,d,l,K=D()){K[0]=m;K[1]=I;K[2]=d;K[3]=l;return K};k.height=r;k.intersection=function(m,I,d){if(U.isNone(I))return x(d,m);const l=I[0],K=I[1],G=I[2];I=I[3];d[0]=W.clamp(m[0],
l,G);d[1]=W.clamp(m[1],K,I);d[2]=W.clamp(m[2],l,G);d[3]=W.clamp(m[3],K,I);return d};k.intersects=function(m,I){return Math.max(I[0],m[0])<=Math.min(I[2],m[2])&&Math.max(I[1],m[1])<=Math.min(I[3],m[3])};k.intersectsSegment=function(m,I,d){const l=m[0],K=m[1],G=m[2];m=m[3];const {x:u,y:B}=I,{x:C,y:z}=d;var M=(da,F)=>0>(z-B)*da+(u-C)*F+(C*B-u*z);I=M(l,m);d=M(G,m);const N=M(G,K);M=M(l,K);return I===d&&d===N&&N===M&&M===I||u<l&&C<l||u>G&&C>G||B>m&&z>m||B<K&&z<K?!1:!0};k.intersectsSphere=function(m,I){const d=
I[3];var l=Math.abs(I[0]-.5*(m[0]+m[2]));const K=.5*(m[2]-m[0]);if(l>d+K)return!1;var G=.5*(m[3]-m[1]);m=Math.abs(I[1]-.5*(m[1]+m[3]));if(m>d+G)return!1;if(l<K||m<G)return!0;l-=K;G=m-G;return l*l+G*G<=d*d};k.is=A;k.isPoint=function(m){return(0===q(m)||!isFinite(m[0]))&&(0===r(m)||!isFinite(m[1]))};k.offset=function(m,I,d,l=m){l[0]=m[0]+I;l[1]=m[1]+d;l[2]=m[2]+I;l[3]=m[3]+d;return l};k.pad=function(m,I,d=m){d[0]=m[0]-I;d[1]=m[1]-I;d[2]=m[2]+I;d[3]=m[3]+I;return d};k.setMax=function(m,I,d=m){d[2]=I[0];
d[3]=I[1];d!==m&&(d[0]=m[0],d[1]=m[1]);return m};k.setMin=function(m,I,d=m){d[0]=I[0];d[1]=I[1];d!==m&&(d[2]=m[2],d[3]=m[3]);return d};k.size=function(m,I){I[0]=m[2]-m[0];I[1]=m[3]-m[1]};k.toExtent=function(m,I){return new p({xmin:m[0],ymin:m[1],xmax:m[2],ymax:m[3],spatialReference:I})};k.width=q;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../core/libs/rbush/PooledRBush"],function(k,e,W){function U(x,
q,r){p.minX=q[0];p.minY=q[1];p.maxX=q[2];p.maxY=q[3];x.search(p,r)}const p={minX:0,minY:0,maxX:0,maxY:0};let D=function(){function x(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new W.PooledRBush(9,e("esri-csp-restrictions")?r=>({minX:r[0],minY:r[1],maxX:r[2],maxY:r[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const r=Array(this._idByBounds.size);let t=0;this._idByBounds.forEach((A,P)=>{r[t++]=P});this._indexInvalid=
!1;this._index.clear();this._index.load(r)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(r=>this._idByBounds.has(r))),this._boundsToLoad.length=0)}}var q=x.prototype;q.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};q.delete=function(r){const t=this._boundsById.get(r);this._boundsById.delete(r);t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))};q.forEachInBounds=
function(r,t){this._loadIndex();U(this._index,r,A=>t(this._idByBounds.get(A)))};q.get=function(r){return this._boundsById.get(r)};q.has=function(r){return this._boundsById.has(r)};q.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};q.set=function(r,t){if(!this._indexInvalid){const A=this._boundsById.get(r);A&&(this._index.remove(A),this._idByBounds.delete(A))}this._boundsById.set(r,t);t&&(this._idByBounds.set(t,r),this._indexInvalid||(this._boundsToLoad.push(t),
5E4<this._boundsToLoad.length&&this._loadIndex()))};return x}();k.BoundsStore=D;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(k,e,W,U,p,D){function x(N,da){q(N,0,N.children.length,da,N)}function q(N,da,F,H,T){T||(T=new z([]));T.minX=Infinity;T.minY=Infinity;T.maxX=-Infinity;T.maxY=-Infinity;for(let ba=
da,J;ba<F;ba++)J=N.children[ba],r(T,N.leaf?H(J):J);return T}function r(N,da){N.minX=Math.min(N.minX,da.minX);N.minY=Math.min(N.minY,da.minY);N.maxX=Math.max(N.maxX,da.maxX);N.maxY=Math.max(N.maxY,da.maxY)}function t(N,da){return N.minX-da.minX}function A(N,da){return N.minY-da.minY}function P(N){return(N.maxX-N.minX)*(N.maxY-N.minY)}function O(N){return N.maxX-N.minX+(N.maxY-N.minY)}function m(N,da){return N.minX<=da.minX&&N.minY<=da.minY&&da.maxX<=N.maxX&&da.maxY<=N.maxY}function I(N,da){return da.minX<=
N.maxX&&da.minY<=N.maxY&&da.maxX>=N.minX&&da.maxY>=N.minY}function d(N,da,F,H,T){for(da=[da,F];da.length;){F=U.assumeNonNull(da.pop());const ba=U.assumeNonNull(da.pop());if(F-ba<=H)continue;const J=ba+Math.ceil((F-ba)/H/2)*H;D.quickselect(N,J,ba,F,T);da.push(ba,J,J,F)}}let l=function(){function N(F=9,H){this.compareMinX=t;this.compareMinY=A;this._toBBox=function(T){return T};this._maxEntries=Math.max(4,F||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));H&&("function"===typeof H?this._toBBox=
H:this._initFormat(H));this.clear()}var da=N.prototype;da.destroy=function(){this.clear();K.prune();G.prune();u.prune();B.prune()};da.all=function(F){this._all(this.data,F)};da.search=function(F,H){let T=this.data;const ba=this._toBBox;if(I(F,T))for(K.clear();T;){for(let J=0,w=T.children.length;J<w;J++){const c=T.children[J],n=T.leaf?ba(c):c;I(F,n)&&(T.leaf?H(c):m(F,n)?this._all(c,H):K.push(c))}T=K.pop()}};da.collides=function(F){let H=this.data;const T=this._toBBox;if(!I(F,H))return!1;for(K.clear();H;){for(let ba=
0,J=H.children.length;ba<J;ba++){const w=H.children[ba],c=H.leaf?T(w):w;if(I(F,c)){if(H.leaf||m(F,c))return!0;K.push(w)}}H=K.pop()}return!1};da.load=function(F){if(!F.length)return this;if(F.length<this._minEntries){for(let H=0,T=F.length;H<T;H++)this.insert(F[H]);return this}F=this._build(F.slice(0,F.length),0,F.length-1,0);if(this.data.children.length)if(this.data.height===F.height)this._splitRoot(this.data,F);else{if(this.data.height<F.height){const H=this.data;this.data=F;F=H}this._insert(F,this.data.height-
F.height-1,!0)}else this.data=F;return this};da.insert=function(F){F&&this._insert(F,this.data.height-1);return this};da.clear=function(){this.data=new z([]);return this};da.remove=function(F){if(!F)return this;let H=this.data,T=null,ba=0,J=!1,w;const c=this._toBBox(F);u.clear();for(B.clear();H||0<u.length;){if(!H){var n;H=U.assumeNonNull(u.pop());T=u.data[u.length-1];ba=null!=(n=B.pop())?n:0;J=!0}if(H.leaf&&(w=W.indexOf(H.children,F,H.children.length,H.indexHint),-1!==w)){H.children.splice(w,1);
u.push(H);this._condense(u);break}J||H.leaf||!m(H,c)?T?(ba++,H=T.children[ba],J=!1):H=null:(u.push(H),B.push(ba),ba=0,T=H,H=H.children[0])}return this};da.toJSON=function(){return this.data};da.fromJSON=function(F){this.data=F;return this};da._all=function(F,H){for(G.clear();F;){var T;if(!0===F.leaf)for(const ba of F.children)H(ba);else G.pushArray(F.children);F=null!=(T=G.pop())?T:null}};da._build=function(F,H,T,ba){var J=T-H+1,w=this._maxEntries;if(J<=w)return F=new z(F.slice(H,T+1)),x(F,this._toBBox),
F;ba||(ba=Math.ceil(Math.log(J)/Math.log(w)),w=Math.ceil(J/w**(ba-1)));const c=new M([]);c.height=ba;J=Math.ceil(J/w);w=J*Math.ceil(Math.sqrt(w));for(d(F,H,T,w,this.compareMinX);H<=T;H+=w){const n=Math.min(H+w-1,T);d(F,H,n,J,this.compareMinY);for(let Q=H;Q<=n;Q+=J)c.children.push(this._build(F,Q,Math.min(Q+J-1,n),ba-1))}x(c,this._toBBox);return c};da._chooseSubtree=function(F,H,T,ba){for(;;){ba.push(H);if(!0===H.leaf||ba.length-1===T)break;let J=Infinity,w=Infinity,c=void 0;for(let n=0,Q=H.children.length;n<
Q;n++){const Z=H.children[n],ja=P(Z),oa=(Math.max(Z.maxX,F.maxX)-Math.min(Z.minX,F.minX))*(Math.max(Z.maxY,F.maxY)-Math.min(Z.minY,F.minY))-ja;oa<w?(w=oa,J=ja<J?ja:J,c=Z):oa===w&&ja<J&&(J=ja,c=Z)}H=c||H.children[0]}return H};da._insert=function(F,H,T){var ba=this._toBBox;T=T?F:ba(F);u.clear();ba=this._chooseSubtree(T,this.data,H,u);ba.children.push(F);for(r(ba,T);0<=H;)if(u.data[H].children.length>this._maxEntries)this._split(u,H),H--;else break;this._adjustParentBBoxes(T,u,H)};da._split=function(F,
H){const T=F.data[H];var ba=T.children.length;const J=this._minEntries;this._chooseSplitAxis(T,J,ba);(ba=this._chooseSplitIndex(T,J,ba))?(ba=T.children.splice(ba,T.children.length-ba),ba=T.leaf?new z(ba):new M(ba),ba.height=T.height,x(T,this._toBBox),x(ba,this._toBBox),H?F.data[H-1].children.push(ba):this._splitRoot(T,ba)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};da._splitRoot=function(F,H){this.data=new M([F,H]);this.data.height=F.height+1;x(this.data,
this._toBBox)};da._chooseSplitIndex=function(F,H,T){let ba,J,w=void 0;ba=J=Infinity;for(let n=H;n<=T-H;n++){var c=q(F,0,n,this._toBBox);const Q=q(F,n,T,this._toBBox),Z=Math.max(0,Math.min(c.maxX,Q.maxX)-Math.max(c.minX,Q.minX))*Math.max(0,Math.min(c.maxY,Q.maxY)-Math.max(c.minY,Q.minY));c=P(c)+P(Q);Z<ba?(ba=Z,w=n,J=c<J?c:J):Z===ba&&c<J&&(J=c,w=n)}return w};da._chooseSplitAxis=function(F,H,T){const ba=F.leaf?this.compareMinX:t,J=F.leaf?this.compareMinY:A,w=this._allDistMargin(F,H,T,ba);H=this._allDistMargin(F,
H,T,J);w<H&&F.children.sort(ba)};da._allDistMargin=function(F,H,T,ba){F.children.sort(ba);ba=this._toBBox;var J=q(F,0,H,ba);const w=q(F,T-H,T,ba);let c=O(J)+O(w);for(let n=H;n<T-H;n++){const Q=F.children[n];r(J,F.leaf?ba(Q):Q);c+=O(J)}for(T=T-H-1;T>=H;T--)J=F.children[T],r(w,F.leaf?ba(J):J),c+=O(w);return c};da._adjustParentBBoxes=function(F,H,T){for(;0<=T;T--)r(H.data[T],F)};da._condense=function(F){for(let H=F.length-1;0<=H;H--){const T=F.data[H];if(0===T.children.length)if(0<H){const ba=F.data[H-
1],J=ba.children;J.splice(W.indexOf(J,T,J.length,ba.indexHint),1)}else this.clear();else x(T,this._toBBox)}};da._initFormat=function(F){const H=["return a"," - b",";"];this.compareMinX=new Function("a","b",H.join(F[0]));this.compareMinY=new Function("a","b",H.join(F[1]));this._toBBox=new Function("a","return {minX: a"+F[0]+", minY: a"+F[1]+", maxX: a"+F[2]+", maxY: a"+F[3]+"};")};return N}();const K=new p,G=new p,u=new p,B=new p({deallocator:void 0});p=function(){this.minY=this.minX=Infinity;this.maxY=
this.maxX=-Infinity};let C=function(N){function da(){var F=N.apply(this,arguments)||this;F.height=1;F.indexHint=new W.PositionHint;return F}e._inheritsLoose(da,N);return da}(p),z=function(N){function da(F){var H=N.call(this)||this;H.children=F;H.leaf=!0;return H}e._inheritsLoose(da,N);return da}(C),M=function(N){function da(F){var H=N.call(this)||this;H.children=F;H.leaf=!1;return H}e._inheritsLoose(da,N);return da}(C);k.BBox=p;k.PooledRBush=l;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/chunks/quickselect":function(){define(["exports"],
function(k){var e={exports:{}};(function(W){(function(U){U=U();void 0!==U&&(W.exports=U)})(function(){function U(x,q,r,t,A){for(;t>r;){if(600<t-r){var P=t-r+1,O=q-r+1,m=Math.log(P),I=.5*Math.exp(2*m/3);m=.5*Math.sqrt(m*I*(P-I)/P)*(0>O-P/2?-1:1);U(x,q,Math.max(r,Math.floor(q-O*I/P+m)),Math.min(t,Math.floor(q+(P-O)*I/P+m)),A)}P=x[q];O=r;I=t;p(x,r,q);for(0<A(x[t],P)&&p(x,r,t);O<I;){p(x,O,I);O++;for(I--;0>A(x[O],P);)O++;for(;0<A(x[I],P);)I--}0===A(x[r],P)?p(x,r,I):(I++,p(x,I,t));I<=q&&(r=I+1);q<=I&&(t=
I-1)}}function p(x,q,r){var t=x[q];x[q]=x[r];x[r]=t}function D(x,q){return x<q?-1:x>q?1:0}return function(x,q,r,t,A){U(x,q,r||0,t||x.length-1,A||D)}})})(e);k.quickselect=e.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../../../core/maybe","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(k,e,W,U,p){const D={getObjectId(x){return x.objectId},getAttributes(x){return x.attributes},getAttribute(x,q){return x.attributes[q]},cloneWithGeometry(x,
q){return new U.OptimizedFeature(q,x.attributes,null,x.objectId)},getGeometry(x){return x.geometry},getCentroid(x,q){e.isNone(x.centroid)&&(x.centroid=W.getCentroidOptimizedGeometry(new p,x.geometry,q.hasZ,q.hasM));return x.centroid}};k.default=D;k.optimizedFeatureQueryEngineAdapter=D;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(k,e){function W(p,D,x,q,r,t,A=1){t=r?t?4:3:t?3:2;let P=x,O=x+t,m=0,I=0,d=
x=0,l=0;for(let K=0,G=q-1;K<G;K++,P+=t,O+=t){q=D[P];const u=D[P+1],B=D[P+2],C=D[O],z=D[O+1],M=D[O+2];let N=q*z-C*u;d+=N;m+=(q+C)*N;I+=(u+z)*N;r&&(N=q*M-C*B,x+=(B+M)*N,l+=N);q<p[0]&&(p[0]=q);q>p[1]&&(p[1]=q);u<p[2]&&(p[2]=u);u>p[3]&&(p[3]=u);r&&(B<p[4]&&(p[4]=B),B>p[5]&&(p[5]=B))}0<d*A&&(d*=-1);0<l*A&&(l*=-1);if(!d)return null;p=[m,I,.5*d];r&&(p[3]=x,p[4]=.5*l);return p}function U(p,D,x,q,r){r=q?r?4:3:r?3:2;let t=D,A=D+r,P=0,O=0,m=0,I=0;for(let G=0,u=x-1;G<u;G++,t+=r,A+=r){var d=p[t];const B=p[t+1],
C=p[t+2],z=p[A],M=p[A+1],N=p[A+2];if(q){{var l=z-d;var K=M-B;const da=N-C;l=Math.sqrt(l*l+K*K+da*da)}}else l=z-d,K=M-B,l=Math.sqrt(l*l+K*K);l&&(P+=l,q?(d=[d+.5*(z-d),B+.5*(M-B),C+.5*(N-C)],O+=l*d[0],m+=l*d[1],I+=l*d[2]):(d=[d+.5*(z-d),B+.5*(M-B)],O+=l*d[0],m+=l*d[1]))}return 0<P?q?[O/P,m/P,I/P]:[O/P,m/P]:0<x?q?[p[D],p[D+1],p[D+2]]:[p[D],p[D+1]]:null}k.getCentroidOptimizedGeometry=function(p,D,x,q,r){if(e.isNone(D)||!D.lengths.length)return null;const t="upperLeft"===(null==r?void 0:r.originPosition)?
-1:1;p.lengths.length&&(p.lengths.length=0);p.coords.length&&(p.coords.length=0);r=p.coords;const A=[],P=x?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:O,coords:m}=D,I=x?q?4:3:q?3:2;let d=0;for(var l of O){const K=W(P,m,d,l,x,q,t);K&&A.push(K);d+=l*I}A.sort((K,G)=>{let u=t*K[2]-t*G[2];
0===u&&x&&(u=K[4]-G[4]);return u});A.length&&(l=6*A[0][2],r[0]=A[0][0]/l,r[1]=A[0][1]/l,x&&(l=6*A[0][4],r[2]=0!==l?A[0][3]/l:0),r[0]<P[0]||r[0]>P[1]||r[1]<P[2]||r[1]>P[3]||x&&(r[2]<P[4]||r[2]>P[5]))&&(r.length=0);if(!r.length)if(D=D.lengths[0]?U(m,0,O[0],x,q):null)r[0]=D[0],r[1]=D[1],x&&2<D.length&&(r[2]=D[2]);else return null;return p};k.lineCentroid=U;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(k,e,W,U,p,D,x){function q(d,l){if(!l)return null;if("x"in l){var K={x:0,y:0};[K.x,K.y]=d(l.x,l.y,P);null!=l.z&&(K.z=l.z);null!=l.m&&(K.m=l.m);return K}if("xmin"in l)return K={xmin:0,ymin:0,xmax:0,ymax:0},[K.xmin,K.ymin]=d(l.xmin,l.ymin,P),[K.xmax,K.ymax]=d(l.xmax,l.ymax,P),l.hasZ&&(K.zmin=l.zmin,K.zmax=l.zmax,K.hasZ=!0),l.hasM&&(K.mmin=l.mmin,K.mmax=l.mmax,K.hasM=!0),K;if("rings"in l)return{rings:r(l.rings,d),hasM:l.hasM,hasZ:l.hasZ};if("paths"in l)return{paths:r(l.paths,d),hasM:l.hasM,hasZ:l.hasZ};
if("points"in l)return{points:t(l.points,d),hasM:l.hasM,hasZ:l.hasZ}}function r(d,l){const K=[];for(const G of d)K.push(t(G,l));return K}function t(d,l){const K=[];for(const G of d)d=l(G[0],G[1],[0,0]),K.push(d),2<G.length&&d.push(G[2]),3<G.length&&d.push(G[3]);return K}function A(){A=e._asyncToGenerator(function*(d,l){l&&(d=Array.isArray(d)?d.map(K=>W.isSome(K.geometry)&&K.geometry.spatialReference):[d],yield U.initializeProjection(d.map(K=>({source:K,dest:l}))))});return A.apply(this,arguments)}
const P=[0,0],O=q.bind(null,x.lngLatToXY),m=q.bind(null,x.xyToLngLat),I=new (function(){function d(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var l=d.prototype;l.push=function(){var K=e._asyncToGenerator(function*(G,u,B){if(!(G&&G.length&&u&&B)||D.equals(u,B))return G;const C={geometries:G,inSpatialReference:u,outSpatialReference:B,resolve:null};this._jobs.push(C);return new Promise(z=>{C.resolve=z;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(G,
u,B){return K.apply(this,arguments)}}();l._process=function(){this._timer=null;const K=this._jobs.shift();if(K){var {geometries:G,inSpatialReference:u,outSpatialReference:B,resolve:C}=K;x.canProject(u,B)?D.isWebMercator(B)?C(G.map(O)):C(G.map(m)):C(U.projectMany(p.jsonAdapter,G,u,B,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return d}());k.checkProjectionSupport=function(d,l){return A.apply(this,arguments)};k.project=function(d,l,K){if(!d)return d;K||(K=l,l=d.spatialReference);
return D.isValid(l)&&D.isValid(K)&&!D.equals(l,K)?x.canProject(l,K)?(d=D.isWebMercator(K)?O(d):m(d),d.spatialReference=K,d):U.projectMany(p.jsonAdapter,[d],l,K,null)[0]:d};k.projectMany=function(d,l,K){return I.push(d,l,K)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(k,e,W,U,p,D,x,q,r,t,A,P,O,m,I,d,l,K,G,u,B,C,z,M,N){function da(){return!!Sa&&m.isLoaded()}function F(X){D.isNone($a)&&($a=Promise.all([m.load(),(new Promise((ia,ca)=>k(["../chunks/geometryEngineBase"],ia,ca))).then(ia=>ia.geometryEngineBase),new Promise((ia,ca)=>k(["./geometryAdapters/hydrated"],ia,ca))]));return $a.then(([,ia,{hydratedAdapter:ca}])=>{x.throwIfAborted(X);b=ca;Sa=ia.default;Sa._enableProjection(m.pe)})}function H(X,ia,ca=null){return Array.isArray(X)?0===X.length?[]:T(b,X,
X[0].spatialReference,ia,ca):T(b,[X],X.spatialReference,ia,ca)[0]}function T(X,ia,ca,na,ya=null){if(D.isNone(ca)||D.isNone(na))return ia;if(J(ca,na,ya))return ia.map(Aa=>D.unwrap(c(Aa,ca,na)));if(D.isNone(ya)){const Aa=C.cacheKey(ca,na);void 0!==Ta[Aa]?ya=Ta[Aa]:(ya=ba(ca,na,null),D.isNone(ya)&&(ya=new C),Ta[Aa]=ya)}if(D.isNone(Sa))throw new pb;return Sa._project(X,ia,ca,na,ya)}function ba(X,ia,ca=null){if(D.isNone(Sa))throw new pb;if(D.isNone(X)||D.isNone(ia))return null;X=Sa._getTransformation(b,
X,ia,ca,null==ca?void 0:ca.spatialReference);return null!==X?C.fromGE(X):null}function J(X,ia,ca){return ca?!1:z.equals(X,ia)?!0:z.isValid(X)&&z.isValid(ia)&&!!sa(X,ia,Pb)}function w(){w=W._asyncToGenerator(function*(X,ia,ca,na){if(!da())if(Array.isArray(X))for(const {source:ya,dest:Aa,geographicTransformation:Ja}of X){if(!J(ya,Aa,Ja))return F(na)}else if(!J(X,ia,ca))return F(na)});return w.apply(this,arguments)}function c(X,ia,ca){return X?"x"in X?n(X,ia,new I,ca,0):"xmin"in X?oa(X,ia,new P,ca,0):
"rings"in X?ja(X,ia,new d,ca,0):"paths"in X?Z(X,ia,new l,ca,0):"points"in X?Q(X,ia,new O,ca,0):null:null}function n(X,ia,ca,na,ya){Oa[0]=X.x;Oa[1]=X.y;const Aa=X.z;Oa[2]=void 0!==Aa?Aa:ya;if(!wa(Oa,ia,0,Oa,na,0,1))return null;ca.x=Oa[0];ca.y=Oa[1];ca.spatialReference=na;void 0===Aa?(ca.z=void 0,ca.hasZ=!1):(ca.z=Oa[2],ca.hasZ=!0);void 0===X.m?(ca.m=void 0,ca.hasM=!1):(ca.m=X.m,ca.hasM=!0);return ca}function Q(X,ia,ca,na,ya){const {points:Aa,hasZ:Ja,hasM:La}=X;X=[];const Xa=Aa.length,Wa=[];for(var Va of Aa)Wa.push(Va[0],
Va[1],Ja?Va[2]:ya);if(!wa(Wa,ia,0,Wa,na,0,Xa))return null;for(ia=0;ia<Xa;++ia){ya=3*ia;Va=Wa[ya];const cb=Wa[ya+1];Ja&&La?X.push([Va,cb,Wa[ya+2],Aa[ia][3]]):Ja?X.push([Va,cb,Wa[ya+2]]):La?X.push([Va,cb,Aa[ia][2]]):X.push([Va,cb])}ca.points=X;ca.spatialReference=na;ca.hasZ=Ja;ca.hasM=La;return ca}function Z(X,ia,ca,na,ya){const {paths:Aa,hasZ:Ja,hasM:La}=X;X=[];if(!Ca(Aa,Ja,La,ia,X,na,ya))return null;ca.paths=X;ca.spatialReference=na;ca.hasZ=Ja;ca.hasM=La;return ca}function ja(X,ia,ca,na,ya){const {rings:Aa,
hasZ:Ja,hasM:La}=X;X=[];if(!Ca(Aa,Ja,La,ia,X,na,ya))return null;ca.rings=X;ca.spatialReference=na;ca.hasZ=Ja;ca.hasM=La;return ca}function oa(X,ia,ca,na,ya){const {xmin:Aa,ymin:Ja,xmax:La,ymax:Xa,hasZ:Wa,hasM:Va}=X;if(!ma(Aa,Ja,Wa?X.zmin:ya,ia,Oa,na))return null;ca.xmin=Oa[0];ca.ymin=Oa[1];Wa&&(ca.zmin=Oa[2]);if(!ma(La,Xa,Wa?X.zmax:ya,ia,Oa,na))return null;ca.xmax=Oa[0];ca.ymax=Oa[1];Wa&&(ca.zmax=Oa[2]);Va&&(ca.mmin=X.mmin,ca.mmax=X.mmax);ca.spatialReference=na;return ca}function ma(X,ia,ca,na,ya,
Aa){Ua[0]=X;Ua[1]=ia;Ua[2]=ca;return wa(Ua,na,0,ya,Aa,0,1)}function la(X,ia,ca,na){if(D.isNone(ia)||D.isNone(na)||2>X.length)return!1;2===X.length&&(Ua[0]=X[0],Ua[1]=X[1],Ua[2]=0,X=Ua);return wa(X,ia,0,ca,na,0,1)}function pa(X,ia,ca){if(D.isNone(ia))return!1;ia=va(ia,Bb);ia=lb[ia][ka.WGS84_COMPARABLE_LON_LAT];if(D.isNone(ia))return!1;ia(X,0,Ua,0);ca!==Ua&&(ca[0]=Ua[0],ca[1]=Ua[1],2<ca.length&&(ca[2]=Ua[2]));return!0}function wa(X,ia,ca,na,ya,Aa,Ja=1){ia=sa(ia,ya,Pb);if(D.isNone(ia))return!1;if(ia===
a){if(X===na&&ca===Aa)return!0;Ja=ca+3*Ja;for(let La=ca,Xa=Aa;La<Ja;La++,Xa++)na[Xa]=X[La];return!0}Ja=ca+3*Ja;for(let La=ca,Xa=Aa;La<Ja;La+=3,Xa+=3)ia(X,La,na,Xa);return!0}function Ca(X,ia,ca,na,ya,Aa,Ja=0){const La=[];for(const Xa of X)for(const Wa of Xa)La.push(Wa[0],Wa[1],ia?Wa[2]:Ja);if(!wa(La,na,0,La,Aa,0,La.length/3))return!1;na=0;ya.length=0;for(const Xa of X){X=[];for(const Wa of Xa)ia&&ca?X.push([La[na++],La[na++],La[na++],Wa[3]]):ia?X.push([La[na++],La[na++],La[na++]]):(ca?X.push([La[na++],
La[na++],Wa[2]]):X.push([La[na++],La[na++]]),na++);ya.push(X)}return!0}function Ka(X,ia,ca,na){ia=na+ia;if(ia<na/2||ca>ia)return Number.MAX_VALUE;X=Math.abs(fb*X)+Math.asin(ca/ia);return X>=Math.PI/2?Number.MAX_VALUE:ca/Math.cos(X)}function Ra(X,ia,ca){const na=Math.sin(X);X=Math.cos(X);const ya=Math.sin(ia);ia=Math.cos(ia);ca[0]=-na;ca[4]=-ya*X;ca[8]=ia*X;ca[12]=0;ca[1]=X;ca[5]=-ya*na;ca[9]=ia*na;ca[13]=0;ca[2]=0;ca[6]=ia;ca[10]=ya;ca[14]=0;ca[3]=0;ca[7]=0;ca[11]=0;ca[15]=1;return ca}function Pa(X,
ia,ca){Ra(X,ia,ca);r.transpose(ca,ca);return ca}function va(X,ia){if(ia.spatialReference===X)return ia.spatialReferenceId;ia.spatialReference=X;"metersPerUnit"in ia&&(ia.metersPerUnit=q.getMetersPerUnitForSR(X,1));return X.wkt===K.SphericalECEFSpatialReference.wkt?ia.spatialReferenceId=ka.SPHERICAL_ECEF:z.isWGS84(X)?ia.spatialReferenceId=ka.WGS84:z.isWebMercator(X)?ia.spatialReferenceId=ka.WEB_MERCATOR:z.isPlateCarree(X)?ia.spatialReferenceId=ka.PLATE_CARREE:X.wkt===K.WGS84ECEFSpatialReference.wkt?
ia.spatialReferenceId=ka.WGS84_ECEF:X.wkid===M.SupportedGCSWkids.CGCS2000?ia.spatialReferenceId=ka.CGCS2000:X.wkt===K.SphericalPCPFMars.wkt?ia.spatialReferenceId=ka.SPHERICAL_MARS_PCPF:X.wkt===K.SphericalPCPFMoon.wkt?ia.spatialReferenceId=ka.SPHERICAL_MOON_PCPF:z.isMars(X)?ia.spatialReferenceId=ka.GCSMARS2000:z.isMoon(X)?ia.spatialReferenceId=ka.GCSMOON2000:ia.spatialReferenceId=ka.UNKNOWN}function a(X,ia,ca,na){X!==ca&&(ca[na++]=X[ia++],ca[na++]=X[ia++],ca[na]=X[ia])}function h(X,ia,ca,na){ca[na++]=
qb*(X[ia++]/u.earth.radius);ca[na++]=qb*(Math.PI/2-2*Math.atan(Math.exp(-X[ia++]/u.earth.radius)));ca[na]=X[ia]}function Y(X,ia,ca,na){h(X,ia,ca,na);qa(ca,na,ca,na)}function g(X,ia,ca,na){h(X,ia,ca,na);Fa(ca,na,ca,na)}function y(X,ia,ca,na,ya){var Aa=.4999999*Math.PI;Aa=p.clamp(fb*X[ia+1],-Aa,Aa);Aa=Math.sin(Aa);ca[na++]=fb*X[ia]*ya.radius;ca[na++]=ya.halfSemiMajorAxis*Math.log((1+Aa)/(1-Aa));ca[na]=X[ia+2]}function S(X,ia,ca,na){y(X,ia,ca,na,u.earth)}function V(X,ia,ca,na){ca[na]=X[ia]*Qb;ca[na+
1]=X[ia+1]*Qb;ca[na+2]=X[ia+2]}function fa(X,ia,ca,na){ca[na]=X[ia]*zb;ca[na+1]=X[ia+1]*zb;ca[na+2]=X[ia+2]}function ha(X,ia,ca,na){h(X,ia,ca,na);V(ca,na,ca,na)}function L(X,ia,ca,na,ya){ya+=X[ia+2];const Aa=fb*X[ia+1];X=fb*X[ia];ia=Math.cos(Aa);ca[na++]=Math.cos(X)*ia*ya;ca[na++]=Math.sin(X)*ia*ya;ca[na]=Math.sin(Aa)*ya}function R(X,ia,ca,na){L(X,ia,ca,na,u.moon.radius)}function ea(X,ia,ca,na){L(X,ia,ca,na,u.mars.radius)}function qa(X,ia,ca,na){L(X,ia,ca,na,u.earth.radius)}function ra(X,ia,ca,na,
ya){var Aa=X[ia];const Ja=X[ia+1];ia=X[ia+2];X=Math.sqrt(Aa*Aa+Ja*Ja+ia*ia);ia=p.asinClamped(ia/(0===X?1:X));Aa=Math.atan2(Ja,Aa);ca[na++]=qb*Aa;ca[na++]=qb*ia;ca[na]=X-ya}function xa(X,ia,ca,na){ra(X,ia,ca,na,u.moon.radius)}function za(X,ia,ca,na){ra(X,ia,ca,na,u.mars.radius)}function Ba(X,ia,ca,na){ra(X,ia,ca,na,u.earth.radius)}function Ia(X,ia,ca,na){Ba(X,ia,ca,na);S(ca,na,ca,na)}function Ha(X,ia,ca,na){Ba(X,ia,ca,na);Fa(ca,na,ca,na)}function Fa(X,ia,ca,na){{var ya=u.earth;const Ja=fb*X[ia];var Aa=
fb*X[ia+1];X=X[ia+2];ia=Math.sin(Aa);Aa=Math.cos(Aa);const La=ya.radius/Math.sqrt(1-ya.eccentricitySquared*ia*ia);ca[na++]=(La+X)*Aa*Math.cos(Ja);ca[na++]=(La+X)*Aa*Math.sin(Ja);ca[na++]=(La*(1-ya.eccentricitySquared)+X)*ia}}function Ea(X,ia,ca,na){var ya=B.earthEllipsoidConstants,Aa=X[ia],Ja=X[ia+1];X=X[ia+2];let La;ia=Math.abs(X);var Xa=Aa*Aa+Ja*Ja;var Wa=Math.sqrt(Xa);var Va=Xa+X*X;var cb=Math.sqrt(Va);Aa=Math.atan2(Ja,Aa);var mb=X*X/Va;Va=Xa/Va;Ja=ya.a2/cb;Xa=ya.a3-ya.a4/cb;.3<Va?(mb=ia/cb*(1+
Va*(ya.a1+Ja+mb*Xa)/cb),cb=Math.asin(mb),Ja=mb*mb,Va=Math.sqrt(1-Ja)):(Va=Wa/cb*(1-mb*(ya.a5-Ja-Va*Xa)/cb),cb=Math.acos(Va),Ja=1-Va*Va,mb=Math.sqrt(Ja));La=1-u.earth.eccentricitySquared*Ja;Ja=u.earth.radius/Math.sqrt(La);ya=ya.a6*Ja;Ja=Wa-Ja*Va;Xa=ia-ya*mb;ia=Va*Ja+mb*Xa;Wa=Va*Xa-mb*Ja;ya=Wa/(ya/La+ia);cb+=ya;0>X&&(cb=-cb);ca[na++]=qb*Aa;ca[na++]=qb*cb;ca[na]=ia+Wa*ya/2}function Ga(X,ia,ca,na){Ea(X,ia,ca,na);qa(ca,na,ca,na)}function Qa(X,ia,ca,na){Ea(X,ia,ca,na);S(ca,na,ca,na)}function sa(X,ia,ca=
ab()){return D.isNone(X)||D.isNone(ia)?null:bb(X,ia,ca).projector}function bb(X,ia,ca){if(D.isNone(X)||D.isNone(ia)||ca.source.spatialReference===X&&ca.dest.spatialReference===ia)return ca;const na=va(X,ca.source),ya=va(ia,ca.dest);na===ka.UNKNOWN&&ya===ka.UNKNOWN?z.equals(X,ia)?ca.projector=a:ca.projector=null:ca.projector=lb[na][ya];return ca}function ab(){return{source:{spatialReference:null,spatialReferenceId:ka.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:ka.UNKNOWN,
metersPerUnit:1},projector:a}}let Sa=null,b=null,$a=null,Ta={},pb=function(X){function ia(){return X.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}W._inheritsLoose(ia,X);return ia}(U);var ka;(function(X){X[X.UNKNOWN=0]="UNKNOWN";X[X.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";X[X.WGS84=2]="WGS84";X[X.WEB_MERCATOR=3]="WEB_MERCATOR";X[X.WGS84_ECEF=4]="WGS84_ECEF";X[X.CGCS2000=5]="CGCS2000";X[X.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";X[X.SPHERICAL_MARS_PCPF=
7]="SPHERICAL_MARS_PCPF";X[X.GCSMARS2000=8]="GCSMARS2000";X[X.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";X[X.GCSMOON2000=10]="GCSMOON2000";X[X.LON_LAT=11]="LON_LAT";X[X.PLATE_CARREE=12]="PLATE_CARREE"})(ka||(ka={}));const Qb=u.earth.radius*Math.PI/180,zb=180/(u.earth.radius*Math.PI),lb={[ka.WGS84]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:a,[ka.WGS84_COMPARABLE_LON_LAT]:a,[ka.SPHERICAL_ECEF]:qa,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,
[ka.WEB_MERCATOR]:S,[ka.PLATE_CARREE]:V,[ka.WGS84]:a,[ka.WGS84_ECEF]:Fa},[ka.CGCS2000]:{[ka.CGCS2000]:a,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:a,[ka.WGS84_COMPARABLE_LON_LAT]:a,[ka.SPHERICAL_ECEF]:qa,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:V,[ka.WGS84]:null,[ka.WGS84_ECEF]:Fa},[ka.GCSMARS2000]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:a,[ka.GCSMOON2000]:null,[ka.LON_LAT]:a,[ka.WGS84_COMPARABLE_LON_LAT]:null,
[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:ea,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.GCSMOON2000]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:a,[ka.LON_LAT]:a,[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:R,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.WEB_MERCATOR]:{[ka.CGCS2000]:null,
[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:h,[ka.WGS84_COMPARABLE_LON_LAT]:h,[ka.SPHERICAL_ECEF]:Y,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:a,[ka.PLATE_CARREE]:ha,[ka.WGS84]:h,[ka.WGS84_ECEF]:g},[ka.WGS84_ECEF]:{[ka.CGCS2000]:Ea,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:Ea,[ka.WGS84_COMPARABLE_LON_LAT]:Ea,[ka.SPHERICAL_ECEF]:Ga,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:Qa,
[ka.PLATE_CARREE]:function(X,ia,ca,na){Ea(X,ia,ca,na);V(ca,na,ca,na)},[ka.WGS84]:Ea,[ka.WGS84_ECEF]:a},[ka.SPHERICAL_ECEF]:{[ka.CGCS2000]:Ba,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:Ba,[ka.WGS84_COMPARABLE_LON_LAT]:Ba,[ka.SPHERICAL_ECEF]:a,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:Ia,[ka.PLATE_CARREE]:function(X,ia,ca,na){Ba(X,ia,ca,na);V(ca,na,ca,na)},[ka.WGS84]:Ba,[ka.WGS84_ECEF]:Ha},[ka.SPHERICAL_MARS_PCPF]:{[ka.CGCS2000]:null,
[ka.GCSMARS2000]:za,[ka.GCSMOON2000]:null,[ka.LON_LAT]:za,[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:a,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.SPHERICAL_MOON_PCPF]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:xa,[ka.LON_LAT]:xa,[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:a,[ka.UNKNOWN]:null,
[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.UNKNOWN]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:null,[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:a,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.LON_LAT]:{[ka.CGCS2000]:a,[ka.GCSMARS2000]:a,[ka.GCSMOON2000]:a,[ka.LON_LAT]:a,[ka.WGS84_COMPARABLE_LON_LAT]:a,
[ka.SPHERICAL_ECEF]:qa,[ka.SPHERICAL_MARS_PCPF]:ea,[ka.SPHERICAL_MOON_PCPF]:R,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:S,[ka.PLATE_CARREE]:V,[ka.WGS84]:a,[ka.WGS84_ECEF]:Fa},[ka.WGS84_COMPARABLE_LON_LAT]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:a,[ka.WGS84_COMPARABLE_LON_LAT]:a,[ka.SPHERICAL_ECEF]:qa,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:V,[ka.WGS84]:a,[ka.WGS84_ECEF]:Fa},[ka.PLATE_CARREE]:{[ka.CGCS2000]:fa,
[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:fa,[ka.WGS84_COMPARABLE_LON_LAT]:fa,[ka.SPHERICAL_ECEF]:function(X,ia,ca,na){fa(X,ia,ca,na);qa(ca,na,ca,na)},[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:function(X,ia,ca,na){fa(X,ia,ca,na);S(ca,na,ca,na)},[ka.PLATE_CARREE]:a,[ka.WGS84]:fa,[ka.WGS84_ECEF]:function(X,ia,ca,na){fa(X,ia,ca,na);Fa(ca,na,ca,na)}}},Bb={spatialReference:null,spatialReferenceId:ka.UNKNOWN},Rb={spatialReference:null,
spatialReferenceId:ka.UNKNOWN},Pb=ab(),bc=ab(),fb=p.deg2rad(1),qb=p.rad2deg(1),Ua=A.create(),kb=A.create(),rb=A.create(),Oa=A.create(),Cb=A.create();e.canProjectToWGS84ComparableLonLat=function(X){if(D.isNone(X))return!1;X=va(X,Bb);return!!lb[X][ka.WGS84_COMPARABLE_LON_LAT]};e.canProjectWithoutEngine=J;e.computeENUToSphericalPCPFLocalRotation=Ra;e.computeSphericalPCPFToENULocalRotation=Pa;e.computeTranslationToOriginAndRotation=function(X,ia,ca,na){if(D.isNone(X)||D.isNone(na))return!1;var ya=va(X,
Bb),Aa=va(na,Rb);if(ya===Aa&&Aa!==ka.SPHERICAL_ECEF&&Aa!==ka.SPHERICAL_MARS_PCPF&&Aa!==ka.SPHERICAL_MOON_PCPF&&(ya!==ka.UNKNOWN||z.equals(X,na)))return r.fromTranslation(ca,ia),!0;if(Aa===ka.SPHERICAL_ECEF||Aa===ka.SPHERICAL_MARS_PCPF||Aa===ka.SPHERICAL_MOON_PCPF){ya=lb[ya][ka.LON_LAT];Aa=lb[ka.LON_LAT][Aa];if(D.isNone(ya)||D.isNone(Aa))return!1;ya(ia,0,kb,0);Aa(kb,0,rb,0);Ra(fb*kb[0],fb*kb[1],ca);ca[12]=rb[0];ca[13]=rb[1];ca[14]=rb[2];return!0}if((Aa===ka.WEB_MERCATOR||Aa===ka.PLATE_CARREE)&&(ya===
ka.WGS84||ya===ka.CGCS2000&&Aa===ka.PLATE_CARREE||ya===ka.SPHERICAL_ECEF||ya===ka.WEB_MERCATOR)){X=lb[ya][ka.LON_LAT];Aa=lb[ka.LON_LAT][Aa];if(D.isNone(X)||D.isNone(Aa))return!1;X(ia,0,kb,0);Aa(kb,0,rb,0);ya===ka.SPHERICAL_ECEF?Pa(fb*kb[0],fb*kb[1],ca):r.identity(ca);ca[12]=rb[0];ca[13]=rb[1];ca[14]=rb[2];return!0}return!1};e.getProjectorName=function(X,ia){switch(sa(X,ia,Pb)){case a:return"copy3";case qa:return"wgs84ToSphericalECEF";case S:return"wgs84ToWebMercator";case V:return"wgs84ToPlateCarree";
case Fa:return"wgs84ToWGS84ECEF";case h:return"webMercatorToWGS84";case Y:return"webMercatorToSphericalECEF";case g:return"webMercatorToWGS84ECEF";case ha:return"webMercatorToPlateCarree";case Ea:return"wgs84ECEFToWGS84";case Ga:return"wgs84ECEFToSphericalECEF";case Qa:return"wgs84ECEFToWebMercator";case Ba:return"sphericalECEFToWGS84";case Ia:return"sphericalECEFToWebMercator";case za:return"sphericalMarsPCPFToMars2000";case xa:return"sphericalMoonPCPFToMoon2000";case Ha:return"sphericalECEFToWGS84ECEF";
case ea:return"mars2000ToSphericalPCPF";case R:return"moon2000ToSphericalPCPF";default:return null}};e.getTransformation=ba;e.getTransformations=function(X,ia,ca=null){if(D.isNone(Sa))throw new pb;X=Sa._getTransformationBySuitability(b,X,ia,ca,null==ca?void 0:ca.spatialReference);if(null!==X){ia=[];for(const na of X)ia.push(C.fromGE(na));return ia}return[]};e.initializeProjection=function(X,ia,ca,na){return w.apply(this,arguments)};e.isLoaded=da;e.load=F;e.localLinearScaleFactors=function(X,ia,ca,
na){if(D.isNone(ia)||D.isNone(na))return!1;const ya=va(ia,Bb);var Aa=va(na,Rb);if(ya===Aa&&ya!==ka.UNKNOWN||z.equals(ia,na))return ca[0]=1,ca[1]=1,ca[2]=1,!0;if(ya===ka.SPHERICAL_ECEF){ia=t.length(X);X=ia/Math.sqrt(X[0]*X[0]+X[1]*X[1]);ia/=u.earth.radius;if(Aa===ka.WEB_MERCATOR)return ca[0]=X*ia,ca[1]=X*ia,ca[2]=1,!0;if(Aa===ka.WGS84||Aa===ka.CGCS2000)return Aa=zb,ca[0]=Aa*X*ia,ca[1]=Aa*ia,ca[2]=1,!0}else if(ya===ka.PLATE_CARREE){if(Aa===ka.WGS84||Aa===ka.CGCS2000)return ca[0]=zb,ca[1]=zb,ca[2]=1,
!0;if(Aa===ka.WEB_MERCATOR)return Aa=X[1]/u.earth.radius,ca[0]=1,ca[1]=1/Math.cos(Aa),ca[2]=1,!0}return!1};e.lonLatToSphericalPCPF=function(X,ia,ca,na,ya=0){na+=ya;ya=Math.cos(ca);X[0]=Math.cos(ia)*ya*na;X[1]=Math.sin(ia)*ya*na;X[2]=Math.sin(ca)*na};e.lonLatToWebMercatorComparable=y;e.project=H;e.projectBoundingRect=function(X,ia,ca,na){if(null==X)return!1;if(z.equals(ia,na))return G.copy(ca,X),!0;Ua[0]=X[0];Ua[1]=X[1];Ua[2]=0;if(!wa(Ua,ia,0,Ua,na,0,1))return!1;ca[0]=Ua[0];ca[1]=Ua[1];Ua[0]=X[2];
Ua[1]=X[3];Ua[2]=0;if(!wa(Ua,ia,0,Ua,na,0,1))return!1;ca[2]=Ua[0];ca[3]=Ua[1];return!0};e.projectBoundingSphere=function(X,ia,ca,na){if(D.isNone(ia)||D.isNone(na))return!1;ia=bb(ia,na,bc);if(ia.projector===a)return ca[0]=X[0],ca[1]=X[1],ca[2]=X[2],ca[3]=X[3],!0;if(D.isNone(ia.projector))return!1;const {source:ya,dest:Aa}=ia;if(Aa.spatialReferenceId===ka.WEB_MERCATOR){ia=lb[ya.spatialReferenceId][ka.WGS84];if(D.isNone(ia))return!1;ia(X,0,kb,0);S(kb,0,ca,0);ca[3]=Ka(kb[1],X[2],X[3],u.earth.radius);
return!0}if(ya.spatialReferenceId!==ka.WGS84&&ya.spatialReferenceId!==ka.CGCS2000||Aa.spatialReferenceId!==ka.PLATE_CARREE)ia.projector(X,0,ca,0),ca[3]=X[3]*ya.metersPerUnit/Aa.metersPerUnit;else{na=lb[ka.SPHERICAL_ECEF][ka.PLATE_CARREE];let Ja=X[3];D.isSome(lb[ya.spatialReferenceId][ka.SPHERICAL_ECEF])&&D.isSome(na)&&(Ja=Ka(X[1],X[2],X[3],u.earth.radius));ia.projector(X,0,ca,0);ca[3]=Ja}return!0};e.projectBuffer=wa;e.projectDirection=function(X,ia,ca,na,ya){t.copy(Oa,X);t.add(Cb,X,ia);la(Oa,ca,Oa,
ya);la(Cb,ca,Cb,ya);t.subtract(na,Cb,Oa);t.normalize(na,na)};e.projectExtent=function(X,ia,ca=ia.spatialReference,na=0){return D.isSome(ca)&&D.isSome(oa(X,X.spatialReference,ia,ca,na))};e.projectMany=T;e.projectMultipoint=function(X,ia,ca=ia.spatialReference,na=0){return D.isNone(ca)?!1:D.isSome(Q(X,X.spatialReference,ia,ca,na))};e.projectPoint=function(X,ia,ca=ia.spatialReference,na=0){return D.isNone(ca)?!1:D.isSome(n(X,X.spatialReference,ia,ca,na))};e.projectPointToVector=function(X,ia,ca,na=0){Oa[0]=
X.x;Oa[1]=X.y;const ya=X.z;Oa[2]=void 0!==ya?ya:na;return wa(Oa,X.spatialReference,0,ia,ca,0,1)};e.projectPointToWGS84ComparableLonLat=function(X,ia){Oa[0]=X.x;Oa[1]=X.y;const ca=X.z;Oa[2]=void 0!==ca?ca:0;return pa(Oa,X.spatialReference,ia)};e.projectPolygon=function(X,ia,ca=ia.spatialReference,na=0){return D.isSome(ca)&&D.isSome(ja(X,X.spatialReference,ia,ca,na))};e.projectPolyline=function(X,ia,ca=ia.spatialReference,na=0){return D.isSome(ca)&&D.isSome(Z(X,X.spatialReference,ia,ca,na))};e.projectVectorToDehydratedPoint=
function(X,ia,ca){return wa(X,ia,0,Oa,ca.spatialReference,0,1)?(ca.x=Oa[0],ca.y=Oa[1],ca.z=Oa[2],ca):null};e.projectVectorToPoint=function(X,ia,ca){if(D.isNone(ia)||D.isNone(ca))return null;const na=new I({spatialReference:ca});return wa(X,ia,0,Oa,ca,0,1)?(na.x=Oa[0],na.y=Oa[1],na.z=Oa[2],na):null};e.projectVectorToVector=la;e.projectVectorToWGS84ComparableLonLat=function(X,ia,ca){return pa(X,ia,ca)};e.projectWithoutEngine=c;e.projectXYZToVector=ma;e.sphericalPCPFtoLonLatElevation=ra;e.tryProjectWithZConversion=
function(X,ia){try{const ca=H(X,ia);if(null==ca)return null;"xmin"in X&&"xmin"in ca&&(ca.zmin=X.zmin,ca.zmax=X.zmax);const na=N.getGeometryZScaler(ca.type,X.spatialReference,ia);D.isSome(na)&&na(ca);return ca}catch(ca){if(!(ca instanceof pb))throw ca;return null}};e.unload=function(){$a=b=Sa=null;Ta={}};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ./maybe ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),
function(k,e,W,U,p,D,x,q,r){function t(c){if(c=ba[c])return c;throw Error("unknown type");}function A(c){return T[c].baseUnit}function P(c,n=null){n=n||t(c);return T[n].baseUnit===c}function O(c,n,Q){if(n===Q)return c;const Z=t(n);if(Z!==t(Q))throw Error("incompatible units");c=P(n,Z)?c:c*T[Z].units[n].inBaseUnits;return P(Q,Z)?c:c/T[Z].units[Q].inBaseUnits}function m(c,n){return 3E3>O(c,n,"meters")?"meters":"kilometers"}function I(c,n){return 1E5>O(c,n,"meters")?"meters":"kilometers"}function d(c,
n){return 1E3>O(c,n,"feet")?"feet":"miles"}function l(c,n){return 1E5>O(c,n,"feet")?"feet":"miles"}function K(c){return H.fromJSON(c.toLowerCase())||null}function G(c,n=x.earth.metersPerDegree){return u(c,!0)||n}function u(c,n=!1){let Q,Z,ja=null;null!=c&&("object"===typeof c?(Q=c.wkid,Z=c.wkt):"number"===typeof c?Q=c:"string"===typeof c&&(Z=c));if(Q){if(q.isWKIDFromMars(Q))return x.mars.metersPerDegree;if(q.isWKIDFromMoon(Q))return x.moon.metersPerDegree;ja=N.values[N[Q]];!ja&&n&&F.has(Q)&&(ja=z)}else Z&&
(/^PROJCS/i.test(Z)?ja=B(M.exec(Z),ja):/^GEOCCS/i.test(Z)&&(ja=B(da.exec(Z),ja)));return ja}function B(c,n){return c&&c[1]?parseFloat(c[1].split(",")[1]):n}function C(c){var n=null;if(null!=c)if("object"===typeof c){var Q=c.wkid;var Z=c.wkt}else"number"===typeof c?Q=c:"string"===typeof c&&(Z=c);if(Q)n=N.units[N[Q]];else if(Z&&(c=/^PROJCS/i.test(Z)?M:/^GEOCCS/i.test(Z)?da:null)&&(Z=c.exec(Z))&&Z[1]&&(Z=Z[1],n=(n=/[\\"\\']{1}([^\\"\\']+)/.exec(Z))&&n[1],!n||-1===N.units.indexOf(n)))for(Z=parseFloat(Z.split(",")[1]),
n=null,c=N.values,Q=0;Q<c.length;++Q)if(1E-7>Math.abs(Z-c[Q])){n=N.units[Q];break}return U.isSome(n)?K(n):null}const z=x.earth.radius*Math.PI/200,M=/UNIT\[([^\]]+)\]\]$/i,N=r,da=/UNIT\[([^\]]+)\]/i,F=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),H=W.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",
chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});e={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},
"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};r={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(c=>c*c)(1200/3937)},acres:{inBaseUnits:4046.8564224},
ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const T={length:{baseUnit:"meters",units:e},area:{baseUnit:"square-meters",units:r},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},
"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},ba=function(){const c={};for(const n in T)for(const Q in T[n].units)c[Q]=n;return c}(),J={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",
esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},w={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};e=W.strict()(J);r=W.strict()(w);W=W.strict()({...J,...w});k.areaUnitsJSONMap=e;k.baseUnitForUnit=function(c){return A(t(c))};
k.baseUnitForUnitType=A;k.convertUnit=O;k.getDefaultUnitSystem=function(c){if(!c)return null;switch(C(c)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};k.getMetersPerUnit=
u;k.getMetersPerUnitForSR=G;k.getMetersPerVerticalUnitForSR=function(c){if(c&&"object"===typeof c&&!q.isEarth(c))return 1;c=G(c);return 1E5<c?1:c};k.getUnitString=C;k.getVerticalUnitStringForSR=function(c){const n=G(c),Q=c instanceof D?p.getReferenceEllipsoid(c).metersPerDegree:1E5;return n>=Q?"meters":C(c)};k.inchesPerMeter=39.37;k.isBaseUnit=P;k.isMeasurementSystem=function(c){return"imperial"===c||"metric"===c};k.lengthToDegrees=function(c,n,Q){return O(c,n,"meters")/(Q*Math.PI/180)};k.lengthUnitsJSONMap=
r;k.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");k.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");k.preferredImperialAreaUnit=function(c,n){return 1E6>O(c,n,"square-feet")?"square-feet":"square-miles"};k.preferredImperialLengthUnit=d;k.preferredImperialVerticalLengthUnit=l;k.preferredLengthUnit=function(c,
n,Q){switch(Q){case "metric":return m(c,n);case "imperial":return d(c,n);default:return Q}};k.preferredMetricAreaUnit=function(c,n){return 3E6>O(c,n,"square-meters")?"square-meters":"square-kilometers"};k.preferredMetricLengthUnit=m;k.preferredMetricVerticalLengthUnit=I;k.preferredVerticalLengthUnit=function(c,n,Q){switch(Q){case "metric":return I(c,n);case "imperial":return l(c,n);default:return Q}};k.unitFromRESTJSON=K;k.unitToRESTJSON=function(c){return H.toJSON(c)||null};k.unitType=t;k.unitsJSONMap=
W;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(k,e,W,U){function p(t){return new e({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${t.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}
const D=p(W.earth),x=p(W.mars),q=p(W.moon),r=new e({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${W.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});k.SphericalECEFSpatialReference=D;k.SphericalPCPFMars=
x;k.SphericalPCPFMoon=q;k.WGS84ECEFSpatialReference=r;k.createSphericalPCPF=p;k.getReferenceEllipsoid=function(t){return t&&(U.isMars(t)||t===x)?W.mars:t&&(U.isMoon(t)||t===q)?W.moon:W.earth};k.getReferenceEllipsoidFromWKID=function(t){return U.isWKIDFromMars(t)?W.mars:U.isWKIDFromMoon(t)?W.moon:W.earth};k.getSphericalPCPF=function(t){return t&&(U.isMars(t)||t===x)?x:t&&(U.isMoon(t)||t===q)?q:D};k.getSphericalPCPFForEllipsoid=function(t){return t&&t===W.mars?x:t&&t===W.moon?q:D};Object.defineProperty(k,
"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(k,e,W){function U(a,h){a[0]=h[0];a[1]=h[1];a[2]=h[2];a[3]=h[3];a[4]=h[4];a[5]=h[5];a[6]=h[6];a[7]=h[7];a[8]=h[8];a[9]=h[9];a[10]=h[10];a[11]=h[11];a[12]=h[12];a[13]=h[13];a[14]=h[14];a[15]=h[15];return a}function p(a,h,Y,g,y,S,V,fa,ha,L,R,ea,qa,ra,xa,za,Ba){a[0]=h;a[1]=Y;a[2]=g;a[3]=y;a[4]=S;a[5]=V;a[6]=fa;a[7]=ha;a[8]=L;a[9]=R;a[10]=ea;a[11]=qa;a[12]=ra;a[13]=xa;a[14]=za;a[15]=Ba;return a}
function D(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function x(a,h){if(a===h){const Y=h[1],g=h[2],y=h[3],S=h[6],V=h[7],fa=h[11];a[1]=h[4];a[2]=h[8];a[3]=h[12];a[4]=Y;a[6]=h[9];a[7]=h[13];a[8]=g;a[9]=S;a[11]=h[14];a[12]=y;a[13]=V;a[14]=fa}else a[0]=h[0],a[1]=h[4],a[2]=h[8],a[3]=h[12],a[4]=h[1],a[5]=h[5],a[6]=h[9],a[7]=h[13],a[8]=h[2],a[9]=h[6],a[10]=h[10],a[11]=h[14],a[12]=h[3],a[13]=h[7],a[14]=h[11],a[15]=h[15];
return a}function q(a,h){const Y=h[0],g=h[1],y=h[2],S=h[3],V=h[4],fa=h[5],ha=h[6],L=h[7],R=h[8],ea=h[9],qa=h[10],ra=h[11],xa=h[12],za=h[13],Ba=h[14];h=h[15];const Ia=Y*fa-g*V,Ha=Y*ha-y*V,Fa=Y*L-S*V,Ea=g*ha-y*fa,Ga=g*L-S*fa,Qa=y*L-S*ha,sa=R*za-ea*xa,bb=R*Ba-qa*xa,ab=R*h-ra*xa,Sa=ea*Ba-qa*za,b=ea*h-ra*za,$a=qa*h-ra*Ba;let Ta=Ia*$a-Ha*b+Fa*Sa+Ea*ab-Ga*bb+Qa*sa;if(!Ta)return null;Ta=1/Ta;a[0]=(fa*$a-ha*b+L*Sa)*Ta;a[1]=(y*b-g*$a-S*Sa)*Ta;a[2]=(za*Qa-Ba*Ga+h*Ea)*Ta;a[3]=(qa*Ga-ea*Qa-ra*Ea)*Ta;a[4]=(ha*
ab-V*$a-L*bb)*Ta;a[5]=(Y*$a-y*ab+S*bb)*Ta;a[6]=(Ba*Fa-xa*Qa-h*Ha)*Ta;a[7]=(R*Qa-qa*Fa+ra*Ha)*Ta;a[8]=(V*b-fa*ab+L*sa)*Ta;a[9]=(g*ab-Y*b-S*sa)*Ta;a[10]=(xa*Ga-za*Fa+h*Ia)*Ta;a[11]=(ea*Fa-R*Ga-ra*Ia)*Ta;a[12]=(fa*bb-V*Sa-ha*sa)*Ta;a[13]=(Y*Sa-g*bb+y*sa)*Ta;a[14]=(za*Ha-xa*Ea-Ba*Ia)*Ta;a[15]=(R*Ea-ea*Ha+qa*Ia)*Ta;return a}function r(a,h){const Y=h[0],g=h[1],y=h[2],S=h[3],V=h[4],fa=h[5],ha=h[6],L=h[7],R=h[8],ea=h[9],qa=h[10],ra=h[11],xa=h[12],za=h[13],Ba=h[14];h=h[15];a[0]=fa*(qa*h-ra*Ba)-ea*(ha*h-L*
Ba)+za*(ha*ra-L*qa);a[1]=-(g*(qa*h-ra*Ba)-ea*(y*h-S*Ba)+za*(y*ra-S*qa));a[2]=g*(ha*h-L*Ba)-fa*(y*h-S*Ba)+za*(y*L-S*ha);a[3]=-(g*(ha*ra-L*qa)-fa*(y*ra-S*qa)+ea*(y*L-S*ha));a[4]=-(V*(qa*h-ra*Ba)-R*(ha*h-L*Ba)+xa*(ha*ra-L*qa));a[5]=Y*(qa*h-ra*Ba)-R*(y*h-S*Ba)+xa*(y*ra-S*qa);a[6]=-(Y*(ha*h-L*Ba)-V*(y*h-S*Ba)+xa*(y*L-S*ha));a[7]=Y*(ha*ra-L*qa)-V*(y*ra-S*qa)+R*(y*L-S*ha);a[8]=V*(ea*h-ra*za)-R*(fa*h-L*za)+xa*(fa*ra-L*ea);a[9]=-(Y*(ea*h-ra*za)-R*(g*h-S*za)+xa*(g*ra-S*ea));a[10]=Y*(fa*h-L*za)-V*(g*h-S*za)+
xa*(g*L-S*fa);a[11]=-(Y*(fa*ra-L*ea)-V*(g*ra-S*ea)+R*(g*L-S*fa));a[12]=-(V*(ea*Ba-qa*za)-R*(fa*Ba-ha*za)+xa*(fa*qa-ha*ea));a[13]=Y*(ea*Ba-qa*za)-R*(g*Ba-y*za)+xa*(g*qa-y*ea);a[14]=-(Y*(fa*Ba-ha*za)-V*(g*Ba-y*za)+xa*(g*ha-y*fa));a[15]=Y*(fa*qa-ha*ea)-V*(g*qa-y*ea)+R*(g*ha-y*fa);return a}function t(a){const h=a[0],Y=a[1],g=a[2],y=a[3],S=a[4],V=a[5],fa=a[6],ha=a[7],L=a[8],R=a[9],ea=a[10],qa=a[11],ra=a[12],xa=a[13],za=a[14];a=a[15];return(h*V-Y*S)*(ea*a-qa*za)-(h*fa-g*S)*(R*a-qa*xa)+(h*ha-y*S)*(R*za-
ea*xa)+(Y*fa-g*V)*(L*a-qa*ra)-(Y*ha-y*V)*(L*za-ea*ra)+(g*ha-y*fa)*(L*xa-R*ra)}function A(a,h,Y){const g=h[0],y=h[1],S=h[2],V=h[3],fa=h[4],ha=h[5],L=h[6],R=h[7],ea=h[8],qa=h[9],ra=h[10],xa=h[11],za=h[12],Ba=h[13],Ia=h[14];h=h[15];let Ha=Y[0],Fa=Y[1],Ea=Y[2],Ga=Y[3];a[0]=Ha*g+Fa*fa+Ea*ea+Ga*za;a[1]=Ha*y+Fa*ha+Ea*qa+Ga*Ba;a[2]=Ha*S+Fa*L+Ea*ra+Ga*Ia;a[3]=Ha*V+Fa*R+Ea*xa+Ga*h;Ha=Y[4];Fa=Y[5];Ea=Y[6];Ga=Y[7];a[4]=Ha*g+Fa*fa+Ea*ea+Ga*za;a[5]=Ha*y+Fa*ha+Ea*qa+Ga*Ba;a[6]=Ha*S+Fa*L+Ea*ra+Ga*Ia;a[7]=Ha*V+Fa*
R+Ea*xa+Ga*h;Ha=Y[8];Fa=Y[9];Ea=Y[10];Ga=Y[11];a[8]=Ha*g+Fa*fa+Ea*ea+Ga*za;a[9]=Ha*y+Fa*ha+Ea*qa+Ga*Ba;a[10]=Ha*S+Fa*L+Ea*ra+Ga*Ia;a[11]=Ha*V+Fa*R+Ea*xa+Ga*h;Ha=Y[12];Fa=Y[13];Ea=Y[14];Ga=Y[15];a[12]=Ha*g+Fa*fa+Ea*ea+Ga*za;a[13]=Ha*y+Fa*ha+Ea*qa+Ga*Ba;a[14]=Ha*S+Fa*L+Ea*ra+Ga*Ia;a[15]=Ha*V+Fa*R+Ea*xa+Ga*h;return a}function P(a,h,Y){const g=Y[0],y=Y[1];Y=Y[2];let S=void 0,V=void 0,fa=void 0,ha=void 0,L=void 0,R=void 0,ea=void 0,qa=void 0,ra=void 0,xa=void 0,za=void 0,Ba=void 0;h===a?(a[12]=h[0]*g+
h[4]*y+h[8]*Y+h[12],a[13]=h[1]*g+h[5]*y+h[9]*Y+h[13],a[14]=h[2]*g+h[6]*y+h[10]*Y+h[14],a[15]=h[3]*g+h[7]*y+h[11]*Y+h[15]):(S=h[0],V=h[1],fa=h[2],ha=h[3],L=h[4],R=h[5],ea=h[6],qa=h[7],ra=h[8],xa=h[9],za=h[10],Ba=h[11],a[0]=S,a[1]=V,a[2]=fa,a[3]=ha,a[4]=L,a[5]=R,a[6]=ea,a[7]=qa,a[8]=ra,a[9]=xa,a[10]=za,a[11]=Ba,a[12]=S*g+L*y+ra*Y+h[12],a[13]=V*g+R*y+xa*Y+h[13],a[14]=fa*g+ea*y+za*Y+h[14],a[15]=ha*g+qa*y+Ba*Y+h[15]);return a}function O(a,h,Y){const g=Y[0],y=Y[1];Y=Y[2];a[0]=h[0]*g;a[1]=h[1]*g;a[2]=h[2]*
g;a[3]=h[3]*g;a[4]=h[4]*y;a[5]=h[5]*y;a[6]=h[6]*y;a[7]=h[7]*y;a[8]=h[8]*Y;a[9]=h[9]*Y;a[10]=h[10]*Y;a[11]=h[11]*Y;a[12]=h[12];a[13]=h[13];a[14]=h[14];a[15]=h[15];return a}function m(a,h,Y,g){let y=g[0],S=g[1];g=g[2];let V=Math.sqrt(y*y+S*S+g*g);var fa=void 0,ha=void 0;let L=void 0,R=void 0,ea=void 0,qa=void 0,ra=void 0,xa=void 0,za=void 0,Ba=void 0,Ia=void 0,Ha=void 0,Fa=void 0,Ea=void 0,Ga=void 0,Qa=void 0,sa=void 0,bb=void 0,ab=void 0,Sa=void 0,b=void 0,$a=void 0;ha=fa=void 0;if(V<W.EPSILON)return null;
V=1/V;y*=V;S*=V;g*=V;fa=Math.sin(Y);ha=Math.cos(Y);L=1-ha;R=h[0];ea=h[1];qa=h[2];ra=h[3];xa=h[4];za=h[5];Ba=h[6];Ia=h[7];Ha=h[8];Fa=h[9];Ea=h[10];Ga=h[11];Qa=y*y*L+ha;sa=S*y*L+g*fa;bb=g*y*L-S*fa;ab=y*S*L-g*fa;Sa=S*S*L+ha;b=g*S*L+y*fa;$a=y*g*L+S*fa;fa=S*g*L-y*fa;ha=g*g*L+ha;a[0]=R*Qa+xa*sa+Ha*bb;a[1]=ea*Qa+za*sa+Fa*bb;a[2]=qa*Qa+Ba*sa+Ea*bb;a[3]=ra*Qa+Ia*sa+Ga*bb;a[4]=R*ab+xa*Sa+Ha*b;a[5]=ea*ab+za*Sa+Fa*b;a[6]=qa*ab+Ba*Sa+Ea*b;a[7]=ra*ab+Ia*Sa+Ga*b;a[8]=R*$a+xa*fa+Ha*ha;a[9]=ea*$a+za*fa+Fa*ha;a[10]=
qa*$a+Ba*fa+Ea*ha;a[11]=ra*$a+Ia*fa+Ga*ha;h!==a&&(a[12]=h[12],a[13]=h[13],a[14]=h[14],a[15]=h[15]);return a}function I(a,h,Y){const g=Math.sin(Y);Y=Math.cos(Y);const y=h[4],S=h[5],V=h[6],fa=h[7],ha=h[8],L=h[9],R=h[10],ea=h[11];h!==a&&(a[0]=h[0],a[1]=h[1],a[2]=h[2],a[3]=h[3],a[12]=h[12],a[13]=h[13],a[14]=h[14],a[15]=h[15]);a[4]=y*Y+ha*g;a[5]=S*Y+L*g;a[6]=V*Y+R*g;a[7]=fa*Y+ea*g;a[8]=ha*Y-y*g;a[9]=L*Y-S*g;a[10]=R*Y-V*g;a[11]=ea*Y-fa*g;return a}function d(a,h,Y){const g=Math.sin(Y);Y=Math.cos(Y);const y=
h[0],S=h[1],V=h[2],fa=h[3],ha=h[8],L=h[9],R=h[10],ea=h[11];h!==a&&(a[4]=h[4],a[5]=h[5],a[6]=h[6],a[7]=h[7],a[12]=h[12],a[13]=h[13],a[14]=h[14],a[15]=h[15]);a[0]=y*Y-ha*g;a[1]=S*Y-L*g;a[2]=V*Y-R*g;a[3]=fa*Y-ea*g;a[8]=y*g+ha*Y;a[9]=S*g+L*Y;a[10]=V*g+R*Y;a[11]=fa*g+ea*Y;return a}function l(a,h,Y){const g=Math.sin(Y);Y=Math.cos(Y);const y=h[0],S=h[1],V=h[2],fa=h[3],ha=h[4],L=h[5],R=h[6],ea=h[7];h!==a&&(a[8]=h[8],a[9]=h[9],a[10]=h[10],a[11]=h[11],a[12]=h[12],a[13]=h[13],a[14]=h[14],a[15]=h[15]);a[0]=y*
Y+ha*g;a[1]=S*Y+L*g;a[2]=V*Y+R*g;a[3]=fa*Y+ea*g;a[4]=ha*Y-y*g;a[5]=L*Y-S*g;a[6]=R*Y-V*g;a[7]=ea*Y-fa*g;return a}function K(a,h){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=h[0];a[13]=h[1];a[14]=h[2];a[15]=1;return a}function G(a,h){a[0]=h[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=h[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=h[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function u(a,h,Y){let g=Y[0],y=Y[1];Y=Y[2];let S=Math.sqrt(g*g+y*y+Y*Y),V=void 0,fa=void 0,
ha=void 0;if(S<W.EPSILON)return null;S=1/S;g*=S;y*=S;Y*=S;V=Math.sin(h);fa=Math.cos(h);ha=1-fa;a[0]=g*g*ha+fa;a[1]=y*g*ha+Y*V;a[2]=Y*g*ha-y*V;a[3]=0;a[4]=g*y*ha-Y*V;a[5]=y*y*ha+fa;a[6]=Y*y*ha+g*V;a[7]=0;a[8]=g*Y*ha+y*V;a[9]=y*Y*ha-g*V;a[10]=Y*Y*ha+fa;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function B(a,h){const Y=Math.sin(h);h=Math.cos(h);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=h;a[6]=Y;a[7]=0;a[8]=0;a[9]=-Y;a[10]=h;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function C(a,h){const Y=
Math.sin(h);h=Math.cos(h);a[0]=h;a[1]=0;a[2]=-Y;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=Y;a[9]=0;a[10]=h;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function z(a,h){const Y=Math.sin(h);h=Math.cos(h);a[0]=h;a[1]=Y;a[2]=0;a[3]=0;a[4]=-Y;a[5]=h;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function M(a,h,Y){var g=h[0],y=h[1],S=h[2],V=h[3],fa=g+g,ha=y+y;const L=S+S;h=g*fa;const R=g*ha;g*=L;const ea=y*ha;y*=L;S*=L;fa*=V;ha*=V;V*=L;a[0]=1-(ea+S);a[1]=R+V;a[2]=
g-ha;a[3]=0;a[4]=R-V;a[5]=1-(h+S);a[6]=y+fa;a[7]=0;a[8]=g+ha;a[9]=y-fa;a[10]=1-(h+ea);a[11]=0;a[12]=Y[0];a[13]=Y[1];a[14]=Y[2];a[15]=1;return a}function N(a,h){const Y=va,g=-h[0],y=-h[1],S=-h[2],V=h[3],fa=h[4],ha=h[5],L=h[6],R=h[7],ea=g*g+y*y+S*S+V*V;0<ea?(Y[0]=2*(fa*V+R*g+ha*S-L*y)/ea,Y[1]=2*(ha*V+R*y+L*g-fa*S)/ea,Y[2]=2*(L*V+R*S+fa*y-ha*g)/ea):(Y[0]=2*(fa*V+R*g+ha*S-L*y),Y[1]=2*(ha*V+R*y+L*g-fa*S),Y[2]=2*(L*V+R*S+fa*y-ha*g));M(a,h,Y);return a}function da(a,h){a[0]=h[12];a[1]=h[13];a[2]=h[14];return a}
function F(a,h){const Y=h[0],g=h[1],y=h[2],S=h[4],V=h[5],fa=h[6],ha=h[8],L=h[9];h=h[10];a[0]=Math.sqrt(Y*Y+g*g+y*y);a[1]=Math.sqrt(S*S+V*V+fa*fa);a[2]=Math.sqrt(ha*ha+L*L+h*h);return a}function H(a,h){const Y=h[0]+h[5]+h[10];let g=0;0<Y?(g=2*Math.sqrt(Y+1),a[3]=.25*g,a[0]=(h[6]-h[9])/g,a[1]=(h[8]-h[2])/g,a[2]=(h[1]-h[4])/g):h[0]>h[5]&&h[0]>h[10]?(g=2*Math.sqrt(1+h[0]-h[5]-h[10]),a[3]=(h[6]-h[9])/g,a[0]=.25*g,a[1]=(h[1]+h[4])/g,a[2]=(h[8]+h[2])/g):h[5]>h[10]?(g=2*Math.sqrt(1+h[5]-h[0]-h[10]),a[3]=
(h[8]-h[2])/g,a[0]=(h[1]+h[4])/g,a[1]=.25*g,a[2]=(h[6]+h[9])/g):(g=2*Math.sqrt(1+h[10]-h[0]-h[5]),a[3]=(h[1]-h[4])/g,a[0]=(h[8]+h[2])/g,a[1]=(h[6]+h[9])/g,a[2]=.25*g);return a}function T(a,h,Y,g){var y=h[0],S=h[1],V=h[2],fa=h[3],ha=y+y,L=S+S,R=V+V;h=y*ha;const ea=y*L;y*=R;const qa=S*L;S*=R;V*=R;ha*=fa;L*=fa;fa*=R;R=g[0];const ra=g[1];g=g[2];a[0]=(1-(qa+V))*R;a[1]=(ea+fa)*R;a[2]=(y-L)*R;a[3]=0;a[4]=(ea-fa)*ra;a[5]=(1-(h+V))*ra;a[6]=(S+ha)*ra;a[7]=0;a[8]=(y+L)*g;a[9]=(S-ha)*g;a[10]=(1-(h+qa))*g;a[11]=
0;a[12]=Y[0];a[13]=Y[1];a[14]=Y[2];a[15]=1;return a}function ba(a,h,Y,g,y){var S=h[0],V=h[1],fa=h[2],ha=h[3],L=S+S,R=V+V,ea=fa+fa;h=S*L;var qa=S*R,ra=S*ea;S=V*R;V*=ea;var xa=fa*ea;fa=ha*L;R*=ha;const za=ha*ea;var Ba=g[0],Ia=g[1];ea=g[2];g=y[0];ha=y[1];y=y[2];L=(1-(S+xa))*Ba;const Ha=(qa+za)*Ba;Ba*=ra-R;qa=(qa-za)*Ia;xa=(1-(h+xa))*Ia;Ia*=V+fa;ra=(ra+R)*ea;V=(V-fa)*ea;h=(1-(h+S))*ea;a[0]=L;a[1]=Ha;a[2]=Ba;a[3]=0;a[4]=qa;a[5]=xa;a[6]=Ia;a[7]=0;a[8]=ra;a[9]=V;a[10]=h;a[11]=0;a[12]=Y[0]+g-(L*g+qa*ha+ra*
y);a[13]=Y[1]+ha-(Ha*g+xa*ha+V*y);a[14]=Y[2]+y-(Ba*g+Ia*ha+h*y);a[15]=1;return a}function J(a,h){var Y=h[0],g=h[1],y=h[2];h=h[3];var S=Y+Y,V=g+g;const fa=y+y;Y*=S;const ha=g*S;g*=V;const L=y*S,R=y*V;y*=fa;S*=h;V*=h;h*=fa;a[0]=1-g-y;a[1]=ha+h;a[2]=L-V;a[3]=0;a[4]=ha-h;a[5]=1-Y-y;a[6]=R+S;a[7]=0;a[8]=L+V;a[9]=R-S;a[10]=1-Y-g;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function w(a,h,Y,g,y,S,V){const fa=1/(Y-h),ha=1/(y-g),L=1/(S-V);a[0]=2*S*fa;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*S*ha;a[6]=0;a[7]=
0;a[8]=(Y+h)*fa;a[9]=(y+g)*ha;a[10]=(V+S)*L;a[11]=-1;a[12]=0;a[13]=0;a[14]=V*S*2*L;a[15]=0;return a}function c(a,h,Y,g,y){h=1/Math.tan(h/2);let S=void 0;a[0]=h/Y;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=h;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=y&&Infinity!==y?(S=1/(g-y),a[10]=(y+g)*S,a[14]=2*y*g*S):(a[10]=-1,a[14]=-2*g);return a}function n(a,h,Y,g){const y=Math.tan(h.upDegrees*Math.PI/180),S=Math.tan(h.downDegrees*Math.PI/180),V=Math.tan(h.leftDegrees*Math.PI/180);h=Math.tan(h.rightDegrees*
Math.PI/180);const fa=2/(V+h),ha=2/(y+S);a[0]=fa;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=ha;a[6]=0;a[7]=0;a[8]=-((V-h)*fa*.5);a[9]=(y-S)*ha*.5;a[10]=g/(Y-g);a[11]=-1;a[12]=0;a[13]=0;a[14]=g*Y/(Y-g);a[15]=0;return a}function Q(a,h,Y,g,y,S,V){const fa=1/(h-Y),ha=1/(g-y),L=1/(S-V);a[0]=-2*fa;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*ha;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*L;a[11]=0;a[12]=(h+Y)*fa;a[13]=(y+g)*ha;a[14]=(V+S)*L;a[15]=1;return a}function Z(a,h,Y,g){let y=void 0,S=void 0;var V=void 0,fa=void 0;let ha=
void 0,L=void 0;var R=void 0,ea=void 0;let qa=void 0,ra=void 0;const xa=h[0],za=h[1];h=h[2];V=g[0];fa=g[1];g=g[2];R=Y[0];ea=Y[1];Y=Y[2];if(Math.abs(xa-R)<W.EPSILON&&Math.abs(za-ea)<W.EPSILON&&Math.abs(h-Y)<W.EPSILON)return D(a);R=xa-R;ea=za-ea;qa=h-Y;ra=1/Math.sqrt(R*R+ea*ea+qa*qa);R*=ra;ea*=ra;qa*=ra;y=fa*qa-g*ea;S=g*R-V*qa;V=V*ea-fa*R;(ra=Math.sqrt(y*y+S*S+V*V))?(ra=1/ra,y*=ra,S*=ra,V*=ra):V=S=y=0;fa=ea*V-qa*S;ha=qa*y-R*V;L=R*S-ea*y;(ra=Math.sqrt(fa*fa+ha*ha+L*L))?(ra=1/ra,fa*=ra,ha*=ra,L*=ra):
L=ha=fa=0;a[0]=y;a[1]=fa;a[2]=R;a[3]=0;a[4]=S;a[5]=ha;a[6]=ea;a[7]=0;a[8]=V;a[9]=L;a[10]=qa;a[11]=0;a[12]=-(y*xa+S*za+V*h);a[13]=-(fa*xa+ha*za+L*h);a[14]=-(R*xa+ea*za+qa*h);a[15]=1;return a}function ja(a,h,Y,g){const y=h[0],S=h[1];h=h[2];var V=g[0];const fa=g[1];var ha=g[2];g=y-Y[0];let L=S-Y[1];Y=h-Y[2];let R=g*g+L*L+Y*Y;0<R&&(R=1/Math.sqrt(R),g*=R,L*=R,Y*=R);let ea=fa*Y-ha*L;ha=ha*g-V*Y;V=V*L-fa*g;R=ea*ea+ha*ha+V*V;0<R&&(R=1/Math.sqrt(R),ea*=R,ha*=R,V*=R);a[0]=ea;a[1]=ha;a[2]=V;a[3]=0;a[4]=L*V-
Y*ha;a[5]=Y*ea-g*V;a[6]=g*ha-L*ea;a[7]=0;a[8]=g;a[9]=L;a[10]=Y;a[11]=0;a[12]=y;a[13]=S;a[14]=h;a[15]=1;return a}function oa(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}function ma(a){return Math.sqrt(a[0]**2+a[1]**2+a[2]**2+a[3]**2+a[4]**2+a[5]**2+a[6]**2+a[7]**2+a[8]**2+a[9]**2+a[10]**2+a[11]**2+a[12]**2+a[13]**2+a[14]**2+a[15]**2)}function la(a,h,Y){a[0]=h[0]+
Y[0];a[1]=h[1]+Y[1];a[2]=h[2]+Y[2];a[3]=h[3]+Y[3];a[4]=h[4]+Y[4];a[5]=h[5]+Y[5];a[6]=h[6]+Y[6];a[7]=h[7]+Y[7];a[8]=h[8]+Y[8];a[9]=h[9]+Y[9];a[10]=h[10]+Y[10];a[11]=h[11]+Y[11];a[12]=h[12]+Y[12];a[13]=h[13]+Y[13];a[14]=h[14]+Y[14];a[15]=h[15]+Y[15];return a}function pa(a,h,Y){a[0]=h[0]-Y[0];a[1]=h[1]-Y[1];a[2]=h[2]-Y[2];a[3]=h[3]-Y[3];a[4]=h[4]-Y[4];a[5]=h[5]-Y[5];a[6]=h[6]-Y[6];a[7]=h[7]-Y[7];a[8]=h[8]-Y[8];a[9]=h[9]-Y[9];a[10]=h[10]-Y[10];a[11]=h[11]-Y[11];a[12]=h[12]-Y[12];a[13]=h[13]-Y[13];a[14]=
h[14]-Y[14];a[15]=h[15]-Y[15];return a}function wa(a,h,Y){a[0]=h[0]*Y;a[1]=h[1]*Y;a[2]=h[2]*Y;a[3]=h[3]*Y;a[4]=h[4]*Y;a[5]=h[5]*Y;a[6]=h[6]*Y;a[7]=h[7]*Y;a[8]=h[8]*Y;a[9]=h[9]*Y;a[10]=h[10]*Y;a[11]=h[11]*Y;a[12]=h[12]*Y;a[13]=h[13]*Y;a[14]=h[14]*Y;a[15]=h[15]*Y;return a}function Ca(a,h,Y,g){a[0]=h[0]+Y[0]*g;a[1]=h[1]+Y[1]*g;a[2]=h[2]+Y[2]*g;a[3]=h[3]+Y[3]*g;a[4]=h[4]+Y[4]*g;a[5]=h[5]+Y[5]*g;a[6]=h[6]+Y[6]*g;a[7]=h[7]+Y[7]*g;a[8]=h[8]+Y[8]*g;a[9]=h[9]+Y[9]*g;a[10]=h[10]+Y[10]*g;a[11]=h[11]+Y[11]*g;
a[12]=h[12]+Y[12]*g;a[13]=h[13]+Y[13]*g;a[14]=h[14]+Y[14]*g;a[15]=h[15]+Y[15]*g;return a}function Ka(a,h){return a[0]===h[0]&&a[1]===h[1]&&a[2]===h[2]&&a[3]===h[3]&&a[4]===h[4]&&a[5]===h[5]&&a[6]===h[6]&&a[7]===h[7]&&a[8]===h[8]&&a[9]===h[9]&&a[10]===h[10]&&a[11]===h[11]&&a[12]===h[12]&&a[13]===h[13]&&a[14]===h[14]&&a[15]===h[15]}function Ra(a,h){if(a===h)return!0;const Y=a[0],g=a[1],y=a[2],S=a[3],V=a[4],fa=a[5],ha=a[6],L=a[7],R=a[8],ea=a[9],qa=a[10],ra=a[11],xa=a[12],za=a[13],Ba=a[14];a=a[15];const Ia=
h[0],Ha=h[1],Fa=h[2],Ea=h[3],Ga=h[4],Qa=h[5],sa=h[6],bb=h[7],ab=h[8],Sa=h[9],b=h[10],$a=h[11],Ta=h[12],pb=h[13],ka=h[14];h=h[15];return Math.abs(Y-Ia)<=W.EPSILON*Math.max(1,Math.abs(Y),Math.abs(Ia))&&Math.abs(g-Ha)<=W.EPSILON*Math.max(1,Math.abs(g),Math.abs(Ha))&&Math.abs(y-Fa)<=W.EPSILON*Math.max(1,Math.abs(y),Math.abs(Fa))&&Math.abs(S-Ea)<=W.EPSILON*Math.max(1,Math.abs(S),Math.abs(Ea))&&Math.abs(V-Ga)<=W.EPSILON*Math.max(1,Math.abs(V),Math.abs(Ga))&&Math.abs(fa-Qa)<=W.EPSILON*Math.max(1,Math.abs(fa),
Math.abs(Qa))&&Math.abs(ha-sa)<=W.EPSILON*Math.max(1,Math.abs(ha),Math.abs(sa))&&Math.abs(L-bb)<=W.EPSILON*Math.max(1,Math.abs(L),Math.abs(bb))&&Math.abs(R-ab)<=W.EPSILON*Math.max(1,Math.abs(R),Math.abs(ab))&&Math.abs(ea-Sa)<=W.EPSILON*Math.max(1,Math.abs(ea),Math.abs(Sa))&&Math.abs(qa-b)<=W.EPSILON*Math.max(1,Math.abs(qa),Math.abs(b))&&Math.abs(ra-$a)<=W.EPSILON*Math.max(1,Math.abs(ra),Math.abs($a))&&Math.abs(xa-Ta)<=W.EPSILON*Math.max(1,Math.abs(xa),Math.abs(Ta))&&Math.abs(za-pb)<=W.EPSILON*Math.max(1,
Math.abs(za),Math.abs(pb))&&Math.abs(Ba-ka)<=W.EPSILON*Math.max(1,Math.abs(Ba),Math.abs(ka))&&Math.abs(a-h)<=W.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))}function Pa(a){const h=W.EPSILON,Y=a[0],g=a[1],y=a[2],S=a[4],V=a[5],fa=a[6],ha=a[8],L=a[9];a=a[10];return Math.abs(1-(Y*Y+S*S+ha*ha))<=h&&Math.abs(1-(g*g+V*V+L*L))<=h&&Math.abs(1-(y*y+fa*fa+a*a))<=h}const va=e.create();e=Object.freeze({__proto__:null,copy:U,set:p,identity:D,transpose:x,invert:q,adjoint:r,determinant:t,multiply:A,translate:P,scale:O,
rotate:m,rotateX:I,rotateY:d,rotateZ:l,fromTranslation:K,fromScaling:G,fromRotation:u,fromXRotation:B,fromYRotation:C,fromZRotation:z,fromRotationTranslation:M,fromQuat2:N,getTranslation:da,getScaling:F,getRotation:H,fromRotationTranslationScale:T,fromRotationTranslationScaleOrigin:ba,fromQuat:J,frustum:w,perspective:c,perspectiveFromFieldOfView:n,ortho:Q,lookAt:Z,targetTo:ja,str:oa,frob:ma,add:la,subtract:pa,multiplyScalar:wa,multiplyScalarAndAdd:Ca,exactEquals:Ka,equals:Ra,isOrthoNormal:Pa,mul:A,
sub:pa});k.add=la;k.adjoint=r;k.copy=U;k.determinant=t;k.equals=Ra;k.exactEquals=Ka;k.frob=ma;k.fromQuat=J;k.fromQuat2=N;k.fromRotation=u;k.fromRotationTranslation=M;k.fromRotationTranslationScale=T;k.fromRotationTranslationScaleOrigin=ba;k.fromScaling=G;k.fromTranslation=K;k.fromXRotation=B;k.fromYRotation=C;k.fromZRotation=z;k.frustum=w;k.getRotation=H;k.getScaling=F;k.getTranslation=da;k.identity=D;k.invert=q;k.isOrthoNormal=Pa;k.lookAt=Z;k.mat4=e;k.mul=A;k.multiply=A;k.multiplyScalar=wa;k.multiplyScalarAndAdd=
Ca;k.ortho=Q;k.perspective=c;k.perspectiveFromFieldOfView=n;k.rotate=m;k.rotateX=I;k.rotateY=d;k.rotateZ=l;k.scale=O;k.set=p;k.str=oa;k.sub=pa;k.subtract=pa;k.targetTo=ja;k.translate=P;k.transpose=x})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(k,e,W,U,p){function D(){return!!e._pe}function x(){return!!p("esri-wasm")}function q(){return m?m:m=(new Promise((d,l)=>k(["./pe-wasm"],d,l))).then(d=>d.peWasm).then(({default:d})=>
d({locateFile:l=>U.getAssetUrl(`esri/geometry/support/${l}`)})).then(d=>{r(d)})}function r(d){function l(u,B,C){u[B]=C(u[B])}e._pe=d;e.PeDefs.init();e.PeGTlistExtended.init();e.PeNotationMgrs.init();e.PeNotationUtm.init();e.PePCSInfo.init();e.PeGCSExtent=function(u){function B(){return u.apply(this,arguments)||this}W._inheritsLoose(B,u);B.prototype.destroy=function(){e._pe.destroy(this)};return B}(e._pe.PeGCSExtent);d=[e._pe.PeDatum,e._pe.PeGeogcs,e._pe.PeGeogtran,e._pe.PeObject,e._pe.PeParameter,
e._pe.PePrimem,e._pe.PeProjcs,e._pe.PeSpheroid,e._pe.PeUnit];for(var K of d)l(K.prototype,"getName",u=>function(){return u.call(this,Array(e.PeDefs.PE_NAME_MAX))});for(const u of[e._pe.PeGeogtran,e._pe.PeProjcs])l(u.prototype,"getParameters",B=>function(){const C=Array(e.PeDefs.PE_PARM_MAX);let z=B.call(this);for(let M=0;M<C.length;M++){const N=e._pe.getValue(z,"*");C[M]=N?e._pe.wrapPointer(N,e._pe.PeParameter):null;z+=Int32Array.BYTES_PER_ELEMENT}return C});l(e._pe.PeHorizon.prototype,"getCoord",
u=>function(){const B=this.getSize();if(!B)return null;const C=[],z=u.call(this);O(C,B,z);return C});l(e._pe.PeGTlistExtendedEntry.prototype,"getEntries",u=>{const B=e._pe._pe_getPeGTlistExtendedGTsSize();return function(){let C=null;var z=u.call(this);if(!e._pe.compare(z,e._pe.NULL)){C=[z];const M=this.getSteps();if(1<M){z=e._pe.getPointer(z);for(let N=1;N<M;N++)C.push(e._pe.wrapPointer(z+B*N,e._pe.PeGTlistExtendedGTs))}}return C}});const G=e._pe._pe_getPeHorizonSize();K=u=>function(){let B=this._cache;
B||(this._cache=B=new Map);if(B.has(u))return B.get(u);let C=null;var z=u.call(this);if(!e._pe.compare(z,e._pe.NULL)){C=[z];const M=z.getNump();if(1<M){z=e._pe.getPointer(z);for(let N=1;N<M;N++)C.push(e._pe.wrapPointer(z+G*N,e._pe.PeHorizon))}}B.set(u,C);return C};l(e._pe.PeProjcs.prototype,"horizonGcsGenerate",K);l(e._pe.PeProjcs.prototype,"horizonPcsGenerate",K);e._pe.PeObject.prototype.toString=function(u=e.PeDefs.PE_STR_OPTS_NONE){e._pe.ensureCache.prepare();const B=e._pe.getPointer(this),C=e._pe.ensureInt8(Array(e.PeDefs.PE_BUFFER_MAX));
return e._pe.UTF8ToString(e._pe._pe_object_to_string_ext(B,u,C))}}function t(d){if(d){var l=e._pe.getClass(d);l&&(l=e._pe.getCache(l))&&(d=e._pe.getPointer(d))&&delete l[d]}}function A(d,l){const K=[];l=Array(l);for(let G=0;G<d;G++)K.push(e._pe.ensureInt8(l));return K}function P(d){let l;Array.isArray(d[0])?(l=[],d.forEach(K=>{l.push(K[0],K[1])})):l=d;return l}function O(d,l,K,G=!1){if(G)for(G=0;G<2*l;G++)d[G]=e._pe.getValue(K+G*Float64Array.BYTES_PER_ELEMENT,"double");else{G=0===d.length;for(let u=
0;u<l;u++)G&&(d[u]=Array(2)),d[u][0]=e._pe.getValue(K,"double"),d[u][1]=e._pe.getValue(K+Float64Array.BYTES_PER_ELEMENT,"double"),K+=2*Float64Array.BYTES_PER_ELEMENT}}let m;e._pe=null;e.PeCSTransformations=void 0;(function(d){function l(u,B,C){e._pe.ensureCache.prepare();var z=P(C);const M=C===z;z=e._pe.ensureFloat64(z);(u=e._pe._pe_geog_to_proj(e._pe.getPointer(u),B,z))&&O(C,B,z,M);return u}function K(u,B,C){return G(u,B,C,0)}function G(u,B,C,z){e._pe.ensureCache.prepare();var M=P(C);const N=C===
M;M=e._pe.ensureFloat64(M);(u=e._pe._pe_proj_to_geog_center(e._pe.getPointer(u),B,M,z))&&O(C,B,M,N);return u}d.geogToProj=l;d.projGeog=function(u,B,C,z){switch(z){case e.PeDefs.PE_TRANSFORM_P_TO_G:return K(u,B,C);case e.PeDefs.PE_TRANSFORM_G_TO_P:return l(u,B,C)}return 0};d.projToGeog=K;d.projToGeogCenter=G})(e.PeCSTransformations||(e.PeCSTransformations={}));e.PeDefs=void 0;(function(d){d.init=function(){d.PE_BUFFER_MAX=e._pe.PeDefs.prototype.PE_BUFFER_MAX;d.PE_NAME_MAX=e._pe.PeDefs.prototype.PE_NAME_MAX;
d.PE_MGRS_MAX=e._pe.PeDefs.prototype.PE_MGRS_MAX;d.PE_USNG_MAX=e._pe.PeDefs.prototype.PE_USNG_MAX;d.PE_DD_MAX=e._pe.PeDefs.prototype.PE_DD_MAX;d.PE_DDM_MAX=e._pe.PeDefs.prototype.PE_DDM_MAX;d.PE_DMS_MAX=e._pe.PeDefs.prototype.PE_DMS_MAX;d.PE_UTM_MAX=e._pe.PeDefs.prototype.PE_UTM_MAX;d.PE_PARM_MAX=e._pe.PeDefs.prototype.PE_PARM_MAX;d.PE_TYPE_NONE=e._pe.PeDefs.prototype.PE_TYPE_NONE;d.PE_TYPE_GEOGCS=e._pe.PeDefs.prototype.PE_TYPE_GEOGCS;d.PE_TYPE_PROJCS=e._pe.PeDefs.prototype.PE_TYPE_PROJCS;d.PE_TYPE_GEOGTRAN=
e._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;d.PE_TYPE_COORDSYS=e._pe.PeDefs.prototype.PE_TYPE_COORDSYS;d.PE_TYPE_UNIT=e._pe.PeDefs.prototype.PE_TYPE_UNIT;d.PE_TYPE_LINUNIT=e._pe.PeDefs.prototype.PE_TYPE_LINUNIT;d.PE_STR_OPTS_NONE=e._pe.PeDefs.prototype.PE_STR_OPTS_NONE;d.PE_STR_AUTH_NONE=e._pe.PeDefs.prototype.PE_STR_AUTH_NONE;d.PE_STR_AUTH_TOP=e._pe.PeDefs.prototype.PE_STR_AUTH_TOP;d.PE_STR_NAME_CANON=e._pe.PeDefs.prototype.PE_STR_NAME_CANON;d.PE_PARM_X0=e._pe.PeDefs.prototype.PE_PARM_X0;d.PE_PARM_ND=
e._pe.PeDefs.prototype.PE_PARM_ND;d.PE_TRANSFORM_1_TO_2=e._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;d.PE_TRANSFORM_2_TO_1=e._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;d.PE_TRANSFORM_P_TO_G=e._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;d.PE_TRANSFORM_G_TO_P=e._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;d.PE_HORIZON_RECT=e._pe.PeDefs.prototype.PE_HORIZON_RECT;d.PE_HORIZON_POLY=e._pe.PeDefs.prototype.PE_HORIZON_POLY;d.PE_HORIZON_LINE=e._pe.PeDefs.prototype.PE_HORIZON_LINE;d.PE_HORIZON_DELTA=e._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(e.PeDefs||
(e.PeDefs={}));e.PeFactory=void 0;(function(d){function l(B,C){let z=null,M=K[B];M||(M={},K[B]=M);M.hasOwnProperty(String(C))?z=M[C]:(B=e._pe.PeFactory.prototype.factoryByType(B,C),e._pe.compare(B,e._pe.NULL)||(z=B,M[C]=z));return z=u(z)}const K={},G={},u=B=>{if(B){const C=B.getType();switch(C){case e.PeDefs.PE_TYPE_GEOGCS:B=e._pe.castObject(B,e._pe.PeGeogcs);break;case e.PeDefs.PE_TYPE_PROJCS:B=e._pe.castObject(B,e._pe.PeProjcs);break;case e.PeDefs.PE_TYPE_GEOGTRAN:B=e._pe.castObject(B,e._pe.PeGeogtran);
break;default:C&e.PeDefs.PE_TYPE_UNIT&&(B=e._pe.castObject(B,e._pe.PeUnit))}}return B};d.initialize=function(){e._pe.PeFactory.prototype.initialize(null)};d.coordsys=function(B){return l(e.PeDefs.PE_TYPE_COORDSYS,B)};d.factoryByType=l;d.fromString=function(B,C){let z=null,M=G[B];M||(M={},G[B]=M);M.hasOwnProperty(C)?z=M[C]:(B=e._pe.PeFactory.prototype.fromString(B,C),e._pe.compare(B,e._pe.NULL)||(z=B,M[C]=z));return z=u(z)};d.geogcs=function(B){return l(e.PeDefs.PE_TYPE_GEOGCS,B)};d.geogtran=function(B){return l(e.PeDefs.PE_TYPE_GEOGTRAN,
B)};d.getCode=function(B){return e._pe.PeFactory.prototype.getCode(B)};d.projcs=function(B){return l(e.PeDefs.PE_TYPE_PROJCS,B)};d.unit=function(B){return l(e.PeDefs.PE_TYPE_UNIT,B)}})(e.PeFactory||(e.PeFactory={}));e.PeGCSExtent=null;e.PeGTlistExtended=void 0;(function(d){let l;d.init=function(){d.PE_GTLIST_OPTS_COMMON=e._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;l=e._pe._pe_getPeGTlistExtendedEntrySize()};d.getGTlist=function(K,G,u,B,C,z){let M=null;const N=new e._pe.PeInteger(z);try{const da=
e._pe.PeGTlistExtended.prototype.getGTlist(K,G,u,B,C,N);if(z=N.val)if(M=[da],1<z){const F=e._pe.getPointer(da);for(K=1;K<z;K++)M.push(e._pe.wrapPointer(F+l*K,e._pe.PeGTlistExtendedEntry))}}finally{e._pe.destroy(N)}return M}})(e.PeGTlistExtended||(e.PeGTlistExtended={}));e.PeGTlistExtendedEntry=void 0;(function(d){d.destroy=function(l){if(l&&l.length){for(const K of l)t(K),K.getEntries().forEach(G=>{t(G);G=G.getGeogtran();t(G);G.getParameters().forEach(t);[G.getGeogcs1(),G.getGeogcs2()].forEach(u=>
{t(u);const B=u.getDatum();t(B);t(B.getSpheroid());t(u.getPrimem());t(u.getUnit())})});e._pe.PeGTlistExtendedEntry.prototype.Delete(l[0])}}})(e.PeGTlistExtendedEntry||(e.PeGTlistExtendedEntry={}));e.PeGTTransformations=void 0;(function(d){d.geogToGeog=function(l,K,G,u,B){e._pe.ensureCache.prepare();var C=P(G);const z=G===C;C=e._pe.ensureFloat64(C);let M=0;u&&(M=e._pe.ensureFloat64(u));(l=e._pe._pe_geog_to_geog(e._pe.getPointer(l),K,C,M,B))&&O(G,K,C,z);return l}})(e.PeGTTransformations||(e.PeGTTransformations=
{}));e.PeNotationDms=void 0;(function(d){const l=(G,u,B,C,z,M)=>{e._pe.ensureCache.prepare();switch(G){case "dd":var N=e._pe._pe_geog_to_dd;var da=e.PeDefs.PE_DD_MAX;break;case "ddm":N=e._pe._pe_geog_to_ddm;da=e.PeDefs.PE_DDM_MAX;break;case "dms":N=e._pe._pe_geog_to_dms,da=e.PeDefs.PE_DMS_MAX}G=0;u&&(G=e._pe.getPointer(u));u=P(C);u=e._pe.ensureFloat64(u);da=A(B,da);C=e._pe.ensureInt32(da);if(z=N(G,B,u,z,C))for(N=0;N<B;N++)M[N]=e._pe.UTF8ToString(da[N]);return z},K=(G,u,B,C,z)=>{e._pe.ensureCache.prepare();
switch(G){case "dd":var M=e._pe._pe_dd_to_geog;break;case "ddm":M=e._pe._pe_ddm_to_geog;break;case "dms":M=e._pe._pe_dms_to_geog}G=0;u&&(G=e._pe.getPointer(u));u=C.map(N=>e._pe.ensureString(N));C=e._pe.ensureInt32(u);u=e._pe.ensureFloat64(Array(2*B));(M=M(G,B,C,u))&&O(z,B,u);return M};d.geogToDms=function(G,u,B,C,z){return l("dms",G,u,B,C,z)};d.dmsToGeog=function(G,u,B,C){return K("dms",G,u,B,C)};d.geogToDdm=function(G,u,B,C,z){return l("ddm",G,u,B,C,z)};d.ddmToGeog=function(G,u,B,C){return K("ddm",
G,u,B,C)};d.geogToDd=function(G,u,B,C,z){return l("dd",G,u,B,C,z)};d.ddToGeog=function(G,u,B,C){return K("dd",G,u,B,C)}})(e.PeNotationDms||(e.PeNotationDms={}));e.PeNotationMgrs=void 0;(function(d){d.init=function(){d.PE_MGRS_STYLE_NEW=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;d.PE_MGRS_STYLE_OLD=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;d.PE_MGRS_STYLE_AUTO=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;d.PE_MGRS_180_ZONE_1_PLUS=e._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;
d.PE_MGRS_ADD_SPACES=e._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};d.geogToMgrsExtended=function(l,K,G,u,B,C,z){e._pe.ensureCache.prepare();let M=0;l&&(M=e._pe.getPointer(l));l=P(G);G=e._pe.ensureFloat64(l);l=A(K,e.PeDefs.PE_MGRS_MAX);const N=e._pe.ensureInt32(l);if(u=e._pe._pe_geog_to_mgrs_extended(M,K,G,u,B,C,N))for(B=0;B<K;B++)z[B]=e._pe.UTF8ToString(l[B]);return u};d.mgrsToGeogExtended=function(l,K,G,u,B){e._pe.ensureCache.prepare();let C=0;l&&(C=e._pe.getPointer(l));l=G.map(z=>e._pe.ensureString(z));
G=e._pe.ensureInt32(l);l=e._pe.ensureFloat64(Array(2*K));(u=e._pe._pe_mgrs_to_geog_extended(C,K,G,u,l))&&O(B,K,l);return u}})(e.PeNotationMgrs||(e.PeNotationMgrs={}));e.PeNotationUsng=void 0;(function(d){d.geogToUsng=function(l,K,G,u,B,C,z){e._pe.ensureCache.prepare();let M=0;l&&(M=e._pe.getPointer(l));l=P(G);G=e._pe.ensureFloat64(l);l=A(K,e.PeDefs.PE_MGRS_MAX);const N=e._pe.ensureInt32(l);if(u=e._pe._pe_geog_to_usng(M,K,G,u,B,C,N))for(B=0;B<K;B++)z[B]=e._pe.UTF8ToString(l[B]);return u};d.usngToGeog=
function(l,K,G,u){e._pe.ensureCache.prepare();var B=0;l&&(B=e._pe.getPointer(l));l=G.map(C=>e._pe.ensureString(C));G=e._pe.ensureInt32(l);l=e._pe.ensureFloat64(Array(2*K));(B=e._pe._pe_usng_to_geog(B,K,G,l))&&O(u,K,l);return B}})(e.PeNotationUsng||(e.PeNotationUsng={}));e.PeNotationUtm=void 0;(function(d){d.init=function(){d.PE_UTM_OPTS_NONE=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;d.PE_UTM_OPTS_ADD_SPACES=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;d.PE_UTM_OPTS_NS=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};
d.geogToUtm=function(l,K,G,u,B){e._pe.ensureCache.prepare();var C=0;l&&(C=e._pe.getPointer(l));l=P(G);G=e._pe.ensureFloat64(l);l=A(K,e.PeDefs.PE_UTM_MAX);const z=e._pe.ensureInt32(l);if(u=e._pe._pe_geog_to_utm(C,K,G,u,z))for(C=0;C<K;C++)B[C]=e._pe.UTF8ToString(l[C]);return u};d.utmToGeog=function(l,K,G,u,B){e._pe.ensureCache.prepare();let C=0;l&&(C=e._pe.getPointer(l));l=G.map(z=>e._pe.ensureString(z));G=e._pe.ensureInt32(l);l=e._pe.ensureFloat64(Array(2*K));(u=e._pe._pe_utm_to_geog(C,K,G,u,l))&&
O(B,K,l);return u}})(e.PeNotationUtm||(e.PeNotationUtm={}));e.PePCSInfo=void 0;(function(d){const l=new Map;d.init=function(){d.PE_PCSINFO_OPTION_NONE=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;d.PE_PCSINFO_OPTION_DOMAIN=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;d.PE_POLE_OUTSIDE_BOUNDARY=e._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;d.PE_POLE_POINT=e._pe.PePCSInfo.prototype.PE_POLE_POINT};d.generate=function(K,G=d.PE_PCSINFO_OPTION_DOMAIN){let u,B;l.has(K)&&(B=l.get(K),B[G]&&
(u=B[G]));u||(u=e._pe.PePCSInfo.prototype.generate(K,G),B||(B=[],l.set(K,B)),B[G]=u);return u}})(e.PePCSInfo||(e.PePCSInfo={}));e.PeVersion=void 0;(function(d){d.versionString=function(){return e._pe.PeVersion.prototype.version_string()}})(e.PeVersion||(e.PeVersion={}));const I=Object.freeze({__proto__:null,get _pe(){return e._pe},isLoaded:D,isSupported:x,load:q,get PeCSTransformations(){return e.PeCSTransformations},get PeDefs(){return e.PeDefs},get PeFactory(){return e.PeFactory},get PeGCSExtent(){return e.PeGCSExtent},
get PeGTlistExtended(){return e.PeGTlistExtended},get PeGTlistExtendedEntry(){return e.PeGTlistExtendedEntry},get PeGTTransformations(){return e.PeGTTransformations},get PeNotationDms(){return e.PeNotationDms},get PeNotationMgrs(){return e.PeNotationMgrs},get PeNotationUsng(){return e.PeNotationUsng},get PeNotationUtm(){return e.PeNotationUtm},get PePCSInfo(){return e.PePCSInfo},get PeVersion(){return e.PeVersion},_init:r});e._init=r;e.isLoaded=D;e.isSupported=x;e.load=q;e.pe=I})},"esri/geometry/support/geodesicConstants":function(){define(["exports",
"./Ellipsoid"],function(k,e){const W=Math.PI/180;var U=e.earth.radius;const p=e.earth.eccentricitySquared;U={a1:U*p,a2:U*p*U*p,a3:U*p*p/2,a4:U*p*U*p*2.5,a5:U*p+U*p*p/2,a6:1-p};e={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:e.earth.radius,f:e.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:e.moon.radius,f:e.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:e.mars.radius,f:e.mars.flattening},104906:{a:6200,
f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,
f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},
104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:e.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};
k.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;k.earthEllipsoidConstants=U;k.spheroids=e;k.toRadians=W;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(k){return function(){function e(U){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(U&&U.steps)for(const p of U.steps)p instanceof k?this.steps.push(p):this.steps.push(new k({wkid:p.wkid,wkt:p.wkt,isInverse:p.isInverse}))}
e.cacheKey=function(U,p){return[void 0!==U.wkid&&null!==U.wkid?U.wkid.toString():"-1",void 0!==U.wkt&&null!==U.wkt?U.wkt.toString():"",void 0!==p.wkid&&null!==p.wkid?p.wkid.toString():"-1",void 0!==p.wkt&&null!==p.wkt?p.wkt.toString():""].join()};e.fromGE=function(U){const p=new e;let D="";for(const x of U.steps)U=k.fromGE(x),p.steps.push(U),D+=U.uid.toString()+",";p._cached_projection={};p._gtlistentry=null;p._chain=D;return p};var W=e.prototype;W.getInverse=function(){const U=new e;U.steps=[];for(let p=
this.steps.length-1;0<=p;p--)U.steps.push(this.steps[p].getInverse());return U};W.getGTListEntry=function(){let U="";for(const p of this.steps)U+=p.uid.toString()+",";U!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=U);return this._gtlistentry};W.assignCachedGe=function(U,p,D){this._cached_projection[e.cacheKey(U,p)]=D};W.getCachedGeTransformation=function(U,p){let D="";for(const x of this.steps)D+=x.uid.toString()+",";D!==this._chain&&(this._gtlistentry=null,this._cached_projection=
{},this._chain=D);U=this._cached_projection[e.cacheKey(U,p)];return void 0===U?null:U};return e}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(k){let e=0;return function(){function W(U=null){this.uid=e++;U?(this._wkt=void 0!==U.wkt?U.wkt:null,this._wkid=void 0!==U.wkid?U.wkid:-1,this._isInverse=void 0!==U.isInverse?!0===U.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}W.fromGE=function(U){const p=new W;
p._wkt=U.wkt;p._wkid=U.wkid;p._isInverse=U.isInverse;return p};W.prototype.getInverse=function(){const U=new W;U._wkt=this.wkt;U._wkid=this._wkid;U._isInverse=!this.isInverse;return U};k._createClass(W,[{key:"wkt",get:function(){return this._wkt},set:function(U){this._wkt=U;this.uid=e++}},{key:"wkid",get:function(){return this._wkid},set:function(U){this._wkid=U;this.uid=e++}},{key:"isInverse",get:function(){return this._isInverse},set:function(U){this._isInverse=U;this.uid=e++}}]);return W}()})},
"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(k,e,W,U){k.getGeometryZScaler=function(p,D,x){if(e.isNone(D)||e.isNone(x)||x.vcsWkid||U.equals(D,x))return null;D=W.getMetersPerVerticalUnitForSR(D);x=W.getMetersPerVerticalUnitForSR(x);const q=D/x;if(1===q)return null;switch(p){case "point":case "esriGeometryPoint":return r=>{r&&null!=r.z&&(r.z*=q)};case "polyline":case "esriGeometryPolyline":return r=>{if(r)for(const t of r.paths)for(const A of t)2<
A.length&&(A[2]*=q)};case "polygon":case "esriGeometryPolygon":return r=>{if(r)for(const t of r.rings)for(const A of t)2<A.length&&(A[2]*=q)};case "multipoint":case "esriGeometryMultipoint":return r=>{if(r)for(const t of r.points)2<t.length&&(t[2]*=q)};case "extent":case "esriGeometryExtent":return r=>{r&&null!=r.zmin&&null!=r.zmax&&(r.zmin*=q,r.zmax*=q)};default:return null}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(k){let e=
function(x,q,r){this.x=x;this.y=q;this.spatialReference=r;this.m=this.z=void 0},W=function(x,q,r,t){this.rings=x;this.spatialReference=q;this.hasM=this.hasZ=void 0;r&&(this.hasZ=r);t&&(this.hasM=t)},U=function(x,q,r,t){this.paths=x;this.spatialReference=q;this.hasM=this.hasZ=void 0;r&&(this.hasZ=r);t&&(this.hasM=t)},p=function(x,q,r,t){this.points=x;this.spatialReference=q;this.hasM=this.hasZ=void 0;r&&(this.hasZ=r);t&&(this.hasM=t)},D=function(x,q,r,t,A){this.xmin=x;this.ymin=q;this.xmax=r;this.ymax=
t;this.spatialReference=A;this.mmax=this.mmin=this.zmax=this.zmin=void 0};k.jsonAdapter={convertToGEGeometry:function(x,q){return null==q?null:x.convertJSONToGeometry(q)},exportPoint:function(x,q,r){r=new e(x.getPointX(q),x.getPointY(q),r);const t=x.hasZ(q),A=x.hasM(q);t&&(r.z=x.getPointZ(q));A&&(r.m=x.getPointM(q));return r},exportPolygon:function(x,q,r){return new W(x.exportPaths(q),r,x.hasZ(q),x.hasM(q))},exportPolyline:function(x,q,r){return new U(x.exportPaths(q),r,x.hasZ(q),x.hasM(q))},exportMultipoint:function(x,
q,r){return new p(x.exportPoints(q),r,x.hasZ(q),x.hasM(q))},exportExtent:function(x,q,r){var t=x.hasZ(q);const A=x.hasM(q);r=new D(x.getXMin(q),x.getYMin(q),x.getXMax(q),x.getYMax(q),r);t&&(t=x.getZExtent(q),r.zmin=t.vmin,r.zmax=t.vmax);A&&(x=x.getMExtent(q),r.mmin=x.vmin,r.mmax=x.vmax);return r}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(k,e,W,U,p,D,x,q,r,t,A,P,O,m,I,d,l,K,G,u,B,C,z){function M(J){return J.every(w=>"exceedslimit"!==w.statisticType)}const N=new Set,da=new D.MemCacheStorage(2E6);let F=0,H=function(){function J(c){this.capabilities={query:d.queryCapabilities};this.geometryType=c.geometryType;this.hasM=c.hasM;this.hasZ=c.hasZ;this.objectIdField=c.objectIdField;this.spatialReference=c.spatialReference;this.definitionExpression=c.definitionExpression;this.featureStore=c.featureStore;this.aggregateAdapter=c.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=c.timeInfo;c.cacheSpatialQueries&&(this._geometryQueryCache=new D.MemCache(F++ +"$$",da));this.fieldsIndex=new B(c.fields);c.scheduler&&c.priority&&(this._frameTask=c.scheduler.registerTask(c.priority))}var w=J.prototype;w.destroy=function(){this._frameTask=p.removeMaybe(this._frameTask);this.clearCache();p.destroyMaybe(this._geometryQueryCache);this._changeHandle=p.removeMaybe(this._changeHandle);p.destroyMaybe(this.fieldsIndex)};
w.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};w.executeQuery=function(){var c=e._asyncToGenerator(function*(n={},Q){let Z=U.clone(n),ja;try{Z=yield this._schedule(()=>u.normalizeQuery(Z,this.definitionExpression,this.spatialReference),Q),Z=yield this._reschedule(()=>this._checkQuerySupport(Z),Q),ja=yield this._reschedule(()=>this._executeGeometryQuery(Z,Q),Q),ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(Z),Q),
ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(Z),Q),ja=yield this._reschedule(()=>ja.executeTimeQuery(Z),Q),ja=yield this._reschedule(()=>ja.executeAttributesQuery(Z),Q)}catch(oa){if(oa!==u.QUERY_ENGINE_EMPTY_RESULT)throw oa;ja=new l.default([],null,this)}return ja.createQueryResponse(Z)});return function(){return c.apply(this,arguments)}}();w.executeQueryForCount=function(){var c=e._asyncToGenerator(function*(n={},Q){let Z=U.clone(n);Z.returnGeometry=!1;Z.returnCentroid=!1;Z.outSR=null;
try{Z=yield this._schedule(()=>u.normalizeQuery(Z,this.definitionExpression,this.spatialReference),Q);Z=yield this._reschedule(()=>this._checkQuerySupport(Z),Q);let ja=yield this._reschedule(()=>this._executeGeometryQuery(Z,Q),Q);ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(Z),Q);ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(Z),Q);ja=yield this._reschedule(()=>ja.executeTimeQuery(Z),Q);ja=yield this._reschedule(()=>ja.executeAttributesQuery(Z),Q);return ja.createQueryResponseForCount(Z)}catch(ja){if(ja!==
u.QUERY_ENGINE_EMPTY_RESULT)throw ja;return 0}});return function(){return c.apply(this,arguments)}}();w.executeQueryForExtent=function(){var c=e._asyncToGenerator(function*(n={},Q){let Z=U.clone(n),ja;n=Z.outSR;try{Z=yield this._schedule(()=>u.normalizeQuery(Z,this.definitionExpression,this.spatialReference),Q);Z=yield this._reschedule(()=>this._checkQuerySupport(Z),Q);Z.returnGeometry=!0;Z.returnCentroid=!1;Z.outSR=null;ja=yield this._reschedule(()=>this._executeGeometryQuery(Z,Q),Q);ja=yield this._reschedule(()=>
ja.executeAggregateIdsQuery(Z),Q);ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(Z),Q);ja=yield this._reschedule(()=>ja.executeTimeQuery(Z),Q);ja=yield this._reschedule(()=>ja.executeAttributesQuery(Z),Q);const oa=ja.size;if(!oa)return{count:oa,extent:null};q.set(ba,q.NEGATIVE_INFINITY);this.featureStore.forEachBounds(ja.items,pa=>q.expandWithAABB(ba,pa),T);const ma={xmin:ba[0],ymin:ba[1],xmax:ba[3],ymax:ba[4],spatialReference:u.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(ba[2])&&
isFinite(ba[5])&&(ma.zmin=ba[2],ma.zmax=ba[5]);const la=I.project(ma,ja.spatialReference,n);la.spatialReference=u.cleanFromGeometryEngine(n||this.spatialReference);if(0===la.xmax-la.xmin){const pa=x.getMetersPerUnitForSR(la.spatialReference);la.xmin-=pa;la.xmax+=pa}if(0===la.ymax-la.ymin){const pa=x.getMetersPerUnitForSR(la.spatialReference);la.ymin-=pa;la.ymax+=pa}if(this.hasZ&&null!=la.zmin&&null!=la.zmax&&0===la.zmax-la.zmin){const pa=x.getMetersPerUnitForSR(la.spatialReference);la.zmin-=pa;la.zmax+=
pa}return{count:oa,extent:la}}catch(oa){if(oa===u.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw oa;}});return function(){return c.apply(this,arguments)}}();w.executeQueryForIds=function(){var c=e._asyncToGenerator(function*(n={},Q){return this.executeQueryForIdSet(n,Q).then(Z=>Array.from(Z))});return function(){return c.apply(this,arguments)}}();w.executeQueryForIdSet=function(){var c=e._asyncToGenerator(function*(n={},Q){let Z=U.clone(n),ja;Z.returnGeometry=!1;Z.returnCentroid=!1;Z.outSR=
null;try{Z=yield this._schedule(()=>u.normalizeQuery(Z,this.definitionExpression,this.spatialReference),Q);Z=yield this._reschedule(()=>this._checkQuerySupport(Z),Q);ja=yield this._reschedule(()=>this._executeGeometryQuery(Z,Q),Q);ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(Z),Q);ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(Z),Q);ja=yield this._reschedule(()=>ja.executeTimeQuery(Z),Q);ja=yield this._reschedule(()=>ja.executeAttributesQuery(Z),Q);const oa=ja.items,ma=new Set;
yield this._reschedule(()=>{for(const la of oa)ma.add(ja.featureAdapter.getObjectId(la))},Q);return ma}catch(oa){if(oa===u.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw oa;}});return function(){return c.apply(this,arguments)}}();w.executeQueryForSnapping=function(){var c=e._asyncToGenerator(function*(n,Q){const {point:Z,distance:ja,types:oa}=n;if(oa===l.SnappingTypes.NONE)return{candidates:[]};const ma=yield this._reschedule(()=>this._checkQuerySupport(n.query),Q),la=!O.equals(Z.spatialReference,
this.spatialReference);la&&(yield I.checkProjectionSupport(Z.spatialReference,this.spatialReference));var pa="number"===typeof ja?ja:ja.x,wa="number"===typeof ja?ja:ja.y;pa={xmin:Z.x-pa,xmax:Z.x+pa,ymin:Z.y-wa,ymax:Z.y+wa,spatialReference:Z.spatialReference};pa=la?I.project(pa,this.spatialReference):pa;if(!pa)return{candidates:[]};wa=(yield P.normalizeCentralMeridian(A.fromJSON(Z),null,{signal:Q}))[0];const Ca=(yield P.normalizeCentralMeridian(A.fromJSON(pa),null,{signal:Q}))[0];if(p.isNone(wa)||
p.isNone(Ca))return{candidates:[]};let Ka=new l.default(this._searchFeatures(this._getQueryBBoxes(Ca.toJSON())),null,this);Ka=yield this._reschedule(()=>Ka.executeObjectIdsQuery(ma),Q);Ka=yield this._reschedule(()=>Ka.executeTimeQuery(ma),Q);Ka=yield this._reschedule(()=>Ka.executeAttributesQuery(ma),Q);Q=wa.toJSON();Q=la?I.project(Q,this.spatialReference):Q;return Ka.createSnappingResponse({...n,point:Q,distance:la?Math.max(pa.xmax-pa.xmin,pa.ymax-pa.ymin)/2:ja},Z.spatialReference)});return function(n,
Q){return c.apply(this,arguments)}}();w.executeQueryForLatestObservations=function(){var c=e._asyncToGenerator(function*(n={},Q){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new W("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:n,timeInfo:this.timeInfo});let Z=U.clone(n),ja;try{Z=yield this._schedule(()=>u.normalizeQuery(Z,this.definitionExpression,this.spatialReference),Q),Z=yield this._reschedule(()=>this._checkQuerySupport(Z),Q),ja=yield this._reschedule(()=>
this._executeGeometryQuery(Z,Q),Q),ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(Z),Q),ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(Z),Q),ja=yield this._reschedule(()=>ja.executeTimeQuery(Z),Q),ja=yield this._reschedule(()=>ja.executeAttributesQuery(Z),Q),ja=yield this._reschedule(()=>ja.filterLatest(),Q)}catch(oa){if(oa!==u.QUERY_ENGINE_EMPTY_RESULT)throw oa;ja=new l.default([],null,this)}return ja.createQueryResponse(Z)});return function(){return c.apply(this,arguments)}}();
w.executeQueryForSummaryStatistics=function(){var c=e._asyncToGenerator(function*(n={},Q,Z){const {field:ja,normalizationField:oa,valueExpression:ma}=Q;return(yield this._getQueryEngineResultForStats(n,{field:ja,normalizationField:oa,valueExpression:ma},Z)).createSummaryStatisticsResponse(n,Q)});return function(){return c.apply(this,arguments)}}();w.executeQueryForUniqueValues=function(){var c=e._asyncToGenerator(function*(n={},Q,Z){const {field:ja,valueExpression:oa}=Q;return(yield this._getQueryEngineResultForStats(n,
{field:ja,valueExpression:oa},Z)).createUniqueValuesResponse(n,Q)});return function(){return c.apply(this,arguments)}}();w.executeQueryForClassBreaks=function(){var c=e._asyncToGenerator(function*(n={},Q,Z){const {field:ja,normalizationField:oa,valueExpression:ma}=Q;return(yield this._getQueryEngineResultForStats(n,{field:ja,normalizationField:oa,valueExpression:ma},Z)).createClassBreaksResponse(n,Q)});return function(){return c.apply(this,arguments)}}();w.executeQueryForHistogram=function(){var c=
e._asyncToGenerator(function*(n={},Q,Z){const {field:ja,normalizationField:oa,valueExpression:ma}=Q;return(yield this._getQueryEngineResultForStats(n,{field:ja,normalizationField:oa,valueExpression:ma},Z)).createHistogramResponse(n,Q)});return function(){return c.apply(this,arguments)}}();w._schedule=function(){var c=e._asyncToGenerator(function*(n,Q){return p.isSome(this._frameTask)?this._frameTask.schedule(n,Q):n(z.noBudget)});return function(n,Q){return c.apply(this,arguments)}}();w._reschedule=
function(){var c=e._asyncToGenerator(function*(n,Q){return p.isSome(this._frameTask)?this._frameTask.reschedule(n,Q):n(z.noBudget)});return function(n,Q){return c.apply(this,arguments)}}();w._getAll=function(){if(!this._allItems){const c=[];this.featureStore.forEach(n=>c.push(n));this._allItems=new l.default(c,null,this)}return this._allItems};w._executeGeometryQuery=function(){var c=e._asyncToGenerator(function*(n,Q){var Z=this;const {geometry:ja,outSR:oa,spatialRel:ma,returnGeometry:la,returnCentroid:pa}=
n;var wa=this.featureStore.featureSpatialReference;const Ca=ja&&wa&&wa!==ja.spatialReference?I.project(ja,wa):ja,Ka=la||pa,Ra=O.isValid(oa)&&!O.equals(this.spatialReference,oa),Pa=this._geometryQueryCache?Ra&&Ka?JSON.stringify({originalFilterGeometry:ja,spatialRelationship:ma,outSpatialReference:oa}):JSON.stringify({originalFilterGeometry:ja,spatialRelationship:ma}):null;if(Pa&&(wa=this._geometryQueryCache.get(Pa),!p.isUndefined(wa)))return wa;wa=function(){var Y=e._asyncToGenerator(function*(g){if(Ra&&
Ka)return g=yield g.project(oa),Pa&&Z._geometryQueryCache.put(Pa,g,g.size||1),g;Pa&&Z._geometryQueryCache.put(Pa,g,g.size||1);return g});return function(g){return Y.apply(this,arguments)}}();if(!Ca)return wa(this._getAll());const va=this.featureAdapter;if("esriSpatialRelDisjoint"===ma){n=this._searchFeatures(this._getQueryBBoxes(ja));if(!n.length)return wa(this._getAll());let Y,g;const y=new Set;for(var a of n)y.add(va.getObjectId(a));yield this._reschedule(()=>{let S=0;Y=Array(y.size);this.featureStore.forEach(V=>
Y[S++]=V);g=y},Q);n=yield this._reschedule(e._asyncToGenerator(function*(){const S=yield K.getSpatialQueryOperator(ma,Ca,Z.geometryType,Z.hasZ,Z.hasM);return new l.default(yield Z._runSpatialFilter(Y,V=>!g.has(va.getObjectId(V))||S(va.getGeometry(V)),Q),ja,Z)}),Q);return wa(n)}a=this._searchFeatures(this._getQueryBBoxes(ja));if(!a.length)return wa=new l.default([],ja,this),Pa&&this._geometryQueryCache.put(Pa,wa,wa.size||1),wa;if(this._canExecuteSoloPass(Ca,n))return wa(new l.default(a,ja,this));const h=
yield K.getSpatialQueryOperator(ma,Ca,this.geometryType,this.hasZ,this.hasM);n=yield this._runSpatialFilter(a,Y=>h(va.getGeometry(Y)),Q);return wa(new l.default(n,ja,this))});return function(n,Q){return c.apply(this,arguments)}}();w._runSpatialFilter=function(){var c=e._asyncToGenerator(function*(n,Q,Z){var ja=this;if(!Q)return n;if(p.isNone(this._frameTask))return n.filter(pa=>Q(pa));let oa=0;const ma=[],la=function(){var pa=e._asyncToGenerator(function*(wa){for(;oa<n.length;){const Ca=n[oa++];Q(Ca)&&
(ma.push(Ca),wa.madeProgress());wa.done&&(yield ja._reschedule(Ka=>la(Ka),Z))}});return function(wa){return pa.apply(this,arguments)}}();return this._reschedule(pa=>la(pa),Z).then(()=>ma)});return function(n,Q,Z){return c.apply(this,arguments)}}();w._canExecuteSoloPass=function(c,n){const {geometryType:Q}=this;({spatialRel:n}=n);return K.canQueryWithRBush(c)&&("esriSpatialRelEnvelopeIntersects"===n||"esriGeometryPoint"===Q&&("esriSpatialRelIntersects"===n||"esriSpatialRelContains"===n||"esriSpatialRelWithin"===
n))};w._getQueryBBoxes=function(c){if(K.canQueryWithRBush(c)){if(A.isExtent(c))return[r.fromValues(c.xmin,c.ymin,c.xmax,c.ymax)];if(A.isPolygon(c))return c.rings.map(n=>r.fromValues(Math.min(n[0][0],n[2][0]),Math.min(n[0][1],n[2][1]),Math.max(n[0][0],n[2][0]),Math.max(n[0][1],n[2][1])))}return[t.getBoundsXY(r.create(),c)]};w._searchFeatures=function(c){for(const Z of c)this.featureStore.forEachInBounds(Z,ja=>{N.add(ja)});const n=Array(N.size);let Q=0;N.forEach(Z=>n[Q++]=Z);N.clear();return n};w._checkStatisticsSupport=
function(){var c=e._asyncToGenerator(function*(n,Q){if(0>n.distance||null!=n.geometryPrecision||n.multipatchOption||n.pixelSize||n.relationParam||n.text||n.outStatistics||n.groupByFieldsForStatistics||n.having||n.orderByFields)throw new W("feature-store:unsupported-query","Unsupported query options",{query:n});return Promise.all([this._checkAttributesQuerySupport(n),this._checkStatisticsParamsSupport(Q),K.checkSpatialQuerySupport(n,this.geometryType,this.spatialReference),I.checkProjectionSupport(this.spatialReference,
n.outSR)]).then(()=>n)});return function(n,Q){return c.apply(this,arguments)}}();w._checkStatisticsParamsSupport=function(){var c=e._asyncToGenerator(function*(n){var Q=[];n.valueExpression&&({arcadeUtils:Q}=yield C.loadArcade(),Q=Q.extractFieldNames(n.valueExpression));n.field&&Q.push(n.field);n.normalizationField&&Q.push(n.normalizationField);if(!Q.length)throw new W("feature-store:unsupported-query","params should have at least a field or valueExpression",{params:n});m.validateFields(this.fieldsIndex,
Q,"params contains missing fields")});return function(n){return c.apply(this,arguments)}}();w._checkQuerySupport=function(){var c=e._asyncToGenerator(function*(n){if(0>n.distance||null!=n.geometryPrecision||n.multipatchOption||n.pixelSize||n.relationParam||n.text)throw new W("feature-store:unsupported-query","Unsupported query options",{query:n});return Promise.all([this._checkAttributesQuerySupport(n),this._checkStatisticsQuerySupport(n),K.checkSpatialQuerySupport(n,this.geometryType,this.spatialReference),
I.checkProjectionSupport(this.spatialReference,n.outSR)]).then(()=>n)});return function(n){return c.apply(this,arguments)}}();w._checkAttributesQuerySupport=function(c){const {outFields:n,orderByFields:Q,returnDistinctValues:Z,outStatistics:ja}=c,oa=ja?ja.map(ma=>ma.outStatisticFieldName&&ma.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(Q&&0<Q.length){const ma=Q.map(la=>{const pa=la.toLowerCase();return-1<pa.indexOf(" asc")?pa.split(" asc")[0]:-1<pa.indexOf(" desc")?pa.split(" desc")[0]:
la}).filter(la=>-1===oa.indexOf(la));m.validateFields(this.fieldsIndex,ma,"orderByFields contains missing fields")}if(n&&0<n.length)m.validateFields(this.fieldsIndex,n,"outFields contains missing fields");else if(Z)throw new W("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:c});m.validateWhere(this.fieldsIndex,c.where)};w._checkStatisticsQuerySupport=function(){var c=e._asyncToGenerator(function*(n){const {outStatistics:Q,groupByFieldsForStatistics:Z,
having:ja}=n;var oa=Z&&Z.length,ma=Q&&Q.length;if(ja){if(!oa||!ma)throw new W("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:n});m.validateHaving(this.fieldsIndex,ja,Q)}if(ma&&M(Q)){ma=Q.map(la=>la.onStatisticField).filter(Boolean);m.validateFields(this.fieldsIndex,ma,"onStatisticFields contains missing fields");oa&&m.validateFields(this.fieldsIndex,Z,"groupByFieldsForStatistics contains missing fields");for(const la of Q){const {onStatisticField:pa,
statisticType:wa}=la;if(("percentile_disc"===wa||"percentile_cont"===wa)&&"statisticParameters"in la){if({statisticParameters:oa}=la,!oa)throw new W("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:la,query:n});}else if("count"!==wa&&pa&&m.hasInvalidFieldType(pa,this.fieldsIndex))throw new W("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:la,query:n});}}});return function(n){return c.apply(this,arguments)}}();
w._getQueryEngineResultForStats=function(){var c=e._asyncToGenerator(function*(n={},Q,Z){n=U.clone(n);let ja;try{n=yield this._schedule(()=>u.normalizeQuery(n,this.definitionExpression,this.spatialReference),Z),n=yield this._reschedule(()=>this._checkStatisticsSupport(n,Q),Z),ja=yield this._reschedule(()=>this._executeGeometryQuery(n,Z),Z),ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(n),Z),ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(n),Z),ja=yield this._reschedule(()=>ja.executeTimeQuery(n),
Z),ja=yield this._reschedule(()=>ja.executeAttributesQuery(n),Z)}catch(oa){if(oa!==u.QUERY_ENGINE_EMPTY_RESULT)throw oa;ja=new l.default([],null,this)}return ja});return function(){return c.apply(this,arguments)}}();e._createClass(J,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const c=this.featureStore.fullBounds;return c?{xmin:c[0],ymin:c[1],xmax:c[2],ymax:c[3],spatialReference:u.cleanFromGeometryEngine(this.spatialReference)}:null}},
{key:"timeExtent",get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=G.getTimeExtent(this.timeInfo,this.featureStore):null}}]);return J}();const T=q.create(),ba=q.create();k.Feature=function(J,w=null,c,n,Q){this.attributes=J;this.geometry=c;this.centroid=n;this.filterFlags=Q;this.groupId=-1;this.displayId=w};k.default=H;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./maybe",
"./PooledArray"],function(k,e,W,U){k.RemoveMode=void 0;(function(x){x[x.ALL=0]="ALL";x[x.SOME=1]="SOME"})(k.RemoveMode||(k.RemoveMode={}));let p=function(){function x(r,t,A){this._namespace=r;this._storage=t;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";A&&(this._storage.registerRemoveFunc(this._namespace,A),this._removeFunc=!0)}var q=x.prototype;q.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);
this._storage.deregister(this);this._storage=null};q.resetHitRate=function(){this._hit=this._miss=0};q.put=function(r,t,A,P=0){this._storage.put(this._namespace+r,t,A,P)};q.get=function(r){r=this._storage.get(this._namespace+r);void 0===r?++this._miss:++this._hit;return r};q.pop=function(r){r=this._storage.pop(this._namespace+r);void 0===r?++this._miss:++this._hit;return r};q.updateSize=function(r,t,A){this._storage.updateSize(this._namespace+r,t,A)};q.clear=function(){this._storage.clear(this._namespace)};
q.clearAll=function(){this._storage.clearAll()};q.getStats=function(){return this._storage.getStats()};q.resetStats=function(){this._storage.resetStats()};e._createClass(x,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return x}(),D=function(){function x(r=10485760){this._maxSize=r;this._db=
new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new U;this._users=new U}var q=x.prototype;q.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};q.register=function(r){this._users.push(r)};q.deregister=function(r){this._users.removeUnordered(r)};q.registerRemoveFunc=function(r,t){this._removeFuncs.push([r,t])};q.deregisterRemoveFunc=function(r){this._removeFuncs.filterInPlace(t=>t[0]!==r)};q.put=function(r,t,A,P){const O=this._db.get(r);O&&(this._size-=
O.size,this._db.delete(r),O.entry!==t&&this._notifyRemove(r,O.entry,k.RemoveMode.ALL));A>this._maxSize?this._notifyRemove(r,t,k.RemoveMode.ALL):void 0===t?console.warn("Refusing to cache undefined entry "):!A||0>A?console.warn("Refusing to cache entry with invalid size "+A):(P=1+Math.max(P,-3)- -3,this._db.set(r,{entry:t,size:A,lifetime:P,lives:P}),this._size+=A,this._checkSizeLimit())};q.updateSize=function(r,t,A){const P=this._db.get(r);if(P&&P.entry===t){for(this._size-=P.size;A>this._maxSize;)if(A=
this._notifyRemove(r,t,k.RemoveMode.SOME),!(W.isSome(A)&&0<A)){this._db.delete(r);return}P.size=A;this._size+=A;this._checkSizeLimit()}};q.pop=function(r){const t=this._db.get(r);if(t)return this._size-=t.size,this._db.delete(r),++this._hit,t.entry;++this._miss};q.get=function(r){const t=this._db.get(r);if(void 0===t)++this._miss;else return this._db.delete(r),t.lives=t.lifetime,this._db.set(r,t),++this._hit,t.entry};q.getStats=function(){const r={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/
1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},A=[];this._db.forEach((m,I)=>{const d=m.lifetime;A[d]=(A[d]||0)+m.size;this._users.forAll(l=>{l=l.namespace;I.startsWith(l)&&(t[l]=(t[l]||0)+m.size)})});const P={};this._users.forAll(m=>{const I=m.namespace;!isNaN(m.hitRate)&&0<m.hitRate?(t[I]=t[I]||0,P[I]=Math.round(100*m.hitRate)+"%"):P[I]="0%"});var O=Object.keys(t);O.sort((m,I)=>t[I]-t[m]);O.forEach(m=>r[m]=Math.round(t[m]/2**20)+"MB / "+P[m]);
for(O=A.length-1;0<=O;--O){const m=A[O];m&&(r["Priority "+(O+-3-1)]=Math.round(m/this.size*100)+"%")}return r};q.resetStats=function(){this._hit=this._miss=0;this._users.forAll(r=>r.resetHitRate())};q.clear=function(r){this._db.forEach((t,A)=>{A.startsWith(r)&&(this._size-=t.size,this._db.delete(A),this._notifyRemove(A,t.entry,k.RemoveMode.ALL))})};q.clearAll=function(){this._db.forEach((r,t)=>this._notifyRemove(t,r.entry,k.RemoveMode.ALL));this._size=0;this._db.clear()};q._getHitRate=function(){return this._hit/
(this._hit+this._miss)};q._notifyRemove=function(r,t,A){let P;this._removeFuncs.some(O=>r.startsWith(O[0])?(O=O[1](t,A),"number"===typeof O&&(P=O),!0):!1);return P};q._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [r,t]of this._db){this._db.delete(r);if(1>=t.lives){this._size-=t.size;const A=this._notifyRemove(r,t.entry,k.RemoveMode.SOME);W.isSome(A)&&0<A&&(this._size+=A,t.lives=t.lifetime,t.size=A,this._db.set(r,t))}else--t.lives,this._db.set(r,t);if(this._size<=.9*this.maxSize)break}};
e._createClass(x,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(r){this._maxSize=Math.max(r,0);this._checkSizeLimit()}}]);return x}();k.MIN_PRIORITY=-3;k.MemCache=p;k.MemCacheStorage=D;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometry/cut ../../rest/geometry/simplify".split(" "),
function(k,e,W,U,p,D,x,q,r,t,A,P,O){function m(C){const z=[];let M=0,N=0;for(let da=0;da<C.length;da++){const F=C[da];let H=null;for(let T=0;T<F.length;T++)H=F[T],z.push(H),0===T?N=M=H[0]:(M=Math.min(M,H[0]),N=Math.max(N,H[0]));H&&z.push([(M+N)/2,0])}return z}function I(C,z){if(!(C instanceof q||C instanceof x))throw B.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new U("straightLineDensify: the input geometry is neither polyline nor polygon");var M=r.getGeometryParts(C);
const N=[];for(const F of M){M=[];N.push(M);M.push([F[0][0],F[0][1]]);for(let H=0;H<F.length-1;H++){const T=F[H][0],ba=F[H][1],J=F[H+1][0],w=F[H+1][1];var da=Math.sqrt((J-T)*(J-T)+(w-ba)*(w-ba));const c=(w-ba)/da,n=(J-T)/da,Q=da/z;if(1<Q){for(let Z=1;Z<=Q-1;Z++){const ja=Z*z;M.push([n*ja+T,c*ja+ba])}da=(da+Math.floor(Q-1)*z)/2;M.push([n*da+T,c*da+ba])}M.push([J,w])}}return"polygon"===C.type?new x({rings:N,spatialReference:C.spatialReference}):new q({paths:N,spatialReference:C.spatialReference})}function d(C,
z,M){z&&(C=I(C,1E6),C=A.webMercatorToGeographic(C,!0));M&&(C=r.updatePolyGeometry(C,M));return C}function l(C,z,M){if(Array.isArray(C)){var N=C[0];N>z?(M=r.offsetMagnitude(N,z),C[0]=N+-2*M*z):N<M&&(z=r.offsetMagnitude(N,M),C[0]=N+-2*z*M)}else N=C.x,N>z?(M=r.offsetMagnitude(N,z),C=C.clone().offset(-2*M*z,0)):N<M&&(z=r.offsetMagnitude(N,M),C=C.clone().offset(-2*z*M,0));return C}function K(C,z){let M=-1;for(let N=0;N<z.cutIndexes.length;N++){const da=z.cutIndexes[N],F=z.geometries[N],H=r.getGeometryParts(F);
for(let T=0;T<H.length;T++){const ba=H[T];ba.some(J=>{if(180>J[0])return!0;J=0;for(var w=0;w<ba.length;w++){var c=ba[w][0];J=c>J?c:J}J=Number(J.toFixed(9));J=-360*r.offsetMagnitude(J,180);for(w=0;w<ba.length;w++)c=F.getPoint(T,w),F.setPoint(T,w,c.clone().offset(J,0));return!0})}if(da===M)if("polygon"===C[0].type)for(const T of r.getGeometryParts(F))C[da]=C[da].addRing(T);else{if("polyline"===C[0].type)for(const T of r.getGeometryParts(F))C[da]=C[da].addPath(T)}else M=da,C[da]=F}return C}function G(C,
z,M){return u.apply(this,arguments)}function u(){u=e._asyncToGenerator(function*(C,z,M){var N;if(!Array.isArray(C))return G([C],z);z=null!=(N=null==z?void 0:z.url)?N:W.geometryServiceUrl;let da,F,H;let T=0;var ba=[];N=[];for(var J of C)if(D.isNone(J))N.push(J);else{if(!w){var w=J.spatialReference;var c=t.getInfo(w);var n=(da=w.isWebMercator)?102100:4326;F=r.cutParams[n].maxX;H=r.cutParams[n].minX;var Q=r.cutParams[n].plus180Line;n=r.cutParams[n].minus180Line}if(c)if("mesh"===J.type)N.push(J);else if("point"===
J.type)N.push(l(J.clone(),F,H));else if("multipoint"===J.type){var Z=J.clone();Z.points=Z.points.map(ja=>l(ja,F,H));N.push(Z)}else if("extent"===J.type)Z=J.clone()._normalize(!1,!1,c),N.push(Z.rings?new x(Z):Z);else if(J.extent){Z=J.extent;const ja=2*r.offsetMagnitude(Z.xmin,H)*F;let oa=0===ja?J.clone():r.updatePolyGeometry(J.clone(),ja);Z.offset(ja,0);Z.intersects(Q)&&Z.xmax!==F?(T=Z.xmax>T?Z.xmax:T,oa=d(oa,da),ba.push(oa),N.push("cut")):Z.intersects(n)&&Z.xmin!==H?(T=2*Z.xmax*F>T?2*Z.xmax*F:T,oa=
d(oa,da,360),ba.push(oa),N.push("cut")):N.push(oa)}else N.push(J.clone());else N.push(J)}w=r.offsetMagnitude(T,F);c=-90;Q=w;for(J=new q;0<w;)n=-180+360*w,J.addPath([[n,c],[n,-1*c]]),c*=-1,w--;if(0<ba.length&&0<Q){w=yield P.cut(z,ba,J,M);w=K(ba,w);c=[];ba=[];for(Q=0;Q<N.length;Q++)J=N[Q],"cut"!==J?ba.push(J):(J=w.shift(),n=C[Q],D.isSome(n)&&"polygon"===n.type&&n.rings&&1<n.rings.length&&J.rings.length>=n.rings.length?(c.push(J),ba.push("simplify")):ba.push(da?A.geographicToWebMercator(J):J));if(!c.length)return ba;
N=yield O.simplify(z,c,M);C=[];for(M=0;M<ba.length;M++)z=ba[M],"simplify"!==z?C.push(z):C.push(da?A.geographicToWebMercator(N.shift()):N.shift());return C}C=[];for(M=0;M<N.length;M++)z=N[M],"cut"!==z?C.push(z):(z=ba.shift(),C.push(!0===da?A.geographicToWebMercator(z):z));return Promise.resolve(C)});return u.apply(this,arguments)}const B=p.getLogger("esri.geometry.support.normalizeUtils");k.getDenormalizedExtent=function(C){if(!C)return null;const z=C.extent;if(!z)return null;var M=C.spatialReference&&
t.getInfo(C.spatialReference);if(!M)return z;const [N,da]=M.valid;({width:M}=z);let {xmin:F,xmax:H}=z;[F,H]=[H,F];if("extent"===C.type||0===M||M<=da||M>2*da||F<N||H>da)return z;let T;switch(C.type){case "polygon":if(1<C.rings.length)T=m(C.rings);else return z;break;case "polyline":if(1<C.paths.length)T=m(C.paths);else return z;break;case "multipoint":T=C.points}C=z.clone();for(let ba=0;ba<T.length;ba++){let J=T[ba][0];0>J?(J+=da,H=Math.max(J,H)):(J-=da,F=Math.min(J,F))}C.xmin=F;C.xmax=H;return C.width<
M?(C.xmin-=da,C.xmax-=da,C):z};k.normalizeCentralMeridian=G;k.normalizeMapX=function(C,z){if(z=t.getInfo(z)){const [M,N]=z.valid;z=N-M;if(C<M)for(;C<M;)C+=z;if(C>N)for(;C>N;)C-=z}return C};k.straightLineDensify=I;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(k,e,W,U){function p(x){return U.isPolygon(x)?x.rings:x.paths}const D={102100:{maxX:2.0037508342788905E7,
minX:-2.0037508342788905E7,plus180Line:new e({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:W.WebMercator}),minus180Line:new e({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:W.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new e({paths:[[[180,-180],[180,180]]],spatialReference:W.WGS84}),minus180Line:new e({paths:[[[-180,-180],[-180,180]]],spatialReference:W.WGS84})}};
k.cutParams=D;k.getGeometryParts=p;k.getSpatialReferenceMinMaxX=function(x){x=(null==x?0:x.isWebMercator)?102100:4326;return[D[x].minX,D[x].maxX]};k.offsetMagnitude=function(x,q){return Math.ceil((x-q)/(2*q))};k.updatePolyGeometry=function(x,q){const r=p(x);for(const t of r)for(const A of t)A[0]+=q;return x};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/rest/geometry/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),
function(k,e,W,U,p,D){function x(){x=e._asyncToGenerator(function*(q,r,t,A){q="string"===typeof q?p.urlToObject(q):q;const P=r[0].spatialReference;r={...A,query:{...q.query,f:"json",sr:JSON.stringify(P),target:JSON.stringify({geometryType:D.getJsonType(r[0]),geometries:r}),cutter:JSON.stringify(t)}};r=yield U(q.path+"/cut",r);const {cutIndexes:O,geometries:m=[]}=r.data;return{cutIndexes:O,geometries:m.map(I=>{I=D.fromJSON(I);I.spatialReference=P;return I})}});return x.apply(this,arguments)}k.cut=
function(q,r,t,A){return x.apply(this,arguments)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/rest/geometry/simplify":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../../core/urlUtils","../../geometry/support/jsonUtils"],function(k,e,W,U,p){function D(){D=e._asyncToGenerator(function*(r,t,A){const P="string"===typeof r?U.urlToObject(r):r;r=t[0].spatialReference;const O=p.getJsonType(t[0]);t={...A,query:{...P.query,f:"json",sr:r.wkid?r.wkid:JSON.stringify(r),
geometries:JSON.stringify(x(t))}};t=yield W(P.path+"/simplify",t);return q(t.data,O,r)});return D.apply(this,arguments)}function x(r){return{geometryType:p.getJsonType(r[0]),geometries:r.map(t=>t.toJSON())}}function q(r,t,A){const P=p.getGeometryType(t);return r.map(O=>{O=P.fromJSON(O);O.spatialReference=A;return O})}k.simplify=function(r,t,A){return D.apply(this,arguments)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/sql/WhereClauseCache"],function(k,e,W){function U(r,t){return r?x.get(r,t):null}function p(r,t,A,P=!0){const O=[];for(const m of t)if("*"!==m&&!r.has(m))if(P){t=D(m);try{const I=U(t,r);if(!I)throw new e("feature-store:unsupported-query","invalid SQL expression",{where:t});if(!I.isStandardized)throw new e("feature-store:unsupported-query","expression is not standard",{clause:I});p(r,I.fieldNames,"expression contains missing fields")}catch(I){if((t=I&&I.details)&&
(t.clause||t.where))throw I;t&&t.missingFields?O.push(...t.missingFields):O.push(m)}}else O.push(m);if(O.length)throw new e("feature-store:unsupported-query",A,{missingFields:O});}function D(r){return r.split(" as ")[0]}const x=new W.WhereClauseCache(50,500),q=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));k.getAliasFromFieldName=function(r){return r.split(" as ")[1]};k.getExpressionFromFieldName=
D;k.getWhereClause=U;k.hasInvalidFieldType=function(r,t){return(r=t.get(r))?!q.has(r.type):!1};k.validateFields=p;k.validateHaving=function(r,t,A){if(!t)return!0;const P=x.get(t,r);if(!P)throw new e("feature-store:unsupported-query","invalid SQL expression",{having:t});if(!P.isAggregate)throw new e("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:t});p(r,P.fieldNames,"having contains missing fields");if(!P.getExpressions().every(O=>{const {aggregateType:m,
field:I}=O,d=r.has(I)&&r.get(I).name;return A.some(l=>{const {onStatisticField:K,statisticType:G}=l;return(r.has(K)&&r.get(K).name)===d&&G.toLowerCase().trim()===m})}))throw new e("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:t});return!0};k.validateWhere=function(r,t){if(!t)return!0;const A=x.get(t,r);if(!A)throw new e("feature-store:unsupported-query","invalid SQL expression",{where:t});if(!A.isStandardized)throw new e("feature-store:unsupported-query",
"where clause is not standard",{where:t});p(r,A.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(k,e,W){let U=function(){function p(D,x){this._cache=new e(D);this._invalidCache=new e(x)}p.prototype.get=function(D,x){const q=`${x.uid}:${D}`,r=this._cache.get(q);if(r)return r;if(void 0!==this._invalidCache.get(q))return null;try{const t=
W.WhereClause.create(D,x);this._cache.put(q,t);return t}catch{return this._invalidCache.put(q,null),null}};return p}();k.WhereClauseCache=U;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(k){return function(){function e(U,p){this._storage=new k.MemCacheStorage;this._storage.maxSize=U;p&&this._storage.registerRemoveFunc("",p)}var W=e.prototype;W.put=function(U,p){this._storage.put(U,p,1,1)};W.pop=function(U){return this._storage.pop(U)};
W.get=function(U){return this._storage.get(U)};W.clear=function(){this._storage.clearAll()};W.destroy=function(){this._storage.destroy()};return e}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(k,e,W,U,p,D){function x(J,w){J+="";return J.length>=w?J:Array(w-J.length+1).join("0")+J}function q(J,w,c="0",n="0",Q="0",Z="0",ja="",oa="0",ma="0"){return"+"===ja||"-"===
ja?(J=`${x(parseInt(J,10),4)}-${x(parseInt(w,10),2)}-${x(parseInt(c,10),2)}`,w="",10>parseFloat(Z)&&(w="0"),n=`${x(parseInt(n,10),2)}:${x(parseInt(Q,10),2)}:${w+parseFloat(Z).toString()}`,ja=`${ja}${x(parseInt(oa,10),2)}:${x(parseInt(ma,10),2)}`,new Date(J+"T"+n+ja)):new Date(parseInt(J,10),parseInt(w,10)-1,parseInt(c,10),parseInt(n,10),parseInt(Q,10),parseFloat(Z))}function r(J){let w=C.exec(J);if(null!==w){const [,c,n,Q,Z,ja,oa]=w;return q(c,n,Q,Z,ja,oa)}w=z.exec(J);if(null!==w){const [,c,n,Q,Z,
ja,oa,ma,la,pa]=w;return q(c,n,Q,Z,ja,oa,ma,la,pa)}w=M.exec(J);if(null!==w){const [,c,n,Q,Z,ja,oa,ma,la]=w;return q(c,n,Q,Z,ja,"0",oa,ma,la)}w=N.exec(J);if(null!==w){const [,c,n,Q,Z,ja]=w;return q(c,n,Q,Z,ja)}w=B.exec(J);if(null!==w){const [,c,n,Q]=w;return q(c,n,Q)}throw Error("SQL Invalid Timestamp");}function t(J){J=B.exec(J);if(null===J)throw Error("SQL Invalid Date");const [,w,c,n]=J;return new Date(parseInt(w,10),parseInt(c,10)-1,parseInt(n,10))}function A(J){return Array.isArray(J)?J:[J]}function P(J){return null!==
J?!0!==J:null}function O(J,w){return null!=J&&null!=w?!0===J&&!0===w:!1===J||!1===w?!1:null}function m(J,w){return null!=J&&null!=w?!0===J||!0===w:!0===J||!0===w?!0:null}function I(J,w){if(null==J)return null;let c=!1;for(const n of w)if(null==n)c=null;else if(J===n){c=!0;break}return c}function d(J,w,c){if(null==J)return null;{let n="",Q=T.Normal;for(let Z=0;Z<w.length;Z++){const ja=w.charAt(Z);switch(Q){case T.Normal:ja===c?Q=T.Escaped:n="-[]/{}()*+?.\\^$|".includes(ja)?n+("\\"+ja):"%"===ja?n+".*":
"_"===ja?n+".":n+ja;break;case T.Escaped:n="-[]/{}()*+?.\\^$|".includes(ja)?n+("\\"+ja):n+ja,Q=T.Normal}}w=new RegExp("^"+n+"$","m")}return w.test(J)}function l(J){return J instanceof Date?J.valueOf():J}function K(J,w,c){if(null==w||null==c)return null;w=l(w);c=l(c);switch(J){case "\x3c\x3e":return w!==c;case "\x3d":return w===c;case "\x3e":return w>c;case "\x3c":return w<c;case "\x3e\x3d":return w>=c;case "\x3c\x3d":return w<=c}}function G(J,w,c){if(w instanceof p.SqlInterval)if(c instanceof Date)switch(J){case "+":return new Date(w.valueInMilliseconds()+
c.getTime());case "-":return w.valueInMilliseconds()-c.getTime();case "*":return w.valueInMilliseconds()*c.getTime();case "/":return w.valueInMilliseconds()/c.getTime()}else if(c instanceof p.SqlInterval)switch(J){case "+":return p.SqlInterval.createFromMilliseconds(w.valueInMilliseconds()+c.valueInMilliseconds());case "-":return p.SqlInterval.createFromMilliseconds(w.valueInMilliseconds()-c.valueInMilliseconds());case "*":return w.valueInMilliseconds()*c.valueInMilliseconds();case "/":return w.valueInMilliseconds()/
c.valueInMilliseconds()}else w=w.valueInMilliseconds();else if(c instanceof p.SqlInterval)if(w instanceof Date)switch(J){case "+":return new Date(c.valueInMilliseconds()+w.getTime());case "-":return new Date(w.getTime()-c.valueInMilliseconds());case "*":return w.getTime()*c.valueInMilliseconds();case "/":return w.getTime()/c.valueInMilliseconds()}else c=c.valueInMilliseconds();else if(w instanceof Date&&"number"===typeof c)switch(c*=864E5,w=w.getTime(),J){case "+":return new Date(w+c);case "-":return new Date(w-
c);case "*":return new Date(w*c);case "/":return new Date(w/c)}else if(c instanceof Date&&"number"===typeof w)switch(w*=864E5,c=c.getTime(),J){case "+":return new Date(w+c);case "-":return new Date(w-c);case "*":return new Date(w*c);case "/":return new Date(w/c)}switch(J){case "+":return w+c;case "-":return w-c;case "*":return w*c;case "/":return w/c}}function u(J,w,c,n){J=n.getAttribute(J,w);return null!=J&&1===c[w]?new Date(J):J}const B=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,C=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,
z=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,M=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,N=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,da=new Set(["current_timestamp","current_date","current_time"]);let F=function(){function J(){}J.makeBool=function(w){return!0===w};J.featureValue=function(w,c,n,Q){return u(w,c,n,Q)};J.equalsNull=function(w){return null===w};J.applyLike=function(w,c,n){return d(w,c,
n)};J.ensureArray=function(w){return A(w)};J.applyIn=function(w,c){return I(w,c)};J.currentDate=function(){const w=new Date;w.setHours(0,0,0,0);return w};J.makeSqlInterval=function(w,c,n){return p.SqlInterval.createFromValueAndQualifer(w,c,n)};J.convertInterval=function(w){return w instanceof p.SqlInterval?w.valueInMilliseconds():w};J.currentTimestamp=function(){return new Date};J.compare=function(w,c,n){return K(w,c,n)};J.calculate=function(w,c,n){return G(w,c,n)};J.makeComparable=function(w){return l(w)};
J.evaluateFunction=function(w,c){return p.evaluateFunction(w,c)};J.lookup=function(w,c){w=c[w];return void 0===w?null:w};J.between=function(w,c){return null==w||null==c[0]||null==c[1]?null:w>=c[0]&&w<=c[1]};J.notbetween=function(w,c){return null==w||null==c[0]||null==c[1]?null:w<c[0]||w>c[1]};J.ternaryNot=function(w){return P(w)};J.ternaryAnd=function(w,c){return O(w,c)};J.ternaryOr=function(w,c){return m(w,c)};return J}(),H=function(){function J(c,n){this.fieldsIndex=n;this.datefields={};this.parameters=
{};this._hasDateFunctions=void 0;this.parseTree=D.WhereGrammar.parse(c);const {isStandardized:Q,isAggregate:Z,referencedFieldNames:ja}=this._extractExpressionInfo(n);this.referencedFieldNames=ja;this.isStandardized=Q;this.isAggregate=Z}J.create=function(c,n){return new J(c,n)};var w=J.prototype;w.testSet=function(c,n=ba){const Q={};for(const Z of this.fieldNames)Q[Z]=c.map(ja=>n.getAttribute(ja,Z));return!!this._evaluateNode(this.parseTree,{attributes:Q},ba)};w.calculateValue=function(c,n=ba){c=this._evaluateNode(this.parseTree,
c,n);return c instanceof p.SqlInterval?c.valueInMilliseconds()/864E5:c};w.calculateValueCompiled=function(c,n=ba){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(c,this.parameters,n,this.datefields);if(W("esri-csp-restrictions"))return this.calculateValue(c,n);this._compileMe();return this.parseTree._compiledVersion(c,this.parameters,n,this.datefields)};w.testFeature=function(c,n=ba){return!!this._evaluateNode(this.parseTree,c,n)};w.testFeatureCompiled=function(c,n=
ba){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(c,this.parameters,n,this.datefields);if(W("esri-csp-restrictions"))return this.testFeature(c,n);this._compileMe();return!!this.parseTree._compiledVersion(c,this.parameters,n,this.datefields)};w.getFunctions=function(){const c=new Set;this._visitAll(this.parseTree,n=>{"function"===n.type&&c.add(n.name.toLowerCase())});return Array.from(c)};w.getExpressions=function(){const c=new Map;this._visitAll(this.parseTree,n=>
{if("function"===n.type){const Q=n.name.toLowerCase();n=n.args.value[0];if("column_ref"===n.type){n=n.column;const Z=`${Q}-${n}`;c.has(Z)||c.set(Z,{aggregateType:Q,field:n})}}});return[...c.values()]};w.getVariables=function(){const c=new Set;this._visitAll(this.parseTree,n=>{"param"===n.type&&c.add(n.value.toLowerCase())});return Array.from(c)};w._compileMe=function(){const c="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature",
"lookups","attributeAdapter","datefields",c)).bind(F)};w._extractExpressionInfo=function(c){const n=[],Q=new Set;let Z=!0,ja=!0;this._visitAll(this.parseTree,oa=>{switch(oa.type){case "column_ref":{const ma=c.get(oa.column);let la,pa;ma?la=pa=ma.name:(pa=oa.column,la=pa.toLowerCase());!ma||"date"!==ma.type&&"esriFieldTypeDate"!==ma.type||(this.datefields[ma.name]=1);Q.has(la)||(Q.add(la),n.push(pa));oa.column=pa;break}case "function":{const {name:ma,args:la}=oa;oa=la.value.length;Z&&(Z=p.isStandardized(ma,
oa));ja&&(ja=U.isAggregate(ma,oa))}}});return{referencedFieldNames:Array.from(n),isStandardized:Z,isAggregate:ja}};w._visitAll=function(c,n){if(null!=c)switch(n(c),c.type){case "when_clause":this._visitAll(c.operand,n);this._visitAll(c.value,n);break;case "case_expression":for(const Q of c.clauses)this._visitAll(Q,n);"simple"===c.format&&this._visitAll(c.operand,n);null!==c.else&&this._visitAll(c.else,n);break;case "expr_list":for(const Q of c.value)this._visitAll(Q,n);break;case "unary_expr":this._visitAll(c.expr,
n);break;case "binary_expr":this._visitAll(c.left,n);this._visitAll(c.right,n);break;case "function":this._visitAll(c.args,n)}};w.evaluateNodeToJavaScript=function(c){switch(c.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(c.value)+", "+JSON.stringify(c.qualifier)+","+JSON.stringify(c.op)+")";case "case_expression":var n="";if("simple"===c.format){var Q="this.makeComparable("+this.evaluateNodeToJavaScript(c.operand)+")";n="( ";for(let Z=0;Z<c.clauses.length;Z++)n+=
" ("+Q+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(c.clauses[Z].operand)+")) ? ("+this.evaluateNodeToJavaScript(c.clauses[Z].value)+") : "}else for(n="( ",Q=0;Q<c.clauses.length;Q++)n+=" this.makeBool("+this.evaluateNodeToJavaScript(c.clauses[Q].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(c.clauses[Q].value)+") : ";n=null!==c.else?n+this.evaluateNodeToJavaScript(c.else):n+"null";return n+=" )";case "param":return"this.lookup("+JSON.stringify(c.value.toLowerCase())+
",lookups)";case "expr_list":n="[";for(Q of c.value)"["!==n&&(n+=","),n+=this.evaluateNodeToJavaScript(Q);return n+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(c.expr)+")";case "binary_expr":switch(c.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+" )";case "IS":if("null"!==
c.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(c.left)+")";case "ISNOT":if("null"!==c.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(c.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(c.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(c.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(c.left)+",this.ensureArray("+
this.evaluateNodeToJavaScript(c.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+","+JSON.stringify(c.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+
this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+","+JSON.stringify(c.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(c.operator)+","+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(c.operator)+","+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+
")"}throw Error("Not Supported Operator "+c.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(c.value);case "date":return"(new Date("+t(c.value).getTime().toString()+"))";case "timestamp":return"(new Date("+r(c.value).getTime().toString()+"))";case "current_time":return"date"===c.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(c.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+
JSON.stringify(c.name)+","+this.evaluateNodeToJavaScript(c.args)+")"}throw Error("Unsupported sql syntax "+c.type);};w._evaluateNode=function(c,n,Q){switch(c.type){case "interval":return n=this._evaluateNode(c.value,n,Q),p.SqlInterval.createFromValueAndQualifer(n,c.qualifier,c.op);case "case_expression":if("simple"===c.format){var Z=l(this._evaluateNode(c.operand,n,Q));for(var ja=0;ja<c.clauses.length;ja++)if(Z===l(this._evaluateNode(c.clauses[ja].operand,n,Q)))return this._evaluateNode(c.clauses[ja].value,
n,Q)}else for(Z=0;Z<c.clauses.length;Z++)if(!0===this._evaluateNode(c.clauses[Z].operand,n,Q))return this._evaluateNode(c.clauses[Z].value,n,Q);return null!==c.else?this._evaluateNode(c.else,n,Q):null;case "param":return this.parameters[c.value.toLowerCase()];case "expr_list":Z=[];for(ja of c.value)Z.push(this._evaluateNode(ja,n,Q));return Z;case "unary_expr":return P(this._evaluateNode(c.expr,n,Q));case "binary_expr":switch(c.operator){case "AND":return O(this._evaluateNode(c.left,n,Q),this._evaluateNode(c.right,
n,Q));case "OR":return m(this._evaluateNode(c.left,n,Q),this._evaluateNode(c.right,n,Q));case "IS":if("null"!==c.right.type)throw Error("Unsupported RHS for IS");return null===this._evaluateNode(c.left,n,Q);case "ISNOT":if("null"!==c.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(c.left,n,Q);case "IN":return Z=A(this._evaluateNode(c.right,n,Q)),I(this._evaluateNode(c.left,n,Q),Z);case "NOT IN":return Z=A(this._evaluateNode(c.right,n,Q)),P(I(this._evaluateNode(c.left,
n,Q),Z));case "BETWEEN":return Z=this._evaluateNode(c.left,n,Q),c=this._evaluateNode(c.right,n,Q),null==Z||null==c[0]||null==c[1]?null:Z>=l(c[0])&&Z<=l(c[1]);case "NOTBETWEEN":return Z=this._evaluateNode(c.left,n,Q),c=this._evaluateNode(c.right,n,Q),null==Z||null==c[0]||null==c[1]?null:Z<l(c[0])||Z>l(c[1]);case "LIKE":return d(this._evaluateNode(c.left,n,Q),this._evaluateNode(c.right,n,Q),c.escape);case "NOT LIKE":return P(d(this._evaluateNode(c.left,n,Q),this._evaluateNode(c.right,n,Q),c.escape));
case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return K(c.operator,this._evaluateNode(c.left,n,Q),this._evaluateNode(c.right,n,Q));case "-":case "+":case "*":case "/":return G(c.operator,this._evaluateNode(c.left,n,Q),this._evaluateNode(c.right,n,Q))}case "null":case "bool":case "string":case "number":return c.value;case "date":return t(c.value);case "timestamp":return r(c.value);case "current_time":return n=new Date,"date"===c.mode&&n.setHours(0,0,0,0),n;case "column_ref":return u(n,
c.column,this.datefields,Q);case "function":return n=this._evaluateNode(c.args,n,Q),this.isAggregate?U.aggregateFunction(c.name,n):p.evaluateFunction(c.name,n)}throw Error("Unsupported sql syntax "+c.type);};e._createClass(J,[{key:"fieldNames",get:function(){return this.referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,c=>{"current_time"===c.type?this._hasDateFunctions=
!0:"function"===c.type&&(this._hasDateFunctions=this._hasDateFunctions||da.has(c.name.toLowerCase()))});return this._hasDateFunctions}}]);return J}();var T;(function(J){J[J.Normal=0]="Normal";J[J.Escaped=1]="Escaped"})(T||(T={}));const ba={getAttribute(J,w){return(J&&"object"===typeof J.attributes?J.attributes:J)[w]}};k.WhereClause=H;k.defaultAttributeAdapter=ba;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(k){function e(p){let D=
0;for(let x=0;x<p.length;x++)D+=p[x];return D/p.length}function W(p){const D=e(p),x=p.length;let q=0;for(const r of p)q+=(r-D)**2;return 1<x?q/(x-1):0}const U={min:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.min.apply(Math,p[0])},max:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.max.apply(Math,p[0])},avg:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:e(p[0])},sum:{minParams:1,maxParams:1,evaluate:p=>{if(null==p[0])p=null;else{{p=p[0];let D=0;for(let x=0;x<p.length;x++)D+=
p[x];p=D}}return p}},stddev:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.sqrt(W(p[0]))},count:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:p[0].length},var:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:W(p[0])}};k.aggregateFunction=function(p,D){const x=U[p.toLowerCase()];if(null==x)throw Error("Function Not Recognised");if(D.length<x.minParams||D.length>x.maxParams)throw Error(`Invalid Parameter count for call to ${p.toUpperCase()}`);return x.evaluate(D)};k.isAggregate=
function(p,D){p=U[p.toLowerCase()];return null!=p&&D>=p.minParams&&D<=p.maxParams};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(k,e){let W=function(){function p(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}p._fixDefaults=function(D){if(null!==D.precision||null!==D.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};p.createFromMilliseconds=
function(D){const x=new p;x.second=D/1E3;return x};p.createFromValueAndQualifer=function(D,x,q){let r=null;const t=new p;t.op="-"===q?"-":"+";if("interval-period"===x.type){p._fixDefaults(x);if("year"===x.period||"month"===x.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(D))t[x.period]=parseFloat(D);else throw Error("Illegal Interval");}else{p._fixDefaults(x.start);p._fixDefaults(x.end);if("year"===x.start.period||"month"===x.start.period)throw Error("Year-Month Intervals not supported");
if("year"===x.end.period||"month"===x.end.period)throw Error("Year-Month Intervals not supported");switch(x.start.period){case "day":switch(x.end.period){case "hour":r=/^[0-9]{1,} [0-9]{1,}$/;if(r.test(D))t[x.start.period]=parseFloat(D.split(" ")[0]),t[x.end.period]=parseFloat(D.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":r=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(r.test(D))t[x.start.period]=parseFloat(D.split(" ")[0]),D=D.split(" ")[1].split(":"),t.hour=parseFloat(D[0]),
t.minute=parseFloat(D[1]);else throw Error("Illegal Interval");break;case "second":r=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(r.test(D))t[x.start.period]=parseFloat(D.split(" ")[0]),D=D.split(" ")[1].split(":"),t.hour=parseFloat(D[0]),t.minute=parseFloat(D[1]),t.second=parseFloat(D[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(x.end.period){case "minute":r=/^[0-9]{1,}:[0-9]{1,}$/;if(r.test(D))t.hour=parseFloat(D.split(":")[0]),
t.minute=parseFloat(D.split(":")[1]);else throw Error("Illegal Interval");break;case "second":r=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(r.test(D))D=D.split(":"),t.hour=parseFloat(D[0]),t.minute=parseFloat(D[1]),t.second=parseFloat(D[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(x.end.period){case "second":r=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(r.test(D))D=D.split(":"),t.minute=parseFloat(D[0]),t.second=parseFloat(D[1]);
else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return t};p.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return p}();const U={extract:{minParams:2,maxParams:2,evaluate:([p,D])=>{if(null==D)return null;if(D instanceof Date)switch(p.toUpperCase()){case "SECOND":return D.getSeconds();case "MINUTE":return D.getMinutes();
case "HOUR":return D.getHours();case "DAY":return D.getDate();case "MONTH":return D.getMonth()+1;case "YEAR":return D.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:p=>{if(2===p.length){const [D,x]=p;return null==D||null==x?null:D.toString().substring(x-1)}if(3===p.length){const [D,x,q]=p;return null==D||null==x||null==q?null:0>=q?"":D.toString().substring(x-1,x+q-1)}}},position:{minParams:2,maxParams:2,evaluate:([p,D])=>null==p||
null==D?null:D.indexOf(p)+1},trim:{minParams:2,maxParams:3,evaluate:p=>{var D=3===p.length,x=D?p[1]:" ";D=D?p[2]:p[1];if(null==x||null==D)return null;x=`(${e.escapeRegExpString(x)})`;switch(p[0]){case "BOTH":return D.replace(new RegExp(`^${x}*|${x}*$`,"g"),"");case "LEADING":return D.replace(new RegExp(`^${x}*`,"g"),"");case "TRAILING":return D.replace(new RegExp(`${x}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.abs(p[0])},
ceiling:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.ceil(p[0])},floor:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.floor(p[0])},log:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.log(p[0])},log10:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.log(p[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.sin(p[0])},cos:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.cos(p[0])},tan:{minParams:1,maxParams:1,evaluate:p=>
null==p[0]?null:Math.tan(p[0])},asin:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.asin(p[0])},acos:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.acos(p[0])},atan:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.atan(p[0])},sign:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:0<p[0]?1:0>p[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:p=>null==p[0]||null==p[1]?null:p[0]**p[1]},mod:{minParams:2,maxParams:2,evaluate:p=>null==p[0]||null==p[1]?null:p[0]%p[1]},round:{minParams:1,
maxParams:2,evaluate:p=>{const D=p[0];p=2===p.length?10**p[1]:1;return null==D?null:Math.round(D*p)/p}},truncate:{minParams:1,maxParams:2,evaluate:p=>null==p[0]?null:1===p.length?parseInt(p[0].toFixed(0),10):parseFloat(p[0].toFixed(p[1]))},char_length:{minParams:1,maxParams:1,evaluate:p=>"string"===typeof p[0]||p[0]instanceof String?p[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:p=>{let D="";for(let x=0;x<p.length;x++){if(null==p[x])return null;D+=p[x].toString()}return D}},lower:{minParams:1,
maxParams:1,evaluate:p=>null==p[0]?null:p[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:p[0].toString().toUpperCase()}};k.SqlInterval=W;k.evaluateFunction=function(p,D){const x=U[p.toLowerCase()];if(null==x)throw Error("Function Not Recognised");if(D.length<x.minParams||D.length>x.maxParams)throw Error(`Invalid Parameter count for call to ${p.toUpperCase()}`);return x.evaluate(D)};k.isStandardized=function(p,D){p=U[p.toLowerCase()];return null!=p&&D>=p.minParams&&
D<=p.maxParams};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(k,e){var W={exports:{}};(function(p){(function(D,x){p.exports&&(p.exports=x())})(e.commonjsGlobal,function(){function D(q,r,t,A){q=Error.call(this,q);Object.setPrototypeOf&&Object.setPrototypeOf(q,D.prototype);q.expected=r;q.found=t;q.location=A;q.name="SyntaxError";return q}function x(q,r,t){t=t||" ";if(q.length>r)return q;r-=q.length;
t+=t.repeat(r);return q+t.slice(0,r)}(function(q,r){function t(){this.constructor=q}t.prototype=r.prototype;q.prototype=new t})(D,Error);D.prototype.format=function(q){var r="Error: "+this.message;if(this.location){var t=null,A;for(A=0;A<q.length;A++)if(q[A].source===this.location.source){t=q[A].text.split(/\r\n|\n|\r/g);break}q=this.location.start;A=this.location.source+":"+q.line+":"+q.column;if(t){var P=this.location.end,O=x("",q.line.toString().length);t=t[q.line-1];P=q.line===P.line?P.column:
t.length+1;r+="\n --\x3e "+A+"\n"+O+" |\n"+q.line+" | "+t+"\n"+O+" | "+x("",q.column-1)+x("",P-q.column,"^")}else r+="\n at "+A}return r};D.buildMessage=function(q,r){function t(I){return I.charCodeAt(0).toString(16).toUpperCase()}function A(I){return I.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+t(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+t(d)})}function P(I){return I.replace(/\\/g,
"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+t(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+t(d)})}function O(I){return m[I.type](I)}var m={literal:function(I){return'"'+A(I.text)+'"'},class:function(I){var d=I.parts.map(function(l){return Array.isArray(l)?P(l[0])+"-"+P(l[1]):P(l)});return"["+(I.inverted?"^":"")+d+"]"},any:function(){return"any character"},
end:function(){return"end of input"},other:function(I){return I.description}};return"Expected "+function(I){I=I.map(O);var d,l;I.sort();if(0<I.length){for(l=d=1;d<I.length;d++)I[d-1]!==I[d]&&(I[l]=I[d],l++);I.length=l}switch(I.length){case 1:return I[0];case 2:return I[0]+" or "+I[1];default:return I.slice(0,-1).join(", ")+", or "+I[I.length-1]}}(q)+" but "+(r?'"'+A(r)+'"':"end of input")+" found."};return{SyntaxError:D,parse:function(q,r){function t(v,E){return{type:"literal",text:v,ignoreCase:E}}
function A(v,E,aa){return{type:"class",parts:v,inverted:E,ignoreCase:aa}}function P(v){var E=cc[v],aa;if(!E){for(aa=v-1;!cc[aa];)aa--;E=cc[aa];for(E={line:E.line,column:E.column};aa<v;)10===q.charCodeAt(aa)?(E.line++,E.column=1):E.column++,aa++;cc[v]=E}return E}function O(v,E){var aa=P(v),ta=P(E);return{source:$a,start:{offset:v,line:aa.line,column:aa.column},end:{offset:E,line:ta.line,column:ta.column}}}function m(v){f<sb||(f>sb&&(sb=f,vc=[]),vc.push(v))}function I(){var v=f;sa();var E=l();E!==b?
(sa(),v=E):(f=v,v=b);return v}function d(){var v=f;var E=l();if(E!==b){v=[];var aa=f;var ta=sa();var Da=Ea();if(Da!==b){var Ma=sa();var Na=l();Na!==b?aa=ta=[ta,Da,Ma,Na]:(f=aa,aa=b)}else f=aa,aa=b;for(;aa!==b;)v.push(aa),aa=f,ta=sa(),Da=Ea(),Da!==b?(Ma=sa(),Na=l(),Na!==b?aa=ta=[ta,Da,Ma,Na]:(f=aa,aa=b)):(f=aa,aa=b);aa={type:"expr_list"};E=[E];for(ta=0;ta<v.length;ta++)E.push(v[ta][3]);aa.value=E;v=aa}else f=v,v=b;return v}function l(){var v=f;var E=K();if(E!==b){v=[];var aa=f;var ta=sa();var Da=S();
if(Da!==b){var Ma=sa();var Na=K();Na!==b?aa=ta=[ta,Da,Ma,Na]:(f=aa,aa=b)}else f=aa,aa=b;for(;aa!==b;)v.push(aa),aa=f,ta=sa(),Da=S(),Da!==b?(Ma=sa(),Na=K(),Na!==b?aa=ta=[ta,Da,Ma,Na]:(f=aa,aa=b)):(f=aa,aa=b);v=Sa(E,v)}else f=v,v=b;return v}function K(){var v=f;var E=G();if(E!==b){v=[];var aa=f;var ta=sa();var Da=y();if(Da!==b){var Ma=sa();var Na=G();Na!==b?aa=ta=[ta,Da,Ma,Na]:(f=aa,aa=b)}else f=aa,aa=b;for(;aa!==b;)v.push(aa),aa=f,ta=sa(),Da=y(),Da!==b?(Ma=sa(),Na=G(),Na!==b?aa=ta=[ta,Da,Ma,Na]:(f=
aa,aa=b)):(f=aa,aa=b);v=Sa(E,v)}else f=v,v=b;return v}function G(){var v=f;var E=g();if(E===b){E=f;if(33===q.charCodeAt(f)){var aa=ka;f++}else aa=b,0===ua&&m(nd);if(aa!==b){var ta=f;ua++;if(61===q.charCodeAt(f)){var Da=Qb;f++}else Da=b,0===ua&&m(Lc);ua--;Da===b?ta=void 0:(f=ta,ta=b);ta!==b?E=aa=[aa,ta]:(f=E,E=b)}else f=E,E=b}E!==b?(aa=sa(),ta=G(),ta!==b?v={type:"unary_expr",operator:"NOT",expr:ta}:(f=v,v=b)):(f=v,v=b);if(v===b){E=f;v=z();if(v!==b){sa();E=[];aa=f;ta=sa();Da=u();if(Da!==b){var Ma=sa();
var Na=z();Na!==b?aa=ta=[ta,Da,Ma,Na]:(f=aa,aa=b)}else f=aa,aa=b;if(aa!==b)for(;aa!==b;)E.push(aa),aa=f,ta=sa(),Da=u(),Da!==b?(Ma=sa(),Na=z(),Na!==b?aa=ta=[ta,Da,Ma,Na]:(f=aa,aa=b)):(f=aa,aa=b);else E=b;E!==b&&(E={type:"arithmetic",tail:E});E===b&&(E=f,aa=C(),aa!==b?(sa(),ta=Ga(),ta!==b?(sa(),ta=d(),ta!==b?(sa(),Da=Qa(),Da!==b?E={op:aa,right:ta}:(f=E,E=b)):(f=E,E=b)):(f=E,E=b)):(f=E,E=b),E===b&&(E=f,aa=C(),aa!==b?(sa(),ta=Ga(),ta!==b?(sa(),ta=Qa(),ta!==b?E={op:aa,right:{type:"expr_list",value:[]}}:
(f=E,E=b)):(f=E,E=b)):(f=E,E=b),E===b&&(E=f,aa=C(),aa!==b?(sa(),ta=w(),ta!==b?E={op:aa,right:ta}:(f=E,E=b)):(f=E,E=b))),E===b&&(E=f,Da=g(),Da!==b?(sa(),aa=V(),aa!==b?(sa(),ta=z(),ta!==b?(sa(),Ma=y(),Ma!==b?(sa(),Da=z(),Da!==b?E={op:"NOT"+aa,right:{type:"expr_list",value:[ta,Da]}}:(f=E,E=b)):(f=E,E=b)):(f=E,E=b)):(f=E,E=b)):(f=E,E=b),E===b&&(E=f,Da=V(),Da!==b?(sa(),aa=z(),aa!==b?(sa(),ta=y(),ta!==b?(sa(),Ma=z(),Ma!==b?E={op:Da,right:{type:"expr_list",value:[aa,Ma]}}:(f=E,E=b)):(f=E,E=b)):(f=E,E=b)):
(f=E,E=b)),E===b&&(E=f,aa=h(),aa!==b?(sa(),ta=g(),ta!==b?(sa(),ta=z(),ta!==b?E={op:aa+"NOT",right:ta}:(f=E,E=b)):(f=E,E=b)):(f=E,E=b),E===b&&(E=f,aa=h(),aa!==b?(sa(),ta=z(),ta!==b?E={op:aa,right:ta}:(f=E,E=b)):(f=E,E=b)),E===b&&(E=f,aa=B(),aa!==b?(sa(),ta=oa(),ta!==b?(sa(),Da=f,q.substr(f,6).toLowerCase()===Xa?(Ma=q.substr(f,6),f+=6):(Ma=b,0===ua&&m(od)),Ma!==b?(Ma=f,ua++,Na=ba(),ua--,Na===b?Ma=void 0:(f=Ma,Ma=b),Ma!==b?Da="ESCAPE":(f=Da,Da=b)):(f=Da,Da=b),Da!==b?(sa(),Da=ma(),Da!==b?E={op:aa,right:ta,
escape:Da.value}:(f=E,E=b)):(f=E,E=b)):(f=E,E=b)):(f=E,E=b),E===b&&(E=f,aa=B(),aa!==b?(sa(),ta=oa(),ta!==b?E={op:aa,right:ta,escape:""}:(f=E,E=b)):(f=E,E=b))))));E===b&&(E=null);""==E||void 0==E||null==E?E=v:(aa=null,E=aa="arithmetic"==E.type?Sa(v,E.tail):ab(E.op,v,E.right,E.escape))}else f=E,E=b;v=E}return v}function u(){if(q.substr(f,2)===zb){var v=zb;f+=2}else v=b,0===ua&&m(pd);v===b&&(62===q.charCodeAt(f)?(v=lb,f++):(v=b,0===ua&&m(qd)),v===b&&(q.substr(f,2)===Bb?(v=Bb,f+=2):(v=b,0===ua&&m(rd)),
v===b&&(q.substr(f,2)===Rb?(v=Rb,f+=2):(v=b,0===ua&&m(sd)),v===b&&(60===q.charCodeAt(f)?(v=Pb,f++):(v=b,0===ua&&m(td)),v===b&&(61===q.charCodeAt(f)?(v=Qb,f++):(v=b,0===ua&&m(Lc)),v===b&&(q.substr(f,2)===bc?(v=bc,f+=2):(v=b,0===ua&&m(ud))))))));return v}function B(){var v=v=f;var E=g();if(E!==b){var aa=sa();var ta=Y();ta!==b?v=E=[E,aa,ta]:(f=v,v=b)}else f=v,v=b;v!==b&&(v=v[0]+" "+v[2]);v===b&&(v=Y());return v}function C(){var v=v=f;var E=g();if(E!==b){var aa=sa();var ta=a();ta!==b?v=E=[E,aa,ta]:(f=
v,v=b)}else f=v,v=b;v!==b&&(v=v[0]+" "+v[2]);v===b&&(v=a());return v}function z(){var v=f;var E=N();if(E!==b){v=[];var aa=f;var ta=sa();var Da=M();if(Da!==b){var Ma=sa();var Na=N();Na!==b?aa=ta=[ta,Da,Ma,Na]:(f=aa,aa=b)}else f=aa,aa=b;for(;aa!==b;)v.push(aa),aa=f,ta=sa(),Da=M(),Da!==b?(Ma=sa(),Na=N(),Na!==b?aa=ta=[ta,Da,Ma,Na]:(f=aa,aa=b)):(f=aa,aa=b);v=Sa(E,v)}else f=v,v=b;return v}function M(){if(43===q.charCodeAt(f)){var v=fb;f++}else v=b,0===ua&&m(wc);v===b&&(45===q.charCodeAt(f)?(v=qb,f++):(v=
b,0===ua&&m(xc)));return v}function N(){var v=f;var E=F();if(E!==b){v=[];var aa=f;var ta=sa();var Da=da();if(Da!==b){var Ma=sa();var Na=F();Na!==b?aa=ta=[ta,Da,Ma,Na]:(f=aa,aa=b)}else f=aa,aa=b;for(;aa!==b;)v.push(aa),aa=f,ta=sa(),Da=da(),Da!==b?(Ma=sa(),Na=F(),Na!==b?aa=ta=[ta,Da,Ma,Na]:(f=aa,aa=b)):(f=aa,aa=b);v=Sa(E,v)}else f=v,v=b;return v}function da(){if(42===q.charCodeAt(f)){var v=Ua;f++}else v=b,0===ua&&m(vd);v===b&&(47===q.charCodeAt(f)?(v=kb,f++):(v=b,0===ua&&m(wd)));return v}function F(){var v=
ma();if(v===b){var E=f;var aa=f;var ta=Ca();if(ta!==b){var Da=Ka();if(Da!==b){var Ma=Ra();Ma!==b?aa=parseFloat(ta+Da+Ma):(f=aa,aa=b)}else f=aa,aa=b}else f=aa,aa=b;aa===b&&(aa=f,ta=Ca(),ta!==b?(Da=Ka(),Da!==b?aa=parseFloat(ta+Da):(f=aa,aa=b)):(f=aa,aa=b),aa===b&&(aa=f,ta=Ca(),ta!==b?(Da=Ra(),Da!==b?aa=parseFloat(ta+Da):(f=aa,aa=b)):(f=aa,aa=b),aa===b&&(aa=f,ta=Ca(),ta!==b&&(ta=parseFloat(ta)),aa=ta)));var Na=aa;if(Na!==b){var dc=f;ua++;var xd=T();ua--;xd===b?dc=void 0:(f=dc,dc=b);dc!==b?E={type:"number",
value:Na}:(f=E,E=b)}else f=E,E=b;v=E;if(v===b){var Sb=f;var Eb=f;if(q.substr(f,4).toLowerCase()===na){var ec=q.substr(f,4);f+=4}else ec=b,0===ua&&m(yd);if(ec!==b){var Tb=f;ua++;var zd=ba();ua--;zd===b?Tb=void 0:(f=Tb,Tb=b);Tb!==b?Eb=ec=[ec,Tb]:(f=Eb,Eb=b)}else f=Eb,Eb=b;var Db=Eb;Db!==b&&(Db={type:"bool",value:!0});Sb=Db;if(Sb===b){Sb=f;var Fb=f;if(q.substr(f,5).toLowerCase()===ya){var fc=q.substr(f,5);f+=5}else fc=b,0===ua&&m(Ad);if(fc!==b){var Ub=f;ua++;var Bd=ba();ua--;Bd===b?Ub=void 0:(f=Ub,Ub=
b);Ub!==b?Fb=fc=[fc,Ub]:(f=Fb,Fb=b)}else f=Fb,Fb=b;Db=Fb;Db!==b&&(Db={type:"bool",value:!1});Sb=Db}v=Sb;if(v===b){var Gb=f;if(q.substr(f,4).toLowerCase()===ca){var gc=q.substr(f,4);f+=4}else gc=b,0===ua&&m(Cd);if(gc!==b){var Vb=f;ua++;var Dd=ba();ua--;Dd===b?Vb=void 0:(f=Vb,Vb=b);Vb!==b?Gb=gc=[gc,Vb]:(f=Gb,Gb=b)}else f=Gb,Gb=b;var yc=Gb;yc!==b&&(yc={type:"null",value:null});v=yc;if(v===b){var Hb=f;var Ib=f;if(q.substr(f,4).toLowerCase()===Ed){var Mc=q.substr(f,4);f+=4}else Mc=b,0===ua&&m(Fd);if(Mc!==
b){var hc=f;ua++;var Gd=ba();ua--;Gd===b?hc=void 0:(f=hc,hc=b);hc!==b?Ib="DATE":(f=Ib,Ib=b)}else f=Ib,Ib=b;if(Ib!==b){sa();var Nc=oa();Nc!==b?Hb={type:"date",value:Nc.value}:(f=Hb,Hb=b)}else f=Hb,Hb=b;v=Hb;if(v===b){var Jb=f;var Kb=f;if(q.substr(f,9).toLowerCase()===Hd){var Oc=q.substr(f,9);f+=9}else Oc=b,0===ua&&m(Id);if(Oc!==b){var ic=f;ua++;var Jd=ba();ua--;Jd===b?ic=void 0:(f=ic,ic=b);ic!==b?Kb="TIMESTAMP":(f=Kb,Kb=b)}else f=Kb,Kb=b;if(Kb!==b){sa();var Pc=oa();Pc!==b?Jb={type:"timestamp",value:Pc.value}:
(f=Jb,Jb=b)}else f=Jb,Jb=b;v=Jb;if(v===b){var db=f;var zc=L();if(zc!==b){sa();if(45===q.charCodeAt(f)){var vb=qb;f++}else vb=b,0===ua&&m(xc);vb===b&&(43===q.charCodeAt(f)?(vb=fb,f++):(vb=b,0===ua&&m(wc)));if(vb!==b){sa();var Wb=oa();if(Wb!==b){sa();var Qc=n();Qc!==b?db={type:"interval",value:Wb,qualifier:Qc,op:vb}:(f=db,db=b)}else f=db,db=b}else f=db,db=b}else f=db,db=b;db===b&&(db=f,zc=L(),zc!==b?(sa(),vb=oa(),vb!==b?(sa(),Wb=n(),Wb!==b?db={type:"interval",value:vb,qualifier:Wb,op:""}:(f=db,db=b)):
(f=db,db=b)):(f=db,db=b));v=db}}}}}}var Ya=v;if(Ya===b){var hb=f;var Lb=f;if(q.substr(f,7).toLowerCase()===Kd){var Rc=q.substr(f,7);f+=7}else Rc=b,0===ua&&m(Ld);if(Rc!==b){var jc=f;ua++;var Md=ba();ua--;Md===b?jc=void 0:(f=jc,jc=b);jc!==b?Lb="EXTRACT":(f=Lb,Lb=b)}else f=Lb,Lb=b;if(Lb!==b){sa();var Nd=Ga();if(Nd!==b){sa();var nb=R();nb===b&&(nb=ea(),nb===b&&(nb=qa(),nb===b&&(nb=ra(),nb===b&&(nb=xa(),nb===b&&(nb=za())))));var Sc=nb;if(Sc!==b){sa();var Od=fa();if(Od!==b){sa();var Tc=l();if(Tc!==b){sa();
var Pd=Qa();Pd!==b?hb={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:Sc},Tc]}}:(f=hb,hb=b)}else f=hb,hb=b}else f=hb,hb=b}else f=hb,hb=b}else f=hb,hb=b}else f=hb,hb=b;Ya=hb;if(Ya===b){var ib=f;var Mb=f;if(q.substr(f,9).toLowerCase()===Qd){var Uc=q.substr(f,9);f+=9}else Uc=b,0===ua&&m(Rd);if(Uc!==b){var kc=f;ua++;var Sd=ba();ua--;Sd===b?kc=void 0:(f=kc,kc=b);kc!==b?Mb="SUBSTRING":(f=Mb,Mb=b)}else f=Mb,Mb=b;if(Mb!==b){sa();var Td=Ga();if(Td!==b){sa();var Ac=l();if(Ac!==
b){sa();var Ud=fa();if(Ud!==b){sa();var Bc=l();if(Bc!==b){sa();var wb=f;var Nb=f;if(q.substr(f,3).toLowerCase()===Vd){var Vc=q.substr(f,3);f+=3}else Vc=b,0===ua&&m(Wd);if(Vc!==b){var lc=f;ua++;var Xd=ba();ua--;Xd===b?lc=void 0:(f=lc,lc=b);lc!==b?Nb="FOR":(f=Nb,Nb=b)}else f=Nb,Nb=b;var Xb=Nb;if(Xb!==b){var Yd=sa();var Wc=l();if(Wc!==b){var Zd=sa();wb=Xb=[Xb,Yd,Wc,Zd]}else f=wb,wb=b}else f=wb,wb=b;wb===b&&(wb=null);Xb=Qa();Xb!==b?ib={type:"function",name:"substring",args:{type:"expr_list",value:wb?
[Ac,Bc,wb[2]]:[Ac,Bc]}}:(f=ib,ib=b)}else f=ib,ib=b}else f=ib,ib=b}else f=ib,ib=b}else f=ib,ib=b}else f=ib,ib=b;Ya=ib;if(Ya===b){var Za=f;var Cc=ha();if(Cc!==b){sa();var Dc=Ga();if(Dc!==b){sa();var xb=c();xb===b&&(xb=null);sa();var Yb=l();if(Yb!==b){sa();var Ec=fa();if(Ec!==b){sa();var Xc=l();if(Xc!==b){sa();var $d=Qa();$d!==b?Za={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==xb?"BOTH":xb},Yb,Xc]}}:(f=Za,Za=b)}else f=Za,Za=b}else f=Za,Za=b}else f=Za,Za=b}else f=
Za,Za=b}else f=Za,Za=b;Za===b&&(Za=f,Cc=ha(),Cc!==b?(sa(),Dc=Ga(),Dc!==b?(sa(),xb=c(),xb===b&&(xb=null),sa(),Yb=l(),Yb!==b?(sa(),Ec=Qa(),Ec!==b?Za={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==xb?"BOTH":xb},Yb]}}:(f=Za,Za=b)):(f=Za,Za=b)):(f=Za,Za=b)):(f=Za,Za=b));Ya=Za;if(Ya===b){var jb=f;var Ob=f;if(q.substr(f,8).toLowerCase()===ae){var Yc=q.substr(f,8);f+=8}else Yc=b,0===ua&&m(be);if(Yc!==b){var mc=f;ua++;var ce=ba();ua--;ce===b?mc=void 0:(f=mc,mc=b);mc!==
b?Ob="POSITION":(f=Ob,Ob=b)}else f=Ob,Ob=b;if(Ob!==b){sa();var de=Ga();if(de!==b){sa();var Zc=l();if(Zc!==b){sa();var ee=a();if(ee!==b){sa();var $c=l();if($c!==b){sa();var fe=Qa();fe!==b?jb={type:"function",name:"position",args:{type:"expr_list",value:[Zc,$c]}}:(f=jb,jb=b)}else f=jb,jb=b}else f=jb,jb=b}else f=jb,jb=b}else f=jb,jb=b}else f=jb,jb=b;Ya=jb;if(Ya===b){var Ab=f;var nc;var ob=f;ob=nc=H();if(ob===b)if(ob=f,96===q.charCodeAt(f)?(nc=ad,f++):(nc=b,0===ua&&m(bd)),nc!==b){var oc=[];if(cd.test(q.charAt(f))){var yb=
q.charAt(f);f++}else yb=b,0===ua&&m(dd);if(yb!==b)for(;yb!==b;)oc.push(yb),cd.test(q.charAt(f))?(yb=q.charAt(f),f++):(yb=b,0===ua&&m(dd));else oc=b;oc!==b?(96===q.charCodeAt(f)?(yb=ad,f++):(yb=b,0===ua&&m(bd)),yb!==b?ob=oc.join(""):(f=ob,ob=b)):(f=ob,ob=b)}else f=ob,ob=b;var ed=ob;if(ed!==b){sa();var ge=Ga();if(ge!==b){sa();var pc=d();pc===b&&(pc=null);sa();var he=Qa();he!==b?Ab={type:"function",name:ed,args:pc?pc:{type:"expr_list",value:[]}}:(f=Ab,Ab=b)}else f=Ab,Ab=b}else f=Ab,Ab=b;Ya=Ab;if(Ya===
b){var tb;var eb=f;var Fc=Ba();if(Fc!==b){sa();var Zb=l();if(Zb!==b){sa();var $b=[];for(tb=pa();tb!==b;)$b.push(tb),tb=pa();tb=sa();var qc=Ia();qc!==b?eb={type:"case_expression",format:"simple",operand:Zb,clauses:$b,else:null}:(f=eb,eb=b)}else f=eb,eb=b}else f=eb,eb=b;if(eb===b)if(eb=f,Fc=Ba(),Fc!==b)if(sa(),Zb=l(),Zb!==b){sa();$b=[];for(tb=pa();tb!==b;)$b.push(tb),tb=pa();tb=sa();qc=wa();if(qc!==b){sa();var ie=Ia();ie!==b?eb={type:"case_expression",format:"simple",operand:Zb,clauses:$b,else:qc.value}:
(f=eb,eb=b)}else f=eb,eb=b}else f=eb,eb=b;else f=eb,eb=b;var Gc=eb;if(Gc===b){var ub;var gb=f;var Hc=Ba();if(Hc!==b){sa();var ac=[];for(ub=la();ub!==b;)ac.push(ub),ub=la();ub=sa();var rc=Ia();rc!==b?gb={type:"case_expression",format:"searched",clauses:ac,else:null}:(f=gb,gb=b)}else f=gb,gb=b;if(gb===b)if(gb=f,Hc=Ba(),Hc!==b){sa();ac=[];for(ub=la();ub!==b;)ac.push(ub),ub=la();ub=sa();rc=wa();if(rc!==b){sa();var je=Ia();je!==b?gb={type:"case_expression",format:"searched",clauses:ac,else:rc.value}:(f=
gb,gb=b)}else f=gb,gb=b}else f=gb,gb=b;Gc=gb}Ya=Gc;if(Ya===b){var sc;var tc=f;var fd=T();if(fd!==b){var gd=[];for(sc=J();sc!==b;)gd.push(sc),sc=J();tc=fd+gd.join("")}else f=tc,tc=b;var uc=tc;if(uc!==b){var Ic=uc;uc=/^CURRENT_DATE$/i.test(Ic)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Ic)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",column:Ic}}Ya=uc;if(Ya===b&&(Ya=w(),Ya===b)){Ya=f;var ke=Ga();if(ke!==b){sa();var Jc=l();if(Jc!==b){sa();var le=Qa();le!==b?(Jc.paren=
!0,Ya=Jc):(f=Ya,Ya=b)}else f=Ya,Ya=b}else f=Ya,Ya=b}}}}}}}}return Ya}function H(){var v;var E=f;var aa=T();if(aa!==b){E=[];for(v=ba();v!==b;)E.push(v),v=ba();E=aa+E.join("")}else f=E,E=b;return E}function T(){if(me.test(q.charAt(f))){var v=q.charAt(f);f++}else v=b,0===ua&&m(ne);return v}function ba(){if(oe.test(q.charAt(f))){var v=q.charAt(f);f++}else v=b,0===ua&&m(pe);return v}function J(){if(qe.test(q.charAt(f))){var v=q.charAt(f);f++}else v=b,0===ua&&m(re);return v}function w(){var v=f;if(64===
q.charCodeAt(f)){var E=rb;f++}else E=b,0===ua&&m(se);if(E!==b){var aa=H();aa!==b?v=E=[E,aa]:(f=v,v=b)}else f=v,v=b;v!==b&&(v={type:"param",value:v[1]});return v}function c(){var v=f;if(q.substr(f,7).toLowerCase()===te){var E=q.substr(f,7);f+=7}else E=b,0===ua&&m(ue);if(E!==b){E=f;ua++;var aa=ba();ua--;aa===b?E=void 0:(f=E,E=b);E!==b?v="LEADING":(f=v,v=b)}else f=v,v=b;v===b&&(v=f,q.substr(f,8).toLowerCase()===ve?(E=q.substr(f,8),f+=8):(E=b,0===ua&&m(we)),E!==b?(E=f,ua++,aa=ba(),ua--,aa===b?E=void 0:
(f=E,E=b),E!==b?v="TRAILING":(f=v,v=b)):(f=v,v=b),v===b&&(v=f,q.substr(f,4).toLowerCase()===xe?(E=q.substr(f,4),f+=4):(E=b,0===ua&&m(ye)),E!==b?(E=f,ua++,aa=ba(),ua--,aa===b?E=void 0:(f=E,E=b),E!==b?v="BOTH":(f=v,v=b)):(f=v,v=b)));return v}function n(){var v=f;var E=f;var aa=Q();if(aa!==b){sa();var ta=Ga();if(ta!==b)if(sa(),ta=ja(),ta!==b){sa();var Da=Qa();Da!==b?E={type:"interval-period",period:aa.value,precision:ta,secondary:null}:(f=E,E=b)}else f=E,E=b;else f=E,E=b}else f=E,E=b;E===b&&(E=f,aa=
Q(),aa!==b&&(aa=hd(aa)),E=aa);if(E!==b)if(sa(),aa=f,q.substr(f,2).toLowerCase()===ze?(ta=q.substr(f,2),f+=2):(ta=b,0===ua&&m(Ae)),ta!==b?(ta=f,ua++,Da=ba(),ua--,Da===b?ta=void 0:(f=ta,ta=b),ta!==b?aa="TO":(f=aa,aa=b)):(f=aa,aa=b),aa!==b){sa();aa=f;ta=Q();ta!==b&&(ta={type:"interval-period",period:ta.value,precision:null,secondary:null});aa=ta;if(aa===b){aa=f;ta=za();if(ta!==b)if(sa(),ta=Ga(),ta!==b)if(sa(),ta=ja(),ta!==b)if(sa(),Da=Ea(),Da!==b)if(sa(),Da=Z(),Da!==b){sa();var Ma=Qa();Ma!==b?aa=id(ta,
Da):(f=aa,aa=b)}else f=aa,aa=b;else f=aa,aa=b;else f=aa,aa=b;else f=aa,aa=b;else f=aa,aa=b;aa===b&&(aa=f,ta=za(),ta!==b?(sa(),ta=Ga(),ta!==b?(sa(),ta=ja(),ta!==b?(sa(),Da=Qa(),Da!==b?aa={type:"interval-period",period:"second",precision:ta,secondary:null}:(f=aa,aa=b)):(f=aa,aa=b)):(f=aa,aa=b)):(f=aa,aa=b),aa===b&&(aa=f,ta=za(),ta!==b&&(ta={type:"interval-period",period:"second",precision:null,secondary:null}),aa=ta))}aa!==b?v={type:"interval-qualifier",start:E,end:aa}:(f=v,v=b)}else f=v,v=b;else f=
v,v=b;v===b&&(v=f,aa=Q(),aa!==b?(sa(),E=Ga(),E!==b?(sa(),E=Z(),E!==b?(sa(),ta=Qa(),ta!==b?v={type:"interval-period",period:aa.value,precision:E,secondary:null}:(f=v,v=b)):(f=v,v=b)):(f=v,v=b)):(f=v,v=b),v===b&&(v=f,aa=Q(),aa!==b&&(aa=hd(aa)),v=aa,v===b&&(v=f,aa=za(),aa!==b?(sa(),E=Ga(),E!==b?(sa(),E=ja(),E!==b?(sa(),ta=Ea(),ta!==b?(sa(),aa=Z(),aa!==b?(sa(),ta=Qa(),ta!==b?v=id(E,aa):(f=v,v=b)):(f=v,v=b)):(f=v,v=b)):(f=v,v=b)):(f=v,v=b)):(f=v,v=b),v===b&&(v=f,aa=za(),aa!==b?(sa(),E=Ga(),E!==b?(sa(),
E=Z(),E!==b?(sa(),ta=Qa(),ta!==b?v={type:"interval-period",period:"second",precision:E,secondary:null}:(f=v,v=b)):(f=v,v=b)):(f=v,v=b)):(f=v,v=b),v===b&&(v=f,aa=za(),aa!==b&&(aa={type:"interval-period",period:"second",precision:null,secondary:null}),v=aa)))));return v}function Q(){var v=f;v=qa();v!==b&&(v={type:"string",value:"day"});v===b&&(v=f,v=ra(),v!==b&&(v={type:"string",value:"hour"}),v===b&&(v=f,v=xa(),v!==b&&(v={type:"string",value:"minute"}),v===b&&(v=f,v=ea(),v!==b&&(v={type:"string",value:"month"}),
v===b&&(v=f,v=R(),v!==b&&(v={type:"string",value:"year"})))));return v}function Z(){var v=Pa();v!==b&&(v=parseFloat(v));return v}function ja(){var v=Pa();v!==b&&(v=parseFloat(v));return v}function oa(){var v=ma();v===b&&(v=w());return v}function ma(){var v=f;if(39===q.charCodeAt(f)){var E=Oa;f++}else E=b,0===ua&&m(jd);E===b&&(q.substr(f,2)===Cb?(E=Cb,f+=2):(E=b,0===ua&&m(Be)));if(E!==b){E=[];var aa=f;q.substr(f,2)===X?(aa=X,f+=2):(aa=b,0===ua&&m(kd));aa!==b&&(aa="'");aa===b&&(ld.test(q.charAt(f))?
(aa=q.charAt(f),f++):(aa=b,0===ua&&m(md)));for(;aa!==b;)E.push(aa),aa=f,q.substr(f,2)===X?(aa=X,f+=2):(aa=b,0===ua&&m(kd)),aa!==b&&(aa="'"),aa===b&&(ld.test(q.charAt(f))?(aa=q.charAt(f),f++):(aa=b,0===ua&&m(md)));39===q.charCodeAt(f)?(aa=Oa,f++):(aa=b,0===ua&&m(jd));aa!==b?v={type:"string",value:E.join("")}:(f=v,v=b)}else f=v,v=b;return v}function la(){var v=f;if(Ha()!==b){sa();var E=l();if(E!==b){sa();var aa=Fa();aa!==b?(sa(),aa=l(),aa!==b?v={type:"when_clause",operand:E,value:aa}:(f=v,v=b)):(f=
v,v=b)}else f=v,v=b}else f=v,v=b;return v}function pa(){var v=f;if(Ha()!==b){sa();var E=l();if(E!==b){sa();var aa=Fa();aa!==b?(sa(),aa=l(),aa!==b?v={type:"when_clause",operand:E,value:aa}:(f=v,v=b)):(f=v,v=b)}else f=v,v=b}else f=v,v=b;return v}function wa(){var v=f;var E=f;if(q.substr(f,4).toLowerCase()===Ce){var aa=q.substr(f,4);f+=4}else aa=b,0===ua&&m(De);if(aa!==b){aa=f;ua++;var ta=ba();ua--;ta===b?aa=void 0:(f=aa,aa=b);aa!==b?E="ELSE":(f=E,E=b)}else f=E,E=b;E!==b?(sa(),E=l(),E!==b?v={type:"else_clause",
value:E}:(f=v,v=b)):(f=v,v=b);return v}function Ca(){var v=Pa();if(v===b){v=f;if(45===q.charCodeAt(f)){var E=qb;f++}else E=b,0===ua&&m(xc);E===b&&(43===q.charCodeAt(f)?(E=fb,f++):(E=b,0===ua&&m(wc)));if(E!==b){var aa=Pa();aa!==b?v=E[0]+aa:(f=v,v=b)}else f=v,v=b}return v}function Ka(){var v=f;if(46===q.charCodeAt(f)){var E=ia;f++}else E=b,0===ua&&m(Ee);E!==b?(v=Pa(),v===b&&(v=null),v="."+(null!=v?v:"")):(f=v,v=b);return v}function Ra(){var v;var E=v=f;if(Fe.test(q.charAt(f))){var aa=q.charAt(f);f++}else aa=
b,0===ua&&m(Ge);aa!==b?(He.test(q.charAt(f))?(E=q.charAt(f),f++):(E=b,0===ua&&m(Ie)),E===b&&(E=null),E="e"+(null===E?"":E)):(f=E,E=b);E!==b?(aa=Pa(),aa!==b?v=E+aa:(f=v,v=b)):(f=v,v=b);return v}function Pa(){var v=[];var E=va();if(E!==b)for(;E!==b;)v.push(E),E=va();else v=b;v!==b&&(v=v.join(""));return v}function va(){if(Je.test(q.charAt(f))){var v=q.charAt(f);f++}else v=b,0===ua&&m(Ke);return v}function a(){var v=f;if(q.substr(f,2).toLowerCase()===Aa){var E=q.substr(f,2);f+=2}else E=b,0===ua&&m(Le);
if(E!==b){E=f;ua++;var aa=ba();ua--;aa===b?E=void 0:(f=E,E=b);E!==b?v="IN":(f=v,v=b)}else f=v,v=b;return v}function h(){var v=f;if(q.substr(f,2).toLowerCase()===Ja){var E=q.substr(f,2);f+=2}else E=b,0===ua&&m(Me);if(E!==b){E=f;ua++;var aa=ba();ua--;aa===b?E=void 0:(f=E,E=b);E!==b?v="IS":(f=v,v=b)}else f=v,v=b;return v}function Y(){var v=f;if(q.substr(f,4).toLowerCase()===La){var E=q.substr(f,4);f+=4}else E=b,0===ua&&m(Ne);if(E!==b){E=f;ua++;var aa=ba();ua--;aa===b?E=void 0:(f=E,E=b);E!==b?v="LIKE":
(f=v,v=b)}else f=v,v=b;return v}function g(){var v=f;if(q.substr(f,3).toLowerCase()===Wa){var E=q.substr(f,3);f+=3}else E=b,0===ua&&m(Oe);if(E!==b){E=f;ua++;var aa=ba();ua--;aa===b?E=void 0:(f=E,E=b);E!==b?v="NOT":(f=v,v=b)}else f=v,v=b;return v}function y(){var v=f;if(q.substr(f,3).toLowerCase()===Va){var E=q.substr(f,3);f+=3}else E=b,0===ua&&m(Pe);if(E!==b){E=f;ua++;var aa=ba();ua--;aa===b?E=void 0:(f=E,E=b);E!==b?v="AND":(f=v,v=b)}else f=v,v=b;return v}function S(){var v=f;if(q.substr(f,2).toLowerCase()===
cb){var E=q.substr(f,2);f+=2}else E=b,0===ua&&m(Qe);if(E!==b){E=f;ua++;var aa=ba();ua--;aa===b?E=void 0:(f=E,E=b);E!==b?v="OR":(f=v,v=b)}else f=v,v=b;return v}function V(){var v=f;if(q.substr(f,7).toLowerCase()===mb){var E=q.substr(f,7);f+=7}else E=b,0===ua&&m(Re);if(E!==b){E=f;ua++;var aa=ba();ua--;aa===b?E=void 0:(f=E,E=b);E!==b?v="BETWEEN":(f=v,v=b)}else f=v,v=b;return v}function fa(){var v=f;if(q.substr(f,4).toLowerCase()===Se){var E=q.substr(f,4);f+=4}else E=b,0===ua&&m(Te);if(E!==b){E=f;ua++;
var aa=ba();ua--;aa===b?E=void 0:(f=E,E=b);E!==b?v="FROM":(f=v,v=b)}else f=v,v=b;return v}function ha(){var v=f;if(q.substr(f,4).toLowerCase()===Ue){var E=q.substr(f,4);f+=4}else E=b,0===ua&&m(Ve);if(E!==b){E=f;ua++;var aa=ba();ua--;aa===b?E=void 0:(f=E,E=b);E!==b?v="TRIM":(f=v,v=b)}else f=v,v=b;return v}function L(){var v=f;if(q.substr(f,8).toLowerCase()===We){var E=q.substr(f,8);f+=8}else E=b,0===ua&&m(Xe);if(E!==b){E=f;ua++;var aa=ba();ua--;aa===b?E=void 0:(f=E,E=b);E!==b?v="INTERVAL":(f=v,v=b)}else f=
v,v=b;return v}function R(){var v=f;if(q.substr(f,4).toLowerCase()===Ye){var E=q.substr(f,4);f+=4}else E=b,0===ua&&m(Ze);if(E!==b){E=f;ua++;var aa=ba();ua--;aa===b?E=void 0:(f=E,E=b);E!==b?v="YEAR":(f=v,v=b)}else f=v,v=b;return v}function ea(){var v=f;if(q.substr(f,5).toLowerCase()===$e){var E=q.substr(f,5);f+=5}else E=b,0===ua&&m(af);if(E!==b){E=f;ua++;var aa=ba();ua--;aa===b?E=void 0:(f=E,E=b);E!==b?v="MONTH":(f=v,v=b)}else f=v,v=b;return v}function qa(){var v=f;if(q.substr(f,3).toLowerCase()===
bf){var E=q.substr(f,3);f+=3}else E=b,0===ua&&m(cf);if(E!==b){E=f;ua++;var aa=ba();ua--;aa===b?E=void 0:(f=E,E=b);E!==b?v="DAY":(f=v,v=b)}else f=v,v=b;return v}function ra(){var v=f;if(q.substr(f,4).toLowerCase()===df){var E=q.substr(f,4);f+=4}else E=b,0===ua&&m(ef);if(E!==b){E=f;ua++;var aa=ba();ua--;aa===b?E=void 0:(f=E,E=b);E!==b?v="HOUR":(f=v,v=b)}else f=v,v=b;return v}function xa(){var v=f;if(q.substr(f,6).toLowerCase()===ff){var E=q.substr(f,6);f+=6}else E=b,0===ua&&m(gf);if(E!==b){E=f;ua++;
var aa=ba();ua--;aa===b?E=void 0:(f=E,E=b);E!==b?v="MINUTE":(f=v,v=b)}else f=v,v=b;return v}function za(){var v=f;if(q.substr(f,6).toLowerCase()===hf){var E=q.substr(f,6);f+=6}else E=b,0===ua&&m(jf);if(E!==b){E=f;ua++;var aa=ba();ua--;aa===b?E=void 0:(f=E,E=b);E!==b?v="SECOND":(f=v,v=b)}else f=v,v=b;return v}function Ba(){var v=f;if(q.substr(f,4).toLowerCase()===kf){var E=q.substr(f,4);f+=4}else E=b,0===ua&&m(lf);if(E!==b){E=f;ua++;var aa=ba();ua--;aa===b?E=void 0:(f=E,E=b);E!==b?v="CASE":(f=v,v=
b)}else f=v,v=b;return v}function Ia(){var v=f;if(q.substr(f,3).toLowerCase()===mf){var E=q.substr(f,3);f+=3}else E=b,0===ua&&m(nf);if(E!==b){E=f;ua++;var aa=ba();ua--;aa===b?E=void 0:(f=E,E=b);E!==b?v="END":(f=v,v=b)}else f=v,v=b;return v}function Ha(){var v=f;if(q.substr(f,4).toLowerCase()===of){var E=q.substr(f,4);f+=4}else E=b,0===ua&&m(pf);if(E!==b){E=f;ua++;var aa=ba();ua--;aa===b?E=void 0:(f=E,E=b);E!==b?v="WHEN":(f=v,v=b)}else f=v,v=b;return v}function Fa(){var v=f;if(q.substr(f,4).toLowerCase()===
qf){var E=q.substr(f,4);f+=4}else E=b,0===ua&&m(rf);if(E!==b){E=f;ua++;var aa=ba();ua--;aa===b?E=void 0:(f=E,E=b);E!==b?v="THEN":(f=v,v=b)}else f=v,v=b;return v}function Ea(){if(44===q.charCodeAt(f)){var v=sf;f++}else v=b,0===ua&&m(tf);return v}function Ga(){if(40===q.charCodeAt(f)){var v=uf;f++}else v=b,0===ua&&m(vf);return v}function Qa(){if(41===q.charCodeAt(f)){var v=wf;f++}else v=b,0===ua&&m(xf);return v}function sa(){var v;var E=[];for(v=bb();v!==b;)E.push(v),v=bb();return E}function bb(){if(yf.test(q.charAt(f))){var v=
q.charAt(f);f++}else v=b,0===ua&&m(zf);return v}function ab(v,E,aa,ta){v={type:"binary_expr",operator:v,left:E,right:aa};void 0!==ta&&(v.escape=ta);return v}function Sa(v,E){for(var aa=0;aa<E.length;aa++)v=ab(E[aa][1],v,E[aa][3]);return v}r=void 0!==r?r:{};var b={},$a=r.grammarSource,Ta={start:I},pb=I,ka="!",Qb="\x3d",zb="\x3e\x3d",lb="\x3e",Bb="\x3c\x3d",Rb="\x3c\x3e",Pb="\x3c",bc="!\x3d",fb="+",qb="-",Ua="*",kb="/",rb="@",Oa="'",Cb="N'",X="''",ia=".",ca="null",na="true",ya="false",Aa="in",Ja="is",
La="like",Xa="escape",Wa="not",Va="and",cb="or",mb="between",Se="from",Vd="for",Qd="substring",Kd="extract",Ue="trim",ae="position",Hd="timestamp",Ed="date",te="leading",ve="trailing",xe="both",ze="to",We="interval",Ye="year",$e="month",bf="day",df="hour",ff="minute",hf="second",kf="case",mf="end",of="when",qf="then",Ce="else",sf=",",uf="(",wf=")",ad="`",me=/^[A-Za-z_\x80-\uFFFF]/,oe=/^[A-Za-z0-9_]/,qe=/^[A-Za-z0-9_.\x80-\uFFFF]/,ld=/^[^']/,Je=/^[0-9]/,Fe=/^[eE]/,He=/^[+\-]/,yf=/^[ \t\n\r]/,cd=/^[^`]/,
nd=t("!",!1),Lc=t("\x3d",!1),pd=t("\x3e\x3d",!1),qd=t("\x3e",!1),rd=t("\x3c\x3d",!1),sd=t("\x3c\x3e",!1),td=t("\x3c",!1),ud=t("!\x3d",!1),wc=t("+",!1),xc=t("-",!1),vd=t("*",!1),wd=t("/",!1),ne=A([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),pe=A([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),re=A([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),se=t("@",!1),jd=t("'",!1),Be=t("N'",!1),kd=t("''",!1),md=A(["'"],!0,!1),Ee=t(".",!1),Ke=A([["0","9"]],!1,!1),Ge=A(["e","E"],!1,!1),Ie=
A(["+","-"],!1,!1),Cd=t("NULL",!0),yd=t("TRUE",!0),Ad=t("FALSE",!0),Le=t("IN",!0),Me=t("IS",!0),Ne=t("LIKE",!0),od=t("ESCAPE",!0),Oe=t("NOT",!0),Pe=t("AND",!0),Qe=t("OR",!0),Re=t("BETWEEN",!0),Te=t("FROM",!0),Wd=t("FOR",!0),Rd=t("SUBSTRING",!0),Ld=t("EXTRACT",!0),Ve=t("TRIM",!0),be=t("POSITION",!0),Id=t("TIMESTAMP",!0),Fd=t("DATE",!0),ue=t("LEADING",!0),we=t("TRAILING",!0),ye=t("BOTH",!0),Ae=t("TO",!0),Xe=t("INTERVAL",!0),Ze=t("YEAR",!0),af=t("MONTH",!0),cf=t("DAY",!0),ef=t("HOUR",!0),gf=t("MINUTE",
!0),jf=t("SECOND",!0),lf=t("CASE",!0),nf=t("END",!0),pf=t("WHEN",!0),rf=t("THEN",!0),De=t("ELSE",!0),tf=t(",",!1),vf=t("(",!1),xf=t(")",!1),zf=A([" ","\t","\n","\r"],!1,!1),bd=t("`",!1),dd=A(["`"],!0,!1),hd=function(v){return{type:"interval-period",period:v.value,precision:null,secondary:null}},id=function(v,E){return{type:"interval-period",period:"second",precision:v,secondary:E}},f=0,cc=[{line:1,column:1}],sb=0,vc=[],ua=0;if("startRule"in r){if(!(r.startRule in Ta))throw Error("Can't start parsing from rule \""+
r.startRule+'".');pb=Ta[r.startRule]}var Kc=pb();if(Kc!==b&&f===q.length)return Kc;Kc!==b&&f<q.length&&m({type:"end"});throw function(v,E,aa){return new D(D.buildMessage(v,E),v,E,aa)}(vc,sb<q.length?q.charAt(sb):null,sb<q.length?O(sb,sb+1):O(sb,sb));}}})})(W);let U=function(){function p(){}p.parse=function(D){return W.exports.parse(D)};return p}();k.WhereGrammar=U;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(k){k.commonjsGlobal=
"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};k.commonjsRequire=function(e){throw Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');};k.getDefaultExportFromCjs=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:
e}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(k){k.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,
supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(k,
"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./timeSupport ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(k,e,W,U,p,D,x,q,r,t,A,P,O,m,I,d,l){function K(B,C,z,M,N,da){N-=z;da-=M;B=Math.min(1,Math.max(0,((B-z)*N+(C-M)*da)/(N*N+da*da)));return{x:z+N*B,y:M+da*B}}function G(B,C){return B?C?4:3:C?3:2}let u=function(){function B(z,M,N){this.items=z;this.queryGeometry=M;this.definitionExpression=N.definitionExpression;this.geometryType=N.geometryType;this.hasM=N.hasM;this.hasZ=N.hasZ;this.objectIdField=N.objectIdField;this.spatialReference=N.spatialReference;this.fieldsIndex=N.fieldsIndex;this.timeInfo=
N.timeInfo;this.featureAdapter=N.featureAdapter;this.aggregateAdapter=N.aggregateAdapter}var C=B.prototype;C.createQueryResponseForCount=function(z){const M=new t(z,this.featureAdapter,this.fieldsIndex);if(!z.outStatistics)return M.countDistinctValues(this.items);const {groupByFieldsForStatistics:N,having:da}=z;if(null==N||!N.length)return 1;const F=new Map,H=new Map,T=new Set;z=z.outStatistics;for(const J of z){({statisticType:z}=J);z="exceedslimit"!==z?J.onStatisticField:void 0;if(!H.has(z)){var ba=
[];for(const w of N){const c=this._getAttributeValues(M,w,F);ba.push(c)}H.set(z,this._calculateUniqueValues(ba,M.returnDistinctValues))}z=H.get(z);for(const w in z){const {data:c,items:n}=z[w];ba=c.join(",");da&&!M.validateItems(n,da)||T.add(ba)}}return T.size};C.createQueryResponse=function(){var z=W._asyncToGenerator(function*(M){let N;N=M.outStatistics?M.outStatistics.some(da=>"exceedslimit"===da.statisticType)?this._createExceedsLimitQueryResponse(M):yield this._createStatisticsQueryResponse(M):
this._createFeatureQueryResponse(M);M.returnQueryGeometry&&(q.isValid(M.outSR)&&!q.equals(this.queryGeometry.spatialReference,M.outSR)?N.queryGeometry=m.cleanFromGeometryEngine({spatialReference:M.outSR,...P.project(this.queryGeometry,this.queryGeometry.spatialReference,M.outSR)}):N.queryGeometry=m.cleanFromGeometryEngine({spatialReference:M.outSR,...this.queryGeometry}));return N});return function(M){return z.apply(this,arguments)}}();C.createSnappingResponse=function(z,M){const N=this.featureAdapter,
da=G(this.hasZ,this.hasM),{x:F,y:H}=z.point,T="number"===typeof z.distance?z.distance:z.distance.x,ba="number"===typeof z.distance?z.distance:z.distance.y,J={candidates:[]},w="esriGeometryPolygon"===this.geometryType;M=this._getPointCreator(z.point,this.spatialReference,M);for(const la of this.items){var c=N.getGeometry(la);if(U.isNone(c))continue;const {coords:pa,lengths:wa}=c;if(z.types&e.SnappingTypes.EDGE){c=0;for(var n=0;n<wa.length;n++){var Q=wa[n];for(var Z=0;Z<Q;Z++,c+=da){var ja=pa[c],oa=
pa[c+1];if(Z!==Q-1){const Ca=pa[c+da],Ka=pa[c+da+1],{x:Ra,y:Pa}=K(F,H,ja,oa,Ca,Ka);var ma=(F-Ra)/T;const va=(H-Pa)/ba;ma=ma*ma+va*va;1>=ma&&J.candidates.push({type:"edge",objectId:N.getObjectId(la),distance:Math.sqrt(ma),target:M(Ra,Pa),start:M(ja,oa),end:M(Ca,Ka)})}}}}if(z.types&e.SnappingTypes.VERTEX)for(c=w?pa.length-da:pa.length,n=0;n<c;n+=da)Q=pa[n],Z=pa[n+1],ja=(F-Q)/T,oa=(H-Z)/ba,ja=ja*ja+oa*oa,1>=ja&&J.candidates.push({type:"vertex",objectId:N.getObjectId(la),distance:Math.sqrt(ja),target:M(Q,
Z)})}J.candidates.sort((la,pa)=>la.distance-pa.distance);return J};C._getPointCreator=function(z,M,N){const da=U.isSome(N)&&!q.equals(M,N)?F=>P.project(F,M,N):F=>F;return null!=z.z&&null!=z.m?(F,H)=>da({x:F,y:H,z:z.z,m:z.m}):null!=z.z?(F,H)=>da({x:F,y:H,z:z.z}):null!=z.m?(F,H)=>da({x:F,y:H,m:z.m}):(F,H)=>da({x:F,y:H})};C.executeAttributesQuery=function(z){var M=A.getWhereClause(z.where,this.fieldsIndex);if(!M)return Promise.resolve(this);if(M.isStandardized){let N=0;const da=[];for(const F of this.items)M.testFeature(F,
this.featureAdapter)&&(da[N++]=F);M=new B(da,this.queryGeometry,this);M.definitionExpression=z.where;return Promise.resolve(M)}return Promise.reject(new TypeError("Where clause is not standardized"))};C.executeAggregateIdsQuery=function(z){if(!z.aggregateIds||!z.aggregateIds.length||U.isNone(this.aggregateAdapter))return Promise.resolve(this);const M=new Set;for(const da of z.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(da).forEach(F=>M.add(F));const N=this.featureAdapter.getObjectId;return Promise.resolve(new B(this.items.filter(da=>
M.has(N(da))),this.queryGeometry,this))};C.executeObjectIdsQuery=function(z){if(!z.objectIds||!z.objectIds.length)return Promise.resolve(this);const M=new Set(z.objectIds),N=this.featureAdapter.getObjectId;return Promise.resolve(new B(this.items.filter(da=>M.has(N(da))),this.queryGeometry,this))};C.executeTimeQuery=function(z){z=O.getTimeOperator(this.timeInfo,z.timeExtent,this.featureAdapter);if(!U.isSome(z))return Promise.resolve(this);z=this.items.filter(z);return Promise.resolve(new B(z,this.queryGeometry,
this))};C.filterLatest=function(){const {trackIdField:z,startTimeField:M,endTimeField:N}=this.timeInfo;var da=N||M;const F=new Map,H=this.featureAdapter.getAttribute;for(const T of this.items){const ba=H(T,z),J=H(T,da),w=F.get(ba);(!w||J>H(w,da))&&F.set(ba,T)}da=Array.from(F.values());return Promise.resolve(new B(da,this.queryGeometry,this))};C.project=function(){var z=W._asyncToGenerator(function*(M){if(!M||q.equals(this.spatialReference,M))return this;const N=this.featureAdapter,da=(yield P.projectMany(this.items.map(F=>
m.getGeometry(this.geometryType,this.hasZ,this.hasM,N.getGeometry(F))),this.spatialReference,M)).map((F,H)=>N.cloneWithGeometry(this.items[H],r.convertFromGeometry(F,this.hasZ,this.hasM)));return new B(da,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:M,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})});return function(M){return z.apply(this,
arguments)}}();C.createSummaryStatisticsResponse=function(){var z=W._asyncToGenerator(function*(M,N){const {field:da,valueExpression:F,normalizationField:H,normalizationType:T,normalizationTotal:ba,minValue:J,maxValue:w,scale:c}=N;N=this.fieldsIndex.isDateField(da);M=yield this._getDataValues(M,{field:da,valueExpression:F,normalizationField:H,normalizationType:T,normalizationTotal:ba,scale:c});const n=d.isNullCountSupported({normalizationType:T,normalizationField:H,minValue:J,maxValue:w}),Q=this.fieldsIndex.get(da),
Z={value:.5,fieldType:null==Q?void 0:Q.type};M=I.isStringField(Q)?d.calculateStringStatistics({values:M,supportsNullCount:n,percentileParams:Z}):d.calculateStatistics({values:M,minValue:J,maxValue:w,useSampleStdDev:!T,supportsNullCount:n,percentileParams:Z});return d.processSummaryStatisticsResult(M,N)});return function(M,N){return z.apply(this,arguments)}}();C.createUniqueValuesResponse=function(){var z=W._asyncToGenerator(function*(M,N){const {field:da,valueExpression:F,domain:H,returnAllCodedValues:T,
scale:ba}=N;M=yield this._getDataValues(M,{field:da,valueExpression:F,scale:ba});M=d.calculateUniqueValuesCount(M);return d.createUVResult(M,H,T)});return function(M,N){return z.apply(this,arguments)}}();C.createClassBreaksResponse=function(){var z=W._asyncToGenerator(function*(M,N){const {field:da,valueExpression:F,normalizationField:H,normalizationType:T,normalizationTotal:ba,classificationMethod:J,standardDeviationInterval:w,minValue:c,maxValue:n,numClasses:Q,scale:Z}=N;M=yield this._getDataValues(M,
{field:da,valueExpression:F,normalizationField:H,normalizationType:T,normalizationTotal:ba,scale:Z});M=d.calculateClassBreaks(M,{field:da,normalizationField:H,normalizationType:T,normalizationTotal:ba,classificationMethod:J,standardDeviationInterval:w,minValue:c,maxValue:n,numClasses:Q});return d.resolveCBResult(M,J)});return function(M,N){return z.apply(this,arguments)}}();C.createHistogramResponse=function(){var z=W._asyncToGenerator(function*(M,N){const {field:da,valueExpression:F,normalizationField:H,
normalizationType:T,normalizationTotal:ba,classificationMethod:J,standardDeviationInterval:w,minValue:c,maxValue:n,numBins:Q,scale:Z}=N;M=yield this._getDataValues(M,{field:da,valueExpression:F,normalizationField:H,normalizationType:T,normalizationTotal:ba,scale:Z});return d.calculateHistogram(M,{field:da,normalizationField:H,normalizationType:T,normalizationTotal:ba,classificationMethod:J,standardDeviationInterval:w,minValue:c,maxValue:n,numBins:Q})});return function(M,N){return z.apply(this,arguments)}}();
C._sortFeatures=function(z,M,N){if(1<z.length&&M&&M.length)for(const da of M.reverse()){M=da.split(" ");const F=M[0],H=this.fieldsIndex.get(F);M=M[1]&&"desc"===M[1].toLowerCase();const T=d.getAttributeComparator(null==H?void 0:H.type,M);z.sort((ba,J)=>{ba=N(ba,F,H);J=N(J,F,H);return T(ba,J)})}};C._createFeatureQueryResponse=function(z){const M=this.items,{geometryType:N,hasM:da,hasZ:F,objectIdField:H,spatialReference:T}=this,{outFields:ba,outSR:J,quantizationParameters:w,resultRecordCount:c,resultOffset:n,
returnZ:Q,returnM:Z}=z,ja=null!=c?M.length>(n||0)+c:!1,oa=ba&&(ba.includes("*")?[...this.fieldsIndex.fields]:ba.map(ma=>this.fieldsIndex.get(ma)));return{exceededTransferLimit:ja,features:this._createFeatures(z,M),fields:oa,geometryType:N,hasM:da&&Z,hasZ:F&&Q,objectIdFieldName:H,spatialReference:m.cleanFromGeometryEngine(J?J:T),transform:w&&x.toQuantizationTransform(w)||null}};C._createFeatures=function(z,M){const N=new t(z,this.featureAdapter,this.fieldsIndex),{hasM:da,hasZ:F}=this,{orderByFields:H,
quantizationParameters:T,returnGeometry:ba,returnCentroid:J,maxAllowableOffset:w,resultOffset:c,resultRecordCount:n,returnZ:Q=!1,returnM:Z=!1}=z,ja=F&&Q,oa=da&&Z;z=[];var ma=0;M=[...M];this._sortFeatures(M,H,(wa,Ca,Ka)=>N.getFieldValue(wa,Ca,Ka));if(ba||J){var la=x.toQuantizationTransform(T);if(ba&&!J)for(var pa of M)z[ma++]={attributes:N.getAttributes(pa),geometry:m.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(pa),w,la,ja,oa)};else if(!ba&&J)for(const wa of M)z[ma++]=
{attributes:N.getAttributes(wa),centroid:m.transformCentroid(this,this.featureAdapter.getCentroid(wa,this),la)};else for(const wa of M)z[ma++]={attributes:N.getAttributes(wa),centroid:m.transformCentroid(this,this.featureAdapter.getCentroid(wa,this),la),geometry:m.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(wa),w,la,ja,oa)}}else for(la of M)(pa=N.getAttributes(la))&&(z[ma++]={attributes:pa});ma=c||0;null!=n&&(z=z.slice(ma,Math.min(z.length,ma+n)));return z};C._createExceedsLimitQueryResponse=
function(z){var M=!1;let N=Number.POSITIVE_INFINITY,da=Number.POSITIVE_INFINITY;M=Number.POSITIVE_INFINITY;for(const F of z.outStatistics)if("exceedslimit"===F.statisticType){N=null!=F.maxPointCount?F.maxPointCount:Number.POSITIVE_INFINITY;da=null!=F.maxRecordCount?F.maxRecordCount:Number.POSITIVE_INFINITY;M=null!=F.maxVertexCount?F.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)M=this.items.length>N;else if(this.items.length>da)M=!0;else{z=this.hasZ?this.hasM?
4:3:this.hasM?3:2;const F=this.featureAdapter;M=this.items.reduce((H,T)=>{T=F.getGeometry(T);return H+(U.isSome(T)&&T.coords.length||0)},0)/z>M}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(M)}}]}};C._createStatisticsQueryResponse=function(){var z=W._asyncToGenerator(function*(M){var N={attributes:{}};const da=[],F=new Map,H=new Map,T=new Map,ba=new Map,J=new t(M,
this.featureAdapter,this.fieldsIndex);var w=M.outStatistics;const {groupByFieldsForStatistics:c,having:n,orderByFields:Q}=M;M=c&&c.length;const Z=!!M,ja=Z&&c[0],oa=Z&&!this.fieldsIndex.get(ja);for(const Ca of w){const {outStatisticFieldName:Ka,statisticType:Ra}=Ca;w=Ca;var ma="exceedslimit"!==Ra?Ca.onStatisticField:void 0;const Pa="percentile_disc"===Ra||"percentile_cont"===Ra,va="EnvelopeAggregate"===Ra||"CentroidAggregate"===Ra||"ConvexHullAggregate"===Ra,a=Z&&1===M&&(ma===ja||oa)&&"count"===Ra;
if(Z){if(!T.has(ma)){var la=[];for(const h of c){var pa=this._getAttributeValues(J,h,F);la.push(pa)}T.set(ma,this._calculateUniqueValues(la,J.returnDistinctValues))}la=T.get(ma);for(const h in la){const {count:Y,data:g,items:y,itemPositions:S}=la[h];pa=g.join(",");if(!n||J.validateItems(y,n)){const V=ba.get(pa)||{attributes:{}};if(va){V.aggregateGeometries||(V.aggregateGeometries={});const {aggregateGeometries:fa,outStatisticFieldName:ha}=yield this._getAggregateGeometry(w,y);V.aggregateGeometries[ha]=
fa}else{var wa=null;if(a)wa=Y;else{const fa=this._getAttributeValues(J,ma,F);wa=S.map(ha=>fa[ha]);wa=Pa&&"statisticParameters"in w?this._getPercentileValue(w,wa):this._getStatisticValue(w,wa,null,J.returnDistinctValues)}V.attributes[Ka]=wa}c.forEach((fa,ha)=>V.attributes[this.fieldsIndex.get(fa)?fa:`EXPR_${ha+1}`]=g[ha]);ba.set(pa,V)}}}else if(va){N.aggregateGeometries||(N.aggregateGeometries={});const {aggregateGeometries:h,outStatisticFieldName:Y}=yield this._getAggregateGeometry(w,this.items);
N.aggregateGeometries[Y]=h}else ma=this._getAttributeValues(J,ma,F),N.attributes[Ka]=Pa&&"statisticParameters"in w?this._getPercentileValue(w,ma):this._getStatisticValue(w,ma,H,J.returnDistinctValues);da.push({name:Ka,alias:Ka,type:"esriFieldTypeDouble"})}N=Z?Array.from(ba.values()):[N];this._sortFeatures(N,Q,(Ca,Ka)=>Ca.attributes[Ka]);return{fields:da,features:N}});return function(M){return z.apply(this,arguments)}}();C._getAggregateGeometry=function(){var z=W._asyncToGenerator(function*(M,N){var da=
yield new Promise((Q,Z)=>k(["../../../geometry/geometryEngineJSON"],Q,Z));const {statisticType:F,outStatisticFieldName:H}=M,{featureAdapter:T,spatialReference:ba,geometryType:J,hasZ:w,hasM:c}=this;N=N.map(Q=>m.getGeometry(J,w,c,T.getGeometry(Q)));const n=da.convexHull(ba,N,!0)[0];M={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===F?(da=n?D.getPolygonExtent(n):D.getGeometryExtent(da.union(ba,N)),M.aggregateGeometries={...da,spatialReference:ba},M.outStatisticFieldName=H||
"extent"):"CentroidAggregate"===F?(da=n?p.polygonCentroid(n):p.extentCentroid(D.getGeometryExtent(da.union(ba,N))),M.aggregateGeometries={x:da[0],y:da[1],spatialReference:ba},M.outStatisticFieldName=H||"centroid"):"ConvexHullAggregate"===F&&(M.aggregateGeometries=n,M.outStatisticFieldName=H||"convexHull");return M});return function(M,N){return z.apply(this,arguments)}}();C._getStatisticValue=function(z,M,N,da){const {onStatisticField:F,statisticType:H}=z;z=null;z=null!=N&&N.has(F)?N.get(F):I.isStringField(this.fieldsIndex.get(F))?
d.calculateStringStatistics({values:M,returnDistinct:da}):d.calculateStatistics({values:M,minValue:null,maxValue:null,useSampleStdDev:!0});N&&N.set(F,z);return z["var"===H?"variance":H]};C._getPercentileValue=function(z,M){const {onStatisticField:N,statisticParameters:da,statisticType:F}=z,{value:H,orderBy:T}=da;z=this.fieldsIndex.get(N);return d.calculatePercentile(M,{value:H,orderBy:T,fieldType:null==z?void 0:z.type,isDiscrete:"percentile_disc"===F})};C._getAttributeValues=function(z,M,N){if(N.has(M))return N.get(M);
const da=this.fieldsIndex.get(M),F=this.items.map(H=>z.getFieldValue(H,M,da));N.set(M,F);return F};C._getAttributeNormalizedValues=function(z,M){return this.items.map(N=>z.getNormalizedValue(N,{field:M.field,fieldInfo:this.fieldsIndex.get(M.field),normalizationField:M.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(M.normalizationField),normalizationType:M.normalizationType,normalizationTotal:M.normalizationTotal}))};C._getAttributeExpressionValues=function(){var z=W._asyncToGenerator(function*(M,
N,da){const {arcadeUtils:F}=yield l.loadArcade(),H=F.createFunction(N),T=da&&F.getViewInfo(da);return this.items.map(ba=>M.getExpressionValue(ba,{compiledFunc:H,viewInfo:T},F))});return function(M,N,da){return z.apply(this,arguments)}}();C._calculateUniqueValues=function(z,M){const N={},da=this.items,F=da.length;for(let H=0;H<F;H++){const T=da[H],ba=[];for(const w of z)ba.push(w[H]);const J=ba.join(",");M?null==N[J]&&(N[J]={count:1,data:ba,items:[T],itemPositions:[H]}):null==N[J]?N[J]={count:1,data:ba,
items:[T],itemPositions:[H]}:(N[J].count++,N[J].items.push(T),N[J].itemPositions.push(H))}return N};C._getDataValues=function(){var z=W._asyncToGenerator(function*(M,N){const da=new t(M,this.featureAdapter,this.fieldsIndex),{valueExpression:F,field:H,normalizationField:T,normalizationType:ba,normalizationTotal:J,scale:w}=N;M=F?{viewingMode:"map",scale:w,spatialReference:M.outSR||this.spatialReference}:null;return F?this._getAttributeExpressionValues(da,F,M):this._getAttributeNormalizedValues(da,{field:H,
normalizationField:T,normalizationType:ba,normalizationTotal:J})});return function(M,N){return z.apply(this,arguments)}}();W._createClass(B,[{key:"size",get:function(){return this.items.length}}]);return B}();e.SnappingTypes=void 0;(function(B){B[B.NONE=0]="NONE";B[B.EDGE=1]="EDGE";B[B.VERTEX=2]="VERTEX"})(e.SnappingTypes||(e.SnappingTypes={}));e.default=u;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe",
"./jsonUtils"],function(k,e,W){function U({scale:F,translate:H},T){return Math.round((T-H[0])/F[0])}function p({scale:F,translate:H},T){return Math.round((H[1]-T)/F[1])}function D(F,H,T){const ba=[];let J,w,c,n;for(let Q=0;Q<T.length;Q++){const Z=T[Q];if(0<Q){if(c=U(F,Z[0]),n=p(F,Z[1]),c!==J||n!==w)ba.push(H(Z,c-J,n-w)),J=c,w=n}else J=U(F,Z[0]),w=p(F,Z[1]),ba.push(H(Z,J,w))}return 0<ba.length?ba:null}function x(F,H,T,ba){return D(F,T?ba?da:N:ba?N:M,H)}function q(F,H,T,ba){const J=[];T=T?ba?da:N:ba?
N:M;for(ba=0;ba<H.length;ba++){const w=D(F,T,H[ba]);w&&3<=w.length&&J.push(w)}return J.length?J:null}function r(F,H,T,ba){const J=[];T=T?ba?da:N:ba?N:M;for(ba=0;ba<H.length;ba++){const w=D(F,T,H[ba]);w&&2<=w.length&&J.push(w)}return J.length?J:null}function t({scale:F,translate:H},T){return T*F[0]+H[0]}function A({scale:F,translate:H},T){return H[1]-T*F[1]}function P(F,H,T){const ba=Array(T.length);if(!T.length)return ba;const [J,w]=F.scale;let c=t(F,T[0][0]);F=A(F,T[0][1]);ba[0]=H(T[0],c,F);for(let n=
1;n<T.length;n++){const Q=T[n];c+=Q[0]*J;F-=Q[1]*w;ba[n]=H(Q,c,F)}return ba}function O(F,H,T){const ba=Array(T.length);for(let J=0;J<T.length;J++)ba[J]=P(F,H,T[J]);return ba}function m(F,H,T,ba){return P(F,T?ba?da:N:ba?N:M,H)}function I(F,H,T,ba){return O(F,T?ba?da:N:ba?N:M,H)}function d(F,H,T,ba){return O(F,T?ba?da:N:ba?N:M,H)}function l(F,H,T){let [ba,J]=T[0],w=Math.min(ba,H[0]),c=Math.min(J,H[1]),n=Math.max(ba,H[2]);H=Math.max(J,H[3]);for(let Q=1;Q<T.length;Q++){const [Z,ja]=T[Q];ba+=Z;J+=ja;0>
Z&&(w=Math.min(w,ba));0<Z&&(n=Math.max(n,ba));0>ja?c=Math.min(c,J):0<ja&&(H=Math.max(H,J))}F[0]=w;F[1]=c;F[2]=n;F[3]=H;return F}function K(F,H){if(!H.length)return null;F[0]=F[1]=Number.POSITIVE_INFINITY;F[2]=F[3]=Number.NEGATIVE_INFINITY;for(let T=0;T<H.length;T++)l(F,F,H[T]);return F}function G(F,H,T,ba,J){H.xmin=U(F,T.xmin);H.ymin=p(F,T.ymin);H.xmax=U(F,T.xmax);H.ymax=p(F,T.ymax);H!==T&&(ba&&(H.zmin=T.zmin,H.zmax=T.zmax),J&&(H.mmin=T.mmin,H.mmax=T.mmax));return H}function u(F,H,T,ba,J){H.points=
x(F,T.points,ba,J);return H}function B(F,H,T,ba,J){H.x=U(F,T.x);H.y=p(F,T.y);H!==T&&(ba&&(H.z=T.z),J&&(H.m=T.m));return H}function C(F,H,T,ba,J){F=q(F,T.rings,ba,J);if(!F)return null;H.rings=F;return H}function z(F,H,T,ba,J){F=r(F,T.paths,ba,J);if(!F)return null;H.paths=F;return H}const M=(F,H,T)=>[H,T],N=(F,H,T)=>[H,T,F[2]],da=(F,H,T)=>[H,T,F[2],F[3]];k.equals=function(F,H){if(F===H||null==F&&null==H)return!0;if(null==F||null==H)return!1;let T,ba,J,w;F&&"upperLeft"===F.originPosition?(T=F.translate[0],
ba=F.translate[1],F=F.scale[0]):(T=e.isSome(F.extent)?F.extent.xmin:0,ba=e.isSome(F.extent)?F.extent.ymax:0,F=F.tolerance);H&&"upperLeft"===H.originPosition?(J=H.translate[0],w=H.translate[1],H=H.scale[0]):(J=e.isSome(H.extent)?H.extent.xmin:0,w=e.isSome(H.extent)?H.extent.ymax:0,H=H.tolerance);return T===J&&ba===w&&F===H};k.getQuantizedBoundsCoordsArray=l;k.getQuantizedBoundsCoordsArrayArray=K;k.getQuantizedBoundsPaths=function(F){return K([0,0,0,0],F)};k.getQuantizedBoundsPoints=function(F){const H=
[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return l(H,H,F)};k.getQuantizedBoundsRings=function(F){return K([0,0,0,0],F)};k.quantizeBounds=function(F,H,T){H[0]=U(F,T[0]);H[3]=p(F,T[1]);H[2]=U(F,T[2]);H[1]=p(F,T[3]);return H};k.quantizeExtent=G;k.quantizeGeometry=function(F,H){return F&&H?W.isPoint(H)?B(F,{},H,!1,!1):W.isPolyline(H)?z(F,{},H,!1,!1):W.isPolygon(H)?C(F,{},H,!1,!1):W.isMultipoint(H)?u(F,{},H,!1,!1):W.isExtent(H)?G(F,{},H,!1,!1):
null:null};k.quantizeMultipoint=u;k.quantizePaths=r;k.quantizePoint=B;k.quantizePoints=x;k.quantizePolygon=C;k.quantizePolyline=z;k.quantizeRings=q;k.quantizeX=U;k.quantizeY=p;k.toQuantizationTransform=function(F){return F?{originPosition:"upper-left"===F.originPosition?"upperLeft":"lower-left"===F.originPosition?"lowerLeft":F.originPosition,scale:F.tolerance?[F.tolerance,F.tolerance]:[1,1],translate:e.isSome(F.extent)?[F.extent.xmin,F.extent.ymax]:[0,0]}:null};k.unquantizeBounds=function(F,H,T){return T?
(H[0]=t(F,T[0]),H[1]=A(F,T[3]),H[2]=t(F,T[2]),H[3]=A(F,T[1]),H):[t(F,H[0]),A(F,H[3]),t(F,H[2]),A(F,H[1])]};k.unquantizeCoordsArray=P;k.unquantizeCoordsArrayArray=O;k.unquantizeExtent=function(F,H,T,ba,J){H.xmin=t(F,T.xmin);H.ymin=A(F,T.ymin);H.xmax=t(F,T.xmax);H.ymax=A(F,T.ymax);H!==T&&(ba&&(H.zmin=T.zmin,H.zmax=T.zmax),J&&(H.mmin=T.mmin,H.mmax=T.mmax));return H};k.unquantizeMultipoint=function(F,H,T,ba,J){e.isSome(T)&&(H.points=m(F,T.points,ba,J));return H};k.unquantizePaths=I;k.unquantizePoint=
function(F,H,T,ba,J){if(e.isNone(T))return H;H.x=t(F,T.x);H.y=A(F,T.y);H!==T&&(ba&&(H.z=T.z),J&&(H.m=T.m));return H};k.unquantizePoints=m;k.unquantizePolygon=function(F,H,T,ba,J){e.isSome(T)&&(H.rings=d(F,T.rings,ba,J));return H};k.unquantizePolyline=function(F,H,T,ba,J){e.isSome(T)&&(H.paths=I(F,T.paths,ba,J));return H};k.unquantizeRings=d;k.unquantizeX=t;k.unquantizeY=A;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe",
"./attributeSupport","../../../statistics/utils"],function(k,e,W){return function(){function U(D,x,q){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=D.returnDistinctValues;this.fieldsIndex=q;this.featureAdapter=x;if((x=D.outFields)&&-1===x.indexOf("*")){this.outFields=x;D=0;for(const t of x){var r=e.getExpressionFromFieldName(t);r=(x=this.fieldsIndex.get(r))?null:e.getWhereClause(r,q);x=x?x.name:e.getAliasFromFieldName(t)||`FIELD_EXP_${D++}`;this._fieldDataCache.set(t,
{alias:x,clause:r})}}}var p=U.prototype;p.countDistinctValues=function(D){if(!this.returnDistinctValues)return D.length;D.forEach(x=>this.getAttributes(x));return this._returnDistinctMap.size};p.getAttributes=function(D){D=this._processAttributesForOutFields(D);return this._processAttributesForDistinctValues(D)};p.getFieldValue=function(D,x,q){const r=q?q.name:x;let t=null;this._fieldDataCache.has(r)?t=this._fieldDataCache.get(r).clause:q||(t=e.getWhereClause(x,this.fieldsIndex),this._fieldDataCache.set(r,
{alias:r,clause:t}));return q?this.featureAdapter.getAttribute(D,r):t.calculateValue(D,this.featureAdapter)};p.getNormalizedValue=function(D,x){const q=x.normalizationType,r=x.normalizationTotal;let t=this.getFieldValue(D,x.field,x.fieldInfo);q&&Number.isFinite(t)&&(D=this.getFieldValue(D,x.normalizationField,x.normalizationFieldInfo),t=W.getNormalizedValue(t,q,D,r));return t};p.getExpressionValue=function(D,x,q){D={attributes:this.featureAdapter.getAttributes(D)};D=q.createExecContext(D,x.viewInfo);
return q.executeFunction(x.compiledFunc,D)};p.validateItem=function(D,x){this._fieldDataCache.has(x)||this._fieldDataCache.set(x,{alias:x,clause:e.getWhereClause(x,this.fieldsIndex)});return this._fieldDataCache.get(x).clause.testFeature(D,this.featureAdapter)};p.validateItems=function(D,x){this._fieldDataCache.has(x)||this._fieldDataCache.set(x,{alias:x,clause:e.getWhereClause(x,this.fieldsIndex)});return this._fieldDataCache.get(x).clause.testSet(D,this.featureAdapter)};p._processAttributesForOutFields=
function(D){const x=this.outFields;if(!x||!x.length)return this.featureAdapter.getAttributes(D);const q={};for(const r of x){const {alias:t,clause:A}=this._fieldDataCache.get(r);q[t]=A?A.calculateValue(D,this.featureAdapter):this.featureAdapter.getAttribute(D,t)}return q};p._processAttributesForDistinctValues=function(D){if(k.isNone(D)||!this.returnDistinctValues)return D;var x=this.outFields,q=[];if(x)for(const t of x){var {alias:r}=this._fieldDataCache.get(t);q.push(D[r])}else for(r in D)q.push(D[r]);
x=`${(x||["*"]).join(",")}=${q.join(",")}`;q=this._returnDistinctMap.get(x)||0;this._returnDistinctMap.set(x,++q);return 1<q?null:D};return U}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(k,e,W){function U(u){const B=null!=u.minValue||null!=u.maxValue,C=!!u.sqlExpression&&u.supportsSQLExpression;return!(null!=u.normalizationField||null!=u.normalizationType)&&!B&&!C}function p(u){const {values:B,
useSampleStdDev:C,supportsNullCount:z}=u;var M=Number.POSITIVE_INFINITY;let N=Number.NEGATIVE_INFINITY,da=null,F=null;var H=null;let T=null,ba=0;const J=null==u.minValue?-Infinity:u.minValue,w=null==u.maxValue?Infinity:u.maxValue;for(const c of B)Number.isFinite(c)?c>=J&&c<=w&&(da+=c,M=Math.min(M,c),N=Math.max(N,c),ba++):"string"===typeof c&&ba++;if(ba&&null!=da){F=da/ba;H=0;for(const c of B)Number.isFinite(c)&&c>=J&&c<=w&&(H+=(c-F)**2);T=C?1<ba?H/(ba-1):0:0<ba?H/ba:0;H=Math.sqrt(T)}else N=M=null;
M={avg:F,count:ba,max:N,min:M,stddev:H,sum:da,variance:T};z&&(M.nullcount=B.length-ba);u.percentileParams&&(M.median=D(B,u.percentileParams));return M}function D(u,B){const {fieldType:C,value:z,orderBy:M,isDiscrete:N}=B,da=x(C,"desc"===M);u=[...u].filter(ba=>null!=ba).sort((ba,J)=>da(ba,J));if(0===u.length)return null;if(0>=z)return u[0];if(1<=z)return u[u.length-1];var F=(u.length-1)*z,H=Math.floor(F);B=H+1;F%=1;H=u[H];const T=u[B];return B>=u.length||N||"string"===typeof H||"string"===typeof T?
H:H*(1-F)+T*F}function x(u,B){const C=B?1:-1,z=r(B),M=q(B);if(!u||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...K].includes(u))return(N,da)=>"number"===typeof N&&"number"===typeof da?z(N,da):"string"===typeof N&&"string"===typeof da?M(N,da):C;if("esriFieldTypeDate"===u)return(N,da)=>{N=(new Date(N)).getTime();da=(new Date(da)).getTime();return isNaN(N)||isNaN(da)?C:z(N,da)};if(K.has(u))return(N,da)=>z(N,da);if("esriFieldTypeString"===u)return(N,da)=>M(N,
da);if("esriFieldTypeGUID"===u||"esriFieldTypeGlobalID"===u){const N=q(B);return(da,F)=>N(t(da),t(F))}return B?(N,da)=>1:(N,da)=>-1}function q(u){return u?(B,C)=>{var z,M;B=null==(z=B)?void 0:z.toUpperCase();C=null==(M=C)?void 0:M.toUpperCase();return B>C?-1:B<C?1:0}:(B,C)=>{var z,M;B=null==(z=B)?void 0:z.toUpperCase();C=null==(M=C)?void 0:M.toUpperCase();return B<C?-1:B>C?1:0}}function r(u){return u?(B,C)=>C-B:(B,C)=>B-C}function t(u){return u.substr(24,12)+u.substr(19,4)+u.substr(16,2)+u.substr(14,
2)+u.substr(11,2)+u.substr(9,2)+u.substr(6,2)+u.substr(4,2)+u.substr(2,2)+u.substr(0,2)}function A(u,B){const C=O({field:B.field,normalizationType:B.normalizationType,normalizationField:B.normalizationField,classificationMethod:B.classificationMethod,standardDeviationInterval:B.standardDeviationInterval,breakCount:B.numClasses||5});u=P(u,B.minValue,B.maxValue);return W.createGenerateRendererClassBreaks({definition:C,values:u,normalizationTotal:B.normalizationTotal})}function P(u,B,C){B=null==B?-Infinity:
B;C=null==C?Infinity:C;return u.filter(z=>Number.isFinite(z)&&z>=B&&z<=C)}function O(u){const B=u.field,C=u.classificationMethod||"equal-interval",z=u.normalizationType,M=u.normalizationField,N=new e;N.classificationField=B;N.breakCount=u.breakCount;N.classificationMethod=C;N.standardDeviationInterval="standard-deviation"===C?u.standardDeviationInterval||1:void 0;N.normalizationType=z;N.normalizationField="field"===z?M:void 0;return N}function m(u,B){const {field:C,classificationMethod:z,standardDeviationInterval:M,
normalizationType:N,normalizationField:da,normalizationTotal:F,minValue:H,maxValue:T}=B,ba=B.numBins||10;let J=B=null,w=null;z&&"equal-interval"!==z||N?({classBreaks:u}=A(u,{field:C,normalizationType:N,normalizationField:da,normalizationTotal:F,classificationMethod:z,standardDeviationInterval:M,minValue:H,maxValue:T,numClasses:ba}),B=u[0].minValue,J=u[u.length-1].maxValue,w=u.map(c=>[c.minValue,c.maxValue])):(null!=H&&null!=T?(B=H,J=T):(u=p({values:u,minValue:H,maxValue:T,useSampleStdDev:!N,supportsNullCount:U({normalizationType:N,
normalizationField:da,minValue:H,maxValue:T})}),B=u.min,J=u.max),w=d(B,J,ba));return{min:B,max:J,intervals:w}}function I(u,B){let C=-1;for(let z=u.length-1;0<=z;z--)if(B>=u[z][0]){C=z;break}return C}function d(u,B,C){const z=(B-u)/C,M=[];let N;for(let da=1;da<=C;da++)N=u+z,N=Number(N.toFixed(16)),M.push([u,da===C?B:N]),u=N;return M}const l=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,K=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),G="min max avg stddev count sum variance nullcount median".split(" ");
k.calculateClassBreaks=A;k.calculateHistogram=function(u,B){const {min:C,max:z,intervals:M}=m(u,B),N=M.map((da,F)=>({minValue:M[F][0],maxValue:M[F][1],count:0}));for(const da of u)null!=da&&da>=C&&da<=z&&(u=I(M,da),-1<u&&N[u].count++);return{bins:N,minValue:C,maxValue:z,normalizationTotal:B.normalizationTotal}};k.calculatePercentile=D;k.calculateStatistics=p;k.calculateStringStatistics=function(u){const B=u.returnDistinct?[...new Set(u.values)]:u.values,C=B.filter(M=>null!=M).length,z={count:C};u.supportsNullCount&&
(z.nullcount=B.length-C);u.percentileParams&&(z.median=D(B,u.percentileParams));return z};k.calculateUniqueValuesCount=function(u){const B={};for(let C of u){if(null==C||"string"===typeof C&&""===C.trim())C=null;null==B[C]?B[C]={count:1,data:C}:B[C].count++}return{count:B}};k.createClassBreaksDefinition=O;k.createUVResult=function(u,B,C){const z=u.count;u=[];C&&B&&"coded-value"===B.type&&B.codedValues.forEach(M=>{M=M.code;z.hasOwnProperty(M)||(z[M]={data:M,count:0})});for(const M in z)B=z[M],u.push({value:B.data,
count:B.count,label:B.label});return{uniqueValueInfos:u}};k.getAttributeComparator=x;k.getEqualIntervalBins=d;k.getNormalizedValue=function(u,B,C,z){let M=null;switch(B){case "log":0!==u&&(M=Math.log(u)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(z)&&0!==z&&(M=u/z*100);break;case "field":Number.isFinite(C)&&0!==C&&(M=u/C);break;case "natural-log":0<u&&(M=Math.log(u));break;case "square-root":0<u&&(M=u**.5)}return M};k.isNullCountSupported=U;k.processSummaryStatisticsResult=function(u,
B){let C;for(C in u)-1<G.indexOf(C)&&(Number.isFinite(u[C])||(u[C]=null));if(!B)return u;["avg","stddev","variance"].forEach(z=>{null!=u[z]&&(u[z]=Math.ceil(u[z]))});return u};k.resolveCBResult=function(u,B){let C=u.classBreaks;const z=C[0].minValue,M=C[C.length-1].maxValue,N="standard-deviation"===B;C=C.map(da=>{const F=da.label;da={minValue:da.minValue,maxValue:da.maxValue,label:F};if(N&&F){const H=F.match(l).map(T=>+T.trim());2===H.length?(da.minStdDev=H[0],da.maxStdDev=H[1],0>H[0]&&0<H[1]&&(da.hasAvg=
!0)):1===H.length&&(F.includes("\x3c")?(da.minStdDev=null,da.maxStdDev=H[0]):F.includes("\x3e")&&(da.minStdDev=H[0],da.maxStdDev=null))}return da});return{minValue:z,maxValue:M,classBreakInfos:C,normalizationTotal:u.normalizationTotal}};k.statisticTypes=G;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(k,e,W,U,p,D,x,q,r){p=new W.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});W=new W.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});r=function(t){function A(){var P=t.apply(this,arguments)||this;P.breakCount=null;P.classificationField=
null;P.classificationMethod=null;P.normalizationField=null;P.normalizationType=null;P.type="class-breaks-definition";return P}k._inheritsLoose(A,t);k._createClass(A,[{key:"standardDeviationInterval",set:function(P){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",P)}},{key:"definedInterval",set:function(P){"defined-interval"===this.classificationMethod&&this._set("definedInterval",P)}}]);return A}(r);e.__decorate([U.property({json:{write:!0}})],r.prototype,"breakCount",
void 0);e.__decorate([U.property({json:{write:!0}})],r.prototype,"classificationField",void 0);e.__decorate([U.property({type:String,json:{read:p.read,write:p.write}})],r.prototype,"classificationMethod",void 0);e.__decorate([U.property({json:{write:!0}})],r.prototype,"normalizationField",void 0);e.__decorate([U.property({json:{read:W.read,write:W.write}})],r.prototype,"normalizationType",void 0);e.__decorate([U.property({value:null,json:{write:!0}})],r.prototype,"standardDeviationInterval",null);
e.__decorate([U.property({value:null,json:{write:!0}})],r.prototype,"definedInterval",null);e.__decorate([U.property()],r.prototype,"type",void 0);return r=e.__decorate([q.subclass("esri.rest.support.ClassBreaksDefinition")],r)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(k,e,W,U,p,D,x,q,r,t,A){W=new W.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});U=function(P){function O(){var m=P.apply(this,arguments)||this;m.baseSymbol=null;m.colorRamp=null;m.type=null;return m}k._inheritsLoose(O,P);return O}(U.JSONSupport);e.__decorate([p.property({type:A,json:{write:!0}})],U.prototype,"baseSymbol",void 0);e.__decorate([p.property({types:t.types,json:{read:{reader:t.fromJSON},write:!0}})],U.prototype,"colorRamp",void 0);e.__decorate([p.property({json:{read:W.read,
write:W.write}})],U.prototype,"type",void 0);return U=e.__decorate([r.subclass("esri.rest.support.ClassificationDefinition")],U)})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(k,e,W,U){W={key:"type",base:W,typeMap:{algorithmic:e,multipart:U}};k.fromJSON=function(p){return p&&p.type?"algorithmic"===p.type?e.fromJSON(p):"multipart"===p.type?U.fromJSON(p):null:null};k.types=W;Object.defineProperty(k,"__esModule",
{value:!0})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(k,e,W,U,p,D,x,q,r){var t;r=t=function(A){function P(O){O=A.call(this,O)||this;O.algorithm=null;O.fromColor=null;O.toColor=
null;O.type="algorithmic";return O}k._inheritsLoose(P,A);P.prototype.clone=function(){return new t({fromColor:U.clone(this.fromColor),toColor:U.clone(this.toColor),algorithm:this.algorithm})};return P}(r);e.__decorate([x.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],r.prototype,"algorithm",void 0);e.__decorate([p.property({type:W,json:{type:[D.Integer],write:!0}})],r.prototype,"fromColor",void 0);e.__decorate([p.property({type:W,json:{type:[D.Integer],
write:!0}})],r.prototype,"toColor",void 0);e.__decorate([p.property({type:["algorithmic"]})],r.prototype,"type",void 0);return r=t=e.__decorate([q.subclass("esri.rest.support.AlgorithmicColorRamp")],r)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(k,e,W){k.enumeration=function(U,p={}){var D;U=U instanceof e.JSONMap?U:new e.JSONMap(U,p);U={type:(null!=(D=null==p?void 0:p.ignoreUnknown)?D:1)?U.apiValues:String,json:{type:U.jsonValues,
read:null!=p&&p.readOnly?!1:{reader:U.read},write:{writer:U.write}}};void 0!==(null==p?void 0:p.readOnly)&&(U.readOnly=!!p.readOnly);void 0!==(null==p?void 0:p.default)&&(U.json.default=p.default);void 0!==(null==p?void 0:p.name)&&(U.json.name=p.name);return W.property(U)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,e,W,U,p,D,x,q){W=function(r){function t(A){A=r.call(this,A)||this;A.type=null;return A}k._inheritsLoose(t,r);return t}(W.JSONSupport);e.__decorate([U.property({readOnly:!0,json:{read:!1,write:!0}})],W.prototype,"type",void 0);return W=e.__decorate([q.subclass("esri.rest.support.ColorRamp")],W)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(k,e,W,U,p,D,x,q){var r;p=r=function(t){function A(P){P=t.call(this,P)||this;P.colorRamps=null;P.type="multipart";return P}k._inheritsLoose(A,t);A.prototype.clone=function(){return new r({colorRamps:W.clone(this.colorRamps)})};return A}(q);e.__decorate([U.property({type:[x],json:{write:!0}})],p.prototype,"colorRamps",void 0);e.__decorate([U.property({type:["multipart"]})],p.prototype,"type",void 0);return p=r=e.__decorate([D.subclass("esri.rest.support.MultipartColorRamp")],p)})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass".split(" "),
function(k,e,W,U,p,D,x,q,r,t,A){U=new U.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let P=0;p=function(O){function m(d){d=O.call(this,d)||this;d.id=`sym${P++}`;d.type=null;d.color=new W([0,0,0,1]);
return d}k._inheritsLoose(m,O);var I=m.prototype;I.readColor=function(d){return d&&null!=d[0]?[d[0],d[1],d[2],d[3]/255]:d};I.collectRequiredFields=function(){var d=k._asyncToGenerator(function*(l,K){});return function(l,K){return d.apply(this,arguments)}}();I.hash=function(){return JSON.stringify(this.toJSON())};I.clone=function(){};return m}(p.JSONSupport);e.__decorate([D.property({type:U.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:U.write}}})],p.prototype,"type",void 0);e.__decorate([D.property({type:W,
json:{write:{allowNull:!0}}})],p.prototype,"color",void 0);e.__decorate([t.reader("color")],p.prototype,"readColor",null);return p=e.__decorate([A.subclass("esri.symbols.Symbol")],p)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(k){function e(A){const {classificationMethod:P,breakCount:O,normalizationType:m,definedInterval:I}=A.definition,d=[];var l=A.values;if(0===l.length)return[];l=l.sort((z,M)=>z-M);var K=l[0],G=l[l.length-1];if("equal-interval"===P)if(l.length>=
O){l=(G-K)/O;A=K;for(var u=1;u<O;u++){var B=Number((K+u*l).toFixed(6));d.push({minValue:A,maxValue:B,label:W(A,B,m)});A=B}d.push({minValue:A,maxValue:G,label:W(A,G,m)})}else l.forEach(z=>{d.push({minValue:z,maxValue:z,label:W(z,z,m)})});else if("natural-breaks"===P){l=U(l);A=p(l.uniqueValues,A.valueFrequency||l.valueFrequency,O);for(u=1;u<O;u++)l.uniqueValues.length>u&&(B=Number(l.uniqueValues[A[u]].toFixed(6)),d.push({minValue:K,maxValue:B,label:W(K,B,m)}),K=B);d.push({minValue:K,maxValue:G,label:W(K,
G,m)})}else if("quantile"===P)if(l.length>=O&&K!==G){A=Math.ceil(l.length/O);u=0;for(B=1;B<O;B++){var C=A+u-1;C>l.length&&(C=l.length-1);0>C&&(C=0);d.push({minValue:K,maxValue:l[C],label:W(K,l[C],m)});K=l[C];u+=A;A=Math.ceil((l.length-u)/(O-B))}d.push({minValue:K,maxValue:G,label:W(K,G,m)})}else for(G=-1,K=0;K<l.length;K++)A=l[K],A!==G&&(G=A,d.push({minValue:G,maxValue:A,label:W(G,A,m)}),G=A);else if("standard-deviation"===P)if(A=q(l),u=r(l,A),0===u)d.push({minValue:l[0],maxValue:l[0],label:W(l[0],
l[0],m)});else{l=x(K,G,O,A,u)*u;u=0;for(B=O;1<=B;B--)C=Number((A-(B-.5)*l).toFixed(6)),d.push({minValue:K,maxValue:C,label:W(K,C,m)}),K=C,u++;B=Number((A+.5*l).toFixed(6));d.push({minValue:K,maxValue:B,label:W(K,B,m)});K=B;u++;for(C=1;C<=O;C++)B=u===2*O?G:Number((A+(C+.5)*l).toFixed(6)),d.push({minValue:K,maxValue:B,label:W(K,B,m)}),K=B,u++}else if("defined-interval"===P){if(!I)return d;G=l[0];l=l[l.length-1];K=Math.ceil((l-G)/I);A=G;for(u=1;u<K;u++)B=Number((G+u*I).toFixed(6)),d.push({minValue:A,
maxValue:B,label:W(A,B,m)}),A=B;d.push({minValue:A,maxValue:l,label:W(A,l,m)})}return d}function W(A,P,O){let m=null;return m=A===P?O&&"percent-of-total"===O?A+"%":A.toString():O&&"percent-of-total"===O?A+"% - "+P+"%":A+" - "+P}function U(A){const P=[],O=[];let m=Number.MIN_VALUE,I=1,d=-1;for(let l=0;l<A.length;l++){const K=A[l];K===m?(I++,O[d]=I):null!==K&&(P.push(K),m=K,I=1,O.push(I),d++)}return{uniqueValues:P,valueFrequency:O}}function p(A,P,O){var m=A.length;const I=[];O>m&&(O=m);for(var d=0;d<
O;d++)I.push(Math.round(d*m/O-1));I.push(m-1);d=D(I,A,P,O);{m=d.mean;d=d.sdcm;var l=O,K=0,G=0;let B=0,C=0,z=!0;for(let M=0;2>M&&z;M++){0===M&&(z=!1);for(var u=0;u<l-1;u++)for(;I[u+1]+1!==I[u+2];)if(I[u+1]+=1,K=t(u,I,A,P),B=K.sbMean,K=K.sbSdcm,G=t(u+1,I,A,P),C=G.sbMean,G=G.sbSdcm,K+G<d[u]+d[u+1])d[u]=K,d[u+1]=G,m[u]=B,m[u+1]=C,z=!0;else{--I[u+1];break}for(u=l-1;0<u;u--)for(;I[u]!==I[u-1]+1;)if(--I[u],K=t(u-1,I,A,P),B=K.sbMean,K=K.sbSdcm,G=t(u,I,A,P),C=G.sbMean,G=G.sbSdcm,K+G<d[u-1]+d[u])d[u-1]=K,d[u]=
G,m[u-1]=B,m[u]=C,z=!0;else{I[u]+=1;break}}m=z}m&&(d=D(I,A,P,O));return I}function D(A,P,O,m){let I=[];var d=[],l=[];let K=0;const G=[],u=[];for(var B=0;B<m;B++){var C=t(B,A,P,O);G.push(C.sbMean);u.push(C.sbSdcm);K+=u[B]}C=K;for(B=!0;B||K<C;){B=!1;I=[];for(d=0;d<m;d++)I.push(A[d]);for(l=0;l<m;l++)for(C=A[l]+1;C<=A[l+1];C++)if(d=P[C],0<l&&C!==A[l+1]&&Math.abs(d-G[l])>Math.abs(d-G[l-1]))A[l]=C;else if(l<m-1&&A[l]!==C-1&&Math.abs(d-G[l])>Math.abs(d-G[l+1])){A[l+1]=C-1;break}C=K;K=0;d=[];l=[];for(let z=
0;z<m;z++){d.push(G[z]);l.push(u[z]);const M=t(z,A,P,O);G[z]=M.sbMean;u[z]=M.sbSdcm;K+=u[z]}}if(K>C){for(P=0;P<m;P++)A[P]=I[P],G[P]=d[P],u[P]=l[P];K=C}return{mean:G,sdcm:u}}function x(A,P,O,m,I){A=Math.max(m-A,P-m)/I/O;return 1<=A?1:.5<=A?.5:.25}function q(A){let P=0;for(let O=0;O<A.length;O++)P+=A[O];return P/=A.length}function r(A,P){let O=0;for(let m=0;m<A.length;m++){const I=A[m];O+=(I-P)*(I-P)}O/=A.length;return Math.sqrt(O)}function t(A,P,O,m){var I=0,d=0;for(var l=P[A]+1;l<=P[A+1];l++){const K=
m[l];I+=O[l]*K;d+=K}0>=d&&console.log("Exception in Natural Breaks calculation");I/=d;d=0;for(l=P[A]+1;l<=P[A+1];l++)d+=m[l]*(O[l]-I)**2;return{sbMean:I,sbSdcm:d}}k.createGenerateRendererClassBreaks=function(A){const {normalizationTotal:P}=A;return{classBreaks:e(A),normalizationTotal:P}};k.createGenerateRendererUniqueValues=function(A){A=U(A);const P=[],O=A.uniqueValues.length;for(let m=0;m<O;m++){const I=A.uniqueValues[m];P.push({value:I,count:A.valueFrequency[m],label:I.toString()})}return{uniqueValues:P}};
Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(k){function e(p,D,x,q,r){if(null!=q&&null!=r)return t=>{const A=p.getAttribute(t,D);t=p.getAttribute(t,x);return(null==A||A<=r)&&(null==t||t>=q)};if(null!=q)return t=>{t=p.getAttribute(t,x);return null==t||t>=q};if(null!=r)return t=>{t=p.getAttribute(t,D);return null==t||t<=r}}function W(p,D,x,q){if(null!=x&&null!=q&&x===q)return r=>p.getAttribute(r,D)===x;if(null!=x&&
null!=q)return r=>{r=p.getAttribute(r,D);return r>=x&&r<=q};if(null!=x)return r=>p.getAttribute(r,D)>=x;if(null!=q)return r=>p.getAttribute(r,D)<=q}function U(){return()=>!1}k.getTimeExtent=function(p,D){if(!p)return null;const x=D.featureAdapter,{startTimeField:q,endTimeField:r}=p;let t=Number.POSITIVE_INFINITY,A=Number.NEGATIVE_INFINITY;if(q&&r)D.forEach(P=>{const O=x.getAttribute(P,q);P=x.getAttribute(P,r);null==O||isNaN(O)||(t=Math.min(t,O));null==P||isNaN(P)||(A=Math.max(A,P))});else{const P=
q||r;D.forEach(O=>{O=x.getAttribute(O,P);null==O||isNaN(O)||(t=Math.min(t,O),A=Math.max(A,O))})}return{start:t,end:A}};k.getTimeOperator=function(p,D,x){if(!D||!p)return null;const {startTimeField:q,endTimeField:r}=p;if(!q&&!r)return null;const {start:t,end:A}=D;return null===t&&null===A?null:void 0===t&&void 0===A?U():q&&r?e(x,q,r,t,A):W(x,q||r,t,A)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(k,e,W,U,p,D,x,q,r,t,A,P,O,m){function I(J,w,c,n=J.hasZ,Q=J.hasM){if(p.isNone(w))return null;const Z=J.hasZ&&n,ja=J.hasM&&Q;return c?(J=P.quantizeOptimizedGeometry(H,w,J.hasZ,J.hasM,"esriGeometryPoint",c,n,Q),P.convertToPoint(J,Z,ja)):P.convertToPoint(w,Z,ja)}function d(){d=W._asyncToGenerator(function*(J,w,c){const {outFields:n,orderByFields:Q,groupByFieldsForStatistics:Z,outStatistics:ja}=J;if(n)for(var oa=0;oa<n.length;oa++)n[oa]=n[oa].trim();if(Q)for(oa=0;oa<Q.length;oa++)Q[oa]=Q[oa].trim();
if(Z)for(oa=0;oa<Z.length;oa++)Z[oa]=Z[oa].trim();if(ja)for(oa=0;oa<ja.length;oa++)ja[oa].onStatisticField&&(ja[oa].onStatisticField=ja[oa].onStatisticField.trim());J.geometry&&!J.outSR&&(J.outSR=J.geometry.spatialReference);return K(J,w,c)});return d.apply(this,arguments)}function l(){l=W._asyncToGenerator(function*(J,w,c){return K(J,w,c)});return l.apply(this,arguments)}function K(J,w,c){return G.apply(this,arguments)}function G(){G=W._asyncToGenerator(function*(J,w,c){if(!J)return null;var {where:n}=
J;J.where=n=n&&n.trim();if(!n||/^1 *= *1$/.test(n)||w&&w===n)J.where=null;if(!J.geometry)return J;w=yield u(J);J.distance=0;J.units=null;"esriSpatialRelEnvelopeIntersects"===J.spatialRel&&({spatialReference:n}=J.geometry,w=x.getGeometryExtent(w),w.spatialReference=n);J.geometry=w;yield m.checkProjectionSupport(w.spatialReference,c);w=(yield r.normalizeCentralMeridian(q.fromJSON(w)))[0];if(p.isNone(w))throw N;w=w.toJSON();w=yield m.project(w,w.spatialReference,c);if(!w)throw N;w.spatialReference=c;
J.geometry=w;return J});return G.apply(this,arguments)}function u(J){return B.apply(this,arguments)}function B(){B=W._asyncToGenerator(function*(J){const {geometry:w,distance:c,units:n}=J;if(null==c||"vertexAttributes"in w)return w;var Q=w.spatialReference;J=n?M.fromJSON(n):D.getUnitString(Q);Q=Q&&(t.isGeographic(Q)||t.isWebMercator(Q))?w:yield m.checkProjectionSupport(Q,t.WGS84).then(()=>m.project(w,t.WGS84));return(yield C())(Q.spatialReference,Q,c,J)});return B.apply(this,arguments)}function C(){return z.apply(this,
arguments)}function z(){z=W._asyncToGenerator(function*(){return(yield new Promise((J,w)=>k(["../../../geometry/geometryEngineJSON"],J,w))).geodesicBuffer});return z.apply(this,arguments)}const M=new U.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),N=Object.freeze({}),da=new O,F=new O,H=new O,T={esriGeometryPoint:P.convertToPoint,esriGeometryPolyline:P.convertToPolyline,
esriGeometryPolygon:P.convertToPolygon,esriGeometryMultipoint:P.convertToMultipoint},ba=(J,w)=>"_geVersion"!==J?w:void 0;e.QUERY_ENGINE_EMPTY_RESULT=N;e.cleanFromGeometryEngine=function(J){return J&&"_geVersion"in J?JSON.parse(JSON.stringify(J,ba)):J};e.getCentroid=function(J,w,c){if("esriGeometryPolygon"!==J.geometryType||!w||!w.centroid&&!w.geometry)return null;w.centroid||(w.centroid=A.getCentroidOptimizedGeometry(new O,w.geometry,J.hasZ,J.hasM));return I(J,w.centroid,c)};e.getGeometry=function(J,
w,c,n,Q,Z,ja=w,oa=c){const ma=w&&ja,la=c&&oa;n=p.isSome(n)?"coords"in n?n:n.geometry:null;if(p.isNone(n))return null;if(Q)return w=P.generalizeOptimizedGeometry(F,n,w,c,J,Q,ja,oa),Z&&(w=P.quantizeOptimizedGeometry(H,w,ma,la,J,Z)),T[J](w,ma,la);if(Z)return Z=P.quantizeOptimizedGeometry(H,n,w,c,J,Z,ja,oa),T[J](Z,ma,la);P.removeZMValues(da,n,w,c,ja,oa);return T[J](da,ma,la)};e.normalizeFilter=function(J,w,c){return l.apply(this,arguments)};e.normalizeQuery=function(J,w,c){return d.apply(this,arguments)};
e.normalizeQueryLike=K;e.transformCentroid=I;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(k,e,W,U,p,D,x,q){function r(L,R,ea){if(L)for(const qa of L)(L=(L=D.getDeepValue(qa,R))&&"function"!==typeof L&&ea.get(L))&&D.setDeepValue(qa,L.name,R)}function t(L,R){if(!L||!R)return[];
h.clear();A(h,L,R);return Array.from(h).sort()}function A(L,R,ea){var qa;if(ea)if(null!=R&&null!=(qa=R.fields)&&qa.length)if(ea.includes("*"))for(const {name:ra}of R.fields)L.add(ra);else for(const ra of ea)P(L,R,ra);else if(ea.includes("*"))L.clear(),L.add("*");else for(const ra of ea)L.add(ra)}function P(L,R,ea){"string"===typeof ea&&(R?(R=R.get(ea))&&L.add(R.name):L.add(ea))}function O(L,R,ea){return m.apply(this,arguments)}function m(){m=W._asyncToGenerator(function*(L,R,ea){var qa;if(ea){var {arcadeUtils:ra}=
yield q.loadArcade();ea=ra.extractFieldNames(ea,null==R?void 0:null==(qa=R.fields)?void 0:qa.map(xa=>xa.name));for(const xa of ea)P(L,R,xa)}});return m.apply(this,arguments)}function I(L,R,ea){return d.apply(this,arguments)}function d(){d=W._asyncToGenerator(function*(L,R,ea){if(ea&&"1\x3d1"!==ea){ea=(yield new Promise((qa,ra)=>k(["../../core/sql/WhereClause"],qa,ra))).WhereClause.create(ea,R);if(!ea.isStandardized)throw new U("fieldUtils:collectFilterFields","Where clause is not standardized");A(L,
R,ea.fieldNames)}});return d.apply(this,arguments)}function l(L,R){for(const ea of L)if(ea&&ea.valueType&&ea.valueType===R)return ea.name;return null}function K(){K=W._asyncToGenerator(function*(L){if(!L)return[];const R=new Set;yield G(R,L);return Array.from(R).sort()});return K.apply(this,arguments)}function G(L,R){return u.apply(this,arguments)}function u(){u=W._asyncToGenerator(function*(L,R){if(R){var ea=D.getDeepValue("elevationInfo.featureExpressionInfo",R);if(ea)return ea.collectRequiredFields(L,
R.fieldsIndex)}});return u.apply(this,arguments)}function B(L,R,ea){return C.apply(this,arguments)}function C(){C=W._asyncToGenerator(function*(L,R,ea){ea.outStatistic.onStatisticValueExpression?O(L,R,ea.outStatistic.onStatisticValueExpression):L.add(ea.outStatistic.onStatisticField)});return C.apply(this,arguments)}function z(){z=W._asyncToGenerator(function*(L,R,ea){var qa,ra;if(R&&ea&&"cluster"===ea.type){var xa=[];null!=(qa=ea.popupTemplate)&&qa.expressionInfos&&xa.push(...ea.popupTemplate.expressionInfos.map(za=>
O(L,R.fieldsIndex,za.expression)));if(Array.isArray(null==(ra=ea.popupTemplate)?void 0:ra.content)){qa=ea.popupTemplate.content;for(const za of qa)"expression"===za.type&&za.expressionInfo&&xa.push(O(L,R.fieldsIndex,za.expressionInfo.expression))}ea.fields&&xa.push(...ea.fields.map(za=>B(L,R.fieldsIndex,za)));yield Promise.all(xa)}});return z.apply(this,arguments)}function M(){M=W._asyncToGenerator(function*(L,R,ea){R&&(R.timeInfo&&p.isSome(ea)&&ea.timeExtent&&A(L,R.fieldsIndex,[R.timeInfo.startField,
R.timeInfo.endField]),R.floorInfo&&A(L,R.fieldsIndex,[R.floorInfo.floorField]),p.isSome(ea)&&p.isSome(ea.where)&&(yield I(L,R.fieldsIndex,ea.where)))});return M.apply(this,arguments)}function N(){N=W._asyncToGenerator(function*(L,R,ea){R&&ea&&(yield Promise.all(ea.map(qa=>da(L,R,qa))))});return N.apply(this,arguments)}function da(L,R,ea){return F.apply(this,arguments)}function F(){F=W._asyncToGenerator(function*(L,R,ea){R&&ea&&(ea.valueExpression?yield O(L,R.fieldsIndex,ea.valueExpression):ea.field&&
P(L,R.fieldsIndex,ea.field))});return F.apply(this,arguments)}function H(){H=W._asyncToGenerator(function*(L){if(!L)return[];const R="timeInfo"in L&&L.timeInfo;return R?t(L.fieldsIndex,[L.trackIdField,R.startField,R.endField]):[]});return H.apply(this,arguments)}function T(){T=W._asyncToGenerator(function*(L){if(!L)return[];const R=new Set;yield ba(R,L);return Array.from(R).sort()});return T.apply(this,arguments)}function ba(L,R){return J.apply(this,arguments)}function J(){J=W._asyncToGenerator(function*(L,
R){const {labelingInfo:ea,fieldsIndex:qa}=R;ea&&ea.length&&(yield Promise.all(ea.map(ra=>w(L,qa,ra))))});return J.apply(this,arguments)}function w(L,R,ea){return c.apply(this,arguments)}function c(){c=W._asyncToGenerator(function*(L,R,ea){if(ea){var qa=ea.getLabelExpression();ea=ea.where;"arcade"===qa.type?yield O(L,R,qa.expression):(qa=qa.expression.match(/{[^}]*}/g))&&qa.forEach(ra=>{P(L,R,ra.slice(1,-1))});yield I(L,R,ea)}});return c.apply(this,arguments)}function n(L){return"number"===typeof L&&
!isNaN(L)&&isFinite(L)}function Q(L){return null===L||n(L)}function Z(L){return null===L||Y(L)}function ja(L){return null!=L&&"string"===typeof L}function oa(L){return null===L||ja(L)}function ma(){return!0}function la(L,R){let ea;switch(L.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":ea=L.nullable?Z:Y;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":ea=
L.nullable?Q:n;break;case "string":case "esriFieldTypeString":ea=L.nullable?oa:ja;break;default:ea=ma}return 1===arguments.length?ea:ea(R)}function pa(L){return null!=L&&y.has(L.type)}function wa(L,R){return L.nullable&&null===R?null:pa(L)&&!Ca(L.type,Number(R))?e.NumericRangeValidationError.OUT_OF_RANGE:la(L,R)?L.domain?x.validateDomainValue(L.domain,R):null:e.TypeValidationError.INVALID_TYPE}function Ca(L,R){return(L="string"===typeof L?Ka(L):L)?L.isInteger?Y(R)&&R>=L.min&&R<=L.max:R>=L.min&&R<=
L.max:!1}function Ka(L){switch(L){case "esriFieldTypeSmallInteger":case "small-integer":return S;case "esriFieldTypeInteger":case "integer":return V;case "esriFieldTypeSingle":case "single":return fa;case "esriFieldTypeDouble":case "double":return ha}}function Ra(L,R,ea){if(!R||!R.attributes||!L){if(p.isSome(ea))for(var qa of L)ea.add(qa);return!0}R=R.attributes;qa=!1;for(const ra of L)if(!(ra in R))if(qa=!0,p.isSome(ea))ea.add(ra);else break;return qa}function Pa(){Pa=W._asyncToGenerator(function*(L,
R){const ea=new Set;for(const qa of R)yield O(ea,L.fieldsIndex,qa);return Array.from(ea).sort()});return Pa.apply(this,arguments)}const va="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),a=["field","normalizationField"],h=new Set,Y=(()=>"isInteger"in Number?Number.isInteger:L=>"number"===typeof L&&isFinite(L)&&Math.floor(L)===L)(),g=["integer","small-integer",
"single","double"],y=new Set([...g,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);e.NumericRangeValidationError=void 0;(e.NumericRangeValidationError||(e.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";e.TypeValidationError=void 0;(e.TypeValidationError||(e.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const S={min:-32768,max:32767,isInteger:!0},V={min:-2147483648,max:2147483647,
isInteger:!0},fa={min:-3.4E38,max:1.2E38,isInteger:!1},ha={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};e.collectArcadeFieldNames=O;e.collectElevationFields=G;e.collectFeatureReductionFields=function(L,R,ea){return z.apply(this,arguments)};e.collectField=P;e.collectFields=A;e.collectFilterFields=function(L,R,ea){return M.apply(this,arguments)};e.collectLabelingFields=ba;e.collectOrderByInfos=function(L,R,ea){return N.apply(this,arguments)};e.doubleRange=ha;e.featureHasFields=function(L,
R){return!Ra(L,R,null)};e.fixFields=t;e.fixRendererFields=function(L,R){if(null!=L&&null!=R)for(const ea of Array.isArray(L)?L:[L])if(r(va,ea,R),"visualVariables"in ea&&ea.visualVariables)for(const qa of ea.visualVariables)r(a,qa,R)};e.fixTimeInfoFields=function(L,R){if(null!=L&&null!=R&&R.fields.length)if("startField"in L){var ea=R.get(L.startField);R=R.get(L.endField);L.startField=ea&&ea.name||null;L.endField=R&&R.name||null}else ea=R.get(L.startTimeField),R=R.get(L.endTimeField),L.startTimeField=
ea&&ea.name||null,L.endTimeField=R&&R.name||null};e.getDisplayFieldName=function({displayField:L,fields:R}){if(L)return L;if(!R||!R.length)return null;if(!(L=l(R,"name-or-title")||l(R,"unique-identifier")||l(R,"type-or-category")))a:{for(const ea of R)if(ea&&ea.name&&(R=ea.name.toLowerCase(),-1<R.indexOf("name")||-1<R.indexOf("title"))){L=ea.name;break a}L=null}return L};e.getElevationFields=function(L){return K.apply(this,arguments)};e.getExpressionFields=function(L,R){return Pa.apply(this,arguments)};
e.getFeatureEditFields=function(L){if(!L)return[];const R="editFieldsInfo"in L&&L.editFieldsInfo;return R?t(L.fieldsIndex,[R&&R.creatorField,R&&R.creationDateField,R&&R.editorField,R&&R.editDateField]):[]};e.getFeatureGeometryFields=function(L){if(!L)return[];const R=L.geometryFieldsInfo;return R?t(L.fieldsIndex,[R.shapeAreaField,R.shapeLengthField]):[]};e.getFieldDefaultValue=function(L){const R=L.defaultValue;if(void 0!==R&&la(L,R))return R;if(L.nullable)return null};e.getFieldRange=function(L){const R=
x.getDomainRange(L.domain);if(R)return R;if(pa(L))return Ka(L.type)};e.getLabelingFields=function(L){return T.apply(this,arguments)};e.getNumericTypeForValue=function(L){if(!n(L))return null;if(Y(L)){if(L>=S.min&&L<=S.max)return"esriFieldTypeSmallInteger";if(L>=V.min&&L<=V.max)return"esriFieldTypeInteger"}return L>=fa.min&&L<=fa.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};e.getTimeFields=function(L){return H.apply(this,arguments)};e.integerRange=V;e.isDateField=function(L){return null!=L&&("date"===
L.type||"esriFieldTypeDate"===L.type)};e.isNumberInRange=Ca;e.isNumericField=pa;e.isStringField=function(L){return null!=L&&("string"===L.type||"esriFieldTypeString"===L.type)};e.isValidFieldValue=function(L,R){return null===wa(L,R)};e.isValueMatchingFieldType=la;e.numericTypes=g;e.packFields=function(L,R,ea=1){if(!R||!L)return[];if(R.includes("*"))return["*"];R=t(L,R);return R.length/L.fields.length>=ea?["*"]:R};e.populateMissingFields=Ra;e.rendererFields=va;e.sanitizeNullFieldValue=function(L){return null==
L||"number"===typeof L&&isNaN(L)?null:L};e.singleRange=fa;e.smallIntegerRange=S;e.unpackFieldNames=function(L,R){return p.isNone(R)||p.isNone(L)?[]:R.includes("*")?L.fields.map(ea=>ea.name):R};e.validateFieldValue=wa;e.validationErrorToString=function(L,R,ea){switch(L){case x.DomainValidationError.INVALID_CODED_VALUE:return`Value ${ea} is not in the coded domain - field: ${R.name}, domain: ${JSON.stringify(R.domain)}`;case x.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${ea} is out of the range of valid values - field: ${R.name}, domain: ${JSON.stringify(R.domain)}`;
case e.TypeValidationError.INVALID_TYPE:return`Value ${ea} is not a valid value for the field type - field: ${R.name}, type: ${R.type}, nullable: ${R.nullable}`;case e.NumericRangeValidationError.OUT_OF_RANGE:{const {min:qa,max:ra}=Ka(R.type);return`Value ${ea} is out of range for the number type - field: ${R.name}, type: ${R.type}, value range is ${qa} to ${ra}`}}};e.visualVariableFields=a;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/support/domainUtils":function(){define(["exports"],
function(k){function e(W,U){switch(W.type){case "range":{const p="range"in W?W.range[1]:W.maxValue;if(+U<("range"in W?W.range[0]:W.minValue)||+U>p)return k.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==W.codedValues||W.codedValues.every(p=>null==p||p.code!==U))return k.DomainValidationError.INVALID_CODED_VALUE}return null}k.DomainValidationError=void 0;(function(W){W.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";W.INVALID_CODED_VALUE=
"domain-validation-error::invalid-coded-value"})(k.DomainValidationError||(k.DomainValidationError={}));k.getDomainRange=function(W){if(W&&"range"===W.type)return{min:"range"in W?W.range[0]:W.minValue,max:"range"in W?W.range[1]:W.maxValue}};k.isValidDomainValue=function(W,U){return null===e(W,U)};k.validateDomainValue=e;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/maybe ../geometry/SpatialReference".split(" "),
function(k,e,W,U,p,D){function x(){q||(q=W._asyncToGenerator(function*(){const t=yield new Promise((A,P)=>k(["./arcadeUtils"],A,P));return{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature}})());return q}let q;U=(t,A,P)=>r.create(t,A,P,null,["$feature","$view"]);let r=function(){function t(P,O,m,I,d,l,K,G){this.script=P;this.evaluate=d;this.fields=Array.isArray(K)?K:K.fields;this._syntaxTree=I;this._arcade=O;this._arcadeDictionary=m;this._arcadeFeature=l;this._spatialReference=
G;this._referencesGeometry=O.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}t.create=function(){var P=W._asyncToGenerator(function*(O,m,I,d,l,K){const {arcade:G,Feature:u,Dictionary:B}=yield x(),C=D.fromJSON(m);m=G.parseScript(O,K);l=l.reduce((F,H)=>({...F,[H]:null}),{});let z=null;p.isSome(d)&&(z=new B(d),z.immutable=!0,l.$config=null);d=G.scriptUsesGeometryEngine(m)&&G.enableGeometrySupport();K=G.scriptUsesFeatureSet(m)&&G.enableFeatureSetSupport();
const M=G.scriptIsAsync(m)&&G.enableAsyncSupport();l={vars:l,spatialReference:C,useAsync:!!M};const N=new B;N.immutable=!1;N.setField("scale",0);const da=G.compileScript(m,l);yield Promise.all([d,K,M]);return new t(O,G,B,m,F=>{"$view"in F&&F.$view&&(N.setField("scale",F.$view.scale),F.$view=N);z&&(F.$config=z);return da({vars:F,spatialReference:C})},new u,I,C)});return function(O,m,I,d,l,K){return P.apply(this,arguments)}}();var A=t.prototype;A.repurposeFeature=function(P){P.geometry&&!P.geometry.spatialReference&&
(P.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(P.geometry,P.attributes,{fields:this.fields});return this._arcadeFeature};A.createDictionary=function(){return new this._arcadeDictionary};A.referencesMember=function(P){return this._arcade.referencesMember(this._syntaxTree,P)};A.referencesFunction=function(P){return this._arcade.referencesFunction(this._syntaxTree,P)};A.referencesGeometry=function(){return this._referencesGeometry};A.referencesScale=
function(){return this._referencesScale};A.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};return t}();e.ArcadeExpression=r;e.createDictionaryExpression=(t,A,P,O)=>r.create(t,A,P,O,["$feature","$view"]);e.createLabelExpression=(t,A,P)=>r.create(t,A,P,null,["$feature"]);e.createRendererExpression=U;e.createVVExpression=U;e.loadArcade=x;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(k,e,W,U,p,D,x,q,r,t,A,P,O){function m(){return new Promise((K,G)=>k(["../../../geometry/geometryEngineJSON"],K,G))}function I(){I=W._asyncToGenerator(function*(K,G,u){const {spatialRel:B,geometry:C}=K;if(C){if(!0!==l.spatialRelationship[B])throw new U("feature-store:unsupported-query","Unsupported query spatial relationship",{query:K});if(q.isValid(C.spatialReference)&&q.isValid(u)){if(!0!==l.queryGeometry[x.getJsonType(C)])throw new U("feature-store:unsupported-query","Unsupported query geometry type",
{query:K});if(!0!==l.layerGeometry[G])throw new U("feature-store:unsupported-query","Unsupported layer geometry type",{query:K});if(K.outSR)return P.checkProjectionSupport(K.geometry&&K.geometry.spatialReference,K.outSR)}}});return I.apply(this,arguments)}const d={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",
esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},l={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},
layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};e.canQueryWithRBush=function(K){if(x.isExtent(K))return!0;if(x.isPolygon(K)){for(const G of K.rings)if(5!==G.length||G[0][0]!==G[1][0]||G[0][0]!==G[4][0]||G[2][0]!==G[3][0]||G[0][1]!==G[3][1]||G[0][1]!==G[4][1]||G[1][1]!==G[2][1])return!1;return!0}return!1};e.checkSpatialQuerySupport=function(K,G,u){return I.apply(this,arguments)};e.getSpatialQueryOperator=function(K,
G,u,B,C){if(x.isPolygon(G)&&"esriGeometryPoint"===u&&("esriSpatialRelIntersects"===K||"esriSpatialRelContains"===K)){const z=t.convertFromPolygon(new A,G,!1,!1);return Promise.resolve(M=>r.polygonContainsPoint(z,!1,!1,M))}if(x.isPolygon(G)&&"esriGeometryMultipoint"===u){const z=t.convertFromPolygon(new A,G,!1,!1);if("esriSpatialRelContains"===K)return Promise.resolve(M=>r.polygonContainsMultipoint(z,!1,!1,M,B,C))}if(x.isExtent(G)&&"esriGeometryPoint"===u&&("esriSpatialRelIntersects"===K||"esriSpatialRelContains"===
K))return Promise.resolve(z=>p.extentContainsPoint(G,O.getGeometry(u,B,C,z)));if(x.isExtent(G)&&"esriGeometryMultipoint"===u&&"esriSpatialRelContains"===K)return Promise.resolve(z=>p.extentContainsMultipoint(G,O.getGeometry(u,B,C,z)));if(x.isExtent(G)&&"esriSpatialRelIntersects"===K){const z=D.getExtentIntersector(u);return Promise.resolve(M=>z(G,O.getGeometry(u,B,C,M)))}return m().then(z=>{const M=z[d[K]].bind(null,G.spatialReference,G);return N=>M(O.getGeometry(u,B,C,N))})};Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(k,e){k.extentIntersectsExtent=e.extentIntersectsExtent;k.extentIntersectsMultipoint=e.extentIntersectsMultipoint;k.extentIntersectsPoint=e.extentIntersectsPoint;k.extentIntersectsPolygon=e.extentIntersectsPolygon;k.extentIntersectsPolyline=e.extentIntersectsPolyline;k.getFeatureExtentIntersector=e.getFeatureExtentIntersector;k.isSelfIntersecting=e.isSelfIntersecting;k.segmentIntersects=
e.segmentIntersects;k.getExtentIntersector=function(W){return"mesh"===W?e.extentIntersectsExtent:e.getFeatureExtentIntersector(W)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],function(k){function e(W,U,p,D,x){if(!W)return!1;U=U?p?4:3:p?3:2;const {coords:q,lengths:r}=W;p=!1;W=0;for(const A of r){var t=W;for(let P=W,O=W+A*U;P<O;P+=U){t=P+U;t===O&&(t=W);const m=q[P],I=q[P+1],d=q[t];t=q[t+1];(I<x&&t>=x||t<x&&I>=x)&&m+(x-I)/(t-I)*(d-
m)<D&&(p=!p)}W+=A*U}return p}k.polygonContainsCoords=e;k.polygonContainsMultipoint=function(W,U,p,D,x,q){x=x?q?4:3:q?3:2;const {coords:r,lengths:t}=D;if(!t)return!1;for(let A=0,P=0;A<t.length;A++,P+=x)if(!e(W,U,p,r[P],r[P+1]))return!1;return!0};k.polygonContainsPoint=function(W,U,p,D){return e(W,U,p,D.coords[0],D.coords[1])};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(k,e){function W(p){return"oid"===
p.type||"esriFieldTypeOID"===p.type}function U(p){return"global-id"===p.type||"esriFieldTypeGlobalID"===p.type}return function(){function p(x){this.fields=x;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(x){var q=[];for(const r of x)if(x=r&&r.name){const t=x.toLowerCase().trim();this._fieldsMap.set(x,r);this._fieldsMap.set(t,r);q.push(t);"date"===r.type||"esriFieldTypeDate"===r.type?(this.dateFields.push(r),
this._dateFieldsSet.add(r)):e.isNumericField(r)&&(this._numericFieldsSet.add(r),this.numericFields.push(r));W(r)||U(r)||(r.editable=null==r.editable?!0:!!r.editable,r.nullable=null==r.nullable?!0:!!r.nullable)}q.sort();this.uid=q.join(",")}}var D=p.prototype;D.destroy=function(){this._fieldsMap.clear()};D.has=function(x){return null!=this.get(x)};D.get=function(x){return null!=x?this._fieldsMap.get(x)||this._fieldsMap.get(x.toLowerCase().trim()):void 0};D.isDateField=function(x){return this._dateFieldsSet.has(this.get(x))};
D.isNumericField=function(x){return this._numericFieldsSet.has(this.get(x))};D.normalizeFieldName=function(x){if(x=this.get(x))return x.name};k._createClass(p,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const x of this.fields)W(x)||U(x)||x.nullable||void 0!==e.getFieldDefaultValue(x)||this._requiredFields.push(x)}return this._requiredFields}}]);return p}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/PromiseQueue ./debugFlags".split(" "),
function(k,e,W,U,p,D,x,q,r,t,A,P,O,m,I,d,l,K,G){function u(w){return C.has(w)?C.get(w):"number"===typeof w?w:1}const B=D.getLogger("esri.views.support.Scheduler");k.TaskPriority=void 0;(function(w){w.RESOURCE_CONTROLLER="schedule";w.SLIDE="slide";w.STREAM_DATA_LOADER="stream loader";w.ELEVATION_QUERY="elevation query";w.TERRAIN_SURFACE="terrain";w.SURFACE_GEOMETRY_UPDATES="surface geometry updates";w.GRAPHICS_CORE="Graphics3D";w.I3S_CONTROLLER="I3S";w.POINT_CLOUD_LAYER="point cloud";w.FEATURE_TILE_FETCHER=
"feature fetcher";w.OVERLAY="overlay";w.STAGE="stage";w.GRAPHICS_DECONFLICTOR="graphics deconflictor";w.FILTER_VISIBILITY="Graphics3D filter visibility";w.SCALE_VISIBILITY="Graphics3D scale visibility";w.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";w.POINT_OF_INTEREST_FREQUENT="POI frequent";w.POINT_OF_INTEREST_INFREQUENT="POI infrequent";w.LABELER="labeler";w.FEATURE_QUERY_ENGINE="feature query";w.FEATURE_TILE_TREE="feature tile tree";w.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";w.ELEVATION_ALIGNMENT=
"elevation alignment";w.TEXT_TEXTURE_ATLAS="text texture atlas";w.TEXTURE_UNLOAD="texture unload";w.LINE_OF_SIGHT_TOOL="line of sight tool";w.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";w.ELEVATION_PROFILE="elevation profile";w.SNAPPING="snapping";w.SHADOW_ACCUMULATOR="shadow accumulator";w.CLOUDS_GENERATOR="cloud generator";w[w.TEST_PRIO=1]="TEST_PRIO"})(k.TaskPriority||(k.TaskPriority={}));const C=new Map([[k.TaskPriority.RESOURCE_CONTROLLER,0],[k.TaskPriority.SLIDE,0],[k.TaskPriority.STREAM_DATA_LOADER,
0],[k.TaskPriority.ELEVATION_QUERY,0],[k.TaskPriority.TERRAIN_SURFACE,1],[k.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[k.TaskPriority.GRAPHICS_CORE,2],[k.TaskPriority.I3S_CONTROLLER,2],[k.TaskPriority.POINT_CLOUD_LAYER,2],[k.TaskPriority.FEATURE_TILE_FETCHER,2],[k.TaskPriority.OVERLAY,4],[k.TaskPriority.STAGE,4],[k.TaskPriority.GRAPHICS_DECONFLICTOR,4],[k.TaskPriority.FILTER_VISIBILITY,4],[k.TaskPriority.SCALE_VISIBILITY,4],[k.TaskPriority.FRUSTUM_VISIBILITY,4],[k.TaskPriority.POINT_OF_INTEREST_FREQUENT,
6],[k.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[k.TaskPriority.LABELER,8],[k.TaskPriority.FEATURE_QUERY_ENGINE,8],[k.TaskPriority.FEATURE_TILE_TREE,16],[k.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[k.TaskPriority.ELEVATION_ALIGNMENT,12],[k.TaskPriority.TEXT_TEXTURE_ATLAS,12],[k.TaskPriority.CLOUDS_GENERATOR,12],[k.TaskPriority.TEXTURE_UNLOAD,12],[k.TaskPriority.LINE_OF_SIGHT_TOOL,16],[k.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[k.TaskPriority.SNAPPING,0],[k.TaskPriority.SHADOW_ACCUMULATOR,
30]]);k.State=void 0;(function(w){w[w.ANIMATING=0]="ANIMATING";w[w.INTERACTING=1]="INTERACTING";w[w.IDLE=2]="IDLE"})(k.State||(k.State={}));const z=P.Milliseconds(6.5),M=P.Milliseconds(1),N=P.Milliseconds(30),da=P.Milliseconds(1E3/30),F=P.Milliseconds(100);var H;(function(w){let c=function(Z){function ja(ma){var la=Z.call(this,ma)||this;la.updating=!0;la._microTaskQueued=!1;la.performanceInfo={total:new q("total"),tasks:new Map};la._frameTaskTimes=new Map;la._budget=null;la._state=k.State.INTERACTING;
la._tasks=new r;la._runQueue=new r;la._load=0;la._idleStateCallbacks=new r;la._idleUpdatesStartFired=!1;la._maxReschedule=J;la._forceTask=!1;la._debug=!1;la._debugHandle=A.watch(()=>G.SCHEDULER_LOG_SLOW_TASKS,Ca=>la._debug=Ca,A.initial);la._budget=new Q(ma.nowFunc);for(const Ca of Object.keys(k.TaskPriority))la.performanceInfo.tasks.set(k.TaskPriority[Ca],new q(k.TaskPriority[Ca]));let pa;const wa=e._assertThisInitialized(la);la._test={get state(){return x.unwrapOr(pa,wa._state)},set state(Ca){pa=
Ca},FRAME_SAFETY_BUDGET:z,INTERACTING_BUDGET:da,IDLE_BUDGET:F,get budget(){return wa._budget.budget},usedBudget:0,setBudget:Ca=>wa._budget=Ca,updateTask:Ca=>la._updateTask(Ca),getState:Ca=>la._getState(Ca),getRuntime:Ca=>la._getRuntime(Ca),frameTaskTimes:la._frameTaskTimes,resetRuntimes:()=>la._resetRuntimes(),getRunning:()=>la._getRunning()};return la}e._inheritsLoose(ja,Z);var oa=ja.prototype;oa.destroy=function(){this._tasks.toArray().forEach(ma=>ma.remove());this._tasks.clear();x.removeMaybe(this._debugHandle);
this.updating=this._microTaskQueued=!1};oa.activate=function(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=J,this._schedule(),this.frame()))}))};oa.registerTask=function(ma,la){const pa=u(ma);la=new n(this,ma,la,pa);this._tasks.push(la);this.performanceInfo.tasks.has(ma)||this.performanceInfo.tasks.set(ma,new q(ma));return la};oa.registerIdleStateCallbacks=function(ma,
la){const pa={idleBegin:ma,idleEnd:la};this._idleStateCallbacks.push(pa);this.state===k.State.IDLE&&this._idleUpdatesStartFired&&pa.idleBegin();const wa=this;return{remove:()=>this._removeIdleStateCallbacks(pa),set idleBegin(Ca){wa._idleUpdatesStartFired&&(pa.idleEnd(),wa._state===k.State.IDLE&&Ca());pa.idleBegin=Ca},set idleEnd(Ca){pa.idleEnd=Ca}}};oa.updateBudget=function(ma){this._test.usedBudget=0;let la=z,pa=ma.frameDuration,wa=M;switch(this.state){case k.State.IDLE:la=P.Milliseconds(0);pa=P.Milliseconds(Math.max(F,
ma.frameDuration));wa=N;break;case k.State.INTERACTING:pa=P.Milliseconds(Math.max(da,ma.frameDuration))}pa=P.Milliseconds(pa-ma.elapsedFrameTime-la);if(this.state!==k.State.IDLE&&pa<M&&!this._forceTask)return this._forceTask=!0,!1;pa=P.Milliseconds(Math.max(pa,wa));this._budget.reset(pa,this.state);this._maxReschedule=J;this._updateLoad();return this._schedule()};oa.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case k.State.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=
!0,this._idleStateCallbacks.forAll(ma=>ma.idleBegin()));this._runIdle();break;case k.State.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};oa.stopFrame=function(){this._budget.reset(P.Milliseconds(0),this._state);this._budget.madeProgress()};oa._removeIdleStateCallbacks=function(ma){this._idleUpdatesStartFired&&ma.idleEnd();this._idleStateCallbacks.removeUnordered(ma)};oa.removeTask=function(ma){this._tasks.removeUnordered(ma);this._runQueue.removeUnordered(ma)};
oa._updateTask=function(ma){this._tasks.forAll(la=>{la.name===ma&&la.setPriority(ma)})};oa._getState=function(ma){if(this._runQueue.some(pa=>pa.name===ma))return k.TaskState.SCHEDULED;let la=k.TaskState.IDLE;this._tasks.forAll(pa=>{pa.name===ma&&pa.needsUpdate&&(1>=pa.schedulePriority?la=k.TaskState.READY:la!==k.TaskState.READY&&(la=k.TaskState.WAITING))});return la};oa._getRuntime=function(ma){let la=0;this._tasks.forAll(pa=>{pa.name===ma&&(la+=pa.runtime)});return la};oa._resetRuntimes=function(){this._tasks.forAll(ma=>
ma.runtime=0)};oa._getRunning=function(){const ma=new Map;this._tasks.forAll(pa=>{pa.needsUpdate&&ma.set(pa.name,(ma.get(pa.name)||0)+1)});if(0===ma.size)return null;let la="";ma.forEach((pa,wa)=>{la=1<pa?la+` ${pa}x ${wa}`:la+` ${wa}`});return la};oa._runIdle=function(){this._run()};oa._runInteracting=function(){this._run()};oa._runAnimating=function(){this._run()};oa._updateLoad=function(){const ma=this._tasks.reduce((la,pa)=>pa.needsUpdate?++la:la,0);this._load=.9*this._load+ma*(1-.9)};oa._schedule=
function(){if(0>=this._maxReschedule)return!1;this._runQueue.filterInPlace(ma=>{if(ma.needsUpdate)return!0;ma.schedulePriority=ma.basePriority;return!1});for(this._tasks.forAll(ma=>{0===ma.basePriority&&ma.needsUpdate&&!this._runQueue.some(la=>la===ma)&&this._runQueue.unshift(ma)});0===this._runQueue.length;){let ma=!1,la=0;this._tasks.forAll(pa=>{if(pa.needsUpdate&&0!==pa.schedulePriority&&0!==pa.basePriority)switch(ma=!0,la=Math.max(la,pa.basePriority),pa.schedulePriority){case 1:pa.schedulePriority=
0;this._runQueue.push(pa);break;default:--pa.schedulePriority}});if(!ma)return this.updating=!1;this._maxReschedule===J&&(this._maxReschedule=la);--this._maxReschedule}return this.updating=!0};oa._run=function(){const ma=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var la=this._budget.now();const pa=this._runQueue.pop();this._budget.resetProgress();try{pa.task.runTask(this._budget)}catch(wa){B.error(`Exception in task "${pa.name}"`,wa)}pa.schedulePriority=pa.basePriority;
la=this._budget.now()-la;pa.runtime+=la;this._frameTaskTimes.set(pa.priority,this._frameTaskTimes.get(pa.priority)+la);this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",pa.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this.updating=this._tasks.some(wa=>wa.needsUpdate);this._recordFrameTaskTimes(this._budget.now()-ma);return}}while(this._schedule());this.updating=this._tasks.some(pa=>pa.needsUpdate);this._recordFrameTaskTimes(this._budget.now()-
ma)};oa._startFrameTaskTimes=function(){for(const ma of Object.keys(k.TaskPriority))this._frameTaskTimes.set(k.TaskPriority[ma],0)};oa._recordFrameTaskTimes=function(ma){this._frameTaskTimes.forEach((la,pa)=>this.performanceInfo.tasks.get(pa).record(la));this.performanceInfo.total.record(ma)};e._createClass(ja,[{key:"now",get:function(){return this.nowFunc()}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return x.isNone(this._test.state)?this._state:this._test.state},
set:function(ma){this._state!==ma&&(this._state=ma,this.state!==k.State.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(la=>la.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return ja}(U);W.__decorate([O.property()],c.prototype,"updating",void 0);W.__decorate([O.property()],c.prototype,"nowFunc",void 0);c=W.__decorate([l.subclass("esri.views.support.Scheduler")],c);w.Scheduler=c;let n=function(Z){function ja(ma,la,pa,wa){var Ca=Z.call(this,
{})||this;Ca._scheduler=ma;Ca.name=la;Ca._basePriority=wa;Ca.runtime=0;Ca._queue=new K.PromiseQueue;Ca._handles=new p;Ca.schedulePriority=Ca._basePriority;Ca.task=x.isSome(pa)?pa:Ca._queue;Ca._handles.add(A.when(()=>Ca.task.running,()=>ma.activate()));return Ca}e._inheritsLoose(ja,Z);var oa=ja.prototype;oa.normalizeCtorArgs=function(){return{}};oa.remove=function(){this.processQueue(T);this._scheduler.removeTask(this);this.schedule=ba.schedule;this.reschedule=ba.reschedule;this._handles.destroy()};
oa.setPriority=function(ma){this.name=ma;ma=u(ma);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=ma;this._basePriority=ma};oa.schedule=function(ma,la,pa){return this._queue.push(ma,la,pa)};oa.reschedule=function(ma,la,pa){return this._queue.unshift(ma,la,pa)};oa.processQueue=function(ma){this._queue.runTask(ma)};e._createClass(ja,[{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},
set:function(ma){this.setPriority(ma)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return ja}(U);W.__decorate([O.property({constructOnly:!0})],n.prototype,"task",void 0);W.__decorate([O.property({readOnly:!0})],n.prototype,"updating",null);n=W.__decorate([l.subclass("esri.views.support.SchedulerTask")],n);let Q=function(){function Z(oa){this.now=oa;this._budget=this._begin=0;this._state=k.State.IDLE;this._didWork=!1;this._enabled=!0}var ja=Z.prototype;ja.run=function(oa){if(this.done)return!1;
!0===oa()&&(this._didWork=!0);return!0};ja.madeProgress=function(){this._didWork=!0};ja.reset=function(oa,ma){this._begin=this.now();this._budget=oa;this._state=ma;this._didWork=!1};ja.resetProgress=function(){this._didWork=!1};e._createClass(Z,[{key:"done",get:function(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(oa){this._enabled=
oa}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return this.now()-this._begin}},{key:"hasProgressed",get:function(){return this._didWork}}]);return Z}();w.Budget=Q})(H||(H={}));k.TaskState=void 0;(function(w){w.SCHEDULED="s";w.READY="r";w.WAITING="w";w.IDLE="i"})(k.TaskState||(k.TaskState={}));const T=(()=>{const w=new H.Budget(()=>performance.now());w.enabled=!1;return w})(),ba=new (function(){function w(){}var c=w.prototype;c.remove=
function(){};c.processQueue=function(){};c.schedule=function(n,Q,Z){try{if(t.isAborted(Q)){const ja=t.createAbortError();return Z?Promise.resolve(Z(ja)):Promise.reject(ja)}return t.when(n(T))}catch(ja){return Promise.reject(ja)}};c.reschedule=function(n,Q,Z){return this.schedule(n,Q,Z)};return w}()),J=Number.MAX_SAFE_INTEGER;k.ImmediateTask=ba;k.getTaskPriority=u;k.newScheduler=function(w){return new H.Scheduler({nowFunc:w})};k.noBudget=T;k.taskPriorities=C;Object.defineProperty(k,"__esModule",{value:!0})})},
"esri/core/Handles":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Collection ./maybe ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(k,e,W,U,p,D,x){W=function(q){function r(A){A=q.call(this,A)||this;A._groups=new Map;return A}k._inheritsLoose(r,q);var t=r.prototype;t.destroy=function(){this.removeAll()};t.add=function(A,P){if(!this._isHandle(A)&&!Array.isArray(A)&&!U.isCollection(A))return this;const O=this._getOrCreateGroup(P);
Array.isArray(A)||U.isCollection(A)?A.forEach(m=>this._isHandle(m)&&O.push(m)):O.push(A);this.notifyChange("size");return this};t.forEach=function(A,P){if("function"===typeof A)this._groups.forEach(O=>O.forEach(A));else{const O=this._getGroup(A);O&&P&&O.forEach(P)}};t.has=function(A){return this._groups.has(this._ensureGroupKey(A))};t.remove=function(A){if(Array.isArray(A)||U.isCollection(A))return A.forEach(this.remove,this),this;if(!this.has(A))return this;const P=this._getGroup(A);for(let O=0;O<
P.length;O++)P[O].remove();this._deleteGroup(A);this.notifyChange("size");return this};t.removeAll=function(){this._groups.forEach(A=>{for(let P=0;P<A.length;P++)A[P].remove()});this._groups.clear();this.notifyChange("size");return this};t._isHandle=function(A){return A&&!!A.remove};t._getOrCreateGroup=function(A){if(this.has(A))return this._getGroup(A);const P=[];this._groups.set(this._ensureGroupKey(A),P);return P};t._getGroup=function(A){return p.assumeNonNull(this._groups.get(this._ensureGroupKey(A)))};
t._deleteGroup=function(A){return this._groups.delete(this._ensureGroupKey(A))};t._ensureGroupKey=function(A){return A||"_default_"};k._createClass(r,[{key:"size",get:function(){let A=0;this._groups.forEach(P=>{A+=P.length});return A}}]);return r}(W);e.__decorate([D.property({readOnly:!0})],W.prototype,"size",null);return W=e.__decorate([x.subclass("esri.core.Handles")],W)})},"esri/core/Collection":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./ArrayPool ./Evented ./lang ./maybe ./ObjectPool ./ObservableChangesType ./scheduling ./accessorSupport/decorators/property ./accessorSupport/ensureType ./accessorSupport/decorators/shared ./accessorSupport/decorators/subclass ./accessorSupport/tracking ./accessorSupport/tracking/SimpleObservable".split(" "),
function(k,e,W,U,p,D,x,q,r,t,A,P,O,m,I){function d(T){return T?T instanceof H?T.toArray():T.length?Array.prototype.slice.apply(T):[]:[]}function l(T){if(T&&T.length)return T[0]}function K(T,ba,J,w){ba&&ba.forEach((c,n,Q)=>{T.push(c);K(T,J.call(w,c,n,Q),J,w)})}var G;let u=function(){function T(){this.target=null;this.defaultPrevented=this.cancellable=!1;this.type=this.item=void 0}var ba=T.prototype;ba.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};ba.reset=function(J){this.defaultPrevented=
!1;this.item=J};return T}();const B=new x(u,void 0,T=>{T.item=null;T.target=null;T.defaultPrevented=!1;T.cancellable=!1}),C=()=>{},z=new Set,M=new Set,N=new Set,da=new Map;let F=0,H=G=function(T,ba){function J(c){c=T.call(this,c)||this;c._chgListeners=[];c._notifications=null;c._timer=null;c._observable=new I.SimpleObservable;c.length=0;c._items=[];Object.defineProperty(k._assertThisInitialized(c),"uid",{value:F++});return c}k._inheritsLoose(J,T);J.isCollection=function(c){return null!=c&&c instanceof
G};var w=J.prototype;w.normalizeCtorArgs=function(c){return c?Array.isArray(c)||c instanceof G?{items:c}:c:{}};w.destroy=function(){this.removeAll()};w[ba]=function*(){yield*this.items};w.hasEventListener=function(c){return"change"===c?0<this._chgListeners.length:this._emitter.hasEventListener(c)};w.on=function(c,n){if("change"===c){const Q=this._chgListeners,Z={removed:!1,callback:n};Q.push(Z);this._notifications&&this._notifications.push({listeners:Q.slice(),items:this._items.slice(),changes:[]});
return{remove(){this.remove=C;Z.removed=!0;Q.splice(Q.indexOf(Z),1)}}}return this._emitter.on(c,n)};w.once=function(c,n){const Q=this.on(c,n);return{remove(){Q.remove()}}};w.add=function(c,n){m.trackAccess(this._observable);if(this._emitBeforeChanges(q.ObservableChangesType.ADD))return this;n=this.getNextIndex(null!=n?n:null);this._splice(n,0,[c]);this._emitAfterChanges(q.ObservableChangesType.ADD);return this};w.addMany=function(c,n=this._items.length){m.trackAccess(this._observable);if(!c||!c.length||
this._emitBeforeChanges(q.ObservableChangesType.ADD))return this;n=this.getNextIndex(n);this._splice(n,0,d(c));this._emitAfterChanges(q.ObservableChangesType.ADD);return this};w.at=function(c){m.trackAccess(this._observable);c=Math.trunc(c)||0;0>c&&(c+=this.length);if(!(0>c||c>=this.length))return this._items[c]};w.removeAll=function(){m.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(q.ObservableChangesType.REMOVE))return[];const c=this._splice(0,this.length)||[];this._emitAfterChanges(q.ObservableChangesType.REMOVE);
return c};w.clone=function(){m.trackAccess(this._observable);return this._createNewInstance({items:this._items.map(p.clone)})};w.concat=function(...c){m.trackAccess(this._observable);c=c.map(d);return this._createNewInstance({items:this._items.concat(...c)})};w.drain=function(c,n){m.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(q.ObservableChangesType.REMOVE)){var Q=D.assumeNonNull(this._splice(0,this.length)),Z=Q.length;for(let ja=0;ja<Z;ja++)c.call(n,Q[ja],ja,Q);this._emitAfterChanges(q.ObservableChangesType.REMOVE)}};
w.every=function(c,n){m.trackAccess(this._observable);return this._items.every(c,n)};w.filter=function(c,n){m.trackAccess(this._observable);let Q;Q=2===arguments.length?this._items.filter(c,n):this._items.filter(c);return this._createNewInstance({items:Q})};w.find=function(c,n){m.trackAccess(this._observable);return this._items.find(c,n)};w.findIndex=function(c,n){m.trackAccess(this._observable);return this._items.findIndex(c,n)};w.flatten=function(c,n){m.trackAccess(this._observable);const Q=[];
K(Q,this,c,n);return new G(Q)};w.forEach=function(c,n){m.trackAccess(this._observable);return this._items.forEach(c,n)};w.getItemAt=function(c){m.trackAccess(this._observable);return this._items[c]};w.getNextIndex=function(c){m.trackAccess(this._observable);const n=this.length;c=null==c?n:c;0>c?c=0:c>n&&(c=n);return c};w.includes=function(c,n=0){m.trackAccess(this._observable);return this._items.includes(c,n)};w.indexOf=function(c,n=0){m.trackAccess(this._observable);return this._items.indexOf(c,
n)};w.join=function(c=","){m.trackAccess(this._observable);return this._items.join(c)};w.lastIndexOf=function(c,n=this.length-1){m.trackAccess(this._observable);return this._items.lastIndexOf(c,n)};w.map=function(c,n){m.trackAccess(this._observable);c=this._items.map(c,n);return new G({items:c})};w.reorder=function(c,n=this.length-1){m.trackAccess(this._observable);const Q=this.indexOf(c);if(-1!==Q){0>n?n=0:n>=this.length&&(n=this.length-1);if(Q!==n){if(this._emitBeforeChanges(q.ObservableChangesType.MOVE))return c;
this._splice(Q,1);this._splice(n,0,[c]);this._emitAfterChanges(q.ObservableChangesType.MOVE)}return c}};w.pop=function(){m.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(q.ObservableChangesType.REMOVE)){var c=l(this._splice(this.length-1,1));this._emitAfterChanges(q.ObservableChangesType.REMOVE);return c}};w.push=function(...c){m.trackAccess(this._observable);if(this._emitBeforeChanges(q.ObservableChangesType.ADD))return this.length;this._splice(this.length,0,c);this._emitAfterChanges(q.ObservableChangesType.ADD);
return this.length};w.reduce=function(c,n){m.trackAccess(this._observable);const Q=this._items;return 2===arguments.length?Q.reduce(c,n):Q.reduce(c)};w.reduceRight=function(c,n){m.trackAccess(this._observable);const Q=this._items;return 2===arguments.length?Q.reduceRight(c,n):Q.reduceRight(c)};w.remove=function(c){m.trackAccess(this._observable);return this.removeAt(this.indexOf(c))};w.removeAt=function(c){m.trackAccess(this._observable);if(!(0>c||c>=this.length||this._emitBeforeChanges(q.ObservableChangesType.REMOVE)))return c=
l(this._splice(c,1)),this._emitAfterChanges(q.ObservableChangesType.REMOVE),c};w.removeMany=function(c){m.trackAccess(this._observable);if(!c||!c.length||this._emitBeforeChanges(q.ObservableChangesType.REMOVE))return[];c=c instanceof G?c.toArray():c;const n=this._items,Q=[],Z=c.length;for(let la=0;la<Z;la++){var ja=n.indexOf(c[la]);if(-1<ja){{var oa=la+1;var ma=ja+1;const pa=Math.min(c.length-oa,n.length-ma);let wa=0;for(;wa<pa&&c[oa+wa]===n[ma+wa];)wa++;oa=wa}oa=1+oa;(ja=this._splice(ja,oa))&&0<
ja.length&&Q.push.apply(Q,ja);la+=oa-1}}this._emitAfterChanges(q.ObservableChangesType.REMOVE);return Q};w.reverse=function(){m.trackAccess(this._observable);if(this._emitBeforeChanges(q.ObservableChangesType.MOVE))return this;const c=this._splice(0,this.length);c&&(c.reverse(),this._splice(0,0,c));this._emitAfterChanges(q.ObservableChangesType.MOVE);return this};w.shift=function(){m.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(q.ObservableChangesType.REMOVE)){var c=l(this._splice(0,
1));this._emitAfterChanges(q.ObservableChangesType.REMOVE);return c}};w.slice=function(c=0,n=this.length){m.trackAccess(this._observable);return this._createNewInstance({items:this._items.slice(c,n)})};w.some=function(c,n){m.trackAccess(this._observable);return this._items.some(c,n)};w.sort=function(c){m.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(q.ObservableChangesType.MOVE))return this;const n=D.assumeNonNull(this._splice(0,this.length));arguments.length?n.sort(c):n.sort();
this._splice(0,0,n);this._emitAfterChanges(q.ObservableChangesType.MOVE);return this};w.splice=function(c,n,...Q){m.trackAccess(this._observable);const Z=(n?q.ObservableChangesType.REMOVE:0)|(Q.length?q.ObservableChangesType.ADD:0);if(this._emitBeforeChanges(Z))return[];c=this._splice(c,n,Q)||[];this._emitAfterChanges(Z);return c};w.toArray=function(){m.trackAccess(this._observable);return this._items.slice()};w.toJSON=function(){m.trackAccess(this._observable);return this.toArray()};w.toLocaleString=
function(){m.trackAccess(this._observable);return this._items.toLocaleString()};w.toString=function(){m.trackAccess(this._observable);return this._items.toString()};w.unshift=function(...c){m.trackAccess(this._observable);if(!c.length||this._emitBeforeChanges(q.ObservableChangesType.ADD))return this.length;this._splice(0,0,c);this._emitAfterChanges(q.ObservableChangesType.ADD);return this.length};w._createNewInstance=function(c){return new this.constructor(c)};w._splice=function(c,n,Q){const Z=this._items;
var ja=this.itemType;let oa=void 0;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=r.schedule(()=>this._dispatchChange()));if(n){oa=Z.splice(c,n);if(this.hasEventListener("before-remove")){var ma=B.acquire();ma.target=this;ma.cancellable=!0;for(let wa=0,Ca=oa.length;wa<Ca;wa++)n=oa[wa],ma.reset(n),this.emit("before-remove",ma),ma.defaultPrevented&&
(oa.splice(wa,1),Z.splice(c,0,n),c+=1,--wa,--Ca);B.release(ma)}this.length=this._items.length;if(this.hasEventListener("after-remove")){n=B.acquire();n.target=this;n.cancellable=!1;ma=oa.length;for(let wa=0;wa<ma;wa++)n.reset(oa[wa]),this.emit("after-remove",n);B.release(n)}}if(Q&&Q.length){if(ja){n=[];for(var la of Q)Q=ja.ensureType(la),null==Q&&null!=la||n.push(Q);Q=n}ja=this.hasEventListener("before-add");la=this.hasEventListener("after-add");n=c===this.length;if(ja||la){var pa=B.acquire();pa.target=
this;pa.cancellable=!0;ma=B.acquire();ma.target=this;ma.cancellable=!1;for(const wa of Q)ja?(pa.reset(wa),this.emit("before-add",pa),pa.defaultPrevented||(n?Z.push(wa):Z.splice(c++,0,wa),this._set("length",Z.length),la&&(ma.reset(wa),this.emit("after-add",ma)))):(n?Z.push(wa):Z.splice(c++,0,wa),this._set("length",Z.length),ma.reset(wa),this.emit("after-add",ma));B.release(ma);B.release(pa)}else{if(n)for(pa of Q)Z.push(pa);else Z.splice(c,0,...Q);this._set("length",Z.length)}}(Q&&Q.length||oa&&oa.length)&&
this._notifyChangeEvent(Q,oa);return oa};w._emitBeforeChanges=function(c){let n=!1;if(this.hasEventListener("before-changes")){const Q=B.acquire();Q.target=this;Q.cancellable=!0;Q.type=c;this.emit("before-changes",Q);n=Q.defaultPrevented;B.release(Q)}return n};w._emitAfterChanges=function(c){if(this.hasEventListener("after-changes")){const n=B.acquire();n.target=this;n.cancellable=!1;n.type=c;this.emit("after-changes",n);B.release(n)}this._observable.notify()};w._notifyChangeEvent=function(c,n){this.hasEventListener("change")&&
this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:c,removed:n})};w._dispatchChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var c=this._notifications;this._notifications=null;for(const n of c){c=n.changes;z.clear();M.clear();N.clear();for(const {added:la,removed:pa}of c){if(la)if(0===N.size&&0===M.size)for(const wa of la)z.add(wa);else for(const wa of la)M.has(wa)?(N.add(wa),M.delete(wa)):N.has(wa)||z.add(wa);
if(pa)if(0===N.size&&0===z.size)for(const wa of pa)M.add(wa);else for(const wa of pa)z.has(wa)?z.delete(wa):(N.delete(wa),M.add(wa))}const Q=W.acquire();z.forEach(la=>{Q.push(la)});const Z=W.acquire();M.forEach(la=>{Z.push(la)});const ja=this._items,oa=n.items,ma=W.acquire();N.forEach(la=>{oa.indexOf(la)!==ja.indexOf(la)&&ma.push(la)});if(n.listeners&&(Q.length||Z.length||ma.length)){c={target:this,added:Q,removed:Z,moved:ma};const la=n.listeners.length;for(let pa=0;pa<la;pa++){const wa=n.listeners[pa];
wa.removed||wa.callback.call(this,c)}}W.release(Q);W.release(Z);W.release(ma)}z.clear();M.clear();N.clear()}};k._createClass(J,[{key:"items",get:function(){m.trackAccess(this._observable);return this._items},set:function(c){this._emitBeforeChanges(q.ObservableChangesType.ADD)||(this._splice(0,this.length,d(c)),this._emitAfterChanges(q.ObservableChangesType.ADD))}}]);return J}(U.EventedAccessor,Symbol.iterator);H.ofType=T=>{if(!T)return G;if(da.has(T))return da.get(T);let ba=null;if("function"===typeof T)ba=
T.prototype.declaredClass;else if(T.base)ba=T.base.prototype.declaredClass;else for(var J in T.typeMap){const w=T.typeMap[J].prototype.declaredClass;ba=ba?ba+` | ${w}`:w}J=function(w){function c(){return w.apply(this,arguments)||this}k._inheritsLoose(c,w);return c}(G);e.__decorate([P.shared({Type:T,ensureType:"function"===typeof T?A.ensureType(T):A.ensureOneOfType(T)})],J.prototype,"itemType",void 0);J=e.__decorate([O.subclass(`esri.core.Collection<${ba}>`)],J);da.set(T,J);return J};e.__decorate([t.property()],
H.prototype,"length",void 0);e.__decorate([t.property()],H.prototype,"items",null);return H=G=e.__decorate([O.subclass("esri.core.Collection")],H)})},"esri/core/ObservableChangesType":function(){define(["exports"],function(k){k.ObservableChangesType=void 0;var e=k.ObservableChangesType||(k.ObservableChangesType={});e[e.ADD=1]="ADD";e[e.REMOVE=2]="REMOVE";e[e.MOVE=4]="MOVE";Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/accessorSupport/decorators/shared":function(){define(["exports"],
function(k){k.shared=function(e){return(W,U)=>{W[U]=e}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(k,e){let W=function(){function U(){this._observers=[]}var p=U.prototype;p.observe=function(D){this._observers.includes(D)||this._observers.push(D);return new e.ObservationHandle(this._observers,D)};p.notify=function(){const D=this._observers.slice();for(let x=0;x<D.length;++x){const q=
D[x];q.onInvalidated();q.onCommitted()}};return U}();k.SimpleObservable=W;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(k,e,W,U,p,D,x){function q(O,m,I={}){return r(O,m,I,A)}function r(O,m,I={},d){let l=null;const K=I.once?(G,u)=>{d(G)&&(U.removeMaybe(l),m(G,u))}:(G,u)=>{d(G)&&m(G,u)};l=D.watchTracked(O,K,I.sync,I.equals);
I.initial&&(O=O(),K(O,O));return l}function t(O,m,I){if(p.isAborted(I))return Promise.reject(p.createAbortError());const d=O();if(null!=m&&m(d))return Promise.resolve(d);let l=null;return new Promise((K,G)=>{l=W.handlesGroup([p.onAbort(I,()=>{l=U.removeMaybe(l);G(p.createAbortError())}),r(O,u=>{l=U.removeMaybe(l);K(u)},{sync:!1,once:!0},null!=m?m:A)])})}function A(O){return!0}function P(O){return!!O}k.autorun=x.autorun;k.initial={initial:!0};k.on=function(O,m,I,d={}){function l(){G&&u&&(u.remove(),
null==d.onListenerRemove?void 0:d.onListenerRemove(G),u=G=null)}function K(z){d.once&&d.once&&U.removeMaybe(B);I(z)}let G=null,u=null,B=null;const C=q(O,(z,M)=>{l();e.isEventTarget(z)&&(G=z,u=e.on(z,m,K),null==d.onListenerAdd?void 0:d.onListenerAdd(z))},{sync:d.sync,initial:!0});return B=W.makeHandle(()=>{C.remove();l()})};k.once=function(O,m){return t(O,null,m)};k.sync={sync:!0};k.syncAndInitial={sync:!0,initial:!0};k.watch=q;k.when=function(O,m,I={}){return r(O,m,I,P)};k.whenOnce=function(O,m){return t(O,
P,m)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/support/PromiseQueue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(k,e,W,U,p,D,x,q,r,t){k.PromiseQueue=function(P){function O(){var I=P.apply(this,arguments)||
this;I._tasks=[];I.running=!1;return I}e._inheritsLoose(O,P);var m=O.prototype;m.destroy=function(){this.cancelAll()};m.runTask=function(I){for(;!I.done&&this._process(I);)I.madeProgress()};m.push=function(I,d,l){this.running=!0;return new Promise((K,G)=>this._tasks.push(new A(K,G,I,d,l)))};m.unshift=function(I,d,l){this.running=!0;return new Promise((K,G)=>this._tasks.unshift(new A(K,G,I,d,l)))};m._process=function(I){if(0===this._tasks.length)return!1;const d=this._tasks.shift();try{const l=p.isAborted(d.signal);
if(l&&!d.abortCallback)d.reject(p.createAbortError());else{const K=l?d.abortCallback(p.createAbortError()):d.callback(I);p.isPromiseLike(K)?K.then(d.resolve,d.reject):d.resolve(K)}}catch(l){d.reject(l)}this.running=0<this._tasks.length;return!0};m.cancelAll=function(){const I=p.createAbortError();for(const d of this._tasks)if(d.abortCallback){const l=d.abortCallback(I);d.resolve(l)}else d.reject(I);this._tasks.length=0;this.running=!1};e._createClass(O,[{key:"length",get:function(){return this._tasks.length}}]);
return O}(U);W.__decorate([D.property()],k.PromiseQueue.prototype,"running",void 0);k.PromiseQueue=W.__decorate([t.subclass("esri.layers.support.PromiseQueue")],k.PromiseQueue);let A=function(P,O,m,I,d){this.resolve=P;this.reject=O;this.callback=m;this.signal=I;this.abortCallback=d};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,e,W,U,p,D,x,q){W=function(r){function t(){var A=r.apply(this,arguments)||this;A.SCHEDULER_LOG_SLOW_TASKS=!1;A.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return A}k._inheritsLoose(t,r);return t}(W);e.__decorate([U.property()],W.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);e.__decorate([U.property()],W.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);W=e.__decorate([q.subclass("esri.views.support.DebugFlags")],W);return new W})},"esri/layers/graphics/sources/geojson/geojson":function(){define(["exports",
"../../../../core/Error","../../OptimizedFeature","../../OptimizedGeometry","../../../support/fieldUtils"],function(k,e,W,U,p){function*D(G){switch(G.type){case "Feature":yield G;break;case "FeatureCollection":for(const u of G.features)u&&(yield u)}}function*x(G){if(!G)return null;switch(G.type){case "Point":yield G.coordinates;break;case "LineString":case "MultiPoint":yield*G.coordinates;break;case "MultiLineString":case "Polygon":for(const u of G.coordinates)yield*u;break;case "MultiPolygon":for(const u of G.coordinates)for(const B of u)yield*B}}
function*q(G,u={}){const {geometryType:B,objectIdField:C}=u;for(const M of G){var z;const {geometry:N,properties:da,id:F}=M;if(N&&K[N.type]!==B)continue;G=da||{};let H=null!=(z=G[C])?z:null;C&&null!=F&&!G[C]&&(G[C]=H=F);yield new W.OptimizedFeature(N?P(new U,N,u):null,G,null,H)}}function r(G){for(const u of G)if(2<u.length)return!0;return!1}function t(G){let u=0;for(let B=0;B<G.length;B++){const C=G[B],z=G[(B+1)%G.length];u+=C[0]*z[1]-z[0]*C[1]}return 0>=u}function A(G){const u=G[0],B=G[G.length-
1];u[0]===B[0]&&u[1]===B[1]&&u[2]===B[2]||G.push(u);return G}function P(G,u,B){switch(u.type){case "LineString":return I(G,u.coordinates,B),G;case "MultiLineString":for(const z of u.coordinates)I(G,z,B);return G;case "MultiPoint":return I(G,u.coordinates,B),G;case "MultiPolygon":for(var C of u.coordinates)for(O(G,C[0],B),u=1;u<C.length;u++)m(G,C[u],B);return G;case "Point":return l(G,u.coordinates,B),G;case "Polygon":C=u.coordinates;O(G,C[0],B);for(u=1;u<C.length;u++)m(G,C[u],B);return G}}function O(G,
u,B){u=A(u);t(u)?I(G,u,B):d(G,u,B)}function m(G,u,B){u=A(u);t(u)?d(G,u,B):I(G,u,B)}function I(G,u,B){for(const C of u)l(G,C,B);G.lengths.push(u.length)}function d(G,u,B){for(let C=u.length-1;0<=C;C--)l(G,u[C],B);G.lengths.push(u.length)}function l(G,u,B){const [C,z,M]=u;G.coords.push(C,z);B.hasZ&&G.coords.push(M||0)}const K={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};
k.createOptimizedFeatures=function(G,u){return Array.from(q(D(G),u))};k.getGeometryType=function(G){return K[G]};k.inferLayerProperties=function(G,u={}){const B=[];var C=new Set;const z=new Set;var M=!1;let N=null,da=!1,F=void 0;({geometryType:u=null}=u);var H=!1;for(const T of D(G)){const {geometry:ba,properties:J,id:w}=T;if(ba&&(u||(u=K[ba.type]),K[ba.type]!==u))continue;M||(M=x(ba),M=r(M));!da&&(da=null!=w)&&(F=typeof w,N=Object.keys(J).filter(c=>J[c]===w));da&&null!=w&&(1<N.length?N=N.filter(c=>
J[c]===w):1===N.length&&(N=J[N[0]]===w?N:[]));if(!H&&J){G=!0;for(const c in J)if(!C.has(c))if(H=J[c],null==H)G=!1,z.add(c);else{a:switch(typeof H){case "string":H="esriFieldTypeString";break a;case "number":H="esriFieldTypeDouble";break a;default:H="unknown"}"unknown"===H?z.add(c):(z.delete(c),C.add(c),B.push({name:c,alias:c,type:H}))}H=G}}if(C=N&&1===N.length&&N[0]||null)for(const T of B)if(T.name===C&&p.isNumericField(T)){T.type="esriFieldTypeOID";break}return{fields:B,geometryType:u,hasZ:M,objectIdFieldName:C,
objectIdFieldType:F,unknownFields:Array.from(z)}};k.validateGeoJSON=function(G){if(!G)throw new e("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==G.type&&"FeatureCollection"!==G.type)throw new e("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:G});({crs:G}=G);if(G){var u="string"===typeof G?G:"name"===G.type?G.properties.name:"EPSG"===G.type?G.properties.code:null,B=/.*(CRS84H?|4326)$/i;if(!u||!B.test(u))throw new e("geojson-layer:unsupported-crs",
"unsupported GeoJSON 'crs' member",{crs:G});}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define(["require","exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../geometry/support/spatialReferenceUtils","../../../support/fieldUtils"],function(k,e,W,U,p){function D(I){return new A(I)}function x(){return q.apply(this,arguments)}function q(){q=W._asyncToGenerator(function*(){return m?m:m=yield new Promise((I,d)=>k(["../../../../geometry/geometryEngineJSON"],
I,d))});return q.apply(this,arguments)}function r(){r=W._asyncToGenerator(function*(I,d){!U.isValid(I)||"esriGeometryPolygon"!==d&&"esriGeometryPolyline"!==d||(yield x())});return r.apply(this,arguments)}let t=function(){this.description=this.code=null},A=function(I){this.error=new t;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=I},P=function(I){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=I};const O=new Set;let m;e.createFeatureEditErrorResult=
D;e.createFeatureEditSuccessResult=function(I){return new P(I)};e.loadGeometryEngine=x;e.loadGeometryEngineForSimplify=function(I,d){return r.apply(this,arguments)};e.mixAttributes=function(I,d,l,K=!1,G){O.clear();for(const z in l){const M=I.get(z);if(M){var u=l[z];{var B=M;var C=u;let N=C;"string"===typeof C&&p.isNumericField(B)?N=parseFloat(C):null!=C&&p.isStringField(B)&&"string"!==typeof C&&(N=String(C));B=p.sanitizeNullFieldValue(N)}B!==u&&G&&G.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",
details:{field:M,originalValue:u,sanitizedValue:B}});O.add(M.name);if(M&&(K||M.editable)){if(u=p.validateFieldValue(M,B))return D(p.validationErrorToString(u,M,B));d[M.name]=B}}}for(const z of I.requiredFields)if(!O.has(z.name))return D(`missing required field "${z.name}"`);return null};e.simplify=function(I,d){if(!I||!U.isValid(d))return I;if("rings"in I||"paths"in I){if(!m)throw new TypeError("geometry engine not loaded");return m.simplify(d,I)}return I};Object.defineProperty(e,"__esModule",{value:!0})})},
"esri/layers/ogc/wfsUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/Error ../../core/iteratorUtils ../../core/maybe ../../core/promiseUtils ../../core/urlUtils ../../geometry/projection ../../geometry/support/spatialReferenceUtils ../../geometry/support/typeUtils ../graphics/sources/geojson/geojson ./dateUtils ./xmlUtils ../support/Field ../../geometry/SpatialReference ../../geometry/Extent".split(" "),function(k,e,W,U,p,D,x,q,r,t,A,
P,O,m,I,d,l,K){function G(){G=e._asyncToGenerator(function*(va,a){a=yield U(va,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetCapabilities",VERSION:"2.0.0",...null==a?void 0:a.customParameters},signal:null==a?void 0:a.signal});a=u(a.data);r.isHTTPSProtocol(va)&&(r.hasSameOrigin(va,a.operations.DescribeFeatureType.url,!0)&&(a.operations.DescribeFeatureType.url=r.toHTTPS(a.operations.DescribeFeatureType.url)),r.hasSameOrigin(va,a.operations.GetFeature.url,!0)&&(a.operations.GetFeature.url=r.toHTTPS(a.operations.GetFeature.url)));
return a});return G.apply(this,arguments)}function u(va){va=pa(va);Ca(va);Ka(va);va=va.firstElementChild;const a=D.cache(C(va));return{operations:B(va),get featureTypes(){return Array.from(a())},readFeatureTypes:a}}function B(va){let a=!1;const h={GetCapabilities:{url:""},DescribeFeatureType:{url:""},GetFeature:{url:"",outputFormat:null,supportsPagination:!1}};I.visitXML(va,{OperationsMetadata:{Operation:Y=>{switch(Y.getAttribute("name")){case "GetCapabilities":return{DCP:{HTTP:{Get:g=>{h.GetCapabilities.url=
g.getAttribute("xlink:href")}}}};case "DescribeFeatureType":return{DCP:{HTTP:{Get:g=>{h.DescribeFeatureType.url=g.getAttribute("xlink:href")}}}};case "GetFeature":return{DCP:{HTTP:{Get:g=>{h.GetFeature.url=g.getAttribute("xlink:href")}}},Parameter:g=>{if("outputFormat"===g.getAttribute("name"))return{AllowedValues:{Value:y=>{y=y.textContent;Ra.has(y.toLowerCase())&&(h.GetFeature.outputFormat=y)}}}}}}},Constraint:Y=>{switch(Y.getAttribute("name")){case "KVPEncoding":return{DefaultValue:g=>{a="true"===
g.textContent.toLowerCase()}};case "ImplementsResultPaging":return{DefaultValue:g=>{h.GetFeature.supportsPagination="true"===g.textContent.toLowerCase()}}}}}});if(!a)throw new p("wfs-layer:kvp-encoding-not-supported","WFS service doesn't support key/value pair (KVP) encoding");if(x.isNone(h.GetFeature.outputFormat))throw new p("wfs-layer:geojson-not-supported","WFS service doesn't support GeoJSON output format");return h}function C(va){return I.iterateXML(va,{FeatureTypeList:{FeatureType:a=>{const h=
{typeName:"undefined:undefined",name:"",title:"",description:"",extent:null,namespacePrefix:"",namespaceUri:"",supportedSpatialReferences:[]},Y=new Set([4326]),g=y=>{var S,V;y=parseInt(null==(S=y.textContent.match(/(?<wkid>\d+$)/i))?void 0:null==(V=S.groups)?void 0:V.wkid,10);Number.isNaN(y)||Y.add(y)};I.visitXML(a,{Name:y=>{const {name:S,prefix:V}=wa(y.textContent);h.typeName=`${V}:${S}`;h.name=S;h.namespacePrefix=V;h.namespaceUri=y.lookupNamespaceURI(V)},Abstract:y=>{h.description=y.textContent},
Title:y=>{h.title=y.textContent},WGS84BoundingBox:y=>{h.extent=z(y)},DefaultSRS:g,DefaultCRS:g,OtherSRS:g,OtherCRS:g});h.title||(h.title=h.name);h.supportedSpatialReferences.push(...Y);return h}}})}function z(va){let a,h,Y,g;for(const y of va.children)switch(y.localName){case "LowerCorner":[a,h]=y.textContent.split(" ").map(S=>Number.parseFloat(S));break;case "UpperCorner":[Y,g]=y.textContent.split(" ").map(S=>Number.parseFloat(S))}return{xmin:a,ymin:h,xmax:Y,ymax:g,spatialReference:A.WGS84}}function M(va,
a,h){return D.find(va,Y=>h?Y.name===a&&Y.namespaceUri===h:Y.typeName===a||Y.name===a)}function N(){N=e._asyncToGenerator(function*(va,a,h,Y={}){var g;const {featureType:y,extent:S}=yield da(va,a,h,Y),{fields:V,geometryType:fa,swapXY:ha,objectIdField:L,geometryField:R}=yield H(va,y.typeName,Y);return{url:va.operations.GetCapabilities.url,name:y.name,namespaceUri:y.namespaceUri,fields:V,geometryField:R,geometryType:fa,objectIdField:L,spatialReference:null!=(g=Y.spatialReference)?g:l.WGS84,extent:S,
swapXY:ha,wfsCapabilities:va,customParameters:Y.customParameters}});return N.apply(this,arguments)}function da(va,a,h){return F.apply(this,arguments)}function F(){F=e._asyncToGenerator(function*(va,a,h,Y={}){const {spatialReference:g=l.WGS84}=Y;va=va.readFeatureTypes();h=a?M(va,a,h):va.next().value;if(x.isNone(h)){if(a)throw new p("wfs-layer:feature-type-not-found",`The type '${a}' could not be found in the service`);throw new p("wfs-layer:empty-service","The service is empty");}a=new K({...h.extent,
spatialReference:g});if(!A.equals(g,A.WGS84))try{yield t.initializeProjection(A.WGS84,g,void 0,Y),a=t.project(a,A.WGS84)}catch{throw new p("wfs-layer:unsupported-spatial-reference","Projection not supported");}return{extent:a,spatialReference:g,featureType:h}});return F.apply(this,arguments)}function H(va,a){return T.apply(this,arguments)}function T(){T=e._asyncToGenerator(function*(va,a,h={}){const [Y,g]=yield q.eachAlways([c(va.operations.DescribeFeatureType.url,a,h),J(va,a,h)]);if(Y.error||g.error)throw new p("wfs-layer:getWFSLayerTypeInfo-error",
`An error occurred while getting info about the feature type '${a}'`,{error:Y.error||g.error});const {fields:y,errors:S}=Y.value;va=Y.value.geometryType||g.value.geometryType;h=g.value.swapXY;if(x.isNone(va))throw new p("wfs-layer:unknown-geometry-type",`The geometry type could not be determined for type '${a}`,{typeName:a,geometryType:va,fields:y,errors:S});return{...ba(y),geometryType:va,swapXY:h}});return T.apply(this,arguments)}function ba(va){var a;const h=va.find(g=>"geometry"===g.type);let Y=
va.find(g=>"oid"===g.type);va=va.filter(g=>"geometry"!==g.type);Y||(Y=new d({name:"__esri_wfs_id__",type:"oid",alias:"__esri_wfs_id__"}),va.unshift(Y));return{geometryField:null!=(a=null==h?void 0:h.name)?a:null,objectIdField:Y.name,fields:va}}function J(va,a){return w.apply(this,arguments)}function w(){w=e._asyncToGenerator(function*(va,a,h={}){var Y;let g,y=!1;const [S,V]=yield Promise.all([ja(va.operations.GetFeature.url,a,va.operations.GetFeature.outputFormat,{...h,count:1}),U(va.operations.GetFeature.url,
{responseType:"text",query:ma(a,void 0,{...h,count:1}),signal:null==h?void 0:h.signal})]);if(va="FeatureCollection"===S.type&&(null==(Y=S.features[0])?void 0:Y.geometry)){g=P.featureGeometryTypeKebabDictionary.fromJSON(O.getGeometryType(va.type));switch(va.type){case "Point":var fa=va.coordinates;break;case "LineString":case "MultiPoint":fa=va.coordinates[0];break;case "MultiLineString":case "Polygon":fa=va.coordinates[0][0];break;case "MultiPolygon":fa=va.coordinates[0][0][0]}if(va=/<[^>]*pos[^>]*> *(-?\d+(?:\.\d+)?) (-?\d+(?:\.\d+)?)/.exec(V.data))Y=
fa[0].toFixed(3),fa=fa[1].toFixed(3),a=parseFloat(va[1]).toFixed(3),va=parseFloat(va[2]).toFixed(3),Y===va&&fa===a&&(y=!0)}return{geometryType:g,swapXY:y}});return w.apply(this,arguments)}function c(va,a,h){return n.apply(this,arguments)}function n(){n=e._asyncToGenerator(function*(va,a,h){va=yield U(va,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"DescribeFeatureType",VERSION:"2.0.0",TYPENAME:a,...null==h?void 0:h.customParameters},signal:null==h?void 0:h.signal});return Q(a,va.data)});return n.apply(this,
arguments)}function Q(va,a){const {name:h}=wa(va);a=pa(a);Ka(a);const Y=D.find(I.iterateXML(a.firstElementChild,{element:g=>({name:g.getAttribute("name"),typeName:wa(g.getAttribute("type")).name})}),({name:g})=>g===h);if(x.isSome(Y)){const g=D.find(I.iterateXML(a.firstElementChild,{complexType:y=>y}),y=>y.getAttribute("name")===Y.typeName);if(x.isSome(g))return Z(g)}throw new p("wfs-layer:feature-type-not-found",`Type '${va}' not found in document`,{document:(new XMLSerializer).serializeToString(a)});
}function Z(va){var a,h;const Y=[],g=[];let y;var S=I.iterateXML(va,{complexContent:{extension:{sequence:{element:V=>V}}}});for(const V of S){S=V.getAttribute("name");if(!S)continue;let fa,ha;V.hasAttribute("type")?fa=wa(V.getAttribute("type")).name:I.visitXML(V,{simpleType:{restriction:ea=>{fa=wa(ea.getAttribute("base")).name;return{maxLength:qa=>{ha=+qa.getAttribute("value")}}}}});if(!fa)continue;const L="true"===V.getAttribute("nillable");let R=!1;switch(fa.toLowerCase()){case "integer":case "nonpositiveinteger":case "negativeinteger":case "long":case "int":case "short":case "byte":case "nonnegativeinteger":case "unsignedlong":case "unsignedint":case "unsignedshort":case "unsignedbyte":case "positiveinteger":g.push(new d({name:S,
alias:S,type:"integer",nullable:L}));break;case "float":case "double":case "decimal":g.push(new d({name:S,alias:S,type:"double",nullable:L}));break;case "boolean":case "string":case "gyearmonth":case "gyear":case "gmonthday":case "gday":case "gmonth":case "anyuri":case "qname":case "notation":case "normalizedstring":case "token":case "language":case "idrefs":case "entities":case "nmtoken":case "nmtokens":case "name":case "ncname":case "id":case "idref":case "entity":case "duration":case "time":g.push(new d({name:S,
alias:S,type:"string",nullable:L,length:null!=(a=ha)?a:255}));break;case "datetime":case "date":g.push(new d({name:S,alias:S,type:"date",nullable:L,length:null!=(h=ha)?h:36}));break;case "pointpropertytype":y="point";R=!0;break;case "multipointpropertytype":y="multipoint";R=!0;break;case "curvepropertytype":case "multicurvepropertytype":case "multilinestringpropertytype":y="polyline";R=!0;break;case "surfacepropertytype":case "multisurfacepropertytype":case "multipolygonpropertytype":y="polygon";
R=!0;break;case "geometrypropertytype":case "multigeometrypropertytype":R=!0;Y.push(new p("wfs-layer:unknown-geometry-type",`geometry type '${fa}' is not supported`,{type:(new XMLSerializer).serializeToString(va)}));break;default:Y.push(new p("wfs-layer:unknown-field-type",`Unknown field type '${fa}'`,{type:(new XMLSerializer).serializeToString(va)}))}R&&g.push(new d({name:S,alias:S,type:"geometry",nullable:L}))}for(const V of g)if("integer"===V.type&&!V.nullable&&Pa.has(V.name.toLowerCase())){V.type=
"oid";break}return{geometryType:y,fields:g,errors:Y}}function ja(va,a,h,Y){return oa.apply(this,arguments)}function oa(){oa=e._asyncToGenerator(function*(va,a,h,Y){({data:va}=yield U(va,{responseType:"text",query:ma(a,h,Y),signal:null==Y?void 0:Y.signal}));va=va.replace(/": +(-?\d+),(\d+)(,)?/g,'": $1.$2$3');try{var g;if(null!=Y&&null!=(g=Y.dateFields)&&g.length){const y=new Set(Y.dateFields);return JSON.parse(va,(S,V)=>y.has(S)?m.parseDate(V):V)}return JSON.parse(va)}catch(y){throw new p("wfs-layer:malformed-json",
"Error while parsing the\u00a0response",{response:va,error:y});}});return oa.apply(this,arguments)}function ma(va,a,h){return{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:"2.0.0",TYPENAMES:va,OUTPUTFORMAT:a,SRSNAME:"EPSG:4326",STARTINDEX:null==h?void 0:h.startIndex,COUNT:null==h?void 0:h.count,...null==h?void 0:h.customParameters}}function la(){la=e._asyncToGenerator(function*(va,a,h){va=yield U(va,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:"2.0.0",TYPENAMES:a,RESULTTYPE:"hits",
...null==h?void 0:h.customParameters},signal:null==h?void 0:h.signal});va=pa(va.data);Ka(va);va=Number.parseFloat(va.firstElementChild.getAttribute("numberMatched"));return Number.isNaN(va)?0:va});return la.apply(this,arguments)}function pa(va){return(new DOMParser).parseFromString(va.trim(),"text/xml")}function wa(va){const [a,h]=va.split(":");return{prefix:h?a:"",name:null!=h?h:a}}function Ca(va){if((va=va.firstElementChild.getAttribute("version"))&&"2.0.0"!==va)throw new p("wfs-layer:unsupported-wfs-version",
`Unsupported WFS version ${va}. Supported version: ${"2.0.0"}`);}function Ka(va){let a,h;I.visitXML(va.firstElementChild,{Exception:Y=>{a=Y.getAttribute("exceptionCode");return{ExceptionText:g=>{h=g.textContent}}}});if(a)throw new p(`wfs-layer:${a}`,h);}const Ra=new Set(["json","application/json","geojson","application/json; subtype\x3dgeojson"]),Pa=new Set(["objectid","fid"]);k.WFS_OID_FIELD_NAME="__esri_wfs_id__";k.describeFeatureType=c;k.findFeatureType=M;k.getCapabilities=function(va,a){return G.apply(this,
arguments)};k.getFeature=ja;k.getFeatureCount=function(va,a,h){return la.apply(this,arguments)};k.getFeatureTypeInfo=da;k.getWFSLayerInfo=function(va,a,h){return N.apply(this,arguments)};k.parseDescribeFeatureTypeResponse=Q;k.parseGetCapabilitiesResponse=u;k.prepareWFSLayerFields=ba;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/iteratorUtils":function(){define(["exports"],function(k){k.cache=function(e){const W=[];return function*(){yield*W;for(const U of e)W.push(U),yield U}};k.find=
function(e,W){for(const U of e)if(null!=U&&W(U))return U};k.isIterable=function(e){return null!=e&&"function"===typeof e[Symbol.iterator]};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/ogc/dateUtils":function(){define(["exports"],function(k){function e(U){U=(new Date(U)).getTime();return Number.isNaN(U)?null:U}const W=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/;
k.parseDate=function(U){var p;var D,x,q,r=W.exec(U);if(r){r=r.groups;var t=+r.year,A=+r.month-1,P=+r.day,O=+(null!=(D=r.hours)?D:0);D=+(null!=(x=r.minutes)?x:0);x=+(null!=(q=r.seconds)?q:0);if(23<O||59<D||59<x)var m=null;else m=(q=null!=(m=r.ms)?m:"0")?+q.padEnd(3,"0").substring(0,3):0,m=r.isUTC?Date.UTC(t,A,P,O,D,x,m):r.offsetSign?6E4*("+"===r.offsetSign?-1:1)*(60*+r.offsetHours+ +r.offsetMinutes)+Date.UTC(t,A,P,O,D,x,m):(new Date(t,A,P,O,D,x,m)).getTime(),m=Number.isNaN(m)?null:m}else m=null;return null!=
(p=m)?p:e(U)};k.parseJSDate=e;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/ogc/xmlUtils":function(){define(["exports"],function(k){function e(U,p){for(const D of U.children)D.localName in p&&(U=p[D.localName],"function"===typeof U?(U=U(D))&&e(D,U):e(D,U))}function*W(U,p){for(const D of U.children)D.localName in p&&(U=p[D.localName],"function"===typeof U?yield U(D):yield*W(D,U))}k.iterateXML=W;k.visitXML=e;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/support/Field":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./domains ./fieldType".split(" "),
function(k,e,W,U,p,D,x,q,r,t,A,P,O){var m;const I=new W.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});W=m=function(d){function l(G){G=d.call(this,G)||this;
G.alias=null;G.defaultValue=void 0;G.description=null;G.domain=null;G.editable=!0;G.length=-1;G.name=null;G.nullable=!0;G.type=null;G.valueType=null;return G}k._inheritsLoose(l,d);var K=l.prototype;K.readDescription=function(G,{description:u}){let B;try{B=JSON.parse(u)}catch(C){}return B?B.value:null};K.readValueType=function(G,{description:u}){let B;try{B=JSON.parse(u)}catch(C){}return B?I.fromJSON(B.fieldValueType):null};K.clone=function(){return new m({alias:this.alias,defaultValue:this.defaultValue,
description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})};return l}(U.JSONSupport);e.__decorate([p.property({type:String,json:{write:!0}})],W.prototype,"alias",void 0);e.__decorate([p.property({type:[String,Number],json:{write:{allowNull:!0}}})],W.prototype,"defaultValue",void 0);e.__decorate([p.property()],W.prototype,"description",void 0);e.__decorate([t.reader("description")],
W.prototype,"readDescription",null);e.__decorate([p.property({types:P.types,json:{read:{reader:P.fromJSON},write:!0}})],W.prototype,"domain",void 0);e.__decorate([p.property({type:Boolean,json:{write:!0}})],W.prototype,"editable",void 0);e.__decorate([p.property({type:q.Integer,json:{write:!0}})],W.prototype,"length",void 0);e.__decorate([p.property({type:String,json:{write:!0}})],W.prototype,"name",void 0);e.__decorate([p.property({type:Boolean,json:{write:!0}})],W.prototype,"nullable",void 0);e.__decorate([r.enumeration(O.kebabDict)],
W.prototype,"type",void 0);e.__decorate([p.property()],W.prototype,"valueType",void 0);e.__decorate([t.reader("valueType",["description"])],W.prototype,"readValueType",null);return W=m=e.__decorate([A.subclass("esri.layers.support.Field")],W)})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),function(k,e,W,U,p,D){e={key:"type",base:U,typeMap:{range:D,"coded-value":W,inherited:p}};k.CodedValueDomain=W;
k.DomainBase=U;k.InheritedDomain=p;k.RangeDomain=D;k.fromJSON=function(x){if(!x||!x.type)return null;switch(x.type){case "range":return D.fromJSON(x);case "codedValue":return W.fromJSON(x);case "inherited":return p.fromJSON(x)}return null};k.types=e;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(k,e,W,U,p,D,x,q,r){var t;p=t=function(A){function P(m){m=A.call(this,m)||this;m.codedValues=null;m.type="coded-value";return m}k._inheritsLoose(P,A);var O=P.prototype;O.getName=function(m){let I=null;if(this.codedValues){const d=String(m);this.codedValues.some(l=>{String(l.code)===d&&(I=l.name);return!!I})}return I};O.clone=function(){return new t({codedValues:W.clone(this.codedValues),name:this.name})};return P}(r);e.__decorate([U.property({type:[q.default],json:{write:!0}})],p.prototype,
"codedValues",void 0);e.__decorate([D.enumeration({codedValue:"coded-value"})],p.prototype,"type",void 0);return p=t=e.__decorate([x.subclass("esri.layers.support.CodedValueDomain")],p)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,e,W,U,p,D,x,q,r){var t;k.CodedValue=t=function(A){function P(O){O=A.call(this,O)||this;O.name=null;O.code=null;return O}e._inheritsLoose(P,A);P.prototype.clone=function(){return new t({name:this.name,code:this.code})};return P}(U.JSONSupport);W.__decorate([p.property({type:String,json:{write:!0}})],k.CodedValue.prototype,"name",void 0);W.__decorate([p.property({type:[String,Number],json:{write:!0}})],k.CodedValue.prototype,"code",void 0);k.CodedValue=t=W.__decorate([r.subclass("esri.layers.support.CodedValue")],
k.CodedValue);k.default=k.CodedValue;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),function(k,e,W,U,p,D,x,q,r,t){W=
new W.JSONMap({inherited:"inherited",codedValue:"coded-value",range:"range"});U=function(A){function P(O){O=A.call(this,O)||this;O.name=null;O.type=null;return O}k._inheritsLoose(P,A);return P}(U.JSONSupport);e.__decorate([p.property({type:String,json:{write:!0}})],U.prototype,"name",void 0);e.__decorate([r.enumeration(W)],U.prototype,"type",void 0);return U=e.__decorate([t.subclass("esri.layers.support.Domain")],U)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/set ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(k,e,W,U,p,D,x,q,r,t){var A;W=A=function(P){function O(m){m=P.call(this,m)||this;m.type="inherited";return m}k._inheritsLoose(O,P);O.prototype.clone=function(){return new A};return O}(t);e.__decorate([q.enumeration({inherited:"inherited"})],W.prototype,"type",void 0);return W=A=e.__decorate([r.subclass("esri.layers.support.InheritedDomain")],W)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(k,e,W,U,p,D,x,q,r){var t;U=t=function(A){function P(O){O=A.call(this,O)||this;O.maxValue=null;O.minValue=null;O.type="range";return O}k._inheritsLoose(P,A);P.prototype.clone=function(){return new t({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return P}(r);e.__decorate([W.property({type:Number,json:{type:[Number],read:{source:"range",reader(A,P){return P.range&&P.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",
writer(A,P,O){P[O]=[this.minValue||0,A]}}}})],U.prototype,"maxValue",void 0);e.__decorate([W.property({type:Number,json:{type:[Number],read:{source:"range",reader(A,P){return P.range&&P.range[0]}},write:{target:"range",writer(A,P,O){P[O]=[A,this.maxValue||0]}}}})],U.prototype,"minValue",void 0);e.__decorate([x.enumeration({range:"range"})],U.prototype,"type",void 0);return U=t=e.__decorate([q.subclass("esri.layers.support.RangeDomain")],U)})},"esri/layers/support/fieldType":function(){define(["exports",
"../../core/jsonMap"],function(k,e){e=new e.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});k.kebabDict=e;Object.defineProperty(k,"__esModule",
{value:!0})})},"*noref":1}});
define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../data/FeatureStore ../data/projectionSupport ../data/QueryEngine ./geojson/geojson ./support/sourceUtils ../../ogc/wfsUtils ../../support/FieldsIndex".split(" "),function(k,e,W,U,p,D,x,q,r,t,A,P,O,m){return function(){function I(){var l=this;this._customParameters=this._queryEngine=null;
this._snapshotFeatures=function(){var K=k._asyncToGenerator(function*(G){const {objectIdField:u}=l._queryEngine;var B=yield O.getFeature(l._getFeatureUrl,l._featureType.typeName,l._getFeatureOutputFormat,{customParameters:l._customParameters,dateFields:l._queryEngine.fieldsIndex.dateFields.map(z=>z.name),signal:G});yield A.validateGeoJSON(B);p.throwIfAborted(G);G=A.createOptimizedFeatures(B,{geometryType:l._queryEngine.geometryType,hasZ:!1,objectIdField:u});if(!D.equals(l._queryEngine.spatialReference,
D.WGS84))for(var C of G)U.isSome(C.geometry)&&(C.geometry=x.convertFromGeometry(r.project(x.convertToGeometry(C.geometry,l._queryEngine.geometryType,!1,!1),D.WGS84,l._queryEngine.spatialReference)));C=1;for(const z of G)B={},P.mixAttributes(l._fieldsIndex,B,z.attributes,!0),z.attributes=B,null==z.attributes[u]&&(z.objectId=z.attributes[u]=C++);return G});return function(G){return K.apply(this,arguments)}}()}var d=I.prototype;d.destroy=function(){var l;null==(l=this._queryEngine)?void 0:l.destroy();
this._queryEngine=null};d.load=function(){var l=k._asyncToGenerator(function*(K,G){const {getFeatureUrl:u,getFeatureOutputFormat:B,spatialReference:C,fields:z,geometryType:M,featureType:N,objectIdField:da,customParameters:F}=K;this._featureType=N;this._customParameters=F;this._getFeatureUrl=u;this._getFeatureOutputFormat=B;this._fieldsIndex=new m(z);yield this._checkProjection(C);p.throwIfAborted(G);this._queryEngine=new t.default({fields:z,geometryType:M,hasM:!1,hasZ:!1,objectIdField:da,spatialReference:C,
timeInfo:null,featureStore:new q({geometryType:M,hasM:!1,hasZ:!1})});K=yield this._snapshotFeatures(U.unwrap(G.signal));this._queryEngine.featureStore.addMany(K);return{extent:this._queryEngine.fullExtent}});return function(K,G){return l.apply(this,arguments)}}();d.applyEdits=function(){var l=k._asyncToGenerator(function*(){throw new e("wfs-source:editing-not-supported","applyEdits() is not supported on WFSLayer");});return function(){return l.apply(this,arguments)}}();d.queryFeatures=function(){var l=
k._asyncToGenerator(function*(K={},G={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQuery(K,G.signal)});return function(){return l.apply(this,arguments)}}();d.queryFeatureCount=function(){var l=k._asyncToGenerator(function*(K={},G={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(K,G.signal)});return function(){return l.apply(this,arguments)}}();d.queryObjectIds=function(){var l=k._asyncToGenerator(function*(K={},G={}){yield this._waitSnapshotComplete();
return this._queryEngine.executeQueryForIds(K,G.signal)});return function(){return l.apply(this,arguments)}}();d.queryExtent=function(){var l=k._asyncToGenerator(function*(K={},G={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(K,G.signal)});return function(){return l.apply(this,arguments)}}();d.querySnapping=function(){var l=k._asyncToGenerator(function*(K,G={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForSnapping(K,G.signal)});
return function(K){return l.apply(this,arguments)}}();d.refresh=function(){var l=k._asyncToGenerator(function*(K){var G;this._customParameters=K;null==(G=this._snapshotTask)?void 0:G.abort();this._snapshotTask=p.createTask(this._snapshotFeatures);this._snapshotTask.promise.then(u=>{this._queryEngine.featureStore.clear();u&&this._queryEngine.featureStore.addMany(u)},u=>{this._queryEngine.featureStore.clear();p.isAbortError(u)||W.getLogger("esri.layers.WFSLayer").error(new e("wfs-layer:getfeature-error",
"An error occurred during the GetFeature request",{error:u}))});yield this._waitSnapshotComplete();return{extent:this._queryEngine.fullExtent}});return function(K){return l.apply(this,arguments)}}();d._waitSnapshotComplete=function(){var l=k._asyncToGenerator(function*(){if(this._snapshotTask&&!this._snapshotTask.finished){try{yield this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}});return function(){return l.apply(this,arguments)}}();d._checkProjection=function(){var l=k._asyncToGenerator(function*(K){try{yield r.checkProjectionSupport(D.WGS84,
K)}catch{throw new e("unsupported-projection","Projection not supported",{spatialReference:K});}});return function(K){return l.apply(this,arguments)}}();return I}()});