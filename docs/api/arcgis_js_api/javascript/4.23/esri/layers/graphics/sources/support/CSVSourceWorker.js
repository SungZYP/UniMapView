// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(k,e,Y){function Z(w){w||(w=Y.getLocale());let E=w in q;if(!E){const h=w.split("-");1<h.length&&h[0]in q&&(w=h[0],E=!0);E||(w="en")}const [g,x,c="#,##0.###"]=q[w];return{decimal:g,group:x,pattern:c}}function t(w,E,g){g=g||{};!0===g.places&&(g.places=0);Infinity===g.places&&(g.places=6);E=E.split(".");var x="string"===typeof g.places&&g.places.indexOf(","),c=g.places;x?c=g.places.substring(x+1):0<=
c||(c=(E[1]||[]).length);0>g.round||(w=Number(w.toFixed(Number(c))));w=String(Math.abs(w)).split(".");const h=w[1]||"";E[1]||g.places?(x&&(g.places=g.places.substring(0,x)),x=void 0!==g.places?g.places:E[1]&&E[1].lastIndexOf("0")+1,x>h.length&&(w[1]=h.padEnd(Number(x),"0")),c<h.length&&(w[1]=h.substr(0,Number(c)))):w[1]&&w.pop();c=E[0].replace(",","");x=c.indexOf("0");-1!==x&&(x=c.length-x,x>w[0].length&&(w[0]=w[0].padStart(x,"0")),-1===c.indexOf("#")&&(w[0]=w[0].substr(w[0].length-x)));c=E[0].lastIndexOf(",");
let L,V;-1!==c&&(L=E[0].length-c-1,E=E[0].substr(0,c),c=E.lastIndexOf(","),-1!==c&&(V=E.length-c-1));E=[];for(c=w[0];c;)x=c.length-L,E.push(0<x?c.substr(x):c),c=0<x?c.slice(0,x):"",V&&(L=V,V=void 0);w[0]=E.reverse().join(g.group||",");return w.join(g.decimal||".")}function I(w){w=w||{};var E=Z(w.locale);const g=w.pattern||E.pattern,x=E.group,c=E.decimal;let h=1;if(-1!==g.indexOf("%"))h/=100;else if(-1!==g.indexOf("\u2030"))h/=1E3;else if(-1!==g.indexOf("\u00a4"))throw Error("currency notation not supported");
E=g.split(";");1===E.length&&E.push("-"+E[0]);return{regexp:B(E,function(L){L="(?:"+e.escapeRegExpString(L,".")+")";return L.replace(r,function(V){const z={signed:!1,separator:w.strict?x:[x,""],fractional:w.fractional,decimal:c,exponent:!1};V=V.split(".");let N=w.places;1===V.length&&1!==h&&(V[1]="###");1===V.length||0===N?z.fractional=!1:(void 0===N&&(N=w.pattern?V[1].lastIndexOf("0")+1:Infinity),N&&null==w.fractional&&(z.fractional=!0),!w.places&&N<V[1].length&&(N+=","+V[1].length),z.places=N);
V=V[0].split(",");1<V.length&&(z.groupSize=V.pop().length,1<V.length&&(z.groupSize2=V.pop().length));return"("+y(z)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:x,decimal:c,factor:h}}function y(w){w=w||{};"places"in w||(w.places=Infinity);"string"!==typeof w.decimal&&(w.decimal=".");"fractional"in w&&!/^0/.test(String(w.places))||(w.fractional=[!0,!1]);"exponent"in w||(w.exponent=[!0,!1]);"eSigned"in w||(w.eSigned=[!0,!1]);var E=n(w);const g=B(w.fractional,function(c){let h="";c&&0!==w.places&&
(h="\\"+w.decimal,h=Infinity===w.places?"(?:"+h+"\\d+)?":h+("\\d{"+w.places+"}"));return h},!0),x=B(w.exponent,function(c){return c?"([eE]"+n({signed:w.eSigned})+")":""});E+=g;g&&(E="(?:(?:"+E+")|(?:"+g+"))");return E+x}function n(w){w=w||{};"signed"in w||(w.signed=[!0,!1]);"separator"in w?"groupSize"in w||(w.groupSize=3):w.separator="";const E=B(w.signed,function(x){return x?"[-+]":""},!0),g=B(w.separator,function(x){if(!x)return"(?:\\d+)";x=e.escapeRegExpString(x);" "===x?x="\\s":"\u00a0"===x&&
(x="\\s\\xa0");const c=w.groupSize,h=w.groupSize2;return h?(x="(?:0|[1-9]\\d{0,"+(h-1)+"}(?:["+x+"]\\d{"+h+"})*["+x+"]\\d{"+c+"})",0<c-h?"(?:"+x+"|(?:0|[1-9]\\d{0,"+(c-1)+"}))":x):"(?:0|[1-9]\\d{0,"+(c-1)+"}(?:["+x+"]\\d{"+c+"})*)"},!0);return E+g}const q={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],
"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},r=/[#0,]*[#0](?:\.0*#*)?/,B=function(w,
E,g){if(!(w instanceof Array))return E(w);const x=[];for(let c=0;c<w.length;c++)x.push(E(w[c]));w=x.join("|");return"("+(g?"?:":"")+w+")"};k._parseInfo=I;k.format=function(w,E){E={...E};var g=Z(E.locale);E.customs=g;var x=E.pattern||g.pattern;if(isNaN(w)||Infinity===Math.abs(w))return null;{E=E||{};g=E.customs.group;const h=E.customs.decimal;x=x.split(";");var c=x[0];x=x[0>w?1:0]||"-"+c;if(-1!==x.indexOf("%"))w*=100;else if(-1!==x.indexOf("\u2030"))w*=1E3;else{if(-1!==x.indexOf("\u00a4"))throw Error("currency notation not supported");
if(-1!==x.indexOf("E"))throw Error("exponential notation not supported");}const L=r;c=c.match(L);if(!c)throw Error("unable to find a number expression in pattern: "+x);!1===E.fractional&&(E.places=0);w=x.replace(L,t(w,c[0],{decimal:h,group:g,places:E.places,round:E.round}))}return w};k.getCustoms=Z;k.parse=function(w,E){E=I(E);w=(new RegExp("^"+E.regexp+"$")).exec(w);if(!w)return NaN;let g=w[1];if(!w[1]){if(!w[2])return NaN;g=w[2];E.factor*=-1}g=g.replace(new RegExp("["+E.group+"\\s\\xa0]","g"),"").replace(E.decimal,
".");return Number(g)*E.factor};k.regexp=function(w){return I(w).regexp};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/intl/locale":function(){define(["exports"],function(k){function e(){var x,c;return null!=(x=null!=B?B:null==(c=globalThis.navigator)?void 0:c.language)?x:"en"}function Y(){void 0===r&&(r=e());return r}function Z(x=Y()){x=/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(x);return null==x?void 0:x[1].toLowerCase()}function t(){var x;const c=null!=(x=q)?x:e();r!==c&&(r=c,[...g].forEach(h=>
{h.call(null,c)}),[...E].forEach(h=>{h.call(null,c)}))}var I,y,n;let q=void 0,r=void 0;const B=null!=(I=null==(y=globalThis.esriConfig)?void 0:y.locale)?I:null==(n=globalThis.dojoConfig)?void 0:n.locale,w={he:!0,ar:!0},E=[],g=[];null==globalThis.addEventListener?void 0:globalThis.addEventListener("languagechange",t);k.beforeLocaleChange=function(x){g.push(x);return{remove(){E.splice(g.indexOf(x),1)}}};k.getDefaultLocale=e;k.getLanguage=Z;k.getLocale=Y;k.onLocaleChange=function(x){E.push(x);return{remove(){E.splice(E.indexOf(x),
1)}}};k.prefersRTL=function(x=Y()){x=Z(x);return void 0!==x&&(w[x]||!1)};k.setLocale=function(x){q=x?x:void 0;t()};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(k,e,Y,Z,t,I,y,n,q,r,B,w,E,g,x,c,h,L,V,z,N,K,F,M,P){function ca(){return!!Sa&&g.isLoaded()}function C(U){I.isNone($a)&&($a=Promise.all([g.load(),(new Promise((ja,ba)=>k(["../chunks/geometryEngineBase"],ja,ba))).then(ja=>ja.geometryEngineBase),new Promise((ja,ba)=>k(["./geometryAdapters/hydrated"],ja,ba))]));return $a.then(([,ja,{hydratedAdapter:ba}])=>{y.throwIfAborted(U);a=ba;Sa=ja.default;Sa._enableProjection(g.pe)})}function G(U,ja,ba=null){return Array.isArray(U)?0===U.length?[]:R(a,U,
U[0].spatialReference,ja,ba):R(a,[U],U.spatialReference,ja,ba)[0]}function R(U,ja,ba,pa,ya=null){if(I.isNone(ba)||I.isNone(pa))return ja;if(H(ba,pa,ya))return ja.map(Aa=>I.unwrap(d(Aa,ba,pa)));if(I.isNone(ya)){const Aa=K.cacheKey(ba,pa);void 0!==Ta[Aa]?ya=Ta[Aa]:(ya=aa(ba,pa,null),I.isNone(ya)&&(ya=new K),Ta[Aa]=ya)}if(I.isNone(Sa))throw new pb;return Sa._project(U,ja,ba,pa,ya)}function aa(U,ja,ba=null){if(I.isNone(Sa))throw new pb;if(I.isNone(U)||I.isNone(ja))return null;U=Sa._getTransformation(a,
U,ja,ba,null==ba?void 0:ba.spatialReference);return null!==U?K.fromGE(U):null}function H(U,ja,ba){return ba?!1:F.equals(U,ja)?!0:F.isValid(U)&&F.isValid(ja)&&!!ta(U,ja,Pb)}function v(){v=Y._asyncToGenerator(function*(U,ja,ba,pa){if(!ca())if(Array.isArray(U))for(const {source:ya,dest:Aa,geographicTransformation:Ka}of U){if(!H(ya,Aa,Ka))return C(pa)}else if(!H(U,ja,ba))return C(pa)});return v.apply(this,arguments)}function d(U,ja,ba){return U?"x"in U?m(U,ja,new x,ba,0):"xmin"in U?oa(U,ja,new w,ba,0):
"rings"in U?ka(U,ja,new c,ba,0):"paths"in U?W(U,ja,new h,ba,0):"points"in U?O(U,ja,new E,ba,0):null:null}function m(U,ja,ba,pa,ya){Qa[0]=U.x;Qa[1]=U.y;const Aa=U.z;Qa[2]=void 0!==Aa?Aa:ya;if(!qa(Qa,ja,0,Qa,pa,0,1))return null;ba.x=Qa[0];ba.y=Qa[1];ba.spatialReference=pa;void 0===Aa?(ba.z=void 0,ba.hasZ=!1):(ba.z=Qa[2],ba.hasZ=!0);void 0===U.m?(ba.m=void 0,ba.hasM=!1):(ba.m=U.m,ba.hasM=!0);return ba}function O(U,ja,ba,pa,ya){const {points:Aa,hasZ:Ka,hasM:Ma}=U;U=[];const Xa=Aa.length,Wa=[];for(var Va of Aa)Wa.push(Va[0],
Va[1],Ka?Va[2]:ya);if(!qa(Wa,ja,0,Wa,pa,0,Xa))return null;for(ja=0;ja<Xa;++ja){ya=3*ja;Va=Wa[ya];const cb=Wa[ya+1];Ka&&Ma?U.push([Va,cb,Wa[ya+2],Aa[ja][3]]):Ka?U.push([Va,cb,Wa[ya+2]]):Ma?U.push([Va,cb,Aa[ja][2]]):U.push([Va,cb])}ba.points=U;ba.spatialReference=pa;ba.hasZ=Ka;ba.hasM=Ma;return ba}function W(U,ja,ba,pa,ya){const {paths:Aa,hasZ:Ka,hasM:Ma}=U;U=[];if(!wa(Aa,Ka,Ma,ja,U,pa,ya))return null;ba.paths=U;ba.spatialReference=pa;ba.hasZ=Ka;ba.hasM=Ma;return ba}function ka(U,ja,ba,pa,ya){const {rings:Aa,
hasZ:Ka,hasM:Ma}=U;U=[];if(!wa(Aa,Ka,Ma,ja,U,pa,ya))return null;ba.rings=U;ba.spatialReference=pa;ba.hasZ=Ka;ba.hasM=Ma;return ba}function oa(U,ja,ba,pa,ya){const {xmin:Aa,ymin:Ka,xmax:Ma,ymax:Xa,hasZ:Wa,hasM:Va}=U;if(!ma(Aa,Ka,Wa?U.zmin:ya,ja,Qa,pa))return null;ba.xmin=Qa[0];ba.ymin=Qa[1];Wa&&(ba.zmin=Qa[2]);if(!ma(Ma,Xa,Wa?U.zmax:ya,ja,Qa,pa))return null;ba.xmax=Qa[0];ba.ymax=Qa[1];Wa&&(ba.zmax=Qa[2]);Va&&(ba.mmin=U.mmin,ba.mmax=U.mmax);ba.spatialReference=pa;return ba}function ma(U,ja,ba,pa,ya,
Aa){Ua[0]=U;Ua[1]=ja;Ua[2]=ba;return qa(Ua,pa,0,ya,Aa,0,1)}function da(U,ja,ba,pa){if(I.isNone(ja)||I.isNone(pa)||2>U.length)return!1;2===U.length&&(Ua[0]=U[0],Ua[1]=U[1],Ua[2]=0,U=Ua);return qa(U,ja,0,ba,pa,0,1)}function la(U,ja,ba){if(I.isNone(ja))return!1;ja=Na(ja,Bb);ja=lb[ja][na.WGS84_COMPARABLE_LON_LAT];if(I.isNone(ja))return!1;ja(U,0,Ua,0);ba!==Ua&&(ba[0]=Ua[0],ba[1]=Ua[1],2<ba.length&&(ba[2]=Ua[2]));return!0}function qa(U,ja,ba,pa,ya,Aa,Ka=1){ja=ta(ja,ya,Pb);if(I.isNone(ja))return!1;if(ja===
b){if(U===pa&&ba===Aa)return!0;Ka=ba+3*Ka;for(let Ma=ba,Xa=Aa;Ma<Ka;Ma++,Xa++)pa[Xa]=U[Ma];return!0}Ka=ba+3*Ka;for(let Ma=ba,Xa=Aa;Ma<Ka;Ma+=3,Xa+=3)ja(U,Ma,pa,Xa);return!0}function wa(U,ja,ba,pa,ya,Aa,Ka=0){const Ma=[];for(const Xa of U)for(const Wa of Xa)Ma.push(Wa[0],Wa[1],ja?Wa[2]:Ka);if(!qa(Ma,pa,0,Ma,Aa,0,Ma.length/3))return!1;pa=0;ya.length=0;for(const Xa of U){U=[];for(const Wa of Xa)ja&&ba?U.push([Ma[pa++],Ma[pa++],Ma[pa++],Wa[3]]):ja?U.push([Ma[pa++],Ma[pa++],Ma[pa++]]):(ba?U.push([Ma[pa++],
Ma[pa++],Wa[2]]):U.push([Ma[pa++],Ma[pa++]]),pa++);ya.push(U)}return!0}function Da(U,ja,ba,pa){ja=pa+ja;if(ja<pa/2||ba>ja)return Number.MAX_VALUE;U=Math.abs(fb*U)+Math.asin(ba/ja);return U>=Math.PI/2?Number.MAX_VALUE:ba/Math.cos(U)}function La(U,ja,ba){const pa=Math.sin(U);U=Math.cos(U);const ya=Math.sin(ja);ja=Math.cos(ja);ba[0]=-pa;ba[4]=-ya*U;ba[8]=ja*U;ba[12]=0;ba[1]=U;ba[5]=-ya*pa;ba[9]=ja*pa;ba[13]=0;ba[2]=0;ba[6]=ja;ba[10]=ya;ba[14]=0;ba[3]=0;ba[7]=0;ba[11]=0;ba[15]=1;return ba}function Fa(U,
ja,ba){La(U,ja,ba);q.transpose(ba,ba);return ba}function Na(U,ja){if(ja.spatialReference===U)return ja.spatialReferenceId;ja.spatialReference=U;"metersPerUnit"in ja&&(ja.metersPerUnit=n.getMetersPerUnitForSR(U,1));return U.wkt===L.SphericalECEFSpatialReference.wkt?ja.spatialReferenceId=na.SPHERICAL_ECEF:F.isWGS84(U)?ja.spatialReferenceId=na.WGS84:F.isWebMercator(U)?ja.spatialReferenceId=na.WEB_MERCATOR:F.isPlateCarree(U)?ja.spatialReferenceId=na.PLATE_CARREE:U.wkt===L.WGS84ECEFSpatialReference.wkt?
ja.spatialReferenceId=na.WGS84_ECEF:U.wkid===M.SupportedGCSWkids.CGCS2000?ja.spatialReferenceId=na.CGCS2000:U.wkt===L.SphericalPCPFMars.wkt?ja.spatialReferenceId=na.SPHERICAL_MARS_PCPF:U.wkt===L.SphericalPCPFMoon.wkt?ja.spatialReferenceId=na.SPHERICAL_MOON_PCPF:F.isMars(U)?ja.spatialReferenceId=na.GCSMARS2000:F.isMoon(U)?ja.spatialReferenceId=na.GCSMOON2000:ja.spatialReferenceId=na.UNKNOWN}function b(U,ja,ba,pa){U!==ba&&(ba[pa++]=U[ja++],ba[pa++]=U[ja++],ba[pa]=U[ja])}function p(U,ja,ba,pa){ba[pa++]=
qb*(U[ja++]/z.earth.radius);ba[pa++]=qb*(Math.PI/2-2*Math.atan(Math.exp(-U[ja++]/z.earth.radius)));ba[pa]=U[ja]}function fa(U,ja,ba,pa){p(U,ja,ba,pa);ra(ba,pa,ba,pa)}function l(U,ja,ba,pa){p(U,ja,ba,pa);Ga(ba,pa,ba,pa)}function D(U,ja,ba,pa,ya){var Aa=.4999999*Math.PI;Aa=t.clamp(fb*U[ja+1],-Aa,Aa);Aa=Math.sin(Aa);ba[pa++]=fb*U[ja]*ya.radius;ba[pa++]=ya.halfSemiMajorAxis*Math.log((1+Aa)/(1-Aa));ba[pa]=U[ja+2]}function S(U,ja,ba,pa){D(U,ja,ba,pa,z.earth)}function T(U,ja,ba,pa){ba[pa]=U[ja]*Qb;ba[pa+
1]=U[ja+1]*Qb;ba[pa+2]=U[ja+2]}function ha(U,ja,ba,pa){ba[pa]=U[ja]*zb;ba[pa+1]=U[ja+1]*zb;ba[pa+2]=U[ja+2]}function ia(U,ja,ba,pa){p(U,ja,ba,pa);T(ba,pa,ba,pa)}function J(U,ja,ba,pa,ya){ya+=U[ja+2];const Aa=fb*U[ja+1];U=fb*U[ja];ja=Math.cos(Aa);ba[pa++]=Math.cos(U)*ja*ya;ba[pa++]=Math.sin(U)*ja*ya;ba[pa]=Math.sin(Aa)*ya}function Q(U,ja,ba,pa){J(U,ja,ba,pa,z.moon.radius)}function ea(U,ja,ba,pa){J(U,ja,ba,pa,z.mars.radius)}function ra(U,ja,ba,pa){J(U,ja,ba,pa,z.earth.radius)}function sa(U,ja,ba,pa,
ya){var Aa=U[ja];const Ka=U[ja+1];ja=U[ja+2];U=Math.sqrt(Aa*Aa+Ka*Ka+ja*ja);ja=t.asinClamped(ja/(0===U?1:U));Aa=Math.atan2(Ka,Aa);ba[pa++]=qb*Aa;ba[pa++]=qb*ja;ba[pa]=U-ya}function xa(U,ja,ba,pa){sa(U,ja,ba,pa,z.moon.radius)}function za(U,ja,ba,pa){sa(U,ja,ba,pa,z.mars.radius)}function Ba(U,ja,ba,pa){sa(U,ja,ba,pa,z.earth.radius)}function Ja(U,ja,ba,pa){Ba(U,ja,ba,pa);S(ba,pa,ba,pa)}function Ia(U,ja,ba,pa){Ba(U,ja,ba,pa);Ga(ba,pa,ba,pa)}function Ga(U,ja,ba,pa){{var ya=z.earth;const Ka=fb*U[ja];var Aa=
fb*U[ja+1];U=U[ja+2];ja=Math.sin(Aa);Aa=Math.cos(Aa);const Ma=ya.radius/Math.sqrt(1-ya.eccentricitySquared*ja*ja);ba[pa++]=(Ma+U)*Aa*Math.cos(Ka);ba[pa++]=(Ma+U)*Aa*Math.sin(Ka);ba[pa++]=(Ma*(1-ya.eccentricitySquared)+U)*ja}}function Ea(U,ja,ba,pa){var ya=N.earthEllipsoidConstants,Aa=U[ja],Ka=U[ja+1];U=U[ja+2];let Ma;ja=Math.abs(U);var Xa=Aa*Aa+Ka*Ka;var Wa=Math.sqrt(Xa);var Va=Xa+U*U;var cb=Math.sqrt(Va);Aa=Math.atan2(Ka,Aa);var mb=U*U/Va;Va=Xa/Va;Ka=ya.a2/cb;Xa=ya.a3-ya.a4/cb;.3<Va?(mb=ja/cb*(1+
Va*(ya.a1+Ka+mb*Xa)/cb),cb=Math.asin(mb),Ka=mb*mb,Va=Math.sqrt(1-Ka)):(Va=Wa/cb*(1-mb*(ya.a5-Ka-Va*Xa)/cb),cb=Math.acos(Va),Ka=1-Va*Va,mb=Math.sqrt(Ka));Ma=1-z.earth.eccentricitySquared*Ka;Ka=z.earth.radius/Math.sqrt(Ma);ya=ya.a6*Ka;Ka=Wa-Ka*Va;Xa=ja-ya*mb;ja=Va*Ka+mb*Xa;Wa=Va*Xa-mb*Ka;ya=Wa/(ya/Ma+ja);cb+=ya;0>U&&(cb=-cb);ba[pa++]=qb*Aa;ba[pa++]=qb*cb;ba[pa]=ja+Wa*ya/2}function Ha(U,ja,ba,pa){Ea(U,ja,ba,pa);ra(ba,pa,ba,pa)}function Ra(U,ja,ba,pa){Ea(U,ja,ba,pa);S(ba,pa,ba,pa)}function ta(U,ja,ba=
ab()){return I.isNone(U)||I.isNone(ja)?null:bb(U,ja,ba).projector}function bb(U,ja,ba){if(I.isNone(U)||I.isNone(ja)||ba.source.spatialReference===U&&ba.dest.spatialReference===ja)return ba;const pa=Na(U,ba.source),ya=Na(ja,ba.dest);pa===na.UNKNOWN&&ya===na.UNKNOWN?F.equals(U,ja)?ba.projector=b:ba.projector=null:ba.projector=lb[pa][ya];return ba}function ab(){return{source:{spatialReference:null,spatialReferenceId:na.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:na.UNKNOWN,
metersPerUnit:1},projector:b}}let Sa=null,a=null,$a=null,Ta={},pb=function(U){function ja(){return U.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}Y._inheritsLoose(ja,U);return ja}(Z);var na;(function(U){U[U.UNKNOWN=0]="UNKNOWN";U[U.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";U[U.WGS84=2]="WGS84";U[U.WEB_MERCATOR=3]="WEB_MERCATOR";U[U.WGS84_ECEF=4]="WGS84_ECEF";U[U.CGCS2000=5]="CGCS2000";U[U.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";U[U.SPHERICAL_MARS_PCPF=
7]="SPHERICAL_MARS_PCPF";U[U.GCSMARS2000=8]="GCSMARS2000";U[U.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";U[U.GCSMOON2000=10]="GCSMOON2000";U[U.LON_LAT=11]="LON_LAT";U[U.PLATE_CARREE=12]="PLATE_CARREE"})(na||(na={}));const Qb=z.earth.radius*Math.PI/180,zb=180/(z.earth.radius*Math.PI),lb={[na.WGS84]:{[na.CGCS2000]:null,[na.GCSMARS2000]:null,[na.GCSMOON2000]:null,[na.LON_LAT]:b,[na.WGS84_COMPARABLE_LON_LAT]:b,[na.SPHERICAL_ECEF]:ra,[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:null,
[na.WEB_MERCATOR]:S,[na.PLATE_CARREE]:T,[na.WGS84]:b,[na.WGS84_ECEF]:Ga},[na.CGCS2000]:{[na.CGCS2000]:b,[na.GCSMARS2000]:null,[na.GCSMOON2000]:null,[na.LON_LAT]:b,[na.WGS84_COMPARABLE_LON_LAT]:b,[na.SPHERICAL_ECEF]:ra,[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:null,[na.PLATE_CARREE]:T,[na.WGS84]:null,[na.WGS84_ECEF]:Ga},[na.GCSMARS2000]:{[na.CGCS2000]:null,[na.GCSMARS2000]:b,[na.GCSMOON2000]:null,[na.LON_LAT]:b,[na.WGS84_COMPARABLE_LON_LAT]:null,
[na.SPHERICAL_ECEF]:null,[na.SPHERICAL_MARS_PCPF]:ea,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:null,[na.PLATE_CARREE]:null,[na.WGS84]:null,[na.WGS84_ECEF]:null},[na.GCSMOON2000]:{[na.CGCS2000]:null,[na.GCSMARS2000]:null,[na.GCSMOON2000]:b,[na.LON_LAT]:b,[na.WGS84_COMPARABLE_LON_LAT]:null,[na.SPHERICAL_ECEF]:null,[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:Q,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:null,[na.PLATE_CARREE]:null,[na.WGS84]:null,[na.WGS84_ECEF]:null},[na.WEB_MERCATOR]:{[na.CGCS2000]:null,
[na.GCSMARS2000]:null,[na.GCSMOON2000]:null,[na.LON_LAT]:p,[na.WGS84_COMPARABLE_LON_LAT]:p,[na.SPHERICAL_ECEF]:fa,[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:b,[na.PLATE_CARREE]:ia,[na.WGS84]:p,[na.WGS84_ECEF]:l},[na.WGS84_ECEF]:{[na.CGCS2000]:Ea,[na.GCSMARS2000]:null,[na.GCSMOON2000]:null,[na.LON_LAT]:Ea,[na.WGS84_COMPARABLE_LON_LAT]:Ea,[na.SPHERICAL_ECEF]:Ha,[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:Ra,
[na.PLATE_CARREE]:function(U,ja,ba,pa){Ea(U,ja,ba,pa);T(ba,pa,ba,pa)},[na.WGS84]:Ea,[na.WGS84_ECEF]:b},[na.SPHERICAL_ECEF]:{[na.CGCS2000]:Ba,[na.GCSMARS2000]:null,[na.GCSMOON2000]:null,[na.LON_LAT]:Ba,[na.WGS84_COMPARABLE_LON_LAT]:Ba,[na.SPHERICAL_ECEF]:b,[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:Ja,[na.PLATE_CARREE]:function(U,ja,ba,pa){Ba(U,ja,ba,pa);T(ba,pa,ba,pa)},[na.WGS84]:Ba,[na.WGS84_ECEF]:Ia},[na.SPHERICAL_MARS_PCPF]:{[na.CGCS2000]:null,
[na.GCSMARS2000]:za,[na.GCSMOON2000]:null,[na.LON_LAT]:za,[na.WGS84_COMPARABLE_LON_LAT]:null,[na.SPHERICAL_ECEF]:null,[na.SPHERICAL_MARS_PCPF]:b,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:null,[na.PLATE_CARREE]:null,[na.WGS84]:null,[na.WGS84_ECEF]:null},[na.SPHERICAL_MOON_PCPF]:{[na.CGCS2000]:null,[na.GCSMARS2000]:null,[na.GCSMOON2000]:xa,[na.LON_LAT]:xa,[na.WGS84_COMPARABLE_LON_LAT]:null,[na.SPHERICAL_ECEF]:null,[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:b,[na.UNKNOWN]:null,
[na.WEB_MERCATOR]:null,[na.PLATE_CARREE]:null,[na.WGS84]:null,[na.WGS84_ECEF]:null},[na.UNKNOWN]:{[na.CGCS2000]:null,[na.GCSMARS2000]:null,[na.GCSMOON2000]:null,[na.LON_LAT]:null,[na.WGS84_COMPARABLE_LON_LAT]:null,[na.SPHERICAL_ECEF]:null,[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:b,[na.WEB_MERCATOR]:null,[na.PLATE_CARREE]:null,[na.WGS84]:null,[na.WGS84_ECEF]:null},[na.LON_LAT]:{[na.CGCS2000]:b,[na.GCSMARS2000]:b,[na.GCSMOON2000]:b,[na.LON_LAT]:b,[na.WGS84_COMPARABLE_LON_LAT]:b,
[na.SPHERICAL_ECEF]:ra,[na.SPHERICAL_MARS_PCPF]:ea,[na.SPHERICAL_MOON_PCPF]:Q,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:S,[na.PLATE_CARREE]:T,[na.WGS84]:b,[na.WGS84_ECEF]:Ga},[na.WGS84_COMPARABLE_LON_LAT]:{[na.CGCS2000]:null,[na.GCSMARS2000]:null,[na.GCSMOON2000]:null,[na.LON_LAT]:b,[na.WGS84_COMPARABLE_LON_LAT]:b,[na.SPHERICAL_ECEF]:ra,[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:null,[na.PLATE_CARREE]:T,[na.WGS84]:b,[na.WGS84_ECEF]:Ga},[na.PLATE_CARREE]:{[na.CGCS2000]:ha,
[na.GCSMARS2000]:null,[na.GCSMOON2000]:null,[na.LON_LAT]:ha,[na.WGS84_COMPARABLE_LON_LAT]:ha,[na.SPHERICAL_ECEF]:function(U,ja,ba,pa){ha(U,ja,ba,pa);ra(ba,pa,ba,pa)},[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:function(U,ja,ba,pa){ha(U,ja,ba,pa);S(ba,pa,ba,pa)},[na.PLATE_CARREE]:b,[na.WGS84]:ha,[na.WGS84_ECEF]:function(U,ja,ba,pa){ha(U,ja,ba,pa);Ga(ba,pa,ba,pa)}}},Bb={spatialReference:null,spatialReferenceId:na.UNKNOWN},Rb={spatialReference:null,
spatialReferenceId:na.UNKNOWN},Pb=ab(),bc=ab(),fb=t.deg2rad(1),qb=t.rad2deg(1),Ua=B.create(),kb=B.create(),rb=B.create(),Qa=B.create(),Cb=B.create();e.canProjectToWGS84ComparableLonLat=function(U){if(I.isNone(U))return!1;U=Na(U,Bb);return!!lb[U][na.WGS84_COMPARABLE_LON_LAT]};e.canProjectWithoutEngine=H;e.computeENUToSphericalPCPFLocalRotation=La;e.computeSphericalPCPFToENULocalRotation=Fa;e.computeTranslationToOriginAndRotation=function(U,ja,ba,pa){if(I.isNone(U)||I.isNone(pa))return!1;var ya=Na(U,
Bb),Aa=Na(pa,Rb);if(ya===Aa&&Aa!==na.SPHERICAL_ECEF&&Aa!==na.SPHERICAL_MARS_PCPF&&Aa!==na.SPHERICAL_MOON_PCPF&&(ya!==na.UNKNOWN||F.equals(U,pa)))return q.fromTranslation(ba,ja),!0;if(Aa===na.SPHERICAL_ECEF||Aa===na.SPHERICAL_MARS_PCPF||Aa===na.SPHERICAL_MOON_PCPF){ya=lb[ya][na.LON_LAT];Aa=lb[na.LON_LAT][Aa];if(I.isNone(ya)||I.isNone(Aa))return!1;ya(ja,0,kb,0);Aa(kb,0,rb,0);La(fb*kb[0],fb*kb[1],ba);ba[12]=rb[0];ba[13]=rb[1];ba[14]=rb[2];return!0}if((Aa===na.WEB_MERCATOR||Aa===na.PLATE_CARREE)&&(ya===
na.WGS84||ya===na.CGCS2000&&Aa===na.PLATE_CARREE||ya===na.SPHERICAL_ECEF||ya===na.WEB_MERCATOR)){U=lb[ya][na.LON_LAT];Aa=lb[na.LON_LAT][Aa];if(I.isNone(U)||I.isNone(Aa))return!1;U(ja,0,kb,0);Aa(kb,0,rb,0);ya===na.SPHERICAL_ECEF?Fa(fb*kb[0],fb*kb[1],ba):q.identity(ba);ba[12]=rb[0];ba[13]=rb[1];ba[14]=rb[2];return!0}return!1};e.getProjectorName=function(U,ja){switch(ta(U,ja,Pb)){case b:return"copy3";case ra:return"wgs84ToSphericalECEF";case S:return"wgs84ToWebMercator";case T:return"wgs84ToPlateCarree";
case Ga:return"wgs84ToWGS84ECEF";case p:return"webMercatorToWGS84";case fa:return"webMercatorToSphericalECEF";case l:return"webMercatorToWGS84ECEF";case ia:return"webMercatorToPlateCarree";case Ea:return"wgs84ECEFToWGS84";case Ha:return"wgs84ECEFToSphericalECEF";case Ra:return"wgs84ECEFToWebMercator";case Ba:return"sphericalECEFToWGS84";case Ja:return"sphericalECEFToWebMercator";case za:return"sphericalMarsPCPFToMars2000";case xa:return"sphericalMoonPCPFToMoon2000";case Ia:return"sphericalECEFToWGS84ECEF";
case ea:return"mars2000ToSphericalPCPF";case Q:return"moon2000ToSphericalPCPF";default:return null}};e.getTransformation=aa;e.getTransformations=function(U,ja,ba=null){if(I.isNone(Sa))throw new pb;U=Sa._getTransformationBySuitability(a,U,ja,ba,null==ba?void 0:ba.spatialReference);if(null!==U){ja=[];for(const pa of U)ja.push(K.fromGE(pa));return ja}return[]};e.initializeProjection=function(U,ja,ba,pa){return v.apply(this,arguments)};e.isLoaded=ca;e.load=C;e.localLinearScaleFactors=function(U,ja,ba,
pa){if(I.isNone(ja)||I.isNone(pa))return!1;const ya=Na(ja,Bb);var Aa=Na(pa,Rb);if(ya===Aa&&ya!==na.UNKNOWN||F.equals(ja,pa))return ba[0]=1,ba[1]=1,ba[2]=1,!0;if(ya===na.SPHERICAL_ECEF){ja=r.length(U);U=ja/Math.sqrt(U[0]*U[0]+U[1]*U[1]);ja/=z.earth.radius;if(Aa===na.WEB_MERCATOR)return ba[0]=U*ja,ba[1]=U*ja,ba[2]=1,!0;if(Aa===na.WGS84||Aa===na.CGCS2000)return Aa=zb,ba[0]=Aa*U*ja,ba[1]=Aa*ja,ba[2]=1,!0}else if(ya===na.PLATE_CARREE){if(Aa===na.WGS84||Aa===na.CGCS2000)return ba[0]=zb,ba[1]=zb,ba[2]=1,
!0;if(Aa===na.WEB_MERCATOR)return Aa=U[1]/z.earth.radius,ba[0]=1,ba[1]=1/Math.cos(Aa),ba[2]=1,!0}return!1};e.lonLatToSphericalPCPF=function(U,ja,ba,pa,ya=0){pa+=ya;ya=Math.cos(ba);U[0]=Math.cos(ja)*ya*pa;U[1]=Math.sin(ja)*ya*pa;U[2]=Math.sin(ba)*pa};e.lonLatToWebMercatorComparable=D;e.project=G;e.projectBoundingRect=function(U,ja,ba,pa){if(null==U)return!1;if(F.equals(ja,pa))return V.copy(ba,U),!0;Ua[0]=U[0];Ua[1]=U[1];Ua[2]=0;if(!qa(Ua,ja,0,Ua,pa,0,1))return!1;ba[0]=Ua[0];ba[1]=Ua[1];Ua[0]=U[2];
Ua[1]=U[3];Ua[2]=0;if(!qa(Ua,ja,0,Ua,pa,0,1))return!1;ba[2]=Ua[0];ba[3]=Ua[1];return!0};e.projectBoundingSphere=function(U,ja,ba,pa){if(I.isNone(ja)||I.isNone(pa))return!1;ja=bb(ja,pa,bc);if(ja.projector===b)return ba[0]=U[0],ba[1]=U[1],ba[2]=U[2],ba[3]=U[3],!0;if(I.isNone(ja.projector))return!1;const {source:ya,dest:Aa}=ja;if(Aa.spatialReferenceId===na.WEB_MERCATOR){ja=lb[ya.spatialReferenceId][na.WGS84];if(I.isNone(ja))return!1;ja(U,0,kb,0);S(kb,0,ba,0);ba[3]=Da(kb[1],U[2],U[3],z.earth.radius);
return!0}if(ya.spatialReferenceId!==na.WGS84&&ya.spatialReferenceId!==na.CGCS2000||Aa.spatialReferenceId!==na.PLATE_CARREE)ja.projector(U,0,ba,0),ba[3]=U[3]*ya.metersPerUnit/Aa.metersPerUnit;else{pa=lb[na.SPHERICAL_ECEF][na.PLATE_CARREE];let Ka=U[3];I.isSome(lb[ya.spatialReferenceId][na.SPHERICAL_ECEF])&&I.isSome(pa)&&(Ka=Da(U[1],U[2],U[3],z.earth.radius));ja.projector(U,0,ba,0);ba[3]=Ka}return!0};e.projectBuffer=qa;e.projectDirection=function(U,ja,ba,pa,ya){r.copy(Qa,U);r.add(Cb,U,ja);da(Qa,ba,Qa,
ya);da(Cb,ba,Cb,ya);r.subtract(pa,Cb,Qa);r.normalize(pa,pa)};e.projectExtent=function(U,ja,ba=ja.spatialReference,pa=0){return I.isSome(ba)&&I.isSome(oa(U,U.spatialReference,ja,ba,pa))};e.projectMany=R;e.projectMultipoint=function(U,ja,ba=ja.spatialReference,pa=0){return I.isNone(ba)?!1:I.isSome(O(U,U.spatialReference,ja,ba,pa))};e.projectPoint=function(U,ja,ba=ja.spatialReference,pa=0){return I.isNone(ba)?!1:I.isSome(m(U,U.spatialReference,ja,ba,pa))};e.projectPointToVector=function(U,ja,ba,pa=0){Qa[0]=
U.x;Qa[1]=U.y;const ya=U.z;Qa[2]=void 0!==ya?ya:pa;return qa(Qa,U.spatialReference,0,ja,ba,0,1)};e.projectPointToWGS84ComparableLonLat=function(U,ja){Qa[0]=U.x;Qa[1]=U.y;const ba=U.z;Qa[2]=void 0!==ba?ba:0;return la(Qa,U.spatialReference,ja)};e.projectPolygon=function(U,ja,ba=ja.spatialReference,pa=0){return I.isSome(ba)&&I.isSome(ka(U,U.spatialReference,ja,ba,pa))};e.projectPolyline=function(U,ja,ba=ja.spatialReference,pa=0){return I.isSome(ba)&&I.isSome(W(U,U.spatialReference,ja,ba,pa))};e.projectVectorToDehydratedPoint=
function(U,ja,ba){return qa(U,ja,0,Qa,ba.spatialReference,0,1)?(ba.x=Qa[0],ba.y=Qa[1],ba.z=Qa[2],ba):null};e.projectVectorToPoint=function(U,ja,ba){if(I.isNone(ja)||I.isNone(ba))return null;const pa=new x({spatialReference:ba});return qa(U,ja,0,Qa,ba,0,1)?(pa.x=Qa[0],pa.y=Qa[1],pa.z=Qa[2],pa):null};e.projectVectorToVector=da;e.projectVectorToWGS84ComparableLonLat=function(U,ja,ba){return la(U,ja,ba)};e.projectWithoutEngine=d;e.projectXYZToVector=ma;e.sphericalPCPFtoLonLatElevation=sa;e.tryProjectWithZConversion=
function(U,ja){try{const ba=G(U,ja);if(null==ba)return null;"xmin"in U&&"xmin"in ba&&(ba.zmin=U.zmin,ba.zmax=U.zmax);const pa=P.getGeometryZScaler(ba.type,U.spatialReference,ja);I.isSome(pa)&&pa(ba);return ba}catch(ba){if(!(ba instanceof pb))throw ba;return null}};e.unload=function(){$a=a=Sa=null;Ta={}};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ./maybe ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),
function(k,e,Y,Z,t,I,y,n,q){function r(d){if(d=aa[d])return d;throw Error("unknown type");}function B(d){return R[d].baseUnit}function w(d,m=null){m=m||r(d);return R[m].baseUnit===d}function E(d,m,O){if(m===O)return d;const W=r(m);if(W!==r(O))throw Error("incompatible units");d=w(m,W)?d:d*R[W].units[m].inBaseUnits;return w(O,W)?d:d/R[W].units[O].inBaseUnits}function g(d,m){return 3E3>E(d,m,"meters")?"meters":"kilometers"}function x(d,m){return 1E5>E(d,m,"meters")?"meters":"kilometers"}function c(d,
m){return 1E3>E(d,m,"feet")?"feet":"miles"}function h(d,m){return 1E5>E(d,m,"feet")?"feet":"miles"}function L(d){return G.fromJSON(d.toLowerCase())||null}function V(d,m=y.earth.metersPerDegree){return z(d,!0)||m}function z(d,m=!1){let O,W,ka=null;null!=d&&("object"===typeof d?(O=d.wkid,W=d.wkt):"number"===typeof d?O=d:"string"===typeof d&&(W=d));if(O){if(n.isWKIDFromMars(O))return y.mars.metersPerDegree;if(n.isWKIDFromMoon(O))return y.moon.metersPerDegree;ka=P.values[P[O]];!ka&&m&&C.has(O)&&(ka=F)}else W&&
(/^PROJCS/i.test(W)?ka=N(M.exec(W),ka):/^GEOCCS/i.test(W)&&(ka=N(ca.exec(W),ka)));return ka}function N(d,m){return d&&d[1]?parseFloat(d[1].split(",")[1]):m}function K(d){var m=null;if(null!=d)if("object"===typeof d){var O=d.wkid;var W=d.wkt}else"number"===typeof d?O=d:"string"===typeof d&&(W=d);if(O)m=P.units[P[O]];else if(W&&(d=/^PROJCS/i.test(W)?M:/^GEOCCS/i.test(W)?ca:null)&&(W=d.exec(W))&&W[1]&&(W=W[1],m=(m=/[\\"\\']{1}([^\\"\\']+)/.exec(W))&&m[1],!m||-1===P.units.indexOf(m)))for(W=parseFloat(W.split(",")[1]),
m=null,d=P.values,O=0;O<d.length;++O)if(1E-7>Math.abs(W-d[O])){m=P.units[O];break}return Z.isSome(m)?L(m):null}const F=y.earth.radius*Math.PI/200,M=/UNIT\[([^\]]+)\]\]$/i,P=q,ca=/UNIT\[([^\]]+)\]/i,C=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),G=Y.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",
chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});e={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},
"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};q={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(d=>d*d)(1200/3937)},acres:{inBaseUnits:4046.8564224},
ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const R={length:{baseUnit:"meters",units:e},area:{baseUnit:"square-meters",units:q},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},
"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},aa=function(){const d={};for(const m in R)for(const O in R[m].units)d[O]=m;return d}(),H={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",
esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},v={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};e=Y.strict()(H);q=Y.strict()(v);Y=Y.strict()({...H,...v});k.areaUnitsJSONMap=e;k.baseUnitForUnit=function(d){return B(r(d))};
k.baseUnitForUnitType=B;k.convertUnit=E;k.getDefaultUnitSystem=function(d){if(!d)return null;switch(K(d)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};k.getMetersPerUnit=
z;k.getMetersPerUnitForSR=V;k.getMetersPerVerticalUnitForSR=function(d){if(d&&"object"===typeof d&&!n.isEarth(d))return 1;d=V(d);return 1E5<d?1:d};k.getUnitString=K;k.getVerticalUnitStringForSR=function(d){const m=V(d),O=d instanceof I?t.getReferenceEllipsoid(d).metersPerDegree:1E5;return m>=O?"meters":K(d)};k.inchesPerMeter=39.37;k.isBaseUnit=w;k.isMeasurementSystem=function(d){return"imperial"===d||"metric"===d};k.lengthToDegrees=function(d,m,O){return E(d,m,"meters")/(O*Math.PI/180)};k.lengthUnitsJSONMap=
q;k.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");k.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");k.preferredImperialAreaUnit=function(d,m){return 1E6>E(d,m,"square-feet")?"square-feet":"square-miles"};k.preferredImperialLengthUnit=c;k.preferredImperialVerticalLengthUnit=h;k.preferredLengthUnit=function(d,
m,O){switch(O){case "metric":return g(d,m);case "imperial":return c(d,m);default:return O}};k.preferredMetricAreaUnit=function(d,m){return 3E6>E(d,m,"square-meters")?"square-meters":"square-kilometers"};k.preferredMetricLengthUnit=g;k.preferredMetricVerticalLengthUnit=x;k.preferredVerticalLengthUnit=function(d,m,O){switch(O){case "metric":return x(d,m);case "imperial":return h(d,m);default:return O}};k.unitFromRESTJSON=L;k.unitToRESTJSON=function(d){return G.toJSON(d)||null};k.unitType=r;k.unitsJSONMap=
Y;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(k,e,Y,Z){function t(r){return new e({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${r.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}
const I=t(Y.earth),y=t(Y.mars),n=t(Y.moon),q=new e({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${Y.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});k.SphericalECEFSpatialReference=I;k.SphericalPCPFMars=
y;k.SphericalPCPFMoon=n;k.WGS84ECEFSpatialReference=q;k.createSphericalPCPF=t;k.getReferenceEllipsoid=function(r){return r&&(Z.isMars(r)||r===y)?Y.mars:r&&(Z.isMoon(r)||r===n)?Y.moon:Y.earth};k.getReferenceEllipsoidFromWKID=function(r){return Z.isWKIDFromMars(r)?Y.mars:Z.isWKIDFromMoon(r)?Y.moon:Y.earth};k.getSphericalPCPF=function(r){return r&&(Z.isMars(r)||r===y)?y:r&&(Z.isMoon(r)||r===n)?n:I};k.getSphericalPCPFForEllipsoid=function(r){return r&&r===Y.mars?y:r&&r===Y.moon?n:I};Object.defineProperty(k,
"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(k,e,Y){function Z(b,p){b[0]=p[0];b[1]=p[1];b[2]=p[2];b[3]=p[3];b[4]=p[4];b[5]=p[5];b[6]=p[6];b[7]=p[7];b[8]=p[8];b[9]=p[9];b[10]=p[10];b[11]=p[11];b[12]=p[12];b[13]=p[13];b[14]=p[14];b[15]=p[15];return b}function t(b,p,fa,l,D,S,T,ha,ia,J,Q,ea,ra,sa,xa,za,Ba){b[0]=p;b[1]=fa;b[2]=l;b[3]=D;b[4]=S;b[5]=T;b[6]=ha;b[7]=ia;b[8]=J;b[9]=Q;b[10]=ea;b[11]=ra;b[12]=sa;b[13]=xa;b[14]=za;b[15]=Ba;return b}
function I(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function y(b,p){if(b===p){const fa=p[1],l=p[2],D=p[3],S=p[6],T=p[7],ha=p[11];b[1]=p[4];b[2]=p[8];b[3]=p[12];b[4]=fa;b[6]=p[9];b[7]=p[13];b[8]=l;b[9]=S;b[11]=p[14];b[12]=D;b[13]=T;b[14]=ha}else b[0]=p[0],b[1]=p[4],b[2]=p[8],b[3]=p[12],b[4]=p[1],b[5]=p[5],b[6]=p[9],b[7]=p[13],b[8]=p[2],b[9]=p[6],b[10]=p[10],b[11]=p[14],b[12]=p[3],b[13]=p[7],b[14]=p[11],b[15]=p[15];
return b}function n(b,p){const fa=p[0],l=p[1],D=p[2],S=p[3],T=p[4],ha=p[5],ia=p[6],J=p[7],Q=p[8],ea=p[9],ra=p[10],sa=p[11],xa=p[12],za=p[13],Ba=p[14];p=p[15];const Ja=fa*ha-l*T,Ia=fa*ia-D*T,Ga=fa*J-S*T,Ea=l*ia-D*ha,Ha=l*J-S*ha,Ra=D*J-S*ia,ta=Q*za-ea*xa,bb=Q*Ba-ra*xa,ab=Q*p-sa*xa,Sa=ea*Ba-ra*za,a=ea*p-sa*za,$a=ra*p-sa*Ba;let Ta=Ja*$a-Ia*a+Ga*Sa+Ea*ab-Ha*bb+Ra*ta;if(!Ta)return null;Ta=1/Ta;b[0]=(ha*$a-ia*a+J*Sa)*Ta;b[1]=(D*a-l*$a-S*Sa)*Ta;b[2]=(za*Ra-Ba*Ha+p*Ea)*Ta;b[3]=(ra*Ha-ea*Ra-sa*Ea)*Ta;b[4]=
(ia*ab-T*$a-J*bb)*Ta;b[5]=(fa*$a-D*ab+S*bb)*Ta;b[6]=(Ba*Ga-xa*Ra-p*Ia)*Ta;b[7]=(Q*Ra-ra*Ga+sa*Ia)*Ta;b[8]=(T*a-ha*ab+J*ta)*Ta;b[9]=(l*ab-fa*a-S*ta)*Ta;b[10]=(xa*Ha-za*Ga+p*Ja)*Ta;b[11]=(ea*Ga-Q*Ha-sa*Ja)*Ta;b[12]=(ha*bb-T*Sa-ia*ta)*Ta;b[13]=(fa*Sa-l*bb+D*ta)*Ta;b[14]=(za*Ia-xa*Ea-Ba*Ja)*Ta;b[15]=(Q*Ea-ea*Ia+ra*Ja)*Ta;return b}function q(b,p){const fa=p[0],l=p[1],D=p[2],S=p[3],T=p[4],ha=p[5],ia=p[6],J=p[7],Q=p[8],ea=p[9],ra=p[10],sa=p[11],xa=p[12],za=p[13],Ba=p[14];p=p[15];b[0]=ha*(ra*p-sa*Ba)-ea*
(ia*p-J*Ba)+za*(ia*sa-J*ra);b[1]=-(l*(ra*p-sa*Ba)-ea*(D*p-S*Ba)+za*(D*sa-S*ra));b[2]=l*(ia*p-J*Ba)-ha*(D*p-S*Ba)+za*(D*J-S*ia);b[3]=-(l*(ia*sa-J*ra)-ha*(D*sa-S*ra)+ea*(D*J-S*ia));b[4]=-(T*(ra*p-sa*Ba)-Q*(ia*p-J*Ba)+xa*(ia*sa-J*ra));b[5]=fa*(ra*p-sa*Ba)-Q*(D*p-S*Ba)+xa*(D*sa-S*ra);b[6]=-(fa*(ia*p-J*Ba)-T*(D*p-S*Ba)+xa*(D*J-S*ia));b[7]=fa*(ia*sa-J*ra)-T*(D*sa-S*ra)+Q*(D*J-S*ia);b[8]=T*(ea*p-sa*za)-Q*(ha*p-J*za)+xa*(ha*sa-J*ea);b[9]=-(fa*(ea*p-sa*za)-Q*(l*p-S*za)+xa*(l*sa-S*ea));b[10]=fa*(ha*p-J*za)-
T*(l*p-S*za)+xa*(l*J-S*ha);b[11]=-(fa*(ha*sa-J*ea)-T*(l*sa-S*ea)+Q*(l*J-S*ha));b[12]=-(T*(ea*Ba-ra*za)-Q*(ha*Ba-ia*za)+xa*(ha*ra-ia*ea));b[13]=fa*(ea*Ba-ra*za)-Q*(l*Ba-D*za)+xa*(l*ra-D*ea);b[14]=-(fa*(ha*Ba-ia*za)-T*(l*Ba-D*za)+xa*(l*ia-D*ha));b[15]=fa*(ha*ra-ia*ea)-T*(l*ra-D*ea)+Q*(l*ia-D*ha);return b}function r(b){const p=b[0],fa=b[1],l=b[2],D=b[3],S=b[4],T=b[5],ha=b[6],ia=b[7],J=b[8],Q=b[9],ea=b[10],ra=b[11],sa=b[12],xa=b[13],za=b[14];b=b[15];return(p*T-fa*S)*(ea*b-ra*za)-(p*ha-l*S)*(Q*b-ra*xa)+
(p*ia-D*S)*(Q*za-ea*xa)+(fa*ha-l*T)*(J*b-ra*sa)-(fa*ia-D*T)*(J*za-ea*sa)+(l*ia-D*ha)*(J*xa-Q*sa)}function B(b,p,fa){const l=p[0],D=p[1],S=p[2],T=p[3],ha=p[4],ia=p[5],J=p[6],Q=p[7],ea=p[8],ra=p[9],sa=p[10],xa=p[11],za=p[12],Ba=p[13],Ja=p[14];p=p[15];let Ia=fa[0],Ga=fa[1],Ea=fa[2],Ha=fa[3];b[0]=Ia*l+Ga*ha+Ea*ea+Ha*za;b[1]=Ia*D+Ga*ia+Ea*ra+Ha*Ba;b[2]=Ia*S+Ga*J+Ea*sa+Ha*Ja;b[3]=Ia*T+Ga*Q+Ea*xa+Ha*p;Ia=fa[4];Ga=fa[5];Ea=fa[6];Ha=fa[7];b[4]=Ia*l+Ga*ha+Ea*ea+Ha*za;b[5]=Ia*D+Ga*ia+Ea*ra+Ha*Ba;b[6]=Ia*S+Ga*
J+Ea*sa+Ha*Ja;b[7]=Ia*T+Ga*Q+Ea*xa+Ha*p;Ia=fa[8];Ga=fa[9];Ea=fa[10];Ha=fa[11];b[8]=Ia*l+Ga*ha+Ea*ea+Ha*za;b[9]=Ia*D+Ga*ia+Ea*ra+Ha*Ba;b[10]=Ia*S+Ga*J+Ea*sa+Ha*Ja;b[11]=Ia*T+Ga*Q+Ea*xa+Ha*p;Ia=fa[12];Ga=fa[13];Ea=fa[14];Ha=fa[15];b[12]=Ia*l+Ga*ha+Ea*ea+Ha*za;b[13]=Ia*D+Ga*ia+Ea*ra+Ha*Ba;b[14]=Ia*S+Ga*J+Ea*sa+Ha*Ja;b[15]=Ia*T+Ga*Q+Ea*xa+Ha*p;return b}function w(b,p,fa){const l=fa[0],D=fa[1];fa=fa[2];let S=void 0,T=void 0,ha=void 0,ia=void 0,J=void 0,Q=void 0,ea=void 0,ra=void 0,sa=void 0,xa=void 0,
za=void 0,Ba=void 0;p===b?(b[12]=p[0]*l+p[4]*D+p[8]*fa+p[12],b[13]=p[1]*l+p[5]*D+p[9]*fa+p[13],b[14]=p[2]*l+p[6]*D+p[10]*fa+p[14],b[15]=p[3]*l+p[7]*D+p[11]*fa+p[15]):(S=p[0],T=p[1],ha=p[2],ia=p[3],J=p[4],Q=p[5],ea=p[6],ra=p[7],sa=p[8],xa=p[9],za=p[10],Ba=p[11],b[0]=S,b[1]=T,b[2]=ha,b[3]=ia,b[4]=J,b[5]=Q,b[6]=ea,b[7]=ra,b[8]=sa,b[9]=xa,b[10]=za,b[11]=Ba,b[12]=S*l+J*D+sa*fa+p[12],b[13]=T*l+Q*D+xa*fa+p[13],b[14]=ha*l+ea*D+za*fa+p[14],b[15]=ia*l+ra*D+Ba*fa+p[15]);return b}function E(b,p,fa){const l=fa[0],
D=fa[1];fa=fa[2];b[0]=p[0]*l;b[1]=p[1]*l;b[2]=p[2]*l;b[3]=p[3]*l;b[4]=p[4]*D;b[5]=p[5]*D;b[6]=p[6]*D;b[7]=p[7]*D;b[8]=p[8]*fa;b[9]=p[9]*fa;b[10]=p[10]*fa;b[11]=p[11]*fa;b[12]=p[12];b[13]=p[13];b[14]=p[14];b[15]=p[15];return b}function g(b,p,fa,l){let D=l[0],S=l[1];l=l[2];let T=Math.sqrt(D*D+S*S+l*l);var ha=void 0,ia=void 0;let J=void 0,Q=void 0,ea=void 0,ra=void 0,sa=void 0,xa=void 0,za=void 0,Ba=void 0,Ja=void 0,Ia=void 0,Ga=void 0,Ea=void 0,Ha=void 0,Ra=void 0,ta=void 0,bb=void 0,ab=void 0,Sa=void 0,
a=void 0,$a=void 0;ia=ha=void 0;if(T<Y.EPSILON)return null;T=1/T;D*=T;S*=T;l*=T;ha=Math.sin(fa);ia=Math.cos(fa);J=1-ia;Q=p[0];ea=p[1];ra=p[2];sa=p[3];xa=p[4];za=p[5];Ba=p[6];Ja=p[7];Ia=p[8];Ga=p[9];Ea=p[10];Ha=p[11];Ra=D*D*J+ia;ta=S*D*J+l*ha;bb=l*D*J-S*ha;ab=D*S*J-l*ha;Sa=S*S*J+ia;a=l*S*J+D*ha;$a=D*l*J+S*ha;ha=S*l*J-D*ha;ia=l*l*J+ia;b[0]=Q*Ra+xa*ta+Ia*bb;b[1]=ea*Ra+za*ta+Ga*bb;b[2]=ra*Ra+Ba*ta+Ea*bb;b[3]=sa*Ra+Ja*ta+Ha*bb;b[4]=Q*ab+xa*Sa+Ia*a;b[5]=ea*ab+za*Sa+Ga*a;b[6]=ra*ab+Ba*Sa+Ea*a;b[7]=sa*ab+
Ja*Sa+Ha*a;b[8]=Q*$a+xa*ha+Ia*ia;b[9]=ea*$a+za*ha+Ga*ia;b[10]=ra*$a+Ba*ha+Ea*ia;b[11]=sa*$a+Ja*ha+Ha*ia;p!==b&&(b[12]=p[12],b[13]=p[13],b[14]=p[14],b[15]=p[15]);return b}function x(b,p,fa){const l=Math.sin(fa);fa=Math.cos(fa);const D=p[4],S=p[5],T=p[6],ha=p[7],ia=p[8],J=p[9],Q=p[10],ea=p[11];p!==b&&(b[0]=p[0],b[1]=p[1],b[2]=p[2],b[3]=p[3],b[12]=p[12],b[13]=p[13],b[14]=p[14],b[15]=p[15]);b[4]=D*fa+ia*l;b[5]=S*fa+J*l;b[6]=T*fa+Q*l;b[7]=ha*fa+ea*l;b[8]=ia*fa-D*l;b[9]=J*fa-S*l;b[10]=Q*fa-T*l;b[11]=ea*
fa-ha*l;return b}function c(b,p,fa){const l=Math.sin(fa);fa=Math.cos(fa);const D=p[0],S=p[1],T=p[2],ha=p[3],ia=p[8],J=p[9],Q=p[10],ea=p[11];p!==b&&(b[4]=p[4],b[5]=p[5],b[6]=p[6],b[7]=p[7],b[12]=p[12],b[13]=p[13],b[14]=p[14],b[15]=p[15]);b[0]=D*fa-ia*l;b[1]=S*fa-J*l;b[2]=T*fa-Q*l;b[3]=ha*fa-ea*l;b[8]=D*l+ia*fa;b[9]=S*l+J*fa;b[10]=T*l+Q*fa;b[11]=ha*l+ea*fa;return b}function h(b,p,fa){const l=Math.sin(fa);fa=Math.cos(fa);const D=p[0],S=p[1],T=p[2],ha=p[3],ia=p[4],J=p[5],Q=p[6],ea=p[7];p!==b&&(b[8]=p[8],
b[9]=p[9],b[10]=p[10],b[11]=p[11],b[12]=p[12],b[13]=p[13],b[14]=p[14],b[15]=p[15]);b[0]=D*fa+ia*l;b[1]=S*fa+J*l;b[2]=T*fa+Q*l;b[3]=ha*fa+ea*l;b[4]=ia*fa-D*l;b[5]=J*fa-S*l;b[6]=Q*fa-T*l;b[7]=ea*fa-ha*l;return b}function L(b,p){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=p[0];b[13]=p[1];b[14]=p[2];b[15]=1;return b}function V(b,p){b[0]=p[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=p[1];b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=p[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=
1;return b}function z(b,p,fa){let l=fa[0],D=fa[1];fa=fa[2];let S=Math.sqrt(l*l+D*D+fa*fa),T=void 0,ha=void 0,ia=void 0;if(S<Y.EPSILON)return null;S=1/S;l*=S;D*=S;fa*=S;T=Math.sin(p);ha=Math.cos(p);ia=1-ha;b[0]=l*l*ia+ha;b[1]=D*l*ia+fa*T;b[2]=fa*l*ia-D*T;b[3]=0;b[4]=l*D*ia-fa*T;b[5]=D*D*ia+ha;b[6]=fa*D*ia+l*T;b[7]=0;b[8]=l*fa*ia+D*T;b[9]=D*fa*ia-l*T;b[10]=fa*fa*ia+ha;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function N(b,p){const fa=Math.sin(p);p=Math.cos(p);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=
0;b[5]=p;b[6]=fa;b[7]=0;b[8]=0;b[9]=-fa;b[10]=p;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function K(b,p){const fa=Math.sin(p);p=Math.cos(p);b[0]=p;b[1]=0;b[2]=-fa;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=fa;b[9]=0;b[10]=p;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function F(b,p){const fa=Math.sin(p);p=Math.cos(p);b[0]=p;b[1]=fa;b[2]=0;b[3]=0;b[4]=-fa;b[5]=p;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function M(b,p,fa){var l=p[0],D=p[1],S=p[2],
T=p[3],ha=l+l,ia=D+D;const J=S+S;p=l*ha;const Q=l*ia;l*=J;const ea=D*ia;D*=J;S*=J;ha*=T;ia*=T;T*=J;b[0]=1-(ea+S);b[1]=Q+T;b[2]=l-ia;b[3]=0;b[4]=Q-T;b[5]=1-(p+S);b[6]=D+ha;b[7]=0;b[8]=l+ia;b[9]=D-ha;b[10]=1-(p+ea);b[11]=0;b[12]=fa[0];b[13]=fa[1];b[14]=fa[2];b[15]=1;return b}function P(b,p){const fa=Na,l=-p[0],D=-p[1],S=-p[2],T=p[3],ha=p[4],ia=p[5],J=p[6],Q=p[7],ea=l*l+D*D+S*S+T*T;0<ea?(fa[0]=2*(ha*T+Q*l+ia*S-J*D)/ea,fa[1]=2*(ia*T+Q*D+J*l-ha*S)/ea,fa[2]=2*(J*T+Q*S+ha*D-ia*l)/ea):(fa[0]=2*(ha*T+Q*l+
ia*S-J*D),fa[1]=2*(ia*T+Q*D+J*l-ha*S),fa[2]=2*(J*T+Q*S+ha*D-ia*l));M(b,p,fa);return b}function ca(b,p){b[0]=p[12];b[1]=p[13];b[2]=p[14];return b}function C(b,p){const fa=p[0],l=p[1],D=p[2],S=p[4],T=p[5],ha=p[6],ia=p[8],J=p[9];p=p[10];b[0]=Math.sqrt(fa*fa+l*l+D*D);b[1]=Math.sqrt(S*S+T*T+ha*ha);b[2]=Math.sqrt(ia*ia+J*J+p*p);return b}function G(b,p){const fa=p[0]+p[5]+p[10];let l=0;0<fa?(l=2*Math.sqrt(fa+1),b[3]=.25*l,b[0]=(p[6]-p[9])/l,b[1]=(p[8]-p[2])/l,b[2]=(p[1]-p[4])/l):p[0]>p[5]&&p[0]>p[10]?(l=
2*Math.sqrt(1+p[0]-p[5]-p[10]),b[3]=(p[6]-p[9])/l,b[0]=.25*l,b[1]=(p[1]+p[4])/l,b[2]=(p[8]+p[2])/l):p[5]>p[10]?(l=2*Math.sqrt(1+p[5]-p[0]-p[10]),b[3]=(p[8]-p[2])/l,b[0]=(p[1]+p[4])/l,b[1]=.25*l,b[2]=(p[6]+p[9])/l):(l=2*Math.sqrt(1+p[10]-p[0]-p[5]),b[3]=(p[1]-p[4])/l,b[0]=(p[8]+p[2])/l,b[1]=(p[6]+p[9])/l,b[2]=.25*l);return b}function R(b,p,fa,l){var D=p[0],S=p[1],T=p[2],ha=p[3],ia=D+D,J=S+S,Q=T+T;p=D*ia;const ea=D*J;D*=Q;const ra=S*J;S*=Q;T*=Q;ia*=ha;J*=ha;ha*=Q;Q=l[0];const sa=l[1];l=l[2];b[0]=(1-
(ra+T))*Q;b[1]=(ea+ha)*Q;b[2]=(D-J)*Q;b[3]=0;b[4]=(ea-ha)*sa;b[5]=(1-(p+T))*sa;b[6]=(S+ia)*sa;b[7]=0;b[8]=(D+J)*l;b[9]=(S-ia)*l;b[10]=(1-(p+ra))*l;b[11]=0;b[12]=fa[0];b[13]=fa[1];b[14]=fa[2];b[15]=1;return b}function aa(b,p,fa,l,D){var S=p[0],T=p[1],ha=p[2],ia=p[3],J=S+S,Q=T+T,ea=ha+ha;p=S*J;var ra=S*Q,sa=S*ea;S=T*Q;T*=ea;var xa=ha*ea;ha=ia*J;Q*=ia;const za=ia*ea;var Ba=l[0],Ja=l[1];ea=l[2];l=D[0];ia=D[1];D=D[2];J=(1-(S+xa))*Ba;const Ia=(ra+za)*Ba;Ba*=sa-Q;ra=(ra-za)*Ja;xa=(1-(p+xa))*Ja;Ja*=T+ha;
sa=(sa+Q)*ea;T=(T-ha)*ea;p=(1-(p+S))*ea;b[0]=J;b[1]=Ia;b[2]=Ba;b[3]=0;b[4]=ra;b[5]=xa;b[6]=Ja;b[7]=0;b[8]=sa;b[9]=T;b[10]=p;b[11]=0;b[12]=fa[0]+l-(J*l+ra*ia+sa*D);b[13]=fa[1]+ia-(Ia*l+xa*ia+T*D);b[14]=fa[2]+D-(Ba*l+Ja*ia+p*D);b[15]=1;return b}function H(b,p){var fa=p[0],l=p[1],D=p[2];p=p[3];var S=fa+fa,T=l+l;const ha=D+D;fa*=S;const ia=l*S;l*=T;const J=D*S,Q=D*T;D*=ha;S*=p;T*=p;p*=ha;b[0]=1-l-D;b[1]=ia+p;b[2]=J-T;b[3]=0;b[4]=ia-p;b[5]=1-fa-D;b[6]=Q+S;b[7]=0;b[8]=J+T;b[9]=Q-S;b[10]=1-fa-l;b[11]=0;
b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function v(b,p,fa,l,D,S,T){const ha=1/(fa-p),ia=1/(D-l),J=1/(S-T);b[0]=2*S*ha;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=2*S*ia;b[6]=0;b[7]=0;b[8]=(fa+p)*ha;b[9]=(D+l)*ia;b[10]=(T+S)*J;b[11]=-1;b[12]=0;b[13]=0;b[14]=T*S*2*J;b[15]=0;return b}function d(b,p,fa,l,D){p=1/Math.tan(p/2);let S=void 0;b[0]=p/fa;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=p;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[11]=-1;b[12]=0;b[13]=0;b[15]=0;null!=D&&Infinity!==D?(S=1/(l-D),b[10]=(D+l)*S,b[14]=2*D*l*S):(b[10]=
-1,b[14]=-2*l);return b}function m(b,p,fa,l){const D=Math.tan(p.upDegrees*Math.PI/180),S=Math.tan(p.downDegrees*Math.PI/180),T=Math.tan(p.leftDegrees*Math.PI/180);p=Math.tan(p.rightDegrees*Math.PI/180);const ha=2/(T+p),ia=2/(D+S);b[0]=ha;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=ia;b[6]=0;b[7]=0;b[8]=-((T-p)*ha*.5);b[9]=(D-S)*ia*.5;b[10]=l/(fa-l);b[11]=-1;b[12]=0;b[13]=0;b[14]=l*fa/(fa-l);b[15]=0;return b}function O(b,p,fa,l,D,S,T){const ha=1/(p-fa),ia=1/(l-D),J=1/(S-T);b[0]=-2*ha;b[1]=0;b[2]=0;b[3]=0;b[4]=
0;b[5]=-2*ia;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=2*J;b[11]=0;b[12]=(p+fa)*ha;b[13]=(D+l)*ia;b[14]=(T+S)*J;b[15]=1;return b}function W(b,p,fa,l){let D=void 0,S=void 0;var T=void 0,ha=void 0;let ia=void 0,J=void 0;var Q=void 0,ea=void 0;let ra=void 0,sa=void 0;const xa=p[0],za=p[1];p=p[2];T=l[0];ha=l[1];l=l[2];Q=fa[0];ea=fa[1];fa=fa[2];if(Math.abs(xa-Q)<Y.EPSILON&&Math.abs(za-ea)<Y.EPSILON&&Math.abs(p-fa)<Y.EPSILON)return I(b);Q=xa-Q;ea=za-ea;ra=p-fa;sa=1/Math.sqrt(Q*Q+ea*ea+ra*ra);Q*=sa;ea*=sa;ra*=sa;
D=ha*ra-l*ea;S=l*Q-T*ra;T=T*ea-ha*Q;(sa=Math.sqrt(D*D+S*S+T*T))?(sa=1/sa,D*=sa,S*=sa,T*=sa):T=S=D=0;ha=ea*T-ra*S;ia=ra*D-Q*T;J=Q*S-ea*D;(sa=Math.sqrt(ha*ha+ia*ia+J*J))?(sa=1/sa,ha*=sa,ia*=sa,J*=sa):J=ia=ha=0;b[0]=D;b[1]=ha;b[2]=Q;b[3]=0;b[4]=S;b[5]=ia;b[6]=ea;b[7]=0;b[8]=T;b[9]=J;b[10]=ra;b[11]=0;b[12]=-(D*xa+S*za+T*p);b[13]=-(ha*xa+ia*za+J*p);b[14]=-(Q*xa+ea*za+ra*p);b[15]=1;return b}function ka(b,p,fa,l){const D=p[0],S=p[1];p=p[2];var T=l[0];const ha=l[1];var ia=l[2];l=D-fa[0];let J=S-fa[1];fa=
p-fa[2];let Q=l*l+J*J+fa*fa;0<Q&&(Q=1/Math.sqrt(Q),l*=Q,J*=Q,fa*=Q);let ea=ha*fa-ia*J;ia=ia*l-T*fa;T=T*J-ha*l;Q=ea*ea+ia*ia+T*T;0<Q&&(Q=1/Math.sqrt(Q),ea*=Q,ia*=Q,T*=Q);b[0]=ea;b[1]=ia;b[2]=T;b[3]=0;b[4]=J*T-fa*ia;b[5]=fa*ea-l*T;b[6]=l*ia-J*ea;b[7]=0;b[8]=l;b[9]=J;b[10]=fa;b[11]=0;b[12]=D;b[13]=S;b[14]=p;b[15]=1;return b}function oa(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+
", "+b[15]+")"}function ma(b){return Math.sqrt(b[0]**2+b[1]**2+b[2]**2+b[3]**2+b[4]**2+b[5]**2+b[6]**2+b[7]**2+b[8]**2+b[9]**2+b[10]**2+b[11]**2+b[12]**2+b[13]**2+b[14]**2+b[15]**2)}function da(b,p,fa){b[0]=p[0]+fa[0];b[1]=p[1]+fa[1];b[2]=p[2]+fa[2];b[3]=p[3]+fa[3];b[4]=p[4]+fa[4];b[5]=p[5]+fa[5];b[6]=p[6]+fa[6];b[7]=p[7]+fa[7];b[8]=p[8]+fa[8];b[9]=p[9]+fa[9];b[10]=p[10]+fa[10];b[11]=p[11]+fa[11];b[12]=p[12]+fa[12];b[13]=p[13]+fa[13];b[14]=p[14]+fa[14];b[15]=p[15]+fa[15];return b}function la(b,p,
fa){b[0]=p[0]-fa[0];b[1]=p[1]-fa[1];b[2]=p[2]-fa[2];b[3]=p[3]-fa[3];b[4]=p[4]-fa[4];b[5]=p[5]-fa[5];b[6]=p[6]-fa[6];b[7]=p[7]-fa[7];b[8]=p[8]-fa[8];b[9]=p[9]-fa[9];b[10]=p[10]-fa[10];b[11]=p[11]-fa[11];b[12]=p[12]-fa[12];b[13]=p[13]-fa[13];b[14]=p[14]-fa[14];b[15]=p[15]-fa[15];return b}function qa(b,p,fa){b[0]=p[0]*fa;b[1]=p[1]*fa;b[2]=p[2]*fa;b[3]=p[3]*fa;b[4]=p[4]*fa;b[5]=p[5]*fa;b[6]=p[6]*fa;b[7]=p[7]*fa;b[8]=p[8]*fa;b[9]=p[9]*fa;b[10]=p[10]*fa;b[11]=p[11]*fa;b[12]=p[12]*fa;b[13]=p[13]*fa;b[14]=
p[14]*fa;b[15]=p[15]*fa;return b}function wa(b,p,fa,l){b[0]=p[0]+fa[0]*l;b[1]=p[1]+fa[1]*l;b[2]=p[2]+fa[2]*l;b[3]=p[3]+fa[3]*l;b[4]=p[4]+fa[4]*l;b[5]=p[5]+fa[5]*l;b[6]=p[6]+fa[6]*l;b[7]=p[7]+fa[7]*l;b[8]=p[8]+fa[8]*l;b[9]=p[9]+fa[9]*l;b[10]=p[10]+fa[10]*l;b[11]=p[11]+fa[11]*l;b[12]=p[12]+fa[12]*l;b[13]=p[13]+fa[13]*l;b[14]=p[14]+fa[14]*l;b[15]=p[15]+fa[15]*l;return b}function Da(b,p){return b[0]===p[0]&&b[1]===p[1]&&b[2]===p[2]&&b[3]===p[3]&&b[4]===p[4]&&b[5]===p[5]&&b[6]===p[6]&&b[7]===p[7]&&b[8]===
p[8]&&b[9]===p[9]&&b[10]===p[10]&&b[11]===p[11]&&b[12]===p[12]&&b[13]===p[13]&&b[14]===p[14]&&b[15]===p[15]}function La(b,p){if(b===p)return!0;const fa=b[0],l=b[1],D=b[2],S=b[3],T=b[4],ha=b[5],ia=b[6],J=b[7],Q=b[8],ea=b[9],ra=b[10],sa=b[11],xa=b[12],za=b[13],Ba=b[14];b=b[15];const Ja=p[0],Ia=p[1],Ga=p[2],Ea=p[3],Ha=p[4],Ra=p[5],ta=p[6],bb=p[7],ab=p[8],Sa=p[9],a=p[10],$a=p[11],Ta=p[12],pb=p[13],na=p[14];p=p[15];return Math.abs(fa-Ja)<=Y.EPSILON*Math.max(1,Math.abs(fa),Math.abs(Ja))&&Math.abs(l-Ia)<=
Y.EPSILON*Math.max(1,Math.abs(l),Math.abs(Ia))&&Math.abs(D-Ga)<=Y.EPSILON*Math.max(1,Math.abs(D),Math.abs(Ga))&&Math.abs(S-Ea)<=Y.EPSILON*Math.max(1,Math.abs(S),Math.abs(Ea))&&Math.abs(T-Ha)<=Y.EPSILON*Math.max(1,Math.abs(T),Math.abs(Ha))&&Math.abs(ha-Ra)<=Y.EPSILON*Math.max(1,Math.abs(ha),Math.abs(Ra))&&Math.abs(ia-ta)<=Y.EPSILON*Math.max(1,Math.abs(ia),Math.abs(ta))&&Math.abs(J-bb)<=Y.EPSILON*Math.max(1,Math.abs(J),Math.abs(bb))&&Math.abs(Q-ab)<=Y.EPSILON*Math.max(1,Math.abs(Q),Math.abs(ab))&&Math.abs(ea-
Sa)<=Y.EPSILON*Math.max(1,Math.abs(ea),Math.abs(Sa))&&Math.abs(ra-a)<=Y.EPSILON*Math.max(1,Math.abs(ra),Math.abs(a))&&Math.abs(sa-$a)<=Y.EPSILON*Math.max(1,Math.abs(sa),Math.abs($a))&&Math.abs(xa-Ta)<=Y.EPSILON*Math.max(1,Math.abs(xa),Math.abs(Ta))&&Math.abs(za-pb)<=Y.EPSILON*Math.max(1,Math.abs(za),Math.abs(pb))&&Math.abs(Ba-na)<=Y.EPSILON*Math.max(1,Math.abs(Ba),Math.abs(na))&&Math.abs(b-p)<=Y.EPSILON*Math.max(1,Math.abs(b),Math.abs(p))}function Fa(b){const p=Y.EPSILON,fa=b[0],l=b[1],D=b[2],S=b[4],
T=b[5],ha=b[6],ia=b[8],J=b[9];b=b[10];return Math.abs(1-(fa*fa+S*S+ia*ia))<=p&&Math.abs(1-(l*l+T*T+J*J))<=p&&Math.abs(1-(D*D+ha*ha+b*b))<=p}const Na=e.create();e=Object.freeze({__proto__:null,copy:Z,set:t,identity:I,transpose:y,invert:n,adjoint:q,determinant:r,multiply:B,translate:w,scale:E,rotate:g,rotateX:x,rotateY:c,rotateZ:h,fromTranslation:L,fromScaling:V,fromRotation:z,fromXRotation:N,fromYRotation:K,fromZRotation:F,fromRotationTranslation:M,fromQuat2:P,getTranslation:ca,getScaling:C,getRotation:G,
fromRotationTranslationScale:R,fromRotationTranslationScaleOrigin:aa,fromQuat:H,frustum:v,perspective:d,perspectiveFromFieldOfView:m,ortho:O,lookAt:W,targetTo:ka,str:oa,frob:ma,add:da,subtract:la,multiplyScalar:qa,multiplyScalarAndAdd:wa,exactEquals:Da,equals:La,isOrthoNormal:Fa,mul:B,sub:la});k.add=da;k.adjoint=q;k.copy=Z;k.determinant=r;k.equals=La;k.exactEquals=Da;k.frob=ma;k.fromQuat=H;k.fromQuat2=P;k.fromRotation=z;k.fromRotationTranslation=M;k.fromRotationTranslationScale=R;k.fromRotationTranslationScaleOrigin=
aa;k.fromScaling=V;k.fromTranslation=L;k.fromXRotation=N;k.fromYRotation=K;k.fromZRotation=F;k.frustum=v;k.getRotation=G;k.getScaling=C;k.getTranslation=ca;k.identity=I;k.invert=n;k.isOrthoNormal=Fa;k.lookAt=W;k.mat4=e;k.mul=B;k.multiply=B;k.multiplyScalar=qa;k.multiplyScalarAndAdd=wa;k.ortho=O;k.perspective=d;k.perspectiveFromFieldOfView=m;k.rotate=g;k.rotateX=x;k.rotateY=c;k.rotateZ=h;k.scale=E;k.set=t;k.str=oa;k.sub=la;k.subtract=la;k.targetTo=ka;k.translate=w;k.transpose=y})},"esri/chunks/pe":function(){define(["require",
"exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(k,e,Y,Z,t){function I(){return!!e._pe}function y(){return!!t("esri-wasm")}function n(){return g?g:g=(new Promise((c,h)=>k(["./pe-wasm"],c,h))).then(c=>c.peWasm).then(({default:c})=>c({locateFile:h=>Z.getAssetUrl(`esri/geometry/support/${h}`)})).then(c=>{q(c)})}function q(c){function h(z,N,K){z[N]=K(z[N])}e._pe=c;e.PeDefs.init();e.PeGTlistExtended.init();e.PeNotationMgrs.init();e.PeNotationUtm.init();e.PePCSInfo.init();e.PeGCSExtent=
function(z){function N(){return z.apply(this,arguments)||this}Y._inheritsLoose(N,z);N.prototype.destroy=function(){e._pe.destroy(this)};return N}(e._pe.PeGCSExtent);c=[e._pe.PeDatum,e._pe.PeGeogcs,e._pe.PeGeogtran,e._pe.PeObject,e._pe.PeParameter,e._pe.PePrimem,e._pe.PeProjcs,e._pe.PeSpheroid,e._pe.PeUnit];for(var L of c)h(L.prototype,"getName",z=>function(){return z.call(this,Array(e.PeDefs.PE_NAME_MAX))});for(const z of[e._pe.PeGeogtran,e._pe.PeProjcs])h(z.prototype,"getParameters",N=>function(){const K=
Array(e.PeDefs.PE_PARM_MAX);let F=N.call(this);for(let M=0;M<K.length;M++){const P=e._pe.getValue(F,"*");K[M]=P?e._pe.wrapPointer(P,e._pe.PeParameter):null;F+=Int32Array.BYTES_PER_ELEMENT}return K});h(e._pe.PeHorizon.prototype,"getCoord",z=>function(){const N=this.getSize();if(!N)return null;const K=[],F=z.call(this);E(K,N,F);return K});h(e._pe.PeGTlistExtendedEntry.prototype,"getEntries",z=>{const N=e._pe._pe_getPeGTlistExtendedGTsSize();return function(){let K=null;var F=z.call(this);if(!e._pe.compare(F,
e._pe.NULL)){K=[F];const M=this.getSteps();if(1<M){F=e._pe.getPointer(F);for(let P=1;P<M;P++)K.push(e._pe.wrapPointer(F+N*P,e._pe.PeGTlistExtendedGTs))}}return K}});const V=e._pe._pe_getPeHorizonSize();L=z=>function(){let N=this._cache;N||(this._cache=N=new Map);if(N.has(z))return N.get(z);let K=null;var F=z.call(this);if(!e._pe.compare(F,e._pe.NULL)){K=[F];const M=F.getNump();if(1<M){F=e._pe.getPointer(F);for(let P=1;P<M;P++)K.push(e._pe.wrapPointer(F+V*P,e._pe.PeHorizon))}}N.set(z,K);return K};
h(e._pe.PeProjcs.prototype,"horizonGcsGenerate",L);h(e._pe.PeProjcs.prototype,"horizonPcsGenerate",L);e._pe.PeObject.prototype.toString=function(z=e.PeDefs.PE_STR_OPTS_NONE){e._pe.ensureCache.prepare();const N=e._pe.getPointer(this),K=e._pe.ensureInt8(Array(e.PeDefs.PE_BUFFER_MAX));return e._pe.UTF8ToString(e._pe._pe_object_to_string_ext(N,z,K))}}function r(c){if(c){var h=e._pe.getClass(c);h&&(h=e._pe.getCache(h))&&(c=e._pe.getPointer(c))&&delete h[c]}}function B(c,h){const L=[];h=Array(h);for(let V=
0;V<c;V++)L.push(e._pe.ensureInt8(h));return L}function w(c){let h;Array.isArray(c[0])?(h=[],c.forEach(L=>{h.push(L[0],L[1])})):h=c;return h}function E(c,h,L,V=!1){if(V)for(V=0;V<2*h;V++)c[V]=e._pe.getValue(L+V*Float64Array.BYTES_PER_ELEMENT,"double");else{V=0===c.length;for(let z=0;z<h;z++)V&&(c[z]=Array(2)),c[z][0]=e._pe.getValue(L,"double"),c[z][1]=e._pe.getValue(L+Float64Array.BYTES_PER_ELEMENT,"double"),L+=2*Float64Array.BYTES_PER_ELEMENT}}let g;e._pe=null;e.PeCSTransformations=void 0;(function(c){function h(z,
N,K){e._pe.ensureCache.prepare();var F=w(K);const M=K===F;F=e._pe.ensureFloat64(F);(z=e._pe._pe_geog_to_proj(e._pe.getPointer(z),N,F))&&E(K,N,F,M);return z}function L(z,N,K){return V(z,N,K,0)}function V(z,N,K,F){e._pe.ensureCache.prepare();var M=w(K);const P=K===M;M=e._pe.ensureFloat64(M);(z=e._pe._pe_proj_to_geog_center(e._pe.getPointer(z),N,M,F))&&E(K,N,M,P);return z}c.geogToProj=h;c.projGeog=function(z,N,K,F){switch(F){case e.PeDefs.PE_TRANSFORM_P_TO_G:return L(z,N,K);case e.PeDefs.PE_TRANSFORM_G_TO_P:return h(z,
N,K)}return 0};c.projToGeog=L;c.projToGeogCenter=V})(e.PeCSTransformations||(e.PeCSTransformations={}));e.PeDefs=void 0;(function(c){c.init=function(){c.PE_BUFFER_MAX=e._pe.PeDefs.prototype.PE_BUFFER_MAX;c.PE_NAME_MAX=e._pe.PeDefs.prototype.PE_NAME_MAX;c.PE_MGRS_MAX=e._pe.PeDefs.prototype.PE_MGRS_MAX;c.PE_USNG_MAX=e._pe.PeDefs.prototype.PE_USNG_MAX;c.PE_DD_MAX=e._pe.PeDefs.prototype.PE_DD_MAX;c.PE_DDM_MAX=e._pe.PeDefs.prototype.PE_DDM_MAX;c.PE_DMS_MAX=e._pe.PeDefs.prototype.PE_DMS_MAX;c.PE_UTM_MAX=
e._pe.PeDefs.prototype.PE_UTM_MAX;c.PE_PARM_MAX=e._pe.PeDefs.prototype.PE_PARM_MAX;c.PE_TYPE_NONE=e._pe.PeDefs.prototype.PE_TYPE_NONE;c.PE_TYPE_GEOGCS=e._pe.PeDefs.prototype.PE_TYPE_GEOGCS;c.PE_TYPE_PROJCS=e._pe.PeDefs.prototype.PE_TYPE_PROJCS;c.PE_TYPE_GEOGTRAN=e._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;c.PE_TYPE_COORDSYS=e._pe.PeDefs.prototype.PE_TYPE_COORDSYS;c.PE_TYPE_UNIT=e._pe.PeDefs.prototype.PE_TYPE_UNIT;c.PE_TYPE_LINUNIT=e._pe.PeDefs.prototype.PE_TYPE_LINUNIT;c.PE_STR_OPTS_NONE=e._pe.PeDefs.prototype.PE_STR_OPTS_NONE;
c.PE_STR_AUTH_NONE=e._pe.PeDefs.prototype.PE_STR_AUTH_NONE;c.PE_STR_AUTH_TOP=e._pe.PeDefs.prototype.PE_STR_AUTH_TOP;c.PE_STR_NAME_CANON=e._pe.PeDefs.prototype.PE_STR_NAME_CANON;c.PE_PARM_X0=e._pe.PeDefs.prototype.PE_PARM_X0;c.PE_PARM_ND=e._pe.PeDefs.prototype.PE_PARM_ND;c.PE_TRANSFORM_1_TO_2=e._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;c.PE_TRANSFORM_2_TO_1=e._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;c.PE_TRANSFORM_P_TO_G=e._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;c.PE_TRANSFORM_G_TO_P=e._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;
c.PE_HORIZON_RECT=e._pe.PeDefs.prototype.PE_HORIZON_RECT;c.PE_HORIZON_POLY=e._pe.PeDefs.prototype.PE_HORIZON_POLY;c.PE_HORIZON_LINE=e._pe.PeDefs.prototype.PE_HORIZON_LINE;c.PE_HORIZON_DELTA=e._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(e.PeDefs||(e.PeDefs={}));e.PeFactory=void 0;(function(c){function h(N,K){let F=null,M=L[N];M||(M={},L[N]=M);M.hasOwnProperty(String(K))?F=M[K]:(N=e._pe.PeFactory.prototype.factoryByType(N,K),e._pe.compare(N,e._pe.NULL)||(F=N,M[K]=F));return F=z(F)}const L={},V={},z=N=>
{if(N){const K=N.getType();switch(K){case e.PeDefs.PE_TYPE_GEOGCS:N=e._pe.castObject(N,e._pe.PeGeogcs);break;case e.PeDefs.PE_TYPE_PROJCS:N=e._pe.castObject(N,e._pe.PeProjcs);break;case e.PeDefs.PE_TYPE_GEOGTRAN:N=e._pe.castObject(N,e._pe.PeGeogtran);break;default:K&e.PeDefs.PE_TYPE_UNIT&&(N=e._pe.castObject(N,e._pe.PeUnit))}}return N};c.initialize=function(){e._pe.PeFactory.prototype.initialize(null)};c.coordsys=function(N){return h(e.PeDefs.PE_TYPE_COORDSYS,N)};c.factoryByType=h;c.fromString=function(N,
K){let F=null,M=V[N];M||(M={},V[N]=M);M.hasOwnProperty(K)?F=M[K]:(N=e._pe.PeFactory.prototype.fromString(N,K),e._pe.compare(N,e._pe.NULL)||(F=N,M[K]=F));return F=z(F)};c.geogcs=function(N){return h(e.PeDefs.PE_TYPE_GEOGCS,N)};c.geogtran=function(N){return h(e.PeDefs.PE_TYPE_GEOGTRAN,N)};c.getCode=function(N){return e._pe.PeFactory.prototype.getCode(N)};c.projcs=function(N){return h(e.PeDefs.PE_TYPE_PROJCS,N)};c.unit=function(N){return h(e.PeDefs.PE_TYPE_UNIT,N)}})(e.PeFactory||(e.PeFactory={}));e.PeGCSExtent=
null;e.PeGTlistExtended=void 0;(function(c){let h;c.init=function(){c.PE_GTLIST_OPTS_COMMON=e._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;h=e._pe._pe_getPeGTlistExtendedEntrySize()};c.getGTlist=function(L,V,z,N,K,F){let M=null;const P=new e._pe.PeInteger(F);try{const ca=e._pe.PeGTlistExtended.prototype.getGTlist(L,V,z,N,K,P);if(F=P.val)if(M=[ca],1<F){const C=e._pe.getPointer(ca);for(L=1;L<F;L++)M.push(e._pe.wrapPointer(C+h*L,e._pe.PeGTlistExtendedEntry))}}finally{e._pe.destroy(P)}return M}})(e.PeGTlistExtended||
(e.PeGTlistExtended={}));e.PeGTlistExtendedEntry=void 0;(function(c){c.destroy=function(h){if(h&&h.length){for(const L of h)r(L),L.getEntries().forEach(V=>{r(V);V=V.getGeogtran();r(V);V.getParameters().forEach(r);[V.getGeogcs1(),V.getGeogcs2()].forEach(z=>{r(z);const N=z.getDatum();r(N);r(N.getSpheroid());r(z.getPrimem());r(z.getUnit())})});e._pe.PeGTlistExtendedEntry.prototype.Delete(h[0])}}})(e.PeGTlistExtendedEntry||(e.PeGTlistExtendedEntry={}));e.PeGTTransformations=void 0;(function(c){c.geogToGeog=
function(h,L,V,z,N){e._pe.ensureCache.prepare();var K=w(V);const F=V===K;K=e._pe.ensureFloat64(K);let M=0;z&&(M=e._pe.ensureFloat64(z));(h=e._pe._pe_geog_to_geog(e._pe.getPointer(h),L,K,M,N))&&E(V,L,K,F);return h}})(e.PeGTTransformations||(e.PeGTTransformations={}));e.PeNotationDms=void 0;(function(c){const h=(V,z,N,K,F,M)=>{e._pe.ensureCache.prepare();switch(V){case "dd":var P=e._pe._pe_geog_to_dd;var ca=e.PeDefs.PE_DD_MAX;break;case "ddm":P=e._pe._pe_geog_to_ddm;ca=e.PeDefs.PE_DDM_MAX;break;case "dms":P=
e._pe._pe_geog_to_dms,ca=e.PeDefs.PE_DMS_MAX}V=0;z&&(V=e._pe.getPointer(z));z=w(K);z=e._pe.ensureFloat64(z);ca=B(N,ca);K=e._pe.ensureInt32(ca);if(F=P(V,N,z,F,K))for(P=0;P<N;P++)M[P]=e._pe.UTF8ToString(ca[P]);return F},L=(V,z,N,K,F)=>{e._pe.ensureCache.prepare();switch(V){case "dd":var M=e._pe._pe_dd_to_geog;break;case "ddm":M=e._pe._pe_ddm_to_geog;break;case "dms":M=e._pe._pe_dms_to_geog}V=0;z&&(V=e._pe.getPointer(z));z=K.map(P=>e._pe.ensureString(P));K=e._pe.ensureInt32(z);z=e._pe.ensureFloat64(Array(2*
N));(M=M(V,N,K,z))&&E(F,N,z);return M};c.geogToDms=function(V,z,N,K,F){return h("dms",V,z,N,K,F)};c.dmsToGeog=function(V,z,N,K){return L("dms",V,z,N,K)};c.geogToDdm=function(V,z,N,K,F){return h("ddm",V,z,N,K,F)};c.ddmToGeog=function(V,z,N,K){return L("ddm",V,z,N,K)};c.geogToDd=function(V,z,N,K,F){return h("dd",V,z,N,K,F)};c.ddToGeog=function(V,z,N,K){return L("dd",V,z,N,K)}})(e.PeNotationDms||(e.PeNotationDms={}));e.PeNotationMgrs=void 0;(function(c){c.init=function(){c.PE_MGRS_STYLE_NEW=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;
c.PE_MGRS_STYLE_OLD=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;c.PE_MGRS_STYLE_AUTO=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;c.PE_MGRS_180_ZONE_1_PLUS=e._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;c.PE_MGRS_ADD_SPACES=e._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};c.geogToMgrsExtended=function(h,L,V,z,N,K,F){e._pe.ensureCache.prepare();let M=0;h&&(M=e._pe.getPointer(h));h=w(V);V=e._pe.ensureFloat64(h);h=B(L,e.PeDefs.PE_MGRS_MAX);const P=e._pe.ensureInt32(h);if(z=e._pe._pe_geog_to_mgrs_extended(M,
L,V,z,N,K,P))for(N=0;N<L;N++)F[N]=e._pe.UTF8ToString(h[N]);return z};c.mgrsToGeogExtended=function(h,L,V,z,N){e._pe.ensureCache.prepare();let K=0;h&&(K=e._pe.getPointer(h));h=V.map(F=>e._pe.ensureString(F));V=e._pe.ensureInt32(h);h=e._pe.ensureFloat64(Array(2*L));(z=e._pe._pe_mgrs_to_geog_extended(K,L,V,z,h))&&E(N,L,h);return z}})(e.PeNotationMgrs||(e.PeNotationMgrs={}));e.PeNotationUsng=void 0;(function(c){c.geogToUsng=function(h,L,V,z,N,K,F){e._pe.ensureCache.prepare();let M=0;h&&(M=e._pe.getPointer(h));
h=w(V);V=e._pe.ensureFloat64(h);h=B(L,e.PeDefs.PE_MGRS_MAX);const P=e._pe.ensureInt32(h);if(z=e._pe._pe_geog_to_usng(M,L,V,z,N,K,P))for(N=0;N<L;N++)F[N]=e._pe.UTF8ToString(h[N]);return z};c.usngToGeog=function(h,L,V,z){e._pe.ensureCache.prepare();var N=0;h&&(N=e._pe.getPointer(h));h=V.map(K=>e._pe.ensureString(K));V=e._pe.ensureInt32(h);h=e._pe.ensureFloat64(Array(2*L));(N=e._pe._pe_usng_to_geog(N,L,V,h))&&E(z,L,h);return N}})(e.PeNotationUsng||(e.PeNotationUsng={}));e.PeNotationUtm=void 0;(function(c){c.init=
function(){c.PE_UTM_OPTS_NONE=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;c.PE_UTM_OPTS_ADD_SPACES=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;c.PE_UTM_OPTS_NS=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};c.geogToUtm=function(h,L,V,z,N){e._pe.ensureCache.prepare();var K=0;h&&(K=e._pe.getPointer(h));h=w(V);V=e._pe.ensureFloat64(h);h=B(L,e.PeDefs.PE_UTM_MAX);const F=e._pe.ensureInt32(h);if(z=e._pe._pe_geog_to_utm(K,L,V,z,F))for(K=0;K<L;K++)N[K]=e._pe.UTF8ToString(h[K]);return z};c.utmToGeog=
function(h,L,V,z,N){e._pe.ensureCache.prepare();let K=0;h&&(K=e._pe.getPointer(h));h=V.map(F=>e._pe.ensureString(F));V=e._pe.ensureInt32(h);h=e._pe.ensureFloat64(Array(2*L));(z=e._pe._pe_utm_to_geog(K,L,V,z,h))&&E(N,L,h);return z}})(e.PeNotationUtm||(e.PeNotationUtm={}));e.PePCSInfo=void 0;(function(c){const h=new Map;c.init=function(){c.PE_PCSINFO_OPTION_NONE=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;c.PE_PCSINFO_OPTION_DOMAIN=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;c.PE_POLE_OUTSIDE_BOUNDARY=
e._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;c.PE_POLE_POINT=e._pe.PePCSInfo.prototype.PE_POLE_POINT};c.generate=function(L,V=c.PE_PCSINFO_OPTION_DOMAIN){let z,N;h.has(L)&&(N=h.get(L),N[V]&&(z=N[V]));z||(z=e._pe.PePCSInfo.prototype.generate(L,V),N||(N=[],h.set(L,N)),N[V]=z);return z}})(e.PePCSInfo||(e.PePCSInfo={}));e.PeVersion=void 0;(function(c){c.versionString=function(){return e._pe.PeVersion.prototype.version_string()}})(e.PeVersion||(e.PeVersion={}));const x=Object.freeze({__proto__:null,
get _pe(){return e._pe},isLoaded:I,isSupported:y,load:n,get PeCSTransformations(){return e.PeCSTransformations},get PeDefs(){return e.PeDefs},get PeFactory(){return e.PeFactory},get PeGCSExtent(){return e.PeGCSExtent},get PeGTlistExtended(){return e.PeGTlistExtended},get PeGTlistExtendedEntry(){return e.PeGTlistExtendedEntry},get PeGTTransformations(){return e.PeGTTransformations},get PeNotationDms(){return e.PeNotationDms},get PeNotationMgrs(){return e.PeNotationMgrs},get PeNotationUsng(){return e.PeNotationUsng},
get PeNotationUtm(){return e.PeNotationUtm},get PePCSInfo(){return e.PePCSInfo},get PeVersion(){return e.PeVersion},_init:q});e._init=q;e.isLoaded=I;e.isSupported=y;e.load=n;e.pe=x})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(k,e,Y,Z,t){function I(g=E){return[g[0],g[1],g[2],g[3]]}function y(g,x){g!==x&&(g[0]=x[0],g[1]=x[1],g[2]=x[2],g[3]=x[3]);return g}function n(g){return Z.isNone(g)||g[0]>=
g[2]?0:g[2]-g[0]}function q(g){return g[1]>=g[3]?0:g[3]-g[1]}function r(g,x,c){return x>=g[0]&&c>=g[1]&&x<=g[2]&&c<=g[3]}function B(g){return null!=g&&4===g.length}const w=[Infinity,Infinity,-Infinity,-Infinity],E=[0,0,0,0];k.NEGATIVE_INFINITY=w;k.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];k.UNIT=[0,0,1,1];k.ZERO=E;k.allFinite=function(g){for(let x=0;4>x;x++)if(!isFinite(g[x]))return!1;return!0};k.area=function(g){return n(g)*q(g)};k.center=function(g,x=[0,0]){x[0]=(g[0]+g[2])/2;x[1]=
(g[1]+g[3])/2;return x};k.clone=function(g){return[g[0],g[1],g[2],g[3]]};k.contains=function(g,x){return x[0]>=g[0]&&x[2]<=g[2]&&x[1]>=g[1]&&x[3]<=g[3]};k.containsPoint=function(g,x){return r(g,x[0],x[1])};k.containsPointObject=function(g,x){return r(g,x.x,x.y)};k.containsPointWithMargin=function(g,x,c){return x[0]>=g[0]-c&&x[1]>=g[1]-c&&x[0]<=g[2]+c&&x[1]<=g[3]+c};k.containsXY=r;k.copy=y;k.create=I;k.distance=function(g,x){const c=(g[1]+g[3])/2,h=Math.max(Math.abs(x[0]-(g[0]+g[2])/2)-n(g)/2,0);g=
Math.max(Math.abs(x[1]-c)-q(g)/2,0);return Math.sqrt(h*h+g*g)};k.empty=function(g){return g?y(g,w):I(w)};k.equals=function(g,x){return B(g)&&B(x)?g[0]===x[0]&&g[1]===x[1]&&g[2]===x[2]&&g[3]===x[3]:g===x};k.expand=function(g,x,c){if(Z.isNone(x))y(c,g);else if("length"in x)if(B(x))c[0]=Math.min(g[0],x[0]),c[1]=Math.min(g[1],x[1]),c[2]=Math.max(g[2],x[2]),c[3]=Math.max(g[3],x[3]);else{if(2===x.length||3===x.length)c[0]=Math.min(g[0],x[0]),c[1]=Math.min(g[1],x[1]),c[2]=Math.max(g[2],x[0]),c[3]=Math.max(g[3],
x[1])}else switch(x.type){case "extent":c[0]=Math.min(g[0],x.xmin);c[1]=Math.min(g[1],x.ymin);c[2]=Math.max(g[2],x.xmax);c[3]=Math.max(g[3],x.ymax);break;case "point":c[0]=Math.min(g[0],x.x),c[1]=Math.min(g[1],x.y),c[2]=Math.max(g[2],x.x),c[3]=Math.max(g[3],x.y)}};k.expandPointInPlace=function(g,x){x[0]<g[0]&&(g[0]=x[0]);x[0]>g[2]&&(g[2]=x[0]);x[1]<g[1]&&(g[1]=x[1]);x[1]>g[3]&&(g[3]=x[1])};k.expandWithNestedArray=function(g,x,c=g){const h=x.length;let L=g[0],V=g[1],z=g[2];g=g[3];for(let N=0;N<h;N++){const K=
x[N];L=Math.min(L,K[0]);V=Math.min(V,K[1]);z=Math.max(z,K[0]);g=Math.max(g,K[1])}c[0]=L;c[1]=V;c[2]=z;c[3]=g;return c};k.fromExtent=function(g,x=I()){x[0]=g.xmin;x[1]=g.ymin;x[2]=g.xmax;x[3]=g.ymax;return x};k.fromValues=function(g,x,c,h,L=I()){L[0]=g;L[1]=x;L[2]=c;L[3]=h;return L};k.height=q;k.intersection=function(g,x,c){if(Z.isNone(x))return y(c,g);const h=x[0],L=x[1],V=x[2];x=x[3];c[0]=Y.clamp(g[0],h,V);c[1]=Y.clamp(g[1],L,x);c[2]=Y.clamp(g[2],h,V);c[3]=Y.clamp(g[3],L,x);return c};k.intersects=
function(g,x){return Math.max(x[0],g[0])<=Math.min(x[2],g[2])&&Math.max(x[1],g[1])<=Math.min(x[3],g[3])};k.intersectsSegment=function(g,x,c){const h=g[0],L=g[1],V=g[2];g=g[3];const {x:z,y:N}=x,{x:K,y:F}=c;var M=(ca,C)=>0>(F-N)*ca+(z-K)*C+(K*N-z*F);x=M(h,g);c=M(V,g);const P=M(V,L);M=M(h,L);return x===c&&c===P&&P===M&&M===x||z<h&&K<h||z>V&&K>V||N>g&&F>g||N<L&&F<L?!1:!0};k.intersectsSphere=function(g,x){const c=x[3];var h=Math.abs(x[0]-.5*(g[0]+g[2]));const L=.5*(g[2]-g[0]);if(h>c+L)return!1;var V=.5*
(g[3]-g[1]);g=Math.abs(x[1]-.5*(g[1]+g[3]));if(g>c+V)return!1;if(h<L||g<V)return!0;h-=L;V=g-V;return h*h+V*V<=c*c};k.is=B;k.isPoint=function(g){return(0===n(g)||!isFinite(g[0]))&&(0===q(g)||!isFinite(g[1]))};k.offset=function(g,x,c,h=g){h[0]=g[0]+x;h[1]=g[1]+c;h[2]=g[2]+x;h[3]=g[3]+c;return h};k.pad=function(g,x,c=g){c[0]=g[0]-x;c[1]=g[1]-x;c[2]=g[2]+x;c[3]=g[3]+x;return c};k.setMax=function(g,x,c=g){c[2]=x[0];c[3]=x[1];c!==g&&(c[0]=g[0],c[1]=g[1]);return g};k.setMin=function(g,x,c=g){c[0]=x[0];c[1]=
x[1];c!==g&&(c[2]=g[2],c[3]=g[3]);return c};k.size=function(g,x){x[0]=g[2]-g[0];x[1]=g[3]-g[1]};k.toExtent=function(g,x){return new t({xmin:g[0],ymin:g[1],xmax:g[2],ymax:g[3],spatialReference:x})};k.width=n;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(k,e){const Y=Math.PI/180;var Z=e.earth.radius;const t=e.earth.eccentricitySquared;Z={a1:Z*t,a2:Z*t*Z*t,a3:Z*t*t/2,a4:Z*t*Z*t*2.5,a5:Z*t+Z*t*t/2,a6:1-
t};e={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:e.earth.radius,f:e.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:e.moon.radius,f:e.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:e.mars.radius,f:e.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},
104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,
f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},
104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:e.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};k.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;k.earthEllipsoidConstants=Z;k.spheroids=e;k.toRadians=Y;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],
function(k){return function(){function e(Z){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(Z&&Z.steps)for(const t of Z.steps)t instanceof k?this.steps.push(t):this.steps.push(new k({wkid:t.wkid,wkt:t.wkt,isInverse:t.isInverse}))}e.cacheKey=function(Z,t){return[void 0!==Z.wkid&&null!==Z.wkid?Z.wkid.toString():"-1",void 0!==Z.wkt&&null!==Z.wkt?Z.wkt.toString():"",void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():""].join()};
e.fromGE=function(Z){const t=new e;let I="";for(const y of Z.steps)Z=k.fromGE(y),t.steps.push(Z),I+=Z.uid.toString()+",";t._cached_projection={};t._gtlistentry=null;t._chain=I;return t};var Y=e.prototype;Y.getInverse=function(){const Z=new e;Z.steps=[];for(let t=this.steps.length-1;0<=t;t--)Z.steps.push(this.steps[t].getInverse());return Z};Y.getGTListEntry=function(){let Z="";for(const t of this.steps)Z+=t.uid.toString()+",";Z!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=
Z);return this._gtlistentry};Y.assignCachedGe=function(Z,t,I){this._cached_projection[e.cacheKey(Z,t)]=I};Y.getCachedGeTransformation=function(Z,t){let I="";for(const y of this.steps)I+=y.uid.toString()+",";I!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=I);Z=this._cached_projection[e.cacheKey(Z,t)];return void 0===Z?null:Z};return e}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(k){let e=
0;return function(){function Y(Z=null){this.uid=e++;Z?(this._wkt=void 0!==Z.wkt?Z.wkt:null,this._wkid=void 0!==Z.wkid?Z.wkid:-1,this._isInverse=void 0!==Z.isInverse?!0===Z.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}Y.fromGE=function(Z){const t=new Y;t._wkt=Z.wkt;t._wkid=Z.wkid;t._isInverse=Z.isInverse;return t};Y.prototype.getInverse=function(){const Z=new Y;Z._wkt=this.wkt;Z._wkid=this._wkid;Z._isInverse=!this.isInverse;return Z};k._createClass(Y,[{key:"wkt",get:function(){return this._wkt},
set:function(Z){this._wkt=Z;this.uid=e++}},{key:"wkid",get:function(){return this._wkid},set:function(Z){this._wkid=Z;this.uid=e++}},{key:"isInverse",get:function(){return this._isInverse},set:function(Z){this._isInverse=Z;this.uid=e++}}]);return Y}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(k,e,Y,Z){k.getGeometryZScaler=function(t,I,y){if(e.isNone(I)||e.isNone(y)||y.vcsWkid||Z.equals(I,y))return null;
I=Y.getMetersPerVerticalUnitForSR(I);y=Y.getMetersPerVerticalUnitForSR(y);const n=I/y;if(1===n)return null;switch(t){case "point":case "esriGeometryPoint":return q=>{q&&null!=q.z&&(q.z*=n)};case "polyline":case "esriGeometryPolyline":return q=>{if(q)for(const r of q.paths)for(const B of r)2<B.length&&(B[2]*=n)};case "polygon":case "esriGeometryPolygon":return q=>{if(q)for(const r of q.rings)for(const B of r)2<B.length&&(B[2]*=n)};case "multipoint":case "esriGeometryMultipoint":return q=>{if(q)for(const r of q.points)2<
r.length&&(r[2]*=n)};case "extent":case "esriGeometryExtent":return q=>{q&&null!=q.zmin&&null!=q.zmax&&(q.zmin*=n,q.zmax*=n)};default:return null}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(k){let e=function(y,n,q){this.x=y;this.y=n;this.spatialReference=q;this.m=this.z=void 0},Y=function(y,n,q,r){this.rings=y;this.spatialReference=n;this.hasM=this.hasZ=void 0;q&&(this.hasZ=q);r&&(this.hasM=r)},Z=function(y,n,q,
r){this.paths=y;this.spatialReference=n;this.hasM=this.hasZ=void 0;q&&(this.hasZ=q);r&&(this.hasM=r)},t=function(y,n,q,r){this.points=y;this.spatialReference=n;this.hasM=this.hasZ=void 0;q&&(this.hasZ=q);r&&(this.hasM=r)},I=function(y,n,q,r,B){this.xmin=y;this.ymin=n;this.xmax=q;this.ymax=r;this.spatialReference=B;this.mmax=this.mmin=this.zmax=this.zmin=void 0};k.jsonAdapter={convertToGEGeometry:function(y,n){return null==n?null:y.convertJSONToGeometry(n)},exportPoint:function(y,n,q){q=new e(y.getPointX(n),
y.getPointY(n),q);const r=y.hasZ(n),B=y.hasM(n);r&&(q.z=y.getPointZ(n));B&&(q.m=y.getPointM(n));return q},exportPolygon:function(y,n,q){return new Y(y.exportPaths(n),q,y.hasZ(n),y.hasM(n))},exportPolyline:function(y,n,q){return new Z(y.exportPaths(n),q,y.hasZ(n),y.hasM(n))},exportMultipoint:function(y,n,q){return new t(y.exportPoints(n),q,y.hasZ(n),y.hasM(n))},exportExtent:function(y,n,q){var r=y.hasZ(n);const B=y.hasM(n);q=new I(y.getXMin(n),y.getYMin(n),y.getXMax(n),y.getYMax(n),q);r&&(r=y.getZExtent(n),
q.zmin=r.vmin,q.zmax=r.vmax);B&&(y=y.getMExtent(n),q.mmin=y.vmin,q.mmax=y.vmax);return q}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(k,e,Y){let Z=function(){function I(y=null,n={},q,r){this.geometry=y;this.attributes=n;this.centroid=q;this.objectId=r;this.geohashY=this.geohashX=this.displayId=0}I.prototype.weakClone=function(){const y=new I(this.geometry,
this.attributes,this.centroid,this.objectId);y.displayId=this.displayId;y.geohashX=this.geohashX;y.geohashY=this.geohashY;return y};return I}(),t=function(I){function y(){return I.apply(this,arguments)||this}e._inheritsLoose(y,I);return y}(Z);k.OptimizedFeature=Z;k.OptimizedFeatureWithGeometry=t;k.hasGeometry=function(I){return!(Y.isNone(I.geometry)||!I.geometry.coords||!I.geometry.coords.length)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(k){return function(){function e(Z=[],t=[],I=!1){this.lengths=null!=Z?Z:[];this.coords=null!=t?t:[];this.hasIndeterminateRingOrder=I}var Y=e.prototype;Y.forEachVertex=function(Z){let t=0;this.lengths.length||Z(this.coords[0],this.coords[1]);for(let I=0;I<this.lengths.length;I++){const y=this.lengths[I];for(let n=0;n<y;n++)Z(this.coords[2*(n+t)],this.coords[2*(n+t)+1]);t+=y}};Y.clone=function(Z){return Z?(Z.set(this.coords),new e(this.lengths.slice(),Z,this.hasIndeterminateRingOrder)):new e(this.lengths.slice(),
this.coords.slice(),this.hasIndeterminateRingOrder)};k._createClass(e,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((Z,t)=>Z+t)}}]);return e}()})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),
function(k,e,Y,Z,t,I,y,n,q,r){return function(){function B(E){this.geometryInfo=E;this._boundsStore=new q.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new Y;this.featureAdapter=r.optimizedFeatureQueryEngineAdapter}var w=B.prototype;w.add=function(E){this._add(E);this._emitChanged()};w.addMany=function(E){for(const g of E)this._add(g);this._emitChanged()};w.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};w.removeById=function(E){E=
this._featuresById.get(E);if(!E)return null;this._remove(E);this._emitChanged();return E};w.removeManyById=function(E){this._boundsStore.invalidateIndex();for(const g of E)(E=this._featuresById.get(g))&&this._remove(E);this._emitChanged()};w.forEachBounds=function(E,g,x){for(const c of E)(E=this._boundsStore.get(c.objectId))&&g(I.fromRect(x,E))};w.getFeature=function(E){return this._featuresById.get(E)};w.has=function(E){return this._featuresById.has(E)};w.forEach=function(E){this._featuresById.forEach(g=>
E(g))};w.forEachInBounds=function(E,g){this._boundsStore.forEachInBounds(E,x=>{g(this._featuresById.get(x))})};w.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};w.sweep=function(){let E=!1;this._featuresById.forEach((g,x)=>{this._markedIds.has(x)||(E=!0,this._remove(g))});this._markedIds.clear();E&&this._emitChanged()};w._emitChanged=function(){this.events.emit("changed",void 0)};w._add=function(E){if(E){var g=E.objectId;if(null==g)Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new e("featurestore:invalid-feature",
"feature id is missing",{feature:E}));else{var x=this._featuresById.get(g);this._markedIds.add(g);if(x){E.displayId=x.displayId;var c=this._boundsStore.get(g);this._boundsStore.delete(g)}else if(t.isSome(this.onFeatureAdd))this.onFeatureAdd(E);!t.isNone(E.geometry)&&E.geometry.coords&&E.geometry.coords.length?(c=n.getBoundsOptimizedGeometry(t.isSome(c)?c:y.create(),E.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),t.isSome(c)&&this._boundsStore.set(g,c)):this._boundsStore.set(g,null);this._featuresById.set(g,
E)}}};w._remove=function(E){if(t.isSome(this.onFeatureRemove))this.onFeatureRemove(E);this._markedIds.delete(E.objectId);this._boundsStore.delete(E.objectId);this._featuresById.delete(E.objectId);return E};k._createClass(B,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",
get:function(){if(!this.numFeatures)return null;const E=y.create(y.NEGATIVE_INFINITY);this._featuresById.forEach(g=>{if(g=this._boundsStore.get(g.objectId))E[0]=Math.min(g[0],E[0]),E[1]=Math.min(g[1],E[1]),E[2]=Math.max(g[2],E[2]),E[3]=Math.max(g[3],E[3])});return E}},{key:"storeStatistics",get:function(){let E=0;this._featuresById.forEach(g=>{t.isSome(g.geometry)&&g.geometry.coords&&(E+=g.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:E/(this.hasZ?this.hasM?4:3:
this.hasM?3:2)}}}]);return B}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(k,e,Y,Z,t){let I=function(){function y(){this._emitter=new y.EventEmitter(this)}var n=y.prototype;n.emit=function(q,r){return this._emitter.emit(q,r)};n.on=function(q,r){return this._emitter.on(q,r)};n.once=function(q,r){return this._emitter.once(q,r)};n.hasEventListener=function(q){return this._emitter.hasEventListener(q)};
return y}();(function(y){let n=function(){function r(w=null){this.target=w;this._listenersMap=null}var B=r.prototype;B.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};B.emit=function(w,E){w=this._listenersMap&&this._listenersMap.get(w);if(!w)return!1;const g=this.target||this;[...w].forEach(x=>{x.call(g,E)});return 0<w.length};B.on=function(w,E){if(Array.isArray(w)){var g=w.map(x=>this.on(x,E));return Z.handlesGroup(g)}if(-1<w.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);g=this._listenersMap.get(w)||[];g.push(E);this._listenersMap.set(w,g);return{remove:()=>{const x=this._listenersMap&&this._listenersMap.get(w)||[],c=x.indexOf(E);0<=c&&x.splice(c,1)}}};B.once=function(w,E){const g=this.on(w,x=>{g.remove();E.call(null,x)});return g};B.hasEventListener=function(w){w=this._listenersMap&&this._listenersMap.get(w);return null!=w&&0<w.length};return r}();y.EventEmitter=n;y.EventedMixin=r=>{r=function(B){function w(){var g=
B.apply(this,arguments)||this;g._emitter=new n;return g}k._inheritsLoose(w,B);var E=w.prototype;E.destroy=function(){this._emitter.clear()};E.emit=function(g,x){return this._emitter.emit(g,x)};E.on=function(g,x){return this._emitter.on(g,x)};E.once=function(g,x){return this._emitter.once(g,x)};E.hasEventListener=function(g){return this._emitter.hasEventListener(g)};return w}(r);return r=e.__decorate([t.subclass("esri.core.Evented")],r)};let q=function(r){function B(){var E=r.apply(this,arguments)||
this;E._emitter=new I.EventEmitter(k._assertThisInitialized(E));return E}k._inheritsLoose(B,r);var w=B.prototype;w.destroy=function(){this._emitter.clear()};w.emit=function(E,g){return this._emitter.emit(E,g)};w.on=function(E,g){return this._emitter.on(E,g)};w.once=function(E,g){return this._emitter.once(E,g)};w.hasEventListener=function(E){return this._emitter.hasEventListener(E)};return B}(Y);q=e.__decorate([t.subclass("esri.core.Evented")],q);y.EventedAccessor=q})(I||(I={}));return I})},"esri/geometry/support/aaBoundingBox":function(){define(["exports",
"../../core/maybe","../Extent","./aaBoundingRect"],function(k,e,Y,Z){function t(c=g){return[c[0],c[1],c[2],c[3],c[4],c[5]]}function I(c,h,L,V,z,N,K=t()){K[0]=c;K[1]=h;K[2]=L;K[3]=V;K[4]=z;K[5]=N;return K}function y(c){return c[0]>=c[3]?0:c[3]-c[0]}function n(c){return c[1]>=c[4]?0:c[4]-c[1]}function q(c){return c[2]>=c[5]?0:c[5]-c[2]}function r(c,h){return Math.max(h[0],c[0])<=Math.min(h[3],c[3])&&Math.max(h[1],c[1])<=Math.min(h[4],c[4])&&Math.max(h[2],c[2])<=Math.min(h[5],c[5])}function B(c,h){c[0]=
h[0];c[1]=h[1];c[2]=h[2];c[3]=h[3];c[4]=h[4];c[5]=h[5];return c}function w(c){return 6===c.length}const E=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],g=[0,0,0,0,0,0],x=t();k.NEGATIVE_INFINITY=E;k.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];k.ZERO=g;k.allFinite=function(c){for(let h=0;6>h;h++)if(!isFinite(c[h]))return!1;return!0};k.center=function(c,h=[0,0,0]){h[0]=c[0]+y(c)/2;h[1]=c[1]+n(c)/2;h[2]=c[2]+q(c)/2;return h};k.contains=function(c,h){return h[0]>=
c[0]&&h[1]>=c[1]&&h[2]>=c[2]&&h[3]<=c[3]&&h[4]<=c[4]&&h[5]<=c[5]};k.containsPoint=function(c,h){return h[0]>=c[0]&&h[1]>=c[1]&&h[2]>=c[2]&&h[0]<=c[3]&&h[1]<=c[4]&&h[2]<=c[5]};k.containsPointWithMargin=function(c,h,L){return h[0]>=c[0]-L&&h[1]>=c[1]-L&&h[2]>=c[2]-L&&h[0]<=c[3]+L&&h[1]<=c[4]+L&&h[2]<=c[5]+L};k.create=t;k.depth=n;k.diameter=function(c){const h=y(c),L=q(c);c=n(c);return Math.sqrt(h*h+L*L+c*c)};k.empty=function(c){return c?B(c,E):t(E)};k.equals=function(c,h,L){if(e.isNone(c)||e.isNone(h))return c===
h;if(!w(c)||!w(h))return!1;if(L)for(let V=0;V<c.length;V++){if(!L(c[V],h[V]))return!1}else for(L=0;L<c.length;L++)if(c[L]!==h[L])return!1;return!0};k.expandWithAABB=function(c,h){c[0]=Math.min(c[0],h[0]);c[1]=Math.min(c[1],h[1]);c[2]=Math.min(c[2],h[2]);c[3]=Math.max(c[3],h[3]);c[4]=Math.max(c[4],h[4]);c[5]=Math.max(c[5],h[5])};k.expandWithBuffer=function(c,h,L=0,V=h.length/3){let z=c[0],N=c[1],K=c[2],F=c[3],M=c[4],P=c[5];for(let ca=0;ca<V;ca++)z=Math.min(z,h[L+3*ca]),N=Math.min(N,h[L+3*ca+1]),K=
Math.min(K,h[L+3*ca+2]),F=Math.max(F,h[L+3*ca]),M=Math.max(M,h[L+3*ca+1]),P=Math.max(P,h[L+3*ca+2]);c[0]=z;c[1]=N;c[2]=K;c[3]=F;c[4]=M;c[5]=P};k.expandWithNestedArray=function(c,h,L){const V=h.length;let z=c[0],N=c[1],K=c[2],F=c[3],M=c[4],P=c[5];if(L)for(L=0;L<V;L++){var ca=h[L];z=Math.min(z,ca[0]);N=Math.min(N,ca[1]);K=Math.min(K,ca[2]);F=Math.max(F,ca[0]);M=Math.max(M,ca[1]);P=Math.max(P,ca[2])}else for(L=0;L<V;L++)ca=h[L],z=Math.min(z,ca[0]),N=Math.min(N,ca[1]),F=Math.max(F,ca[0]),M=Math.max(M,
ca[1]);c[0]=z;c[1]=N;c[2]=K;c[3]=F;c[4]=M;c[5]=P};k.expandWithOffset=function(c,h,L,V){c[0]=Math.min(c[0],c[0]+h);c[3]=Math.max(c[3],c[3]+h);c[1]=Math.min(c[1],c[1]+L);c[4]=Math.max(c[4],c[4]+L);c[2]=Math.min(c[2],c[2]+V);c[5]=Math.max(c[5],c[5]+V)};k.expandWithRect=function(c,h){c[0]=Math.min(c[0],h[0]);c[1]=Math.min(c[1],h[1]);c[3]=Math.max(c[3],h[2]);c[4]=Math.max(c[4],h[3])};k.expandWithVec3=function(c,h){c[0]=Math.min(c[0],h[0]);c[1]=Math.min(c[1],h[1]);c[2]=Math.min(c[2],h[2]);c[3]=Math.max(c[3],
h[0]);c[4]=Math.max(c[4],h[1]);c[5]=Math.max(c[5],h[2])};k.fromExtent=function(c,h=t()){h[0]=c.xmin;h[1]=c.ymin;h[2]=c.zmin;h[3]=c.xmax;h[4]=c.ymax;h[5]=c.zmax;return h};k.fromMinMax=function(c,h,L=t()){L[0]=c[0];L[1]=c[1];L[2]=c[2];L[3]=h[0];L[4]=h[1];L[5]=h[2];return L};k.fromRect=function(c,h){c[0]=h[0];c[1]=h[1];c[2]=Number.NEGATIVE_INFINITY;c[3]=h[2];c[4]=h[3];c[5]=Number.POSITIVE_INFINITY;return c};k.fromValues=I;k.getMax=function(c,h){h[0]=c[3];h[1]=c[4];h[2]=c[5];return h};k.getMin=function(c,
h){h[0]=c[0];h[1]=c[1];h[2]=c[2];return h};k.height=q;k.intersects=r;k.intersectsClippingArea=function(c,h){return e.isNone(h)?!0:r(c,h)};k.is=w;k.isPoint=function(c){return 0===y(c)&&0===n(c)&&0===q(c)};k.maximumDimension=function(c){return Math.max(y(c),q(c),n(c))};k.offset=function(c,h,L,V,z=c){z[0]=c[0]+h;z[1]=c[1]+L;z[2]=c[2]+V;z[3]=c[3]+h;z[4]=c[4]+L;z[5]=c[5]+V;return z};k.scale=function(c,h,L=c){const V=c[0]+y(c)/2,z=c[1]+n(c)/2,N=c[2]+q(c)/2;L[0]=V+(c[0]-V)*h;L[1]=z+(c[1]-z)*h;L[2]=N+(c[2]-
N)*h;L[3]=V+(c[3]-V)*h;L[4]=z+(c[4]-z)*h;L[5]=N+(c[5]-N)*h;return L};k.set=B;k.setMax=function(c,h,L=c){L[3]=h[0];L[4]=h[1];L[5]=h[2];L!==c&&(L[0]=c[0],L[1]=c[1],L[2]=c[2]);return c};k.setMin=function(c,h,L=c){L[0]=h[0];L[1]=h[1];L[2]=h[2];L!==c&&(L[3]=c[3],L[4]=c[4],L[5]=c[5]);return L};k.size=function(c,h=[0,0,0]){h[0]=y(c);h[1]=n(c);h[2]=q(c);return h};k.toExtent=function(c,h){return isFinite(c[2])||isFinite(c[5])?new Y({xmin:c[0],xmax:c[3],ymin:c[1],ymax:c[4],zmin:c[2],zmax:c[5],spatialReference:h}):
new Y({xmin:c[0],xmax:c[3],ymin:c[1],ymax:c[4],spatialReference:h})};k.toRect=function(c,h){h||(h=Z.create());h[0]=c[0];h[1]=c[1];h[2]=c[3];h[3]=c[4];return h};k.width=y;k.wrap=function(c,h,L,V,z,N){return I(c,h,L,V,z,N,x)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(k,e,Y,Z,t,I,y,n){function q(l,D){return l?D?4:3:D?3:2}function r(l,D,S,T){if(l){if(S)return D&&T?b:Fa;if(D&&T)return Na}else if(D&&T)return Fa;return La}function B({scale:l,translate:D},S){return Math.round((S-D[0])/l[0])}function w({scale:l,translate:D},S){return Math.round((D[1]-S)/l[1])}function E({scale:l,translate:D},S){return S*l[0]+D[0]}function g({scale:l,translate:D},S){return D[1]-S*l[1]}function x(l){l=l.coords;return{x:l[0],y:l[1]}}function c(l,D){l.coords[0]=D.x;l.coords[1]=
D.y;return l}function h(l){l=l.coords;return{x:l[0],y:l[1],z:l[2]}}function L(l,D){l.coords[0]=D.x;l.coords[1]=D.y;l.coords[2]=D.z;return l}function V(l){l=l.coords;return{x:l[0],y:l[1],m:l[2]}}function z(l,D){l.coords[0]=D.x;l.coords[1]=D.y;l.coords[2]=D.m;return l}function N(l){l=l.coords;return{x:l[0],y:l[1],z:l[2],m:l[3]}}function K(l,D){l.coords[0]=D.x;l.coords[1]=D.y;l.coords[2]=D.z;l.coords[3]=D.m;return l}function F(l,D){return l&&D?K:l?L:D?z:c}function M(l,D,S,T,ha){S=F(S,T);for(const ia of D){const {geometry:J,
attributes:Q}=ia;let ea;J&&(ea=S(new n,J));l.push(new I.OptimizedFeature(ea,Q,null,Q[ha]))}return l}function P(l,D,S,T){for(const ha of D){const {geometry:ia,attributes:J}=ha;let Q;ia&&(Q=ca(ia,S,T));l.push({attributes:J,geometry:Q})}return l}function ca(l,D,S){if(Z.isNone(l))return null;const T=q(D,S),ha=[];for(let ia=0;ia<l.coords.length;ia+=T){const J=[];for(let Q=0;Q<T;Q++)J.push(l.coords[ia+Q]);ha.push(J)}return D?S?{points:ha,hasZ:D,hasM:S}:{points:ha,hasZ:D}:S?{points:ha,hasM:S}:{points:ha}}
function C(l,D,S,T,ha){S=q(S,T);for(const ia of D){D=ia.geometry;T=ia.attributes;let J;D&&(J=G(new n,D,S));l.push(new I.OptimizedFeature(J,T,null,T[ha]))}return l}function G(l,D,S=q(D.hasZ,D.hasM)){l.lengths[0]=D.points.length;const T=l.coords;let ha=0;for(const ia of D.points)for(D=0;D<S;D++)T[ha++]=ia[D];return l}function R(l,D,S){if(!l)return null;const T=q(D,S),{coords:ha,lengths:ia}=l;l=[];let J=0;for(const Q of ia){const ea=[];for(let ra=0;ra<Q;ra++){const sa=[];for(let xa=0;xa<T;xa++)sa.push(ha[J++]);
ea.push(sa)}l.push(ea)}return D?S?{paths:l,hasZ:D,hasM:S}:{paths:l,hasZ:D}:S?{paths:l,hasM:S}:{paths:l}}function aa(l,D,S,T,ha){S=q(S,T);for(const ia of D){D=ia.geometry;T=ia.attributes;let J;D&&(J=H(new n,D,S));l.push(new I.OptimizedFeature(J,T,null,T[ha]))}return l}function H(l,D,S=q(D.hasZ,D.hasM)){const {lengths:T,coords:ha}=l;let ia=0;for(const J of D.paths){for(const Q of J)for(D=0;D<S;D++)ha[ia++]=Q[D];T.push(J.length)}return l}function v(l,D,S){if(!l)return null;const T=q(D,S),{coords:ha,
lengths:ia}=l;l=[];let J=0;for(const Q of ia){const ea=[];for(let ra=0;ra<Q;ra++){const sa=[];for(let xa=0;xa<T;xa++)sa.push(ha[J++]);ea.push(sa)}l.push(ea)}return D?S?{rings:l,hasZ:D,hasM:S}:{rings:l,hasZ:D}:S?{rings:l,hasM:S}:{rings:l}}function d(l,D,S,T,ha){for(const ia of D){D=ia.geometry;const J=ia.centroid,Q=ia.attributes;let ea;D&&(ea=m(new n,D,S,T));Z.isSome(J)?l.push(new I.OptimizedFeature(ea,Q,c(new n,J),Q[ha])):l.push(new I.OptimizedFeature(ea,Q,null,Q[ha]))}return l}function m(l,D,S=D.hasZ,
T=D.hasM){O(l,D.rings,S,T);return l}function O(l,D,S,T){S=q(S,T);const {lengths:ha,coords:ia}=l;T=0;ha.length=ia.length=0;for(const J of D){for(const Q of J)for(D=0;D<S;D++)ia[T++]=Q[D];ha.push(J.length)}return l}function W(l,D,S,T,ha,ia){l.length=0;if(!S){for(const J of D)l.push(new I.OptimizedFeature(null,J.attributes,null,J.attributes[ia]));return l}switch(S){case "esriGeometryPoint":return M(l,D,T,ha,ia);case "esriGeometryMultipoint":return C(l,D,T,ha,ia);case "esriGeometryPolyline":return aa(l,
D,T,ha,ia);case "esriGeometryPolygon":return d(l,D,T,ha,ia);default:wa.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${S}'`)),l.length=0}return l}function ka(l,D,S,T){l=l&&("coords"in l?l:l.geometry);if(Z.isNone(l))return null;switch(D){case "esriGeometryPoint":return D=x,S&&T?D=N:S?D=h:T&&(D=V),D(l);case "esriGeometryMultipoint":return ca(l,S,T);case "esriGeometryPolyline":return R(l,S,T);case "esriGeometryPolygon":return v(l,S,T);default:wa.error("convertToGeometry:unknown-geometry",
new e(`Unable to parse unknown geometry type '${D}'`))}}function oa(l,D,S,T,ha){l.length=0;if(Z.isNone(S)){for(const Q of D)l.push({attributes:Q.attributes});return l}switch(S){case "esriGeometryPoint":var ia=x;T&&ha?ia=N:T?ia=h:ha&&(ia=V);for(var J of D){const {geometry:Q,attributes:ea}=J;T=Z.isSome(Q)?ia(Q):null;l.push({attributes:ea,geometry:T})}break;case "esriGeometryMultipoint":return P(l,D,T,ha);case "esriGeometryPolyline":for(const Q of D){const {geometry:ea,attributes:ra}=Q;let sa;Z.isSome(ea)&&
(sa=R(ea,T,ha));l.push({attributes:ra,geometry:sa})}break;case "esriGeometryPolygon":for(ia of D){const {geometry:Q,attributes:ea,centroid:ra}=ia;let sa;Z.isSome(Q)&&(sa=v(Q,T,ha));Z.isSome(ra)?(J=x(ra),l.push({attributes:ea,centroid:J,geometry:sa})):l.push({attributes:ea,geometry:sa})}break;default:wa.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${S}'`))}return l}function ma(l,D,S,T,ha,ia,J=S,Q=T){l.lengths.length&&(l.lengths.length=0);l.coords.length&&
(l.coords.length=0);if(Z.isNone(D)||!D.coords.length)return null;ha=Da[ha];const {coords:ea,lengths:ra}=D;D=q(S,T);const sa=q(S&&J,T&&Q);S=r(S,T,J,Q);if(!ra.length)return S(l.coords,ea,0,0,B(ia,ea[0]),w(ia,ea[1])),l.lengths.length&&(l.lengths.length=0),l.coords.length=D,l;let xa,za=0,Ba,Ja=0;for(const Ia of ra){if(Ia<ha)continue;let Ga=0;Ba=Ja;Q=T=B(ia,ea[za]);xa=J=w(ia,ea[za+1]);S(l.coords,ea,Ba,za,Q,xa);Ga++;za+=D;Ba+=sa;for(let Ea=1;Ea<Ia;Ea++,za+=D)if(Q=B(ia,ea[za]),xa=w(ia,ea[za+1]),Q!==T||xa!==
J)S(l.coords,ea,Ba,za,Q-T,xa-J),Ba+=sa,Ga++,T=Q,J=xa;Ga>=ha&&(l.lengths.push(Ga),Ja=Ba)}l.coords.length=Ja;return l.coords.length?l:null}function da(l,D,S,T,ha,ia,J){let Q=T,ea=0;for(let sa=ia+S;sa<J;sa+=S){{var ra=D[sa];const xa=D[sa+1],za=D[J],Ba=D[J+1];let Ja=D[ia],Ia=D[ia+1],Ga=za-Ja,Ea=Ba-Ia;if(0!==Ga||0!==Ea){const Ha=((ra-Ja)*Ga+(xa-Ia)*Ea)/(Ga*Ga+Ea*Ea);1<Ha?(Ja=za,Ia=Ba):0<Ha&&(Ja+=Ga*Ha,Ia+=Ea*Ha)}Ga=ra-Ja;Ea=xa-Ia;ra=Ga*Ga+Ea*Ea}ra>Q&&(ea=sa,Q=ra)}Q>T&&(ea-ia>S&&da(l,D,S,T,ha,ia,ea),ha(l,
D,l.length,ea,D[ea],D[ea+1]),J-ea>S&&da(l,D,S,T,ha,ea,J))}function la(l,D,S,T,ha){const {coords:ia,lengths:J}=D,Q=S?T?b:Fa:T?Fa:La;S=q(S,T);if(!ia.length)return l!==D&&(l.lengths.length=0,l.coords.length=0),l;if(!J.length)return Q(l.coords,ia,0,0,E(ha,ia[0]),g(ha,ia[1])),l!==D&&(l.lengths.length=0,l.coords.length=S),l;const [ea,ra]=ha.scale;T=0;for(let sa=0;sa<J.length;sa++){const xa=J[sa];l.lengths[sa]=xa;let za=E(ha,ia[T]),Ba=g(ha,ia[T+1]);Q(l.coords,ia,T,T,za,Ba);T+=S;for(let Ja=1;Ja<xa;Ja++,T+=
S)za+=ia[T]*ea,Ba-=ia[T+1]*ra,Q(l.coords,ia,T,T,za,Ba)}l!==D&&(l.lengths.length=J.length,l.coords.length=ia.length);return l}function qa(l,D,S,T){let ha=0,ia=l[T*D],J=l[T*(D+1)];for(let Q=1;Q<S;Q++){const ea=ia+l[T*(D+Q)],ra=J+l[T*(D+Q)+1],sa=(ea-ia)*(ra+J);ia=ea;J=ra;ha+=sa}return.5*ha}const wa=Y.getLogger("esri.layers.graphics.featureConversionUtils"),Da={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},La=(l,D,S,T,ha,ia)=>{l[S]=ha;l[S+1]=ia},Fa=(l,D,S,
T,ha,ia)=>{l[S]=ha;l[S+1]=ia;l[S+2]=D[T+2]},Na=(l,D,S,T,ha,ia)=>{l[S]=ha;l[S+1]=ia;l[S+2]=D[T+3]},b=(l,D,S,T,ha,ia)=>{l[S]=ha;l[S+1]=ia;l[S+2]=D[T+2];l[S+3]=D[T+3]},p=[],fa=[];k.convertFromFeature=function(l,D,S,T,ha){p[0]=l;[l]=W(fa,p,D,S,T,ha);p.length=fa.length=0;return l};k.convertFromFeatureSet=function(l,D){const S=new y,{hasM:T,hasZ:ha,features:ia,objectIdFieldName:J,spatialReference:Q,geometryType:ea,exceededTransferLimit:ra,transform:sa,fields:xa}=l;xa&&(S.fields=xa);S.geometryType=ea;S.objectIdFieldName=
J||D;S.spatialReference=Q;if(!S.objectIdFieldName)return wa.error(new e("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),S;ia&&W(S.features,ia,ea,ha,T,S.objectIdFieldName);ra&&(S.exceededTransferLimit=ra);T&&(S.hasM=T);ha&&(S.hasZ=ha);sa&&(S.transform=sa);return S};k.convertFromFeatures=W;k.convertFromGeometry=function(l,D,S){if(Z.isNone(l))return null;const T=new n;"hasZ"in l&&null==D&&(D=l.hasZ);"hasM"in l&&null==S&&(S=l.hasM);if(t.isPoint(l))return F(null!=D?D:null!=
l.z,null!=S?S:null!=l.m)(T,l);if(t.isPolygon(l))return m(T,l,D,S);if(t.isPolyline(l))return H(T,l,q(D,S));if(t.isMultipoint(l))return G(T,l,q(D,S));wa.error("convertFromGeometry:unknown-geometry",new e(`Unable to parse unknown geometry type '${l}'`))};k.convertFromGraphics=function(l,D,S,T,ha,ia){const J=l.length;switch(S){case "esriGeometryPoint":M(l,D,T,ha,ia);break;case "esriGeometryMultipoint":C(l,D,T,ha,ia);break;case "esriGeometryPolyline":aa(l,D,T,ha,ia);break;case "esriGeometryPolygon":d(l,
D,T,ha,ia);break;default:wa.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${S}'`))}for(T=0;T<D.length;T++)l[T+J].geometryType=S,l[T+J].insertAfter=D[T].insertAfter,l[T+J].groupId=D[T].groupId;return l};k.convertFromMultipoint=G;k.convertFromMultipointFeatures=C;k.convertFromNestedArray=O;k.convertFromPoint=function(l,D,S=F(null!=D.z,null!=D.m)){return S(l,D)};k.convertFromPointFeatures=M;k.convertFromPolygon=m;k.convertFromPolyline=H;k.convertFromPolylineFeatures=
aa;k.convertToFeature=function(l,D,S,T){fa[0]=l;oa(p,fa,D,S,T);l=p[0];p.length=fa.length=0;return l};k.convertToFeatureSet=function(l){const {objectIdFieldName:D,spatialReference:S,transform:T,fields:ha,hasM:ia,hasZ:J,features:Q,geometryType:ea,exceededTransferLimit:ra,uniqueIdField:sa,queryGeometry:xa,queryGeometryType:za}=l;l=oa([],Q,ea,J,ia);const Ba=ka(xa,za,!1,!1);l={features:l,fields:ha,geometryType:ea,objectIdFieldName:D,spatialReference:S,uniqueIdField:sa,queryGeometry:Ba};T&&(l.transform=
T);ra&&(l.exceededTransferLimit=ra);ia&&(l.hasM=ia);J&&(l.hasZ=J);return l};k.convertToFeatures=oa;k.convertToGeometry=ka;k.convertToMultipoint=ca;k.convertToMultipointFeatures=P;k.convertToPoint=function(l,D,S){return l?D?S?N(l):h(l):S?V(l):x(l):null};k.convertToPolygon=v;k.convertToPolyline=R;k.deltaDecodeGeometry=function(l,D){if(Z.isNone(l))return null;const S=l.clone(),T=l.coords;l=l.lengths;let ha=0;for(let Q=0;Q<l.length;Q++){const ea=l[Q];var ia=T[D*ha],J=T[D*ha+1];for(let ra=1;ra<ea;ra++)ia+=
T[D*(ha+ra)],J+=T[D*(ha+ra)+1],S.coords[D*(ha+ra)]=ia,S.coords[D*(ha+ra)+1]=J;ha+=ea}return S};k.deltaEncodeGeometry=function(l,D){const S=l.clone(),T=l.coords;l=l.lengths;let ha=0;for(let J=0;J<l.length;J++){const Q=l[J];let ea=T[D*ha];var ia=T[D*ha+1];for(let ra=1;ra<Q;ra++){const sa=T[D*(ha+ra)],xa=T[D*(ha+ra)+1];ia=xa-ia;S.coords[D*(ha+ra)]=sa-ea;S.coords[D*(ha+ra)+1]=ia;ea=sa;ia=xa}ha+=Q}return S};k.generalizeOptimizedGeometry=function(l,D,S,T,ha,ia,J=S,Q=T){l.lengths.length&&(l.lengths.length=
0);l.coords.length&&(l.coords.length=0);if(!D||!D.coords.length)return null;ha=Da[ha];const {coords:ea,lengths:ra}=D;D=q(S,T);const sa=q(S&&J,T&&Q);S=r(S,T,J,Q);if(!ra.length)return S(l.coords,ea,0,0,ea[0],ea[1]),l.lengths.length&&(l.lengths.length=0),l.coords.length=D,l;T=0;ia*=ia;for(const xa of ra){if(xa<ha){T+=xa*D;continue}J=l.coords.length/sa;Q=T;const za=T+(xa-1)*D;S(l.coords,ea,l.coords.length,Q,ea[Q],ea[Q+1]);da(l.coords,ea,D,ia,S,Q,za);S(l.coords,ea,l.coords.length,za,ea[za],ea[za+1]);Q=
l.coords.length/sa-J;Q>=ha?l.lengths.push(Q):l.coords.length=J*sa;T+=xa*D}return l.coords.length?l:null};k.getBoundsOptimizedGeometry=function(l,D,S,T){if(Z.isNone(D)||!D.coords||!D.coords.length)return null;S=q(S,T);let ha=T=Number.POSITIVE_INFINITY,ia=Number.NEGATIVE_INFINITY,J=Number.NEGATIVE_INFINITY;if(D&&D.coords){D=D.coords;for(let Q=0;Q<D.length;Q+=S){const ea=D[Q],ra=D[Q+1];T=Math.min(T,ea);ia=Math.max(ia,ea);ha=Math.min(ha,ra);J=Math.max(J,ra)}}l[0]=T;l[1]=ha;l[2]=ia;l[3]=J;return l};k.getQuantizedArea=
function(l,D){const {coords:S,lengths:T}=l;let ha=l=0;for(let ia=0;ia<T.length;ia++)ha+=qa(S,l,T[ia],D),l+=ia;return Math.abs(ha)};k.getQuantizedBoundsOptimizedGeometry=function(l,D,S,T){S=q(S,T);const {lengths:ha,coords:ia}=D;T=D=Number.POSITIVE_INFINITY;let J=Number.NEGATIVE_INFINITY,Q=Number.NEGATIVE_INFINITY,ea=0;for(const ra of ha){let sa=ia[ea],xa=ia[ea+1];D=Math.min(sa,D);T=Math.min(xa,T);J=Math.max(sa,J);Q=Math.max(xa,Q);ea+=S;for(let za=1;za<ra;za++,ea+=S){const Ba=ia[ea],Ja=ia[ea+1];sa+=
Ba;xa+=Ja;0>Ba&&(D=Math.min(D,sa));0<Ba&&(J=Math.max(J,sa));0>Ja?T=Math.min(T,xa):0<Ja&&(Q=Math.max(Q,xa))}}l[0]=D;l[1]=T;l[2]=J;l[3]=Q;return l};k.getSignedQuantizedRingArea=qa;k.quantizeOptimizedFeatureSet=function(l,D){const {geometryType:S,features:T,hasM:ha,hasZ:ia}=D;if(!l)return D;for(let J=0;J<T.length;J++){const Q=T[J],ea=Q.weakClone();ea.geometry=new n;ma(ea.geometry,Q.geometry,ha,ia,S,l);Q.centroid&&(ea.centroid=new n,ma(ea.centroid,Q.centroid,ha,ia,"esriGeometryPoint",l));T[J]=ea}D.transform=
l;return D};k.quantizeOptimizedGeometry=ma;k.quantizeX=B;k.quantizeY=w;k.removeCollinearVectices=function(l,D,S,T,ha){if(!D||!D.coords||!D.coords.length)return null;S=Da[S];const {coords:ia,lengths:J}=D;D=r(T,ha,T,ha);T=q(T,ha);let Q=ha=0,ea=0,ra=0;for(const za of J){Q=ra;D(l.coords,ia,Q,ha,ia[ha],ia[ha+1]);ha+=T;var sa=ia[ha];let Ba=ia[ha+1],Ja=sa,Ia=Ba;var xa=Ba/sa;Q+=T;D(l.coords,ia,Q,ha,Ja,Ia);ha+=T;for(let Ga=2;Ga<za;Ga++){sa=ia[ha];Ba=ia[ha+1];const Ea=Ba/sa,Ha=xa===Ea||!isFinite(xa)&&!isFinite(Ea);
xa=Ha&&isFinite(Ea)?0<=xa&&0<=Ea||0>=xa&&0>=Ea:0<=Ia&&0<=Ba||0>=Ia&&0>=Ba;Ha&&xa?(Ja+=sa,Ia+=Ba):(Ja=sa,Ia=Ba,Q+=T);D(l.coords,ia,Q,ha,Ja,Ia);ha+=T;xa=Ea}Q+=T;sa=(Q-ra)/T;sa>=S&&(l.lengths[ea]=sa,ra=Q,ea++)}l.coords.length>ra&&(l.coords.length=ra);l.lengths.length>ea&&(l.lengths.length=ea);return l.coords.length&&l.lengths.length?l:null};k.removeZMValues=function(l,D,S,T,ha,ia){const J=q(S,T);S=r(S,T,ha,ia);T=D.coords;l.coords.length=0;l.lengths.length=0;l.lengths.push(...D.lengths);for(D=0;D<T.length;D+=
J)S(l.coords,T,l.coords.length,D,T[D],T[D+1]);return l};k.unquantizeOptimizedFeatureSet=function(l){const {transform:D,features:S,hasM:T,hasZ:ha}=l;if(!D)return l;for(const ia of S)Z.isSome(ia.geometry)&&la(ia.geometry,ia.geometry,T,ha,D),Z.isSome(ia.centroid)&&la(ia.centroid,ia.centroid,T,ha,D);l.transform=null;return l};k.unquantizeOptimizedGeometry=la;k.unquantizeX=E;k.unquantizeY=g;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function k(){this.spatialReference=
this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}k.prototype.weakClone=function(){const e=new k;e.objectIdFieldName=this.objectIdFieldName;e.globalIdFieldName=this.globalIdFieldName;e.geohashFieldName=this.geohashFieldName;e.geometryProperties=this.geometryProperties;
e.geometryType=this.geometryType;e.spatialReference=this.spatialReference;e.hasZ=this.hasZ;e.hasM=this.hasM;e.features=this.features;e.fields=this.fields;e.transform=this.transform;e.exceededTransferLimit=this.exceededTransferLimit;e.uniqueIdField=this.uniqueIdField;e.queryGeometry=this.queryGeometry;e.queryGeometryType=this.queryGeometryType;return e};return k}()})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../core/libs/rbush/PooledRBush"],function(k,
e,Y){function Z(y,n,q){t.minX=n[0];t.minY=n[1];t.maxX=n[2];t.maxY=n[3];y.search(t,q)}const t={minX:0,minY:0,maxX:0,maxY:0};let I=function(){function y(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new Y.PooledRBush(9,e("esri-csp-restrictions")?q=>({minX:q[0],minY:q[1],maxX:q[2],maxY:q[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const q=Array(this._idByBounds.size);let r=0;this._idByBounds.forEach((B,w)=>
{q[r++]=w});this._indexInvalid=!1;this._index.clear();this._index.load(q)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(q=>this._idByBounds.has(q))),this._boundsToLoad.length=0)}}var n=y.prototype;n.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};n.delete=function(q){const r=this._boundsById.get(q);this._boundsById.delete(q);r&&(this._idByBounds.delete(r),this._indexInvalid||this._index.remove(r))};
n.forEachInBounds=function(q,r){this._loadIndex();Z(this._index,q,B=>r(this._idByBounds.get(B)))};n.get=function(q){return this._boundsById.get(q)};n.has=function(q){return this._boundsById.has(q)};n.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};n.set=function(q,r){if(!this._indexInvalid){const B=this._boundsById.get(q);B&&(this._index.remove(B),this._idByBounds.delete(B))}this._boundsById.set(q,r);r&&(this._idByBounds.set(r,q),this._indexInvalid||
(this._boundsToLoad.push(r),5E4<this._boundsToLoad.length&&this._loadIndex()))};return y}();k.BoundsStore=I;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(k,e,Y,Z,t,I){function y(P,ca){n(P,0,P.children.length,ca,P)}function n(P,ca,C,G,R){R||(R=new F([]));R.minX=Infinity;R.minY=Infinity;R.maxX=-Infinity;
R.maxY=-Infinity;for(let aa=ca,H;aa<C;aa++)H=P.children[aa],q(R,P.leaf?G(H):H);return R}function q(P,ca){P.minX=Math.min(P.minX,ca.minX);P.minY=Math.min(P.minY,ca.minY);P.maxX=Math.max(P.maxX,ca.maxX);P.maxY=Math.max(P.maxY,ca.maxY)}function r(P,ca){return P.minX-ca.minX}function B(P,ca){return P.minY-ca.minY}function w(P){return(P.maxX-P.minX)*(P.maxY-P.minY)}function E(P){return P.maxX-P.minX+(P.maxY-P.minY)}function g(P,ca){return P.minX<=ca.minX&&P.minY<=ca.minY&&ca.maxX<=P.maxX&&ca.maxY<=P.maxY}
function x(P,ca){return ca.minX<=P.maxX&&ca.minY<=P.maxY&&ca.maxX>=P.minX&&ca.maxY>=P.minY}function c(P,ca,C,G,R){for(ca=[ca,C];ca.length;){C=Z.assumeNonNull(ca.pop());const aa=Z.assumeNonNull(ca.pop());if(C-aa<=G)continue;const H=aa+Math.ceil((C-aa)/G/2)*G;I.quickselect(P,H,aa,C,R);ca.push(aa,H,H,C)}}let h=function(){function P(C=9,G){this.compareMinX=r;this.compareMinY=B;this._toBBox=function(R){return R};this._maxEntries=Math.max(4,C||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));
G&&("function"===typeof G?this._toBBox=G:this._initFormat(G));this.clear()}var ca=P.prototype;ca.destroy=function(){this.clear();L.prune();V.prune();z.prune();N.prune()};ca.all=function(C){this._all(this.data,C)};ca.search=function(C,G){let R=this.data;const aa=this._toBBox;if(x(C,R))for(L.clear();R;){for(let H=0,v=R.children.length;H<v;H++){const d=R.children[H],m=R.leaf?aa(d):d;x(C,m)&&(R.leaf?G(d):g(C,m)?this._all(d,G):L.push(d))}R=L.pop()}};ca.collides=function(C){let G=this.data;const R=this._toBBox;
if(!x(C,G))return!1;for(L.clear();G;){for(let aa=0,H=G.children.length;aa<H;aa++){const v=G.children[aa],d=G.leaf?R(v):v;if(x(C,d)){if(G.leaf||g(C,d))return!0;L.push(v)}}G=L.pop()}return!1};ca.load=function(C){if(!C.length)return this;if(C.length<this._minEntries){for(let G=0,R=C.length;G<R;G++)this.insert(C[G]);return this}C=this._build(C.slice(0,C.length),0,C.length-1,0);if(this.data.children.length)if(this.data.height===C.height)this._splitRoot(this.data,C);else{if(this.data.height<C.height){const G=
this.data;this.data=C;C=G}this._insert(C,this.data.height-C.height-1,!0)}else this.data=C;return this};ca.insert=function(C){C&&this._insert(C,this.data.height-1);return this};ca.clear=function(){this.data=new F([]);return this};ca.remove=function(C){if(!C)return this;let G=this.data,R=null,aa=0,H=!1,v;const d=this._toBBox(C);z.clear();for(N.clear();G||0<z.length;){if(!G){var m;G=Z.assumeNonNull(z.pop());R=z.data[z.length-1];aa=null!=(m=N.pop())?m:0;H=!0}if(G.leaf&&(v=Y.indexOf(G.children,C,G.children.length,
G.indexHint),-1!==v)){G.children.splice(v,1);z.push(G);this._condense(z);break}H||G.leaf||!g(G,d)?R?(aa++,G=R.children[aa],H=!1):G=null:(z.push(G),N.push(aa),aa=0,R=G,G=G.children[0])}return this};ca.toJSON=function(){return this.data};ca.fromJSON=function(C){this.data=C;return this};ca._all=function(C,G){for(V.clear();C;){var R;if(!0===C.leaf)for(const aa of C.children)G(aa);else V.pushArray(C.children);C=null!=(R=V.pop())?R:null}};ca._build=function(C,G,R,aa){var H=R-G+1,v=this._maxEntries;if(H<=
v)return C=new F(C.slice(G,R+1)),y(C,this._toBBox),C;aa||(aa=Math.ceil(Math.log(H)/Math.log(v)),v=Math.ceil(H/v**(aa-1)));const d=new M([]);d.height=aa;H=Math.ceil(H/v);v=H*Math.ceil(Math.sqrt(v));for(c(C,G,R,v,this.compareMinX);G<=R;G+=v){const m=Math.min(G+v-1,R);c(C,G,m,H,this.compareMinY);for(let O=G;O<=m;O+=H)d.children.push(this._build(C,O,Math.min(O+H-1,m),aa-1))}y(d,this._toBBox);return d};ca._chooseSubtree=function(C,G,R,aa){for(;;){aa.push(G);if(!0===G.leaf||aa.length-1===R)break;let H=
Infinity,v=Infinity,d=void 0;for(let m=0,O=G.children.length;m<O;m++){const W=G.children[m],ka=w(W),oa=(Math.max(W.maxX,C.maxX)-Math.min(W.minX,C.minX))*(Math.max(W.maxY,C.maxY)-Math.min(W.minY,C.minY))-ka;oa<v?(v=oa,H=ka<H?ka:H,d=W):oa===v&&ka<H&&(H=ka,d=W)}G=d||G.children[0]}return G};ca._insert=function(C,G,R){var aa=this._toBBox;R=R?C:aa(C);z.clear();aa=this._chooseSubtree(R,this.data,G,z);aa.children.push(C);for(q(aa,R);0<=G;)if(z.data[G].children.length>this._maxEntries)this._split(z,G),G--;
else break;this._adjustParentBBoxes(R,z,G)};ca._split=function(C,G){const R=C.data[G];var aa=R.children.length;const H=this._minEntries;this._chooseSplitAxis(R,H,aa);(aa=this._chooseSplitIndex(R,H,aa))?(aa=R.children.splice(aa,R.children.length-aa),aa=R.leaf?new F(aa):new M(aa),aa.height=R.height,y(R,this._toBBox),y(aa,this._toBBox),G?C.data[G-1].children.push(aa):this._splitRoot(R,aa)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};ca._splitRoot=function(C,
G){this.data=new M([C,G]);this.data.height=C.height+1;y(this.data,this._toBBox)};ca._chooseSplitIndex=function(C,G,R){let aa,H,v=void 0;aa=H=Infinity;for(let m=G;m<=R-G;m++){var d=n(C,0,m,this._toBBox);const O=n(C,m,R,this._toBBox),W=Math.max(0,Math.min(d.maxX,O.maxX)-Math.max(d.minX,O.minX))*Math.max(0,Math.min(d.maxY,O.maxY)-Math.max(d.minY,O.minY));d=w(d)+w(O);W<aa?(aa=W,v=m,H=d<H?d:H):W===aa&&d<H&&(H=d,v=m)}return v};ca._chooseSplitAxis=function(C,G,R){const aa=C.leaf?this.compareMinX:r,H=C.leaf?
this.compareMinY:B,v=this._allDistMargin(C,G,R,aa);G=this._allDistMargin(C,G,R,H);v<G&&C.children.sort(aa)};ca._allDistMargin=function(C,G,R,aa){C.children.sort(aa);aa=this._toBBox;var H=n(C,0,G,aa);const v=n(C,R-G,R,aa);let d=E(H)+E(v);for(let m=G;m<R-G;m++){const O=C.children[m];q(H,C.leaf?aa(O):O);d+=E(H)}for(R=R-G-1;R>=G;R--)H=C.children[R],q(v,C.leaf?aa(H):H),d+=E(v);return d};ca._adjustParentBBoxes=function(C,G,R){for(;0<=R;R--)q(G.data[R],C)};ca._condense=function(C){for(let G=C.length-1;0<=
G;G--){const R=C.data[G];if(0===R.children.length)if(0<G){const aa=C.data[G-1],H=aa.children;H.splice(Y.indexOf(H,R,H.length,aa.indexHint),1)}else this.clear();else y(R,this._toBBox)}};ca._initFormat=function(C){const G=["return a"," - b",";"];this.compareMinX=new Function("a","b",G.join(C[0]));this.compareMinY=new Function("a","b",G.join(C[1]));this._toBBox=new Function("a","return {minX: a"+C[0]+", minY: a"+C[1]+", maxX: a"+C[2]+", maxY: a"+C[3]+"};")};return P}();const L=new t,V=new t,z=new t,
N=new t({deallocator:void 0});t=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let K=function(P){function ca(){var C=P.apply(this,arguments)||this;C.height=1;C.indexHint=new Y.PositionHint;return C}e._inheritsLoose(ca,P);return ca}(t),F=function(P){function ca(C){var G=P.call(this)||this;G.children=C;G.leaf=!0;return G}e._inheritsLoose(ca,P);return ca}(K),M=function(P){function ca(C){var G=P.call(this)||this;G.children=C;G.leaf=!1;return G}e._inheritsLoose(ca,P);return ca}(K);
k.BBox=t;k.PooledRBush=h;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/chunks/quickselect":function(){define(["exports"],function(k){var e={exports:{}};(function(Y){(function(Z){Z=Z();void 0!==Z&&(Y.exports=Z)})(function(){function Z(y,n,q,r,B){for(;r>q;){if(600<r-q){var w=r-q+1,E=n-q+1,g=Math.log(w),x=.5*Math.exp(2*g/3);g=.5*Math.sqrt(g*x*(w-x)/w)*(0>E-w/2?-1:1);Z(y,n,Math.max(q,Math.floor(n-E*x/w+g)),Math.min(r,Math.floor(n+(w-E)*x/w+g)),B)}w=y[n];E=q;x=r;t(y,q,n);for(0<B(y[r],w)&&t(y,
q,r);E<x;){t(y,E,x);E++;for(x--;0>B(y[E],w);)E++;for(;0<B(y[x],w);)x--}0===B(y[q],w)?t(y,q,x):(x++,t(y,x,r));x<=n&&(q=x+1);n<=x&&(r=x-1)}}function t(y,n,q){var r=y[n];y[n]=y[q];y[q]=r}function I(y,n){return y<n?-1:y>n?1:0}return function(y,n,q,r,B){Z(y,n,q||0,r||y.length-1,B||I)}})})(e);k.quickselect=e.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../../../core/maybe","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(k,e,
Y,Z,t){const I={getObjectId(y){return y.objectId},getAttributes(y){return y.attributes},getAttribute(y,n){return y.attributes[n]},cloneWithGeometry(y,n){return new Z.OptimizedFeature(n,y.attributes,null,y.objectId)},getGeometry(y){return y.geometry},getCentroid(y,n){e.isNone(y.centroid)&&(y.centroid=Y.getCentroidOptimizedGeometry(new t,y.geometry,n.hasZ,n.hasM));return y.centroid}};k.default=I;k.optimizedFeatureQueryEngineAdapter=I;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports",
"../../core/maybe"],function(k,e){function Y(t,I,y,n,q,r,B=1){r=q?r?4:3:r?3:2;let w=y,E=y+r,g=0,x=0,c=y=0,h=0;for(let L=0,V=n-1;L<V;L++,w+=r,E+=r){n=I[w];const z=I[w+1],N=I[w+2],K=I[E],F=I[E+1],M=I[E+2];let P=n*F-K*z;c+=P;g+=(n+K)*P;x+=(z+F)*P;q&&(P=n*M-K*N,y+=(N+M)*P,h+=P);n<t[0]&&(t[0]=n);n>t[1]&&(t[1]=n);z<t[2]&&(t[2]=z);z>t[3]&&(t[3]=z);q&&(N<t[4]&&(t[4]=N),N>t[5]&&(t[5]=N))}0<c*B&&(c*=-1);0<h*B&&(h*=-1);if(!c)return null;t=[g,x,.5*c];q&&(t[3]=y,t[4]=.5*h);return t}function Z(t,I,y,n,q){q=n?q?
4:3:q?3:2;let r=I,B=I+q,w=0,E=0,g=0,x=0;for(let V=0,z=y-1;V<z;V++,r+=q,B+=q){var c=t[r];const N=t[r+1],K=t[r+2],F=t[B],M=t[B+1],P=t[B+2];if(n){{var h=F-c;var L=M-N;const ca=P-K;h=Math.sqrt(h*h+L*L+ca*ca)}}else h=F-c,L=M-N,h=Math.sqrt(h*h+L*L);h&&(w+=h,n?(c=[c+.5*(F-c),N+.5*(M-N),K+.5*(P-K)],E+=h*c[0],g+=h*c[1],x+=h*c[2]):(c=[c+.5*(F-c),N+.5*(M-N)],E+=h*c[0],g+=h*c[1]))}return 0<w?n?[E/w,g/w,x/w]:[E/w,g/w]:0<y?n?[t[I],t[I+1],t[I+2]]:[t[I],t[I+1]]:null}k.getCentroidOptimizedGeometry=function(t,I,y,
n,q){if(e.isNone(I)||!I.lengths.length)return null;const r="upperLeft"===(null==q?void 0:q.originPosition)?-1:1;t.lengths.length&&(t.lengths.length=0);t.coords.length&&(t.coords.length=0);q=t.coords;const B=[],w=y?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:E,coords:g}=I,x=y?n?4:3:
n?3:2;let c=0;for(var h of E){const L=Y(w,g,c,h,y,n,r);L&&B.push(L);c+=h*x}B.sort((L,V)=>{let z=r*L[2]-r*V[2];0===z&&y&&(z=L[4]-V[4]);return z});B.length&&(h=6*B[0][2],q[0]=B[0][0]/h,q[1]=B[0][1]/h,y&&(h=6*B[0][4],q[2]=0!==h?B[0][3]/h:0),q[0]<w[0]||q[0]>w[1]||q[1]<w[2]||q[1]>w[3]||y&&(q[2]<w[4]||q[2]>w[5]))&&(q.length=0);if(!q.length)if(I=I.lengths[0]?Z(g,0,E[0],y,n):null)q[0]=I[0],q[1]=I[1],y&&2<I.length&&(q[2]=I[2]);else return null;return t};k.lineCentroid=Z;Object.defineProperty(k,"__esModule",
{value:!0})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(k,e,Y,Z,t,I,y){function n(c,h){if(!h)return null;if("x"in h){var L={x:0,y:0};[L.x,L.y]=c(h.x,h.y,w);null!=h.z&&(L.z=h.z);null!=h.m&&(L.m=h.m);return L}if("xmin"in h)return L=
{xmin:0,ymin:0,xmax:0,ymax:0},[L.xmin,L.ymin]=c(h.xmin,h.ymin,w),[L.xmax,L.ymax]=c(h.xmax,h.ymax,w),h.hasZ&&(L.zmin=h.zmin,L.zmax=h.zmax,L.hasZ=!0),h.hasM&&(L.mmin=h.mmin,L.mmax=h.mmax,L.hasM=!0),L;if("rings"in h)return{rings:q(h.rings,c),hasM:h.hasM,hasZ:h.hasZ};if("paths"in h)return{paths:q(h.paths,c),hasM:h.hasM,hasZ:h.hasZ};if("points"in h)return{points:r(h.points,c),hasM:h.hasM,hasZ:h.hasZ}}function q(c,h){const L=[];for(const V of c)L.push(r(V,h));return L}function r(c,h){const L=[];for(const V of c)c=
h(V[0],V[1],[0,0]),L.push(c),2<V.length&&c.push(V[2]),3<V.length&&c.push(V[3]);return L}function B(){B=e._asyncToGenerator(function*(c,h){h&&(c=Array.isArray(c)?c.map(L=>Y.isSome(L.geometry)&&L.geometry.spatialReference):[c],yield Z.initializeProjection(c.map(L=>({source:L,dest:h}))))});return B.apply(this,arguments)}const w=[0,0],E=n.bind(null,y.lngLatToXY),g=n.bind(null,y.xyToLngLat),x=new (function(){function c(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var h=c.prototype;
h.push=function(){var L=e._asyncToGenerator(function*(V,z,N){if(!(V&&V.length&&z&&N)||I.equals(z,N))return V;const K={geometries:V,inSpatialReference:z,outSpatialReference:N,resolve:null};this._jobs.push(K);return new Promise(F=>{K.resolve=F;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(V,z,N){return L.apply(this,arguments)}}();h._process=function(){this._timer=null;const L=this._jobs.shift();if(L){var {geometries:V,inSpatialReference:z,outSpatialReference:N,resolve:K}=
L;y.canProject(z,N)?I.isWebMercator(N)?K(V.map(E)):K(V.map(g)):K(Z.projectMany(t.jsonAdapter,V,z,N,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return c}());k.checkProjectionSupport=function(c,h){return B.apply(this,arguments)};k.project=function(c,h,L){if(!c)return c;L||(L=h,h=c.spatialReference);return I.isValid(h)&&I.isValid(L)&&!I.equals(h,L)?y.canProject(h,L)?(c=I.isWebMercator(L)?E(c):g(c),c.spatialReference=L,c):Z.projectMany(t.jsonAdapter,[c],h,L,null)[0]:c};k.projectMany=
function(c,h,L){return x.push(c,h,L)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(k,e,Y,Z,t,I,y,n,q,r,B,w,E,g,x,c,h,L,V,z,N,K,F){function M(H){return H.every(v=>"exceedslimit"!==v.statisticType)}const P=new Set,ca=new I.MemCacheStorage(2E6);let C=0,G=function(){function H(d){this.capabilities={query:c.queryCapabilities};this.geometryType=d.geometryType;this.hasM=d.hasM;this.hasZ=d.hasZ;this.objectIdField=d.objectIdField;this.spatialReference=d.spatialReference;this.definitionExpression=d.definitionExpression;this.featureStore=d.featureStore;this.aggregateAdapter=d.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=d.timeInfo;d.cacheSpatialQueries&&(this._geometryQueryCache=new I.MemCache(C++ +"$$",ca));this.fieldsIndex=new N(d.fields);d.scheduler&&d.priority&&(this._frameTask=d.scheduler.registerTask(d.priority))}var v=H.prototype;v.destroy=function(){this._frameTask=t.removeMaybe(this._frameTask);this.clearCache();t.destroyMaybe(this._geometryQueryCache);this._changeHandle=t.removeMaybe(this._changeHandle);t.destroyMaybe(this.fieldsIndex)};
v.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};v.executeQuery=function(){var d=e._asyncToGenerator(function*(m={},O){let W=Z.clone(m),ka;try{W=yield this._schedule(()=>z.normalizeQuery(W,this.definitionExpression,this.spatialReference),O),W=yield this._reschedule(()=>this._checkQuerySupport(W),O),ka=yield this._reschedule(()=>this._executeGeometryQuery(W,O),O),ka=yield this._reschedule(()=>ka.executeAggregateIdsQuery(W),O),
ka=yield this._reschedule(()=>ka.executeObjectIdsQuery(W),O),ka=yield this._reschedule(()=>ka.executeTimeQuery(W),O),ka=yield this._reschedule(()=>ka.executeAttributesQuery(W),O)}catch(oa){if(oa!==z.QUERY_ENGINE_EMPTY_RESULT)throw oa;ka=new h.default([],null,this)}return ka.createQueryResponse(W)});return function(){return d.apply(this,arguments)}}();v.executeQueryForCount=function(){var d=e._asyncToGenerator(function*(m={},O){let W=Z.clone(m);W.returnGeometry=!1;W.returnCentroid=!1;W.outSR=null;
try{W=yield this._schedule(()=>z.normalizeQuery(W,this.definitionExpression,this.spatialReference),O);W=yield this._reschedule(()=>this._checkQuerySupport(W),O);let ka=yield this._reschedule(()=>this._executeGeometryQuery(W,O),O);ka=yield this._reschedule(()=>ka.executeAggregateIdsQuery(W),O);ka=yield this._reschedule(()=>ka.executeObjectIdsQuery(W),O);ka=yield this._reschedule(()=>ka.executeTimeQuery(W),O);ka=yield this._reschedule(()=>ka.executeAttributesQuery(W),O);return ka.createQueryResponseForCount(W)}catch(ka){if(ka!==
z.QUERY_ENGINE_EMPTY_RESULT)throw ka;return 0}});return function(){return d.apply(this,arguments)}}();v.executeQueryForExtent=function(){var d=e._asyncToGenerator(function*(m={},O){let W=Z.clone(m),ka;m=W.outSR;try{W=yield this._schedule(()=>z.normalizeQuery(W,this.definitionExpression,this.spatialReference),O);W=yield this._reschedule(()=>this._checkQuerySupport(W),O);W.returnGeometry=!0;W.returnCentroid=!1;W.outSR=null;ka=yield this._reschedule(()=>this._executeGeometryQuery(W,O),O);ka=yield this._reschedule(()=>
ka.executeAggregateIdsQuery(W),O);ka=yield this._reschedule(()=>ka.executeObjectIdsQuery(W),O);ka=yield this._reschedule(()=>ka.executeTimeQuery(W),O);ka=yield this._reschedule(()=>ka.executeAttributesQuery(W),O);const oa=ka.size;if(!oa)return{count:oa,extent:null};n.set(aa,n.NEGATIVE_INFINITY);this.featureStore.forEachBounds(ka.items,la=>n.expandWithAABB(aa,la),R);const ma={xmin:aa[0],ymin:aa[1],xmax:aa[3],ymax:aa[4],spatialReference:z.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(aa[2])&&
isFinite(aa[5])&&(ma.zmin=aa[2],ma.zmax=aa[5]);const da=x.project(ma,ka.spatialReference,m);da.spatialReference=z.cleanFromGeometryEngine(m||this.spatialReference);if(0===da.xmax-da.xmin){const la=y.getMetersPerUnitForSR(da.spatialReference);da.xmin-=la;da.xmax+=la}if(0===da.ymax-da.ymin){const la=y.getMetersPerUnitForSR(da.spatialReference);da.ymin-=la;da.ymax+=la}if(this.hasZ&&null!=da.zmin&&null!=da.zmax&&0===da.zmax-da.zmin){const la=y.getMetersPerUnitForSR(da.spatialReference);da.zmin-=la;da.zmax+=
la}return{count:oa,extent:da}}catch(oa){if(oa===z.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw oa;}});return function(){return d.apply(this,arguments)}}();v.executeQueryForIds=function(){var d=e._asyncToGenerator(function*(m={},O){return this.executeQueryForIdSet(m,O).then(W=>Array.from(W))});return function(){return d.apply(this,arguments)}}();v.executeQueryForIdSet=function(){var d=e._asyncToGenerator(function*(m={},O){let W=Z.clone(m),ka;W.returnGeometry=!1;W.returnCentroid=!1;W.outSR=
null;try{W=yield this._schedule(()=>z.normalizeQuery(W,this.definitionExpression,this.spatialReference),O);W=yield this._reschedule(()=>this._checkQuerySupport(W),O);ka=yield this._reschedule(()=>this._executeGeometryQuery(W,O),O);ka=yield this._reschedule(()=>ka.executeAggregateIdsQuery(W),O);ka=yield this._reschedule(()=>ka.executeObjectIdsQuery(W),O);ka=yield this._reschedule(()=>ka.executeTimeQuery(W),O);ka=yield this._reschedule(()=>ka.executeAttributesQuery(W),O);const oa=ka.items,ma=new Set;
yield this._reschedule(()=>{for(const da of oa)ma.add(ka.featureAdapter.getObjectId(da))},O);return ma}catch(oa){if(oa===z.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw oa;}});return function(){return d.apply(this,arguments)}}();v.executeQueryForSnapping=function(){var d=e._asyncToGenerator(function*(m,O){const {point:W,distance:ka,types:oa}=m;if(oa===h.SnappingTypes.NONE)return{candidates:[]};const ma=yield this._reschedule(()=>this._checkQuerySupport(m.query),O),da=!E.equals(W.spatialReference,
this.spatialReference);da&&(yield x.checkProjectionSupport(W.spatialReference,this.spatialReference));var la="number"===typeof ka?ka:ka.x,qa="number"===typeof ka?ka:ka.y;la={xmin:W.x-la,xmax:W.x+la,ymin:W.y-qa,ymax:W.y+qa,spatialReference:W.spatialReference};la=da?x.project(la,this.spatialReference):la;if(!la)return{candidates:[]};qa=(yield w.normalizeCentralMeridian(B.fromJSON(W),null,{signal:O}))[0];const wa=(yield w.normalizeCentralMeridian(B.fromJSON(la),null,{signal:O}))[0];if(t.isNone(qa)||
t.isNone(wa))return{candidates:[]};let Da=new h.default(this._searchFeatures(this._getQueryBBoxes(wa.toJSON())),null,this);Da=yield this._reschedule(()=>Da.executeObjectIdsQuery(ma),O);Da=yield this._reschedule(()=>Da.executeTimeQuery(ma),O);Da=yield this._reschedule(()=>Da.executeAttributesQuery(ma),O);O=qa.toJSON();O=da?x.project(O,this.spatialReference):O;return Da.createSnappingResponse({...m,point:O,distance:da?Math.max(la.xmax-la.xmin,la.ymax-la.ymin)/2:ka},W.spatialReference)});return function(m,
O){return d.apply(this,arguments)}}();v.executeQueryForLatestObservations=function(){var d=e._asyncToGenerator(function*(m={},O){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new Y("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:m,timeInfo:this.timeInfo});let W=Z.clone(m),ka;try{W=yield this._schedule(()=>z.normalizeQuery(W,this.definitionExpression,this.spatialReference),O),W=yield this._reschedule(()=>this._checkQuerySupport(W),O),ka=yield this._reschedule(()=>
this._executeGeometryQuery(W,O),O),ka=yield this._reschedule(()=>ka.executeAggregateIdsQuery(W),O),ka=yield this._reschedule(()=>ka.executeObjectIdsQuery(W),O),ka=yield this._reschedule(()=>ka.executeTimeQuery(W),O),ka=yield this._reschedule(()=>ka.executeAttributesQuery(W),O),ka=yield this._reschedule(()=>ka.filterLatest(),O)}catch(oa){if(oa!==z.QUERY_ENGINE_EMPTY_RESULT)throw oa;ka=new h.default([],null,this)}return ka.createQueryResponse(W)});return function(){return d.apply(this,arguments)}}();
v.executeQueryForSummaryStatistics=function(){var d=e._asyncToGenerator(function*(m={},O,W){const {field:ka,normalizationField:oa,valueExpression:ma}=O;return(yield this._getQueryEngineResultForStats(m,{field:ka,normalizationField:oa,valueExpression:ma},W)).createSummaryStatisticsResponse(m,O)});return function(){return d.apply(this,arguments)}}();v.executeQueryForUniqueValues=function(){var d=e._asyncToGenerator(function*(m={},O,W){const {field:ka,valueExpression:oa}=O;return(yield this._getQueryEngineResultForStats(m,
{field:ka,valueExpression:oa},W)).createUniqueValuesResponse(m,O)});return function(){return d.apply(this,arguments)}}();v.executeQueryForClassBreaks=function(){var d=e._asyncToGenerator(function*(m={},O,W){const {field:ka,normalizationField:oa,valueExpression:ma}=O;return(yield this._getQueryEngineResultForStats(m,{field:ka,normalizationField:oa,valueExpression:ma},W)).createClassBreaksResponse(m,O)});return function(){return d.apply(this,arguments)}}();v.executeQueryForHistogram=function(){var d=
e._asyncToGenerator(function*(m={},O,W){const {field:ka,normalizationField:oa,valueExpression:ma}=O;return(yield this._getQueryEngineResultForStats(m,{field:ka,normalizationField:oa,valueExpression:ma},W)).createHistogramResponse(m,O)});return function(){return d.apply(this,arguments)}}();v._schedule=function(){var d=e._asyncToGenerator(function*(m,O){return t.isSome(this._frameTask)?this._frameTask.schedule(m,O):m(F.noBudget)});return function(m,O){return d.apply(this,arguments)}}();v._reschedule=
function(){var d=e._asyncToGenerator(function*(m,O){return t.isSome(this._frameTask)?this._frameTask.reschedule(m,O):m(F.noBudget)});return function(m,O){return d.apply(this,arguments)}}();v._getAll=function(){if(!this._allItems){const d=[];this.featureStore.forEach(m=>d.push(m));this._allItems=new h.default(d,null,this)}return this._allItems};v._executeGeometryQuery=function(){var d=e._asyncToGenerator(function*(m,O){var W=this;const {geometry:ka,outSR:oa,spatialRel:ma,returnGeometry:da,returnCentroid:la}=
m;var qa=this.featureStore.featureSpatialReference;const wa=ka&&qa&&qa!==ka.spatialReference?x.project(ka,qa):ka,Da=da||la,La=E.isValid(oa)&&!E.equals(this.spatialReference,oa),Fa=this._geometryQueryCache?La&&Da?JSON.stringify({originalFilterGeometry:ka,spatialRelationship:ma,outSpatialReference:oa}):JSON.stringify({originalFilterGeometry:ka,spatialRelationship:ma}):null;if(Fa&&(qa=this._geometryQueryCache.get(Fa),!t.isUndefined(qa)))return qa;qa=function(){var fa=e._asyncToGenerator(function*(l){if(La&&
Da)return l=yield l.project(oa),Fa&&W._geometryQueryCache.put(Fa,l,l.size||1),l;Fa&&W._geometryQueryCache.put(Fa,l,l.size||1);return l});return function(l){return fa.apply(this,arguments)}}();if(!wa)return qa(this._getAll());const Na=this.featureAdapter;if("esriSpatialRelDisjoint"===ma){m=this._searchFeatures(this._getQueryBBoxes(ka));if(!m.length)return qa(this._getAll());let fa,l;const D=new Set;for(var b of m)D.add(Na.getObjectId(b));yield this._reschedule(()=>{let S=0;fa=Array(D.size);this.featureStore.forEach(T=>
fa[S++]=T);l=D},O);m=yield this._reschedule(e._asyncToGenerator(function*(){const S=yield L.getSpatialQueryOperator(ma,wa,W.geometryType,W.hasZ,W.hasM);return new h.default(yield W._runSpatialFilter(fa,T=>!l.has(Na.getObjectId(T))||S(Na.getGeometry(T)),O),ka,W)}),O);return qa(m)}b=this._searchFeatures(this._getQueryBBoxes(ka));if(!b.length)return qa=new h.default([],ka,this),Fa&&this._geometryQueryCache.put(Fa,qa,qa.size||1),qa;if(this._canExecuteSoloPass(wa,m))return qa(new h.default(b,ka,this));
const p=yield L.getSpatialQueryOperator(ma,wa,this.geometryType,this.hasZ,this.hasM);m=yield this._runSpatialFilter(b,fa=>p(Na.getGeometry(fa)),O);return qa(new h.default(m,ka,this))});return function(m,O){return d.apply(this,arguments)}}();v._runSpatialFilter=function(){var d=e._asyncToGenerator(function*(m,O,W){var ka=this;if(!O)return m;if(t.isNone(this._frameTask))return m.filter(la=>O(la));let oa=0;const ma=[],da=function(){var la=e._asyncToGenerator(function*(qa){for(;oa<m.length;){const wa=
m[oa++];O(wa)&&(ma.push(wa),qa.madeProgress());qa.done&&(yield ka._reschedule(Da=>da(Da),W))}});return function(qa){return la.apply(this,arguments)}}();return this._reschedule(la=>da(la),W).then(()=>ma)});return function(m,O,W){return d.apply(this,arguments)}}();v._canExecuteSoloPass=function(d,m){const {geometryType:O}=this;({spatialRel:m}=m);return L.canQueryWithRBush(d)&&("esriSpatialRelEnvelopeIntersects"===m||"esriGeometryPoint"===O&&("esriSpatialRelIntersects"===m||"esriSpatialRelContains"===
m||"esriSpatialRelWithin"===m))};v._getQueryBBoxes=function(d){if(L.canQueryWithRBush(d)){if(B.isExtent(d))return[q.fromValues(d.xmin,d.ymin,d.xmax,d.ymax)];if(B.isPolygon(d))return d.rings.map(m=>q.fromValues(Math.min(m[0][0],m[2][0]),Math.min(m[0][1],m[2][1]),Math.max(m[0][0],m[2][0]),Math.max(m[0][1],m[2][1])))}return[r.getBoundsXY(q.create(),d)]};v._searchFeatures=function(d){for(const W of d)this.featureStore.forEachInBounds(W,ka=>{P.add(ka)});const m=Array(P.size);let O=0;P.forEach(W=>m[O++]=
W);P.clear();return m};v._checkStatisticsSupport=function(){var d=e._asyncToGenerator(function*(m,O){if(0>m.distance||null!=m.geometryPrecision||m.multipatchOption||m.pixelSize||m.relationParam||m.text||m.outStatistics||m.groupByFieldsForStatistics||m.having||m.orderByFields)throw new Y("feature-store:unsupported-query","Unsupported query options",{query:m});return Promise.all([this._checkAttributesQuerySupport(m),this._checkStatisticsParamsSupport(O),L.checkSpatialQuerySupport(m,this.geometryType,
this.spatialReference),x.checkProjectionSupport(this.spatialReference,m.outSR)]).then(()=>m)});return function(m,O){return d.apply(this,arguments)}}();v._checkStatisticsParamsSupport=function(){var d=e._asyncToGenerator(function*(m){var O=[];m.valueExpression&&({arcadeUtils:O}=yield K.loadArcade(),O=O.extractFieldNames(m.valueExpression));m.field&&O.push(m.field);m.normalizationField&&O.push(m.normalizationField);if(!O.length)throw new Y("feature-store:unsupported-query","params should have at least a field or valueExpression",
{params:m});g.validateFields(this.fieldsIndex,O,"params contains missing fields")});return function(m){return d.apply(this,arguments)}}();v._checkQuerySupport=function(){var d=e._asyncToGenerator(function*(m){if(0>m.distance||null!=m.geometryPrecision||m.multipatchOption||m.pixelSize||m.relationParam||m.text)throw new Y("feature-store:unsupported-query","Unsupported query options",{query:m});return Promise.all([this._checkAttributesQuerySupport(m),this._checkStatisticsQuerySupport(m),L.checkSpatialQuerySupport(m,
this.geometryType,this.spatialReference),x.checkProjectionSupport(this.spatialReference,m.outSR)]).then(()=>m)});return function(m){return d.apply(this,arguments)}}();v._checkAttributesQuerySupport=function(d){const {outFields:m,orderByFields:O,returnDistinctValues:W,outStatistics:ka}=d,oa=ka?ka.map(ma=>ma.outStatisticFieldName&&ma.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(O&&0<O.length){const ma=O.map(da=>{const la=da.toLowerCase();return-1<la.indexOf(" asc")?la.split(" asc")[0]:
-1<la.indexOf(" desc")?la.split(" desc")[0]:da}).filter(da=>-1===oa.indexOf(da));g.validateFields(this.fieldsIndex,ma,"orderByFields contains missing fields")}if(m&&0<m.length)g.validateFields(this.fieldsIndex,m,"outFields contains missing fields");else if(W)throw new Y("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:d});g.validateWhere(this.fieldsIndex,d.where)};v._checkStatisticsQuerySupport=function(){var d=e._asyncToGenerator(function*(m){const {outStatistics:O,
groupByFieldsForStatistics:W,having:ka}=m;var oa=W&&W.length,ma=O&&O.length;if(ka){if(!oa||!ma)throw new Y("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:m});g.validateHaving(this.fieldsIndex,ka,O)}if(ma&&M(O)){ma=O.map(da=>da.onStatisticField).filter(Boolean);g.validateFields(this.fieldsIndex,ma,"onStatisticFields contains missing fields");oa&&g.validateFields(this.fieldsIndex,W,"groupByFieldsForStatistics contains missing fields");
for(const da of O){const {onStatisticField:la,statisticType:qa}=da;if(("percentile_disc"===qa||"percentile_cont"===qa)&&"statisticParameters"in da){if({statisticParameters:oa}=da,!oa)throw new Y("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:da,query:m});}else if("count"!==qa&&la&&g.hasInvalidFieldType(la,this.fieldsIndex))throw new Y("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:da,query:m});}}});return function(m){return d.apply(this,
arguments)}}();v._getQueryEngineResultForStats=function(){var d=e._asyncToGenerator(function*(m={},O,W){m=Z.clone(m);let ka;try{m=yield this._schedule(()=>z.normalizeQuery(m,this.definitionExpression,this.spatialReference),W),m=yield this._reschedule(()=>this._checkStatisticsSupport(m,O),W),ka=yield this._reschedule(()=>this._executeGeometryQuery(m,W),W),ka=yield this._reschedule(()=>ka.executeAggregateIdsQuery(m),W),ka=yield this._reschedule(()=>ka.executeObjectIdsQuery(m),W),ka=yield this._reschedule(()=>
ka.executeTimeQuery(m),W),ka=yield this._reschedule(()=>ka.executeAttributesQuery(m),W)}catch(oa){if(oa!==z.QUERY_ENGINE_EMPTY_RESULT)throw oa;ka=new h.default([],null,this)}return ka});return function(){return d.apply(this,arguments)}}();e._createClass(H,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const d=this.featureStore.fullBounds;return d?{xmin:d[0],ymin:d[1],xmax:d[2],ymax:d[3],spatialReference:z.cleanFromGeometryEngine(this.spatialReference)}:
null}},{key:"timeExtent",get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=V.getTimeExtent(this.timeInfo,this.featureStore):null}}]);return H}();const R=n.create(),aa=n.create();k.Feature=function(H,v=null,d,m,O){this.attributes=H;this.geometry=d;this.centroid=m;this.filterFlags=O;this.groupId=-1;this.displayId=v};k.default=G;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers",
"./maybe","./PooledArray"],function(k,e,Y,Z){k.RemoveMode=void 0;(function(y){y[y.ALL=0]="ALL";y[y.SOME=1]="SOME"})(k.RemoveMode||(k.RemoveMode={}));let t=function(){function y(q,r,B){this._namespace=q;this._storage=r;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";B&&(this._storage.registerRemoveFunc(this._namespace,B),this._removeFunc=!0)}var n=y.prototype;n.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);
this._storage.deregister(this);this._storage=null};n.resetHitRate=function(){this._hit=this._miss=0};n.put=function(q,r,B,w=0){this._storage.put(this._namespace+q,r,B,w)};n.get=function(q){q=this._storage.get(this._namespace+q);void 0===q?++this._miss:++this._hit;return q};n.pop=function(q){q=this._storage.pop(this._namespace+q);void 0===q?++this._miss:++this._hit;return q};n.updateSize=function(q,r,B){this._storage.updateSize(this._namespace+q,r,B)};n.clear=function(){this._storage.clear(this._namespace)};
n.clearAll=function(){this._storage.clearAll()};n.getStats=function(){return this._storage.getStats()};n.resetStats=function(){this._storage.resetStats()};e._createClass(y,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return y}(),I=function(){function y(q=10485760){this._maxSize=q;this._db=
new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new Z;this._users=new Z}var n=y.prototype;n.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};n.register=function(q){this._users.push(q)};n.deregister=function(q){this._users.removeUnordered(q)};n.registerRemoveFunc=function(q,r){this._removeFuncs.push([q,r])};n.deregisterRemoveFunc=function(q){this._removeFuncs.filterInPlace(r=>r[0]!==q)};n.put=function(q,r,B,w){const E=this._db.get(q);E&&(this._size-=
E.size,this._db.delete(q),E.entry!==r&&this._notifyRemove(q,E.entry,k.RemoveMode.ALL));B>this._maxSize?this._notifyRemove(q,r,k.RemoveMode.ALL):void 0===r?console.warn("Refusing to cache undefined entry "):!B||0>B?console.warn("Refusing to cache entry with invalid size "+B):(w=1+Math.max(w,-3)- -3,this._db.set(q,{entry:r,size:B,lifetime:w,lives:w}),this._size+=B,this._checkSizeLimit())};n.updateSize=function(q,r,B){const w=this._db.get(q);if(w&&w.entry===r){for(this._size-=w.size;B>this._maxSize;)if(B=
this._notifyRemove(q,r,k.RemoveMode.SOME),!(Y.isSome(B)&&0<B)){this._db.delete(q);return}w.size=B;this._size+=B;this._checkSizeLimit()}};n.pop=function(q){const r=this._db.get(q);if(r)return this._size-=r.size,this._db.delete(q),++this._hit,r.entry;++this._miss};n.get=function(q){const r=this._db.get(q);if(void 0===r)++this._miss;else return this._db.delete(q),r.lives=r.lifetime,this._db.set(q,r),++this._hit,r.entry};n.getStats=function(){const q={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/
1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},B=[];this._db.forEach((g,x)=>{const c=g.lifetime;B[c]=(B[c]||0)+g.size;this._users.forAll(h=>{h=h.namespace;x.startsWith(h)&&(r[h]=(r[h]||0)+g.size)})});const w={};this._users.forAll(g=>{const x=g.namespace;!isNaN(g.hitRate)&&0<g.hitRate?(r[x]=r[x]||0,w[x]=Math.round(100*g.hitRate)+"%"):w[x]="0%"});var E=Object.keys(r);E.sort((g,x)=>r[x]-r[g]);E.forEach(g=>q[g]=Math.round(r[g]/2**20)+"MB / "+w[g]);
for(E=B.length-1;0<=E;--E){const g=B[E];g&&(q["Priority "+(E+-3-1)]=Math.round(g/this.size*100)+"%")}return q};n.resetStats=function(){this._hit=this._miss=0;this._users.forAll(q=>q.resetHitRate())};n.clear=function(q){this._db.forEach((r,B)=>{B.startsWith(q)&&(this._size-=r.size,this._db.delete(B),this._notifyRemove(B,r.entry,k.RemoveMode.ALL))})};n.clearAll=function(){this._db.forEach((q,r)=>this._notifyRemove(r,q.entry,k.RemoveMode.ALL));this._size=0;this._db.clear()};n._getHitRate=function(){return this._hit/
(this._hit+this._miss)};n._notifyRemove=function(q,r,B){let w;this._removeFuncs.some(E=>q.startsWith(E[0])?(E=E[1](r,B),"number"===typeof E&&(w=E),!0):!1);return w};n._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [q,r]of this._db){this._db.delete(q);if(1>=r.lives){this._size-=r.size;const B=this._notifyRemove(q,r.entry,k.RemoveMode.SOME);Y.isSome(B)&&0<B&&(this._size+=B,r.lives=r.lifetime,r.size=B,this._db.set(q,r))}else--r.lives,this._db.set(q,r);if(this._size<=.9*this.maxSize)break}};
e._createClass(y,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(q){this._maxSize=Math.max(q,0);this._checkSizeLimit()}}]);return y}();k.MIN_PRIORITY=-3;k.MemCache=t;k.MemCacheStorage=I;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometry/cut ../../rest/geometry/simplify".split(" "),
function(k,e,Y,Z,t,I,y,n,q,r,B,w,E){function g(K){const F=[];let M=0,P=0;for(let ca=0;ca<K.length;ca++){const C=K[ca];let G=null;for(let R=0;R<C.length;R++)G=C[R],F.push(G),0===R?P=M=G[0]:(M=Math.min(M,G[0]),P=Math.max(P,G[0]));G&&F.push([(M+P)/2,0])}return F}function x(K,F){if(!(K instanceof n||K instanceof y))throw N.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new Z("straightLineDensify: the input geometry is neither polyline nor polygon");var M=q.getGeometryParts(K);
const P=[];for(const C of M){M=[];P.push(M);M.push([C[0][0],C[0][1]]);for(let G=0;G<C.length-1;G++){const R=C[G][0],aa=C[G][1],H=C[G+1][0],v=C[G+1][1];var ca=Math.sqrt((H-R)*(H-R)+(v-aa)*(v-aa));const d=(v-aa)/ca,m=(H-R)/ca,O=ca/F;if(1<O){for(let W=1;W<=O-1;W++){const ka=W*F;M.push([m*ka+R,d*ka+aa])}ca=(ca+Math.floor(O-1)*F)/2;M.push([m*ca+R,d*ca+aa])}M.push([H,v])}}return"polygon"===K.type?new y({rings:P,spatialReference:K.spatialReference}):new n({paths:P,spatialReference:K.spatialReference})}function c(K,
F,M){F&&(K=x(K,1E6),K=B.webMercatorToGeographic(K,!0));M&&(K=q.updatePolyGeometry(K,M));return K}function h(K,F,M){if(Array.isArray(K)){var P=K[0];P>F?(M=q.offsetMagnitude(P,F),K[0]=P+-2*M*F):P<M&&(F=q.offsetMagnitude(P,M),K[0]=P+-2*F*M)}else P=K.x,P>F?(M=q.offsetMagnitude(P,F),K=K.clone().offset(-2*M*F,0)):P<M&&(F=q.offsetMagnitude(P,M),K=K.clone().offset(-2*F*M,0));return K}function L(K,F){let M=-1;for(let P=0;P<F.cutIndexes.length;P++){const ca=F.cutIndexes[P],C=F.geometries[P],G=q.getGeometryParts(C);
for(let R=0;R<G.length;R++){const aa=G[R];aa.some(H=>{if(180>H[0])return!0;H=0;for(var v=0;v<aa.length;v++){var d=aa[v][0];H=d>H?d:H}H=Number(H.toFixed(9));H=-360*q.offsetMagnitude(H,180);for(v=0;v<aa.length;v++)d=C.getPoint(R,v),C.setPoint(R,v,d.clone().offset(H,0));return!0})}if(ca===M)if("polygon"===K[0].type)for(const R of q.getGeometryParts(C))K[ca]=K[ca].addRing(R);else{if("polyline"===K[0].type)for(const R of q.getGeometryParts(C))K[ca]=K[ca].addPath(R)}else M=ca,K[ca]=C}return K}function V(K,
F,M){return z.apply(this,arguments)}function z(){z=e._asyncToGenerator(function*(K,F,M){var P;if(!Array.isArray(K))return V([K],F);F=null!=(P=null==F?void 0:F.url)?P:Y.geometryServiceUrl;let ca,C,G;let R=0;var aa=[];P=[];for(var H of K)if(I.isNone(H))P.push(H);else{if(!v){var v=H.spatialReference;var d=r.getInfo(v);var m=(ca=v.isWebMercator)?102100:4326;C=q.cutParams[m].maxX;G=q.cutParams[m].minX;var O=q.cutParams[m].plus180Line;m=q.cutParams[m].minus180Line}if(d)if("mesh"===H.type)P.push(H);else if("point"===
H.type)P.push(h(H.clone(),C,G));else if("multipoint"===H.type){var W=H.clone();W.points=W.points.map(ka=>h(ka,C,G));P.push(W)}else if("extent"===H.type)W=H.clone()._normalize(!1,!1,d),P.push(W.rings?new y(W):W);else if(H.extent){W=H.extent;const ka=2*q.offsetMagnitude(W.xmin,G)*C;let oa=0===ka?H.clone():q.updatePolyGeometry(H.clone(),ka);W.offset(ka,0);W.intersects(O)&&W.xmax!==C?(R=W.xmax>R?W.xmax:R,oa=c(oa,ca),aa.push(oa),P.push("cut")):W.intersects(m)&&W.xmin!==G?(R=2*W.xmax*C>R?2*W.xmax*C:R,oa=
c(oa,ca,360),aa.push(oa),P.push("cut")):P.push(oa)}else P.push(H.clone());else P.push(H)}v=q.offsetMagnitude(R,C);d=-90;O=v;for(H=new n;0<v;)m=-180+360*v,H.addPath([[m,d],[m,-1*d]]),d*=-1,v--;if(0<aa.length&&0<O){v=yield w.cut(F,aa,H,M);v=L(aa,v);d=[];aa=[];for(O=0;O<P.length;O++)H=P[O],"cut"!==H?aa.push(H):(H=v.shift(),m=K[O],I.isSome(m)&&"polygon"===m.type&&m.rings&&1<m.rings.length&&H.rings.length>=m.rings.length?(d.push(H),aa.push("simplify")):aa.push(ca?B.geographicToWebMercator(H):H));if(!d.length)return aa;
P=yield E.simplify(F,d,M);K=[];for(M=0;M<aa.length;M++)F=aa[M],"simplify"!==F?K.push(F):K.push(ca?B.geographicToWebMercator(P.shift()):P.shift());return K}K=[];for(M=0;M<P.length;M++)F=P[M],"cut"!==F?K.push(F):(F=aa.shift(),K.push(!0===ca?B.geographicToWebMercator(F):F));return Promise.resolve(K)});return z.apply(this,arguments)}const N=t.getLogger("esri.geometry.support.normalizeUtils");k.getDenormalizedExtent=function(K){if(!K)return null;const F=K.extent;if(!F)return null;var M=K.spatialReference&&
r.getInfo(K.spatialReference);if(!M)return F;const [P,ca]=M.valid;({width:M}=F);let {xmin:C,xmax:G}=F;[C,G]=[G,C];if("extent"===K.type||0===M||M<=ca||M>2*ca||C<P||G>ca)return F;let R;switch(K.type){case "polygon":if(1<K.rings.length)R=g(K.rings);else return F;break;case "polyline":if(1<K.paths.length)R=g(K.paths);else return F;break;case "multipoint":R=K.points}K=F.clone();for(let aa=0;aa<R.length;aa++){let H=R[aa][0];0>H?(H+=ca,G=Math.max(H,G)):(H-=ca,C=Math.min(H,C))}K.xmin=C;K.xmax=G;return K.width<
M?(K.xmin-=ca,K.xmax-=ca,K):F};k.normalizeCentralMeridian=V;k.normalizeMapX=function(K,F){if(F=r.getInfo(F)){const [M,P]=F.valid;F=P-M;if(K<M)for(;K<M;)K+=F;if(K>P)for(;K>P;)K-=F}return K};k.straightLineDensify=x;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(k,e,Y,Z){function t(y){return Z.isPolygon(y)?y.rings:y.paths}const I={102100:{maxX:2.0037508342788905E7,
minX:-2.0037508342788905E7,plus180Line:new e({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:Y.WebMercator}),minus180Line:new e({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:Y.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new e({paths:[[[180,-180],[180,180]]],spatialReference:Y.WGS84}),minus180Line:new e({paths:[[[-180,-180],[-180,180]]],spatialReference:Y.WGS84})}};
k.cutParams=I;k.getGeometryParts=t;k.getSpatialReferenceMinMaxX=function(y){y=(null==y?0:y.isWebMercator)?102100:4326;return[I[y].minX,I[y].maxX]};k.offsetMagnitude=function(y,n){return Math.ceil((y-n)/(2*n))};k.updatePolyGeometry=function(y,n){const q=t(y);for(const r of q)for(const B of r)B[0]+=n;return y};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/rest/geometry/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),
function(k,e,Y,Z,t,I){function y(){y=e._asyncToGenerator(function*(n,q,r,B){n="string"===typeof n?t.urlToObject(n):n;const w=q[0].spatialReference;q={...B,query:{...n.query,f:"json",sr:JSON.stringify(w),target:JSON.stringify({geometryType:I.getJsonType(q[0]),geometries:q}),cutter:JSON.stringify(r)}};q=yield Z(n.path+"/cut",q);const {cutIndexes:E,geometries:g=[]}=q.data;return{cutIndexes:E,geometries:g.map(x=>{x=I.fromJSON(x);x.spatialReference=w;return x})}});return y.apply(this,arguments)}k.cut=
function(n,q,r,B){return y.apply(this,arguments)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/rest/geometry/simplify":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../../core/urlUtils","../../geometry/support/jsonUtils"],function(k,e,Y,Z,t){function I(){I=e._asyncToGenerator(function*(q,r,B){const w="string"===typeof q?Z.urlToObject(q):q;q=r[0].spatialReference;const E=t.getJsonType(r[0]);r={...B,query:{...w.query,f:"json",sr:q.wkid?q.wkid:JSON.stringify(q),
geometries:JSON.stringify(y(r))}};r=yield Y(w.path+"/simplify",r);return n(r.data,E,q)});return I.apply(this,arguments)}function y(q){return{geometryType:t.getJsonType(q[0]),geometries:q.map(r=>r.toJSON())}}function n(q,r,B){const w=t.getGeometryType(r);return q.map(E=>{E=w.fromJSON(E);E.spatialReference=B;return E})}k.simplify=function(q,r,B){return I.apply(this,arguments)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/sql/WhereClauseCache"],function(k,e,Y){function Z(q,r){return q?y.get(q,r):null}function t(q,r,B,w=!0){const E=[];for(const g of r)if("*"!==g&&!q.has(g))if(w){r=I(g);try{const x=Z(r,q);if(!x)throw new e("feature-store:unsupported-query","invalid SQL expression",{where:r});if(!x.isStandardized)throw new e("feature-store:unsupported-query","expression is not standard",{clause:x});t(q,x.fieldNames,"expression contains missing fields")}catch(x){if((r=x&&x.details)&&
(r.clause||r.where))throw x;r&&r.missingFields?E.push(...r.missingFields):E.push(g)}}else E.push(g);if(E.length)throw new e("feature-store:unsupported-query",B,{missingFields:E});}function I(q){return q.split(" as ")[0]}const y=new Y.WhereClauseCache(50,500),n=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));k.getAliasFromFieldName=function(q){return q.split(" as ")[1]};k.getExpressionFromFieldName=
I;k.getWhereClause=Z;k.hasInvalidFieldType=function(q,r){return(q=r.get(q))?!n.has(q.type):!1};k.validateFields=t;k.validateHaving=function(q,r,B){if(!r)return!0;const w=y.get(r,q);if(!w)throw new e("feature-store:unsupported-query","invalid SQL expression",{having:r});if(!w.isAggregate)throw new e("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:r});t(q,w.fieldNames,"having contains missing fields");if(!w.getExpressions().every(E=>{const {aggregateType:g,
field:x}=E,c=q.has(x)&&q.get(x).name;return B.some(h=>{const {onStatisticField:L,statisticType:V}=h;return(q.has(L)&&q.get(L).name)===c&&V.toLowerCase().trim()===g})}))throw new e("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:r});return!0};k.validateWhere=function(q,r){if(!r)return!0;const B=y.get(r,q);if(!B)throw new e("feature-store:unsupported-query","invalid SQL expression",{where:r});if(!B.isStandardized)throw new e("feature-store:unsupported-query",
"where clause is not standard",{where:r});t(q,B.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(k,e,Y){let Z=function(){function t(I,y){this._cache=new e(I);this._invalidCache=new e(y)}t.prototype.get=function(I,y){const n=`${y.uid}:${I}`,q=this._cache.get(n);if(q)return q;if(void 0!==this._invalidCache.get(n))return null;try{const r=
Y.WhereClause.create(I,y);this._cache.put(n,r);return r}catch{return this._invalidCache.put(n,null),null}};return t}();k.WhereClauseCache=Z;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(k){return function(){function e(Z,t){this._storage=new k.MemCacheStorage;this._storage.maxSize=Z;t&&this._storage.registerRemoveFunc("",t)}var Y=e.prototype;Y.put=function(Z,t){this._storage.put(Z,t,1,1)};Y.pop=function(Z){return this._storage.pop(Z)};
Y.get=function(Z){return this._storage.get(Z)};Y.clear=function(){this._storage.clearAll()};Y.destroy=function(){this._storage.destroy()};return e}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(k,e,Y,Z,t,I){function y(H,v){H+="";return H.length>=v?H:Array(v-H.length+1).join("0")+H}function n(H,v,d="0",m="0",O="0",W="0",ka="",oa="0",ma="0"){return"+"===ka||"-"===
ka?(H=`${y(parseInt(H,10),4)}-${y(parseInt(v,10),2)}-${y(parseInt(d,10),2)}`,v="",10>parseFloat(W)&&(v="0"),m=`${y(parseInt(m,10),2)}:${y(parseInt(O,10),2)}:${v+parseFloat(W).toString()}`,ka=`${ka}${y(parseInt(oa,10),2)}:${y(parseInt(ma,10),2)}`,new Date(H+"T"+m+ka)):new Date(parseInt(H,10),parseInt(v,10)-1,parseInt(d,10),parseInt(m,10),parseInt(O,10),parseFloat(W))}function q(H){let v=K.exec(H);if(null!==v){const [,d,m,O,W,ka,oa]=v;return n(d,m,O,W,ka,oa)}v=F.exec(H);if(null!==v){const [,d,m,O,W,
ka,oa,ma,da,la]=v;return n(d,m,O,W,ka,oa,ma,da,la)}v=M.exec(H);if(null!==v){const [,d,m,O,W,ka,oa,ma,da]=v;return n(d,m,O,W,ka,"0",oa,ma,da)}v=P.exec(H);if(null!==v){const [,d,m,O,W,ka]=v;return n(d,m,O,W,ka)}v=N.exec(H);if(null!==v){const [,d,m,O]=v;return n(d,m,O)}throw Error("SQL Invalid Timestamp");}function r(H){H=N.exec(H);if(null===H)throw Error("SQL Invalid Date");const [,v,d,m]=H;return new Date(parseInt(v,10),parseInt(d,10)-1,parseInt(m,10))}function B(H){return Array.isArray(H)?H:[H]}function w(H){return null!==
H?!0!==H:null}function E(H,v){return null!=H&&null!=v?!0===H&&!0===v:!1===H||!1===v?!1:null}function g(H,v){return null!=H&&null!=v?!0===H||!0===v:!0===H||!0===v?!0:null}function x(H,v){if(null==H)return null;let d=!1;for(const m of v)if(null==m)d=null;else if(H===m){d=!0;break}return d}function c(H,v,d){if(null==H)return null;{let m="",O=R.Normal;for(let W=0;W<v.length;W++){const ka=v.charAt(W);switch(O){case R.Normal:ka===d?O=R.Escaped:m="-[]/{}()*+?.\\^$|".includes(ka)?m+("\\"+ka):"%"===ka?m+".*":
"_"===ka?m+".":m+ka;break;case R.Escaped:m="-[]/{}()*+?.\\^$|".includes(ka)?m+("\\"+ka):m+ka,O=R.Normal}}v=new RegExp("^"+m+"$","m")}return v.test(H)}function h(H){return H instanceof Date?H.valueOf():H}function L(H,v,d){if(null==v||null==d)return null;v=h(v);d=h(d);switch(H){case "\x3c\x3e":return v!==d;case "\x3d":return v===d;case "\x3e":return v>d;case "\x3c":return v<d;case "\x3e\x3d":return v>=d;case "\x3c\x3d":return v<=d}}function V(H,v,d){if(v instanceof t.SqlInterval)if(d instanceof Date)switch(H){case "+":return new Date(v.valueInMilliseconds()+
d.getTime());case "-":return v.valueInMilliseconds()-d.getTime();case "*":return v.valueInMilliseconds()*d.getTime();case "/":return v.valueInMilliseconds()/d.getTime()}else if(d instanceof t.SqlInterval)switch(H){case "+":return t.SqlInterval.createFromMilliseconds(v.valueInMilliseconds()+d.valueInMilliseconds());case "-":return t.SqlInterval.createFromMilliseconds(v.valueInMilliseconds()-d.valueInMilliseconds());case "*":return v.valueInMilliseconds()*d.valueInMilliseconds();case "/":return v.valueInMilliseconds()/
d.valueInMilliseconds()}else v=v.valueInMilliseconds();else if(d instanceof t.SqlInterval)if(v instanceof Date)switch(H){case "+":return new Date(d.valueInMilliseconds()+v.getTime());case "-":return new Date(v.getTime()-d.valueInMilliseconds());case "*":return v.getTime()*d.valueInMilliseconds();case "/":return v.getTime()/d.valueInMilliseconds()}else d=d.valueInMilliseconds();else if(v instanceof Date&&"number"===typeof d)switch(d*=864E5,v=v.getTime(),H){case "+":return new Date(v+d);case "-":return new Date(v-
d);case "*":return new Date(v*d);case "/":return new Date(v/d)}else if(d instanceof Date&&"number"===typeof v)switch(v*=864E5,d=d.getTime(),H){case "+":return new Date(v+d);case "-":return new Date(v-d);case "*":return new Date(v*d);case "/":return new Date(v/d)}switch(H){case "+":return v+d;case "-":return v-d;case "*":return v*d;case "/":return v/d}}function z(H,v,d,m){H=m.getAttribute(H,v);return null!=H&&1===d[v]?new Date(H):H}const N=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,K=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,
F=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,M=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,P=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,ca=new Set(["current_timestamp","current_date","current_time"]);let C=function(){function H(){}H.makeBool=function(v){return!0===v};H.featureValue=function(v,d,m,O){return z(v,d,m,O)};H.equalsNull=function(v){return null===v};H.applyLike=function(v,d,m){return c(v,d,
m)};H.ensureArray=function(v){return B(v)};H.applyIn=function(v,d){return x(v,d)};H.currentDate=function(){const v=new Date;v.setHours(0,0,0,0);return v};H.makeSqlInterval=function(v,d,m){return t.SqlInterval.createFromValueAndQualifer(v,d,m)};H.convertInterval=function(v){return v instanceof t.SqlInterval?v.valueInMilliseconds():v};H.currentTimestamp=function(){return new Date};H.compare=function(v,d,m){return L(v,d,m)};H.calculate=function(v,d,m){return V(v,d,m)};H.makeComparable=function(v){return h(v)};
H.evaluateFunction=function(v,d){return t.evaluateFunction(v,d)};H.lookup=function(v,d){v=d[v];return void 0===v?null:v};H.between=function(v,d){return null==v||null==d[0]||null==d[1]?null:v>=d[0]&&v<=d[1]};H.notbetween=function(v,d){return null==v||null==d[0]||null==d[1]?null:v<d[0]||v>d[1]};H.ternaryNot=function(v){return w(v)};H.ternaryAnd=function(v,d){return E(v,d)};H.ternaryOr=function(v,d){return g(v,d)};return H}(),G=function(){function H(d,m){this.fieldsIndex=m;this.datefields={};this.parameters=
{};this._hasDateFunctions=void 0;this.parseTree=I.WhereGrammar.parse(d);const {isStandardized:O,isAggregate:W,referencedFieldNames:ka}=this._extractExpressionInfo(m);this.referencedFieldNames=ka;this.isStandardized=O;this.isAggregate=W}H.create=function(d,m){return new H(d,m)};var v=H.prototype;v.testSet=function(d,m=aa){const O={};for(const W of this.fieldNames)O[W]=d.map(ka=>m.getAttribute(ka,W));return!!this._evaluateNode(this.parseTree,{attributes:O},aa)};v.calculateValue=function(d,m=aa){d=this._evaluateNode(this.parseTree,
d,m);return d instanceof t.SqlInterval?d.valueInMilliseconds()/864E5:d};v.calculateValueCompiled=function(d,m=aa){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(d,this.parameters,m,this.datefields);if(Y("esri-csp-restrictions"))return this.calculateValue(d,m);this._compileMe();return this.parseTree._compiledVersion(d,this.parameters,m,this.datefields)};v.testFeature=function(d,m=aa){return!!this._evaluateNode(this.parseTree,d,m)};v.testFeatureCompiled=function(d,m=
aa){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(d,this.parameters,m,this.datefields);if(Y("esri-csp-restrictions"))return this.testFeature(d,m);this._compileMe();return!!this.parseTree._compiledVersion(d,this.parameters,m,this.datefields)};v.getFunctions=function(){const d=new Set;this._visitAll(this.parseTree,m=>{"function"===m.type&&d.add(m.name.toLowerCase())});return Array.from(d)};v.getExpressions=function(){const d=new Map;this._visitAll(this.parseTree,m=>
{if("function"===m.type){const O=m.name.toLowerCase();m=m.args.value[0];if("column_ref"===m.type){m=m.column;const W=`${O}-${m}`;d.has(W)||d.set(W,{aggregateType:O,field:m})}}});return[...d.values()]};v.getVariables=function(){const d=new Set;this._visitAll(this.parseTree,m=>{"param"===m.type&&d.add(m.value.toLowerCase())});return Array.from(d)};v._compileMe=function(){const d="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature",
"lookups","attributeAdapter","datefields",d)).bind(C)};v._extractExpressionInfo=function(d){const m=[],O=new Set;let W=!0,ka=!0;this._visitAll(this.parseTree,oa=>{switch(oa.type){case "column_ref":{const ma=d.get(oa.column);let da,la;ma?da=la=ma.name:(la=oa.column,da=la.toLowerCase());!ma||"date"!==ma.type&&"esriFieldTypeDate"!==ma.type||(this.datefields[ma.name]=1);O.has(da)||(O.add(da),m.push(la));oa.column=la;break}case "function":{const {name:ma,args:da}=oa;oa=da.value.length;W&&(W=t.isStandardized(ma,
oa));ka&&(ka=Z.isAggregate(ma,oa))}}});return{referencedFieldNames:Array.from(m),isStandardized:W,isAggregate:ka}};v._visitAll=function(d,m){if(null!=d)switch(m(d),d.type){case "when_clause":this._visitAll(d.operand,m);this._visitAll(d.value,m);break;case "case_expression":for(const O of d.clauses)this._visitAll(O,m);"simple"===d.format&&this._visitAll(d.operand,m);null!==d.else&&this._visitAll(d.else,m);break;case "expr_list":for(const O of d.value)this._visitAll(O,m);break;case "unary_expr":this._visitAll(d.expr,
m);break;case "binary_expr":this._visitAll(d.left,m);this._visitAll(d.right,m);break;case "function":this._visitAll(d.args,m)}};v.evaluateNodeToJavaScript=function(d){switch(d.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(d.value)+", "+JSON.stringify(d.qualifier)+","+JSON.stringify(d.op)+")";case "case_expression":var m="";if("simple"===d.format){var O="this.makeComparable("+this.evaluateNodeToJavaScript(d.operand)+")";m="( ";for(let W=0;W<d.clauses.length;W++)m+=
" ("+O+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(d.clauses[W].operand)+")) ? ("+this.evaluateNodeToJavaScript(d.clauses[W].value)+") : "}else for(m="( ",O=0;O<d.clauses.length;O++)m+=" this.makeBool("+this.evaluateNodeToJavaScript(d.clauses[O].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(d.clauses[O].value)+") : ";m=null!==d.else?m+this.evaluateNodeToJavaScript(d.else):m+"null";return m+=" )";case "param":return"this.lookup("+JSON.stringify(d.value.toLowerCase())+
",lookups)";case "expr_list":m="[";for(O of d.value)"["!==m&&(m+=","),m+=this.evaluateNodeToJavaScript(O);return m+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(d.expr)+")";case "binary_expr":switch(d.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(d.left)+","+this.evaluateNodeToJavaScript(d.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(d.left)+","+this.evaluateNodeToJavaScript(d.right)+" )";case "IS":if("null"!==
d.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(d.left)+")";case "ISNOT":if("null"!==d.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(d.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(d.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(d.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(d.left)+",this.ensureArray("+
this.evaluateNodeToJavaScript(d.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(d.left)+","+this.evaluateNodeToJavaScript(d.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(d.left)+","+this.evaluateNodeToJavaScript(d.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(d.left)+","+this.evaluateNodeToJavaScript(d.right)+","+JSON.stringify(d.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+
this.evaluateNodeToJavaScript(d.left)+","+this.evaluateNodeToJavaScript(d.right)+","+JSON.stringify(d.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(d.operator)+","+this.evaluateNodeToJavaScript(d.left)+","+this.evaluateNodeToJavaScript(d.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(d.operator)+","+this.evaluateNodeToJavaScript(d.left)+","+this.evaluateNodeToJavaScript(d.right)+
")"}throw Error("Not Supported Operator "+d.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(d.value);case "date":return"(new Date("+r(d.value).getTime().toString()+"))";case "timestamp":return"(new Date("+q(d.value).getTime().toString()+"))";case "current_time":return"date"===d.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(d.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+
JSON.stringify(d.name)+","+this.evaluateNodeToJavaScript(d.args)+")"}throw Error("Unsupported sql syntax "+d.type);};v._evaluateNode=function(d,m,O){switch(d.type){case "interval":return m=this._evaluateNode(d.value,m,O),t.SqlInterval.createFromValueAndQualifer(m,d.qualifier,d.op);case "case_expression":if("simple"===d.format){var W=h(this._evaluateNode(d.operand,m,O));for(var ka=0;ka<d.clauses.length;ka++)if(W===h(this._evaluateNode(d.clauses[ka].operand,m,O)))return this._evaluateNode(d.clauses[ka].value,
m,O)}else for(W=0;W<d.clauses.length;W++)if(!0===this._evaluateNode(d.clauses[W].operand,m,O))return this._evaluateNode(d.clauses[W].value,m,O);return null!==d.else?this._evaluateNode(d.else,m,O):null;case "param":return this.parameters[d.value.toLowerCase()];case "expr_list":W=[];for(ka of d.value)W.push(this._evaluateNode(ka,m,O));return W;case "unary_expr":return w(this._evaluateNode(d.expr,m,O));case "binary_expr":switch(d.operator){case "AND":return E(this._evaluateNode(d.left,m,O),this._evaluateNode(d.right,
m,O));case "OR":return g(this._evaluateNode(d.left,m,O),this._evaluateNode(d.right,m,O));case "IS":if("null"!==d.right.type)throw Error("Unsupported RHS for IS");return null===this._evaluateNode(d.left,m,O);case "ISNOT":if("null"!==d.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(d.left,m,O);case "IN":return W=B(this._evaluateNode(d.right,m,O)),x(this._evaluateNode(d.left,m,O),W);case "NOT IN":return W=B(this._evaluateNode(d.right,m,O)),w(x(this._evaluateNode(d.left,
m,O),W));case "BETWEEN":return W=this._evaluateNode(d.left,m,O),d=this._evaluateNode(d.right,m,O),null==W||null==d[0]||null==d[1]?null:W>=h(d[0])&&W<=h(d[1]);case "NOTBETWEEN":return W=this._evaluateNode(d.left,m,O),d=this._evaluateNode(d.right,m,O),null==W||null==d[0]||null==d[1]?null:W<h(d[0])||W>h(d[1]);case "LIKE":return c(this._evaluateNode(d.left,m,O),this._evaluateNode(d.right,m,O),d.escape);case "NOT LIKE":return w(c(this._evaluateNode(d.left,m,O),this._evaluateNode(d.right,m,O),d.escape));
case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return L(d.operator,this._evaluateNode(d.left,m,O),this._evaluateNode(d.right,m,O));case "-":case "+":case "*":case "/":return V(d.operator,this._evaluateNode(d.left,m,O),this._evaluateNode(d.right,m,O))}case "null":case "bool":case "string":case "number":return d.value;case "date":return r(d.value);case "timestamp":return q(d.value);case "current_time":return m=new Date,"date"===d.mode&&m.setHours(0,0,0,0),m;case "column_ref":return z(m,
d.column,this.datefields,O);case "function":return m=this._evaluateNode(d.args,m,O),this.isAggregate?Z.aggregateFunction(d.name,m):t.evaluateFunction(d.name,m)}throw Error("Unsupported sql syntax "+d.type);};e._createClass(H,[{key:"fieldNames",get:function(){return this.referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,d=>{"current_time"===d.type?this._hasDateFunctions=
!0:"function"===d.type&&(this._hasDateFunctions=this._hasDateFunctions||ca.has(d.name.toLowerCase()))});return this._hasDateFunctions}}]);return H}();var R;(function(H){H[H.Normal=0]="Normal";H[H.Escaped=1]="Escaped"})(R||(R={}));const aa={getAttribute(H,v){return(H&&"object"===typeof H.attributes?H.attributes:H)[v]}};k.WhereClause=G;k.defaultAttributeAdapter=aa;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(k){function e(t){let I=
0;for(let y=0;y<t.length;y++)I+=t[y];return I/t.length}function Y(t){const I=e(t),y=t.length;let n=0;for(const q of t)n+=(q-I)**2;return 1<y?n/(y-1):0}const Z={min:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.min.apply(Math,t[0])},max:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.max.apply(Math,t[0])},avg:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:e(t[0])},sum:{minParams:1,maxParams:1,evaluate:t=>{if(null==t[0])t=null;else{{t=t[0];let I=0;for(let y=0;y<t.length;y++)I+=
t[y];t=I}}return t}},stddev:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.sqrt(Y(t[0]))},count:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:t[0].length},var:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Y(t[0])}};k.aggregateFunction=function(t,I){const y=Z[t.toLowerCase()];if(null==y)throw Error("Function Not Recognised");if(I.length<y.minParams||I.length>y.maxParams)throw Error(`Invalid Parameter count for call to ${t.toUpperCase()}`);return y.evaluate(I)};k.isAggregate=
function(t,I){t=Z[t.toLowerCase()];return null!=t&&I>=t.minParams&&I<=t.maxParams};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(k,e){let Y=function(){function t(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}t._fixDefaults=function(I){if(null!==I.precision||null!==I.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};t.createFromMilliseconds=
function(I){const y=new t;y.second=I/1E3;return y};t.createFromValueAndQualifer=function(I,y,n){let q=null;const r=new t;r.op="-"===n?"-":"+";if("interval-period"===y.type){t._fixDefaults(y);if("year"===y.period||"month"===y.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(I))r[y.period]=parseFloat(I);else throw Error("Illegal Interval");}else{t._fixDefaults(y.start);t._fixDefaults(y.end);if("year"===y.start.period||"month"===y.start.period)throw Error("Year-Month Intervals not supported");
if("year"===y.end.period||"month"===y.end.period)throw Error("Year-Month Intervals not supported");switch(y.start.period){case "day":switch(y.end.period){case "hour":q=/^[0-9]{1,} [0-9]{1,}$/;if(q.test(I))r[y.start.period]=parseFloat(I.split(" ")[0]),r[y.end.period]=parseFloat(I.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":q=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(q.test(I))r[y.start.period]=parseFloat(I.split(" ")[0]),I=I.split(" ")[1].split(":"),r.hour=parseFloat(I[0]),
r.minute=parseFloat(I[1]);else throw Error("Illegal Interval");break;case "second":q=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(q.test(I))r[y.start.period]=parseFloat(I.split(" ")[0]),I=I.split(" ")[1].split(":"),r.hour=parseFloat(I[0]),r.minute=parseFloat(I[1]),r.second=parseFloat(I[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(y.end.period){case "minute":q=/^[0-9]{1,}:[0-9]{1,}$/;if(q.test(I))r.hour=parseFloat(I.split(":")[0]),
r.minute=parseFloat(I.split(":")[1]);else throw Error("Illegal Interval");break;case "second":q=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(q.test(I))I=I.split(":"),r.hour=parseFloat(I[0]),r.minute=parseFloat(I[1]),r.second=parseFloat(I[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(y.end.period){case "second":q=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(q.test(I))I=I.split(":"),r.minute=parseFloat(I[0]),r.second=parseFloat(I[1]);
else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return r};t.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return t}();const Z={extract:{minParams:2,maxParams:2,evaluate:([t,I])=>{if(null==I)return null;if(I instanceof Date)switch(t.toUpperCase()){case "SECOND":return I.getSeconds();case "MINUTE":return I.getMinutes();
case "HOUR":return I.getHours();case "DAY":return I.getDate();case "MONTH":return I.getMonth()+1;case "YEAR":return I.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:t=>{if(2===t.length){const [I,y]=t;return null==I||null==y?null:I.toString().substring(y-1)}if(3===t.length){const [I,y,n]=t;return null==I||null==y||null==n?null:0>=n?"":I.toString().substring(y-1,y+n-1)}}},position:{minParams:2,maxParams:2,evaluate:([t,I])=>null==t||
null==I?null:I.indexOf(t)+1},trim:{minParams:2,maxParams:3,evaluate:t=>{var I=3===t.length,y=I?t[1]:" ";I=I?t[2]:t[1];if(null==y||null==I)return null;y=`(${e.escapeRegExpString(y)})`;switch(t[0]){case "BOTH":return I.replace(new RegExp(`^${y}*|${y}*$`,"g"),"");case "LEADING":return I.replace(new RegExp(`^${y}*`,"g"),"");case "TRAILING":return I.replace(new RegExp(`${y}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.abs(t[0])},
ceiling:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.ceil(t[0])},floor:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.floor(t[0])},log:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.log(t[0])},log10:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.log(t[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.sin(t[0])},cos:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.cos(t[0])},tan:{minParams:1,maxParams:1,evaluate:t=>
null==t[0]?null:Math.tan(t[0])},asin:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.asin(t[0])},acos:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.acos(t[0])},atan:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.atan(t[0])},sign:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:0<t[0]?1:0>t[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:t=>null==t[0]||null==t[1]?null:t[0]**t[1]},mod:{minParams:2,maxParams:2,evaluate:t=>null==t[0]||null==t[1]?null:t[0]%t[1]},round:{minParams:1,
maxParams:2,evaluate:t=>{const I=t[0];t=2===t.length?10**t[1]:1;return null==I?null:Math.round(I*t)/t}},truncate:{minParams:1,maxParams:2,evaluate:t=>null==t[0]?null:1===t.length?parseInt(t[0].toFixed(0),10):parseFloat(t[0].toFixed(t[1]))},char_length:{minParams:1,maxParams:1,evaluate:t=>"string"===typeof t[0]||t[0]instanceof String?t[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:t=>{let I="";for(let y=0;y<t.length;y++){if(null==t[y])return null;I+=t[y].toString()}return I}},lower:{minParams:1,
maxParams:1,evaluate:t=>null==t[0]?null:t[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:t[0].toString().toUpperCase()}};k.SqlInterval=Y;k.evaluateFunction=function(t,I){const y=Z[t.toLowerCase()];if(null==y)throw Error("Function Not Recognised");if(I.length<y.minParams||I.length>y.maxParams)throw Error(`Invalid Parameter count for call to ${t.toUpperCase()}`);return y.evaluate(I)};k.isStandardized=function(t,I){t=Z[t.toLowerCase()];return null!=t&&I>=t.minParams&&
I<=t.maxParams};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(k,e){var Y={exports:{}};(function(t){(function(I,y){t.exports&&(t.exports=y())})(e.commonjsGlobal,function(){function I(n,q,r,B){n=Error.call(this,n);Object.setPrototypeOf&&Object.setPrototypeOf(n,I.prototype);n.expected=q;n.found=r;n.location=B;n.name="SyntaxError";return n}function y(n,q,r){r=r||" ";if(n.length>q)return n;q-=n.length;
r+=r.repeat(q);return n+r.slice(0,q)}(function(n,q){function r(){this.constructor=n}r.prototype=q.prototype;n.prototype=new r})(I,Error);I.prototype.format=function(n){var q="Error: "+this.message;if(this.location){var r=null,B;for(B=0;B<n.length;B++)if(n[B].source===this.location.source){r=n[B].text.split(/\r\n|\n|\r/g);break}n=this.location.start;B=this.location.source+":"+n.line+":"+n.column;if(r){var w=this.location.end,E=y("",n.line.toString().length);r=r[n.line-1];w=n.line===w.line?w.column:
r.length+1;q+="\n --\x3e "+B+"\n"+E+" |\n"+n.line+" | "+r+"\n"+E+" | "+y("",n.column-1)+y("",w-n.column,"^")}else q+="\n at "+B}return q};I.buildMessage=function(n,q){function r(x){return x.charCodeAt(0).toString(16).toUpperCase()}function B(x){return x.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+r(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(c){return"\\x"+r(c)})}function w(x){return x.replace(/\\/g,
"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+r(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(c){return"\\x"+r(c)})}function E(x){return g[x.type](x)}var g={literal:function(x){return'"'+B(x.text)+'"'},class:function(x){var c=x.parts.map(function(h){return Array.isArray(h)?w(h[0])+"-"+w(h[1]):w(h)});return"["+(x.inverted?"^":"")+c+"]"},any:function(){return"any character"},
end:function(){return"end of input"},other:function(x){return x.description}};return"Expected "+function(x){x=x.map(E);var c,h;x.sort();if(0<x.length){for(h=c=1;c<x.length;c++)x[c-1]!==x[c]&&(x[h]=x[c],h++);x.length=h}switch(x.length){case 1:return x[0];case 2:return x[0]+" or "+x[1];default:return x.slice(0,-1).join(", ")+", or "+x[x.length-1]}}(n)+" but "+(q?'"'+B(q)+'"':"end of input")+" found."};return{SyntaxError:I,parse:function(n,q){function r(u,A){return{type:"literal",text:u,ignoreCase:A}}
function B(u,A,X){return{type:"class",parts:u,inverted:A,ignoreCase:X}}function w(u){var A=cc[u],X;if(!A){for(X=u-1;!cc[X];)X--;A=cc[X];for(A={line:A.line,column:A.column};X<u;)10===n.charCodeAt(X)?(A.line++,A.column=1):A.column++,X++;cc[u]=A}return A}function E(u,A){var X=w(u),ua=w(A);return{source:$a,start:{offset:u,line:X.line,column:X.column},end:{offset:A,line:ua.line,column:ua.column}}}function g(u){f<sb||(f>sb&&(sb=f,vc=[]),vc.push(u))}function x(){var u=f;ta();var A=h();A!==a?(ta(),u=A):(f=
u,u=a);return u}function c(){var u=f;var A=h();if(A!==a){u=[];var X=f;var ua=ta();var Ca=Ea();if(Ca!==a){var Oa=ta();var Pa=h();Pa!==a?X=ua=[ua,Ca,Oa,Pa]:(f=X,X=a)}else f=X,X=a;for(;X!==a;)u.push(X),X=f,ua=ta(),Ca=Ea(),Ca!==a?(Oa=ta(),Pa=h(),Pa!==a?X=ua=[ua,Ca,Oa,Pa]:(f=X,X=a)):(f=X,X=a);X={type:"expr_list"};A=[A];for(ua=0;ua<u.length;ua++)A.push(u[ua][3]);X.value=A;u=X}else f=u,u=a;return u}function h(){var u=f;var A=L();if(A!==a){u=[];var X=f;var ua=ta();var Ca=S();if(Ca!==a){var Oa=ta();var Pa=
L();Pa!==a?X=ua=[ua,Ca,Oa,Pa]:(f=X,X=a)}else f=X,X=a;for(;X!==a;)u.push(X),X=f,ua=ta(),Ca=S(),Ca!==a?(Oa=ta(),Pa=L(),Pa!==a?X=ua=[ua,Ca,Oa,Pa]:(f=X,X=a)):(f=X,X=a);u=Sa(A,u)}else f=u,u=a;return u}function L(){var u=f;var A=V();if(A!==a){u=[];var X=f;var ua=ta();var Ca=D();if(Ca!==a){var Oa=ta();var Pa=V();Pa!==a?X=ua=[ua,Ca,Oa,Pa]:(f=X,X=a)}else f=X,X=a;for(;X!==a;)u.push(X),X=f,ua=ta(),Ca=D(),Ca!==a?(Oa=ta(),Pa=V(),Pa!==a?X=ua=[ua,Ca,Oa,Pa]:(f=X,X=a)):(f=X,X=a);u=Sa(A,u)}else f=u,u=a;return u}function V(){var u=
f;var A=l();if(A===a){A=f;if(33===n.charCodeAt(f)){var X=na;f++}else X=a,0===va&&g(nd);if(X!==a){var ua=f;va++;if(61===n.charCodeAt(f)){var Ca=Qb;f++}else Ca=a,0===va&&g(Lc);va--;Ca===a?ua=void 0:(f=ua,ua=a);ua!==a?A=X=[X,ua]:(f=A,A=a)}else f=A,A=a}A!==a?(X=ta(),ua=V(),ua!==a?u={type:"unary_expr",operator:"NOT",expr:ua}:(f=u,u=a)):(f=u,u=a);if(u===a){A=f;u=F();if(u!==a){ta();A=[];X=f;ua=ta();Ca=z();if(Ca!==a){var Oa=ta();var Pa=F();Pa!==a?X=ua=[ua,Ca,Oa,Pa]:(f=X,X=a)}else f=X,X=a;if(X!==a)for(;X!==
a;)A.push(X),X=f,ua=ta(),Ca=z(),Ca!==a?(Oa=ta(),Pa=F(),Pa!==a?X=ua=[ua,Ca,Oa,Pa]:(f=X,X=a)):(f=X,X=a);else A=a;A!==a&&(A={type:"arithmetic",tail:A});A===a&&(A=f,X=K(),X!==a?(ta(),ua=Ha(),ua!==a?(ta(),ua=c(),ua!==a?(ta(),Ca=Ra(),Ca!==a?A={op:X,right:ua}:(f=A,A=a)):(f=A,A=a)):(f=A,A=a)):(f=A,A=a),A===a&&(A=f,X=K(),X!==a?(ta(),ua=Ha(),ua!==a?(ta(),ua=Ra(),ua!==a?A={op:X,right:{type:"expr_list",value:[]}}:(f=A,A=a)):(f=A,A=a)):(f=A,A=a),A===a&&(A=f,X=K(),X!==a?(ta(),ua=v(),ua!==a?A={op:X,right:ua}:(f=
A,A=a)):(f=A,A=a))),A===a&&(A=f,Ca=l(),Ca!==a?(ta(),X=T(),X!==a?(ta(),ua=F(),ua!==a?(ta(),Oa=D(),Oa!==a?(ta(),Ca=F(),Ca!==a?A={op:"NOT"+X,right:{type:"expr_list",value:[ua,Ca]}}:(f=A,A=a)):(f=A,A=a)):(f=A,A=a)):(f=A,A=a)):(f=A,A=a),A===a&&(A=f,Ca=T(),Ca!==a?(ta(),X=F(),X!==a?(ta(),ua=D(),ua!==a?(ta(),Oa=F(),Oa!==a?A={op:Ca,right:{type:"expr_list",value:[X,Oa]}}:(f=A,A=a)):(f=A,A=a)):(f=A,A=a)):(f=A,A=a)),A===a&&(A=f,X=p(),X!==a?(ta(),ua=l(),ua!==a?(ta(),ua=F(),ua!==a?A={op:X+"NOT",right:ua}:(f=A,
A=a)):(f=A,A=a)):(f=A,A=a),A===a&&(A=f,X=p(),X!==a?(ta(),ua=F(),ua!==a?A={op:X,right:ua}:(f=A,A=a)):(f=A,A=a)),A===a&&(A=f,X=N(),X!==a?(ta(),ua=oa(),ua!==a?(ta(),Ca=f,n.substr(f,6).toLowerCase()===Xa?(Oa=n.substr(f,6),f+=6):(Oa=a,0===va&&g(od)),Oa!==a?(Oa=f,va++,Pa=aa(),va--,Pa===a?Oa=void 0:(f=Oa,Oa=a),Oa!==a?Ca="ESCAPE":(f=Ca,Ca=a)):(f=Ca,Ca=a),Ca!==a?(ta(),Ca=ma(),Ca!==a?A={op:X,right:ua,escape:Ca.value}:(f=A,A=a)):(f=A,A=a)):(f=A,A=a)):(f=A,A=a),A===a&&(A=f,X=N(),X!==a?(ta(),ua=oa(),ua!==a?A=
{op:X,right:ua,escape:""}:(f=A,A=a)):(f=A,A=a))))));A===a&&(A=null);""==A||void 0==A||null==A?A=u:(X=null,A=X="arithmetic"==A.type?Sa(u,A.tail):ab(A.op,u,A.right,A.escape))}else f=A,A=a;u=A}return u}function z(){if(n.substr(f,2)===zb){var u=zb;f+=2}else u=a,0===va&&g(pd);u===a&&(62===n.charCodeAt(f)?(u=lb,f++):(u=a,0===va&&g(qd)),u===a&&(n.substr(f,2)===Bb?(u=Bb,f+=2):(u=a,0===va&&g(rd)),u===a&&(n.substr(f,2)===Rb?(u=Rb,f+=2):(u=a,0===va&&g(sd)),u===a&&(60===n.charCodeAt(f)?(u=Pb,f++):(u=a,0===va&&
g(td)),u===a&&(61===n.charCodeAt(f)?(u=Qb,f++):(u=a,0===va&&g(Lc)),u===a&&(n.substr(f,2)===bc?(u=bc,f+=2):(u=a,0===va&&g(ud))))))));return u}function N(){var u=u=f;var A=l();if(A!==a){var X=ta();var ua=fa();ua!==a?u=A=[A,X,ua]:(f=u,u=a)}else f=u,u=a;u!==a&&(u=u[0]+" "+u[2]);u===a&&(u=fa());return u}function K(){var u=u=f;var A=l();if(A!==a){var X=ta();var ua=b();ua!==a?u=A=[A,X,ua]:(f=u,u=a)}else f=u,u=a;u!==a&&(u=u[0]+" "+u[2]);u===a&&(u=b());return u}function F(){var u=f;var A=P();if(A!==a){u=[];
var X=f;var ua=ta();var Ca=M();if(Ca!==a){var Oa=ta();var Pa=P();Pa!==a?X=ua=[ua,Ca,Oa,Pa]:(f=X,X=a)}else f=X,X=a;for(;X!==a;)u.push(X),X=f,ua=ta(),Ca=M(),Ca!==a?(Oa=ta(),Pa=P(),Pa!==a?X=ua=[ua,Ca,Oa,Pa]:(f=X,X=a)):(f=X,X=a);u=Sa(A,u)}else f=u,u=a;return u}function M(){if(43===n.charCodeAt(f)){var u=fb;f++}else u=a,0===va&&g(wc);u===a&&(45===n.charCodeAt(f)?(u=qb,f++):(u=a,0===va&&g(xc)));return u}function P(){var u=f;var A=C();if(A!==a){u=[];var X=f;var ua=ta();var Ca=ca();if(Ca!==a){var Oa=ta();
var Pa=C();Pa!==a?X=ua=[ua,Ca,Oa,Pa]:(f=X,X=a)}else f=X,X=a;for(;X!==a;)u.push(X),X=f,ua=ta(),Ca=ca(),Ca!==a?(Oa=ta(),Pa=C(),Pa!==a?X=ua=[ua,Ca,Oa,Pa]:(f=X,X=a)):(f=X,X=a);u=Sa(A,u)}else f=u,u=a;return u}function ca(){if(42===n.charCodeAt(f)){var u=Ua;f++}else u=a,0===va&&g(vd);u===a&&(47===n.charCodeAt(f)?(u=kb,f++):(u=a,0===va&&g(wd)));return u}function C(){var u=ma();if(u===a){var A=f;var X=f;var ua=wa();if(ua!==a){var Ca=Da();if(Ca!==a){var Oa=La();Oa!==a?X=parseFloat(ua+Ca+Oa):(f=X,X=a)}else f=
X,X=a}else f=X,X=a;X===a&&(X=f,ua=wa(),ua!==a?(Ca=Da(),Ca!==a?X=parseFloat(ua+Ca):(f=X,X=a)):(f=X,X=a),X===a&&(X=f,ua=wa(),ua!==a?(Ca=La(),Ca!==a?X=parseFloat(ua+Ca):(f=X,X=a)):(f=X,X=a),X===a&&(X=f,ua=wa(),ua!==a&&(ua=parseFloat(ua)),X=ua)));var Pa=X;if(Pa!==a){var dc=f;va++;var xd=R();va--;xd===a?dc=void 0:(f=dc,dc=a);dc!==a?A={type:"number",value:Pa}:(f=A,A=a)}else f=A,A=a;u=A;if(u===a){var Sb=f;var Eb=f;if(n.substr(f,4).toLowerCase()===pa){var ec=n.substr(f,4);f+=4}else ec=a,0===va&&g(yd);if(ec!==
a){var Tb=f;va++;var zd=aa();va--;zd===a?Tb=void 0:(f=Tb,Tb=a);Tb!==a?Eb=ec=[ec,Tb]:(f=Eb,Eb=a)}else f=Eb,Eb=a;var Db=Eb;Db!==a&&(Db={type:"bool",value:!0});Sb=Db;if(Sb===a){Sb=f;var Fb=f;if(n.substr(f,5).toLowerCase()===ya){var fc=n.substr(f,5);f+=5}else fc=a,0===va&&g(Ad);if(fc!==a){var Ub=f;va++;var Bd=aa();va--;Bd===a?Ub=void 0:(f=Ub,Ub=a);Ub!==a?Fb=fc=[fc,Ub]:(f=Fb,Fb=a)}else f=Fb,Fb=a;Db=Fb;Db!==a&&(Db={type:"bool",value:!1});Sb=Db}u=Sb;if(u===a){var Gb=f;if(n.substr(f,4).toLowerCase()===ba){var gc=
n.substr(f,4);f+=4}else gc=a,0===va&&g(Cd);if(gc!==a){var Vb=f;va++;var Dd=aa();va--;Dd===a?Vb=void 0:(f=Vb,Vb=a);Vb!==a?Gb=gc=[gc,Vb]:(f=Gb,Gb=a)}else f=Gb,Gb=a;var yc=Gb;yc!==a&&(yc={type:"null",value:null});u=yc;if(u===a){var Hb=f;var Ib=f;if(n.substr(f,4).toLowerCase()===Ed){var Mc=n.substr(f,4);f+=4}else Mc=a,0===va&&g(Fd);if(Mc!==a){var hc=f;va++;var Gd=aa();va--;Gd===a?hc=void 0:(f=hc,hc=a);hc!==a?Ib="DATE":(f=Ib,Ib=a)}else f=Ib,Ib=a;if(Ib!==a){ta();var Nc=oa();Nc!==a?Hb={type:"date",value:Nc.value}:
(f=Hb,Hb=a)}else f=Hb,Hb=a;u=Hb;if(u===a){var Jb=f;var Kb=f;if(n.substr(f,9).toLowerCase()===Hd){var Oc=n.substr(f,9);f+=9}else Oc=a,0===va&&g(Id);if(Oc!==a){var ic=f;va++;var Jd=aa();va--;Jd===a?ic=void 0:(f=ic,ic=a);ic!==a?Kb="TIMESTAMP":(f=Kb,Kb=a)}else f=Kb,Kb=a;if(Kb!==a){ta();var Pc=oa();Pc!==a?Jb={type:"timestamp",value:Pc.value}:(f=Jb,Jb=a)}else f=Jb,Jb=a;u=Jb;if(u===a){var db=f;var zc=J();if(zc!==a){ta();if(45===n.charCodeAt(f)){var vb=qb;f++}else vb=a,0===va&&g(xc);vb===a&&(43===n.charCodeAt(f)?
(vb=fb,f++):(vb=a,0===va&&g(wc)));if(vb!==a){ta();var Wb=oa();if(Wb!==a){ta();var Qc=m();Qc!==a?db={type:"interval",value:Wb,qualifier:Qc,op:vb}:(f=db,db=a)}else f=db,db=a}else f=db,db=a}else f=db,db=a;db===a&&(db=f,zc=J(),zc!==a?(ta(),vb=oa(),vb!==a?(ta(),Wb=m(),Wb!==a?db={type:"interval",value:vb,qualifier:Wb,op:""}:(f=db,db=a)):(f=db,db=a)):(f=db,db=a));u=db}}}}}}var Ya=u;if(Ya===a){var hb=f;var Lb=f;if(n.substr(f,7).toLowerCase()===Kd){var Rc=n.substr(f,7);f+=7}else Rc=a,0===va&&g(Ld);if(Rc!==
a){var jc=f;va++;var Md=aa();va--;Md===a?jc=void 0:(f=jc,jc=a);jc!==a?Lb="EXTRACT":(f=Lb,Lb=a)}else f=Lb,Lb=a;if(Lb!==a){ta();var Nd=Ha();if(Nd!==a){ta();var nb=Q();nb===a&&(nb=ea(),nb===a&&(nb=ra(),nb===a&&(nb=sa(),nb===a&&(nb=xa(),nb===a&&(nb=za())))));var Sc=nb;if(Sc!==a){ta();var Od=ha();if(Od!==a){ta();var Tc=h();if(Tc!==a){ta();var Pd=Ra();Pd!==a?hb={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:Sc},Tc]}}:(f=hb,hb=a)}else f=hb,hb=a}else f=hb,hb=a}else f=hb,
hb=a}else f=hb,hb=a}else f=hb,hb=a;Ya=hb;if(Ya===a){var ib=f;var Mb=f;if(n.substr(f,9).toLowerCase()===Qd){var Uc=n.substr(f,9);f+=9}else Uc=a,0===va&&g(Rd);if(Uc!==a){var kc=f;va++;var Sd=aa();va--;Sd===a?kc=void 0:(f=kc,kc=a);kc!==a?Mb="SUBSTRING":(f=Mb,Mb=a)}else f=Mb,Mb=a;if(Mb!==a){ta();var Td=Ha();if(Td!==a){ta();var Ac=h();if(Ac!==a){ta();var Ud=ha();if(Ud!==a){ta();var Bc=h();if(Bc!==a){ta();var wb=f;var Nb=f;if(n.substr(f,3).toLowerCase()===Vd){var Vc=n.substr(f,3);f+=3}else Vc=a,0===va&&
g(Wd);if(Vc!==a){var lc=f;va++;var Xd=aa();va--;Xd===a?lc=void 0:(f=lc,lc=a);lc!==a?Nb="FOR":(f=Nb,Nb=a)}else f=Nb,Nb=a;var Xb=Nb;if(Xb!==a){var Yd=ta();var Wc=h();if(Wc!==a){var Zd=ta();wb=Xb=[Xb,Yd,Wc,Zd]}else f=wb,wb=a}else f=wb,wb=a;wb===a&&(wb=null);Xb=Ra();Xb!==a?ib={type:"function",name:"substring",args:{type:"expr_list",value:wb?[Ac,Bc,wb[2]]:[Ac,Bc]}}:(f=ib,ib=a)}else f=ib,ib=a}else f=ib,ib=a}else f=ib,ib=a}else f=ib,ib=a}else f=ib,ib=a;Ya=ib;if(Ya===a){var Za=f;var Cc=ia();if(Cc!==a){ta();
var Dc=Ha();if(Dc!==a){ta();var xb=d();xb===a&&(xb=null);ta();var Yb=h();if(Yb!==a){ta();var Ec=ha();if(Ec!==a){ta();var Xc=h();if(Xc!==a){ta();var $d=Ra();$d!==a?Za={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==xb?"BOTH":xb},Yb,Xc]}}:(f=Za,Za=a)}else f=Za,Za=a}else f=Za,Za=a}else f=Za,Za=a}else f=Za,Za=a}else f=Za,Za=a;Za===a&&(Za=f,Cc=ia(),Cc!==a?(ta(),Dc=Ha(),Dc!==a?(ta(),xb=d(),xb===a&&(xb=null),ta(),Yb=h(),Yb!==a?(ta(),Ec=Ra(),Ec!==a?Za={type:"function",
name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==xb?"BOTH":xb},Yb]}}:(f=Za,Za=a)):(f=Za,Za=a)):(f=Za,Za=a)):(f=Za,Za=a));Ya=Za;if(Ya===a){var jb=f;var Ob=f;if(n.substr(f,8).toLowerCase()===ae){var Yc=n.substr(f,8);f+=8}else Yc=a,0===va&&g(be);if(Yc!==a){var mc=f;va++;var ce=aa();va--;ce===a?mc=void 0:(f=mc,mc=a);mc!==a?Ob="POSITION":(f=Ob,Ob=a)}else f=Ob,Ob=a;if(Ob!==a){ta();var de=Ha();if(de!==a){ta();var Zc=h();if(Zc!==a){ta();var ee=b();if(ee!==a){ta();var $c=h();if($c!==a){ta();
var fe=Ra();fe!==a?jb={type:"function",name:"position",args:{type:"expr_list",value:[Zc,$c]}}:(f=jb,jb=a)}else f=jb,jb=a}else f=jb,jb=a}else f=jb,jb=a}else f=jb,jb=a}else f=jb,jb=a;Ya=jb;if(Ya===a){var Ab=f;var nc;var ob=f;ob=nc=G();if(ob===a)if(ob=f,96===n.charCodeAt(f)?(nc=ad,f++):(nc=a,0===va&&g(bd)),nc!==a){var oc=[];if(cd.test(n.charAt(f))){var yb=n.charAt(f);f++}else yb=a,0===va&&g(dd);if(yb!==a)for(;yb!==a;)oc.push(yb),cd.test(n.charAt(f))?(yb=n.charAt(f),f++):(yb=a,0===va&&g(dd));else oc=
a;oc!==a?(96===n.charCodeAt(f)?(yb=ad,f++):(yb=a,0===va&&g(bd)),yb!==a?ob=oc.join(""):(f=ob,ob=a)):(f=ob,ob=a)}else f=ob,ob=a;var ed=ob;if(ed!==a){ta();var ge=Ha();if(ge!==a){ta();var pc=c();pc===a&&(pc=null);ta();var he=Ra();he!==a?Ab={type:"function",name:ed,args:pc?pc:{type:"expr_list",value:[]}}:(f=Ab,Ab=a)}else f=Ab,Ab=a}else f=Ab,Ab=a;Ya=Ab;if(Ya===a){var tb;var eb=f;var Fc=Ba();if(Fc!==a){ta();var Zb=h();if(Zb!==a){ta();var $b=[];for(tb=la();tb!==a;)$b.push(tb),tb=la();tb=ta();var qc=Ja();
qc!==a?eb={type:"case_expression",format:"simple",operand:Zb,clauses:$b,else:null}:(f=eb,eb=a)}else f=eb,eb=a}else f=eb,eb=a;if(eb===a)if(eb=f,Fc=Ba(),Fc!==a)if(ta(),Zb=h(),Zb!==a){ta();$b=[];for(tb=la();tb!==a;)$b.push(tb),tb=la();tb=ta();qc=qa();if(qc!==a){ta();var ie=Ja();ie!==a?eb={type:"case_expression",format:"simple",operand:Zb,clauses:$b,else:qc.value}:(f=eb,eb=a)}else f=eb,eb=a}else f=eb,eb=a;else f=eb,eb=a;var Gc=eb;if(Gc===a){var ub;var gb=f;var Hc=Ba();if(Hc!==a){ta();var ac=[];for(ub=
da();ub!==a;)ac.push(ub),ub=da();ub=ta();var rc=Ja();rc!==a?gb={type:"case_expression",format:"searched",clauses:ac,else:null}:(f=gb,gb=a)}else f=gb,gb=a;if(gb===a)if(gb=f,Hc=Ba(),Hc!==a){ta();ac=[];for(ub=da();ub!==a;)ac.push(ub),ub=da();ub=ta();rc=qa();if(rc!==a){ta();var je=Ja();je!==a?gb={type:"case_expression",format:"searched",clauses:ac,else:rc.value}:(f=gb,gb=a)}else f=gb,gb=a}else f=gb,gb=a;Gc=gb}Ya=Gc;if(Ya===a){var sc;var tc=f;var fd=R();if(fd!==a){var gd=[];for(sc=H();sc!==a;)gd.push(sc),
sc=H();tc=fd+gd.join("")}else f=tc,tc=a;var uc=tc;if(uc!==a){var Ic=uc;uc=/^CURRENT_DATE$/i.test(Ic)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Ic)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",column:Ic}}Ya=uc;if(Ya===a&&(Ya=v(),Ya===a)){Ya=f;var ke=Ha();if(ke!==a){ta();var Jc=h();if(Jc!==a){ta();var le=Ra();le!==a?(Jc.paren=!0,Ya=Jc):(f=Ya,Ya=a)}else f=Ya,Ya=a}else f=Ya,Ya=a}}}}}}}}return Ya}function G(){var u;var A=f;var X=R();if(X!==a){A=[];for(u=aa();u!==
a;)A.push(u),u=aa();A=X+A.join("")}else f=A,A=a;return A}function R(){if(me.test(n.charAt(f))){var u=n.charAt(f);f++}else u=a,0===va&&g(ne);return u}function aa(){if(oe.test(n.charAt(f))){var u=n.charAt(f);f++}else u=a,0===va&&g(pe);return u}function H(){if(qe.test(n.charAt(f))){var u=n.charAt(f);f++}else u=a,0===va&&g(re);return u}function v(){var u=f;if(64===n.charCodeAt(f)){var A=rb;f++}else A=a,0===va&&g(se);if(A!==a){var X=G();X!==a?u=A=[A,X]:(f=u,u=a)}else f=u,u=a;u!==a&&(u={type:"param",value:u[1]});
return u}function d(){var u=f;if(n.substr(f,7).toLowerCase()===te){var A=n.substr(f,7);f+=7}else A=a,0===va&&g(ue);if(A!==a){A=f;va++;var X=aa();va--;X===a?A=void 0:(f=A,A=a);A!==a?u="LEADING":(f=u,u=a)}else f=u,u=a;u===a&&(u=f,n.substr(f,8).toLowerCase()===ve?(A=n.substr(f,8),f+=8):(A=a,0===va&&g(we)),A!==a?(A=f,va++,X=aa(),va--,X===a?A=void 0:(f=A,A=a),A!==a?u="TRAILING":(f=u,u=a)):(f=u,u=a),u===a&&(u=f,n.substr(f,4).toLowerCase()===xe?(A=n.substr(f,4),f+=4):(A=a,0===va&&g(ye)),A!==a?(A=f,va++,
X=aa(),va--,X===a?A=void 0:(f=A,A=a),A!==a?u="BOTH":(f=u,u=a)):(f=u,u=a)));return u}function m(){var u=f;var A=f;var X=O();if(X!==a){ta();var ua=Ha();if(ua!==a)if(ta(),ua=ka(),ua!==a){ta();var Ca=Ra();Ca!==a?A={type:"interval-period",period:X.value,precision:ua,secondary:null}:(f=A,A=a)}else f=A,A=a;else f=A,A=a}else f=A,A=a;A===a&&(A=f,X=O(),X!==a&&(X=hd(X)),A=X);if(A!==a)if(ta(),X=f,n.substr(f,2).toLowerCase()===ze?(ua=n.substr(f,2),f+=2):(ua=a,0===va&&g(Ae)),ua!==a?(ua=f,va++,Ca=aa(),va--,Ca===
a?ua=void 0:(f=ua,ua=a),ua!==a?X="TO":(f=X,X=a)):(f=X,X=a),X!==a){ta();X=f;ua=O();ua!==a&&(ua={type:"interval-period",period:ua.value,precision:null,secondary:null});X=ua;if(X===a){X=f;ua=za();if(ua!==a)if(ta(),ua=Ha(),ua!==a)if(ta(),ua=ka(),ua!==a)if(ta(),Ca=Ea(),Ca!==a)if(ta(),Ca=W(),Ca!==a){ta();var Oa=Ra();Oa!==a?X=id(ua,Ca):(f=X,X=a)}else f=X,X=a;else f=X,X=a;else f=X,X=a;else f=X,X=a;else f=X,X=a;X===a&&(X=f,ua=za(),ua!==a?(ta(),ua=Ha(),ua!==a?(ta(),ua=ka(),ua!==a?(ta(),Ca=Ra(),Ca!==a?X={type:"interval-period",
period:"second",precision:ua,secondary:null}:(f=X,X=a)):(f=X,X=a)):(f=X,X=a)):(f=X,X=a),X===a&&(X=f,ua=za(),ua!==a&&(ua={type:"interval-period",period:"second",precision:null,secondary:null}),X=ua))}X!==a?u={type:"interval-qualifier",start:A,end:X}:(f=u,u=a)}else f=u,u=a;else f=u,u=a;u===a&&(u=f,X=O(),X!==a?(ta(),A=Ha(),A!==a?(ta(),A=W(),A!==a?(ta(),ua=Ra(),ua!==a?u={type:"interval-period",period:X.value,precision:A,secondary:null}:(f=u,u=a)):(f=u,u=a)):(f=u,u=a)):(f=u,u=a),u===a&&(u=f,X=O(),X!==
a&&(X=hd(X)),u=X,u===a&&(u=f,X=za(),X!==a?(ta(),A=Ha(),A!==a?(ta(),A=ka(),A!==a?(ta(),ua=Ea(),ua!==a?(ta(),X=W(),X!==a?(ta(),ua=Ra(),ua!==a?u=id(A,X):(f=u,u=a)):(f=u,u=a)):(f=u,u=a)):(f=u,u=a)):(f=u,u=a)):(f=u,u=a),u===a&&(u=f,X=za(),X!==a?(ta(),A=Ha(),A!==a?(ta(),A=W(),A!==a?(ta(),ua=Ra(),ua!==a?u={type:"interval-period",period:"second",precision:A,secondary:null}:(f=u,u=a)):(f=u,u=a)):(f=u,u=a)):(f=u,u=a),u===a&&(u=f,X=za(),X!==a&&(X={type:"interval-period",period:"second",precision:null,secondary:null}),
u=X)))));return u}function O(){var u=f;u=ra();u!==a&&(u={type:"string",value:"day"});u===a&&(u=f,u=sa(),u!==a&&(u={type:"string",value:"hour"}),u===a&&(u=f,u=xa(),u!==a&&(u={type:"string",value:"minute"}),u===a&&(u=f,u=ea(),u!==a&&(u={type:"string",value:"month"}),u===a&&(u=f,u=Q(),u!==a&&(u={type:"string",value:"year"})))));return u}function W(){var u=Fa();u!==a&&(u=parseFloat(u));return u}function ka(){var u=Fa();u!==a&&(u=parseFloat(u));return u}function oa(){var u=ma();u===a&&(u=v());return u}
function ma(){var u=f;if(39===n.charCodeAt(f)){var A=Qa;f++}else A=a,0===va&&g(jd);A===a&&(n.substr(f,2)===Cb?(A=Cb,f+=2):(A=a,0===va&&g(Be)));if(A!==a){A=[];var X=f;n.substr(f,2)===U?(X=U,f+=2):(X=a,0===va&&g(kd));X!==a&&(X="'");X===a&&(ld.test(n.charAt(f))?(X=n.charAt(f),f++):(X=a,0===va&&g(md)));for(;X!==a;)A.push(X),X=f,n.substr(f,2)===U?(X=U,f+=2):(X=a,0===va&&g(kd)),X!==a&&(X="'"),X===a&&(ld.test(n.charAt(f))?(X=n.charAt(f),f++):(X=a,0===va&&g(md)));39===n.charCodeAt(f)?(X=Qa,f++):(X=a,0===
va&&g(jd));X!==a?u={type:"string",value:A.join("")}:(f=u,u=a)}else f=u,u=a;return u}function da(){var u=f;if(Ia()!==a){ta();var A=h();if(A!==a){ta();var X=Ga();X!==a?(ta(),X=h(),X!==a?u={type:"when_clause",operand:A,value:X}:(f=u,u=a)):(f=u,u=a)}else f=u,u=a}else f=u,u=a;return u}function la(){var u=f;if(Ia()!==a){ta();var A=h();if(A!==a){ta();var X=Ga();X!==a?(ta(),X=h(),X!==a?u={type:"when_clause",operand:A,value:X}:(f=u,u=a)):(f=u,u=a)}else f=u,u=a}else f=u,u=a;return u}function qa(){var u=f;var A=
f;if(n.substr(f,4).toLowerCase()===Ce){var X=n.substr(f,4);f+=4}else X=a,0===va&&g(De);if(X!==a){X=f;va++;var ua=aa();va--;ua===a?X=void 0:(f=X,X=a);X!==a?A="ELSE":(f=A,A=a)}else f=A,A=a;A!==a?(ta(),A=h(),A!==a?u={type:"else_clause",value:A}:(f=u,u=a)):(f=u,u=a);return u}function wa(){var u=Fa();if(u===a){u=f;if(45===n.charCodeAt(f)){var A=qb;f++}else A=a,0===va&&g(xc);A===a&&(43===n.charCodeAt(f)?(A=fb,f++):(A=a,0===va&&g(wc)));if(A!==a){var X=Fa();X!==a?u=A[0]+X:(f=u,u=a)}else f=u,u=a}return u}
function Da(){var u=f;if(46===n.charCodeAt(f)){var A=ja;f++}else A=a,0===va&&g(Ee);A!==a?(u=Fa(),u===a&&(u=null),u="."+(null!=u?u:"")):(f=u,u=a);return u}function La(){var u;var A=u=f;if(Fe.test(n.charAt(f))){var X=n.charAt(f);f++}else X=a,0===va&&g(Ge);X!==a?(He.test(n.charAt(f))?(A=n.charAt(f),f++):(A=a,0===va&&g(Ie)),A===a&&(A=null),A="e"+(null===A?"":A)):(f=A,A=a);A!==a?(X=Fa(),X!==a?u=A+X:(f=u,u=a)):(f=u,u=a);return u}function Fa(){var u=[];var A=Na();if(A!==a)for(;A!==a;)u.push(A),A=Na();else u=
a;u!==a&&(u=u.join(""));return u}function Na(){if(Je.test(n.charAt(f))){var u=n.charAt(f);f++}else u=a,0===va&&g(Ke);return u}function b(){var u=f;if(n.substr(f,2).toLowerCase()===Aa){var A=n.substr(f,2);f+=2}else A=a,0===va&&g(Le);if(A!==a){A=f;va++;var X=aa();va--;X===a?A=void 0:(f=A,A=a);A!==a?u="IN":(f=u,u=a)}else f=u,u=a;return u}function p(){var u=f;if(n.substr(f,2).toLowerCase()===Ka){var A=n.substr(f,2);f+=2}else A=a,0===va&&g(Me);if(A!==a){A=f;va++;var X=aa();va--;X===a?A=void 0:(f=A,A=a);
A!==a?u="IS":(f=u,u=a)}else f=u,u=a;return u}function fa(){var u=f;if(n.substr(f,4).toLowerCase()===Ma){var A=n.substr(f,4);f+=4}else A=a,0===va&&g(Ne);if(A!==a){A=f;va++;var X=aa();va--;X===a?A=void 0:(f=A,A=a);A!==a?u="LIKE":(f=u,u=a)}else f=u,u=a;return u}function l(){var u=f;if(n.substr(f,3).toLowerCase()===Wa){var A=n.substr(f,3);f+=3}else A=a,0===va&&g(Oe);if(A!==a){A=f;va++;var X=aa();va--;X===a?A=void 0:(f=A,A=a);A!==a?u="NOT":(f=u,u=a)}else f=u,u=a;return u}function D(){var u=f;if(n.substr(f,
3).toLowerCase()===Va){var A=n.substr(f,3);f+=3}else A=a,0===va&&g(Pe);if(A!==a){A=f;va++;var X=aa();va--;X===a?A=void 0:(f=A,A=a);A!==a?u="AND":(f=u,u=a)}else f=u,u=a;return u}function S(){var u=f;if(n.substr(f,2).toLowerCase()===cb){var A=n.substr(f,2);f+=2}else A=a,0===va&&g(Qe);if(A!==a){A=f;va++;var X=aa();va--;X===a?A=void 0:(f=A,A=a);A!==a?u="OR":(f=u,u=a)}else f=u,u=a;return u}function T(){var u=f;if(n.substr(f,7).toLowerCase()===mb){var A=n.substr(f,7);f+=7}else A=a,0===va&&g(Re);if(A!==
a){A=f;va++;var X=aa();va--;X===a?A=void 0:(f=A,A=a);A!==a?u="BETWEEN":(f=u,u=a)}else f=u,u=a;return u}function ha(){var u=f;if(n.substr(f,4).toLowerCase()===Se){var A=n.substr(f,4);f+=4}else A=a,0===va&&g(Te);if(A!==a){A=f;va++;var X=aa();va--;X===a?A=void 0:(f=A,A=a);A!==a?u="FROM":(f=u,u=a)}else f=u,u=a;return u}function ia(){var u=f;if(n.substr(f,4).toLowerCase()===Ue){var A=n.substr(f,4);f+=4}else A=a,0===va&&g(Ve);if(A!==a){A=f;va++;var X=aa();va--;X===a?A=void 0:(f=A,A=a);A!==a?u="TRIM":(f=
u,u=a)}else f=u,u=a;return u}function J(){var u=f;if(n.substr(f,8).toLowerCase()===We){var A=n.substr(f,8);f+=8}else A=a,0===va&&g(Xe);if(A!==a){A=f;va++;var X=aa();va--;X===a?A=void 0:(f=A,A=a);A!==a?u="INTERVAL":(f=u,u=a)}else f=u,u=a;return u}function Q(){var u=f;if(n.substr(f,4).toLowerCase()===Ye){var A=n.substr(f,4);f+=4}else A=a,0===va&&g(Ze);if(A!==a){A=f;va++;var X=aa();va--;X===a?A=void 0:(f=A,A=a);A!==a?u="YEAR":(f=u,u=a)}else f=u,u=a;return u}function ea(){var u=f;if(n.substr(f,5).toLowerCase()===
$e){var A=n.substr(f,5);f+=5}else A=a,0===va&&g(af);if(A!==a){A=f;va++;var X=aa();va--;X===a?A=void 0:(f=A,A=a);A!==a?u="MONTH":(f=u,u=a)}else f=u,u=a;return u}function ra(){var u=f;if(n.substr(f,3).toLowerCase()===bf){var A=n.substr(f,3);f+=3}else A=a,0===va&&g(cf);if(A!==a){A=f;va++;var X=aa();va--;X===a?A=void 0:(f=A,A=a);A!==a?u="DAY":(f=u,u=a)}else f=u,u=a;return u}function sa(){var u=f;if(n.substr(f,4).toLowerCase()===df){var A=n.substr(f,4);f+=4}else A=a,0===va&&g(ef);if(A!==a){A=f;va++;var X=
aa();va--;X===a?A=void 0:(f=A,A=a);A!==a?u="HOUR":(f=u,u=a)}else f=u,u=a;return u}function xa(){var u=f;if(n.substr(f,6).toLowerCase()===ff){var A=n.substr(f,6);f+=6}else A=a,0===va&&g(gf);if(A!==a){A=f;va++;var X=aa();va--;X===a?A=void 0:(f=A,A=a);A!==a?u="MINUTE":(f=u,u=a)}else f=u,u=a;return u}function za(){var u=f;if(n.substr(f,6).toLowerCase()===hf){var A=n.substr(f,6);f+=6}else A=a,0===va&&g(jf);if(A!==a){A=f;va++;var X=aa();va--;X===a?A=void 0:(f=A,A=a);A!==a?u="SECOND":(f=u,u=a)}else f=u,
u=a;return u}function Ba(){var u=f;if(n.substr(f,4).toLowerCase()===kf){var A=n.substr(f,4);f+=4}else A=a,0===va&&g(lf);if(A!==a){A=f;va++;var X=aa();va--;X===a?A=void 0:(f=A,A=a);A!==a?u="CASE":(f=u,u=a)}else f=u,u=a;return u}function Ja(){var u=f;if(n.substr(f,3).toLowerCase()===mf){var A=n.substr(f,3);f+=3}else A=a,0===va&&g(nf);if(A!==a){A=f;va++;var X=aa();va--;X===a?A=void 0:(f=A,A=a);A!==a?u="END":(f=u,u=a)}else f=u,u=a;return u}function Ia(){var u=f;if(n.substr(f,4).toLowerCase()===of){var A=
n.substr(f,4);f+=4}else A=a,0===va&&g(pf);if(A!==a){A=f;va++;var X=aa();va--;X===a?A=void 0:(f=A,A=a);A!==a?u="WHEN":(f=u,u=a)}else f=u,u=a;return u}function Ga(){var u=f;if(n.substr(f,4).toLowerCase()===qf){var A=n.substr(f,4);f+=4}else A=a,0===va&&g(rf);if(A!==a){A=f;va++;var X=aa();va--;X===a?A=void 0:(f=A,A=a);A!==a?u="THEN":(f=u,u=a)}else f=u,u=a;return u}function Ea(){if(44===n.charCodeAt(f)){var u=sf;f++}else u=a,0===va&&g(tf);return u}function Ha(){if(40===n.charCodeAt(f)){var u=uf;f++}else u=
a,0===va&&g(vf);return u}function Ra(){if(41===n.charCodeAt(f)){var u=wf;f++}else u=a,0===va&&g(xf);return u}function ta(){var u;var A=[];for(u=bb();u!==a;)A.push(u),u=bb();return A}function bb(){if(yf.test(n.charAt(f))){var u=n.charAt(f);f++}else u=a,0===va&&g(zf);return u}function ab(u,A,X,ua){u={type:"binary_expr",operator:u,left:A,right:X};void 0!==ua&&(u.escape=ua);return u}function Sa(u,A){for(var X=0;X<A.length;X++)u=ab(A[X][1],u,A[X][3]);return u}q=void 0!==q?q:{};var a={},$a=q.grammarSource,
Ta={start:x},pb=x,na="!",Qb="\x3d",zb="\x3e\x3d",lb="\x3e",Bb="\x3c\x3d",Rb="\x3c\x3e",Pb="\x3c",bc="!\x3d",fb="+",qb="-",Ua="*",kb="/",rb="@",Qa="'",Cb="N'",U="''",ja=".",ba="null",pa="true",ya="false",Aa="in",Ka="is",Ma="like",Xa="escape",Wa="not",Va="and",cb="or",mb="between",Se="from",Vd="for",Qd="substring",Kd="extract",Ue="trim",ae="position",Hd="timestamp",Ed="date",te="leading",ve="trailing",xe="both",ze="to",We="interval",Ye="year",$e="month",bf="day",df="hour",ff="minute",hf="second",kf=
"case",mf="end",of="when",qf="then",Ce="else",sf=",",uf="(",wf=")",ad="`",me=/^[A-Za-z_\x80-\uFFFF]/,oe=/^[A-Za-z0-9_]/,qe=/^[A-Za-z0-9_.\x80-\uFFFF]/,ld=/^[^']/,Je=/^[0-9]/,Fe=/^[eE]/,He=/^[+\-]/,yf=/^[ \t\n\r]/,cd=/^[^`]/,nd=r("!",!1),Lc=r("\x3d",!1),pd=r("\x3e\x3d",!1),qd=r("\x3e",!1),rd=r("\x3c\x3d",!1),sd=r("\x3c\x3e",!1),td=r("\x3c",!1),ud=r("!\x3d",!1),wc=r("+",!1),xc=r("-",!1),vd=r("*",!1),wd=r("/",!1),ne=B([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),pe=B([["A","Z"],["a","z"],["0",
"9"],"_"],!1,!1),re=B([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),se=r("@",!1),jd=r("'",!1),Be=r("N'",!1),kd=r("''",!1),md=B(["'"],!0,!1),Ee=r(".",!1),Ke=B([["0","9"]],!1,!1),Ge=B(["e","E"],!1,!1),Ie=B(["+","-"],!1,!1),Cd=r("NULL",!0),yd=r("TRUE",!0),Ad=r("FALSE",!0),Le=r("IN",!0),Me=r("IS",!0),Ne=r("LIKE",!0),od=r("ESCAPE",!0),Oe=r("NOT",!0),Pe=r("AND",!0),Qe=r("OR",!0),Re=r("BETWEEN",!0),Te=r("FROM",!0),Wd=r("FOR",!0),Rd=r("SUBSTRING",!0),Ld=r("EXTRACT",!0),Ve=r("TRIM",!0),
be=r("POSITION",!0),Id=r("TIMESTAMP",!0),Fd=r("DATE",!0),ue=r("LEADING",!0),we=r("TRAILING",!0),ye=r("BOTH",!0),Ae=r("TO",!0),Xe=r("INTERVAL",!0),Ze=r("YEAR",!0),af=r("MONTH",!0),cf=r("DAY",!0),ef=r("HOUR",!0),gf=r("MINUTE",!0),jf=r("SECOND",!0),lf=r("CASE",!0),nf=r("END",!0),pf=r("WHEN",!0),rf=r("THEN",!0),De=r("ELSE",!0),tf=r(",",!1),vf=r("(",!1),xf=r(")",!1),zf=B([" ","\t","\n","\r"],!1,!1),bd=r("`",!1),dd=B(["`"],!0,!1),hd=function(u){return{type:"interval-period",period:u.value,precision:null,
secondary:null}},id=function(u,A){return{type:"interval-period",period:"second",precision:u,secondary:A}},f=0,cc=[{line:1,column:1}],sb=0,vc=[],va=0;if("startRule"in q){if(!(q.startRule in Ta))throw Error("Can't start parsing from rule \""+q.startRule+'".');pb=Ta[q.startRule]}var Kc=pb();if(Kc!==a&&f===n.length)return Kc;Kc!==a&&f<n.length&&g({type:"end"});throw function(u,A,X){return new I(I.buildMessage(u,A),u,A,X)}(vc,sb<n.length?n.charAt(sb):null,sb<n.length?E(sb,sb+1):E(sb,sb));}}})})(Y);let Z=
function(){function t(){}t.parse=function(I){return Y.exports.parse(I)};return t}();k.WhereGrammar=Z;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(k){k.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};k.commonjsRequire=function(e){throw Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
};k.getDefaultExportFromCjs=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(k){k.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,
supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsCompactGeometry:!1,
maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./timeSupport ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(k,e,Y,Z,t,I,y,n,q,r,B,w,E,g,x,c,h){function L(N,K,F,M,P,ca){P-=F;ca-=M;N=Math.min(1,Math.max(0,((N-F)*P+(K-M)*ca)/(P*P+ca*ca)));return{x:F+P*N,y:M+ca*N}}function V(N,K){return N?K?4:3:K?3:2}let z=function(){function N(F,M,P){this.items=F;this.queryGeometry=M;this.definitionExpression=P.definitionExpression;this.geometryType=P.geometryType;this.hasM=P.hasM;this.hasZ=P.hasZ;this.objectIdField=P.objectIdField;this.spatialReference=P.spatialReference;this.fieldsIndex=P.fieldsIndex;this.timeInfo=
P.timeInfo;this.featureAdapter=P.featureAdapter;this.aggregateAdapter=P.aggregateAdapter}var K=N.prototype;K.createQueryResponseForCount=function(F){const M=new r(F,this.featureAdapter,this.fieldsIndex);if(!F.outStatistics)return M.countDistinctValues(this.items);const {groupByFieldsForStatistics:P,having:ca}=F;if(null==P||!P.length)return 1;const C=new Map,G=new Map,R=new Set;F=F.outStatistics;for(const H of F){({statisticType:F}=H);F="exceedslimit"!==F?H.onStatisticField:void 0;if(!G.has(F)){var aa=
[];for(const v of P){const d=this._getAttributeValues(M,v,C);aa.push(d)}G.set(F,this._calculateUniqueValues(aa,M.returnDistinctValues))}F=G.get(F);for(const v in F){const {data:d,items:m}=F[v];aa=d.join(",");ca&&!M.validateItems(m,ca)||R.add(aa)}}return R.size};K.createQueryResponse=function(){var F=Y._asyncToGenerator(function*(M){let P;P=M.outStatistics?M.outStatistics.some(ca=>"exceedslimit"===ca.statisticType)?this._createExceedsLimitQueryResponse(M):yield this._createStatisticsQueryResponse(M):
this._createFeatureQueryResponse(M);M.returnQueryGeometry&&(n.isValid(M.outSR)&&!n.equals(this.queryGeometry.spatialReference,M.outSR)?P.queryGeometry=g.cleanFromGeometryEngine({spatialReference:M.outSR,...w.project(this.queryGeometry,this.queryGeometry.spatialReference,M.outSR)}):P.queryGeometry=g.cleanFromGeometryEngine({spatialReference:M.outSR,...this.queryGeometry}));return P});return function(M){return F.apply(this,arguments)}}();K.createSnappingResponse=function(F,M){const P=this.featureAdapter,
ca=V(this.hasZ,this.hasM),{x:C,y:G}=F.point,R="number"===typeof F.distance?F.distance:F.distance.x,aa="number"===typeof F.distance?F.distance:F.distance.y,H={candidates:[]},v="esriGeometryPolygon"===this.geometryType;M=this._getPointCreator(F.point,this.spatialReference,M);for(const da of this.items){var d=P.getGeometry(da);if(Z.isNone(d))continue;const {coords:la,lengths:qa}=d;if(F.types&e.SnappingTypes.EDGE){d=0;for(var m=0;m<qa.length;m++){var O=qa[m];for(var W=0;W<O;W++,d+=ca){var ka=la[d],oa=
la[d+1];if(W!==O-1){const wa=la[d+ca],Da=la[d+ca+1],{x:La,y:Fa}=L(C,G,ka,oa,wa,Da);var ma=(C-La)/R;const Na=(G-Fa)/aa;ma=ma*ma+Na*Na;1>=ma&&H.candidates.push({type:"edge",objectId:P.getObjectId(da),distance:Math.sqrt(ma),target:M(La,Fa),start:M(ka,oa),end:M(wa,Da)})}}}}if(F.types&e.SnappingTypes.VERTEX)for(d=v?la.length-ca:la.length,m=0;m<d;m+=ca)O=la[m],W=la[m+1],ka=(C-O)/R,oa=(G-W)/aa,ka=ka*ka+oa*oa,1>=ka&&H.candidates.push({type:"vertex",objectId:P.getObjectId(da),distance:Math.sqrt(ka),target:M(O,
W)})}H.candidates.sort((da,la)=>da.distance-la.distance);return H};K._getPointCreator=function(F,M,P){const ca=Z.isSome(P)&&!n.equals(M,P)?C=>w.project(C,M,P):C=>C;return null!=F.z&&null!=F.m?(C,G)=>ca({x:C,y:G,z:F.z,m:F.m}):null!=F.z?(C,G)=>ca({x:C,y:G,z:F.z}):null!=F.m?(C,G)=>ca({x:C,y:G,m:F.m}):(C,G)=>ca({x:C,y:G})};K.executeAttributesQuery=function(F){var M=B.getWhereClause(F.where,this.fieldsIndex);if(!M)return Promise.resolve(this);if(M.isStandardized){let P=0;const ca=[];for(const C of this.items)M.testFeature(C,
this.featureAdapter)&&(ca[P++]=C);M=new N(ca,this.queryGeometry,this);M.definitionExpression=F.where;return Promise.resolve(M)}return Promise.reject(new TypeError("Where clause is not standardized"))};K.executeAggregateIdsQuery=function(F){if(!F.aggregateIds||!F.aggregateIds.length||Z.isNone(this.aggregateAdapter))return Promise.resolve(this);const M=new Set;for(const ca of F.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(ca).forEach(C=>M.add(C));const P=this.featureAdapter.getObjectId;return Promise.resolve(new N(this.items.filter(ca=>
M.has(P(ca))),this.queryGeometry,this))};K.executeObjectIdsQuery=function(F){if(!F.objectIds||!F.objectIds.length)return Promise.resolve(this);const M=new Set(F.objectIds),P=this.featureAdapter.getObjectId;return Promise.resolve(new N(this.items.filter(ca=>M.has(P(ca))),this.queryGeometry,this))};K.executeTimeQuery=function(F){F=E.getTimeOperator(this.timeInfo,F.timeExtent,this.featureAdapter);if(!Z.isSome(F))return Promise.resolve(this);F=this.items.filter(F);return Promise.resolve(new N(F,this.queryGeometry,
this))};K.filterLatest=function(){const {trackIdField:F,startTimeField:M,endTimeField:P}=this.timeInfo;var ca=P||M;const C=new Map,G=this.featureAdapter.getAttribute;for(const R of this.items){const aa=G(R,F),H=G(R,ca),v=C.get(aa);(!v||H>G(v,ca))&&C.set(aa,R)}ca=Array.from(C.values());return Promise.resolve(new N(ca,this.queryGeometry,this))};K.project=function(){var F=Y._asyncToGenerator(function*(M){if(!M||n.equals(this.spatialReference,M))return this;const P=this.featureAdapter,ca=(yield w.projectMany(this.items.map(C=>
g.getGeometry(this.geometryType,this.hasZ,this.hasM,P.getGeometry(C))),this.spatialReference,M)).map((C,G)=>P.cloneWithGeometry(this.items[G],q.convertFromGeometry(C,this.hasZ,this.hasM)));return new N(ca,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:M,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})});return function(M){return F.apply(this,
arguments)}}();K.createSummaryStatisticsResponse=function(){var F=Y._asyncToGenerator(function*(M,P){const {field:ca,valueExpression:C,normalizationField:G,normalizationType:R,normalizationTotal:aa,minValue:H,maxValue:v,scale:d}=P;P=this.fieldsIndex.isDateField(ca);M=yield this._getDataValues(M,{field:ca,valueExpression:C,normalizationField:G,normalizationType:R,normalizationTotal:aa,scale:d});const m=c.isNullCountSupported({normalizationType:R,normalizationField:G,minValue:H,maxValue:v}),O=this.fieldsIndex.get(ca),
W={value:.5,fieldType:null==O?void 0:O.type};M=x.isStringField(O)?c.calculateStringStatistics({values:M,supportsNullCount:m,percentileParams:W}):c.calculateStatistics({values:M,minValue:H,maxValue:v,useSampleStdDev:!R,supportsNullCount:m,percentileParams:W});return c.processSummaryStatisticsResult(M,P)});return function(M,P){return F.apply(this,arguments)}}();K.createUniqueValuesResponse=function(){var F=Y._asyncToGenerator(function*(M,P){const {field:ca,valueExpression:C,domain:G,returnAllCodedValues:R,
scale:aa}=P;M=yield this._getDataValues(M,{field:ca,valueExpression:C,scale:aa});M=c.calculateUniqueValuesCount(M);return c.createUVResult(M,G,R)});return function(M,P){return F.apply(this,arguments)}}();K.createClassBreaksResponse=function(){var F=Y._asyncToGenerator(function*(M,P){const {field:ca,valueExpression:C,normalizationField:G,normalizationType:R,normalizationTotal:aa,classificationMethod:H,standardDeviationInterval:v,minValue:d,maxValue:m,numClasses:O,scale:W}=P;M=yield this._getDataValues(M,
{field:ca,valueExpression:C,normalizationField:G,normalizationType:R,normalizationTotal:aa,scale:W});M=c.calculateClassBreaks(M,{field:ca,normalizationField:G,normalizationType:R,normalizationTotal:aa,classificationMethod:H,standardDeviationInterval:v,minValue:d,maxValue:m,numClasses:O});return c.resolveCBResult(M,H)});return function(M,P){return F.apply(this,arguments)}}();K.createHistogramResponse=function(){var F=Y._asyncToGenerator(function*(M,P){const {field:ca,valueExpression:C,normalizationField:G,
normalizationType:R,normalizationTotal:aa,classificationMethod:H,standardDeviationInterval:v,minValue:d,maxValue:m,numBins:O,scale:W}=P;M=yield this._getDataValues(M,{field:ca,valueExpression:C,normalizationField:G,normalizationType:R,normalizationTotal:aa,scale:W});return c.calculateHistogram(M,{field:ca,normalizationField:G,normalizationType:R,normalizationTotal:aa,classificationMethod:H,standardDeviationInterval:v,minValue:d,maxValue:m,numBins:O})});return function(M,P){return F.apply(this,arguments)}}();
K._sortFeatures=function(F,M,P){if(1<F.length&&M&&M.length)for(const ca of M.reverse()){M=ca.split(" ");const C=M[0],G=this.fieldsIndex.get(C);M=M[1]&&"desc"===M[1].toLowerCase();const R=c.getAttributeComparator(null==G?void 0:G.type,M);F.sort((aa,H)=>{aa=P(aa,C,G);H=P(H,C,G);return R(aa,H)})}};K._createFeatureQueryResponse=function(F){const M=this.items,{geometryType:P,hasM:ca,hasZ:C,objectIdField:G,spatialReference:R}=this,{outFields:aa,outSR:H,quantizationParameters:v,resultRecordCount:d,resultOffset:m,
returnZ:O,returnM:W}=F,ka=null!=d?M.length>(m||0)+d:!1,oa=aa&&(aa.includes("*")?[...this.fieldsIndex.fields]:aa.map(ma=>this.fieldsIndex.get(ma)));return{exceededTransferLimit:ka,features:this._createFeatures(F,M),fields:oa,geometryType:P,hasM:ca&&W,hasZ:C&&O,objectIdFieldName:G,spatialReference:g.cleanFromGeometryEngine(H?H:R),transform:v&&y.toQuantizationTransform(v)||null}};K._createFeatures=function(F,M){const P=new r(F,this.featureAdapter,this.fieldsIndex),{hasM:ca,hasZ:C}=this,{orderByFields:G,
quantizationParameters:R,returnGeometry:aa,returnCentroid:H,maxAllowableOffset:v,resultOffset:d,resultRecordCount:m,returnZ:O=!1,returnM:W=!1}=F,ka=C&&O,oa=ca&&W;F=[];var ma=0;M=[...M];this._sortFeatures(M,G,(qa,wa,Da)=>P.getFieldValue(qa,wa,Da));if(aa||H){var da=y.toQuantizationTransform(R);if(aa&&!H)for(var la of M)F[ma++]={attributes:P.getAttributes(la),geometry:g.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(la),v,da,ka,oa)};else if(!aa&&H)for(const qa of M)F[ma++]=
{attributes:P.getAttributes(qa),centroid:g.transformCentroid(this,this.featureAdapter.getCentroid(qa,this),da)};else for(const qa of M)F[ma++]={attributes:P.getAttributes(qa),centroid:g.transformCentroid(this,this.featureAdapter.getCentroid(qa,this),da),geometry:g.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(qa),v,da,ka,oa)}}else for(da of M)(la=P.getAttributes(da))&&(F[ma++]={attributes:la});ma=d||0;null!=m&&(F=F.slice(ma,Math.min(F.length,ma+m)));return F};K._createExceedsLimitQueryResponse=
function(F){var M=!1;let P=Number.POSITIVE_INFINITY,ca=Number.POSITIVE_INFINITY;M=Number.POSITIVE_INFINITY;for(const C of F.outStatistics)if("exceedslimit"===C.statisticType){P=null!=C.maxPointCount?C.maxPointCount:Number.POSITIVE_INFINITY;ca=null!=C.maxRecordCount?C.maxRecordCount:Number.POSITIVE_INFINITY;M=null!=C.maxVertexCount?C.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)M=this.items.length>P;else if(this.items.length>ca)M=!0;else{F=this.hasZ?this.hasM?
4:3:this.hasM?3:2;const C=this.featureAdapter;M=this.items.reduce((G,R)=>{R=C.getGeometry(R);return G+(Z.isSome(R)&&R.coords.length||0)},0)/F>M}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(M)}}]}};K._createStatisticsQueryResponse=function(){var F=Y._asyncToGenerator(function*(M){var P={attributes:{}};const ca=[],C=new Map,G=new Map,R=new Map,aa=new Map,H=new r(M,
this.featureAdapter,this.fieldsIndex);var v=M.outStatistics;const {groupByFieldsForStatistics:d,having:m,orderByFields:O}=M;M=d&&d.length;const W=!!M,ka=W&&d[0],oa=W&&!this.fieldsIndex.get(ka);for(const wa of v){const {outStatisticFieldName:Da,statisticType:La}=wa;v=wa;var ma="exceedslimit"!==La?wa.onStatisticField:void 0;const Fa="percentile_disc"===La||"percentile_cont"===La,Na="EnvelopeAggregate"===La||"CentroidAggregate"===La||"ConvexHullAggregate"===La,b=W&&1===M&&(ma===ka||oa)&&"count"===La;
if(W){if(!R.has(ma)){var da=[];for(const p of d){var la=this._getAttributeValues(H,p,C);da.push(la)}R.set(ma,this._calculateUniqueValues(da,H.returnDistinctValues))}da=R.get(ma);for(const p in da){const {count:fa,data:l,items:D,itemPositions:S}=da[p];la=l.join(",");if(!m||H.validateItems(D,m)){const T=aa.get(la)||{attributes:{}};if(Na){T.aggregateGeometries||(T.aggregateGeometries={});const {aggregateGeometries:ha,outStatisticFieldName:ia}=yield this._getAggregateGeometry(v,D);T.aggregateGeometries[ia]=
ha}else{var qa=null;if(b)qa=fa;else{const ha=this._getAttributeValues(H,ma,C);qa=S.map(ia=>ha[ia]);qa=Fa&&"statisticParameters"in v?this._getPercentileValue(v,qa):this._getStatisticValue(v,qa,null,H.returnDistinctValues)}T.attributes[Da]=qa}d.forEach((ha,ia)=>T.attributes[this.fieldsIndex.get(ha)?ha:`EXPR_${ia+1}`]=l[ia]);aa.set(la,T)}}}else if(Na){P.aggregateGeometries||(P.aggregateGeometries={});const {aggregateGeometries:p,outStatisticFieldName:fa}=yield this._getAggregateGeometry(v,this.items);
P.aggregateGeometries[fa]=p}else ma=this._getAttributeValues(H,ma,C),P.attributes[Da]=Fa&&"statisticParameters"in v?this._getPercentileValue(v,ma):this._getStatisticValue(v,ma,G,H.returnDistinctValues);ca.push({name:Da,alias:Da,type:"esriFieldTypeDouble"})}P=W?Array.from(aa.values()):[P];this._sortFeatures(P,O,(wa,Da)=>wa.attributes[Da]);return{fields:ca,features:P}});return function(M){return F.apply(this,arguments)}}();K._getAggregateGeometry=function(){var F=Y._asyncToGenerator(function*(M,P){var ca=
yield new Promise((O,W)=>k(["../../../geometry/geometryEngineJSON"],O,W));const {statisticType:C,outStatisticFieldName:G}=M,{featureAdapter:R,spatialReference:aa,geometryType:H,hasZ:v,hasM:d}=this;P=P.map(O=>g.getGeometry(H,v,d,R.getGeometry(O)));const m=ca.convexHull(aa,P,!0)[0];M={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===C?(ca=m?I.getPolygonExtent(m):I.getGeometryExtent(ca.union(aa,P)),M.aggregateGeometries={...ca,spatialReference:aa},M.outStatisticFieldName=G||
"extent"):"CentroidAggregate"===C?(ca=m?t.polygonCentroid(m):t.extentCentroid(I.getGeometryExtent(ca.union(aa,P))),M.aggregateGeometries={x:ca[0],y:ca[1],spatialReference:aa},M.outStatisticFieldName=G||"centroid"):"ConvexHullAggregate"===C&&(M.aggregateGeometries=m,M.outStatisticFieldName=G||"convexHull");return M});return function(M,P){return F.apply(this,arguments)}}();K._getStatisticValue=function(F,M,P,ca){const {onStatisticField:C,statisticType:G}=F;F=null;F=null!=P&&P.has(C)?P.get(C):x.isStringField(this.fieldsIndex.get(C))?
c.calculateStringStatistics({values:M,returnDistinct:ca}):c.calculateStatistics({values:M,minValue:null,maxValue:null,useSampleStdDev:!0});P&&P.set(C,F);return F["var"===G?"variance":G]};K._getPercentileValue=function(F,M){const {onStatisticField:P,statisticParameters:ca,statisticType:C}=F,{value:G,orderBy:R}=ca;F=this.fieldsIndex.get(P);return c.calculatePercentile(M,{value:G,orderBy:R,fieldType:null==F?void 0:F.type,isDiscrete:"percentile_disc"===C})};K._getAttributeValues=function(F,M,P){if(P.has(M))return P.get(M);
const ca=this.fieldsIndex.get(M),C=this.items.map(G=>F.getFieldValue(G,M,ca));P.set(M,C);return C};K._getAttributeNormalizedValues=function(F,M){return this.items.map(P=>F.getNormalizedValue(P,{field:M.field,fieldInfo:this.fieldsIndex.get(M.field),normalizationField:M.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(M.normalizationField),normalizationType:M.normalizationType,normalizationTotal:M.normalizationTotal}))};K._getAttributeExpressionValues=function(){var F=Y._asyncToGenerator(function*(M,
P,ca){const {arcadeUtils:C}=yield h.loadArcade(),G=C.createFunction(P),R=ca&&C.getViewInfo(ca);return this.items.map(aa=>M.getExpressionValue(aa,{compiledFunc:G,viewInfo:R},C))});return function(M,P,ca){return F.apply(this,arguments)}}();K._calculateUniqueValues=function(F,M){const P={},ca=this.items,C=ca.length;for(let G=0;G<C;G++){const R=ca[G],aa=[];for(const v of F)aa.push(v[G]);const H=aa.join(",");M?null==P[H]&&(P[H]={count:1,data:aa,items:[R],itemPositions:[G]}):null==P[H]?P[H]={count:1,data:aa,
items:[R],itemPositions:[G]}:(P[H].count++,P[H].items.push(R),P[H].itemPositions.push(G))}return P};K._getDataValues=function(){var F=Y._asyncToGenerator(function*(M,P){const ca=new r(M,this.featureAdapter,this.fieldsIndex),{valueExpression:C,field:G,normalizationField:R,normalizationType:aa,normalizationTotal:H,scale:v}=P;M=C?{viewingMode:"map",scale:v,spatialReference:M.outSR||this.spatialReference}:null;return C?this._getAttributeExpressionValues(ca,C,M):this._getAttributeNormalizedValues(ca,{field:G,
normalizationField:R,normalizationType:aa,normalizationTotal:H})});return function(M,P){return F.apply(this,arguments)}}();Y._createClass(N,[{key:"size",get:function(){return this.items.length}}]);return N}();e.SnappingTypes=void 0;(function(N){N[N.NONE=0]="NONE";N[N.EDGE=1]="EDGE";N[N.VERTEX=2]="VERTEX"})(e.SnappingTypes||(e.SnappingTypes={}));e.default=z;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe",
"./jsonUtils"],function(k,e,Y){function Z({scale:C,translate:G},R){return Math.round((R-G[0])/C[0])}function t({scale:C,translate:G},R){return Math.round((G[1]-R)/C[1])}function I(C,G,R){const aa=[];let H,v,d,m;for(let O=0;O<R.length;O++){const W=R[O];if(0<O){if(d=Z(C,W[0]),m=t(C,W[1]),d!==H||m!==v)aa.push(G(W,d-H,m-v)),H=d,v=m}else H=Z(C,W[0]),v=t(C,W[1]),aa.push(G(W,H,v))}return 0<aa.length?aa:null}function y(C,G,R,aa){return I(C,R?aa?ca:P:aa?P:M,G)}function n(C,G,R,aa){const H=[];R=R?aa?ca:P:aa?
P:M;for(aa=0;aa<G.length;aa++){const v=I(C,R,G[aa]);v&&3<=v.length&&H.push(v)}return H.length?H:null}function q(C,G,R,aa){const H=[];R=R?aa?ca:P:aa?P:M;for(aa=0;aa<G.length;aa++){const v=I(C,R,G[aa]);v&&2<=v.length&&H.push(v)}return H.length?H:null}function r({scale:C,translate:G},R){return R*C[0]+G[0]}function B({scale:C,translate:G},R){return G[1]-R*C[1]}function w(C,G,R){const aa=Array(R.length);if(!R.length)return aa;const [H,v]=C.scale;let d=r(C,R[0][0]);C=B(C,R[0][1]);aa[0]=G(R[0],d,C);for(let m=
1;m<R.length;m++){const O=R[m];d+=O[0]*H;C-=O[1]*v;aa[m]=G(O,d,C)}return aa}function E(C,G,R){const aa=Array(R.length);for(let H=0;H<R.length;H++)aa[H]=w(C,G,R[H]);return aa}function g(C,G,R,aa){return w(C,R?aa?ca:P:aa?P:M,G)}function x(C,G,R,aa){return E(C,R?aa?ca:P:aa?P:M,G)}function c(C,G,R,aa){return E(C,R?aa?ca:P:aa?P:M,G)}function h(C,G,R){let [aa,H]=R[0],v=Math.min(aa,G[0]),d=Math.min(H,G[1]),m=Math.max(aa,G[2]);G=Math.max(H,G[3]);for(let O=1;O<R.length;O++){const [W,ka]=R[O];aa+=W;H+=ka;0>
W&&(v=Math.min(v,aa));0<W&&(m=Math.max(m,aa));0>ka?d=Math.min(d,H):0<ka&&(G=Math.max(G,H))}C[0]=v;C[1]=d;C[2]=m;C[3]=G;return C}function L(C,G){if(!G.length)return null;C[0]=C[1]=Number.POSITIVE_INFINITY;C[2]=C[3]=Number.NEGATIVE_INFINITY;for(let R=0;R<G.length;R++)h(C,C,G[R]);return C}function V(C,G,R,aa,H){G.xmin=Z(C,R.xmin);G.ymin=t(C,R.ymin);G.xmax=Z(C,R.xmax);G.ymax=t(C,R.ymax);G!==R&&(aa&&(G.zmin=R.zmin,G.zmax=R.zmax),H&&(G.mmin=R.mmin,G.mmax=R.mmax));return G}function z(C,G,R,aa,H){G.points=
y(C,R.points,aa,H);return G}function N(C,G,R,aa,H){G.x=Z(C,R.x);G.y=t(C,R.y);G!==R&&(aa&&(G.z=R.z),H&&(G.m=R.m));return G}function K(C,G,R,aa,H){C=n(C,R.rings,aa,H);if(!C)return null;G.rings=C;return G}function F(C,G,R,aa,H){C=q(C,R.paths,aa,H);if(!C)return null;G.paths=C;return G}const M=(C,G,R)=>[G,R],P=(C,G,R)=>[G,R,C[2]],ca=(C,G,R)=>[G,R,C[2],C[3]];k.equals=function(C,G){if(C===G||null==C&&null==G)return!0;if(null==C||null==G)return!1;let R,aa,H,v;C&&"upperLeft"===C.originPosition?(R=C.translate[0],
aa=C.translate[1],C=C.scale[0]):(R=e.isSome(C.extent)?C.extent.xmin:0,aa=e.isSome(C.extent)?C.extent.ymax:0,C=C.tolerance);G&&"upperLeft"===G.originPosition?(H=G.translate[0],v=G.translate[1],G=G.scale[0]):(H=e.isSome(G.extent)?G.extent.xmin:0,v=e.isSome(G.extent)?G.extent.ymax:0,G=G.tolerance);return R===H&&aa===v&&C===G};k.getQuantizedBoundsCoordsArray=h;k.getQuantizedBoundsCoordsArrayArray=L;k.getQuantizedBoundsPaths=function(C){return L([0,0,0,0],C)};k.getQuantizedBoundsPoints=function(C){const G=
[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return h(G,G,C)};k.getQuantizedBoundsRings=function(C){return L([0,0,0,0],C)};k.quantizeBounds=function(C,G,R){G[0]=Z(C,R[0]);G[3]=t(C,R[1]);G[2]=Z(C,R[2]);G[1]=t(C,R[3]);return G};k.quantizeExtent=V;k.quantizeGeometry=function(C,G){return C&&G?Y.isPoint(G)?N(C,{},G,!1,!1):Y.isPolyline(G)?F(C,{},G,!1,!1):Y.isPolygon(G)?K(C,{},G,!1,!1):Y.isMultipoint(G)?z(C,{},G,!1,!1):Y.isExtent(G)?V(C,{},G,!1,!1):
null:null};k.quantizeMultipoint=z;k.quantizePaths=q;k.quantizePoint=N;k.quantizePoints=y;k.quantizePolygon=K;k.quantizePolyline=F;k.quantizeRings=n;k.quantizeX=Z;k.quantizeY=t;k.toQuantizationTransform=function(C){return C?{originPosition:"upper-left"===C.originPosition?"upperLeft":"lower-left"===C.originPosition?"lowerLeft":C.originPosition,scale:C.tolerance?[C.tolerance,C.tolerance]:[1,1],translate:e.isSome(C.extent)?[C.extent.xmin,C.extent.ymax]:[0,0]}:null};k.unquantizeBounds=function(C,G,R){return R?
(G[0]=r(C,R[0]),G[1]=B(C,R[3]),G[2]=r(C,R[2]),G[3]=B(C,R[1]),G):[r(C,G[0]),B(C,G[3]),r(C,G[2]),B(C,G[1])]};k.unquantizeCoordsArray=w;k.unquantizeCoordsArrayArray=E;k.unquantizeExtent=function(C,G,R,aa,H){G.xmin=r(C,R.xmin);G.ymin=B(C,R.ymin);G.xmax=r(C,R.xmax);G.ymax=B(C,R.ymax);G!==R&&(aa&&(G.zmin=R.zmin,G.zmax=R.zmax),H&&(G.mmin=R.mmin,G.mmax=R.mmax));return G};k.unquantizeMultipoint=function(C,G,R,aa,H){e.isSome(R)&&(G.points=g(C,R.points,aa,H));return G};k.unquantizePaths=x;k.unquantizePoint=
function(C,G,R,aa,H){if(e.isNone(R))return G;G.x=r(C,R.x);G.y=B(C,R.y);G!==R&&(aa&&(G.z=R.z),H&&(G.m=R.m));return G};k.unquantizePoints=g;k.unquantizePolygon=function(C,G,R,aa,H){e.isSome(R)&&(G.rings=c(C,R.rings,aa,H));return G};k.unquantizePolyline=function(C,G,R,aa,H){e.isSome(R)&&(G.paths=x(C,R.paths,aa,H));return G};k.unquantizeRings=c;k.unquantizeX=r;k.unquantizeY=B;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe",
"./attributeSupport","../../../statistics/utils"],function(k,e,Y){return function(){function Z(I,y,n){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=I.returnDistinctValues;this.fieldsIndex=n;this.featureAdapter=y;if((y=I.outFields)&&-1===y.indexOf("*")){this.outFields=y;I=0;for(const r of y){var q=e.getExpressionFromFieldName(r);q=(y=this.fieldsIndex.get(q))?null:e.getWhereClause(q,n);y=y?y.name:e.getAliasFromFieldName(r)||`FIELD_EXP_${I++}`;this._fieldDataCache.set(r,
{alias:y,clause:q})}}}var t=Z.prototype;t.countDistinctValues=function(I){if(!this.returnDistinctValues)return I.length;I.forEach(y=>this.getAttributes(y));return this._returnDistinctMap.size};t.getAttributes=function(I){I=this._processAttributesForOutFields(I);return this._processAttributesForDistinctValues(I)};t.getFieldValue=function(I,y,n){const q=n?n.name:y;let r=null;this._fieldDataCache.has(q)?r=this._fieldDataCache.get(q).clause:n||(r=e.getWhereClause(y,this.fieldsIndex),this._fieldDataCache.set(q,
{alias:q,clause:r}));return n?this.featureAdapter.getAttribute(I,q):r.calculateValue(I,this.featureAdapter)};t.getNormalizedValue=function(I,y){const n=y.normalizationType,q=y.normalizationTotal;let r=this.getFieldValue(I,y.field,y.fieldInfo);n&&Number.isFinite(r)&&(I=this.getFieldValue(I,y.normalizationField,y.normalizationFieldInfo),r=Y.getNormalizedValue(r,n,I,q));return r};t.getExpressionValue=function(I,y,n){I={attributes:this.featureAdapter.getAttributes(I)};I=n.createExecContext(I,y.viewInfo);
return n.executeFunction(y.compiledFunc,I)};t.validateItem=function(I,y){this._fieldDataCache.has(y)||this._fieldDataCache.set(y,{alias:y,clause:e.getWhereClause(y,this.fieldsIndex)});return this._fieldDataCache.get(y).clause.testFeature(I,this.featureAdapter)};t.validateItems=function(I,y){this._fieldDataCache.has(y)||this._fieldDataCache.set(y,{alias:y,clause:e.getWhereClause(y,this.fieldsIndex)});return this._fieldDataCache.get(y).clause.testSet(I,this.featureAdapter)};t._processAttributesForOutFields=
function(I){const y=this.outFields;if(!y||!y.length)return this.featureAdapter.getAttributes(I);const n={};for(const q of y){const {alias:r,clause:B}=this._fieldDataCache.get(q);n[r]=B?B.calculateValue(I,this.featureAdapter):this.featureAdapter.getAttribute(I,r)}return n};t._processAttributesForDistinctValues=function(I){if(k.isNone(I)||!this.returnDistinctValues)return I;var y=this.outFields,n=[];if(y)for(const r of y){var {alias:q}=this._fieldDataCache.get(r);n.push(I[q])}else for(q in I)n.push(I[q]);
y=`${(y||["*"]).join(",")}=${n.join(",")}`;n=this._returnDistinctMap.get(y)||0;this._returnDistinctMap.set(y,++n);return 1<n?null:I};return Z}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(k,e,Y){function Z(z){const N=null!=z.minValue||null!=z.maxValue,K=!!z.sqlExpression&&z.supportsSQLExpression;return!(null!=z.normalizationField||null!=z.normalizationType)&&!N&&!K}function t(z){const {values:N,
useSampleStdDev:K,supportsNullCount:F}=z;var M=Number.POSITIVE_INFINITY;let P=Number.NEGATIVE_INFINITY,ca=null,C=null;var G=null;let R=null,aa=0;const H=null==z.minValue?-Infinity:z.minValue,v=null==z.maxValue?Infinity:z.maxValue;for(const d of N)Number.isFinite(d)?d>=H&&d<=v&&(ca+=d,M=Math.min(M,d),P=Math.max(P,d),aa++):"string"===typeof d&&aa++;if(aa&&null!=ca){C=ca/aa;G=0;for(const d of N)Number.isFinite(d)&&d>=H&&d<=v&&(G+=(d-C)**2);R=K?1<aa?G/(aa-1):0:0<aa?G/aa:0;G=Math.sqrt(R)}else P=M=null;
M={avg:C,count:aa,max:P,min:M,stddev:G,sum:ca,variance:R};F&&(M.nullcount=N.length-aa);z.percentileParams&&(M.median=I(N,z.percentileParams));return M}function I(z,N){const {fieldType:K,value:F,orderBy:M,isDiscrete:P}=N,ca=y(K,"desc"===M);z=[...z].filter(aa=>null!=aa).sort((aa,H)=>ca(aa,H));if(0===z.length)return null;if(0>=F)return z[0];if(1<=F)return z[z.length-1];var C=(z.length-1)*F,G=Math.floor(C);N=G+1;C%=1;G=z[G];const R=z[N];return N>=z.length||P||"string"===typeof G||"string"===typeof R?
G:G*(1-C)+R*C}function y(z,N){const K=N?1:-1,F=q(N),M=n(N);if(!z||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...L].includes(z))return(P,ca)=>"number"===typeof P&&"number"===typeof ca?F(P,ca):"string"===typeof P&&"string"===typeof ca?M(P,ca):K;if("esriFieldTypeDate"===z)return(P,ca)=>{P=(new Date(P)).getTime();ca=(new Date(ca)).getTime();return isNaN(P)||isNaN(ca)?K:F(P,ca)};if(L.has(z))return(P,ca)=>F(P,ca);if("esriFieldTypeString"===z)return(P,ca)=>M(P,
ca);if("esriFieldTypeGUID"===z||"esriFieldTypeGlobalID"===z){const P=n(N);return(ca,C)=>P(r(ca),r(C))}return N?(P,ca)=>1:(P,ca)=>-1}function n(z){return z?(N,K)=>{var F,M;N=null==(F=N)?void 0:F.toUpperCase();K=null==(M=K)?void 0:M.toUpperCase();return N>K?-1:N<K?1:0}:(N,K)=>{var F,M;N=null==(F=N)?void 0:F.toUpperCase();K=null==(M=K)?void 0:M.toUpperCase();return N<K?-1:N>K?1:0}}function q(z){return z?(N,K)=>K-N:(N,K)=>N-K}function r(z){return z.substr(24,12)+z.substr(19,4)+z.substr(16,2)+z.substr(14,
2)+z.substr(11,2)+z.substr(9,2)+z.substr(6,2)+z.substr(4,2)+z.substr(2,2)+z.substr(0,2)}function B(z,N){const K=E({field:N.field,normalizationType:N.normalizationType,normalizationField:N.normalizationField,classificationMethod:N.classificationMethod,standardDeviationInterval:N.standardDeviationInterval,breakCount:N.numClasses||5});z=w(z,N.minValue,N.maxValue);return Y.createGenerateRendererClassBreaks({definition:K,values:z,normalizationTotal:N.normalizationTotal})}function w(z,N,K){N=null==N?-Infinity:
N;K=null==K?Infinity:K;return z.filter(F=>Number.isFinite(F)&&F>=N&&F<=K)}function E(z){const N=z.field,K=z.classificationMethod||"equal-interval",F=z.normalizationType,M=z.normalizationField,P=new e;P.classificationField=N;P.breakCount=z.breakCount;P.classificationMethod=K;P.standardDeviationInterval="standard-deviation"===K?z.standardDeviationInterval||1:void 0;P.normalizationType=F;P.normalizationField="field"===F?M:void 0;return P}function g(z,N){const {field:K,classificationMethod:F,standardDeviationInterval:M,
normalizationType:P,normalizationField:ca,normalizationTotal:C,minValue:G,maxValue:R}=N,aa=N.numBins||10;let H=N=null,v=null;F&&"equal-interval"!==F||P?({classBreaks:z}=B(z,{field:K,normalizationType:P,normalizationField:ca,normalizationTotal:C,classificationMethod:F,standardDeviationInterval:M,minValue:G,maxValue:R,numClasses:aa}),N=z[0].minValue,H=z[z.length-1].maxValue,v=z.map(d=>[d.minValue,d.maxValue])):(null!=G&&null!=R?(N=G,H=R):(z=t({values:z,minValue:G,maxValue:R,useSampleStdDev:!P,supportsNullCount:Z({normalizationType:P,
normalizationField:ca,minValue:G,maxValue:R})}),N=z.min,H=z.max),v=c(N,H,aa));return{min:N,max:H,intervals:v}}function x(z,N){let K=-1;for(let F=z.length-1;0<=F;F--)if(N>=z[F][0]){K=F;break}return K}function c(z,N,K){const F=(N-z)/K,M=[];let P;for(let ca=1;ca<=K;ca++)P=z+F,P=Number(P.toFixed(16)),M.push([z,ca===K?N:P]),z=P;return M}const h=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,L=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),V="min max avg stddev count sum variance nullcount median".split(" ");
k.calculateClassBreaks=B;k.calculateHistogram=function(z,N){const {min:K,max:F,intervals:M}=g(z,N),P=M.map((ca,C)=>({minValue:M[C][0],maxValue:M[C][1],count:0}));for(const ca of z)null!=ca&&ca>=K&&ca<=F&&(z=x(M,ca),-1<z&&P[z].count++);return{bins:P,minValue:K,maxValue:F,normalizationTotal:N.normalizationTotal}};k.calculatePercentile=I;k.calculateStatistics=t;k.calculateStringStatistics=function(z){const N=z.returnDistinct?[...new Set(z.values)]:z.values,K=N.filter(M=>null!=M).length,F={count:K};z.supportsNullCount&&
(F.nullcount=N.length-K);z.percentileParams&&(F.median=I(N,z.percentileParams));return F};k.calculateUniqueValuesCount=function(z){const N={};for(let K of z){if(null==K||"string"===typeof K&&""===K.trim())K=null;null==N[K]?N[K]={count:1,data:K}:N[K].count++}return{count:N}};k.createClassBreaksDefinition=E;k.createUVResult=function(z,N,K){const F=z.count;z=[];K&&N&&"coded-value"===N.type&&N.codedValues.forEach(M=>{M=M.code;F.hasOwnProperty(M)||(F[M]={data:M,count:0})});for(const M in F)N=F[M],z.push({value:N.data,
count:N.count,label:N.label});return{uniqueValueInfos:z}};k.getAttributeComparator=y;k.getEqualIntervalBins=c;k.getNormalizedValue=function(z,N,K,F){let M=null;switch(N){case "log":0!==z&&(M=Math.log(z)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(F)&&0!==F&&(M=z/F*100);break;case "field":Number.isFinite(K)&&0!==K&&(M=z/K);break;case "natural-log":0<z&&(M=Math.log(z));break;case "square-root":0<z&&(M=z**.5)}return M};k.isNullCountSupported=Z;k.processSummaryStatisticsResult=function(z,
N){let K;for(K in z)-1<V.indexOf(K)&&(Number.isFinite(z[K])||(z[K]=null));if(!N)return z;["avg","stddev","variance"].forEach(F=>{null!=z[F]&&(z[F]=Math.ceil(z[F]))});return z};k.resolveCBResult=function(z,N){let K=z.classBreaks;const F=K[0].minValue,M=K[K.length-1].maxValue,P="standard-deviation"===N;K=K.map(ca=>{const C=ca.label;ca={minValue:ca.minValue,maxValue:ca.maxValue,label:C};if(P&&C){const G=C.match(h).map(R=>+R.trim());2===G.length?(ca.minStdDev=G[0],ca.maxStdDev=G[1],0>G[0]&&0<G[1]&&(ca.hasAvg=
!0)):1===G.length&&(C.includes("\x3c")?(ca.minStdDev=null,ca.maxStdDev=G[0]):C.includes("\x3e")&&(ca.minStdDev=G[0],ca.maxStdDev=null))}return ca});return{minValue:F,maxValue:M,classBreakInfos:K,normalizationTotal:z.normalizationTotal}};k.statisticTypes=V;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(k,e,Y,Z,t,I,y,n,q){t=new Y.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});Y=new Y.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});q=function(r){function B(){var w=r.apply(this,arguments)||this;w.breakCount=null;w.classificationField=
null;w.classificationMethod=null;w.normalizationField=null;w.normalizationType=null;w.type="class-breaks-definition";return w}k._inheritsLoose(B,r);k._createClass(B,[{key:"standardDeviationInterval",set:function(w){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",w)}},{key:"definedInterval",set:function(w){"defined-interval"===this.classificationMethod&&this._set("definedInterval",w)}}]);return B}(q);e.__decorate([Z.property({json:{write:!0}})],q.prototype,"breakCount",
void 0);e.__decorate([Z.property({json:{write:!0}})],q.prototype,"classificationField",void 0);e.__decorate([Z.property({type:String,json:{read:t.read,write:t.write}})],q.prototype,"classificationMethod",void 0);e.__decorate([Z.property({json:{write:!0}})],q.prototype,"normalizationField",void 0);e.__decorate([Z.property({json:{read:Y.read,write:Y.write}})],q.prototype,"normalizationType",void 0);e.__decorate([Z.property({value:null,json:{write:!0}})],q.prototype,"standardDeviationInterval",null);
e.__decorate([Z.property({value:null,json:{write:!0}})],q.prototype,"definedInterval",null);e.__decorate([Z.property()],q.prototype,"type",void 0);return q=e.__decorate([n.subclass("esri.rest.support.ClassBreaksDefinition")],q)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(k,e,Y,Z,t,I,y,n,q,r,B){Y=new Y.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});Z=function(w){function E(){var g=w.apply(this,arguments)||this;g.baseSymbol=null;g.colorRamp=null;g.type=null;return g}k._inheritsLoose(E,w);return E}(Z.JSONSupport);e.__decorate([t.property({type:B,json:{write:!0}})],Z.prototype,"baseSymbol",void 0);e.__decorate([t.property({types:r.types,json:{read:{reader:r.fromJSON},write:!0}})],Z.prototype,"colorRamp",void 0);e.__decorate([t.property({json:{read:Y.read,
write:Y.write}})],Z.prototype,"type",void 0);return Z=e.__decorate([q.subclass("esri.rest.support.ClassificationDefinition")],Z)})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(k,e,Y,Z){Y={key:"type",base:Y,typeMap:{algorithmic:e,multipart:Z}};k.fromJSON=function(t){return t&&t.type?"algorithmic"===t.type?e.fromJSON(t):"multipart"===t.type?Z.fromJSON(t):null:null};k.types=Y;Object.defineProperty(k,"__esModule",
{value:!0})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(k,e,Y,Z,t,I,y,n,q){var r;q=r=function(B){function w(E){E=B.call(this,E)||this;E.algorithm=null;E.fromColor=null;E.toColor=
null;E.type="algorithmic";return E}k._inheritsLoose(w,B);w.prototype.clone=function(){return new r({fromColor:Z.clone(this.fromColor),toColor:Z.clone(this.toColor),algorithm:this.algorithm})};return w}(q);e.__decorate([y.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],q.prototype,"algorithm",void 0);e.__decorate([t.property({type:Y,json:{type:[I.Integer],write:!0}})],q.prototype,"fromColor",void 0);e.__decorate([t.property({type:Y,json:{type:[I.Integer],
write:!0}})],q.prototype,"toColor",void 0);e.__decorate([t.property({type:["algorithmic"]})],q.prototype,"type",void 0);return q=r=e.__decorate([n.subclass("esri.rest.support.AlgorithmicColorRamp")],q)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(k,e,Y){k.enumeration=function(Z,t={}){var I;Z=Z instanceof e.JSONMap?Z:new e.JSONMap(Z,t);Z={type:(null!=(I=null==t?void 0:t.ignoreUnknown)?I:1)?Z.apiValues:String,json:{type:Z.jsonValues,
read:null!=t&&t.readOnly?!1:{reader:Z.read},write:{writer:Z.write}}};void 0!==(null==t?void 0:t.readOnly)&&(Z.readOnly=!!t.readOnly);void 0!==(null==t?void 0:t.default)&&(Z.json.default=t.default);void 0!==(null==t?void 0:t.name)&&(Z.json.name=t.name);return Y.property(Z)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,e,Y,Z,t,I,y,n){Y=function(q){function r(B){B=q.call(this,B)||this;B.type=null;return B}k._inheritsLoose(r,q);return r}(Y.JSONSupport);e.__decorate([Z.property({readOnly:!0,json:{read:!1,write:!0}})],Y.prototype,"type",void 0);return Y=e.__decorate([n.subclass("esri.rest.support.ColorRamp")],Y)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(k,e,Y,Z,t,I,y,n){var q;t=q=function(r){function B(w){w=r.call(this,w)||this;w.colorRamps=null;w.type="multipart";return w}k._inheritsLoose(B,r);B.prototype.clone=function(){return new q({colorRamps:Y.clone(this.colorRamps)})};return B}(n);e.__decorate([Z.property({type:[y],json:{write:!0}})],t.prototype,"colorRamps",void 0);e.__decorate([Z.property({type:["multipart"]})],t.prototype,"type",void 0);return t=q=e.__decorate([I.subclass("esri.rest.support.MultipartColorRamp")],t)})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass".split(" "),
function(k,e,Y,Z,t,I,y,n,q,r,B){Z=new Z.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let w=0;t=function(E){function g(c){c=E.call(this,c)||this;c.id=`sym${w++}`;c.type=null;c.color=new Y([0,0,0,1]);
return c}k._inheritsLoose(g,E);var x=g.prototype;x.readColor=function(c){return c&&null!=c[0]?[c[0],c[1],c[2],c[3]/255]:c};x.collectRequiredFields=function(){var c=k._asyncToGenerator(function*(h,L){});return function(h,L){return c.apply(this,arguments)}}();x.hash=function(){return JSON.stringify(this.toJSON())};x.clone=function(){};return g}(t.JSONSupport);e.__decorate([I.property({type:Z.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:Z.write}}})],t.prototype,"type",void 0);e.__decorate([I.property({type:Y,
json:{write:{allowNull:!0}}})],t.prototype,"color",void 0);e.__decorate([r.reader("color")],t.prototype,"readColor",null);return t=e.__decorate([B.subclass("esri.symbols.Symbol")],t)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(k){function e(B){const {classificationMethod:w,breakCount:E,normalizationType:g,definedInterval:x}=B.definition,c=[];var h=B.values;if(0===h.length)return[];h=h.sort((F,M)=>F-M);var L=h[0],V=h[h.length-1];if("equal-interval"===w)if(h.length>=
E){h=(V-L)/E;B=L;for(var z=1;z<E;z++){var N=Number((L+z*h).toFixed(6));c.push({minValue:B,maxValue:N,label:Y(B,N,g)});B=N}c.push({minValue:B,maxValue:V,label:Y(B,V,g)})}else h.forEach(F=>{c.push({minValue:F,maxValue:F,label:Y(F,F,g)})});else if("natural-breaks"===w){h=Z(h);B=t(h.uniqueValues,B.valueFrequency||h.valueFrequency,E);for(z=1;z<E;z++)h.uniqueValues.length>z&&(N=Number(h.uniqueValues[B[z]].toFixed(6)),c.push({minValue:L,maxValue:N,label:Y(L,N,g)}),L=N);c.push({minValue:L,maxValue:V,label:Y(L,
V,g)})}else if("quantile"===w)if(h.length>=E&&L!==V){B=Math.ceil(h.length/E);z=0;for(N=1;N<E;N++){var K=B+z-1;K>h.length&&(K=h.length-1);0>K&&(K=0);c.push({minValue:L,maxValue:h[K],label:Y(L,h[K],g)});L=h[K];z+=B;B=Math.ceil((h.length-z)/(E-N))}c.push({minValue:L,maxValue:V,label:Y(L,V,g)})}else for(V=-1,L=0;L<h.length;L++)B=h[L],B!==V&&(V=B,c.push({minValue:V,maxValue:B,label:Y(V,B,g)}),V=B);else if("standard-deviation"===w)if(B=n(h),z=q(h,B),0===z)c.push({minValue:h[0],maxValue:h[0],label:Y(h[0],
h[0],g)});else{h=y(L,V,E,B,z)*z;z=0;for(N=E;1<=N;N--)K=Number((B-(N-.5)*h).toFixed(6)),c.push({minValue:L,maxValue:K,label:Y(L,K,g)}),L=K,z++;N=Number((B+.5*h).toFixed(6));c.push({minValue:L,maxValue:N,label:Y(L,N,g)});L=N;z++;for(K=1;K<=E;K++)N=z===2*E?V:Number((B+(K+.5)*h).toFixed(6)),c.push({minValue:L,maxValue:N,label:Y(L,N,g)}),L=N,z++}else if("defined-interval"===w){if(!x)return c;V=h[0];h=h[h.length-1];L=Math.ceil((h-V)/x);B=V;for(z=1;z<L;z++)N=Number((V+z*x).toFixed(6)),c.push({minValue:B,
maxValue:N,label:Y(B,N,g)}),B=N;c.push({minValue:B,maxValue:h,label:Y(B,h,g)})}return c}function Y(B,w,E){let g=null;return g=B===w?E&&"percent-of-total"===E?B+"%":B.toString():E&&"percent-of-total"===E?B+"% - "+w+"%":B+" - "+w}function Z(B){const w=[],E=[];let g=Number.MIN_VALUE,x=1,c=-1;for(let h=0;h<B.length;h++){const L=B[h];L===g?(x++,E[c]=x):null!==L&&(w.push(L),g=L,x=1,E.push(x),c++)}return{uniqueValues:w,valueFrequency:E}}function t(B,w,E){var g=B.length;const x=[];E>g&&(E=g);for(var c=0;c<
E;c++)x.push(Math.round(c*g/E-1));x.push(g-1);c=I(x,B,w,E);{g=c.mean;c=c.sdcm;var h=E,L=0,V=0;let N=0,K=0,F=!0;for(let M=0;2>M&&F;M++){0===M&&(F=!1);for(var z=0;z<h-1;z++)for(;x[z+1]+1!==x[z+2];)if(x[z+1]+=1,L=r(z,x,B,w),N=L.sbMean,L=L.sbSdcm,V=r(z+1,x,B,w),K=V.sbMean,V=V.sbSdcm,L+V<c[z]+c[z+1])c[z]=L,c[z+1]=V,g[z]=N,g[z+1]=K,F=!0;else{--x[z+1];break}for(z=h-1;0<z;z--)for(;x[z]!==x[z-1]+1;)if(--x[z],L=r(z-1,x,B,w),N=L.sbMean,L=L.sbSdcm,V=r(z,x,B,w),K=V.sbMean,V=V.sbSdcm,L+V<c[z-1]+c[z])c[z-1]=L,c[z]=
V,g[z-1]=N,g[z]=K,F=!0;else{x[z]+=1;break}}g=F}g&&(c=I(x,B,w,E));return x}function I(B,w,E,g){let x=[];var c=[],h=[];let L=0;const V=[],z=[];for(var N=0;N<g;N++){var K=r(N,B,w,E);V.push(K.sbMean);z.push(K.sbSdcm);L+=z[N]}K=L;for(N=!0;N||L<K;){N=!1;x=[];for(c=0;c<g;c++)x.push(B[c]);for(h=0;h<g;h++)for(K=B[h]+1;K<=B[h+1];K++)if(c=w[K],0<h&&K!==B[h+1]&&Math.abs(c-V[h])>Math.abs(c-V[h-1]))B[h]=K;else if(h<g-1&&B[h]!==K-1&&Math.abs(c-V[h])>Math.abs(c-V[h+1])){B[h+1]=K-1;break}K=L;L=0;c=[];h=[];for(let F=
0;F<g;F++){c.push(V[F]);h.push(z[F]);const M=r(F,B,w,E);V[F]=M.sbMean;z[F]=M.sbSdcm;L+=z[F]}}if(L>K){for(w=0;w<g;w++)B[w]=x[w],V[w]=c[w],z[w]=h[w];L=K}return{mean:V,sdcm:z}}function y(B,w,E,g,x){B=Math.max(g-B,w-g)/x/E;return 1<=B?1:.5<=B?.5:.25}function n(B){let w=0;for(let E=0;E<B.length;E++)w+=B[E];return w/=B.length}function q(B,w){let E=0;for(let g=0;g<B.length;g++){const x=B[g];E+=(x-w)*(x-w)}E/=B.length;return Math.sqrt(E)}function r(B,w,E,g){var x=0,c=0;for(var h=w[B]+1;h<=w[B+1];h++){const L=
g[h];x+=E[h]*L;c+=L}0>=c&&console.log("Exception in Natural Breaks calculation");x/=c;c=0;for(h=w[B]+1;h<=w[B+1];h++)c+=g[h]*(E[h]-x)**2;return{sbMean:x,sbSdcm:c}}k.createGenerateRendererClassBreaks=function(B){const {normalizationTotal:w}=B;return{classBreaks:e(B),normalizationTotal:w}};k.createGenerateRendererUniqueValues=function(B){B=Z(B);const w=[],E=B.uniqueValues.length;for(let g=0;g<E;g++){const x=B.uniqueValues[g];w.push({value:x,count:B.valueFrequency[g],label:x.toString()})}return{uniqueValues:w}};
Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(k){function e(t,I,y,n,q){if(null!=n&&null!=q)return r=>{const B=t.getAttribute(r,I);r=t.getAttribute(r,y);return(null==B||B<=q)&&(null==r||r>=n)};if(null!=n)return r=>{r=t.getAttribute(r,y);return null==r||r>=n};if(null!=q)return r=>{r=t.getAttribute(r,I);return null==r||r<=q}}function Y(t,I,y,n){if(null!=y&&null!=n&&y===n)return q=>t.getAttribute(q,I)===y;if(null!=y&&
null!=n)return q=>{q=t.getAttribute(q,I);return q>=y&&q<=n};if(null!=y)return q=>t.getAttribute(q,I)>=y;if(null!=n)return q=>t.getAttribute(q,I)<=n}function Z(){return()=>!1}k.getTimeExtent=function(t,I){if(!t)return null;const y=I.featureAdapter,{startTimeField:n,endTimeField:q}=t;let r=Number.POSITIVE_INFINITY,B=Number.NEGATIVE_INFINITY;if(n&&q)I.forEach(w=>{const E=y.getAttribute(w,n);w=y.getAttribute(w,q);null==E||isNaN(E)||(r=Math.min(r,E));null==w||isNaN(w)||(B=Math.max(B,w))});else{const w=
n||q;I.forEach(E=>{E=y.getAttribute(E,w);null==E||isNaN(E)||(r=Math.min(r,E),B=Math.max(B,E))})}return{start:r,end:B}};k.getTimeOperator=function(t,I,y){if(!I||!t)return null;const {startTimeField:n,endTimeField:q}=t;if(!n&&!q)return null;const {start:r,end:B}=I;return null===r&&null===B?null:void 0===r&&void 0===B?Z():n&&q?e(y,n,q,r,B):Y(y,n||q,r,B)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(k,e,Y,Z,t,I,y,n,q,r,B,w,E,g){function x(H,v,d,m=H.hasZ,O=H.hasM){if(t.isNone(v))return null;const W=H.hasZ&&m,ka=H.hasM&&O;return d?(H=w.quantizeOptimizedGeometry(G,v,H.hasZ,H.hasM,"esriGeometryPoint",d,m,O),w.convertToPoint(H,W,ka)):w.convertToPoint(v,W,ka)}function c(){c=Y._asyncToGenerator(function*(H,v,d){const {outFields:m,orderByFields:O,groupByFieldsForStatistics:W,outStatistics:ka}=H;if(m)for(var oa=0;oa<m.length;oa++)m[oa]=m[oa].trim();if(O)for(oa=0;oa<O.length;oa++)O[oa]=O[oa].trim();
if(W)for(oa=0;oa<W.length;oa++)W[oa]=W[oa].trim();if(ka)for(oa=0;oa<ka.length;oa++)ka[oa].onStatisticField&&(ka[oa].onStatisticField=ka[oa].onStatisticField.trim());H.geometry&&!H.outSR&&(H.outSR=H.geometry.spatialReference);return L(H,v,d)});return c.apply(this,arguments)}function h(){h=Y._asyncToGenerator(function*(H,v,d){return L(H,v,d)});return h.apply(this,arguments)}function L(H,v,d){return V.apply(this,arguments)}function V(){V=Y._asyncToGenerator(function*(H,v,d){if(!H)return null;var {where:m}=
H;H.where=m=m&&m.trim();if(!m||/^1 *= *1$/.test(m)||v&&v===m)H.where=null;if(!H.geometry)return H;v=yield z(H);H.distance=0;H.units=null;"esriSpatialRelEnvelopeIntersects"===H.spatialRel&&({spatialReference:m}=H.geometry,v=y.getGeometryExtent(v),v.spatialReference=m);H.geometry=v;yield g.checkProjectionSupport(v.spatialReference,d);v=(yield q.normalizeCentralMeridian(n.fromJSON(v)))[0];if(t.isNone(v))throw P;v=v.toJSON();v=yield g.project(v,v.spatialReference,d);if(!v)throw P;v.spatialReference=d;
H.geometry=v;return H});return V.apply(this,arguments)}function z(H){return N.apply(this,arguments)}function N(){N=Y._asyncToGenerator(function*(H){const {geometry:v,distance:d,units:m}=H;if(null==d||"vertexAttributes"in v)return v;var O=v.spatialReference;H=m?M.fromJSON(m):I.getUnitString(O);O=O&&(r.isGeographic(O)||r.isWebMercator(O))?v:yield g.checkProjectionSupport(O,r.WGS84).then(()=>g.project(v,r.WGS84));return(yield K())(O.spatialReference,O,d,H)});return N.apply(this,arguments)}function K(){return F.apply(this,
arguments)}function F(){F=Y._asyncToGenerator(function*(){return(yield new Promise((H,v)=>k(["../../../geometry/geometryEngineJSON"],H,v))).geodesicBuffer});return F.apply(this,arguments)}const M=new Z.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),P=Object.freeze({}),ca=new E,C=new E,G=new E,R={esriGeometryPoint:w.convertToPoint,esriGeometryPolyline:w.convertToPolyline,
esriGeometryPolygon:w.convertToPolygon,esriGeometryMultipoint:w.convertToMultipoint},aa=(H,v)=>"_geVersion"!==H?v:void 0;e.QUERY_ENGINE_EMPTY_RESULT=P;e.cleanFromGeometryEngine=function(H){return H&&"_geVersion"in H?JSON.parse(JSON.stringify(H,aa)):H};e.getCentroid=function(H,v,d){if("esriGeometryPolygon"!==H.geometryType||!v||!v.centroid&&!v.geometry)return null;v.centroid||(v.centroid=B.getCentroidOptimizedGeometry(new E,v.geometry,H.hasZ,H.hasM));return x(H,v.centroid,d)};e.getGeometry=function(H,
v,d,m,O,W,ka=v,oa=d){const ma=v&&ka,da=d&&oa;m=t.isSome(m)?"coords"in m?m:m.geometry:null;if(t.isNone(m))return null;if(O)return v=w.generalizeOptimizedGeometry(C,m,v,d,H,O,ka,oa),W&&(v=w.quantizeOptimizedGeometry(G,v,ma,da,H,W)),R[H](v,ma,da);if(W)return W=w.quantizeOptimizedGeometry(G,m,v,d,H,W,ka,oa),R[H](W,ma,da);w.removeZMValues(ca,m,v,d,ka,oa);return R[H](ca,ma,da)};e.normalizeFilter=function(H,v,d){return h.apply(this,arguments)};e.normalizeQuery=function(H,v,d){return c.apply(this,arguments)};
e.normalizeQueryLike=L;e.transformCentroid=x;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(k,e,Y,Z,t,I,y,n){function q(J,Q,ea){if(J)for(const ra of J)(J=(J=I.getDeepValue(ra,Q))&&"function"!==typeof J&&ea.get(J))&&I.setDeepValue(ra,J.name,Q)}function r(J,Q){if(!J||!Q)return[];
p.clear();B(p,J,Q);return Array.from(p).sort()}function B(J,Q,ea){var ra;if(ea)if(null!=Q&&null!=(ra=Q.fields)&&ra.length)if(ea.includes("*"))for(const {name:sa}of Q.fields)J.add(sa);else for(const sa of ea)w(J,Q,sa);else if(ea.includes("*"))J.clear(),J.add("*");else for(const sa of ea)J.add(sa)}function w(J,Q,ea){"string"===typeof ea&&(Q?(Q=Q.get(ea))&&J.add(Q.name):J.add(ea))}function E(J,Q,ea){return g.apply(this,arguments)}function g(){g=Y._asyncToGenerator(function*(J,Q,ea){var ra;if(ea){var {arcadeUtils:sa}=
yield n.loadArcade();ea=sa.extractFieldNames(ea,null==Q?void 0:null==(ra=Q.fields)?void 0:ra.map(xa=>xa.name));for(const xa of ea)w(J,Q,xa)}});return g.apply(this,arguments)}function x(J,Q,ea){return c.apply(this,arguments)}function c(){c=Y._asyncToGenerator(function*(J,Q,ea){if(ea&&"1\x3d1"!==ea){ea=(yield new Promise((ra,sa)=>k(["../../core/sql/WhereClause"],ra,sa))).WhereClause.create(ea,Q);if(!ea.isStandardized)throw new Z("fieldUtils:collectFilterFields","Where clause is not standardized");B(J,
Q,ea.fieldNames)}});return c.apply(this,arguments)}function h(J,Q){for(const ea of J)if(ea&&ea.valueType&&ea.valueType===Q)return ea.name;return null}function L(){L=Y._asyncToGenerator(function*(J){if(!J)return[];const Q=new Set;yield V(Q,J);return Array.from(Q).sort()});return L.apply(this,arguments)}function V(J,Q){return z.apply(this,arguments)}function z(){z=Y._asyncToGenerator(function*(J,Q){if(Q){var ea=I.getDeepValue("elevationInfo.featureExpressionInfo",Q);if(ea)return ea.collectRequiredFields(J,
Q.fieldsIndex)}});return z.apply(this,arguments)}function N(J,Q,ea){return K.apply(this,arguments)}function K(){K=Y._asyncToGenerator(function*(J,Q,ea){ea.outStatistic.onStatisticValueExpression?E(J,Q,ea.outStatistic.onStatisticValueExpression):J.add(ea.outStatistic.onStatisticField)});return K.apply(this,arguments)}function F(){F=Y._asyncToGenerator(function*(J,Q,ea){var ra,sa;if(Q&&ea&&"cluster"===ea.type){var xa=[];null!=(ra=ea.popupTemplate)&&ra.expressionInfos&&xa.push(...ea.popupTemplate.expressionInfos.map(za=>
E(J,Q.fieldsIndex,za.expression)));if(Array.isArray(null==(sa=ea.popupTemplate)?void 0:sa.content)){ra=ea.popupTemplate.content;for(const za of ra)"expression"===za.type&&za.expressionInfo&&xa.push(E(J,Q.fieldsIndex,za.expressionInfo.expression))}ea.fields&&xa.push(...ea.fields.map(za=>N(J,Q.fieldsIndex,za)));yield Promise.all(xa)}});return F.apply(this,arguments)}function M(){M=Y._asyncToGenerator(function*(J,Q,ea){Q&&(Q.timeInfo&&t.isSome(ea)&&ea.timeExtent&&B(J,Q.fieldsIndex,[Q.timeInfo.startField,
Q.timeInfo.endField]),Q.floorInfo&&B(J,Q.fieldsIndex,[Q.floorInfo.floorField]),t.isSome(ea)&&t.isSome(ea.where)&&(yield x(J,Q.fieldsIndex,ea.where)))});return M.apply(this,arguments)}function P(){P=Y._asyncToGenerator(function*(J,Q,ea){Q&&ea&&(yield Promise.all(ea.map(ra=>ca(J,Q,ra))))});return P.apply(this,arguments)}function ca(J,Q,ea){return C.apply(this,arguments)}function C(){C=Y._asyncToGenerator(function*(J,Q,ea){Q&&ea&&(ea.valueExpression?yield E(J,Q.fieldsIndex,ea.valueExpression):ea.field&&
w(J,Q.fieldsIndex,ea.field))});return C.apply(this,arguments)}function G(){G=Y._asyncToGenerator(function*(J){if(!J)return[];const Q="timeInfo"in J&&J.timeInfo;return Q?r(J.fieldsIndex,[J.trackIdField,Q.startField,Q.endField]):[]});return G.apply(this,arguments)}function R(){R=Y._asyncToGenerator(function*(J){if(!J)return[];const Q=new Set;yield aa(Q,J);return Array.from(Q).sort()});return R.apply(this,arguments)}function aa(J,Q){return H.apply(this,arguments)}function H(){H=Y._asyncToGenerator(function*(J,
Q){const {labelingInfo:ea,fieldsIndex:ra}=Q;ea&&ea.length&&(yield Promise.all(ea.map(sa=>v(J,ra,sa))))});return H.apply(this,arguments)}function v(J,Q,ea){return d.apply(this,arguments)}function d(){d=Y._asyncToGenerator(function*(J,Q,ea){if(ea){var ra=ea.getLabelExpression();ea=ea.where;"arcade"===ra.type?yield E(J,Q,ra.expression):(ra=ra.expression.match(/{[^}]*}/g))&&ra.forEach(sa=>{w(J,Q,sa.slice(1,-1))});yield x(J,Q,ea)}});return d.apply(this,arguments)}function m(J){return"number"===typeof J&&
!isNaN(J)&&isFinite(J)}function O(J){return null===J||m(J)}function W(J){return null===J||fa(J)}function ka(J){return null!=J&&"string"===typeof J}function oa(J){return null===J||ka(J)}function ma(){return!0}function da(J,Q){let ea;switch(J.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":ea=J.nullable?W:fa;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":ea=
J.nullable?O:m;break;case "string":case "esriFieldTypeString":ea=J.nullable?oa:ka;break;default:ea=ma}return 1===arguments.length?ea:ea(Q)}function la(J){return null!=J&&D.has(J.type)}function qa(J,Q){return J.nullable&&null===Q?null:la(J)&&!wa(J.type,Number(Q))?e.NumericRangeValidationError.OUT_OF_RANGE:da(J,Q)?J.domain?y.validateDomainValue(J.domain,Q):null:e.TypeValidationError.INVALID_TYPE}function wa(J,Q){return(J="string"===typeof J?Da(J):J)?J.isInteger?fa(Q)&&Q>=J.min&&Q<=J.max:Q>=J.min&&Q<=
J.max:!1}function Da(J){switch(J){case "esriFieldTypeSmallInteger":case "small-integer":return S;case "esriFieldTypeInteger":case "integer":return T;case "esriFieldTypeSingle":case "single":return ha;case "esriFieldTypeDouble":case "double":return ia}}function La(J,Q,ea){if(!Q||!Q.attributes||!J){if(t.isSome(ea))for(var ra of J)ea.add(ra);return!0}Q=Q.attributes;ra=!1;for(const sa of J)if(!(sa in Q))if(ra=!0,t.isSome(ea))ea.add(sa);else break;return ra}function Fa(){Fa=Y._asyncToGenerator(function*(J,
Q){const ea=new Set;for(const ra of Q)yield E(ea,J.fieldsIndex,ra);return Array.from(ea).sort()});return Fa.apply(this,arguments)}const Na="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),b=["field","normalizationField"],p=new Set,fa=(()=>"isInteger"in Number?Number.isInteger:J=>"number"===typeof J&&isFinite(J)&&Math.floor(J)===J)(),l=["integer","small-integer",
"single","double"],D=new Set([...l,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);e.NumericRangeValidationError=void 0;(e.NumericRangeValidationError||(e.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";e.TypeValidationError=void 0;(e.TypeValidationError||(e.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const S={min:-32768,max:32767,isInteger:!0},T={min:-2147483648,max:2147483647,
isInteger:!0},ha={min:-3.4E38,max:1.2E38,isInteger:!1},ia={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};e.collectArcadeFieldNames=E;e.collectElevationFields=V;e.collectFeatureReductionFields=function(J,Q,ea){return F.apply(this,arguments)};e.collectField=w;e.collectFields=B;e.collectFilterFields=function(J,Q,ea){return M.apply(this,arguments)};e.collectLabelingFields=aa;e.collectOrderByInfos=function(J,Q,ea){return P.apply(this,arguments)};e.doubleRange=ia;e.featureHasFields=function(J,
Q){return!La(J,Q,null)};e.fixFields=r;e.fixRendererFields=function(J,Q){if(null!=J&&null!=Q)for(const ea of Array.isArray(J)?J:[J])if(q(Na,ea,Q),"visualVariables"in ea&&ea.visualVariables)for(const ra of ea.visualVariables)q(b,ra,Q)};e.fixTimeInfoFields=function(J,Q){if(null!=J&&null!=Q&&Q.fields.length)if("startField"in J){var ea=Q.get(J.startField);Q=Q.get(J.endField);J.startField=ea&&ea.name||null;J.endField=Q&&Q.name||null}else ea=Q.get(J.startTimeField),Q=Q.get(J.endTimeField),J.startTimeField=
ea&&ea.name||null,J.endTimeField=Q&&Q.name||null};e.getDisplayFieldName=function({displayField:J,fields:Q}){if(J)return J;if(!Q||!Q.length)return null;if(!(J=h(Q,"name-or-title")||h(Q,"unique-identifier")||h(Q,"type-or-category")))a:{for(const ea of Q)if(ea&&ea.name&&(Q=ea.name.toLowerCase(),-1<Q.indexOf("name")||-1<Q.indexOf("title"))){J=ea.name;break a}J=null}return J};e.getElevationFields=function(J){return L.apply(this,arguments)};e.getExpressionFields=function(J,Q){return Fa.apply(this,arguments)};
e.getFeatureEditFields=function(J){if(!J)return[];const Q="editFieldsInfo"in J&&J.editFieldsInfo;return Q?r(J.fieldsIndex,[Q&&Q.creatorField,Q&&Q.creationDateField,Q&&Q.editorField,Q&&Q.editDateField]):[]};e.getFeatureGeometryFields=function(J){if(!J)return[];const Q=J.geometryFieldsInfo;return Q?r(J.fieldsIndex,[Q.shapeAreaField,Q.shapeLengthField]):[]};e.getFieldDefaultValue=function(J){const Q=J.defaultValue;if(void 0!==Q&&da(J,Q))return Q;if(J.nullable)return null};e.getFieldRange=function(J){const Q=
y.getDomainRange(J.domain);if(Q)return Q;if(la(J))return Da(J.type)};e.getLabelingFields=function(J){return R.apply(this,arguments)};e.getNumericTypeForValue=function(J){if(!m(J))return null;if(fa(J)){if(J>=S.min&&J<=S.max)return"esriFieldTypeSmallInteger";if(J>=T.min&&J<=T.max)return"esriFieldTypeInteger"}return J>=ha.min&&J<=ha.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};e.getTimeFields=function(J){return G.apply(this,arguments)};e.integerRange=T;e.isDateField=function(J){return null!=J&&("date"===
J.type||"esriFieldTypeDate"===J.type)};e.isNumberInRange=wa;e.isNumericField=la;e.isStringField=function(J){return null!=J&&("string"===J.type||"esriFieldTypeString"===J.type)};e.isValidFieldValue=function(J,Q){return null===qa(J,Q)};e.isValueMatchingFieldType=da;e.numericTypes=l;e.packFields=function(J,Q,ea=1){if(!Q||!J)return[];if(Q.includes("*"))return["*"];Q=r(J,Q);return Q.length/J.fields.length>=ea?["*"]:Q};e.populateMissingFields=La;e.rendererFields=Na;e.sanitizeNullFieldValue=function(J){return null==
J||"number"===typeof J&&isNaN(J)?null:J};e.singleRange=ha;e.smallIntegerRange=S;e.unpackFieldNames=function(J,Q){return t.isNone(Q)||t.isNone(J)?[]:Q.includes("*")?J.fields.map(ea=>ea.name):Q};e.validateFieldValue=qa;e.validationErrorToString=function(J,Q,ea){switch(J){case y.DomainValidationError.INVALID_CODED_VALUE:return`Value ${ea} is not in the coded domain - field: ${Q.name}, domain: ${JSON.stringify(Q.domain)}`;case y.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${ea} is out of the range of valid values - field: ${Q.name}, domain: ${JSON.stringify(Q.domain)}`;
case e.TypeValidationError.INVALID_TYPE:return`Value ${ea} is not a valid value for the field type - field: ${Q.name}, type: ${Q.type}, nullable: ${Q.nullable}`;case e.NumericRangeValidationError.OUT_OF_RANGE:{const {min:ra,max:sa}=Da(Q.type);return`Value ${ea} is out of range for the number type - field: ${Q.name}, type: ${Q.type}, value range is ${ra} to ${sa}`}}};e.visualVariableFields=b;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/support/domainUtils":function(){define(["exports"],
function(k){function e(Y,Z){switch(Y.type){case "range":{const t="range"in Y?Y.range[1]:Y.maxValue;if(+Z<("range"in Y?Y.range[0]:Y.minValue)||+Z>t)return k.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==Y.codedValues||Y.codedValues.every(t=>null==t||t.code!==Z))return k.DomainValidationError.INVALID_CODED_VALUE}return null}k.DomainValidationError=void 0;(function(Y){Y.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";Y.INVALID_CODED_VALUE=
"domain-validation-error::invalid-coded-value"})(k.DomainValidationError||(k.DomainValidationError={}));k.getDomainRange=function(Y){if(Y&&"range"===Y.type)return{min:"range"in Y?Y.range[0]:Y.minValue,max:"range"in Y?Y.range[1]:Y.maxValue}};k.isValidDomainValue=function(Y,Z){return null===e(Y,Z)};k.validateDomainValue=e;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/maybe ../geometry/SpatialReference".split(" "),
function(k,e,Y,Z,t,I){function y(){n||(n=Y._asyncToGenerator(function*(){const r=yield new Promise((B,w)=>k(["./arcadeUtils"],B,w));return{arcade:r.arcade,arcadeUtils:r,Dictionary:r.Dictionary,Feature:r.arcadeFeature}})());return n}let n;Z=(r,B,w)=>q.create(r,B,w,null,["$feature","$view"]);let q=function(){function r(w,E,g,x,c,h,L,V){this.script=w;this.evaluate=c;this.fields=Array.isArray(L)?L:L.fields;this._syntaxTree=x;this._arcade=E;this._arcadeDictionary=g;this._arcadeFeature=h;this._spatialReference=
V;this._referencesGeometry=E.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}r.create=function(){var w=Y._asyncToGenerator(function*(E,g,x,c,h,L){const {arcade:V,Feature:z,Dictionary:N}=yield y(),K=I.fromJSON(g);g=V.parseScript(E,L);h=h.reduce((C,G)=>({...C,[G]:null}),{});let F=null;t.isSome(c)&&(F=new N(c),F.immutable=!0,h.$config=null);c=V.scriptUsesGeometryEngine(g)&&V.enableGeometrySupport();L=V.scriptUsesFeatureSet(g)&&V.enableFeatureSetSupport();
const M=V.scriptIsAsync(g)&&V.enableAsyncSupport();h={vars:h,spatialReference:K,useAsync:!!M};const P=new N;P.immutable=!1;P.setField("scale",0);const ca=V.compileScript(g,h);yield Promise.all([c,L,M]);return new r(E,V,N,g,C=>{"$view"in C&&C.$view&&(P.setField("scale",C.$view.scale),C.$view=P);F&&(C.$config=F);return ca({vars:C,spatialReference:K})},new z,x,K)});return function(E,g,x,c,h,L){return w.apply(this,arguments)}}();var B=r.prototype;B.repurposeFeature=function(w){w.geometry&&!w.geometry.spatialReference&&
(w.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(w.geometry,w.attributes,{fields:this.fields});return this._arcadeFeature};B.createDictionary=function(){return new this._arcadeDictionary};B.referencesMember=function(w){return this._arcade.referencesMember(this._syntaxTree,w)};B.referencesFunction=function(w){return this._arcade.referencesFunction(this._syntaxTree,w)};B.referencesGeometry=function(){return this._referencesGeometry};B.referencesScale=
function(){return this._referencesScale};B.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};return r}();e.ArcadeExpression=q;e.createDictionaryExpression=(r,B,w,E)=>q.create(r,B,w,E,["$feature","$view"]);e.createLabelExpression=(r,B,w)=>q.create(r,B,w,null,["$feature"]);e.createRendererExpression=Z;e.createVVExpression=Z;e.loadArcade=y;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(k,e,Y,Z,t,I,y,n,q,r,B,w,E){function g(){return new Promise((L,V)=>k(["../../../geometry/geometryEngineJSON"],L,V))}function x(){x=Y._asyncToGenerator(function*(L,V,z){const {spatialRel:N,geometry:K}=L;if(K){if(!0!==h.spatialRelationship[N])throw new Z("feature-store:unsupported-query","Unsupported query spatial relationship",{query:L});if(n.isValid(K.spatialReference)&&n.isValid(z)){if(!0!==h.queryGeometry[y.getJsonType(K)])throw new Z("feature-store:unsupported-query","Unsupported query geometry type",
{query:L});if(!0!==h.layerGeometry[V])throw new Z("feature-store:unsupported-query","Unsupported layer geometry type",{query:L});if(L.outSR)return w.checkProjectionSupport(L.geometry&&L.geometry.spatialReference,L.outSR)}}});return x.apply(this,arguments)}const c={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",
esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},h={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},
layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};e.canQueryWithRBush=function(L){if(y.isExtent(L))return!0;if(y.isPolygon(L)){for(const V of L.rings)if(5!==V.length||V[0][0]!==V[1][0]||V[0][0]!==V[4][0]||V[2][0]!==V[3][0]||V[0][1]!==V[3][1]||V[0][1]!==V[4][1]||V[1][1]!==V[2][1])return!1;return!0}return!1};e.checkSpatialQuerySupport=function(L,V,z){return x.apply(this,arguments)};e.getSpatialQueryOperator=function(L,
V,z,N,K){if(y.isPolygon(V)&&"esriGeometryPoint"===z&&("esriSpatialRelIntersects"===L||"esriSpatialRelContains"===L)){const F=r.convertFromPolygon(new B,V,!1,!1);return Promise.resolve(M=>q.polygonContainsPoint(F,!1,!1,M))}if(y.isPolygon(V)&&"esriGeometryMultipoint"===z){const F=r.convertFromPolygon(new B,V,!1,!1);if("esriSpatialRelContains"===L)return Promise.resolve(M=>q.polygonContainsMultipoint(F,!1,!1,M,N,K))}if(y.isExtent(V)&&"esriGeometryPoint"===z&&("esriSpatialRelIntersects"===L||"esriSpatialRelContains"===
L))return Promise.resolve(F=>t.extentContainsPoint(V,E.getGeometry(z,N,K,F)));if(y.isExtent(V)&&"esriGeometryMultipoint"===z&&"esriSpatialRelContains"===L)return Promise.resolve(F=>t.extentContainsMultipoint(V,E.getGeometry(z,N,K,F)));if(y.isExtent(V)&&"esriSpatialRelIntersects"===L){const F=I.getExtentIntersector(z);return Promise.resolve(M=>F(V,E.getGeometry(z,N,K,M)))}return g().then(F=>{const M=F[c[L]].bind(null,V.spatialReference,V);return P=>M(E.getGeometry(z,N,K,P))})};Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(k,e){k.extentIntersectsExtent=e.extentIntersectsExtent;k.extentIntersectsMultipoint=e.extentIntersectsMultipoint;k.extentIntersectsPoint=e.extentIntersectsPoint;k.extentIntersectsPolygon=e.extentIntersectsPolygon;k.extentIntersectsPolyline=e.extentIntersectsPolyline;k.getFeatureExtentIntersector=e.getFeatureExtentIntersector;k.isSelfIntersecting=e.isSelfIntersecting;k.segmentIntersects=
e.segmentIntersects;k.getExtentIntersector=function(Y){return"mesh"===Y?e.extentIntersectsExtent:e.getFeatureExtentIntersector(Y)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],function(k){function e(Y,Z,t,I,y){if(!Y)return!1;Z=Z?t?4:3:t?3:2;const {coords:n,lengths:q}=Y;t=!1;Y=0;for(const B of q){var r=Y;for(let w=Y,E=Y+B*Z;w<E;w+=Z){r=w+Z;r===E&&(r=Y);const g=n[w],x=n[w+1],c=n[r];r=n[r+1];(x<y&&r>=y||r<y&&x>=y)&&g+(y-x)/(r-x)*(c-
g)<I&&(t=!t)}Y+=B*Z}return t}k.polygonContainsCoords=e;k.polygonContainsMultipoint=function(Y,Z,t,I,y,n){y=y?n?4:3:n?3:2;const {coords:q,lengths:r}=I;if(!r)return!1;for(let B=0,w=0;B<r.length;B++,w+=y)if(!e(Y,Z,t,q[w],q[w+1]))return!1;return!0};k.polygonContainsPoint=function(Y,Z,t,I){return e(Y,Z,t,I.coords[0],I.coords[1])};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(k,e){function Y(t){return"oid"===
t.type||"esriFieldTypeOID"===t.type}function Z(t){return"global-id"===t.type||"esriFieldTypeGlobalID"===t.type}return function(){function t(y){this.fields=y;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(y){var n=[];for(const q of y)if(y=q&&q.name){const r=y.toLowerCase().trim();this._fieldsMap.set(y,q);this._fieldsMap.set(r,q);n.push(r);"date"===q.type||"esriFieldTypeDate"===q.type?(this.dateFields.push(q),
this._dateFieldsSet.add(q)):e.isNumericField(q)&&(this._numericFieldsSet.add(q),this.numericFields.push(q));Y(q)||Z(q)||(q.editable=null==q.editable?!0:!!q.editable,q.nullable=null==q.nullable?!0:!!q.nullable)}n.sort();this.uid=n.join(",")}}var I=t.prototype;I.destroy=function(){this._fieldsMap.clear()};I.has=function(y){return null!=this.get(y)};I.get=function(y){return null!=y?this._fieldsMap.get(y)||this._fieldsMap.get(y.toLowerCase().trim()):void 0};I.isDateField=function(y){return this._dateFieldsSet.has(this.get(y))};
I.isNumericField=function(y){return this._numericFieldsSet.has(this.get(y))};I.normalizeFieldName=function(y){if(y=this.get(y))return y.name};k._createClass(t,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const y of this.fields)Y(y)||Z(y)||y.nullable||void 0!==e.getFieldDefaultValue(y)||this._requiredFields.push(y)}return this._requiredFields}}]);return t}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/PromiseQueue ./debugFlags".split(" "),
function(k,e,Y,Z,t,I,y,n,q,r,B,w,E,g,x,c,h,L,V){function z(v){return K.has(v)?K.get(v):"number"===typeof v?v:1}const N=I.getLogger("esri.views.support.Scheduler");k.TaskPriority=void 0;(function(v){v.RESOURCE_CONTROLLER="schedule";v.SLIDE="slide";v.STREAM_DATA_LOADER="stream loader";v.ELEVATION_QUERY="elevation query";v.TERRAIN_SURFACE="terrain";v.SURFACE_GEOMETRY_UPDATES="surface geometry updates";v.GRAPHICS_CORE="Graphics3D";v.I3S_CONTROLLER="I3S";v.POINT_CLOUD_LAYER="point cloud";v.FEATURE_TILE_FETCHER=
"feature fetcher";v.OVERLAY="overlay";v.STAGE="stage";v.GRAPHICS_DECONFLICTOR="graphics deconflictor";v.FILTER_VISIBILITY="Graphics3D filter visibility";v.SCALE_VISIBILITY="Graphics3D scale visibility";v.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";v.POINT_OF_INTEREST_FREQUENT="POI frequent";v.POINT_OF_INTEREST_INFREQUENT="POI infrequent";v.LABELER="labeler";v.FEATURE_QUERY_ENGINE="feature query";v.FEATURE_TILE_TREE="feature tile tree";v.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";v.ELEVATION_ALIGNMENT=
"elevation alignment";v.TEXT_TEXTURE_ATLAS="text texture atlas";v.TEXTURE_UNLOAD="texture unload";v.LINE_OF_SIGHT_TOOL="line of sight tool";v.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";v.ELEVATION_PROFILE="elevation profile";v.SNAPPING="snapping";v.SHADOW_ACCUMULATOR="shadow accumulator";v.CLOUDS_GENERATOR="cloud generator";v[v.TEST_PRIO=1]="TEST_PRIO"})(k.TaskPriority||(k.TaskPriority={}));const K=new Map([[k.TaskPriority.RESOURCE_CONTROLLER,0],[k.TaskPriority.SLIDE,0],[k.TaskPriority.STREAM_DATA_LOADER,
0],[k.TaskPriority.ELEVATION_QUERY,0],[k.TaskPriority.TERRAIN_SURFACE,1],[k.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[k.TaskPriority.GRAPHICS_CORE,2],[k.TaskPriority.I3S_CONTROLLER,2],[k.TaskPriority.POINT_CLOUD_LAYER,2],[k.TaskPriority.FEATURE_TILE_FETCHER,2],[k.TaskPriority.OVERLAY,4],[k.TaskPriority.STAGE,4],[k.TaskPriority.GRAPHICS_DECONFLICTOR,4],[k.TaskPriority.FILTER_VISIBILITY,4],[k.TaskPriority.SCALE_VISIBILITY,4],[k.TaskPriority.FRUSTUM_VISIBILITY,4],[k.TaskPriority.POINT_OF_INTEREST_FREQUENT,
6],[k.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[k.TaskPriority.LABELER,8],[k.TaskPriority.FEATURE_QUERY_ENGINE,8],[k.TaskPriority.FEATURE_TILE_TREE,16],[k.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[k.TaskPriority.ELEVATION_ALIGNMENT,12],[k.TaskPriority.TEXT_TEXTURE_ATLAS,12],[k.TaskPriority.CLOUDS_GENERATOR,12],[k.TaskPriority.TEXTURE_UNLOAD,12],[k.TaskPriority.LINE_OF_SIGHT_TOOL,16],[k.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[k.TaskPriority.SNAPPING,0],[k.TaskPriority.SHADOW_ACCUMULATOR,
30]]);k.State=void 0;(function(v){v[v.ANIMATING=0]="ANIMATING";v[v.INTERACTING=1]="INTERACTING";v[v.IDLE=2]="IDLE"})(k.State||(k.State={}));const F=w.Milliseconds(6.5),M=w.Milliseconds(1),P=w.Milliseconds(30),ca=w.Milliseconds(1E3/30),C=w.Milliseconds(100);var G;(function(v){let d=function(W){function ka(ma){var da=W.call(this,ma)||this;da.updating=!0;da._microTaskQueued=!1;da.performanceInfo={total:new n("total"),tasks:new Map};da._frameTaskTimes=new Map;da._budget=null;da._state=k.State.INTERACTING;
da._tasks=new q;da._runQueue=new q;da._load=0;da._idleStateCallbacks=new q;da._idleUpdatesStartFired=!1;da._maxReschedule=H;da._forceTask=!1;da._debug=!1;da._debugHandle=B.watch(()=>V.SCHEDULER_LOG_SLOW_TASKS,wa=>da._debug=wa,B.initial);da._budget=new O(ma.nowFunc);for(const wa of Object.keys(k.TaskPriority))da.performanceInfo.tasks.set(k.TaskPriority[wa],new n(k.TaskPriority[wa]));let la;const qa=e._assertThisInitialized(da);da._test={get state(){return y.unwrapOr(la,qa._state)},set state(wa){la=
wa},FRAME_SAFETY_BUDGET:F,INTERACTING_BUDGET:ca,IDLE_BUDGET:C,get budget(){return qa._budget.budget},usedBudget:0,setBudget:wa=>qa._budget=wa,updateTask:wa=>da._updateTask(wa),getState:wa=>da._getState(wa),getRuntime:wa=>da._getRuntime(wa),frameTaskTimes:da._frameTaskTimes,resetRuntimes:()=>da._resetRuntimes(),getRunning:()=>da._getRunning()};return da}e._inheritsLoose(ka,W);var oa=ka.prototype;oa.destroy=function(){this._tasks.toArray().forEach(ma=>ma.remove());this._tasks.clear();y.removeMaybe(this._debugHandle);
this.updating=this._microTaskQueued=!1};oa.activate=function(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=H,this._schedule(),this.frame()))}))};oa.registerTask=function(ma,da){const la=z(ma);da=new m(this,ma,da,la);this._tasks.push(da);this.performanceInfo.tasks.has(ma)||this.performanceInfo.tasks.set(ma,new n(ma));return da};oa.registerIdleStateCallbacks=function(ma,
da){const la={idleBegin:ma,idleEnd:da};this._idleStateCallbacks.push(la);this.state===k.State.IDLE&&this._idleUpdatesStartFired&&la.idleBegin();const qa=this;return{remove:()=>this._removeIdleStateCallbacks(la),set idleBegin(wa){qa._idleUpdatesStartFired&&(la.idleEnd(),qa._state===k.State.IDLE&&wa());la.idleBegin=wa},set idleEnd(wa){la.idleEnd=wa}}};oa.updateBudget=function(ma){this._test.usedBudget=0;let da=F,la=ma.frameDuration,qa=M;switch(this.state){case k.State.IDLE:da=w.Milliseconds(0);la=w.Milliseconds(Math.max(C,
ma.frameDuration));qa=P;break;case k.State.INTERACTING:la=w.Milliseconds(Math.max(ca,ma.frameDuration))}la=w.Milliseconds(la-ma.elapsedFrameTime-da);if(this.state!==k.State.IDLE&&la<M&&!this._forceTask)return this._forceTask=!0,!1;la=w.Milliseconds(Math.max(la,qa));this._budget.reset(la,this.state);this._maxReschedule=H;this._updateLoad();return this._schedule()};oa.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case k.State.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=
!0,this._idleStateCallbacks.forAll(ma=>ma.idleBegin()));this._runIdle();break;case k.State.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};oa.stopFrame=function(){this._budget.reset(w.Milliseconds(0),this._state);this._budget.madeProgress()};oa._removeIdleStateCallbacks=function(ma){this._idleUpdatesStartFired&&ma.idleEnd();this._idleStateCallbacks.removeUnordered(ma)};oa.removeTask=function(ma){this._tasks.removeUnordered(ma);this._runQueue.removeUnordered(ma)};
oa._updateTask=function(ma){this._tasks.forAll(da=>{da.name===ma&&da.setPriority(ma)})};oa._getState=function(ma){if(this._runQueue.some(la=>la.name===ma))return k.TaskState.SCHEDULED;let da=k.TaskState.IDLE;this._tasks.forAll(la=>{la.name===ma&&la.needsUpdate&&(1>=la.schedulePriority?da=k.TaskState.READY:da!==k.TaskState.READY&&(da=k.TaskState.WAITING))});return da};oa._getRuntime=function(ma){let da=0;this._tasks.forAll(la=>{la.name===ma&&(da+=la.runtime)});return da};oa._resetRuntimes=function(){this._tasks.forAll(ma=>
ma.runtime=0)};oa._getRunning=function(){const ma=new Map;this._tasks.forAll(la=>{la.needsUpdate&&ma.set(la.name,(ma.get(la.name)||0)+1)});if(0===ma.size)return null;let da="";ma.forEach((la,qa)=>{da=1<la?da+` ${la}x ${qa}`:da+` ${qa}`});return da};oa._runIdle=function(){this._run()};oa._runInteracting=function(){this._run()};oa._runAnimating=function(){this._run()};oa._updateLoad=function(){const ma=this._tasks.reduce((da,la)=>la.needsUpdate?++da:da,0);this._load=.9*this._load+ma*(1-.9)};oa._schedule=
function(){if(0>=this._maxReschedule)return!1;this._runQueue.filterInPlace(ma=>{if(ma.needsUpdate)return!0;ma.schedulePriority=ma.basePriority;return!1});for(this._tasks.forAll(ma=>{0===ma.basePriority&&ma.needsUpdate&&!this._runQueue.some(da=>da===ma)&&this._runQueue.unshift(ma)});0===this._runQueue.length;){let ma=!1,da=0;this._tasks.forAll(la=>{if(la.needsUpdate&&0!==la.schedulePriority&&0!==la.basePriority)switch(ma=!0,da=Math.max(da,la.basePriority),la.schedulePriority){case 1:la.schedulePriority=
0;this._runQueue.push(la);break;default:--la.schedulePriority}});if(!ma)return this.updating=!1;this._maxReschedule===H&&(this._maxReschedule=da);--this._maxReschedule}return this.updating=!0};oa._run=function(){const ma=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var da=this._budget.now();const la=this._runQueue.pop();this._budget.resetProgress();try{la.task.runTask(this._budget)}catch(qa){N.error(`Exception in task "${la.name}"`,qa)}la.schedulePriority=la.basePriority;
da=this._budget.now()-da;la.runtime+=da;this._frameTaskTimes.set(la.priority,this._frameTaskTimes.get(la.priority)+da);this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",la.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this.updating=this._tasks.some(qa=>qa.needsUpdate);this._recordFrameTaskTimes(this._budget.now()-ma);return}}while(this._schedule());this.updating=this._tasks.some(la=>la.needsUpdate);this._recordFrameTaskTimes(this._budget.now()-
ma)};oa._startFrameTaskTimes=function(){for(const ma of Object.keys(k.TaskPriority))this._frameTaskTimes.set(k.TaskPriority[ma],0)};oa._recordFrameTaskTimes=function(ma){this._frameTaskTimes.forEach((da,la)=>this.performanceInfo.tasks.get(la).record(da));this.performanceInfo.total.record(ma)};e._createClass(ka,[{key:"now",get:function(){return this.nowFunc()}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return y.isNone(this._test.state)?this._state:this._test.state},
set:function(ma){this._state!==ma&&(this._state=ma,this.state!==k.State.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(da=>da.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return ka}(Z);Y.__decorate([E.property()],d.prototype,"updating",void 0);Y.__decorate([E.property()],d.prototype,"nowFunc",void 0);d=Y.__decorate([h.subclass("esri.views.support.Scheduler")],d);v.Scheduler=d;let m=function(W){function ka(ma,da,la,qa){var wa=W.call(this,
{})||this;wa._scheduler=ma;wa.name=da;wa._basePriority=qa;wa.runtime=0;wa._queue=new L.PromiseQueue;wa._handles=new t;wa.schedulePriority=wa._basePriority;wa.task=y.isSome(la)?la:wa._queue;wa._handles.add(B.when(()=>wa.task.running,()=>ma.activate()));return wa}e._inheritsLoose(ka,W);var oa=ka.prototype;oa.normalizeCtorArgs=function(){return{}};oa.remove=function(){this.processQueue(R);this._scheduler.removeTask(this);this.schedule=aa.schedule;this.reschedule=aa.reschedule;this._handles.destroy()};
oa.setPriority=function(ma){this.name=ma;ma=z(ma);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=ma;this._basePriority=ma};oa.schedule=function(ma,da,la){return this._queue.push(ma,da,la)};oa.reschedule=function(ma,da,la){return this._queue.unshift(ma,da,la)};oa.processQueue=function(ma){this._queue.runTask(ma)};e._createClass(ka,[{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},
set:function(ma){this.setPriority(ma)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return ka}(Z);Y.__decorate([E.property({constructOnly:!0})],m.prototype,"task",void 0);Y.__decorate([E.property({readOnly:!0})],m.prototype,"updating",null);m=Y.__decorate([h.subclass("esri.views.support.SchedulerTask")],m);let O=function(){function W(oa){this.now=oa;this._budget=this._begin=0;this._state=k.State.IDLE;this._didWork=!1;this._enabled=!0}var ka=W.prototype;ka.run=function(oa){if(this.done)return!1;
!0===oa()&&(this._didWork=!0);return!0};ka.madeProgress=function(){this._didWork=!0};ka.reset=function(oa,ma){this._begin=this.now();this._budget=oa;this._state=ma;this._didWork=!1};ka.resetProgress=function(){this._didWork=!1};e._createClass(W,[{key:"done",get:function(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(oa){this._enabled=
oa}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return this.now()-this._begin}},{key:"hasProgressed",get:function(){return this._didWork}}]);return W}();v.Budget=O})(G||(G={}));k.TaskState=void 0;(function(v){v.SCHEDULED="s";v.READY="r";v.WAITING="w";v.IDLE="i"})(k.TaskState||(k.TaskState={}));const R=(()=>{const v=new G.Budget(()=>performance.now());v.enabled=!1;return v})(),aa=new (function(){function v(){}var d=v.prototype;d.remove=
function(){};d.processQueue=function(){};d.schedule=function(m,O,W){try{if(r.isAborted(O)){const ka=r.createAbortError();return W?Promise.resolve(W(ka)):Promise.reject(ka)}return r.when(m(R))}catch(ka){return Promise.reject(ka)}};d.reschedule=function(m,O,W){return this.schedule(m,O,W)};return v}()),H=Number.MAX_SAFE_INTEGER;k.ImmediateTask=aa;k.getTaskPriority=z;k.newScheduler=function(v){return new G.Scheduler({nowFunc:v})};k.noBudget=R;k.taskPriorities=K;Object.defineProperty(k,"__esModule",{value:!0})})},
"esri/core/Handles":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Collection ./maybe ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(k,e,Y,Z,t,I,y){Y=function(n){function q(B){B=n.call(this,B)||this;B._groups=new Map;return B}k._inheritsLoose(q,n);var r=q.prototype;r.destroy=function(){this.removeAll()};r.add=function(B,w){if(!this._isHandle(B)&&!Array.isArray(B)&&!Z.isCollection(B))return this;const E=this._getOrCreateGroup(w);
Array.isArray(B)||Z.isCollection(B)?B.forEach(g=>this._isHandle(g)&&E.push(g)):E.push(B);this.notifyChange("size");return this};r.forEach=function(B,w){if("function"===typeof B)this._groups.forEach(E=>E.forEach(B));else{const E=this._getGroup(B);E&&w&&E.forEach(w)}};r.has=function(B){return this._groups.has(this._ensureGroupKey(B))};r.remove=function(B){if(Array.isArray(B)||Z.isCollection(B))return B.forEach(this.remove,this),this;if(!this.has(B))return this;const w=this._getGroup(B);for(let E=0;E<
w.length;E++)w[E].remove();this._deleteGroup(B);this.notifyChange("size");return this};r.removeAll=function(){this._groups.forEach(B=>{for(let w=0;w<B.length;w++)B[w].remove()});this._groups.clear();this.notifyChange("size");return this};r._isHandle=function(B){return B&&!!B.remove};r._getOrCreateGroup=function(B){if(this.has(B))return this._getGroup(B);const w=[];this._groups.set(this._ensureGroupKey(B),w);return w};r._getGroup=function(B){return t.assumeNonNull(this._groups.get(this._ensureGroupKey(B)))};
r._deleteGroup=function(B){return this._groups.delete(this._ensureGroupKey(B))};r._ensureGroupKey=function(B){return B||"_default_"};k._createClass(q,[{key:"size",get:function(){let B=0;this._groups.forEach(w=>{B+=w.length});return B}}]);return q}(Y);e.__decorate([I.property({readOnly:!0})],Y.prototype,"size",null);return Y=e.__decorate([y.subclass("esri.core.Handles")],Y)})},"esri/core/Collection":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./ArrayPool ./Evented ./lang ./maybe ./ObjectPool ./ObservableChangesType ./scheduling ./accessorSupport/decorators/property ./accessorSupport/ensureType ./accessorSupport/decorators/shared ./accessorSupport/decorators/subclass ./accessorSupport/tracking ./accessorSupport/tracking/SimpleObservable".split(" "),
function(k,e,Y,Z,t,I,y,n,q,r,B,w,E,g,x){function c(R){return R?R instanceof G?R.toArray():R.length?Array.prototype.slice.apply(R):[]:[]}function h(R){if(R&&R.length)return R[0]}function L(R,aa,H,v){aa&&aa.forEach((d,m,O)=>{R.push(d);L(R,H.call(v,d,m,O),H,v)})}var V;let z=function(){function R(){this.target=null;this.defaultPrevented=this.cancellable=!1;this.type=this.item=void 0}var aa=R.prototype;aa.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};aa.reset=function(H){this.defaultPrevented=
!1;this.item=H};return R}();const N=new y(z,void 0,R=>{R.item=null;R.target=null;R.defaultPrevented=!1;R.cancellable=!1}),K=()=>{},F=new Set,M=new Set,P=new Set,ca=new Map;let C=0,G=V=function(R,aa){function H(d){d=R.call(this,d)||this;d._chgListeners=[];d._notifications=null;d._timer=null;d._observable=new x.SimpleObservable;d.length=0;d._items=[];Object.defineProperty(k._assertThisInitialized(d),"uid",{value:C++});return d}k._inheritsLoose(H,R);H.isCollection=function(d){return null!=d&&d instanceof
V};var v=H.prototype;v.normalizeCtorArgs=function(d){return d?Array.isArray(d)||d instanceof V?{items:d}:d:{}};v.destroy=function(){this.removeAll()};v[aa]=function*(){yield*this.items};v.hasEventListener=function(d){return"change"===d?0<this._chgListeners.length:this._emitter.hasEventListener(d)};v.on=function(d,m){if("change"===d){const O=this._chgListeners,W={removed:!1,callback:m};O.push(W);this._notifications&&this._notifications.push({listeners:O.slice(),items:this._items.slice(),changes:[]});
return{remove(){this.remove=K;W.removed=!0;O.splice(O.indexOf(W),1)}}}return this._emitter.on(d,m)};v.once=function(d,m){const O=this.on(d,m);return{remove(){O.remove()}}};v.add=function(d,m){g.trackAccess(this._observable);if(this._emitBeforeChanges(n.ObservableChangesType.ADD))return this;m=this.getNextIndex(null!=m?m:null);this._splice(m,0,[d]);this._emitAfterChanges(n.ObservableChangesType.ADD);return this};v.addMany=function(d,m=this._items.length){g.trackAccess(this._observable);if(!d||!d.length||
this._emitBeforeChanges(n.ObservableChangesType.ADD))return this;m=this.getNextIndex(m);this._splice(m,0,c(d));this._emitAfterChanges(n.ObservableChangesType.ADD);return this};v.at=function(d){g.trackAccess(this._observable);d=Math.trunc(d)||0;0>d&&(d+=this.length);if(!(0>d||d>=this.length))return this._items[d]};v.removeAll=function(){g.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(n.ObservableChangesType.REMOVE))return[];const d=this._splice(0,this.length)||[];this._emitAfterChanges(n.ObservableChangesType.REMOVE);
return d};v.clone=function(){g.trackAccess(this._observable);return this._createNewInstance({items:this._items.map(t.clone)})};v.concat=function(...d){g.trackAccess(this._observable);d=d.map(c);return this._createNewInstance({items:this._items.concat(...d)})};v.drain=function(d,m){g.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(n.ObservableChangesType.REMOVE)){var O=I.assumeNonNull(this._splice(0,this.length)),W=O.length;for(let ka=0;ka<W;ka++)d.call(m,O[ka],ka,O);this._emitAfterChanges(n.ObservableChangesType.REMOVE)}};
v.every=function(d,m){g.trackAccess(this._observable);return this._items.every(d,m)};v.filter=function(d,m){g.trackAccess(this._observable);let O;O=2===arguments.length?this._items.filter(d,m):this._items.filter(d);return this._createNewInstance({items:O})};v.find=function(d,m){g.trackAccess(this._observable);return this._items.find(d,m)};v.findIndex=function(d,m){g.trackAccess(this._observable);return this._items.findIndex(d,m)};v.flatten=function(d,m){g.trackAccess(this._observable);const O=[];
L(O,this,d,m);return new V(O)};v.forEach=function(d,m){g.trackAccess(this._observable);return this._items.forEach(d,m)};v.getItemAt=function(d){g.trackAccess(this._observable);return this._items[d]};v.getNextIndex=function(d){g.trackAccess(this._observable);const m=this.length;d=null==d?m:d;0>d?d=0:d>m&&(d=m);return d};v.includes=function(d,m=0){g.trackAccess(this._observable);return this._items.includes(d,m)};v.indexOf=function(d,m=0){g.trackAccess(this._observable);return this._items.indexOf(d,
m)};v.join=function(d=","){g.trackAccess(this._observable);return this._items.join(d)};v.lastIndexOf=function(d,m=this.length-1){g.trackAccess(this._observable);return this._items.lastIndexOf(d,m)};v.map=function(d,m){g.trackAccess(this._observable);d=this._items.map(d,m);return new V({items:d})};v.reorder=function(d,m=this.length-1){g.trackAccess(this._observable);const O=this.indexOf(d);if(-1!==O){0>m?m=0:m>=this.length&&(m=this.length-1);if(O!==m){if(this._emitBeforeChanges(n.ObservableChangesType.MOVE))return d;
this._splice(O,1);this._splice(m,0,[d]);this._emitAfterChanges(n.ObservableChangesType.MOVE)}return d}};v.pop=function(){g.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(n.ObservableChangesType.REMOVE)){var d=h(this._splice(this.length-1,1));this._emitAfterChanges(n.ObservableChangesType.REMOVE);return d}};v.push=function(...d){g.trackAccess(this._observable);if(this._emitBeforeChanges(n.ObservableChangesType.ADD))return this.length;this._splice(this.length,0,d);this._emitAfterChanges(n.ObservableChangesType.ADD);
return this.length};v.reduce=function(d,m){g.trackAccess(this._observable);const O=this._items;return 2===arguments.length?O.reduce(d,m):O.reduce(d)};v.reduceRight=function(d,m){g.trackAccess(this._observable);const O=this._items;return 2===arguments.length?O.reduceRight(d,m):O.reduceRight(d)};v.remove=function(d){g.trackAccess(this._observable);return this.removeAt(this.indexOf(d))};v.removeAt=function(d){g.trackAccess(this._observable);if(!(0>d||d>=this.length||this._emitBeforeChanges(n.ObservableChangesType.REMOVE)))return d=
h(this._splice(d,1)),this._emitAfterChanges(n.ObservableChangesType.REMOVE),d};v.removeMany=function(d){g.trackAccess(this._observable);if(!d||!d.length||this._emitBeforeChanges(n.ObservableChangesType.REMOVE))return[];d=d instanceof V?d.toArray():d;const m=this._items,O=[],W=d.length;for(let da=0;da<W;da++){var ka=m.indexOf(d[da]);if(-1<ka){{var oa=da+1;var ma=ka+1;const la=Math.min(d.length-oa,m.length-ma);let qa=0;for(;qa<la&&d[oa+qa]===m[ma+qa];)qa++;oa=qa}oa=1+oa;(ka=this._splice(ka,oa))&&0<
ka.length&&O.push.apply(O,ka);da+=oa-1}}this._emitAfterChanges(n.ObservableChangesType.REMOVE);return O};v.reverse=function(){g.trackAccess(this._observable);if(this._emitBeforeChanges(n.ObservableChangesType.MOVE))return this;const d=this._splice(0,this.length);d&&(d.reverse(),this._splice(0,0,d));this._emitAfterChanges(n.ObservableChangesType.MOVE);return this};v.shift=function(){g.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(n.ObservableChangesType.REMOVE)){var d=h(this._splice(0,
1));this._emitAfterChanges(n.ObservableChangesType.REMOVE);return d}};v.slice=function(d=0,m=this.length){g.trackAccess(this._observable);return this._createNewInstance({items:this._items.slice(d,m)})};v.some=function(d,m){g.trackAccess(this._observable);return this._items.some(d,m)};v.sort=function(d){g.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(n.ObservableChangesType.MOVE))return this;const m=I.assumeNonNull(this._splice(0,this.length));arguments.length?m.sort(d):m.sort();
this._splice(0,0,m);this._emitAfterChanges(n.ObservableChangesType.MOVE);return this};v.splice=function(d,m,...O){g.trackAccess(this._observable);const W=(m?n.ObservableChangesType.REMOVE:0)|(O.length?n.ObservableChangesType.ADD:0);if(this._emitBeforeChanges(W))return[];d=this._splice(d,m,O)||[];this._emitAfterChanges(W);return d};v.toArray=function(){g.trackAccess(this._observable);return this._items.slice()};v.toJSON=function(){g.trackAccess(this._observable);return this.toArray()};v.toLocaleString=
function(){g.trackAccess(this._observable);return this._items.toLocaleString()};v.toString=function(){g.trackAccess(this._observable);return this._items.toString()};v.unshift=function(...d){g.trackAccess(this._observable);if(!d.length||this._emitBeforeChanges(n.ObservableChangesType.ADD))return this.length;this._splice(0,0,d);this._emitAfterChanges(n.ObservableChangesType.ADD);return this.length};v._createNewInstance=function(d){return new this.constructor(d)};v._splice=function(d,m,O){const W=this._items;
var ka=this.itemType;let oa=void 0;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=q.schedule(()=>this._dispatchChange()));if(m){oa=W.splice(d,m);if(this.hasEventListener("before-remove")){var ma=N.acquire();ma.target=this;ma.cancellable=!0;for(let qa=0,wa=oa.length;qa<wa;qa++)m=oa[qa],ma.reset(m),this.emit("before-remove",ma),ma.defaultPrevented&&
(oa.splice(qa,1),W.splice(d,0,m),d+=1,--qa,--wa);N.release(ma)}this.length=this._items.length;if(this.hasEventListener("after-remove")){m=N.acquire();m.target=this;m.cancellable=!1;ma=oa.length;for(let qa=0;qa<ma;qa++)m.reset(oa[qa]),this.emit("after-remove",m);N.release(m)}}if(O&&O.length){if(ka){m=[];for(var da of O)O=ka.ensureType(da),null==O&&null!=da||m.push(O);O=m}ka=this.hasEventListener("before-add");da=this.hasEventListener("after-add");m=d===this.length;if(ka||da){var la=N.acquire();la.target=
this;la.cancellable=!0;ma=N.acquire();ma.target=this;ma.cancellable=!1;for(const qa of O)ka?(la.reset(qa),this.emit("before-add",la),la.defaultPrevented||(m?W.push(qa):W.splice(d++,0,qa),this._set("length",W.length),da&&(ma.reset(qa),this.emit("after-add",ma)))):(m?W.push(qa):W.splice(d++,0,qa),this._set("length",W.length),ma.reset(qa),this.emit("after-add",ma));N.release(ma);N.release(la)}else{if(m)for(la of O)W.push(la);else W.splice(d,0,...O);this._set("length",W.length)}}(O&&O.length||oa&&oa.length)&&
this._notifyChangeEvent(O,oa);return oa};v._emitBeforeChanges=function(d){let m=!1;if(this.hasEventListener("before-changes")){const O=N.acquire();O.target=this;O.cancellable=!0;O.type=d;this.emit("before-changes",O);m=O.defaultPrevented;N.release(O)}return m};v._emitAfterChanges=function(d){if(this.hasEventListener("after-changes")){const m=N.acquire();m.target=this;m.cancellable=!1;m.type=d;this.emit("after-changes",m);N.release(m)}this._observable.notify()};v._notifyChangeEvent=function(d,m){this.hasEventListener("change")&&
this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:d,removed:m})};v._dispatchChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var d=this._notifications;this._notifications=null;for(const m of d){d=m.changes;F.clear();M.clear();P.clear();for(const {added:da,removed:la}of d){if(da)if(0===P.size&&0===M.size)for(const qa of da)F.add(qa);else for(const qa of da)M.has(qa)?(P.add(qa),M.delete(qa)):P.has(qa)||F.add(qa);
if(la)if(0===P.size&&0===F.size)for(const qa of la)M.add(qa);else for(const qa of la)F.has(qa)?F.delete(qa):(P.delete(qa),M.add(qa))}const O=Y.acquire();F.forEach(da=>{O.push(da)});const W=Y.acquire();M.forEach(da=>{W.push(da)});const ka=this._items,oa=m.items,ma=Y.acquire();P.forEach(da=>{oa.indexOf(da)!==ka.indexOf(da)&&ma.push(da)});if(m.listeners&&(O.length||W.length||ma.length)){d={target:this,added:O,removed:W,moved:ma};const da=m.listeners.length;for(let la=0;la<da;la++){const qa=m.listeners[la];
qa.removed||qa.callback.call(this,d)}}Y.release(O);Y.release(W);Y.release(ma)}F.clear();M.clear();P.clear()}};k._createClass(H,[{key:"items",get:function(){g.trackAccess(this._observable);return this._items},set:function(d){this._emitBeforeChanges(n.ObservableChangesType.ADD)||(this._splice(0,this.length,c(d)),this._emitAfterChanges(n.ObservableChangesType.ADD))}}]);return H}(Z.EventedAccessor,Symbol.iterator);G.ofType=R=>{if(!R)return V;if(ca.has(R))return ca.get(R);let aa=null;if("function"===typeof R)aa=
R.prototype.declaredClass;else if(R.base)aa=R.base.prototype.declaredClass;else for(var H in R.typeMap){const v=R.typeMap[H].prototype.declaredClass;aa=aa?aa+` | ${v}`:v}H=function(v){function d(){return v.apply(this,arguments)||this}k._inheritsLoose(d,v);return d}(V);e.__decorate([w.shared({Type:R,ensureType:"function"===typeof R?B.ensureType(R):B.ensureOneOfType(R)})],H.prototype,"itemType",void 0);H=e.__decorate([E.subclass(`esri.core.Collection<${aa}>`)],H);ca.set(R,H);return H};e.__decorate([r.property()],
G.prototype,"length",void 0);e.__decorate([r.property()],G.prototype,"items",null);return G=V=e.__decorate([E.subclass("esri.core.Collection")],G)})},"esri/core/ObservableChangesType":function(){define(["exports"],function(k){k.ObservableChangesType=void 0;var e=k.ObservableChangesType||(k.ObservableChangesType={});e[e.ADD=1]="ADD";e[e.REMOVE=2]="REMOVE";e[e.MOVE=4]="MOVE";Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/accessorSupport/decorators/shared":function(){define(["exports"],
function(k){k.shared=function(e){return(Y,Z)=>{Y[Z]=e}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(k,e){let Y=function(){function Z(){this._observers=[]}var t=Z.prototype;t.observe=function(I){this._observers.includes(I)||this._observers.push(I);return new e.ObservationHandle(this._observers,I)};t.notify=function(){const I=this._observers.slice();for(let y=0;y<I.length;++y){const n=
I[y];n.onInvalidated();n.onCommitted()}};return Z}();k.SimpleObservable=Y;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(k,e,Y,Z,t,I,y){function n(E,g,x={}){return q(E,g,x,B)}function q(E,g,x={},c){let h=null;const L=x.once?(V,z)=>{c(V)&&(Z.removeMaybe(h),g(V,z))}:(V,z)=>{c(V)&&g(V,z)};h=I.watchTracked(E,L,x.sync,x.equals);
x.initial&&(E=E(),L(E,E));return h}function r(E,g,x){if(t.isAborted(x))return Promise.reject(t.createAbortError());const c=E();if(null!=g&&g(c))return Promise.resolve(c);let h=null;return new Promise((L,V)=>{h=Y.handlesGroup([t.onAbort(x,()=>{h=Z.removeMaybe(h);V(t.createAbortError())}),q(E,z=>{h=Z.removeMaybe(h);L(z)},{sync:!1,once:!0},null!=g?g:B)])})}function B(E){return!0}function w(E){return!!E}k.autorun=y.autorun;k.initial={initial:!0};k.on=function(E,g,x,c={}){function h(){V&&z&&(z.remove(),
null==c.onListenerRemove?void 0:c.onListenerRemove(V),z=V=null)}function L(F){c.once&&c.once&&Z.removeMaybe(N);x(F)}let V=null,z=null,N=null;const K=n(E,(F,M)=>{h();e.isEventTarget(F)&&(V=F,z=e.on(F,g,L),null==c.onListenerAdd?void 0:c.onListenerAdd(F))},{sync:c.sync,initial:!0});return N=Y.makeHandle(()=>{K.remove();h()})};k.once=function(E,g){return r(E,null,g)};k.sync={sync:!0};k.syncAndInitial={sync:!0,initial:!0};k.watch=n;k.when=function(E,g,x={}){return q(E,g,x,w)};k.whenOnce=function(E,g){return r(E,
w,g)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/support/PromiseQueue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(k,e,Y,Z,t,I,y,n,q,r){k.PromiseQueue=function(w){function E(){var x=w.apply(this,arguments)||
this;x._tasks=[];x.running=!1;return x}e._inheritsLoose(E,w);var g=E.prototype;g.destroy=function(){this.cancelAll()};g.runTask=function(x){for(;!x.done&&this._process(x);)x.madeProgress()};g.push=function(x,c,h){this.running=!0;return new Promise((L,V)=>this._tasks.push(new B(L,V,x,c,h)))};g.unshift=function(x,c,h){this.running=!0;return new Promise((L,V)=>this._tasks.unshift(new B(L,V,x,c,h)))};g._process=function(x){if(0===this._tasks.length)return!1;const c=this._tasks.shift();try{const h=t.isAborted(c.signal);
if(h&&!c.abortCallback)c.reject(t.createAbortError());else{const L=h?c.abortCallback(t.createAbortError()):c.callback(x);t.isPromiseLike(L)?L.then(c.resolve,c.reject):c.resolve(L)}}catch(h){c.reject(h)}this.running=0<this._tasks.length;return!0};g.cancelAll=function(){const x=t.createAbortError();for(const c of this._tasks)if(c.abortCallback){const h=c.abortCallback(x);c.resolve(h)}else c.reject(x);this._tasks.length=0;this.running=!1};e._createClass(E,[{key:"length",get:function(){return this._tasks.length}}]);
return E}(Z);Y.__decorate([I.property()],k.PromiseQueue.prototype,"running",void 0);k.PromiseQueue=Y.__decorate([r.subclass("esri.layers.support.PromiseQueue")],k.PromiseQueue);let B=function(w,E,g,x,c){this.resolve=w;this.reject=E;this.callback=g;this.signal=x;this.abortCallback=c};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,e,Y,Z,t,I,y,n){Y=function(q){function r(){var B=q.apply(this,arguments)||this;B.SCHEDULER_LOG_SLOW_TASKS=!1;B.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return B}k._inheritsLoose(r,q);return r}(Y);e.__decorate([Z.property()],Y.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);e.__decorate([Z.property()],Y.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);Y=e.__decorate([n.subclass("esri.views.support.DebugFlags")],Y);return new Y})},"esri/layers/graphics/sources/csv/csv":function(){define(["exports"],
function(k){function*e(n,q,r){let B=0;for(;B<=n.length;){var w=n.indexOf(q,B);w=n.substring(B,-1<w?w:void 0);B+=w.length+q.length;if(!r||w.trim())yield w}}function Y(n,q){return e(n,q,!1)}function Z(n){let q=0,r;for(r=n.indexOf('"',0);0<=r;)q++,r=n.indexOf('"',r+1);return q}const t=/^\s*"([\S\s]*)"\s*$/,I=/""/g,y=[","," ",";","|","\t"];k.inferDelimiter=function(n){n=n.trim();let q=0,r="";for(const B of y){const w=n.split(B).length;w>q&&(q=w,r=B)}return""===r?null:r};k.parseRows=function*(n,q,r,B=
()=>Object.create(null)){var w="";let E="",g=0,x=B(),c=0;a:for(const h of n){n=Y(h,r);for(const L of n)if(w+=E+L,E="",g+=Z(L),0===g%2){if(0<g)if(w=t.exec(w))x[q[c]]=w[1].replace(I,'"'),c++;else{x=B();c=0;w="";g=0;continue a}else x[q[c]]=w,c++;w="";g=0}else E=r;0===g?(yield x,x=B(),c=0):E="\n"}};k.readRowParts=Y;k.readRows=function(n){const q=n.includes("\r\n")?"\r\n":"\n";return e(n,q,!0)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports",
"../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(k,e,Y,Z,t){const I=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let y=1;k.createCapabilities=function(n,q){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:n},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:q,supportsDelete:q,supportsEditing:q,supportsChangeTracking:!1,
supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:q,supportsExceedsLimitStatistics:!0},query:Z.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:q,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,
supportsUpdateByOthers:!1}}};k.createDefaultAttributesFunction=function(n,q){if(e("esri-csp-restrictions"))return()=>({[q]:null,...n});try{let r=`this.${q} = null;`;for(const w in n){const E=I.test(w)?`.${w}`:`["${w}"]`;r+=`this${E} = ${JSON.stringify(n[w])};`}const B=(new Function(`\n      return class AttributesClass$${y++} {\n        constructor() {\n          ${r};\n        }\n      }\n    `))();return()=>new B}catch(r){return()=>({[q]:null,...n})}};k.createDefaultTemplate=function(n={}){return[{name:"New Feature",
description:"",prototype:{attributes:Y.clone(n)}}]};k.createDrawingInfo=function(n){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===n||"esriGeometryMultipoint"===n?t.defaultPointSymbolJSON:"esriGeometryPolyline"===n?t.defaultPolylineSymbolJSON:t.defaultPolygonSymbolJSON}}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(k){const e=[252,146,31,255],Y={type:"esriSMS",style:"esriSMSCircle",size:6,color:e,outline:{type:"esriSLS",
style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},Z={type:"esriSLS",style:"esriSLSSolid",width:.75,color:e};k.defaultColor=e;k.defaultOutlineColor=[153,153,153,255];k.defaultPointSymbolJSON=Y;k.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};k.defaultPolylineSymbolJSON=Z;k.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},
horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};k.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};k.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};k.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(k,"__esModule",{value:!0})})},"*noref":1}});
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../geometry ../../../../request ../../../../core/Error ../../../../core/Logger ../../../../core/number ../../../../core/promiseUtils ../../../../core/urlUtils ../../../../geometry/projection ../../../../geometry/geometryAdapters/json ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/webMercatorUtils ../../OptimizedFeature ../../OptimizedGeometry ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ../csv/csv ./clientSideDefaults ../../../support/FieldsIndex ../../../support/fieldUtils ../../../../geometry/SpatialReference".split(" "),function(k,
e,Y,Z,t,I,y,n,q,r,B,w,E,g,x,c,h,L,V,z,N,K,F){function M(oa,ma){var da=ma.parsingOptions||{};const la={delimiter:da.delimiter,layerDefinition:null,locationInfo:{latitudeFieldName:da.latitudeField,longitudeFieldName:da.longitudeField}};var qa=V.readRows(oa),wa=qa.next().value;if(!wa)throw new t("csv-layer:empty-csv","CSV is empty",{csv:oa});wa=wa.trim();if(!da.delimiter){oa=V.inferDelimiter(wa);if(!oa)throw new t("csv-layer:invalid-delimiter","Unable to detect the delimiter from CSV");la.delimiter=
oa}wa=wa.split(la.delimiter).filter(Na=>!!Na);const Da=la.layerDefinition={name:q.getFilename(ma.url,aa)||"csv",drawingInfo:R,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:da.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:da.spatialReference||{wkid:102100}}};if(!da.latitudeField||!da.longitudeField){ma=P(wa);if(!da.longitudeField&&!ma.longitudeFieldName||!da.latitudeField&&
!ma.latitudeFieldName)throw new t("csv-layer:location-fields-not-found","Unable to identify latitude and longitude fields from the CSV file");la.locationInfo={longitudeFieldName:da.longitudeField||ma.longitudeFieldName,latitudeFieldName:da.latitudeField||ma.latitudeFieldName}}qa=ca(qa,la.delimiter,wa,la.locationInfo);if(da.fields&&da.fields.length){ma=new Map;for(var La of da.fields)ma.set(La.name.toLowerCase(),La);for(var Fa of qa)if(da=ma.get(Fa.name.toLowerCase()))La=Fa.name,Object.assign(Fa,da),
Fa.name=La}Da.fields=qa;Da.fields.some(Na=>"esriFieldTypeOID"===Na.type?(Da.objectIdField=Na.name,!0):!1)||(Fa={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1},Da.objectIdField=Fa.name,Da.fields.unshift(Fa));Da.timeInfo&&(da=new N(Da.fields),Fa=Da.timeInfo,Fa.startTimeField&&((La=da.get(Fa.startTimeField))?(Fa.startTimeField=La.name,La.type="esriFieldTypeDate"):Fa.startTimeField=null),Fa.endTimeField&&((La=da.get(Fa.endTimeField))?(Fa.endTimeField=La.name,La.type=
"esriFieldTypeDate"):Fa.endTimeField=null),Fa.trackIdField&&(da=da.get(Fa.trackIdField),Fa.trackIdField=da?da.name:null),Fa.startTimeField||Fa.endTimeField||(Da.timeInfo=null));return la}function P(oa){const ma=oa.map(da=>da.toLowerCase());return{longitudeFieldName:oa[ma.indexOf(m.find(da=>ma.includes(da)))],latitudeFieldName:oa[ma.indexOf(d.find(da=>ma.includes(da)))]}}function ca(oa,ma,da,la){const qa=[];ma=V.parseRows(oa,da,ma);oa=[];for(var wa of ma){if(10===oa.length)break;oa.push(wa)}for(const Da of da)if(Da===
la.longitudeFieldName||Da===la.latitudeFieldName)qa.push({name:Da,type:"esriFieldTypeDouble",alias:Da});else{da=oa.map(La=>La[Da]);da=C(da);wa={name:Da,type:null,alias:Da};switch(da){case "integer":wa.type="esriFieldTypeInteger";break;case "double":wa.type="esriFieldTypeDouble";break;case "date":wa.type="esriFieldTypeDate";wa.length=36;break;default:wa.type="esriFieldTypeString",wa.length=255}qa.push(wa)}return qa}function C(oa){if(!oa.length)return"string";const ma=/[^+-.,0-9]/;return oa.map(da=>
{var la=!1;if(""!==da){if(ma.test(da))la=!0;else{la=ka(da);if(!isNaN(la))return/[.,]/.test(da)||!Number.isInteger(la)||214783647<la||-214783648>la?"double":"integer";if(-1===da.indexOf("E"))la=!0;else if(la=Number(da),isNaN(la))if(-1===da.indexOf(","))la=!0;else if(da=da.replace(",","."),la=Number(da),isNaN(la))la=!0;else return"double";else return"double"}return la&&!/^[-]?\d*[.,]?\d*$/.test(da)&&G(new Date(da),da)?"date":"string"}}).reduce((da,la)=>{if(void 0===da||da===la)return la;if("string"===
da||"string"===la)return"string";if("double"===da||"double"===la)return"double"})}function G(oa,ma){if(!oa||"[object Date]"!==Object.prototype.toString.call(oa)||isNaN(oa.getTime()))return!1;oa=!0;if(!W&&/\d+\W*$/.test(ma)&&(ma=ma.match(/[a-zA-Z]{2,}/))){oa=!1;let da=0;for(;!oa&&da<=ma.length;)oa=!O.test(ma[da]),da++;oa=!oa}return oa}const R=z.createDrawingInfo("esriGeometryPoint"),aa=["csv"],H=[0,0];let v=function(oa,ma){this.x=oa;this.y=ma};Y=function(){function oa(){var da=this;this._queryEngine=
null;this._snapshotFeatures=function(){var la=e._asyncToGenerator(function*(qa){qa=yield da._fetch(qa);return da._createFeatures(qa)});return function(qa){return la.apply(this,arguments)}}()}var ma=oa.prototype;ma.destroy=function(){var da;null==(da=this._queryEngine)?void 0:da.destroy();this._queryEngine=null};ma.load=function(){var da=e._asyncToGenerator(function*(la,qa={}){var wa;this.loadOptions=la;[qa]=yield Promise.all([this._fetch(qa.signal),this._checkProjection(null==la?void 0:null==(wa=
la.parsingOptions)?void 0:wa.spatialReference)]);la=M(qa,la);this.locationInfo=la.locationInfo;this.delimiter=la.delimiter;this._queryEngine=this._createQueryEngine(la);wa=yield this._createFeatures(qa);this._queryEngine.featureStore.addMany(wa);la.layerDefinition.extent=this._queryEngine.fullExtent;if(la.layerDefinition.timeInfo){const {start:Da,end:La}=this._queryEngine.timeExtent;la.layerDefinition.timeInfo.timeExtent=[Da,La]}return la});return function(la){return da.apply(this,arguments)}}();
ma.applyEdits=function(){var da=e._asyncToGenerator(function*(){throw new t("csv-layer:editing-not-supported","applyEdits() is not supported on CSVLayer");});return function(){return da.apply(this,arguments)}}();ma.queryFeatures=function(){var da=e._asyncToGenerator(function*(la={},qa={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQuery(la,qa.signal)});return function(){return da.apply(this,arguments)}}();ma.queryFeatureCount=function(){var da=e._asyncToGenerator(function*(la=
{},qa={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(la,qa.signal)});return function(){return da.apply(this,arguments)}}();ma.queryObjectIds=function(){var da=e._asyncToGenerator(function*(la={},qa={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForIds(la,qa.signal)});return function(){return da.apply(this,arguments)}}();ma.queryExtent=function(){var da=e._asyncToGenerator(function*(la={},qa={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(la,
qa.signal)});return function(){return da.apply(this,arguments)}}();ma.querySnapping=function(){var da=e._asyncToGenerator(function*(la,qa={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForSnapping(la,qa.signal)});return function(la){return da.apply(this,arguments)}}();ma.refresh=function(){var da=e._asyncToGenerator(function*(la){var qa;this.loadOptions.customParameters=la;null==(qa=this._snapshotTask)?void 0:qa.abort();this._snapshotTask=n.createTask(this._snapshotFeatures);
this._snapshotTask.promise.then(wa=>{this._queryEngine.featureStore.clear();wa&&this._queryEngine.featureStore.addMany(wa)},wa=>{this._queryEngine.featureStore.clear();n.isAbortError(wa)||I.getLogger("esri.layers.CSVLayer").error(new t("csv-layer:refresh","An error occurred during refresh",{error:wa}))});yield this._waitSnapshotComplete();return{extent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent}});return function(la){return da.apply(this,arguments)}}();ma._waitSnapshotComplete=
function(){var da=e._asyncToGenerator(function*(){if(this._snapshotTask&&!this._snapshotTask.finished){try{yield this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}});return function(){return da.apply(this,arguments)}}();ma._fetch=function(){var da=e._asyncToGenerator(function*(la){const {url:qa,customParameters:wa}=this.loadOptions;if(!qa)throw new t("csv-layer:invalid-source","url not defined");const Da=q.urlToObject(qa);return(yield Z(Da.path,{query:{...Da.query,...wa},responseType:"text",
signal:la})).data});return function(la){return da.apply(this,arguments)}}();ma._createQueryEngine=function(da){const {objectIdField:la,fields:qa,extent:wa,timeInfo:Da}=da.layerDefinition;da=new c({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1});return new L.default({fields:qa,geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,timeInfo:Da,objectIdField:la,spatialReference:wa.spatialReference||{wkid:4326},cacheSpatialQueries:!0,featureStore:da})};ma._createFeatures=function(){var da=e._asyncToGenerator(function*(la){const {latitudeFieldName:qa,
longitudeFieldName:wa}=this.locationInfo,{objectIdField:Da,fieldsIndex:La,spatialReference:Fa}=this._queryEngine;let Na=[];const b=[];var p=La.fields.filter(ha=>ha.name!==Da).map(ha=>ha.name),fa=0;la=V.readRows(la);la.next();const l={};for(var D of La.fields)if("esriFieldTypeOID"!==D.type&&"esriFieldTypeGlobalID"!==D.type){const ha=K.getFieldDefaultValue(D);void 0!==ha&&(l[D.name]=ha)}p=V.parseRows(la,p,this.delimiter,z.createDefaultAttributesFunction(l,Da));for(var S of p)if(p=this._parseCoordinateValue(S[qa]),
D=this._parseCoordinateValue(S[wa]),null!=D&&null!=p&&!isNaN(p)&&!isNaN(D)){S[qa]=p;S[wa]=D;for(var T in S)T!==qa&&T!==wa&&(La.isDateField(T)?(la=new Date(S[T]),S[T]=G(la,S[T])?la.getTime():null):La.isNumericField(T)&&(la=ka(S[T]),isNaN(la)?S[T]=null:S[T]=la));S[Da]=fa;fa++;Na.push(new v(D,p));b.push(S)}if(!w.equals({wkid:4326},Fa))if(w.isWebMercator(Fa))for(const ha of Na)[ha.x,ha.y]=E.lngLatToXY(ha.x,ha.y,H);else Na=r.projectMany(B.jsonAdapter,Na,F.WGS84,Fa,null);fa=[];for(S=0;S<Na.length;S++){const {x:ha,
y:ia}=Na[S];T=b[S];T[Da]=S+1;fa.push(new g.OptimizedFeature(new x([],[ha,ia]),T,null,T[Da]))}return fa});return function(la){return da.apply(this,arguments)}}();ma._parseCoordinateValue=function(da){if(null==da||""===da)return null;let la=ka(da);if(isNaN(la)||181<Math.abs(la))la=parseFloat(da);return la};ma._checkProjection=function(){var da=e._asyncToGenerator(function*(la){try{yield h.checkProjectionSupport(w.WGS84,la)}catch{throw new t("csv-layer:projection-not-supported","Projection not supported");
}});return function(la){return da.apply(this,arguments)}}();return oa}();const d="lat latitude latitude83 latdecdeg lat_dd y ycenter point-y".split(" "),m="lon lng long longitude longitude83 longdecdeg long_dd x xcenter point-x".split(" "),O=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,W=Number.isNaN((new Date("technology 10")).getTime()),ka=function(){const oa=y._parseInfo(),
ma=new RegExp("^"+oa.regexp+"$"),da=new RegExp("["+oa.group+"\\s\\xa0]","g"),la=oa.factor;return function(qa){qa=ma.exec(qa);oa.factor=la;if(!qa)return NaN;let wa=qa[1];if(!qa[1]){if(!qa[2])return NaN;wa=qa[2];oa.factor*=-1}wa=wa.replace(da,"").replace(oa.decimal,".");return+wa*oa.factor}}();k.default=Y;k.inferFieldType=C;k.inferFields=ca;k.inferLocationInfo=P;Object.defineProperty(k,"__esModule",{value:!0})});