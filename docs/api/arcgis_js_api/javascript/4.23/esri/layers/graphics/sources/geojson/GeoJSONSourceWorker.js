// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(g,e,aa,ba,u,K,A,n){function t(m,J){return m?J?4:3:J?3:2}function w(m,J,T,U){if(m){if(T)return J&&U?c:Oa;if(J&&U)return Sa}else if(J&&U)return Oa;return Ta}function H({scale:m,translate:J},T){return Math.round((T-J[0])/m[0])}function S({scale:m,translate:J},
T){return Math.round((J[1]-T)/m[1])}function R({scale:m,translate:J},T){return T*m[0]+J[0]}function h({scale:m,translate:J},T){return J[1]-T*m[1]}function I(m){m=m.coords;return{x:m[0],y:m[1]}}function d(m,J){m.coords[0]=J.x;m.coords[1]=J.y;return m}function l(m){m=m.coords;return{x:m[0],y:m[1],z:m[2]}}function N(m,J){m.coords[0]=J.x;m.coords[1]=J.y;m.coords[2]=J.z;return m}function M(m){m=m.coords;return{x:m[0],y:m[1],m:m[2]}}function v(m,J){m.coords[0]=J.x;m.coords[1]=J.y;m.coords[2]=J.m;return m}
function C(m){m=m.coords;return{x:m[0],y:m[1],z:m[2],m:m[3]}}function y(m,J){m.coords[0]=J.x;m.coords[1]=J.y;m.coords[2]=J.z;m.coords[3]=J.m;return m}function q(m,J){return m&&J?y:m?N:J?v:d}function z(m,J,T,U,ha){T=q(T,U);for(const ea of J){const {geometry:L,attributes:Q}=ea;let da;L&&(da=T(new n,L));m.push(new K.OptimizedFeature(da,Q,null,Q[ha]))}return m}function D(m,J,T,U){for(const ha of J){const {geometry:ea,attributes:L}=ha;let Q;ea&&(Q=Y(ea,T,U));m.push({attributes:L,geometry:Q})}return m}
function Y(m,J,T){if(ba.isNone(m))return null;const U=t(J,T),ha=[];for(let ea=0;ea<m.coords.length;ea+=U){const L=[];for(let Q=0;Q<U;Q++)L.push(m.coords[ea+Q]);ha.push(L)}return J?T?{points:ha,hasZ:J,hasM:T}:{points:ha,hasZ:J}:T?{points:ha,hasM:T}:{points:ha}}function B(m,J,T,U,ha){T=t(T,U);for(const ea of J){J=ea.geometry;U=ea.attributes;let L;J&&(L=F(new n,J,T));m.push(new K.OptimizedFeature(L,U,null,U[ha]))}return m}function F(m,J,T=t(J.hasZ,J.hasM)){m.lengths[0]=J.points.length;const U=m.coords;
let ha=0;for(const ea of J.points)for(J=0;J<T;J++)U[ha++]=ea[J];return m}function P(m,J,T){if(!m)return null;const U=t(J,T),{coords:ha,lengths:ea}=m;m=[];let L=0;for(const Q of ea){const da=[];for(let qa=0;qa<Q;qa++){const ra=[];for(let wa=0;wa<U;wa++)ra.push(ha[L++]);da.push(ra)}m.push(da)}return J?T?{paths:m,hasZ:J,hasM:T}:{paths:m,hasZ:J}:T?{paths:m,hasM:T}:{paths:m}}function W(m,J,T,U,ha){T=t(T,U);for(const ea of J){J=ea.geometry;U=ea.attributes;let L;J&&(L=G(new n,J,T));m.push(new K.OptimizedFeature(L,
U,null,U[ha]))}return m}function G(m,J,T=t(J.hasZ,J.hasM)){const {lengths:U,coords:ha}=m;let ea=0;for(const L of J.paths){for(const Q of L)for(J=0;J<T;J++)ha[ea++]=Q[J];U.push(L.length)}return m}function r(m,J,T){if(!m)return null;const U=t(J,T),{coords:ha,lengths:ea}=m;m=[];let L=0;for(const Q of ea){const da=[];for(let qa=0;qa<Q;qa++){const ra=[];for(let wa=0;wa<U;wa++)ra.push(ha[L++]);da.push(ra)}m.push(da)}return J?T?{rings:m,hasZ:J,hasM:T}:{rings:m,hasZ:J}:T?{rings:m,hasM:T}:{rings:m}}function a(m,
J,T,U,ha){for(const ea of J){J=ea.geometry;const L=ea.centroid,Q=ea.attributes;let da;J&&(da=k(new n,J,T,U));ba.isSome(L)?m.push(new K.OptimizedFeature(da,Q,d(new n,L),Q[ha])):m.push(new K.OptimizedFeature(da,Q,null,Q[ha]))}return m}function k(m,J,T=J.hasZ,U=J.hasM){O(m,J.rings,T,U);return m}function O(m,J,T,U){T=t(T,U);const {lengths:ha,coords:ea}=m;U=0;ha.length=ea.length=0;for(const L of J){for(const Q of L)for(J=0;J<T;J++)ea[U++]=Q[J];ha.push(L.length)}return m}function X(m,J,T,U,ha,ea){m.length=
0;if(!T){for(const L of J)m.push(new K.OptimizedFeature(null,L.attributes,null,L.attributes[ea]));return m}switch(T){case "esriGeometryPoint":return z(m,J,U,ha,ea);case "esriGeometryMultipoint":return B(m,J,U,ha,ea);case "esriGeometryPolyline":return W(m,J,U,ha,ea);case "esriGeometryPolygon":return a(m,J,U,ha,ea);default:Ba.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${T}'`)),m.length=0}return m}function ja(m,J,T,U){m=m&&("coords"in m?m:m.geometry);if(ba.isNone(m))return null;
switch(J){case "esriGeometryPoint":return J=I,T&&U?J=C:T?J=l:U&&(J=M),J(m);case "esriGeometryMultipoint":return Y(m,T,U);case "esriGeometryPolyline":return P(m,T,U);case "esriGeometryPolygon":return r(m,T,U);default:Ba.error("convertToGeometry:unknown-geometry",new e(`Unable to parse unknown geometry type '${J}'`))}}function oa(m,J,T,U,ha){m.length=0;if(ba.isNone(T)){for(const Q of J)m.push({attributes:Q.attributes});return m}switch(T){case "esriGeometryPoint":var ea=I;U&&ha?ea=C:U?ea=l:ha&&(ea=M);
for(var L of J){const {geometry:Q,attributes:da}=L;U=ba.isSome(Q)?ea(Q):null;m.push({attributes:da,geometry:U})}break;case "esriGeometryMultipoint":return D(m,J,U,ha);case "esriGeometryPolyline":for(const Q of J){const {geometry:da,attributes:qa}=Q;let ra;ba.isSome(da)&&(ra=P(da,U,ha));m.push({attributes:qa,geometry:ra})}break;case "esriGeometryPolygon":for(ea of J){const {geometry:Q,attributes:da,centroid:qa}=ea;let ra;ba.isSome(Q)&&(ra=r(Q,U,ha));ba.isSome(qa)?(L=I(qa),m.push({attributes:da,centroid:L,
geometry:ra})):m.push({attributes:da,geometry:ra})}break;default:Ba.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${T}'`))}return m}function ma(m,J,T,U,ha,ea,L=T,Q=U){m.lengths.length&&(m.lengths.length=0);m.coords.length&&(m.coords.length=0);if(ba.isNone(J)||!J.coords.length)return null;ha=Ka[ha];const {coords:da,lengths:qa}=J;J=t(T,U);const ra=t(T&&L,U&&Q);T=w(T,U,L,Q);if(!qa.length)return T(m.coords,da,0,0,H(ea,da[0]),S(ea,da[1])),m.lengths.length&&
(m.lengths.length=0),m.coords.length=J,m;let wa,ya=0,Aa,Ha=0;for(const Ga of qa){if(Ga<ha)continue;let Ea=0;Aa=Ha;Q=U=H(ea,da[ya]);wa=L=S(ea,da[ya+1]);T(m.coords,da,Aa,ya,Q,wa);Ea++;ya+=J;Aa+=ra;for(let Da=1;Da<Ga;Da++,ya+=J)if(Q=H(ea,da[ya]),wa=S(ea,da[ya+1]),Q!==U||wa!==L)T(m.coords,da,Aa,ya,Q-U,wa-L),Aa+=ra,Ea++,U=Q,L=wa;Ea>=ha&&(m.lengths.push(Ea),Ha=Aa)}m.coords.length=Ha;return m.coords.length?m:null}function la(m,J,T,U,ha,ea,L){let Q=U,da=0;for(let ra=ea+T;ra<L;ra+=T){{var qa=J[ra];const wa=
J[ra+1],ya=J[L],Aa=J[L+1];let Ha=J[ea],Ga=J[ea+1],Ea=ya-Ha,Da=Aa-Ga;if(0!==Ea||0!==Da){const Fa=((qa-Ha)*Ea+(wa-Ga)*Da)/(Ea*Ea+Da*Da);1<Fa?(Ha=ya,Ga=Aa):0<Fa&&(Ha+=Ea*Fa,Ga+=Da*Fa)}Ea=qa-Ha;Da=wa-Ga;qa=Ea*Ea+Da*Da}qa>Q&&(da=ra,Q=qa)}Q>U&&(da-ea>T&&la(m,J,T,U,ha,ea,da),ha(m,J,m.length,da,J[da],J[da+1]),L-da>T&&la(m,J,T,U,ha,da,L))}function pa(m,J,T,U,ha){const {coords:ea,lengths:L}=J,Q=T?U?c:Oa:U?Oa:Ta;T=t(T,U);if(!ea.length)return m!==J&&(m.lengths.length=0,m.coords.length=0),m;if(!L.length)return Q(m.coords,
ea,0,0,R(ha,ea[0]),h(ha,ea[1])),m!==J&&(m.lengths.length=0,m.coords.length=T),m;const [da,qa]=ha.scale;U=0;for(let ra=0;ra<L.length;ra++){const wa=L[ra];m.lengths[ra]=wa;let ya=R(ha,ea[U]),Aa=h(ha,ea[U+1]);Q(m.coords,ea,U,U,ya,Aa);U+=T;for(let Ha=1;Ha<wa;Ha++,U+=T)ya+=ea[U]*da,Aa-=ea[U+1]*qa,Q(m.coords,ea,U,U,ya,Aa)}m!==J&&(m.lengths.length=L.length,m.coords.length=ea.length);return m}function va(m,J,T,U){let ha=0,ea=m[U*J],L=m[U*(J+1)];for(let Q=1;Q<T;Q++){const da=ea+m[U*(J+Q)],qa=L+m[U*(J+Q)+1],
ra=(da-ea)*(qa+L);ea=da;L=qa;ha+=ra}return.5*ha}const Ba=aa.getLogger("esri.layers.graphics.featureConversionUtils"),Ka={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Ta=(m,J,T,U,ha,ea)=>{m[T]=ha;m[T+1]=ea},Oa=(m,J,T,U,ha,ea)=>{m[T]=ha;m[T+1]=ea;m[T+2]=J[U+2]},Sa=(m,J,T,U,ha,ea)=>{m[T]=ha;m[T+1]=ea;m[T+2]=J[U+3]},c=(m,J,T,U,ha,ea)=>{m[T]=ha;m[T+1]=ea;m[T+2]=J[U+2];m[T+3]=J[U+3]},p=[],fa=[];g.convertFromFeature=function(m,J,T,U,ha){p[0]=m;[m]=X(fa,p,J,T,
U,ha);p.length=fa.length=0;return m};g.convertFromFeatureSet=function(m,J){const T=new A,{hasM:U,hasZ:ha,features:ea,objectIdFieldName:L,spatialReference:Q,geometryType:da,exceededTransferLimit:qa,transform:ra,fields:wa}=m;wa&&(T.fields=wa);T.geometryType=da;T.objectIdFieldName=L||J;T.spatialReference=Q;if(!T.objectIdFieldName)return Ba.error(new e("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),T;ea&&X(T.features,ea,da,ha,U,T.objectIdFieldName);qa&&(T.exceededTransferLimit=
qa);U&&(T.hasM=U);ha&&(T.hasZ=ha);ra&&(T.transform=ra);return T};g.convertFromFeatures=X;g.convertFromGeometry=function(m,J,T){if(ba.isNone(m))return null;const U=new n;"hasZ"in m&&null==J&&(J=m.hasZ);"hasM"in m&&null==T&&(T=m.hasM);if(u.isPoint(m))return q(null!=J?J:null!=m.z,null!=T?T:null!=m.m)(U,m);if(u.isPolygon(m))return k(U,m,J,T);if(u.isPolyline(m))return G(U,m,t(J,T));if(u.isMultipoint(m))return F(U,m,t(J,T));Ba.error("convertFromGeometry:unknown-geometry",new e(`Unable to parse unknown geometry type '${m}'`))};
g.convertFromGraphics=function(m,J,T,U,ha,ea){const L=m.length;switch(T){case "esriGeometryPoint":z(m,J,U,ha,ea);break;case "esriGeometryMultipoint":B(m,J,U,ha,ea);break;case "esriGeometryPolyline":W(m,J,U,ha,ea);break;case "esriGeometryPolygon":a(m,J,U,ha,ea);break;default:Ba.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${T}'`))}for(U=0;U<J.length;U++)m[U+L].geometryType=T,m[U+L].insertAfter=J[U].insertAfter,m[U+L].groupId=J[U].groupId;return m};g.convertFromMultipoint=
F;g.convertFromMultipointFeatures=B;g.convertFromNestedArray=O;g.convertFromPoint=function(m,J,T=q(null!=J.z,null!=J.m)){return T(m,J)};g.convertFromPointFeatures=z;g.convertFromPolygon=k;g.convertFromPolyline=G;g.convertFromPolylineFeatures=W;g.convertToFeature=function(m,J,T,U){fa[0]=m;oa(p,fa,J,T,U);m=p[0];p.length=fa.length=0;return m};g.convertToFeatureSet=function(m){const {objectIdFieldName:J,spatialReference:T,transform:U,fields:ha,hasM:ea,hasZ:L,features:Q,geometryType:da,exceededTransferLimit:qa,
uniqueIdField:ra,queryGeometry:wa,queryGeometryType:ya}=m;m=oa([],Q,da,L,ea);const Aa=ja(wa,ya,!1,!1);m={features:m,fields:ha,geometryType:da,objectIdFieldName:J,spatialReference:T,uniqueIdField:ra,queryGeometry:Aa};U&&(m.transform=U);qa&&(m.exceededTransferLimit=qa);ea&&(m.hasM=ea);L&&(m.hasZ=L);return m};g.convertToFeatures=oa;g.convertToGeometry=ja;g.convertToMultipoint=Y;g.convertToMultipointFeatures=D;g.convertToPoint=function(m,J,T){return m?J?T?C(m):l(m):T?M(m):I(m):null};g.convertToPolygon=
r;g.convertToPolyline=P;g.deltaDecodeGeometry=function(m,J){if(ba.isNone(m))return null;const T=m.clone(),U=m.coords;m=m.lengths;let ha=0;for(let Q=0;Q<m.length;Q++){const da=m[Q];var ea=U[J*ha],L=U[J*ha+1];for(let qa=1;qa<da;qa++)ea+=U[J*(ha+qa)],L+=U[J*(ha+qa)+1],T.coords[J*(ha+qa)]=ea,T.coords[J*(ha+qa)+1]=L;ha+=da}return T};g.deltaEncodeGeometry=function(m,J){const T=m.clone(),U=m.coords;m=m.lengths;let ha=0;for(let L=0;L<m.length;L++){const Q=m[L];let da=U[J*ha];var ea=U[J*ha+1];for(let qa=1;qa<
Q;qa++){const ra=U[J*(ha+qa)],wa=U[J*(ha+qa)+1];ea=wa-ea;T.coords[J*(ha+qa)]=ra-da;T.coords[J*(ha+qa)+1]=ea;da=ra;ea=wa}ha+=Q}return T};g.generalizeOptimizedGeometry=function(m,J,T,U,ha,ea,L=T,Q=U){m.lengths.length&&(m.lengths.length=0);m.coords.length&&(m.coords.length=0);if(!J||!J.coords.length)return null;ha=Ka[ha];const {coords:da,lengths:qa}=J;J=t(T,U);const ra=t(T&&L,U&&Q);T=w(T,U,L,Q);if(!qa.length)return T(m.coords,da,0,0,da[0],da[1]),m.lengths.length&&(m.lengths.length=0),m.coords.length=
J,m;U=0;ea*=ea;for(const wa of qa){if(wa<ha){U+=wa*J;continue}L=m.coords.length/ra;Q=U;const ya=U+(wa-1)*J;T(m.coords,da,m.coords.length,Q,da[Q],da[Q+1]);la(m.coords,da,J,ea,T,Q,ya);T(m.coords,da,m.coords.length,ya,da[ya],da[ya+1]);Q=m.coords.length/ra-L;Q>=ha?m.lengths.push(Q):m.coords.length=L*ra;U+=wa*J}return m.coords.length?m:null};g.getBoundsOptimizedGeometry=function(m,J,T,U){if(ba.isNone(J)||!J.coords||!J.coords.length)return null;T=t(T,U);let ha=U=Number.POSITIVE_INFINITY,ea=Number.NEGATIVE_INFINITY,
L=Number.NEGATIVE_INFINITY;if(J&&J.coords){J=J.coords;for(let Q=0;Q<J.length;Q+=T){const da=J[Q],qa=J[Q+1];U=Math.min(U,da);ea=Math.max(ea,da);ha=Math.min(ha,qa);L=Math.max(L,qa)}}m[0]=U;m[1]=ha;m[2]=ea;m[3]=L;return m};g.getQuantizedArea=function(m,J){const {coords:T,lengths:U}=m;let ha=m=0;for(let ea=0;ea<U.length;ea++)ha+=va(T,m,U[ea],J),m+=ea;return Math.abs(ha)};g.getQuantizedBoundsOptimizedGeometry=function(m,J,T,U){T=t(T,U);const {lengths:ha,coords:ea}=J;U=J=Number.POSITIVE_INFINITY;let L=
Number.NEGATIVE_INFINITY,Q=Number.NEGATIVE_INFINITY,da=0;for(const qa of ha){let ra=ea[da],wa=ea[da+1];J=Math.min(ra,J);U=Math.min(wa,U);L=Math.max(ra,L);Q=Math.max(wa,Q);da+=T;for(let ya=1;ya<qa;ya++,da+=T){const Aa=ea[da],Ha=ea[da+1];ra+=Aa;wa+=Ha;0>Aa&&(J=Math.min(J,ra));0<Aa&&(L=Math.max(L,ra));0>Ha?U=Math.min(U,wa):0<Ha&&(Q=Math.max(Q,wa))}}m[0]=J;m[1]=U;m[2]=L;m[3]=Q;return m};g.getSignedQuantizedRingArea=va;g.quantizeOptimizedFeatureSet=function(m,J){const {geometryType:T,features:U,hasM:ha,
hasZ:ea}=J;if(!m)return J;for(let L=0;L<U.length;L++){const Q=U[L],da=Q.weakClone();da.geometry=new n;ma(da.geometry,Q.geometry,ha,ea,T,m);Q.centroid&&(da.centroid=new n,ma(da.centroid,Q.centroid,ha,ea,"esriGeometryPoint",m));U[L]=da}J.transform=m;return J};g.quantizeOptimizedGeometry=ma;g.quantizeX=H;g.quantizeY=S;g.removeCollinearVectices=function(m,J,T,U,ha){if(!J||!J.coords||!J.coords.length)return null;T=Ka[T];const {coords:ea,lengths:L}=J;J=w(U,ha,U,ha);U=t(U,ha);let Q=ha=0,da=0,qa=0;for(const ya of L){Q=
qa;J(m.coords,ea,Q,ha,ea[ha],ea[ha+1]);ha+=U;var ra=ea[ha];let Aa=ea[ha+1],Ha=ra,Ga=Aa;var wa=Aa/ra;Q+=U;J(m.coords,ea,Q,ha,Ha,Ga);ha+=U;for(let Ea=2;Ea<ya;Ea++){ra=ea[ha];Aa=ea[ha+1];const Da=Aa/ra,Fa=wa===Da||!isFinite(wa)&&!isFinite(Da);wa=Fa&&isFinite(Da)?0<=wa&&0<=Da||0>=wa&&0>=Da:0<=Ga&&0<=Aa||0>=Ga&&0>=Aa;Fa&&wa?(Ha+=ra,Ga+=Aa):(Ha=ra,Ga=Aa,Q+=U);J(m.coords,ea,Q,ha,Ha,Ga);ha+=U;wa=Da}Q+=U;ra=(Q-qa)/U;ra>=T&&(m.lengths[da]=ra,qa=Q,da++)}m.coords.length>qa&&(m.coords.length=qa);m.lengths.length>
da&&(m.lengths.length=da);return m.coords.length&&m.lengths.length?m:null};g.removeZMValues=function(m,J,T,U,ha,ea){const L=t(T,U);T=w(T,U,ha,ea);U=J.coords;m.coords.length=0;m.lengths.length=0;m.lengths.push(...J.lengths);for(J=0;J<U.length;J+=L)T(m.coords,U,m.coords.length,J,U[J],U[J+1]);return m};g.unquantizeOptimizedFeatureSet=function(m){const {transform:J,features:T,hasM:U,hasZ:ha}=m;if(!J)return m;for(const ea of T)ba.isSome(ea.geometry)&&pa(ea.geometry,ea.geometry,U,ha,J),ba.isSome(ea.centroid)&&
pa(ea.centroid,ea.centroid,U,ha,J);m.transform=null;return m};g.unquantizeOptimizedGeometry=pa;g.unquantizeX=R;g.unquantizeY=h;Object.defineProperty(g,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(g,e,aa){let ba=function(){function K(A=null,n={},t,w){this.geometry=A;this.attributes=n;this.centroid=t;this.objectId=w;this.geohashY=this.geohashX=this.displayId=0}K.prototype.weakClone=
function(){const A=new K(this.geometry,this.attributes,this.centroid,this.objectId);A.displayId=this.displayId;A.geohashX=this.geohashX;A.geohashY=this.geohashY;return A};return K}(),u=function(K){function A(){return K.apply(this,arguments)||this}e._inheritsLoose(A,K);return A}(ba);g.OptimizedFeature=ba;g.OptimizedFeatureWithGeometry=u;g.hasGeometry=function(K){return!(aa.isNone(K.geometry)||!K.geometry.coords||!K.geometry.coords.length)};Object.defineProperty(g,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function g(){this.spatialReference=
this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}g.prototype.weakClone=function(){const e=new g;e.objectIdFieldName=this.objectIdFieldName;e.globalIdFieldName=this.globalIdFieldName;e.geohashFieldName=this.geohashFieldName;e.geometryProperties=this.geometryProperties;
e.geometryType=this.geometryType;e.spatialReference=this.spatialReference;e.hasZ=this.hasZ;e.hasM=this.hasM;e.features=this.features;e.fields=this.fields;e.transform=this.transform;e.exceededTransferLimit=this.exceededTransferLimit;e.uniqueIdField=this.uniqueIdField;e.queryGeometry=this.queryGeometry;e.queryGeometryType=this.queryGeometryType;return e};return g}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(g){return function(){function e(ba=
[],u=[],K=!1){this.lengths=null!=ba?ba:[];this.coords=null!=u?u:[];this.hasIndeterminateRingOrder=K}var aa=e.prototype;aa.forEachVertex=function(ba){let u=0;this.lengths.length||ba(this.coords[0],this.coords[1]);for(let K=0;K<this.lengths.length;K++){const A=this.lengths[K];for(let n=0;n<A;n++)ba(this.coords[2*(n+u)],this.coords[2*(n+u)+1]);u+=A}};aa.clone=function(ba){return ba?(ba.set(this.coords),new e(this.lengths.slice(),ba,this.hasIndeterminateRingOrder)):new e(this.lengths.slice(),this.coords.slice(),
this.hasIndeterminateRingOrder)};g._createClass(e,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((ba,u)=>ba+u)}}]);return e}()})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),
function(g,e,aa,ba,u,K,A,n,t,w){return function(){function H(R){this.geometryInfo=R;this._boundsStore=new t.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new aa;this.featureAdapter=w.optimizedFeatureQueryEngineAdapter}var S=H.prototype;S.add=function(R){this._add(R);this._emitChanged()};S.addMany=function(R){for(const h of R)this._add(h);this._emitChanged()};S.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};S.removeById=function(R){R=
this._featuresById.get(R);if(!R)return null;this._remove(R);this._emitChanged();return R};S.removeManyById=function(R){this._boundsStore.invalidateIndex();for(const h of R)(R=this._featuresById.get(h))&&this._remove(R);this._emitChanged()};S.forEachBounds=function(R,h,I){for(const d of R)(R=this._boundsStore.get(d.objectId))&&h(K.fromRect(I,R))};S.getFeature=function(R){return this._featuresById.get(R)};S.has=function(R){return this._featuresById.has(R)};S.forEach=function(R){this._featuresById.forEach(h=>
R(h))};S.forEachInBounds=function(R,h){this._boundsStore.forEachInBounds(R,I=>{h(this._featuresById.get(I))})};S.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};S.sweep=function(){let R=!1;this._featuresById.forEach((h,I)=>{this._markedIds.has(I)||(R=!0,this._remove(h))});this._markedIds.clear();R&&this._emitChanged()};S._emitChanged=function(){this.events.emit("changed",void 0)};S._add=function(R){if(R){var h=R.objectId;if(null==h)ba.getLogger("esri.layers.graphics.data.FeatureStore").error(new e("featurestore:invalid-feature",
"feature id is missing",{feature:R}));else{var I=this._featuresById.get(h);this._markedIds.add(h);if(I){R.displayId=I.displayId;var d=this._boundsStore.get(h);this._boundsStore.delete(h)}else if(u.isSome(this.onFeatureAdd))this.onFeatureAdd(R);!u.isNone(R.geometry)&&R.geometry.coords&&R.geometry.coords.length?(d=n.getBoundsOptimizedGeometry(u.isSome(d)?d:A.create(),R.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),u.isSome(d)&&this._boundsStore.set(h,d)):this._boundsStore.set(h,null);this._featuresById.set(h,
R)}}};S._remove=function(R){if(u.isSome(this.onFeatureRemove))this.onFeatureRemove(R);this._markedIds.delete(R.objectId);this._boundsStore.delete(R.objectId);this._featuresById.delete(R.objectId);return R};g._createClass(H,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",
get:function(){if(!this.numFeatures)return null;const R=A.create(A.NEGATIVE_INFINITY);this._featuresById.forEach(h=>{if(h=this._boundsStore.get(h.objectId))R[0]=Math.min(h[0],R[0]),R[1]=Math.min(h[1],R[1]),R[2]=Math.max(h[2],R[2]),R[3]=Math.max(h[3],R[3])});return R}},{key:"storeStatistics",get:function(){let R=0;this._featuresById.forEach(h=>{u.isSome(h.geometry)&&h.geometry.coords&&(R+=h.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:R/(this.hasZ?this.hasM?4:3:
this.hasM?3:2)}}}]);return H}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(g,e,aa,ba,u){let K=function(){function A(){this._emitter=new A.EventEmitter(this)}var n=A.prototype;n.emit=function(t,w){return this._emitter.emit(t,w)};n.on=function(t,w){return this._emitter.on(t,w)};n.once=function(t,w){return this._emitter.once(t,w)};n.hasEventListener=function(t){return this._emitter.hasEventListener(t)};
return A}();(function(A){let n=function(){function w(S=null){this.target=S;this._listenersMap=null}var H=w.prototype;H.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};H.emit=function(S,R){S=this._listenersMap&&this._listenersMap.get(S);if(!S)return!1;const h=this.target||this;[...S].forEach(I=>{I.call(h,R)});return 0<S.length};H.on=function(S,R){if(Array.isArray(S)){var h=S.map(I=>this.on(I,R));return ba.handlesGroup(h)}if(-1<S.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);h=this._listenersMap.get(S)||[];h.push(R);this._listenersMap.set(S,h);return{remove:()=>{const I=this._listenersMap&&this._listenersMap.get(S)||[],d=I.indexOf(R);0<=d&&I.splice(d,1)}}};H.once=function(S,R){const h=this.on(S,I=>{h.remove();R.call(null,I)});return h};H.hasEventListener=function(S){S=this._listenersMap&&this._listenersMap.get(S);return null!=S&&0<S.length};return w}();A.EventEmitter=n;A.EventedMixin=w=>{w=function(H){function S(){var h=
H.apply(this,arguments)||this;h._emitter=new n;return h}g._inheritsLoose(S,H);var R=S.prototype;R.destroy=function(){this._emitter.clear()};R.emit=function(h,I){return this._emitter.emit(h,I)};R.on=function(h,I){return this._emitter.on(h,I)};R.once=function(h,I){return this._emitter.once(h,I)};R.hasEventListener=function(h){return this._emitter.hasEventListener(h)};return S}(w);return w=e.__decorate([u.subclass("esri.core.Evented")],w)};let t=function(w){function H(){var R=w.apply(this,arguments)||
this;R._emitter=new K.EventEmitter(g._assertThisInitialized(R));return R}g._inheritsLoose(H,w);var S=H.prototype;S.destroy=function(){this._emitter.clear()};S.emit=function(R,h){return this._emitter.emit(R,h)};S.on=function(R,h){return this._emitter.on(R,h)};S.once=function(R,h){return this._emitter.once(R,h)};S.hasEventListener=function(R){return this._emitter.hasEventListener(R)};return H}(aa);t=e.__decorate([u.subclass("esri.core.Evented")],t);A.EventedAccessor=t})(K||(K={}));return K})},"esri/geometry/support/aaBoundingBox":function(){define(["exports",
"../../core/maybe","../Extent","./aaBoundingRect"],function(g,e,aa,ba){function u(d=h){return[d[0],d[1],d[2],d[3],d[4],d[5]]}function K(d,l,N,M,v,C,y=u()){y[0]=d;y[1]=l;y[2]=N;y[3]=M;y[4]=v;y[5]=C;return y}function A(d){return d[0]>=d[3]?0:d[3]-d[0]}function n(d){return d[1]>=d[4]?0:d[4]-d[1]}function t(d){return d[2]>=d[5]?0:d[5]-d[2]}function w(d,l){return Math.max(l[0],d[0])<=Math.min(l[3],d[3])&&Math.max(l[1],d[1])<=Math.min(l[4],d[4])&&Math.max(l[2],d[2])<=Math.min(l[5],d[5])}function H(d,l){d[0]=
l[0];d[1]=l[1];d[2]=l[2];d[3]=l[3];d[4]=l[4];d[5]=l[5];return d}function S(d){return 6===d.length}const R=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],h=[0,0,0,0,0,0],I=u();g.NEGATIVE_INFINITY=R;g.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];g.ZERO=h;g.allFinite=function(d){for(let l=0;6>l;l++)if(!isFinite(d[l]))return!1;return!0};g.center=function(d,l=[0,0,0]){l[0]=d[0]+A(d)/2;l[1]=d[1]+n(d)/2;l[2]=d[2]+t(d)/2;return l};g.contains=function(d,l){return l[0]>=
d[0]&&l[1]>=d[1]&&l[2]>=d[2]&&l[3]<=d[3]&&l[4]<=d[4]&&l[5]<=d[5]};g.containsPoint=function(d,l){return l[0]>=d[0]&&l[1]>=d[1]&&l[2]>=d[2]&&l[0]<=d[3]&&l[1]<=d[4]&&l[2]<=d[5]};g.containsPointWithMargin=function(d,l,N){return l[0]>=d[0]-N&&l[1]>=d[1]-N&&l[2]>=d[2]-N&&l[0]<=d[3]+N&&l[1]<=d[4]+N&&l[2]<=d[5]+N};g.create=u;g.depth=n;g.diameter=function(d){const l=A(d),N=t(d);d=n(d);return Math.sqrt(l*l+N*N+d*d)};g.empty=function(d){return d?H(d,R):u(R)};g.equals=function(d,l,N){if(e.isNone(d)||e.isNone(l))return d===
l;if(!S(d)||!S(l))return!1;if(N)for(let M=0;M<d.length;M++){if(!N(d[M],l[M]))return!1}else for(N=0;N<d.length;N++)if(d[N]!==l[N])return!1;return!0};g.expandWithAABB=function(d,l){d[0]=Math.min(d[0],l[0]);d[1]=Math.min(d[1],l[1]);d[2]=Math.min(d[2],l[2]);d[3]=Math.max(d[3],l[3]);d[4]=Math.max(d[4],l[4]);d[5]=Math.max(d[5],l[5])};g.expandWithBuffer=function(d,l,N=0,M=l.length/3){let v=d[0],C=d[1],y=d[2],q=d[3],z=d[4],D=d[5];for(let Y=0;Y<M;Y++)v=Math.min(v,l[N+3*Y]),C=Math.min(C,l[N+3*Y+1]),y=Math.min(y,
l[N+3*Y+2]),q=Math.max(q,l[N+3*Y]),z=Math.max(z,l[N+3*Y+1]),D=Math.max(D,l[N+3*Y+2]);d[0]=v;d[1]=C;d[2]=y;d[3]=q;d[4]=z;d[5]=D};g.expandWithNestedArray=function(d,l,N){const M=l.length;let v=d[0],C=d[1],y=d[2],q=d[3],z=d[4],D=d[5];if(N)for(N=0;N<M;N++){var Y=l[N];v=Math.min(v,Y[0]);C=Math.min(C,Y[1]);y=Math.min(y,Y[2]);q=Math.max(q,Y[0]);z=Math.max(z,Y[1]);D=Math.max(D,Y[2])}else for(N=0;N<M;N++)Y=l[N],v=Math.min(v,Y[0]),C=Math.min(C,Y[1]),q=Math.max(q,Y[0]),z=Math.max(z,Y[1]);d[0]=v;d[1]=C;d[2]=
y;d[3]=q;d[4]=z;d[5]=D};g.expandWithOffset=function(d,l,N,M){d[0]=Math.min(d[0],d[0]+l);d[3]=Math.max(d[3],d[3]+l);d[1]=Math.min(d[1],d[1]+N);d[4]=Math.max(d[4],d[4]+N);d[2]=Math.min(d[2],d[2]+M);d[5]=Math.max(d[5],d[5]+M)};g.expandWithRect=function(d,l){d[0]=Math.min(d[0],l[0]);d[1]=Math.min(d[1],l[1]);d[3]=Math.max(d[3],l[2]);d[4]=Math.max(d[4],l[3])};g.expandWithVec3=function(d,l){d[0]=Math.min(d[0],l[0]);d[1]=Math.min(d[1],l[1]);d[2]=Math.min(d[2],l[2]);d[3]=Math.max(d[3],l[0]);d[4]=Math.max(d[4],
l[1]);d[5]=Math.max(d[5],l[2])};g.fromExtent=function(d,l=u()){l[0]=d.xmin;l[1]=d.ymin;l[2]=d.zmin;l[3]=d.xmax;l[4]=d.ymax;l[5]=d.zmax;return l};g.fromMinMax=function(d,l,N=u()){N[0]=d[0];N[1]=d[1];N[2]=d[2];N[3]=l[0];N[4]=l[1];N[5]=l[2];return N};g.fromRect=function(d,l){d[0]=l[0];d[1]=l[1];d[2]=Number.NEGATIVE_INFINITY;d[3]=l[2];d[4]=l[3];d[5]=Number.POSITIVE_INFINITY;return d};g.fromValues=K;g.getMax=function(d,l){l[0]=d[3];l[1]=d[4];l[2]=d[5];return l};g.getMin=function(d,l){l[0]=d[0];l[1]=d[1];
l[2]=d[2];return l};g.height=t;g.intersects=w;g.intersectsClippingArea=function(d,l){return e.isNone(l)?!0:w(d,l)};g.is=S;g.isPoint=function(d){return 0===A(d)&&0===n(d)&&0===t(d)};g.maximumDimension=function(d){return Math.max(A(d),t(d),n(d))};g.offset=function(d,l,N,M,v=d){v[0]=d[0]+l;v[1]=d[1]+N;v[2]=d[2]+M;v[3]=d[3]+l;v[4]=d[4]+N;v[5]=d[5]+M;return v};g.scale=function(d,l,N=d){const M=d[0]+A(d)/2,v=d[1]+n(d)/2,C=d[2]+t(d)/2;N[0]=M+(d[0]-M)*l;N[1]=v+(d[1]-v)*l;N[2]=C+(d[2]-C)*l;N[3]=M+(d[3]-M)*
l;N[4]=v+(d[4]-v)*l;N[5]=C+(d[5]-C)*l;return N};g.set=H;g.setMax=function(d,l,N=d){N[3]=l[0];N[4]=l[1];N[5]=l[2];N!==d&&(N[0]=d[0],N[1]=d[1],N[2]=d[2]);return d};g.setMin=function(d,l,N=d){N[0]=l[0];N[1]=l[1];N[2]=l[2];N!==d&&(N[3]=d[3],N[4]=d[4],N[5]=d[5]);return N};g.size=function(d,l=[0,0,0]){l[0]=A(d);l[1]=n(d);l[2]=t(d);return l};g.toExtent=function(d,l){return isFinite(d[2])||isFinite(d[5])?new aa({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],zmin:d[2],zmax:d[5],spatialReference:l}):new aa({xmin:d[0],
xmax:d[3],ymin:d[1],ymax:d[4],spatialReference:l})};g.toRect=function(d,l){l||(l=ba.create());l[0]=d[0];l[1]=d[1];l[2]=d[3];l[3]=d[4];return l};g.width=A;g.wrap=function(d,l,N,M,v,C){return K(d,l,N,M,v,C,I)};Object.defineProperty(g,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(g,e,aa,ba,u){function K(h=R){return[h[0],h[1],h[2],h[3]]}function A(h,I){h!==I&&(h[0]=I[0],h[1]=
I[1],h[2]=I[2],h[3]=I[3]);return h}function n(h){return ba.isNone(h)||h[0]>=h[2]?0:h[2]-h[0]}function t(h){return h[1]>=h[3]?0:h[3]-h[1]}function w(h,I,d){return I>=h[0]&&d>=h[1]&&I<=h[2]&&d<=h[3]}function H(h){return null!=h&&4===h.length}const S=[Infinity,Infinity,-Infinity,-Infinity],R=[0,0,0,0];g.NEGATIVE_INFINITY=S;g.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];g.UNIT=[0,0,1,1];g.ZERO=R;g.allFinite=function(h){for(let I=0;4>I;I++)if(!isFinite(h[I]))return!1;return!0};g.area=function(h){return n(h)*
t(h)};g.center=function(h,I=[0,0]){I[0]=(h[0]+h[2])/2;I[1]=(h[1]+h[3])/2;return I};g.clone=function(h){return[h[0],h[1],h[2],h[3]]};g.contains=function(h,I){return I[0]>=h[0]&&I[2]<=h[2]&&I[1]>=h[1]&&I[3]<=h[3]};g.containsPoint=function(h,I){return w(h,I[0],I[1])};g.containsPointObject=function(h,I){return w(h,I.x,I.y)};g.containsPointWithMargin=function(h,I,d){return I[0]>=h[0]-d&&I[1]>=h[1]-d&&I[0]<=h[2]+d&&I[1]<=h[3]+d};g.containsXY=w;g.copy=A;g.create=K;g.distance=function(h,I){const d=(h[1]+
h[3])/2,l=Math.max(Math.abs(I[0]-(h[0]+h[2])/2)-n(h)/2,0);h=Math.max(Math.abs(I[1]-d)-t(h)/2,0);return Math.sqrt(l*l+h*h)};g.empty=function(h){return h?A(h,S):K(S)};g.equals=function(h,I){return H(h)&&H(I)?h[0]===I[0]&&h[1]===I[1]&&h[2]===I[2]&&h[3]===I[3]:h===I};g.expand=function(h,I,d){if(ba.isNone(I))A(d,h);else if("length"in I)if(H(I))d[0]=Math.min(h[0],I[0]),d[1]=Math.min(h[1],I[1]),d[2]=Math.max(h[2],I[2]),d[3]=Math.max(h[3],I[3]);else{if(2===I.length||3===I.length)d[0]=Math.min(h[0],I[0]),
d[1]=Math.min(h[1],I[1]),d[2]=Math.max(h[2],I[0]),d[3]=Math.max(h[3],I[1])}else switch(I.type){case "extent":d[0]=Math.min(h[0],I.xmin);d[1]=Math.min(h[1],I.ymin);d[2]=Math.max(h[2],I.xmax);d[3]=Math.max(h[3],I.ymax);break;case "point":d[0]=Math.min(h[0],I.x),d[1]=Math.min(h[1],I.y),d[2]=Math.max(h[2],I.x),d[3]=Math.max(h[3],I.y)}};g.expandPointInPlace=function(h,I){I[0]<h[0]&&(h[0]=I[0]);I[0]>h[2]&&(h[2]=I[0]);I[1]<h[1]&&(h[1]=I[1]);I[1]>h[3]&&(h[3]=I[1])};g.expandWithNestedArray=function(h,I,d=
h){const l=I.length;let N=h[0],M=h[1],v=h[2];h=h[3];for(let C=0;C<l;C++){const y=I[C];N=Math.min(N,y[0]);M=Math.min(M,y[1]);v=Math.max(v,y[0]);h=Math.max(h,y[1])}d[0]=N;d[1]=M;d[2]=v;d[3]=h;return d};g.fromExtent=function(h,I=K()){I[0]=h.xmin;I[1]=h.ymin;I[2]=h.xmax;I[3]=h.ymax;return I};g.fromValues=function(h,I,d,l,N=K()){N[0]=h;N[1]=I;N[2]=d;N[3]=l;return N};g.height=t;g.intersection=function(h,I,d){if(ba.isNone(I))return A(d,h);const l=I[0],N=I[1],M=I[2];I=I[3];d[0]=aa.clamp(h[0],l,M);d[1]=aa.clamp(h[1],
N,I);d[2]=aa.clamp(h[2],l,M);d[3]=aa.clamp(h[3],N,I);return d};g.intersects=function(h,I){return Math.max(I[0],h[0])<=Math.min(I[2],h[2])&&Math.max(I[1],h[1])<=Math.min(I[3],h[3])};g.intersectsSegment=function(h,I,d){const l=h[0],N=h[1],M=h[2];h=h[3];const {x:v,y:C}=I,{x:y,y:q}=d;var z=(Y,B)=>0>(q-C)*Y+(v-y)*B+(y*C-v*q);I=z(l,h);d=z(M,h);const D=z(M,N);z=z(l,N);return I===d&&d===D&&D===z&&z===I||v<l&&y<l||v>M&&y>M||C>h&&q>h||C<N&&q<N?!1:!0};g.intersectsSphere=function(h,I){const d=I[3];var l=Math.abs(I[0]-
.5*(h[0]+h[2]));const N=.5*(h[2]-h[0]);if(l>d+N)return!1;var M=.5*(h[3]-h[1]);h=Math.abs(I[1]-.5*(h[1]+h[3]));if(h>d+M)return!1;if(l<N||h<M)return!0;l-=N;M=h-M;return l*l+M*M<=d*d};g.is=H;g.isPoint=function(h){return(0===n(h)||!isFinite(h[0]))&&(0===t(h)||!isFinite(h[1]))};g.offset=function(h,I,d,l=h){l[0]=h[0]+I;l[1]=h[1]+d;l[2]=h[2]+I;l[3]=h[3]+d;return l};g.pad=function(h,I,d=h){d[0]=h[0]-I;d[1]=h[1]-I;d[2]=h[2]+I;d[3]=h[3]+I;return d};g.setMax=function(h,I,d=h){d[2]=I[0];d[3]=I[1];d!==h&&(d[0]=
h[0],d[1]=h[1]);return h};g.setMin=function(h,I,d=h){d[0]=I[0];d[1]=I[1];d!==h&&(d[2]=h[2],d[3]=h[3]);return d};g.size=function(h,I){I[0]=h[2]-h[0];I[1]=h[3]-h[1]};g.toExtent=function(h,I){return new u({xmin:h[0],ymin:h[1],xmax:h[2],ymax:h[3],spatialReference:I})};g.width=n;Object.defineProperty(g,"__esModule",{value:!0})})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../core/libs/rbush/PooledRBush"],function(g,e,aa){function ba(A,n,t){u.minX=n[0];
u.minY=n[1];u.maxX=n[2];u.maxY=n[3];A.search(u,t)}const u={minX:0,minY:0,maxX:0,maxY:0};let K=function(){function A(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new aa.PooledRBush(9,e("esri-csp-restrictions")?t=>({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const t=Array(this._idByBounds.size);let w=0;this._idByBounds.forEach((H,S)=>{t[w++]=S});this._indexInvalid=!1;
this._index.clear();this._index.load(t)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(t=>this._idByBounds.has(t))),this._boundsToLoad.length=0)}}var n=A.prototype;n.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};n.delete=function(t){const w=this._boundsById.get(t);this._boundsById.delete(t);w&&(this._idByBounds.delete(w),this._indexInvalid||this._index.remove(w))};n.forEachInBounds=
function(t,w){this._loadIndex();ba(this._index,t,H=>w(this._idByBounds.get(H)))};n.get=function(t){return this._boundsById.get(t)};n.has=function(t){return this._boundsById.has(t)};n.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};n.set=function(t,w){if(!this._indexInvalid){const H=this._boundsById.get(t);H&&(this._index.remove(H),this._idByBounds.delete(H))}this._boundsById.set(t,w);w&&(this._idByBounds.set(w,t),this._indexInvalid||(this._boundsToLoad.push(w),
5E4<this._boundsToLoad.length&&this._loadIndex()))};return A}();g.BoundsStore=K;Object.defineProperty(g,"__esModule",{value:!0})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(g,e,aa,ba,u,K){function A(D,Y){n(D,0,D.children.length,Y,D)}function n(D,Y,B,F,P){P||(P=new q([]));P.minX=Infinity;P.minY=Infinity;P.maxX=-Infinity;P.maxY=-Infinity;for(let W=
Y,G;W<B;W++)G=D.children[W],t(P,D.leaf?F(G):G);return P}function t(D,Y){D.minX=Math.min(D.minX,Y.minX);D.minY=Math.min(D.minY,Y.minY);D.maxX=Math.max(D.maxX,Y.maxX);D.maxY=Math.max(D.maxY,Y.maxY)}function w(D,Y){return D.minX-Y.minX}function H(D,Y){return D.minY-Y.minY}function S(D){return(D.maxX-D.minX)*(D.maxY-D.minY)}function R(D){return D.maxX-D.minX+(D.maxY-D.minY)}function h(D,Y){return D.minX<=Y.minX&&D.minY<=Y.minY&&Y.maxX<=D.maxX&&Y.maxY<=D.maxY}function I(D,Y){return Y.minX<=D.maxX&&Y.minY<=
D.maxY&&Y.maxX>=D.minX&&Y.maxY>=D.minY}function d(D,Y,B,F,P){for(Y=[Y,B];Y.length;){B=ba.assumeNonNull(Y.pop());const W=ba.assumeNonNull(Y.pop());if(B-W<=F)continue;const G=W+Math.ceil((B-W)/F/2)*F;K.quickselect(D,G,W,B,P);Y.push(W,G,G,B)}}let l=function(){function D(B=9,F){this.compareMinX=w;this.compareMinY=H;this._toBBox=function(P){return P};this._maxEntries=Math.max(4,B||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));F&&("function"===typeof F?this._toBBox=F:this._initFormat(F));
this.clear()}var Y=D.prototype;Y.destroy=function(){this.clear();N.prune();M.prune();v.prune();C.prune()};Y.all=function(B){this._all(this.data,B)};Y.search=function(B,F){let P=this.data;const W=this._toBBox;if(I(B,P))for(N.clear();P;){for(let G=0,r=P.children.length;G<r;G++){const a=P.children[G],k=P.leaf?W(a):a;I(B,k)&&(P.leaf?F(a):h(B,k)?this._all(a,F):N.push(a))}P=N.pop()}};Y.collides=function(B){let F=this.data;const P=this._toBBox;if(!I(B,F))return!1;for(N.clear();F;){for(let W=0,G=F.children.length;W<
G;W++){const r=F.children[W],a=F.leaf?P(r):r;if(I(B,a)){if(F.leaf||h(B,a))return!0;N.push(r)}}F=N.pop()}return!1};Y.load=function(B){if(!B.length)return this;if(B.length<this._minEntries){for(let F=0,P=B.length;F<P;F++)this.insert(B[F]);return this}B=this._build(B.slice(0,B.length),0,B.length-1,0);if(this.data.children.length)if(this.data.height===B.height)this._splitRoot(this.data,B);else{if(this.data.height<B.height){const F=this.data;this.data=B;B=F}this._insert(B,this.data.height-B.height-1,!0)}else this.data=
B;return this};Y.insert=function(B){B&&this._insert(B,this.data.height-1);return this};Y.clear=function(){this.data=new q([]);return this};Y.remove=function(B){if(!B)return this;let F=this.data,P=null,W=0,G=!1,r;const a=this._toBBox(B);v.clear();for(C.clear();F||0<v.length;){if(!F){var k;F=ba.assumeNonNull(v.pop());P=v.data[v.length-1];W=null!=(k=C.pop())?k:0;G=!0}if(F.leaf&&(r=aa.indexOf(F.children,B,F.children.length,F.indexHint),-1!==r)){F.children.splice(r,1);v.push(F);this._condense(v);break}G||
F.leaf||!h(F,a)?P?(W++,F=P.children[W],G=!1):F=null:(v.push(F),C.push(W),W=0,P=F,F=F.children[0])}return this};Y.toJSON=function(){return this.data};Y.fromJSON=function(B){this.data=B;return this};Y._all=function(B,F){for(M.clear();B;){var P;if(!0===B.leaf)for(const W of B.children)F(W);else M.pushArray(B.children);B=null!=(P=M.pop())?P:null}};Y._build=function(B,F,P,W){var G=P-F+1,r=this._maxEntries;if(G<=r)return B=new q(B.slice(F,P+1)),A(B,this._toBBox),B;W||(W=Math.ceil(Math.log(G)/Math.log(r)),
r=Math.ceil(G/r**(W-1)));const a=new z([]);a.height=W;G=Math.ceil(G/r);r=G*Math.ceil(Math.sqrt(r));for(d(B,F,P,r,this.compareMinX);F<=P;F+=r){const k=Math.min(F+r-1,P);d(B,F,k,G,this.compareMinY);for(let O=F;O<=k;O+=G)a.children.push(this._build(B,O,Math.min(O+G-1,k),W-1))}A(a,this._toBBox);return a};Y._chooseSubtree=function(B,F,P,W){for(;;){W.push(F);if(!0===F.leaf||W.length-1===P)break;let G=Infinity,r=Infinity,a=void 0;for(let k=0,O=F.children.length;k<O;k++){const X=F.children[k],ja=S(X),oa=
(Math.max(X.maxX,B.maxX)-Math.min(X.minX,B.minX))*(Math.max(X.maxY,B.maxY)-Math.min(X.minY,B.minY))-ja;oa<r?(r=oa,G=ja<G?ja:G,a=X):oa===r&&ja<G&&(G=ja,a=X)}F=a||F.children[0]}return F};Y._insert=function(B,F,P){var W=this._toBBox;P=P?B:W(B);v.clear();W=this._chooseSubtree(P,this.data,F,v);W.children.push(B);for(t(W,P);0<=F;)if(v.data[F].children.length>this._maxEntries)this._split(v,F),F--;else break;this._adjustParentBBoxes(P,v,F)};Y._split=function(B,F){const P=B.data[F];var W=P.children.length;
const G=this._minEntries;this._chooseSplitAxis(P,G,W);(W=this._chooseSplitIndex(P,G,W))?(W=P.children.splice(W,P.children.length-W),W=P.leaf?new q(W):new z(W),W.height=P.height,A(P,this._toBBox),A(W,this._toBBox),F?B.data[F-1].children.push(W):this._splitRoot(P,W)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};Y._splitRoot=function(B,F){this.data=new z([B,F]);this.data.height=B.height+1;A(this.data,this._toBBox)};Y._chooseSplitIndex=function(B,F,P){let W,G,
r=void 0;W=G=Infinity;for(let k=F;k<=P-F;k++){var a=n(B,0,k,this._toBBox);const O=n(B,k,P,this._toBBox),X=Math.max(0,Math.min(a.maxX,O.maxX)-Math.max(a.minX,O.minX))*Math.max(0,Math.min(a.maxY,O.maxY)-Math.max(a.minY,O.minY));a=S(a)+S(O);X<W?(W=X,r=k,G=a<G?a:G):X===W&&a<G&&(G=a,r=k)}return r};Y._chooseSplitAxis=function(B,F,P){const W=B.leaf?this.compareMinX:w,G=B.leaf?this.compareMinY:H,r=this._allDistMargin(B,F,P,W);F=this._allDistMargin(B,F,P,G);r<F&&B.children.sort(W)};Y._allDistMargin=function(B,
F,P,W){B.children.sort(W);W=this._toBBox;var G=n(B,0,F,W);const r=n(B,P-F,P,W);let a=R(G)+R(r);for(let k=F;k<P-F;k++){const O=B.children[k];t(G,B.leaf?W(O):O);a+=R(G)}for(P=P-F-1;P>=F;P--)G=B.children[P],t(r,B.leaf?W(G):G),a+=R(r);return a};Y._adjustParentBBoxes=function(B,F,P){for(;0<=P;P--)t(F.data[P],B)};Y._condense=function(B){for(let F=B.length-1;0<=F;F--){const P=B.data[F];if(0===P.children.length)if(0<F){const W=B.data[F-1],G=W.children;G.splice(aa.indexOf(G,P,G.length,W.indexHint),1)}else this.clear();
else A(P,this._toBBox)}};Y._initFormat=function(B){const F=["return a"," - b",";"];this.compareMinX=new Function("a","b",F.join(B[0]));this.compareMinY=new Function("a","b",F.join(B[1]));this._toBBox=new Function("a","return {minX: a"+B[0]+", minY: a"+B[1]+", maxX: a"+B[2]+", maxY: a"+B[3]+"};")};return D}();const N=new u,M=new u,v=new u,C=new u({deallocator:void 0});u=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let y=function(D){function Y(){var B=D.apply(this,arguments)||
this;B.height=1;B.indexHint=new aa.PositionHint;return B}e._inheritsLoose(Y,D);return Y}(u),q=function(D){function Y(B){var F=D.call(this)||this;F.children=B;F.leaf=!0;return F}e._inheritsLoose(Y,D);return Y}(y),z=function(D){function Y(B){var F=D.call(this)||this;F.children=B;F.leaf=!1;return F}e._inheritsLoose(Y,D);return Y}(y);g.BBox=u;g.PooledRBush=l;Object.defineProperty(g,"__esModule",{value:!0})})},"esri/chunks/quickselect":function(){define(["exports"],function(g){var e={exports:{}};(function(aa){(function(ba){ba=
ba();void 0!==ba&&(aa.exports=ba)})(function(){function ba(A,n,t,w,H){for(;w>t;){if(600<w-t){var S=w-t+1,R=n-t+1,h=Math.log(S),I=.5*Math.exp(2*h/3);h=.5*Math.sqrt(h*I*(S-I)/S)*(0>R-S/2?-1:1);ba(A,n,Math.max(t,Math.floor(n-R*I/S+h)),Math.min(w,Math.floor(n+(S-R)*I/S+h)),H)}S=A[n];R=t;I=w;u(A,t,n);for(0<H(A[w],S)&&u(A,t,w);R<I;){u(A,R,I);R++;for(I--;0>H(A[R],S);)R++;for(;0<H(A[I],S);)I--}0===H(A[t],S)?u(A,t,I):(I++,u(A,I,w));I<=n&&(t=I+1);n<=I&&(w=I-1)}}function u(A,n,t){var w=A[n];A[n]=A[t];A[t]=w}
function K(A,n){return A<n?-1:A>n?1:0}return function(A,n,t,w,H){ba(A,n,t||0,w||A.length-1,H||K)}})})(e);g.quickselect=e.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../../../core/maybe","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(g,e,aa,ba,u){const K={getObjectId(A){return A.objectId},getAttributes(A){return A.attributes},getAttribute(A,n){return A.attributes[n]},cloneWithGeometry(A,n){return new ba.OptimizedFeature(n,
A.attributes,null,A.objectId)},getGeometry(A){return A.geometry},getCentroid(A,n){e.isNone(A.centroid)&&(A.centroid=aa.getCentroidOptimizedGeometry(new u,A.geometry,n.hasZ,n.hasM));return A.centroid}};g.default=K;g.optimizedFeatureQueryEngineAdapter=K;Object.defineProperty(g,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(g,e){function aa(u,K,A,n,t,w,H=1){w=t?w?4:3:w?3:2;let S=A,R=A+w,h=0,I=0,d=A=0,l=0;for(let N=0,M=n-1;N<M;N++,
S+=w,R+=w){n=K[S];const v=K[S+1],C=K[S+2],y=K[R],q=K[R+1],z=K[R+2];let D=n*q-y*v;d+=D;h+=(n+y)*D;I+=(v+q)*D;t&&(D=n*z-y*C,A+=(C+z)*D,l+=D);n<u[0]&&(u[0]=n);n>u[1]&&(u[1]=n);v<u[2]&&(u[2]=v);v>u[3]&&(u[3]=v);t&&(C<u[4]&&(u[4]=C),C>u[5]&&(u[5]=C))}0<d*H&&(d*=-1);0<l*H&&(l*=-1);if(!d)return null;u=[h,I,.5*d];t&&(u[3]=A,u[4]=.5*l);return u}function ba(u,K,A,n,t){t=n?t?4:3:t?3:2;let w=K,H=K+t,S=0,R=0,h=0,I=0;for(let M=0,v=A-1;M<v;M++,w+=t,H+=t){var d=u[w];const C=u[w+1],y=u[w+2],q=u[H],z=u[H+1],D=u[H+
2];if(n){{var l=q-d;var N=z-C;const Y=D-y;l=Math.sqrt(l*l+N*N+Y*Y)}}else l=q-d,N=z-C,l=Math.sqrt(l*l+N*N);l&&(S+=l,n?(d=[d+.5*(q-d),C+.5*(z-C),y+.5*(D-y)],R+=l*d[0],h+=l*d[1],I+=l*d[2]):(d=[d+.5*(q-d),C+.5*(z-C)],R+=l*d[0],h+=l*d[1]))}return 0<S?n?[R/S,h/S,I/S]:[R/S,h/S]:0<A?n?[u[K],u[K+1],u[K+2]]:[u[K],u[K+1]]:null}g.getCentroidOptimizedGeometry=function(u,K,A,n,t){if(e.isNone(K)||!K.lengths.length)return null;const w="upperLeft"===(null==t?void 0:t.originPosition)?-1:1;u.lengths.length&&(u.lengths.length=
0);u.coords.length&&(u.coords.length=0);t=u.coords;const H=[],S=A?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:R,coords:h}=K,I=A?n?4:3:n?3:2;let d=0;for(var l of R){const N=aa(S,h,d,l,A,n,w);N&&H.push(N);d+=l*I}H.sort((N,M)=>{let v=w*N[2]-w*M[2];0===v&&A&&(v=N[4]-M[4]);return v});H.length&&
(l=6*H[0][2],t[0]=H[0][0]/l,t[1]=H[0][1]/l,A&&(l=6*H[0][4],t[2]=0!==l?H[0][3]/l:0),t[0]<S[0]||t[0]>S[1]||t[1]<S[2]||t[1]>S[3]||A&&(t[2]<S[4]||t[2]>S[5]))&&(t.length=0);if(!t.length)if(K=K.lengths[0]?ba(h,0,R[0],A,n):null)t[0]=K[0],t[1]=K[1],A&&2<K.length&&(t[2]=K[2]);else return null;return u};g.lineCentroid=ba;Object.defineProperty(g,"__esModule",{value:!0})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(g,e,aa,ba,u,K,A){function n(d,l){if(!l)return null;if("x"in l){var N={x:0,y:0};[N.x,N.y]=d(l.x,l.y,S);null!=l.z&&(N.z=l.z);null!=l.m&&(N.m=l.m);return N}if("xmin"in l)return N={xmin:0,ymin:0,xmax:0,ymax:0},[N.xmin,N.ymin]=d(l.xmin,l.ymin,S),[N.xmax,N.ymax]=d(l.xmax,l.ymax,S),l.hasZ&&(N.zmin=l.zmin,N.zmax=l.zmax,N.hasZ=!0),l.hasM&&(N.mmin=l.mmin,N.mmax=l.mmax,N.hasM=!0),N;if("rings"in l)return{rings:t(l.rings,d),hasM:l.hasM,hasZ:l.hasZ};if("paths"in l)return{paths:t(l.paths,d),hasM:l.hasM,
hasZ:l.hasZ};if("points"in l)return{points:w(l.points,d),hasM:l.hasM,hasZ:l.hasZ}}function t(d,l){const N=[];for(const M of d)N.push(w(M,l));return N}function w(d,l){const N=[];for(const M of d)d=l(M[0],M[1],[0,0]),N.push(d),2<M.length&&d.push(M[2]),3<M.length&&d.push(M[3]);return N}function H(){H=e._asyncToGenerator(function*(d,l){l&&(d=Array.isArray(d)?d.map(N=>aa.isSome(N.geometry)&&N.geometry.spatialReference):[d],yield ba.initializeProjection(d.map(N=>({source:N,dest:l}))))});return H.apply(this,
arguments)}const S=[0,0],R=n.bind(null,A.lngLatToXY),h=n.bind(null,A.xyToLngLat),I=new (function(){function d(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var l=d.prototype;l.push=function(){var N=e._asyncToGenerator(function*(M,v,C){if(!(M&&M.length&&v&&C)||K.equals(v,C))return M;const y={geometries:M,inSpatialReference:v,outSpatialReference:C,resolve:null};this._jobs.push(y);return new Promise(q=>{y.resolve=q;null===this._timer&&(this._timer=setTimeout(this._process,10))})});
return function(M,v,C){return N.apply(this,arguments)}}();l._process=function(){this._timer=null;const N=this._jobs.shift();if(N){var {geometries:M,inSpatialReference:v,outSpatialReference:C,resolve:y}=N;A.canProject(v,C)?K.isWebMercator(C)?y(M.map(R)):y(M.map(h)):y(ba.projectMany(u.jsonAdapter,M,v,C,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return d}());g.checkProjectionSupport=function(d,l){return H.apply(this,arguments)};g.project=function(d,l,N){if(!d)return d;N||
(N=l,l=d.spatialReference);return K.isValid(l)&&K.isValid(N)&&!K.equals(l,N)?A.canProject(l,N)?(d=K.isWebMercator(N)?R(d):h(d),d.spatialReference=N,d):ba.projectMany(u.jsonAdapter,[d],l,N,null)[0]:d};g.projectMany=function(d,l,N){return I.push(d,l,N)};Object.defineProperty(g,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(g,e,aa,ba,u,K,A,n,t,w,H,S,R,h,I,d,l,N,M,v,C,y,q,z,D){function Y(){return!!Qa&&h.isLoaded()}function B(V){K.isNone($a)&&($a=Promise.all([h.load(),(new Promise((ia,ca)=>g(["../chunks/geometryEngineBase"],ia,ca))).then(ia=>ia.geometryEngineBase),new Promise((ia,ca)=>g(["./geometryAdapters/hydrated"],ia,ca))]));return $a.then(([,ia,{hydratedAdapter:ca}])=>{A.throwIfAborted(V);b=ca;Qa=ia.default;Qa._enableProjection(h.pe)})}function F(V,ia,ca=null){return Array.isArray(V)?0===V.length?[]:P(b,
V,V[0].spatialReference,ia,ca):P(b,[V],V.spatialReference,ia,ca)[0]}function P(V,ia,ca,na,xa=null){if(K.isNone(ca)||K.isNone(na))return ia;if(G(ca,na,xa))return ia.map(za=>K.unwrap(a(za,ca,na)));if(K.isNone(xa)){const za=y.cacheKey(ca,na);void 0!==Ra[za]?xa=Ra[za]:(xa=W(ca,na,null),K.isNone(xa)&&(xa=new y),Ra[za]=xa)}if(K.isNone(Qa))throw new pb;return Qa._project(V,ia,ca,na,xa)}function W(V,ia,ca=null){if(K.isNone(Qa))throw new pb;if(K.isNone(V)||K.isNone(ia))return null;V=Qa._getTransformation(b,
V,ia,ca,null==ca?void 0:ca.spatialReference);return null!==V?y.fromGE(V):null}function G(V,ia,ca){return ca?!1:q.equals(V,ia)?!0:q.isValid(V)&&q.isValid(ia)&&!!sa(V,ia,Pb)}function r(){r=aa._asyncToGenerator(function*(V,ia,ca,na){if(!Y())if(Array.isArray(V))for(const {source:xa,dest:za,geographicTransformation:Ia}of V){if(!G(xa,za,Ia))return B(na)}else if(!G(V,ia,ca))return B(na)});return r.apply(this,arguments)}function a(V,ia,ca){return V?"x"in V?k(V,ia,new I,ca,0):"xmin"in V?oa(V,ia,new S,ca,0):
"rings"in V?ja(V,ia,new d,ca,0):"paths"in V?X(V,ia,new l,ca,0):"points"in V?O(V,ia,new R,ca,0):null:null}function k(V,ia,ca,na,xa){Na[0]=V.x;Na[1]=V.y;const za=V.z;Na[2]=void 0!==za?za:xa;if(!va(Na,ia,0,Na,na,0,1))return null;ca.x=Na[0];ca.y=Na[1];ca.spatialReference=na;void 0===za?(ca.z=void 0,ca.hasZ=!1):(ca.z=Na[2],ca.hasZ=!0);void 0===V.m?(ca.m=void 0,ca.hasM=!1):(ca.m=V.m,ca.hasM=!0);return ca}function O(V,ia,ca,na,xa){const {points:za,hasZ:Ia,hasM:Ja}=V;V=[];const Xa=za.length,Wa=[];for(var Va of za)Wa.push(Va[0],
Va[1],Ia?Va[2]:xa);if(!va(Wa,ia,0,Wa,na,0,Xa))return null;for(ia=0;ia<Xa;++ia){xa=3*ia;Va=Wa[xa];const cb=Wa[xa+1];Ia&&Ja?V.push([Va,cb,Wa[xa+2],za[ia][3]]):Ia?V.push([Va,cb,Wa[xa+2]]):Ja?V.push([Va,cb,za[ia][2]]):V.push([Va,cb])}ca.points=V;ca.spatialReference=na;ca.hasZ=Ia;ca.hasM=Ja;return ca}function X(V,ia,ca,na,xa){const {paths:za,hasZ:Ia,hasM:Ja}=V;V=[];if(!Ba(za,Ia,Ja,ia,V,na,xa))return null;ca.paths=V;ca.spatialReference=na;ca.hasZ=Ia;ca.hasM=Ja;return ca}function ja(V,ia,ca,na,xa){const {rings:za,
hasZ:Ia,hasM:Ja}=V;V=[];if(!Ba(za,Ia,Ja,ia,V,na,xa))return null;ca.rings=V;ca.spatialReference=na;ca.hasZ=Ia;ca.hasM=Ja;return ca}function oa(V,ia,ca,na,xa){const {xmin:za,ymin:Ia,xmax:Ja,ymax:Xa,hasZ:Wa,hasM:Va}=V;if(!ma(za,Ia,Wa?V.zmin:xa,ia,Na,na))return null;ca.xmin=Na[0];ca.ymin=Na[1];Wa&&(ca.zmin=Na[2]);if(!ma(Ja,Xa,Wa?V.zmax:xa,ia,Na,na))return null;ca.xmax=Na[0];ca.ymax=Na[1];Wa&&(ca.zmax=Na[2]);Va&&(ca.mmin=V.mmin,ca.mmax=V.mmax);ca.spatialReference=na;return ca}function ma(V,ia,ca,na,xa,
za){Ua[0]=V;Ua[1]=ia;Ua[2]=ca;return va(Ua,na,0,xa,za,0,1)}function la(V,ia,ca,na){if(K.isNone(ia)||K.isNone(na)||2>V.length)return!1;2===V.length&&(Ua[0]=V[0],Ua[1]=V[1],Ua[2]=0,V=Ua);return va(V,ia,0,ca,na,0,1)}function pa(V,ia,ca){if(K.isNone(ia))return!1;ia=Sa(ia,Bb);ia=lb[ia][ka.WGS84_COMPARABLE_LON_LAT];if(K.isNone(ia))return!1;ia(V,0,Ua,0);ca!==Ua&&(ca[0]=Ua[0],ca[1]=Ua[1],2<ca.length&&(ca[2]=Ua[2]));return!0}function va(V,ia,ca,na,xa,za,Ia=1){ia=sa(ia,xa,Pb);if(K.isNone(ia))return!1;if(ia===
c){if(V===na&&ca===za)return!0;Ia=ca+3*Ia;for(let Ja=ca,Xa=za;Ja<Ia;Ja++,Xa++)na[Xa]=V[Ja];return!0}Ia=ca+3*Ia;for(let Ja=ca,Xa=za;Ja<Ia;Ja+=3,Xa+=3)ia(V,Ja,na,Xa);return!0}function Ba(V,ia,ca,na,xa,za,Ia=0){const Ja=[];for(const Xa of V)for(const Wa of Xa)Ja.push(Wa[0],Wa[1],ia?Wa[2]:Ia);if(!va(Ja,na,0,Ja,za,0,Ja.length/3))return!1;na=0;xa.length=0;for(const Xa of V){V=[];for(const Wa of Xa)ia&&ca?V.push([Ja[na++],Ja[na++],Ja[na++],Wa[3]]):ia?V.push([Ja[na++],Ja[na++],Ja[na++]]):(ca?V.push([Ja[na++],
Ja[na++],Wa[2]]):V.push([Ja[na++],Ja[na++]]),na++);xa.push(V)}return!0}function Ka(V,ia,ca,na){ia=na+ia;if(ia<na/2||ca>ia)return Number.MAX_VALUE;V=Math.abs(fb*V)+Math.asin(ca/ia);return V>=Math.PI/2?Number.MAX_VALUE:ca/Math.cos(V)}function Ta(V,ia,ca){const na=Math.sin(V);V=Math.cos(V);const xa=Math.sin(ia);ia=Math.cos(ia);ca[0]=-na;ca[4]=-xa*V;ca[8]=ia*V;ca[12]=0;ca[1]=V;ca[5]=-xa*na;ca[9]=ia*na;ca[13]=0;ca[2]=0;ca[6]=ia;ca[10]=xa;ca[14]=0;ca[3]=0;ca[7]=0;ca[11]=0;ca[15]=1;return ca}function Oa(V,
ia,ca){Ta(V,ia,ca);t.transpose(ca,ca);return ca}function Sa(V,ia){if(ia.spatialReference===V)return ia.spatialReferenceId;ia.spatialReference=V;"metersPerUnit"in ia&&(ia.metersPerUnit=n.getMetersPerUnitForSR(V,1));return V.wkt===N.SphericalECEFSpatialReference.wkt?ia.spatialReferenceId=ka.SPHERICAL_ECEF:q.isWGS84(V)?ia.spatialReferenceId=ka.WGS84:q.isWebMercator(V)?ia.spatialReferenceId=ka.WEB_MERCATOR:q.isPlateCarree(V)?ia.spatialReferenceId=ka.PLATE_CARREE:V.wkt===N.WGS84ECEFSpatialReference.wkt?
ia.spatialReferenceId=ka.WGS84_ECEF:V.wkid===z.SupportedGCSWkids.CGCS2000?ia.spatialReferenceId=ka.CGCS2000:V.wkt===N.SphericalPCPFMars.wkt?ia.spatialReferenceId=ka.SPHERICAL_MARS_PCPF:V.wkt===N.SphericalPCPFMoon.wkt?ia.spatialReferenceId=ka.SPHERICAL_MOON_PCPF:q.isMars(V)?ia.spatialReferenceId=ka.GCSMARS2000:q.isMoon(V)?ia.spatialReferenceId=ka.GCSMOON2000:ia.spatialReferenceId=ka.UNKNOWN}function c(V,ia,ca,na){V!==ca&&(ca[na++]=V[ia++],ca[na++]=V[ia++],ca[na]=V[ia])}function p(V,ia,ca,na){ca[na++]=
qb*(V[ia++]/v.earth.radius);ca[na++]=qb*(Math.PI/2-2*Math.atan(Math.exp(-V[ia++]/v.earth.radius)));ca[na]=V[ia]}function fa(V,ia,ca,na){p(V,ia,ca,na);qa(ca,na,ca,na)}function m(V,ia,ca,na){p(V,ia,ca,na);Ea(ca,na,ca,na)}function J(V,ia,ca,na,xa){var za=.4999999*Math.PI;za=u.clamp(fb*V[ia+1],-za,za);za=Math.sin(za);ca[na++]=fb*V[ia]*xa.radius;ca[na++]=xa.halfSemiMajorAxis*Math.log((1+za)/(1-za));ca[na]=V[ia+2]}function T(V,ia,ca,na){J(V,ia,ca,na,v.earth)}function U(V,ia,ca,na){ca[na]=V[ia]*Qb;ca[na+
1]=V[ia+1]*Qb;ca[na+2]=V[ia+2]}function ha(V,ia,ca,na){ca[na]=V[ia]*zb;ca[na+1]=V[ia+1]*zb;ca[na+2]=V[ia+2]}function ea(V,ia,ca,na){p(V,ia,ca,na);U(ca,na,ca,na)}function L(V,ia,ca,na,xa){xa+=V[ia+2];const za=fb*V[ia+1];V=fb*V[ia];ia=Math.cos(za);ca[na++]=Math.cos(V)*ia*xa;ca[na++]=Math.sin(V)*ia*xa;ca[na]=Math.sin(za)*xa}function Q(V,ia,ca,na){L(V,ia,ca,na,v.moon.radius)}function da(V,ia,ca,na){L(V,ia,ca,na,v.mars.radius)}function qa(V,ia,ca,na){L(V,ia,ca,na,v.earth.radius)}function ra(V,ia,ca,na,
xa){var za=V[ia];const Ia=V[ia+1];ia=V[ia+2];V=Math.sqrt(za*za+Ia*Ia+ia*ia);ia=u.asinClamped(ia/(0===V?1:V));za=Math.atan2(Ia,za);ca[na++]=qb*za;ca[na++]=qb*ia;ca[na]=V-xa}function wa(V,ia,ca,na){ra(V,ia,ca,na,v.moon.radius)}function ya(V,ia,ca,na){ra(V,ia,ca,na,v.mars.radius)}function Aa(V,ia,ca,na){ra(V,ia,ca,na,v.earth.radius)}function Ha(V,ia,ca,na){Aa(V,ia,ca,na);T(ca,na,ca,na)}function Ga(V,ia,ca,na){Aa(V,ia,ca,na);Ea(ca,na,ca,na)}function Ea(V,ia,ca,na){{var xa=v.earth;const Ia=fb*V[ia];var za=
fb*V[ia+1];V=V[ia+2];ia=Math.sin(za);za=Math.cos(za);const Ja=xa.radius/Math.sqrt(1-xa.eccentricitySquared*ia*ia);ca[na++]=(Ja+V)*za*Math.cos(Ia);ca[na++]=(Ja+V)*za*Math.sin(Ia);ca[na++]=(Ja*(1-xa.eccentricitySquared)+V)*ia}}function Da(V,ia,ca,na){var xa=C.earthEllipsoidConstants,za=V[ia],Ia=V[ia+1];V=V[ia+2];let Ja;ia=Math.abs(V);var Xa=za*za+Ia*Ia;var Wa=Math.sqrt(Xa);var Va=Xa+V*V;var cb=Math.sqrt(Va);za=Math.atan2(Ia,za);var mb=V*V/Va;Va=Xa/Va;Ia=xa.a2/cb;Xa=xa.a3-xa.a4/cb;.3<Va?(mb=ia/cb*(1+
Va*(xa.a1+Ia+mb*Xa)/cb),cb=Math.asin(mb),Ia=mb*mb,Va=Math.sqrt(1-Ia)):(Va=Wa/cb*(1-mb*(xa.a5-Ia-Va*Xa)/cb),cb=Math.acos(Va),Ia=1-Va*Va,mb=Math.sqrt(Ia));Ja=1-v.earth.eccentricitySquared*Ia;Ia=v.earth.radius/Math.sqrt(Ja);xa=xa.a6*Ia;Ia=Wa-Ia*Va;Xa=ia-xa*mb;ia=Va*Ia+mb*Xa;Wa=Va*Xa-mb*Ia;xa=Wa/(xa/Ja+ia);cb+=xa;0>V&&(cb=-cb);ca[na++]=qb*za;ca[na++]=qb*cb;ca[na]=ia+Wa*xa/2}function Fa(V,ia,ca,na){Da(V,ia,ca,na);qa(ca,na,ca,na)}function Pa(V,ia,ca,na){Da(V,ia,ca,na);T(ca,na,ca,na)}function sa(V,ia,ca=
ab()){return K.isNone(V)||K.isNone(ia)?null:bb(V,ia,ca).projector}function bb(V,ia,ca){if(K.isNone(V)||K.isNone(ia)||ca.source.spatialReference===V&&ca.dest.spatialReference===ia)return ca;const na=Sa(V,ca.source),xa=Sa(ia,ca.dest);na===ka.UNKNOWN&&xa===ka.UNKNOWN?q.equals(V,ia)?ca.projector=c:ca.projector=null:ca.projector=lb[na][xa];return ca}function ab(){return{source:{spatialReference:null,spatialReferenceId:ka.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:ka.UNKNOWN,
metersPerUnit:1},projector:c}}let Qa=null,b=null,$a=null,Ra={},pb=function(V){function ia(){return V.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}aa._inheritsLoose(ia,V);return ia}(ba);var ka;(function(V){V[V.UNKNOWN=0]="UNKNOWN";V[V.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";V[V.WGS84=2]="WGS84";V[V.WEB_MERCATOR=3]="WEB_MERCATOR";V[V.WGS84_ECEF=4]="WGS84_ECEF";V[V.CGCS2000=5]="CGCS2000";V[V.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";V[V.SPHERICAL_MARS_PCPF=
7]="SPHERICAL_MARS_PCPF";V[V.GCSMARS2000=8]="GCSMARS2000";V[V.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";V[V.GCSMOON2000=10]="GCSMOON2000";V[V.LON_LAT=11]="LON_LAT";V[V.PLATE_CARREE=12]="PLATE_CARREE"})(ka||(ka={}));const Qb=v.earth.radius*Math.PI/180,zb=180/(v.earth.radius*Math.PI),lb={[ka.WGS84]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:c,[ka.WGS84_COMPARABLE_LON_LAT]:c,[ka.SPHERICAL_ECEF]:qa,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,
[ka.WEB_MERCATOR]:T,[ka.PLATE_CARREE]:U,[ka.WGS84]:c,[ka.WGS84_ECEF]:Ea},[ka.CGCS2000]:{[ka.CGCS2000]:c,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:c,[ka.WGS84_COMPARABLE_LON_LAT]:c,[ka.SPHERICAL_ECEF]:qa,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:U,[ka.WGS84]:null,[ka.WGS84_ECEF]:Ea},[ka.GCSMARS2000]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:c,[ka.GCSMOON2000]:null,[ka.LON_LAT]:c,[ka.WGS84_COMPARABLE_LON_LAT]:null,
[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:da,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.GCSMOON2000]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:c,[ka.LON_LAT]:c,[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:Q,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.WEB_MERCATOR]:{[ka.CGCS2000]:null,
[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:p,[ka.WGS84_COMPARABLE_LON_LAT]:p,[ka.SPHERICAL_ECEF]:fa,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:c,[ka.PLATE_CARREE]:ea,[ka.WGS84]:p,[ka.WGS84_ECEF]:m},[ka.WGS84_ECEF]:{[ka.CGCS2000]:Da,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:Da,[ka.WGS84_COMPARABLE_LON_LAT]:Da,[ka.SPHERICAL_ECEF]:Fa,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:Pa,
[ka.PLATE_CARREE]:function(V,ia,ca,na){Da(V,ia,ca,na);U(ca,na,ca,na)},[ka.WGS84]:Da,[ka.WGS84_ECEF]:c},[ka.SPHERICAL_ECEF]:{[ka.CGCS2000]:Aa,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:Aa,[ka.WGS84_COMPARABLE_LON_LAT]:Aa,[ka.SPHERICAL_ECEF]:c,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:Ha,[ka.PLATE_CARREE]:function(V,ia,ca,na){Aa(V,ia,ca,na);U(ca,na,ca,na)},[ka.WGS84]:Aa,[ka.WGS84_ECEF]:Ga},[ka.SPHERICAL_MARS_PCPF]:{[ka.CGCS2000]:null,
[ka.GCSMARS2000]:ya,[ka.GCSMOON2000]:null,[ka.LON_LAT]:ya,[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:c,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.SPHERICAL_MOON_PCPF]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:wa,[ka.LON_LAT]:wa,[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:c,[ka.UNKNOWN]:null,
[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.UNKNOWN]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:null,[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:c,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.LON_LAT]:{[ka.CGCS2000]:c,[ka.GCSMARS2000]:c,[ka.GCSMOON2000]:c,[ka.LON_LAT]:c,[ka.WGS84_COMPARABLE_LON_LAT]:c,
[ka.SPHERICAL_ECEF]:qa,[ka.SPHERICAL_MARS_PCPF]:da,[ka.SPHERICAL_MOON_PCPF]:Q,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:T,[ka.PLATE_CARREE]:U,[ka.WGS84]:c,[ka.WGS84_ECEF]:Ea},[ka.WGS84_COMPARABLE_LON_LAT]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:c,[ka.WGS84_COMPARABLE_LON_LAT]:c,[ka.SPHERICAL_ECEF]:qa,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:U,[ka.WGS84]:c,[ka.WGS84_ECEF]:Ea},[ka.PLATE_CARREE]:{[ka.CGCS2000]:ha,
[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:ha,[ka.WGS84_COMPARABLE_LON_LAT]:ha,[ka.SPHERICAL_ECEF]:function(V,ia,ca,na){ha(V,ia,ca,na);qa(ca,na,ca,na)},[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:function(V,ia,ca,na){ha(V,ia,ca,na);T(ca,na,ca,na)},[ka.PLATE_CARREE]:c,[ka.WGS84]:ha,[ka.WGS84_ECEF]:function(V,ia,ca,na){ha(V,ia,ca,na);Ea(ca,na,ca,na)}}},Bb={spatialReference:null,spatialReferenceId:ka.UNKNOWN},Rb={spatialReference:null,
spatialReferenceId:ka.UNKNOWN},Pb=ab(),bc=ab(),fb=u.deg2rad(1),qb=u.rad2deg(1),Ua=H.create(),kb=H.create(),rb=H.create(),Na=H.create(),Cb=H.create();e.canProjectToWGS84ComparableLonLat=function(V){if(K.isNone(V))return!1;V=Sa(V,Bb);return!!lb[V][ka.WGS84_COMPARABLE_LON_LAT]};e.canProjectWithoutEngine=G;e.computeENUToSphericalPCPFLocalRotation=Ta;e.computeSphericalPCPFToENULocalRotation=Oa;e.computeTranslationToOriginAndRotation=function(V,ia,ca,na){if(K.isNone(V)||K.isNone(na))return!1;var xa=Sa(V,
Bb),za=Sa(na,Rb);if(xa===za&&za!==ka.SPHERICAL_ECEF&&za!==ka.SPHERICAL_MARS_PCPF&&za!==ka.SPHERICAL_MOON_PCPF&&(xa!==ka.UNKNOWN||q.equals(V,na)))return t.fromTranslation(ca,ia),!0;if(za===ka.SPHERICAL_ECEF||za===ka.SPHERICAL_MARS_PCPF||za===ka.SPHERICAL_MOON_PCPF){xa=lb[xa][ka.LON_LAT];za=lb[ka.LON_LAT][za];if(K.isNone(xa)||K.isNone(za))return!1;xa(ia,0,kb,0);za(kb,0,rb,0);Ta(fb*kb[0],fb*kb[1],ca);ca[12]=rb[0];ca[13]=rb[1];ca[14]=rb[2];return!0}if((za===ka.WEB_MERCATOR||za===ka.PLATE_CARREE)&&(xa===
ka.WGS84||xa===ka.CGCS2000&&za===ka.PLATE_CARREE||xa===ka.SPHERICAL_ECEF||xa===ka.WEB_MERCATOR)){V=lb[xa][ka.LON_LAT];za=lb[ka.LON_LAT][za];if(K.isNone(V)||K.isNone(za))return!1;V(ia,0,kb,0);za(kb,0,rb,0);xa===ka.SPHERICAL_ECEF?Oa(fb*kb[0],fb*kb[1],ca):t.identity(ca);ca[12]=rb[0];ca[13]=rb[1];ca[14]=rb[2];return!0}return!1};e.getProjectorName=function(V,ia){switch(sa(V,ia,Pb)){case c:return"copy3";case qa:return"wgs84ToSphericalECEF";case T:return"wgs84ToWebMercator";case U:return"wgs84ToPlateCarree";
case Ea:return"wgs84ToWGS84ECEF";case p:return"webMercatorToWGS84";case fa:return"webMercatorToSphericalECEF";case m:return"webMercatorToWGS84ECEF";case ea:return"webMercatorToPlateCarree";case Da:return"wgs84ECEFToWGS84";case Fa:return"wgs84ECEFToSphericalECEF";case Pa:return"wgs84ECEFToWebMercator";case Aa:return"sphericalECEFToWGS84";case Ha:return"sphericalECEFToWebMercator";case ya:return"sphericalMarsPCPFToMars2000";case wa:return"sphericalMoonPCPFToMoon2000";case Ga:return"sphericalECEFToWGS84ECEF";
case da:return"mars2000ToSphericalPCPF";case Q:return"moon2000ToSphericalPCPF";default:return null}};e.getTransformation=W;e.getTransformations=function(V,ia,ca=null){if(K.isNone(Qa))throw new pb;V=Qa._getTransformationBySuitability(b,V,ia,ca,null==ca?void 0:ca.spatialReference);if(null!==V){ia=[];for(const na of V)ia.push(y.fromGE(na));return ia}return[]};e.initializeProjection=function(V,ia,ca,na){return r.apply(this,arguments)};e.isLoaded=Y;e.load=B;e.localLinearScaleFactors=function(V,ia,ca,na){if(K.isNone(ia)||
K.isNone(na))return!1;const xa=Sa(ia,Bb);var za=Sa(na,Rb);if(xa===za&&xa!==ka.UNKNOWN||q.equals(ia,na))return ca[0]=1,ca[1]=1,ca[2]=1,!0;if(xa===ka.SPHERICAL_ECEF){ia=w.length(V);V=ia/Math.sqrt(V[0]*V[0]+V[1]*V[1]);ia/=v.earth.radius;if(za===ka.WEB_MERCATOR)return ca[0]=V*ia,ca[1]=V*ia,ca[2]=1,!0;if(za===ka.WGS84||za===ka.CGCS2000)return za=zb,ca[0]=za*V*ia,ca[1]=za*ia,ca[2]=1,!0}else if(xa===ka.PLATE_CARREE){if(za===ka.WGS84||za===ka.CGCS2000)return ca[0]=zb,ca[1]=zb,ca[2]=1,!0;if(za===ka.WEB_MERCATOR)return za=
V[1]/v.earth.radius,ca[0]=1,ca[1]=1/Math.cos(za),ca[2]=1,!0}return!1};e.lonLatToSphericalPCPF=function(V,ia,ca,na,xa=0){na+=xa;xa=Math.cos(ca);V[0]=Math.cos(ia)*xa*na;V[1]=Math.sin(ia)*xa*na;V[2]=Math.sin(ca)*na};e.lonLatToWebMercatorComparable=J;e.project=F;e.projectBoundingRect=function(V,ia,ca,na){if(null==V)return!1;if(q.equals(ia,na))return M.copy(ca,V),!0;Ua[0]=V[0];Ua[1]=V[1];Ua[2]=0;if(!va(Ua,ia,0,Ua,na,0,1))return!1;ca[0]=Ua[0];ca[1]=Ua[1];Ua[0]=V[2];Ua[1]=V[3];Ua[2]=0;if(!va(Ua,ia,0,Ua,
na,0,1))return!1;ca[2]=Ua[0];ca[3]=Ua[1];return!0};e.projectBoundingSphere=function(V,ia,ca,na){if(K.isNone(ia)||K.isNone(na))return!1;ia=bb(ia,na,bc);if(ia.projector===c)return ca[0]=V[0],ca[1]=V[1],ca[2]=V[2],ca[3]=V[3],!0;if(K.isNone(ia.projector))return!1;const {source:xa,dest:za}=ia;if(za.spatialReferenceId===ka.WEB_MERCATOR){ia=lb[xa.spatialReferenceId][ka.WGS84];if(K.isNone(ia))return!1;ia(V,0,kb,0);T(kb,0,ca,0);ca[3]=Ka(kb[1],V[2],V[3],v.earth.radius);return!0}if(xa.spatialReferenceId!==ka.WGS84&&
xa.spatialReferenceId!==ka.CGCS2000||za.spatialReferenceId!==ka.PLATE_CARREE)ia.projector(V,0,ca,0),ca[3]=V[3]*xa.metersPerUnit/za.metersPerUnit;else{na=lb[ka.SPHERICAL_ECEF][ka.PLATE_CARREE];let Ia=V[3];K.isSome(lb[xa.spatialReferenceId][ka.SPHERICAL_ECEF])&&K.isSome(na)&&(Ia=Ka(V[1],V[2],V[3],v.earth.radius));ia.projector(V,0,ca,0);ca[3]=Ia}return!0};e.projectBuffer=va;e.projectDirection=function(V,ia,ca,na,xa){w.copy(Na,V);w.add(Cb,V,ia);la(Na,ca,Na,xa);la(Cb,ca,Cb,xa);w.subtract(na,Cb,Na);w.normalize(na,
na)};e.projectExtent=function(V,ia,ca=ia.spatialReference,na=0){return K.isSome(ca)&&K.isSome(oa(V,V.spatialReference,ia,ca,na))};e.projectMany=P;e.projectMultipoint=function(V,ia,ca=ia.spatialReference,na=0){return K.isNone(ca)?!1:K.isSome(O(V,V.spatialReference,ia,ca,na))};e.projectPoint=function(V,ia,ca=ia.spatialReference,na=0){return K.isNone(ca)?!1:K.isSome(k(V,V.spatialReference,ia,ca,na))};e.projectPointToVector=function(V,ia,ca,na=0){Na[0]=V.x;Na[1]=V.y;const xa=V.z;Na[2]=void 0!==xa?xa:
na;return va(Na,V.spatialReference,0,ia,ca,0,1)};e.projectPointToWGS84ComparableLonLat=function(V,ia){Na[0]=V.x;Na[1]=V.y;const ca=V.z;Na[2]=void 0!==ca?ca:0;return pa(Na,V.spatialReference,ia)};e.projectPolygon=function(V,ia,ca=ia.spatialReference,na=0){return K.isSome(ca)&&K.isSome(ja(V,V.spatialReference,ia,ca,na))};e.projectPolyline=function(V,ia,ca=ia.spatialReference,na=0){return K.isSome(ca)&&K.isSome(X(V,V.spatialReference,ia,ca,na))};e.projectVectorToDehydratedPoint=function(V,ia,ca){return va(V,
ia,0,Na,ca.spatialReference,0,1)?(ca.x=Na[0],ca.y=Na[1],ca.z=Na[2],ca):null};e.projectVectorToPoint=function(V,ia,ca){if(K.isNone(ia)||K.isNone(ca))return null;const na=new I({spatialReference:ca});return va(V,ia,0,Na,ca,0,1)?(na.x=Na[0],na.y=Na[1],na.z=Na[2],na):null};e.projectVectorToVector=la;e.projectVectorToWGS84ComparableLonLat=function(V,ia,ca){return pa(V,ia,ca)};e.projectWithoutEngine=a;e.projectXYZToVector=ma;e.sphericalPCPFtoLonLatElevation=ra;e.tryProjectWithZConversion=function(V,ia){try{const ca=
F(V,ia);if(null==ca)return null;"xmin"in V&&"xmin"in ca&&(ca.zmin=V.zmin,ca.zmax=V.zmax);const na=D.getGeometryZScaler(ca.type,V.spatialReference,ia);K.isSome(na)&&na(ca);return ca}catch(ca){if(!(ca instanceof pb))throw ca;return null}};e.unload=function(){$a=b=Qa=null;Ra={}};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ./maybe ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),
function(g,e,aa,ba,u,K,A,n,t){function w(a){if(a=W[a])return a;throw Error("unknown type");}function H(a){return P[a].baseUnit}function S(a,k=null){k=k||w(a);return P[k].baseUnit===a}function R(a,k,O){if(k===O)return a;const X=w(k);if(X!==w(O))throw Error("incompatible units");a=S(k,X)?a:a*P[X].units[k].inBaseUnits;return S(O,X)?a:a/P[X].units[O].inBaseUnits}function h(a,k){return 3E3>R(a,k,"meters")?"meters":"kilometers"}function I(a,k){return 1E5>R(a,k,"meters")?"meters":"kilometers"}function d(a,
k){return 1E3>R(a,k,"feet")?"feet":"miles"}function l(a,k){return 1E5>R(a,k,"feet")?"feet":"miles"}function N(a){return F.fromJSON(a.toLowerCase())||null}function M(a,k=A.earth.metersPerDegree){return v(a,!0)||k}function v(a,k=!1){let O,X,ja=null;null!=a&&("object"===typeof a?(O=a.wkid,X=a.wkt):"number"===typeof a?O=a:"string"===typeof a&&(X=a));if(O){if(n.isWKIDFromMars(O))return A.mars.metersPerDegree;if(n.isWKIDFromMoon(O))return A.moon.metersPerDegree;ja=D.values[D[O]];!ja&&k&&B.has(O)&&(ja=q)}else X&&
(/^PROJCS/i.test(X)?ja=C(z.exec(X),ja):/^GEOCCS/i.test(X)&&(ja=C(Y.exec(X),ja)));return ja}function C(a,k){return a&&a[1]?parseFloat(a[1].split(",")[1]):k}function y(a){var k=null;if(null!=a)if("object"===typeof a){var O=a.wkid;var X=a.wkt}else"number"===typeof a?O=a:"string"===typeof a&&(X=a);if(O)k=D.units[D[O]];else if(X&&(a=/^PROJCS/i.test(X)?z:/^GEOCCS/i.test(X)?Y:null)&&(X=a.exec(X))&&X[1]&&(X=X[1],k=(k=/[\\"\\']{1}([^\\"\\']+)/.exec(X))&&k[1],!k||-1===D.units.indexOf(k)))for(X=parseFloat(X.split(",")[1]),
k=null,a=D.values,O=0;O<a.length;++O)if(1E-7>Math.abs(X-a[O])){k=D.units[O];break}return ba.isSome(k)?N(k):null}const q=A.earth.radius*Math.PI/200,z=/UNIT\[([^\]]+)\]\]$/i,D=t,Y=/UNIT\[([^\]]+)\]/i,B=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),F=aa.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",
chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});e={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},
"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};t={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(a=>a*a)(1200/3937)},acres:{inBaseUnits:4046.8564224},
ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const P={length:{baseUnit:"meters",units:e},area:{baseUnit:"square-meters",units:t},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},
"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},W=function(){const a={};for(const k in P)for(const O in P[k].units)a[O]=k;return a}(),G={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",
esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},r={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};e=aa.strict()(G);t=aa.strict()(r);aa=aa.strict()({...G,...r});g.areaUnitsJSONMap=e;g.baseUnitForUnit=function(a){return H(w(a))};
g.baseUnitForUnitType=H;g.convertUnit=R;g.getDefaultUnitSystem=function(a){if(!a)return null;switch(y(a)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};g.getMetersPerUnit=
v;g.getMetersPerUnitForSR=M;g.getMetersPerVerticalUnitForSR=function(a){if(a&&"object"===typeof a&&!n.isEarth(a))return 1;a=M(a);return 1E5<a?1:a};g.getUnitString=y;g.getVerticalUnitStringForSR=function(a){const k=M(a),O=a instanceof K?u.getReferenceEllipsoid(a).metersPerDegree:1E5;return k>=O?"meters":y(a)};g.inchesPerMeter=39.37;g.isBaseUnit=S;g.isMeasurementSystem=function(a){return"imperial"===a||"metric"===a};g.lengthToDegrees=function(a,k,O){return R(a,k,"meters")/(O*Math.PI/180)};g.lengthUnitsJSONMap=
t;g.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");g.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");g.preferredImperialAreaUnit=function(a,k){return 1E6>R(a,k,"square-feet")?"square-feet":"square-miles"};g.preferredImperialLengthUnit=d;g.preferredImperialVerticalLengthUnit=l;g.preferredLengthUnit=function(a,
k,O){switch(O){case "metric":return h(a,k);case "imperial":return d(a,k);default:return O}};g.preferredMetricAreaUnit=function(a,k){return 3E6>R(a,k,"square-meters")?"square-meters":"square-kilometers"};g.preferredMetricLengthUnit=h;g.preferredMetricVerticalLengthUnit=I;g.preferredVerticalLengthUnit=function(a,k,O){switch(O){case "metric":return I(a,k);case "imperial":return l(a,k);default:return O}};g.unitFromRESTJSON=N;g.unitToRESTJSON=function(a){return F.toJSON(a)||null};g.unitType=w;g.unitsJSONMap=
aa;Object.defineProperty(g,"__esModule",{value:!0})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(g,e,aa,ba){function u(w){return new e({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${w.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}
const K=u(aa.earth),A=u(aa.mars),n=u(aa.moon),t=new e({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${aa.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});g.SphericalECEFSpatialReference=K;g.SphericalPCPFMars=
A;g.SphericalPCPFMoon=n;g.WGS84ECEFSpatialReference=t;g.createSphericalPCPF=u;g.getReferenceEllipsoid=function(w){return w&&(ba.isMars(w)||w===A)?aa.mars:w&&(ba.isMoon(w)||w===n)?aa.moon:aa.earth};g.getReferenceEllipsoidFromWKID=function(w){return ba.isWKIDFromMars(w)?aa.mars:ba.isWKIDFromMoon(w)?aa.moon:aa.earth};g.getSphericalPCPF=function(w){return w&&(ba.isMars(w)||w===A)?A:w&&(ba.isMoon(w)||w===n)?n:K};g.getSphericalPCPFForEllipsoid=function(w){return w&&w===aa.mars?A:w&&w===aa.moon?n:K};Object.defineProperty(g,
"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(g,e,aa){function ba(c,p){c[0]=p[0];c[1]=p[1];c[2]=p[2];c[3]=p[3];c[4]=p[4];c[5]=p[5];c[6]=p[6];c[7]=p[7];c[8]=p[8];c[9]=p[9];c[10]=p[10];c[11]=p[11];c[12]=p[12];c[13]=p[13];c[14]=p[14];c[15]=p[15];return c}function u(c,p,fa,m,J,T,U,ha,ea,L,Q,da,qa,ra,wa,ya,Aa){c[0]=p;c[1]=fa;c[2]=m;c[3]=J;c[4]=T;c[5]=U;c[6]=ha;c[7]=ea;c[8]=L;c[9]=Q;c[10]=da;c[11]=qa;c[12]=ra;c[13]=wa;c[14]=ya;c[15]=Aa;return c}
function K(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function A(c,p){if(c===p){const fa=p[1],m=p[2],J=p[3],T=p[6],U=p[7],ha=p[11];c[1]=p[4];c[2]=p[8];c[3]=p[12];c[4]=fa;c[6]=p[9];c[7]=p[13];c[8]=m;c[9]=T;c[11]=p[14];c[12]=J;c[13]=U;c[14]=ha}else c[0]=p[0],c[1]=p[4],c[2]=p[8],c[3]=p[12],c[4]=p[1],c[5]=p[5],c[6]=p[9],c[7]=p[13],c[8]=p[2],c[9]=p[6],c[10]=p[10],c[11]=p[14],c[12]=p[3],c[13]=p[7],c[14]=p[11],c[15]=p[15];
return c}function n(c,p){const fa=p[0],m=p[1],J=p[2],T=p[3],U=p[4],ha=p[5],ea=p[6],L=p[7],Q=p[8],da=p[9],qa=p[10],ra=p[11],wa=p[12],ya=p[13],Aa=p[14];p=p[15];const Ha=fa*ha-m*U,Ga=fa*ea-J*U,Ea=fa*L-T*U,Da=m*ea-J*ha,Fa=m*L-T*ha,Pa=J*L-T*ea,sa=Q*ya-da*wa,bb=Q*Aa-qa*wa,ab=Q*p-ra*wa,Qa=da*Aa-qa*ya,b=da*p-ra*ya,$a=qa*p-ra*Aa;let Ra=Ha*$a-Ga*b+Ea*Qa+Da*ab-Fa*bb+Pa*sa;if(!Ra)return null;Ra=1/Ra;c[0]=(ha*$a-ea*b+L*Qa)*Ra;c[1]=(J*b-m*$a-T*Qa)*Ra;c[2]=(ya*Pa-Aa*Fa+p*Da)*Ra;c[3]=(qa*Fa-da*Pa-ra*Da)*Ra;c[4]=
(ea*ab-U*$a-L*bb)*Ra;c[5]=(fa*$a-J*ab+T*bb)*Ra;c[6]=(Aa*Ea-wa*Pa-p*Ga)*Ra;c[7]=(Q*Pa-qa*Ea+ra*Ga)*Ra;c[8]=(U*b-ha*ab+L*sa)*Ra;c[9]=(m*ab-fa*b-T*sa)*Ra;c[10]=(wa*Fa-ya*Ea+p*Ha)*Ra;c[11]=(da*Ea-Q*Fa-ra*Ha)*Ra;c[12]=(ha*bb-U*Qa-ea*sa)*Ra;c[13]=(fa*Qa-m*bb+J*sa)*Ra;c[14]=(ya*Ga-wa*Da-Aa*Ha)*Ra;c[15]=(Q*Da-da*Ga+qa*Ha)*Ra;return c}function t(c,p){const fa=p[0],m=p[1],J=p[2],T=p[3],U=p[4],ha=p[5],ea=p[6],L=p[7],Q=p[8],da=p[9],qa=p[10],ra=p[11],wa=p[12],ya=p[13],Aa=p[14];p=p[15];c[0]=ha*(qa*p-ra*Aa)-da*
(ea*p-L*Aa)+ya*(ea*ra-L*qa);c[1]=-(m*(qa*p-ra*Aa)-da*(J*p-T*Aa)+ya*(J*ra-T*qa));c[2]=m*(ea*p-L*Aa)-ha*(J*p-T*Aa)+ya*(J*L-T*ea);c[3]=-(m*(ea*ra-L*qa)-ha*(J*ra-T*qa)+da*(J*L-T*ea));c[4]=-(U*(qa*p-ra*Aa)-Q*(ea*p-L*Aa)+wa*(ea*ra-L*qa));c[5]=fa*(qa*p-ra*Aa)-Q*(J*p-T*Aa)+wa*(J*ra-T*qa);c[6]=-(fa*(ea*p-L*Aa)-U*(J*p-T*Aa)+wa*(J*L-T*ea));c[7]=fa*(ea*ra-L*qa)-U*(J*ra-T*qa)+Q*(J*L-T*ea);c[8]=U*(da*p-ra*ya)-Q*(ha*p-L*ya)+wa*(ha*ra-L*da);c[9]=-(fa*(da*p-ra*ya)-Q*(m*p-T*ya)+wa*(m*ra-T*da));c[10]=fa*(ha*p-L*ya)-
U*(m*p-T*ya)+wa*(m*L-T*ha);c[11]=-(fa*(ha*ra-L*da)-U*(m*ra-T*da)+Q*(m*L-T*ha));c[12]=-(U*(da*Aa-qa*ya)-Q*(ha*Aa-ea*ya)+wa*(ha*qa-ea*da));c[13]=fa*(da*Aa-qa*ya)-Q*(m*Aa-J*ya)+wa*(m*qa-J*da);c[14]=-(fa*(ha*Aa-ea*ya)-U*(m*Aa-J*ya)+wa*(m*ea-J*ha));c[15]=fa*(ha*qa-ea*da)-U*(m*qa-J*da)+Q*(m*ea-J*ha);return c}function w(c){const p=c[0],fa=c[1],m=c[2],J=c[3],T=c[4],U=c[5],ha=c[6],ea=c[7],L=c[8],Q=c[9],da=c[10],qa=c[11],ra=c[12],wa=c[13],ya=c[14];c=c[15];return(p*U-fa*T)*(da*c-qa*ya)-(p*ha-m*T)*(Q*c-qa*wa)+
(p*ea-J*T)*(Q*ya-da*wa)+(fa*ha-m*U)*(L*c-qa*ra)-(fa*ea-J*U)*(L*ya-da*ra)+(m*ea-J*ha)*(L*wa-Q*ra)}function H(c,p,fa){const m=p[0],J=p[1],T=p[2],U=p[3],ha=p[4],ea=p[5],L=p[6],Q=p[7],da=p[8],qa=p[9],ra=p[10],wa=p[11],ya=p[12],Aa=p[13],Ha=p[14];p=p[15];let Ga=fa[0],Ea=fa[1],Da=fa[2],Fa=fa[3];c[0]=Ga*m+Ea*ha+Da*da+Fa*ya;c[1]=Ga*J+Ea*ea+Da*qa+Fa*Aa;c[2]=Ga*T+Ea*L+Da*ra+Fa*Ha;c[3]=Ga*U+Ea*Q+Da*wa+Fa*p;Ga=fa[4];Ea=fa[5];Da=fa[6];Fa=fa[7];c[4]=Ga*m+Ea*ha+Da*da+Fa*ya;c[5]=Ga*J+Ea*ea+Da*qa+Fa*Aa;c[6]=Ga*T+Ea*
L+Da*ra+Fa*Ha;c[7]=Ga*U+Ea*Q+Da*wa+Fa*p;Ga=fa[8];Ea=fa[9];Da=fa[10];Fa=fa[11];c[8]=Ga*m+Ea*ha+Da*da+Fa*ya;c[9]=Ga*J+Ea*ea+Da*qa+Fa*Aa;c[10]=Ga*T+Ea*L+Da*ra+Fa*Ha;c[11]=Ga*U+Ea*Q+Da*wa+Fa*p;Ga=fa[12];Ea=fa[13];Da=fa[14];Fa=fa[15];c[12]=Ga*m+Ea*ha+Da*da+Fa*ya;c[13]=Ga*J+Ea*ea+Da*qa+Fa*Aa;c[14]=Ga*T+Ea*L+Da*ra+Fa*Ha;c[15]=Ga*U+Ea*Q+Da*wa+Fa*p;return c}function S(c,p,fa){const m=fa[0],J=fa[1];fa=fa[2];let T=void 0,U=void 0,ha=void 0,ea=void 0,L=void 0,Q=void 0,da=void 0,qa=void 0,ra=void 0,wa=void 0,
ya=void 0,Aa=void 0;p===c?(c[12]=p[0]*m+p[4]*J+p[8]*fa+p[12],c[13]=p[1]*m+p[5]*J+p[9]*fa+p[13],c[14]=p[2]*m+p[6]*J+p[10]*fa+p[14],c[15]=p[3]*m+p[7]*J+p[11]*fa+p[15]):(T=p[0],U=p[1],ha=p[2],ea=p[3],L=p[4],Q=p[5],da=p[6],qa=p[7],ra=p[8],wa=p[9],ya=p[10],Aa=p[11],c[0]=T,c[1]=U,c[2]=ha,c[3]=ea,c[4]=L,c[5]=Q,c[6]=da,c[7]=qa,c[8]=ra,c[9]=wa,c[10]=ya,c[11]=Aa,c[12]=T*m+L*J+ra*fa+p[12],c[13]=U*m+Q*J+wa*fa+p[13],c[14]=ha*m+da*J+ya*fa+p[14],c[15]=ea*m+qa*J+Aa*fa+p[15]);return c}function R(c,p,fa){const m=fa[0],
J=fa[1];fa=fa[2];c[0]=p[0]*m;c[1]=p[1]*m;c[2]=p[2]*m;c[3]=p[3]*m;c[4]=p[4]*J;c[5]=p[5]*J;c[6]=p[6]*J;c[7]=p[7]*J;c[8]=p[8]*fa;c[9]=p[9]*fa;c[10]=p[10]*fa;c[11]=p[11]*fa;c[12]=p[12];c[13]=p[13];c[14]=p[14];c[15]=p[15];return c}function h(c,p,fa,m){let J=m[0],T=m[1];m=m[2];let U=Math.sqrt(J*J+T*T+m*m);var ha=void 0,ea=void 0;let L=void 0,Q=void 0,da=void 0,qa=void 0,ra=void 0,wa=void 0,ya=void 0,Aa=void 0,Ha=void 0,Ga=void 0,Ea=void 0,Da=void 0,Fa=void 0,Pa=void 0,sa=void 0,bb=void 0,ab=void 0,Qa=void 0,
b=void 0,$a=void 0;ea=ha=void 0;if(U<aa.EPSILON)return null;U=1/U;J*=U;T*=U;m*=U;ha=Math.sin(fa);ea=Math.cos(fa);L=1-ea;Q=p[0];da=p[1];qa=p[2];ra=p[3];wa=p[4];ya=p[5];Aa=p[6];Ha=p[7];Ga=p[8];Ea=p[9];Da=p[10];Fa=p[11];Pa=J*J*L+ea;sa=T*J*L+m*ha;bb=m*J*L-T*ha;ab=J*T*L-m*ha;Qa=T*T*L+ea;b=m*T*L+J*ha;$a=J*m*L+T*ha;ha=T*m*L-J*ha;ea=m*m*L+ea;c[0]=Q*Pa+wa*sa+Ga*bb;c[1]=da*Pa+ya*sa+Ea*bb;c[2]=qa*Pa+Aa*sa+Da*bb;c[3]=ra*Pa+Ha*sa+Fa*bb;c[4]=Q*ab+wa*Qa+Ga*b;c[5]=da*ab+ya*Qa+Ea*b;c[6]=qa*ab+Aa*Qa+Da*b;c[7]=ra*ab+
Ha*Qa+Fa*b;c[8]=Q*$a+wa*ha+Ga*ea;c[9]=da*$a+ya*ha+Ea*ea;c[10]=qa*$a+Aa*ha+Da*ea;c[11]=ra*$a+Ha*ha+Fa*ea;p!==c&&(c[12]=p[12],c[13]=p[13],c[14]=p[14],c[15]=p[15]);return c}function I(c,p,fa){const m=Math.sin(fa);fa=Math.cos(fa);const J=p[4],T=p[5],U=p[6],ha=p[7],ea=p[8],L=p[9],Q=p[10],da=p[11];p!==c&&(c[0]=p[0],c[1]=p[1],c[2]=p[2],c[3]=p[3],c[12]=p[12],c[13]=p[13],c[14]=p[14],c[15]=p[15]);c[4]=J*fa+ea*m;c[5]=T*fa+L*m;c[6]=U*fa+Q*m;c[7]=ha*fa+da*m;c[8]=ea*fa-J*m;c[9]=L*fa-T*m;c[10]=Q*fa-U*m;c[11]=da*
fa-ha*m;return c}function d(c,p,fa){const m=Math.sin(fa);fa=Math.cos(fa);const J=p[0],T=p[1],U=p[2],ha=p[3],ea=p[8],L=p[9],Q=p[10],da=p[11];p!==c&&(c[4]=p[4],c[5]=p[5],c[6]=p[6],c[7]=p[7],c[12]=p[12],c[13]=p[13],c[14]=p[14],c[15]=p[15]);c[0]=J*fa-ea*m;c[1]=T*fa-L*m;c[2]=U*fa-Q*m;c[3]=ha*fa-da*m;c[8]=J*m+ea*fa;c[9]=T*m+L*fa;c[10]=U*m+Q*fa;c[11]=ha*m+da*fa;return c}function l(c,p,fa){const m=Math.sin(fa);fa=Math.cos(fa);const J=p[0],T=p[1],U=p[2],ha=p[3],ea=p[4],L=p[5],Q=p[6],da=p[7];p!==c&&(c[8]=p[8],
c[9]=p[9],c[10]=p[10],c[11]=p[11],c[12]=p[12],c[13]=p[13],c[14]=p[14],c[15]=p[15]);c[0]=J*fa+ea*m;c[1]=T*fa+L*m;c[2]=U*fa+Q*m;c[3]=ha*fa+da*m;c[4]=ea*fa-J*m;c[5]=L*fa-T*m;c[6]=Q*fa-U*m;c[7]=da*fa-ha*m;return c}function N(c,p){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=p[0];c[13]=p[1];c[14]=p[2];c[15]=1;return c}function M(c,p){c[0]=p[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=p[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=p[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=
1;return c}function v(c,p,fa){let m=fa[0],J=fa[1];fa=fa[2];let T=Math.sqrt(m*m+J*J+fa*fa),U=void 0,ha=void 0,ea=void 0;if(T<aa.EPSILON)return null;T=1/T;m*=T;J*=T;fa*=T;U=Math.sin(p);ha=Math.cos(p);ea=1-ha;c[0]=m*m*ea+ha;c[1]=J*m*ea+fa*U;c[2]=fa*m*ea-J*U;c[3]=0;c[4]=m*J*ea-fa*U;c[5]=J*J*ea+ha;c[6]=fa*J*ea+m*U;c[7]=0;c[8]=m*fa*ea+J*U;c[9]=J*fa*ea-m*U;c[10]=fa*fa*ea+ha;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function C(c,p){const fa=Math.sin(p);p=Math.cos(p);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=
0;c[5]=p;c[6]=fa;c[7]=0;c[8]=0;c[9]=-fa;c[10]=p;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function y(c,p){const fa=Math.sin(p);p=Math.cos(p);c[0]=p;c[1]=0;c[2]=-fa;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=fa;c[9]=0;c[10]=p;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function q(c,p){const fa=Math.sin(p);p=Math.cos(p);c[0]=p;c[1]=fa;c[2]=0;c[3]=0;c[4]=-fa;c[5]=p;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function z(c,p,fa){var m=p[0],J=p[1],T=p[2],
U=p[3],ha=m+m,ea=J+J;const L=T+T;p=m*ha;const Q=m*ea;m*=L;const da=J*ea;J*=L;T*=L;ha*=U;ea*=U;U*=L;c[0]=1-(da+T);c[1]=Q+U;c[2]=m-ea;c[3]=0;c[4]=Q-U;c[5]=1-(p+T);c[6]=J+ha;c[7]=0;c[8]=m+ea;c[9]=J-ha;c[10]=1-(p+da);c[11]=0;c[12]=fa[0];c[13]=fa[1];c[14]=fa[2];c[15]=1;return c}function D(c,p){const fa=Sa,m=-p[0],J=-p[1],T=-p[2],U=p[3],ha=p[4],ea=p[5],L=p[6],Q=p[7],da=m*m+J*J+T*T+U*U;0<da?(fa[0]=2*(ha*U+Q*m+ea*T-L*J)/da,fa[1]=2*(ea*U+Q*J+L*m-ha*T)/da,fa[2]=2*(L*U+Q*T+ha*J-ea*m)/da):(fa[0]=2*(ha*U+Q*m+
ea*T-L*J),fa[1]=2*(ea*U+Q*J+L*m-ha*T),fa[2]=2*(L*U+Q*T+ha*J-ea*m));z(c,p,fa);return c}function Y(c,p){c[0]=p[12];c[1]=p[13];c[2]=p[14];return c}function B(c,p){const fa=p[0],m=p[1],J=p[2],T=p[4],U=p[5],ha=p[6],ea=p[8],L=p[9];p=p[10];c[0]=Math.sqrt(fa*fa+m*m+J*J);c[1]=Math.sqrt(T*T+U*U+ha*ha);c[2]=Math.sqrt(ea*ea+L*L+p*p);return c}function F(c,p){const fa=p[0]+p[5]+p[10];let m=0;0<fa?(m=2*Math.sqrt(fa+1),c[3]=.25*m,c[0]=(p[6]-p[9])/m,c[1]=(p[8]-p[2])/m,c[2]=(p[1]-p[4])/m):p[0]>p[5]&&p[0]>p[10]?(m=
2*Math.sqrt(1+p[0]-p[5]-p[10]),c[3]=(p[6]-p[9])/m,c[0]=.25*m,c[1]=(p[1]+p[4])/m,c[2]=(p[8]+p[2])/m):p[5]>p[10]?(m=2*Math.sqrt(1+p[5]-p[0]-p[10]),c[3]=(p[8]-p[2])/m,c[0]=(p[1]+p[4])/m,c[1]=.25*m,c[2]=(p[6]+p[9])/m):(m=2*Math.sqrt(1+p[10]-p[0]-p[5]),c[3]=(p[1]-p[4])/m,c[0]=(p[8]+p[2])/m,c[1]=(p[6]+p[9])/m,c[2]=.25*m);return c}function P(c,p,fa,m){var J=p[0],T=p[1],U=p[2],ha=p[3],ea=J+J,L=T+T,Q=U+U;p=J*ea;const da=J*L;J*=Q;const qa=T*L;T*=Q;U*=Q;ea*=ha;L*=ha;ha*=Q;Q=m[0];const ra=m[1];m=m[2];c[0]=(1-
(qa+U))*Q;c[1]=(da+ha)*Q;c[2]=(J-L)*Q;c[3]=0;c[4]=(da-ha)*ra;c[5]=(1-(p+U))*ra;c[6]=(T+ea)*ra;c[7]=0;c[8]=(J+L)*m;c[9]=(T-ea)*m;c[10]=(1-(p+qa))*m;c[11]=0;c[12]=fa[0];c[13]=fa[1];c[14]=fa[2];c[15]=1;return c}function W(c,p,fa,m,J){var T=p[0],U=p[1],ha=p[2],ea=p[3],L=T+T,Q=U+U,da=ha+ha;p=T*L;var qa=T*Q,ra=T*da;T=U*Q;U*=da;var wa=ha*da;ha=ea*L;Q*=ea;const ya=ea*da;var Aa=m[0],Ha=m[1];da=m[2];m=J[0];ea=J[1];J=J[2];L=(1-(T+wa))*Aa;const Ga=(qa+ya)*Aa;Aa*=ra-Q;qa=(qa-ya)*Ha;wa=(1-(p+wa))*Ha;Ha*=U+ha;ra=
(ra+Q)*da;U=(U-ha)*da;p=(1-(p+T))*da;c[0]=L;c[1]=Ga;c[2]=Aa;c[3]=0;c[4]=qa;c[5]=wa;c[6]=Ha;c[7]=0;c[8]=ra;c[9]=U;c[10]=p;c[11]=0;c[12]=fa[0]+m-(L*m+qa*ea+ra*J);c[13]=fa[1]+ea-(Ga*m+wa*ea+U*J);c[14]=fa[2]+J-(Aa*m+Ha*ea+p*J);c[15]=1;return c}function G(c,p){var fa=p[0],m=p[1],J=p[2];p=p[3];var T=fa+fa,U=m+m;const ha=J+J;fa*=T;const ea=m*T;m*=U;const L=J*T,Q=J*U;J*=ha;T*=p;U*=p;p*=ha;c[0]=1-m-J;c[1]=ea+p;c[2]=L-U;c[3]=0;c[4]=ea-p;c[5]=1-fa-J;c[6]=Q+T;c[7]=0;c[8]=L+U;c[9]=Q-T;c[10]=1-fa-m;c[11]=0;c[12]=
0;c[13]=0;c[14]=0;c[15]=1;return c}function r(c,p,fa,m,J,T,U){const ha=1/(fa-p),ea=1/(J-m),L=1/(T-U);c[0]=2*T*ha;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=2*T*ea;c[6]=0;c[7]=0;c[8]=(fa+p)*ha;c[9]=(J+m)*ea;c[10]=(U+T)*L;c[11]=-1;c[12]=0;c[13]=0;c[14]=U*T*2*L;c[15]=0;return c}function a(c,p,fa,m,J){p=1/Math.tan(p/2);let T=void 0;c[0]=p/fa;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=p;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[11]=-1;c[12]=0;c[13]=0;c[15]=0;null!=J&&Infinity!==J?(T=1/(m-J),c[10]=(J+m)*T,c[14]=2*J*m*T):(c[10]=-1,c[14]=
-2*m);return c}function k(c,p,fa,m){const J=Math.tan(p.upDegrees*Math.PI/180),T=Math.tan(p.downDegrees*Math.PI/180),U=Math.tan(p.leftDegrees*Math.PI/180);p=Math.tan(p.rightDegrees*Math.PI/180);const ha=2/(U+p),ea=2/(J+T);c[0]=ha;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=ea;c[6]=0;c[7]=0;c[8]=-((U-p)*ha*.5);c[9]=(J-T)*ea*.5;c[10]=m/(fa-m);c[11]=-1;c[12]=0;c[13]=0;c[14]=m*fa/(fa-m);c[15]=0;return c}function O(c,p,fa,m,J,T,U){const ha=1/(p-fa),ea=1/(m-J),L=1/(T-U);c[0]=-2*ha;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=
-2*ea;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=2*L;c[11]=0;c[12]=(p+fa)*ha;c[13]=(J+m)*ea;c[14]=(U+T)*L;c[15]=1;return c}function X(c,p,fa,m){let J=void 0,T=void 0;var U=void 0,ha=void 0;let ea=void 0,L=void 0;var Q=void 0,da=void 0;let qa=void 0,ra=void 0;const wa=p[0],ya=p[1];p=p[2];U=m[0];ha=m[1];m=m[2];Q=fa[0];da=fa[1];fa=fa[2];if(Math.abs(wa-Q)<aa.EPSILON&&Math.abs(ya-da)<aa.EPSILON&&Math.abs(p-fa)<aa.EPSILON)return K(c);Q=wa-Q;da=ya-da;qa=p-fa;ra=1/Math.sqrt(Q*Q+da*da+qa*qa);Q*=ra;da*=ra;qa*=ra;J=
ha*qa-m*da;T=m*Q-U*qa;U=U*da-ha*Q;(ra=Math.sqrt(J*J+T*T+U*U))?(ra=1/ra,J*=ra,T*=ra,U*=ra):U=T=J=0;ha=da*U-qa*T;ea=qa*J-Q*U;L=Q*T-da*J;(ra=Math.sqrt(ha*ha+ea*ea+L*L))?(ra=1/ra,ha*=ra,ea*=ra,L*=ra):L=ea=ha=0;c[0]=J;c[1]=ha;c[2]=Q;c[3]=0;c[4]=T;c[5]=ea;c[6]=da;c[7]=0;c[8]=U;c[9]=L;c[10]=qa;c[11]=0;c[12]=-(J*wa+T*ya+U*p);c[13]=-(ha*wa+ea*ya+L*p);c[14]=-(Q*wa+da*ya+qa*p);c[15]=1;return c}function ja(c,p,fa,m){const J=p[0],T=p[1];p=p[2];var U=m[0];const ha=m[1];var ea=m[2];m=J-fa[0];let L=T-fa[1];fa=p-
fa[2];let Q=m*m+L*L+fa*fa;0<Q&&(Q=1/Math.sqrt(Q),m*=Q,L*=Q,fa*=Q);let da=ha*fa-ea*L;ea=ea*m-U*fa;U=U*L-ha*m;Q=da*da+ea*ea+U*U;0<Q&&(Q=1/Math.sqrt(Q),da*=Q,ea*=Q,U*=Q);c[0]=da;c[1]=ea;c[2]=U;c[3]=0;c[4]=L*U-fa*ea;c[5]=fa*da-m*U;c[6]=m*ea-L*da;c[7]=0;c[8]=m;c[9]=L;c[10]=fa;c[11]=0;c[12]=J;c[13]=T;c[14]=p;c[15]=1;return c}function oa(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+
c[15]+")"}function ma(c){return Math.sqrt(c[0]**2+c[1]**2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**2+c[7]**2+c[8]**2+c[9]**2+c[10]**2+c[11]**2+c[12]**2+c[13]**2+c[14]**2+c[15]**2)}function la(c,p,fa){c[0]=p[0]+fa[0];c[1]=p[1]+fa[1];c[2]=p[2]+fa[2];c[3]=p[3]+fa[3];c[4]=p[4]+fa[4];c[5]=p[5]+fa[5];c[6]=p[6]+fa[6];c[7]=p[7]+fa[7];c[8]=p[8]+fa[8];c[9]=p[9]+fa[9];c[10]=p[10]+fa[10];c[11]=p[11]+fa[11];c[12]=p[12]+fa[12];c[13]=p[13]+fa[13];c[14]=p[14]+fa[14];c[15]=p[15]+fa[15];return c}function pa(c,p,fa){c[0]=
p[0]-fa[0];c[1]=p[1]-fa[1];c[2]=p[2]-fa[2];c[3]=p[3]-fa[3];c[4]=p[4]-fa[4];c[5]=p[5]-fa[5];c[6]=p[6]-fa[6];c[7]=p[7]-fa[7];c[8]=p[8]-fa[8];c[9]=p[9]-fa[9];c[10]=p[10]-fa[10];c[11]=p[11]-fa[11];c[12]=p[12]-fa[12];c[13]=p[13]-fa[13];c[14]=p[14]-fa[14];c[15]=p[15]-fa[15];return c}function va(c,p,fa){c[0]=p[0]*fa;c[1]=p[1]*fa;c[2]=p[2]*fa;c[3]=p[3]*fa;c[4]=p[4]*fa;c[5]=p[5]*fa;c[6]=p[6]*fa;c[7]=p[7]*fa;c[8]=p[8]*fa;c[9]=p[9]*fa;c[10]=p[10]*fa;c[11]=p[11]*fa;c[12]=p[12]*fa;c[13]=p[13]*fa;c[14]=p[14]*fa;
c[15]=p[15]*fa;return c}function Ba(c,p,fa,m){c[0]=p[0]+fa[0]*m;c[1]=p[1]+fa[1]*m;c[2]=p[2]+fa[2]*m;c[3]=p[3]+fa[3]*m;c[4]=p[4]+fa[4]*m;c[5]=p[5]+fa[5]*m;c[6]=p[6]+fa[6]*m;c[7]=p[7]+fa[7]*m;c[8]=p[8]+fa[8]*m;c[9]=p[9]+fa[9]*m;c[10]=p[10]+fa[10]*m;c[11]=p[11]+fa[11]*m;c[12]=p[12]+fa[12]*m;c[13]=p[13]+fa[13]*m;c[14]=p[14]+fa[14]*m;c[15]=p[15]+fa[15]*m;return c}function Ka(c,p){return c[0]===p[0]&&c[1]===p[1]&&c[2]===p[2]&&c[3]===p[3]&&c[4]===p[4]&&c[5]===p[5]&&c[6]===p[6]&&c[7]===p[7]&&c[8]===p[8]&&
c[9]===p[9]&&c[10]===p[10]&&c[11]===p[11]&&c[12]===p[12]&&c[13]===p[13]&&c[14]===p[14]&&c[15]===p[15]}function Ta(c,p){if(c===p)return!0;const fa=c[0],m=c[1],J=c[2],T=c[3],U=c[4],ha=c[5],ea=c[6],L=c[7],Q=c[8],da=c[9],qa=c[10],ra=c[11],wa=c[12],ya=c[13],Aa=c[14];c=c[15];const Ha=p[0],Ga=p[1],Ea=p[2],Da=p[3],Fa=p[4],Pa=p[5],sa=p[6],bb=p[7],ab=p[8],Qa=p[9],b=p[10],$a=p[11],Ra=p[12],pb=p[13],ka=p[14];p=p[15];return Math.abs(fa-Ha)<=aa.EPSILON*Math.max(1,Math.abs(fa),Math.abs(Ha))&&Math.abs(m-Ga)<=aa.EPSILON*
Math.max(1,Math.abs(m),Math.abs(Ga))&&Math.abs(J-Ea)<=aa.EPSILON*Math.max(1,Math.abs(J),Math.abs(Ea))&&Math.abs(T-Da)<=aa.EPSILON*Math.max(1,Math.abs(T),Math.abs(Da))&&Math.abs(U-Fa)<=aa.EPSILON*Math.max(1,Math.abs(U),Math.abs(Fa))&&Math.abs(ha-Pa)<=aa.EPSILON*Math.max(1,Math.abs(ha),Math.abs(Pa))&&Math.abs(ea-sa)<=aa.EPSILON*Math.max(1,Math.abs(ea),Math.abs(sa))&&Math.abs(L-bb)<=aa.EPSILON*Math.max(1,Math.abs(L),Math.abs(bb))&&Math.abs(Q-ab)<=aa.EPSILON*Math.max(1,Math.abs(Q),Math.abs(ab))&&Math.abs(da-
Qa)<=aa.EPSILON*Math.max(1,Math.abs(da),Math.abs(Qa))&&Math.abs(qa-b)<=aa.EPSILON*Math.max(1,Math.abs(qa),Math.abs(b))&&Math.abs(ra-$a)<=aa.EPSILON*Math.max(1,Math.abs(ra),Math.abs($a))&&Math.abs(wa-Ra)<=aa.EPSILON*Math.max(1,Math.abs(wa),Math.abs(Ra))&&Math.abs(ya-pb)<=aa.EPSILON*Math.max(1,Math.abs(ya),Math.abs(pb))&&Math.abs(Aa-ka)<=aa.EPSILON*Math.max(1,Math.abs(Aa),Math.abs(ka))&&Math.abs(c-p)<=aa.EPSILON*Math.max(1,Math.abs(c),Math.abs(p))}function Oa(c){const p=aa.EPSILON,fa=c[0],m=c[1],J=
c[2],T=c[4],U=c[5],ha=c[6],ea=c[8],L=c[9];c=c[10];return Math.abs(1-(fa*fa+T*T+ea*ea))<=p&&Math.abs(1-(m*m+U*U+L*L))<=p&&Math.abs(1-(J*J+ha*ha+c*c))<=p}const Sa=e.create();e=Object.freeze({__proto__:null,copy:ba,set:u,identity:K,transpose:A,invert:n,adjoint:t,determinant:w,multiply:H,translate:S,scale:R,rotate:h,rotateX:I,rotateY:d,rotateZ:l,fromTranslation:N,fromScaling:M,fromRotation:v,fromXRotation:C,fromYRotation:y,fromZRotation:q,fromRotationTranslation:z,fromQuat2:D,getTranslation:Y,getScaling:B,
getRotation:F,fromRotationTranslationScale:P,fromRotationTranslationScaleOrigin:W,fromQuat:G,frustum:r,perspective:a,perspectiveFromFieldOfView:k,ortho:O,lookAt:X,targetTo:ja,str:oa,frob:ma,add:la,subtract:pa,multiplyScalar:va,multiplyScalarAndAdd:Ba,exactEquals:Ka,equals:Ta,isOrthoNormal:Oa,mul:H,sub:pa});g.add=la;g.adjoint=t;g.copy=ba;g.determinant=w;g.equals=Ta;g.exactEquals=Ka;g.frob=ma;g.fromQuat=G;g.fromQuat2=D;g.fromRotation=v;g.fromRotationTranslation=z;g.fromRotationTranslationScale=P;g.fromRotationTranslationScaleOrigin=
W;g.fromScaling=M;g.fromTranslation=N;g.fromXRotation=C;g.fromYRotation=y;g.fromZRotation=q;g.frustum=r;g.getRotation=F;g.getScaling=B;g.getTranslation=Y;g.identity=K;g.invert=n;g.isOrthoNormal=Oa;g.lookAt=X;g.mat4=e;g.mul=H;g.multiply=H;g.multiplyScalar=va;g.multiplyScalarAndAdd=Ba;g.ortho=O;g.perspective=a;g.perspectiveFromFieldOfView=k;g.rotate=h;g.rotateX=I;g.rotateY=d;g.rotateZ=l;g.scale=R;g.set=u;g.str=oa;g.sub=pa;g.subtract=pa;g.targetTo=ja;g.translate=S;g.transpose=A})},"esri/chunks/pe":function(){define(["require",
"exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(g,e,aa,ba,u){function K(){return!!e._pe}function A(){return!!u("esri-wasm")}function n(){return h?h:h=(new Promise((d,l)=>g(["./pe-wasm"],d,l))).then(d=>d.peWasm).then(({default:d})=>d({locateFile:l=>ba.getAssetUrl(`esri/geometry/support/${l}`)})).then(d=>{t(d)})}function t(d){function l(v,C,y){v[C]=y(v[C])}e._pe=d;e.PeDefs.init();e.PeGTlistExtended.init();e.PeNotationMgrs.init();e.PeNotationUtm.init();e.PePCSInfo.init();
e.PeGCSExtent=function(v){function C(){return v.apply(this,arguments)||this}aa._inheritsLoose(C,v);C.prototype.destroy=function(){e._pe.destroy(this)};return C}(e._pe.PeGCSExtent);d=[e._pe.PeDatum,e._pe.PeGeogcs,e._pe.PeGeogtran,e._pe.PeObject,e._pe.PeParameter,e._pe.PePrimem,e._pe.PeProjcs,e._pe.PeSpheroid,e._pe.PeUnit];for(var N of d)l(N.prototype,"getName",v=>function(){return v.call(this,Array(e.PeDefs.PE_NAME_MAX))});for(const v of[e._pe.PeGeogtran,e._pe.PeProjcs])l(v.prototype,"getParameters",
C=>function(){const y=Array(e.PeDefs.PE_PARM_MAX);let q=C.call(this);for(let z=0;z<y.length;z++){const D=e._pe.getValue(q,"*");y[z]=D?e._pe.wrapPointer(D,e._pe.PeParameter):null;q+=Int32Array.BYTES_PER_ELEMENT}return y});l(e._pe.PeHorizon.prototype,"getCoord",v=>function(){const C=this.getSize();if(!C)return null;const y=[],q=v.call(this);R(y,C,q);return y});l(e._pe.PeGTlistExtendedEntry.prototype,"getEntries",v=>{const C=e._pe._pe_getPeGTlistExtendedGTsSize();return function(){let y=null;var q=v.call(this);
if(!e._pe.compare(q,e._pe.NULL)){y=[q];const z=this.getSteps();if(1<z){q=e._pe.getPointer(q);for(let D=1;D<z;D++)y.push(e._pe.wrapPointer(q+C*D,e._pe.PeGTlistExtendedGTs))}}return y}});const M=e._pe._pe_getPeHorizonSize();N=v=>function(){let C=this._cache;C||(this._cache=C=new Map);if(C.has(v))return C.get(v);let y=null;var q=v.call(this);if(!e._pe.compare(q,e._pe.NULL)){y=[q];const z=q.getNump();if(1<z){q=e._pe.getPointer(q);for(let D=1;D<z;D++)y.push(e._pe.wrapPointer(q+M*D,e._pe.PeHorizon))}}C.set(v,
y);return y};l(e._pe.PeProjcs.prototype,"horizonGcsGenerate",N);l(e._pe.PeProjcs.prototype,"horizonPcsGenerate",N);e._pe.PeObject.prototype.toString=function(v=e.PeDefs.PE_STR_OPTS_NONE){e._pe.ensureCache.prepare();const C=e._pe.getPointer(this),y=e._pe.ensureInt8(Array(e.PeDefs.PE_BUFFER_MAX));return e._pe.UTF8ToString(e._pe._pe_object_to_string_ext(C,v,y))}}function w(d){if(d){var l=e._pe.getClass(d);l&&(l=e._pe.getCache(l))&&(d=e._pe.getPointer(d))&&delete l[d]}}function H(d,l){const N=[];l=Array(l);
for(let M=0;M<d;M++)N.push(e._pe.ensureInt8(l));return N}function S(d){let l;Array.isArray(d[0])?(l=[],d.forEach(N=>{l.push(N[0],N[1])})):l=d;return l}function R(d,l,N,M=!1){if(M)for(M=0;M<2*l;M++)d[M]=e._pe.getValue(N+M*Float64Array.BYTES_PER_ELEMENT,"double");else{M=0===d.length;for(let v=0;v<l;v++)M&&(d[v]=Array(2)),d[v][0]=e._pe.getValue(N,"double"),d[v][1]=e._pe.getValue(N+Float64Array.BYTES_PER_ELEMENT,"double"),N+=2*Float64Array.BYTES_PER_ELEMENT}}let h;e._pe=null;e.PeCSTransformations=void 0;
(function(d){function l(v,C,y){e._pe.ensureCache.prepare();var q=S(y);const z=y===q;q=e._pe.ensureFloat64(q);(v=e._pe._pe_geog_to_proj(e._pe.getPointer(v),C,q))&&R(y,C,q,z);return v}function N(v,C,y){return M(v,C,y,0)}function M(v,C,y,q){e._pe.ensureCache.prepare();var z=S(y);const D=y===z;z=e._pe.ensureFloat64(z);(v=e._pe._pe_proj_to_geog_center(e._pe.getPointer(v),C,z,q))&&R(y,C,z,D);return v}d.geogToProj=l;d.projGeog=function(v,C,y,q){switch(q){case e.PeDefs.PE_TRANSFORM_P_TO_G:return N(v,C,y);
case e.PeDefs.PE_TRANSFORM_G_TO_P:return l(v,C,y)}return 0};d.projToGeog=N;d.projToGeogCenter=M})(e.PeCSTransformations||(e.PeCSTransformations={}));e.PeDefs=void 0;(function(d){d.init=function(){d.PE_BUFFER_MAX=e._pe.PeDefs.prototype.PE_BUFFER_MAX;d.PE_NAME_MAX=e._pe.PeDefs.prototype.PE_NAME_MAX;d.PE_MGRS_MAX=e._pe.PeDefs.prototype.PE_MGRS_MAX;d.PE_USNG_MAX=e._pe.PeDefs.prototype.PE_USNG_MAX;d.PE_DD_MAX=e._pe.PeDefs.prototype.PE_DD_MAX;d.PE_DDM_MAX=e._pe.PeDefs.prototype.PE_DDM_MAX;d.PE_DMS_MAX=
e._pe.PeDefs.prototype.PE_DMS_MAX;d.PE_UTM_MAX=e._pe.PeDefs.prototype.PE_UTM_MAX;d.PE_PARM_MAX=e._pe.PeDefs.prototype.PE_PARM_MAX;d.PE_TYPE_NONE=e._pe.PeDefs.prototype.PE_TYPE_NONE;d.PE_TYPE_GEOGCS=e._pe.PeDefs.prototype.PE_TYPE_GEOGCS;d.PE_TYPE_PROJCS=e._pe.PeDefs.prototype.PE_TYPE_PROJCS;d.PE_TYPE_GEOGTRAN=e._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;d.PE_TYPE_COORDSYS=e._pe.PeDefs.prototype.PE_TYPE_COORDSYS;d.PE_TYPE_UNIT=e._pe.PeDefs.prototype.PE_TYPE_UNIT;d.PE_TYPE_LINUNIT=e._pe.PeDefs.prototype.PE_TYPE_LINUNIT;
d.PE_STR_OPTS_NONE=e._pe.PeDefs.prototype.PE_STR_OPTS_NONE;d.PE_STR_AUTH_NONE=e._pe.PeDefs.prototype.PE_STR_AUTH_NONE;d.PE_STR_AUTH_TOP=e._pe.PeDefs.prototype.PE_STR_AUTH_TOP;d.PE_STR_NAME_CANON=e._pe.PeDefs.prototype.PE_STR_NAME_CANON;d.PE_PARM_X0=e._pe.PeDefs.prototype.PE_PARM_X0;d.PE_PARM_ND=e._pe.PeDefs.prototype.PE_PARM_ND;d.PE_TRANSFORM_1_TO_2=e._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;d.PE_TRANSFORM_2_TO_1=e._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;d.PE_TRANSFORM_P_TO_G=e._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;
d.PE_TRANSFORM_G_TO_P=e._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;d.PE_HORIZON_RECT=e._pe.PeDefs.prototype.PE_HORIZON_RECT;d.PE_HORIZON_POLY=e._pe.PeDefs.prototype.PE_HORIZON_POLY;d.PE_HORIZON_LINE=e._pe.PeDefs.prototype.PE_HORIZON_LINE;d.PE_HORIZON_DELTA=e._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(e.PeDefs||(e.PeDefs={}));e.PeFactory=void 0;(function(d){function l(C,y){let q=null,z=N[C];z||(z={},N[C]=z);z.hasOwnProperty(String(y))?q=z[y]:(C=e._pe.PeFactory.prototype.factoryByType(C,y),e._pe.compare(C,
e._pe.NULL)||(q=C,z[y]=q));return q=v(q)}const N={},M={},v=C=>{if(C){const y=C.getType();switch(y){case e.PeDefs.PE_TYPE_GEOGCS:C=e._pe.castObject(C,e._pe.PeGeogcs);break;case e.PeDefs.PE_TYPE_PROJCS:C=e._pe.castObject(C,e._pe.PeProjcs);break;case e.PeDefs.PE_TYPE_GEOGTRAN:C=e._pe.castObject(C,e._pe.PeGeogtran);break;default:y&e.PeDefs.PE_TYPE_UNIT&&(C=e._pe.castObject(C,e._pe.PeUnit))}}return C};d.initialize=function(){e._pe.PeFactory.prototype.initialize(null)};d.coordsys=function(C){return l(e.PeDefs.PE_TYPE_COORDSYS,
C)};d.factoryByType=l;d.fromString=function(C,y){let q=null,z=M[C];z||(z={},M[C]=z);z.hasOwnProperty(y)?q=z[y]:(C=e._pe.PeFactory.prototype.fromString(C,y),e._pe.compare(C,e._pe.NULL)||(q=C,z[y]=q));return q=v(q)};d.geogcs=function(C){return l(e.PeDefs.PE_TYPE_GEOGCS,C)};d.geogtran=function(C){return l(e.PeDefs.PE_TYPE_GEOGTRAN,C)};d.getCode=function(C){return e._pe.PeFactory.prototype.getCode(C)};d.projcs=function(C){return l(e.PeDefs.PE_TYPE_PROJCS,C)};d.unit=function(C){return l(e.PeDefs.PE_TYPE_UNIT,
C)}})(e.PeFactory||(e.PeFactory={}));e.PeGCSExtent=null;e.PeGTlistExtended=void 0;(function(d){let l;d.init=function(){d.PE_GTLIST_OPTS_COMMON=e._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;l=e._pe._pe_getPeGTlistExtendedEntrySize()};d.getGTlist=function(N,M,v,C,y,q){let z=null;const D=new e._pe.PeInteger(q);try{const Y=e._pe.PeGTlistExtended.prototype.getGTlist(N,M,v,C,y,D);if(q=D.val)if(z=[Y],1<q){const B=e._pe.getPointer(Y);for(N=1;N<q;N++)z.push(e._pe.wrapPointer(B+l*N,e._pe.PeGTlistExtendedEntry))}}finally{e._pe.destroy(D)}return z}})(e.PeGTlistExtended||
(e.PeGTlistExtended={}));e.PeGTlistExtendedEntry=void 0;(function(d){d.destroy=function(l){if(l&&l.length){for(const N of l)w(N),N.getEntries().forEach(M=>{w(M);M=M.getGeogtran();w(M);M.getParameters().forEach(w);[M.getGeogcs1(),M.getGeogcs2()].forEach(v=>{w(v);const C=v.getDatum();w(C);w(C.getSpheroid());w(v.getPrimem());w(v.getUnit())})});e._pe.PeGTlistExtendedEntry.prototype.Delete(l[0])}}})(e.PeGTlistExtendedEntry||(e.PeGTlistExtendedEntry={}));e.PeGTTransformations=void 0;(function(d){d.geogToGeog=
function(l,N,M,v,C){e._pe.ensureCache.prepare();var y=S(M);const q=M===y;y=e._pe.ensureFloat64(y);let z=0;v&&(z=e._pe.ensureFloat64(v));(l=e._pe._pe_geog_to_geog(e._pe.getPointer(l),N,y,z,C))&&R(M,N,y,q);return l}})(e.PeGTTransformations||(e.PeGTTransformations={}));e.PeNotationDms=void 0;(function(d){const l=(M,v,C,y,q,z)=>{e._pe.ensureCache.prepare();switch(M){case "dd":var D=e._pe._pe_geog_to_dd;var Y=e.PeDefs.PE_DD_MAX;break;case "ddm":D=e._pe._pe_geog_to_ddm;Y=e.PeDefs.PE_DDM_MAX;break;case "dms":D=
e._pe._pe_geog_to_dms,Y=e.PeDefs.PE_DMS_MAX}M=0;v&&(M=e._pe.getPointer(v));v=S(y);v=e._pe.ensureFloat64(v);Y=H(C,Y);y=e._pe.ensureInt32(Y);if(q=D(M,C,v,q,y))for(D=0;D<C;D++)z[D]=e._pe.UTF8ToString(Y[D]);return q},N=(M,v,C,y,q)=>{e._pe.ensureCache.prepare();switch(M){case "dd":var z=e._pe._pe_dd_to_geog;break;case "ddm":z=e._pe._pe_ddm_to_geog;break;case "dms":z=e._pe._pe_dms_to_geog}M=0;v&&(M=e._pe.getPointer(v));v=y.map(D=>e._pe.ensureString(D));y=e._pe.ensureInt32(v);v=e._pe.ensureFloat64(Array(2*
C));(z=z(M,C,y,v))&&R(q,C,v);return z};d.geogToDms=function(M,v,C,y,q){return l("dms",M,v,C,y,q)};d.dmsToGeog=function(M,v,C,y){return N("dms",M,v,C,y)};d.geogToDdm=function(M,v,C,y,q){return l("ddm",M,v,C,y,q)};d.ddmToGeog=function(M,v,C,y){return N("ddm",M,v,C,y)};d.geogToDd=function(M,v,C,y,q){return l("dd",M,v,C,y,q)};d.ddToGeog=function(M,v,C,y){return N("dd",M,v,C,y)}})(e.PeNotationDms||(e.PeNotationDms={}));e.PeNotationMgrs=void 0;(function(d){d.init=function(){d.PE_MGRS_STYLE_NEW=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;
d.PE_MGRS_STYLE_OLD=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;d.PE_MGRS_STYLE_AUTO=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;d.PE_MGRS_180_ZONE_1_PLUS=e._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;d.PE_MGRS_ADD_SPACES=e._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};d.geogToMgrsExtended=function(l,N,M,v,C,y,q){e._pe.ensureCache.prepare();let z=0;l&&(z=e._pe.getPointer(l));l=S(M);M=e._pe.ensureFloat64(l);l=H(N,e.PeDefs.PE_MGRS_MAX);const D=e._pe.ensureInt32(l);if(v=e._pe._pe_geog_to_mgrs_extended(z,
N,M,v,C,y,D))for(C=0;C<N;C++)q[C]=e._pe.UTF8ToString(l[C]);return v};d.mgrsToGeogExtended=function(l,N,M,v,C){e._pe.ensureCache.prepare();let y=0;l&&(y=e._pe.getPointer(l));l=M.map(q=>e._pe.ensureString(q));M=e._pe.ensureInt32(l);l=e._pe.ensureFloat64(Array(2*N));(v=e._pe._pe_mgrs_to_geog_extended(y,N,M,v,l))&&R(C,N,l);return v}})(e.PeNotationMgrs||(e.PeNotationMgrs={}));e.PeNotationUsng=void 0;(function(d){d.geogToUsng=function(l,N,M,v,C,y,q){e._pe.ensureCache.prepare();let z=0;l&&(z=e._pe.getPointer(l));
l=S(M);M=e._pe.ensureFloat64(l);l=H(N,e.PeDefs.PE_MGRS_MAX);const D=e._pe.ensureInt32(l);if(v=e._pe._pe_geog_to_usng(z,N,M,v,C,y,D))for(C=0;C<N;C++)q[C]=e._pe.UTF8ToString(l[C]);return v};d.usngToGeog=function(l,N,M,v){e._pe.ensureCache.prepare();var C=0;l&&(C=e._pe.getPointer(l));l=M.map(y=>e._pe.ensureString(y));M=e._pe.ensureInt32(l);l=e._pe.ensureFloat64(Array(2*N));(C=e._pe._pe_usng_to_geog(C,N,M,l))&&R(v,N,l);return C}})(e.PeNotationUsng||(e.PeNotationUsng={}));e.PeNotationUtm=void 0;(function(d){d.init=
function(){d.PE_UTM_OPTS_NONE=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;d.PE_UTM_OPTS_ADD_SPACES=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;d.PE_UTM_OPTS_NS=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};d.geogToUtm=function(l,N,M,v,C){e._pe.ensureCache.prepare();var y=0;l&&(y=e._pe.getPointer(l));l=S(M);M=e._pe.ensureFloat64(l);l=H(N,e.PeDefs.PE_UTM_MAX);const q=e._pe.ensureInt32(l);if(v=e._pe._pe_geog_to_utm(y,N,M,v,q))for(y=0;y<N;y++)C[y]=e._pe.UTF8ToString(l[y]);return v};d.utmToGeog=
function(l,N,M,v,C){e._pe.ensureCache.prepare();let y=0;l&&(y=e._pe.getPointer(l));l=M.map(q=>e._pe.ensureString(q));M=e._pe.ensureInt32(l);l=e._pe.ensureFloat64(Array(2*N));(v=e._pe._pe_utm_to_geog(y,N,M,v,l))&&R(C,N,l);return v}})(e.PeNotationUtm||(e.PeNotationUtm={}));e.PePCSInfo=void 0;(function(d){const l=new Map;d.init=function(){d.PE_PCSINFO_OPTION_NONE=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;d.PE_PCSINFO_OPTION_DOMAIN=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;d.PE_POLE_OUTSIDE_BOUNDARY=
e._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;d.PE_POLE_POINT=e._pe.PePCSInfo.prototype.PE_POLE_POINT};d.generate=function(N,M=d.PE_PCSINFO_OPTION_DOMAIN){let v,C;l.has(N)&&(C=l.get(N),C[M]&&(v=C[M]));v||(v=e._pe.PePCSInfo.prototype.generate(N,M),C||(C=[],l.set(N,C)),C[M]=v);return v}})(e.PePCSInfo||(e.PePCSInfo={}));e.PeVersion=void 0;(function(d){d.versionString=function(){return e._pe.PeVersion.prototype.version_string()}})(e.PeVersion||(e.PeVersion={}));const I=Object.freeze({__proto__:null,
get _pe(){return e._pe},isLoaded:K,isSupported:A,load:n,get PeCSTransformations(){return e.PeCSTransformations},get PeDefs(){return e.PeDefs},get PeFactory(){return e.PeFactory},get PeGCSExtent(){return e.PeGCSExtent},get PeGTlistExtended(){return e.PeGTlistExtended},get PeGTlistExtendedEntry(){return e.PeGTlistExtendedEntry},get PeGTTransformations(){return e.PeGTTransformations},get PeNotationDms(){return e.PeNotationDms},get PeNotationMgrs(){return e.PeNotationMgrs},get PeNotationUsng(){return e.PeNotationUsng},
get PeNotationUtm(){return e.PeNotationUtm},get PePCSInfo(){return e.PePCSInfo},get PeVersion(){return e.PeVersion},_init:t});e._init=t;e.isLoaded=K;e.isSupported=A;e.load=n;e.pe=I})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(g,e){const aa=Math.PI/180;var ba=e.earth.radius;const u=e.earth.eccentricitySquared;ba={a1:ba*u,a2:ba*u*ba*u,a3:ba*u*u/2,a4:ba*u*ba*u*2.5,a5:ba*u+ba*u*u/2,a6:1-u};e={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},
4326:{a:e.earth.radius,f:e.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:e.moon.radius,f:e.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:e.mars.radius,f:e.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,
f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,
f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},
104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:e.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};g.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;g.earthEllipsoidConstants=ba;g.spheroids=e;g.toRadians=aa;Object.defineProperty(g,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(g){return function(){function e(ba){this.steps=
[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(ba&&ba.steps)for(const u of ba.steps)u instanceof g?this.steps.push(u):this.steps.push(new g({wkid:u.wkid,wkt:u.wkt,isInverse:u.isInverse}))}e.cacheKey=function(ba,u){return[void 0!==ba.wkid&&null!==ba.wkid?ba.wkid.toString():"-1",void 0!==ba.wkt&&null!==ba.wkt?ba.wkt.toString():"",void 0!==u.wkid&&null!==u.wkid?u.wkid.toString():"-1",void 0!==u.wkt&&null!==u.wkt?u.wkt.toString():""].join()};e.fromGE=function(ba){const u=new e;
let K="";for(const A of ba.steps)ba=g.fromGE(A),u.steps.push(ba),K+=ba.uid.toString()+",";u._cached_projection={};u._gtlistentry=null;u._chain=K;return u};var aa=e.prototype;aa.getInverse=function(){const ba=new e;ba.steps=[];for(let u=this.steps.length-1;0<=u;u--)ba.steps.push(this.steps[u].getInverse());return ba};aa.getGTListEntry=function(){let ba="";for(const u of this.steps)ba+=u.uid.toString()+",";ba!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=ba);return this._gtlistentry};
aa.assignCachedGe=function(ba,u,K){this._cached_projection[e.cacheKey(ba,u)]=K};aa.getCachedGeTransformation=function(ba,u){let K="";for(const A of this.steps)K+=A.uid.toString()+",";K!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=K);ba=this._cached_projection[e.cacheKey(ba,u)];return void 0===ba?null:ba};return e}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(g){let e=0;return function(){function aa(ba=
null){this.uid=e++;ba?(this._wkt=void 0!==ba.wkt?ba.wkt:null,this._wkid=void 0!==ba.wkid?ba.wkid:-1,this._isInverse=void 0!==ba.isInverse?!0===ba.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}aa.fromGE=function(ba){const u=new aa;u._wkt=ba.wkt;u._wkid=ba.wkid;u._isInverse=ba.isInverse;return u};aa.prototype.getInverse=function(){const ba=new aa;ba._wkt=this.wkt;ba._wkid=this._wkid;ba._isInverse=!this.isInverse;return ba};g._createClass(aa,[{key:"wkt",get:function(){return this._wkt},
set:function(ba){this._wkt=ba;this.uid=e++}},{key:"wkid",get:function(){return this._wkid},set:function(ba){this._wkid=ba;this.uid=e++}},{key:"isInverse",get:function(){return this._isInverse},set:function(ba){this._isInverse=ba;this.uid=e++}}]);return aa}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(g,e,aa,ba){g.getGeometryZScaler=function(u,K,A){if(e.isNone(K)||e.isNone(A)||A.vcsWkid||ba.equals(K,A))return null;
K=aa.getMetersPerVerticalUnitForSR(K);A=aa.getMetersPerVerticalUnitForSR(A);const n=K/A;if(1===n)return null;switch(u){case "point":case "esriGeometryPoint":return t=>{t&&null!=t.z&&(t.z*=n)};case "polyline":case "esriGeometryPolyline":return t=>{if(t)for(const w of t.paths)for(const H of w)2<H.length&&(H[2]*=n)};case "polygon":case "esriGeometryPolygon":return t=>{if(t)for(const w of t.rings)for(const H of w)2<H.length&&(H[2]*=n)};case "multipoint":case "esriGeometryMultipoint":return t=>{if(t)for(const w of t.points)2<
w.length&&(w[2]*=n)};case "extent":case "esriGeometryExtent":return t=>{t&&null!=t.zmin&&null!=t.zmax&&(t.zmin*=n,t.zmax*=n)};default:return null}};Object.defineProperty(g,"__esModule",{value:!0})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(g){let e=function(A,n,t){this.x=A;this.y=n;this.spatialReference=t;this.m=this.z=void 0},aa=function(A,n,t,w){this.rings=A;this.spatialReference=n;this.hasM=this.hasZ=void 0;t&&(this.hasZ=t);w&&(this.hasM=w)},ba=function(A,n,
t,w){this.paths=A;this.spatialReference=n;this.hasM=this.hasZ=void 0;t&&(this.hasZ=t);w&&(this.hasM=w)},u=function(A,n,t,w){this.points=A;this.spatialReference=n;this.hasM=this.hasZ=void 0;t&&(this.hasZ=t);w&&(this.hasM=w)},K=function(A,n,t,w,H){this.xmin=A;this.ymin=n;this.xmax=t;this.ymax=w;this.spatialReference=H;this.mmax=this.mmin=this.zmax=this.zmin=void 0};g.jsonAdapter={convertToGEGeometry:function(A,n){return null==n?null:A.convertJSONToGeometry(n)},exportPoint:function(A,n,t){t=new e(A.getPointX(n),
A.getPointY(n),t);const w=A.hasZ(n),H=A.hasM(n);w&&(t.z=A.getPointZ(n));H&&(t.m=A.getPointM(n));return t},exportPolygon:function(A,n,t){return new aa(A.exportPaths(n),t,A.hasZ(n),A.hasM(n))},exportPolyline:function(A,n,t){return new ba(A.exportPaths(n),t,A.hasZ(n),A.hasM(n))},exportMultipoint:function(A,n,t){return new u(A.exportPoints(n),t,A.hasZ(n),A.hasM(n))},exportExtent:function(A,n,t){var w=A.hasZ(n);const H=A.hasM(n);t=new K(A.getXMin(n),A.getYMin(n),A.getXMax(n),A.getYMax(n),t);w&&(w=A.getZExtent(n),
t.zmin=w.vmin,t.zmax=w.vmax);H&&(A=A.getMExtent(n),t.mmin=A.vmin,t.mmax=A.vmax);return t}};Object.defineProperty(g,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(g,e,aa,ba,u,K,A,n,t,w,H,S,R,h,I,d,l,N,M,v,C,y,q){function z(G){return G.every(r=>"exceedslimit"!==r.statisticType)}const D=new Set,Y=new K.MemCacheStorage(2E6);let B=0,F=function(){function G(a){this.capabilities={query:d.queryCapabilities};this.geometryType=a.geometryType;this.hasM=a.hasM;this.hasZ=a.hasZ;this.objectIdField=a.objectIdField;this.spatialReference=a.spatialReference;this.definitionExpression=a.definitionExpression;this.featureStore=a.featureStore;this.aggregateAdapter=a.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=a.timeInfo;a.cacheSpatialQueries&&(this._geometryQueryCache=new K.MemCache(B++ +"$$",Y));this.fieldsIndex=new C(a.fields);a.scheduler&&a.priority&&(this._frameTask=a.scheduler.registerTask(a.priority))}var r=G.prototype;r.destroy=function(){this._frameTask=u.removeMaybe(this._frameTask);this.clearCache();u.destroyMaybe(this._geometryQueryCache);this._changeHandle=u.removeMaybe(this._changeHandle);u.destroyMaybe(this.fieldsIndex)};
r.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};r.executeQuery=function(){var a=e._asyncToGenerator(function*(k={},O){let X=ba.clone(k),ja;try{X=yield this._schedule(()=>v.normalizeQuery(X,this.definitionExpression,this.spatialReference),O),X=yield this._reschedule(()=>this._checkQuerySupport(X),O),ja=yield this._reschedule(()=>this._executeGeometryQuery(X,O),O),ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(X),O),
ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(X),O),ja=yield this._reschedule(()=>ja.executeTimeQuery(X),O),ja=yield this._reschedule(()=>ja.executeAttributesQuery(X),O)}catch(oa){if(oa!==v.QUERY_ENGINE_EMPTY_RESULT)throw oa;ja=new l.default([],null,this)}return ja.createQueryResponse(X)});return function(){return a.apply(this,arguments)}}();r.executeQueryForCount=function(){var a=e._asyncToGenerator(function*(k={},O){let X=ba.clone(k);X.returnGeometry=!1;X.returnCentroid=!1;X.outSR=null;
try{X=yield this._schedule(()=>v.normalizeQuery(X,this.definitionExpression,this.spatialReference),O);X=yield this._reschedule(()=>this._checkQuerySupport(X),O);let ja=yield this._reschedule(()=>this._executeGeometryQuery(X,O),O);ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(X),O);ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(X),O);ja=yield this._reschedule(()=>ja.executeTimeQuery(X),O);ja=yield this._reschedule(()=>ja.executeAttributesQuery(X),O);return ja.createQueryResponseForCount(X)}catch(ja){if(ja!==
v.QUERY_ENGINE_EMPTY_RESULT)throw ja;return 0}});return function(){return a.apply(this,arguments)}}();r.executeQueryForExtent=function(){var a=e._asyncToGenerator(function*(k={},O){let X=ba.clone(k),ja;k=X.outSR;try{X=yield this._schedule(()=>v.normalizeQuery(X,this.definitionExpression,this.spatialReference),O);X=yield this._reschedule(()=>this._checkQuerySupport(X),O);X.returnGeometry=!0;X.returnCentroid=!1;X.outSR=null;ja=yield this._reschedule(()=>this._executeGeometryQuery(X,O),O);ja=yield this._reschedule(()=>
ja.executeAggregateIdsQuery(X),O);ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(X),O);ja=yield this._reschedule(()=>ja.executeTimeQuery(X),O);ja=yield this._reschedule(()=>ja.executeAttributesQuery(X),O);const oa=ja.size;if(!oa)return{count:oa,extent:null};n.set(W,n.NEGATIVE_INFINITY);this.featureStore.forEachBounds(ja.items,pa=>n.expandWithAABB(W,pa),P);const ma={xmin:W[0],ymin:W[1],xmax:W[3],ymax:W[4],spatialReference:v.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(W[2])&&
isFinite(W[5])&&(ma.zmin=W[2],ma.zmax=W[5]);const la=I.project(ma,ja.spatialReference,k);la.spatialReference=v.cleanFromGeometryEngine(k||this.spatialReference);if(0===la.xmax-la.xmin){const pa=A.getMetersPerUnitForSR(la.spatialReference);la.xmin-=pa;la.xmax+=pa}if(0===la.ymax-la.ymin){const pa=A.getMetersPerUnitForSR(la.spatialReference);la.ymin-=pa;la.ymax+=pa}if(this.hasZ&&null!=la.zmin&&null!=la.zmax&&0===la.zmax-la.zmin){const pa=A.getMetersPerUnitForSR(la.spatialReference);la.zmin-=pa;la.zmax+=
pa}return{count:oa,extent:la}}catch(oa){if(oa===v.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw oa;}});return function(){return a.apply(this,arguments)}}();r.executeQueryForIds=function(){var a=e._asyncToGenerator(function*(k={},O){return this.executeQueryForIdSet(k,O).then(X=>Array.from(X))});return function(){return a.apply(this,arguments)}}();r.executeQueryForIdSet=function(){var a=e._asyncToGenerator(function*(k={},O){let X=ba.clone(k),ja;X.returnGeometry=!1;X.returnCentroid=!1;
X.outSR=null;try{X=yield this._schedule(()=>v.normalizeQuery(X,this.definitionExpression,this.spatialReference),O);X=yield this._reschedule(()=>this._checkQuerySupport(X),O);ja=yield this._reschedule(()=>this._executeGeometryQuery(X,O),O);ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(X),O);ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(X),O);ja=yield this._reschedule(()=>ja.executeTimeQuery(X),O);ja=yield this._reschedule(()=>ja.executeAttributesQuery(X),O);const oa=ja.items,ma=
new Set;yield this._reschedule(()=>{for(const la of oa)ma.add(ja.featureAdapter.getObjectId(la))},O);return ma}catch(oa){if(oa===v.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw oa;}});return function(){return a.apply(this,arguments)}}();r.executeQueryForSnapping=function(){var a=e._asyncToGenerator(function*(k,O){const {point:X,distance:ja,types:oa}=k;if(oa===l.SnappingTypes.NONE)return{candidates:[]};const ma=yield this._reschedule(()=>this._checkQuerySupport(k.query),O),la=!R.equals(X.spatialReference,
this.spatialReference);la&&(yield I.checkProjectionSupport(X.spatialReference,this.spatialReference));var pa="number"===typeof ja?ja:ja.x,va="number"===typeof ja?ja:ja.y;pa={xmin:X.x-pa,xmax:X.x+pa,ymin:X.y-va,ymax:X.y+va,spatialReference:X.spatialReference};pa=la?I.project(pa,this.spatialReference):pa;if(!pa)return{candidates:[]};va=(yield S.normalizeCentralMeridian(H.fromJSON(X),null,{signal:O}))[0];const Ba=(yield S.normalizeCentralMeridian(H.fromJSON(pa),null,{signal:O}))[0];if(u.isNone(va)||
u.isNone(Ba))return{candidates:[]};let Ka=new l.default(this._searchFeatures(this._getQueryBBoxes(Ba.toJSON())),null,this);Ka=yield this._reschedule(()=>Ka.executeObjectIdsQuery(ma),O);Ka=yield this._reschedule(()=>Ka.executeTimeQuery(ma),O);Ka=yield this._reschedule(()=>Ka.executeAttributesQuery(ma),O);O=va.toJSON();O=la?I.project(O,this.spatialReference):O;return Ka.createSnappingResponse({...k,point:O,distance:la?Math.max(pa.xmax-pa.xmin,pa.ymax-pa.ymin)/2:ja},X.spatialReference)});return function(k,
O){return a.apply(this,arguments)}}();r.executeQueryForLatestObservations=function(){var a=e._asyncToGenerator(function*(k={},O){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new aa("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:k,timeInfo:this.timeInfo});let X=ba.clone(k),ja;try{X=yield this._schedule(()=>v.normalizeQuery(X,this.definitionExpression,this.spatialReference),O),X=yield this._reschedule(()=>this._checkQuerySupport(X),O),ja=yield this._reschedule(()=>
this._executeGeometryQuery(X,O),O),ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(X),O),ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(X),O),ja=yield this._reschedule(()=>ja.executeTimeQuery(X),O),ja=yield this._reschedule(()=>ja.executeAttributesQuery(X),O),ja=yield this._reschedule(()=>ja.filterLatest(),O)}catch(oa){if(oa!==v.QUERY_ENGINE_EMPTY_RESULT)throw oa;ja=new l.default([],null,this)}return ja.createQueryResponse(X)});return function(){return a.apply(this,arguments)}}();
r.executeQueryForSummaryStatistics=function(){var a=e._asyncToGenerator(function*(k={},O,X){const {field:ja,normalizationField:oa,valueExpression:ma}=O;return(yield this._getQueryEngineResultForStats(k,{field:ja,normalizationField:oa,valueExpression:ma},X)).createSummaryStatisticsResponse(k,O)});return function(){return a.apply(this,arguments)}}();r.executeQueryForUniqueValues=function(){var a=e._asyncToGenerator(function*(k={},O,X){const {field:ja,valueExpression:oa}=O;return(yield this._getQueryEngineResultForStats(k,
{field:ja,valueExpression:oa},X)).createUniqueValuesResponse(k,O)});return function(){return a.apply(this,arguments)}}();r.executeQueryForClassBreaks=function(){var a=e._asyncToGenerator(function*(k={},O,X){const {field:ja,normalizationField:oa,valueExpression:ma}=O;return(yield this._getQueryEngineResultForStats(k,{field:ja,normalizationField:oa,valueExpression:ma},X)).createClassBreaksResponse(k,O)});return function(){return a.apply(this,arguments)}}();r.executeQueryForHistogram=function(){var a=
e._asyncToGenerator(function*(k={},O,X){const {field:ja,normalizationField:oa,valueExpression:ma}=O;return(yield this._getQueryEngineResultForStats(k,{field:ja,normalizationField:oa,valueExpression:ma},X)).createHistogramResponse(k,O)});return function(){return a.apply(this,arguments)}}();r._schedule=function(){var a=e._asyncToGenerator(function*(k,O){return u.isSome(this._frameTask)?this._frameTask.schedule(k,O):k(q.noBudget)});return function(k,O){return a.apply(this,arguments)}}();r._reschedule=
function(){var a=e._asyncToGenerator(function*(k,O){return u.isSome(this._frameTask)?this._frameTask.reschedule(k,O):k(q.noBudget)});return function(k,O){return a.apply(this,arguments)}}();r._getAll=function(){if(!this._allItems){const a=[];this.featureStore.forEach(k=>a.push(k));this._allItems=new l.default(a,null,this)}return this._allItems};r._executeGeometryQuery=function(){var a=e._asyncToGenerator(function*(k,O){var X=this;const {geometry:ja,outSR:oa,spatialRel:ma,returnGeometry:la,returnCentroid:pa}=
k;var va=this.featureStore.featureSpatialReference;const Ba=ja&&va&&va!==ja.spatialReference?I.project(ja,va):ja,Ka=la||pa,Ta=R.isValid(oa)&&!R.equals(this.spatialReference,oa),Oa=this._geometryQueryCache?Ta&&Ka?JSON.stringify({originalFilterGeometry:ja,spatialRelationship:ma,outSpatialReference:oa}):JSON.stringify({originalFilterGeometry:ja,spatialRelationship:ma}):null;if(Oa&&(va=this._geometryQueryCache.get(Oa),!u.isUndefined(va)))return va;va=function(){var fa=e._asyncToGenerator(function*(m){if(Ta&&
Ka)return m=yield m.project(oa),Oa&&X._geometryQueryCache.put(Oa,m,m.size||1),m;Oa&&X._geometryQueryCache.put(Oa,m,m.size||1);return m});return function(m){return fa.apply(this,arguments)}}();if(!Ba)return va(this._getAll());const Sa=this.featureAdapter;if("esriSpatialRelDisjoint"===ma){k=this._searchFeatures(this._getQueryBBoxes(ja));if(!k.length)return va(this._getAll());let fa,m;const J=new Set;for(var c of k)J.add(Sa.getObjectId(c));yield this._reschedule(()=>{let T=0;fa=Array(J.size);this.featureStore.forEach(U=>
fa[T++]=U);m=J},O);k=yield this._reschedule(e._asyncToGenerator(function*(){const T=yield N.getSpatialQueryOperator(ma,Ba,X.geometryType,X.hasZ,X.hasM);return new l.default(yield X._runSpatialFilter(fa,U=>!m.has(Sa.getObjectId(U))||T(Sa.getGeometry(U)),O),ja,X)}),O);return va(k)}c=this._searchFeatures(this._getQueryBBoxes(ja));if(!c.length)return va=new l.default([],ja,this),Oa&&this._geometryQueryCache.put(Oa,va,va.size||1),va;if(this._canExecuteSoloPass(Ba,k))return va(new l.default(c,ja,this));
const p=yield N.getSpatialQueryOperator(ma,Ba,this.geometryType,this.hasZ,this.hasM);k=yield this._runSpatialFilter(c,fa=>p(Sa.getGeometry(fa)),O);return va(new l.default(k,ja,this))});return function(k,O){return a.apply(this,arguments)}}();r._runSpatialFilter=function(){var a=e._asyncToGenerator(function*(k,O,X){var ja=this;if(!O)return k;if(u.isNone(this._frameTask))return k.filter(pa=>O(pa));let oa=0;const ma=[],la=function(){var pa=e._asyncToGenerator(function*(va){for(;oa<k.length;){const Ba=
k[oa++];O(Ba)&&(ma.push(Ba),va.madeProgress());va.done&&(yield ja._reschedule(Ka=>la(Ka),X))}});return function(va){return pa.apply(this,arguments)}}();return this._reschedule(pa=>la(pa),X).then(()=>ma)});return function(k,O,X){return a.apply(this,arguments)}}();r._canExecuteSoloPass=function(a,k){const {geometryType:O}=this;({spatialRel:k}=k);return N.canQueryWithRBush(a)&&("esriSpatialRelEnvelopeIntersects"===k||"esriGeometryPoint"===O&&("esriSpatialRelIntersects"===k||"esriSpatialRelContains"===
k||"esriSpatialRelWithin"===k))};r._getQueryBBoxes=function(a){if(N.canQueryWithRBush(a)){if(H.isExtent(a))return[t.fromValues(a.xmin,a.ymin,a.xmax,a.ymax)];if(H.isPolygon(a))return a.rings.map(k=>t.fromValues(Math.min(k[0][0],k[2][0]),Math.min(k[0][1],k[2][1]),Math.max(k[0][0],k[2][0]),Math.max(k[0][1],k[2][1])))}return[w.getBoundsXY(t.create(),a)]};r._searchFeatures=function(a){for(const X of a)this.featureStore.forEachInBounds(X,ja=>{D.add(ja)});const k=Array(D.size);let O=0;D.forEach(X=>k[O++]=
X);D.clear();return k};r._checkStatisticsSupport=function(){var a=e._asyncToGenerator(function*(k,O){if(0>k.distance||null!=k.geometryPrecision||k.multipatchOption||k.pixelSize||k.relationParam||k.text||k.outStatistics||k.groupByFieldsForStatistics||k.having||k.orderByFields)throw new aa("feature-store:unsupported-query","Unsupported query options",{query:k});return Promise.all([this._checkAttributesQuerySupport(k),this._checkStatisticsParamsSupport(O),N.checkSpatialQuerySupport(k,this.geometryType,
this.spatialReference),I.checkProjectionSupport(this.spatialReference,k.outSR)]).then(()=>k)});return function(k,O){return a.apply(this,arguments)}}();r._checkStatisticsParamsSupport=function(){var a=e._asyncToGenerator(function*(k){var O=[];k.valueExpression&&({arcadeUtils:O}=yield y.loadArcade(),O=O.extractFieldNames(k.valueExpression));k.field&&O.push(k.field);k.normalizationField&&O.push(k.normalizationField);if(!O.length)throw new aa("feature-store:unsupported-query","params should have at least a field or valueExpression",
{params:k});h.validateFields(this.fieldsIndex,O,"params contains missing fields")});return function(k){return a.apply(this,arguments)}}();r._checkQuerySupport=function(){var a=e._asyncToGenerator(function*(k){if(0>k.distance||null!=k.geometryPrecision||k.multipatchOption||k.pixelSize||k.relationParam||k.text)throw new aa("feature-store:unsupported-query","Unsupported query options",{query:k});return Promise.all([this._checkAttributesQuerySupport(k),this._checkStatisticsQuerySupport(k),N.checkSpatialQuerySupport(k,
this.geometryType,this.spatialReference),I.checkProjectionSupport(this.spatialReference,k.outSR)]).then(()=>k)});return function(k){return a.apply(this,arguments)}}();r._checkAttributesQuerySupport=function(a){const {outFields:k,orderByFields:O,returnDistinctValues:X,outStatistics:ja}=a,oa=ja?ja.map(ma=>ma.outStatisticFieldName&&ma.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(O&&0<O.length){const ma=O.map(la=>{const pa=la.toLowerCase();return-1<pa.indexOf(" asc")?pa.split(" asc")[0]:
-1<pa.indexOf(" desc")?pa.split(" desc")[0]:la}).filter(la=>-1===oa.indexOf(la));h.validateFields(this.fieldsIndex,ma,"orderByFields contains missing fields")}if(k&&0<k.length)h.validateFields(this.fieldsIndex,k,"outFields contains missing fields");else if(X)throw new aa("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:a});h.validateWhere(this.fieldsIndex,a.where)};r._checkStatisticsQuerySupport=function(){var a=e._asyncToGenerator(function*(k){const {outStatistics:O,
groupByFieldsForStatistics:X,having:ja}=k;var oa=X&&X.length,ma=O&&O.length;if(ja){if(!oa||!ma)throw new aa("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:k});h.validateHaving(this.fieldsIndex,ja,O)}if(ma&&z(O)){ma=O.map(la=>la.onStatisticField).filter(Boolean);h.validateFields(this.fieldsIndex,ma,"onStatisticFields contains missing fields");oa&&h.validateFields(this.fieldsIndex,X,"groupByFieldsForStatistics contains missing fields");
for(const la of O){const {onStatisticField:pa,statisticType:va}=la;if(("percentile_disc"===va||"percentile_cont"===va)&&"statisticParameters"in la){if({statisticParameters:oa}=la,!oa)throw new aa("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:la,query:k});}else if("count"!==va&&pa&&h.hasInvalidFieldType(pa,this.fieldsIndex))throw new aa("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:la,query:k});}}});
return function(k){return a.apply(this,arguments)}}();r._getQueryEngineResultForStats=function(){var a=e._asyncToGenerator(function*(k={},O,X){k=ba.clone(k);let ja;try{k=yield this._schedule(()=>v.normalizeQuery(k,this.definitionExpression,this.spatialReference),X),k=yield this._reschedule(()=>this._checkStatisticsSupport(k,O),X),ja=yield this._reschedule(()=>this._executeGeometryQuery(k,X),X),ja=yield this._reschedule(()=>ja.executeAggregateIdsQuery(k),X),ja=yield this._reschedule(()=>ja.executeObjectIdsQuery(k),
X),ja=yield this._reschedule(()=>ja.executeTimeQuery(k),X),ja=yield this._reschedule(()=>ja.executeAttributesQuery(k),X)}catch(oa){if(oa!==v.QUERY_ENGINE_EMPTY_RESULT)throw oa;ja=new l.default([],null,this)}return ja});return function(){return a.apply(this,arguments)}}();e._createClass(G,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const a=this.featureStore.fullBounds;return a?{xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:v.cleanFromGeometryEngine(this.spatialReference)}:
null}},{key:"timeExtent",get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=M.getTimeExtent(this.timeInfo,this.featureStore):null}}]);return G}();const P=n.create(),W=n.create();g.Feature=function(G,r=null,a,k,O){this.attributes=G;this.geometry=a;this.centroid=k;this.filterFlags=O;this.groupId=-1;this.displayId=r};g.default=F;Object.defineProperty(g,"__esModule",{value:!0})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers",
"./maybe","./PooledArray"],function(g,e,aa,ba){g.RemoveMode=void 0;(function(A){A[A.ALL=0]="ALL";A[A.SOME=1]="SOME"})(g.RemoveMode||(g.RemoveMode={}));let u=function(){function A(t,w,H){this._namespace=t;this._storage=w;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";H&&(this._storage.registerRemoveFunc(this._namespace,H),this._removeFunc=!0)}var n=A.prototype;n.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);
this._storage.deregister(this);this._storage=null};n.resetHitRate=function(){this._hit=this._miss=0};n.put=function(t,w,H,S=0){this._storage.put(this._namespace+t,w,H,S)};n.get=function(t){t=this._storage.get(this._namespace+t);void 0===t?++this._miss:++this._hit;return t};n.pop=function(t){t=this._storage.pop(this._namespace+t);void 0===t?++this._miss:++this._hit;return t};n.updateSize=function(t,w,H){this._storage.updateSize(this._namespace+t,w,H)};n.clear=function(){this._storage.clear(this._namespace)};
n.clearAll=function(){this._storage.clearAll()};n.getStats=function(){return this._storage.getStats()};n.resetStats=function(){this._storage.resetStats()};e._createClass(A,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return A}(),K=function(){function A(t=10485760){this._maxSize=t;this._db=
new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new ba;this._users=new ba}var n=A.prototype;n.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};n.register=function(t){this._users.push(t)};n.deregister=function(t){this._users.removeUnordered(t)};n.registerRemoveFunc=function(t,w){this._removeFuncs.push([t,w])};n.deregisterRemoveFunc=function(t){this._removeFuncs.filterInPlace(w=>w[0]!==t)};n.put=function(t,w,H,S){const R=this._db.get(t);R&&
(this._size-=R.size,this._db.delete(t),R.entry!==w&&this._notifyRemove(t,R.entry,g.RemoveMode.ALL));H>this._maxSize?this._notifyRemove(t,w,g.RemoveMode.ALL):void 0===w?console.warn("Refusing to cache undefined entry "):!H||0>H?console.warn("Refusing to cache entry with invalid size "+H):(S=1+Math.max(S,-3)- -3,this._db.set(t,{entry:w,size:H,lifetime:S,lives:S}),this._size+=H,this._checkSizeLimit())};n.updateSize=function(t,w,H){const S=this._db.get(t);if(S&&S.entry===w){for(this._size-=S.size;H>this._maxSize;)if(H=
this._notifyRemove(t,w,g.RemoveMode.SOME),!(aa.isSome(H)&&0<H)){this._db.delete(t);return}S.size=H;this._size+=H;this._checkSizeLimit()}};n.pop=function(t){const w=this._db.get(t);if(w)return this._size-=w.size,this._db.delete(t),++this._hit,w.entry;++this._miss};n.get=function(t){const w=this._db.get(t);if(void 0===w)++this._miss;else return this._db.delete(t),w.lives=w.lifetime,this._db.set(t,w),++this._hit,w.entry};n.getStats=function(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/
1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},w={},H=[];this._db.forEach((h,I)=>{const d=h.lifetime;H[d]=(H[d]||0)+h.size;this._users.forAll(l=>{l=l.namespace;I.startsWith(l)&&(w[l]=(w[l]||0)+h.size)})});const S={};this._users.forAll(h=>{const I=h.namespace;!isNaN(h.hitRate)&&0<h.hitRate?(w[I]=w[I]||0,S[I]=Math.round(100*h.hitRate)+"%"):S[I]="0%"});var R=Object.keys(w);R.sort((h,I)=>w[I]-w[h]);R.forEach(h=>t[h]=Math.round(w[h]/2**20)+"MB / "+S[h]);
for(R=H.length-1;0<=R;--R){const h=H[R];h&&(t["Priority "+(R+-3-1)]=Math.round(h/this.size*100)+"%")}return t};n.resetStats=function(){this._hit=this._miss=0;this._users.forAll(t=>t.resetHitRate())};n.clear=function(t){this._db.forEach((w,H)=>{H.startsWith(t)&&(this._size-=w.size,this._db.delete(H),this._notifyRemove(H,w.entry,g.RemoveMode.ALL))})};n.clearAll=function(){this._db.forEach((t,w)=>this._notifyRemove(w,t.entry,g.RemoveMode.ALL));this._size=0;this._db.clear()};n._getHitRate=function(){return this._hit/
(this._hit+this._miss)};n._notifyRemove=function(t,w,H){let S;this._removeFuncs.some(R=>t.startsWith(R[0])?(R=R[1](w,H),"number"===typeof R&&(S=R),!0):!1);return S};n._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [t,w]of this._db){this._db.delete(t);if(1>=w.lives){this._size-=w.size;const H=this._notifyRemove(t,w.entry,g.RemoveMode.SOME);aa.isSome(H)&&0<H&&(this._size+=H,w.lives=w.lifetime,w.size=H,this._db.set(t,w))}else--w.lives,this._db.set(t,w);if(this._size<=.9*this.maxSize)break}};
e._createClass(A,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(t){this._maxSize=Math.max(t,0);this._checkSizeLimit()}}]);return A}();g.MIN_PRIORITY=-3;g.MemCache=u;g.MemCacheStorage=K;Object.defineProperty(g,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometry/cut ../../rest/geometry/simplify".split(" "),
function(g,e,aa,ba,u,K,A,n,t,w,H,S,R){function h(y){const q=[];let z=0,D=0;for(let Y=0;Y<y.length;Y++){const B=y[Y];let F=null;for(let P=0;P<B.length;P++)F=B[P],q.push(F),0===P?D=z=F[0]:(z=Math.min(z,F[0]),D=Math.max(D,F[0]));F&&q.push([(z+D)/2,0])}return q}function I(y,q){if(!(y instanceof n||y instanceof A))throw C.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new ba("straightLineDensify: the input geometry is neither polyline nor polygon");var z=t.getGeometryParts(y);
const D=[];for(const B of z){z=[];D.push(z);z.push([B[0][0],B[0][1]]);for(let F=0;F<B.length-1;F++){const P=B[F][0],W=B[F][1],G=B[F+1][0],r=B[F+1][1];var Y=Math.sqrt((G-P)*(G-P)+(r-W)*(r-W));const a=(r-W)/Y,k=(G-P)/Y,O=Y/q;if(1<O){for(let X=1;X<=O-1;X++){const ja=X*q;z.push([k*ja+P,a*ja+W])}Y=(Y+Math.floor(O-1)*q)/2;z.push([k*Y+P,a*Y+W])}z.push([G,r])}}return"polygon"===y.type?new A({rings:D,spatialReference:y.spatialReference}):new n({paths:D,spatialReference:y.spatialReference})}function d(y,q,
z){q&&(y=I(y,1E6),y=H.webMercatorToGeographic(y,!0));z&&(y=t.updatePolyGeometry(y,z));return y}function l(y,q,z){if(Array.isArray(y)){var D=y[0];D>q?(z=t.offsetMagnitude(D,q),y[0]=D+-2*z*q):D<z&&(q=t.offsetMagnitude(D,z),y[0]=D+-2*q*z)}else D=y.x,D>q?(z=t.offsetMagnitude(D,q),y=y.clone().offset(-2*z*q,0)):D<z&&(q=t.offsetMagnitude(D,z),y=y.clone().offset(-2*q*z,0));return y}function N(y,q){let z=-1;for(let D=0;D<q.cutIndexes.length;D++){const Y=q.cutIndexes[D],B=q.geometries[D],F=t.getGeometryParts(B);
for(let P=0;P<F.length;P++){const W=F[P];W.some(G=>{if(180>G[0])return!0;G=0;for(var r=0;r<W.length;r++){var a=W[r][0];G=a>G?a:G}G=Number(G.toFixed(9));G=-360*t.offsetMagnitude(G,180);for(r=0;r<W.length;r++)a=B.getPoint(P,r),B.setPoint(P,r,a.clone().offset(G,0));return!0})}if(Y===z)if("polygon"===y[0].type)for(const P of t.getGeometryParts(B))y[Y]=y[Y].addRing(P);else{if("polyline"===y[0].type)for(const P of t.getGeometryParts(B))y[Y]=y[Y].addPath(P)}else z=Y,y[Y]=B}return y}function M(y,q,z){return v.apply(this,
arguments)}function v(){v=e._asyncToGenerator(function*(y,q,z){var D;if(!Array.isArray(y))return M([y],q);q=null!=(D=null==q?void 0:q.url)?D:aa.geometryServiceUrl;let Y,B,F;let P=0;var W=[];D=[];for(var G of y)if(K.isNone(G))D.push(G);else{if(!r){var r=G.spatialReference;var a=w.getInfo(r);var k=(Y=r.isWebMercator)?102100:4326;B=t.cutParams[k].maxX;F=t.cutParams[k].minX;var O=t.cutParams[k].plus180Line;k=t.cutParams[k].minus180Line}if(a)if("mesh"===G.type)D.push(G);else if("point"===G.type)D.push(l(G.clone(),
B,F));else if("multipoint"===G.type){var X=G.clone();X.points=X.points.map(ja=>l(ja,B,F));D.push(X)}else if("extent"===G.type)X=G.clone()._normalize(!1,!1,a),D.push(X.rings?new A(X):X);else if(G.extent){X=G.extent;const ja=2*t.offsetMagnitude(X.xmin,F)*B;let oa=0===ja?G.clone():t.updatePolyGeometry(G.clone(),ja);X.offset(ja,0);X.intersects(O)&&X.xmax!==B?(P=X.xmax>P?X.xmax:P,oa=d(oa,Y),W.push(oa),D.push("cut")):X.intersects(k)&&X.xmin!==F?(P=2*X.xmax*B>P?2*X.xmax*B:P,oa=d(oa,Y,360),W.push(oa),D.push("cut")):
D.push(oa)}else D.push(G.clone());else D.push(G)}r=t.offsetMagnitude(P,B);a=-90;O=r;for(G=new n;0<r;)k=-180+360*r,G.addPath([[k,a],[k,-1*a]]),a*=-1,r--;if(0<W.length&&0<O){r=yield S.cut(q,W,G,z);r=N(W,r);a=[];W=[];for(O=0;O<D.length;O++)G=D[O],"cut"!==G?W.push(G):(G=r.shift(),k=y[O],K.isSome(k)&&"polygon"===k.type&&k.rings&&1<k.rings.length&&G.rings.length>=k.rings.length?(a.push(G),W.push("simplify")):W.push(Y?H.geographicToWebMercator(G):G));if(!a.length)return W;D=yield R.simplify(q,a,z);y=[];
for(z=0;z<W.length;z++)q=W[z],"simplify"!==q?y.push(q):y.push(Y?H.geographicToWebMercator(D.shift()):D.shift());return y}y=[];for(z=0;z<D.length;z++)q=D[z],"cut"!==q?y.push(q):(q=W.shift(),y.push(!0===Y?H.geographicToWebMercator(q):q));return Promise.resolve(y)});return v.apply(this,arguments)}const C=u.getLogger("esri.geometry.support.normalizeUtils");g.getDenormalizedExtent=function(y){if(!y)return null;const q=y.extent;if(!q)return null;var z=y.spatialReference&&w.getInfo(y.spatialReference);if(!z)return q;
const [D,Y]=z.valid;({width:z}=q);let {xmin:B,xmax:F}=q;[B,F]=[F,B];if("extent"===y.type||0===z||z<=Y||z>2*Y||B<D||F>Y)return q;let P;switch(y.type){case "polygon":if(1<y.rings.length)P=h(y.rings);else return q;break;case "polyline":if(1<y.paths.length)P=h(y.paths);else return q;break;case "multipoint":P=y.points}y=q.clone();for(let W=0;W<P.length;W++){let G=P[W][0];0>G?(G+=Y,F=Math.max(G,F)):(G-=Y,B=Math.min(G,B))}y.xmin=B;y.xmax=F;return y.width<z?(y.xmin-=Y,y.xmax-=Y,y):q};g.normalizeCentralMeridian=
M;g.normalizeMapX=function(y,q){if(q=w.getInfo(q)){const [z,D]=q.valid;q=D-z;if(y<z)for(;y<z;)y+=q;if(y>D)for(;y>D;)y-=q}return y};g.straightLineDensify=I;Object.defineProperty(g,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(g,e,aa,ba){function u(A){return ba.isPolygon(A)?A.rings:A.paths}const K={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new e({paths:[[[2.0037508342788905E7,
-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:aa.WebMercator}),minus180Line:new e({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:aa.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new e({paths:[[[180,-180],[180,180]]],spatialReference:aa.WGS84}),minus180Line:new e({paths:[[[-180,-180],[-180,180]]],spatialReference:aa.WGS84})}};g.cutParams=K;g.getGeometryParts=u;g.getSpatialReferenceMinMaxX=
function(A){A=(null==A?0:A.isWebMercator)?102100:4326;return[K[A].minX,K[A].maxX]};g.offsetMagnitude=function(A,n){return Math.ceil((A-n)/(2*n))};g.updatePolyGeometry=function(A,n){const t=u(A);for(const w of t)for(const H of w)H[0]+=n;return A};Object.defineProperty(g,"__esModule",{value:!0})})},"esri/rest/geometry/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),function(g,e,aa,ba,
u,K){function A(){A=e._asyncToGenerator(function*(n,t,w,H){n="string"===typeof n?u.urlToObject(n):n;const S=t[0].spatialReference;t={...H,query:{...n.query,f:"json",sr:JSON.stringify(S),target:JSON.stringify({geometryType:K.getJsonType(t[0]),geometries:t}),cutter:JSON.stringify(w)}};t=yield ba(n.path+"/cut",t);const {cutIndexes:R,geometries:h=[]}=t.data;return{cutIndexes:R,geometries:h.map(I=>{I=K.fromJSON(I);I.spatialReference=S;return I})}});return A.apply(this,arguments)}g.cut=function(n,t,w,H){return A.apply(this,
arguments)};Object.defineProperty(g,"__esModule",{value:!0})})},"esri/rest/geometry/simplify":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../../core/urlUtils","../../geometry/support/jsonUtils"],function(g,e,aa,ba,u){function K(){K=e._asyncToGenerator(function*(t,w,H){const S="string"===typeof t?ba.urlToObject(t):t;t=w[0].spatialReference;const R=u.getJsonType(w[0]);w={...H,query:{...S.query,f:"json",sr:t.wkid?t.wkid:JSON.stringify(t),geometries:JSON.stringify(A(w))}};
w=yield aa(S.path+"/simplify",w);return n(w.data,R,t)});return K.apply(this,arguments)}function A(t){return{geometryType:u.getJsonType(t[0]),geometries:t.map(w=>w.toJSON())}}function n(t,w,H){const S=u.getGeometryType(w);return t.map(R=>{R=S.fromJSON(R);R.spatialReference=H;return R})}g.simplify=function(t,w,H){return K.apply(this,arguments)};Object.defineProperty(g,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],
function(g,e,aa){function ba(t,w){return t?A.get(t,w):null}function u(t,w,H,S=!0){const R=[];for(const h of w)if("*"!==h&&!t.has(h))if(S){w=K(h);try{const I=ba(w,t);if(!I)throw new e("feature-store:unsupported-query","invalid SQL expression",{where:w});if(!I.isStandardized)throw new e("feature-store:unsupported-query","expression is not standard",{clause:I});u(t,I.fieldNames,"expression contains missing fields")}catch(I){if((w=I&&I.details)&&(w.clause||w.where))throw I;w&&w.missingFields?R.push(...w.missingFields):
R.push(h)}}else R.push(h);if(R.length)throw new e("feature-store:unsupported-query",H,{missingFields:R});}function K(t){return t.split(" as ")[0]}const A=new aa.WhereClauseCache(50,500),n=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));g.getAliasFromFieldName=function(t){return t.split(" as ")[1]};g.getExpressionFromFieldName=K;g.getWhereClause=ba;g.hasInvalidFieldType=function(t,w){return(t=
w.get(t))?!n.has(t.type):!1};g.validateFields=u;g.validateHaving=function(t,w,H){if(!w)return!0;const S=A.get(w,t);if(!S)throw new e("feature-store:unsupported-query","invalid SQL expression",{having:w});if(!S.isAggregate)throw new e("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:w});u(t,S.fieldNames,"having contains missing fields");if(!S.getExpressions().every(R=>{const {aggregateType:h,field:I}=R,d=t.has(I)&&t.get(I).name;return H.some(l=>{const {onStatisticField:N,
statisticType:M}=l;return(t.has(N)&&t.get(N).name)===d&&M.toLowerCase().trim()===h})}))throw new e("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:w});return!0};g.validateWhere=function(t,w){if(!w)return!0;const H=A.get(w,t);if(!H)throw new e("feature-store:unsupported-query","invalid SQL expression",{where:w});if(!H.isStandardized)throw new e("feature-store:unsupported-query","where clause is not standard",{where:w});u(t,H.fieldNames,"where clause contains missing fields");
return!0};Object.defineProperty(g,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(g,e,aa){let ba=function(){function u(K,A){this._cache=new e(K);this._invalidCache=new e(A)}u.prototype.get=function(K,A){const n=`${A.uid}:${K}`,t=this._cache.get(n);if(t)return t;if(void 0!==this._invalidCache.get(n))return null;try{const w=aa.WhereClause.create(K,A);this._cache.put(n,w);return w}catch{return this._invalidCache.put(n,
null),null}};return u}();g.WhereClauseCache=ba;Object.defineProperty(g,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(g){return function(){function e(ba,u){this._storage=new g.MemCacheStorage;this._storage.maxSize=ba;u&&this._storage.registerRemoveFunc("",u)}var aa=e.prototype;aa.put=function(ba,u){this._storage.put(ba,u,1,1)};aa.pop=function(ba){return this._storage.pop(ba)};aa.get=function(ba){return this._storage.get(ba)};aa.clear=function(){this._storage.clearAll()};
aa.destroy=function(){this._storage.destroy()};return e}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(g,e,aa,ba,u,K){function A(G,r){G+="";return G.length>=r?G:Array(r-G.length+1).join("0")+G}function n(G,r,a="0",k="0",O="0",X="0",ja="",oa="0",ma="0"){return"+"===ja||"-"===ja?(G=`${A(parseInt(G,10),4)}-${A(parseInt(r,10),2)}-${A(parseInt(a,10),2)}`,r="",10>
parseFloat(X)&&(r="0"),k=`${A(parseInt(k,10),2)}:${A(parseInt(O,10),2)}:${r+parseFloat(X).toString()}`,ja=`${ja}${A(parseInt(oa,10),2)}:${A(parseInt(ma,10),2)}`,new Date(G+"T"+k+ja)):new Date(parseInt(G,10),parseInt(r,10)-1,parseInt(a,10),parseInt(k,10),parseInt(O,10),parseFloat(X))}function t(G){let r=y.exec(G);if(null!==r){const [,a,k,O,X,ja,oa]=r;return n(a,k,O,X,ja,oa)}r=q.exec(G);if(null!==r){const [,a,k,O,X,ja,oa,ma,la,pa]=r;return n(a,k,O,X,ja,oa,ma,la,pa)}r=z.exec(G);if(null!==r){const [,
a,k,O,X,ja,oa,ma,la]=r;return n(a,k,O,X,ja,"0",oa,ma,la)}r=D.exec(G);if(null!==r){const [,a,k,O,X,ja]=r;return n(a,k,O,X,ja)}r=C.exec(G);if(null!==r){const [,a,k,O]=r;return n(a,k,O)}throw Error("SQL Invalid Timestamp");}function w(G){G=C.exec(G);if(null===G)throw Error("SQL Invalid Date");const [,r,a,k]=G;return new Date(parseInt(r,10),parseInt(a,10)-1,parseInt(k,10))}function H(G){return Array.isArray(G)?G:[G]}function S(G){return null!==G?!0!==G:null}function R(G,r){return null!=G&&null!=r?!0===
G&&!0===r:!1===G||!1===r?!1:null}function h(G,r){return null!=G&&null!=r?!0===G||!0===r:!0===G||!0===r?!0:null}function I(G,r){if(null==G)return null;let a=!1;for(const k of r)if(null==k)a=null;else if(G===k){a=!0;break}return a}function d(G,r,a){if(null==G)return null;{let k="",O=P.Normal;for(let X=0;X<r.length;X++){const ja=r.charAt(X);switch(O){case P.Normal:ja===a?O=P.Escaped:k="-[]/{}()*+?.\\^$|".includes(ja)?k+("\\"+ja):"%"===ja?k+".*":"_"===ja?k+".":k+ja;break;case P.Escaped:k="-[]/{}()*+?.\\^$|".includes(ja)?
k+("\\"+ja):k+ja,O=P.Normal}}r=new RegExp("^"+k+"$","m")}return r.test(G)}function l(G){return G instanceof Date?G.valueOf():G}function N(G,r,a){if(null==r||null==a)return null;r=l(r);a=l(a);switch(G){case "\x3c\x3e":return r!==a;case "\x3d":return r===a;case "\x3e":return r>a;case "\x3c":return r<a;case "\x3e\x3d":return r>=a;case "\x3c\x3d":return r<=a}}function M(G,r,a){if(r instanceof u.SqlInterval)if(a instanceof Date)switch(G){case "+":return new Date(r.valueInMilliseconds()+a.getTime());case "-":return r.valueInMilliseconds()-
a.getTime();case "*":return r.valueInMilliseconds()*a.getTime();case "/":return r.valueInMilliseconds()/a.getTime()}else if(a instanceof u.SqlInterval)switch(G){case "+":return u.SqlInterval.createFromMilliseconds(r.valueInMilliseconds()+a.valueInMilliseconds());case "-":return u.SqlInterval.createFromMilliseconds(r.valueInMilliseconds()-a.valueInMilliseconds());case "*":return r.valueInMilliseconds()*a.valueInMilliseconds();case "/":return r.valueInMilliseconds()/a.valueInMilliseconds()}else r=r.valueInMilliseconds();
else if(a instanceof u.SqlInterval)if(r instanceof Date)switch(G){case "+":return new Date(a.valueInMilliseconds()+r.getTime());case "-":return new Date(r.getTime()-a.valueInMilliseconds());case "*":return r.getTime()*a.valueInMilliseconds();case "/":return r.getTime()/a.valueInMilliseconds()}else a=a.valueInMilliseconds();else if(r instanceof Date&&"number"===typeof a)switch(a*=864E5,r=r.getTime(),G){case "+":return new Date(r+a);case "-":return new Date(r-a);case "*":return new Date(r*a);case "/":return new Date(r/
a)}else if(a instanceof Date&&"number"===typeof r)switch(r*=864E5,a=a.getTime(),G){case "+":return new Date(r+a);case "-":return new Date(r-a);case "*":return new Date(r*a);case "/":return new Date(r/a)}switch(G){case "+":return r+a;case "-":return r-a;case "*":return r*a;case "/":return r/a}}function v(G,r,a,k){G=k.getAttribute(G,r);return null!=G&&1===a[r]?new Date(G):G}const C=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,y=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,q=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,
z=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,D=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,Y=new Set(["current_timestamp","current_date","current_time"]);let B=function(){function G(){}G.makeBool=function(r){return!0===r};G.featureValue=function(r,a,k,O){return v(r,a,k,O)};G.equalsNull=function(r){return null===r};G.applyLike=function(r,a,k){return d(r,a,k)};G.ensureArray=function(r){return H(r)};G.applyIn=function(r,a){return I(r,a)};G.currentDate=function(){const r=
new Date;r.setHours(0,0,0,0);return r};G.makeSqlInterval=function(r,a,k){return u.SqlInterval.createFromValueAndQualifer(r,a,k)};G.convertInterval=function(r){return r instanceof u.SqlInterval?r.valueInMilliseconds():r};G.currentTimestamp=function(){return new Date};G.compare=function(r,a,k){return N(r,a,k)};G.calculate=function(r,a,k){return M(r,a,k)};G.makeComparable=function(r){return l(r)};G.evaluateFunction=function(r,a){return u.evaluateFunction(r,a)};G.lookup=function(r,a){r=a[r];return void 0===
r?null:r};G.between=function(r,a){return null==r||null==a[0]||null==a[1]?null:r>=a[0]&&r<=a[1]};G.notbetween=function(r,a){return null==r||null==a[0]||null==a[1]?null:r<a[0]||r>a[1]};G.ternaryNot=function(r){return S(r)};G.ternaryAnd=function(r,a){return R(r,a)};G.ternaryOr=function(r,a){return h(r,a)};return G}(),F=function(){function G(a,k){this.fieldsIndex=k;this.datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=K.WhereGrammar.parse(a);const {isStandardized:O,isAggregate:X,
referencedFieldNames:ja}=this._extractExpressionInfo(k);this.referencedFieldNames=ja;this.isStandardized=O;this.isAggregate=X}G.create=function(a,k){return new G(a,k)};var r=G.prototype;r.testSet=function(a,k=W){const O={};for(const X of this.fieldNames)O[X]=a.map(ja=>k.getAttribute(ja,X));return!!this._evaluateNode(this.parseTree,{attributes:O},W)};r.calculateValue=function(a,k=W){a=this._evaluateNode(this.parseTree,a,k);return a instanceof u.SqlInterval?a.valueInMilliseconds()/864E5:a};r.calculateValueCompiled=
function(a,k=W){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(a,this.parameters,k,this.datefields);if(aa("esri-csp-restrictions"))return this.calculateValue(a,k);this._compileMe();return this.parseTree._compiledVersion(a,this.parameters,k,this.datefields)};r.testFeature=function(a,k=W){return!!this._evaluateNode(this.parseTree,a,k)};r.testFeatureCompiled=function(a,k=W){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(a,this.parameters,
k,this.datefields);if(aa("esri-csp-restrictions"))return this.testFeature(a,k);this._compileMe();return!!this.parseTree._compiledVersion(a,this.parameters,k,this.datefields)};r.getFunctions=function(){const a=new Set;this._visitAll(this.parseTree,k=>{"function"===k.type&&a.add(k.name.toLowerCase())});return Array.from(a)};r.getExpressions=function(){const a=new Map;this._visitAll(this.parseTree,k=>{if("function"===k.type){const O=k.name.toLowerCase();k=k.args.value[0];if("column_ref"===k.type){k=
k.column;const X=`${O}-${k}`;a.has(X)||a.set(X,{aggregateType:O,field:k})}}});return[...a.values()]};r.getVariables=function(){const a=new Set;this._visitAll(this.parseTree,k=>{"param"===k.type&&a.add(k.value.toLowerCase())});return Array.from(a)};r._compileMe=function(){const a="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",a)).bind(B)};r._extractExpressionInfo=function(a){const k=
[],O=new Set;let X=!0,ja=!0;this._visitAll(this.parseTree,oa=>{switch(oa.type){case "column_ref":{const ma=a.get(oa.column);let la,pa;ma?la=pa=ma.name:(pa=oa.column,la=pa.toLowerCase());!ma||"date"!==ma.type&&"esriFieldTypeDate"!==ma.type||(this.datefields[ma.name]=1);O.has(la)||(O.add(la),k.push(pa));oa.column=pa;break}case "function":{const {name:ma,args:la}=oa;oa=la.value.length;X&&(X=u.isStandardized(ma,oa));ja&&(ja=ba.isAggregate(ma,oa))}}});return{referencedFieldNames:Array.from(k),isStandardized:X,
isAggregate:ja}};r._visitAll=function(a,k){if(null!=a)switch(k(a),a.type){case "when_clause":this._visitAll(a.operand,k);this._visitAll(a.value,k);break;case "case_expression":for(const O of a.clauses)this._visitAll(O,k);"simple"===a.format&&this._visitAll(a.operand,k);null!==a.else&&this._visitAll(a.else,k);break;case "expr_list":for(const O of a.value)this._visitAll(O,k);break;case "unary_expr":this._visitAll(a.expr,k);break;case "binary_expr":this._visitAll(a.left,k);this._visitAll(a.right,k);
break;case "function":this._visitAll(a.args,k)}};r.evaluateNodeToJavaScript=function(a){switch(a.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(a.value)+", "+JSON.stringify(a.qualifier)+","+JSON.stringify(a.op)+")";case "case_expression":var k="";if("simple"===a.format){var O="this.makeComparable("+this.evaluateNodeToJavaScript(a.operand)+")";k="( ";for(let X=0;X<a.clauses.length;X++)k+=" ("+O+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(a.clauses[X].operand)+
")) ? ("+this.evaluateNodeToJavaScript(a.clauses[X].value)+") : "}else for(k="( ",O=0;O<a.clauses.length;O++)k+=" this.makeBool("+this.evaluateNodeToJavaScript(a.clauses[O].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(a.clauses[O].value)+") : ";k=null!==a.else?k+this.evaluateNodeToJavaScript(a.else):k+"null";return k+=" )";case "param":return"this.lookup("+JSON.stringify(a.value.toLowerCase())+",lookups)";case "expr_list":k="[";for(O of a.value)"["!==k&&(k+=","),k+=this.evaluateNodeToJavaScript(O);
return k+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(a.expr)+")";case "binary_expr":switch(a.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+" )";case "IS":if("null"!==a.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(a.left)+
")";case "ISNOT":if("null"!==a.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(a.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(a.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(a.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(a.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(a.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(a.left)+
","+this.evaluateNodeToJavaScript(a.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+","+JSON.stringify(a.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+","+JSON.stringify(a.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+
JSON.stringify(a.operator)+","+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(a.operator)+","+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+")"}throw Error("Not Supported Operator "+a.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(a.value);case "date":return"(new Date("+w(a.value).getTime().toString()+"))";case "timestamp":return"(new Date("+
t(a.value).getTime().toString()+"))";case "current_time":return"date"===a.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(a.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(a.name)+","+this.evaluateNodeToJavaScript(a.args)+")"}throw Error("Unsupported sql syntax "+a.type);};r._evaluateNode=function(a,k,O){switch(a.type){case "interval":return k=this._evaluateNode(a.value,k,
O),u.SqlInterval.createFromValueAndQualifer(k,a.qualifier,a.op);case "case_expression":if("simple"===a.format){var X=l(this._evaluateNode(a.operand,k,O));for(var ja=0;ja<a.clauses.length;ja++)if(X===l(this._evaluateNode(a.clauses[ja].operand,k,O)))return this._evaluateNode(a.clauses[ja].value,k,O)}else for(X=0;X<a.clauses.length;X++)if(!0===this._evaluateNode(a.clauses[X].operand,k,O))return this._evaluateNode(a.clauses[X].value,k,O);return null!==a.else?this._evaluateNode(a.else,k,O):null;case "param":return this.parameters[a.value.toLowerCase()];
case "expr_list":X=[];for(ja of a.value)X.push(this._evaluateNode(ja,k,O));return X;case "unary_expr":return S(this._evaluateNode(a.expr,k,O));case "binary_expr":switch(a.operator){case "AND":return R(this._evaluateNode(a.left,k,O),this._evaluateNode(a.right,k,O));case "OR":return h(this._evaluateNode(a.left,k,O),this._evaluateNode(a.right,k,O));case "IS":if("null"!==a.right.type)throw Error("Unsupported RHS for IS");return null===this._evaluateNode(a.left,k,O);case "ISNOT":if("null"!==a.right.type)throw Error("Unsupported RHS for IS");
return null!==this._evaluateNode(a.left,k,O);case "IN":return X=H(this._evaluateNode(a.right,k,O)),I(this._evaluateNode(a.left,k,O),X);case "NOT IN":return X=H(this._evaluateNode(a.right,k,O)),S(I(this._evaluateNode(a.left,k,O),X));case "BETWEEN":return X=this._evaluateNode(a.left,k,O),a=this._evaluateNode(a.right,k,O),null==X||null==a[0]||null==a[1]?null:X>=l(a[0])&&X<=l(a[1]);case "NOTBETWEEN":return X=this._evaluateNode(a.left,k,O),a=this._evaluateNode(a.right,k,O),null==X||null==a[0]||null==a[1]?
null:X<l(a[0])||X>l(a[1]);case "LIKE":return d(this._evaluateNode(a.left,k,O),this._evaluateNode(a.right,k,O),a.escape);case "NOT LIKE":return S(d(this._evaluateNode(a.left,k,O),this._evaluateNode(a.right,k,O),a.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return N(a.operator,this._evaluateNode(a.left,k,O),this._evaluateNode(a.right,k,O));case "-":case "+":case "*":case "/":return M(a.operator,this._evaluateNode(a.left,k,O),this._evaluateNode(a.right,
k,O))}case "null":case "bool":case "string":case "number":return a.value;case "date":return w(a.value);case "timestamp":return t(a.value);case "current_time":return k=new Date,"date"===a.mode&&k.setHours(0,0,0,0),k;case "column_ref":return v(k,a.column,this.datefields,O);case "function":return k=this._evaluateNode(a.args,k,O),this.isAggregate?ba.aggregateFunction(a.name,k):u.evaluateFunction(a.name,k)}throw Error("Unsupported sql syntax "+a.type);};e._createClass(G,[{key:"fieldNames",get:function(){return this.referencedFieldNames}},
{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,a=>{"current_time"===a.type?this._hasDateFunctions=!0:"function"===a.type&&(this._hasDateFunctions=this._hasDateFunctions||Y.has(a.name.toLowerCase()))});return this._hasDateFunctions}}]);return G}();var P;(function(G){G[G.Normal=0]="Normal";G[G.Escaped=1]="Escaped"})(P||(P={}));const W={getAttribute(G,r){return(G&&"object"===typeof G.attributes?
G.attributes:G)[r]}};g.WhereClause=F;g.defaultAttributeAdapter=W;Object.defineProperty(g,"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(g){function e(u){let K=0;for(let A=0;A<u.length;A++)K+=u[A];return K/u.length}function aa(u){const K=e(u),A=u.length;let n=0;for(const t of u)n+=(t-K)**2;return 1<A?n/(A-1):0}const ba={min:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.min.apply(Math,u[0])},max:{minParams:1,maxParams:1,evaluate:u=>
null==u[0]?null:Math.max.apply(Math,u[0])},avg:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:e(u[0])},sum:{minParams:1,maxParams:1,evaluate:u=>{if(null==u[0])u=null;else{{u=u[0];let K=0;for(let A=0;A<u.length;A++)K+=u[A];u=K}}return u}},stddev:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.sqrt(aa(u[0]))},count:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:u[0].length},var:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:aa(u[0])}};g.aggregateFunction=function(u,K){const A=
ba[u.toLowerCase()];if(null==A)throw Error("Function Not Recognised");if(K.length<A.minParams||K.length>A.maxParams)throw Error(`Invalid Parameter count for call to ${u.toUpperCase()}`);return A.evaluate(K)};g.isAggregate=function(u,K){u=ba[u.toLowerCase()];return null!=u&&K>=u.minParams&&K<=u.maxParams};Object.defineProperty(g,"__esModule",{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(g,e){let aa=function(){function u(){this.op="+";this.minute=
this.year=this.month=this.hour=this.second=this.day=0}u._fixDefaults=function(K){if(null!==K.precision||null!==K.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};u.createFromMilliseconds=function(K){const A=new u;A.second=K/1E3;return A};u.createFromValueAndQualifer=function(K,A,n){let t=null;const w=new u;w.op="-"===n?"-":"+";if("interval-period"===A.type){u._fixDefaults(A);if("year"===A.period||"month"===A.period)throw Error("Year-Month Intervals not supported");
if(/^[0-9]{1,}$/.test(K))w[A.period]=parseFloat(K);else throw Error("Illegal Interval");}else{u._fixDefaults(A.start);u._fixDefaults(A.end);if("year"===A.start.period||"month"===A.start.period)throw Error("Year-Month Intervals not supported");if("year"===A.end.period||"month"===A.end.period)throw Error("Year-Month Intervals not supported");switch(A.start.period){case "day":switch(A.end.period){case "hour":t=/^[0-9]{1,} [0-9]{1,}$/;if(t.test(K))w[A.start.period]=parseFloat(K.split(" ")[0]),w[A.end.period]=
parseFloat(K.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":t=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(t.test(K))w[A.start.period]=parseFloat(K.split(" ")[0]),K=K.split(" ")[1].split(":"),w.hour=parseFloat(K[0]),w.minute=parseFloat(K[1]);else throw Error("Illegal Interval");break;case "second":t=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(t.test(K))w[A.start.period]=parseFloat(K.split(" ")[0]),K=K.split(" ")[1].split(":"),w.hour=parseFloat(K[0]),w.minute=
parseFloat(K[1]),w.second=parseFloat(K[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(A.end.period){case "minute":t=/^[0-9]{1,}:[0-9]{1,}$/;if(t.test(K))w.hour=parseFloat(K.split(":")[0]),w.minute=parseFloat(K.split(":")[1]);else throw Error("Illegal Interval");break;case "second":t=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(t.test(K))K=K.split(":"),w.hour=parseFloat(K[0]),w.minute=parseFloat(K[1]),w.second=parseFloat(K[2]);
else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(A.end.period){case "second":t=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(t.test(K))K=K.split(":"),w.minute=parseFloat(K[0]),w.second=parseFloat(K[1]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return w};u.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+
864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return u}();const ba={extract:{minParams:2,maxParams:2,evaluate:([u,K])=>{if(null==K)return null;if(K instanceof Date)switch(u.toUpperCase()){case "SECOND":return K.getSeconds();case "MINUTE":return K.getMinutes();case "HOUR":return K.getHours();case "DAY":return K.getDate();case "MONTH":return K.getMonth()+1;case "YEAR":return K.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:u=>
{if(2===u.length){const [K,A]=u;return null==K||null==A?null:K.toString().substring(A-1)}if(3===u.length){const [K,A,n]=u;return null==K||null==A||null==n?null:0>=n?"":K.toString().substring(A-1,A+n-1)}}},position:{minParams:2,maxParams:2,evaluate:([u,K])=>null==u||null==K?null:K.indexOf(u)+1},trim:{minParams:2,maxParams:3,evaluate:u=>{var K=3===u.length,A=K?u[1]:" ";K=K?u[2]:u[1];if(null==A||null==K)return null;A=`(${e.escapeRegExpString(A)})`;switch(u[0]){case "BOTH":return K.replace(new RegExp(`^${A}*|${A}*$`,
"g"),"");case "LEADING":return K.replace(new RegExp(`^${A}*`,"g"),"");case "TRAILING":return K.replace(new RegExp(`${A}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.abs(u[0])},ceiling:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.ceil(u[0])},floor:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.floor(u[0])},log:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.log(u[0])},log10:{minParams:1,
maxParams:1,evaluate:u=>null==u[0]?null:Math.log(u[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.sin(u[0])},cos:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.cos(u[0])},tan:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.tan(u[0])},asin:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.asin(u[0])},acos:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.acos(u[0])},atan:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:Math.atan(u[0])},
sign:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:0<u[0]?1:0>u[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:u=>null==u[0]||null==u[1]?null:u[0]**u[1]},mod:{minParams:2,maxParams:2,evaluate:u=>null==u[0]||null==u[1]?null:u[0]%u[1]},round:{minParams:1,maxParams:2,evaluate:u=>{const K=u[0];u=2===u.length?10**u[1]:1;return null==K?null:Math.round(K*u)/u}},truncate:{minParams:1,maxParams:2,evaluate:u=>null==u[0]?null:1===u.length?parseInt(u[0].toFixed(0),10):parseFloat(u[0].toFixed(u[1]))},
char_length:{minParams:1,maxParams:1,evaluate:u=>"string"===typeof u[0]||u[0]instanceof String?u[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:u=>{let K="";for(let A=0;A<u.length;A++){if(null==u[A])return null;K+=u[A].toString()}return K}},lower:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:u[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:u=>null==u[0]?null:u[0].toString().toUpperCase()}};g.SqlInterval=aa;g.evaluateFunction=function(u,K){const A=ba[u.toLowerCase()];
if(null==A)throw Error("Function Not Recognised");if(K.length<A.minParams||K.length>A.maxParams)throw Error(`Invalid Parameter count for call to ${u.toUpperCase()}`);return A.evaluate(K)};g.isStandardized=function(u,K){u=ba[u.toLowerCase()];return null!=u&&K>=u.minParams&&K<=u.maxParams};Object.defineProperty(g,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(g,e){var aa={exports:{}};(function(u){(function(K,A){u.exports&&
(u.exports=A())})(e.commonjsGlobal,function(){function K(n,t,w,H){n=Error.call(this,n);Object.setPrototypeOf&&Object.setPrototypeOf(n,K.prototype);n.expected=t;n.found=w;n.location=H;n.name="SyntaxError";return n}function A(n,t,w){w=w||" ";if(n.length>t)return n;t-=n.length;w+=w.repeat(t);return n+w.slice(0,t)}(function(n,t){function w(){this.constructor=n}w.prototype=t.prototype;n.prototype=new w})(K,Error);K.prototype.format=function(n){var t="Error: "+this.message;if(this.location){var w=null,
H;for(H=0;H<n.length;H++)if(n[H].source===this.location.source){w=n[H].text.split(/\r\n|\n|\r/g);break}n=this.location.start;H=this.location.source+":"+n.line+":"+n.column;if(w){var S=this.location.end,R=A("",n.line.toString().length);w=w[n.line-1];S=n.line===S.line?S.column:w.length+1;t+="\n --\x3e "+H+"\n"+R+" |\n"+n.line+" | "+w+"\n"+R+" | "+A("",n.column-1)+A("",S-n.column,"^")}else t+="\n at "+H}return t};K.buildMessage=function(n,t){function w(I){return I.charCodeAt(0).toString(16).toUpperCase()}
function H(I){return I.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+w(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+w(d)})}function S(I){return I.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+
w(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+w(d)})}function R(I){return h[I.type](I)}var h={literal:function(I){return'"'+H(I.text)+'"'},class:function(I){var d=I.parts.map(function(l){return Array.isArray(l)?S(l[0])+"-"+S(l[1]):S(l)});return"["+(I.inverted?"^":"")+d+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(I){return I.description}};return"Expected "+function(I){I=I.map(R);var d,l;I.sort();if(0<I.length){for(l=d=1;d<I.length;d++)I[d-
1]!==I[d]&&(I[l]=I[d],l++);I.length=l}switch(I.length){case 1:return I[0];case 2:return I[0]+" or "+I[1];default:return I.slice(0,-1).join(", ")+", or "+I[I.length-1]}}(n)+" but "+(t?'"'+H(t)+'"':"end of input")+" found."};return{SyntaxError:K,parse:function(n,t){function w(x,E){return{type:"literal",text:x,ignoreCase:E}}function H(x,E,Z){return{type:"class",parts:x,inverted:E,ignoreCase:Z}}function S(x){var E=cc[x],Z;if(!E){for(Z=x-1;!cc[Z];)Z--;E=cc[Z];for(E={line:E.line,column:E.column};Z<x;)10===
n.charCodeAt(Z)?(E.line++,E.column=1):E.column++,Z++;cc[x]=E}return E}function R(x,E){var Z=S(x),ta=S(E);return{source:$a,start:{offset:x,line:Z.line,column:Z.column},end:{offset:E,line:ta.line,column:ta.column}}}function h(x){f<sb||(f>sb&&(sb=f,vc=[]),vc.push(x))}function I(){var x=f;sa();var E=l();E!==b?(sa(),x=E):(f=x,x=b);return x}function d(){var x=f;var E=l();if(E!==b){x=[];var Z=f;var ta=sa();var Ca=Da();if(Ca!==b){var La=sa();var Ma=l();Ma!==b?Z=ta=[ta,Ca,La,Ma]:(f=Z,Z=b)}else f=Z,Z=b;for(;Z!==
b;)x.push(Z),Z=f,ta=sa(),Ca=Da(),Ca!==b?(La=sa(),Ma=l(),Ma!==b?Z=ta=[ta,Ca,La,Ma]:(f=Z,Z=b)):(f=Z,Z=b);Z={type:"expr_list"};E=[E];for(ta=0;ta<x.length;ta++)E.push(x[ta][3]);Z.value=E;x=Z}else f=x,x=b;return x}function l(){var x=f;var E=N();if(E!==b){x=[];var Z=f;var ta=sa();var Ca=T();if(Ca!==b){var La=sa();var Ma=N();Ma!==b?Z=ta=[ta,Ca,La,Ma]:(f=Z,Z=b)}else f=Z,Z=b;for(;Z!==b;)x.push(Z),Z=f,ta=sa(),Ca=T(),Ca!==b?(La=sa(),Ma=N(),Ma!==b?Z=ta=[ta,Ca,La,Ma]:(f=Z,Z=b)):(f=Z,Z=b);x=Qa(E,x)}else f=x,x=
b;return x}function N(){var x=f;var E=M();if(E!==b){x=[];var Z=f;var ta=sa();var Ca=J();if(Ca!==b){var La=sa();var Ma=M();Ma!==b?Z=ta=[ta,Ca,La,Ma]:(f=Z,Z=b)}else f=Z,Z=b;for(;Z!==b;)x.push(Z),Z=f,ta=sa(),Ca=J(),Ca!==b?(La=sa(),Ma=M(),Ma!==b?Z=ta=[ta,Ca,La,Ma]:(f=Z,Z=b)):(f=Z,Z=b);x=Qa(E,x)}else f=x,x=b;return x}function M(){var x=f;var E=m();if(E===b){E=f;if(33===n.charCodeAt(f)){var Z=ka;f++}else Z=b,0===ua&&h(nd);if(Z!==b){var ta=f;ua++;if(61===n.charCodeAt(f)){var Ca=Qb;f++}else Ca=b,0===ua&&
h(Lc);ua--;Ca===b?ta=void 0:(f=ta,ta=b);ta!==b?E=Z=[Z,ta]:(f=E,E=b)}else f=E,E=b}E!==b?(Z=sa(),ta=M(),ta!==b?x={type:"unary_expr",operator:"NOT",expr:ta}:(f=x,x=b)):(f=x,x=b);if(x===b){E=f;x=q();if(x!==b){sa();E=[];Z=f;ta=sa();Ca=v();if(Ca!==b){var La=sa();var Ma=q();Ma!==b?Z=ta=[ta,Ca,La,Ma]:(f=Z,Z=b)}else f=Z,Z=b;if(Z!==b)for(;Z!==b;)E.push(Z),Z=f,ta=sa(),Ca=v(),Ca!==b?(La=sa(),Ma=q(),Ma!==b?Z=ta=[ta,Ca,La,Ma]:(f=Z,Z=b)):(f=Z,Z=b);else E=b;E!==b&&(E={type:"arithmetic",tail:E});E===b&&(E=f,Z=y(),
Z!==b?(sa(),ta=Fa(),ta!==b?(sa(),ta=d(),ta!==b?(sa(),Ca=Pa(),Ca!==b?E={op:Z,right:ta}:(f=E,E=b)):(f=E,E=b)):(f=E,E=b)):(f=E,E=b),E===b&&(E=f,Z=y(),Z!==b?(sa(),ta=Fa(),ta!==b?(sa(),ta=Pa(),ta!==b?E={op:Z,right:{type:"expr_list",value:[]}}:(f=E,E=b)):(f=E,E=b)):(f=E,E=b),E===b&&(E=f,Z=y(),Z!==b?(sa(),ta=r(),ta!==b?E={op:Z,right:ta}:(f=E,E=b)):(f=E,E=b))),E===b&&(E=f,Ca=m(),Ca!==b?(sa(),Z=U(),Z!==b?(sa(),ta=q(),ta!==b?(sa(),La=J(),La!==b?(sa(),Ca=q(),Ca!==b?E={op:"NOT"+Z,right:{type:"expr_list",value:[ta,
Ca]}}:(f=E,E=b)):(f=E,E=b)):(f=E,E=b)):(f=E,E=b)):(f=E,E=b),E===b&&(E=f,Ca=U(),Ca!==b?(sa(),Z=q(),Z!==b?(sa(),ta=J(),ta!==b?(sa(),La=q(),La!==b?E={op:Ca,right:{type:"expr_list",value:[Z,La]}}:(f=E,E=b)):(f=E,E=b)):(f=E,E=b)):(f=E,E=b)),E===b&&(E=f,Z=p(),Z!==b?(sa(),ta=m(),ta!==b?(sa(),ta=q(),ta!==b?E={op:Z+"NOT",right:ta}:(f=E,E=b)):(f=E,E=b)):(f=E,E=b),E===b&&(E=f,Z=p(),Z!==b?(sa(),ta=q(),ta!==b?E={op:Z,right:ta}:(f=E,E=b)):(f=E,E=b)),E===b&&(E=f,Z=C(),Z!==b?(sa(),ta=oa(),ta!==b?(sa(),Ca=f,n.substr(f,
6).toLowerCase()===Xa?(La=n.substr(f,6),f+=6):(La=b,0===ua&&h(od)),La!==b?(La=f,ua++,Ma=W(),ua--,Ma===b?La=void 0:(f=La,La=b),La!==b?Ca="ESCAPE":(f=Ca,Ca=b)):(f=Ca,Ca=b),Ca!==b?(sa(),Ca=ma(),Ca!==b?E={op:Z,right:ta,escape:Ca.value}:(f=E,E=b)):(f=E,E=b)):(f=E,E=b)):(f=E,E=b),E===b&&(E=f,Z=C(),Z!==b?(sa(),ta=oa(),ta!==b?E={op:Z,right:ta,escape:""}:(f=E,E=b)):(f=E,E=b))))));E===b&&(E=null);""==E||void 0==E||null==E?E=x:(Z=null,E=Z="arithmetic"==E.type?Qa(x,E.tail):ab(E.op,x,E.right,E.escape))}else f=
E,E=b;x=E}return x}function v(){if(n.substr(f,2)===zb){var x=zb;f+=2}else x=b,0===ua&&h(pd);x===b&&(62===n.charCodeAt(f)?(x=lb,f++):(x=b,0===ua&&h(qd)),x===b&&(n.substr(f,2)===Bb?(x=Bb,f+=2):(x=b,0===ua&&h(rd)),x===b&&(n.substr(f,2)===Rb?(x=Rb,f+=2):(x=b,0===ua&&h(sd)),x===b&&(60===n.charCodeAt(f)?(x=Pb,f++):(x=b,0===ua&&h(td)),x===b&&(61===n.charCodeAt(f)?(x=Qb,f++):(x=b,0===ua&&h(Lc)),x===b&&(n.substr(f,2)===bc?(x=bc,f+=2):(x=b,0===ua&&h(ud))))))));return x}function C(){var x=x=f;var E=m();if(E!==
b){var Z=sa();var ta=fa();ta!==b?x=E=[E,Z,ta]:(f=x,x=b)}else f=x,x=b;x!==b&&(x=x[0]+" "+x[2]);x===b&&(x=fa());return x}function y(){var x=x=f;var E=m();if(E!==b){var Z=sa();var ta=c();ta!==b?x=E=[E,Z,ta]:(f=x,x=b)}else f=x,x=b;x!==b&&(x=x[0]+" "+x[2]);x===b&&(x=c());return x}function q(){var x=f;var E=D();if(E!==b){x=[];var Z=f;var ta=sa();var Ca=z();if(Ca!==b){var La=sa();var Ma=D();Ma!==b?Z=ta=[ta,Ca,La,Ma]:(f=Z,Z=b)}else f=Z,Z=b;for(;Z!==b;)x.push(Z),Z=f,ta=sa(),Ca=z(),Ca!==b?(La=sa(),Ma=D(),Ma!==
b?Z=ta=[ta,Ca,La,Ma]:(f=Z,Z=b)):(f=Z,Z=b);x=Qa(E,x)}else f=x,x=b;return x}function z(){if(43===n.charCodeAt(f)){var x=fb;f++}else x=b,0===ua&&h(wc);x===b&&(45===n.charCodeAt(f)?(x=qb,f++):(x=b,0===ua&&h(xc)));return x}function D(){var x=f;var E=B();if(E!==b){x=[];var Z=f;var ta=sa();var Ca=Y();if(Ca!==b){var La=sa();var Ma=B();Ma!==b?Z=ta=[ta,Ca,La,Ma]:(f=Z,Z=b)}else f=Z,Z=b;for(;Z!==b;)x.push(Z),Z=f,ta=sa(),Ca=Y(),Ca!==b?(La=sa(),Ma=B(),Ma!==b?Z=ta=[ta,Ca,La,Ma]:(f=Z,Z=b)):(f=Z,Z=b);x=Qa(E,x)}else f=
x,x=b;return x}function Y(){if(42===n.charCodeAt(f)){var x=Ua;f++}else x=b,0===ua&&h(vd);x===b&&(47===n.charCodeAt(f)?(x=kb,f++):(x=b,0===ua&&h(wd)));return x}function B(){var x=ma();if(x===b){var E=f;var Z=f;var ta=Ba();if(ta!==b){var Ca=Ka();if(Ca!==b){var La=Ta();La!==b?Z=parseFloat(ta+Ca+La):(f=Z,Z=b)}else f=Z,Z=b}else f=Z,Z=b;Z===b&&(Z=f,ta=Ba(),ta!==b?(Ca=Ka(),Ca!==b?Z=parseFloat(ta+Ca):(f=Z,Z=b)):(f=Z,Z=b),Z===b&&(Z=f,ta=Ba(),ta!==b?(Ca=Ta(),Ca!==b?Z=parseFloat(ta+Ca):(f=Z,Z=b)):(f=Z,Z=b),
Z===b&&(Z=f,ta=Ba(),ta!==b&&(ta=parseFloat(ta)),Z=ta)));var Ma=Z;if(Ma!==b){var dc=f;ua++;var xd=P();ua--;xd===b?dc=void 0:(f=dc,dc=b);dc!==b?E={type:"number",value:Ma}:(f=E,E=b)}else f=E,E=b;x=E;if(x===b){var Sb=f;var Eb=f;if(n.substr(f,4).toLowerCase()===na){var ec=n.substr(f,4);f+=4}else ec=b,0===ua&&h(yd);if(ec!==b){var Tb=f;ua++;var zd=W();ua--;zd===b?Tb=void 0:(f=Tb,Tb=b);Tb!==b?Eb=ec=[ec,Tb]:(f=Eb,Eb=b)}else f=Eb,Eb=b;var Db=Eb;Db!==b&&(Db={type:"bool",value:!0});Sb=Db;if(Sb===b){Sb=f;var Fb=
f;if(n.substr(f,5).toLowerCase()===xa){var fc=n.substr(f,5);f+=5}else fc=b,0===ua&&h(Ad);if(fc!==b){var Ub=f;ua++;var Bd=W();ua--;Bd===b?Ub=void 0:(f=Ub,Ub=b);Ub!==b?Fb=fc=[fc,Ub]:(f=Fb,Fb=b)}else f=Fb,Fb=b;Db=Fb;Db!==b&&(Db={type:"bool",value:!1});Sb=Db}x=Sb;if(x===b){var Gb=f;if(n.substr(f,4).toLowerCase()===ca){var gc=n.substr(f,4);f+=4}else gc=b,0===ua&&h(Cd);if(gc!==b){var Vb=f;ua++;var Dd=W();ua--;Dd===b?Vb=void 0:(f=Vb,Vb=b);Vb!==b?Gb=gc=[gc,Vb]:(f=Gb,Gb=b)}else f=Gb,Gb=b;var yc=Gb;yc!==b&&
(yc={type:"null",value:null});x=yc;if(x===b){var Hb=f;var Ib=f;if(n.substr(f,4).toLowerCase()===Ed){var Mc=n.substr(f,4);f+=4}else Mc=b,0===ua&&h(Fd);if(Mc!==b){var hc=f;ua++;var Gd=W();ua--;Gd===b?hc=void 0:(f=hc,hc=b);hc!==b?Ib="DATE":(f=Ib,Ib=b)}else f=Ib,Ib=b;if(Ib!==b){sa();var Nc=oa();Nc!==b?Hb={type:"date",value:Nc.value}:(f=Hb,Hb=b)}else f=Hb,Hb=b;x=Hb;if(x===b){var Jb=f;var Kb=f;if(n.substr(f,9).toLowerCase()===Hd){var Oc=n.substr(f,9);f+=9}else Oc=b,0===ua&&h(Id);if(Oc!==b){var ic=f;ua++;
var Jd=W();ua--;Jd===b?ic=void 0:(f=ic,ic=b);ic!==b?Kb="TIMESTAMP":(f=Kb,Kb=b)}else f=Kb,Kb=b;if(Kb!==b){sa();var Pc=oa();Pc!==b?Jb={type:"timestamp",value:Pc.value}:(f=Jb,Jb=b)}else f=Jb,Jb=b;x=Jb;if(x===b){var db=f;var zc=L();if(zc!==b){sa();if(45===n.charCodeAt(f)){var vb=qb;f++}else vb=b,0===ua&&h(xc);vb===b&&(43===n.charCodeAt(f)?(vb=fb,f++):(vb=b,0===ua&&h(wc)));if(vb!==b){sa();var Wb=oa();if(Wb!==b){sa();var Qc=k();Qc!==b?db={type:"interval",value:Wb,qualifier:Qc,op:vb}:(f=db,db=b)}else f=
db,db=b}else f=db,db=b}else f=db,db=b;db===b&&(db=f,zc=L(),zc!==b?(sa(),vb=oa(),vb!==b?(sa(),Wb=k(),Wb!==b?db={type:"interval",value:vb,qualifier:Wb,op:""}:(f=db,db=b)):(f=db,db=b)):(f=db,db=b));x=db}}}}}}var Ya=x;if(Ya===b){var hb=f;var Lb=f;if(n.substr(f,7).toLowerCase()===Kd){var Rc=n.substr(f,7);f+=7}else Rc=b,0===ua&&h(Ld);if(Rc!==b){var jc=f;ua++;var Md=W();ua--;Md===b?jc=void 0:(f=jc,jc=b);jc!==b?Lb="EXTRACT":(f=Lb,Lb=b)}else f=Lb,Lb=b;if(Lb!==b){sa();var Nd=Fa();if(Nd!==b){sa();var nb=Q();
nb===b&&(nb=da(),nb===b&&(nb=qa(),nb===b&&(nb=ra(),nb===b&&(nb=wa(),nb===b&&(nb=ya())))));var Sc=nb;if(Sc!==b){sa();var Od=ha();if(Od!==b){sa();var Tc=l();if(Tc!==b){sa();var Pd=Pa();Pd!==b?hb={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:Sc},Tc]}}:(f=hb,hb=b)}else f=hb,hb=b}else f=hb,hb=b}else f=hb,hb=b}else f=hb,hb=b}else f=hb,hb=b;Ya=hb;if(Ya===b){var ib=f;var Mb=f;if(n.substr(f,9).toLowerCase()===Qd){var Uc=n.substr(f,9);f+=9}else Uc=b,0===ua&&h(Rd);if(Uc!==
b){var kc=f;ua++;var Sd=W();ua--;Sd===b?kc=void 0:(f=kc,kc=b);kc!==b?Mb="SUBSTRING":(f=Mb,Mb=b)}else f=Mb,Mb=b;if(Mb!==b){sa();var Td=Fa();if(Td!==b){sa();var Ac=l();if(Ac!==b){sa();var Ud=ha();if(Ud!==b){sa();var Bc=l();if(Bc!==b){sa();var wb=f;var Nb=f;if(n.substr(f,3).toLowerCase()===Vd){var Vc=n.substr(f,3);f+=3}else Vc=b,0===ua&&h(Wd);if(Vc!==b){var lc=f;ua++;var Xd=W();ua--;Xd===b?lc=void 0:(f=lc,lc=b);lc!==b?Nb="FOR":(f=Nb,Nb=b)}else f=Nb,Nb=b;var Xb=Nb;if(Xb!==b){var Yd=sa();var Wc=l();if(Wc!==
b){var Zd=sa();wb=Xb=[Xb,Yd,Wc,Zd]}else f=wb,wb=b}else f=wb,wb=b;wb===b&&(wb=null);Xb=Pa();Xb!==b?ib={type:"function",name:"substring",args:{type:"expr_list",value:wb?[Ac,Bc,wb[2]]:[Ac,Bc]}}:(f=ib,ib=b)}else f=ib,ib=b}else f=ib,ib=b}else f=ib,ib=b}else f=ib,ib=b}else f=ib,ib=b;Ya=ib;if(Ya===b){var Za=f;var Cc=ea();if(Cc!==b){sa();var Dc=Fa();if(Dc!==b){sa();var xb=a();xb===b&&(xb=null);sa();var Yb=l();if(Yb!==b){sa();var Ec=ha();if(Ec!==b){sa();var Xc=l();if(Xc!==b){sa();var $d=Pa();$d!==b?Za={type:"function",
name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==xb?"BOTH":xb},Yb,Xc]}}:(f=Za,Za=b)}else f=Za,Za=b}else f=Za,Za=b}else f=Za,Za=b}else f=Za,Za=b}else f=Za,Za=b;Za===b&&(Za=f,Cc=ea(),Cc!==b?(sa(),Dc=Fa(),Dc!==b?(sa(),xb=a(),xb===b&&(xb=null),sa(),Yb=l(),Yb!==b?(sa(),Ec=Pa(),Ec!==b?Za={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==xb?"BOTH":xb},Yb]}}:(f=Za,Za=b)):(f=Za,Za=b)):(f=Za,Za=b)):(f=Za,Za=b));Ya=Za;if(Ya===b){var jb=f;var Ob=f;if(n.substr(f,
8).toLowerCase()===ae){var Yc=n.substr(f,8);f+=8}else Yc=b,0===ua&&h(be);if(Yc!==b){var mc=f;ua++;var ce=W();ua--;ce===b?mc=void 0:(f=mc,mc=b);mc!==b?Ob="POSITION":(f=Ob,Ob=b)}else f=Ob,Ob=b;if(Ob!==b){sa();var de=Fa();if(de!==b){sa();var Zc=l();if(Zc!==b){sa();var ee=c();if(ee!==b){sa();var $c=l();if($c!==b){sa();var fe=Pa();fe!==b?jb={type:"function",name:"position",args:{type:"expr_list",value:[Zc,$c]}}:(f=jb,jb=b)}else f=jb,jb=b}else f=jb,jb=b}else f=jb,jb=b}else f=jb,jb=b}else f=jb,jb=b;Ya=jb;
if(Ya===b){var Ab=f;var nc;var ob=f;ob=nc=F();if(ob===b)if(ob=f,96===n.charCodeAt(f)?(nc=ad,f++):(nc=b,0===ua&&h(bd)),nc!==b){var oc=[];if(cd.test(n.charAt(f))){var yb=n.charAt(f);f++}else yb=b,0===ua&&h(dd);if(yb!==b)for(;yb!==b;)oc.push(yb),cd.test(n.charAt(f))?(yb=n.charAt(f),f++):(yb=b,0===ua&&h(dd));else oc=b;oc!==b?(96===n.charCodeAt(f)?(yb=ad,f++):(yb=b,0===ua&&h(bd)),yb!==b?ob=oc.join(""):(f=ob,ob=b)):(f=ob,ob=b)}else f=ob,ob=b;var ed=ob;if(ed!==b){sa();var ge=Fa();if(ge!==b){sa();var pc=
d();pc===b&&(pc=null);sa();var he=Pa();he!==b?Ab={type:"function",name:ed,args:pc?pc:{type:"expr_list",value:[]}}:(f=Ab,Ab=b)}else f=Ab,Ab=b}else f=Ab,Ab=b;Ya=Ab;if(Ya===b){var tb;var eb=f;var Fc=Aa();if(Fc!==b){sa();var Zb=l();if(Zb!==b){sa();var $b=[];for(tb=pa();tb!==b;)$b.push(tb),tb=pa();tb=sa();var qc=Ha();qc!==b?eb={type:"case_expression",format:"simple",operand:Zb,clauses:$b,else:null}:(f=eb,eb=b)}else f=eb,eb=b}else f=eb,eb=b;if(eb===b)if(eb=f,Fc=Aa(),Fc!==b)if(sa(),Zb=l(),Zb!==b){sa();$b=
[];for(tb=pa();tb!==b;)$b.push(tb),tb=pa();tb=sa();qc=va();if(qc!==b){sa();var ie=Ha();ie!==b?eb={type:"case_expression",format:"simple",operand:Zb,clauses:$b,else:qc.value}:(f=eb,eb=b)}else f=eb,eb=b}else f=eb,eb=b;else f=eb,eb=b;var Gc=eb;if(Gc===b){var ub;var gb=f;var Hc=Aa();if(Hc!==b){sa();var ac=[];for(ub=la();ub!==b;)ac.push(ub),ub=la();ub=sa();var rc=Ha();rc!==b?gb={type:"case_expression",format:"searched",clauses:ac,else:null}:(f=gb,gb=b)}else f=gb,gb=b;if(gb===b)if(gb=f,Hc=Aa(),Hc!==b){sa();
ac=[];for(ub=la();ub!==b;)ac.push(ub),ub=la();ub=sa();rc=va();if(rc!==b){sa();var je=Ha();je!==b?gb={type:"case_expression",format:"searched",clauses:ac,else:rc.value}:(f=gb,gb=b)}else f=gb,gb=b}else f=gb,gb=b;Gc=gb}Ya=Gc;if(Ya===b){var sc;var tc=f;var fd=P();if(fd!==b){var gd=[];for(sc=G();sc!==b;)gd.push(sc),sc=G();tc=fd+gd.join("")}else f=tc,tc=b;var uc=tc;if(uc!==b){var Ic=uc;uc=/^CURRENT_DATE$/i.test(Ic)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Ic)?{type:"current_time",mode:"timestamp"}:
{type:"column_ref",table:"",column:Ic}}Ya=uc;if(Ya===b&&(Ya=r(),Ya===b)){Ya=f;var ke=Fa();if(ke!==b){sa();var Jc=l();if(Jc!==b){sa();var le=Pa();le!==b?(Jc.paren=!0,Ya=Jc):(f=Ya,Ya=b)}else f=Ya,Ya=b}else f=Ya,Ya=b}}}}}}}}return Ya}function F(){var x;var E=f;var Z=P();if(Z!==b){E=[];for(x=W();x!==b;)E.push(x),x=W();E=Z+E.join("")}else f=E,E=b;return E}function P(){if(me.test(n.charAt(f))){var x=n.charAt(f);f++}else x=b,0===ua&&h(ne);return x}function W(){if(oe.test(n.charAt(f))){var x=n.charAt(f);
f++}else x=b,0===ua&&h(pe);return x}function G(){if(qe.test(n.charAt(f))){var x=n.charAt(f);f++}else x=b,0===ua&&h(re);return x}function r(){var x=f;if(64===n.charCodeAt(f)){var E=rb;f++}else E=b,0===ua&&h(se);if(E!==b){var Z=F();Z!==b?x=E=[E,Z]:(f=x,x=b)}else f=x,x=b;x!==b&&(x={type:"param",value:x[1]});return x}function a(){var x=f;if(n.substr(f,7).toLowerCase()===te){var E=n.substr(f,7);f+=7}else E=b,0===ua&&h(ue);if(E!==b){E=f;ua++;var Z=W();ua--;Z===b?E=void 0:(f=E,E=b);E!==b?x="LEADING":(f=
x,x=b)}else f=x,x=b;x===b&&(x=f,n.substr(f,8).toLowerCase()===ve?(E=n.substr(f,8),f+=8):(E=b,0===ua&&h(we)),E!==b?(E=f,ua++,Z=W(),ua--,Z===b?E=void 0:(f=E,E=b),E!==b?x="TRAILING":(f=x,x=b)):(f=x,x=b),x===b&&(x=f,n.substr(f,4).toLowerCase()===xe?(E=n.substr(f,4),f+=4):(E=b,0===ua&&h(ye)),E!==b?(E=f,ua++,Z=W(),ua--,Z===b?E=void 0:(f=E,E=b),E!==b?x="BOTH":(f=x,x=b)):(f=x,x=b)));return x}function k(){var x=f;var E=f;var Z=O();if(Z!==b){sa();var ta=Fa();if(ta!==b)if(sa(),ta=ja(),ta!==b){sa();var Ca=Pa();
Ca!==b?E={type:"interval-period",period:Z.value,precision:ta,secondary:null}:(f=E,E=b)}else f=E,E=b;else f=E,E=b}else f=E,E=b;E===b&&(E=f,Z=O(),Z!==b&&(Z=hd(Z)),E=Z);if(E!==b)if(sa(),Z=f,n.substr(f,2).toLowerCase()===ze?(ta=n.substr(f,2),f+=2):(ta=b,0===ua&&h(Ae)),ta!==b?(ta=f,ua++,Ca=W(),ua--,Ca===b?ta=void 0:(f=ta,ta=b),ta!==b?Z="TO":(f=Z,Z=b)):(f=Z,Z=b),Z!==b){sa();Z=f;ta=O();ta!==b&&(ta={type:"interval-period",period:ta.value,precision:null,secondary:null});Z=ta;if(Z===b){Z=f;ta=ya();if(ta!==
b)if(sa(),ta=Fa(),ta!==b)if(sa(),ta=ja(),ta!==b)if(sa(),Ca=Da(),Ca!==b)if(sa(),Ca=X(),Ca!==b){sa();var La=Pa();La!==b?Z=id(ta,Ca):(f=Z,Z=b)}else f=Z,Z=b;else f=Z,Z=b;else f=Z,Z=b;else f=Z,Z=b;else f=Z,Z=b;Z===b&&(Z=f,ta=ya(),ta!==b?(sa(),ta=Fa(),ta!==b?(sa(),ta=ja(),ta!==b?(sa(),Ca=Pa(),Ca!==b?Z={type:"interval-period",period:"second",precision:ta,secondary:null}:(f=Z,Z=b)):(f=Z,Z=b)):(f=Z,Z=b)):(f=Z,Z=b),Z===b&&(Z=f,ta=ya(),ta!==b&&(ta={type:"interval-period",period:"second",precision:null,secondary:null}),
Z=ta))}Z!==b?x={type:"interval-qualifier",start:E,end:Z}:(f=x,x=b)}else f=x,x=b;else f=x,x=b;x===b&&(x=f,Z=O(),Z!==b?(sa(),E=Fa(),E!==b?(sa(),E=X(),E!==b?(sa(),ta=Pa(),ta!==b?x={type:"interval-period",period:Z.value,precision:E,secondary:null}:(f=x,x=b)):(f=x,x=b)):(f=x,x=b)):(f=x,x=b),x===b&&(x=f,Z=O(),Z!==b&&(Z=hd(Z)),x=Z,x===b&&(x=f,Z=ya(),Z!==b?(sa(),E=Fa(),E!==b?(sa(),E=ja(),E!==b?(sa(),ta=Da(),ta!==b?(sa(),Z=X(),Z!==b?(sa(),ta=Pa(),ta!==b?x=id(E,Z):(f=x,x=b)):(f=x,x=b)):(f=x,x=b)):(f=x,x=b)):
(f=x,x=b)):(f=x,x=b),x===b&&(x=f,Z=ya(),Z!==b?(sa(),E=Fa(),E!==b?(sa(),E=X(),E!==b?(sa(),ta=Pa(),ta!==b?x={type:"interval-period",period:"second",precision:E,secondary:null}:(f=x,x=b)):(f=x,x=b)):(f=x,x=b)):(f=x,x=b),x===b&&(x=f,Z=ya(),Z!==b&&(Z={type:"interval-period",period:"second",precision:null,secondary:null}),x=Z)))));return x}function O(){var x=f;x=qa();x!==b&&(x={type:"string",value:"day"});x===b&&(x=f,x=ra(),x!==b&&(x={type:"string",value:"hour"}),x===b&&(x=f,x=wa(),x!==b&&(x={type:"string",
value:"minute"}),x===b&&(x=f,x=da(),x!==b&&(x={type:"string",value:"month"}),x===b&&(x=f,x=Q(),x!==b&&(x={type:"string",value:"year"})))));return x}function X(){var x=Oa();x!==b&&(x=parseFloat(x));return x}function ja(){var x=Oa();x!==b&&(x=parseFloat(x));return x}function oa(){var x=ma();x===b&&(x=r());return x}function ma(){var x=f;if(39===n.charCodeAt(f)){var E=Na;f++}else E=b,0===ua&&h(jd);E===b&&(n.substr(f,2)===Cb?(E=Cb,f+=2):(E=b,0===ua&&h(Be)));if(E!==b){E=[];var Z=f;n.substr(f,2)===V?(Z=
V,f+=2):(Z=b,0===ua&&h(kd));Z!==b&&(Z="'");Z===b&&(ld.test(n.charAt(f))?(Z=n.charAt(f),f++):(Z=b,0===ua&&h(md)));for(;Z!==b;)E.push(Z),Z=f,n.substr(f,2)===V?(Z=V,f+=2):(Z=b,0===ua&&h(kd)),Z!==b&&(Z="'"),Z===b&&(ld.test(n.charAt(f))?(Z=n.charAt(f),f++):(Z=b,0===ua&&h(md)));39===n.charCodeAt(f)?(Z=Na,f++):(Z=b,0===ua&&h(jd));Z!==b?x={type:"string",value:E.join("")}:(f=x,x=b)}else f=x,x=b;return x}function la(){var x=f;if(Ga()!==b){sa();var E=l();if(E!==b){sa();var Z=Ea();Z!==b?(sa(),Z=l(),Z!==b?x={type:"when_clause",
operand:E,value:Z}:(f=x,x=b)):(f=x,x=b)}else f=x,x=b}else f=x,x=b;return x}function pa(){var x=f;if(Ga()!==b){sa();var E=l();if(E!==b){sa();var Z=Ea();Z!==b?(sa(),Z=l(),Z!==b?x={type:"when_clause",operand:E,value:Z}:(f=x,x=b)):(f=x,x=b)}else f=x,x=b}else f=x,x=b;return x}function va(){var x=f;var E=f;if(n.substr(f,4).toLowerCase()===Ce){var Z=n.substr(f,4);f+=4}else Z=b,0===ua&&h(De);if(Z!==b){Z=f;ua++;var ta=W();ua--;ta===b?Z=void 0:(f=Z,Z=b);Z!==b?E="ELSE":(f=E,E=b)}else f=E,E=b;E!==b?(sa(),E=l(),
E!==b?x={type:"else_clause",value:E}:(f=x,x=b)):(f=x,x=b);return x}function Ba(){var x=Oa();if(x===b){x=f;if(45===n.charCodeAt(f)){var E=qb;f++}else E=b,0===ua&&h(xc);E===b&&(43===n.charCodeAt(f)?(E=fb,f++):(E=b,0===ua&&h(wc)));if(E!==b){var Z=Oa();Z!==b?x=E[0]+Z:(f=x,x=b)}else f=x,x=b}return x}function Ka(){var x=f;if(46===n.charCodeAt(f)){var E=ia;f++}else E=b,0===ua&&h(Ee);E!==b?(x=Oa(),x===b&&(x=null),x="."+(null!=x?x:"")):(f=x,x=b);return x}function Ta(){var x;var E=x=f;if(Fe.test(n.charAt(f))){var Z=
n.charAt(f);f++}else Z=b,0===ua&&h(Ge);Z!==b?(He.test(n.charAt(f))?(E=n.charAt(f),f++):(E=b,0===ua&&h(Ie)),E===b&&(E=null),E="e"+(null===E?"":E)):(f=E,E=b);E!==b?(Z=Oa(),Z!==b?x=E+Z:(f=x,x=b)):(f=x,x=b);return x}function Oa(){var x=[];var E=Sa();if(E!==b)for(;E!==b;)x.push(E),E=Sa();else x=b;x!==b&&(x=x.join(""));return x}function Sa(){if(Je.test(n.charAt(f))){var x=n.charAt(f);f++}else x=b,0===ua&&h(Ke);return x}function c(){var x=f;if(n.substr(f,2).toLowerCase()===za){var E=n.substr(f,2);f+=2}else E=
b,0===ua&&h(Le);if(E!==b){E=f;ua++;var Z=W();ua--;Z===b?E=void 0:(f=E,E=b);E!==b?x="IN":(f=x,x=b)}else f=x,x=b;return x}function p(){var x=f;if(n.substr(f,2).toLowerCase()===Ia){var E=n.substr(f,2);f+=2}else E=b,0===ua&&h(Me);if(E!==b){E=f;ua++;var Z=W();ua--;Z===b?E=void 0:(f=E,E=b);E!==b?x="IS":(f=x,x=b)}else f=x,x=b;return x}function fa(){var x=f;if(n.substr(f,4).toLowerCase()===Ja){var E=n.substr(f,4);f+=4}else E=b,0===ua&&h(Ne);if(E!==b){E=f;ua++;var Z=W();ua--;Z===b?E=void 0:(f=E,E=b);E!==b?
x="LIKE":(f=x,x=b)}else f=x,x=b;return x}function m(){var x=f;if(n.substr(f,3).toLowerCase()===Wa){var E=n.substr(f,3);f+=3}else E=b,0===ua&&h(Oe);if(E!==b){E=f;ua++;var Z=W();ua--;Z===b?E=void 0:(f=E,E=b);E!==b?x="NOT":(f=x,x=b)}else f=x,x=b;return x}function J(){var x=f;if(n.substr(f,3).toLowerCase()===Va){var E=n.substr(f,3);f+=3}else E=b,0===ua&&h(Pe);if(E!==b){E=f;ua++;var Z=W();ua--;Z===b?E=void 0:(f=E,E=b);E!==b?x="AND":(f=x,x=b)}else f=x,x=b;return x}function T(){var x=f;if(n.substr(f,2).toLowerCase()===
cb){var E=n.substr(f,2);f+=2}else E=b,0===ua&&h(Qe);if(E!==b){E=f;ua++;var Z=W();ua--;Z===b?E=void 0:(f=E,E=b);E!==b?x="OR":(f=x,x=b)}else f=x,x=b;return x}function U(){var x=f;if(n.substr(f,7).toLowerCase()===mb){var E=n.substr(f,7);f+=7}else E=b,0===ua&&h(Re);if(E!==b){E=f;ua++;var Z=W();ua--;Z===b?E=void 0:(f=E,E=b);E!==b?x="BETWEEN":(f=x,x=b)}else f=x,x=b;return x}function ha(){var x=f;if(n.substr(f,4).toLowerCase()===Se){var E=n.substr(f,4);f+=4}else E=b,0===ua&&h(Te);if(E!==b){E=f;ua++;var Z=
W();ua--;Z===b?E=void 0:(f=E,E=b);E!==b?x="FROM":(f=x,x=b)}else f=x,x=b;return x}function ea(){var x=f;if(n.substr(f,4).toLowerCase()===Ue){var E=n.substr(f,4);f+=4}else E=b,0===ua&&h(Ve);if(E!==b){E=f;ua++;var Z=W();ua--;Z===b?E=void 0:(f=E,E=b);E!==b?x="TRIM":(f=x,x=b)}else f=x,x=b;return x}function L(){var x=f;if(n.substr(f,8).toLowerCase()===We){var E=n.substr(f,8);f+=8}else E=b,0===ua&&h(Xe);if(E!==b){E=f;ua++;var Z=W();ua--;Z===b?E=void 0:(f=E,E=b);E!==b?x="INTERVAL":(f=x,x=b)}else f=x,x=b;
return x}function Q(){var x=f;if(n.substr(f,4).toLowerCase()===Ye){var E=n.substr(f,4);f+=4}else E=b,0===ua&&h(Ze);if(E!==b){E=f;ua++;var Z=W();ua--;Z===b?E=void 0:(f=E,E=b);E!==b?x="YEAR":(f=x,x=b)}else f=x,x=b;return x}function da(){var x=f;if(n.substr(f,5).toLowerCase()===$e){var E=n.substr(f,5);f+=5}else E=b,0===ua&&h(af);if(E!==b){E=f;ua++;var Z=W();ua--;Z===b?E=void 0:(f=E,E=b);E!==b?x="MONTH":(f=x,x=b)}else f=x,x=b;return x}function qa(){var x=f;if(n.substr(f,3).toLowerCase()===bf){var E=n.substr(f,
3);f+=3}else E=b,0===ua&&h(cf);if(E!==b){E=f;ua++;var Z=W();ua--;Z===b?E=void 0:(f=E,E=b);E!==b?x="DAY":(f=x,x=b)}else f=x,x=b;return x}function ra(){var x=f;if(n.substr(f,4).toLowerCase()===df){var E=n.substr(f,4);f+=4}else E=b,0===ua&&h(ef);if(E!==b){E=f;ua++;var Z=W();ua--;Z===b?E=void 0:(f=E,E=b);E!==b?x="HOUR":(f=x,x=b)}else f=x,x=b;return x}function wa(){var x=f;if(n.substr(f,6).toLowerCase()===ff){var E=n.substr(f,6);f+=6}else E=b,0===ua&&h(gf);if(E!==b){E=f;ua++;var Z=W();ua--;Z===b?E=void 0:
(f=E,E=b);E!==b?x="MINUTE":(f=x,x=b)}else f=x,x=b;return x}function ya(){var x=f;if(n.substr(f,6).toLowerCase()===hf){var E=n.substr(f,6);f+=6}else E=b,0===ua&&h(jf);if(E!==b){E=f;ua++;var Z=W();ua--;Z===b?E=void 0:(f=E,E=b);E!==b?x="SECOND":(f=x,x=b)}else f=x,x=b;return x}function Aa(){var x=f;if(n.substr(f,4).toLowerCase()===kf){var E=n.substr(f,4);f+=4}else E=b,0===ua&&h(lf);if(E!==b){E=f;ua++;var Z=W();ua--;Z===b?E=void 0:(f=E,E=b);E!==b?x="CASE":(f=x,x=b)}else f=x,x=b;return x}function Ha(){var x=
f;if(n.substr(f,3).toLowerCase()===mf){var E=n.substr(f,3);f+=3}else E=b,0===ua&&h(nf);if(E!==b){E=f;ua++;var Z=W();ua--;Z===b?E=void 0:(f=E,E=b);E!==b?x="END":(f=x,x=b)}else f=x,x=b;return x}function Ga(){var x=f;if(n.substr(f,4).toLowerCase()===of){var E=n.substr(f,4);f+=4}else E=b,0===ua&&h(pf);if(E!==b){E=f;ua++;var Z=W();ua--;Z===b?E=void 0:(f=E,E=b);E!==b?x="WHEN":(f=x,x=b)}else f=x,x=b;return x}function Ea(){var x=f;if(n.substr(f,4).toLowerCase()===qf){var E=n.substr(f,4);f+=4}else E=b,0===
ua&&h(rf);if(E!==b){E=f;ua++;var Z=W();ua--;Z===b?E=void 0:(f=E,E=b);E!==b?x="THEN":(f=x,x=b)}else f=x,x=b;return x}function Da(){if(44===n.charCodeAt(f)){var x=sf;f++}else x=b,0===ua&&h(tf);return x}function Fa(){if(40===n.charCodeAt(f)){var x=uf;f++}else x=b,0===ua&&h(vf);return x}function Pa(){if(41===n.charCodeAt(f)){var x=wf;f++}else x=b,0===ua&&h(xf);return x}function sa(){var x;var E=[];for(x=bb();x!==b;)E.push(x),x=bb();return E}function bb(){if(yf.test(n.charAt(f))){var x=n.charAt(f);f++}else x=
b,0===ua&&h(zf);return x}function ab(x,E,Z,ta){x={type:"binary_expr",operator:x,left:E,right:Z};void 0!==ta&&(x.escape=ta);return x}function Qa(x,E){for(var Z=0;Z<E.length;Z++)x=ab(E[Z][1],x,E[Z][3]);return x}t=void 0!==t?t:{};var b={},$a=t.grammarSource,Ra={start:I},pb=I,ka="!",Qb="\x3d",zb="\x3e\x3d",lb="\x3e",Bb="\x3c\x3d",Rb="\x3c\x3e",Pb="\x3c",bc="!\x3d",fb="+",qb="-",Ua="*",kb="/",rb="@",Na="'",Cb="N'",V="''",ia=".",ca="null",na="true",xa="false",za="in",Ia="is",Ja="like",Xa="escape",Wa="not",
Va="and",cb="or",mb="between",Se="from",Vd="for",Qd="substring",Kd="extract",Ue="trim",ae="position",Hd="timestamp",Ed="date",te="leading",ve="trailing",xe="both",ze="to",We="interval",Ye="year",$e="month",bf="day",df="hour",ff="minute",hf="second",kf="case",mf="end",of="when",qf="then",Ce="else",sf=",",uf="(",wf=")",ad="`",me=/^[A-Za-z_\x80-\uFFFF]/,oe=/^[A-Za-z0-9_]/,qe=/^[A-Za-z0-9_.\x80-\uFFFF]/,ld=/^[^']/,Je=/^[0-9]/,Fe=/^[eE]/,He=/^[+\-]/,yf=/^[ \t\n\r]/,cd=/^[^`]/,nd=w("!",!1),Lc=w("\x3d",
!1),pd=w("\x3e\x3d",!1),qd=w("\x3e",!1),rd=w("\x3c\x3d",!1),sd=w("\x3c\x3e",!1),td=w("\x3c",!1),ud=w("!\x3d",!1),wc=w("+",!1),xc=w("-",!1),vd=w("*",!1),wd=w("/",!1),ne=H([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),pe=H([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),re=H([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),se=w("@",!1),jd=w("'",!1),Be=w("N'",!1),kd=w("''",!1),md=H(["'"],!0,!1),Ee=w(".",!1),Ke=H([["0","9"]],!1,!1),Ge=H(["e","E"],!1,!1),Ie=H(["+","-"],!1,!1),Cd=w("NULL",
!0),yd=w("TRUE",!0),Ad=w("FALSE",!0),Le=w("IN",!0),Me=w("IS",!0),Ne=w("LIKE",!0),od=w("ESCAPE",!0),Oe=w("NOT",!0),Pe=w("AND",!0),Qe=w("OR",!0),Re=w("BETWEEN",!0),Te=w("FROM",!0),Wd=w("FOR",!0),Rd=w("SUBSTRING",!0),Ld=w("EXTRACT",!0),Ve=w("TRIM",!0),be=w("POSITION",!0),Id=w("TIMESTAMP",!0),Fd=w("DATE",!0),ue=w("LEADING",!0),we=w("TRAILING",!0),ye=w("BOTH",!0),Ae=w("TO",!0),Xe=w("INTERVAL",!0),Ze=w("YEAR",!0),af=w("MONTH",!0),cf=w("DAY",!0),ef=w("HOUR",!0),gf=w("MINUTE",!0),jf=w("SECOND",!0),lf=w("CASE",
!0),nf=w("END",!0),pf=w("WHEN",!0),rf=w("THEN",!0),De=w("ELSE",!0),tf=w(",",!1),vf=w("(",!1),xf=w(")",!1),zf=H([" ","\t","\n","\r"],!1,!1),bd=w("`",!1),dd=H(["`"],!0,!1),hd=function(x){return{type:"interval-period",period:x.value,precision:null,secondary:null}},id=function(x,E){return{type:"interval-period",period:"second",precision:x,secondary:E}},f=0,cc=[{line:1,column:1}],sb=0,vc=[],ua=0;if("startRule"in t){if(!(t.startRule in Ra))throw Error("Can't start parsing from rule \""+t.startRule+'".');
pb=Ra[t.startRule]}var Kc=pb();if(Kc!==b&&f===n.length)return Kc;Kc!==b&&f<n.length&&h({type:"end"});throw function(x,E,Z){return new K(K.buildMessage(x,E),x,E,Z)}(vc,sb<n.length?n.charAt(sb):null,sb<n.length?R(sb,sb+1):R(sb,sb));}}})})(aa);let ba=function(){function u(){}u.parse=function(K){return aa.exports.parse(K)};return u}();g.WhereGrammar=ba;Object.defineProperty(g,"__esModule",{value:!0})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(g){g.commonjsGlobal="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};g.commonjsRequire=function(e){throw Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');};g.getDefaultExportFromCjs=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}})},
"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(g){g.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,
supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(g,
"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./timeSupport ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(g,e,aa,ba,u,K,A,n,t,w,H,S,R,h,I,d,l){function N(C,y,q,z,D,Y){D-=q;Y-=z;C=Math.min(1,Math.max(0,((C-q)*D+(y-z)*Y)/(D*D+Y*Y)));return{x:q+D*C,y:z+Y*C}}function M(C,y){return C?y?4:3:y?3:2}let v=function(){function C(q,z,D){this.items=q;this.queryGeometry=z;this.definitionExpression=D.definitionExpression;this.geometryType=D.geometryType;this.hasM=D.hasM;this.hasZ=D.hasZ;this.objectIdField=D.objectIdField;this.spatialReference=D.spatialReference;this.fieldsIndex=D.fieldsIndex;this.timeInfo=
D.timeInfo;this.featureAdapter=D.featureAdapter;this.aggregateAdapter=D.aggregateAdapter}var y=C.prototype;y.createQueryResponseForCount=function(q){const z=new w(q,this.featureAdapter,this.fieldsIndex);if(!q.outStatistics)return z.countDistinctValues(this.items);const {groupByFieldsForStatistics:D,having:Y}=q;if(null==D||!D.length)return 1;const B=new Map,F=new Map,P=new Set;q=q.outStatistics;for(const G of q){({statisticType:q}=G);q="exceedslimit"!==q?G.onStatisticField:void 0;if(!F.has(q)){var W=
[];for(const r of D){const a=this._getAttributeValues(z,r,B);W.push(a)}F.set(q,this._calculateUniqueValues(W,z.returnDistinctValues))}q=F.get(q);for(const r in q){const {data:a,items:k}=q[r];W=a.join(",");Y&&!z.validateItems(k,Y)||P.add(W)}}return P.size};y.createQueryResponse=function(){var q=aa._asyncToGenerator(function*(z){let D;D=z.outStatistics?z.outStatistics.some(Y=>"exceedslimit"===Y.statisticType)?this._createExceedsLimitQueryResponse(z):yield this._createStatisticsQueryResponse(z):this._createFeatureQueryResponse(z);
z.returnQueryGeometry&&(n.isValid(z.outSR)&&!n.equals(this.queryGeometry.spatialReference,z.outSR)?D.queryGeometry=h.cleanFromGeometryEngine({spatialReference:z.outSR,...S.project(this.queryGeometry,this.queryGeometry.spatialReference,z.outSR)}):D.queryGeometry=h.cleanFromGeometryEngine({spatialReference:z.outSR,...this.queryGeometry}));return D});return function(z){return q.apply(this,arguments)}}();y.createSnappingResponse=function(q,z){const D=this.featureAdapter,Y=M(this.hasZ,this.hasM),{x:B,
y:F}=q.point,P="number"===typeof q.distance?q.distance:q.distance.x,W="number"===typeof q.distance?q.distance:q.distance.y,G={candidates:[]},r="esriGeometryPolygon"===this.geometryType;z=this._getPointCreator(q.point,this.spatialReference,z);for(const la of this.items){var a=D.getGeometry(la);if(ba.isNone(a))continue;const {coords:pa,lengths:va}=a;if(q.types&e.SnappingTypes.EDGE){a=0;for(var k=0;k<va.length;k++){var O=va[k];for(var X=0;X<O;X++,a+=Y){var ja=pa[a],oa=pa[a+1];if(X!==O-1){const Ba=pa[a+
Y],Ka=pa[a+Y+1],{x:Ta,y:Oa}=N(B,F,ja,oa,Ba,Ka);var ma=(B-Ta)/P;const Sa=(F-Oa)/W;ma=ma*ma+Sa*Sa;1>=ma&&G.candidates.push({type:"edge",objectId:D.getObjectId(la),distance:Math.sqrt(ma),target:z(Ta,Oa),start:z(ja,oa),end:z(Ba,Ka)})}}}}if(q.types&e.SnappingTypes.VERTEX)for(a=r?pa.length-Y:pa.length,k=0;k<a;k+=Y)O=pa[k],X=pa[k+1],ja=(B-O)/P,oa=(F-X)/W,ja=ja*ja+oa*oa,1>=ja&&G.candidates.push({type:"vertex",objectId:D.getObjectId(la),distance:Math.sqrt(ja),target:z(O,X)})}G.candidates.sort((la,pa)=>la.distance-
pa.distance);return G};y._getPointCreator=function(q,z,D){const Y=ba.isSome(D)&&!n.equals(z,D)?B=>S.project(B,z,D):B=>B;return null!=q.z&&null!=q.m?(B,F)=>Y({x:B,y:F,z:q.z,m:q.m}):null!=q.z?(B,F)=>Y({x:B,y:F,z:q.z}):null!=q.m?(B,F)=>Y({x:B,y:F,m:q.m}):(B,F)=>Y({x:B,y:F})};y.executeAttributesQuery=function(q){var z=H.getWhereClause(q.where,this.fieldsIndex);if(!z)return Promise.resolve(this);if(z.isStandardized){let D=0;const Y=[];for(const B of this.items)z.testFeature(B,this.featureAdapter)&&(Y[D++]=
B);z=new C(Y,this.queryGeometry,this);z.definitionExpression=q.where;return Promise.resolve(z)}return Promise.reject(new TypeError("Where clause is not standardized"))};y.executeAggregateIdsQuery=function(q){if(!q.aggregateIds||!q.aggregateIds.length||ba.isNone(this.aggregateAdapter))return Promise.resolve(this);const z=new Set;for(const Y of q.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(Y).forEach(B=>z.add(B));const D=this.featureAdapter.getObjectId;return Promise.resolve(new C(this.items.filter(Y=>
z.has(D(Y))),this.queryGeometry,this))};y.executeObjectIdsQuery=function(q){if(!q.objectIds||!q.objectIds.length)return Promise.resolve(this);const z=new Set(q.objectIds),D=this.featureAdapter.getObjectId;return Promise.resolve(new C(this.items.filter(Y=>z.has(D(Y))),this.queryGeometry,this))};y.executeTimeQuery=function(q){q=R.getTimeOperator(this.timeInfo,q.timeExtent,this.featureAdapter);if(!ba.isSome(q))return Promise.resolve(this);q=this.items.filter(q);return Promise.resolve(new C(q,this.queryGeometry,
this))};y.filterLatest=function(){const {trackIdField:q,startTimeField:z,endTimeField:D}=this.timeInfo;var Y=D||z;const B=new Map,F=this.featureAdapter.getAttribute;for(const P of this.items){const W=F(P,q),G=F(P,Y),r=B.get(W);(!r||G>F(r,Y))&&B.set(W,P)}Y=Array.from(B.values());return Promise.resolve(new C(Y,this.queryGeometry,this))};y.project=function(){var q=aa._asyncToGenerator(function*(z){if(!z||n.equals(this.spatialReference,z))return this;const D=this.featureAdapter,Y=(yield S.projectMany(this.items.map(B=>
h.getGeometry(this.geometryType,this.hasZ,this.hasM,D.getGeometry(B))),this.spatialReference,z)).map((B,F)=>D.cloneWithGeometry(this.items[F],t.convertFromGeometry(B,this.hasZ,this.hasM)));return new C(Y,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:z,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})});return function(z){return q.apply(this,
arguments)}}();y.createSummaryStatisticsResponse=function(){var q=aa._asyncToGenerator(function*(z,D){const {field:Y,valueExpression:B,normalizationField:F,normalizationType:P,normalizationTotal:W,minValue:G,maxValue:r,scale:a}=D;D=this.fieldsIndex.isDateField(Y);z=yield this._getDataValues(z,{field:Y,valueExpression:B,normalizationField:F,normalizationType:P,normalizationTotal:W,scale:a});const k=d.isNullCountSupported({normalizationType:P,normalizationField:F,minValue:G,maxValue:r}),O=this.fieldsIndex.get(Y),
X={value:.5,fieldType:null==O?void 0:O.type};z=I.isStringField(O)?d.calculateStringStatistics({values:z,supportsNullCount:k,percentileParams:X}):d.calculateStatistics({values:z,minValue:G,maxValue:r,useSampleStdDev:!P,supportsNullCount:k,percentileParams:X});return d.processSummaryStatisticsResult(z,D)});return function(z,D){return q.apply(this,arguments)}}();y.createUniqueValuesResponse=function(){var q=aa._asyncToGenerator(function*(z,D){const {field:Y,valueExpression:B,domain:F,returnAllCodedValues:P,
scale:W}=D;z=yield this._getDataValues(z,{field:Y,valueExpression:B,scale:W});z=d.calculateUniqueValuesCount(z);return d.createUVResult(z,F,P)});return function(z,D){return q.apply(this,arguments)}}();y.createClassBreaksResponse=function(){var q=aa._asyncToGenerator(function*(z,D){const {field:Y,valueExpression:B,normalizationField:F,normalizationType:P,normalizationTotal:W,classificationMethod:G,standardDeviationInterval:r,minValue:a,maxValue:k,numClasses:O,scale:X}=D;z=yield this._getDataValues(z,
{field:Y,valueExpression:B,normalizationField:F,normalizationType:P,normalizationTotal:W,scale:X});z=d.calculateClassBreaks(z,{field:Y,normalizationField:F,normalizationType:P,normalizationTotal:W,classificationMethod:G,standardDeviationInterval:r,minValue:a,maxValue:k,numClasses:O});return d.resolveCBResult(z,G)});return function(z,D){return q.apply(this,arguments)}}();y.createHistogramResponse=function(){var q=aa._asyncToGenerator(function*(z,D){const {field:Y,valueExpression:B,normalizationField:F,
normalizationType:P,normalizationTotal:W,classificationMethod:G,standardDeviationInterval:r,minValue:a,maxValue:k,numBins:O,scale:X}=D;z=yield this._getDataValues(z,{field:Y,valueExpression:B,normalizationField:F,normalizationType:P,normalizationTotal:W,scale:X});return d.calculateHistogram(z,{field:Y,normalizationField:F,normalizationType:P,normalizationTotal:W,classificationMethod:G,standardDeviationInterval:r,minValue:a,maxValue:k,numBins:O})});return function(z,D){return q.apply(this,arguments)}}();
y._sortFeatures=function(q,z,D){if(1<q.length&&z&&z.length)for(const Y of z.reverse()){z=Y.split(" ");const B=z[0],F=this.fieldsIndex.get(B);z=z[1]&&"desc"===z[1].toLowerCase();const P=d.getAttributeComparator(null==F?void 0:F.type,z);q.sort((W,G)=>{W=D(W,B,F);G=D(G,B,F);return P(W,G)})}};y._createFeatureQueryResponse=function(q){const z=this.items,{geometryType:D,hasM:Y,hasZ:B,objectIdField:F,spatialReference:P}=this,{outFields:W,outSR:G,quantizationParameters:r,resultRecordCount:a,resultOffset:k,
returnZ:O,returnM:X}=q,ja=null!=a?z.length>(k||0)+a:!1,oa=W&&(W.includes("*")?[...this.fieldsIndex.fields]:W.map(ma=>this.fieldsIndex.get(ma)));return{exceededTransferLimit:ja,features:this._createFeatures(q,z),fields:oa,geometryType:D,hasM:Y&&X,hasZ:B&&O,objectIdFieldName:F,spatialReference:h.cleanFromGeometryEngine(G?G:P),transform:r&&A.toQuantizationTransform(r)||null}};y._createFeatures=function(q,z){const D=new w(q,this.featureAdapter,this.fieldsIndex),{hasM:Y,hasZ:B}=this,{orderByFields:F,quantizationParameters:P,
returnGeometry:W,returnCentroid:G,maxAllowableOffset:r,resultOffset:a,resultRecordCount:k,returnZ:O=!1,returnM:X=!1}=q,ja=B&&O,oa=Y&&X;q=[];var ma=0;z=[...z];this._sortFeatures(z,F,(va,Ba,Ka)=>D.getFieldValue(va,Ba,Ka));if(W||G){var la=A.toQuantizationTransform(P);if(W&&!G)for(var pa of z)q[ma++]={attributes:D.getAttributes(pa),geometry:h.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(pa),r,la,ja,oa)};else if(!W&&G)for(const va of z)q[ma++]={attributes:D.getAttributes(va),
centroid:h.transformCentroid(this,this.featureAdapter.getCentroid(va,this),la)};else for(const va of z)q[ma++]={attributes:D.getAttributes(va),centroid:h.transformCentroid(this,this.featureAdapter.getCentroid(va,this),la),geometry:h.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(va),r,la,ja,oa)}}else for(la of z)(pa=D.getAttributes(la))&&(q[ma++]={attributes:pa});ma=a||0;null!=k&&(q=q.slice(ma,Math.min(q.length,ma+k)));return q};y._createExceedsLimitQueryResponse=
function(q){var z=!1;let D=Number.POSITIVE_INFINITY,Y=Number.POSITIVE_INFINITY;z=Number.POSITIVE_INFINITY;for(const B of q.outStatistics)if("exceedslimit"===B.statisticType){D=null!=B.maxPointCount?B.maxPointCount:Number.POSITIVE_INFINITY;Y=null!=B.maxRecordCount?B.maxRecordCount:Number.POSITIVE_INFINITY;z=null!=B.maxVertexCount?B.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)z=this.items.length>D;else if(this.items.length>Y)z=!0;else{q=this.hasZ?this.hasM?
4:3:this.hasM?3:2;const B=this.featureAdapter;z=this.items.reduce((F,P)=>{P=B.getGeometry(P);return F+(ba.isSome(P)&&P.coords.length||0)},0)/q>z}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(z)}}]}};y._createStatisticsQueryResponse=function(){var q=aa._asyncToGenerator(function*(z){var D={attributes:{}};const Y=[],B=new Map,F=new Map,P=new Map,W=new Map,G=new w(z,
this.featureAdapter,this.fieldsIndex);var r=z.outStatistics;const {groupByFieldsForStatistics:a,having:k,orderByFields:O}=z;z=a&&a.length;const X=!!z,ja=X&&a[0],oa=X&&!this.fieldsIndex.get(ja);for(const Ba of r){const {outStatisticFieldName:Ka,statisticType:Ta}=Ba;r=Ba;var ma="exceedslimit"!==Ta?Ba.onStatisticField:void 0;const Oa="percentile_disc"===Ta||"percentile_cont"===Ta,Sa="EnvelopeAggregate"===Ta||"CentroidAggregate"===Ta||"ConvexHullAggregate"===Ta,c=X&&1===z&&(ma===ja||oa)&&"count"===Ta;
if(X){if(!P.has(ma)){var la=[];for(const p of a){var pa=this._getAttributeValues(G,p,B);la.push(pa)}P.set(ma,this._calculateUniqueValues(la,G.returnDistinctValues))}la=P.get(ma);for(const p in la){const {count:fa,data:m,items:J,itemPositions:T}=la[p];pa=m.join(",");if(!k||G.validateItems(J,k)){const U=W.get(pa)||{attributes:{}};if(Sa){U.aggregateGeometries||(U.aggregateGeometries={});const {aggregateGeometries:ha,outStatisticFieldName:ea}=yield this._getAggregateGeometry(r,J);U.aggregateGeometries[ea]=
ha}else{var va=null;if(c)va=fa;else{const ha=this._getAttributeValues(G,ma,B);va=T.map(ea=>ha[ea]);va=Oa&&"statisticParameters"in r?this._getPercentileValue(r,va):this._getStatisticValue(r,va,null,G.returnDistinctValues)}U.attributes[Ka]=va}a.forEach((ha,ea)=>U.attributes[this.fieldsIndex.get(ha)?ha:`EXPR_${ea+1}`]=m[ea]);W.set(pa,U)}}}else if(Sa){D.aggregateGeometries||(D.aggregateGeometries={});const {aggregateGeometries:p,outStatisticFieldName:fa}=yield this._getAggregateGeometry(r,this.items);
D.aggregateGeometries[fa]=p}else ma=this._getAttributeValues(G,ma,B),D.attributes[Ka]=Oa&&"statisticParameters"in r?this._getPercentileValue(r,ma):this._getStatisticValue(r,ma,F,G.returnDistinctValues);Y.push({name:Ka,alias:Ka,type:"esriFieldTypeDouble"})}D=X?Array.from(W.values()):[D];this._sortFeatures(D,O,(Ba,Ka)=>Ba.attributes[Ka]);return{fields:Y,features:D}});return function(z){return q.apply(this,arguments)}}();y._getAggregateGeometry=function(){var q=aa._asyncToGenerator(function*(z,D){var Y=
yield new Promise((O,X)=>g(["../../../geometry/geometryEngineJSON"],O,X));const {statisticType:B,outStatisticFieldName:F}=z,{featureAdapter:P,spatialReference:W,geometryType:G,hasZ:r,hasM:a}=this;D=D.map(O=>h.getGeometry(G,r,a,P.getGeometry(O)));const k=Y.convexHull(W,D,!0)[0];z={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===B?(Y=k?K.getPolygonExtent(k):K.getGeometryExtent(Y.union(W,D)),z.aggregateGeometries={...Y,spatialReference:W},z.outStatisticFieldName=F||"extent"):
"CentroidAggregate"===B?(Y=k?u.polygonCentroid(k):u.extentCentroid(K.getGeometryExtent(Y.union(W,D))),z.aggregateGeometries={x:Y[0],y:Y[1],spatialReference:W},z.outStatisticFieldName=F||"centroid"):"ConvexHullAggregate"===B&&(z.aggregateGeometries=k,z.outStatisticFieldName=F||"convexHull");return z});return function(z,D){return q.apply(this,arguments)}}();y._getStatisticValue=function(q,z,D,Y){const {onStatisticField:B,statisticType:F}=q;q=null;q=null!=D&&D.has(B)?D.get(B):I.isStringField(this.fieldsIndex.get(B))?
d.calculateStringStatistics({values:z,returnDistinct:Y}):d.calculateStatistics({values:z,minValue:null,maxValue:null,useSampleStdDev:!0});D&&D.set(B,q);return q["var"===F?"variance":F]};y._getPercentileValue=function(q,z){const {onStatisticField:D,statisticParameters:Y,statisticType:B}=q,{value:F,orderBy:P}=Y;q=this.fieldsIndex.get(D);return d.calculatePercentile(z,{value:F,orderBy:P,fieldType:null==q?void 0:q.type,isDiscrete:"percentile_disc"===B})};y._getAttributeValues=function(q,z,D){if(D.has(z))return D.get(z);
const Y=this.fieldsIndex.get(z),B=this.items.map(F=>q.getFieldValue(F,z,Y));D.set(z,B);return B};y._getAttributeNormalizedValues=function(q,z){return this.items.map(D=>q.getNormalizedValue(D,{field:z.field,fieldInfo:this.fieldsIndex.get(z.field),normalizationField:z.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(z.normalizationField),normalizationType:z.normalizationType,normalizationTotal:z.normalizationTotal}))};y._getAttributeExpressionValues=function(){var q=aa._asyncToGenerator(function*(z,
D,Y){const {arcadeUtils:B}=yield l.loadArcade(),F=B.createFunction(D),P=Y&&B.getViewInfo(Y);return this.items.map(W=>z.getExpressionValue(W,{compiledFunc:F,viewInfo:P},B))});return function(z,D,Y){return q.apply(this,arguments)}}();y._calculateUniqueValues=function(q,z){const D={},Y=this.items,B=Y.length;for(let F=0;F<B;F++){const P=Y[F],W=[];for(const r of q)W.push(r[F]);const G=W.join(",");z?null==D[G]&&(D[G]={count:1,data:W,items:[P],itemPositions:[F]}):null==D[G]?D[G]={count:1,data:W,items:[P],
itemPositions:[F]}:(D[G].count++,D[G].items.push(P),D[G].itemPositions.push(F))}return D};y._getDataValues=function(){var q=aa._asyncToGenerator(function*(z,D){const Y=new w(z,this.featureAdapter,this.fieldsIndex),{valueExpression:B,field:F,normalizationField:P,normalizationType:W,normalizationTotal:G,scale:r}=D;z=B?{viewingMode:"map",scale:r,spatialReference:z.outSR||this.spatialReference}:null;return B?this._getAttributeExpressionValues(Y,B,z):this._getAttributeNormalizedValues(Y,{field:F,normalizationField:P,
normalizationType:W,normalizationTotal:G})});return function(z,D){return q.apply(this,arguments)}}();aa._createClass(C,[{key:"size",get:function(){return this.items.length}}]);return C}();e.SnappingTypes=void 0;(function(C){C[C.NONE=0]="NONE";C[C.EDGE=1]="EDGE";C[C.VERTEX=2]="VERTEX"})(e.SnappingTypes||(e.SnappingTypes={}));e.default=v;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(g,
e,aa){function ba({scale:B,translate:F},P){return Math.round((P-F[0])/B[0])}function u({scale:B,translate:F},P){return Math.round((F[1]-P)/B[1])}function K(B,F,P){const W=[];let G,r,a,k;for(let O=0;O<P.length;O++){const X=P[O];if(0<O){if(a=ba(B,X[0]),k=u(B,X[1]),a!==G||k!==r)W.push(F(X,a-G,k-r)),G=a,r=k}else G=ba(B,X[0]),r=u(B,X[1]),W.push(F(X,G,r))}return 0<W.length?W:null}function A(B,F,P,W){return K(B,P?W?Y:D:W?D:z,F)}function n(B,F,P,W){const G=[];P=P?W?Y:D:W?D:z;for(W=0;W<F.length;W++){const r=
K(B,P,F[W]);r&&3<=r.length&&G.push(r)}return G.length?G:null}function t(B,F,P,W){const G=[];P=P?W?Y:D:W?D:z;for(W=0;W<F.length;W++){const r=K(B,P,F[W]);r&&2<=r.length&&G.push(r)}return G.length?G:null}function w({scale:B,translate:F},P){return P*B[0]+F[0]}function H({scale:B,translate:F},P){return F[1]-P*B[1]}function S(B,F,P){const W=Array(P.length);if(!P.length)return W;const [G,r]=B.scale;let a=w(B,P[0][0]);B=H(B,P[0][1]);W[0]=F(P[0],a,B);for(let k=1;k<P.length;k++){const O=P[k];a+=O[0]*G;B-=O[1]*
r;W[k]=F(O,a,B)}return W}function R(B,F,P){const W=Array(P.length);for(let G=0;G<P.length;G++)W[G]=S(B,F,P[G]);return W}function h(B,F,P,W){return S(B,P?W?Y:D:W?D:z,F)}function I(B,F,P,W){return R(B,P?W?Y:D:W?D:z,F)}function d(B,F,P,W){return R(B,P?W?Y:D:W?D:z,F)}function l(B,F,P){let [W,G]=P[0],r=Math.min(W,F[0]),a=Math.min(G,F[1]),k=Math.max(W,F[2]);F=Math.max(G,F[3]);for(let O=1;O<P.length;O++){const [X,ja]=P[O];W+=X;G+=ja;0>X&&(r=Math.min(r,W));0<X&&(k=Math.max(k,W));0>ja?a=Math.min(a,G):0<ja&&
(F=Math.max(F,G))}B[0]=r;B[1]=a;B[2]=k;B[3]=F;return B}function N(B,F){if(!F.length)return null;B[0]=B[1]=Number.POSITIVE_INFINITY;B[2]=B[3]=Number.NEGATIVE_INFINITY;for(let P=0;P<F.length;P++)l(B,B,F[P]);return B}function M(B,F,P,W,G){F.xmin=ba(B,P.xmin);F.ymin=u(B,P.ymin);F.xmax=ba(B,P.xmax);F.ymax=u(B,P.ymax);F!==P&&(W&&(F.zmin=P.zmin,F.zmax=P.zmax),G&&(F.mmin=P.mmin,F.mmax=P.mmax));return F}function v(B,F,P,W,G){F.points=A(B,P.points,W,G);return F}function C(B,F,P,W,G){F.x=ba(B,P.x);F.y=u(B,P.y);
F!==P&&(W&&(F.z=P.z),G&&(F.m=P.m));return F}function y(B,F,P,W,G){B=n(B,P.rings,W,G);if(!B)return null;F.rings=B;return F}function q(B,F,P,W,G){B=t(B,P.paths,W,G);if(!B)return null;F.paths=B;return F}const z=(B,F,P)=>[F,P],D=(B,F,P)=>[F,P,B[2]],Y=(B,F,P)=>[F,P,B[2],B[3]];g.equals=function(B,F){if(B===F||null==B&&null==F)return!0;if(null==B||null==F)return!1;let P,W,G,r;B&&"upperLeft"===B.originPosition?(P=B.translate[0],W=B.translate[1],B=B.scale[0]):(P=e.isSome(B.extent)?B.extent.xmin:0,W=e.isSome(B.extent)?
B.extent.ymax:0,B=B.tolerance);F&&"upperLeft"===F.originPosition?(G=F.translate[0],r=F.translate[1],F=F.scale[0]):(G=e.isSome(F.extent)?F.extent.xmin:0,r=e.isSome(F.extent)?F.extent.ymax:0,F=F.tolerance);return P===G&&W===r&&B===F};g.getQuantizedBoundsCoordsArray=l;g.getQuantizedBoundsCoordsArrayArray=N;g.getQuantizedBoundsPaths=function(B){return N([0,0,0,0],B)};g.getQuantizedBoundsPoints=function(B){const F=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];
return l(F,F,B)};g.getQuantizedBoundsRings=function(B){return N([0,0,0,0],B)};g.quantizeBounds=function(B,F,P){F[0]=ba(B,P[0]);F[3]=u(B,P[1]);F[2]=ba(B,P[2]);F[1]=u(B,P[3]);return F};g.quantizeExtent=M;g.quantizeGeometry=function(B,F){return B&&F?aa.isPoint(F)?C(B,{},F,!1,!1):aa.isPolyline(F)?q(B,{},F,!1,!1):aa.isPolygon(F)?y(B,{},F,!1,!1):aa.isMultipoint(F)?v(B,{},F,!1,!1):aa.isExtent(F)?M(B,{},F,!1,!1):null:null};g.quantizeMultipoint=v;g.quantizePaths=t;g.quantizePoint=C;g.quantizePoints=A;g.quantizePolygon=
y;g.quantizePolyline=q;g.quantizeRings=n;g.quantizeX=ba;g.quantizeY=u;g.toQuantizationTransform=function(B){return B?{originPosition:"upper-left"===B.originPosition?"upperLeft":"lower-left"===B.originPosition?"lowerLeft":B.originPosition,scale:B.tolerance?[B.tolerance,B.tolerance]:[1,1],translate:e.isSome(B.extent)?[B.extent.xmin,B.extent.ymax]:[0,0]}:null};g.unquantizeBounds=function(B,F,P){return P?(F[0]=w(B,P[0]),F[1]=H(B,P[3]),F[2]=w(B,P[2]),F[3]=H(B,P[1]),F):[w(B,F[0]),H(B,F[3]),w(B,F[2]),H(B,
F[1])]};g.unquantizeCoordsArray=S;g.unquantizeCoordsArrayArray=R;g.unquantizeExtent=function(B,F,P,W,G){F.xmin=w(B,P.xmin);F.ymin=H(B,P.ymin);F.xmax=w(B,P.xmax);F.ymax=H(B,P.ymax);F!==P&&(W&&(F.zmin=P.zmin,F.zmax=P.zmax),G&&(F.mmin=P.mmin,F.mmax=P.mmax));return F};g.unquantizeMultipoint=function(B,F,P,W,G){e.isSome(P)&&(F.points=h(B,P.points,W,G));return F};g.unquantizePaths=I;g.unquantizePoint=function(B,F,P,W,G){if(e.isNone(P))return F;F.x=w(B,P.x);F.y=H(B,P.y);F!==P&&(W&&(F.z=P.z),G&&(F.m=P.m));
return F};g.unquantizePoints=h;g.unquantizePolygon=function(B,F,P,W,G){e.isSome(P)&&(F.rings=d(B,P.rings,W,G));return F};g.unquantizePolyline=function(B,F,P,W,G){e.isSome(P)&&(F.paths=I(B,P.paths,W,G));return F};g.unquantizeRings=d;g.unquantizeX=w;g.unquantizeY=H;Object.defineProperty(g,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport","../../../statistics/utils"],function(g,e,aa){return function(){function ba(K,
A,n){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=K.returnDistinctValues;this.fieldsIndex=n;this.featureAdapter=A;if((A=K.outFields)&&-1===A.indexOf("*")){this.outFields=A;K=0;for(const w of A){var t=e.getExpressionFromFieldName(w);t=(A=this.fieldsIndex.get(t))?null:e.getWhereClause(t,n);A=A?A.name:e.getAliasFromFieldName(w)||`FIELD_EXP_${K++}`;this._fieldDataCache.set(w,{alias:A,clause:t})}}}var u=ba.prototype;u.countDistinctValues=function(K){if(!this.returnDistinctValues)return K.length;
K.forEach(A=>this.getAttributes(A));return this._returnDistinctMap.size};u.getAttributes=function(K){K=this._processAttributesForOutFields(K);return this._processAttributesForDistinctValues(K)};u.getFieldValue=function(K,A,n){const t=n?n.name:A;let w=null;this._fieldDataCache.has(t)?w=this._fieldDataCache.get(t).clause:n||(w=e.getWhereClause(A,this.fieldsIndex),this._fieldDataCache.set(t,{alias:t,clause:w}));return n?this.featureAdapter.getAttribute(K,t):w.calculateValue(K,this.featureAdapter)};u.getNormalizedValue=
function(K,A){const n=A.normalizationType,t=A.normalizationTotal;let w=this.getFieldValue(K,A.field,A.fieldInfo);n&&Number.isFinite(w)&&(K=this.getFieldValue(K,A.normalizationField,A.normalizationFieldInfo),w=aa.getNormalizedValue(w,n,K,t));return w};u.getExpressionValue=function(K,A,n){K={attributes:this.featureAdapter.getAttributes(K)};K=n.createExecContext(K,A.viewInfo);return n.executeFunction(A.compiledFunc,K)};u.validateItem=function(K,A){this._fieldDataCache.has(A)||this._fieldDataCache.set(A,
{alias:A,clause:e.getWhereClause(A,this.fieldsIndex)});return this._fieldDataCache.get(A).clause.testFeature(K,this.featureAdapter)};u.validateItems=function(K,A){this._fieldDataCache.has(A)||this._fieldDataCache.set(A,{alias:A,clause:e.getWhereClause(A,this.fieldsIndex)});return this._fieldDataCache.get(A).clause.testSet(K,this.featureAdapter)};u._processAttributesForOutFields=function(K){const A=this.outFields;if(!A||!A.length)return this.featureAdapter.getAttributes(K);const n={};for(const t of A){const {alias:w,
clause:H}=this._fieldDataCache.get(t);n[w]=H?H.calculateValue(K,this.featureAdapter):this.featureAdapter.getAttribute(K,w)}return n};u._processAttributesForDistinctValues=function(K){if(g.isNone(K)||!this.returnDistinctValues)return K;var A=this.outFields,n=[];if(A)for(const w of A){var {alias:t}=this._fieldDataCache.get(w);n.push(K[t])}else for(t in K)n.push(K[t]);A=`${(A||["*"]).join(",")}=${n.join(",")}`;n=this._returnDistinctMap.get(A)||0;this._returnDistinctMap.set(A,++n);return 1<n?null:K};
return ba}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(g,e,aa){function ba(v){const C=null!=v.minValue||null!=v.maxValue,y=!!v.sqlExpression&&v.supportsSQLExpression;return!(null!=v.normalizationField||null!=v.normalizationType)&&!C&&!y}function u(v){const {values:C,useSampleStdDev:y,supportsNullCount:q}=v;var z=Number.POSITIVE_INFINITY;let D=Number.NEGATIVE_INFINITY,Y=null,B=null;var F=null;let P=
null,W=0;const G=null==v.minValue?-Infinity:v.minValue,r=null==v.maxValue?Infinity:v.maxValue;for(const a of C)Number.isFinite(a)?a>=G&&a<=r&&(Y+=a,z=Math.min(z,a),D=Math.max(D,a),W++):"string"===typeof a&&W++;if(W&&null!=Y){B=Y/W;F=0;for(const a of C)Number.isFinite(a)&&a>=G&&a<=r&&(F+=(a-B)**2);P=y?1<W?F/(W-1):0:0<W?F/W:0;F=Math.sqrt(P)}else D=z=null;z={avg:B,count:W,max:D,min:z,stddev:F,sum:Y,variance:P};q&&(z.nullcount=C.length-W);v.percentileParams&&(z.median=K(C,v.percentileParams));return z}
function K(v,C){const {fieldType:y,value:q,orderBy:z,isDiscrete:D}=C,Y=A(y,"desc"===z);v=[...v].filter(W=>null!=W).sort((W,G)=>Y(W,G));if(0===v.length)return null;if(0>=q)return v[0];if(1<=q)return v[v.length-1];var B=(v.length-1)*q,F=Math.floor(B);C=F+1;B%=1;F=v[F];const P=v[C];return C>=v.length||D||"string"===typeof F||"string"===typeof P?F:F*(1-B)+P*B}function A(v,C){const y=C?1:-1,q=t(C),z=n(C);if(!v||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...N].includes(v))return(D,
Y)=>"number"===typeof D&&"number"===typeof Y?q(D,Y):"string"===typeof D&&"string"===typeof Y?z(D,Y):y;if("esriFieldTypeDate"===v)return(D,Y)=>{D=(new Date(D)).getTime();Y=(new Date(Y)).getTime();return isNaN(D)||isNaN(Y)?y:q(D,Y)};if(N.has(v))return(D,Y)=>q(D,Y);if("esriFieldTypeString"===v)return(D,Y)=>z(D,Y);if("esriFieldTypeGUID"===v||"esriFieldTypeGlobalID"===v){const D=n(C);return(Y,B)=>D(w(Y),w(B))}return C?(D,Y)=>1:(D,Y)=>-1}function n(v){return v?(C,y)=>{var q,z;C=null==(q=C)?void 0:q.toUpperCase();
y=null==(z=y)?void 0:z.toUpperCase();return C>y?-1:C<y?1:0}:(C,y)=>{var q,z;C=null==(q=C)?void 0:q.toUpperCase();y=null==(z=y)?void 0:z.toUpperCase();return C<y?-1:C>y?1:0}}function t(v){return v?(C,y)=>y-C:(C,y)=>C-y}function w(v){return v.substr(24,12)+v.substr(19,4)+v.substr(16,2)+v.substr(14,2)+v.substr(11,2)+v.substr(9,2)+v.substr(6,2)+v.substr(4,2)+v.substr(2,2)+v.substr(0,2)}function H(v,C){const y=R({field:C.field,normalizationType:C.normalizationType,normalizationField:C.normalizationField,
classificationMethod:C.classificationMethod,standardDeviationInterval:C.standardDeviationInterval,breakCount:C.numClasses||5});v=S(v,C.minValue,C.maxValue);return aa.createGenerateRendererClassBreaks({definition:y,values:v,normalizationTotal:C.normalizationTotal})}function S(v,C,y){C=null==C?-Infinity:C;y=null==y?Infinity:y;return v.filter(q=>Number.isFinite(q)&&q>=C&&q<=y)}function R(v){const C=v.field,y=v.classificationMethod||"equal-interval",q=v.normalizationType,z=v.normalizationField,D=new e;
D.classificationField=C;D.breakCount=v.breakCount;D.classificationMethod=y;D.standardDeviationInterval="standard-deviation"===y?v.standardDeviationInterval||1:void 0;D.normalizationType=q;D.normalizationField="field"===q?z:void 0;return D}function h(v,C){const {field:y,classificationMethod:q,standardDeviationInterval:z,normalizationType:D,normalizationField:Y,normalizationTotal:B,minValue:F,maxValue:P}=C,W=C.numBins||10;let G=C=null,r=null;q&&"equal-interval"!==q||D?({classBreaks:v}=H(v,{field:y,
normalizationType:D,normalizationField:Y,normalizationTotal:B,classificationMethod:q,standardDeviationInterval:z,minValue:F,maxValue:P,numClasses:W}),C=v[0].minValue,G=v[v.length-1].maxValue,r=v.map(a=>[a.minValue,a.maxValue])):(null!=F&&null!=P?(C=F,G=P):(v=u({values:v,minValue:F,maxValue:P,useSampleStdDev:!D,supportsNullCount:ba({normalizationType:D,normalizationField:Y,minValue:F,maxValue:P})}),C=v.min,G=v.max),r=d(C,G,W));return{min:C,max:G,intervals:r}}function I(v,C){let y=-1;for(let q=v.length-
1;0<=q;q--)if(C>=v[q][0]){y=q;break}return y}function d(v,C,y){const q=(C-v)/y,z=[];let D;for(let Y=1;Y<=y;Y++)D=v+q,D=Number(D.toFixed(16)),z.push([v,Y===y?C:D]),v=D;return z}const l=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,N=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),M="min max avg stddev count sum variance nullcount median".split(" ");g.calculateClassBreaks=H;g.calculateHistogram=function(v,C){const {min:y,max:q,intervals:z}=h(v,C),
D=z.map((Y,B)=>({minValue:z[B][0],maxValue:z[B][1],count:0}));for(const Y of v)null!=Y&&Y>=y&&Y<=q&&(v=I(z,Y),-1<v&&D[v].count++);return{bins:D,minValue:y,maxValue:q,normalizationTotal:C.normalizationTotal}};g.calculatePercentile=K;g.calculateStatistics=u;g.calculateStringStatistics=function(v){const C=v.returnDistinct?[...new Set(v.values)]:v.values,y=C.filter(z=>null!=z).length,q={count:y};v.supportsNullCount&&(q.nullcount=C.length-y);v.percentileParams&&(q.median=K(C,v.percentileParams));return q};
g.calculateUniqueValuesCount=function(v){const C={};for(let y of v){if(null==y||"string"===typeof y&&""===y.trim())y=null;null==C[y]?C[y]={count:1,data:y}:C[y].count++}return{count:C}};g.createClassBreaksDefinition=R;g.createUVResult=function(v,C,y){const q=v.count;v=[];y&&C&&"coded-value"===C.type&&C.codedValues.forEach(z=>{z=z.code;q.hasOwnProperty(z)||(q[z]={data:z,count:0})});for(const z in q)C=q[z],v.push({value:C.data,count:C.count,label:C.label});return{uniqueValueInfos:v}};g.getAttributeComparator=
A;g.getEqualIntervalBins=d;g.getNormalizedValue=function(v,C,y,q){let z=null;switch(C){case "log":0!==v&&(z=Math.log(v)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(q)&&0!==q&&(z=v/q*100);break;case "field":Number.isFinite(y)&&0!==y&&(z=v/y);break;case "natural-log":0<v&&(z=Math.log(v));break;case "square-root":0<v&&(z=v**.5)}return z};g.isNullCountSupported=ba;g.processSummaryStatisticsResult=function(v,C){let y;for(y in v)-1<M.indexOf(y)&&(Number.isFinite(v[y])||(v[y]=null));if(!C)return v;
["avg","stddev","variance"].forEach(q=>{null!=v[q]&&(v[q]=Math.ceil(v[q]))});return v};g.resolveCBResult=function(v,C){let y=v.classBreaks;const q=y[0].minValue,z=y[y.length-1].maxValue,D="standard-deviation"===C;y=y.map(Y=>{const B=Y.label;Y={minValue:Y.minValue,maxValue:Y.maxValue,label:B};if(D&&B){const F=B.match(l).map(P=>+P.trim());2===F.length?(Y.minStdDev=F[0],Y.maxStdDev=F[1],0>F[0]&&0<F[1]&&(Y.hasAvg=!0)):1===F.length&&(B.includes("\x3c")?(Y.minStdDev=null,Y.maxStdDev=F[0]):B.includes("\x3e")&&
(Y.minStdDev=F[0],Y.maxStdDev=null))}return Y});return{minValue:q,maxValue:z,classBreakInfos:y,normalizationTotal:v.normalizationTotal}};g.statisticTypes=M;Object.defineProperty(g,"__esModule",{value:!0})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(g,e,aa,ba,u,K,A,n,t){u=new aa.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});aa=new aa.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});t=function(w){function H(){var S=w.apply(this,arguments)||this;S.breakCount=null;S.classificationField=
null;S.classificationMethod=null;S.normalizationField=null;S.normalizationType=null;S.type="class-breaks-definition";return S}g._inheritsLoose(H,w);g._createClass(H,[{key:"standardDeviationInterval",set:function(S){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",S)}},{key:"definedInterval",set:function(S){"defined-interval"===this.classificationMethod&&this._set("definedInterval",S)}}]);return H}(t);e.__decorate([ba.property({json:{write:!0}})],t.prototype,
"breakCount",void 0);e.__decorate([ba.property({json:{write:!0}})],t.prototype,"classificationField",void 0);e.__decorate([ba.property({type:String,json:{read:u.read,write:u.write}})],t.prototype,"classificationMethod",void 0);e.__decorate([ba.property({json:{write:!0}})],t.prototype,"normalizationField",void 0);e.__decorate([ba.property({json:{read:aa.read,write:aa.write}})],t.prototype,"normalizationType",void 0);e.__decorate([ba.property({value:null,json:{write:!0}})],t.prototype,"standardDeviationInterval",
null);e.__decorate([ba.property({value:null,json:{write:!0}})],t.prototype,"definedInterval",null);e.__decorate([ba.property()],t.prototype,"type",void 0);return t=e.__decorate([n.subclass("esri.rest.support.ClassBreaksDefinition")],t)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(g,e,aa,ba,u,K,A,n,t,w,H){aa=new aa.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});ba=function(S){function R(){var h=S.apply(this,arguments)||this;h.baseSymbol=null;h.colorRamp=null;h.type=null;return h}g._inheritsLoose(R,S);return R}(ba.JSONSupport);e.__decorate([u.property({type:H,json:{write:!0}})],ba.prototype,"baseSymbol",void 0);e.__decorate([u.property({types:w.types,json:{read:{reader:w.fromJSON},write:!0}})],ba.prototype,"colorRamp",void 0);
e.__decorate([u.property({json:{read:aa.read,write:aa.write}})],ba.prototype,"type",void 0);return ba=e.__decorate([t.subclass("esri.rest.support.ClassificationDefinition")],ba)})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(g,e,aa,ba){aa={key:"type",base:aa,typeMap:{algorithmic:e,multipart:ba}};g.fromJSON=function(u){return u&&u.type?"algorithmic"===u.type?e.fromJSON(u):"multipart"===u.type?ba.fromJSON(u):null:
null};g.types=aa;Object.defineProperty(g,"__esModule",{value:!0})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(g,e,aa,ba,u,K,A,n,t){var w;t=w=function(H){function S(R){R=H.call(this,
R)||this;R.algorithm=null;R.fromColor=null;R.toColor=null;R.type="algorithmic";return R}g._inheritsLoose(S,H);S.prototype.clone=function(){return new w({fromColor:ba.clone(this.fromColor),toColor:ba.clone(this.toColor),algorithm:this.algorithm})};return S}(t);e.__decorate([A.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],t.prototype,"algorithm",void 0);e.__decorate([u.property({type:aa,json:{type:[K.Integer],write:!0}})],t.prototype,"fromColor",
void 0);e.__decorate([u.property({type:aa,json:{type:[K.Integer],write:!0}})],t.prototype,"toColor",void 0);e.__decorate([u.property({type:["algorithmic"]})],t.prototype,"type",void 0);return t=w=e.__decorate([n.subclass("esri.rest.support.AlgorithmicColorRamp")],t)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(g,e,aa){g.enumeration=function(ba,u={}){var K;ba=ba instanceof e.JSONMap?ba:new e.JSONMap(ba,u);ba={type:(null!=
(K=null==u?void 0:u.ignoreUnknown)?K:1)?ba.apiValues:String,json:{type:ba.jsonValues,read:null!=u&&u.readOnly?!1:{reader:ba.read},write:{writer:ba.write}}};void 0!==(null==u?void 0:u.readOnly)&&(ba.readOnly=!!u.readOnly);void 0!==(null==u?void 0:u.default)&&(ba.json.default=u.default);void 0!==(null==u?void 0:u.name)&&(ba.json.name=u.name);return aa.property(ba)};Object.defineProperty(g,"__esModule",{value:!0})})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(g,e,aa,ba,u,K,A,n){aa=function(t){function w(H){H=t.call(this,H)||this;H.type=null;return H}g._inheritsLoose(w,t);return w}(aa.JSONSupport);e.__decorate([ba.property({readOnly:!0,json:{read:!1,write:!0}})],aa.prototype,"type",void 0);return aa=e.__decorate([n.subclass("esri.rest.support.ColorRamp")],aa)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(g,e,aa,ba,u,K,A,n){var t;u=t=function(w){function H(S){S=w.call(this,S)||this;S.colorRamps=null;S.type="multipart";return S}g._inheritsLoose(H,w);H.prototype.clone=function(){return new t({colorRamps:aa.clone(this.colorRamps)})};return H}(n);e.__decorate([ba.property({type:[A],json:{write:!0}})],u.prototype,"colorRamps",void 0);e.__decorate([ba.property({type:["multipart"]})],u.prototype,"type",void 0);return u=t=e.__decorate([K.subclass("esri.rest.support.MultipartColorRamp")],u)})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass".split(" "),
function(g,e,aa,ba,u,K,A,n,t,w,H){ba=new ba.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let S=0;u=function(R){function h(d){d=R.call(this,d)||this;d.id=`sym${S++}`;d.type=null;d.color=new aa([0,0,0,
1]);return d}g._inheritsLoose(h,R);var I=h.prototype;I.readColor=function(d){return d&&null!=d[0]?[d[0],d[1],d[2],d[3]/255]:d};I.collectRequiredFields=function(){var d=g._asyncToGenerator(function*(l,N){});return function(l,N){return d.apply(this,arguments)}}();I.hash=function(){return JSON.stringify(this.toJSON())};I.clone=function(){};return h}(u.JSONSupport);e.__decorate([K.property({type:ba.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:ba.write}}})],u.prototype,"type",void 0);
e.__decorate([K.property({type:aa,json:{write:{allowNull:!0}}})],u.prototype,"color",void 0);e.__decorate([w.reader("color")],u.prototype,"readColor",null);return u=e.__decorate([H.subclass("esri.symbols.Symbol")],u)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(g){function e(H){const {classificationMethod:S,breakCount:R,normalizationType:h,definedInterval:I}=H.definition,d=[];var l=H.values;if(0===l.length)return[];l=l.sort((q,z)=>q-z);var N=l[0],M=l[l.length-
1];if("equal-interval"===S)if(l.length>=R){l=(M-N)/R;H=N;for(var v=1;v<R;v++){var C=Number((N+v*l).toFixed(6));d.push({minValue:H,maxValue:C,label:aa(H,C,h)});H=C}d.push({minValue:H,maxValue:M,label:aa(H,M,h)})}else l.forEach(q=>{d.push({minValue:q,maxValue:q,label:aa(q,q,h)})});else if("natural-breaks"===S){l=ba(l);H=u(l.uniqueValues,H.valueFrequency||l.valueFrequency,R);for(v=1;v<R;v++)l.uniqueValues.length>v&&(C=Number(l.uniqueValues[H[v]].toFixed(6)),d.push({minValue:N,maxValue:C,label:aa(N,C,
h)}),N=C);d.push({minValue:N,maxValue:M,label:aa(N,M,h)})}else if("quantile"===S)if(l.length>=R&&N!==M){H=Math.ceil(l.length/R);v=0;for(C=1;C<R;C++){var y=H+v-1;y>l.length&&(y=l.length-1);0>y&&(y=0);d.push({minValue:N,maxValue:l[y],label:aa(N,l[y],h)});N=l[y];v+=H;H=Math.ceil((l.length-v)/(R-C))}d.push({minValue:N,maxValue:M,label:aa(N,M,h)})}else for(M=-1,N=0;N<l.length;N++)H=l[N],H!==M&&(M=H,d.push({minValue:M,maxValue:H,label:aa(M,H,h)}),M=H);else if("standard-deviation"===S)if(H=n(l),v=t(l,H),
0===v)d.push({minValue:l[0],maxValue:l[0],label:aa(l[0],l[0],h)});else{l=A(N,M,R,H,v)*v;v=0;for(C=R;1<=C;C--)y=Number((H-(C-.5)*l).toFixed(6)),d.push({minValue:N,maxValue:y,label:aa(N,y,h)}),N=y,v++;C=Number((H+.5*l).toFixed(6));d.push({minValue:N,maxValue:C,label:aa(N,C,h)});N=C;v++;for(y=1;y<=R;y++)C=v===2*R?M:Number((H+(y+.5)*l).toFixed(6)),d.push({minValue:N,maxValue:C,label:aa(N,C,h)}),N=C,v++}else if("defined-interval"===S){if(!I)return d;M=l[0];l=l[l.length-1];N=Math.ceil((l-M)/I);H=M;for(v=
1;v<N;v++)C=Number((M+v*I).toFixed(6)),d.push({minValue:H,maxValue:C,label:aa(H,C,h)}),H=C;d.push({minValue:H,maxValue:l,label:aa(H,l,h)})}return d}function aa(H,S,R){let h=null;return h=H===S?R&&"percent-of-total"===R?H+"%":H.toString():R&&"percent-of-total"===R?H+"% - "+S+"%":H+" - "+S}function ba(H){const S=[],R=[];let h=Number.MIN_VALUE,I=1,d=-1;for(let l=0;l<H.length;l++){const N=H[l];N===h?(I++,R[d]=I):null!==N&&(S.push(N),h=N,I=1,R.push(I),d++)}return{uniqueValues:S,valueFrequency:R}}function u(H,
S,R){var h=H.length;const I=[];R>h&&(R=h);for(var d=0;d<R;d++)I.push(Math.round(d*h/R-1));I.push(h-1);d=K(I,H,S,R);{h=d.mean;d=d.sdcm;var l=R,N=0,M=0;let C=0,y=0,q=!0;for(let z=0;2>z&&q;z++){0===z&&(q=!1);for(var v=0;v<l-1;v++)for(;I[v+1]+1!==I[v+2];)if(I[v+1]+=1,N=w(v,I,H,S),C=N.sbMean,N=N.sbSdcm,M=w(v+1,I,H,S),y=M.sbMean,M=M.sbSdcm,N+M<d[v]+d[v+1])d[v]=N,d[v+1]=M,h[v]=C,h[v+1]=y,q=!0;else{--I[v+1];break}for(v=l-1;0<v;v--)for(;I[v]!==I[v-1]+1;)if(--I[v],N=w(v-1,I,H,S),C=N.sbMean,N=N.sbSdcm,M=w(v,
I,H,S),y=M.sbMean,M=M.sbSdcm,N+M<d[v-1]+d[v])d[v-1]=N,d[v]=M,h[v-1]=C,h[v]=y,q=!0;else{I[v]+=1;break}}h=q}h&&(d=K(I,H,S,R));return I}function K(H,S,R,h){let I=[];var d=[],l=[];let N=0;const M=[],v=[];for(var C=0;C<h;C++){var y=w(C,H,S,R);M.push(y.sbMean);v.push(y.sbSdcm);N+=v[C]}y=N;for(C=!0;C||N<y;){C=!1;I=[];for(d=0;d<h;d++)I.push(H[d]);for(l=0;l<h;l++)for(y=H[l]+1;y<=H[l+1];y++)if(d=S[y],0<l&&y!==H[l+1]&&Math.abs(d-M[l])>Math.abs(d-M[l-1]))H[l]=y;else if(l<h-1&&H[l]!==y-1&&Math.abs(d-M[l])>Math.abs(d-
M[l+1])){H[l+1]=y-1;break}y=N;N=0;d=[];l=[];for(let q=0;q<h;q++){d.push(M[q]);l.push(v[q]);const z=w(q,H,S,R);M[q]=z.sbMean;v[q]=z.sbSdcm;N+=v[q]}}if(N>y){for(S=0;S<h;S++)H[S]=I[S],M[S]=d[S],v[S]=l[S];N=y}return{mean:M,sdcm:v}}function A(H,S,R,h,I){H=Math.max(h-H,S-h)/I/R;return 1<=H?1:.5<=H?.5:.25}function n(H){let S=0;for(let R=0;R<H.length;R++)S+=H[R];return S/=H.length}function t(H,S){let R=0;for(let h=0;h<H.length;h++){const I=H[h];R+=(I-S)*(I-S)}R/=H.length;return Math.sqrt(R)}function w(H,
S,R,h){var I=0,d=0;for(var l=S[H]+1;l<=S[H+1];l++){const N=h[l];I+=R[l]*N;d+=N}0>=d&&console.log("Exception in Natural Breaks calculation");I/=d;d=0;for(l=S[H]+1;l<=S[H+1];l++)d+=h[l]*(R[l]-I)**2;return{sbMean:I,sbSdcm:d}}g.createGenerateRendererClassBreaks=function(H){const {normalizationTotal:S}=H;return{classBreaks:e(H),normalizationTotal:S}};g.createGenerateRendererUniqueValues=function(H){H=ba(H);const S=[],R=H.uniqueValues.length;for(let h=0;h<R;h++){const I=H.uniqueValues[h];S.push({value:I,
count:H.valueFrequency[h],label:I.toString()})}return{uniqueValues:S}};Object.defineProperty(g,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(g){function e(u,K,A,n,t){if(null!=n&&null!=t)return w=>{const H=u.getAttribute(w,K);w=u.getAttribute(w,A);return(null==H||H<=t)&&(null==w||w>=n)};if(null!=n)return w=>{w=u.getAttribute(w,A);return null==w||w>=n};if(null!=t)return w=>{w=u.getAttribute(w,K);return null==w||w<=t}}function aa(u,K,A,n){if(null!=
A&&null!=n&&A===n)return t=>u.getAttribute(t,K)===A;if(null!=A&&null!=n)return t=>{t=u.getAttribute(t,K);return t>=A&&t<=n};if(null!=A)return t=>u.getAttribute(t,K)>=A;if(null!=n)return t=>u.getAttribute(t,K)<=n}function ba(){return()=>!1}g.getTimeExtent=function(u,K){if(!u)return null;const A=K.featureAdapter,{startTimeField:n,endTimeField:t}=u;let w=Number.POSITIVE_INFINITY,H=Number.NEGATIVE_INFINITY;if(n&&t)K.forEach(S=>{const R=A.getAttribute(S,n);S=A.getAttribute(S,t);null==R||isNaN(R)||(w=Math.min(w,
R));null==S||isNaN(S)||(H=Math.max(H,S))});else{const S=n||t;K.forEach(R=>{R=A.getAttribute(R,S);null==R||isNaN(R)||(w=Math.min(w,R),H=Math.max(H,R))})}return{start:w,end:H}};g.getTimeOperator=function(u,K,A){if(!K||!u)return null;const {startTimeField:n,endTimeField:t}=u;if(!n&&!t)return null;const {start:w,end:H}=K;return null===w&&null===H?null:void 0===w&&void 0===H?ba():n&&t?e(A,n,t,w,H):aa(A,n||t,w,H)};Object.defineProperty(g,"__esModule",{value:!0})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(g,e,aa,ba,u,K,A,n,t,w,H,S,R,h){function I(G,r,a,k=G.hasZ,O=G.hasM){if(u.isNone(r))return null;const X=G.hasZ&&k,ja=G.hasM&&O;return a?(G=S.quantizeOptimizedGeometry(F,r,G.hasZ,G.hasM,"esriGeometryPoint",a,k,O),S.convertToPoint(G,X,ja)):S.convertToPoint(r,X,ja)}function d(){d=aa._asyncToGenerator(function*(G,r,a){const {outFields:k,orderByFields:O,groupByFieldsForStatistics:X,outStatistics:ja}=G;if(k)for(var oa=0;oa<k.length;oa++)k[oa]=k[oa].trim();if(O)for(oa=0;oa<O.length;oa++)O[oa]=O[oa].trim();
if(X)for(oa=0;oa<X.length;oa++)X[oa]=X[oa].trim();if(ja)for(oa=0;oa<ja.length;oa++)ja[oa].onStatisticField&&(ja[oa].onStatisticField=ja[oa].onStatisticField.trim());G.geometry&&!G.outSR&&(G.outSR=G.geometry.spatialReference);return N(G,r,a)});return d.apply(this,arguments)}function l(){l=aa._asyncToGenerator(function*(G,r,a){return N(G,r,a)});return l.apply(this,arguments)}function N(G,r,a){return M.apply(this,arguments)}function M(){M=aa._asyncToGenerator(function*(G,r,a){if(!G)return null;var {where:k}=
G;G.where=k=k&&k.trim();if(!k||/^1 *= *1$/.test(k)||r&&r===k)G.where=null;if(!G.geometry)return G;r=yield v(G);G.distance=0;G.units=null;"esriSpatialRelEnvelopeIntersects"===G.spatialRel&&({spatialReference:k}=G.geometry,r=A.getGeometryExtent(r),r.spatialReference=k);G.geometry=r;yield h.checkProjectionSupport(r.spatialReference,a);r=(yield t.normalizeCentralMeridian(n.fromJSON(r)))[0];if(u.isNone(r))throw D;r=r.toJSON();r=yield h.project(r,r.spatialReference,a);if(!r)throw D;r.spatialReference=a;
G.geometry=r;return G});return M.apply(this,arguments)}function v(G){return C.apply(this,arguments)}function C(){C=aa._asyncToGenerator(function*(G){const {geometry:r,distance:a,units:k}=G;if(null==a||"vertexAttributes"in r)return r;var O=r.spatialReference;G=k?z.fromJSON(k):K.getUnitString(O);O=O&&(w.isGeographic(O)||w.isWebMercator(O))?r:yield h.checkProjectionSupport(O,w.WGS84).then(()=>h.project(r,w.WGS84));return(yield y())(O.spatialReference,O,a,G)});return C.apply(this,arguments)}function y(){return q.apply(this,
arguments)}function q(){q=aa._asyncToGenerator(function*(){return(yield new Promise((G,r)=>g(["../../../geometry/geometryEngineJSON"],G,r))).geodesicBuffer});return q.apply(this,arguments)}const z=new ba.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),D=Object.freeze({}),Y=new R,B=new R,F=new R,P={esriGeometryPoint:S.convertToPoint,esriGeometryPolyline:S.convertToPolyline,
esriGeometryPolygon:S.convertToPolygon,esriGeometryMultipoint:S.convertToMultipoint},W=(G,r)=>"_geVersion"!==G?r:void 0;e.QUERY_ENGINE_EMPTY_RESULT=D;e.cleanFromGeometryEngine=function(G){return G&&"_geVersion"in G?JSON.parse(JSON.stringify(G,W)):G};e.getCentroid=function(G,r,a){if("esriGeometryPolygon"!==G.geometryType||!r||!r.centroid&&!r.geometry)return null;r.centroid||(r.centroid=H.getCentroidOptimizedGeometry(new R,r.geometry,G.hasZ,G.hasM));return I(G,r.centroid,a)};e.getGeometry=function(G,
r,a,k,O,X,ja=r,oa=a){const ma=r&&ja,la=a&&oa;k=u.isSome(k)?"coords"in k?k:k.geometry:null;if(u.isNone(k))return null;if(O)return r=S.generalizeOptimizedGeometry(B,k,r,a,G,O,ja,oa),X&&(r=S.quantizeOptimizedGeometry(F,r,ma,la,G,X)),P[G](r,ma,la);if(X)return X=S.quantizeOptimizedGeometry(F,k,r,a,G,X,ja,oa),P[G](X,ma,la);S.removeZMValues(Y,k,r,a,ja,oa);return P[G](Y,ma,la)};e.normalizeFilter=function(G,r,a){return l.apply(this,arguments)};e.normalizeQuery=function(G,r,a){return d.apply(this,arguments)};
e.normalizeQueryLike=N;e.transformCentroid=I;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(g,e,aa,ba,u,K,A,n){function t(L,Q,da){if(L)for(const qa of L)(L=(L=K.getDeepValue(qa,Q))&&"function"!==typeof L&&da.get(L))&&K.setDeepValue(qa,L.name,Q)}function w(L,Q){if(!L||!Q)return[];
p.clear();H(p,L,Q);return Array.from(p).sort()}function H(L,Q,da){var qa;if(da)if(null!=Q&&null!=(qa=Q.fields)&&qa.length)if(da.includes("*"))for(const {name:ra}of Q.fields)L.add(ra);else for(const ra of da)S(L,Q,ra);else if(da.includes("*"))L.clear(),L.add("*");else for(const ra of da)L.add(ra)}function S(L,Q,da){"string"===typeof da&&(Q?(Q=Q.get(da))&&L.add(Q.name):L.add(da))}function R(L,Q,da){return h.apply(this,arguments)}function h(){h=aa._asyncToGenerator(function*(L,Q,da){var qa;if(da){var {arcadeUtils:ra}=
yield n.loadArcade();da=ra.extractFieldNames(da,null==Q?void 0:null==(qa=Q.fields)?void 0:qa.map(wa=>wa.name));for(const wa of da)S(L,Q,wa)}});return h.apply(this,arguments)}function I(L,Q,da){return d.apply(this,arguments)}function d(){d=aa._asyncToGenerator(function*(L,Q,da){if(da&&"1\x3d1"!==da){da=(yield new Promise((qa,ra)=>g(["../../core/sql/WhereClause"],qa,ra))).WhereClause.create(da,Q);if(!da.isStandardized)throw new ba("fieldUtils:collectFilterFields","Where clause is not standardized");
H(L,Q,da.fieldNames)}});return d.apply(this,arguments)}function l(L,Q){for(const da of L)if(da&&da.valueType&&da.valueType===Q)return da.name;return null}function N(){N=aa._asyncToGenerator(function*(L){if(!L)return[];const Q=new Set;yield M(Q,L);return Array.from(Q).sort()});return N.apply(this,arguments)}function M(L,Q){return v.apply(this,arguments)}function v(){v=aa._asyncToGenerator(function*(L,Q){if(Q){var da=K.getDeepValue("elevationInfo.featureExpressionInfo",Q);if(da)return da.collectRequiredFields(L,
Q.fieldsIndex)}});return v.apply(this,arguments)}function C(L,Q,da){return y.apply(this,arguments)}function y(){y=aa._asyncToGenerator(function*(L,Q,da){da.outStatistic.onStatisticValueExpression?R(L,Q,da.outStatistic.onStatisticValueExpression):L.add(da.outStatistic.onStatisticField)});return y.apply(this,arguments)}function q(){q=aa._asyncToGenerator(function*(L,Q,da){var qa,ra;if(Q&&da&&"cluster"===da.type){var wa=[];null!=(qa=da.popupTemplate)&&qa.expressionInfos&&wa.push(...da.popupTemplate.expressionInfos.map(ya=>
R(L,Q.fieldsIndex,ya.expression)));if(Array.isArray(null==(ra=da.popupTemplate)?void 0:ra.content)){qa=da.popupTemplate.content;for(const ya of qa)"expression"===ya.type&&ya.expressionInfo&&wa.push(R(L,Q.fieldsIndex,ya.expressionInfo.expression))}da.fields&&wa.push(...da.fields.map(ya=>C(L,Q.fieldsIndex,ya)));yield Promise.all(wa)}});return q.apply(this,arguments)}function z(){z=aa._asyncToGenerator(function*(L,Q,da){Q&&(Q.timeInfo&&u.isSome(da)&&da.timeExtent&&H(L,Q.fieldsIndex,[Q.timeInfo.startField,
Q.timeInfo.endField]),Q.floorInfo&&H(L,Q.fieldsIndex,[Q.floorInfo.floorField]),u.isSome(da)&&u.isSome(da.where)&&(yield I(L,Q.fieldsIndex,da.where)))});return z.apply(this,arguments)}function D(){D=aa._asyncToGenerator(function*(L,Q,da){Q&&da&&(yield Promise.all(da.map(qa=>Y(L,Q,qa))))});return D.apply(this,arguments)}function Y(L,Q,da){return B.apply(this,arguments)}function B(){B=aa._asyncToGenerator(function*(L,Q,da){Q&&da&&(da.valueExpression?yield R(L,Q.fieldsIndex,da.valueExpression):da.field&&
S(L,Q.fieldsIndex,da.field))});return B.apply(this,arguments)}function F(){F=aa._asyncToGenerator(function*(L){if(!L)return[];const Q="timeInfo"in L&&L.timeInfo;return Q?w(L.fieldsIndex,[L.trackIdField,Q.startField,Q.endField]):[]});return F.apply(this,arguments)}function P(){P=aa._asyncToGenerator(function*(L){if(!L)return[];const Q=new Set;yield W(Q,L);return Array.from(Q).sort()});return P.apply(this,arguments)}function W(L,Q){return G.apply(this,arguments)}function G(){G=aa._asyncToGenerator(function*(L,
Q){const {labelingInfo:da,fieldsIndex:qa}=Q;da&&da.length&&(yield Promise.all(da.map(ra=>r(L,qa,ra))))});return G.apply(this,arguments)}function r(L,Q,da){return a.apply(this,arguments)}function a(){a=aa._asyncToGenerator(function*(L,Q,da){if(da){var qa=da.getLabelExpression();da=da.where;"arcade"===qa.type?yield R(L,Q,qa.expression):(qa=qa.expression.match(/{[^}]*}/g))&&qa.forEach(ra=>{S(L,Q,ra.slice(1,-1))});yield I(L,Q,da)}});return a.apply(this,arguments)}function k(L){return"number"===typeof L&&
!isNaN(L)&&isFinite(L)}function O(L){return null===L||k(L)}function X(L){return null===L||fa(L)}function ja(L){return null!=L&&"string"===typeof L}function oa(L){return null===L||ja(L)}function ma(){return!0}function la(L,Q){let da;switch(L.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":da=L.nullable?X:fa;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":da=
L.nullable?O:k;break;case "string":case "esriFieldTypeString":da=L.nullable?oa:ja;break;default:da=ma}return 1===arguments.length?da:da(Q)}function pa(L){return null!=L&&J.has(L.type)}function va(L,Q){return L.nullable&&null===Q?null:pa(L)&&!Ba(L.type,Number(Q))?e.NumericRangeValidationError.OUT_OF_RANGE:la(L,Q)?L.domain?A.validateDomainValue(L.domain,Q):null:e.TypeValidationError.INVALID_TYPE}function Ba(L,Q){return(L="string"===typeof L?Ka(L):L)?L.isInteger?fa(Q)&&Q>=L.min&&Q<=L.max:Q>=L.min&&Q<=
L.max:!1}function Ka(L){switch(L){case "esriFieldTypeSmallInteger":case "small-integer":return T;case "esriFieldTypeInteger":case "integer":return U;case "esriFieldTypeSingle":case "single":return ha;case "esriFieldTypeDouble":case "double":return ea}}function Ta(L,Q,da){if(!Q||!Q.attributes||!L){if(u.isSome(da))for(var qa of L)da.add(qa);return!0}Q=Q.attributes;qa=!1;for(const ra of L)if(!(ra in Q))if(qa=!0,u.isSome(da))da.add(ra);else break;return qa}function Oa(){Oa=aa._asyncToGenerator(function*(L,
Q){const da=new Set;for(const qa of Q)yield R(da,L.fieldsIndex,qa);return Array.from(da).sort()});return Oa.apply(this,arguments)}const Sa="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),c=["field","normalizationField"],p=new Set,fa=(()=>"isInteger"in Number?Number.isInteger:L=>"number"===typeof L&&isFinite(L)&&Math.floor(L)===L)(),m=["integer","small-integer",
"single","double"],J=new Set([...m,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);e.NumericRangeValidationError=void 0;(e.NumericRangeValidationError||(e.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";e.TypeValidationError=void 0;(e.TypeValidationError||(e.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const T={min:-32768,max:32767,isInteger:!0},U={min:-2147483648,max:2147483647,
isInteger:!0},ha={min:-3.4E38,max:1.2E38,isInteger:!1},ea={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};e.collectArcadeFieldNames=R;e.collectElevationFields=M;e.collectFeatureReductionFields=function(L,Q,da){return q.apply(this,arguments)};e.collectField=S;e.collectFields=H;e.collectFilterFields=function(L,Q,da){return z.apply(this,arguments)};e.collectLabelingFields=W;e.collectOrderByInfos=function(L,Q,da){return D.apply(this,arguments)};e.doubleRange=ea;e.featureHasFields=function(L,
Q){return!Ta(L,Q,null)};e.fixFields=w;e.fixRendererFields=function(L,Q){if(null!=L&&null!=Q)for(const da of Array.isArray(L)?L:[L])if(t(Sa,da,Q),"visualVariables"in da&&da.visualVariables)for(const qa of da.visualVariables)t(c,qa,Q)};e.fixTimeInfoFields=function(L,Q){if(null!=L&&null!=Q&&Q.fields.length)if("startField"in L){var da=Q.get(L.startField);Q=Q.get(L.endField);L.startField=da&&da.name||null;L.endField=Q&&Q.name||null}else da=Q.get(L.startTimeField),Q=Q.get(L.endTimeField),L.startTimeField=
da&&da.name||null,L.endTimeField=Q&&Q.name||null};e.getDisplayFieldName=function({displayField:L,fields:Q}){if(L)return L;if(!Q||!Q.length)return null;if(!(L=l(Q,"name-or-title")||l(Q,"unique-identifier")||l(Q,"type-or-category")))a:{for(const da of Q)if(da&&da.name&&(Q=da.name.toLowerCase(),-1<Q.indexOf("name")||-1<Q.indexOf("title"))){L=da.name;break a}L=null}return L};e.getElevationFields=function(L){return N.apply(this,arguments)};e.getExpressionFields=function(L,Q){return Oa.apply(this,arguments)};
e.getFeatureEditFields=function(L){if(!L)return[];const Q="editFieldsInfo"in L&&L.editFieldsInfo;return Q?w(L.fieldsIndex,[Q&&Q.creatorField,Q&&Q.creationDateField,Q&&Q.editorField,Q&&Q.editDateField]):[]};e.getFeatureGeometryFields=function(L){if(!L)return[];const Q=L.geometryFieldsInfo;return Q?w(L.fieldsIndex,[Q.shapeAreaField,Q.shapeLengthField]):[]};e.getFieldDefaultValue=function(L){const Q=L.defaultValue;if(void 0!==Q&&la(L,Q))return Q;if(L.nullable)return null};e.getFieldRange=function(L){const Q=
A.getDomainRange(L.domain);if(Q)return Q;if(pa(L))return Ka(L.type)};e.getLabelingFields=function(L){return P.apply(this,arguments)};e.getNumericTypeForValue=function(L){if(!k(L))return null;if(fa(L)){if(L>=T.min&&L<=T.max)return"esriFieldTypeSmallInteger";if(L>=U.min&&L<=U.max)return"esriFieldTypeInteger"}return L>=ha.min&&L<=ha.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};e.getTimeFields=function(L){return F.apply(this,arguments)};e.integerRange=U;e.isDateField=function(L){return null!=L&&("date"===
L.type||"esriFieldTypeDate"===L.type)};e.isNumberInRange=Ba;e.isNumericField=pa;e.isStringField=function(L){return null!=L&&("string"===L.type||"esriFieldTypeString"===L.type)};e.isValidFieldValue=function(L,Q){return null===va(L,Q)};e.isValueMatchingFieldType=la;e.numericTypes=m;e.packFields=function(L,Q,da=1){if(!Q||!L)return[];if(Q.includes("*"))return["*"];Q=w(L,Q);return Q.length/L.fields.length>=da?["*"]:Q};e.populateMissingFields=Ta;e.rendererFields=Sa;e.sanitizeNullFieldValue=function(L){return null==
L||"number"===typeof L&&isNaN(L)?null:L};e.singleRange=ha;e.smallIntegerRange=T;e.unpackFieldNames=function(L,Q){return u.isNone(Q)||u.isNone(L)?[]:Q.includes("*")?L.fields.map(da=>da.name):Q};e.validateFieldValue=va;e.validationErrorToString=function(L,Q,da){switch(L){case A.DomainValidationError.INVALID_CODED_VALUE:return`Value ${da} is not in the coded domain - field: ${Q.name}, domain: ${JSON.stringify(Q.domain)}`;case A.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${da} is out of the range of valid values - field: ${Q.name}, domain: ${JSON.stringify(Q.domain)}`;
case e.TypeValidationError.INVALID_TYPE:return`Value ${da} is not a valid value for the field type - field: ${Q.name}, type: ${Q.type}, nullable: ${Q.nullable}`;case e.NumericRangeValidationError.OUT_OF_RANGE:{const {min:qa,max:ra}=Ka(Q.type);return`Value ${da} is out of range for the number type - field: ${Q.name}, type: ${Q.type}, value range is ${qa} to ${ra}`}}};e.visualVariableFields=c;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/support/domainUtils":function(){define(["exports"],
function(g){function e(aa,ba){switch(aa.type){case "range":{const u="range"in aa?aa.range[1]:aa.maxValue;if(+ba<("range"in aa?aa.range[0]:aa.minValue)||+ba>u)return g.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==aa.codedValues||aa.codedValues.every(u=>null==u||u.code!==ba))return g.DomainValidationError.INVALID_CODED_VALUE}return null}g.DomainValidationError=void 0;(function(aa){aa.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";aa.INVALID_CODED_VALUE=
"domain-validation-error::invalid-coded-value"})(g.DomainValidationError||(g.DomainValidationError={}));g.getDomainRange=function(aa){if(aa&&"range"===aa.type)return{min:"range"in aa?aa.range[0]:aa.minValue,max:"range"in aa?aa.range[1]:aa.maxValue}};g.isValidDomainValue=function(aa,ba){return null===e(aa,ba)};g.validateDomainValue=e;Object.defineProperty(g,"__esModule",{value:!0})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/maybe ../geometry/SpatialReference".split(" "),
function(g,e,aa,ba,u,K){function A(){n||(n=aa._asyncToGenerator(function*(){const w=yield new Promise((H,S)=>g(["./arcadeUtils"],H,S));return{arcade:w.arcade,arcadeUtils:w,Dictionary:w.Dictionary,Feature:w.arcadeFeature}})());return n}let n;ba=(w,H,S)=>t.create(w,H,S,null,["$feature","$view"]);let t=function(){function w(S,R,h,I,d,l,N,M){this.script=S;this.evaluate=d;this.fields=Array.isArray(N)?N:N.fields;this._syntaxTree=I;this._arcade=R;this._arcadeDictionary=h;this._arcadeFeature=l;this._spatialReference=
M;this._referencesGeometry=R.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}w.create=function(){var S=aa._asyncToGenerator(function*(R,h,I,d,l,N){const {arcade:M,Feature:v,Dictionary:C}=yield A(),y=K.fromJSON(h);h=M.parseScript(R,N);l=l.reduce((B,F)=>({...B,[F]:null}),{});let q=null;u.isSome(d)&&(q=new C(d),q.immutable=!0,l.$config=null);d=M.scriptUsesGeometryEngine(h)&&M.enableGeometrySupport();N=M.scriptUsesFeatureSet(h)&&M.enableFeatureSetSupport();
const z=M.scriptIsAsync(h)&&M.enableAsyncSupport();l={vars:l,spatialReference:y,useAsync:!!z};const D=new C;D.immutable=!1;D.setField("scale",0);const Y=M.compileScript(h,l);yield Promise.all([d,N,z]);return new w(R,M,C,h,B=>{"$view"in B&&B.$view&&(D.setField("scale",B.$view.scale),B.$view=D);q&&(B.$config=q);return Y({vars:B,spatialReference:y})},new v,I,y)});return function(R,h,I,d,l,N){return S.apply(this,arguments)}}();var H=w.prototype;H.repurposeFeature=function(S){S.geometry&&!S.geometry.spatialReference&&
(S.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(S.geometry,S.attributes,{fields:this.fields});return this._arcadeFeature};H.createDictionary=function(){return new this._arcadeDictionary};H.referencesMember=function(S){return this._arcade.referencesMember(this._syntaxTree,S)};H.referencesFunction=function(S){return this._arcade.referencesFunction(this._syntaxTree,S)};H.referencesGeometry=function(){return this._referencesGeometry};H.referencesScale=
function(){return this._referencesScale};H.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};return w}();e.ArcadeExpression=t;e.createDictionaryExpression=(w,H,S,R)=>t.create(w,H,S,R,["$feature","$view"]);e.createLabelExpression=(w,H,S)=>t.create(w,H,S,null,["$feature"]);e.createRendererExpression=ba;e.createVVExpression=ba;e.loadArcade=A;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(g,e,aa,ba,u,K,A,n,t,w,H,S,R){function h(){return new Promise((N,M)=>g(["../../../geometry/geometryEngineJSON"],N,M))}function I(){I=aa._asyncToGenerator(function*(N,M,v){const {spatialRel:C,geometry:y}=N;if(y){if(!0!==l.spatialRelationship[C])throw new ba("feature-store:unsupported-query","Unsupported query spatial relationship",{query:N});if(n.isValid(y.spatialReference)&&n.isValid(v)){if(!0!==l.queryGeometry[A.getJsonType(y)])throw new ba("feature-store:unsupported-query","Unsupported query geometry type",
{query:N});if(!0!==l.layerGeometry[M])throw new ba("feature-store:unsupported-query","Unsupported layer geometry type",{query:N});if(N.outSR)return S.checkProjectionSupport(N.geometry&&N.geometry.spatialReference,N.outSR)}}});return I.apply(this,arguments)}const d={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",
esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},l={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},
layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};e.canQueryWithRBush=function(N){if(A.isExtent(N))return!0;if(A.isPolygon(N)){for(const M of N.rings)if(5!==M.length||M[0][0]!==M[1][0]||M[0][0]!==M[4][0]||M[2][0]!==M[3][0]||M[0][1]!==M[3][1]||M[0][1]!==M[4][1]||M[1][1]!==M[2][1])return!1;return!0}return!1};e.checkSpatialQuerySupport=function(N,M,v){return I.apply(this,arguments)};e.getSpatialQueryOperator=function(N,
M,v,C,y){if(A.isPolygon(M)&&"esriGeometryPoint"===v&&("esriSpatialRelIntersects"===N||"esriSpatialRelContains"===N)){const q=w.convertFromPolygon(new H,M,!1,!1);return Promise.resolve(z=>t.polygonContainsPoint(q,!1,!1,z))}if(A.isPolygon(M)&&"esriGeometryMultipoint"===v){const q=w.convertFromPolygon(new H,M,!1,!1);if("esriSpatialRelContains"===N)return Promise.resolve(z=>t.polygonContainsMultipoint(q,!1,!1,z,C,y))}if(A.isExtent(M)&&"esriGeometryPoint"===v&&("esriSpatialRelIntersects"===N||"esriSpatialRelContains"===
N))return Promise.resolve(q=>u.extentContainsPoint(M,R.getGeometry(v,C,y,q)));if(A.isExtent(M)&&"esriGeometryMultipoint"===v&&"esriSpatialRelContains"===N)return Promise.resolve(q=>u.extentContainsMultipoint(M,R.getGeometry(v,C,y,q)));if(A.isExtent(M)&&"esriSpatialRelIntersects"===N){const q=K.getExtentIntersector(v);return Promise.resolve(z=>q(M,R.getGeometry(v,C,y,z)))}return h().then(q=>{const z=q[d[N]].bind(null,M.spatialReference,M);return D=>z(R.getGeometry(v,C,y,D))})};Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(g,e){g.extentIntersectsExtent=e.extentIntersectsExtent;g.extentIntersectsMultipoint=e.extentIntersectsMultipoint;g.extentIntersectsPoint=e.extentIntersectsPoint;g.extentIntersectsPolygon=e.extentIntersectsPolygon;g.extentIntersectsPolyline=e.extentIntersectsPolyline;g.getFeatureExtentIntersector=e.getFeatureExtentIntersector;g.isSelfIntersecting=e.isSelfIntersecting;g.segmentIntersects=
e.segmentIntersects;g.getExtentIntersector=function(aa){return"mesh"===aa?e.extentIntersectsExtent:e.getFeatureExtentIntersector(aa)};Object.defineProperty(g,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],function(g){function e(aa,ba,u,K,A){if(!aa)return!1;ba=ba?u?4:3:u?3:2;const {coords:n,lengths:t}=aa;u=!1;aa=0;for(const H of t){var w=aa;for(let S=aa,R=aa+H*ba;S<R;S+=ba){w=S+ba;w===R&&(w=aa);const h=n[S],I=n[S+1],d=n[w];w=n[w+1];(I<A&&w>=A||w<A&&I>=A)&&
h+(A-I)/(w-I)*(d-h)<K&&(u=!u)}aa+=H*ba}return u}g.polygonContainsCoords=e;g.polygonContainsMultipoint=function(aa,ba,u,K,A,n){A=A?n?4:3:n?3:2;const {coords:t,lengths:w}=K;if(!w)return!1;for(let H=0,S=0;H<w.length;H++,S+=A)if(!e(aa,ba,u,t[S],t[S+1]))return!1;return!0};g.polygonContainsPoint=function(aa,ba,u,K){return e(aa,ba,u,K.coords[0],K.coords[1])};Object.defineProperty(g,"__esModule",{value:!0})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],
function(g,e){function aa(u){return"oid"===u.type||"esriFieldTypeOID"===u.type}function ba(u){return"global-id"===u.type||"esriFieldTypeGlobalID"===u.type}return function(){function u(A){this.fields=A;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(A){var n=[];for(const t of A)if(A=t&&t.name){const w=A.toLowerCase().trim();this._fieldsMap.set(A,t);this._fieldsMap.set(w,t);n.push(w);"date"===t.type||
"esriFieldTypeDate"===t.type?(this.dateFields.push(t),this._dateFieldsSet.add(t)):e.isNumericField(t)&&(this._numericFieldsSet.add(t),this.numericFields.push(t));aa(t)||ba(t)||(t.editable=null==t.editable?!0:!!t.editable,t.nullable=null==t.nullable?!0:!!t.nullable)}n.sort();this.uid=n.join(",")}}var K=u.prototype;K.destroy=function(){this._fieldsMap.clear()};K.has=function(A){return null!=this.get(A)};K.get=function(A){return null!=A?this._fieldsMap.get(A)||this._fieldsMap.get(A.toLowerCase().trim()):
void 0};K.isDateField=function(A){return this._dateFieldsSet.has(this.get(A))};K.isNumericField=function(A){return this._numericFieldsSet.has(this.get(A))};K.normalizeFieldName=function(A){if(A=this.get(A))return A.name};g._createClass(u,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const A of this.fields)aa(A)||ba(A)||A.nullable||void 0!==e.getFieldDefaultValue(A)||this._requiredFields.push(A)}return this._requiredFields}}]);return u}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/PromiseQueue ./debugFlags".split(" "),
function(g,e,aa,ba,u,K,A,n,t,w,H,S,R,h,I,d,l,N,M){function v(r){return y.has(r)?y.get(r):"number"===typeof r?r:1}const C=K.getLogger("esri.views.support.Scheduler");g.TaskPriority=void 0;(function(r){r.RESOURCE_CONTROLLER="schedule";r.SLIDE="slide";r.STREAM_DATA_LOADER="stream loader";r.ELEVATION_QUERY="elevation query";r.TERRAIN_SURFACE="terrain";r.SURFACE_GEOMETRY_UPDATES="surface geometry updates";r.GRAPHICS_CORE="Graphics3D";r.I3S_CONTROLLER="I3S";r.POINT_CLOUD_LAYER="point cloud";r.FEATURE_TILE_FETCHER=
"feature fetcher";r.OVERLAY="overlay";r.STAGE="stage";r.GRAPHICS_DECONFLICTOR="graphics deconflictor";r.FILTER_VISIBILITY="Graphics3D filter visibility";r.SCALE_VISIBILITY="Graphics3D scale visibility";r.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";r.POINT_OF_INTEREST_FREQUENT="POI frequent";r.POINT_OF_INTEREST_INFREQUENT="POI infrequent";r.LABELER="labeler";r.FEATURE_QUERY_ENGINE="feature query";r.FEATURE_TILE_TREE="feature tile tree";r.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";r.ELEVATION_ALIGNMENT=
"elevation alignment";r.TEXT_TEXTURE_ATLAS="text texture atlas";r.TEXTURE_UNLOAD="texture unload";r.LINE_OF_SIGHT_TOOL="line of sight tool";r.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";r.ELEVATION_PROFILE="elevation profile";r.SNAPPING="snapping";r.SHADOW_ACCUMULATOR="shadow accumulator";r.CLOUDS_GENERATOR="cloud generator";r[r.TEST_PRIO=1]="TEST_PRIO"})(g.TaskPriority||(g.TaskPriority={}));const y=new Map([[g.TaskPriority.RESOURCE_CONTROLLER,0],[g.TaskPriority.SLIDE,0],[g.TaskPriority.STREAM_DATA_LOADER,
0],[g.TaskPriority.ELEVATION_QUERY,0],[g.TaskPriority.TERRAIN_SURFACE,1],[g.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[g.TaskPriority.GRAPHICS_CORE,2],[g.TaskPriority.I3S_CONTROLLER,2],[g.TaskPriority.POINT_CLOUD_LAYER,2],[g.TaskPriority.FEATURE_TILE_FETCHER,2],[g.TaskPriority.OVERLAY,4],[g.TaskPriority.STAGE,4],[g.TaskPriority.GRAPHICS_DECONFLICTOR,4],[g.TaskPriority.FILTER_VISIBILITY,4],[g.TaskPriority.SCALE_VISIBILITY,4],[g.TaskPriority.FRUSTUM_VISIBILITY,4],[g.TaskPriority.POINT_OF_INTEREST_FREQUENT,
6],[g.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[g.TaskPriority.LABELER,8],[g.TaskPriority.FEATURE_QUERY_ENGINE,8],[g.TaskPriority.FEATURE_TILE_TREE,16],[g.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[g.TaskPriority.ELEVATION_ALIGNMENT,12],[g.TaskPriority.TEXT_TEXTURE_ATLAS,12],[g.TaskPriority.CLOUDS_GENERATOR,12],[g.TaskPriority.TEXTURE_UNLOAD,12],[g.TaskPriority.LINE_OF_SIGHT_TOOL,16],[g.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[g.TaskPriority.SNAPPING,0],[g.TaskPriority.SHADOW_ACCUMULATOR,
30]]);g.State=void 0;(function(r){r[r.ANIMATING=0]="ANIMATING";r[r.INTERACTING=1]="INTERACTING";r[r.IDLE=2]="IDLE"})(g.State||(g.State={}));const q=S.Milliseconds(6.5),z=S.Milliseconds(1),D=S.Milliseconds(30),Y=S.Milliseconds(1E3/30),B=S.Milliseconds(100);var F;(function(r){let a=function(X){function ja(ma){var la=X.call(this,ma)||this;la.updating=!0;la._microTaskQueued=!1;la.performanceInfo={total:new n("total"),tasks:new Map};la._frameTaskTimes=new Map;la._budget=null;la._state=g.State.INTERACTING;
la._tasks=new t;la._runQueue=new t;la._load=0;la._idleStateCallbacks=new t;la._idleUpdatesStartFired=!1;la._maxReschedule=G;la._forceTask=!1;la._debug=!1;la._debugHandle=H.watch(()=>M.SCHEDULER_LOG_SLOW_TASKS,Ba=>la._debug=Ba,H.initial);la._budget=new O(ma.nowFunc);for(const Ba of Object.keys(g.TaskPriority))la.performanceInfo.tasks.set(g.TaskPriority[Ba],new n(g.TaskPriority[Ba]));let pa;const va=e._assertThisInitialized(la);la._test={get state(){return A.unwrapOr(pa,va._state)},set state(Ba){pa=
Ba},FRAME_SAFETY_BUDGET:q,INTERACTING_BUDGET:Y,IDLE_BUDGET:B,get budget(){return va._budget.budget},usedBudget:0,setBudget:Ba=>va._budget=Ba,updateTask:Ba=>la._updateTask(Ba),getState:Ba=>la._getState(Ba),getRuntime:Ba=>la._getRuntime(Ba),frameTaskTimes:la._frameTaskTimes,resetRuntimes:()=>la._resetRuntimes(),getRunning:()=>la._getRunning()};return la}e._inheritsLoose(ja,X);var oa=ja.prototype;oa.destroy=function(){this._tasks.toArray().forEach(ma=>ma.remove());this._tasks.clear();A.removeMaybe(this._debugHandle);
this.updating=this._microTaskQueued=!1};oa.activate=function(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=G,this._schedule(),this.frame()))}))};oa.registerTask=function(ma,la){const pa=v(ma);la=new k(this,ma,la,pa);this._tasks.push(la);this.performanceInfo.tasks.has(ma)||this.performanceInfo.tasks.set(ma,new n(ma));return la};oa.registerIdleStateCallbacks=function(ma,
la){const pa={idleBegin:ma,idleEnd:la};this._idleStateCallbacks.push(pa);this.state===g.State.IDLE&&this._idleUpdatesStartFired&&pa.idleBegin();const va=this;return{remove:()=>this._removeIdleStateCallbacks(pa),set idleBegin(Ba){va._idleUpdatesStartFired&&(pa.idleEnd(),va._state===g.State.IDLE&&Ba());pa.idleBegin=Ba},set idleEnd(Ba){pa.idleEnd=Ba}}};oa.updateBudget=function(ma){this._test.usedBudget=0;let la=q,pa=ma.frameDuration,va=z;switch(this.state){case g.State.IDLE:la=S.Milliseconds(0);pa=S.Milliseconds(Math.max(B,
ma.frameDuration));va=D;break;case g.State.INTERACTING:pa=S.Milliseconds(Math.max(Y,ma.frameDuration))}pa=S.Milliseconds(pa-ma.elapsedFrameTime-la);if(this.state!==g.State.IDLE&&pa<z&&!this._forceTask)return this._forceTask=!0,!1;pa=S.Milliseconds(Math.max(pa,va));this._budget.reset(pa,this.state);this._maxReschedule=G;this._updateLoad();return this._schedule()};oa.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case g.State.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=
!0,this._idleStateCallbacks.forAll(ma=>ma.idleBegin()));this._runIdle();break;case g.State.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};oa.stopFrame=function(){this._budget.reset(S.Milliseconds(0),this._state);this._budget.madeProgress()};oa._removeIdleStateCallbacks=function(ma){this._idleUpdatesStartFired&&ma.idleEnd();this._idleStateCallbacks.removeUnordered(ma)};oa.removeTask=function(ma){this._tasks.removeUnordered(ma);this._runQueue.removeUnordered(ma)};
oa._updateTask=function(ma){this._tasks.forAll(la=>{la.name===ma&&la.setPriority(ma)})};oa._getState=function(ma){if(this._runQueue.some(pa=>pa.name===ma))return g.TaskState.SCHEDULED;let la=g.TaskState.IDLE;this._tasks.forAll(pa=>{pa.name===ma&&pa.needsUpdate&&(1>=pa.schedulePriority?la=g.TaskState.READY:la!==g.TaskState.READY&&(la=g.TaskState.WAITING))});return la};oa._getRuntime=function(ma){let la=0;this._tasks.forAll(pa=>{pa.name===ma&&(la+=pa.runtime)});return la};oa._resetRuntimes=function(){this._tasks.forAll(ma=>
ma.runtime=0)};oa._getRunning=function(){const ma=new Map;this._tasks.forAll(pa=>{pa.needsUpdate&&ma.set(pa.name,(ma.get(pa.name)||0)+1)});if(0===ma.size)return null;let la="";ma.forEach((pa,va)=>{la=1<pa?la+` ${pa}x ${va}`:la+` ${va}`});return la};oa._runIdle=function(){this._run()};oa._runInteracting=function(){this._run()};oa._runAnimating=function(){this._run()};oa._updateLoad=function(){const ma=this._tasks.reduce((la,pa)=>pa.needsUpdate?++la:la,0);this._load=.9*this._load+ma*(1-.9)};oa._schedule=
function(){if(0>=this._maxReschedule)return!1;this._runQueue.filterInPlace(ma=>{if(ma.needsUpdate)return!0;ma.schedulePriority=ma.basePriority;return!1});for(this._tasks.forAll(ma=>{0===ma.basePriority&&ma.needsUpdate&&!this._runQueue.some(la=>la===ma)&&this._runQueue.unshift(ma)});0===this._runQueue.length;){let ma=!1,la=0;this._tasks.forAll(pa=>{if(pa.needsUpdate&&0!==pa.schedulePriority&&0!==pa.basePriority)switch(ma=!0,la=Math.max(la,pa.basePriority),pa.schedulePriority){case 1:pa.schedulePriority=
0;this._runQueue.push(pa);break;default:--pa.schedulePriority}});if(!ma)return this.updating=!1;this._maxReschedule===G&&(this._maxReschedule=la);--this._maxReschedule}return this.updating=!0};oa._run=function(){const ma=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var la=this._budget.now();const pa=this._runQueue.pop();this._budget.resetProgress();try{pa.task.runTask(this._budget)}catch(va){C.error(`Exception in task "${pa.name}"`,va)}pa.schedulePriority=pa.basePriority;
la=this._budget.now()-la;pa.runtime+=la;this._frameTaskTimes.set(pa.priority,this._frameTaskTimes.get(pa.priority)+la);this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",pa.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this.updating=this._tasks.some(va=>va.needsUpdate);this._recordFrameTaskTimes(this._budget.now()-ma);return}}while(this._schedule());this.updating=this._tasks.some(pa=>pa.needsUpdate);this._recordFrameTaskTimes(this._budget.now()-
ma)};oa._startFrameTaskTimes=function(){for(const ma of Object.keys(g.TaskPriority))this._frameTaskTimes.set(g.TaskPriority[ma],0)};oa._recordFrameTaskTimes=function(ma){this._frameTaskTimes.forEach((la,pa)=>this.performanceInfo.tasks.get(pa).record(la));this.performanceInfo.total.record(ma)};e._createClass(ja,[{key:"now",get:function(){return this.nowFunc()}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return A.isNone(this._test.state)?this._state:this._test.state},
set:function(ma){this._state!==ma&&(this._state=ma,this.state!==g.State.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(la=>la.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return ja}(ba);aa.__decorate([R.property()],a.prototype,"updating",void 0);aa.__decorate([R.property()],a.prototype,"nowFunc",void 0);a=aa.__decorate([l.subclass("esri.views.support.Scheduler")],a);r.Scheduler=a;let k=function(X){function ja(ma,la,pa,va){var Ba=
X.call(this,{})||this;Ba._scheduler=ma;Ba.name=la;Ba._basePriority=va;Ba.runtime=0;Ba._queue=new N.PromiseQueue;Ba._handles=new u;Ba.schedulePriority=Ba._basePriority;Ba.task=A.isSome(pa)?pa:Ba._queue;Ba._handles.add(H.when(()=>Ba.task.running,()=>ma.activate()));return Ba}e._inheritsLoose(ja,X);var oa=ja.prototype;oa.normalizeCtorArgs=function(){return{}};oa.remove=function(){this.processQueue(P);this._scheduler.removeTask(this);this.schedule=W.schedule;this.reschedule=W.reschedule;this._handles.destroy()};
oa.setPriority=function(ma){this.name=ma;ma=v(ma);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=ma;this._basePriority=ma};oa.schedule=function(ma,la,pa){return this._queue.push(ma,la,pa)};oa.reschedule=function(ma,la,pa){return this._queue.unshift(ma,la,pa)};oa.processQueue=function(ma){this._queue.runTask(ma)};e._createClass(ja,[{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},
set:function(ma){this.setPriority(ma)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return ja}(ba);aa.__decorate([R.property({constructOnly:!0})],k.prototype,"task",void 0);aa.__decorate([R.property({readOnly:!0})],k.prototype,"updating",null);k=aa.__decorate([l.subclass("esri.views.support.SchedulerTask")],k);let O=function(){function X(oa){this.now=oa;this._budget=this._begin=0;this._state=g.State.IDLE;this._didWork=!1;this._enabled=!0}var ja=X.prototype;ja.run=
function(oa){if(this.done)return!1;!0===oa()&&(this._didWork=!0);return!0};ja.madeProgress=function(){this._didWork=!0};ja.reset=function(oa,ma){this._begin=this.now();this._budget=oa;this._state=ma;this._didWork=!1};ja.resetProgress=function(){this._didWork=!1};e._createClass(X,[{key:"done",get:function(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},
set:function(oa){this._enabled=oa}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return this.now()-this._begin}},{key:"hasProgressed",get:function(){return this._didWork}}]);return X}();r.Budget=O})(F||(F={}));g.TaskState=void 0;(function(r){r.SCHEDULED="s";r.READY="r";r.WAITING="w";r.IDLE="i"})(g.TaskState||(g.TaskState={}));const P=(()=>{const r=new F.Budget(()=>performance.now());r.enabled=!1;return r})(),W=new (function(){function r(){}
var a=r.prototype;a.remove=function(){};a.processQueue=function(){};a.schedule=function(k,O,X){try{if(w.isAborted(O)){const ja=w.createAbortError();return X?Promise.resolve(X(ja)):Promise.reject(ja)}return w.when(k(P))}catch(ja){return Promise.reject(ja)}};a.reschedule=function(k,O,X){return this.schedule(k,O,X)};return r}()),G=Number.MAX_SAFE_INTEGER;g.ImmediateTask=W;g.getTaskPriority=v;g.newScheduler=function(r){return new F.Scheduler({nowFunc:r})};g.noBudget=P;g.taskPriorities=y;Object.defineProperty(g,
"__esModule",{value:!0})})},"esri/core/Handles":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Collection ./maybe ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(g,e,aa,ba,u,K,A){aa=function(n){function t(H){H=n.call(this,H)||this;H._groups=new Map;return H}g._inheritsLoose(t,n);var w=t.prototype;w.destroy=function(){this.removeAll()};w.add=function(H,S){if(!this._isHandle(H)&&!Array.isArray(H)&&!ba.isCollection(H))return this;
const R=this._getOrCreateGroup(S);Array.isArray(H)||ba.isCollection(H)?H.forEach(h=>this._isHandle(h)&&R.push(h)):R.push(H);this.notifyChange("size");return this};w.forEach=function(H,S){if("function"===typeof H)this._groups.forEach(R=>R.forEach(H));else{const R=this._getGroup(H);R&&S&&R.forEach(S)}};w.has=function(H){return this._groups.has(this._ensureGroupKey(H))};w.remove=function(H){if(Array.isArray(H)||ba.isCollection(H))return H.forEach(this.remove,this),this;if(!this.has(H))return this;const S=
this._getGroup(H);for(let R=0;R<S.length;R++)S[R].remove();this._deleteGroup(H);this.notifyChange("size");return this};w.removeAll=function(){this._groups.forEach(H=>{for(let S=0;S<H.length;S++)H[S].remove()});this._groups.clear();this.notifyChange("size");return this};w._isHandle=function(H){return H&&!!H.remove};w._getOrCreateGroup=function(H){if(this.has(H))return this._getGroup(H);const S=[];this._groups.set(this._ensureGroupKey(H),S);return S};w._getGroup=function(H){return u.assumeNonNull(this._groups.get(this._ensureGroupKey(H)))};
w._deleteGroup=function(H){return this._groups.delete(this._ensureGroupKey(H))};w._ensureGroupKey=function(H){return H||"_default_"};g._createClass(t,[{key:"size",get:function(){let H=0;this._groups.forEach(S=>{H+=S.length});return H}}]);return t}(aa);e.__decorate([K.property({readOnly:!0})],aa.prototype,"size",null);return aa=e.__decorate([A.subclass("esri.core.Handles")],aa)})},"esri/core/Collection":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./ArrayPool ./Evented ./lang ./maybe ./ObjectPool ./ObservableChangesType ./scheduling ./accessorSupport/decorators/property ./accessorSupport/ensureType ./accessorSupport/decorators/shared ./accessorSupport/decorators/subclass ./accessorSupport/tracking ./accessorSupport/tracking/SimpleObservable".split(" "),
function(g,e,aa,ba,u,K,A,n,t,w,H,S,R,h,I){function d(P){return P?P instanceof F?P.toArray():P.length?Array.prototype.slice.apply(P):[]:[]}function l(P){if(P&&P.length)return P[0]}function N(P,W,G,r){W&&W.forEach((a,k,O)=>{P.push(a);N(P,G.call(r,a,k,O),G,r)})}var M;let v=function(){function P(){this.target=null;this.defaultPrevented=this.cancellable=!1;this.type=this.item=void 0}var W=P.prototype;W.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};W.reset=function(G){this.defaultPrevented=
!1;this.item=G};return P}();const C=new A(v,void 0,P=>{P.item=null;P.target=null;P.defaultPrevented=!1;P.cancellable=!1}),y=()=>{},q=new Set,z=new Set,D=new Set,Y=new Map;let B=0,F=M=function(P,W){function G(a){a=P.call(this,a)||this;a._chgListeners=[];a._notifications=null;a._timer=null;a._observable=new I.SimpleObservable;a.length=0;a._items=[];Object.defineProperty(g._assertThisInitialized(a),"uid",{value:B++});return a}g._inheritsLoose(G,P);G.isCollection=function(a){return null!=a&&a instanceof
M};var r=G.prototype;r.normalizeCtorArgs=function(a){return a?Array.isArray(a)||a instanceof M?{items:a}:a:{}};r.destroy=function(){this.removeAll()};r[W]=function*(){yield*this.items};r.hasEventListener=function(a){return"change"===a?0<this._chgListeners.length:this._emitter.hasEventListener(a)};r.on=function(a,k){if("change"===a){const O=this._chgListeners,X={removed:!1,callback:k};O.push(X);this._notifications&&this._notifications.push({listeners:O.slice(),items:this._items.slice(),changes:[]});
return{remove(){this.remove=y;X.removed=!0;O.splice(O.indexOf(X),1)}}}return this._emitter.on(a,k)};r.once=function(a,k){const O=this.on(a,k);return{remove(){O.remove()}}};r.add=function(a,k){h.trackAccess(this._observable);if(this._emitBeforeChanges(n.ObservableChangesType.ADD))return this;k=this.getNextIndex(null!=k?k:null);this._splice(k,0,[a]);this._emitAfterChanges(n.ObservableChangesType.ADD);return this};r.addMany=function(a,k=this._items.length){h.trackAccess(this._observable);if(!a||!a.length||
this._emitBeforeChanges(n.ObservableChangesType.ADD))return this;k=this.getNextIndex(k);this._splice(k,0,d(a));this._emitAfterChanges(n.ObservableChangesType.ADD);return this};r.at=function(a){h.trackAccess(this._observable);a=Math.trunc(a)||0;0>a&&(a+=this.length);if(!(0>a||a>=this.length))return this._items[a]};r.removeAll=function(){h.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(n.ObservableChangesType.REMOVE))return[];const a=this._splice(0,this.length)||[];this._emitAfterChanges(n.ObservableChangesType.REMOVE);
return a};r.clone=function(){h.trackAccess(this._observable);return this._createNewInstance({items:this._items.map(u.clone)})};r.concat=function(...a){h.trackAccess(this._observable);a=a.map(d);return this._createNewInstance({items:this._items.concat(...a)})};r.drain=function(a,k){h.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(n.ObservableChangesType.REMOVE)){var O=K.assumeNonNull(this._splice(0,this.length)),X=O.length;for(let ja=0;ja<X;ja++)a.call(k,O[ja],ja,O);this._emitAfterChanges(n.ObservableChangesType.REMOVE)}};
r.every=function(a,k){h.trackAccess(this._observable);return this._items.every(a,k)};r.filter=function(a,k){h.trackAccess(this._observable);let O;O=2===arguments.length?this._items.filter(a,k):this._items.filter(a);return this._createNewInstance({items:O})};r.find=function(a,k){h.trackAccess(this._observable);return this._items.find(a,k)};r.findIndex=function(a,k){h.trackAccess(this._observable);return this._items.findIndex(a,k)};r.flatten=function(a,k){h.trackAccess(this._observable);const O=[];
N(O,this,a,k);return new M(O)};r.forEach=function(a,k){h.trackAccess(this._observable);return this._items.forEach(a,k)};r.getItemAt=function(a){h.trackAccess(this._observable);return this._items[a]};r.getNextIndex=function(a){h.trackAccess(this._observable);const k=this.length;a=null==a?k:a;0>a?a=0:a>k&&(a=k);return a};r.includes=function(a,k=0){h.trackAccess(this._observable);return this._items.includes(a,k)};r.indexOf=function(a,k=0){h.trackAccess(this._observable);return this._items.indexOf(a,
k)};r.join=function(a=","){h.trackAccess(this._observable);return this._items.join(a)};r.lastIndexOf=function(a,k=this.length-1){h.trackAccess(this._observable);return this._items.lastIndexOf(a,k)};r.map=function(a,k){h.trackAccess(this._observable);a=this._items.map(a,k);return new M({items:a})};r.reorder=function(a,k=this.length-1){h.trackAccess(this._observable);const O=this.indexOf(a);if(-1!==O){0>k?k=0:k>=this.length&&(k=this.length-1);if(O!==k){if(this._emitBeforeChanges(n.ObservableChangesType.MOVE))return a;
this._splice(O,1);this._splice(k,0,[a]);this._emitAfterChanges(n.ObservableChangesType.MOVE)}return a}};r.pop=function(){h.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(n.ObservableChangesType.REMOVE)){var a=l(this._splice(this.length-1,1));this._emitAfterChanges(n.ObservableChangesType.REMOVE);return a}};r.push=function(...a){h.trackAccess(this._observable);if(this._emitBeforeChanges(n.ObservableChangesType.ADD))return this.length;this._splice(this.length,0,a);this._emitAfterChanges(n.ObservableChangesType.ADD);
return this.length};r.reduce=function(a,k){h.trackAccess(this._observable);const O=this._items;return 2===arguments.length?O.reduce(a,k):O.reduce(a)};r.reduceRight=function(a,k){h.trackAccess(this._observable);const O=this._items;return 2===arguments.length?O.reduceRight(a,k):O.reduceRight(a)};r.remove=function(a){h.trackAccess(this._observable);return this.removeAt(this.indexOf(a))};r.removeAt=function(a){h.trackAccess(this._observable);if(!(0>a||a>=this.length||this._emitBeforeChanges(n.ObservableChangesType.REMOVE)))return a=
l(this._splice(a,1)),this._emitAfterChanges(n.ObservableChangesType.REMOVE),a};r.removeMany=function(a){h.trackAccess(this._observable);if(!a||!a.length||this._emitBeforeChanges(n.ObservableChangesType.REMOVE))return[];a=a instanceof M?a.toArray():a;const k=this._items,O=[],X=a.length;for(let la=0;la<X;la++){var ja=k.indexOf(a[la]);if(-1<ja){{var oa=la+1;var ma=ja+1;const pa=Math.min(a.length-oa,k.length-ma);let va=0;for(;va<pa&&a[oa+va]===k[ma+va];)va++;oa=va}oa=1+oa;(ja=this._splice(ja,oa))&&0<
ja.length&&O.push.apply(O,ja);la+=oa-1}}this._emitAfterChanges(n.ObservableChangesType.REMOVE);return O};r.reverse=function(){h.trackAccess(this._observable);if(this._emitBeforeChanges(n.ObservableChangesType.MOVE))return this;const a=this._splice(0,this.length);a&&(a.reverse(),this._splice(0,0,a));this._emitAfterChanges(n.ObservableChangesType.MOVE);return this};r.shift=function(){h.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(n.ObservableChangesType.REMOVE)){var a=l(this._splice(0,
1));this._emitAfterChanges(n.ObservableChangesType.REMOVE);return a}};r.slice=function(a=0,k=this.length){h.trackAccess(this._observable);return this._createNewInstance({items:this._items.slice(a,k)})};r.some=function(a,k){h.trackAccess(this._observable);return this._items.some(a,k)};r.sort=function(a){h.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(n.ObservableChangesType.MOVE))return this;const k=K.assumeNonNull(this._splice(0,this.length));arguments.length?k.sort(a):k.sort();
this._splice(0,0,k);this._emitAfterChanges(n.ObservableChangesType.MOVE);return this};r.splice=function(a,k,...O){h.trackAccess(this._observable);const X=(k?n.ObservableChangesType.REMOVE:0)|(O.length?n.ObservableChangesType.ADD:0);if(this._emitBeforeChanges(X))return[];a=this._splice(a,k,O)||[];this._emitAfterChanges(X);return a};r.toArray=function(){h.trackAccess(this._observable);return this._items.slice()};r.toJSON=function(){h.trackAccess(this._observable);return this.toArray()};r.toLocaleString=
function(){h.trackAccess(this._observable);return this._items.toLocaleString()};r.toString=function(){h.trackAccess(this._observable);return this._items.toString()};r.unshift=function(...a){h.trackAccess(this._observable);if(!a.length||this._emitBeforeChanges(n.ObservableChangesType.ADD))return this.length;this._splice(0,0,a);this._emitAfterChanges(n.ObservableChangesType.ADD);return this.length};r._createNewInstance=function(a){return new this.constructor(a)};r._splice=function(a,k,O){const X=this._items;
var ja=this.itemType;let oa=void 0;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=t.schedule(()=>this._dispatchChange()));if(k){oa=X.splice(a,k);if(this.hasEventListener("before-remove")){var ma=C.acquire();ma.target=this;ma.cancellable=!0;for(let va=0,Ba=oa.length;va<Ba;va++)k=oa[va],ma.reset(k),this.emit("before-remove",ma),ma.defaultPrevented&&
(oa.splice(va,1),X.splice(a,0,k),a+=1,--va,--Ba);C.release(ma)}this.length=this._items.length;if(this.hasEventListener("after-remove")){k=C.acquire();k.target=this;k.cancellable=!1;ma=oa.length;for(let va=0;va<ma;va++)k.reset(oa[va]),this.emit("after-remove",k);C.release(k)}}if(O&&O.length){if(ja){k=[];for(var la of O)O=ja.ensureType(la),null==O&&null!=la||k.push(O);O=k}ja=this.hasEventListener("before-add");la=this.hasEventListener("after-add");k=a===this.length;if(ja||la){var pa=C.acquire();pa.target=
this;pa.cancellable=!0;ma=C.acquire();ma.target=this;ma.cancellable=!1;for(const va of O)ja?(pa.reset(va),this.emit("before-add",pa),pa.defaultPrevented||(k?X.push(va):X.splice(a++,0,va),this._set("length",X.length),la&&(ma.reset(va),this.emit("after-add",ma)))):(k?X.push(va):X.splice(a++,0,va),this._set("length",X.length),ma.reset(va),this.emit("after-add",ma));C.release(ma);C.release(pa)}else{if(k)for(pa of O)X.push(pa);else X.splice(a,0,...O);this._set("length",X.length)}}(O&&O.length||oa&&oa.length)&&
this._notifyChangeEvent(O,oa);return oa};r._emitBeforeChanges=function(a){let k=!1;if(this.hasEventListener("before-changes")){const O=C.acquire();O.target=this;O.cancellable=!0;O.type=a;this.emit("before-changes",O);k=O.defaultPrevented;C.release(O)}return k};r._emitAfterChanges=function(a){if(this.hasEventListener("after-changes")){const k=C.acquire();k.target=this;k.cancellable=!1;k.type=a;this.emit("after-changes",k);C.release(k)}this._observable.notify()};r._notifyChangeEvent=function(a,k){this.hasEventListener("change")&&
this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:a,removed:k})};r._dispatchChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var a=this._notifications;this._notifications=null;for(const k of a){a=k.changes;q.clear();z.clear();D.clear();for(const {added:la,removed:pa}of a){if(la)if(0===D.size&&0===z.size)for(const va of la)q.add(va);else for(const va of la)z.has(va)?(D.add(va),z.delete(va)):D.has(va)||q.add(va);
if(pa)if(0===D.size&&0===q.size)for(const va of pa)z.add(va);else for(const va of pa)q.has(va)?q.delete(va):(D.delete(va),z.add(va))}const O=aa.acquire();q.forEach(la=>{O.push(la)});const X=aa.acquire();z.forEach(la=>{X.push(la)});const ja=this._items,oa=k.items,ma=aa.acquire();D.forEach(la=>{oa.indexOf(la)!==ja.indexOf(la)&&ma.push(la)});if(k.listeners&&(O.length||X.length||ma.length)){a={target:this,added:O,removed:X,moved:ma};const la=k.listeners.length;for(let pa=0;pa<la;pa++){const va=k.listeners[pa];
va.removed||va.callback.call(this,a)}}aa.release(O);aa.release(X);aa.release(ma)}q.clear();z.clear();D.clear()}};g._createClass(G,[{key:"items",get:function(){h.trackAccess(this._observable);return this._items},set:function(a){this._emitBeforeChanges(n.ObservableChangesType.ADD)||(this._splice(0,this.length,d(a)),this._emitAfterChanges(n.ObservableChangesType.ADD))}}]);return G}(ba.EventedAccessor,Symbol.iterator);F.ofType=P=>{if(!P)return M;if(Y.has(P))return Y.get(P);let W=null;if("function"===
typeof P)W=P.prototype.declaredClass;else if(P.base)W=P.base.prototype.declaredClass;else for(var G in P.typeMap){const r=P.typeMap[G].prototype.declaredClass;W=W?W+` | ${r}`:r}G=function(r){function a(){return r.apply(this,arguments)||this}g._inheritsLoose(a,r);return a}(M);e.__decorate([S.shared({Type:P,ensureType:"function"===typeof P?H.ensureType(P):H.ensureOneOfType(P)})],G.prototype,"itemType",void 0);G=e.__decorate([R.subclass(`esri.core.Collection<${W}>`)],G);Y.set(P,G);return G};e.__decorate([w.property()],
F.prototype,"length",void 0);e.__decorate([w.property()],F.prototype,"items",null);return F=M=e.__decorate([R.subclass("esri.core.Collection")],F)})},"esri/core/ObservableChangesType":function(){define(["exports"],function(g){g.ObservableChangesType=void 0;var e=g.ObservableChangesType||(g.ObservableChangesType={});e[e.ADD=1]="ADD";e[e.REMOVE=2]="REMOVE";e[e.MOVE=4]="MOVE";Object.defineProperty(g,"__esModule",{value:!0})})},"esri/core/accessorSupport/decorators/shared":function(){define(["exports"],
function(g){g.shared=function(e){return(aa,ba)=>{aa[ba]=e}};Object.defineProperty(g,"__esModule",{value:!0})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(g,e){let aa=function(){function ba(){this._observers=[]}var u=ba.prototype;u.observe=function(K){this._observers.includes(K)||this._observers.push(K);return new e.ObservationHandle(this._observers,K)};u.notify=function(){const K=this._observers.slice();for(let A=0;A<K.length;++A){const n=
K[A];n.onInvalidated();n.onCommitted()}};return ba}();g.SimpleObservable=aa;Object.defineProperty(g,"__esModule",{value:!0})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(g,e,aa,ba,u,K,A){function n(R,h,I={}){return t(R,h,I,H)}function t(R,h,I={},d){let l=null;const N=I.once?(M,v)=>{d(M)&&(ba.removeMaybe(l),h(M,v))}:(M,v)=>{d(M)&&h(M,v)};l=K.watchTracked(R,N,I.sync,
I.equals);I.initial&&(R=R(),N(R,R));return l}function w(R,h,I){if(u.isAborted(I))return Promise.reject(u.createAbortError());const d=R();if(null!=h&&h(d))return Promise.resolve(d);let l=null;return new Promise((N,M)=>{l=aa.handlesGroup([u.onAbort(I,()=>{l=ba.removeMaybe(l);M(u.createAbortError())}),t(R,v=>{l=ba.removeMaybe(l);N(v)},{sync:!1,once:!0},null!=h?h:H)])})}function H(R){return!0}function S(R){return!!R}g.autorun=A.autorun;g.initial={initial:!0};g.on=function(R,h,I,d={}){function l(){M&&
v&&(v.remove(),null==d.onListenerRemove?void 0:d.onListenerRemove(M),v=M=null)}function N(q){d.once&&d.once&&ba.removeMaybe(C);I(q)}let M=null,v=null,C=null;const y=n(R,(q,z)=>{l();e.isEventTarget(q)&&(M=q,v=e.on(q,h,N),null==d.onListenerAdd?void 0:d.onListenerAdd(q))},{sync:d.sync,initial:!0});return C=aa.makeHandle(()=>{y.remove();l()})};g.once=function(R,h){return w(R,null,h)};g.sync={sync:!0};g.syncAndInitial={sync:!0,initial:!0};g.watch=n;g.when=function(R,h,I={}){return t(R,h,I,S)};g.whenOnce=
function(R,h){return w(R,S,h)};Object.defineProperty(g,"__esModule",{value:!0})})},"esri/layers/support/PromiseQueue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(g,e,aa,ba,u,K,A,n,t,w){g.PromiseQueue=function(S){function R(){var I=
S.apply(this,arguments)||this;I._tasks=[];I.running=!1;return I}e._inheritsLoose(R,S);var h=R.prototype;h.destroy=function(){this.cancelAll()};h.runTask=function(I){for(;!I.done&&this._process(I);)I.madeProgress()};h.push=function(I,d,l){this.running=!0;return new Promise((N,M)=>this._tasks.push(new H(N,M,I,d,l)))};h.unshift=function(I,d,l){this.running=!0;return new Promise((N,M)=>this._tasks.unshift(new H(N,M,I,d,l)))};h._process=function(I){if(0===this._tasks.length)return!1;const d=this._tasks.shift();
try{const l=u.isAborted(d.signal);if(l&&!d.abortCallback)d.reject(u.createAbortError());else{const N=l?d.abortCallback(u.createAbortError()):d.callback(I);u.isPromiseLike(N)?N.then(d.resolve,d.reject):d.resolve(N)}}catch(l){d.reject(l)}this.running=0<this._tasks.length;return!0};h.cancelAll=function(){const I=u.createAbortError();for(const d of this._tasks)if(d.abortCallback){const l=d.abortCallback(I);d.resolve(l)}else d.reject(I);this._tasks.length=0;this.running=!1};e._createClass(R,[{key:"length",
get:function(){return this._tasks.length}}]);return R}(ba);aa.__decorate([K.property()],g.PromiseQueue.prototype,"running",void 0);g.PromiseQueue=aa.__decorate([w.subclass("esri.layers.support.PromiseQueue")],g.PromiseQueue);let H=function(S,R,h,I,d){this.resolve=S;this.reject=R;this.callback=h;this.signal=I;this.abortCallback=d};Object.defineProperty(g,"__esModule",{value:!0})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(g,e,aa,ba,u,K,A,n){aa=function(t){function w(){var H=t.apply(this,arguments)||this;H.SCHEDULER_LOG_SLOW_TASKS=!1;H.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return H}g._inheritsLoose(w,t);return w}(aa);e.__decorate([ba.property()],aa.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);e.__decorate([ba.property()],aa.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);aa=e.__decorate([n.subclass("esri.views.support.DebugFlags")],aa);return new aa})},"esri/layers/graphics/sources/geojson/geojson":function(){define(["exports",
"../../../../core/Error","../../OptimizedFeature","../../OptimizedGeometry","../../../support/fieldUtils"],function(g,e,aa,ba,u){function*K(M){switch(M.type){case "Feature":yield M;break;case "FeatureCollection":for(const v of M.features)v&&(yield v)}}function*A(M){if(!M)return null;switch(M.type){case "Point":yield M.coordinates;break;case "LineString":case "MultiPoint":yield*M.coordinates;break;case "MultiLineString":case "Polygon":for(const v of M.coordinates)yield*v;break;case "MultiPolygon":for(const v of M.coordinates)for(const C of v)yield*C}}
function*n(M,v={}){const {geometryType:C,objectIdField:y}=v;for(const z of M){var q;const {geometry:D,properties:Y,id:B}=z;if(D&&N[D.type]!==C)continue;M=Y||{};let F=null!=(q=M[y])?q:null;y&&null!=B&&!M[y]&&(M[y]=F=B);yield new aa.OptimizedFeature(D?S(new ba,D,v):null,M,null,F)}}function t(M){for(const v of M)if(2<v.length)return!0;return!1}function w(M){let v=0;for(let C=0;C<M.length;C++){const y=M[C],q=M[(C+1)%M.length];v+=y[0]*q[1]-q[0]*y[1]}return 0>=v}function H(M){const v=M[0],C=M[M.length-
1];v[0]===C[0]&&v[1]===C[1]&&v[2]===C[2]||M.push(v);return M}function S(M,v,C){switch(v.type){case "LineString":return I(M,v.coordinates,C),M;case "MultiLineString":for(const q of v.coordinates)I(M,q,C);return M;case "MultiPoint":return I(M,v.coordinates,C),M;case "MultiPolygon":for(var y of v.coordinates)for(R(M,y[0],C),v=1;v<y.length;v++)h(M,y[v],C);return M;case "Point":return l(M,v.coordinates,C),M;case "Polygon":y=v.coordinates;R(M,y[0],C);for(v=1;v<y.length;v++)h(M,y[v],C);return M}}function R(M,
v,C){v=H(v);w(v)?I(M,v,C):d(M,v,C)}function h(M,v,C){v=H(v);w(v)?d(M,v,C):I(M,v,C)}function I(M,v,C){for(const y of v)l(M,y,C);M.lengths.push(v.length)}function d(M,v,C){for(let y=v.length-1;0<=y;y--)l(M,v[y],C);M.lengths.push(v.length)}function l(M,v,C){const [y,q,z]=v;M.coords.push(y,q);C.hasZ&&M.coords.push(z||0)}const N={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};
g.createOptimizedFeatures=function(M,v){return Array.from(n(K(M),v))};g.getGeometryType=function(M){return N[M]};g.inferLayerProperties=function(M,v={}){const C=[];var y=new Set;const q=new Set;var z=!1;let D=null,Y=!1,B=void 0;({geometryType:v=null}=v);var F=!1;for(const P of K(M)){const {geometry:W,properties:G,id:r}=P;if(W&&(v||(v=N[W.type]),N[W.type]!==v))continue;z||(z=A(W),z=t(z));!Y&&(Y=null!=r)&&(B=typeof r,D=Object.keys(G).filter(a=>G[a]===r));Y&&null!=r&&(1<D.length?D=D.filter(a=>G[a]===
r):1===D.length&&(D=G[D[0]]===r?D:[]));if(!F&&G){M=!0;for(const a in G)if(!y.has(a))if(F=G[a],null==F)M=!1,q.add(a);else{a:switch(typeof F){case "string":F="esriFieldTypeString";break a;case "number":F="esriFieldTypeDouble";break a;default:F="unknown"}"unknown"===F?q.add(a):(q.delete(a),y.add(a),C.push({name:a,alias:a,type:F}))}F=M}}if(y=D&&1===D.length&&D[0]||null)for(const P of C)if(P.name===y&&u.isNumericField(P)){P.type="esriFieldTypeOID";break}return{fields:C,geometryType:v,hasZ:z,objectIdFieldName:y,
objectIdFieldType:B,unknownFields:Array.from(q)}};g.validateGeoJSON=function(M){if(!M)throw new e("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==M.type&&"FeatureCollection"!==M.type)throw new e("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:M});({crs:M}=M);if(M){var v="string"===typeof M?M:"name"===M.type?M.properties.name:"EPSG"===M.type?M.properties.code:null,C=/.*(CRS84H?|4326)$/i;if(!v||!C.test(v))throw new e("geojson-layer:unsupported-crs",
"unsupported GeoJSON 'crs' member",{crs:M});}};Object.defineProperty(g,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(g,e,aa,ba,u){const K=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let A=1;g.createCapabilities=function(n,t){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:n},
metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0},query:ba.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,
supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}};g.createDefaultAttributesFunction=function(n,t){if(e("esri-csp-restrictions"))return()=>({[t]:null,...n});try{let w=`this.${t} = null;`;for(const S in n){const R=K.test(S)?`.${S}`:`["${S}"]`;w+=`this${R} = ${JSON.stringify(n[S])};`}const H=(new Function(`\n      return class AttributesClass$${A++} {\n        constructor() {\n          ${w};\n        }\n      }\n    `))();
return()=>new H}catch(w){return()=>({[t]:null,...n})}};g.createDefaultTemplate=function(n={}){return[{name:"New Feature",description:"",prototype:{attributes:aa.clone(n)}}]};g.createDrawingInfo=function(n){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===n||"esriGeometryMultipoint"===n?u.defaultPointSymbolJSON:"esriGeometryPolyline"===n?u.defaultPolylineSymbolJSON:u.defaultPolygonSymbolJSON}}};Object.defineProperty(g,"__esModule",{value:!0})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],
function(g){const e=[252,146,31,255],aa={type:"esriSMS",style:"esriSMSCircle",size:6,color:e,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},ba={type:"esriSLS",style:"esriSLSSolid",width:.75,color:e};g.defaultColor=e;g.defaultOutlineColor=[153,153,153,255];g.defaultPointSymbolJSON=aa;g.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};g.defaultPolylineSymbolJSON=
ba;g.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};g.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};g.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};g.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",
color:[0,0,0,255],width:1.5};Object.defineProperty(g,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define(["require","exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../geometry/support/spatialReferenceUtils","../../../support/fieldUtils"],function(g,e,aa,ba,u){function K(I){return new H(I)}function A(){return n.apply(this,arguments)}function n(){n=aa._asyncToGenerator(function*(){return h?h:h=yield new Promise((I,d)=>g(["../../../../geometry/geometryEngineJSON"],
I,d))});return n.apply(this,arguments)}function t(){t=aa._asyncToGenerator(function*(I,d){!ba.isValid(I)||"esriGeometryPolygon"!==d&&"esriGeometryPolyline"!==d||(yield A())});return t.apply(this,arguments)}let w=function(){this.description=this.code=null},H=function(I){this.error=new w;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=I},S=function(I){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=I};const R=new Set;let h;e.createFeatureEditErrorResult=
K;e.createFeatureEditSuccessResult=function(I){return new S(I)};e.loadGeometryEngine=A;e.loadGeometryEngineForSimplify=function(I,d){return t.apply(this,arguments)};e.mixAttributes=function(I,d,l,N=!1,M){R.clear();for(const q in l){const z=I.get(q);if(z){var v=l[q];{var C=z;var y=v;let D=y;"string"===typeof y&&u.isNumericField(C)?D=parseFloat(y):null!=y&&u.isStringField(C)&&"string"!==typeof y&&(D=String(y));C=u.sanitizeNullFieldValue(D)}C!==v&&M&&M.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",
details:{field:z,originalValue:v,sanitizedValue:C}});R.add(z.name);if(z&&(N||z.editable)){if(v=u.validateFieldValue(z,C))return K(u.validationErrorToString(v,z,C));d[z.name]=C}}}for(const q of I.requiredFields)if(!R.has(q.name))return K(`missing required field "${q.name}"`);return null};e.simplify=function(I,d){if(!I||!ba.isValid(d))return I;if("rings"in I||"paths"in I){if(!h)throw new TypeError("geometry engine not loaded");return h.simplify(d,I)}return I};Object.defineProperty(e,"__esModule",{value:!0})})},
"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(g,e){e=new e.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});
g.kebabDict=e;Object.defineProperty(g,"__esModule",{value:!0})})},"*noref":1}});
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../request ../../../../core/Error ../../../../core/Logger ../../../../core/maybe ../../../../core/promiseUtils ../../../../geometry/support/jsonUtils ../../../../geometry/support/spatialReferenceUtils ../../featureConversionUtils ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ./geojson ../support/clientSideDefaults ../support/sourceUtils ../../../support/FieldsIndex ../../../support/fieldType ../../../support/fieldUtils".split(" "),function(g,
e,aa,ba,u,K,A,n,t,w,H,S,R,h,I,d,l,N){const M={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,
supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};return function(){function v(){var y=this;this._queryEngine=null;this._snapshotFeatures=function(){var q=g._asyncToGenerator(function*(z){z=yield y._fetch(z);return y._createFeatures(z)});return function(z){return q.apply(this,arguments)}}()}var C=v.prototype;C.destroy=function(){var y;null==(y=this._queryEngine)?void 0:y.destroy();this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=
null};C.load=function(){var y=g._asyncToGenerator(function*(q,z={}){this.loadOptions={url:q.url,customParameters:q.customParameters};var D=[];yield this._checkProjection(q.spatialReference);var Y=null;q.url&&(Y=yield this._fetch(null==z?void 0:z.signal));var B=R.inferLayerProperties(Y,{geometryType:q.geometryType});z=q.fields||B.fields||[];const F=null!=q.hasZ?q.hasZ:B.hasZ,P=B.geometryType,W=q.objectIdField||B.objectIdFieldName||"__OBJECTID",G=q.spatialReference||n.WGS84;q=q.timeInfo;z===B.fields&&
0<B.unknownFields.length&&D.push({name:"geojson-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:B.unknownFields}});let r=z.find(k=>k.name===W);r?("esriFieldTypeString"!==r.type&&(r.type="esriFieldTypeOID"),r.editable=!1,r.nullable=!1):(r={alias:W,name:W,type:"string"===B.objectIdFieldType?"esriFieldTypeString":"esriFieldTypeOID",editable:!1,nullable:!1},z.unshift(r));B={};for(var a of z){null==a.name&&(a.name=a.alias);
null==a.alias&&(a.alias=a.name);if(!a.name)throw new aa("geojson-layer:invalid-field-name","field name is missing",{field:a});if(!l.kebabDict.jsonValues.includes(a.type))throw new aa("geojson-layer:invalid-field-type",`invalid type for field "${a.name}"`,{field:a});if(a.name!==r.name){const k=N.getFieldDefaultValue(a);void 0!==k&&(B[a.name]=k)}}this._fieldsIndex=new d(z);a=this._fieldsIndex.requiredFields.indexOf(r);-1<a&&this._fieldsIndex.requiredFields.splice(a,1);q&&(q.startTimeField&&((a=this._fieldsIndex.get(q.startTimeField))?
(q.startTimeField=a.name,a.type="esriFieldTypeDate"):q.startTimeField=null),q.endTimeField&&((a=this._fieldsIndex.get(q.endTimeField))?(q.endTimeField=a.name,a.type="esriFieldTypeDate"):q.endTimeField=null),q.trackIdField&&((a=this._fieldsIndex.get(q.trackIdField))?q.trackIdField=a.name:(q.trackIdField=null,D.push({name:"geojson-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:q}}))),q.startTimeField||q.endTimeField||(D.push({name:"geojson-layer:invalid-timeInfo",
message:"startTimeField and endTimeField are missing",details:{timeInfo:q}}),q=null));a=P?h.createDrawingInfo(P):null;D={warnings:D,featureErrors:[],layerDefinition:{...M,drawingInfo:a,templates:h.createDefaultTemplate(B),extent:null,geometryType:P,objectIdField:W,fields:z,hasZ:!!F,timeInfo:q}};this._queryEngine=new S.default({fields:z,geometryType:P,hasM:!1,hasZ:F,objectIdField:W,spatialReference:G,timeInfo:q,featureStore:new w({geometryType:P,hasM:!1,hasZ:F}),cacheSpatialQueries:!0});this._createDefaultAttributes=
h.createDefaultAttributesFunction(B,W);Y=yield this._createFeatures(Y);this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,Y);Y=this._normalizeFeatures(Y,D.warnings,D.featureErrors);this._queryEngine.featureStore.addMany(Y);D.layerDefinition.extent=this._queryEngine.fullExtent;if(D.layerDefinition.timeInfo){const {start:k,end:O}=this._queryEngine.timeExtent;D.layerDefinition.timeInfo.timeExtent=[k,O]}return D});return function(q){return y.apply(this,arguments)}}();C.applyEdits=
function(){var y=g._asyncToGenerator(function*(q){const {spatialReference:z,geometryType:D}=this._queryEngine;yield Promise.all([I.loadGeometryEngineForSimplify(z,D),H.checkProjectionSupport(q.adds,z),H.checkProjectionSupport(q.updates,z)]);yield this._waitSnapshotComplete();return this._applyEdits(q)});return function(q){return y.apply(this,arguments)}}();C.queryFeatures=function(){var y=g._asyncToGenerator(function*(q={},z={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQuery(q,
z.signal)});return function(){return y.apply(this,arguments)}}();C.queryFeatureCount=function(){var y=g._asyncToGenerator(function*(q={},z={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(q,z.signal)});return function(){return y.apply(this,arguments)}}();C.queryObjectIds=function(){var y=g._asyncToGenerator(function*(q={},z={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForIds(q,z.signal)});return function(){return y.apply(this,arguments)}}();
C.queryExtent=function(){var y=g._asyncToGenerator(function*(q={},z={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(q,z.signal)});return function(){return y.apply(this,arguments)}}();C.querySnapping=function(){var y=g._asyncToGenerator(function*(q,z={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForSnapping(q,z.signal)});return function(q){return y.apply(this,arguments)}}();C.refresh=function(){var y=g._asyncToGenerator(function*(q){var z;
this.loadOptions.customParameters=q;null==(z=this._snapshotTask)?void 0:z.abort();this._snapshotTask=K.createTask(this._snapshotFeatures);this._snapshotTask.promise.then(D=>{this._queryEngine.featureStore.clear();this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,D);(D=this._normalizeFeatures(D))&&this._queryEngine.featureStore.addMany(D)},D=>{this._queryEngine.featureStore.clear();K.isAbortError(D)||ba.getLogger("esri.layers.GeoJSONLayer").error(new aa("geojson-layer:refresh",
"An error occurred during refresh",{error:D}))});yield this._waitSnapshotComplete();return{extent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent}});return function(q){return y.apply(this,arguments)}}();C._createFeatures=function(){var y=g._asyncToGenerator(function*(q){const {geometryType:z,hasZ:D,objectIdField:Y}=this._queryEngine;q=R.createOptimizedFeatures(q,{geometryType:z,hasZ:D,objectIdField:Y});if(!n.equals(this._queryEngine.spatialReference,n.WGS84))for(const B of q)u.isSome(B.geometry)&&
(B.geometry=t.convertFromGeometry(H.project(t.convertToGeometry(B.geometry,this._queryEngine.geometryType,this._queryEngine.hasZ,!1),n.WGS84,this._queryEngine.spatialReference)));return q});return function(q){return y.apply(this,arguments)}}();C._waitSnapshotComplete=function(){var y=g._asyncToGenerator(function*(){if(this._snapshotTask&&!this._snapshotTask.finished){try{yield this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}});return function(){return y.apply(this,arguments)}}();
C._fetch=function(){var y=g._asyncToGenerator(function*(q){const {url:z,customParameters:D}=this.loadOptions;q=(yield e(z,{responseType:"json",query:{...D},signal:q})).data;yield R.validateGeoJSON(q);return q});return function(q){return y.apply(this,arguments)}}();C._normalizeFeatures=function(y,q,z){const {objectIdField:D}=this._queryEngine,Y=[];for(const B of y){y=this._createDefaultAttributes();const F=I.mixAttributes(this._fieldsIndex,y,B.attributes,!0,q);F?null==z?void 0:z.push(F):(this._assignObjectId(y,
B.attributes,!0),B.attributes=y,B.objectId=y[D],Y.push(B))}return Y};C._applyEdits=function(y){const {adds:q,updates:z,deletes:D}=y;y={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};q&&q.length&&this._applyAddEdits(y,q);z&&z.length&&this._applyUpdateEdits(y,z);if(D&&D.length){for(const Y of D)y.deleteResults.push(I.createFeatureEditSuccessResult(Y));this._queryEngine.featureStore.removeManyById(D)}return{extent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent,
featureEditResults:y}};C._applyAddEdits=function(y,q){const {addResults:z}=y,{geometryType:D,hasM:Y,hasZ:B,objectIdField:F,spatialReference:P,featureStore:W}=this._queryEngine,G=[];for(const r of q){if(r.geometry&&D!==A.getJsonType(r.geometry)){z.push(I.createFeatureEditErrorResult("Incorrect geometry type."));continue}q=this._createDefaultAttributes();const a=I.mixAttributes(this._fieldsIndex,q,r.attributes);a?z.push(a):(this._assignObjectId(q,r.attributes),r.attributes=q,null!=r.uid&&(y.uidToObjectId[r.uid]=
r.attributes[F]),u.isSome(r.geometry)&&(r.geometry=H.project(I.simplify(r.geometry,P),r.geometry.spatialReference,P)),G.push(r),z.push(I.createFeatureEditSuccessResult(r.attributes[F])))}W.addMany(t.convertFromFeatures([],G,D,B,Y,F))};C._applyUpdateEdits=function({updateResults:y},q){const {geometryType:z,hasM:D,hasZ:Y,objectIdField:B,spatialReference:F,featureStore:P}=this._queryEngine;for(const W of q){const {attributes:G,geometry:r}=W;q=G&&G[B];if(null==q){y.push(I.createFeatureEditErrorResult(`Identifier field ${B} missing`));
continue}if(!P.has(q)){y.push(I.createFeatureEditErrorResult(`Feature with object id ${q} missing`));continue}const a=t.convertToFeature(P.getFeature(q),z,Y,D);if(u.isSome(r)){if(z!==A.getJsonType(r)){y.push(I.createFeatureEditErrorResult("Incorrect geometry type."));continue}a.geometry=H.project(I.simplify(r,F),r.spatialReference,F)}if(G){const k=I.mixAttributes(this._fieldsIndex,a.attributes,G);if(k){y.push(k);continue}}P.add(t.convertFromFeature(a,z,Y,D,B));y.push(I.createFeatureEditSuccessResult(q))}};
C._createObjectIdGenerator=function(y,q){const z=y.fieldsIndex.get(y.objectIdField);if("esriFieldTypeString"===z.type)return()=>z.name+"-"+Date.now().toString(16);let D=Number.NEGATIVE_INFINITY;for(const Y of q)Y.objectId&&(D=Math.max(D,Y.objectId));D=Math.max(0,D)+1;return()=>D++};C._assignObjectId=function(y,q,z=!1){const D=this._queryEngine.objectIdField;y[D]=z&&D in q?q[D]:this._objectIdGenerator()};C._checkProjection=function(){var y=g._asyncToGenerator(function*(q){try{yield H.checkProjectionSupport(n.WGS84,
q)}catch{throw new aa("geojson-layer","Projection not supported");}});return function(q){return y.apply(this,arguments)}}();return v}()});