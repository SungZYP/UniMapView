// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(k,e,Z,aa,t,H,y,p){function r(m,G){return m?G?4:3:G?3:2}function u(m,G,S,T){if(m){if(S)return G&&T?c:Oa;if(G&&T)return Sa}else if(G&&T)return Oa;return Ta}function E({scale:m,translate:G},S){return Math.round((S-G[0])/m[0])}function Q({scale:m,translate:G},
S){return Math.round((G[1]-S)/m[1])}function R({scale:m,translate:G},S){return S*m[0]+G[0]}function h({scale:m,translate:G},S){return G[1]-S*m[1]}function K(m){m=m.coords;return{x:m[0],y:m[1]}}function d(m,G){m.coords[0]=G.x;m.coords[1]=G.y;return m}function l(m){m=m.coords;return{x:m[0],y:m[1],z:m[2]}}function N(m,G){m.coords[0]=G.x;m.coords[1]=G.y;m.coords[2]=G.z;return m}function ca(m){m=m.coords;return{x:m[0],y:m[1],m:m[2]}}function z(m,G){m.coords[0]=G.x;m.coords[1]=G.y;m.coords[2]=G.m;return m}
function L(m){m=m.coords;return{x:m[0],y:m[1],z:m[2],m:m[3]}}function F(m,G){m.coords[0]=G.x;m.coords[1]=G.y;m.coords[2]=G.z;m.coords[3]=G.m;return m}function x(m,G){return m&&G?F:m?N:G?z:d}function w(m,G,S,T,ia){S=x(S,T);for(const ea of G){const {geometry:J,attributes:P}=ea;let da;J&&(da=S(new p,J));m.push(new H.OptimizedFeature(da,P,null,P[ia]))}return m}function I(m,G,S,T){for(const ia of G){const {geometry:ea,attributes:J}=ia;let P;ea&&(P=X(ea,S,T));m.push({attributes:J,geometry:P})}return m}
function X(m,G,S){if(aa.isNone(m))return null;const T=r(G,S),ia=[];for(let ea=0;ea<m.coords.length;ea+=T){const J=[];for(let P=0;P<T;P++)J.push(m.coords[ea+P]);ia.push(J)}return G?S?{points:ia,hasZ:G,hasM:S}:{points:ia,hasZ:G}:S?{points:ia,hasM:S}:{points:ia}}function A(m,G,S,T,ia){S=r(S,T);for(const ea of G){G=ea.geometry;T=ea.attributes;let J;G&&(J=C(new p,G,S));m.push(new H.OptimizedFeature(J,T,null,T[ia]))}return m}function C(m,G,S=r(G.hasZ,G.hasM)){m.lengths[0]=G.points.length;const T=m.coords;
let ia=0;for(const ea of G.points)for(G=0;G<S;G++)T[ia++]=ea[G];return m}function O(m,G,S){if(!m)return null;const T=r(G,S),{coords:ia,lengths:ea}=m;m=[];let J=0;for(const P of ea){const da=[];for(let qa=0;qa<P;qa++){const ra=[];for(let wa=0;wa<T;wa++)ra.push(ia[J++]);da.push(ra)}m.push(da)}return G?S?{paths:m,hasZ:G,hasM:S}:{paths:m,hasZ:G}:S?{paths:m,hasM:S}:{paths:m}}function W(m,G,S,T,ia){S=r(S,T);for(const ea of G){G=ea.geometry;T=ea.attributes;let J;G&&(J=D(new p,G,S));m.push(new H.OptimizedFeature(J,
T,null,T[ia]))}return m}function D(m,G,S=r(G.hasZ,G.hasM)){const {lengths:T,coords:ia}=m;let ea=0;for(const J of G.paths){for(const P of J)for(G=0;G<S;G++)ia[ea++]=P[G];T.push(J.length)}return m}function q(m,G,S){if(!m)return null;const T=r(G,S),{coords:ia,lengths:ea}=m;m=[];let J=0;for(const P of ea){const da=[];for(let qa=0;qa<P;qa++){const ra=[];for(let wa=0;wa<T;wa++)ra.push(ia[J++]);da.push(ra)}m.push(da)}return G?S?{rings:m,hasZ:G,hasM:S}:{rings:m,hasZ:G}:S?{rings:m,hasM:S}:{rings:m}}function a(m,
G,S,T,ia){for(const ea of G){G=ea.geometry;const J=ea.centroid,P=ea.attributes;let da;G&&(da=g(new p,G,S,T));aa.isSome(J)?m.push(new H.OptimizedFeature(da,P,d(new p,J),P[ia])):m.push(new H.OptimizedFeature(da,P,null,P[ia]))}return m}function g(m,G,S=G.hasZ,T=G.hasM){M(m,G.rings,S,T);return m}function M(m,G,S,T){S=r(S,T);const {lengths:ia,coords:ea}=m;T=0;ia.length=ea.length=0;for(const J of G){for(const P of J)for(G=0;G<S;G++)ea[T++]=P[G];ia.push(J.length)}return m}function U(m,G,S,T,ia,ea){m.length=
0;if(!S){for(const J of G)m.push(new H.OptimizedFeature(null,J.attributes,null,J.attributes[ea]));return m}switch(S){case "esriGeometryPoint":return w(m,G,T,ia,ea);case "esriGeometryMultipoint":return A(m,G,T,ia,ea);case "esriGeometryPolyline":return W(m,G,T,ia,ea);case "esriGeometryPolygon":return a(m,G,T,ia,ea);default:Ba.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${S}'`)),m.length=0}return m}function ha(m,G,S,T){m=m&&("coords"in m?m:m.geometry);if(aa.isNone(m))return null;
switch(G){case "esriGeometryPoint":return G=K,S&&T?G=L:S?G=l:T&&(G=ca),G(m);case "esriGeometryMultipoint":return X(m,S,T);case "esriGeometryPolyline":return O(m,S,T);case "esriGeometryPolygon":return q(m,S,T);default:Ba.error("convertToGeometry:unknown-geometry",new e(`Unable to parse unknown geometry type '${G}'`))}}function oa(m,G,S,T,ia){m.length=0;if(aa.isNone(S)){for(const P of G)m.push({attributes:P.attributes});return m}switch(S){case "esriGeometryPoint":var ea=K;T&&ia?ea=L:T?ea=l:ia&&(ea=
ca);for(var J of G){const {geometry:P,attributes:da}=J;T=aa.isSome(P)?ea(P):null;m.push({attributes:da,geometry:T})}break;case "esriGeometryMultipoint":return I(m,G,T,ia);case "esriGeometryPolyline":for(const P of G){const {geometry:da,attributes:qa}=P;let ra;aa.isSome(da)&&(ra=O(da,T,ia));m.push({attributes:qa,geometry:ra})}break;case "esriGeometryPolygon":for(ea of G){const {geometry:P,attributes:da,centroid:qa}=ea;let ra;aa.isSome(P)&&(ra=q(P,T,ia));aa.isSome(qa)?(J=K(qa),m.push({attributes:da,
centroid:J,geometry:ra})):m.push({attributes:da,geometry:ra})}break;default:Ba.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${S}'`))}return m}function ma(m,G,S,T,ia,ea,J=S,P=T){m.lengths.length&&(m.lengths.length=0);m.coords.length&&(m.coords.length=0);if(aa.isNone(G)||!G.coords.length)return null;ia=Ka[ia];const {coords:da,lengths:qa}=G;G=r(S,T);const ra=r(S&&J,T&&P);S=u(S,T,J,P);if(!qa.length)return S(m.coords,da,0,0,E(ea,da[0]),Q(ea,da[1])),m.lengths.length&&
(m.lengths.length=0),m.coords.length=G,m;let wa,ya=0,Aa,Ha=0;for(const Ga of qa){if(Ga<ia)continue;let Ea=0;Aa=Ha;P=T=E(ea,da[ya]);wa=J=Q(ea,da[ya+1]);S(m.coords,da,Aa,ya,P,wa);Ea++;ya+=G;Aa+=ra;for(let Da=1;Da<Ga;Da++,ya+=G)if(P=E(ea,da[ya]),wa=Q(ea,da[ya+1]),P!==T||wa!==J)S(m.coords,da,Aa,ya,P-T,wa-J),Aa+=ra,Ea++,T=P,J=wa;Ea>=ia&&(m.lengths.push(Ea),Ha=Aa)}m.coords.length=Ha;return m.coords.length?m:null}function la(m,G,S,T,ia,ea,J){let P=T,da=0;for(let ra=ea+S;ra<J;ra+=S){{var qa=G[ra];const wa=
G[ra+1],ya=G[J],Aa=G[J+1];let Ha=G[ea],Ga=G[ea+1],Ea=ya-Ha,Da=Aa-Ga;if(0!==Ea||0!==Da){const Fa=((qa-Ha)*Ea+(wa-Ga)*Da)/(Ea*Ea+Da*Da);1<Fa?(Ha=ya,Ga=Aa):0<Fa&&(Ha+=Ea*Fa,Ga+=Da*Fa)}Ea=qa-Ha;Da=wa-Ga;qa=Ea*Ea+Da*Da}qa>P&&(da=ra,P=qa)}P>T&&(da-ea>S&&la(m,G,S,T,ia,ea,da),ia(m,G,m.length,da,G[da],G[da+1]),J-da>S&&la(m,G,S,T,ia,da,J))}function pa(m,G,S,T,ia){const {coords:ea,lengths:J}=G,P=S?T?c:Oa:T?Oa:Ta;S=r(S,T);if(!ea.length)return m!==G&&(m.lengths.length=0,m.coords.length=0),m;if(!J.length)return P(m.coords,
ea,0,0,R(ia,ea[0]),h(ia,ea[1])),m!==G&&(m.lengths.length=0,m.coords.length=S),m;const [da,qa]=ia.scale;T=0;for(let ra=0;ra<J.length;ra++){const wa=J[ra];m.lengths[ra]=wa;let ya=R(ia,ea[T]),Aa=h(ia,ea[T+1]);P(m.coords,ea,T,T,ya,Aa);T+=S;for(let Ha=1;Ha<wa;Ha++,T+=S)ya+=ea[T]*da,Aa-=ea[T+1]*qa,P(m.coords,ea,T,T,ya,Aa)}m!==G&&(m.lengths.length=J.length,m.coords.length=ea.length);return m}function va(m,G,S,T){let ia=0,ea=m[T*G],J=m[T*(G+1)];for(let P=1;P<S;P++){const da=ea+m[T*(G+P)],qa=J+m[T*(G+P)+1],
ra=(da-ea)*(qa+J);ea=da;J=qa;ia+=ra}return.5*ia}const Ba=Z.getLogger("esri.layers.graphics.featureConversionUtils"),Ka={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Ta=(m,G,S,T,ia,ea)=>{m[S]=ia;m[S+1]=ea},Oa=(m,G,S,T,ia,ea)=>{m[S]=ia;m[S+1]=ea;m[S+2]=G[T+2]},Sa=(m,G,S,T,ia,ea)=>{m[S]=ia;m[S+1]=ea;m[S+2]=G[T+3]},c=(m,G,S,T,ia,ea)=>{m[S]=ia;m[S+1]=ea;m[S+2]=G[T+2];m[S+3]=G[T+3]},n=[],fa=[];k.convertFromFeature=function(m,G,S,T,ia){n[0]=m;[m]=U(fa,n,G,S,
T,ia);n.length=fa.length=0;return m};k.convertFromFeatureSet=function(m,G){const S=new y,{hasM:T,hasZ:ia,features:ea,objectIdFieldName:J,spatialReference:P,geometryType:da,exceededTransferLimit:qa,transform:ra,fields:wa}=m;wa&&(S.fields=wa);S.geometryType=da;S.objectIdFieldName=J||G;S.spatialReference=P;if(!S.objectIdFieldName)return Ba.error(new e("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),S;ea&&U(S.features,ea,da,ia,T,S.objectIdFieldName);qa&&(S.exceededTransferLimit=
qa);T&&(S.hasM=T);ia&&(S.hasZ=ia);ra&&(S.transform=ra);return S};k.convertFromFeatures=U;k.convertFromGeometry=function(m,G,S){if(aa.isNone(m))return null;const T=new p;"hasZ"in m&&null==G&&(G=m.hasZ);"hasM"in m&&null==S&&(S=m.hasM);if(t.isPoint(m))return x(null!=G?G:null!=m.z,null!=S?S:null!=m.m)(T,m);if(t.isPolygon(m))return g(T,m,G,S);if(t.isPolyline(m))return D(T,m,r(G,S));if(t.isMultipoint(m))return C(T,m,r(G,S));Ba.error("convertFromGeometry:unknown-geometry",new e(`Unable to parse unknown geometry type '${m}'`))};
k.convertFromGraphics=function(m,G,S,T,ia,ea){const J=m.length;switch(S){case "esriGeometryPoint":w(m,G,T,ia,ea);break;case "esriGeometryMultipoint":A(m,G,T,ia,ea);break;case "esriGeometryPolyline":W(m,G,T,ia,ea);break;case "esriGeometryPolygon":a(m,G,T,ia,ea);break;default:Ba.error("convertToFeatureSet:unknown-geometry",new e(`Unable to parse unknown geometry type '${S}'`))}for(T=0;T<G.length;T++)m[T+J].geometryType=S,m[T+J].insertAfter=G[T].insertAfter,m[T+J].groupId=G[T].groupId;return m};k.convertFromMultipoint=
C;k.convertFromMultipointFeatures=A;k.convertFromNestedArray=M;k.convertFromPoint=function(m,G,S=x(null!=G.z,null!=G.m)){return S(m,G)};k.convertFromPointFeatures=w;k.convertFromPolygon=g;k.convertFromPolyline=D;k.convertFromPolylineFeatures=W;k.convertToFeature=function(m,G,S,T){fa[0]=m;oa(n,fa,G,S,T);m=n[0];n.length=fa.length=0;return m};k.convertToFeatureSet=function(m){const {objectIdFieldName:G,spatialReference:S,transform:T,fields:ia,hasM:ea,hasZ:J,features:P,geometryType:da,exceededTransferLimit:qa,
uniqueIdField:ra,queryGeometry:wa,queryGeometryType:ya}=m;m=oa([],P,da,J,ea);const Aa=ha(wa,ya,!1,!1);m={features:m,fields:ia,geometryType:da,objectIdFieldName:G,spatialReference:S,uniqueIdField:ra,queryGeometry:Aa};T&&(m.transform=T);qa&&(m.exceededTransferLimit=qa);ea&&(m.hasM=ea);J&&(m.hasZ=J);return m};k.convertToFeatures=oa;k.convertToGeometry=ha;k.convertToMultipoint=X;k.convertToMultipointFeatures=I;k.convertToPoint=function(m,G,S){return m?G?S?L(m):l(m):S?ca(m):K(m):null};k.convertToPolygon=
q;k.convertToPolyline=O;k.deltaDecodeGeometry=function(m,G){if(aa.isNone(m))return null;const S=m.clone(),T=m.coords;m=m.lengths;let ia=0;for(let P=0;P<m.length;P++){const da=m[P];var ea=T[G*ia],J=T[G*ia+1];for(let qa=1;qa<da;qa++)ea+=T[G*(ia+qa)],J+=T[G*(ia+qa)+1],S.coords[G*(ia+qa)]=ea,S.coords[G*(ia+qa)+1]=J;ia+=da}return S};k.deltaEncodeGeometry=function(m,G){const S=m.clone(),T=m.coords;m=m.lengths;let ia=0;for(let J=0;J<m.length;J++){const P=m[J];let da=T[G*ia];var ea=T[G*ia+1];for(let qa=1;qa<
P;qa++){const ra=T[G*(ia+qa)],wa=T[G*(ia+qa)+1];ea=wa-ea;S.coords[G*(ia+qa)]=ra-da;S.coords[G*(ia+qa)+1]=ea;da=ra;ea=wa}ia+=P}return S};k.generalizeOptimizedGeometry=function(m,G,S,T,ia,ea,J=S,P=T){m.lengths.length&&(m.lengths.length=0);m.coords.length&&(m.coords.length=0);if(!G||!G.coords.length)return null;ia=Ka[ia];const {coords:da,lengths:qa}=G;G=r(S,T);const ra=r(S&&J,T&&P);S=u(S,T,J,P);if(!qa.length)return S(m.coords,da,0,0,da[0],da[1]),m.lengths.length&&(m.lengths.length=0),m.coords.length=
G,m;T=0;ea*=ea;for(const wa of qa){if(wa<ia){T+=wa*G;continue}J=m.coords.length/ra;P=T;const ya=T+(wa-1)*G;S(m.coords,da,m.coords.length,P,da[P],da[P+1]);la(m.coords,da,G,ea,S,P,ya);S(m.coords,da,m.coords.length,ya,da[ya],da[ya+1]);P=m.coords.length/ra-J;P>=ia?m.lengths.push(P):m.coords.length=J*ra;T+=wa*G}return m.coords.length?m:null};k.getBoundsOptimizedGeometry=function(m,G,S,T){if(aa.isNone(G)||!G.coords||!G.coords.length)return null;S=r(S,T);let ia=T=Number.POSITIVE_INFINITY,ea=Number.NEGATIVE_INFINITY,
J=Number.NEGATIVE_INFINITY;if(G&&G.coords){G=G.coords;for(let P=0;P<G.length;P+=S){const da=G[P],qa=G[P+1];T=Math.min(T,da);ea=Math.max(ea,da);ia=Math.min(ia,qa);J=Math.max(J,qa)}}m[0]=T;m[1]=ia;m[2]=ea;m[3]=J;return m};k.getQuantizedArea=function(m,G){const {coords:S,lengths:T}=m;let ia=m=0;for(let ea=0;ea<T.length;ea++)ia+=va(S,m,T[ea],G),m+=ea;return Math.abs(ia)};k.getQuantizedBoundsOptimizedGeometry=function(m,G,S,T){S=r(S,T);const {lengths:ia,coords:ea}=G;T=G=Number.POSITIVE_INFINITY;let J=
Number.NEGATIVE_INFINITY,P=Number.NEGATIVE_INFINITY,da=0;for(const qa of ia){let ra=ea[da],wa=ea[da+1];G=Math.min(ra,G);T=Math.min(wa,T);J=Math.max(ra,J);P=Math.max(wa,P);da+=S;for(let ya=1;ya<qa;ya++,da+=S){const Aa=ea[da],Ha=ea[da+1];ra+=Aa;wa+=Ha;0>Aa&&(G=Math.min(G,ra));0<Aa&&(J=Math.max(J,ra));0>Ha?T=Math.min(T,wa):0<Ha&&(P=Math.max(P,wa))}}m[0]=G;m[1]=T;m[2]=J;m[3]=P;return m};k.getSignedQuantizedRingArea=va;k.quantizeOptimizedFeatureSet=function(m,G){const {geometryType:S,features:T,hasM:ia,
hasZ:ea}=G;if(!m)return G;for(let J=0;J<T.length;J++){const P=T[J],da=P.weakClone();da.geometry=new p;ma(da.geometry,P.geometry,ia,ea,S,m);P.centroid&&(da.centroid=new p,ma(da.centroid,P.centroid,ia,ea,"esriGeometryPoint",m));T[J]=da}G.transform=m;return G};k.quantizeOptimizedGeometry=ma;k.quantizeX=E;k.quantizeY=Q;k.removeCollinearVectices=function(m,G,S,T,ia){if(!G||!G.coords||!G.coords.length)return null;S=Ka[S];const {coords:ea,lengths:J}=G;G=u(T,ia,T,ia);T=r(T,ia);let P=ia=0,da=0,qa=0;for(const ya of J){P=
qa;G(m.coords,ea,P,ia,ea[ia],ea[ia+1]);ia+=T;var ra=ea[ia];let Aa=ea[ia+1],Ha=ra,Ga=Aa;var wa=Aa/ra;P+=T;G(m.coords,ea,P,ia,Ha,Ga);ia+=T;for(let Ea=2;Ea<ya;Ea++){ra=ea[ia];Aa=ea[ia+1];const Da=Aa/ra,Fa=wa===Da||!isFinite(wa)&&!isFinite(Da);wa=Fa&&isFinite(Da)?0<=wa&&0<=Da||0>=wa&&0>=Da:0<=Ga&&0<=Aa||0>=Ga&&0>=Aa;Fa&&wa?(Ha+=ra,Ga+=Aa):(Ha=ra,Ga=Aa,P+=T);G(m.coords,ea,P,ia,Ha,Ga);ia+=T;wa=Da}P+=T;ra=(P-qa)/T;ra>=S&&(m.lengths[da]=ra,qa=P,da++)}m.coords.length>qa&&(m.coords.length=qa);m.lengths.length>
da&&(m.lengths.length=da);return m.coords.length&&m.lengths.length?m:null};k.removeZMValues=function(m,G,S,T,ia,ea){const J=r(S,T);S=u(S,T,ia,ea);T=G.coords;m.coords.length=0;m.lengths.length=0;m.lengths.push(...G.lengths);for(G=0;G<T.length;G+=J)S(m.coords,T,m.coords.length,G,T[G],T[G+1]);return m};k.unquantizeOptimizedFeatureSet=function(m){const {transform:G,features:S,hasM:T,hasZ:ia}=m;if(!G)return m;for(const ea of S)aa.isSome(ea.geometry)&&pa(ea.geometry,ea.geometry,T,ia,G),aa.isSome(ea.centroid)&&
pa(ea.centroid,ea.centroid,T,ia,G);m.transform=null;return m};k.unquantizeOptimizedGeometry=pa;k.unquantizeX=R;k.unquantizeY=h;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(k,e,Z){let aa=function(){function H(y=null,p={},r,u){this.geometry=y;this.attributes=p;this.centroid=r;this.objectId=u;this.geohashY=this.geohashX=this.displayId=0}H.prototype.weakClone=
function(){const y=new H(this.geometry,this.attributes,this.centroid,this.objectId);y.displayId=this.displayId;y.geohashX=this.geohashX;y.geohashY=this.geohashY;return y};return H}(),t=function(H){function y(){return H.apply(this,arguments)||this}e._inheritsLoose(y,H);return y}(aa);k.OptimizedFeature=aa;k.OptimizedFeatureWithGeometry=t;k.hasGeometry=function(H){return!(Z.isNone(H.geometry)||!H.geometry.coords||!H.geometry.coords.length)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function k(){this.spatialReference=
this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}k.prototype.weakClone=function(){const e=new k;e.objectIdFieldName=this.objectIdFieldName;e.globalIdFieldName=this.globalIdFieldName;e.geohashFieldName=this.geohashFieldName;e.geometryProperties=this.geometryProperties;
e.geometryType=this.geometryType;e.spatialReference=this.spatialReference;e.hasZ=this.hasZ;e.hasM=this.hasM;e.features=this.features;e.fields=this.fields;e.transform=this.transform;e.exceededTransferLimit=this.exceededTransferLimit;e.uniqueIdField=this.uniqueIdField;e.queryGeometry=this.queryGeometry;e.queryGeometryType=this.queryGeometryType;return e};return k}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(k){return function(){function e(aa=
[],t=[],H=!1){this.lengths=null!=aa?aa:[];this.coords=null!=t?t:[];this.hasIndeterminateRingOrder=H}var Z=e.prototype;Z.forEachVertex=function(aa){let t=0;this.lengths.length||aa(this.coords[0],this.coords[1]);for(let H=0;H<this.lengths.length;H++){const y=this.lengths[H];for(let p=0;p<y;p++)aa(this.coords[2*(p+t)],this.coords[2*(p+t)+1]);t+=y}};Z.clone=function(aa){return aa?(aa.set(this.coords),new e(this.lengths.slice(),aa,this.hasIndeterminateRingOrder)):new e(this.lengths.slice(),this.coords.slice(),
this.hasIndeterminateRingOrder)};k._createClass(e,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((aa,t)=>aa+t)}}]);return e}()})},"esri/layers/graphics/objectIdUtils":function(){define(["exports"],function(k){k.findLastObjectIdFromFeatures=function(e,Z){let aa=0;for(const H of Z){var t;Z=null==(t=H.attributes)?void 0:t[e];"number"===typeof Z&&isFinite(Z)&&(aa=Math.max(aa,
Z))}return aa};k.initialObjectId=1;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),function(k,e,Z,aa,t,H,y,p,r,u){return function(){function E(R){this.geometryInfo=
R;this._boundsStore=new r.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new Z;this.featureAdapter=u.optimizedFeatureQueryEngineAdapter}var Q=E.prototype;Q.add=function(R){this._add(R);this._emitChanged()};Q.addMany=function(R){for(const h of R)this._add(h);this._emitChanged()};Q.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};Q.removeById=function(R){R=this._featuresById.get(R);if(!R)return null;this._remove(R);this._emitChanged();
return R};Q.removeManyById=function(R){this._boundsStore.invalidateIndex();for(const h of R)(R=this._featuresById.get(h))&&this._remove(R);this._emitChanged()};Q.forEachBounds=function(R,h,K){for(const d of R)(R=this._boundsStore.get(d.objectId))&&h(H.fromRect(K,R))};Q.getFeature=function(R){return this._featuresById.get(R)};Q.has=function(R){return this._featuresById.has(R)};Q.forEach=function(R){this._featuresById.forEach(h=>R(h))};Q.forEachInBounds=function(R,h){this._boundsStore.forEachInBounds(R,
K=>{h(this._featuresById.get(K))})};Q.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};Q.sweep=function(){let R=!1;this._featuresById.forEach((h,K)=>{this._markedIds.has(K)||(R=!0,this._remove(h))});this._markedIds.clear();R&&this._emitChanged()};Q._emitChanged=function(){this.events.emit("changed",void 0)};Q._add=function(R){if(R){var h=R.objectId;if(null==h)aa.getLogger("esri.layers.graphics.data.FeatureStore").error(new e("featurestore:invalid-feature",
"feature id is missing",{feature:R}));else{var K=this._featuresById.get(h);this._markedIds.add(h);if(K){R.displayId=K.displayId;var d=this._boundsStore.get(h);this._boundsStore.delete(h)}else if(t.isSome(this.onFeatureAdd))this.onFeatureAdd(R);!t.isNone(R.geometry)&&R.geometry.coords&&R.geometry.coords.length?(d=p.getBoundsOptimizedGeometry(t.isSome(d)?d:y.create(),R.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),t.isSome(d)&&this._boundsStore.set(h,d)):this._boundsStore.set(h,null);this._featuresById.set(h,
R)}}};Q._remove=function(R){if(t.isSome(this.onFeatureRemove))this.onFeatureRemove(R);this._markedIds.delete(R.objectId);this._boundsStore.delete(R.objectId);this._featuresById.delete(R.objectId);return R};k._createClass(E,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",
get:function(){if(!this.numFeatures)return null;const R=y.create(y.NEGATIVE_INFINITY);this._featuresById.forEach(h=>{if(h=this._boundsStore.get(h.objectId))R[0]=Math.min(h[0],R[0]),R[1]=Math.min(h[1],R[1]),R[2]=Math.max(h[2],R[2]),R[3]=Math.max(h[3],R[3])});return R}},{key:"storeStatistics",get:function(){let R=0;this._featuresById.forEach(h=>{t.isSome(h.geometry)&&h.geometry.coords&&(R+=h.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:R/(this.hasZ?this.hasM?4:3:
this.hasM?3:2)}}}]);return E}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(k,e,Z,aa,t){let H=function(){function y(){this._emitter=new y.EventEmitter(this)}var p=y.prototype;p.emit=function(r,u){return this._emitter.emit(r,u)};p.on=function(r,u){return this._emitter.on(r,u)};p.once=function(r,u){return this._emitter.once(r,u)};p.hasEventListener=function(r){return this._emitter.hasEventListener(r)};
return y}();(function(y){let p=function(){function u(Q=null){this.target=Q;this._listenersMap=null}var E=u.prototype;E.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};E.emit=function(Q,R){Q=this._listenersMap&&this._listenersMap.get(Q);if(!Q)return!1;const h=this.target||this;[...Q].forEach(K=>{K.call(h,R)});return 0<Q.length};E.on=function(Q,R){if(Array.isArray(Q)){var h=Q.map(K=>this.on(K,R));return aa.handlesGroup(h)}if(-1<Q.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);h=this._listenersMap.get(Q)||[];h.push(R);this._listenersMap.set(Q,h);return{remove:()=>{const K=this._listenersMap&&this._listenersMap.get(Q)||[],d=K.indexOf(R);0<=d&&K.splice(d,1)}}};E.once=function(Q,R){const h=this.on(Q,K=>{h.remove();R.call(null,K)});return h};E.hasEventListener=function(Q){Q=this._listenersMap&&this._listenersMap.get(Q);return null!=Q&&0<Q.length};return u}();y.EventEmitter=p;y.EventedMixin=u=>{u=function(E){function Q(){var h=
E.apply(this,arguments)||this;h._emitter=new p;return h}k._inheritsLoose(Q,E);var R=Q.prototype;R.destroy=function(){this._emitter.clear()};R.emit=function(h,K){return this._emitter.emit(h,K)};R.on=function(h,K){return this._emitter.on(h,K)};R.once=function(h,K){return this._emitter.once(h,K)};R.hasEventListener=function(h){return this._emitter.hasEventListener(h)};return Q}(u);return u=e.__decorate([t.subclass("esri.core.Evented")],u)};let r=function(u){function E(){var R=u.apply(this,arguments)||
this;R._emitter=new H.EventEmitter(k._assertThisInitialized(R));return R}k._inheritsLoose(E,u);var Q=E.prototype;Q.destroy=function(){this._emitter.clear()};Q.emit=function(R,h){return this._emitter.emit(R,h)};Q.on=function(R,h){return this._emitter.on(R,h)};Q.once=function(R,h){return this._emitter.once(R,h)};Q.hasEventListener=function(R){return this._emitter.hasEventListener(R)};return E}(Z);r=e.__decorate([t.subclass("esri.core.Evented")],r);y.EventedAccessor=r})(H||(H={}));return H})},"esri/geometry/support/aaBoundingBox":function(){define(["exports",
"../../core/maybe","../Extent","./aaBoundingRect"],function(k,e,Z,aa){function t(d=h){return[d[0],d[1],d[2],d[3],d[4],d[5]]}function H(d,l,N,ca,z,L,F=t()){F[0]=d;F[1]=l;F[2]=N;F[3]=ca;F[4]=z;F[5]=L;return F}function y(d){return d[0]>=d[3]?0:d[3]-d[0]}function p(d){return d[1]>=d[4]?0:d[4]-d[1]}function r(d){return d[2]>=d[5]?0:d[5]-d[2]}function u(d,l){return Math.max(l[0],d[0])<=Math.min(l[3],d[3])&&Math.max(l[1],d[1])<=Math.min(l[4],d[4])&&Math.max(l[2],d[2])<=Math.min(l[5],d[5])}function E(d,l){d[0]=
l[0];d[1]=l[1];d[2]=l[2];d[3]=l[3];d[4]=l[4];d[5]=l[5];return d}function Q(d){return 6===d.length}const R=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],h=[0,0,0,0,0,0],K=t();k.NEGATIVE_INFINITY=R;k.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];k.ZERO=h;k.allFinite=function(d){for(let l=0;6>l;l++)if(!isFinite(d[l]))return!1;return!0};k.center=function(d,l=[0,0,0]){l[0]=d[0]+y(d)/2;l[1]=d[1]+p(d)/2;l[2]=d[2]+r(d)/2;return l};k.contains=function(d,l){return l[0]>=
d[0]&&l[1]>=d[1]&&l[2]>=d[2]&&l[3]<=d[3]&&l[4]<=d[4]&&l[5]<=d[5]};k.containsPoint=function(d,l){return l[0]>=d[0]&&l[1]>=d[1]&&l[2]>=d[2]&&l[0]<=d[3]&&l[1]<=d[4]&&l[2]<=d[5]};k.containsPointWithMargin=function(d,l,N){return l[0]>=d[0]-N&&l[1]>=d[1]-N&&l[2]>=d[2]-N&&l[0]<=d[3]+N&&l[1]<=d[4]+N&&l[2]<=d[5]+N};k.create=t;k.depth=p;k.diameter=function(d){const l=y(d),N=r(d);d=p(d);return Math.sqrt(l*l+N*N+d*d)};k.empty=function(d){return d?E(d,R):t(R)};k.equals=function(d,l,N){if(e.isNone(d)||e.isNone(l))return d===
l;if(!Q(d)||!Q(l))return!1;if(N)for(let ca=0;ca<d.length;ca++){if(!N(d[ca],l[ca]))return!1}else for(N=0;N<d.length;N++)if(d[N]!==l[N])return!1;return!0};k.expandWithAABB=function(d,l){d[0]=Math.min(d[0],l[0]);d[1]=Math.min(d[1],l[1]);d[2]=Math.min(d[2],l[2]);d[3]=Math.max(d[3],l[3]);d[4]=Math.max(d[4],l[4]);d[5]=Math.max(d[5],l[5])};k.expandWithBuffer=function(d,l,N=0,ca=l.length/3){let z=d[0],L=d[1],F=d[2],x=d[3],w=d[4],I=d[5];for(let X=0;X<ca;X++)z=Math.min(z,l[N+3*X]),L=Math.min(L,l[N+3*X+1]),
F=Math.min(F,l[N+3*X+2]),x=Math.max(x,l[N+3*X]),w=Math.max(w,l[N+3*X+1]),I=Math.max(I,l[N+3*X+2]);d[0]=z;d[1]=L;d[2]=F;d[3]=x;d[4]=w;d[5]=I};k.expandWithNestedArray=function(d,l,N){const ca=l.length;let z=d[0],L=d[1],F=d[2],x=d[3],w=d[4],I=d[5];if(N)for(N=0;N<ca;N++){var X=l[N];z=Math.min(z,X[0]);L=Math.min(L,X[1]);F=Math.min(F,X[2]);x=Math.max(x,X[0]);w=Math.max(w,X[1]);I=Math.max(I,X[2])}else for(N=0;N<ca;N++)X=l[N],z=Math.min(z,X[0]),L=Math.min(L,X[1]),x=Math.max(x,X[0]),w=Math.max(w,X[1]);d[0]=
z;d[1]=L;d[2]=F;d[3]=x;d[4]=w;d[5]=I};k.expandWithOffset=function(d,l,N,ca){d[0]=Math.min(d[0],d[0]+l);d[3]=Math.max(d[3],d[3]+l);d[1]=Math.min(d[1],d[1]+N);d[4]=Math.max(d[4],d[4]+N);d[2]=Math.min(d[2],d[2]+ca);d[5]=Math.max(d[5],d[5]+ca)};k.expandWithRect=function(d,l){d[0]=Math.min(d[0],l[0]);d[1]=Math.min(d[1],l[1]);d[3]=Math.max(d[3],l[2]);d[4]=Math.max(d[4],l[3])};k.expandWithVec3=function(d,l){d[0]=Math.min(d[0],l[0]);d[1]=Math.min(d[1],l[1]);d[2]=Math.min(d[2],l[2]);d[3]=Math.max(d[3],l[0]);
d[4]=Math.max(d[4],l[1]);d[5]=Math.max(d[5],l[2])};k.fromExtent=function(d,l=t()){l[0]=d.xmin;l[1]=d.ymin;l[2]=d.zmin;l[3]=d.xmax;l[4]=d.ymax;l[5]=d.zmax;return l};k.fromMinMax=function(d,l,N=t()){N[0]=d[0];N[1]=d[1];N[2]=d[2];N[3]=l[0];N[4]=l[1];N[5]=l[2];return N};k.fromRect=function(d,l){d[0]=l[0];d[1]=l[1];d[2]=Number.NEGATIVE_INFINITY;d[3]=l[2];d[4]=l[3];d[5]=Number.POSITIVE_INFINITY;return d};k.fromValues=H;k.getMax=function(d,l){l[0]=d[3];l[1]=d[4];l[2]=d[5];return l};k.getMin=function(d,l){l[0]=
d[0];l[1]=d[1];l[2]=d[2];return l};k.height=r;k.intersects=u;k.intersectsClippingArea=function(d,l){return e.isNone(l)?!0:u(d,l)};k.is=Q;k.isPoint=function(d){return 0===y(d)&&0===p(d)&&0===r(d)};k.maximumDimension=function(d){return Math.max(y(d),r(d),p(d))};k.offset=function(d,l,N,ca,z=d){z[0]=d[0]+l;z[1]=d[1]+N;z[2]=d[2]+ca;z[3]=d[3]+l;z[4]=d[4]+N;z[5]=d[5]+ca;return z};k.scale=function(d,l,N=d){const ca=d[0]+y(d)/2,z=d[1]+p(d)/2,L=d[2]+r(d)/2;N[0]=ca+(d[0]-ca)*l;N[1]=z+(d[1]-z)*l;N[2]=L+(d[2]-
L)*l;N[3]=ca+(d[3]-ca)*l;N[4]=z+(d[4]-z)*l;N[5]=L+(d[5]-L)*l;return N};k.set=E;k.setMax=function(d,l,N=d){N[3]=l[0];N[4]=l[1];N[5]=l[2];N!==d&&(N[0]=d[0],N[1]=d[1],N[2]=d[2]);return d};k.setMin=function(d,l,N=d){N[0]=l[0];N[1]=l[1];N[2]=l[2];N!==d&&(N[3]=d[3],N[4]=d[4],N[5]=d[5]);return N};k.size=function(d,l=[0,0,0]){l[0]=y(d);l[1]=p(d);l[2]=r(d);return l};k.toExtent=function(d,l){return isFinite(d[2])||isFinite(d[5])?new Z({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],zmin:d[2],zmax:d[5],spatialReference:l}):
new Z({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],spatialReference:l})};k.toRect=function(d,l){l||(l=aa.create());l[0]=d[0];l[1]=d[1];l[2]=d[3];l[3]=d[4];return l};k.width=y;k.wrap=function(d,l,N,ca,z,L){return H(d,l,N,ca,z,L,K)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(k,e,Z,aa,t){function H(h=R){return[h[0],h[1],h[2],h[3]]}function y(h,K){h!==
K&&(h[0]=K[0],h[1]=K[1],h[2]=K[2],h[3]=K[3]);return h}function p(h){return aa.isNone(h)||h[0]>=h[2]?0:h[2]-h[0]}function r(h){return h[1]>=h[3]?0:h[3]-h[1]}function u(h,K,d){return K>=h[0]&&d>=h[1]&&K<=h[2]&&d<=h[3]}function E(h){return null!=h&&4===h.length}const Q=[Infinity,Infinity,-Infinity,-Infinity],R=[0,0,0,0];k.NEGATIVE_INFINITY=Q;k.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];k.UNIT=[0,0,1,1];k.ZERO=R;k.allFinite=function(h){for(let K=0;4>K;K++)if(!isFinite(h[K]))return!1;return!0};
k.area=function(h){return p(h)*r(h)};k.center=function(h,K=[0,0]){K[0]=(h[0]+h[2])/2;K[1]=(h[1]+h[3])/2;return K};k.clone=function(h){return[h[0],h[1],h[2],h[3]]};k.contains=function(h,K){return K[0]>=h[0]&&K[2]<=h[2]&&K[1]>=h[1]&&K[3]<=h[3]};k.containsPoint=function(h,K){return u(h,K[0],K[1])};k.containsPointObject=function(h,K){return u(h,K.x,K.y)};k.containsPointWithMargin=function(h,K,d){return K[0]>=h[0]-d&&K[1]>=h[1]-d&&K[0]<=h[2]+d&&K[1]<=h[3]+d};k.containsXY=u;k.copy=y;k.create=H;k.distance=
function(h,K){const d=(h[1]+h[3])/2,l=Math.max(Math.abs(K[0]-(h[0]+h[2])/2)-p(h)/2,0);h=Math.max(Math.abs(K[1]-d)-r(h)/2,0);return Math.sqrt(l*l+h*h)};k.empty=function(h){return h?y(h,Q):H(Q)};k.equals=function(h,K){return E(h)&&E(K)?h[0]===K[0]&&h[1]===K[1]&&h[2]===K[2]&&h[3]===K[3]:h===K};k.expand=function(h,K,d){if(aa.isNone(K))y(d,h);else if("length"in K)if(E(K))d[0]=Math.min(h[0],K[0]),d[1]=Math.min(h[1],K[1]),d[2]=Math.max(h[2],K[2]),d[3]=Math.max(h[3],K[3]);else{if(2===K.length||3===K.length)d[0]=
Math.min(h[0],K[0]),d[1]=Math.min(h[1],K[1]),d[2]=Math.max(h[2],K[0]),d[3]=Math.max(h[3],K[1])}else switch(K.type){case "extent":d[0]=Math.min(h[0],K.xmin);d[1]=Math.min(h[1],K.ymin);d[2]=Math.max(h[2],K.xmax);d[3]=Math.max(h[3],K.ymax);break;case "point":d[0]=Math.min(h[0],K.x),d[1]=Math.min(h[1],K.y),d[2]=Math.max(h[2],K.x),d[3]=Math.max(h[3],K.y)}};k.expandPointInPlace=function(h,K){K[0]<h[0]&&(h[0]=K[0]);K[0]>h[2]&&(h[2]=K[0]);K[1]<h[1]&&(h[1]=K[1]);K[1]>h[3]&&(h[3]=K[1])};k.expandWithNestedArray=
function(h,K,d=h){const l=K.length;let N=h[0],ca=h[1],z=h[2];h=h[3];for(let L=0;L<l;L++){const F=K[L];N=Math.min(N,F[0]);ca=Math.min(ca,F[1]);z=Math.max(z,F[0]);h=Math.max(h,F[1])}d[0]=N;d[1]=ca;d[2]=z;d[3]=h;return d};k.fromExtent=function(h,K=H()){K[0]=h.xmin;K[1]=h.ymin;K[2]=h.xmax;K[3]=h.ymax;return K};k.fromValues=function(h,K,d,l,N=H()){N[0]=h;N[1]=K;N[2]=d;N[3]=l;return N};k.height=r;k.intersection=function(h,K,d){if(aa.isNone(K))return y(d,h);const l=K[0],N=K[1],ca=K[2];K=K[3];d[0]=Z.clamp(h[0],
l,ca);d[1]=Z.clamp(h[1],N,K);d[2]=Z.clamp(h[2],l,ca);d[3]=Z.clamp(h[3],N,K);return d};k.intersects=function(h,K){return Math.max(K[0],h[0])<=Math.min(K[2],h[2])&&Math.max(K[1],h[1])<=Math.min(K[3],h[3])};k.intersectsSegment=function(h,K,d){const l=h[0],N=h[1],ca=h[2];h=h[3];const {x:z,y:L}=K,{x:F,y:x}=d;var w=(X,A)=>0>(x-L)*X+(z-F)*A+(F*L-z*x);K=w(l,h);d=w(ca,h);const I=w(ca,N);w=w(l,N);return K===d&&d===I&&I===w&&w===K||z<l&&F<l||z>ca&&F>ca||L>h&&x>h||L<N&&x<N?!1:!0};k.intersectsSphere=function(h,
K){const d=K[3];var l=Math.abs(K[0]-.5*(h[0]+h[2]));const N=.5*(h[2]-h[0]);if(l>d+N)return!1;var ca=.5*(h[3]-h[1]);h=Math.abs(K[1]-.5*(h[1]+h[3]));if(h>d+ca)return!1;if(l<N||h<ca)return!0;l-=N;ca=h-ca;return l*l+ca*ca<=d*d};k.is=E;k.isPoint=function(h){return(0===p(h)||!isFinite(h[0]))&&(0===r(h)||!isFinite(h[1]))};k.offset=function(h,K,d,l=h){l[0]=h[0]+K;l[1]=h[1]+d;l[2]=h[2]+K;l[3]=h[3]+d;return l};k.pad=function(h,K,d=h){d[0]=h[0]-K;d[1]=h[1]-K;d[2]=h[2]+K;d[3]=h[3]+K;return d};k.setMax=function(h,
K,d=h){d[2]=K[0];d[3]=K[1];d!==h&&(d[0]=h[0],d[1]=h[1]);return h};k.setMin=function(h,K,d=h){d[0]=K[0];d[1]=K[1];d!==h&&(d[2]=h[2],d[3]=h[3]);return d};k.size=function(h,K){K[0]=h[2]-h[0];K[1]=h[3]-h[1]};k.toExtent=function(h,K){return new t({xmin:h[0],ymin:h[1],xmax:h[2],ymax:h[3],spatialReference:K})};k.width=p;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../core/libs/rbush/PooledRBush"],function(k,
e,Z){function aa(y,p,r){t.minX=p[0];t.minY=p[1];t.maxX=p[2];t.maxY=p[3];y.search(t,r)}const t={minX:0,minY:0,maxX:0,maxY:0};let H=function(){function y(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new Z.PooledRBush(9,e("esri-csp-restrictions")?r=>({minX:r[0],minY:r[1],maxX:r[2],maxY:r[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const r=Array(this._idByBounds.size);let u=0;this._idByBounds.forEach((E,Q)=>
{r[u++]=Q});this._indexInvalid=!1;this._index.clear();this._index.load(r)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(r=>this._idByBounds.has(r))),this._boundsToLoad.length=0)}}var p=y.prototype;p.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};p.delete=function(r){const u=this._boundsById.get(r);this._boundsById.delete(r);u&&(this._idByBounds.delete(u),this._indexInvalid||this._index.remove(u))};
p.forEachInBounds=function(r,u){this._loadIndex();aa(this._index,r,E=>u(this._idByBounds.get(E)))};p.get=function(r){return this._boundsById.get(r)};p.has=function(r){return this._boundsById.has(r)};p.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};p.set=function(r,u){if(!this._indexInvalid){const E=this._boundsById.get(r);E&&(this._index.remove(E),this._idByBounds.delete(E))}this._boundsById.set(r,u);u&&(this._idByBounds.set(u,r),this._indexInvalid||
(this._boundsToLoad.push(u),5E4<this._boundsToLoad.length&&this._loadIndex()))};return y}();k.BoundsStore=H;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(k,e,Z,aa,t,H){function y(I,X){p(I,0,I.children.length,X,I)}function p(I,X,A,C,O){O||(O=new x([]));O.minX=Infinity;O.minY=Infinity;O.maxX=-Infinity;
O.maxY=-Infinity;for(let W=X,D;W<A;W++)D=I.children[W],r(O,I.leaf?C(D):D);return O}function r(I,X){I.minX=Math.min(I.minX,X.minX);I.minY=Math.min(I.minY,X.minY);I.maxX=Math.max(I.maxX,X.maxX);I.maxY=Math.max(I.maxY,X.maxY)}function u(I,X){return I.minX-X.minX}function E(I,X){return I.minY-X.minY}function Q(I){return(I.maxX-I.minX)*(I.maxY-I.minY)}function R(I){return I.maxX-I.minX+(I.maxY-I.minY)}function h(I,X){return I.minX<=X.minX&&I.minY<=X.minY&&X.maxX<=I.maxX&&X.maxY<=I.maxY}function K(I,X){return X.minX<=
I.maxX&&X.minY<=I.maxY&&X.maxX>=I.minX&&X.maxY>=I.minY}function d(I,X,A,C,O){for(X=[X,A];X.length;){A=aa.assumeNonNull(X.pop());const W=aa.assumeNonNull(X.pop());if(A-W<=C)continue;const D=W+Math.ceil((A-W)/C/2)*C;H.quickselect(I,D,W,A,O);X.push(W,D,D,A)}}let l=function(){function I(A=9,C){this.compareMinX=u;this.compareMinY=E;this._toBBox=function(O){return O};this._maxEntries=Math.max(4,A||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));C&&("function"===typeof C?this._toBBox=C:this._initFormat(C));
this.clear()}var X=I.prototype;X.destroy=function(){this.clear();N.prune();ca.prune();z.prune();L.prune()};X.all=function(A){this._all(this.data,A)};X.search=function(A,C){let O=this.data;const W=this._toBBox;if(K(A,O))for(N.clear();O;){for(let D=0,q=O.children.length;D<q;D++){const a=O.children[D],g=O.leaf?W(a):a;K(A,g)&&(O.leaf?C(a):h(A,g)?this._all(a,C):N.push(a))}O=N.pop()}};X.collides=function(A){let C=this.data;const O=this._toBBox;if(!K(A,C))return!1;for(N.clear();C;){for(let W=0,D=C.children.length;W<
D;W++){const q=C.children[W],a=C.leaf?O(q):q;if(K(A,a)){if(C.leaf||h(A,a))return!0;N.push(q)}}C=N.pop()}return!1};X.load=function(A){if(!A.length)return this;if(A.length<this._minEntries){for(let C=0,O=A.length;C<O;C++)this.insert(A[C]);return this}A=this._build(A.slice(0,A.length),0,A.length-1,0);if(this.data.children.length)if(this.data.height===A.height)this._splitRoot(this.data,A);else{if(this.data.height<A.height){const C=this.data;this.data=A;A=C}this._insert(A,this.data.height-A.height-1,!0)}else this.data=
A;return this};X.insert=function(A){A&&this._insert(A,this.data.height-1);return this};X.clear=function(){this.data=new x([]);return this};X.remove=function(A){if(!A)return this;let C=this.data,O=null,W=0,D=!1,q;const a=this._toBBox(A);z.clear();for(L.clear();C||0<z.length;){if(!C){var g;C=aa.assumeNonNull(z.pop());O=z.data[z.length-1];W=null!=(g=L.pop())?g:0;D=!0}if(C.leaf&&(q=Z.indexOf(C.children,A,C.children.length,C.indexHint),-1!==q)){C.children.splice(q,1);z.push(C);this._condense(z);break}D||
C.leaf||!h(C,a)?O?(W++,C=O.children[W],D=!1):C=null:(z.push(C),L.push(W),W=0,O=C,C=C.children[0])}return this};X.toJSON=function(){return this.data};X.fromJSON=function(A){this.data=A;return this};X._all=function(A,C){for(ca.clear();A;){var O;if(!0===A.leaf)for(const W of A.children)C(W);else ca.pushArray(A.children);A=null!=(O=ca.pop())?O:null}};X._build=function(A,C,O,W){var D=O-C+1,q=this._maxEntries;if(D<=q)return A=new x(A.slice(C,O+1)),y(A,this._toBBox),A;W||(W=Math.ceil(Math.log(D)/Math.log(q)),
q=Math.ceil(D/q**(W-1)));const a=new w([]);a.height=W;D=Math.ceil(D/q);q=D*Math.ceil(Math.sqrt(q));for(d(A,C,O,q,this.compareMinX);C<=O;C+=q){const g=Math.min(C+q-1,O);d(A,C,g,D,this.compareMinY);for(let M=C;M<=g;M+=D)a.children.push(this._build(A,M,Math.min(M+D-1,g),W-1))}y(a,this._toBBox);return a};X._chooseSubtree=function(A,C,O,W){for(;;){W.push(C);if(!0===C.leaf||W.length-1===O)break;let D=Infinity,q=Infinity,a=void 0;for(let g=0,M=C.children.length;g<M;g++){const U=C.children[g],ha=Q(U),oa=
(Math.max(U.maxX,A.maxX)-Math.min(U.minX,A.minX))*(Math.max(U.maxY,A.maxY)-Math.min(U.minY,A.minY))-ha;oa<q?(q=oa,D=ha<D?ha:D,a=U):oa===q&&ha<D&&(D=ha,a=U)}C=a||C.children[0]}return C};X._insert=function(A,C,O){var W=this._toBBox;O=O?A:W(A);z.clear();W=this._chooseSubtree(O,this.data,C,z);W.children.push(A);for(r(W,O);0<=C;)if(z.data[C].children.length>this._maxEntries)this._split(z,C),C--;else break;this._adjustParentBBoxes(O,z,C)};X._split=function(A,C){const O=A.data[C];var W=O.children.length;
const D=this._minEntries;this._chooseSplitAxis(O,D,W);(W=this._chooseSplitIndex(O,D,W))?(W=O.children.splice(W,O.children.length-W),W=O.leaf?new x(W):new w(W),W.height=O.height,y(O,this._toBBox),y(W,this._toBBox),C?A.data[C-1].children.push(W):this._splitRoot(O,W)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};X._splitRoot=function(A,C){this.data=new w([A,C]);this.data.height=A.height+1;y(this.data,this._toBBox)};X._chooseSplitIndex=function(A,C,O){let W,D,
q=void 0;W=D=Infinity;for(let g=C;g<=O-C;g++){var a=p(A,0,g,this._toBBox);const M=p(A,g,O,this._toBBox),U=Math.max(0,Math.min(a.maxX,M.maxX)-Math.max(a.minX,M.minX))*Math.max(0,Math.min(a.maxY,M.maxY)-Math.max(a.minY,M.minY));a=Q(a)+Q(M);U<W?(W=U,q=g,D=a<D?a:D):U===W&&a<D&&(D=a,q=g)}return q};X._chooseSplitAxis=function(A,C,O){const W=A.leaf?this.compareMinX:u,D=A.leaf?this.compareMinY:E,q=this._allDistMargin(A,C,O,W);C=this._allDistMargin(A,C,O,D);q<C&&A.children.sort(W)};X._allDistMargin=function(A,
C,O,W){A.children.sort(W);W=this._toBBox;var D=p(A,0,C,W);const q=p(A,O-C,O,W);let a=R(D)+R(q);for(let g=C;g<O-C;g++){const M=A.children[g];r(D,A.leaf?W(M):M);a+=R(D)}for(O=O-C-1;O>=C;O--)D=A.children[O],r(q,A.leaf?W(D):D),a+=R(q);return a};X._adjustParentBBoxes=function(A,C,O){for(;0<=O;O--)r(C.data[O],A)};X._condense=function(A){for(let C=A.length-1;0<=C;C--){const O=A.data[C];if(0===O.children.length)if(0<C){const W=A.data[C-1],D=W.children;D.splice(Z.indexOf(D,O,D.length,W.indexHint),1)}else this.clear();
else y(O,this._toBBox)}};X._initFormat=function(A){const C=["return a"," - b",";"];this.compareMinX=new Function("a","b",C.join(A[0]));this.compareMinY=new Function("a","b",C.join(A[1]));this._toBBox=new Function("a","return {minX: a"+A[0]+", minY: a"+A[1]+", maxX: a"+A[2]+", maxY: a"+A[3]+"};")};return I}();const N=new t,ca=new t,z=new t,L=new t({deallocator:void 0});t=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let F=function(I){function X(){var A=I.apply(this,arguments)||
this;A.height=1;A.indexHint=new Z.PositionHint;return A}e._inheritsLoose(X,I);return X}(t),x=function(I){function X(A){var C=I.call(this)||this;C.children=A;C.leaf=!0;return C}e._inheritsLoose(X,I);return X}(F),w=function(I){function X(A){var C=I.call(this)||this;C.children=A;C.leaf=!1;return C}e._inheritsLoose(X,I);return X}(F);k.BBox=t;k.PooledRBush=l;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/chunks/quickselect":function(){define(["exports"],function(k){var e={exports:{}};(function(Z){(function(aa){aa=
aa();void 0!==aa&&(Z.exports=aa)})(function(){function aa(y,p,r,u,E){for(;u>r;){if(600<u-r){var Q=u-r+1,R=p-r+1,h=Math.log(Q),K=.5*Math.exp(2*h/3);h=.5*Math.sqrt(h*K*(Q-K)/Q)*(0>R-Q/2?-1:1);aa(y,p,Math.max(r,Math.floor(p-R*K/Q+h)),Math.min(u,Math.floor(p+(Q-R)*K/Q+h)),E)}Q=y[p];R=r;K=u;t(y,r,p);for(0<E(y[u],Q)&&t(y,r,u);R<K;){t(y,R,K);R++;for(K--;0>E(y[R],Q);)R++;for(;0<E(y[K],Q);)K--}0===E(y[r],Q)?t(y,r,K):(K++,t(y,K,u));K<=p&&(r=K+1);p<=K&&(u=K-1)}}function t(y,p,r){var u=y[p];y[p]=y[r];y[r]=u}
function H(y,p){return y<p?-1:y>p?1:0}return function(y,p,r,u,E){aa(y,p,r||0,u||y.length-1,E||H)}})})(e);k.quickselect=e.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../../../core/maybe","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(k,e,Z,aa,t){const H={getObjectId(y){return y.objectId},getAttributes(y){return y.attributes},getAttribute(y,p){return y.attributes[p]},cloneWithGeometry(y,p){return new aa.OptimizedFeature(p,
y.attributes,null,y.objectId)},getGeometry(y){return y.geometry},getCentroid(y,p){e.isNone(y.centroid)&&(y.centroid=Z.getCentroidOptimizedGeometry(new t,y.geometry,p.hasZ,p.hasM));return y.centroid}};k.default=H;k.optimizedFeatureQueryEngineAdapter=H;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(k,e){function Z(t,H,y,p,r,u,E=1){u=r?u?4:3:u?3:2;let Q=y,R=y+u,h=0,K=0,d=y=0,l=0;for(let N=0,ca=p-1;N<ca;N++,
Q+=u,R+=u){p=H[Q];const z=H[Q+1],L=H[Q+2],F=H[R],x=H[R+1],w=H[R+2];let I=p*x-F*z;d+=I;h+=(p+F)*I;K+=(z+x)*I;r&&(I=p*w-F*L,y+=(L+w)*I,l+=I);p<t[0]&&(t[0]=p);p>t[1]&&(t[1]=p);z<t[2]&&(t[2]=z);z>t[3]&&(t[3]=z);r&&(L<t[4]&&(t[4]=L),L>t[5]&&(t[5]=L))}0<d*E&&(d*=-1);0<l*E&&(l*=-1);if(!d)return null;t=[h,K,.5*d];r&&(t[3]=y,t[4]=.5*l);return t}function aa(t,H,y,p,r){r=p?r?4:3:r?3:2;let u=H,E=H+r,Q=0,R=0,h=0,K=0;for(let ca=0,z=y-1;ca<z;ca++,u+=r,E+=r){var d=t[u];const L=t[u+1],F=t[u+2],x=t[E],w=t[E+1],I=t[E+
2];if(p){{var l=x-d;var N=w-L;const X=I-F;l=Math.sqrt(l*l+N*N+X*X)}}else l=x-d,N=w-L,l=Math.sqrt(l*l+N*N);l&&(Q+=l,p?(d=[d+.5*(x-d),L+.5*(w-L),F+.5*(I-F)],R+=l*d[0],h+=l*d[1],K+=l*d[2]):(d=[d+.5*(x-d),L+.5*(w-L)],R+=l*d[0],h+=l*d[1]))}return 0<Q?p?[R/Q,h/Q,K/Q]:[R/Q,h/Q]:0<y?p?[t[H],t[H+1],t[H+2]]:[t[H],t[H+1]]:null}k.getCentroidOptimizedGeometry=function(t,H,y,p,r){if(e.isNone(H)||!H.lengths.length)return null;const u="upperLeft"===(null==r?void 0:r.originPosition)?-1:1;t.lengths.length&&(t.lengths.length=
0);t.coords.length&&(t.coords.length=0);r=t.coords;const E=[],Q=y?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:R,coords:h}=H,K=y?p?4:3:p?3:2;let d=0;for(var l of R){const N=Z(Q,h,d,l,y,p,u);N&&E.push(N);d+=l*K}E.sort((N,ca)=>{let z=u*N[2]-u*ca[2];0===z&&y&&(z=N[4]-ca[4]);return z});
E.length&&(l=6*E[0][2],r[0]=E[0][0]/l,r[1]=E[0][1]/l,y&&(l=6*E[0][4],r[2]=0!==l?E[0][3]/l:0),r[0]<Q[0]||r[0]>Q[1]||r[1]<Q[2]||r[1]>Q[3]||y&&(r[2]<Q[4]||r[2]>Q[5]))&&(r.length=0);if(!r.length)if(H=H.lengths[0]?aa(h,0,R[0],y,p):null)r[0]=H[0],r[1]=H[1],y&&2<H.length&&(r[2]=H[2]);else return null;return t};k.lineCentroid=aa;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(k,e,Z,aa,t,H,y){function p(d,l){if(!l)return null;if("x"in l){var N={x:0,y:0};[N.x,N.y]=d(l.x,l.y,Q);null!=l.z&&(N.z=l.z);null!=l.m&&(N.m=l.m);return N}if("xmin"in l)return N={xmin:0,ymin:0,xmax:0,ymax:0},[N.xmin,N.ymin]=d(l.xmin,l.ymin,Q),[N.xmax,N.ymax]=d(l.xmax,l.ymax,Q),l.hasZ&&(N.zmin=l.zmin,N.zmax=l.zmax,N.hasZ=!0),l.hasM&&(N.mmin=l.mmin,N.mmax=l.mmax,N.hasM=!0),N;if("rings"in l)return{rings:r(l.rings,d),hasM:l.hasM,hasZ:l.hasZ};if("paths"in l)return{paths:r(l.paths,d),hasM:l.hasM,
hasZ:l.hasZ};if("points"in l)return{points:u(l.points,d),hasM:l.hasM,hasZ:l.hasZ}}function r(d,l){const N=[];for(const ca of d)N.push(u(ca,l));return N}function u(d,l){const N=[];for(const ca of d)d=l(ca[0],ca[1],[0,0]),N.push(d),2<ca.length&&d.push(ca[2]),3<ca.length&&d.push(ca[3]);return N}function E(){E=e._asyncToGenerator(function*(d,l){l&&(d=Array.isArray(d)?d.map(N=>Z.isSome(N.geometry)&&N.geometry.spatialReference):[d],yield aa.initializeProjection(d.map(N=>({source:N,dest:l}))))});return E.apply(this,
arguments)}const Q=[0,0],R=p.bind(null,y.lngLatToXY),h=p.bind(null,y.xyToLngLat),K=new (function(){function d(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var l=d.prototype;l.push=function(){var N=e._asyncToGenerator(function*(ca,z,L){if(!(ca&&ca.length&&z&&L)||H.equals(z,L))return ca;const F={geometries:ca,inSpatialReference:z,outSpatialReference:L,resolve:null};this._jobs.push(F);return new Promise(x=>{F.resolve=x;null===this._timer&&(this._timer=setTimeout(this._process,
10))})});return function(ca,z,L){return N.apply(this,arguments)}}();l._process=function(){this._timer=null;const N=this._jobs.shift();if(N){var {geometries:ca,inSpatialReference:z,outSpatialReference:L,resolve:F}=N;y.canProject(z,L)?H.isWebMercator(L)?F(ca.map(R)):F(ca.map(h)):F(aa.projectMany(t.jsonAdapter,ca,z,L,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return d}());k.checkProjectionSupport=function(d,l){return E.apply(this,arguments)};k.project=function(d,l,N){if(!d)return d;
N||(N=l,l=d.spatialReference);return H.isValid(l)&&H.isValid(N)&&!H.equals(l,N)?y.canProject(l,N)?(d=H.isWebMercator(N)?R(d):h(d),d.spatialReference=N,d):aa.projectMany(t.jsonAdapter,[d],l,N,null)[0]:d};k.projectMany=function(d,l,N){return K.push(d,l,N)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(k,e,Z,aa,t,H,y,p,r,u,E,Q,R,h,K,d,l,N,ca,z,L,F,x,w,I){function X(){return!!Qa&&h.isLoaded()}function A(V){H.isNone($a)&&($a=Promise.all([h.load(),(new Promise((ja,ba)=>k(["../chunks/geometryEngineBase"],ja,ba))).then(ja=>ja.geometryEngineBase),new Promise((ja,ba)=>k(["./geometryAdapters/hydrated"],ja,ba))]));return $a.then(([,ja,{hydratedAdapter:ba}])=>{y.throwIfAborted(V);b=ba;Qa=ja.default;Qa._enableProjection(h.pe)})}function C(V,ja,ba=null){return Array.isArray(V)?0===V.length?[]:O(b,
V,V[0].spatialReference,ja,ba):O(b,[V],V.spatialReference,ja,ba)[0]}function O(V,ja,ba,na,xa=null){if(H.isNone(ba)||H.isNone(na))return ja;if(D(ba,na,xa))return ja.map(za=>H.unwrap(a(za,ba,na)));if(H.isNone(xa)){const za=F.cacheKey(ba,na);void 0!==Ra[za]?xa=Ra[za]:(xa=W(ba,na,null),H.isNone(xa)&&(xa=new F),Ra[za]=xa)}if(H.isNone(Qa))throw new pb;return Qa._project(V,ja,ba,na,xa)}function W(V,ja,ba=null){if(H.isNone(Qa))throw new pb;if(H.isNone(V)||H.isNone(ja))return null;V=Qa._getTransformation(b,
V,ja,ba,null==ba?void 0:ba.spatialReference);return null!==V?F.fromGE(V):null}function D(V,ja,ba){return ba?!1:x.equals(V,ja)?!0:x.isValid(V)&&x.isValid(ja)&&!!sa(V,ja,Pb)}function q(){q=Z._asyncToGenerator(function*(V,ja,ba,na){if(!X())if(Array.isArray(V))for(const {source:xa,dest:za,geographicTransformation:Ia}of V){if(!D(xa,za,Ia))return A(na)}else if(!D(V,ja,ba))return A(na)});return q.apply(this,arguments)}function a(V,ja,ba){return V?"x"in V?g(V,ja,new K,ba,0):"xmin"in V?oa(V,ja,new Q,ba,0):
"rings"in V?ha(V,ja,new d,ba,0):"paths"in V?U(V,ja,new l,ba,0):"points"in V?M(V,ja,new R,ba,0):null:null}function g(V,ja,ba,na,xa){Na[0]=V.x;Na[1]=V.y;const za=V.z;Na[2]=void 0!==za?za:xa;if(!va(Na,ja,0,Na,na,0,1))return null;ba.x=Na[0];ba.y=Na[1];ba.spatialReference=na;void 0===za?(ba.z=void 0,ba.hasZ=!1):(ba.z=Na[2],ba.hasZ=!0);void 0===V.m?(ba.m=void 0,ba.hasM=!1):(ba.m=V.m,ba.hasM=!0);return ba}function M(V,ja,ba,na,xa){const {points:za,hasZ:Ia,hasM:Ja}=V;V=[];const Xa=za.length,Wa=[];for(var Va of za)Wa.push(Va[0],
Va[1],Ia?Va[2]:xa);if(!va(Wa,ja,0,Wa,na,0,Xa))return null;for(ja=0;ja<Xa;++ja){xa=3*ja;Va=Wa[xa];const cb=Wa[xa+1];Ia&&Ja?V.push([Va,cb,Wa[xa+2],za[ja][3]]):Ia?V.push([Va,cb,Wa[xa+2]]):Ja?V.push([Va,cb,za[ja][2]]):V.push([Va,cb])}ba.points=V;ba.spatialReference=na;ba.hasZ=Ia;ba.hasM=Ja;return ba}function U(V,ja,ba,na,xa){const {paths:za,hasZ:Ia,hasM:Ja}=V;V=[];if(!Ba(za,Ia,Ja,ja,V,na,xa))return null;ba.paths=V;ba.spatialReference=na;ba.hasZ=Ia;ba.hasM=Ja;return ba}function ha(V,ja,ba,na,xa){const {rings:za,
hasZ:Ia,hasM:Ja}=V;V=[];if(!Ba(za,Ia,Ja,ja,V,na,xa))return null;ba.rings=V;ba.spatialReference=na;ba.hasZ=Ia;ba.hasM=Ja;return ba}function oa(V,ja,ba,na,xa){const {xmin:za,ymin:Ia,xmax:Ja,ymax:Xa,hasZ:Wa,hasM:Va}=V;if(!ma(za,Ia,Wa?V.zmin:xa,ja,Na,na))return null;ba.xmin=Na[0];ba.ymin=Na[1];Wa&&(ba.zmin=Na[2]);if(!ma(Ja,Xa,Wa?V.zmax:xa,ja,Na,na))return null;ba.xmax=Na[0];ba.ymax=Na[1];Wa&&(ba.zmax=Na[2]);Va&&(ba.mmin=V.mmin,ba.mmax=V.mmax);ba.spatialReference=na;return ba}function ma(V,ja,ba,na,xa,
za){Ua[0]=V;Ua[1]=ja;Ua[2]=ba;return va(Ua,na,0,xa,za,0,1)}function la(V,ja,ba,na){if(H.isNone(ja)||H.isNone(na)||2>V.length)return!1;2===V.length&&(Ua[0]=V[0],Ua[1]=V[1],Ua[2]=0,V=Ua);return va(V,ja,0,ba,na,0,1)}function pa(V,ja,ba){if(H.isNone(ja))return!1;ja=Sa(ja,Bb);ja=lb[ja][ka.WGS84_COMPARABLE_LON_LAT];if(H.isNone(ja))return!1;ja(V,0,Ua,0);ba!==Ua&&(ba[0]=Ua[0],ba[1]=Ua[1],2<ba.length&&(ba[2]=Ua[2]));return!0}function va(V,ja,ba,na,xa,za,Ia=1){ja=sa(ja,xa,Pb);if(H.isNone(ja))return!1;if(ja===
c){if(V===na&&ba===za)return!0;Ia=ba+3*Ia;for(let Ja=ba,Xa=za;Ja<Ia;Ja++,Xa++)na[Xa]=V[Ja];return!0}Ia=ba+3*Ia;for(let Ja=ba,Xa=za;Ja<Ia;Ja+=3,Xa+=3)ja(V,Ja,na,Xa);return!0}function Ba(V,ja,ba,na,xa,za,Ia=0){const Ja=[];for(const Xa of V)for(const Wa of Xa)Ja.push(Wa[0],Wa[1],ja?Wa[2]:Ia);if(!va(Ja,na,0,Ja,za,0,Ja.length/3))return!1;na=0;xa.length=0;for(const Xa of V){V=[];for(const Wa of Xa)ja&&ba?V.push([Ja[na++],Ja[na++],Ja[na++],Wa[3]]):ja?V.push([Ja[na++],Ja[na++],Ja[na++]]):(ba?V.push([Ja[na++],
Ja[na++],Wa[2]]):V.push([Ja[na++],Ja[na++]]),na++);xa.push(V)}return!0}function Ka(V,ja,ba,na){ja=na+ja;if(ja<na/2||ba>ja)return Number.MAX_VALUE;V=Math.abs(fb*V)+Math.asin(ba/ja);return V>=Math.PI/2?Number.MAX_VALUE:ba/Math.cos(V)}function Ta(V,ja,ba){const na=Math.sin(V);V=Math.cos(V);const xa=Math.sin(ja);ja=Math.cos(ja);ba[0]=-na;ba[4]=-xa*V;ba[8]=ja*V;ba[12]=0;ba[1]=V;ba[5]=-xa*na;ba[9]=ja*na;ba[13]=0;ba[2]=0;ba[6]=ja;ba[10]=xa;ba[14]=0;ba[3]=0;ba[7]=0;ba[11]=0;ba[15]=1;return ba}function Oa(V,
ja,ba){Ta(V,ja,ba);r.transpose(ba,ba);return ba}function Sa(V,ja){if(ja.spatialReference===V)return ja.spatialReferenceId;ja.spatialReference=V;"metersPerUnit"in ja&&(ja.metersPerUnit=p.getMetersPerUnitForSR(V,1));return V.wkt===N.SphericalECEFSpatialReference.wkt?ja.spatialReferenceId=ka.SPHERICAL_ECEF:x.isWGS84(V)?ja.spatialReferenceId=ka.WGS84:x.isWebMercator(V)?ja.spatialReferenceId=ka.WEB_MERCATOR:x.isPlateCarree(V)?ja.spatialReferenceId=ka.PLATE_CARREE:V.wkt===N.WGS84ECEFSpatialReference.wkt?
ja.spatialReferenceId=ka.WGS84_ECEF:V.wkid===w.SupportedGCSWkids.CGCS2000?ja.spatialReferenceId=ka.CGCS2000:V.wkt===N.SphericalPCPFMars.wkt?ja.spatialReferenceId=ka.SPHERICAL_MARS_PCPF:V.wkt===N.SphericalPCPFMoon.wkt?ja.spatialReferenceId=ka.SPHERICAL_MOON_PCPF:x.isMars(V)?ja.spatialReferenceId=ka.GCSMARS2000:x.isMoon(V)?ja.spatialReferenceId=ka.GCSMOON2000:ja.spatialReferenceId=ka.UNKNOWN}function c(V,ja,ba,na){V!==ba&&(ba[na++]=V[ja++],ba[na++]=V[ja++],ba[na]=V[ja])}function n(V,ja,ba,na){ba[na++]=
qb*(V[ja++]/z.earth.radius);ba[na++]=qb*(Math.PI/2-2*Math.atan(Math.exp(-V[ja++]/z.earth.radius)));ba[na]=V[ja]}function fa(V,ja,ba,na){n(V,ja,ba,na);qa(ba,na,ba,na)}function m(V,ja,ba,na){n(V,ja,ba,na);Ea(ba,na,ba,na)}function G(V,ja,ba,na,xa){var za=.4999999*Math.PI;za=t.clamp(fb*V[ja+1],-za,za);za=Math.sin(za);ba[na++]=fb*V[ja]*xa.radius;ba[na++]=xa.halfSemiMajorAxis*Math.log((1+za)/(1-za));ba[na]=V[ja+2]}function S(V,ja,ba,na){G(V,ja,ba,na,z.earth)}function T(V,ja,ba,na){ba[na]=V[ja]*Qb;ba[na+
1]=V[ja+1]*Qb;ba[na+2]=V[ja+2]}function ia(V,ja,ba,na){ba[na]=V[ja]*zb;ba[na+1]=V[ja+1]*zb;ba[na+2]=V[ja+2]}function ea(V,ja,ba,na){n(V,ja,ba,na);T(ba,na,ba,na)}function J(V,ja,ba,na,xa){xa+=V[ja+2];const za=fb*V[ja+1];V=fb*V[ja];ja=Math.cos(za);ba[na++]=Math.cos(V)*ja*xa;ba[na++]=Math.sin(V)*ja*xa;ba[na]=Math.sin(za)*xa}function P(V,ja,ba,na){J(V,ja,ba,na,z.moon.radius)}function da(V,ja,ba,na){J(V,ja,ba,na,z.mars.radius)}function qa(V,ja,ba,na){J(V,ja,ba,na,z.earth.radius)}function ra(V,ja,ba,na,
xa){var za=V[ja];const Ia=V[ja+1];ja=V[ja+2];V=Math.sqrt(za*za+Ia*Ia+ja*ja);ja=t.asinClamped(ja/(0===V?1:V));za=Math.atan2(Ia,za);ba[na++]=qb*za;ba[na++]=qb*ja;ba[na]=V-xa}function wa(V,ja,ba,na){ra(V,ja,ba,na,z.moon.radius)}function ya(V,ja,ba,na){ra(V,ja,ba,na,z.mars.radius)}function Aa(V,ja,ba,na){ra(V,ja,ba,na,z.earth.radius)}function Ha(V,ja,ba,na){Aa(V,ja,ba,na);S(ba,na,ba,na)}function Ga(V,ja,ba,na){Aa(V,ja,ba,na);Ea(ba,na,ba,na)}function Ea(V,ja,ba,na){{var xa=z.earth;const Ia=fb*V[ja];var za=
fb*V[ja+1];V=V[ja+2];ja=Math.sin(za);za=Math.cos(za);const Ja=xa.radius/Math.sqrt(1-xa.eccentricitySquared*ja*ja);ba[na++]=(Ja+V)*za*Math.cos(Ia);ba[na++]=(Ja+V)*za*Math.sin(Ia);ba[na++]=(Ja*(1-xa.eccentricitySquared)+V)*ja}}function Da(V,ja,ba,na){var xa=L.earthEllipsoidConstants,za=V[ja],Ia=V[ja+1];V=V[ja+2];let Ja;ja=Math.abs(V);var Xa=za*za+Ia*Ia;var Wa=Math.sqrt(Xa);var Va=Xa+V*V;var cb=Math.sqrt(Va);za=Math.atan2(Ia,za);var mb=V*V/Va;Va=Xa/Va;Ia=xa.a2/cb;Xa=xa.a3-xa.a4/cb;.3<Va?(mb=ja/cb*(1+
Va*(xa.a1+Ia+mb*Xa)/cb),cb=Math.asin(mb),Ia=mb*mb,Va=Math.sqrt(1-Ia)):(Va=Wa/cb*(1-mb*(xa.a5-Ia-Va*Xa)/cb),cb=Math.acos(Va),Ia=1-Va*Va,mb=Math.sqrt(Ia));Ja=1-z.earth.eccentricitySquared*Ia;Ia=z.earth.radius/Math.sqrt(Ja);xa=xa.a6*Ia;Ia=Wa-Ia*Va;Xa=ja-xa*mb;ja=Va*Ia+mb*Xa;Wa=Va*Xa-mb*Ia;xa=Wa/(xa/Ja+ja);cb+=xa;0>V&&(cb=-cb);ba[na++]=qb*za;ba[na++]=qb*cb;ba[na]=ja+Wa*xa/2}function Fa(V,ja,ba,na){Da(V,ja,ba,na);qa(ba,na,ba,na)}function Pa(V,ja,ba,na){Da(V,ja,ba,na);S(ba,na,ba,na)}function sa(V,ja,ba=
ab()){return H.isNone(V)||H.isNone(ja)?null:bb(V,ja,ba).projector}function bb(V,ja,ba){if(H.isNone(V)||H.isNone(ja)||ba.source.spatialReference===V&&ba.dest.spatialReference===ja)return ba;const na=Sa(V,ba.source),xa=Sa(ja,ba.dest);na===ka.UNKNOWN&&xa===ka.UNKNOWN?x.equals(V,ja)?ba.projector=c:ba.projector=null:ba.projector=lb[na][xa];return ba}function ab(){return{source:{spatialReference:null,spatialReferenceId:ka.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:ka.UNKNOWN,
metersPerUnit:1},projector:c}}let Qa=null,b=null,$a=null,Ra={},pb=function(V){function ja(){return V.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}Z._inheritsLoose(ja,V);return ja}(aa);var ka;(function(V){V[V.UNKNOWN=0]="UNKNOWN";V[V.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";V[V.WGS84=2]="WGS84";V[V.WEB_MERCATOR=3]="WEB_MERCATOR";V[V.WGS84_ECEF=4]="WGS84_ECEF";V[V.CGCS2000=5]="CGCS2000";V[V.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";V[V.SPHERICAL_MARS_PCPF=
7]="SPHERICAL_MARS_PCPF";V[V.GCSMARS2000=8]="GCSMARS2000";V[V.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";V[V.GCSMOON2000=10]="GCSMOON2000";V[V.LON_LAT=11]="LON_LAT";V[V.PLATE_CARREE=12]="PLATE_CARREE"})(ka||(ka={}));const Qb=z.earth.radius*Math.PI/180,zb=180/(z.earth.radius*Math.PI),lb={[ka.WGS84]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:c,[ka.WGS84_COMPARABLE_LON_LAT]:c,[ka.SPHERICAL_ECEF]:qa,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,
[ka.WEB_MERCATOR]:S,[ka.PLATE_CARREE]:T,[ka.WGS84]:c,[ka.WGS84_ECEF]:Ea},[ka.CGCS2000]:{[ka.CGCS2000]:c,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:c,[ka.WGS84_COMPARABLE_LON_LAT]:c,[ka.SPHERICAL_ECEF]:qa,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:T,[ka.WGS84]:null,[ka.WGS84_ECEF]:Ea},[ka.GCSMARS2000]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:c,[ka.GCSMOON2000]:null,[ka.LON_LAT]:c,[ka.WGS84_COMPARABLE_LON_LAT]:null,
[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:da,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.GCSMOON2000]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:c,[ka.LON_LAT]:c,[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:P,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.WEB_MERCATOR]:{[ka.CGCS2000]:null,
[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:n,[ka.WGS84_COMPARABLE_LON_LAT]:n,[ka.SPHERICAL_ECEF]:fa,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:c,[ka.PLATE_CARREE]:ea,[ka.WGS84]:n,[ka.WGS84_ECEF]:m},[ka.WGS84_ECEF]:{[ka.CGCS2000]:Da,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:Da,[ka.WGS84_COMPARABLE_LON_LAT]:Da,[ka.SPHERICAL_ECEF]:Fa,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:Pa,
[ka.PLATE_CARREE]:function(V,ja,ba,na){Da(V,ja,ba,na);T(ba,na,ba,na)},[ka.WGS84]:Da,[ka.WGS84_ECEF]:c},[ka.SPHERICAL_ECEF]:{[ka.CGCS2000]:Aa,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:Aa,[ka.WGS84_COMPARABLE_LON_LAT]:Aa,[ka.SPHERICAL_ECEF]:c,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:Ha,[ka.PLATE_CARREE]:function(V,ja,ba,na){Aa(V,ja,ba,na);T(ba,na,ba,na)},[ka.WGS84]:Aa,[ka.WGS84_ECEF]:Ga},[ka.SPHERICAL_MARS_PCPF]:{[ka.CGCS2000]:null,
[ka.GCSMARS2000]:ya,[ka.GCSMOON2000]:null,[ka.LON_LAT]:ya,[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:c,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.SPHERICAL_MOON_PCPF]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:wa,[ka.LON_LAT]:wa,[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:c,[ka.UNKNOWN]:null,
[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.UNKNOWN]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:null,[ka.WGS84_COMPARABLE_LON_LAT]:null,[ka.SPHERICAL_ECEF]:null,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:c,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:null,[ka.WGS84]:null,[ka.WGS84_ECEF]:null},[ka.LON_LAT]:{[ka.CGCS2000]:c,[ka.GCSMARS2000]:c,[ka.GCSMOON2000]:c,[ka.LON_LAT]:c,[ka.WGS84_COMPARABLE_LON_LAT]:c,
[ka.SPHERICAL_ECEF]:qa,[ka.SPHERICAL_MARS_PCPF]:da,[ka.SPHERICAL_MOON_PCPF]:P,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:S,[ka.PLATE_CARREE]:T,[ka.WGS84]:c,[ka.WGS84_ECEF]:Ea},[ka.WGS84_COMPARABLE_LON_LAT]:{[ka.CGCS2000]:null,[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:c,[ka.WGS84_COMPARABLE_LON_LAT]:c,[ka.SPHERICAL_ECEF]:qa,[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:null,[ka.PLATE_CARREE]:T,[ka.WGS84]:c,[ka.WGS84_ECEF]:Ea},[ka.PLATE_CARREE]:{[ka.CGCS2000]:ia,
[ka.GCSMARS2000]:null,[ka.GCSMOON2000]:null,[ka.LON_LAT]:ia,[ka.WGS84_COMPARABLE_LON_LAT]:ia,[ka.SPHERICAL_ECEF]:function(V,ja,ba,na){ia(V,ja,ba,na);qa(ba,na,ba,na)},[ka.SPHERICAL_MARS_PCPF]:null,[ka.SPHERICAL_MOON_PCPF]:null,[ka.UNKNOWN]:null,[ka.WEB_MERCATOR]:function(V,ja,ba,na){ia(V,ja,ba,na);S(ba,na,ba,na)},[ka.PLATE_CARREE]:c,[ka.WGS84]:ia,[ka.WGS84_ECEF]:function(V,ja,ba,na){ia(V,ja,ba,na);Ea(ba,na,ba,na)}}},Bb={spatialReference:null,spatialReferenceId:ka.UNKNOWN},Rb={spatialReference:null,
spatialReferenceId:ka.UNKNOWN},Pb=ab(),bc=ab(),fb=t.deg2rad(1),qb=t.rad2deg(1),Ua=E.create(),kb=E.create(),rb=E.create(),Na=E.create(),Cb=E.create();e.canProjectToWGS84ComparableLonLat=function(V){if(H.isNone(V))return!1;V=Sa(V,Bb);return!!lb[V][ka.WGS84_COMPARABLE_LON_LAT]};e.canProjectWithoutEngine=D;e.computeENUToSphericalPCPFLocalRotation=Ta;e.computeSphericalPCPFToENULocalRotation=Oa;e.computeTranslationToOriginAndRotation=function(V,ja,ba,na){if(H.isNone(V)||H.isNone(na))return!1;var xa=Sa(V,
Bb),za=Sa(na,Rb);if(xa===za&&za!==ka.SPHERICAL_ECEF&&za!==ka.SPHERICAL_MARS_PCPF&&za!==ka.SPHERICAL_MOON_PCPF&&(xa!==ka.UNKNOWN||x.equals(V,na)))return r.fromTranslation(ba,ja),!0;if(za===ka.SPHERICAL_ECEF||za===ka.SPHERICAL_MARS_PCPF||za===ka.SPHERICAL_MOON_PCPF){xa=lb[xa][ka.LON_LAT];za=lb[ka.LON_LAT][za];if(H.isNone(xa)||H.isNone(za))return!1;xa(ja,0,kb,0);za(kb,0,rb,0);Ta(fb*kb[0],fb*kb[1],ba);ba[12]=rb[0];ba[13]=rb[1];ba[14]=rb[2];return!0}if((za===ka.WEB_MERCATOR||za===ka.PLATE_CARREE)&&(xa===
ka.WGS84||xa===ka.CGCS2000&&za===ka.PLATE_CARREE||xa===ka.SPHERICAL_ECEF||xa===ka.WEB_MERCATOR)){V=lb[xa][ka.LON_LAT];za=lb[ka.LON_LAT][za];if(H.isNone(V)||H.isNone(za))return!1;V(ja,0,kb,0);za(kb,0,rb,0);xa===ka.SPHERICAL_ECEF?Oa(fb*kb[0],fb*kb[1],ba):r.identity(ba);ba[12]=rb[0];ba[13]=rb[1];ba[14]=rb[2];return!0}return!1};e.getProjectorName=function(V,ja){switch(sa(V,ja,Pb)){case c:return"copy3";case qa:return"wgs84ToSphericalECEF";case S:return"wgs84ToWebMercator";case T:return"wgs84ToPlateCarree";
case Ea:return"wgs84ToWGS84ECEF";case n:return"webMercatorToWGS84";case fa:return"webMercatorToSphericalECEF";case m:return"webMercatorToWGS84ECEF";case ea:return"webMercatorToPlateCarree";case Da:return"wgs84ECEFToWGS84";case Fa:return"wgs84ECEFToSphericalECEF";case Pa:return"wgs84ECEFToWebMercator";case Aa:return"sphericalECEFToWGS84";case Ha:return"sphericalECEFToWebMercator";case ya:return"sphericalMarsPCPFToMars2000";case wa:return"sphericalMoonPCPFToMoon2000";case Ga:return"sphericalECEFToWGS84ECEF";
case da:return"mars2000ToSphericalPCPF";case P:return"moon2000ToSphericalPCPF";default:return null}};e.getTransformation=W;e.getTransformations=function(V,ja,ba=null){if(H.isNone(Qa))throw new pb;V=Qa._getTransformationBySuitability(b,V,ja,ba,null==ba?void 0:ba.spatialReference);if(null!==V){ja=[];for(const na of V)ja.push(F.fromGE(na));return ja}return[]};e.initializeProjection=function(V,ja,ba,na){return q.apply(this,arguments)};e.isLoaded=X;e.load=A;e.localLinearScaleFactors=function(V,ja,ba,na){if(H.isNone(ja)||
H.isNone(na))return!1;const xa=Sa(ja,Bb);var za=Sa(na,Rb);if(xa===za&&xa!==ka.UNKNOWN||x.equals(ja,na))return ba[0]=1,ba[1]=1,ba[2]=1,!0;if(xa===ka.SPHERICAL_ECEF){ja=u.length(V);V=ja/Math.sqrt(V[0]*V[0]+V[1]*V[1]);ja/=z.earth.radius;if(za===ka.WEB_MERCATOR)return ba[0]=V*ja,ba[1]=V*ja,ba[2]=1,!0;if(za===ka.WGS84||za===ka.CGCS2000)return za=zb,ba[0]=za*V*ja,ba[1]=za*ja,ba[2]=1,!0}else if(xa===ka.PLATE_CARREE){if(za===ka.WGS84||za===ka.CGCS2000)return ba[0]=zb,ba[1]=zb,ba[2]=1,!0;if(za===ka.WEB_MERCATOR)return za=
V[1]/z.earth.radius,ba[0]=1,ba[1]=1/Math.cos(za),ba[2]=1,!0}return!1};e.lonLatToSphericalPCPF=function(V,ja,ba,na,xa=0){na+=xa;xa=Math.cos(ba);V[0]=Math.cos(ja)*xa*na;V[1]=Math.sin(ja)*xa*na;V[2]=Math.sin(ba)*na};e.lonLatToWebMercatorComparable=G;e.project=C;e.projectBoundingRect=function(V,ja,ba,na){if(null==V)return!1;if(x.equals(ja,na))return ca.copy(ba,V),!0;Ua[0]=V[0];Ua[1]=V[1];Ua[2]=0;if(!va(Ua,ja,0,Ua,na,0,1))return!1;ba[0]=Ua[0];ba[1]=Ua[1];Ua[0]=V[2];Ua[1]=V[3];Ua[2]=0;if(!va(Ua,ja,0,Ua,
na,0,1))return!1;ba[2]=Ua[0];ba[3]=Ua[1];return!0};e.projectBoundingSphere=function(V,ja,ba,na){if(H.isNone(ja)||H.isNone(na))return!1;ja=bb(ja,na,bc);if(ja.projector===c)return ba[0]=V[0],ba[1]=V[1],ba[2]=V[2],ba[3]=V[3],!0;if(H.isNone(ja.projector))return!1;const {source:xa,dest:za}=ja;if(za.spatialReferenceId===ka.WEB_MERCATOR){ja=lb[xa.spatialReferenceId][ka.WGS84];if(H.isNone(ja))return!1;ja(V,0,kb,0);S(kb,0,ba,0);ba[3]=Ka(kb[1],V[2],V[3],z.earth.radius);return!0}if(xa.spatialReferenceId!==ka.WGS84&&
xa.spatialReferenceId!==ka.CGCS2000||za.spatialReferenceId!==ka.PLATE_CARREE)ja.projector(V,0,ba,0),ba[3]=V[3]*xa.metersPerUnit/za.metersPerUnit;else{na=lb[ka.SPHERICAL_ECEF][ka.PLATE_CARREE];let Ia=V[3];H.isSome(lb[xa.spatialReferenceId][ka.SPHERICAL_ECEF])&&H.isSome(na)&&(Ia=Ka(V[1],V[2],V[3],z.earth.radius));ja.projector(V,0,ba,0);ba[3]=Ia}return!0};e.projectBuffer=va;e.projectDirection=function(V,ja,ba,na,xa){u.copy(Na,V);u.add(Cb,V,ja);la(Na,ba,Na,xa);la(Cb,ba,Cb,xa);u.subtract(na,Cb,Na);u.normalize(na,
na)};e.projectExtent=function(V,ja,ba=ja.spatialReference,na=0){return H.isSome(ba)&&H.isSome(oa(V,V.spatialReference,ja,ba,na))};e.projectMany=O;e.projectMultipoint=function(V,ja,ba=ja.spatialReference,na=0){return H.isNone(ba)?!1:H.isSome(M(V,V.spatialReference,ja,ba,na))};e.projectPoint=function(V,ja,ba=ja.spatialReference,na=0){return H.isNone(ba)?!1:H.isSome(g(V,V.spatialReference,ja,ba,na))};e.projectPointToVector=function(V,ja,ba,na=0){Na[0]=V.x;Na[1]=V.y;const xa=V.z;Na[2]=void 0!==xa?xa:
na;return va(Na,V.spatialReference,0,ja,ba,0,1)};e.projectPointToWGS84ComparableLonLat=function(V,ja){Na[0]=V.x;Na[1]=V.y;const ba=V.z;Na[2]=void 0!==ba?ba:0;return pa(Na,V.spatialReference,ja)};e.projectPolygon=function(V,ja,ba=ja.spatialReference,na=0){return H.isSome(ba)&&H.isSome(ha(V,V.spatialReference,ja,ba,na))};e.projectPolyline=function(V,ja,ba=ja.spatialReference,na=0){return H.isSome(ba)&&H.isSome(U(V,V.spatialReference,ja,ba,na))};e.projectVectorToDehydratedPoint=function(V,ja,ba){return va(V,
ja,0,Na,ba.spatialReference,0,1)?(ba.x=Na[0],ba.y=Na[1],ba.z=Na[2],ba):null};e.projectVectorToPoint=function(V,ja,ba){if(H.isNone(ja)||H.isNone(ba))return null;const na=new K({spatialReference:ba});return va(V,ja,0,Na,ba,0,1)?(na.x=Na[0],na.y=Na[1],na.z=Na[2],na):null};e.projectVectorToVector=la;e.projectVectorToWGS84ComparableLonLat=function(V,ja,ba){return pa(V,ja,ba)};e.projectWithoutEngine=a;e.projectXYZToVector=ma;e.sphericalPCPFtoLonLatElevation=ra;e.tryProjectWithZConversion=function(V,ja){try{const ba=
C(V,ja);if(null==ba)return null;"xmin"in V&&"xmin"in ba&&(ba.zmin=V.zmin,ba.zmax=V.zmax);const na=I.getGeometryZScaler(ba.type,V.spatialReference,ja);H.isSome(na)&&na(ba);return ba}catch(ba){if(!(ba instanceof pb))throw ba;return null}};e.unload=function(){$a=b=Qa=null;Ra={}};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ./maybe ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),
function(k,e,Z,aa,t,H,y,p,r){function u(a){if(a=W[a])return a;throw Error("unknown type");}function E(a){return O[a].baseUnit}function Q(a,g=null){g=g||u(a);return O[g].baseUnit===a}function R(a,g,M){if(g===M)return a;const U=u(g);if(U!==u(M))throw Error("incompatible units");a=Q(g,U)?a:a*O[U].units[g].inBaseUnits;return Q(M,U)?a:a/O[U].units[M].inBaseUnits}function h(a,g){return 3E3>R(a,g,"meters")?"meters":"kilometers"}function K(a,g){return 1E5>R(a,g,"meters")?"meters":"kilometers"}function d(a,
g){return 1E3>R(a,g,"feet")?"feet":"miles"}function l(a,g){return 1E5>R(a,g,"feet")?"feet":"miles"}function N(a){return C.fromJSON(a.toLowerCase())||null}function ca(a,g=y.earth.metersPerDegree){return z(a,!0)||g}function z(a,g=!1){let M,U,ha=null;null!=a&&("object"===typeof a?(M=a.wkid,U=a.wkt):"number"===typeof a?M=a:"string"===typeof a&&(U=a));if(M){if(p.isWKIDFromMars(M))return y.mars.metersPerDegree;if(p.isWKIDFromMoon(M))return y.moon.metersPerDegree;ha=I.values[I[M]];!ha&&g&&A.has(M)&&(ha=
x)}else U&&(/^PROJCS/i.test(U)?ha=L(w.exec(U),ha):/^GEOCCS/i.test(U)&&(ha=L(X.exec(U),ha)));return ha}function L(a,g){return a&&a[1]?parseFloat(a[1].split(",")[1]):g}function F(a){var g=null;if(null!=a)if("object"===typeof a){var M=a.wkid;var U=a.wkt}else"number"===typeof a?M=a:"string"===typeof a&&(U=a);if(M)g=I.units[I[M]];else if(U&&(a=/^PROJCS/i.test(U)?w:/^GEOCCS/i.test(U)?X:null)&&(U=a.exec(U))&&U[1]&&(U=U[1],g=(g=/[\\"\\']{1}([^\\"\\']+)/.exec(U))&&g[1],!g||-1===I.units.indexOf(g)))for(U=parseFloat(U.split(",")[1]),
g=null,a=I.values,M=0;M<a.length;++M)if(1E-7>Math.abs(U-a[M])){g=I.units[M];break}return aa.isSome(g)?N(g):null}const x=y.earth.radius*Math.PI/200,w=/UNIT\[([^\]]+)\]\]$/i,I=r,X=/UNIT\[([^\]]+)\]/i,A=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),C=Z.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",
chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});e={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},
"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};r={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(a=>a*a)(1200/3937)},acres:{inBaseUnits:4046.8564224},
ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const O={length:{baseUnit:"meters",units:e},area:{baseUnit:"square-meters",units:r},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},
"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},W=function(){const a={};for(const g in O)for(const M in O[g].units)a[M]=g;return a}(),D={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",
esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},q={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};e=Z.strict()(D);r=Z.strict()(q);Z=Z.strict()({...D,...q});k.areaUnitsJSONMap=e;k.baseUnitForUnit=function(a){return E(u(a))};
k.baseUnitForUnitType=E;k.convertUnit=R;k.getDefaultUnitSystem=function(a){if(!a)return null;switch(F(a)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};k.getMetersPerUnit=
z;k.getMetersPerUnitForSR=ca;k.getMetersPerVerticalUnitForSR=function(a){if(a&&"object"===typeof a&&!p.isEarth(a))return 1;a=ca(a);return 1E5<a?1:a};k.getUnitString=F;k.getVerticalUnitStringForSR=function(a){const g=ca(a),M=a instanceof H?t.getReferenceEllipsoid(a).metersPerDegree:1E5;return g>=M?"meters":F(a)};k.inchesPerMeter=39.37;k.isBaseUnit=Q;k.isMeasurementSystem=function(a){return"imperial"===a||"metric"===a};k.lengthToDegrees=function(a,g,M){return R(a,g,"meters")/(M*Math.PI/180)};k.lengthUnitsJSONMap=
r;k.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");k.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");k.preferredImperialAreaUnit=function(a,g){return 1E6>R(a,g,"square-feet")?"square-feet":"square-miles"};k.preferredImperialLengthUnit=d;k.preferredImperialVerticalLengthUnit=l;k.preferredLengthUnit=function(a,
g,M){switch(M){case "metric":return h(a,g);case "imperial":return d(a,g);default:return M}};k.preferredMetricAreaUnit=function(a,g){return 3E6>R(a,g,"square-meters")?"square-meters":"square-kilometers"};k.preferredMetricLengthUnit=h;k.preferredMetricVerticalLengthUnit=K;k.preferredVerticalLengthUnit=function(a,g,M){switch(M){case "metric":return K(a,g);case "imperial":return l(a,g);default:return M}};k.unitFromRESTJSON=N;k.unitToRESTJSON=function(a){return C.toJSON(a)||null};k.unitType=u;k.unitsJSONMap=
Z;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(k,e,Z,aa){function t(u){return new e({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${u.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}
const H=t(Z.earth),y=t(Z.mars),p=t(Z.moon),r=new e({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${Z.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});k.SphericalECEFSpatialReference=H;k.SphericalPCPFMars=
y;k.SphericalPCPFMoon=p;k.WGS84ECEFSpatialReference=r;k.createSphericalPCPF=t;k.getReferenceEllipsoid=function(u){return u&&(aa.isMars(u)||u===y)?Z.mars:u&&(aa.isMoon(u)||u===p)?Z.moon:Z.earth};k.getReferenceEllipsoidFromWKID=function(u){return aa.isWKIDFromMars(u)?Z.mars:aa.isWKIDFromMoon(u)?Z.moon:Z.earth};k.getSphericalPCPF=function(u){return u&&(aa.isMars(u)||u===y)?y:u&&(aa.isMoon(u)||u===p)?p:H};k.getSphericalPCPFForEllipsoid=function(u){return u&&u===Z.mars?y:u&&u===Z.moon?p:H};Object.defineProperty(k,
"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(k,e,Z){function aa(c,n){c[0]=n[0];c[1]=n[1];c[2]=n[2];c[3]=n[3];c[4]=n[4];c[5]=n[5];c[6]=n[6];c[7]=n[7];c[8]=n[8];c[9]=n[9];c[10]=n[10];c[11]=n[11];c[12]=n[12];c[13]=n[13];c[14]=n[14];c[15]=n[15];return c}function t(c,n,fa,m,G,S,T,ia,ea,J,P,da,qa,ra,wa,ya,Aa){c[0]=n;c[1]=fa;c[2]=m;c[3]=G;c[4]=S;c[5]=T;c[6]=ia;c[7]=ea;c[8]=J;c[9]=P;c[10]=da;c[11]=qa;c[12]=ra;c[13]=wa;c[14]=ya;c[15]=Aa;return c}
function H(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function y(c,n){if(c===n){const fa=n[1],m=n[2],G=n[3],S=n[6],T=n[7],ia=n[11];c[1]=n[4];c[2]=n[8];c[3]=n[12];c[4]=fa;c[6]=n[9];c[7]=n[13];c[8]=m;c[9]=S;c[11]=n[14];c[12]=G;c[13]=T;c[14]=ia}else c[0]=n[0],c[1]=n[4],c[2]=n[8],c[3]=n[12],c[4]=n[1],c[5]=n[5],c[6]=n[9],c[7]=n[13],c[8]=n[2],c[9]=n[6],c[10]=n[10],c[11]=n[14],c[12]=n[3],c[13]=n[7],c[14]=n[11],c[15]=n[15];
return c}function p(c,n){const fa=n[0],m=n[1],G=n[2],S=n[3],T=n[4],ia=n[5],ea=n[6],J=n[7],P=n[8],da=n[9],qa=n[10],ra=n[11],wa=n[12],ya=n[13],Aa=n[14];n=n[15];const Ha=fa*ia-m*T,Ga=fa*ea-G*T,Ea=fa*J-S*T,Da=m*ea-G*ia,Fa=m*J-S*ia,Pa=G*J-S*ea,sa=P*ya-da*wa,bb=P*Aa-qa*wa,ab=P*n-ra*wa,Qa=da*Aa-qa*ya,b=da*n-ra*ya,$a=qa*n-ra*Aa;let Ra=Ha*$a-Ga*b+Ea*Qa+Da*ab-Fa*bb+Pa*sa;if(!Ra)return null;Ra=1/Ra;c[0]=(ia*$a-ea*b+J*Qa)*Ra;c[1]=(G*b-m*$a-S*Qa)*Ra;c[2]=(ya*Pa-Aa*Fa+n*Da)*Ra;c[3]=(qa*Fa-da*Pa-ra*Da)*Ra;c[4]=
(ea*ab-T*$a-J*bb)*Ra;c[5]=(fa*$a-G*ab+S*bb)*Ra;c[6]=(Aa*Ea-wa*Pa-n*Ga)*Ra;c[7]=(P*Pa-qa*Ea+ra*Ga)*Ra;c[8]=(T*b-ia*ab+J*sa)*Ra;c[9]=(m*ab-fa*b-S*sa)*Ra;c[10]=(wa*Fa-ya*Ea+n*Ha)*Ra;c[11]=(da*Ea-P*Fa-ra*Ha)*Ra;c[12]=(ia*bb-T*Qa-ea*sa)*Ra;c[13]=(fa*Qa-m*bb+G*sa)*Ra;c[14]=(ya*Ga-wa*Da-Aa*Ha)*Ra;c[15]=(P*Da-da*Ga+qa*Ha)*Ra;return c}function r(c,n){const fa=n[0],m=n[1],G=n[2],S=n[3],T=n[4],ia=n[5],ea=n[6],J=n[7],P=n[8],da=n[9],qa=n[10],ra=n[11],wa=n[12],ya=n[13],Aa=n[14];n=n[15];c[0]=ia*(qa*n-ra*Aa)-da*
(ea*n-J*Aa)+ya*(ea*ra-J*qa);c[1]=-(m*(qa*n-ra*Aa)-da*(G*n-S*Aa)+ya*(G*ra-S*qa));c[2]=m*(ea*n-J*Aa)-ia*(G*n-S*Aa)+ya*(G*J-S*ea);c[3]=-(m*(ea*ra-J*qa)-ia*(G*ra-S*qa)+da*(G*J-S*ea));c[4]=-(T*(qa*n-ra*Aa)-P*(ea*n-J*Aa)+wa*(ea*ra-J*qa));c[5]=fa*(qa*n-ra*Aa)-P*(G*n-S*Aa)+wa*(G*ra-S*qa);c[6]=-(fa*(ea*n-J*Aa)-T*(G*n-S*Aa)+wa*(G*J-S*ea));c[7]=fa*(ea*ra-J*qa)-T*(G*ra-S*qa)+P*(G*J-S*ea);c[8]=T*(da*n-ra*ya)-P*(ia*n-J*ya)+wa*(ia*ra-J*da);c[9]=-(fa*(da*n-ra*ya)-P*(m*n-S*ya)+wa*(m*ra-S*da));c[10]=fa*(ia*n-J*ya)-
T*(m*n-S*ya)+wa*(m*J-S*ia);c[11]=-(fa*(ia*ra-J*da)-T*(m*ra-S*da)+P*(m*J-S*ia));c[12]=-(T*(da*Aa-qa*ya)-P*(ia*Aa-ea*ya)+wa*(ia*qa-ea*da));c[13]=fa*(da*Aa-qa*ya)-P*(m*Aa-G*ya)+wa*(m*qa-G*da);c[14]=-(fa*(ia*Aa-ea*ya)-T*(m*Aa-G*ya)+wa*(m*ea-G*ia));c[15]=fa*(ia*qa-ea*da)-T*(m*qa-G*da)+P*(m*ea-G*ia);return c}function u(c){const n=c[0],fa=c[1],m=c[2],G=c[3],S=c[4],T=c[5],ia=c[6],ea=c[7],J=c[8],P=c[9],da=c[10],qa=c[11],ra=c[12],wa=c[13],ya=c[14];c=c[15];return(n*T-fa*S)*(da*c-qa*ya)-(n*ia-m*S)*(P*c-qa*wa)+
(n*ea-G*S)*(P*ya-da*wa)+(fa*ia-m*T)*(J*c-qa*ra)-(fa*ea-G*T)*(J*ya-da*ra)+(m*ea-G*ia)*(J*wa-P*ra)}function E(c,n,fa){const m=n[0],G=n[1],S=n[2],T=n[3],ia=n[4],ea=n[5],J=n[6],P=n[7],da=n[8],qa=n[9],ra=n[10],wa=n[11],ya=n[12],Aa=n[13],Ha=n[14];n=n[15];let Ga=fa[0],Ea=fa[1],Da=fa[2],Fa=fa[3];c[0]=Ga*m+Ea*ia+Da*da+Fa*ya;c[1]=Ga*G+Ea*ea+Da*qa+Fa*Aa;c[2]=Ga*S+Ea*J+Da*ra+Fa*Ha;c[3]=Ga*T+Ea*P+Da*wa+Fa*n;Ga=fa[4];Ea=fa[5];Da=fa[6];Fa=fa[7];c[4]=Ga*m+Ea*ia+Da*da+Fa*ya;c[5]=Ga*G+Ea*ea+Da*qa+Fa*Aa;c[6]=Ga*S+Ea*
J+Da*ra+Fa*Ha;c[7]=Ga*T+Ea*P+Da*wa+Fa*n;Ga=fa[8];Ea=fa[9];Da=fa[10];Fa=fa[11];c[8]=Ga*m+Ea*ia+Da*da+Fa*ya;c[9]=Ga*G+Ea*ea+Da*qa+Fa*Aa;c[10]=Ga*S+Ea*J+Da*ra+Fa*Ha;c[11]=Ga*T+Ea*P+Da*wa+Fa*n;Ga=fa[12];Ea=fa[13];Da=fa[14];Fa=fa[15];c[12]=Ga*m+Ea*ia+Da*da+Fa*ya;c[13]=Ga*G+Ea*ea+Da*qa+Fa*Aa;c[14]=Ga*S+Ea*J+Da*ra+Fa*Ha;c[15]=Ga*T+Ea*P+Da*wa+Fa*n;return c}function Q(c,n,fa){const m=fa[0],G=fa[1];fa=fa[2];let S=void 0,T=void 0,ia=void 0,ea=void 0,J=void 0,P=void 0,da=void 0,qa=void 0,ra=void 0,wa=void 0,
ya=void 0,Aa=void 0;n===c?(c[12]=n[0]*m+n[4]*G+n[8]*fa+n[12],c[13]=n[1]*m+n[5]*G+n[9]*fa+n[13],c[14]=n[2]*m+n[6]*G+n[10]*fa+n[14],c[15]=n[3]*m+n[7]*G+n[11]*fa+n[15]):(S=n[0],T=n[1],ia=n[2],ea=n[3],J=n[4],P=n[5],da=n[6],qa=n[7],ra=n[8],wa=n[9],ya=n[10],Aa=n[11],c[0]=S,c[1]=T,c[2]=ia,c[3]=ea,c[4]=J,c[5]=P,c[6]=da,c[7]=qa,c[8]=ra,c[9]=wa,c[10]=ya,c[11]=Aa,c[12]=S*m+J*G+ra*fa+n[12],c[13]=T*m+P*G+wa*fa+n[13],c[14]=ia*m+da*G+ya*fa+n[14],c[15]=ea*m+qa*G+Aa*fa+n[15]);return c}function R(c,n,fa){const m=fa[0],
G=fa[1];fa=fa[2];c[0]=n[0]*m;c[1]=n[1]*m;c[2]=n[2]*m;c[3]=n[3]*m;c[4]=n[4]*G;c[5]=n[5]*G;c[6]=n[6]*G;c[7]=n[7]*G;c[8]=n[8]*fa;c[9]=n[9]*fa;c[10]=n[10]*fa;c[11]=n[11]*fa;c[12]=n[12];c[13]=n[13];c[14]=n[14];c[15]=n[15];return c}function h(c,n,fa,m){let G=m[0],S=m[1];m=m[2];let T=Math.sqrt(G*G+S*S+m*m);var ia=void 0,ea=void 0;let J=void 0,P=void 0,da=void 0,qa=void 0,ra=void 0,wa=void 0,ya=void 0,Aa=void 0,Ha=void 0,Ga=void 0,Ea=void 0,Da=void 0,Fa=void 0,Pa=void 0,sa=void 0,bb=void 0,ab=void 0,Qa=void 0,
b=void 0,$a=void 0;ea=ia=void 0;if(T<Z.EPSILON)return null;T=1/T;G*=T;S*=T;m*=T;ia=Math.sin(fa);ea=Math.cos(fa);J=1-ea;P=n[0];da=n[1];qa=n[2];ra=n[3];wa=n[4];ya=n[5];Aa=n[6];Ha=n[7];Ga=n[8];Ea=n[9];Da=n[10];Fa=n[11];Pa=G*G*J+ea;sa=S*G*J+m*ia;bb=m*G*J-S*ia;ab=G*S*J-m*ia;Qa=S*S*J+ea;b=m*S*J+G*ia;$a=G*m*J+S*ia;ia=S*m*J-G*ia;ea=m*m*J+ea;c[0]=P*Pa+wa*sa+Ga*bb;c[1]=da*Pa+ya*sa+Ea*bb;c[2]=qa*Pa+Aa*sa+Da*bb;c[3]=ra*Pa+Ha*sa+Fa*bb;c[4]=P*ab+wa*Qa+Ga*b;c[5]=da*ab+ya*Qa+Ea*b;c[6]=qa*ab+Aa*Qa+Da*b;c[7]=ra*ab+
Ha*Qa+Fa*b;c[8]=P*$a+wa*ia+Ga*ea;c[9]=da*$a+ya*ia+Ea*ea;c[10]=qa*$a+Aa*ia+Da*ea;c[11]=ra*$a+Ha*ia+Fa*ea;n!==c&&(c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]);return c}function K(c,n,fa){const m=Math.sin(fa);fa=Math.cos(fa);const G=n[4],S=n[5],T=n[6],ia=n[7],ea=n[8],J=n[9],P=n[10],da=n[11];n!==c&&(c[0]=n[0],c[1]=n[1],c[2]=n[2],c[3]=n[3],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]);c[4]=G*fa+ea*m;c[5]=S*fa+J*m;c[6]=T*fa+P*m;c[7]=ia*fa+da*m;c[8]=ea*fa-G*m;c[9]=J*fa-S*m;c[10]=P*fa-T*m;c[11]=da*
fa-ia*m;return c}function d(c,n,fa){const m=Math.sin(fa);fa=Math.cos(fa);const G=n[0],S=n[1],T=n[2],ia=n[3],ea=n[8],J=n[9],P=n[10],da=n[11];n!==c&&(c[4]=n[4],c[5]=n[5],c[6]=n[6],c[7]=n[7],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]);c[0]=G*fa-ea*m;c[1]=S*fa-J*m;c[2]=T*fa-P*m;c[3]=ia*fa-da*m;c[8]=G*m+ea*fa;c[9]=S*m+J*fa;c[10]=T*m+P*fa;c[11]=ia*m+da*fa;return c}function l(c,n,fa){const m=Math.sin(fa);fa=Math.cos(fa);const G=n[0],S=n[1],T=n[2],ia=n[3],ea=n[4],J=n[5],P=n[6],da=n[7];n!==c&&(c[8]=n[8],
c[9]=n[9],c[10]=n[10],c[11]=n[11],c[12]=n[12],c[13]=n[13],c[14]=n[14],c[15]=n[15]);c[0]=G*fa+ea*m;c[1]=S*fa+J*m;c[2]=T*fa+P*m;c[3]=ia*fa+da*m;c[4]=ea*fa-G*m;c[5]=J*fa-S*m;c[6]=P*fa-T*m;c[7]=da*fa-ia*m;return c}function N(c,n){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=n[0];c[13]=n[1];c[14]=n[2];c[15]=1;return c}function ca(c,n){c[0]=n[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=n[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=n[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=
1;return c}function z(c,n,fa){let m=fa[0],G=fa[1];fa=fa[2];let S=Math.sqrt(m*m+G*G+fa*fa),T=void 0,ia=void 0,ea=void 0;if(S<Z.EPSILON)return null;S=1/S;m*=S;G*=S;fa*=S;T=Math.sin(n);ia=Math.cos(n);ea=1-ia;c[0]=m*m*ea+ia;c[1]=G*m*ea+fa*T;c[2]=fa*m*ea-G*T;c[3]=0;c[4]=m*G*ea-fa*T;c[5]=G*G*ea+ia;c[6]=fa*G*ea+m*T;c[7]=0;c[8]=m*fa*ea+G*T;c[9]=G*fa*ea-m*T;c[10]=fa*fa*ea+ia;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function L(c,n){const fa=Math.sin(n);n=Math.cos(n);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=
0;c[5]=n;c[6]=fa;c[7]=0;c[8]=0;c[9]=-fa;c[10]=n;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function F(c,n){const fa=Math.sin(n);n=Math.cos(n);c[0]=n;c[1]=0;c[2]=-fa;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=fa;c[9]=0;c[10]=n;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function x(c,n){const fa=Math.sin(n);n=Math.cos(n);c[0]=n;c[1]=fa;c[2]=0;c[3]=0;c[4]=-fa;c[5]=n;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function w(c,n,fa){var m=n[0],G=n[1],S=n[2],
T=n[3],ia=m+m,ea=G+G;const J=S+S;n=m*ia;const P=m*ea;m*=J;const da=G*ea;G*=J;S*=J;ia*=T;ea*=T;T*=J;c[0]=1-(da+S);c[1]=P+T;c[2]=m-ea;c[3]=0;c[4]=P-T;c[5]=1-(n+S);c[6]=G+ia;c[7]=0;c[8]=m+ea;c[9]=G-ia;c[10]=1-(n+da);c[11]=0;c[12]=fa[0];c[13]=fa[1];c[14]=fa[2];c[15]=1;return c}function I(c,n){const fa=Sa,m=-n[0],G=-n[1],S=-n[2],T=n[3],ia=n[4],ea=n[5],J=n[6],P=n[7],da=m*m+G*G+S*S+T*T;0<da?(fa[0]=2*(ia*T+P*m+ea*S-J*G)/da,fa[1]=2*(ea*T+P*G+J*m-ia*S)/da,fa[2]=2*(J*T+P*S+ia*G-ea*m)/da):(fa[0]=2*(ia*T+P*m+
ea*S-J*G),fa[1]=2*(ea*T+P*G+J*m-ia*S),fa[2]=2*(J*T+P*S+ia*G-ea*m));w(c,n,fa);return c}function X(c,n){c[0]=n[12];c[1]=n[13];c[2]=n[14];return c}function A(c,n){const fa=n[0],m=n[1],G=n[2],S=n[4],T=n[5],ia=n[6],ea=n[8],J=n[9];n=n[10];c[0]=Math.sqrt(fa*fa+m*m+G*G);c[1]=Math.sqrt(S*S+T*T+ia*ia);c[2]=Math.sqrt(ea*ea+J*J+n*n);return c}function C(c,n){const fa=n[0]+n[5]+n[10];let m=0;0<fa?(m=2*Math.sqrt(fa+1),c[3]=.25*m,c[0]=(n[6]-n[9])/m,c[1]=(n[8]-n[2])/m,c[2]=(n[1]-n[4])/m):n[0]>n[5]&&n[0]>n[10]?(m=
2*Math.sqrt(1+n[0]-n[5]-n[10]),c[3]=(n[6]-n[9])/m,c[0]=.25*m,c[1]=(n[1]+n[4])/m,c[2]=(n[8]+n[2])/m):n[5]>n[10]?(m=2*Math.sqrt(1+n[5]-n[0]-n[10]),c[3]=(n[8]-n[2])/m,c[0]=(n[1]+n[4])/m,c[1]=.25*m,c[2]=(n[6]+n[9])/m):(m=2*Math.sqrt(1+n[10]-n[0]-n[5]),c[3]=(n[1]-n[4])/m,c[0]=(n[8]+n[2])/m,c[1]=(n[6]+n[9])/m,c[2]=.25*m);return c}function O(c,n,fa,m){var G=n[0],S=n[1],T=n[2],ia=n[3],ea=G+G,J=S+S,P=T+T;n=G*ea;const da=G*J;G*=P;const qa=S*J;S*=P;T*=P;ea*=ia;J*=ia;ia*=P;P=m[0];const ra=m[1];m=m[2];c[0]=(1-
(qa+T))*P;c[1]=(da+ia)*P;c[2]=(G-J)*P;c[3]=0;c[4]=(da-ia)*ra;c[5]=(1-(n+T))*ra;c[6]=(S+ea)*ra;c[7]=0;c[8]=(G+J)*m;c[9]=(S-ea)*m;c[10]=(1-(n+qa))*m;c[11]=0;c[12]=fa[0];c[13]=fa[1];c[14]=fa[2];c[15]=1;return c}function W(c,n,fa,m,G){var S=n[0],T=n[1],ia=n[2],ea=n[3],J=S+S,P=T+T,da=ia+ia;n=S*J;var qa=S*P,ra=S*da;S=T*P;T*=da;var wa=ia*da;ia=ea*J;P*=ea;const ya=ea*da;var Aa=m[0],Ha=m[1];da=m[2];m=G[0];ea=G[1];G=G[2];J=(1-(S+wa))*Aa;const Ga=(qa+ya)*Aa;Aa*=ra-P;qa=(qa-ya)*Ha;wa=(1-(n+wa))*Ha;Ha*=T+ia;ra=
(ra+P)*da;T=(T-ia)*da;n=(1-(n+S))*da;c[0]=J;c[1]=Ga;c[2]=Aa;c[3]=0;c[4]=qa;c[5]=wa;c[6]=Ha;c[7]=0;c[8]=ra;c[9]=T;c[10]=n;c[11]=0;c[12]=fa[0]+m-(J*m+qa*ea+ra*G);c[13]=fa[1]+ea-(Ga*m+wa*ea+T*G);c[14]=fa[2]+G-(Aa*m+Ha*ea+n*G);c[15]=1;return c}function D(c,n){var fa=n[0],m=n[1],G=n[2];n=n[3];var S=fa+fa,T=m+m;const ia=G+G;fa*=S;const ea=m*S;m*=T;const J=G*S,P=G*T;G*=ia;S*=n;T*=n;n*=ia;c[0]=1-m-G;c[1]=ea+n;c[2]=J-T;c[3]=0;c[4]=ea-n;c[5]=1-fa-G;c[6]=P+S;c[7]=0;c[8]=J+T;c[9]=P-S;c[10]=1-fa-m;c[11]=0;c[12]=
0;c[13]=0;c[14]=0;c[15]=1;return c}function q(c,n,fa,m,G,S,T){const ia=1/(fa-n),ea=1/(G-m),J=1/(S-T);c[0]=2*S*ia;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=2*S*ea;c[6]=0;c[7]=0;c[8]=(fa+n)*ia;c[9]=(G+m)*ea;c[10]=(T+S)*J;c[11]=-1;c[12]=0;c[13]=0;c[14]=T*S*2*J;c[15]=0;return c}function a(c,n,fa,m,G){n=1/Math.tan(n/2);let S=void 0;c[0]=n/fa;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=n;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[11]=-1;c[12]=0;c[13]=0;c[15]=0;null!=G&&Infinity!==G?(S=1/(m-G),c[10]=(G+m)*S,c[14]=2*G*m*S):(c[10]=-1,c[14]=
-2*m);return c}function g(c,n,fa,m){const G=Math.tan(n.upDegrees*Math.PI/180),S=Math.tan(n.downDegrees*Math.PI/180),T=Math.tan(n.leftDegrees*Math.PI/180);n=Math.tan(n.rightDegrees*Math.PI/180);const ia=2/(T+n),ea=2/(G+S);c[0]=ia;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=ea;c[6]=0;c[7]=0;c[8]=-((T-n)*ia*.5);c[9]=(G-S)*ea*.5;c[10]=m/(fa-m);c[11]=-1;c[12]=0;c[13]=0;c[14]=m*fa/(fa-m);c[15]=0;return c}function M(c,n,fa,m,G,S,T){const ia=1/(n-fa),ea=1/(m-G),J=1/(S-T);c[0]=-2*ia;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=
-2*ea;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=2*J;c[11]=0;c[12]=(n+fa)*ia;c[13]=(G+m)*ea;c[14]=(T+S)*J;c[15]=1;return c}function U(c,n,fa,m){let G=void 0,S=void 0;var T=void 0,ia=void 0;let ea=void 0,J=void 0;var P=void 0,da=void 0;let qa=void 0,ra=void 0;const wa=n[0],ya=n[1];n=n[2];T=m[0];ia=m[1];m=m[2];P=fa[0];da=fa[1];fa=fa[2];if(Math.abs(wa-P)<Z.EPSILON&&Math.abs(ya-da)<Z.EPSILON&&Math.abs(n-fa)<Z.EPSILON)return H(c);P=wa-P;da=ya-da;qa=n-fa;ra=1/Math.sqrt(P*P+da*da+qa*qa);P*=ra;da*=ra;qa*=ra;G=ia*
qa-m*da;S=m*P-T*qa;T=T*da-ia*P;(ra=Math.sqrt(G*G+S*S+T*T))?(ra=1/ra,G*=ra,S*=ra,T*=ra):T=S=G=0;ia=da*T-qa*S;ea=qa*G-P*T;J=P*S-da*G;(ra=Math.sqrt(ia*ia+ea*ea+J*J))?(ra=1/ra,ia*=ra,ea*=ra,J*=ra):J=ea=ia=0;c[0]=G;c[1]=ia;c[2]=P;c[3]=0;c[4]=S;c[5]=ea;c[6]=da;c[7]=0;c[8]=T;c[9]=J;c[10]=qa;c[11]=0;c[12]=-(G*wa+S*ya+T*n);c[13]=-(ia*wa+ea*ya+J*n);c[14]=-(P*wa+da*ya+qa*n);c[15]=1;return c}function ha(c,n,fa,m){const G=n[0],S=n[1];n=n[2];var T=m[0];const ia=m[1];var ea=m[2];m=G-fa[0];let J=S-fa[1];fa=n-fa[2];
let P=m*m+J*J+fa*fa;0<P&&(P=1/Math.sqrt(P),m*=P,J*=P,fa*=P);let da=ia*fa-ea*J;ea=ea*m-T*fa;T=T*J-ia*m;P=da*da+ea*ea+T*T;0<P&&(P=1/Math.sqrt(P),da*=P,ea*=P,T*=P);c[0]=da;c[1]=ea;c[2]=T;c[3]=0;c[4]=J*T-fa*ea;c[5]=fa*da-m*T;c[6]=m*ea-J*da;c[7]=0;c[8]=m;c[9]=J;c[10]=fa;c[11]=0;c[12]=G;c[13]=S;c[14]=n;c[15]=1;return c}function oa(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+
")"}function ma(c){return Math.sqrt(c[0]**2+c[1]**2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**2+c[7]**2+c[8]**2+c[9]**2+c[10]**2+c[11]**2+c[12]**2+c[13]**2+c[14]**2+c[15]**2)}function la(c,n,fa){c[0]=n[0]+fa[0];c[1]=n[1]+fa[1];c[2]=n[2]+fa[2];c[3]=n[3]+fa[3];c[4]=n[4]+fa[4];c[5]=n[5]+fa[5];c[6]=n[6]+fa[6];c[7]=n[7]+fa[7];c[8]=n[8]+fa[8];c[9]=n[9]+fa[9];c[10]=n[10]+fa[10];c[11]=n[11]+fa[11];c[12]=n[12]+fa[12];c[13]=n[13]+fa[13];c[14]=n[14]+fa[14];c[15]=n[15]+fa[15];return c}function pa(c,n,fa){c[0]=n[0]-
fa[0];c[1]=n[1]-fa[1];c[2]=n[2]-fa[2];c[3]=n[3]-fa[3];c[4]=n[4]-fa[4];c[5]=n[5]-fa[5];c[6]=n[6]-fa[6];c[7]=n[7]-fa[7];c[8]=n[8]-fa[8];c[9]=n[9]-fa[9];c[10]=n[10]-fa[10];c[11]=n[11]-fa[11];c[12]=n[12]-fa[12];c[13]=n[13]-fa[13];c[14]=n[14]-fa[14];c[15]=n[15]-fa[15];return c}function va(c,n,fa){c[0]=n[0]*fa;c[1]=n[1]*fa;c[2]=n[2]*fa;c[3]=n[3]*fa;c[4]=n[4]*fa;c[5]=n[5]*fa;c[6]=n[6]*fa;c[7]=n[7]*fa;c[8]=n[8]*fa;c[9]=n[9]*fa;c[10]=n[10]*fa;c[11]=n[11]*fa;c[12]=n[12]*fa;c[13]=n[13]*fa;c[14]=n[14]*fa;c[15]=
n[15]*fa;return c}function Ba(c,n,fa,m){c[0]=n[0]+fa[0]*m;c[1]=n[1]+fa[1]*m;c[2]=n[2]+fa[2]*m;c[3]=n[3]+fa[3]*m;c[4]=n[4]+fa[4]*m;c[5]=n[5]+fa[5]*m;c[6]=n[6]+fa[6]*m;c[7]=n[7]+fa[7]*m;c[8]=n[8]+fa[8]*m;c[9]=n[9]+fa[9]*m;c[10]=n[10]+fa[10]*m;c[11]=n[11]+fa[11]*m;c[12]=n[12]+fa[12]*m;c[13]=n[13]+fa[13]*m;c[14]=n[14]+fa[14]*m;c[15]=n[15]+fa[15]*m;return c}function Ka(c,n){return c[0]===n[0]&&c[1]===n[1]&&c[2]===n[2]&&c[3]===n[3]&&c[4]===n[4]&&c[5]===n[5]&&c[6]===n[6]&&c[7]===n[7]&&c[8]===n[8]&&c[9]===
n[9]&&c[10]===n[10]&&c[11]===n[11]&&c[12]===n[12]&&c[13]===n[13]&&c[14]===n[14]&&c[15]===n[15]}function Ta(c,n){if(c===n)return!0;const fa=c[0],m=c[1],G=c[2],S=c[3],T=c[4],ia=c[5],ea=c[6],J=c[7],P=c[8],da=c[9],qa=c[10],ra=c[11],wa=c[12],ya=c[13],Aa=c[14];c=c[15];const Ha=n[0],Ga=n[1],Ea=n[2],Da=n[3],Fa=n[4],Pa=n[5],sa=n[6],bb=n[7],ab=n[8],Qa=n[9],b=n[10],$a=n[11],Ra=n[12],pb=n[13],ka=n[14];n=n[15];return Math.abs(fa-Ha)<=Z.EPSILON*Math.max(1,Math.abs(fa),Math.abs(Ha))&&Math.abs(m-Ga)<=Z.EPSILON*Math.max(1,
Math.abs(m),Math.abs(Ga))&&Math.abs(G-Ea)<=Z.EPSILON*Math.max(1,Math.abs(G),Math.abs(Ea))&&Math.abs(S-Da)<=Z.EPSILON*Math.max(1,Math.abs(S),Math.abs(Da))&&Math.abs(T-Fa)<=Z.EPSILON*Math.max(1,Math.abs(T),Math.abs(Fa))&&Math.abs(ia-Pa)<=Z.EPSILON*Math.max(1,Math.abs(ia),Math.abs(Pa))&&Math.abs(ea-sa)<=Z.EPSILON*Math.max(1,Math.abs(ea),Math.abs(sa))&&Math.abs(J-bb)<=Z.EPSILON*Math.max(1,Math.abs(J),Math.abs(bb))&&Math.abs(P-ab)<=Z.EPSILON*Math.max(1,Math.abs(P),Math.abs(ab))&&Math.abs(da-Qa)<=Z.EPSILON*
Math.max(1,Math.abs(da),Math.abs(Qa))&&Math.abs(qa-b)<=Z.EPSILON*Math.max(1,Math.abs(qa),Math.abs(b))&&Math.abs(ra-$a)<=Z.EPSILON*Math.max(1,Math.abs(ra),Math.abs($a))&&Math.abs(wa-Ra)<=Z.EPSILON*Math.max(1,Math.abs(wa),Math.abs(Ra))&&Math.abs(ya-pb)<=Z.EPSILON*Math.max(1,Math.abs(ya),Math.abs(pb))&&Math.abs(Aa-ka)<=Z.EPSILON*Math.max(1,Math.abs(Aa),Math.abs(ka))&&Math.abs(c-n)<=Z.EPSILON*Math.max(1,Math.abs(c),Math.abs(n))}function Oa(c){const n=Z.EPSILON,fa=c[0],m=c[1],G=c[2],S=c[4],T=c[5],ia=c[6],
ea=c[8],J=c[9];c=c[10];return Math.abs(1-(fa*fa+S*S+ea*ea))<=n&&Math.abs(1-(m*m+T*T+J*J))<=n&&Math.abs(1-(G*G+ia*ia+c*c))<=n}const Sa=e.create();e=Object.freeze({__proto__:null,copy:aa,set:t,identity:H,transpose:y,invert:p,adjoint:r,determinant:u,multiply:E,translate:Q,scale:R,rotate:h,rotateX:K,rotateY:d,rotateZ:l,fromTranslation:N,fromScaling:ca,fromRotation:z,fromXRotation:L,fromYRotation:F,fromZRotation:x,fromRotationTranslation:w,fromQuat2:I,getTranslation:X,getScaling:A,getRotation:C,fromRotationTranslationScale:O,
fromRotationTranslationScaleOrigin:W,fromQuat:D,frustum:q,perspective:a,perspectiveFromFieldOfView:g,ortho:M,lookAt:U,targetTo:ha,str:oa,frob:ma,add:la,subtract:pa,multiplyScalar:va,multiplyScalarAndAdd:Ba,exactEquals:Ka,equals:Ta,isOrthoNormal:Oa,mul:E,sub:pa});k.add=la;k.adjoint=r;k.copy=aa;k.determinant=u;k.equals=Ta;k.exactEquals=Ka;k.frob=ma;k.fromQuat=D;k.fromQuat2=I;k.fromRotation=z;k.fromRotationTranslation=w;k.fromRotationTranslationScale=O;k.fromRotationTranslationScaleOrigin=W;k.fromScaling=
ca;k.fromTranslation=N;k.fromXRotation=L;k.fromYRotation=F;k.fromZRotation=x;k.frustum=q;k.getRotation=C;k.getScaling=A;k.getTranslation=X;k.identity=H;k.invert=p;k.isOrthoNormal=Oa;k.lookAt=U;k.mat4=e;k.mul=E;k.multiply=E;k.multiplyScalar=va;k.multiplyScalarAndAdd=Ba;k.ortho=M;k.perspective=a;k.perspectiveFromFieldOfView=g;k.rotate=h;k.rotateX=K;k.rotateY=d;k.rotateZ=l;k.scale=R;k.set=t;k.str=oa;k.sub=pa;k.subtract=pa;k.targetTo=ha;k.translate=Q;k.transpose=y})},"esri/chunks/pe":function(){define(["require",
"exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(k,e,Z,aa,t){function H(){return!!e._pe}function y(){return!!t("esri-wasm")}function p(){return h?h:h=(new Promise((d,l)=>k(["./pe-wasm"],d,l))).then(d=>d.peWasm).then(({default:d})=>d({locateFile:l=>aa.getAssetUrl(`esri/geometry/support/${l}`)})).then(d=>{r(d)})}function r(d){function l(z,L,F){z[L]=F(z[L])}e._pe=d;e.PeDefs.init();e.PeGTlistExtended.init();e.PeNotationMgrs.init();e.PeNotationUtm.init();e.PePCSInfo.init();e.PeGCSExtent=
function(z){function L(){return z.apply(this,arguments)||this}Z._inheritsLoose(L,z);L.prototype.destroy=function(){e._pe.destroy(this)};return L}(e._pe.PeGCSExtent);d=[e._pe.PeDatum,e._pe.PeGeogcs,e._pe.PeGeogtran,e._pe.PeObject,e._pe.PeParameter,e._pe.PePrimem,e._pe.PeProjcs,e._pe.PeSpheroid,e._pe.PeUnit];for(var N of d)l(N.prototype,"getName",z=>function(){return z.call(this,Array(e.PeDefs.PE_NAME_MAX))});for(const z of[e._pe.PeGeogtran,e._pe.PeProjcs])l(z.prototype,"getParameters",L=>function(){const F=
Array(e.PeDefs.PE_PARM_MAX);let x=L.call(this);for(let w=0;w<F.length;w++){const I=e._pe.getValue(x,"*");F[w]=I?e._pe.wrapPointer(I,e._pe.PeParameter):null;x+=Int32Array.BYTES_PER_ELEMENT}return F});l(e._pe.PeHorizon.prototype,"getCoord",z=>function(){const L=this.getSize();if(!L)return null;const F=[],x=z.call(this);R(F,L,x);return F});l(e._pe.PeGTlistExtendedEntry.prototype,"getEntries",z=>{const L=e._pe._pe_getPeGTlistExtendedGTsSize();return function(){let F=null;var x=z.call(this);if(!e._pe.compare(x,
e._pe.NULL)){F=[x];const w=this.getSteps();if(1<w){x=e._pe.getPointer(x);for(let I=1;I<w;I++)F.push(e._pe.wrapPointer(x+L*I,e._pe.PeGTlistExtendedGTs))}}return F}});const ca=e._pe._pe_getPeHorizonSize();N=z=>function(){let L=this._cache;L||(this._cache=L=new Map);if(L.has(z))return L.get(z);let F=null;var x=z.call(this);if(!e._pe.compare(x,e._pe.NULL)){F=[x];const w=x.getNump();if(1<w){x=e._pe.getPointer(x);for(let I=1;I<w;I++)F.push(e._pe.wrapPointer(x+ca*I,e._pe.PeHorizon))}}L.set(z,F);return F};
l(e._pe.PeProjcs.prototype,"horizonGcsGenerate",N);l(e._pe.PeProjcs.prototype,"horizonPcsGenerate",N);e._pe.PeObject.prototype.toString=function(z=e.PeDefs.PE_STR_OPTS_NONE){e._pe.ensureCache.prepare();const L=e._pe.getPointer(this),F=e._pe.ensureInt8(Array(e.PeDefs.PE_BUFFER_MAX));return e._pe.UTF8ToString(e._pe._pe_object_to_string_ext(L,z,F))}}function u(d){if(d){var l=e._pe.getClass(d);l&&(l=e._pe.getCache(l))&&(d=e._pe.getPointer(d))&&delete l[d]}}function E(d,l){const N=[];l=Array(l);for(let ca=
0;ca<d;ca++)N.push(e._pe.ensureInt8(l));return N}function Q(d){let l;Array.isArray(d[0])?(l=[],d.forEach(N=>{l.push(N[0],N[1])})):l=d;return l}function R(d,l,N,ca=!1){if(ca)for(ca=0;ca<2*l;ca++)d[ca]=e._pe.getValue(N+ca*Float64Array.BYTES_PER_ELEMENT,"double");else{ca=0===d.length;for(let z=0;z<l;z++)ca&&(d[z]=Array(2)),d[z][0]=e._pe.getValue(N,"double"),d[z][1]=e._pe.getValue(N+Float64Array.BYTES_PER_ELEMENT,"double"),N+=2*Float64Array.BYTES_PER_ELEMENT}}let h;e._pe=null;e.PeCSTransformations=void 0;
(function(d){function l(z,L,F){e._pe.ensureCache.prepare();var x=Q(F);const w=F===x;x=e._pe.ensureFloat64(x);(z=e._pe._pe_geog_to_proj(e._pe.getPointer(z),L,x))&&R(F,L,x,w);return z}function N(z,L,F){return ca(z,L,F,0)}function ca(z,L,F,x){e._pe.ensureCache.prepare();var w=Q(F);const I=F===w;w=e._pe.ensureFloat64(w);(z=e._pe._pe_proj_to_geog_center(e._pe.getPointer(z),L,w,x))&&R(F,L,w,I);return z}d.geogToProj=l;d.projGeog=function(z,L,F,x){switch(x){case e.PeDefs.PE_TRANSFORM_P_TO_G:return N(z,L,
F);case e.PeDefs.PE_TRANSFORM_G_TO_P:return l(z,L,F)}return 0};d.projToGeog=N;d.projToGeogCenter=ca})(e.PeCSTransformations||(e.PeCSTransformations={}));e.PeDefs=void 0;(function(d){d.init=function(){d.PE_BUFFER_MAX=e._pe.PeDefs.prototype.PE_BUFFER_MAX;d.PE_NAME_MAX=e._pe.PeDefs.prototype.PE_NAME_MAX;d.PE_MGRS_MAX=e._pe.PeDefs.prototype.PE_MGRS_MAX;d.PE_USNG_MAX=e._pe.PeDefs.prototype.PE_USNG_MAX;d.PE_DD_MAX=e._pe.PeDefs.prototype.PE_DD_MAX;d.PE_DDM_MAX=e._pe.PeDefs.prototype.PE_DDM_MAX;d.PE_DMS_MAX=
e._pe.PeDefs.prototype.PE_DMS_MAX;d.PE_UTM_MAX=e._pe.PeDefs.prototype.PE_UTM_MAX;d.PE_PARM_MAX=e._pe.PeDefs.prototype.PE_PARM_MAX;d.PE_TYPE_NONE=e._pe.PeDefs.prototype.PE_TYPE_NONE;d.PE_TYPE_GEOGCS=e._pe.PeDefs.prototype.PE_TYPE_GEOGCS;d.PE_TYPE_PROJCS=e._pe.PeDefs.prototype.PE_TYPE_PROJCS;d.PE_TYPE_GEOGTRAN=e._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;d.PE_TYPE_COORDSYS=e._pe.PeDefs.prototype.PE_TYPE_COORDSYS;d.PE_TYPE_UNIT=e._pe.PeDefs.prototype.PE_TYPE_UNIT;d.PE_TYPE_LINUNIT=e._pe.PeDefs.prototype.PE_TYPE_LINUNIT;
d.PE_STR_OPTS_NONE=e._pe.PeDefs.prototype.PE_STR_OPTS_NONE;d.PE_STR_AUTH_NONE=e._pe.PeDefs.prototype.PE_STR_AUTH_NONE;d.PE_STR_AUTH_TOP=e._pe.PeDefs.prototype.PE_STR_AUTH_TOP;d.PE_STR_NAME_CANON=e._pe.PeDefs.prototype.PE_STR_NAME_CANON;d.PE_PARM_X0=e._pe.PeDefs.prototype.PE_PARM_X0;d.PE_PARM_ND=e._pe.PeDefs.prototype.PE_PARM_ND;d.PE_TRANSFORM_1_TO_2=e._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;d.PE_TRANSFORM_2_TO_1=e._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;d.PE_TRANSFORM_P_TO_G=e._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;
d.PE_TRANSFORM_G_TO_P=e._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;d.PE_HORIZON_RECT=e._pe.PeDefs.prototype.PE_HORIZON_RECT;d.PE_HORIZON_POLY=e._pe.PeDefs.prototype.PE_HORIZON_POLY;d.PE_HORIZON_LINE=e._pe.PeDefs.prototype.PE_HORIZON_LINE;d.PE_HORIZON_DELTA=e._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(e.PeDefs||(e.PeDefs={}));e.PeFactory=void 0;(function(d){function l(L,F){let x=null,w=N[L];w||(w={},N[L]=w);w.hasOwnProperty(String(F))?x=w[F]:(L=e._pe.PeFactory.prototype.factoryByType(L,F),e._pe.compare(L,
e._pe.NULL)||(x=L,w[F]=x));return x=z(x)}const N={},ca={},z=L=>{if(L){const F=L.getType();switch(F){case e.PeDefs.PE_TYPE_GEOGCS:L=e._pe.castObject(L,e._pe.PeGeogcs);break;case e.PeDefs.PE_TYPE_PROJCS:L=e._pe.castObject(L,e._pe.PeProjcs);break;case e.PeDefs.PE_TYPE_GEOGTRAN:L=e._pe.castObject(L,e._pe.PeGeogtran);break;default:F&e.PeDefs.PE_TYPE_UNIT&&(L=e._pe.castObject(L,e._pe.PeUnit))}}return L};d.initialize=function(){e._pe.PeFactory.prototype.initialize(null)};d.coordsys=function(L){return l(e.PeDefs.PE_TYPE_COORDSYS,
L)};d.factoryByType=l;d.fromString=function(L,F){let x=null,w=ca[L];w||(w={},ca[L]=w);w.hasOwnProperty(F)?x=w[F]:(L=e._pe.PeFactory.prototype.fromString(L,F),e._pe.compare(L,e._pe.NULL)||(x=L,w[F]=x));return x=z(x)};d.geogcs=function(L){return l(e.PeDefs.PE_TYPE_GEOGCS,L)};d.geogtran=function(L){return l(e.PeDefs.PE_TYPE_GEOGTRAN,L)};d.getCode=function(L){return e._pe.PeFactory.prototype.getCode(L)};d.projcs=function(L){return l(e.PeDefs.PE_TYPE_PROJCS,L)};d.unit=function(L){return l(e.PeDefs.PE_TYPE_UNIT,
L)}})(e.PeFactory||(e.PeFactory={}));e.PeGCSExtent=null;e.PeGTlistExtended=void 0;(function(d){let l;d.init=function(){d.PE_GTLIST_OPTS_COMMON=e._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;l=e._pe._pe_getPeGTlistExtendedEntrySize()};d.getGTlist=function(N,ca,z,L,F,x){let w=null;const I=new e._pe.PeInteger(x);try{const X=e._pe.PeGTlistExtended.prototype.getGTlist(N,ca,z,L,F,I);if(x=I.val)if(w=[X],1<x){const A=e._pe.getPointer(X);for(N=1;N<x;N++)w.push(e._pe.wrapPointer(A+l*N,e._pe.PeGTlistExtendedEntry))}}finally{e._pe.destroy(I)}return w}})(e.PeGTlistExtended||
(e.PeGTlistExtended={}));e.PeGTlistExtendedEntry=void 0;(function(d){d.destroy=function(l){if(l&&l.length){for(const N of l)u(N),N.getEntries().forEach(ca=>{u(ca);ca=ca.getGeogtran();u(ca);ca.getParameters().forEach(u);[ca.getGeogcs1(),ca.getGeogcs2()].forEach(z=>{u(z);const L=z.getDatum();u(L);u(L.getSpheroid());u(z.getPrimem());u(z.getUnit())})});e._pe.PeGTlistExtendedEntry.prototype.Delete(l[0])}}})(e.PeGTlistExtendedEntry||(e.PeGTlistExtendedEntry={}));e.PeGTTransformations=void 0;(function(d){d.geogToGeog=
function(l,N,ca,z,L){e._pe.ensureCache.prepare();var F=Q(ca);const x=ca===F;F=e._pe.ensureFloat64(F);let w=0;z&&(w=e._pe.ensureFloat64(z));(l=e._pe._pe_geog_to_geog(e._pe.getPointer(l),N,F,w,L))&&R(ca,N,F,x);return l}})(e.PeGTTransformations||(e.PeGTTransformations={}));e.PeNotationDms=void 0;(function(d){const l=(ca,z,L,F,x,w)=>{e._pe.ensureCache.prepare();switch(ca){case "dd":var I=e._pe._pe_geog_to_dd;var X=e.PeDefs.PE_DD_MAX;break;case "ddm":I=e._pe._pe_geog_to_ddm;X=e.PeDefs.PE_DDM_MAX;break;
case "dms":I=e._pe._pe_geog_to_dms,X=e.PeDefs.PE_DMS_MAX}ca=0;z&&(ca=e._pe.getPointer(z));z=Q(F);z=e._pe.ensureFloat64(z);X=E(L,X);F=e._pe.ensureInt32(X);if(x=I(ca,L,z,x,F))for(I=0;I<L;I++)w[I]=e._pe.UTF8ToString(X[I]);return x},N=(ca,z,L,F,x)=>{e._pe.ensureCache.prepare();switch(ca){case "dd":var w=e._pe._pe_dd_to_geog;break;case "ddm":w=e._pe._pe_ddm_to_geog;break;case "dms":w=e._pe._pe_dms_to_geog}ca=0;z&&(ca=e._pe.getPointer(z));z=F.map(I=>e._pe.ensureString(I));F=e._pe.ensureInt32(z);z=e._pe.ensureFloat64(Array(2*
L));(w=w(ca,L,F,z))&&R(x,L,z);return w};d.geogToDms=function(ca,z,L,F,x){return l("dms",ca,z,L,F,x)};d.dmsToGeog=function(ca,z,L,F){return N("dms",ca,z,L,F)};d.geogToDdm=function(ca,z,L,F,x){return l("ddm",ca,z,L,F,x)};d.ddmToGeog=function(ca,z,L,F){return N("ddm",ca,z,L,F)};d.geogToDd=function(ca,z,L,F,x){return l("dd",ca,z,L,F,x)};d.ddToGeog=function(ca,z,L,F){return N("dd",ca,z,L,F)}})(e.PeNotationDms||(e.PeNotationDms={}));e.PeNotationMgrs=void 0;(function(d){d.init=function(){d.PE_MGRS_STYLE_NEW=
e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;d.PE_MGRS_STYLE_OLD=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;d.PE_MGRS_STYLE_AUTO=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;d.PE_MGRS_180_ZONE_1_PLUS=e._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;d.PE_MGRS_ADD_SPACES=e._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};d.geogToMgrsExtended=function(l,N,ca,z,L,F,x){e._pe.ensureCache.prepare();let w=0;l&&(w=e._pe.getPointer(l));l=Q(ca);ca=e._pe.ensureFloat64(l);l=E(N,e.PeDefs.PE_MGRS_MAX);
const I=e._pe.ensureInt32(l);if(z=e._pe._pe_geog_to_mgrs_extended(w,N,ca,z,L,F,I))for(L=0;L<N;L++)x[L]=e._pe.UTF8ToString(l[L]);return z};d.mgrsToGeogExtended=function(l,N,ca,z,L){e._pe.ensureCache.prepare();let F=0;l&&(F=e._pe.getPointer(l));l=ca.map(x=>e._pe.ensureString(x));ca=e._pe.ensureInt32(l);l=e._pe.ensureFloat64(Array(2*N));(z=e._pe._pe_mgrs_to_geog_extended(F,N,ca,z,l))&&R(L,N,l);return z}})(e.PeNotationMgrs||(e.PeNotationMgrs={}));e.PeNotationUsng=void 0;(function(d){d.geogToUsng=function(l,
N,ca,z,L,F,x){e._pe.ensureCache.prepare();let w=0;l&&(w=e._pe.getPointer(l));l=Q(ca);ca=e._pe.ensureFloat64(l);l=E(N,e.PeDefs.PE_MGRS_MAX);const I=e._pe.ensureInt32(l);if(z=e._pe._pe_geog_to_usng(w,N,ca,z,L,F,I))for(L=0;L<N;L++)x[L]=e._pe.UTF8ToString(l[L]);return z};d.usngToGeog=function(l,N,ca,z){e._pe.ensureCache.prepare();var L=0;l&&(L=e._pe.getPointer(l));l=ca.map(F=>e._pe.ensureString(F));ca=e._pe.ensureInt32(l);l=e._pe.ensureFloat64(Array(2*N));(L=e._pe._pe_usng_to_geog(L,N,ca,l))&&R(z,N,l);
return L}})(e.PeNotationUsng||(e.PeNotationUsng={}));e.PeNotationUtm=void 0;(function(d){d.init=function(){d.PE_UTM_OPTS_NONE=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;d.PE_UTM_OPTS_ADD_SPACES=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;d.PE_UTM_OPTS_NS=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};d.geogToUtm=function(l,N,ca,z,L){e._pe.ensureCache.prepare();var F=0;l&&(F=e._pe.getPointer(l));l=Q(ca);ca=e._pe.ensureFloat64(l);l=E(N,e.PeDefs.PE_UTM_MAX);const x=e._pe.ensureInt32(l);if(z=
e._pe._pe_geog_to_utm(F,N,ca,z,x))for(F=0;F<N;F++)L[F]=e._pe.UTF8ToString(l[F]);return z};d.utmToGeog=function(l,N,ca,z,L){e._pe.ensureCache.prepare();let F=0;l&&(F=e._pe.getPointer(l));l=ca.map(x=>e._pe.ensureString(x));ca=e._pe.ensureInt32(l);l=e._pe.ensureFloat64(Array(2*N));(z=e._pe._pe_utm_to_geog(F,N,ca,z,l))&&R(L,N,l);return z}})(e.PeNotationUtm||(e.PeNotationUtm={}));e.PePCSInfo=void 0;(function(d){const l=new Map;d.init=function(){d.PE_PCSINFO_OPTION_NONE=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;
d.PE_PCSINFO_OPTION_DOMAIN=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;d.PE_POLE_OUTSIDE_BOUNDARY=e._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;d.PE_POLE_POINT=e._pe.PePCSInfo.prototype.PE_POLE_POINT};d.generate=function(N,ca=d.PE_PCSINFO_OPTION_DOMAIN){let z,L;l.has(N)&&(L=l.get(N),L[ca]&&(z=L[ca]));z||(z=e._pe.PePCSInfo.prototype.generate(N,ca),L||(L=[],l.set(N,L)),L[ca]=z);return z}})(e.PePCSInfo||(e.PePCSInfo={}));e.PeVersion=void 0;(function(d){d.versionString=function(){return e._pe.PeVersion.prototype.version_string()}})(e.PeVersion||
(e.PeVersion={}));const K=Object.freeze({__proto__:null,get _pe(){return e._pe},isLoaded:H,isSupported:y,load:p,get PeCSTransformations(){return e.PeCSTransformations},get PeDefs(){return e.PeDefs},get PeFactory(){return e.PeFactory},get PeGCSExtent(){return e.PeGCSExtent},get PeGTlistExtended(){return e.PeGTlistExtended},get PeGTlistExtendedEntry(){return e.PeGTlistExtendedEntry},get PeGTTransformations(){return e.PeGTTransformations},get PeNotationDms(){return e.PeNotationDms},get PeNotationMgrs(){return e.PeNotationMgrs},
get PeNotationUsng(){return e.PeNotationUsng},get PeNotationUtm(){return e.PeNotationUtm},get PePCSInfo(){return e.PePCSInfo},get PeVersion(){return e.PeVersion},_init:r});e._init=r;e.isLoaded=H;e.isSupported=y;e.load=p;e.pe=K})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(k,e){const Z=Math.PI/180;var aa=e.earth.radius;const t=e.earth.eccentricitySquared;aa={a1:aa*t,a2:aa*t*aa*t,a3:aa*t*t/2,a4:aa*t*aa*t*2.5,a5:aa*t+aa*t*t/2,a6:1-t};e={4267:{a:6378206.4,
f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:e.earth.radius,f:e.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:e.moon.radius,f:e.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:e.mars.radius,f:e.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,
f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,
f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},
104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:e.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};k.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;k.earthEllipsoidConstants=aa;k.spheroids=e;k.toRadians=Z;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],
function(k){return function(){function e(aa){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(aa&&aa.steps)for(const t of aa.steps)t instanceof k?this.steps.push(t):this.steps.push(new k({wkid:t.wkid,wkt:t.wkt,isInverse:t.isInverse}))}e.cacheKey=function(aa,t){return[void 0!==aa.wkid&&null!==aa.wkid?aa.wkid.toString():"-1",void 0!==aa.wkt&&null!==aa.wkt?aa.wkt.toString():"",void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():
""].join()};e.fromGE=function(aa){const t=new e;let H="";for(const y of aa.steps)aa=k.fromGE(y),t.steps.push(aa),H+=aa.uid.toString()+",";t._cached_projection={};t._gtlistentry=null;t._chain=H;return t};var Z=e.prototype;Z.getInverse=function(){const aa=new e;aa.steps=[];for(let t=this.steps.length-1;0<=t;t--)aa.steps.push(this.steps[t].getInverse());return aa};Z.getGTListEntry=function(){let aa="";for(const t of this.steps)aa+=t.uid.toString()+",";aa!==this._chain&&(this._gtlistentry=null,this._cached_projection=
{},this._chain=aa);return this._gtlistentry};Z.assignCachedGe=function(aa,t,H){this._cached_projection[e.cacheKey(aa,t)]=H};Z.getCachedGeTransformation=function(aa,t){let H="";for(const y of this.steps)H+=y.uid.toString()+",";H!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=H);aa=this._cached_projection[e.cacheKey(aa,t)];return void 0===aa?null:aa};return e}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(k){let e=0;return function(){function Z(aa=null){this.uid=e++;aa?(this._wkt=void 0!==aa.wkt?aa.wkt:null,this._wkid=void 0!==aa.wkid?aa.wkid:-1,this._isInverse=void 0!==aa.isInverse?!0===aa.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}Z.fromGE=function(aa){const t=new Z;t._wkt=aa.wkt;t._wkid=aa.wkid;t._isInverse=aa.isInverse;return t};Z.prototype.getInverse=function(){const aa=new Z;aa._wkt=this.wkt;aa._wkid=this._wkid;aa._isInverse=!this.isInverse;return aa};k._createClass(Z,
[{key:"wkt",get:function(){return this._wkt},set:function(aa){this._wkt=aa;this.uid=e++}},{key:"wkid",get:function(){return this._wkid},set:function(aa){this._wkid=aa;this.uid=e++}},{key:"isInverse",get:function(){return this._isInverse},set:function(aa){this._isInverse=aa;this.uid=e++}}]);return Z}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(k,e,Z,aa){k.getGeometryZScaler=function(t,H,y){if(e.isNone(H)||
e.isNone(y)||y.vcsWkid||aa.equals(H,y))return null;H=Z.getMetersPerVerticalUnitForSR(H);y=Z.getMetersPerVerticalUnitForSR(y);const p=H/y;if(1===p)return null;switch(t){case "point":case "esriGeometryPoint":return r=>{r&&null!=r.z&&(r.z*=p)};case "polyline":case "esriGeometryPolyline":return r=>{if(r)for(const u of r.paths)for(const E of u)2<E.length&&(E[2]*=p)};case "polygon":case "esriGeometryPolygon":return r=>{if(r)for(const u of r.rings)for(const E of u)2<E.length&&(E[2]*=p)};case "multipoint":case "esriGeometryMultipoint":return r=>
{if(r)for(const u of r.points)2<u.length&&(u[2]*=p)};case "extent":case "esriGeometryExtent":return r=>{r&&null!=r.zmin&&null!=r.zmax&&(r.zmin*=p,r.zmax*=p)};default:return null}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(k){let e=function(y,p,r){this.x=y;this.y=p;this.spatialReference=r;this.m=this.z=void 0},Z=function(y,p,r,u){this.rings=y;this.spatialReference=p;this.hasM=this.hasZ=void 0;r&&(this.hasZ=r);u&&
(this.hasM=u)},aa=function(y,p,r,u){this.paths=y;this.spatialReference=p;this.hasM=this.hasZ=void 0;r&&(this.hasZ=r);u&&(this.hasM=u)},t=function(y,p,r,u){this.points=y;this.spatialReference=p;this.hasM=this.hasZ=void 0;r&&(this.hasZ=r);u&&(this.hasM=u)},H=function(y,p,r,u,E){this.xmin=y;this.ymin=p;this.xmax=r;this.ymax=u;this.spatialReference=E;this.mmax=this.mmin=this.zmax=this.zmin=void 0};k.jsonAdapter={convertToGEGeometry:function(y,p){return null==p?null:y.convertJSONToGeometry(p)},exportPoint:function(y,
p,r){r=new e(y.getPointX(p),y.getPointY(p),r);const u=y.hasZ(p),E=y.hasM(p);u&&(r.z=y.getPointZ(p));E&&(r.m=y.getPointM(p));return r},exportPolygon:function(y,p,r){return new Z(y.exportPaths(p),r,y.hasZ(p),y.hasM(p))},exportPolyline:function(y,p,r){return new aa(y.exportPaths(p),r,y.hasZ(p),y.hasM(p))},exportMultipoint:function(y,p,r){return new t(y.exportPoints(p),r,y.hasZ(p),y.hasM(p))},exportExtent:function(y,p,r){var u=y.hasZ(p);const E=y.hasM(p);r=new H(y.getXMin(p),y.getYMin(p),y.getXMax(p),
y.getYMax(p),r);u&&(u=y.getZExtent(p),r.zmin=u.vmin,r.zmax=u.vmax);E&&(y=y.getMExtent(p),r.mmin=y.vmin,r.mmax=y.vmax);return r}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(k,e,Z,aa,t,H,y,p,r,u,E,Q,R,h,K,d,l,N,ca,z,L,F,x){function w(D){return D.every(q=>"exceedslimit"!==q.statisticType)}const I=new Set,X=new H.MemCacheStorage(2E6);let A=0,C=function(){function D(a){this.capabilities={query:d.queryCapabilities};this.geometryType=a.geometryType;this.hasM=a.hasM;this.hasZ=a.hasZ;this.objectIdField=a.objectIdField;this.spatialReference=a.spatialReference;this.definitionExpression=a.definitionExpression;this.featureStore=a.featureStore;this.aggregateAdapter=a.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=a.timeInfo;a.cacheSpatialQueries&&(this._geometryQueryCache=new H.MemCache(A++ +"$$",X));this.fieldsIndex=new L(a.fields);a.scheduler&&a.priority&&(this._frameTask=a.scheduler.registerTask(a.priority))}var q=D.prototype;q.destroy=function(){this._frameTask=t.removeMaybe(this._frameTask);this.clearCache();t.destroyMaybe(this._geometryQueryCache);this._changeHandle=t.removeMaybe(this._changeHandle);t.destroyMaybe(this.fieldsIndex)};
q.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};q.executeQuery=function(){var a=e._asyncToGenerator(function*(g={},M){let U=aa.clone(g),ha;try{U=yield this._schedule(()=>z.normalizeQuery(U,this.definitionExpression,this.spatialReference),M),U=yield this._reschedule(()=>this._checkQuerySupport(U),M),ha=yield this._reschedule(()=>this._executeGeometryQuery(U,M),M),ha=yield this._reschedule(()=>ha.executeAggregateIdsQuery(U),M),
ha=yield this._reschedule(()=>ha.executeObjectIdsQuery(U),M),ha=yield this._reschedule(()=>ha.executeTimeQuery(U),M),ha=yield this._reschedule(()=>ha.executeAttributesQuery(U),M)}catch(oa){if(oa!==z.QUERY_ENGINE_EMPTY_RESULT)throw oa;ha=new l.default([],null,this)}return ha.createQueryResponse(U)});return function(){return a.apply(this,arguments)}}();q.executeQueryForCount=function(){var a=e._asyncToGenerator(function*(g={},M){let U=aa.clone(g);U.returnGeometry=!1;U.returnCentroid=!1;U.outSR=null;
try{U=yield this._schedule(()=>z.normalizeQuery(U,this.definitionExpression,this.spatialReference),M);U=yield this._reschedule(()=>this._checkQuerySupport(U),M);let ha=yield this._reschedule(()=>this._executeGeometryQuery(U,M),M);ha=yield this._reschedule(()=>ha.executeAggregateIdsQuery(U),M);ha=yield this._reschedule(()=>ha.executeObjectIdsQuery(U),M);ha=yield this._reschedule(()=>ha.executeTimeQuery(U),M);ha=yield this._reschedule(()=>ha.executeAttributesQuery(U),M);return ha.createQueryResponseForCount(U)}catch(ha){if(ha!==
z.QUERY_ENGINE_EMPTY_RESULT)throw ha;return 0}});return function(){return a.apply(this,arguments)}}();q.executeQueryForExtent=function(){var a=e._asyncToGenerator(function*(g={},M){let U=aa.clone(g),ha;g=U.outSR;try{U=yield this._schedule(()=>z.normalizeQuery(U,this.definitionExpression,this.spatialReference),M);U=yield this._reschedule(()=>this._checkQuerySupport(U),M);U.returnGeometry=!0;U.returnCentroid=!1;U.outSR=null;ha=yield this._reschedule(()=>this._executeGeometryQuery(U,M),M);ha=yield this._reschedule(()=>
ha.executeAggregateIdsQuery(U),M);ha=yield this._reschedule(()=>ha.executeObjectIdsQuery(U),M);ha=yield this._reschedule(()=>ha.executeTimeQuery(U),M);ha=yield this._reschedule(()=>ha.executeAttributesQuery(U),M);const oa=ha.size;if(!oa)return{count:oa,extent:null};p.set(W,p.NEGATIVE_INFINITY);this.featureStore.forEachBounds(ha.items,pa=>p.expandWithAABB(W,pa),O);const ma={xmin:W[0],ymin:W[1],xmax:W[3],ymax:W[4],spatialReference:z.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(W[2])&&
isFinite(W[5])&&(ma.zmin=W[2],ma.zmax=W[5]);const la=K.project(ma,ha.spatialReference,g);la.spatialReference=z.cleanFromGeometryEngine(g||this.spatialReference);if(0===la.xmax-la.xmin){const pa=y.getMetersPerUnitForSR(la.spatialReference);la.xmin-=pa;la.xmax+=pa}if(0===la.ymax-la.ymin){const pa=y.getMetersPerUnitForSR(la.spatialReference);la.ymin-=pa;la.ymax+=pa}if(this.hasZ&&null!=la.zmin&&null!=la.zmax&&0===la.zmax-la.zmin){const pa=y.getMetersPerUnitForSR(la.spatialReference);la.zmin-=pa;la.zmax+=
pa}return{count:oa,extent:la}}catch(oa){if(oa===z.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw oa;}});return function(){return a.apply(this,arguments)}}();q.executeQueryForIds=function(){var a=e._asyncToGenerator(function*(g={},M){return this.executeQueryForIdSet(g,M).then(U=>Array.from(U))});return function(){return a.apply(this,arguments)}}();q.executeQueryForIdSet=function(){var a=e._asyncToGenerator(function*(g={},M){let U=aa.clone(g),ha;U.returnGeometry=!1;U.returnCentroid=!1;
U.outSR=null;try{U=yield this._schedule(()=>z.normalizeQuery(U,this.definitionExpression,this.spatialReference),M);U=yield this._reschedule(()=>this._checkQuerySupport(U),M);ha=yield this._reschedule(()=>this._executeGeometryQuery(U,M),M);ha=yield this._reschedule(()=>ha.executeAggregateIdsQuery(U),M);ha=yield this._reschedule(()=>ha.executeObjectIdsQuery(U),M);ha=yield this._reschedule(()=>ha.executeTimeQuery(U),M);ha=yield this._reschedule(()=>ha.executeAttributesQuery(U),M);const oa=ha.items,ma=
new Set;yield this._reschedule(()=>{for(const la of oa)ma.add(ha.featureAdapter.getObjectId(la))},M);return ma}catch(oa){if(oa===z.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw oa;}});return function(){return a.apply(this,arguments)}}();q.executeQueryForSnapping=function(){var a=e._asyncToGenerator(function*(g,M){const {point:U,distance:ha,types:oa}=g;if(oa===l.SnappingTypes.NONE)return{candidates:[]};const ma=yield this._reschedule(()=>this._checkQuerySupport(g.query),M),la=!R.equals(U.spatialReference,
this.spatialReference);la&&(yield K.checkProjectionSupport(U.spatialReference,this.spatialReference));var pa="number"===typeof ha?ha:ha.x,va="number"===typeof ha?ha:ha.y;pa={xmin:U.x-pa,xmax:U.x+pa,ymin:U.y-va,ymax:U.y+va,spatialReference:U.spatialReference};pa=la?K.project(pa,this.spatialReference):pa;if(!pa)return{candidates:[]};va=(yield Q.normalizeCentralMeridian(E.fromJSON(U),null,{signal:M}))[0];const Ba=(yield Q.normalizeCentralMeridian(E.fromJSON(pa),null,{signal:M}))[0];if(t.isNone(va)||
t.isNone(Ba))return{candidates:[]};let Ka=new l.default(this._searchFeatures(this._getQueryBBoxes(Ba.toJSON())),null,this);Ka=yield this._reschedule(()=>Ka.executeObjectIdsQuery(ma),M);Ka=yield this._reschedule(()=>Ka.executeTimeQuery(ma),M);Ka=yield this._reschedule(()=>Ka.executeAttributesQuery(ma),M);M=va.toJSON();M=la?K.project(M,this.spatialReference):M;return Ka.createSnappingResponse({...g,point:M,distance:la?Math.max(pa.xmax-pa.xmin,pa.ymax-pa.ymin)/2:ha},U.spatialReference)});return function(g,
M){return a.apply(this,arguments)}}();q.executeQueryForLatestObservations=function(){var a=e._asyncToGenerator(function*(g={},M){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new Z("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:g,timeInfo:this.timeInfo});let U=aa.clone(g),ha;try{U=yield this._schedule(()=>z.normalizeQuery(U,this.definitionExpression,this.spatialReference),M),U=yield this._reschedule(()=>this._checkQuerySupport(U),M),ha=yield this._reschedule(()=>
this._executeGeometryQuery(U,M),M),ha=yield this._reschedule(()=>ha.executeAggregateIdsQuery(U),M),ha=yield this._reschedule(()=>ha.executeObjectIdsQuery(U),M),ha=yield this._reschedule(()=>ha.executeTimeQuery(U),M),ha=yield this._reschedule(()=>ha.executeAttributesQuery(U),M),ha=yield this._reschedule(()=>ha.filterLatest(),M)}catch(oa){if(oa!==z.QUERY_ENGINE_EMPTY_RESULT)throw oa;ha=new l.default([],null,this)}return ha.createQueryResponse(U)});return function(){return a.apply(this,arguments)}}();
q.executeQueryForSummaryStatistics=function(){var a=e._asyncToGenerator(function*(g={},M,U){const {field:ha,normalizationField:oa,valueExpression:ma}=M;return(yield this._getQueryEngineResultForStats(g,{field:ha,normalizationField:oa,valueExpression:ma},U)).createSummaryStatisticsResponse(g,M)});return function(){return a.apply(this,arguments)}}();q.executeQueryForUniqueValues=function(){var a=e._asyncToGenerator(function*(g={},M,U){const {field:ha,valueExpression:oa}=M;return(yield this._getQueryEngineResultForStats(g,
{field:ha,valueExpression:oa},U)).createUniqueValuesResponse(g,M)});return function(){return a.apply(this,arguments)}}();q.executeQueryForClassBreaks=function(){var a=e._asyncToGenerator(function*(g={},M,U){const {field:ha,normalizationField:oa,valueExpression:ma}=M;return(yield this._getQueryEngineResultForStats(g,{field:ha,normalizationField:oa,valueExpression:ma},U)).createClassBreaksResponse(g,M)});return function(){return a.apply(this,arguments)}}();q.executeQueryForHistogram=function(){var a=
e._asyncToGenerator(function*(g={},M,U){const {field:ha,normalizationField:oa,valueExpression:ma}=M;return(yield this._getQueryEngineResultForStats(g,{field:ha,normalizationField:oa,valueExpression:ma},U)).createHistogramResponse(g,M)});return function(){return a.apply(this,arguments)}}();q._schedule=function(){var a=e._asyncToGenerator(function*(g,M){return t.isSome(this._frameTask)?this._frameTask.schedule(g,M):g(x.noBudget)});return function(g,M){return a.apply(this,arguments)}}();q._reschedule=
function(){var a=e._asyncToGenerator(function*(g,M){return t.isSome(this._frameTask)?this._frameTask.reschedule(g,M):g(x.noBudget)});return function(g,M){return a.apply(this,arguments)}}();q._getAll=function(){if(!this._allItems){const a=[];this.featureStore.forEach(g=>a.push(g));this._allItems=new l.default(a,null,this)}return this._allItems};q._executeGeometryQuery=function(){var a=e._asyncToGenerator(function*(g,M){var U=this;const {geometry:ha,outSR:oa,spatialRel:ma,returnGeometry:la,returnCentroid:pa}=
g;var va=this.featureStore.featureSpatialReference;const Ba=ha&&va&&va!==ha.spatialReference?K.project(ha,va):ha,Ka=la||pa,Ta=R.isValid(oa)&&!R.equals(this.spatialReference,oa),Oa=this._geometryQueryCache?Ta&&Ka?JSON.stringify({originalFilterGeometry:ha,spatialRelationship:ma,outSpatialReference:oa}):JSON.stringify({originalFilterGeometry:ha,spatialRelationship:ma}):null;if(Oa&&(va=this._geometryQueryCache.get(Oa),!t.isUndefined(va)))return va;va=function(){var fa=e._asyncToGenerator(function*(m){if(Ta&&
Ka)return m=yield m.project(oa),Oa&&U._geometryQueryCache.put(Oa,m,m.size||1),m;Oa&&U._geometryQueryCache.put(Oa,m,m.size||1);return m});return function(m){return fa.apply(this,arguments)}}();if(!Ba)return va(this._getAll());const Sa=this.featureAdapter;if("esriSpatialRelDisjoint"===ma){g=this._searchFeatures(this._getQueryBBoxes(ha));if(!g.length)return va(this._getAll());let fa,m;const G=new Set;for(var c of g)G.add(Sa.getObjectId(c));yield this._reschedule(()=>{let S=0;fa=Array(G.size);this.featureStore.forEach(T=>
fa[S++]=T);m=G},M);g=yield this._reschedule(e._asyncToGenerator(function*(){const S=yield N.getSpatialQueryOperator(ma,Ba,U.geometryType,U.hasZ,U.hasM);return new l.default(yield U._runSpatialFilter(fa,T=>!m.has(Sa.getObjectId(T))||S(Sa.getGeometry(T)),M),ha,U)}),M);return va(g)}c=this._searchFeatures(this._getQueryBBoxes(ha));if(!c.length)return va=new l.default([],ha,this),Oa&&this._geometryQueryCache.put(Oa,va,va.size||1),va;if(this._canExecuteSoloPass(Ba,g))return va(new l.default(c,ha,this));
const n=yield N.getSpatialQueryOperator(ma,Ba,this.geometryType,this.hasZ,this.hasM);g=yield this._runSpatialFilter(c,fa=>n(Sa.getGeometry(fa)),M);return va(new l.default(g,ha,this))});return function(g,M){return a.apply(this,arguments)}}();q._runSpatialFilter=function(){var a=e._asyncToGenerator(function*(g,M,U){var ha=this;if(!M)return g;if(t.isNone(this._frameTask))return g.filter(pa=>M(pa));let oa=0;const ma=[],la=function(){var pa=e._asyncToGenerator(function*(va){for(;oa<g.length;){const Ba=
g[oa++];M(Ba)&&(ma.push(Ba),va.madeProgress());va.done&&(yield ha._reschedule(Ka=>la(Ka),U))}});return function(va){return pa.apply(this,arguments)}}();return this._reschedule(pa=>la(pa),U).then(()=>ma)});return function(g,M,U){return a.apply(this,arguments)}}();q._canExecuteSoloPass=function(a,g){const {geometryType:M}=this;({spatialRel:g}=g);return N.canQueryWithRBush(a)&&("esriSpatialRelEnvelopeIntersects"===g||"esriGeometryPoint"===M&&("esriSpatialRelIntersects"===g||"esriSpatialRelContains"===
g||"esriSpatialRelWithin"===g))};q._getQueryBBoxes=function(a){if(N.canQueryWithRBush(a)){if(E.isExtent(a))return[r.fromValues(a.xmin,a.ymin,a.xmax,a.ymax)];if(E.isPolygon(a))return a.rings.map(g=>r.fromValues(Math.min(g[0][0],g[2][0]),Math.min(g[0][1],g[2][1]),Math.max(g[0][0],g[2][0]),Math.max(g[0][1],g[2][1])))}return[u.getBoundsXY(r.create(),a)]};q._searchFeatures=function(a){for(const U of a)this.featureStore.forEachInBounds(U,ha=>{I.add(ha)});const g=Array(I.size);let M=0;I.forEach(U=>g[M++]=
U);I.clear();return g};q._checkStatisticsSupport=function(){var a=e._asyncToGenerator(function*(g,M){if(0>g.distance||null!=g.geometryPrecision||g.multipatchOption||g.pixelSize||g.relationParam||g.text||g.outStatistics||g.groupByFieldsForStatistics||g.having||g.orderByFields)throw new Z("feature-store:unsupported-query","Unsupported query options",{query:g});return Promise.all([this._checkAttributesQuerySupport(g),this._checkStatisticsParamsSupport(M),N.checkSpatialQuerySupport(g,this.geometryType,
this.spatialReference),K.checkProjectionSupport(this.spatialReference,g.outSR)]).then(()=>g)});return function(g,M){return a.apply(this,arguments)}}();q._checkStatisticsParamsSupport=function(){var a=e._asyncToGenerator(function*(g){var M=[];g.valueExpression&&({arcadeUtils:M}=yield F.loadArcade(),M=M.extractFieldNames(g.valueExpression));g.field&&M.push(g.field);g.normalizationField&&M.push(g.normalizationField);if(!M.length)throw new Z("feature-store:unsupported-query","params should have at least a field or valueExpression",
{params:g});h.validateFields(this.fieldsIndex,M,"params contains missing fields")});return function(g){return a.apply(this,arguments)}}();q._checkQuerySupport=function(){var a=e._asyncToGenerator(function*(g){if(0>g.distance||null!=g.geometryPrecision||g.multipatchOption||g.pixelSize||g.relationParam||g.text)throw new Z("feature-store:unsupported-query","Unsupported query options",{query:g});return Promise.all([this._checkAttributesQuerySupport(g),this._checkStatisticsQuerySupport(g),N.checkSpatialQuerySupport(g,
this.geometryType,this.spatialReference),K.checkProjectionSupport(this.spatialReference,g.outSR)]).then(()=>g)});return function(g){return a.apply(this,arguments)}}();q._checkAttributesQuerySupport=function(a){const {outFields:g,orderByFields:M,returnDistinctValues:U,outStatistics:ha}=a,oa=ha?ha.map(ma=>ma.outStatisticFieldName&&ma.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(M&&0<M.length){const ma=M.map(la=>{const pa=la.toLowerCase();return-1<pa.indexOf(" asc")?pa.split(" asc")[0]:
-1<pa.indexOf(" desc")?pa.split(" desc")[0]:la}).filter(la=>-1===oa.indexOf(la));h.validateFields(this.fieldsIndex,ma,"orderByFields contains missing fields")}if(g&&0<g.length)h.validateFields(this.fieldsIndex,g,"outFields contains missing fields");else if(U)throw new Z("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:a});h.validateWhere(this.fieldsIndex,a.where)};q._checkStatisticsQuerySupport=function(){var a=e._asyncToGenerator(function*(g){const {outStatistics:M,
groupByFieldsForStatistics:U,having:ha}=g;var oa=U&&U.length,ma=M&&M.length;if(ha){if(!oa||!ma)throw new Z("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:g});h.validateHaving(this.fieldsIndex,ha,M)}if(ma&&w(M)){ma=M.map(la=>la.onStatisticField).filter(Boolean);h.validateFields(this.fieldsIndex,ma,"onStatisticFields contains missing fields");oa&&h.validateFields(this.fieldsIndex,U,"groupByFieldsForStatistics contains missing fields");
for(const la of M){const {onStatisticField:pa,statisticType:va}=la;if(("percentile_disc"===va||"percentile_cont"===va)&&"statisticParameters"in la){if({statisticParameters:oa}=la,!oa)throw new Z("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:la,query:g});}else if("count"!==va&&pa&&h.hasInvalidFieldType(pa,this.fieldsIndex))throw new Z("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:la,query:g});}}});return function(g){return a.apply(this,
arguments)}}();q._getQueryEngineResultForStats=function(){var a=e._asyncToGenerator(function*(g={},M,U){g=aa.clone(g);let ha;try{g=yield this._schedule(()=>z.normalizeQuery(g,this.definitionExpression,this.spatialReference),U),g=yield this._reschedule(()=>this._checkStatisticsSupport(g,M),U),ha=yield this._reschedule(()=>this._executeGeometryQuery(g,U),U),ha=yield this._reschedule(()=>ha.executeAggregateIdsQuery(g),U),ha=yield this._reschedule(()=>ha.executeObjectIdsQuery(g),U),ha=yield this._reschedule(()=>
ha.executeTimeQuery(g),U),ha=yield this._reschedule(()=>ha.executeAttributesQuery(g),U)}catch(oa){if(oa!==z.QUERY_ENGINE_EMPTY_RESULT)throw oa;ha=new l.default([],null,this)}return ha});return function(){return a.apply(this,arguments)}}();e._createClass(D,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const a=this.featureStore.fullBounds;return a?{xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:z.cleanFromGeometryEngine(this.spatialReference)}:
null}},{key:"timeExtent",get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=ca.getTimeExtent(this.timeInfo,this.featureStore):null}}]);return D}();const O=p.create(),W=p.create();k.Feature=function(D,q=null,a,g,M){this.attributes=D;this.geometry=a;this.centroid=g;this.filterFlags=M;this.groupId=-1;this.displayId=q};k.default=C;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers",
"./maybe","./PooledArray"],function(k,e,Z,aa){k.RemoveMode=void 0;(function(y){y[y.ALL=0]="ALL";y[y.SOME=1]="SOME"})(k.RemoveMode||(k.RemoveMode={}));let t=function(){function y(r,u,E){this._namespace=r;this._storage=u;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";E&&(this._storage.registerRemoveFunc(this._namespace,E),this._removeFunc=!0)}var p=y.prototype;p.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);
this._storage.deregister(this);this._storage=null};p.resetHitRate=function(){this._hit=this._miss=0};p.put=function(r,u,E,Q=0){this._storage.put(this._namespace+r,u,E,Q)};p.get=function(r){r=this._storage.get(this._namespace+r);void 0===r?++this._miss:++this._hit;return r};p.pop=function(r){r=this._storage.pop(this._namespace+r);void 0===r?++this._miss:++this._hit;return r};p.updateSize=function(r,u,E){this._storage.updateSize(this._namespace+r,u,E)};p.clear=function(){this._storage.clear(this._namespace)};
p.clearAll=function(){this._storage.clearAll()};p.getStats=function(){return this._storage.getStats()};p.resetStats=function(){this._storage.resetStats()};e._createClass(y,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return y}(),H=function(){function y(r=10485760){this._maxSize=r;this._db=
new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new aa;this._users=new aa}var p=y.prototype;p.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};p.register=function(r){this._users.push(r)};p.deregister=function(r){this._users.removeUnordered(r)};p.registerRemoveFunc=function(r,u){this._removeFuncs.push([r,u])};p.deregisterRemoveFunc=function(r){this._removeFuncs.filterInPlace(u=>u[0]!==r)};p.put=function(r,u,E,Q){const R=this._db.get(r);R&&
(this._size-=R.size,this._db.delete(r),R.entry!==u&&this._notifyRemove(r,R.entry,k.RemoveMode.ALL));E>this._maxSize?this._notifyRemove(r,u,k.RemoveMode.ALL):void 0===u?console.warn("Refusing to cache undefined entry "):!E||0>E?console.warn("Refusing to cache entry with invalid size "+E):(Q=1+Math.max(Q,-3)- -3,this._db.set(r,{entry:u,size:E,lifetime:Q,lives:Q}),this._size+=E,this._checkSizeLimit())};p.updateSize=function(r,u,E){const Q=this._db.get(r);if(Q&&Q.entry===u){for(this._size-=Q.size;E>this._maxSize;)if(E=
this._notifyRemove(r,u,k.RemoveMode.SOME),!(Z.isSome(E)&&0<E)){this._db.delete(r);return}Q.size=E;this._size+=E;this._checkSizeLimit()}};p.pop=function(r){const u=this._db.get(r);if(u)return this._size-=u.size,this._db.delete(r),++this._hit,u.entry;++this._miss};p.get=function(r){const u=this._db.get(r);if(void 0===u)++this._miss;else return this._db.delete(r),u.lives=u.lifetime,this._db.set(r,u),++this._hit,u.entry};p.getStats=function(){const r={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/
1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},u={},E=[];this._db.forEach((h,K)=>{const d=h.lifetime;E[d]=(E[d]||0)+h.size;this._users.forAll(l=>{l=l.namespace;K.startsWith(l)&&(u[l]=(u[l]||0)+h.size)})});const Q={};this._users.forAll(h=>{const K=h.namespace;!isNaN(h.hitRate)&&0<h.hitRate?(u[K]=u[K]||0,Q[K]=Math.round(100*h.hitRate)+"%"):Q[K]="0%"});var R=Object.keys(u);R.sort((h,K)=>u[K]-u[h]);R.forEach(h=>r[h]=Math.round(u[h]/2**20)+"MB / "+Q[h]);
for(R=E.length-1;0<=R;--R){const h=E[R];h&&(r["Priority "+(R+-3-1)]=Math.round(h/this.size*100)+"%")}return r};p.resetStats=function(){this._hit=this._miss=0;this._users.forAll(r=>r.resetHitRate())};p.clear=function(r){this._db.forEach((u,E)=>{E.startsWith(r)&&(this._size-=u.size,this._db.delete(E),this._notifyRemove(E,u.entry,k.RemoveMode.ALL))})};p.clearAll=function(){this._db.forEach((r,u)=>this._notifyRemove(u,r.entry,k.RemoveMode.ALL));this._size=0;this._db.clear()};p._getHitRate=function(){return this._hit/
(this._hit+this._miss)};p._notifyRemove=function(r,u,E){let Q;this._removeFuncs.some(R=>r.startsWith(R[0])?(R=R[1](u,E),"number"===typeof R&&(Q=R),!0):!1);return Q};p._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [r,u]of this._db){this._db.delete(r);if(1>=u.lives){this._size-=u.size;const E=this._notifyRemove(r,u.entry,k.RemoveMode.SOME);Z.isSome(E)&&0<E&&(this._size+=E,u.lives=u.lifetime,u.size=E,this._db.set(r,u))}else--u.lives,this._db.set(r,u);if(this._size<=.9*this.maxSize)break}};
e._createClass(y,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(r){this._maxSize=Math.max(r,0);this._checkSizeLimit()}}]);return y}();k.MIN_PRIORITY=-3;k.MemCache=t;k.MemCacheStorage=H;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometry/cut ../../rest/geometry/simplify".split(" "),
function(k,e,Z,aa,t,H,y,p,r,u,E,Q,R){function h(F){const x=[];let w=0,I=0;for(let X=0;X<F.length;X++){const A=F[X];let C=null;for(let O=0;O<A.length;O++)C=A[O],x.push(C),0===O?I=w=C[0]:(w=Math.min(w,C[0]),I=Math.max(I,C[0]));C&&x.push([(w+I)/2,0])}return x}function K(F,x){if(!(F instanceof p||F instanceof y))throw L.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new aa("straightLineDensify: the input geometry is neither polyline nor polygon");var w=r.getGeometryParts(F);
const I=[];for(const A of w){w=[];I.push(w);w.push([A[0][0],A[0][1]]);for(let C=0;C<A.length-1;C++){const O=A[C][0],W=A[C][1],D=A[C+1][0],q=A[C+1][1];var X=Math.sqrt((D-O)*(D-O)+(q-W)*(q-W));const a=(q-W)/X,g=(D-O)/X,M=X/x;if(1<M){for(let U=1;U<=M-1;U++){const ha=U*x;w.push([g*ha+O,a*ha+W])}X=(X+Math.floor(M-1)*x)/2;w.push([g*X+O,a*X+W])}w.push([D,q])}}return"polygon"===F.type?new y({rings:I,spatialReference:F.spatialReference}):new p({paths:I,spatialReference:F.spatialReference})}function d(F,x,
w){x&&(F=K(F,1E6),F=E.webMercatorToGeographic(F,!0));w&&(F=r.updatePolyGeometry(F,w));return F}function l(F,x,w){if(Array.isArray(F)){var I=F[0];I>x?(w=r.offsetMagnitude(I,x),F[0]=I+-2*w*x):I<w&&(x=r.offsetMagnitude(I,w),F[0]=I+-2*x*w)}else I=F.x,I>x?(w=r.offsetMagnitude(I,x),F=F.clone().offset(-2*w*x,0)):I<w&&(x=r.offsetMagnitude(I,w),F=F.clone().offset(-2*x*w,0));return F}function N(F,x){let w=-1;for(let I=0;I<x.cutIndexes.length;I++){const X=x.cutIndexes[I],A=x.geometries[I],C=r.getGeometryParts(A);
for(let O=0;O<C.length;O++){const W=C[O];W.some(D=>{if(180>D[0])return!0;D=0;for(var q=0;q<W.length;q++){var a=W[q][0];D=a>D?a:D}D=Number(D.toFixed(9));D=-360*r.offsetMagnitude(D,180);for(q=0;q<W.length;q++)a=A.getPoint(O,q),A.setPoint(O,q,a.clone().offset(D,0));return!0})}if(X===w)if("polygon"===F[0].type)for(const O of r.getGeometryParts(A))F[X]=F[X].addRing(O);else{if("polyline"===F[0].type)for(const O of r.getGeometryParts(A))F[X]=F[X].addPath(O)}else w=X,F[X]=A}return F}function ca(F,x,w){return z.apply(this,
arguments)}function z(){z=e._asyncToGenerator(function*(F,x,w){var I;if(!Array.isArray(F))return ca([F],x);x=null!=(I=null==x?void 0:x.url)?I:Z.geometryServiceUrl;let X,A,C;let O=0;var W=[];I=[];for(var D of F)if(H.isNone(D))I.push(D);else{if(!q){var q=D.spatialReference;var a=u.getInfo(q);var g=(X=q.isWebMercator)?102100:4326;A=r.cutParams[g].maxX;C=r.cutParams[g].minX;var M=r.cutParams[g].plus180Line;g=r.cutParams[g].minus180Line}if(a)if("mesh"===D.type)I.push(D);else if("point"===D.type)I.push(l(D.clone(),
A,C));else if("multipoint"===D.type){var U=D.clone();U.points=U.points.map(ha=>l(ha,A,C));I.push(U)}else if("extent"===D.type)U=D.clone()._normalize(!1,!1,a),I.push(U.rings?new y(U):U);else if(D.extent){U=D.extent;const ha=2*r.offsetMagnitude(U.xmin,C)*A;let oa=0===ha?D.clone():r.updatePolyGeometry(D.clone(),ha);U.offset(ha,0);U.intersects(M)&&U.xmax!==A?(O=U.xmax>O?U.xmax:O,oa=d(oa,X),W.push(oa),I.push("cut")):U.intersects(g)&&U.xmin!==C?(O=2*U.xmax*A>O?2*U.xmax*A:O,oa=d(oa,X,360),W.push(oa),I.push("cut")):
I.push(oa)}else I.push(D.clone());else I.push(D)}q=r.offsetMagnitude(O,A);a=-90;M=q;for(D=new p;0<q;)g=-180+360*q,D.addPath([[g,a],[g,-1*a]]),a*=-1,q--;if(0<W.length&&0<M){q=yield Q.cut(x,W,D,w);q=N(W,q);a=[];W=[];for(M=0;M<I.length;M++)D=I[M],"cut"!==D?W.push(D):(D=q.shift(),g=F[M],H.isSome(g)&&"polygon"===g.type&&g.rings&&1<g.rings.length&&D.rings.length>=g.rings.length?(a.push(D),W.push("simplify")):W.push(X?E.geographicToWebMercator(D):D));if(!a.length)return W;I=yield R.simplify(x,a,w);F=[];
for(w=0;w<W.length;w++)x=W[w],"simplify"!==x?F.push(x):F.push(X?E.geographicToWebMercator(I.shift()):I.shift());return F}F=[];for(w=0;w<I.length;w++)x=I[w],"cut"!==x?F.push(x):(x=W.shift(),F.push(!0===X?E.geographicToWebMercator(x):x));return Promise.resolve(F)});return z.apply(this,arguments)}const L=t.getLogger("esri.geometry.support.normalizeUtils");k.getDenormalizedExtent=function(F){if(!F)return null;const x=F.extent;if(!x)return null;var w=F.spatialReference&&u.getInfo(F.spatialReference);if(!w)return x;
const [I,X]=w.valid;({width:w}=x);let {xmin:A,xmax:C}=x;[A,C]=[C,A];if("extent"===F.type||0===w||w<=X||w>2*X||A<I||C>X)return x;let O;switch(F.type){case "polygon":if(1<F.rings.length)O=h(F.rings);else return x;break;case "polyline":if(1<F.paths.length)O=h(F.paths);else return x;break;case "multipoint":O=F.points}F=x.clone();for(let W=0;W<O.length;W++){let D=O[W][0];0>D?(D+=X,C=Math.max(D,C)):(D-=X,A=Math.min(D,A))}F.xmin=A;F.xmax=C;return F.width<w?(F.xmin-=X,F.xmax-=X,F):x};k.normalizeCentralMeridian=
ca;k.normalizeMapX=function(F,x){if(x=u.getInfo(x)){const [w,I]=x.valid;x=I-w;if(F<w)for(;F<w;)F+=x;if(F>I)for(;F>I;)F-=x}return F};k.straightLineDensify=K;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(k,e,Z,aa){function t(y){return aa.isPolygon(y)?y.rings:y.paths}const H={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new e({paths:[[[2.0037508342788905E7,
-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:Z.WebMercator}),minus180Line:new e({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:Z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new e({paths:[[[180,-180],[180,180]]],spatialReference:Z.WGS84}),minus180Line:new e({paths:[[[-180,-180],[-180,180]]],spatialReference:Z.WGS84})}};k.cutParams=H;k.getGeometryParts=t;k.getSpatialReferenceMinMaxX=
function(y){y=(null==y?0:y.isWebMercator)?102100:4326;return[H[y].minX,H[y].maxX]};k.offsetMagnitude=function(y,p){return Math.ceil((y-p)/(2*p))};k.updatePolyGeometry=function(y,p){const r=t(y);for(const u of r)for(const E of u)E[0]+=p;return y};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/rest/geometry/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),function(k,e,Z,aa,
t,H){function y(){y=e._asyncToGenerator(function*(p,r,u,E){p="string"===typeof p?t.urlToObject(p):p;const Q=r[0].spatialReference;r={...E,query:{...p.query,f:"json",sr:JSON.stringify(Q),target:JSON.stringify({geometryType:H.getJsonType(r[0]),geometries:r}),cutter:JSON.stringify(u)}};r=yield aa(p.path+"/cut",r);const {cutIndexes:R,geometries:h=[]}=r.data;return{cutIndexes:R,geometries:h.map(K=>{K=H.fromJSON(K);K.spatialReference=Q;return K})}});return y.apply(this,arguments)}k.cut=function(p,r,u,E){return y.apply(this,
arguments)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/rest/geometry/simplify":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../../core/urlUtils","../../geometry/support/jsonUtils"],function(k,e,Z,aa,t){function H(){H=e._asyncToGenerator(function*(r,u,E){const Q="string"===typeof r?aa.urlToObject(r):r;r=u[0].spatialReference;const R=t.getJsonType(u[0]);u={...E,query:{...Q.query,f:"json",sr:r.wkid?r.wkid:JSON.stringify(r),geometries:JSON.stringify(y(u))}};
u=yield Z(Q.path+"/simplify",u);return p(u.data,R,r)});return H.apply(this,arguments)}function y(r){return{geometryType:t.getJsonType(r[0]),geometries:r.map(u=>u.toJSON())}}function p(r,u,E){const Q=t.getGeometryType(u);return r.map(R=>{R=Q.fromJSON(R);R.spatialReference=E;return R})}k.simplify=function(r,u,E){return H.apply(this,arguments)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],
function(k,e,Z){function aa(r,u){return r?y.get(r,u):null}function t(r,u,E,Q=!0){const R=[];for(const h of u)if("*"!==h&&!r.has(h))if(Q){u=H(h);try{const K=aa(u,r);if(!K)throw new e("feature-store:unsupported-query","invalid SQL expression",{where:u});if(!K.isStandardized)throw new e("feature-store:unsupported-query","expression is not standard",{clause:K});t(r,K.fieldNames,"expression contains missing fields")}catch(K){if((u=K&&K.details)&&(u.clause||u.where))throw K;u&&u.missingFields?R.push(...u.missingFields):
R.push(h)}}else R.push(h);if(R.length)throw new e("feature-store:unsupported-query",E,{missingFields:R});}function H(r){return r.split(" as ")[0]}const y=new Z.WhereClauseCache(50,500),p=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));k.getAliasFromFieldName=function(r){return r.split(" as ")[1]};k.getExpressionFromFieldName=H;k.getWhereClause=aa;k.hasInvalidFieldType=function(r,u){return(r=
u.get(r))?!p.has(r.type):!1};k.validateFields=t;k.validateHaving=function(r,u,E){if(!u)return!0;const Q=y.get(u,r);if(!Q)throw new e("feature-store:unsupported-query","invalid SQL expression",{having:u});if(!Q.isAggregate)throw new e("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:u});t(r,Q.fieldNames,"having contains missing fields");if(!Q.getExpressions().every(R=>{const {aggregateType:h,field:K}=R,d=r.has(K)&&r.get(K).name;return E.some(l=>{const {onStatisticField:N,
statisticType:ca}=l;return(r.has(N)&&r.get(N).name)===d&&ca.toLowerCase().trim()===h})}))throw new e("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:u});return!0};k.validateWhere=function(r,u){if(!u)return!0;const E=y.get(u,r);if(!E)throw new e("feature-store:unsupported-query","invalid SQL expression",{where:u});if(!E.isStandardized)throw new e("feature-store:unsupported-query","where clause is not standard",{where:u});t(r,E.fieldNames,"where clause contains missing fields");
return!0};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(k,e,Z){let aa=function(){function t(H,y){this._cache=new e(H);this._invalidCache=new e(y)}t.prototype.get=function(H,y){const p=`${y.uid}:${H}`,r=this._cache.get(p);if(r)return r;if(void 0!==this._invalidCache.get(p))return null;try{const u=Z.WhereClause.create(H,y);this._cache.put(p,u);return u}catch{return this._invalidCache.put(p,null),
null}};return t}();k.WhereClauseCache=aa;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(k){return function(){function e(aa,t){this._storage=new k.MemCacheStorage;this._storage.maxSize=aa;t&&this._storage.registerRemoveFunc("",t)}var Z=e.prototype;Z.put=function(aa,t){this._storage.put(aa,t,1,1)};Z.pop=function(aa){return this._storage.pop(aa)};Z.get=function(aa){return this._storage.get(aa)};Z.clear=function(){this._storage.clearAll()};
Z.destroy=function(){this._storage.destroy()};return e}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(k,e,Z,aa,t,H){function y(D,q){D+="";return D.length>=q?D:Array(q-D.length+1).join("0")+D}function p(D,q,a="0",g="0",M="0",U="0",ha="",oa="0",ma="0"){return"+"===ha||"-"===ha?(D=`${y(parseInt(D,10),4)}-${y(parseInt(q,10),2)}-${y(parseInt(a,10),2)}`,q="",10>parseFloat(U)&&
(q="0"),g=`${y(parseInt(g,10),2)}:${y(parseInt(M,10),2)}:${q+parseFloat(U).toString()}`,ha=`${ha}${y(parseInt(oa,10),2)}:${y(parseInt(ma,10),2)}`,new Date(D+"T"+g+ha)):new Date(parseInt(D,10),parseInt(q,10)-1,parseInt(a,10),parseInt(g,10),parseInt(M,10),parseFloat(U))}function r(D){let q=F.exec(D);if(null!==q){const [,a,g,M,U,ha,oa]=q;return p(a,g,M,U,ha,oa)}q=x.exec(D);if(null!==q){const [,a,g,M,U,ha,oa,ma,la,pa]=q;return p(a,g,M,U,ha,oa,ma,la,pa)}q=w.exec(D);if(null!==q){const [,a,g,M,U,ha,oa,ma,
la]=q;return p(a,g,M,U,ha,"0",oa,ma,la)}q=I.exec(D);if(null!==q){const [,a,g,M,U,ha]=q;return p(a,g,M,U,ha)}q=L.exec(D);if(null!==q){const [,a,g,M]=q;return p(a,g,M)}throw Error("SQL Invalid Timestamp");}function u(D){D=L.exec(D);if(null===D)throw Error("SQL Invalid Date");const [,q,a,g]=D;return new Date(parseInt(q,10),parseInt(a,10)-1,parseInt(g,10))}function E(D){return Array.isArray(D)?D:[D]}function Q(D){return null!==D?!0!==D:null}function R(D,q){return null!=D&&null!=q?!0===D&&!0===q:!1===
D||!1===q?!1:null}function h(D,q){return null!=D&&null!=q?!0===D||!0===q:!0===D||!0===q?!0:null}function K(D,q){if(null==D)return null;let a=!1;for(const g of q)if(null==g)a=null;else if(D===g){a=!0;break}return a}function d(D,q,a){if(null==D)return null;{let g="",M=O.Normal;for(let U=0;U<q.length;U++){const ha=q.charAt(U);switch(M){case O.Normal:ha===a?M=O.Escaped:g="-[]/{}()*+?.\\^$|".includes(ha)?g+("\\"+ha):"%"===ha?g+".*":"_"===ha?g+".":g+ha;break;case O.Escaped:g="-[]/{}()*+?.\\^$|".includes(ha)?
g+("\\"+ha):g+ha,M=O.Normal}}q=new RegExp("^"+g+"$","m")}return q.test(D)}function l(D){return D instanceof Date?D.valueOf():D}function N(D,q,a){if(null==q||null==a)return null;q=l(q);a=l(a);switch(D){case "\x3c\x3e":return q!==a;case "\x3d":return q===a;case "\x3e":return q>a;case "\x3c":return q<a;case "\x3e\x3d":return q>=a;case "\x3c\x3d":return q<=a}}function ca(D,q,a){if(q instanceof t.SqlInterval)if(a instanceof Date)switch(D){case "+":return new Date(q.valueInMilliseconds()+a.getTime());case "-":return q.valueInMilliseconds()-
a.getTime();case "*":return q.valueInMilliseconds()*a.getTime();case "/":return q.valueInMilliseconds()/a.getTime()}else if(a instanceof t.SqlInterval)switch(D){case "+":return t.SqlInterval.createFromMilliseconds(q.valueInMilliseconds()+a.valueInMilliseconds());case "-":return t.SqlInterval.createFromMilliseconds(q.valueInMilliseconds()-a.valueInMilliseconds());case "*":return q.valueInMilliseconds()*a.valueInMilliseconds();case "/":return q.valueInMilliseconds()/a.valueInMilliseconds()}else q=q.valueInMilliseconds();
else if(a instanceof t.SqlInterval)if(q instanceof Date)switch(D){case "+":return new Date(a.valueInMilliseconds()+q.getTime());case "-":return new Date(q.getTime()-a.valueInMilliseconds());case "*":return q.getTime()*a.valueInMilliseconds();case "/":return q.getTime()/a.valueInMilliseconds()}else a=a.valueInMilliseconds();else if(q instanceof Date&&"number"===typeof a)switch(a*=864E5,q=q.getTime(),D){case "+":return new Date(q+a);case "-":return new Date(q-a);case "*":return new Date(q*a);case "/":return new Date(q/
a)}else if(a instanceof Date&&"number"===typeof q)switch(q*=864E5,a=a.getTime(),D){case "+":return new Date(q+a);case "-":return new Date(q-a);case "*":return new Date(q*a);case "/":return new Date(q/a)}switch(D){case "+":return q+a;case "-":return q-a;case "*":return q*a;case "/":return q/a}}function z(D,q,a,g){D=g.getAttribute(D,q);return null!=D&&1===a[q]?new Date(D):D}const L=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,F=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,x=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,
w=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,I=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,X=new Set(["current_timestamp","current_date","current_time"]);let A=function(){function D(){}D.makeBool=function(q){return!0===q};D.featureValue=function(q,a,g,M){return z(q,a,g,M)};D.equalsNull=function(q){return null===q};D.applyLike=function(q,a,g){return d(q,a,g)};D.ensureArray=function(q){return E(q)};D.applyIn=function(q,a){return K(q,a)};D.currentDate=function(){const q=
new Date;q.setHours(0,0,0,0);return q};D.makeSqlInterval=function(q,a,g){return t.SqlInterval.createFromValueAndQualifer(q,a,g)};D.convertInterval=function(q){return q instanceof t.SqlInterval?q.valueInMilliseconds():q};D.currentTimestamp=function(){return new Date};D.compare=function(q,a,g){return N(q,a,g)};D.calculate=function(q,a,g){return ca(q,a,g)};D.makeComparable=function(q){return l(q)};D.evaluateFunction=function(q,a){return t.evaluateFunction(q,a)};D.lookup=function(q,a){q=a[q];return void 0===
q?null:q};D.between=function(q,a){return null==q||null==a[0]||null==a[1]?null:q>=a[0]&&q<=a[1]};D.notbetween=function(q,a){return null==q||null==a[0]||null==a[1]?null:q<a[0]||q>a[1]};D.ternaryNot=function(q){return Q(q)};D.ternaryAnd=function(q,a){return R(q,a)};D.ternaryOr=function(q,a){return h(q,a)};return D}(),C=function(){function D(a,g){this.fieldsIndex=g;this.datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=H.WhereGrammar.parse(a);const {isStandardized:M,isAggregate:U,
referencedFieldNames:ha}=this._extractExpressionInfo(g);this.referencedFieldNames=ha;this.isStandardized=M;this.isAggregate=U}D.create=function(a,g){return new D(a,g)};var q=D.prototype;q.testSet=function(a,g=W){const M={};for(const U of this.fieldNames)M[U]=a.map(ha=>g.getAttribute(ha,U));return!!this._evaluateNode(this.parseTree,{attributes:M},W)};q.calculateValue=function(a,g=W){a=this._evaluateNode(this.parseTree,a,g);return a instanceof t.SqlInterval?a.valueInMilliseconds()/864E5:a};q.calculateValueCompiled=
function(a,g=W){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(a,this.parameters,g,this.datefields);if(Z("esri-csp-restrictions"))return this.calculateValue(a,g);this._compileMe();return this.parseTree._compiledVersion(a,this.parameters,g,this.datefields)};q.testFeature=function(a,g=W){return!!this._evaluateNode(this.parseTree,a,g)};q.testFeatureCompiled=function(a,g=W){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(a,this.parameters,
g,this.datefields);if(Z("esri-csp-restrictions"))return this.testFeature(a,g);this._compileMe();return!!this.parseTree._compiledVersion(a,this.parameters,g,this.datefields)};q.getFunctions=function(){const a=new Set;this._visitAll(this.parseTree,g=>{"function"===g.type&&a.add(g.name.toLowerCase())});return Array.from(a)};q.getExpressions=function(){const a=new Map;this._visitAll(this.parseTree,g=>{if("function"===g.type){const M=g.name.toLowerCase();g=g.args.value[0];if("column_ref"===g.type){g=g.column;
const U=`${M}-${g}`;a.has(U)||a.set(U,{aggregateType:M,field:g})}}});return[...a.values()]};q.getVariables=function(){const a=new Set;this._visitAll(this.parseTree,g=>{"param"===g.type&&a.add(g.value.toLowerCase())});return Array.from(a)};q._compileMe=function(){const a="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",a)).bind(A)};q._extractExpressionInfo=function(a){const g=
[],M=new Set;let U=!0,ha=!0;this._visitAll(this.parseTree,oa=>{switch(oa.type){case "column_ref":{const ma=a.get(oa.column);let la,pa;ma?la=pa=ma.name:(pa=oa.column,la=pa.toLowerCase());!ma||"date"!==ma.type&&"esriFieldTypeDate"!==ma.type||(this.datefields[ma.name]=1);M.has(la)||(M.add(la),g.push(pa));oa.column=pa;break}case "function":{const {name:ma,args:la}=oa;oa=la.value.length;U&&(U=t.isStandardized(ma,oa));ha&&(ha=aa.isAggregate(ma,oa))}}});return{referencedFieldNames:Array.from(g),isStandardized:U,
isAggregate:ha}};q._visitAll=function(a,g){if(null!=a)switch(g(a),a.type){case "when_clause":this._visitAll(a.operand,g);this._visitAll(a.value,g);break;case "case_expression":for(const M of a.clauses)this._visitAll(M,g);"simple"===a.format&&this._visitAll(a.operand,g);null!==a.else&&this._visitAll(a.else,g);break;case "expr_list":for(const M of a.value)this._visitAll(M,g);break;case "unary_expr":this._visitAll(a.expr,g);break;case "binary_expr":this._visitAll(a.left,g);this._visitAll(a.right,g);
break;case "function":this._visitAll(a.args,g)}};q.evaluateNodeToJavaScript=function(a){switch(a.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(a.value)+", "+JSON.stringify(a.qualifier)+","+JSON.stringify(a.op)+")";case "case_expression":var g="";if("simple"===a.format){var M="this.makeComparable("+this.evaluateNodeToJavaScript(a.operand)+")";g="( ";for(let U=0;U<a.clauses.length;U++)g+=" ("+M+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(a.clauses[U].operand)+
")) ? ("+this.evaluateNodeToJavaScript(a.clauses[U].value)+") : "}else for(g="( ",M=0;M<a.clauses.length;M++)g+=" this.makeBool("+this.evaluateNodeToJavaScript(a.clauses[M].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(a.clauses[M].value)+") : ";g=null!==a.else?g+this.evaluateNodeToJavaScript(a.else):g+"null";return g+=" )";case "param":return"this.lookup("+JSON.stringify(a.value.toLowerCase())+",lookups)";case "expr_list":g="[";for(M of a.value)"["!==g&&(g+=","),g+=this.evaluateNodeToJavaScript(M);
return g+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(a.expr)+")";case "binary_expr":switch(a.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+" )";case "IS":if("null"!==a.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(a.left)+
")";case "ISNOT":if("null"!==a.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(a.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(a.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(a.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(a.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(a.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(a.left)+
","+this.evaluateNodeToJavaScript(a.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+","+JSON.stringify(a.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+","+JSON.stringify(a.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+
JSON.stringify(a.operator)+","+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(a.operator)+","+this.evaluateNodeToJavaScript(a.left)+","+this.evaluateNodeToJavaScript(a.right)+")"}throw Error("Not Supported Operator "+a.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(a.value);case "date":return"(new Date("+u(a.value).getTime().toString()+"))";case "timestamp":return"(new Date("+
r(a.value).getTime().toString()+"))";case "current_time":return"date"===a.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(a.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(a.name)+","+this.evaluateNodeToJavaScript(a.args)+")"}throw Error("Unsupported sql syntax "+a.type);};q._evaluateNode=function(a,g,M){switch(a.type){case "interval":return g=this._evaluateNode(a.value,g,
M),t.SqlInterval.createFromValueAndQualifer(g,a.qualifier,a.op);case "case_expression":if("simple"===a.format){var U=l(this._evaluateNode(a.operand,g,M));for(var ha=0;ha<a.clauses.length;ha++)if(U===l(this._evaluateNode(a.clauses[ha].operand,g,M)))return this._evaluateNode(a.clauses[ha].value,g,M)}else for(U=0;U<a.clauses.length;U++)if(!0===this._evaluateNode(a.clauses[U].operand,g,M))return this._evaluateNode(a.clauses[U].value,g,M);return null!==a.else?this._evaluateNode(a.else,g,M):null;case "param":return this.parameters[a.value.toLowerCase()];
case "expr_list":U=[];for(ha of a.value)U.push(this._evaluateNode(ha,g,M));return U;case "unary_expr":return Q(this._evaluateNode(a.expr,g,M));case "binary_expr":switch(a.operator){case "AND":return R(this._evaluateNode(a.left,g,M),this._evaluateNode(a.right,g,M));case "OR":return h(this._evaluateNode(a.left,g,M),this._evaluateNode(a.right,g,M));case "IS":if("null"!==a.right.type)throw Error("Unsupported RHS for IS");return null===this._evaluateNode(a.left,g,M);case "ISNOT":if("null"!==a.right.type)throw Error("Unsupported RHS for IS");
return null!==this._evaluateNode(a.left,g,M);case "IN":return U=E(this._evaluateNode(a.right,g,M)),K(this._evaluateNode(a.left,g,M),U);case "NOT IN":return U=E(this._evaluateNode(a.right,g,M)),Q(K(this._evaluateNode(a.left,g,M),U));case "BETWEEN":return U=this._evaluateNode(a.left,g,M),a=this._evaluateNode(a.right,g,M),null==U||null==a[0]||null==a[1]?null:U>=l(a[0])&&U<=l(a[1]);case "NOTBETWEEN":return U=this._evaluateNode(a.left,g,M),a=this._evaluateNode(a.right,g,M),null==U||null==a[0]||null==a[1]?
null:U<l(a[0])||U>l(a[1]);case "LIKE":return d(this._evaluateNode(a.left,g,M),this._evaluateNode(a.right,g,M),a.escape);case "NOT LIKE":return Q(d(this._evaluateNode(a.left,g,M),this._evaluateNode(a.right,g,M),a.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return N(a.operator,this._evaluateNode(a.left,g,M),this._evaluateNode(a.right,g,M));case "-":case "+":case "*":case "/":return ca(a.operator,this._evaluateNode(a.left,g,M),this._evaluateNode(a.right,
g,M))}case "null":case "bool":case "string":case "number":return a.value;case "date":return u(a.value);case "timestamp":return r(a.value);case "current_time":return g=new Date,"date"===a.mode&&g.setHours(0,0,0,0),g;case "column_ref":return z(g,a.column,this.datefields,M);case "function":return g=this._evaluateNode(a.args,g,M),this.isAggregate?aa.aggregateFunction(a.name,g):t.evaluateFunction(a.name,g)}throw Error("Unsupported sql syntax "+a.type);};e._createClass(D,[{key:"fieldNames",get:function(){return this.referencedFieldNames}},
{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,a=>{"current_time"===a.type?this._hasDateFunctions=!0:"function"===a.type&&(this._hasDateFunctions=this._hasDateFunctions||X.has(a.name.toLowerCase()))});return this._hasDateFunctions}}]);return D}();var O;(function(D){D[D.Normal=0]="Normal";D[D.Escaped=1]="Escaped"})(O||(O={}));const W={getAttribute(D,q){return(D&&"object"===typeof D.attributes?
D.attributes:D)[q]}};k.WhereClause=C;k.defaultAttributeAdapter=W;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(k){function e(t){let H=0;for(let y=0;y<t.length;y++)H+=t[y];return H/t.length}function Z(t){const H=e(t),y=t.length;let p=0;for(const r of t)p+=(r-H)**2;return 1<y?p/(y-1):0}const aa={min:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.min.apply(Math,t[0])},max:{minParams:1,maxParams:1,evaluate:t=>null==
t[0]?null:Math.max.apply(Math,t[0])},avg:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:e(t[0])},sum:{minParams:1,maxParams:1,evaluate:t=>{if(null==t[0])t=null;else{{t=t[0];let H=0;for(let y=0;y<t.length;y++)H+=t[y];t=H}}return t}},stddev:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.sqrt(Z(t[0]))},count:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:t[0].length},var:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Z(t[0])}};k.aggregateFunction=function(t,H){const y=aa[t.toLowerCase()];
if(null==y)throw Error("Function Not Recognised");if(H.length<y.minParams||H.length>y.maxParams)throw Error(`Invalid Parameter count for call to ${t.toUpperCase()}`);return y.evaluate(H)};k.isAggregate=function(t,H){t=aa[t.toLowerCase()];return null!=t&&H>=t.minParams&&H<=t.maxParams};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(k,e){let Z=function(){function t(){this.op="+";this.minute=this.year=this.month=
this.hour=this.second=this.day=0}t._fixDefaults=function(H){if(null!==H.precision||null!==H.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};t.createFromMilliseconds=function(H){const y=new t;y.second=H/1E3;return y};t.createFromValueAndQualifer=function(H,y,p){let r=null;const u=new t;u.op="-"===p?"-":"+";if("interval-period"===y.type){t._fixDefaults(y);if("year"===y.period||"month"===y.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(H))u[y.period]=
parseFloat(H);else throw Error("Illegal Interval");}else{t._fixDefaults(y.start);t._fixDefaults(y.end);if("year"===y.start.period||"month"===y.start.period)throw Error("Year-Month Intervals not supported");if("year"===y.end.period||"month"===y.end.period)throw Error("Year-Month Intervals not supported");switch(y.start.period){case "day":switch(y.end.period){case "hour":r=/^[0-9]{1,} [0-9]{1,}$/;if(r.test(H))u[y.start.period]=parseFloat(H.split(" ")[0]),u[y.end.period]=parseFloat(H.split(" ")[1]);
else throw Error("Illegal Interval");break;case "minute":r=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(r.test(H))u[y.start.period]=parseFloat(H.split(" ")[0]),H=H.split(" ")[1].split(":"),u.hour=parseFloat(H[0]),u.minute=parseFloat(H[1]);else throw Error("Illegal Interval");break;case "second":r=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(r.test(H))u[y.start.period]=parseFloat(H.split(" ")[0]),H=H.split(" ")[1].split(":"),u.hour=parseFloat(H[0]),u.minute=parseFloat(H[1]),u.second=
parseFloat(H[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(y.end.period){case "minute":r=/^[0-9]{1,}:[0-9]{1,}$/;if(r.test(H))u.hour=parseFloat(H.split(":")[0]),u.minute=parseFloat(H.split(":")[1]);else throw Error("Illegal Interval");break;case "second":r=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(r.test(H))H=H.split(":"),u.hour=parseFloat(H[0]),u.minute=parseFloat(H[1]),u.second=parseFloat(H[2]);else throw Error("Illegal Interval");
break;default:throw"Invalid Interval.";}break;case "minute":switch(y.end.period){case "second":r=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(r.test(H))H=H.split(":"),u.minute=parseFloat(H[0]),u.second=parseFloat(H[1]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return u};t.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*
864E5+31536E6*this.year)};return t}();const aa={extract:{minParams:2,maxParams:2,evaluate:([t,H])=>{if(null==H)return null;if(H instanceof Date)switch(t.toUpperCase()){case "SECOND":return H.getSeconds();case "MINUTE":return H.getMinutes();case "HOUR":return H.getHours();case "DAY":return H.getDate();case "MONTH":return H.getMonth()+1;case "YEAR":return H.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:t=>{if(2===t.length){const [H,
y]=t;return null==H||null==y?null:H.toString().substring(y-1)}if(3===t.length){const [H,y,p]=t;return null==H||null==y||null==p?null:0>=p?"":H.toString().substring(y-1,y+p-1)}}},position:{minParams:2,maxParams:2,evaluate:([t,H])=>null==t||null==H?null:H.indexOf(t)+1},trim:{minParams:2,maxParams:3,evaluate:t=>{var H=3===t.length,y=H?t[1]:" ";H=H?t[2]:t[1];if(null==y||null==H)return null;y=`(${e.escapeRegExpString(y)})`;switch(t[0]){case "BOTH":return H.replace(new RegExp(`^${y}*|${y}*$`,"g"),"");case "LEADING":return H.replace(new RegExp(`^${y}*`,
"g"),"");case "TRAILING":return H.replace(new RegExp(`${y}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.abs(t[0])},ceiling:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.ceil(t[0])},floor:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.floor(t[0])},log:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.log(t[0])},log10:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.log(t[0])*Math.LOG10E},
sin:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.sin(t[0])},cos:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.cos(t[0])},tan:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.tan(t[0])},asin:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.asin(t[0])},acos:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.acos(t[0])},atan:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.atan(t[0])},sign:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:
0<t[0]?1:0>t[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:t=>null==t[0]||null==t[1]?null:t[0]**t[1]},mod:{minParams:2,maxParams:2,evaluate:t=>null==t[0]||null==t[1]?null:t[0]%t[1]},round:{minParams:1,maxParams:2,evaluate:t=>{const H=t[0];t=2===t.length?10**t[1]:1;return null==H?null:Math.round(H*t)/t}},truncate:{minParams:1,maxParams:2,evaluate:t=>null==t[0]?null:1===t.length?parseInt(t[0].toFixed(0),10):parseFloat(t[0].toFixed(t[1]))},char_length:{minParams:1,maxParams:1,evaluate:t=>"string"===
typeof t[0]||t[0]instanceof String?t[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:t=>{let H="";for(let y=0;y<t.length;y++){if(null==t[y])return null;H+=t[y].toString()}return H}},lower:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:t[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:t[0].toString().toUpperCase()}};k.SqlInterval=Z;k.evaluateFunction=function(t,H){const y=aa[t.toLowerCase()];if(null==y)throw Error("Function Not Recognised");
if(H.length<y.minParams||H.length>y.maxParams)throw Error(`Invalid Parameter count for call to ${t.toUpperCase()}`);return y.evaluate(H)};k.isStandardized=function(t,H){t=aa[t.toLowerCase()];return null!=t&&H>=t.minParams&&H<=t.maxParams};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(k,e){var Z={exports:{}};(function(t){(function(H,y){t.exports&&(t.exports=y())})(e.commonjsGlobal,function(){function H(p,
r,u,E){p=Error.call(this,p);Object.setPrototypeOf&&Object.setPrototypeOf(p,H.prototype);p.expected=r;p.found=u;p.location=E;p.name="SyntaxError";return p}function y(p,r,u){u=u||" ";if(p.length>r)return p;r-=p.length;u+=u.repeat(r);return p+u.slice(0,r)}(function(p,r){function u(){this.constructor=p}u.prototype=r.prototype;p.prototype=new u})(H,Error);H.prototype.format=function(p){var r="Error: "+this.message;if(this.location){var u=null,E;for(E=0;E<p.length;E++)if(p[E].source===this.location.source){u=
p[E].text.split(/\r\n|\n|\r/g);break}p=this.location.start;E=this.location.source+":"+p.line+":"+p.column;if(u){var Q=this.location.end,R=y("",p.line.toString().length);u=u[p.line-1];Q=p.line===Q.line?Q.column:u.length+1;r+="\n --\x3e "+E+"\n"+R+" |\n"+p.line+" | "+u+"\n"+R+" | "+y("",p.column-1)+y("",Q-p.column,"^")}else r+="\n at "+E}return r};H.buildMessage=function(p,r){function u(K){return K.charCodeAt(0).toString(16).toUpperCase()}function E(K){return K.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,
"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+u(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+u(d)})}function Q(K){return K.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+u(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+u(d)})}function R(K){return h[K.type](K)}
var h={literal:function(K){return'"'+E(K.text)+'"'},class:function(K){var d=K.parts.map(function(l){return Array.isArray(l)?Q(l[0])+"-"+Q(l[1]):Q(l)});return"["+(K.inverted?"^":"")+d+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(K){return K.description}};return"Expected "+function(K){K=K.map(R);var d,l;K.sort();if(0<K.length){for(l=d=1;d<K.length;d++)K[d-1]!==K[d]&&(K[l]=K[d],l++);K.length=l}switch(K.length){case 1:return K[0];case 2:return K[0]+" or "+
K[1];default:return K.slice(0,-1).join(", ")+", or "+K[K.length-1]}}(p)+" but "+(r?'"'+E(r)+'"':"end of input")+" found."};return{SyntaxError:H,parse:function(p,r){function u(v,B){return{type:"literal",text:v,ignoreCase:B}}function E(v,B,Y){return{type:"class",parts:v,inverted:B,ignoreCase:Y}}function Q(v){var B=cc[v],Y;if(!B){for(Y=v-1;!cc[Y];)Y--;B=cc[Y];for(B={line:B.line,column:B.column};Y<v;)10===p.charCodeAt(Y)?(B.line++,B.column=1):B.column++,Y++;cc[v]=B}return B}function R(v,B){var Y=Q(v),
ta=Q(B);return{source:$a,start:{offset:v,line:Y.line,column:Y.column},end:{offset:B,line:ta.line,column:ta.column}}}function h(v){f<sb||(f>sb&&(sb=f,vc=[]),vc.push(v))}function K(){var v=f;sa();var B=l();B!==b?(sa(),v=B):(f=v,v=b);return v}function d(){var v=f;var B=l();if(B!==b){v=[];var Y=f;var ta=sa();var Ca=Da();if(Ca!==b){var La=sa();var Ma=l();Ma!==b?Y=ta=[ta,Ca,La,Ma]:(f=Y,Y=b)}else f=Y,Y=b;for(;Y!==b;)v.push(Y),Y=f,ta=sa(),Ca=Da(),Ca!==b?(La=sa(),Ma=l(),Ma!==b?Y=ta=[ta,Ca,La,Ma]:(f=Y,Y=b)):
(f=Y,Y=b);Y={type:"expr_list"};B=[B];for(ta=0;ta<v.length;ta++)B.push(v[ta][3]);Y.value=B;v=Y}else f=v,v=b;return v}function l(){var v=f;var B=N();if(B!==b){v=[];var Y=f;var ta=sa();var Ca=S();if(Ca!==b){var La=sa();var Ma=N();Ma!==b?Y=ta=[ta,Ca,La,Ma]:(f=Y,Y=b)}else f=Y,Y=b;for(;Y!==b;)v.push(Y),Y=f,ta=sa(),Ca=S(),Ca!==b?(La=sa(),Ma=N(),Ma!==b?Y=ta=[ta,Ca,La,Ma]:(f=Y,Y=b)):(f=Y,Y=b);v=Qa(B,v)}else f=v,v=b;return v}function N(){var v=f;var B=ca();if(B!==b){v=[];var Y=f;var ta=sa();var Ca=G();if(Ca!==
b){var La=sa();var Ma=ca();Ma!==b?Y=ta=[ta,Ca,La,Ma]:(f=Y,Y=b)}else f=Y,Y=b;for(;Y!==b;)v.push(Y),Y=f,ta=sa(),Ca=G(),Ca!==b?(La=sa(),Ma=ca(),Ma!==b?Y=ta=[ta,Ca,La,Ma]:(f=Y,Y=b)):(f=Y,Y=b);v=Qa(B,v)}else f=v,v=b;return v}function ca(){var v=f;var B=m();if(B===b){B=f;if(33===p.charCodeAt(f)){var Y=ka;f++}else Y=b,0===ua&&h(nd);if(Y!==b){var ta=f;ua++;if(61===p.charCodeAt(f)){var Ca=Qb;f++}else Ca=b,0===ua&&h(Lc);ua--;Ca===b?ta=void 0:(f=ta,ta=b);ta!==b?B=Y=[Y,ta]:(f=B,B=b)}else f=B,B=b}B!==b?(Y=sa(),
ta=ca(),ta!==b?v={type:"unary_expr",operator:"NOT",expr:ta}:(f=v,v=b)):(f=v,v=b);if(v===b){B=f;v=x();if(v!==b){sa();B=[];Y=f;ta=sa();Ca=z();if(Ca!==b){var La=sa();var Ma=x();Ma!==b?Y=ta=[ta,Ca,La,Ma]:(f=Y,Y=b)}else f=Y,Y=b;if(Y!==b)for(;Y!==b;)B.push(Y),Y=f,ta=sa(),Ca=z(),Ca!==b?(La=sa(),Ma=x(),Ma!==b?Y=ta=[ta,Ca,La,Ma]:(f=Y,Y=b)):(f=Y,Y=b);else B=b;B!==b&&(B={type:"arithmetic",tail:B});B===b&&(B=f,Y=F(),Y!==b?(sa(),ta=Fa(),ta!==b?(sa(),ta=d(),ta!==b?(sa(),Ca=Pa(),Ca!==b?B={op:Y,right:ta}:(f=B,B=
b)):(f=B,B=b)):(f=B,B=b)):(f=B,B=b),B===b&&(B=f,Y=F(),Y!==b?(sa(),ta=Fa(),ta!==b?(sa(),ta=Pa(),ta!==b?B={op:Y,right:{type:"expr_list",value:[]}}:(f=B,B=b)):(f=B,B=b)):(f=B,B=b),B===b&&(B=f,Y=F(),Y!==b?(sa(),ta=q(),ta!==b?B={op:Y,right:ta}:(f=B,B=b)):(f=B,B=b))),B===b&&(B=f,Ca=m(),Ca!==b?(sa(),Y=T(),Y!==b?(sa(),ta=x(),ta!==b?(sa(),La=G(),La!==b?(sa(),Ca=x(),Ca!==b?B={op:"NOT"+Y,right:{type:"expr_list",value:[ta,Ca]}}:(f=B,B=b)):(f=B,B=b)):(f=B,B=b)):(f=B,B=b)):(f=B,B=b),B===b&&(B=f,Ca=T(),Ca!==b?(sa(),
Y=x(),Y!==b?(sa(),ta=G(),ta!==b?(sa(),La=x(),La!==b?B={op:Ca,right:{type:"expr_list",value:[Y,La]}}:(f=B,B=b)):(f=B,B=b)):(f=B,B=b)):(f=B,B=b)),B===b&&(B=f,Y=n(),Y!==b?(sa(),ta=m(),ta!==b?(sa(),ta=x(),ta!==b?B={op:Y+"NOT",right:ta}:(f=B,B=b)):(f=B,B=b)):(f=B,B=b),B===b&&(B=f,Y=n(),Y!==b?(sa(),ta=x(),ta!==b?B={op:Y,right:ta}:(f=B,B=b)):(f=B,B=b)),B===b&&(B=f,Y=L(),Y!==b?(sa(),ta=oa(),ta!==b?(sa(),Ca=f,p.substr(f,6).toLowerCase()===Xa?(La=p.substr(f,6),f+=6):(La=b,0===ua&&h(od)),La!==b?(La=f,ua++,Ma=
W(),ua--,Ma===b?La=void 0:(f=La,La=b),La!==b?Ca="ESCAPE":(f=Ca,Ca=b)):(f=Ca,Ca=b),Ca!==b?(sa(),Ca=ma(),Ca!==b?B={op:Y,right:ta,escape:Ca.value}:(f=B,B=b)):(f=B,B=b)):(f=B,B=b)):(f=B,B=b),B===b&&(B=f,Y=L(),Y!==b?(sa(),ta=oa(),ta!==b?B={op:Y,right:ta,escape:""}:(f=B,B=b)):(f=B,B=b))))));B===b&&(B=null);""==B||void 0==B||null==B?B=v:(Y=null,B=Y="arithmetic"==B.type?Qa(v,B.tail):ab(B.op,v,B.right,B.escape))}else f=B,B=b;v=B}return v}function z(){if(p.substr(f,2)===zb){var v=zb;f+=2}else v=b,0===ua&&h(pd);
v===b&&(62===p.charCodeAt(f)?(v=lb,f++):(v=b,0===ua&&h(qd)),v===b&&(p.substr(f,2)===Bb?(v=Bb,f+=2):(v=b,0===ua&&h(rd)),v===b&&(p.substr(f,2)===Rb?(v=Rb,f+=2):(v=b,0===ua&&h(sd)),v===b&&(60===p.charCodeAt(f)?(v=Pb,f++):(v=b,0===ua&&h(td)),v===b&&(61===p.charCodeAt(f)?(v=Qb,f++):(v=b,0===ua&&h(Lc)),v===b&&(p.substr(f,2)===bc?(v=bc,f+=2):(v=b,0===ua&&h(ud))))))));return v}function L(){var v=v=f;var B=m();if(B!==b){var Y=sa();var ta=fa();ta!==b?v=B=[B,Y,ta]:(f=v,v=b)}else f=v,v=b;v!==b&&(v=v[0]+" "+v[2]);
v===b&&(v=fa());return v}function F(){var v=v=f;var B=m();if(B!==b){var Y=sa();var ta=c();ta!==b?v=B=[B,Y,ta]:(f=v,v=b)}else f=v,v=b;v!==b&&(v=v[0]+" "+v[2]);v===b&&(v=c());return v}function x(){var v=f;var B=I();if(B!==b){v=[];var Y=f;var ta=sa();var Ca=w();if(Ca!==b){var La=sa();var Ma=I();Ma!==b?Y=ta=[ta,Ca,La,Ma]:(f=Y,Y=b)}else f=Y,Y=b;for(;Y!==b;)v.push(Y),Y=f,ta=sa(),Ca=w(),Ca!==b?(La=sa(),Ma=I(),Ma!==b?Y=ta=[ta,Ca,La,Ma]:(f=Y,Y=b)):(f=Y,Y=b);v=Qa(B,v)}else f=v,v=b;return v}function w(){if(43===
p.charCodeAt(f)){var v=fb;f++}else v=b,0===ua&&h(wc);v===b&&(45===p.charCodeAt(f)?(v=qb,f++):(v=b,0===ua&&h(xc)));return v}function I(){var v=f;var B=A();if(B!==b){v=[];var Y=f;var ta=sa();var Ca=X();if(Ca!==b){var La=sa();var Ma=A();Ma!==b?Y=ta=[ta,Ca,La,Ma]:(f=Y,Y=b)}else f=Y,Y=b;for(;Y!==b;)v.push(Y),Y=f,ta=sa(),Ca=X(),Ca!==b?(La=sa(),Ma=A(),Ma!==b?Y=ta=[ta,Ca,La,Ma]:(f=Y,Y=b)):(f=Y,Y=b);v=Qa(B,v)}else f=v,v=b;return v}function X(){if(42===p.charCodeAt(f)){var v=Ua;f++}else v=b,0===ua&&h(vd);v===
b&&(47===p.charCodeAt(f)?(v=kb,f++):(v=b,0===ua&&h(wd)));return v}function A(){var v=ma();if(v===b){var B=f;var Y=f;var ta=Ba();if(ta!==b){var Ca=Ka();if(Ca!==b){var La=Ta();La!==b?Y=parseFloat(ta+Ca+La):(f=Y,Y=b)}else f=Y,Y=b}else f=Y,Y=b;Y===b&&(Y=f,ta=Ba(),ta!==b?(Ca=Ka(),Ca!==b?Y=parseFloat(ta+Ca):(f=Y,Y=b)):(f=Y,Y=b),Y===b&&(Y=f,ta=Ba(),ta!==b?(Ca=Ta(),Ca!==b?Y=parseFloat(ta+Ca):(f=Y,Y=b)):(f=Y,Y=b),Y===b&&(Y=f,ta=Ba(),ta!==b&&(ta=parseFloat(ta)),Y=ta)));var Ma=Y;if(Ma!==b){var dc=f;ua++;var xd=
O();ua--;xd===b?dc=void 0:(f=dc,dc=b);dc!==b?B={type:"number",value:Ma}:(f=B,B=b)}else f=B,B=b;v=B;if(v===b){var Sb=f;var Eb=f;if(p.substr(f,4).toLowerCase()===na){var ec=p.substr(f,4);f+=4}else ec=b,0===ua&&h(yd);if(ec!==b){var Tb=f;ua++;var zd=W();ua--;zd===b?Tb=void 0:(f=Tb,Tb=b);Tb!==b?Eb=ec=[ec,Tb]:(f=Eb,Eb=b)}else f=Eb,Eb=b;var Db=Eb;Db!==b&&(Db={type:"bool",value:!0});Sb=Db;if(Sb===b){Sb=f;var Fb=f;if(p.substr(f,5).toLowerCase()===xa){var fc=p.substr(f,5);f+=5}else fc=b,0===ua&&h(Ad);if(fc!==
b){var Ub=f;ua++;var Bd=W();ua--;Bd===b?Ub=void 0:(f=Ub,Ub=b);Ub!==b?Fb=fc=[fc,Ub]:(f=Fb,Fb=b)}else f=Fb,Fb=b;Db=Fb;Db!==b&&(Db={type:"bool",value:!1});Sb=Db}v=Sb;if(v===b){var Gb=f;if(p.substr(f,4).toLowerCase()===ba){var gc=p.substr(f,4);f+=4}else gc=b,0===ua&&h(Cd);if(gc!==b){var Vb=f;ua++;var Dd=W();ua--;Dd===b?Vb=void 0:(f=Vb,Vb=b);Vb!==b?Gb=gc=[gc,Vb]:(f=Gb,Gb=b)}else f=Gb,Gb=b;var yc=Gb;yc!==b&&(yc={type:"null",value:null});v=yc;if(v===b){var Hb=f;var Ib=f;if(p.substr(f,4).toLowerCase()===
Ed){var Mc=p.substr(f,4);f+=4}else Mc=b,0===ua&&h(Fd);if(Mc!==b){var hc=f;ua++;var Gd=W();ua--;Gd===b?hc=void 0:(f=hc,hc=b);hc!==b?Ib="DATE":(f=Ib,Ib=b)}else f=Ib,Ib=b;if(Ib!==b){sa();var Nc=oa();Nc!==b?Hb={type:"date",value:Nc.value}:(f=Hb,Hb=b)}else f=Hb,Hb=b;v=Hb;if(v===b){var Jb=f;var Kb=f;if(p.substr(f,9).toLowerCase()===Hd){var Oc=p.substr(f,9);f+=9}else Oc=b,0===ua&&h(Id);if(Oc!==b){var ic=f;ua++;var Jd=W();ua--;Jd===b?ic=void 0:(f=ic,ic=b);ic!==b?Kb="TIMESTAMP":(f=Kb,Kb=b)}else f=Kb,Kb=b;
if(Kb!==b){sa();var Pc=oa();Pc!==b?Jb={type:"timestamp",value:Pc.value}:(f=Jb,Jb=b)}else f=Jb,Jb=b;v=Jb;if(v===b){var db=f;var zc=J();if(zc!==b){sa();if(45===p.charCodeAt(f)){var vb=qb;f++}else vb=b,0===ua&&h(xc);vb===b&&(43===p.charCodeAt(f)?(vb=fb,f++):(vb=b,0===ua&&h(wc)));if(vb!==b){sa();var Wb=oa();if(Wb!==b){sa();var Qc=g();Qc!==b?db={type:"interval",value:Wb,qualifier:Qc,op:vb}:(f=db,db=b)}else f=db,db=b}else f=db,db=b}else f=db,db=b;db===b&&(db=f,zc=J(),zc!==b?(sa(),vb=oa(),vb!==b?(sa(),Wb=
g(),Wb!==b?db={type:"interval",value:vb,qualifier:Wb,op:""}:(f=db,db=b)):(f=db,db=b)):(f=db,db=b));v=db}}}}}}var Ya=v;if(Ya===b){var hb=f;var Lb=f;if(p.substr(f,7).toLowerCase()===Kd){var Rc=p.substr(f,7);f+=7}else Rc=b,0===ua&&h(Ld);if(Rc!==b){var jc=f;ua++;var Md=W();ua--;Md===b?jc=void 0:(f=jc,jc=b);jc!==b?Lb="EXTRACT":(f=Lb,Lb=b)}else f=Lb,Lb=b;if(Lb!==b){sa();var Nd=Fa();if(Nd!==b){sa();var nb=P();nb===b&&(nb=da(),nb===b&&(nb=qa(),nb===b&&(nb=ra(),nb===b&&(nb=wa(),nb===b&&(nb=ya())))));var Sc=
nb;if(Sc!==b){sa();var Od=ia();if(Od!==b){sa();var Tc=l();if(Tc!==b){sa();var Pd=Pa();Pd!==b?hb={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:Sc},Tc]}}:(f=hb,hb=b)}else f=hb,hb=b}else f=hb,hb=b}else f=hb,hb=b}else f=hb,hb=b}else f=hb,hb=b;Ya=hb;if(Ya===b){var ib=f;var Mb=f;if(p.substr(f,9).toLowerCase()===Qd){var Uc=p.substr(f,9);f+=9}else Uc=b,0===ua&&h(Rd);if(Uc!==b){var kc=f;ua++;var Sd=W();ua--;Sd===b?kc=void 0:(f=kc,kc=b);kc!==b?Mb="SUBSTRING":(f=Mb,Mb=b)}else f=
Mb,Mb=b;if(Mb!==b){sa();var Td=Fa();if(Td!==b){sa();var Ac=l();if(Ac!==b){sa();var Ud=ia();if(Ud!==b){sa();var Bc=l();if(Bc!==b){sa();var wb=f;var Nb=f;if(p.substr(f,3).toLowerCase()===Vd){var Vc=p.substr(f,3);f+=3}else Vc=b,0===ua&&h(Wd);if(Vc!==b){var lc=f;ua++;var Xd=W();ua--;Xd===b?lc=void 0:(f=lc,lc=b);lc!==b?Nb="FOR":(f=Nb,Nb=b)}else f=Nb,Nb=b;var Xb=Nb;if(Xb!==b){var Yd=sa();var Wc=l();if(Wc!==b){var Zd=sa();wb=Xb=[Xb,Yd,Wc,Zd]}else f=wb,wb=b}else f=wb,wb=b;wb===b&&(wb=null);Xb=Pa();Xb!==b?
ib={type:"function",name:"substring",args:{type:"expr_list",value:wb?[Ac,Bc,wb[2]]:[Ac,Bc]}}:(f=ib,ib=b)}else f=ib,ib=b}else f=ib,ib=b}else f=ib,ib=b}else f=ib,ib=b}else f=ib,ib=b;Ya=ib;if(Ya===b){var Za=f;var Cc=ea();if(Cc!==b){sa();var Dc=Fa();if(Dc!==b){sa();var xb=a();xb===b&&(xb=null);sa();var Yb=l();if(Yb!==b){sa();var Ec=ia();if(Ec!==b){sa();var Xc=l();if(Xc!==b){sa();var $d=Pa();$d!==b?Za={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==xb?"BOTH":xb},Yb,
Xc]}}:(f=Za,Za=b)}else f=Za,Za=b}else f=Za,Za=b}else f=Za,Za=b}else f=Za,Za=b}else f=Za,Za=b;Za===b&&(Za=f,Cc=ea(),Cc!==b?(sa(),Dc=Fa(),Dc!==b?(sa(),xb=a(),xb===b&&(xb=null),sa(),Yb=l(),Yb!==b?(sa(),Ec=Pa(),Ec!==b?Za={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==xb?"BOTH":xb},Yb]}}:(f=Za,Za=b)):(f=Za,Za=b)):(f=Za,Za=b)):(f=Za,Za=b));Ya=Za;if(Ya===b){var jb=f;var Ob=f;if(p.substr(f,8).toLowerCase()===ae){var Yc=p.substr(f,8);f+=8}else Yc=b,0===ua&&h(be);if(Yc!==
b){var mc=f;ua++;var ce=W();ua--;ce===b?mc=void 0:(f=mc,mc=b);mc!==b?Ob="POSITION":(f=Ob,Ob=b)}else f=Ob,Ob=b;if(Ob!==b){sa();var de=Fa();if(de!==b){sa();var Zc=l();if(Zc!==b){sa();var ee=c();if(ee!==b){sa();var $c=l();if($c!==b){sa();var fe=Pa();fe!==b?jb={type:"function",name:"position",args:{type:"expr_list",value:[Zc,$c]}}:(f=jb,jb=b)}else f=jb,jb=b}else f=jb,jb=b}else f=jb,jb=b}else f=jb,jb=b}else f=jb,jb=b;Ya=jb;if(Ya===b){var Ab=f;var nc;var ob=f;ob=nc=C();if(ob===b)if(ob=f,96===p.charCodeAt(f)?
(nc=ad,f++):(nc=b,0===ua&&h(bd)),nc!==b){var oc=[];if(cd.test(p.charAt(f))){var yb=p.charAt(f);f++}else yb=b,0===ua&&h(dd);if(yb!==b)for(;yb!==b;)oc.push(yb),cd.test(p.charAt(f))?(yb=p.charAt(f),f++):(yb=b,0===ua&&h(dd));else oc=b;oc!==b?(96===p.charCodeAt(f)?(yb=ad,f++):(yb=b,0===ua&&h(bd)),yb!==b?ob=oc.join(""):(f=ob,ob=b)):(f=ob,ob=b)}else f=ob,ob=b;var ed=ob;if(ed!==b){sa();var ge=Fa();if(ge!==b){sa();var pc=d();pc===b&&(pc=null);sa();var he=Pa();he!==b?Ab={type:"function",name:ed,args:pc?pc:
{type:"expr_list",value:[]}}:(f=Ab,Ab=b)}else f=Ab,Ab=b}else f=Ab,Ab=b;Ya=Ab;if(Ya===b){var tb;var eb=f;var Fc=Aa();if(Fc!==b){sa();var Zb=l();if(Zb!==b){sa();var $b=[];for(tb=pa();tb!==b;)$b.push(tb),tb=pa();tb=sa();var qc=Ha();qc!==b?eb={type:"case_expression",format:"simple",operand:Zb,clauses:$b,else:null}:(f=eb,eb=b)}else f=eb,eb=b}else f=eb,eb=b;if(eb===b)if(eb=f,Fc=Aa(),Fc!==b)if(sa(),Zb=l(),Zb!==b){sa();$b=[];for(tb=pa();tb!==b;)$b.push(tb),tb=pa();tb=sa();qc=va();if(qc!==b){sa();var ie=Ha();
ie!==b?eb={type:"case_expression",format:"simple",operand:Zb,clauses:$b,else:qc.value}:(f=eb,eb=b)}else f=eb,eb=b}else f=eb,eb=b;else f=eb,eb=b;var Gc=eb;if(Gc===b){var ub;var gb=f;var Hc=Aa();if(Hc!==b){sa();var ac=[];for(ub=la();ub!==b;)ac.push(ub),ub=la();ub=sa();var rc=Ha();rc!==b?gb={type:"case_expression",format:"searched",clauses:ac,else:null}:(f=gb,gb=b)}else f=gb,gb=b;if(gb===b)if(gb=f,Hc=Aa(),Hc!==b){sa();ac=[];for(ub=la();ub!==b;)ac.push(ub),ub=la();ub=sa();rc=va();if(rc!==b){sa();var je=
Ha();je!==b?gb={type:"case_expression",format:"searched",clauses:ac,else:rc.value}:(f=gb,gb=b)}else f=gb,gb=b}else f=gb,gb=b;Gc=gb}Ya=Gc;if(Ya===b){var sc;var tc=f;var fd=O();if(fd!==b){var gd=[];for(sc=D();sc!==b;)gd.push(sc),sc=D();tc=fd+gd.join("")}else f=tc,tc=b;var uc=tc;if(uc!==b){var Ic=uc;uc=/^CURRENT_DATE$/i.test(Ic)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Ic)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",column:Ic}}Ya=uc;if(Ya===b&&(Ya=q(),Ya===
b)){Ya=f;var ke=Fa();if(ke!==b){sa();var Jc=l();if(Jc!==b){sa();var le=Pa();le!==b?(Jc.paren=!0,Ya=Jc):(f=Ya,Ya=b)}else f=Ya,Ya=b}else f=Ya,Ya=b}}}}}}}}return Ya}function C(){var v;var B=f;var Y=O();if(Y!==b){B=[];for(v=W();v!==b;)B.push(v),v=W();B=Y+B.join("")}else f=B,B=b;return B}function O(){if(me.test(p.charAt(f))){var v=p.charAt(f);f++}else v=b,0===ua&&h(ne);return v}function W(){if(oe.test(p.charAt(f))){var v=p.charAt(f);f++}else v=b,0===ua&&h(pe);return v}function D(){if(qe.test(p.charAt(f))){var v=
p.charAt(f);f++}else v=b,0===ua&&h(re);return v}function q(){var v=f;if(64===p.charCodeAt(f)){var B=rb;f++}else B=b,0===ua&&h(se);if(B!==b){var Y=C();Y!==b?v=B=[B,Y]:(f=v,v=b)}else f=v,v=b;v!==b&&(v={type:"param",value:v[1]});return v}function a(){var v=f;if(p.substr(f,7).toLowerCase()===te){var B=p.substr(f,7);f+=7}else B=b,0===ua&&h(ue);if(B!==b){B=f;ua++;var Y=W();ua--;Y===b?B=void 0:(f=B,B=b);B!==b?v="LEADING":(f=v,v=b)}else f=v,v=b;v===b&&(v=f,p.substr(f,8).toLowerCase()===ve?(B=p.substr(f,8),
f+=8):(B=b,0===ua&&h(we)),B!==b?(B=f,ua++,Y=W(),ua--,Y===b?B=void 0:(f=B,B=b),B!==b?v="TRAILING":(f=v,v=b)):(f=v,v=b),v===b&&(v=f,p.substr(f,4).toLowerCase()===xe?(B=p.substr(f,4),f+=4):(B=b,0===ua&&h(ye)),B!==b?(B=f,ua++,Y=W(),ua--,Y===b?B=void 0:(f=B,B=b),B!==b?v="BOTH":(f=v,v=b)):(f=v,v=b)));return v}function g(){var v=f;var B=f;var Y=M();if(Y!==b){sa();var ta=Fa();if(ta!==b)if(sa(),ta=ha(),ta!==b){sa();var Ca=Pa();Ca!==b?B={type:"interval-period",period:Y.value,precision:ta,secondary:null}:(f=
B,B=b)}else f=B,B=b;else f=B,B=b}else f=B,B=b;B===b&&(B=f,Y=M(),Y!==b&&(Y=hd(Y)),B=Y);if(B!==b)if(sa(),Y=f,p.substr(f,2).toLowerCase()===ze?(ta=p.substr(f,2),f+=2):(ta=b,0===ua&&h(Ae)),ta!==b?(ta=f,ua++,Ca=W(),ua--,Ca===b?ta=void 0:(f=ta,ta=b),ta!==b?Y="TO":(f=Y,Y=b)):(f=Y,Y=b),Y!==b){sa();Y=f;ta=M();ta!==b&&(ta={type:"interval-period",period:ta.value,precision:null,secondary:null});Y=ta;if(Y===b){Y=f;ta=ya();if(ta!==b)if(sa(),ta=Fa(),ta!==b)if(sa(),ta=ha(),ta!==b)if(sa(),Ca=Da(),Ca!==b)if(sa(),Ca=
U(),Ca!==b){sa();var La=Pa();La!==b?Y=id(ta,Ca):(f=Y,Y=b)}else f=Y,Y=b;else f=Y,Y=b;else f=Y,Y=b;else f=Y,Y=b;else f=Y,Y=b;Y===b&&(Y=f,ta=ya(),ta!==b?(sa(),ta=Fa(),ta!==b?(sa(),ta=ha(),ta!==b?(sa(),Ca=Pa(),Ca!==b?Y={type:"interval-period",period:"second",precision:ta,secondary:null}:(f=Y,Y=b)):(f=Y,Y=b)):(f=Y,Y=b)):(f=Y,Y=b),Y===b&&(Y=f,ta=ya(),ta!==b&&(ta={type:"interval-period",period:"second",precision:null,secondary:null}),Y=ta))}Y!==b?v={type:"interval-qualifier",start:B,end:Y}:(f=v,v=b)}else f=
v,v=b;else f=v,v=b;v===b&&(v=f,Y=M(),Y!==b?(sa(),B=Fa(),B!==b?(sa(),B=U(),B!==b?(sa(),ta=Pa(),ta!==b?v={type:"interval-period",period:Y.value,precision:B,secondary:null}:(f=v,v=b)):(f=v,v=b)):(f=v,v=b)):(f=v,v=b),v===b&&(v=f,Y=M(),Y!==b&&(Y=hd(Y)),v=Y,v===b&&(v=f,Y=ya(),Y!==b?(sa(),B=Fa(),B!==b?(sa(),B=ha(),B!==b?(sa(),ta=Da(),ta!==b?(sa(),Y=U(),Y!==b?(sa(),ta=Pa(),ta!==b?v=id(B,Y):(f=v,v=b)):(f=v,v=b)):(f=v,v=b)):(f=v,v=b)):(f=v,v=b)):(f=v,v=b),v===b&&(v=f,Y=ya(),Y!==b?(sa(),B=Fa(),B!==b?(sa(),B=
U(),B!==b?(sa(),ta=Pa(),ta!==b?v={type:"interval-period",period:"second",precision:B,secondary:null}:(f=v,v=b)):(f=v,v=b)):(f=v,v=b)):(f=v,v=b),v===b&&(v=f,Y=ya(),Y!==b&&(Y={type:"interval-period",period:"second",precision:null,secondary:null}),v=Y)))));return v}function M(){var v=f;v=qa();v!==b&&(v={type:"string",value:"day"});v===b&&(v=f,v=ra(),v!==b&&(v={type:"string",value:"hour"}),v===b&&(v=f,v=wa(),v!==b&&(v={type:"string",value:"minute"}),v===b&&(v=f,v=da(),v!==b&&(v={type:"string",value:"month"}),
v===b&&(v=f,v=P(),v!==b&&(v={type:"string",value:"year"})))));return v}function U(){var v=Oa();v!==b&&(v=parseFloat(v));return v}function ha(){var v=Oa();v!==b&&(v=parseFloat(v));return v}function oa(){var v=ma();v===b&&(v=q());return v}function ma(){var v=f;if(39===p.charCodeAt(f)){var B=Na;f++}else B=b,0===ua&&h(jd);B===b&&(p.substr(f,2)===Cb?(B=Cb,f+=2):(B=b,0===ua&&h(Be)));if(B!==b){B=[];var Y=f;p.substr(f,2)===V?(Y=V,f+=2):(Y=b,0===ua&&h(kd));Y!==b&&(Y="'");Y===b&&(ld.test(p.charAt(f))?(Y=p.charAt(f),
f++):(Y=b,0===ua&&h(md)));for(;Y!==b;)B.push(Y),Y=f,p.substr(f,2)===V?(Y=V,f+=2):(Y=b,0===ua&&h(kd)),Y!==b&&(Y="'"),Y===b&&(ld.test(p.charAt(f))?(Y=p.charAt(f),f++):(Y=b,0===ua&&h(md)));39===p.charCodeAt(f)?(Y=Na,f++):(Y=b,0===ua&&h(jd));Y!==b?v={type:"string",value:B.join("")}:(f=v,v=b)}else f=v,v=b;return v}function la(){var v=f;if(Ga()!==b){sa();var B=l();if(B!==b){sa();var Y=Ea();Y!==b?(sa(),Y=l(),Y!==b?v={type:"when_clause",operand:B,value:Y}:(f=v,v=b)):(f=v,v=b)}else f=v,v=b}else f=v,v=b;return v}
function pa(){var v=f;if(Ga()!==b){sa();var B=l();if(B!==b){sa();var Y=Ea();Y!==b?(sa(),Y=l(),Y!==b?v={type:"when_clause",operand:B,value:Y}:(f=v,v=b)):(f=v,v=b)}else f=v,v=b}else f=v,v=b;return v}function va(){var v=f;var B=f;if(p.substr(f,4).toLowerCase()===Ce){var Y=p.substr(f,4);f+=4}else Y=b,0===ua&&h(De);if(Y!==b){Y=f;ua++;var ta=W();ua--;ta===b?Y=void 0:(f=Y,Y=b);Y!==b?B="ELSE":(f=B,B=b)}else f=B,B=b;B!==b?(sa(),B=l(),B!==b?v={type:"else_clause",value:B}:(f=v,v=b)):(f=v,v=b);return v}function Ba(){var v=
Oa();if(v===b){v=f;if(45===p.charCodeAt(f)){var B=qb;f++}else B=b,0===ua&&h(xc);B===b&&(43===p.charCodeAt(f)?(B=fb,f++):(B=b,0===ua&&h(wc)));if(B!==b){var Y=Oa();Y!==b?v=B[0]+Y:(f=v,v=b)}else f=v,v=b}return v}function Ka(){var v=f;if(46===p.charCodeAt(f)){var B=ja;f++}else B=b,0===ua&&h(Ee);B!==b?(v=Oa(),v===b&&(v=null),v="."+(null!=v?v:"")):(f=v,v=b);return v}function Ta(){var v;var B=v=f;if(Fe.test(p.charAt(f))){var Y=p.charAt(f);f++}else Y=b,0===ua&&h(Ge);Y!==b?(He.test(p.charAt(f))?(B=p.charAt(f),
f++):(B=b,0===ua&&h(Ie)),B===b&&(B=null),B="e"+(null===B?"":B)):(f=B,B=b);B!==b?(Y=Oa(),Y!==b?v=B+Y:(f=v,v=b)):(f=v,v=b);return v}function Oa(){var v=[];var B=Sa();if(B!==b)for(;B!==b;)v.push(B),B=Sa();else v=b;v!==b&&(v=v.join(""));return v}function Sa(){if(Je.test(p.charAt(f))){var v=p.charAt(f);f++}else v=b,0===ua&&h(Ke);return v}function c(){var v=f;if(p.substr(f,2).toLowerCase()===za){var B=p.substr(f,2);f+=2}else B=b,0===ua&&h(Le);if(B!==b){B=f;ua++;var Y=W();ua--;Y===b?B=void 0:(f=B,B=b);B!==
b?v="IN":(f=v,v=b)}else f=v,v=b;return v}function n(){var v=f;if(p.substr(f,2).toLowerCase()===Ia){var B=p.substr(f,2);f+=2}else B=b,0===ua&&h(Me);if(B!==b){B=f;ua++;var Y=W();ua--;Y===b?B=void 0:(f=B,B=b);B!==b?v="IS":(f=v,v=b)}else f=v,v=b;return v}function fa(){var v=f;if(p.substr(f,4).toLowerCase()===Ja){var B=p.substr(f,4);f+=4}else B=b,0===ua&&h(Ne);if(B!==b){B=f;ua++;var Y=W();ua--;Y===b?B=void 0:(f=B,B=b);B!==b?v="LIKE":(f=v,v=b)}else f=v,v=b;return v}function m(){var v=f;if(p.substr(f,3).toLowerCase()===
Wa){var B=p.substr(f,3);f+=3}else B=b,0===ua&&h(Oe);if(B!==b){B=f;ua++;var Y=W();ua--;Y===b?B=void 0:(f=B,B=b);B!==b?v="NOT":(f=v,v=b)}else f=v,v=b;return v}function G(){var v=f;if(p.substr(f,3).toLowerCase()===Va){var B=p.substr(f,3);f+=3}else B=b,0===ua&&h(Pe);if(B!==b){B=f;ua++;var Y=W();ua--;Y===b?B=void 0:(f=B,B=b);B!==b?v="AND":(f=v,v=b)}else f=v,v=b;return v}function S(){var v=f;if(p.substr(f,2).toLowerCase()===cb){var B=p.substr(f,2);f+=2}else B=b,0===ua&&h(Qe);if(B!==b){B=f;ua++;var Y=W();
ua--;Y===b?B=void 0:(f=B,B=b);B!==b?v="OR":(f=v,v=b)}else f=v,v=b;return v}function T(){var v=f;if(p.substr(f,7).toLowerCase()===mb){var B=p.substr(f,7);f+=7}else B=b,0===ua&&h(Re);if(B!==b){B=f;ua++;var Y=W();ua--;Y===b?B=void 0:(f=B,B=b);B!==b?v="BETWEEN":(f=v,v=b)}else f=v,v=b;return v}function ia(){var v=f;if(p.substr(f,4).toLowerCase()===Se){var B=p.substr(f,4);f+=4}else B=b,0===ua&&h(Te);if(B!==b){B=f;ua++;var Y=W();ua--;Y===b?B=void 0:(f=B,B=b);B!==b?v="FROM":(f=v,v=b)}else f=v,v=b;return v}
function ea(){var v=f;if(p.substr(f,4).toLowerCase()===Ue){var B=p.substr(f,4);f+=4}else B=b,0===ua&&h(Ve);if(B!==b){B=f;ua++;var Y=W();ua--;Y===b?B=void 0:(f=B,B=b);B!==b?v="TRIM":(f=v,v=b)}else f=v,v=b;return v}function J(){var v=f;if(p.substr(f,8).toLowerCase()===We){var B=p.substr(f,8);f+=8}else B=b,0===ua&&h(Xe);if(B!==b){B=f;ua++;var Y=W();ua--;Y===b?B=void 0:(f=B,B=b);B!==b?v="INTERVAL":(f=v,v=b)}else f=v,v=b;return v}function P(){var v=f;if(p.substr(f,4).toLowerCase()===Ye){var B=p.substr(f,
4);f+=4}else B=b,0===ua&&h(Ze);if(B!==b){B=f;ua++;var Y=W();ua--;Y===b?B=void 0:(f=B,B=b);B!==b?v="YEAR":(f=v,v=b)}else f=v,v=b;return v}function da(){var v=f;if(p.substr(f,5).toLowerCase()===$e){var B=p.substr(f,5);f+=5}else B=b,0===ua&&h(af);if(B!==b){B=f;ua++;var Y=W();ua--;Y===b?B=void 0:(f=B,B=b);B!==b?v="MONTH":(f=v,v=b)}else f=v,v=b;return v}function qa(){var v=f;if(p.substr(f,3).toLowerCase()===bf){var B=p.substr(f,3);f+=3}else B=b,0===ua&&h(cf);if(B!==b){B=f;ua++;var Y=W();ua--;Y===b?B=void 0:
(f=B,B=b);B!==b?v="DAY":(f=v,v=b)}else f=v,v=b;return v}function ra(){var v=f;if(p.substr(f,4).toLowerCase()===df){var B=p.substr(f,4);f+=4}else B=b,0===ua&&h(ef);if(B!==b){B=f;ua++;var Y=W();ua--;Y===b?B=void 0:(f=B,B=b);B!==b?v="HOUR":(f=v,v=b)}else f=v,v=b;return v}function wa(){var v=f;if(p.substr(f,6).toLowerCase()===ff){var B=p.substr(f,6);f+=6}else B=b,0===ua&&h(gf);if(B!==b){B=f;ua++;var Y=W();ua--;Y===b?B=void 0:(f=B,B=b);B!==b?v="MINUTE":(f=v,v=b)}else f=v,v=b;return v}function ya(){var v=
f;if(p.substr(f,6).toLowerCase()===hf){var B=p.substr(f,6);f+=6}else B=b,0===ua&&h(jf);if(B!==b){B=f;ua++;var Y=W();ua--;Y===b?B=void 0:(f=B,B=b);B!==b?v="SECOND":(f=v,v=b)}else f=v,v=b;return v}function Aa(){var v=f;if(p.substr(f,4).toLowerCase()===kf){var B=p.substr(f,4);f+=4}else B=b,0===ua&&h(lf);if(B!==b){B=f;ua++;var Y=W();ua--;Y===b?B=void 0:(f=B,B=b);B!==b?v="CASE":(f=v,v=b)}else f=v,v=b;return v}function Ha(){var v=f;if(p.substr(f,3).toLowerCase()===mf){var B=p.substr(f,3);f+=3}else B=b,
0===ua&&h(nf);if(B!==b){B=f;ua++;var Y=W();ua--;Y===b?B=void 0:(f=B,B=b);B!==b?v="END":(f=v,v=b)}else f=v,v=b;return v}function Ga(){var v=f;if(p.substr(f,4).toLowerCase()===of){var B=p.substr(f,4);f+=4}else B=b,0===ua&&h(pf);if(B!==b){B=f;ua++;var Y=W();ua--;Y===b?B=void 0:(f=B,B=b);B!==b?v="WHEN":(f=v,v=b)}else f=v,v=b;return v}function Ea(){var v=f;if(p.substr(f,4).toLowerCase()===qf){var B=p.substr(f,4);f+=4}else B=b,0===ua&&h(rf);if(B!==b){B=f;ua++;var Y=W();ua--;Y===b?B=void 0:(f=B,B=b);B!==
b?v="THEN":(f=v,v=b)}else f=v,v=b;return v}function Da(){if(44===p.charCodeAt(f)){var v=sf;f++}else v=b,0===ua&&h(tf);return v}function Fa(){if(40===p.charCodeAt(f)){var v=uf;f++}else v=b,0===ua&&h(vf);return v}function Pa(){if(41===p.charCodeAt(f)){var v=wf;f++}else v=b,0===ua&&h(xf);return v}function sa(){var v;var B=[];for(v=bb();v!==b;)B.push(v),v=bb();return B}function bb(){if(yf.test(p.charAt(f))){var v=p.charAt(f);f++}else v=b,0===ua&&h(zf);return v}function ab(v,B,Y,ta){v={type:"binary_expr",
operator:v,left:B,right:Y};void 0!==ta&&(v.escape=ta);return v}function Qa(v,B){for(var Y=0;Y<B.length;Y++)v=ab(B[Y][1],v,B[Y][3]);return v}r=void 0!==r?r:{};var b={},$a=r.grammarSource,Ra={start:K},pb=K,ka="!",Qb="\x3d",zb="\x3e\x3d",lb="\x3e",Bb="\x3c\x3d",Rb="\x3c\x3e",Pb="\x3c",bc="!\x3d",fb="+",qb="-",Ua="*",kb="/",rb="@",Na="'",Cb="N'",V="''",ja=".",ba="null",na="true",xa="false",za="in",Ia="is",Ja="like",Xa="escape",Wa="not",Va="and",cb="or",mb="between",Se="from",Vd="for",Qd="substring",Kd=
"extract",Ue="trim",ae="position",Hd="timestamp",Ed="date",te="leading",ve="trailing",xe="both",ze="to",We="interval",Ye="year",$e="month",bf="day",df="hour",ff="minute",hf="second",kf="case",mf="end",of="when",qf="then",Ce="else",sf=",",uf="(",wf=")",ad="`",me=/^[A-Za-z_\x80-\uFFFF]/,oe=/^[A-Za-z0-9_]/,qe=/^[A-Za-z0-9_.\x80-\uFFFF]/,ld=/^[^']/,Je=/^[0-9]/,Fe=/^[eE]/,He=/^[+\-]/,yf=/^[ \t\n\r]/,cd=/^[^`]/,nd=u("!",!1),Lc=u("\x3d",!1),pd=u("\x3e\x3d",!1),qd=u("\x3e",!1),rd=u("\x3c\x3d",!1),sd=u("\x3c\x3e",
!1),td=u("\x3c",!1),ud=u("!\x3d",!1),wc=u("+",!1),xc=u("-",!1),vd=u("*",!1),wd=u("/",!1),ne=E([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),pe=E([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),re=E([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),se=u("@",!1),jd=u("'",!1),Be=u("N'",!1),kd=u("''",!1),md=E(["'"],!0,!1),Ee=u(".",!1),Ke=E([["0","9"]],!1,!1),Ge=E(["e","E"],!1,!1),Ie=E(["+","-"],!1,!1),Cd=u("NULL",!0),yd=u("TRUE",!0),Ad=u("FALSE",!0),Le=u("IN",!0),Me=u("IS",!0),Ne=u("LIKE",
!0),od=u("ESCAPE",!0),Oe=u("NOT",!0),Pe=u("AND",!0),Qe=u("OR",!0),Re=u("BETWEEN",!0),Te=u("FROM",!0),Wd=u("FOR",!0),Rd=u("SUBSTRING",!0),Ld=u("EXTRACT",!0),Ve=u("TRIM",!0),be=u("POSITION",!0),Id=u("TIMESTAMP",!0),Fd=u("DATE",!0),ue=u("LEADING",!0),we=u("TRAILING",!0),ye=u("BOTH",!0),Ae=u("TO",!0),Xe=u("INTERVAL",!0),Ze=u("YEAR",!0),af=u("MONTH",!0),cf=u("DAY",!0),ef=u("HOUR",!0),gf=u("MINUTE",!0),jf=u("SECOND",!0),lf=u("CASE",!0),nf=u("END",!0),pf=u("WHEN",!0),rf=u("THEN",!0),De=u("ELSE",!0),tf=u(",",
!1),vf=u("(",!1),xf=u(")",!1),zf=E([" ","\t","\n","\r"],!1,!1),bd=u("`",!1),dd=E(["`"],!0,!1),hd=function(v){return{type:"interval-period",period:v.value,precision:null,secondary:null}},id=function(v,B){return{type:"interval-period",period:"second",precision:v,secondary:B}},f=0,cc=[{line:1,column:1}],sb=0,vc=[],ua=0;if("startRule"in r){if(!(r.startRule in Ra))throw Error("Can't start parsing from rule \""+r.startRule+'".');pb=Ra[r.startRule]}var Kc=pb();if(Kc!==b&&f===p.length)return Kc;Kc!==b&&f<
p.length&&h({type:"end"});throw function(v,B,Y){return new H(H.buildMessage(v,B),v,B,Y)}(vc,sb<p.length?p.charAt(sb):null,sb<p.length?R(sb,sb+1):R(sb,sb));}}})})(Z);let aa=function(){function t(){}t.parse=function(H){return Z.exports.parse(H)};return t}();k.WhereGrammar=aa;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(k){k.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==
typeof global?global:"undefined"!==typeof self?self:{};k.commonjsRequire=function(e){throw Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');};k.getDefaultExportFromCjs=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],
function(k){k.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,
supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./timeSupport ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(k,e,Z,aa,t,H,y,p,r,u,E,Q,R,h,K,d,l){function N(L,F,x,w,I,X){I-=x;X-=w;L=Math.min(1,Math.max(0,((L-x)*I+(F-w)*X)/(I*I+X*X)));return{x:x+I*L,y:w+X*L}}function ca(L,F){return L?F?4:3:F?3:2}let z=function(){function L(x,w,I){this.items=x;this.queryGeometry=w;this.definitionExpression=I.definitionExpression;this.geometryType=I.geometryType;this.hasM=I.hasM;this.hasZ=I.hasZ;this.objectIdField=I.objectIdField;this.spatialReference=I.spatialReference;this.fieldsIndex=I.fieldsIndex;this.timeInfo=
I.timeInfo;this.featureAdapter=I.featureAdapter;this.aggregateAdapter=I.aggregateAdapter}var F=L.prototype;F.createQueryResponseForCount=function(x){const w=new u(x,this.featureAdapter,this.fieldsIndex);if(!x.outStatistics)return w.countDistinctValues(this.items);const {groupByFieldsForStatistics:I,having:X}=x;if(null==I||!I.length)return 1;const A=new Map,C=new Map,O=new Set;x=x.outStatistics;for(const D of x){({statisticType:x}=D);x="exceedslimit"!==x?D.onStatisticField:void 0;if(!C.has(x)){var W=
[];for(const q of I){const a=this._getAttributeValues(w,q,A);W.push(a)}C.set(x,this._calculateUniqueValues(W,w.returnDistinctValues))}x=C.get(x);for(const q in x){const {data:a,items:g}=x[q];W=a.join(",");X&&!w.validateItems(g,X)||O.add(W)}}return O.size};F.createQueryResponse=function(){var x=Z._asyncToGenerator(function*(w){let I;I=w.outStatistics?w.outStatistics.some(X=>"exceedslimit"===X.statisticType)?this._createExceedsLimitQueryResponse(w):yield this._createStatisticsQueryResponse(w):this._createFeatureQueryResponse(w);
w.returnQueryGeometry&&(p.isValid(w.outSR)&&!p.equals(this.queryGeometry.spatialReference,w.outSR)?I.queryGeometry=h.cleanFromGeometryEngine({spatialReference:w.outSR,...Q.project(this.queryGeometry,this.queryGeometry.spatialReference,w.outSR)}):I.queryGeometry=h.cleanFromGeometryEngine({spatialReference:w.outSR,...this.queryGeometry}));return I});return function(w){return x.apply(this,arguments)}}();F.createSnappingResponse=function(x,w){const I=this.featureAdapter,X=ca(this.hasZ,this.hasM),{x:A,
y:C}=x.point,O="number"===typeof x.distance?x.distance:x.distance.x,W="number"===typeof x.distance?x.distance:x.distance.y,D={candidates:[]},q="esriGeometryPolygon"===this.geometryType;w=this._getPointCreator(x.point,this.spatialReference,w);for(const la of this.items){var a=I.getGeometry(la);if(aa.isNone(a))continue;const {coords:pa,lengths:va}=a;if(x.types&e.SnappingTypes.EDGE){a=0;for(var g=0;g<va.length;g++){var M=va[g];for(var U=0;U<M;U++,a+=X){var ha=pa[a],oa=pa[a+1];if(U!==M-1){const Ba=pa[a+
X],Ka=pa[a+X+1],{x:Ta,y:Oa}=N(A,C,ha,oa,Ba,Ka);var ma=(A-Ta)/O;const Sa=(C-Oa)/W;ma=ma*ma+Sa*Sa;1>=ma&&D.candidates.push({type:"edge",objectId:I.getObjectId(la),distance:Math.sqrt(ma),target:w(Ta,Oa),start:w(ha,oa),end:w(Ba,Ka)})}}}}if(x.types&e.SnappingTypes.VERTEX)for(a=q?pa.length-X:pa.length,g=0;g<a;g+=X)M=pa[g],U=pa[g+1],ha=(A-M)/O,oa=(C-U)/W,ha=ha*ha+oa*oa,1>=ha&&D.candidates.push({type:"vertex",objectId:I.getObjectId(la),distance:Math.sqrt(ha),target:w(M,U)})}D.candidates.sort((la,pa)=>la.distance-
pa.distance);return D};F._getPointCreator=function(x,w,I){const X=aa.isSome(I)&&!p.equals(w,I)?A=>Q.project(A,w,I):A=>A;return null!=x.z&&null!=x.m?(A,C)=>X({x:A,y:C,z:x.z,m:x.m}):null!=x.z?(A,C)=>X({x:A,y:C,z:x.z}):null!=x.m?(A,C)=>X({x:A,y:C,m:x.m}):(A,C)=>X({x:A,y:C})};F.executeAttributesQuery=function(x){var w=E.getWhereClause(x.where,this.fieldsIndex);if(!w)return Promise.resolve(this);if(w.isStandardized){let I=0;const X=[];for(const A of this.items)w.testFeature(A,this.featureAdapter)&&(X[I++]=
A);w=new L(X,this.queryGeometry,this);w.definitionExpression=x.where;return Promise.resolve(w)}return Promise.reject(new TypeError("Where clause is not standardized"))};F.executeAggregateIdsQuery=function(x){if(!x.aggregateIds||!x.aggregateIds.length||aa.isNone(this.aggregateAdapter))return Promise.resolve(this);const w=new Set;for(const X of x.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(X).forEach(A=>w.add(A));const I=this.featureAdapter.getObjectId;return Promise.resolve(new L(this.items.filter(X=>
w.has(I(X))),this.queryGeometry,this))};F.executeObjectIdsQuery=function(x){if(!x.objectIds||!x.objectIds.length)return Promise.resolve(this);const w=new Set(x.objectIds),I=this.featureAdapter.getObjectId;return Promise.resolve(new L(this.items.filter(X=>w.has(I(X))),this.queryGeometry,this))};F.executeTimeQuery=function(x){x=R.getTimeOperator(this.timeInfo,x.timeExtent,this.featureAdapter);if(!aa.isSome(x))return Promise.resolve(this);x=this.items.filter(x);return Promise.resolve(new L(x,this.queryGeometry,
this))};F.filterLatest=function(){const {trackIdField:x,startTimeField:w,endTimeField:I}=this.timeInfo;var X=I||w;const A=new Map,C=this.featureAdapter.getAttribute;for(const O of this.items){const W=C(O,x),D=C(O,X),q=A.get(W);(!q||D>C(q,X))&&A.set(W,O)}X=Array.from(A.values());return Promise.resolve(new L(X,this.queryGeometry,this))};F.project=function(){var x=Z._asyncToGenerator(function*(w){if(!w||p.equals(this.spatialReference,w))return this;const I=this.featureAdapter,X=(yield Q.projectMany(this.items.map(A=>
h.getGeometry(this.geometryType,this.hasZ,this.hasM,I.getGeometry(A))),this.spatialReference,w)).map((A,C)=>I.cloneWithGeometry(this.items[C],r.convertFromGeometry(A,this.hasZ,this.hasM)));return new L(X,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:w,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})});return function(w){return x.apply(this,
arguments)}}();F.createSummaryStatisticsResponse=function(){var x=Z._asyncToGenerator(function*(w,I){const {field:X,valueExpression:A,normalizationField:C,normalizationType:O,normalizationTotal:W,minValue:D,maxValue:q,scale:a}=I;I=this.fieldsIndex.isDateField(X);w=yield this._getDataValues(w,{field:X,valueExpression:A,normalizationField:C,normalizationType:O,normalizationTotal:W,scale:a});const g=d.isNullCountSupported({normalizationType:O,normalizationField:C,minValue:D,maxValue:q}),M=this.fieldsIndex.get(X),
U={value:.5,fieldType:null==M?void 0:M.type};w=K.isStringField(M)?d.calculateStringStatistics({values:w,supportsNullCount:g,percentileParams:U}):d.calculateStatistics({values:w,minValue:D,maxValue:q,useSampleStdDev:!O,supportsNullCount:g,percentileParams:U});return d.processSummaryStatisticsResult(w,I)});return function(w,I){return x.apply(this,arguments)}}();F.createUniqueValuesResponse=function(){var x=Z._asyncToGenerator(function*(w,I){const {field:X,valueExpression:A,domain:C,returnAllCodedValues:O,
scale:W}=I;w=yield this._getDataValues(w,{field:X,valueExpression:A,scale:W});w=d.calculateUniqueValuesCount(w);return d.createUVResult(w,C,O)});return function(w,I){return x.apply(this,arguments)}}();F.createClassBreaksResponse=function(){var x=Z._asyncToGenerator(function*(w,I){const {field:X,valueExpression:A,normalizationField:C,normalizationType:O,normalizationTotal:W,classificationMethod:D,standardDeviationInterval:q,minValue:a,maxValue:g,numClasses:M,scale:U}=I;w=yield this._getDataValues(w,
{field:X,valueExpression:A,normalizationField:C,normalizationType:O,normalizationTotal:W,scale:U});w=d.calculateClassBreaks(w,{field:X,normalizationField:C,normalizationType:O,normalizationTotal:W,classificationMethod:D,standardDeviationInterval:q,minValue:a,maxValue:g,numClasses:M});return d.resolveCBResult(w,D)});return function(w,I){return x.apply(this,arguments)}}();F.createHistogramResponse=function(){var x=Z._asyncToGenerator(function*(w,I){const {field:X,valueExpression:A,normalizationField:C,
normalizationType:O,normalizationTotal:W,classificationMethod:D,standardDeviationInterval:q,minValue:a,maxValue:g,numBins:M,scale:U}=I;w=yield this._getDataValues(w,{field:X,valueExpression:A,normalizationField:C,normalizationType:O,normalizationTotal:W,scale:U});return d.calculateHistogram(w,{field:X,normalizationField:C,normalizationType:O,normalizationTotal:W,classificationMethod:D,standardDeviationInterval:q,minValue:a,maxValue:g,numBins:M})});return function(w,I){return x.apply(this,arguments)}}();
F._sortFeatures=function(x,w,I){if(1<x.length&&w&&w.length)for(const X of w.reverse()){w=X.split(" ");const A=w[0],C=this.fieldsIndex.get(A);w=w[1]&&"desc"===w[1].toLowerCase();const O=d.getAttributeComparator(null==C?void 0:C.type,w);x.sort((W,D)=>{W=I(W,A,C);D=I(D,A,C);return O(W,D)})}};F._createFeatureQueryResponse=function(x){const w=this.items,{geometryType:I,hasM:X,hasZ:A,objectIdField:C,spatialReference:O}=this,{outFields:W,outSR:D,quantizationParameters:q,resultRecordCount:a,resultOffset:g,
returnZ:M,returnM:U}=x,ha=null!=a?w.length>(g||0)+a:!1,oa=W&&(W.includes("*")?[...this.fieldsIndex.fields]:W.map(ma=>this.fieldsIndex.get(ma)));return{exceededTransferLimit:ha,features:this._createFeatures(x,w),fields:oa,geometryType:I,hasM:X&&U,hasZ:A&&M,objectIdFieldName:C,spatialReference:h.cleanFromGeometryEngine(D?D:O),transform:q&&y.toQuantizationTransform(q)||null}};F._createFeatures=function(x,w){const I=new u(x,this.featureAdapter,this.fieldsIndex),{hasM:X,hasZ:A}=this,{orderByFields:C,quantizationParameters:O,
returnGeometry:W,returnCentroid:D,maxAllowableOffset:q,resultOffset:a,resultRecordCount:g,returnZ:M=!1,returnM:U=!1}=x,ha=A&&M,oa=X&&U;x=[];var ma=0;w=[...w];this._sortFeatures(w,C,(va,Ba,Ka)=>I.getFieldValue(va,Ba,Ka));if(W||D){var la=y.toQuantizationTransform(O);if(W&&!D)for(var pa of w)x[ma++]={attributes:I.getAttributes(pa),geometry:h.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(pa),q,la,ha,oa)};else if(!W&&D)for(const va of w)x[ma++]={attributes:I.getAttributes(va),
centroid:h.transformCentroid(this,this.featureAdapter.getCentroid(va,this),la)};else for(const va of w)x[ma++]={attributes:I.getAttributes(va),centroid:h.transformCentroid(this,this.featureAdapter.getCentroid(va,this),la),geometry:h.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(va),q,la,ha,oa)}}else for(la of w)(pa=I.getAttributes(la))&&(x[ma++]={attributes:pa});ma=a||0;null!=g&&(x=x.slice(ma,Math.min(x.length,ma+g)));return x};F._createExceedsLimitQueryResponse=
function(x){var w=!1;let I=Number.POSITIVE_INFINITY,X=Number.POSITIVE_INFINITY;w=Number.POSITIVE_INFINITY;for(const A of x.outStatistics)if("exceedslimit"===A.statisticType){I=null!=A.maxPointCount?A.maxPointCount:Number.POSITIVE_INFINITY;X=null!=A.maxRecordCount?A.maxRecordCount:Number.POSITIVE_INFINITY;w=null!=A.maxVertexCount?A.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)w=this.items.length>I;else if(this.items.length>X)w=!0;else{x=this.hasZ?this.hasM?
4:3:this.hasM?3:2;const A=this.featureAdapter;w=this.items.reduce((C,O)=>{O=A.getGeometry(O);return C+(aa.isSome(O)&&O.coords.length||0)},0)/x>w}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(w)}}]}};F._createStatisticsQueryResponse=function(){var x=Z._asyncToGenerator(function*(w){var I={attributes:{}};const X=[],A=new Map,C=new Map,O=new Map,W=new Map,D=new u(w,
this.featureAdapter,this.fieldsIndex);var q=w.outStatistics;const {groupByFieldsForStatistics:a,having:g,orderByFields:M}=w;w=a&&a.length;const U=!!w,ha=U&&a[0],oa=U&&!this.fieldsIndex.get(ha);for(const Ba of q){const {outStatisticFieldName:Ka,statisticType:Ta}=Ba;q=Ba;var ma="exceedslimit"!==Ta?Ba.onStatisticField:void 0;const Oa="percentile_disc"===Ta||"percentile_cont"===Ta,Sa="EnvelopeAggregate"===Ta||"CentroidAggregate"===Ta||"ConvexHullAggregate"===Ta,c=U&&1===w&&(ma===ha||oa)&&"count"===Ta;
if(U){if(!O.has(ma)){var la=[];for(const n of a){var pa=this._getAttributeValues(D,n,A);la.push(pa)}O.set(ma,this._calculateUniqueValues(la,D.returnDistinctValues))}la=O.get(ma);for(const n in la){const {count:fa,data:m,items:G,itemPositions:S}=la[n];pa=m.join(",");if(!g||D.validateItems(G,g)){const T=W.get(pa)||{attributes:{}};if(Sa){T.aggregateGeometries||(T.aggregateGeometries={});const {aggregateGeometries:ia,outStatisticFieldName:ea}=yield this._getAggregateGeometry(q,G);T.aggregateGeometries[ea]=
ia}else{var va=null;if(c)va=fa;else{const ia=this._getAttributeValues(D,ma,A);va=S.map(ea=>ia[ea]);va=Oa&&"statisticParameters"in q?this._getPercentileValue(q,va):this._getStatisticValue(q,va,null,D.returnDistinctValues)}T.attributes[Ka]=va}a.forEach((ia,ea)=>T.attributes[this.fieldsIndex.get(ia)?ia:`EXPR_${ea+1}`]=m[ea]);W.set(pa,T)}}}else if(Sa){I.aggregateGeometries||(I.aggregateGeometries={});const {aggregateGeometries:n,outStatisticFieldName:fa}=yield this._getAggregateGeometry(q,this.items);
I.aggregateGeometries[fa]=n}else ma=this._getAttributeValues(D,ma,A),I.attributes[Ka]=Oa&&"statisticParameters"in q?this._getPercentileValue(q,ma):this._getStatisticValue(q,ma,C,D.returnDistinctValues);X.push({name:Ka,alias:Ka,type:"esriFieldTypeDouble"})}I=U?Array.from(W.values()):[I];this._sortFeatures(I,M,(Ba,Ka)=>Ba.attributes[Ka]);return{fields:X,features:I}});return function(w){return x.apply(this,arguments)}}();F._getAggregateGeometry=function(){var x=Z._asyncToGenerator(function*(w,I){var X=
yield new Promise((M,U)=>k(["../../../geometry/geometryEngineJSON"],M,U));const {statisticType:A,outStatisticFieldName:C}=w,{featureAdapter:O,spatialReference:W,geometryType:D,hasZ:q,hasM:a}=this;I=I.map(M=>h.getGeometry(D,q,a,O.getGeometry(M)));const g=X.convexHull(W,I,!0)[0];w={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===A?(X=g?H.getPolygonExtent(g):H.getGeometryExtent(X.union(W,I)),w.aggregateGeometries={...X,spatialReference:W},w.outStatisticFieldName=C||"extent"):
"CentroidAggregate"===A?(X=g?t.polygonCentroid(g):t.extentCentroid(H.getGeometryExtent(X.union(W,I))),w.aggregateGeometries={x:X[0],y:X[1],spatialReference:W},w.outStatisticFieldName=C||"centroid"):"ConvexHullAggregate"===A&&(w.aggregateGeometries=g,w.outStatisticFieldName=C||"convexHull");return w});return function(w,I){return x.apply(this,arguments)}}();F._getStatisticValue=function(x,w,I,X){const {onStatisticField:A,statisticType:C}=x;x=null;x=null!=I&&I.has(A)?I.get(A):K.isStringField(this.fieldsIndex.get(A))?
d.calculateStringStatistics({values:w,returnDistinct:X}):d.calculateStatistics({values:w,minValue:null,maxValue:null,useSampleStdDev:!0});I&&I.set(A,x);return x["var"===C?"variance":C]};F._getPercentileValue=function(x,w){const {onStatisticField:I,statisticParameters:X,statisticType:A}=x,{value:C,orderBy:O}=X;x=this.fieldsIndex.get(I);return d.calculatePercentile(w,{value:C,orderBy:O,fieldType:null==x?void 0:x.type,isDiscrete:"percentile_disc"===A})};F._getAttributeValues=function(x,w,I){if(I.has(w))return I.get(w);
const X=this.fieldsIndex.get(w),A=this.items.map(C=>x.getFieldValue(C,w,X));I.set(w,A);return A};F._getAttributeNormalizedValues=function(x,w){return this.items.map(I=>x.getNormalizedValue(I,{field:w.field,fieldInfo:this.fieldsIndex.get(w.field),normalizationField:w.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(w.normalizationField),normalizationType:w.normalizationType,normalizationTotal:w.normalizationTotal}))};F._getAttributeExpressionValues=function(){var x=Z._asyncToGenerator(function*(w,
I,X){const {arcadeUtils:A}=yield l.loadArcade(),C=A.createFunction(I),O=X&&A.getViewInfo(X);return this.items.map(W=>w.getExpressionValue(W,{compiledFunc:C,viewInfo:O},A))});return function(w,I,X){return x.apply(this,arguments)}}();F._calculateUniqueValues=function(x,w){const I={},X=this.items,A=X.length;for(let C=0;C<A;C++){const O=X[C],W=[];for(const q of x)W.push(q[C]);const D=W.join(",");w?null==I[D]&&(I[D]={count:1,data:W,items:[O],itemPositions:[C]}):null==I[D]?I[D]={count:1,data:W,items:[O],
itemPositions:[C]}:(I[D].count++,I[D].items.push(O),I[D].itemPositions.push(C))}return I};F._getDataValues=function(){var x=Z._asyncToGenerator(function*(w,I){const X=new u(w,this.featureAdapter,this.fieldsIndex),{valueExpression:A,field:C,normalizationField:O,normalizationType:W,normalizationTotal:D,scale:q}=I;w=A?{viewingMode:"map",scale:q,spatialReference:w.outSR||this.spatialReference}:null;return A?this._getAttributeExpressionValues(X,A,w):this._getAttributeNormalizedValues(X,{field:C,normalizationField:O,
normalizationType:W,normalizationTotal:D})});return function(w,I){return x.apply(this,arguments)}}();Z._createClass(L,[{key:"size",get:function(){return this.items.length}}]);return L}();e.SnappingTypes=void 0;(function(L){L[L.NONE=0]="NONE";L[L.EDGE=1]="EDGE";L[L.VERTEX=2]="VERTEX"})(e.SnappingTypes||(e.SnappingTypes={}));e.default=z;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(k,
e,Z){function aa({scale:A,translate:C},O){return Math.round((O-C[0])/A[0])}function t({scale:A,translate:C},O){return Math.round((C[1]-O)/A[1])}function H(A,C,O){const W=[];let D,q,a,g;for(let M=0;M<O.length;M++){const U=O[M];if(0<M){if(a=aa(A,U[0]),g=t(A,U[1]),a!==D||g!==q)W.push(C(U,a-D,g-q)),D=a,q=g}else D=aa(A,U[0]),q=t(A,U[1]),W.push(C(U,D,q))}return 0<W.length?W:null}function y(A,C,O,W){return H(A,O?W?X:I:W?I:w,C)}function p(A,C,O,W){const D=[];O=O?W?X:I:W?I:w;for(W=0;W<C.length;W++){const q=
H(A,O,C[W]);q&&3<=q.length&&D.push(q)}return D.length?D:null}function r(A,C,O,W){const D=[];O=O?W?X:I:W?I:w;for(W=0;W<C.length;W++){const q=H(A,O,C[W]);q&&2<=q.length&&D.push(q)}return D.length?D:null}function u({scale:A,translate:C},O){return O*A[0]+C[0]}function E({scale:A,translate:C},O){return C[1]-O*A[1]}function Q(A,C,O){const W=Array(O.length);if(!O.length)return W;const [D,q]=A.scale;let a=u(A,O[0][0]);A=E(A,O[0][1]);W[0]=C(O[0],a,A);for(let g=1;g<O.length;g++){const M=O[g];a+=M[0]*D;A-=M[1]*
q;W[g]=C(M,a,A)}return W}function R(A,C,O){const W=Array(O.length);for(let D=0;D<O.length;D++)W[D]=Q(A,C,O[D]);return W}function h(A,C,O,W){return Q(A,O?W?X:I:W?I:w,C)}function K(A,C,O,W){return R(A,O?W?X:I:W?I:w,C)}function d(A,C,O,W){return R(A,O?W?X:I:W?I:w,C)}function l(A,C,O){let [W,D]=O[0],q=Math.min(W,C[0]),a=Math.min(D,C[1]),g=Math.max(W,C[2]);C=Math.max(D,C[3]);for(let M=1;M<O.length;M++){const [U,ha]=O[M];W+=U;D+=ha;0>U&&(q=Math.min(q,W));0<U&&(g=Math.max(g,W));0>ha?a=Math.min(a,D):0<ha&&
(C=Math.max(C,D))}A[0]=q;A[1]=a;A[2]=g;A[3]=C;return A}function N(A,C){if(!C.length)return null;A[0]=A[1]=Number.POSITIVE_INFINITY;A[2]=A[3]=Number.NEGATIVE_INFINITY;for(let O=0;O<C.length;O++)l(A,A,C[O]);return A}function ca(A,C,O,W,D){C.xmin=aa(A,O.xmin);C.ymin=t(A,O.ymin);C.xmax=aa(A,O.xmax);C.ymax=t(A,O.ymax);C!==O&&(W&&(C.zmin=O.zmin,C.zmax=O.zmax),D&&(C.mmin=O.mmin,C.mmax=O.mmax));return C}function z(A,C,O,W,D){C.points=y(A,O.points,W,D);return C}function L(A,C,O,W,D){C.x=aa(A,O.x);C.y=t(A,
O.y);C!==O&&(W&&(C.z=O.z),D&&(C.m=O.m));return C}function F(A,C,O,W,D){A=p(A,O.rings,W,D);if(!A)return null;C.rings=A;return C}function x(A,C,O,W,D){A=r(A,O.paths,W,D);if(!A)return null;C.paths=A;return C}const w=(A,C,O)=>[C,O],I=(A,C,O)=>[C,O,A[2]],X=(A,C,O)=>[C,O,A[2],A[3]];k.equals=function(A,C){if(A===C||null==A&&null==C)return!0;if(null==A||null==C)return!1;let O,W,D,q;A&&"upperLeft"===A.originPosition?(O=A.translate[0],W=A.translate[1],A=A.scale[0]):(O=e.isSome(A.extent)?A.extent.xmin:0,W=e.isSome(A.extent)?
A.extent.ymax:0,A=A.tolerance);C&&"upperLeft"===C.originPosition?(D=C.translate[0],q=C.translate[1],C=C.scale[0]):(D=e.isSome(C.extent)?C.extent.xmin:0,q=e.isSome(C.extent)?C.extent.ymax:0,C=C.tolerance);return O===D&&W===q&&A===C};k.getQuantizedBoundsCoordsArray=l;k.getQuantizedBoundsCoordsArrayArray=N;k.getQuantizedBoundsPaths=function(A){return N([0,0,0,0],A)};k.getQuantizedBoundsPoints=function(A){const C=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];
return l(C,C,A)};k.getQuantizedBoundsRings=function(A){return N([0,0,0,0],A)};k.quantizeBounds=function(A,C,O){C[0]=aa(A,O[0]);C[3]=t(A,O[1]);C[2]=aa(A,O[2]);C[1]=t(A,O[3]);return C};k.quantizeExtent=ca;k.quantizeGeometry=function(A,C){return A&&C?Z.isPoint(C)?L(A,{},C,!1,!1):Z.isPolyline(C)?x(A,{},C,!1,!1):Z.isPolygon(C)?F(A,{},C,!1,!1):Z.isMultipoint(C)?z(A,{},C,!1,!1):Z.isExtent(C)?ca(A,{},C,!1,!1):null:null};k.quantizeMultipoint=z;k.quantizePaths=r;k.quantizePoint=L;k.quantizePoints=y;k.quantizePolygon=
F;k.quantizePolyline=x;k.quantizeRings=p;k.quantizeX=aa;k.quantizeY=t;k.toQuantizationTransform=function(A){return A?{originPosition:"upper-left"===A.originPosition?"upperLeft":"lower-left"===A.originPosition?"lowerLeft":A.originPosition,scale:A.tolerance?[A.tolerance,A.tolerance]:[1,1],translate:e.isSome(A.extent)?[A.extent.xmin,A.extent.ymax]:[0,0]}:null};k.unquantizeBounds=function(A,C,O){return O?(C[0]=u(A,O[0]),C[1]=E(A,O[3]),C[2]=u(A,O[2]),C[3]=E(A,O[1]),C):[u(A,C[0]),E(A,C[3]),u(A,C[2]),E(A,
C[1])]};k.unquantizeCoordsArray=Q;k.unquantizeCoordsArrayArray=R;k.unquantizeExtent=function(A,C,O,W,D){C.xmin=u(A,O.xmin);C.ymin=E(A,O.ymin);C.xmax=u(A,O.xmax);C.ymax=E(A,O.ymax);C!==O&&(W&&(C.zmin=O.zmin,C.zmax=O.zmax),D&&(C.mmin=O.mmin,C.mmax=O.mmax));return C};k.unquantizeMultipoint=function(A,C,O,W,D){e.isSome(O)&&(C.points=h(A,O.points,W,D));return C};k.unquantizePaths=K;k.unquantizePoint=function(A,C,O,W,D){if(e.isNone(O))return C;C.x=u(A,O.x);C.y=E(A,O.y);C!==O&&(W&&(C.z=O.z),D&&(C.m=O.m));
return C};k.unquantizePoints=h;k.unquantizePolygon=function(A,C,O,W,D){e.isSome(O)&&(C.rings=d(A,O.rings,W,D));return C};k.unquantizePolyline=function(A,C,O,W,D){e.isSome(O)&&(C.paths=K(A,O.paths,W,D));return C};k.unquantizeRings=d;k.unquantizeX=u;k.unquantizeY=E;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport","../../../statistics/utils"],function(k,e,Z){return function(){function aa(H,
y,p){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=H.returnDistinctValues;this.fieldsIndex=p;this.featureAdapter=y;if((y=H.outFields)&&-1===y.indexOf("*")){this.outFields=y;H=0;for(const u of y){var r=e.getExpressionFromFieldName(u);r=(y=this.fieldsIndex.get(r))?null:e.getWhereClause(r,p);y=y?y.name:e.getAliasFromFieldName(u)||`FIELD_EXP_${H++}`;this._fieldDataCache.set(u,{alias:y,clause:r})}}}var t=aa.prototype;t.countDistinctValues=function(H){if(!this.returnDistinctValues)return H.length;
H.forEach(y=>this.getAttributes(y));return this._returnDistinctMap.size};t.getAttributes=function(H){H=this._processAttributesForOutFields(H);return this._processAttributesForDistinctValues(H)};t.getFieldValue=function(H,y,p){const r=p?p.name:y;let u=null;this._fieldDataCache.has(r)?u=this._fieldDataCache.get(r).clause:p||(u=e.getWhereClause(y,this.fieldsIndex),this._fieldDataCache.set(r,{alias:r,clause:u}));return p?this.featureAdapter.getAttribute(H,r):u.calculateValue(H,this.featureAdapter)};t.getNormalizedValue=
function(H,y){const p=y.normalizationType,r=y.normalizationTotal;let u=this.getFieldValue(H,y.field,y.fieldInfo);p&&Number.isFinite(u)&&(H=this.getFieldValue(H,y.normalizationField,y.normalizationFieldInfo),u=Z.getNormalizedValue(u,p,H,r));return u};t.getExpressionValue=function(H,y,p){H={attributes:this.featureAdapter.getAttributes(H)};H=p.createExecContext(H,y.viewInfo);return p.executeFunction(y.compiledFunc,H)};t.validateItem=function(H,y){this._fieldDataCache.has(y)||this._fieldDataCache.set(y,
{alias:y,clause:e.getWhereClause(y,this.fieldsIndex)});return this._fieldDataCache.get(y).clause.testFeature(H,this.featureAdapter)};t.validateItems=function(H,y){this._fieldDataCache.has(y)||this._fieldDataCache.set(y,{alias:y,clause:e.getWhereClause(y,this.fieldsIndex)});return this._fieldDataCache.get(y).clause.testSet(H,this.featureAdapter)};t._processAttributesForOutFields=function(H){const y=this.outFields;if(!y||!y.length)return this.featureAdapter.getAttributes(H);const p={};for(const r of y){const {alias:u,
clause:E}=this._fieldDataCache.get(r);p[u]=E?E.calculateValue(H,this.featureAdapter):this.featureAdapter.getAttribute(H,u)}return p};t._processAttributesForDistinctValues=function(H){if(k.isNone(H)||!this.returnDistinctValues)return H;var y=this.outFields,p=[];if(y)for(const u of y){var {alias:r}=this._fieldDataCache.get(u);p.push(H[r])}else for(r in H)p.push(H[r]);y=`${(y||["*"]).join(",")}=${p.join(",")}`;p=this._returnDistinctMap.get(y)||0;this._returnDistinctMap.set(y,++p);return 1<p?null:H};
return aa}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(k,e,Z){function aa(z){const L=null!=z.minValue||null!=z.maxValue,F=!!z.sqlExpression&&z.supportsSQLExpression;return!(null!=z.normalizationField||null!=z.normalizationType)&&!L&&!F}function t(z){const {values:L,useSampleStdDev:F,supportsNullCount:x}=z;var w=Number.POSITIVE_INFINITY;let I=Number.NEGATIVE_INFINITY,X=null,A=null;var C=null;let O=
null,W=0;const D=null==z.minValue?-Infinity:z.minValue,q=null==z.maxValue?Infinity:z.maxValue;for(const a of L)Number.isFinite(a)?a>=D&&a<=q&&(X+=a,w=Math.min(w,a),I=Math.max(I,a),W++):"string"===typeof a&&W++;if(W&&null!=X){A=X/W;C=0;for(const a of L)Number.isFinite(a)&&a>=D&&a<=q&&(C+=(a-A)**2);O=F?1<W?C/(W-1):0:0<W?C/W:0;C=Math.sqrt(O)}else I=w=null;w={avg:A,count:W,max:I,min:w,stddev:C,sum:X,variance:O};x&&(w.nullcount=L.length-W);z.percentileParams&&(w.median=H(L,z.percentileParams));return w}
function H(z,L){const {fieldType:F,value:x,orderBy:w,isDiscrete:I}=L,X=y(F,"desc"===w);z=[...z].filter(W=>null!=W).sort((W,D)=>X(W,D));if(0===z.length)return null;if(0>=x)return z[0];if(1<=x)return z[z.length-1];var A=(z.length-1)*x,C=Math.floor(A);L=C+1;A%=1;C=z[C];const O=z[L];return L>=z.length||I||"string"===typeof C||"string"===typeof O?C:C*(1-A)+O*A}function y(z,L){const F=L?1:-1,x=r(L),w=p(L);if(!z||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...N].includes(z))return(I,
X)=>"number"===typeof I&&"number"===typeof X?x(I,X):"string"===typeof I&&"string"===typeof X?w(I,X):F;if("esriFieldTypeDate"===z)return(I,X)=>{I=(new Date(I)).getTime();X=(new Date(X)).getTime();return isNaN(I)||isNaN(X)?F:x(I,X)};if(N.has(z))return(I,X)=>x(I,X);if("esriFieldTypeString"===z)return(I,X)=>w(I,X);if("esriFieldTypeGUID"===z||"esriFieldTypeGlobalID"===z){const I=p(L);return(X,A)=>I(u(X),u(A))}return L?(I,X)=>1:(I,X)=>-1}function p(z){return z?(L,F)=>{var x,w;L=null==(x=L)?void 0:x.toUpperCase();
F=null==(w=F)?void 0:w.toUpperCase();return L>F?-1:L<F?1:0}:(L,F)=>{var x,w;L=null==(x=L)?void 0:x.toUpperCase();F=null==(w=F)?void 0:w.toUpperCase();return L<F?-1:L>F?1:0}}function r(z){return z?(L,F)=>F-L:(L,F)=>L-F}function u(z){return z.substr(24,12)+z.substr(19,4)+z.substr(16,2)+z.substr(14,2)+z.substr(11,2)+z.substr(9,2)+z.substr(6,2)+z.substr(4,2)+z.substr(2,2)+z.substr(0,2)}function E(z,L){const F=R({field:L.field,normalizationType:L.normalizationType,normalizationField:L.normalizationField,
classificationMethod:L.classificationMethod,standardDeviationInterval:L.standardDeviationInterval,breakCount:L.numClasses||5});z=Q(z,L.minValue,L.maxValue);return Z.createGenerateRendererClassBreaks({definition:F,values:z,normalizationTotal:L.normalizationTotal})}function Q(z,L,F){L=null==L?-Infinity:L;F=null==F?Infinity:F;return z.filter(x=>Number.isFinite(x)&&x>=L&&x<=F)}function R(z){const L=z.field,F=z.classificationMethod||"equal-interval",x=z.normalizationType,w=z.normalizationField,I=new e;
I.classificationField=L;I.breakCount=z.breakCount;I.classificationMethod=F;I.standardDeviationInterval="standard-deviation"===F?z.standardDeviationInterval||1:void 0;I.normalizationType=x;I.normalizationField="field"===x?w:void 0;return I}function h(z,L){const {field:F,classificationMethod:x,standardDeviationInterval:w,normalizationType:I,normalizationField:X,normalizationTotal:A,minValue:C,maxValue:O}=L,W=L.numBins||10;let D=L=null,q=null;x&&"equal-interval"!==x||I?({classBreaks:z}=E(z,{field:F,
normalizationType:I,normalizationField:X,normalizationTotal:A,classificationMethod:x,standardDeviationInterval:w,minValue:C,maxValue:O,numClasses:W}),L=z[0].minValue,D=z[z.length-1].maxValue,q=z.map(a=>[a.minValue,a.maxValue])):(null!=C&&null!=O?(L=C,D=O):(z=t({values:z,minValue:C,maxValue:O,useSampleStdDev:!I,supportsNullCount:aa({normalizationType:I,normalizationField:X,minValue:C,maxValue:O})}),L=z.min,D=z.max),q=d(L,D,W));return{min:L,max:D,intervals:q}}function K(z,L){let F=-1;for(let x=z.length-
1;0<=x;x--)if(L>=z[x][0]){F=x;break}return F}function d(z,L,F){const x=(L-z)/F,w=[];let I;for(let X=1;X<=F;X++)I=z+x,I=Number(I.toFixed(16)),w.push([z,X===F?L:I]),z=I;return w}const l=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,N=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),ca="min max avg stddev count sum variance nullcount median".split(" ");k.calculateClassBreaks=E;k.calculateHistogram=function(z,L){const {min:F,max:x,intervals:w}=h(z,L),
I=w.map((X,A)=>({minValue:w[A][0],maxValue:w[A][1],count:0}));for(const X of z)null!=X&&X>=F&&X<=x&&(z=K(w,X),-1<z&&I[z].count++);return{bins:I,minValue:F,maxValue:x,normalizationTotal:L.normalizationTotal}};k.calculatePercentile=H;k.calculateStatistics=t;k.calculateStringStatistics=function(z){const L=z.returnDistinct?[...new Set(z.values)]:z.values,F=L.filter(w=>null!=w).length,x={count:F};z.supportsNullCount&&(x.nullcount=L.length-F);z.percentileParams&&(x.median=H(L,z.percentileParams));return x};
k.calculateUniqueValuesCount=function(z){const L={};for(let F of z){if(null==F||"string"===typeof F&&""===F.trim())F=null;null==L[F]?L[F]={count:1,data:F}:L[F].count++}return{count:L}};k.createClassBreaksDefinition=R;k.createUVResult=function(z,L,F){const x=z.count;z=[];F&&L&&"coded-value"===L.type&&L.codedValues.forEach(w=>{w=w.code;x.hasOwnProperty(w)||(x[w]={data:w,count:0})});for(const w in x)L=x[w],z.push({value:L.data,count:L.count,label:L.label});return{uniqueValueInfos:z}};k.getAttributeComparator=
y;k.getEqualIntervalBins=d;k.getNormalizedValue=function(z,L,F,x){let w=null;switch(L){case "log":0!==z&&(w=Math.log(z)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(x)&&0!==x&&(w=z/x*100);break;case "field":Number.isFinite(F)&&0!==F&&(w=z/F);break;case "natural-log":0<z&&(w=Math.log(z));break;case "square-root":0<z&&(w=z**.5)}return w};k.isNullCountSupported=aa;k.processSummaryStatisticsResult=function(z,L){let F;for(F in z)-1<ca.indexOf(F)&&(Number.isFinite(z[F])||(z[F]=null));if(!L)return z;
["avg","stddev","variance"].forEach(x=>{null!=z[x]&&(z[x]=Math.ceil(z[x]))});return z};k.resolveCBResult=function(z,L){let F=z.classBreaks;const x=F[0].minValue,w=F[F.length-1].maxValue,I="standard-deviation"===L;F=F.map(X=>{const A=X.label;X={minValue:X.minValue,maxValue:X.maxValue,label:A};if(I&&A){const C=A.match(l).map(O=>+O.trim());2===C.length?(X.minStdDev=C[0],X.maxStdDev=C[1],0>C[0]&&0<C[1]&&(X.hasAvg=!0)):1===C.length&&(A.includes("\x3c")?(X.minStdDev=null,X.maxStdDev=C[0]):A.includes("\x3e")&&
(X.minStdDev=C[0],X.maxStdDev=null))}return X});return{minValue:x,maxValue:w,classBreakInfos:F,normalizationTotal:z.normalizationTotal}};k.statisticTypes=ca;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(k,e,Z,aa,t,H,y,p,r){t=new Z.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});Z=new Z.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});r=function(u){function E(){var Q=u.apply(this,arguments)||this;Q.breakCount=null;Q.classificationField=
null;Q.classificationMethod=null;Q.normalizationField=null;Q.normalizationType=null;Q.type="class-breaks-definition";return Q}k._inheritsLoose(E,u);k._createClass(E,[{key:"standardDeviationInterval",set:function(Q){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",Q)}},{key:"definedInterval",set:function(Q){"defined-interval"===this.classificationMethod&&this._set("definedInterval",Q)}}]);return E}(r);e.__decorate([aa.property({json:{write:!0}})],r.prototype,
"breakCount",void 0);e.__decorate([aa.property({json:{write:!0}})],r.prototype,"classificationField",void 0);e.__decorate([aa.property({type:String,json:{read:t.read,write:t.write}})],r.prototype,"classificationMethod",void 0);e.__decorate([aa.property({json:{write:!0}})],r.prototype,"normalizationField",void 0);e.__decorate([aa.property({json:{read:Z.read,write:Z.write}})],r.prototype,"normalizationType",void 0);e.__decorate([aa.property({value:null,json:{write:!0}})],r.prototype,"standardDeviationInterval",
null);e.__decorate([aa.property({value:null,json:{write:!0}})],r.prototype,"definedInterval",null);e.__decorate([aa.property()],r.prototype,"type",void 0);return r=e.__decorate([p.subclass("esri.rest.support.ClassBreaksDefinition")],r)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(k,e,Z,aa,t,H,y,p,r,u,E){Z=new Z.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});aa=function(Q){function R(){var h=Q.apply(this,arguments)||this;h.baseSymbol=null;h.colorRamp=null;h.type=null;return h}k._inheritsLoose(R,Q);return R}(aa.JSONSupport);e.__decorate([t.property({type:E,json:{write:!0}})],aa.prototype,"baseSymbol",void 0);e.__decorate([t.property({types:u.types,json:{read:{reader:u.fromJSON},write:!0}})],aa.prototype,"colorRamp",void 0);
e.__decorate([t.property({json:{read:Z.read,write:Z.write}})],aa.prototype,"type",void 0);return aa=e.__decorate([r.subclass("esri.rest.support.ClassificationDefinition")],aa)})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(k,e,Z,aa){Z={key:"type",base:Z,typeMap:{algorithmic:e,multipart:aa}};k.fromJSON=function(t){return t&&t.type?"algorithmic"===t.type?e.fromJSON(t):"multipart"===t.type?aa.fromJSON(t):null:null};
k.types=Z;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(k,e,Z,aa,t,H,y,p,r){var u;r=u=function(E){function Q(R){R=E.call(this,R)||
this;R.algorithm=null;R.fromColor=null;R.toColor=null;R.type="algorithmic";return R}k._inheritsLoose(Q,E);Q.prototype.clone=function(){return new u({fromColor:aa.clone(this.fromColor),toColor:aa.clone(this.toColor),algorithm:this.algorithm})};return Q}(r);e.__decorate([y.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],r.prototype,"algorithm",void 0);e.__decorate([t.property({type:Z,json:{type:[H.Integer],write:!0}})],r.prototype,"fromColor",void 0);
e.__decorate([t.property({type:Z,json:{type:[H.Integer],write:!0}})],r.prototype,"toColor",void 0);e.__decorate([t.property({type:["algorithmic"]})],r.prototype,"type",void 0);return r=u=e.__decorate([p.subclass("esri.rest.support.AlgorithmicColorRamp")],r)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(k,e,Z){k.enumeration=function(aa,t={}){var H;aa=aa instanceof e.JSONMap?aa:new e.JSONMap(aa,t);aa={type:(null!=(H=null==t?
void 0:t.ignoreUnknown)?H:1)?aa.apiValues:String,json:{type:aa.jsonValues,read:null!=t&&t.readOnly?!1:{reader:aa.read},write:{writer:aa.write}}};void 0!==(null==t?void 0:t.readOnly)&&(aa.readOnly=!!t.readOnly);void 0!==(null==t?void 0:t.default)&&(aa.json.default=t.default);void 0!==(null==t?void 0:t.name)&&(aa.json.name=t.name);return Z.property(aa)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,e,Z,aa,t,H,y,p){Z=function(r){function u(E){E=r.call(this,E)||this;E.type=null;return E}k._inheritsLoose(u,r);return u}(Z.JSONSupport);e.__decorate([aa.property({readOnly:!0,json:{read:!1,write:!0}})],Z.prototype,"type",void 0);return Z=e.__decorate([p.subclass("esri.rest.support.ColorRamp")],Z)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(k,e,Z,aa,t,H,y,p){var r;t=r=function(u){function E(Q){Q=u.call(this,Q)||this;Q.colorRamps=null;Q.type="multipart";return Q}k._inheritsLoose(E,u);E.prototype.clone=function(){return new r({colorRamps:Z.clone(this.colorRamps)})};return E}(p);e.__decorate([aa.property({type:[y],json:{write:!0}})],t.prototype,"colorRamps",void 0);e.__decorate([aa.property({type:["multipart"]})],t.prototype,"type",void 0);return t=r=e.__decorate([H.subclass("esri.rest.support.MultipartColorRamp")],t)})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass".split(" "),
function(k,e,Z,aa,t,H,y,p,r,u,E){aa=new aa.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let Q=0;t=function(R){function h(d){d=R.call(this,d)||this;d.id=`sym${Q++}`;d.type=null;d.color=new Z([0,0,0,1]);
return d}k._inheritsLoose(h,R);var K=h.prototype;K.readColor=function(d){return d&&null!=d[0]?[d[0],d[1],d[2],d[3]/255]:d};K.collectRequiredFields=function(){var d=k._asyncToGenerator(function*(l,N){});return function(l,N){return d.apply(this,arguments)}}();K.hash=function(){return JSON.stringify(this.toJSON())};K.clone=function(){};return h}(t.JSONSupport);e.__decorate([H.property({type:aa.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:aa.write}}})],t.prototype,"type",void 0);
e.__decorate([H.property({type:Z,json:{write:{allowNull:!0}}})],t.prototype,"color",void 0);e.__decorate([u.reader("color")],t.prototype,"readColor",null);return t=e.__decorate([E.subclass("esri.symbols.Symbol")],t)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(k){function e(E){const {classificationMethod:Q,breakCount:R,normalizationType:h,definedInterval:K}=E.definition,d=[];var l=E.values;if(0===l.length)return[];l=l.sort((x,w)=>x-w);var N=l[0],ca=l[l.length-
1];if("equal-interval"===Q)if(l.length>=R){l=(ca-N)/R;E=N;for(var z=1;z<R;z++){var L=Number((N+z*l).toFixed(6));d.push({minValue:E,maxValue:L,label:Z(E,L,h)});E=L}d.push({minValue:E,maxValue:ca,label:Z(E,ca,h)})}else l.forEach(x=>{d.push({minValue:x,maxValue:x,label:Z(x,x,h)})});else if("natural-breaks"===Q){l=aa(l);E=t(l.uniqueValues,E.valueFrequency||l.valueFrequency,R);for(z=1;z<R;z++)l.uniqueValues.length>z&&(L=Number(l.uniqueValues[E[z]].toFixed(6)),d.push({minValue:N,maxValue:L,label:Z(N,L,
h)}),N=L);d.push({minValue:N,maxValue:ca,label:Z(N,ca,h)})}else if("quantile"===Q)if(l.length>=R&&N!==ca){E=Math.ceil(l.length/R);z=0;for(L=1;L<R;L++){var F=E+z-1;F>l.length&&(F=l.length-1);0>F&&(F=0);d.push({minValue:N,maxValue:l[F],label:Z(N,l[F],h)});N=l[F];z+=E;E=Math.ceil((l.length-z)/(R-L))}d.push({minValue:N,maxValue:ca,label:Z(N,ca,h)})}else for(ca=-1,N=0;N<l.length;N++)E=l[N],E!==ca&&(ca=E,d.push({minValue:ca,maxValue:E,label:Z(ca,E,h)}),ca=E);else if("standard-deviation"===Q)if(E=p(l),z=
r(l,E),0===z)d.push({minValue:l[0],maxValue:l[0],label:Z(l[0],l[0],h)});else{l=y(N,ca,R,E,z)*z;z=0;for(L=R;1<=L;L--)F=Number((E-(L-.5)*l).toFixed(6)),d.push({minValue:N,maxValue:F,label:Z(N,F,h)}),N=F,z++;L=Number((E+.5*l).toFixed(6));d.push({minValue:N,maxValue:L,label:Z(N,L,h)});N=L;z++;for(F=1;F<=R;F++)L=z===2*R?ca:Number((E+(F+.5)*l).toFixed(6)),d.push({minValue:N,maxValue:L,label:Z(N,L,h)}),N=L,z++}else if("defined-interval"===Q){if(!K)return d;ca=l[0];l=l[l.length-1];N=Math.ceil((l-ca)/K);E=
ca;for(z=1;z<N;z++)L=Number((ca+z*K).toFixed(6)),d.push({minValue:E,maxValue:L,label:Z(E,L,h)}),E=L;d.push({minValue:E,maxValue:l,label:Z(E,l,h)})}return d}function Z(E,Q,R){let h=null;return h=E===Q?R&&"percent-of-total"===R?E+"%":E.toString():R&&"percent-of-total"===R?E+"% - "+Q+"%":E+" - "+Q}function aa(E){const Q=[],R=[];let h=Number.MIN_VALUE,K=1,d=-1;for(let l=0;l<E.length;l++){const N=E[l];N===h?(K++,R[d]=K):null!==N&&(Q.push(N),h=N,K=1,R.push(K),d++)}return{uniqueValues:Q,valueFrequency:R}}
function t(E,Q,R){var h=E.length;const K=[];R>h&&(R=h);for(var d=0;d<R;d++)K.push(Math.round(d*h/R-1));K.push(h-1);d=H(K,E,Q,R);{h=d.mean;d=d.sdcm;var l=R,N=0,ca=0;let L=0,F=0,x=!0;for(let w=0;2>w&&x;w++){0===w&&(x=!1);for(var z=0;z<l-1;z++)for(;K[z+1]+1!==K[z+2];)if(K[z+1]+=1,N=u(z,K,E,Q),L=N.sbMean,N=N.sbSdcm,ca=u(z+1,K,E,Q),F=ca.sbMean,ca=ca.sbSdcm,N+ca<d[z]+d[z+1])d[z]=N,d[z+1]=ca,h[z]=L,h[z+1]=F,x=!0;else{--K[z+1];break}for(z=l-1;0<z;z--)for(;K[z]!==K[z-1]+1;)if(--K[z],N=u(z-1,K,E,Q),L=N.sbMean,
N=N.sbSdcm,ca=u(z,K,E,Q),F=ca.sbMean,ca=ca.sbSdcm,N+ca<d[z-1]+d[z])d[z-1]=N,d[z]=ca,h[z-1]=L,h[z]=F,x=!0;else{K[z]+=1;break}}h=x}h&&(d=H(K,E,Q,R));return K}function H(E,Q,R,h){let K=[];var d=[],l=[];let N=0;const ca=[],z=[];for(var L=0;L<h;L++){var F=u(L,E,Q,R);ca.push(F.sbMean);z.push(F.sbSdcm);N+=z[L]}F=N;for(L=!0;L||N<F;){L=!1;K=[];for(d=0;d<h;d++)K.push(E[d]);for(l=0;l<h;l++)for(F=E[l]+1;F<=E[l+1];F++)if(d=Q[F],0<l&&F!==E[l+1]&&Math.abs(d-ca[l])>Math.abs(d-ca[l-1]))E[l]=F;else if(l<h-1&&E[l]!==
F-1&&Math.abs(d-ca[l])>Math.abs(d-ca[l+1])){E[l+1]=F-1;break}F=N;N=0;d=[];l=[];for(let x=0;x<h;x++){d.push(ca[x]);l.push(z[x]);const w=u(x,E,Q,R);ca[x]=w.sbMean;z[x]=w.sbSdcm;N+=z[x]}}if(N>F){for(Q=0;Q<h;Q++)E[Q]=K[Q],ca[Q]=d[Q],z[Q]=l[Q];N=F}return{mean:ca,sdcm:z}}function y(E,Q,R,h,K){E=Math.max(h-E,Q-h)/K/R;return 1<=E?1:.5<=E?.5:.25}function p(E){let Q=0;for(let R=0;R<E.length;R++)Q+=E[R];return Q/=E.length}function r(E,Q){let R=0;for(let h=0;h<E.length;h++){const K=E[h];R+=(K-Q)*(K-Q)}R/=E.length;
return Math.sqrt(R)}function u(E,Q,R,h){var K=0,d=0;for(var l=Q[E]+1;l<=Q[E+1];l++){const N=h[l];K+=R[l]*N;d+=N}0>=d&&console.log("Exception in Natural Breaks calculation");K/=d;d=0;for(l=Q[E]+1;l<=Q[E+1];l++)d+=h[l]*(R[l]-K)**2;return{sbMean:K,sbSdcm:d}}k.createGenerateRendererClassBreaks=function(E){const {normalizationTotal:Q}=E;return{classBreaks:e(E),normalizationTotal:Q}};k.createGenerateRendererUniqueValues=function(E){E=aa(E);const Q=[],R=E.uniqueValues.length;for(let h=0;h<R;h++){const K=
E.uniqueValues[h];Q.push({value:K,count:E.valueFrequency[h],label:K.toString()})}return{uniqueValues:Q}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(k){function e(t,H,y,p,r){if(null!=p&&null!=r)return u=>{const E=t.getAttribute(u,H);u=t.getAttribute(u,y);return(null==E||E<=r)&&(null==u||u>=p)};if(null!=p)return u=>{u=t.getAttribute(u,y);return null==u||u>=p};if(null!=r)return u=>{u=t.getAttribute(u,H);return null==
u||u<=r}}function Z(t,H,y,p){if(null!=y&&null!=p&&y===p)return r=>t.getAttribute(r,H)===y;if(null!=y&&null!=p)return r=>{r=t.getAttribute(r,H);return r>=y&&r<=p};if(null!=y)return r=>t.getAttribute(r,H)>=y;if(null!=p)return r=>t.getAttribute(r,H)<=p}function aa(){return()=>!1}k.getTimeExtent=function(t,H){if(!t)return null;const y=H.featureAdapter,{startTimeField:p,endTimeField:r}=t;let u=Number.POSITIVE_INFINITY,E=Number.NEGATIVE_INFINITY;if(p&&r)H.forEach(Q=>{const R=y.getAttribute(Q,p);Q=y.getAttribute(Q,
r);null==R||isNaN(R)||(u=Math.min(u,R));null==Q||isNaN(Q)||(E=Math.max(E,Q))});else{const Q=p||r;H.forEach(R=>{R=y.getAttribute(R,Q);null==R||isNaN(R)||(u=Math.min(u,R),E=Math.max(E,R))})}return{start:u,end:E}};k.getTimeOperator=function(t,H,y){if(!H||!t)return null;const {startTimeField:p,endTimeField:r}=t;if(!p&&!r)return null;const {start:u,end:E}=H;return null===u&&null===E?null:void 0===u&&void 0===E?aa():p&&r?e(y,p,r,u,E):Z(y,p||r,u,E)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(k,e,Z,aa,t,H,y,p,r,u,E,Q,R,h){function K(D,q,a,g=D.hasZ,M=D.hasM){if(t.isNone(q))return null;const U=D.hasZ&&g,ha=D.hasM&&M;return a?(D=Q.quantizeOptimizedGeometry(C,q,D.hasZ,D.hasM,"esriGeometryPoint",a,g,M),Q.convertToPoint(D,U,ha)):Q.convertToPoint(q,U,ha)}function d(){d=Z._asyncToGenerator(function*(D,q,a){const {outFields:g,orderByFields:M,groupByFieldsForStatistics:U,outStatistics:ha}=D;if(g)for(var oa=0;oa<g.length;oa++)g[oa]=g[oa].trim();if(M)for(oa=0;oa<M.length;oa++)M[oa]=M[oa].trim();
if(U)for(oa=0;oa<U.length;oa++)U[oa]=U[oa].trim();if(ha)for(oa=0;oa<ha.length;oa++)ha[oa].onStatisticField&&(ha[oa].onStatisticField=ha[oa].onStatisticField.trim());D.geometry&&!D.outSR&&(D.outSR=D.geometry.spatialReference);return N(D,q,a)});return d.apply(this,arguments)}function l(){l=Z._asyncToGenerator(function*(D,q,a){return N(D,q,a)});return l.apply(this,arguments)}function N(D,q,a){return ca.apply(this,arguments)}function ca(){ca=Z._asyncToGenerator(function*(D,q,a){if(!D)return null;var {where:g}=
D;D.where=g=g&&g.trim();if(!g||/^1 *= *1$/.test(g)||q&&q===g)D.where=null;if(!D.geometry)return D;q=yield z(D);D.distance=0;D.units=null;"esriSpatialRelEnvelopeIntersects"===D.spatialRel&&({spatialReference:g}=D.geometry,q=y.getGeometryExtent(q),q.spatialReference=g);D.geometry=q;yield h.checkProjectionSupport(q.spatialReference,a);q=(yield r.normalizeCentralMeridian(p.fromJSON(q)))[0];if(t.isNone(q))throw I;q=q.toJSON();q=yield h.project(q,q.spatialReference,a);if(!q)throw I;q.spatialReference=a;
D.geometry=q;return D});return ca.apply(this,arguments)}function z(D){return L.apply(this,arguments)}function L(){L=Z._asyncToGenerator(function*(D){const {geometry:q,distance:a,units:g}=D;if(null==a||"vertexAttributes"in q)return q;var M=q.spatialReference;D=g?w.fromJSON(g):H.getUnitString(M);M=M&&(u.isGeographic(M)||u.isWebMercator(M))?q:yield h.checkProjectionSupport(M,u.WGS84).then(()=>h.project(q,u.WGS84));return(yield F())(M.spatialReference,M,a,D)});return L.apply(this,arguments)}function F(){return x.apply(this,
arguments)}function x(){x=Z._asyncToGenerator(function*(){return(yield new Promise((D,q)=>k(["../../../geometry/geometryEngineJSON"],D,q))).geodesicBuffer});return x.apply(this,arguments)}const w=new aa.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),I=Object.freeze({}),X=new R,A=new R,C=new R,O={esriGeometryPoint:Q.convertToPoint,esriGeometryPolyline:Q.convertToPolyline,
esriGeometryPolygon:Q.convertToPolygon,esriGeometryMultipoint:Q.convertToMultipoint},W=(D,q)=>"_geVersion"!==D?q:void 0;e.QUERY_ENGINE_EMPTY_RESULT=I;e.cleanFromGeometryEngine=function(D){return D&&"_geVersion"in D?JSON.parse(JSON.stringify(D,W)):D};e.getCentroid=function(D,q,a){if("esriGeometryPolygon"!==D.geometryType||!q||!q.centroid&&!q.geometry)return null;q.centroid||(q.centroid=E.getCentroidOptimizedGeometry(new R,q.geometry,D.hasZ,D.hasM));return K(D,q.centroid,a)};e.getGeometry=function(D,
q,a,g,M,U,ha=q,oa=a){const ma=q&&ha,la=a&&oa;g=t.isSome(g)?"coords"in g?g:g.geometry:null;if(t.isNone(g))return null;if(M)return q=Q.generalizeOptimizedGeometry(A,g,q,a,D,M,ha,oa),U&&(q=Q.quantizeOptimizedGeometry(C,q,ma,la,D,U)),O[D](q,ma,la);if(U)return U=Q.quantizeOptimizedGeometry(C,g,q,a,D,U,ha,oa),O[D](U,ma,la);Q.removeZMValues(X,g,q,a,ha,oa);return O[D](X,ma,la)};e.normalizeFilter=function(D,q,a){return l.apply(this,arguments)};e.normalizeQuery=function(D,q,a){return d.apply(this,arguments)};
e.normalizeQueryLike=N;e.transformCentroid=K;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(k,e,Z,aa,t,H,y,p){function r(J,P,da){if(J)for(const qa of J)(J=(J=H.getDeepValue(qa,P))&&"function"!==typeof J&&da.get(J))&&H.setDeepValue(qa,J.name,P)}function u(J,P){if(!J||!P)return[];
n.clear();E(n,J,P);return Array.from(n).sort()}function E(J,P,da){var qa;if(da)if(null!=P&&null!=(qa=P.fields)&&qa.length)if(da.includes("*"))for(const {name:ra}of P.fields)J.add(ra);else for(const ra of da)Q(J,P,ra);else if(da.includes("*"))J.clear(),J.add("*");else for(const ra of da)J.add(ra)}function Q(J,P,da){"string"===typeof da&&(P?(P=P.get(da))&&J.add(P.name):J.add(da))}function R(J,P,da){return h.apply(this,arguments)}function h(){h=Z._asyncToGenerator(function*(J,P,da){var qa;if(da){var {arcadeUtils:ra}=
yield p.loadArcade();da=ra.extractFieldNames(da,null==P?void 0:null==(qa=P.fields)?void 0:qa.map(wa=>wa.name));for(const wa of da)Q(J,P,wa)}});return h.apply(this,arguments)}function K(J,P,da){return d.apply(this,arguments)}function d(){d=Z._asyncToGenerator(function*(J,P,da){if(da&&"1\x3d1"!==da){da=(yield new Promise((qa,ra)=>k(["../../core/sql/WhereClause"],qa,ra))).WhereClause.create(da,P);if(!da.isStandardized)throw new aa("fieldUtils:collectFilterFields","Where clause is not standardized");
E(J,P,da.fieldNames)}});return d.apply(this,arguments)}function l(J,P){for(const da of J)if(da&&da.valueType&&da.valueType===P)return da.name;return null}function N(){N=Z._asyncToGenerator(function*(J){if(!J)return[];const P=new Set;yield ca(P,J);return Array.from(P).sort()});return N.apply(this,arguments)}function ca(J,P){return z.apply(this,arguments)}function z(){z=Z._asyncToGenerator(function*(J,P){if(P){var da=H.getDeepValue("elevationInfo.featureExpressionInfo",P);if(da)return da.collectRequiredFields(J,
P.fieldsIndex)}});return z.apply(this,arguments)}function L(J,P,da){return F.apply(this,arguments)}function F(){F=Z._asyncToGenerator(function*(J,P,da){da.outStatistic.onStatisticValueExpression?R(J,P,da.outStatistic.onStatisticValueExpression):J.add(da.outStatistic.onStatisticField)});return F.apply(this,arguments)}function x(){x=Z._asyncToGenerator(function*(J,P,da){var qa,ra;if(P&&da&&"cluster"===da.type){var wa=[];null!=(qa=da.popupTemplate)&&qa.expressionInfos&&wa.push(...da.popupTemplate.expressionInfos.map(ya=>
R(J,P.fieldsIndex,ya.expression)));if(Array.isArray(null==(ra=da.popupTemplate)?void 0:ra.content)){qa=da.popupTemplate.content;for(const ya of qa)"expression"===ya.type&&ya.expressionInfo&&wa.push(R(J,P.fieldsIndex,ya.expressionInfo.expression))}da.fields&&wa.push(...da.fields.map(ya=>L(J,P.fieldsIndex,ya)));yield Promise.all(wa)}});return x.apply(this,arguments)}function w(){w=Z._asyncToGenerator(function*(J,P,da){P&&(P.timeInfo&&t.isSome(da)&&da.timeExtent&&E(J,P.fieldsIndex,[P.timeInfo.startField,
P.timeInfo.endField]),P.floorInfo&&E(J,P.fieldsIndex,[P.floorInfo.floorField]),t.isSome(da)&&t.isSome(da.where)&&(yield K(J,P.fieldsIndex,da.where)))});return w.apply(this,arguments)}function I(){I=Z._asyncToGenerator(function*(J,P,da){P&&da&&(yield Promise.all(da.map(qa=>X(J,P,qa))))});return I.apply(this,arguments)}function X(J,P,da){return A.apply(this,arguments)}function A(){A=Z._asyncToGenerator(function*(J,P,da){P&&da&&(da.valueExpression?yield R(J,P.fieldsIndex,da.valueExpression):da.field&&
Q(J,P.fieldsIndex,da.field))});return A.apply(this,arguments)}function C(){C=Z._asyncToGenerator(function*(J){if(!J)return[];const P="timeInfo"in J&&J.timeInfo;return P?u(J.fieldsIndex,[J.trackIdField,P.startField,P.endField]):[]});return C.apply(this,arguments)}function O(){O=Z._asyncToGenerator(function*(J){if(!J)return[];const P=new Set;yield W(P,J);return Array.from(P).sort()});return O.apply(this,arguments)}function W(J,P){return D.apply(this,arguments)}function D(){D=Z._asyncToGenerator(function*(J,
P){const {labelingInfo:da,fieldsIndex:qa}=P;da&&da.length&&(yield Promise.all(da.map(ra=>q(J,qa,ra))))});return D.apply(this,arguments)}function q(J,P,da){return a.apply(this,arguments)}function a(){a=Z._asyncToGenerator(function*(J,P,da){if(da){var qa=da.getLabelExpression();da=da.where;"arcade"===qa.type?yield R(J,P,qa.expression):(qa=qa.expression.match(/{[^}]*}/g))&&qa.forEach(ra=>{Q(J,P,ra.slice(1,-1))});yield K(J,P,da)}});return a.apply(this,arguments)}function g(J){return"number"===typeof J&&
!isNaN(J)&&isFinite(J)}function M(J){return null===J||g(J)}function U(J){return null===J||fa(J)}function ha(J){return null!=J&&"string"===typeof J}function oa(J){return null===J||ha(J)}function ma(){return!0}function la(J,P){let da;switch(J.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":da=J.nullable?U:fa;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":da=
J.nullable?M:g;break;case "string":case "esriFieldTypeString":da=J.nullable?oa:ha;break;default:da=ma}return 1===arguments.length?da:da(P)}function pa(J){return null!=J&&G.has(J.type)}function va(J,P){return J.nullable&&null===P?null:pa(J)&&!Ba(J.type,Number(P))?e.NumericRangeValidationError.OUT_OF_RANGE:la(J,P)?J.domain?y.validateDomainValue(J.domain,P):null:e.TypeValidationError.INVALID_TYPE}function Ba(J,P){return(J="string"===typeof J?Ka(J):J)?J.isInteger?fa(P)&&P>=J.min&&P<=J.max:P>=J.min&&P<=
J.max:!1}function Ka(J){switch(J){case "esriFieldTypeSmallInteger":case "small-integer":return S;case "esriFieldTypeInteger":case "integer":return T;case "esriFieldTypeSingle":case "single":return ia;case "esriFieldTypeDouble":case "double":return ea}}function Ta(J,P,da){if(!P||!P.attributes||!J){if(t.isSome(da))for(var qa of J)da.add(qa);return!0}P=P.attributes;qa=!1;for(const ra of J)if(!(ra in P))if(qa=!0,t.isSome(da))da.add(ra);else break;return qa}function Oa(){Oa=Z._asyncToGenerator(function*(J,
P){const da=new Set;for(const qa of P)yield R(da,J.fieldsIndex,qa);return Array.from(da).sort()});return Oa.apply(this,arguments)}const Sa="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),c=["field","normalizationField"],n=new Set,fa=(()=>"isInteger"in Number?Number.isInteger:J=>"number"===typeof J&&isFinite(J)&&Math.floor(J)===J)(),m=["integer","small-integer",
"single","double"],G=new Set([...m,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);e.NumericRangeValidationError=void 0;(e.NumericRangeValidationError||(e.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";e.TypeValidationError=void 0;(e.TypeValidationError||(e.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const S={min:-32768,max:32767,isInteger:!0},T={min:-2147483648,max:2147483647,
isInteger:!0},ia={min:-3.4E38,max:1.2E38,isInteger:!1},ea={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};e.collectArcadeFieldNames=R;e.collectElevationFields=ca;e.collectFeatureReductionFields=function(J,P,da){return x.apply(this,arguments)};e.collectField=Q;e.collectFields=E;e.collectFilterFields=function(J,P,da){return w.apply(this,arguments)};e.collectLabelingFields=W;e.collectOrderByInfos=function(J,P,da){return I.apply(this,arguments)};e.doubleRange=ea;e.featureHasFields=function(J,
P){return!Ta(J,P,null)};e.fixFields=u;e.fixRendererFields=function(J,P){if(null!=J&&null!=P)for(const da of Array.isArray(J)?J:[J])if(r(Sa,da,P),"visualVariables"in da&&da.visualVariables)for(const qa of da.visualVariables)r(c,qa,P)};e.fixTimeInfoFields=function(J,P){if(null!=J&&null!=P&&P.fields.length)if("startField"in J){var da=P.get(J.startField);P=P.get(J.endField);J.startField=da&&da.name||null;J.endField=P&&P.name||null}else da=P.get(J.startTimeField),P=P.get(J.endTimeField),J.startTimeField=
da&&da.name||null,J.endTimeField=P&&P.name||null};e.getDisplayFieldName=function({displayField:J,fields:P}){if(J)return J;if(!P||!P.length)return null;if(!(J=l(P,"name-or-title")||l(P,"unique-identifier")||l(P,"type-or-category")))a:{for(const da of P)if(da&&da.name&&(P=da.name.toLowerCase(),-1<P.indexOf("name")||-1<P.indexOf("title"))){J=da.name;break a}J=null}return J};e.getElevationFields=function(J){return N.apply(this,arguments)};e.getExpressionFields=function(J,P){return Oa.apply(this,arguments)};
e.getFeatureEditFields=function(J){if(!J)return[];const P="editFieldsInfo"in J&&J.editFieldsInfo;return P?u(J.fieldsIndex,[P&&P.creatorField,P&&P.creationDateField,P&&P.editorField,P&&P.editDateField]):[]};e.getFeatureGeometryFields=function(J){if(!J)return[];const P=J.geometryFieldsInfo;return P?u(J.fieldsIndex,[P.shapeAreaField,P.shapeLengthField]):[]};e.getFieldDefaultValue=function(J){const P=J.defaultValue;if(void 0!==P&&la(J,P))return P;if(J.nullable)return null};e.getFieldRange=function(J){const P=
y.getDomainRange(J.domain);if(P)return P;if(pa(J))return Ka(J.type)};e.getLabelingFields=function(J){return O.apply(this,arguments)};e.getNumericTypeForValue=function(J){if(!g(J))return null;if(fa(J)){if(J>=S.min&&J<=S.max)return"esriFieldTypeSmallInteger";if(J>=T.min&&J<=T.max)return"esriFieldTypeInteger"}return J>=ia.min&&J<=ia.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};e.getTimeFields=function(J){return C.apply(this,arguments)};e.integerRange=T;e.isDateField=function(J){return null!=J&&("date"===
J.type||"esriFieldTypeDate"===J.type)};e.isNumberInRange=Ba;e.isNumericField=pa;e.isStringField=function(J){return null!=J&&("string"===J.type||"esriFieldTypeString"===J.type)};e.isValidFieldValue=function(J,P){return null===va(J,P)};e.isValueMatchingFieldType=la;e.numericTypes=m;e.packFields=function(J,P,da=1){if(!P||!J)return[];if(P.includes("*"))return["*"];P=u(J,P);return P.length/J.fields.length>=da?["*"]:P};e.populateMissingFields=Ta;e.rendererFields=Sa;e.sanitizeNullFieldValue=function(J){return null==
J||"number"===typeof J&&isNaN(J)?null:J};e.singleRange=ia;e.smallIntegerRange=S;e.unpackFieldNames=function(J,P){return t.isNone(P)||t.isNone(J)?[]:P.includes("*")?J.fields.map(da=>da.name):P};e.validateFieldValue=va;e.validationErrorToString=function(J,P,da){switch(J){case y.DomainValidationError.INVALID_CODED_VALUE:return`Value ${da} is not in the coded domain - field: ${P.name}, domain: ${JSON.stringify(P.domain)}`;case y.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${da} is out of the range of valid values - field: ${P.name}, domain: ${JSON.stringify(P.domain)}`;
case e.TypeValidationError.INVALID_TYPE:return`Value ${da} is not a valid value for the field type - field: ${P.name}, type: ${P.type}, nullable: ${P.nullable}`;case e.NumericRangeValidationError.OUT_OF_RANGE:{const {min:qa,max:ra}=Ka(P.type);return`Value ${da} is out of range for the number type - field: ${P.name}, type: ${P.type}, value range is ${qa} to ${ra}`}}};e.visualVariableFields=c;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/support/domainUtils":function(){define(["exports"],
function(k){function e(Z,aa){switch(Z.type){case "range":{const t="range"in Z?Z.range[1]:Z.maxValue;if(+aa<("range"in Z?Z.range[0]:Z.minValue)||+aa>t)return k.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==Z.codedValues||Z.codedValues.every(t=>null==t||t.code!==aa))return k.DomainValidationError.INVALID_CODED_VALUE}return null}k.DomainValidationError=void 0;(function(Z){Z.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";Z.INVALID_CODED_VALUE=
"domain-validation-error::invalid-coded-value"})(k.DomainValidationError||(k.DomainValidationError={}));k.getDomainRange=function(Z){if(Z&&"range"===Z.type)return{min:"range"in Z?Z.range[0]:Z.minValue,max:"range"in Z?Z.range[1]:Z.maxValue}};k.isValidDomainValue=function(Z,aa){return null===e(Z,aa)};k.validateDomainValue=e;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/maybe ../geometry/SpatialReference".split(" "),
function(k,e,Z,aa,t,H){function y(){p||(p=Z._asyncToGenerator(function*(){const u=yield new Promise((E,Q)=>k(["./arcadeUtils"],E,Q));return{arcade:u.arcade,arcadeUtils:u,Dictionary:u.Dictionary,Feature:u.arcadeFeature}})());return p}let p;aa=(u,E,Q)=>r.create(u,E,Q,null,["$feature","$view"]);let r=function(){function u(Q,R,h,K,d,l,N,ca){this.script=Q;this.evaluate=d;this.fields=Array.isArray(N)?N:N.fields;this._syntaxTree=K;this._arcade=R;this._arcadeDictionary=h;this._arcadeFeature=l;this._spatialReference=
ca;this._referencesGeometry=R.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}u.create=function(){var Q=Z._asyncToGenerator(function*(R,h,K,d,l,N){const {arcade:ca,Feature:z,Dictionary:L}=yield y(),F=H.fromJSON(h);h=ca.parseScript(R,N);l=l.reduce((A,C)=>({...A,[C]:null}),{});let x=null;t.isSome(d)&&(x=new L(d),x.immutable=!0,l.$config=null);d=ca.scriptUsesGeometryEngine(h)&&ca.enableGeometrySupport();N=ca.scriptUsesFeatureSet(h)&&
ca.enableFeatureSetSupport();const w=ca.scriptIsAsync(h)&&ca.enableAsyncSupport();l={vars:l,spatialReference:F,useAsync:!!w};const I=new L;I.immutable=!1;I.setField("scale",0);const X=ca.compileScript(h,l);yield Promise.all([d,N,w]);return new u(R,ca,L,h,A=>{"$view"in A&&A.$view&&(I.setField("scale",A.$view.scale),A.$view=I);x&&(A.$config=x);return X({vars:A,spatialReference:F})},new z,K,F)});return function(R,h,K,d,l,N){return Q.apply(this,arguments)}}();var E=u.prototype;E.repurposeFeature=function(Q){Q.geometry&&
!Q.geometry.spatialReference&&(Q.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(Q.geometry,Q.attributes,{fields:this.fields});return this._arcadeFeature};E.createDictionary=function(){return new this._arcadeDictionary};E.referencesMember=function(Q){return this._arcade.referencesMember(this._syntaxTree,Q)};E.referencesFunction=function(Q){return this._arcade.referencesFunction(this._syntaxTree,Q)};E.referencesGeometry=function(){return this._referencesGeometry};
E.referencesScale=function(){return this._referencesScale};E.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};return u}();e.ArcadeExpression=r;e.createDictionaryExpression=(u,E,Q,R)=>r.create(u,E,Q,R,["$feature","$view"]);e.createLabelExpression=(u,E,Q)=>r.create(u,E,Q,null,["$feature"]);e.createRendererExpression=aa;e.createVVExpression=aa;e.loadArcade=y;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(k,e,Z,aa,t,H,y,p,r,u,E,Q,R){function h(){return new Promise((N,ca)=>k(["../../../geometry/geometryEngineJSON"],N,ca))}function K(){K=Z._asyncToGenerator(function*(N,ca,z){const {spatialRel:L,geometry:F}=N;if(F){if(!0!==l.spatialRelationship[L])throw new aa("feature-store:unsupported-query","Unsupported query spatial relationship",{query:N});if(p.isValid(F.spatialReference)&&p.isValid(z)){if(!0!==l.queryGeometry[y.getJsonType(F)])throw new aa("feature-store:unsupported-query","Unsupported query geometry type",
{query:N});if(!0!==l.layerGeometry[ca])throw new aa("feature-store:unsupported-query","Unsupported layer geometry type",{query:N});if(N.outSR)return Q.checkProjectionSupport(N.geometry&&N.geometry.spatialReference,N.outSR)}}});return K.apply(this,arguments)}const d={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",
esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},l={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},
layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};e.canQueryWithRBush=function(N){if(y.isExtent(N))return!0;if(y.isPolygon(N)){for(const ca of N.rings)if(5!==ca.length||ca[0][0]!==ca[1][0]||ca[0][0]!==ca[4][0]||ca[2][0]!==ca[3][0]||ca[0][1]!==ca[3][1]||ca[0][1]!==ca[4][1]||ca[1][1]!==ca[2][1])return!1;return!0}return!1};e.checkSpatialQuerySupport=function(N,ca,z){return K.apply(this,arguments)};e.getSpatialQueryOperator=
function(N,ca,z,L,F){if(y.isPolygon(ca)&&"esriGeometryPoint"===z&&("esriSpatialRelIntersects"===N||"esriSpatialRelContains"===N)){const x=u.convertFromPolygon(new E,ca,!1,!1);return Promise.resolve(w=>r.polygonContainsPoint(x,!1,!1,w))}if(y.isPolygon(ca)&&"esriGeometryMultipoint"===z){const x=u.convertFromPolygon(new E,ca,!1,!1);if("esriSpatialRelContains"===N)return Promise.resolve(w=>r.polygonContainsMultipoint(x,!1,!1,w,L,F))}if(y.isExtent(ca)&&"esriGeometryPoint"===z&&("esriSpatialRelIntersects"===
N||"esriSpatialRelContains"===N))return Promise.resolve(x=>t.extentContainsPoint(ca,R.getGeometry(z,L,F,x)));if(y.isExtent(ca)&&"esriGeometryMultipoint"===z&&"esriSpatialRelContains"===N)return Promise.resolve(x=>t.extentContainsMultipoint(ca,R.getGeometry(z,L,F,x)));if(y.isExtent(ca)&&"esriSpatialRelIntersects"===N){const x=H.getExtentIntersector(z);return Promise.resolve(w=>x(ca,R.getGeometry(z,L,F,w)))}return h().then(x=>{const w=x[d[N]].bind(null,ca.spatialReference,ca);return I=>w(R.getGeometry(z,
L,F,I))})};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(k,e){k.extentIntersectsExtent=e.extentIntersectsExtent;k.extentIntersectsMultipoint=e.extentIntersectsMultipoint;k.extentIntersectsPoint=e.extentIntersectsPoint;k.extentIntersectsPolygon=e.extentIntersectsPolygon;k.extentIntersectsPolyline=e.extentIntersectsPolyline;k.getFeatureExtentIntersector=e.getFeatureExtentIntersector;k.isSelfIntersecting=
e.isSelfIntersecting;k.segmentIntersects=e.segmentIntersects;k.getExtentIntersector=function(Z){return"mesh"===Z?e.extentIntersectsExtent:e.getFeatureExtentIntersector(Z)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],function(k){function e(Z,aa,t,H,y){if(!Z)return!1;aa=aa?t?4:3:t?3:2;const {coords:p,lengths:r}=Z;t=!1;Z=0;for(const E of r){var u=Z;for(let Q=Z,R=Z+E*aa;Q<R;Q+=aa){u=Q+aa;u===R&&(u=Z);const h=p[Q],K=p[Q+1],d=p[u];u=
p[u+1];(K<y&&u>=y||u<y&&K>=y)&&h+(y-K)/(u-K)*(d-h)<H&&(t=!t)}Z+=E*aa}return t}k.polygonContainsCoords=e;k.polygonContainsMultipoint=function(Z,aa,t,H,y,p){y=y?p?4:3:p?3:2;const {coords:r,lengths:u}=H;if(!u)return!1;for(let E=0,Q=0;E<u.length;E++,Q+=y)if(!e(Z,aa,t,r[Q],r[Q+1]))return!1;return!0};k.polygonContainsPoint=function(Z,aa,t,H){return e(Z,aa,t,H.coords[0],H.coords[1])};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers",
"./fieldUtils"],function(k,e){function Z(t){return"oid"===t.type||"esriFieldTypeOID"===t.type}function aa(t){return"global-id"===t.type||"esriFieldTypeGlobalID"===t.type}return function(){function t(y){this.fields=y;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(y){var p=[];for(const r of y)if(y=r&&r.name){const u=y.toLowerCase().trim();this._fieldsMap.set(y,r);this._fieldsMap.set(u,r);p.push(u);
"date"===r.type||"esriFieldTypeDate"===r.type?(this.dateFields.push(r),this._dateFieldsSet.add(r)):e.isNumericField(r)&&(this._numericFieldsSet.add(r),this.numericFields.push(r));Z(r)||aa(r)||(r.editable=null==r.editable?!0:!!r.editable,r.nullable=null==r.nullable?!0:!!r.nullable)}p.sort();this.uid=p.join(",")}}var H=t.prototype;H.destroy=function(){this._fieldsMap.clear()};H.has=function(y){return null!=this.get(y)};H.get=function(y){return null!=y?this._fieldsMap.get(y)||this._fieldsMap.get(y.toLowerCase().trim()):
void 0};H.isDateField=function(y){return this._dateFieldsSet.has(this.get(y))};H.isNumericField=function(y){return this._numericFieldsSet.has(this.get(y))};H.normalizeFieldName=function(y){if(y=this.get(y))return y.name};k._createClass(t,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const y of this.fields)Z(y)||aa(y)||y.nullable||void 0!==e.getFieldDefaultValue(y)||this._requiredFields.push(y)}return this._requiredFields}}]);return t}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/PromiseQueue ./debugFlags".split(" "),
function(k,e,Z,aa,t,H,y,p,r,u,E,Q,R,h,K,d,l,N,ca){function z(q){return F.has(q)?F.get(q):"number"===typeof q?q:1}const L=H.getLogger("esri.views.support.Scheduler");k.TaskPriority=void 0;(function(q){q.RESOURCE_CONTROLLER="schedule";q.SLIDE="slide";q.STREAM_DATA_LOADER="stream loader";q.ELEVATION_QUERY="elevation query";q.TERRAIN_SURFACE="terrain";q.SURFACE_GEOMETRY_UPDATES="surface geometry updates";q.GRAPHICS_CORE="Graphics3D";q.I3S_CONTROLLER="I3S";q.POINT_CLOUD_LAYER="point cloud";q.FEATURE_TILE_FETCHER=
"feature fetcher";q.OVERLAY="overlay";q.STAGE="stage";q.GRAPHICS_DECONFLICTOR="graphics deconflictor";q.FILTER_VISIBILITY="Graphics3D filter visibility";q.SCALE_VISIBILITY="Graphics3D scale visibility";q.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";q.POINT_OF_INTEREST_FREQUENT="POI frequent";q.POINT_OF_INTEREST_INFREQUENT="POI infrequent";q.LABELER="labeler";q.FEATURE_QUERY_ENGINE="feature query";q.FEATURE_TILE_TREE="feature tile tree";q.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";q.ELEVATION_ALIGNMENT=
"elevation alignment";q.TEXT_TEXTURE_ATLAS="text texture atlas";q.TEXTURE_UNLOAD="texture unload";q.LINE_OF_SIGHT_TOOL="line of sight tool";q.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";q.ELEVATION_PROFILE="elevation profile";q.SNAPPING="snapping";q.SHADOW_ACCUMULATOR="shadow accumulator";q.CLOUDS_GENERATOR="cloud generator";q[q.TEST_PRIO=1]="TEST_PRIO"})(k.TaskPriority||(k.TaskPriority={}));const F=new Map([[k.TaskPriority.RESOURCE_CONTROLLER,0],[k.TaskPriority.SLIDE,0],[k.TaskPriority.STREAM_DATA_LOADER,
0],[k.TaskPriority.ELEVATION_QUERY,0],[k.TaskPriority.TERRAIN_SURFACE,1],[k.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[k.TaskPriority.GRAPHICS_CORE,2],[k.TaskPriority.I3S_CONTROLLER,2],[k.TaskPriority.POINT_CLOUD_LAYER,2],[k.TaskPriority.FEATURE_TILE_FETCHER,2],[k.TaskPriority.OVERLAY,4],[k.TaskPriority.STAGE,4],[k.TaskPriority.GRAPHICS_DECONFLICTOR,4],[k.TaskPriority.FILTER_VISIBILITY,4],[k.TaskPriority.SCALE_VISIBILITY,4],[k.TaskPriority.FRUSTUM_VISIBILITY,4],[k.TaskPriority.POINT_OF_INTEREST_FREQUENT,
6],[k.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[k.TaskPriority.LABELER,8],[k.TaskPriority.FEATURE_QUERY_ENGINE,8],[k.TaskPriority.FEATURE_TILE_TREE,16],[k.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[k.TaskPriority.ELEVATION_ALIGNMENT,12],[k.TaskPriority.TEXT_TEXTURE_ATLAS,12],[k.TaskPriority.CLOUDS_GENERATOR,12],[k.TaskPriority.TEXTURE_UNLOAD,12],[k.TaskPriority.LINE_OF_SIGHT_TOOL,16],[k.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[k.TaskPriority.SNAPPING,0],[k.TaskPriority.SHADOW_ACCUMULATOR,
30]]);k.State=void 0;(function(q){q[q.ANIMATING=0]="ANIMATING";q[q.INTERACTING=1]="INTERACTING";q[q.IDLE=2]="IDLE"})(k.State||(k.State={}));const x=Q.Milliseconds(6.5),w=Q.Milliseconds(1),I=Q.Milliseconds(30),X=Q.Milliseconds(1E3/30),A=Q.Milliseconds(100);var C;(function(q){let a=function(U){function ha(ma){var la=U.call(this,ma)||this;la.updating=!0;la._microTaskQueued=!1;la.performanceInfo={total:new p("total"),tasks:new Map};la._frameTaskTimes=new Map;la._budget=null;la._state=k.State.INTERACTING;
la._tasks=new r;la._runQueue=new r;la._load=0;la._idleStateCallbacks=new r;la._idleUpdatesStartFired=!1;la._maxReschedule=D;la._forceTask=!1;la._debug=!1;la._debugHandle=E.watch(()=>ca.SCHEDULER_LOG_SLOW_TASKS,Ba=>la._debug=Ba,E.initial);la._budget=new M(ma.nowFunc);for(const Ba of Object.keys(k.TaskPriority))la.performanceInfo.tasks.set(k.TaskPriority[Ba],new p(k.TaskPriority[Ba]));let pa;const va=e._assertThisInitialized(la);la._test={get state(){return y.unwrapOr(pa,va._state)},set state(Ba){pa=
Ba},FRAME_SAFETY_BUDGET:x,INTERACTING_BUDGET:X,IDLE_BUDGET:A,get budget(){return va._budget.budget},usedBudget:0,setBudget:Ba=>va._budget=Ba,updateTask:Ba=>la._updateTask(Ba),getState:Ba=>la._getState(Ba),getRuntime:Ba=>la._getRuntime(Ba),frameTaskTimes:la._frameTaskTimes,resetRuntimes:()=>la._resetRuntimes(),getRunning:()=>la._getRunning()};return la}e._inheritsLoose(ha,U);var oa=ha.prototype;oa.destroy=function(){this._tasks.toArray().forEach(ma=>ma.remove());this._tasks.clear();y.removeMaybe(this._debugHandle);
this.updating=this._microTaskQueued=!1};oa.activate=function(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=D,this._schedule(),this.frame()))}))};oa.registerTask=function(ma,la){const pa=z(ma);la=new g(this,ma,la,pa);this._tasks.push(la);this.performanceInfo.tasks.has(ma)||this.performanceInfo.tasks.set(ma,new p(ma));return la};oa.registerIdleStateCallbacks=function(ma,
la){const pa={idleBegin:ma,idleEnd:la};this._idleStateCallbacks.push(pa);this.state===k.State.IDLE&&this._idleUpdatesStartFired&&pa.idleBegin();const va=this;return{remove:()=>this._removeIdleStateCallbacks(pa),set idleBegin(Ba){va._idleUpdatesStartFired&&(pa.idleEnd(),va._state===k.State.IDLE&&Ba());pa.idleBegin=Ba},set idleEnd(Ba){pa.idleEnd=Ba}}};oa.updateBudget=function(ma){this._test.usedBudget=0;let la=x,pa=ma.frameDuration,va=w;switch(this.state){case k.State.IDLE:la=Q.Milliseconds(0);pa=Q.Milliseconds(Math.max(A,
ma.frameDuration));va=I;break;case k.State.INTERACTING:pa=Q.Milliseconds(Math.max(X,ma.frameDuration))}pa=Q.Milliseconds(pa-ma.elapsedFrameTime-la);if(this.state!==k.State.IDLE&&pa<w&&!this._forceTask)return this._forceTask=!0,!1;pa=Q.Milliseconds(Math.max(pa,va));this._budget.reset(pa,this.state);this._maxReschedule=D;this._updateLoad();return this._schedule()};oa.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case k.State.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=
!0,this._idleStateCallbacks.forAll(ma=>ma.idleBegin()));this._runIdle();break;case k.State.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};oa.stopFrame=function(){this._budget.reset(Q.Milliseconds(0),this._state);this._budget.madeProgress()};oa._removeIdleStateCallbacks=function(ma){this._idleUpdatesStartFired&&ma.idleEnd();this._idleStateCallbacks.removeUnordered(ma)};oa.removeTask=function(ma){this._tasks.removeUnordered(ma);this._runQueue.removeUnordered(ma)};
oa._updateTask=function(ma){this._tasks.forAll(la=>{la.name===ma&&la.setPriority(ma)})};oa._getState=function(ma){if(this._runQueue.some(pa=>pa.name===ma))return k.TaskState.SCHEDULED;let la=k.TaskState.IDLE;this._tasks.forAll(pa=>{pa.name===ma&&pa.needsUpdate&&(1>=pa.schedulePriority?la=k.TaskState.READY:la!==k.TaskState.READY&&(la=k.TaskState.WAITING))});return la};oa._getRuntime=function(ma){let la=0;this._tasks.forAll(pa=>{pa.name===ma&&(la+=pa.runtime)});return la};oa._resetRuntimes=function(){this._tasks.forAll(ma=>
ma.runtime=0)};oa._getRunning=function(){const ma=new Map;this._tasks.forAll(pa=>{pa.needsUpdate&&ma.set(pa.name,(ma.get(pa.name)||0)+1)});if(0===ma.size)return null;let la="";ma.forEach((pa,va)=>{la=1<pa?la+` ${pa}x ${va}`:la+` ${va}`});return la};oa._runIdle=function(){this._run()};oa._runInteracting=function(){this._run()};oa._runAnimating=function(){this._run()};oa._updateLoad=function(){const ma=this._tasks.reduce((la,pa)=>pa.needsUpdate?++la:la,0);this._load=.9*this._load+ma*(1-.9)};oa._schedule=
function(){if(0>=this._maxReschedule)return!1;this._runQueue.filterInPlace(ma=>{if(ma.needsUpdate)return!0;ma.schedulePriority=ma.basePriority;return!1});for(this._tasks.forAll(ma=>{0===ma.basePriority&&ma.needsUpdate&&!this._runQueue.some(la=>la===ma)&&this._runQueue.unshift(ma)});0===this._runQueue.length;){let ma=!1,la=0;this._tasks.forAll(pa=>{if(pa.needsUpdate&&0!==pa.schedulePriority&&0!==pa.basePriority)switch(ma=!0,la=Math.max(la,pa.basePriority),pa.schedulePriority){case 1:pa.schedulePriority=
0;this._runQueue.push(pa);break;default:--pa.schedulePriority}});if(!ma)return this.updating=!1;this._maxReschedule===D&&(this._maxReschedule=la);--this._maxReschedule}return this.updating=!0};oa._run=function(){const ma=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var la=this._budget.now();const pa=this._runQueue.pop();this._budget.resetProgress();try{pa.task.runTask(this._budget)}catch(va){L.error(`Exception in task "${pa.name}"`,va)}pa.schedulePriority=pa.basePriority;
la=this._budget.now()-la;pa.runtime+=la;this._frameTaskTimes.set(pa.priority,this._frameTaskTimes.get(pa.priority)+la);this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",pa.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this.updating=this._tasks.some(va=>va.needsUpdate);this._recordFrameTaskTimes(this._budget.now()-ma);return}}while(this._schedule());this.updating=this._tasks.some(pa=>pa.needsUpdate);this._recordFrameTaskTimes(this._budget.now()-
ma)};oa._startFrameTaskTimes=function(){for(const ma of Object.keys(k.TaskPriority))this._frameTaskTimes.set(k.TaskPriority[ma],0)};oa._recordFrameTaskTimes=function(ma){this._frameTaskTimes.forEach((la,pa)=>this.performanceInfo.tasks.get(pa).record(la));this.performanceInfo.total.record(ma)};e._createClass(ha,[{key:"now",get:function(){return this.nowFunc()}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return y.isNone(this._test.state)?this._state:this._test.state},
set:function(ma){this._state!==ma&&(this._state=ma,this.state!==k.State.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(la=>la.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return ha}(aa);Z.__decorate([R.property()],a.prototype,"updating",void 0);Z.__decorate([R.property()],a.prototype,"nowFunc",void 0);a=Z.__decorate([l.subclass("esri.views.support.Scheduler")],a);q.Scheduler=a;let g=function(U){function ha(ma,la,pa,va){var Ba=
U.call(this,{})||this;Ba._scheduler=ma;Ba.name=la;Ba._basePriority=va;Ba.runtime=0;Ba._queue=new N.PromiseQueue;Ba._handles=new t;Ba.schedulePriority=Ba._basePriority;Ba.task=y.isSome(pa)?pa:Ba._queue;Ba._handles.add(E.when(()=>Ba.task.running,()=>ma.activate()));return Ba}e._inheritsLoose(ha,U);var oa=ha.prototype;oa.normalizeCtorArgs=function(){return{}};oa.remove=function(){this.processQueue(O);this._scheduler.removeTask(this);this.schedule=W.schedule;this.reschedule=W.reschedule;this._handles.destroy()};
oa.setPriority=function(ma){this.name=ma;ma=z(ma);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=ma;this._basePriority=ma};oa.schedule=function(ma,la,pa){return this._queue.push(ma,la,pa)};oa.reschedule=function(ma,la,pa){return this._queue.unshift(ma,la,pa)};oa.processQueue=function(ma){this._queue.runTask(ma)};e._createClass(ha,[{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},{key:"priority",get:function(){return this.name},
set:function(ma){this.setPriority(ma)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return ha}(aa);Z.__decorate([R.property({constructOnly:!0})],g.prototype,"task",void 0);Z.__decorate([R.property({readOnly:!0})],g.prototype,"updating",null);g=Z.__decorate([l.subclass("esri.views.support.SchedulerTask")],g);let M=function(){function U(oa){this.now=oa;this._budget=this._begin=0;this._state=k.State.IDLE;this._didWork=!1;this._enabled=!0}var ha=U.prototype;ha.run=function(oa){if(this.done)return!1;
!0===oa()&&(this._didWork=!0);return!0};ha.madeProgress=function(){this._didWork=!0};ha.reset=function(oa,ma){this._begin=this.now();this._budget=oa;this._state=ma;this._didWork=!1};ha.resetProgress=function(){this._didWork=!1};e._createClass(U,[{key:"done",get:function(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(oa){this._enabled=
oa}},{key:"remaining",get:function(){return Math.max(this._budget-this.elapsed,0)}},{key:"elapsed",get:function(){return this.now()-this._begin}},{key:"hasProgressed",get:function(){return this._didWork}}]);return U}();q.Budget=M})(C||(C={}));k.TaskState=void 0;(function(q){q.SCHEDULED="s";q.READY="r";q.WAITING="w";q.IDLE="i"})(k.TaskState||(k.TaskState={}));const O=(()=>{const q=new C.Budget(()=>performance.now());q.enabled=!1;return q})(),W=new (function(){function q(){}var a=q.prototype;a.remove=
function(){};a.processQueue=function(){};a.schedule=function(g,M,U){try{if(u.isAborted(M)){const ha=u.createAbortError();return U?Promise.resolve(U(ha)):Promise.reject(ha)}return u.when(g(O))}catch(ha){return Promise.reject(ha)}};a.reschedule=function(g,M,U){return this.schedule(g,M,U)};return q}()),D=Number.MAX_SAFE_INTEGER;k.ImmediateTask=W;k.getTaskPriority=z;k.newScheduler=function(q){return new C.Scheduler({nowFunc:q})};k.noBudget=O;k.taskPriorities=F;Object.defineProperty(k,"__esModule",{value:!0})})},
"esri/core/Handles":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Collection ./maybe ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(k,e,Z,aa,t,H,y){Z=function(p){function r(E){E=p.call(this,E)||this;E._groups=new Map;return E}k._inheritsLoose(r,p);var u=r.prototype;u.destroy=function(){this.removeAll()};u.add=function(E,Q){if(!this._isHandle(E)&&!Array.isArray(E)&&!aa.isCollection(E))return this;const R=this._getOrCreateGroup(Q);
Array.isArray(E)||aa.isCollection(E)?E.forEach(h=>this._isHandle(h)&&R.push(h)):R.push(E);this.notifyChange("size");return this};u.forEach=function(E,Q){if("function"===typeof E)this._groups.forEach(R=>R.forEach(E));else{const R=this._getGroup(E);R&&Q&&R.forEach(Q)}};u.has=function(E){return this._groups.has(this._ensureGroupKey(E))};u.remove=function(E){if(Array.isArray(E)||aa.isCollection(E))return E.forEach(this.remove,this),this;if(!this.has(E))return this;const Q=this._getGroup(E);for(let R=
0;R<Q.length;R++)Q[R].remove();this._deleteGroup(E);this.notifyChange("size");return this};u.removeAll=function(){this._groups.forEach(E=>{for(let Q=0;Q<E.length;Q++)E[Q].remove()});this._groups.clear();this.notifyChange("size");return this};u._isHandle=function(E){return E&&!!E.remove};u._getOrCreateGroup=function(E){if(this.has(E))return this._getGroup(E);const Q=[];this._groups.set(this._ensureGroupKey(E),Q);return Q};u._getGroup=function(E){return t.assumeNonNull(this._groups.get(this._ensureGroupKey(E)))};
u._deleteGroup=function(E){return this._groups.delete(this._ensureGroupKey(E))};u._ensureGroupKey=function(E){return E||"_default_"};k._createClass(r,[{key:"size",get:function(){let E=0;this._groups.forEach(Q=>{E+=Q.length});return E}}]);return r}(Z);e.__decorate([H.property({readOnly:!0})],Z.prototype,"size",null);return Z=e.__decorate([y.subclass("esri.core.Handles")],Z)})},"esri/core/Collection":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./ArrayPool ./Evented ./lang ./maybe ./ObjectPool ./ObservableChangesType ./scheduling ./accessorSupport/decorators/property ./accessorSupport/ensureType ./accessorSupport/decorators/shared ./accessorSupport/decorators/subclass ./accessorSupport/tracking ./accessorSupport/tracking/SimpleObservable".split(" "),
function(k,e,Z,aa,t,H,y,p,r,u,E,Q,R,h,K){function d(O){return O?O instanceof C?O.toArray():O.length?Array.prototype.slice.apply(O):[]:[]}function l(O){if(O&&O.length)return O[0]}function N(O,W,D,q){W&&W.forEach((a,g,M)=>{O.push(a);N(O,D.call(q,a,g,M),D,q)})}var ca;let z=function(){function O(){this.target=null;this.defaultPrevented=this.cancellable=!1;this.type=this.item=void 0}var W=O.prototype;W.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};W.reset=function(D){this.defaultPrevented=
!1;this.item=D};return O}();const L=new y(z,void 0,O=>{O.item=null;O.target=null;O.defaultPrevented=!1;O.cancellable=!1}),F=()=>{},x=new Set,w=new Set,I=new Set,X=new Map;let A=0,C=ca=function(O,W){function D(a){a=O.call(this,a)||this;a._chgListeners=[];a._notifications=null;a._timer=null;a._observable=new K.SimpleObservable;a.length=0;a._items=[];Object.defineProperty(k._assertThisInitialized(a),"uid",{value:A++});return a}k._inheritsLoose(D,O);D.isCollection=function(a){return null!=a&&a instanceof
ca};var q=D.prototype;q.normalizeCtorArgs=function(a){return a?Array.isArray(a)||a instanceof ca?{items:a}:a:{}};q.destroy=function(){this.removeAll()};q[W]=function*(){yield*this.items};q.hasEventListener=function(a){return"change"===a?0<this._chgListeners.length:this._emitter.hasEventListener(a)};q.on=function(a,g){if("change"===a){const M=this._chgListeners,U={removed:!1,callback:g};M.push(U);this._notifications&&this._notifications.push({listeners:M.slice(),items:this._items.slice(),changes:[]});
return{remove(){this.remove=F;U.removed=!0;M.splice(M.indexOf(U),1)}}}return this._emitter.on(a,g)};q.once=function(a,g){const M=this.on(a,g);return{remove(){M.remove()}}};q.add=function(a,g){h.trackAccess(this._observable);if(this._emitBeforeChanges(p.ObservableChangesType.ADD))return this;g=this.getNextIndex(null!=g?g:null);this._splice(g,0,[a]);this._emitAfterChanges(p.ObservableChangesType.ADD);return this};q.addMany=function(a,g=this._items.length){h.trackAccess(this._observable);if(!a||!a.length||
this._emitBeforeChanges(p.ObservableChangesType.ADD))return this;g=this.getNextIndex(g);this._splice(g,0,d(a));this._emitAfterChanges(p.ObservableChangesType.ADD);return this};q.at=function(a){h.trackAccess(this._observable);a=Math.trunc(a)||0;0>a&&(a+=this.length);if(!(0>a||a>=this.length))return this._items[a]};q.removeAll=function(){h.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(p.ObservableChangesType.REMOVE))return[];const a=this._splice(0,this.length)||[];this._emitAfterChanges(p.ObservableChangesType.REMOVE);
return a};q.clone=function(){h.trackAccess(this._observable);return this._createNewInstance({items:this._items.map(t.clone)})};q.concat=function(...a){h.trackAccess(this._observable);a=a.map(d);return this._createNewInstance({items:this._items.concat(...a)})};q.drain=function(a,g){h.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(p.ObservableChangesType.REMOVE)){var M=H.assumeNonNull(this._splice(0,this.length)),U=M.length;for(let ha=0;ha<U;ha++)a.call(g,M[ha],ha,M);this._emitAfterChanges(p.ObservableChangesType.REMOVE)}};
q.every=function(a,g){h.trackAccess(this._observable);return this._items.every(a,g)};q.filter=function(a,g){h.trackAccess(this._observable);let M;M=2===arguments.length?this._items.filter(a,g):this._items.filter(a);return this._createNewInstance({items:M})};q.find=function(a,g){h.trackAccess(this._observable);return this._items.find(a,g)};q.findIndex=function(a,g){h.trackAccess(this._observable);return this._items.findIndex(a,g)};q.flatten=function(a,g){h.trackAccess(this._observable);const M=[];
N(M,this,a,g);return new ca(M)};q.forEach=function(a,g){h.trackAccess(this._observable);return this._items.forEach(a,g)};q.getItemAt=function(a){h.trackAccess(this._observable);return this._items[a]};q.getNextIndex=function(a){h.trackAccess(this._observable);const g=this.length;a=null==a?g:a;0>a?a=0:a>g&&(a=g);return a};q.includes=function(a,g=0){h.trackAccess(this._observable);return this._items.includes(a,g)};q.indexOf=function(a,g=0){h.trackAccess(this._observable);return this._items.indexOf(a,
g)};q.join=function(a=","){h.trackAccess(this._observable);return this._items.join(a)};q.lastIndexOf=function(a,g=this.length-1){h.trackAccess(this._observable);return this._items.lastIndexOf(a,g)};q.map=function(a,g){h.trackAccess(this._observable);a=this._items.map(a,g);return new ca({items:a})};q.reorder=function(a,g=this.length-1){h.trackAccess(this._observable);const M=this.indexOf(a);if(-1!==M){0>g?g=0:g>=this.length&&(g=this.length-1);if(M!==g){if(this._emitBeforeChanges(p.ObservableChangesType.MOVE))return a;
this._splice(M,1);this._splice(g,0,[a]);this._emitAfterChanges(p.ObservableChangesType.MOVE)}return a}};q.pop=function(){h.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(p.ObservableChangesType.REMOVE)){var a=l(this._splice(this.length-1,1));this._emitAfterChanges(p.ObservableChangesType.REMOVE);return a}};q.push=function(...a){h.trackAccess(this._observable);if(this._emitBeforeChanges(p.ObservableChangesType.ADD))return this.length;this._splice(this.length,0,a);this._emitAfterChanges(p.ObservableChangesType.ADD);
return this.length};q.reduce=function(a,g){h.trackAccess(this._observable);const M=this._items;return 2===arguments.length?M.reduce(a,g):M.reduce(a)};q.reduceRight=function(a,g){h.trackAccess(this._observable);const M=this._items;return 2===arguments.length?M.reduceRight(a,g):M.reduceRight(a)};q.remove=function(a){h.trackAccess(this._observable);return this.removeAt(this.indexOf(a))};q.removeAt=function(a){h.trackAccess(this._observable);if(!(0>a||a>=this.length||this._emitBeforeChanges(p.ObservableChangesType.REMOVE)))return a=
l(this._splice(a,1)),this._emitAfterChanges(p.ObservableChangesType.REMOVE),a};q.removeMany=function(a){h.trackAccess(this._observable);if(!a||!a.length||this._emitBeforeChanges(p.ObservableChangesType.REMOVE))return[];a=a instanceof ca?a.toArray():a;const g=this._items,M=[],U=a.length;for(let la=0;la<U;la++){var ha=g.indexOf(a[la]);if(-1<ha){{var oa=la+1;var ma=ha+1;const pa=Math.min(a.length-oa,g.length-ma);let va=0;for(;va<pa&&a[oa+va]===g[ma+va];)va++;oa=va}oa=1+oa;(ha=this._splice(ha,oa))&&0<
ha.length&&M.push.apply(M,ha);la+=oa-1}}this._emitAfterChanges(p.ObservableChangesType.REMOVE);return M};q.reverse=function(){h.trackAccess(this._observable);if(this._emitBeforeChanges(p.ObservableChangesType.MOVE))return this;const a=this._splice(0,this.length);a&&(a.reverse(),this._splice(0,0,a));this._emitAfterChanges(p.ObservableChangesType.MOVE);return this};q.shift=function(){h.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(p.ObservableChangesType.REMOVE)){var a=l(this._splice(0,
1));this._emitAfterChanges(p.ObservableChangesType.REMOVE);return a}};q.slice=function(a=0,g=this.length){h.trackAccess(this._observable);return this._createNewInstance({items:this._items.slice(a,g)})};q.some=function(a,g){h.trackAccess(this._observable);return this._items.some(a,g)};q.sort=function(a){h.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(p.ObservableChangesType.MOVE))return this;const g=H.assumeNonNull(this._splice(0,this.length));arguments.length?g.sort(a):g.sort();
this._splice(0,0,g);this._emitAfterChanges(p.ObservableChangesType.MOVE);return this};q.splice=function(a,g,...M){h.trackAccess(this._observable);const U=(g?p.ObservableChangesType.REMOVE:0)|(M.length?p.ObservableChangesType.ADD:0);if(this._emitBeforeChanges(U))return[];a=this._splice(a,g,M)||[];this._emitAfterChanges(U);return a};q.toArray=function(){h.trackAccess(this._observable);return this._items.slice()};q.toJSON=function(){h.trackAccess(this._observable);return this.toArray()};q.toLocaleString=
function(){h.trackAccess(this._observable);return this._items.toLocaleString()};q.toString=function(){h.trackAccess(this._observable);return this._items.toString()};q.unshift=function(...a){h.trackAccess(this._observable);if(!a.length||this._emitBeforeChanges(p.ObservableChangesType.ADD))return this.length;this._splice(0,0,a);this._emitAfterChanges(p.ObservableChangesType.ADD);return this.length};q._createNewInstance=function(a){return new this.constructor(a)};q._splice=function(a,g,M){const U=this._items;
var ha=this.itemType;let oa=void 0;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=r.schedule(()=>this._dispatchChange()));if(g){oa=U.splice(a,g);if(this.hasEventListener("before-remove")){var ma=L.acquire();ma.target=this;ma.cancellable=!0;for(let va=0,Ba=oa.length;va<Ba;va++)g=oa[va],ma.reset(g),this.emit("before-remove",ma),ma.defaultPrevented&&
(oa.splice(va,1),U.splice(a,0,g),a+=1,--va,--Ba);L.release(ma)}this.length=this._items.length;if(this.hasEventListener("after-remove")){g=L.acquire();g.target=this;g.cancellable=!1;ma=oa.length;for(let va=0;va<ma;va++)g.reset(oa[va]),this.emit("after-remove",g);L.release(g)}}if(M&&M.length){if(ha){g=[];for(var la of M)M=ha.ensureType(la),null==M&&null!=la||g.push(M);M=g}ha=this.hasEventListener("before-add");la=this.hasEventListener("after-add");g=a===this.length;if(ha||la){var pa=L.acquire();pa.target=
this;pa.cancellable=!0;ma=L.acquire();ma.target=this;ma.cancellable=!1;for(const va of M)ha?(pa.reset(va),this.emit("before-add",pa),pa.defaultPrevented||(g?U.push(va):U.splice(a++,0,va),this._set("length",U.length),la&&(ma.reset(va),this.emit("after-add",ma)))):(g?U.push(va):U.splice(a++,0,va),this._set("length",U.length),ma.reset(va),this.emit("after-add",ma));L.release(ma);L.release(pa)}else{if(g)for(pa of M)U.push(pa);else U.splice(a,0,...M);this._set("length",U.length)}}(M&&M.length||oa&&oa.length)&&
this._notifyChangeEvent(M,oa);return oa};q._emitBeforeChanges=function(a){let g=!1;if(this.hasEventListener("before-changes")){const M=L.acquire();M.target=this;M.cancellable=!0;M.type=a;this.emit("before-changes",M);g=M.defaultPrevented;L.release(M)}return g};q._emitAfterChanges=function(a){if(this.hasEventListener("after-changes")){const g=L.acquire();g.target=this;g.cancellable=!1;g.type=a;this.emit("after-changes",g);L.release(g)}this._observable.notify()};q._notifyChangeEvent=function(a,g){this.hasEventListener("change")&&
this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:a,removed:g})};q._dispatchChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var a=this._notifications;this._notifications=null;for(const g of a){a=g.changes;x.clear();w.clear();I.clear();for(const {added:la,removed:pa}of a){if(la)if(0===I.size&&0===w.size)for(const va of la)x.add(va);else for(const va of la)w.has(va)?(I.add(va),w.delete(va)):I.has(va)||x.add(va);
if(pa)if(0===I.size&&0===x.size)for(const va of pa)w.add(va);else for(const va of pa)x.has(va)?x.delete(va):(I.delete(va),w.add(va))}const M=Z.acquire();x.forEach(la=>{M.push(la)});const U=Z.acquire();w.forEach(la=>{U.push(la)});const ha=this._items,oa=g.items,ma=Z.acquire();I.forEach(la=>{oa.indexOf(la)!==ha.indexOf(la)&&ma.push(la)});if(g.listeners&&(M.length||U.length||ma.length)){a={target:this,added:M,removed:U,moved:ma};const la=g.listeners.length;for(let pa=0;pa<la;pa++){const va=g.listeners[pa];
va.removed||va.callback.call(this,a)}}Z.release(M);Z.release(U);Z.release(ma)}x.clear();w.clear();I.clear()}};k._createClass(D,[{key:"items",get:function(){h.trackAccess(this._observable);return this._items},set:function(a){this._emitBeforeChanges(p.ObservableChangesType.ADD)||(this._splice(0,this.length,d(a)),this._emitAfterChanges(p.ObservableChangesType.ADD))}}]);return D}(aa.EventedAccessor,Symbol.iterator);C.ofType=O=>{if(!O)return ca;if(X.has(O))return X.get(O);let W=null;if("function"===typeof O)W=
O.prototype.declaredClass;else if(O.base)W=O.base.prototype.declaredClass;else for(var D in O.typeMap){const q=O.typeMap[D].prototype.declaredClass;W=W?W+` | ${q}`:q}D=function(q){function a(){return q.apply(this,arguments)||this}k._inheritsLoose(a,q);return a}(ca);e.__decorate([Q.shared({Type:O,ensureType:"function"===typeof O?E.ensureType(O):E.ensureOneOfType(O)})],D.prototype,"itemType",void 0);D=e.__decorate([R.subclass(`esri.core.Collection<${W}>`)],D);X.set(O,D);return D};e.__decorate([u.property()],
C.prototype,"length",void 0);e.__decorate([u.property()],C.prototype,"items",null);return C=ca=e.__decorate([R.subclass("esri.core.Collection")],C)})},"esri/core/ObservableChangesType":function(){define(["exports"],function(k){k.ObservableChangesType=void 0;var e=k.ObservableChangesType||(k.ObservableChangesType={});e[e.ADD=1]="ADD";e[e.REMOVE=2]="REMOVE";e[e.MOVE=4]="MOVE";Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/accessorSupport/decorators/shared":function(){define(["exports"],
function(k){k.shared=function(e){return(Z,aa)=>{Z[aa]=e}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(k,e){let Z=function(){function aa(){this._observers=[]}var t=aa.prototype;t.observe=function(H){this._observers.includes(H)||this._observers.push(H);return new e.ObservationHandle(this._observers,H)};t.notify=function(){const H=this._observers.slice();for(let y=0;y<H.length;++y){const p=
H[y];p.onInvalidated();p.onCommitted()}};return aa}();k.SimpleObservable=Z;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),function(k,e,Z,aa,t,H,y){function p(R,h,K={}){return r(R,h,K,E)}function r(R,h,K={},d){let l=null;const N=K.once?(ca,z)=>{d(ca)&&(aa.removeMaybe(l),h(ca,z))}:(ca,z)=>{d(ca)&&h(ca,z)};l=H.watchTracked(R,N,K.sync,
K.equals);K.initial&&(R=R(),N(R,R));return l}function u(R,h,K){if(t.isAborted(K))return Promise.reject(t.createAbortError());const d=R();if(null!=h&&h(d))return Promise.resolve(d);let l=null;return new Promise((N,ca)=>{l=Z.handlesGroup([t.onAbort(K,()=>{l=aa.removeMaybe(l);ca(t.createAbortError())}),r(R,z=>{l=aa.removeMaybe(l);N(z)},{sync:!1,once:!0},null!=h?h:E)])})}function E(R){return!0}function Q(R){return!!R}k.autorun=y.autorun;k.initial={initial:!0};k.on=function(R,h,K,d={}){function l(){ca&&
z&&(z.remove(),null==d.onListenerRemove?void 0:d.onListenerRemove(ca),z=ca=null)}function N(x){d.once&&d.once&&aa.removeMaybe(L);K(x)}let ca=null,z=null,L=null;const F=p(R,(x,w)=>{l();e.isEventTarget(x)&&(ca=x,z=e.on(x,h,N),null==d.onListenerAdd?void 0:d.onListenerAdd(x))},{sync:d.sync,initial:!0});return L=Z.makeHandle(()=>{F.remove();l()})};k.once=function(R,h){return u(R,null,h)};k.sync={sync:!0};k.syncAndInitial={sync:!0,initial:!0};k.watch=p;k.when=function(R,h,K={}){return r(R,h,K,Q)};k.whenOnce=
function(R,h){return u(R,Q,h)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/support/PromiseQueue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(k,e,Z,aa,t,H,y,p,r,u){k.PromiseQueue=function(Q){function R(){var K=
Q.apply(this,arguments)||this;K._tasks=[];K.running=!1;return K}e._inheritsLoose(R,Q);var h=R.prototype;h.destroy=function(){this.cancelAll()};h.runTask=function(K){for(;!K.done&&this._process(K);)K.madeProgress()};h.push=function(K,d,l){this.running=!0;return new Promise((N,ca)=>this._tasks.push(new E(N,ca,K,d,l)))};h.unshift=function(K,d,l){this.running=!0;return new Promise((N,ca)=>this._tasks.unshift(new E(N,ca,K,d,l)))};h._process=function(K){if(0===this._tasks.length)return!1;const d=this._tasks.shift();
try{const l=t.isAborted(d.signal);if(l&&!d.abortCallback)d.reject(t.createAbortError());else{const N=l?d.abortCallback(t.createAbortError()):d.callback(K);t.isPromiseLike(N)?N.then(d.resolve,d.reject):d.resolve(N)}}catch(l){d.reject(l)}this.running=0<this._tasks.length;return!0};h.cancelAll=function(){const K=t.createAbortError();for(const d of this._tasks)if(d.abortCallback){const l=d.abortCallback(K);d.resolve(l)}else d.reject(K);this._tasks.length=0;this.running=!1};e._createClass(R,[{key:"length",
get:function(){return this._tasks.length}}]);return R}(aa);Z.__decorate([H.property()],k.PromiseQueue.prototype,"running",void 0);k.PromiseQueue=Z.__decorate([u.subclass("esri.layers.support.PromiseQueue")],k.PromiseQueue);let E=function(Q,R,h,K,d){this.resolve=Q;this.reject=R;this.callback=h;this.signal=K;this.abortCallback=d};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(k,e,Z,aa,t,H,y,p){Z=function(r){function u(){var E=r.apply(this,arguments)||this;E.SCHEDULER_LOG_SLOW_TASKS=!1;E.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return E}k._inheritsLoose(u,r);return u}(Z);e.__decorate([aa.property()],Z.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);e.__decorate([aa.property()],Z.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);Z=e.__decorate([p.subclass("esri.views.support.DebugFlags")],Z);return new Z})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports",
"../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(k,e,Z,aa,t){const H=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let y=1;k.createCapabilities=function(p,r){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:p},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:r,supportsDelete:r,supportsEditing:r,supportsChangeTracking:!1,
supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:r,supportsExceedsLimitStatistics:!0},query:aa.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:r,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,
supportsUpdateByOthers:!1}}};k.createDefaultAttributesFunction=function(p,r){if(e("esri-csp-restrictions"))return()=>({[r]:null,...p});try{let u=`this.${r} = null;`;for(const Q in p){const R=H.test(Q)?`.${Q}`:`["${Q}"]`;u+=`this${R} = ${JSON.stringify(p[Q])};`}const E=(new Function(`\n      return class AttributesClass$${y++} {\n        constructor() {\n          ${u};\n        }\n      }\n    `))();return()=>new E}catch(u){return()=>({[r]:null,...p})}};k.createDefaultTemplate=function(p={}){return[{name:"New Feature",
description:"",prototype:{attributes:Z.clone(p)}}]};k.createDrawingInfo=function(p){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===p||"esriGeometryMultipoint"===p?t.defaultPointSymbolJSON:"esriGeometryPolyline"===p?t.defaultPolylineSymbolJSON:t.defaultPolygonSymbolJSON}}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(k){const e=[252,146,31,255],Z={type:"esriSMS",style:"esriSMSCircle",size:6,color:e,outline:{type:"esriSLS",
style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},aa={type:"esriSLS",style:"esriSLSSolid",width:.75,color:e};k.defaultColor=e;k.defaultOutlineColor=[153,153,153,255];k.defaultPointSymbolJSON=Z;k.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};k.defaultPolylineSymbolJSON=aa;k.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,
weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};k.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};k.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};k.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define(["require",
"exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../geometry/support/spatialReferenceUtils","../../../support/fieldUtils"],function(k,e,Z,aa,t){function H(K){return new E(K)}function y(){return p.apply(this,arguments)}function p(){p=Z._asyncToGenerator(function*(){return h?h:h=yield new Promise((K,d)=>k(["../../../../geometry/geometryEngineJSON"],K,d))});return p.apply(this,arguments)}function r(){r=Z._asyncToGenerator(function*(K,d){!aa.isValid(K)||"esriGeometryPolygon"!==d&&"esriGeometryPolyline"!==
d||(yield y())});return r.apply(this,arguments)}let u=function(){this.description=this.code=null},E=function(K){this.error=new u;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=K},Q=function(K){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=K};const R=new Set;let h;e.createFeatureEditErrorResult=H;e.createFeatureEditSuccessResult=function(K){return new Q(K)};e.loadGeometryEngine=y;e.loadGeometryEngineForSimplify=function(K,d){return r.apply(this,
arguments)};e.mixAttributes=function(K,d,l,N=!1,ca){R.clear();for(const x in l){const w=K.get(x);if(w){var z=l[x];{var L=w;var F=z;let I=F;"string"===typeof F&&t.isNumericField(L)?I=parseFloat(F):null!=F&&t.isStringField(L)&&"string"!==typeof F&&(I=String(F));L=t.sanitizeNullFieldValue(I)}L!==z&&ca&&ca.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:w,originalValue:z,sanitizedValue:L}});R.add(w.name);if(w&&(N||w.editable)){if(z=t.validateFieldValue(w,
L))return H(t.validationErrorToString(z,w,L));d[w.name]=L}}}for(const x of K.requiredFields)if(!R.has(x.name))return H(`missing required field "${x.name}"`);return null};e.simplify=function(K,d){if(!K||!aa.isValid(d))return K;if("rings"in K||"paths"in K){if(!h)throw new TypeError("geometry engine not loaded");return h.simplify(d,K)}return K};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(k,e){e=new e.JSONMap({esriFieldTypeSmallInteger:"small-integer",
esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});k.kebabDict=e;Object.defineProperty(k,"__esModule",{value:!0})})},"*noref":1}});
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Error ../../../../core/maybe ../../../../geometry/support/jsonUtils ../../../../geometry/support/spatialReferenceUtils ../../featureConversionUtils ../../objectIdUtils ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ./clientSideDefaults ./sourceUtils ../../../support/FieldsIndex ../../../support/fieldType ../../../support/fieldUtils".split(" "),function(k,e,Z,aa,t,H,y,p,r,u,E,Q,R,h,K){function d(L){return aa.isPoint(L)?
null!=L.z:!!L.hasZ}function l(L){return aa.isPoint(L)?null!=L.m:!!L.hasM}const N=t.WGS84,ca={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:t.WGS84},z={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,
supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};return function(){function L(){this._nextObjectId=this._queryEngine=null}var F=L.prototype;F.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy();this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=null};F.load=function(){var x=k._asyncToGenerator(function*(w){var I=
[];const {features:X}=w;var A=this._inferLayerProperties(X,w.fields);const C=w.fields||[],O=null!=w.hasM?w.hasM:A.hasM,W=null!=w.hasZ?w.hasZ:A.hasZ;var D=!w.spatialReference&&!A.spatialReference;const q=D?N:w.spatialReference||A.spatialReference,a=D?ca:null,g=w.geometryType||A.geometryType;let M=w.objectIdField||A.objectIdField;w=w.timeInfo;if(g&&(D&&I.push({name:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),!g))throw new e("feature-layer:missing-property",
"geometryType not set and couldn't be inferred from the provided features");if(!M)throw new e("feature-layer:missing-property","objectIdField not set and couldn't be found in the provided fields");A.objectIdField&&M!==A.objectIdField&&(I.push({name:"feature-layer:duplicated-oid-field",message:`Provided objectIdField "${M}" doesn't match the field name "${A.objectIdField}", found in the provided fields`}),M=A.objectIdField);if(M&&!A.objectIdField){let ha=null;C.some(oa=>oa.name===M?(ha=oa,!0):!1)?
(ha.type="esriFieldTypeOID",ha.editable=!1,ha.nullable=!1):C.unshift({alias:M,name:M,type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(const ha of C){null==ha.name&&(ha.name=ha.alias);null==ha.alias&&(ha.alias=ha.name);if(!ha.name)throw new e("feature-layer:invalid-field-name","field name is missing",{field:ha});ha.name===M&&(ha.type="esriFieldTypeOID");if(-1===h.kebabDict.jsonValues.indexOf(ha.type))throw new e("feature-layer:invalid-field-type",`invalid type for field "${ha.name}"`,{field:ha});
}A={};for(var U of C)"esriFieldTypeOID"!==U.type&&"esriFieldTypeGlobalID"!==U.type&&(D=K.getFieldDefaultValue(U),void 0!==D&&(A[U.name]=D));this._fieldsIndex=new R(C);this._createDefaultAttributes=E.createDefaultAttributesFunction(A,M);w&&(w.startTimeField&&((U=this._fieldsIndex.get(w.startTimeField))?(w.startTimeField=U.name,U.type="esriFieldTypeDate"):w.startTimeField=null),w.endTimeField&&((U=this._fieldsIndex.get(w.endTimeField))?(w.endTimeField=U.name,U.type="esriFieldTypeDate"):w.endTimeField=
null),w.trackIdField&&((U=this._fieldsIndex.get(w.trackIdField))?w.trackIdField=U.name:(w.trackIdField=null,I.push({name:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:w}}))),w.startTimeField||w.endTimeField||(I.push({name:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",details:{timeInfo:w}}),w=null));I={warnings:I,featureErrors:[],layerDefinition:{...z,drawingInfo:E.createDrawingInfo(g),templates:E.createDefaultTemplate(A),
extent:a,geometryType:g,objectIdField:M,fields:C,hasZ:!!W,hasM:!!O,timeInfo:w},assignedObjectIds:{}};this._queryEngine=new u.default({fields:C,geometryType:g,hasM:O,hasZ:W,objectIdField:M,spatialReference:q,featureStore:new p({geometryType:g,hasM:O,hasZ:W}),timeInfo:w,cacheSpatialQueries:!0});if(!X||!X.length)return this._nextObjectId=y.initialObjectId,I;this._nextObjectId=y.findLastObjectIdFromFeatures(M,X)+1;yield r.checkProjectionSupport(X,q);return this._loadInitialFeatures(I,X)});return function(w){return x.apply(this,
arguments)}}();F.applyEdits=function(){var x=k._asyncToGenerator(function*(w){const {spatialReference:I,geometryType:X}=this._queryEngine;yield Promise.all([Q.loadGeometryEngineForSimplify(I,X),r.checkProjectionSupport(w.adds,I),r.checkProjectionSupport(w.updates,I)]);return this._applyEdits(w)});return function(w){return x.apply(this,arguments)}}();F.queryFeatures=function(x,w={}){return this._queryEngine.executeQuery(x,w.signal)};F.queryFeatureCount=function(x,w={}){return this._queryEngine.executeQueryForCount(x,
w.signal)};F.queryObjectIds=function(x,w={}){return this._queryEngine.executeQueryForIds(x,w.signal)};F.queryExtent=function(x,w={}){return this._queryEngine.executeQueryForExtent(x,w.signal)};F.querySnapping=function(x,w={}){return this._queryEngine.executeQueryForSnapping(x,w.signal)};F._inferLayerProperties=function(x,w){let I=void 0,X=void 0,A=null,C=null,O=null;for(const W of x)if(x=W.geometry,!Z.isNone(x)&&(A||(A=aa.getJsonType(x)),C||(C=x.spatialReference),null==I&&(I=d(x)),null==X&&(X=l(x)),
A&&C&&null!=I&&null!=X))break;if(w&&w.length){let W=null;w.some(D=>{const q="esriFieldTypeOID"===D.type,a=!D.type&&D.name&&"objectid"===D.name.toLowerCase();W=D;return q||a})&&(O=W.name)}return{geometryType:A,spatialReference:C,objectIdField:O,hasM:X,hasZ:I}};F._loadInitialFeatures=function(x,w){const {geometryType:I,hasM:X,hasZ:A,objectIdField:C,spatialReference:O,featureStore:W}=this._queryEngine,D=[];for(const q of w){null!=q.uid&&(x.assignedObjectIds[q.uid]=-1);if(q.geometry&&I!==aa.getJsonType(q.geometry)){x.featureErrors.push(Q.createFeatureEditErrorResult("Incorrect geometry type."));
continue}w=this._createDefaultAttributes();const a=Q.mixAttributes(this._fieldsIndex,w,q.attributes,!0,x.warnings);a?x.featureErrors.push(a):(this._assignObjectId(w,q.attributes,!0),q.attributes=w,null!=q.uid&&(x.assignedObjectIds[q.uid]=q.attributes[C]),Z.isSome(q.geometry)&&(q.geometry=r.project(q.geometry,q.geometry.spatialReference,O)),D.push(q))}W.addMany(H.convertFromFeatures([],D,I,A,X,C));x.layerDefinition.extent=this._queryEngine.fullExtent;if(x.layerDefinition.timeInfo){const {start:q,end:a}=
this._queryEngine.timeExtent;x.layerDefinition.timeInfo.timeExtent=[q,a]}return x};F._applyEdits=function(x){const {adds:w,updates:I,deletes:X}=x;x={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};w&&w.length&&this._applyAddEdits(x,w);I&&I.length&&this._applyUpdateEdits(x,I);if(X&&X.length){for(const A of X)x.deleteResults.push(Q.createFeatureEditSuccessResult(A));this._queryEngine.featureStore.removeManyById(X)}return{fullExtent:this._queryEngine.fullExtent,featureEditResults:x}};
F._applyAddEdits=function(x,w){const {addResults:I}=x,{geometryType:X,hasM:A,hasZ:C,objectIdField:O,spatialReference:W,featureStore:D}=this._queryEngine,q=[];for(const a of w){if(a.geometry&&X!==aa.getJsonType(a.geometry)){I.push(Q.createFeatureEditErrorResult("Incorrect geometry type."));continue}w=this._createDefaultAttributes();const g=Q.mixAttributes(this._fieldsIndex,w,a.attributes);g?I.push(g):(this._assignObjectId(w,a.attributes),a.attributes=w,null!=a.uid&&(x.uidToObjectId[a.uid]=a.attributes[O]),
Z.isSome(a.geometry)&&(a.geometry=r.project(Q.simplify(a.geometry,W),a.geometry.spatialReference,W)),q.push(a),I.push(Q.createFeatureEditSuccessResult(a.attributes[O])))}D.addMany(H.convertFromFeatures([],q,X,C,A,O))};F._applyUpdateEdits=function({updateResults:x},w){const {geometryType:I,hasM:X,hasZ:A,objectIdField:C,spatialReference:O,featureStore:W}=this._queryEngine;for(const D of w){const {attributes:q,geometry:a}=D;w=q&&q[C];if(null==w){x.push(Q.createFeatureEditErrorResult(`Identifier field ${C} missing`));
continue}if(!W.has(w)){x.push(Q.createFeatureEditErrorResult(`Feature with object id ${w} missing`));continue}const g=H.convertToFeature(W.getFeature(w),I,A,X);if(Z.isSome(a)){if(I!==aa.getJsonType(a)){x.push(Q.createFeatureEditErrorResult("Incorrect geometry type."));continue}g.geometry=r.project(Q.simplify(a,O),a.spatialReference,O)}if(q){const M=Q.mixAttributes(this._fieldsIndex,g.attributes,q);if(M){x.push(M);continue}}W.add(H.convertFromFeature(g,I,A,X,C));x.push(Q.createFeatureEditSuccessResult(w))}};
F._assignObjectId=function(x,w,I=!1){const X=this._queryEngine.objectIdField;I?w&&isFinite(w[X])?x[X]=w[X]:x[X]=this._nextObjectId++:x[X]=this._nextObjectId++};return L}()});