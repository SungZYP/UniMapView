// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/accessorSupport/originUtils":function(){define(["exports","../multiOriginJSONSupportUtils"],function(a,f){a.updateOrigins=function(d){d&&d.writtenProperties&&d.writtenProperties.forEach(q=>{const t=q.target;q.newOrigin&&q.oldOrigin!==q.newOrigin&&f.isMultiOriginJSONMixin(t)&&t.updateOrigin(q.propName,q.newOrigin)})};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/core/multiOriginJSONSupportUtils":function(){define(["exports"],function(a){a.isMultiOriginJSONMixin=
function(f){return f&&"getAtOrigin"in f&&"originOf"in f};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/support/MapFloorInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../layers/support/FacilityLayerInfo ../layers/support/LevelLayerInfo ../layers/support/SiteLayerInfo".split(" "),function(a,
f,d,q,t,v,w,h,l,u,m){d=function(r){function x(I){I=r.call(this,I)||this;I.levelLayer=null;I.facilityLayer=null;I.siteLayer=null;return I}a._inheritsLoose(x,r);return x}(d.JSONSupport);f.__decorate([q.property({type:u,json:{write:!0}})],d.prototype,"levelLayer",void 0);f.__decorate([q.property({type:l,json:{write:!0}})],d.prototype,"facilityLayer",void 0);f.__decorate([q.property({type:m,json:{write:!0}})],d.prototype,"siteLayer",void 0);return d=f.__decorate([h.subclass("esri.support.MapFloorInfo")],
d)})},"esri/layers/support/FacilityLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(a,f,d,q,t,v,w,h){d=function(l){function u(m){m=l.call(this,m)||this;m.facilityIdField=null;m.layerId=null;m.nameField=null;m.siteIdField=null;m.sublayerId=null;return m}
a._inheritsLoose(u,l);return u}(d.JSONSupport);f.__decorate([q.property({type:String,json:{write:!0}})],d.prototype,"facilityIdField",void 0);f.__decorate([q.property({type:String,json:{write:!0}})],d.prototype,"layerId",void 0);f.__decorate([q.property({type:String,json:{write:!0}})],d.prototype,"nameField",void 0);f.__decorate([q.property({type:String,json:{write:!0}})],d.prototype,"siteIdField",void 0);f.__decorate([q.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},
origins:{"web-scene":{read:!1,write:!1}}}})],d.prototype,"sublayerId",void 0);return d=f.__decorate([h.subclass("esri.layers.support.FacilityLayerInfo")],d)})},"esri/layers/support/LevelLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(a,f,d,q,t,
v,w,h){d=function(l){function u(m){m=l.call(this,m)||this;m.facilityIdField=null;m.layerId=null;m.levelIdField=null;m.levelNumberField=null;m.longNameField=null;m.shortNameField=null;m.sublayerId=null;m.verticalOrderField=null;return m}a._inheritsLoose(u,l);return u}(d.JSONSupport);f.__decorate([q.property({type:String,json:{write:!0}})],d.prototype,"facilityIdField",void 0);f.__decorate([q.property({type:String,json:{write:!0}})],d.prototype,"layerId",void 0);f.__decorate([q.property({type:String,
json:{write:!0}})],d.prototype,"levelIdField",void 0);f.__decorate([q.property({type:String,json:{write:!0}})],d.prototype,"levelNumberField",void 0);f.__decorate([q.property({type:String,json:{write:!0}})],d.prototype,"longNameField",void 0);f.__decorate([q.property({type:String,json:{write:!0}})],d.prototype,"shortNameField",void 0);f.__decorate([q.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],d.prototype,"sublayerId",
void 0);f.__decorate([q.property({type:String,json:{write:!0}})],d.prototype,"verticalOrderField",void 0);return d=f.__decorate([h.subclass("esri.layers.support.LevelLayerInfo")],d)})},"esri/layers/support/SiteLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,f,d,q,t,v,w,h){d=function(l){function u(m){m=l.call(this,m)||this;m.layerId=null;m.nameField=null;m.siteIdField=null;m.sublayerId=null;return m}a._inheritsLoose(u,l);return u}(d.JSONSupport);f.__decorate([q.property({type:String,json:{write:!0}})],d.prototype,"layerId",void 0);f.__decorate([q.property({type:String,json:{write:!0}})],d.prototype,"nameField",void 0);f.__decorate([q.property({type:String,json:{write:!0}})],d.prototype,"siteIdField",void 0);f.__decorate([q.property({type:Number,
json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],d.prototype,"sublayerId",void 0);return d=f.__decorate([h.subclass("esri.layers.support.SiteLayerInfo")],d)})},"esri/support/webSceneUtils":function(){define(["exports","../core/Error"],function(a,f){a.createCopyError=function(){return new f("webscene:failed-to-copy-embedded-resources","Copying of embedded resources is currently not supported")};a.createSchemaValidationError=function(d){return new f("webscene:schema-validation",
"Failed to save webscene due to schema validation errors. See 'details.errors' for more detailed information",{errors:d})};a.isCopyError=function(d){return d&&"webscene:failed-to-copy-embedded-resources"===d.name};a.isSchemaValidationError=function(d){return d&&"webscene:schema-validation"===d.name};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/support/spatialReferenceSupport":function(){define(["exports","../../geometry/support/SupportedGCSWkids","../ViewingMode"],function(a,f,
d){a.isSpatialReferenceSupported=function(q,t){return null==q?!1:null==t?!0:t===d.ViewingMode.Local?q.isGeographic?q.isWGS84||q.wkid===f.SupportedGCSWkids.CGCS2000:!0:q.isWebMercator||q.isWGS84||q.wkid===f.SupportedGCSWkids.CGCS2000||q.wkid===f.SupportedGCSWkids.GCSMARS2000||q.wkid===f.SupportedGCSWkids.GCSMARS2000_SPHERE||q.wkid===f.SupportedGCSWkids.GCSMOON2000};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/webdoc/support/saveUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/asyncUtils ../../core/Error ../../core/promiseUtils ../../core/uuid ../../portal/support/resourceUtils".split(" "),
function(a,f,d,q,t,v,w){function h(){h=f._asyncToGenerator(function*(x,I,n){if(I&&I.resources){var B=I.portalItem===x.portalItem?new Set(x.paths):new Set;x.paths.length=0;x.portalItem=I.portalItem;var K=new Set(I.resources.toKeep.map(J=>J.resource.path)),G=new Set,Q=[];K.forEach(J=>{B.delete(J);x.paths.push(J)});for(const J of I.resources.toUpdate)if(B.delete(J.resource.path),K.has(J.resource.path)||G.has(J.resource.path)){const {resource:ea,content:ha,finish:Y,error:X}=J,ma=w.getSiblingOfSameTypeI(ea,
v.generateUUID());x.paths.push(ma.path);Q.push(l({resource:ma,content:ha,finish:Y,error:X},n))}else x.paths.push(J.resource.path),Q.push(m(J,n)),G.add(J.resource.path);for(const J of I.resources.toAdd)Q.push(l(J,n)),x.paths.push(J.resource.path);B.forEach(J=>{J=I.portalItem.resourceFromPath(J);Q.push(J.portalItem.removeResource(J).catch(()=>{}))});if(0!==Q.length&&(K=yield t.eachAlways(Q),t.throwIfAborted(n),n=K.filter(J=>"error"in J).map(J=>J.error),0<n.length))throw new q("save:resources","Failed to save one or more resources",
{errors:n});}});return h.apply(this,arguments)}function l(x,I){return u.apply(this,arguments)}function u(){u=f._asyncToGenerator(function*(x,I){I=yield d.result(x.resource.portalItem.addResource(x.resource,x.content,I));if(!0===I.ok)x.finish&&x.finish(x.resource);else throw x.error&&x.error(I.error),I.error;});return u.apply(this,arguments)}function m(x,I){return r.apply(this,arguments)}function r(){r=f._asyncToGenerator(function*(x,I){I=yield d.result(x.resource.update(x.content,I));if(!0===I.ok)x.finish(x.resource);
else throw x.error(I.error),I.error;});return r.apply(this,arguments)}a.saveResources=function(x,I,n){return h.apply(this,arguments)};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/portal/support/resourceUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/Error ../../core/maybe ../../core/urlUtils".split(" "),function(a,f,d,q,t,v){function w(){w=f._asyncToGenerator(function*(n,B={},K){yield n.load(K);var G=v.join(n.itemUrl,"resources");const {start:Q=
1,num:J=10,sortOrder:ea="asc",sortField:ha="created"}=B;B={query:{start:Q,num:J,sortOrder:ea,sortField:ha,token:n.apiKey},signal:t.get(K,"signal")};G=yield n.portal._request(G,B);return{total:G.total,nextStart:G.nextStart,resources:G.resources.map(({created:Y,size:X,resource:ma})=>({created:new Date(Y),size:X,resource:n.resourceFromPath(ma)}))}});return w.apply(this,arguments)}function h(){h=f._asyncToGenerator(function*(n,B,K,G){if(!n.hasPath())throw new q(`portal-item-resource-${B}:invalid-path`,
"Resource does not have a valid path");const Q=n.portalItem;yield Q.load(G);B=v.join(Q.userItemUrl,"add"===B?"addResources":"updateResources");const [J,ea]=m(n.path);K=yield x(K);const ha=new FormData;J&&"."!==J&&ha.append("resourcesPrefix",J);ha.append("fileName",ea);ha.append("file",K,ea);ha.append("f","json");t.isSome(G)&&G.access&&ha.append("access",G.access);yield Q.portal._request(B,{method:"post",body:ha,signal:t.get(G,"signal")});return n});return h.apply(this,arguments)}function l(){l=f._asyncToGenerator(function*(n,
B,K){if(!B.hasPath())throw new q("portal-item-resources-remove:invalid-path","Resource does not have a valid path");yield n.load(K);const G=v.join(n.userItemUrl,"removeResources");yield n.portal._request(G,{method:"post",query:{resource:B.path},signal:t.get(K,"signal")});B.portalItem=null});return l.apply(this,arguments)}function u(){u=f._asyncToGenerator(function*(n,B){yield n.load(B);const K=v.join(n.userItemUrl,"removeResources");return n.portal._request(K,{method:"post",query:{deleteAll:!0},signal:t.get(B,
"signal")})});return u.apply(this,arguments)}function m(n){const B=n.lastIndexOf("/");return-1===B?[".",n]:[n.slice(0,B),n.slice(B+1)]}function r(n){{const J=v.getPathExtension(n);n=t.isNone(J)?[n,""]:[n.slice(0,n.length-J.length-1),`.${J}`]}const [B,K]=n,[G,Q]=m(B);return[G,Q,K]}function x(n){return I.apply(this,arguments)}function I(){I=f._asyncToGenerator(function*(n){return n instanceof Blob?n:(yield d(n.url,{responseType:"blob"})).data});return I.apply(this,arguments)}a.addOrUpdateResource=function(n,
B,K,G){return h.apply(this,arguments)};a.contentToBlob=x;a.fetchResources=function(n){return w.apply(this,arguments)};a.getSiblingOfSameType=function(n,B){if(!n.hasPath())return null;const [K,,G]=r(n.path);return n.portalItem.resourceFromPath(v.join(K,B+G))};a.getSiblingOfSameTypeI=function(n,B){if(!n.hasPath())return null;const [K,,G]=r(n.path);return n.portalItem.resourceFromPath(v.join(K,B+G))};a.removeAllResources=function(n,B){return u.apply(this,arguments)};a.removeResource=function(n,B,K){return l.apply(this,
arguments)};a.splitPrefixFileNameAndExtension=r;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/webdoc/support/thumbnailUtils":function(){define(["exports"],function(a){const f={width:600,height:400};a.getOptimalThumbnailSize=function(d,q){q=q||f;let {width:t,height:v}=q;q=t/v;1.5>q?v=t/1.5:1.5<q&&(t=1.5*v);t>d.width&&(v*=d.width/t,t=d.width);v>d.height&&(t*=d.height/v,v=d.height);return{width:Math.round(t),height:Math.round(v)}};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/webscene/ApplicationProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../webdoc/applicationProperties/Viewing".split(" "),
function(a,f,d,q,t,v,w,h,l){var u;d=u=function(m){function r(x){x=m.call(this,x)||this;x.viewing=null;return x}a._inheritsLoose(r,m);r.prototype.clone=function(){return new u({viewing:this.viewing?this.viewing.clone():null})};return r}(d.JSONSupport);f.__decorate([q.property({type:l,json:{write:!0}})],d.prototype,"viewing",void 0);return d=u=f.__decorate([h.subclass("esri.webscene.ApplicationProperties")],d)})},"esri/webdoc/applicationProperties/Viewing":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./Search".split(" "),
function(a,f,d,q,t,v,w,h){var l;d=l=function(u){function m(r){r=u.call(this,r)||this;r.search=null;return r}a._inheritsLoose(m,u);m.prototype.clone=function(){return new l(q.clone({search:this.search}))};return m}(d.JSONSupport);f.__decorate([t.property({type:h,json:{write:!0}})],d.prototype,"search",void 0);return d=l=f.__decorate([w.subclass("esri.webdoc.applicationProperties.Viewing")],d)})},"esri/webdoc/applicationProperties/Search":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/extensions/serializableProperty/writePolicyUtils ./SearchLayer ./SearchTable".split(" "),
function(a,f,d,q,t,v,w,h,l,u,m,r,x){var I;const n=d.ofType(r),B=d.ofType(x);d=I=function(K){function G(J){J=K.call(this,J)||this;J.addressSearchEnabled=!0;J.enabled=!0;J.hintText=null;J.layers=new n;J.tables=new B;return J}a._inheritsLoose(G,K);var Q=G.prototype;Q.readAddressSearchEnabled=function(J){return!J};Q.writeAddressSearchEnabled=function(J,ea,ha){ea[ha]=!J};Q.clone=function(){return new I(t.clone({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,
layers:this.layers,tables:this.tables}))};return G}(q.JSONSupport);f.__decorate([v.property({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],d.prototype,"addressSearchEnabled",void 0);f.__decorate([h.reader("addressSearchEnabled")],d.prototype,"readAddressSearchEnabled",null);f.__decorate([u.writer("addressSearchEnabled")],d.prototype,"writeAddressSearchEnabled",null);f.__decorate([v.property({type:Boolean,
nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],d.prototype,"enabled",void 0);f.__decorate([v.property({type:String,json:{write:!0}})],d.prototype,"hintText",void 0);f.__decorate([v.property({type:n,json:{write:{overridePolicy:m.writeNonEmptyCollectionPolicy},origins:{"web-scene":{write:{isRequired:!0}}}}})],d.prototype,"layers",void 0);f.__decorate([v.property({type:B,json:{read:!0,write:{overridePolicy:m.writeNonEmptyCollectionPolicy}}})],
d.prototype,"tables",void 0);return d=I=f.__decorate([l.subclass("esri.webdoc.applicationProperties.Search")],d)})},"esri/core/accessorSupport/extensions/serializableProperty/writePolicyUtils":function(){define(["exports"],function(a){a.writeNonEmptyCollectionPolicy=function(f){return{enabled:!(null==f||!f.length)}};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/webdoc/applicationProperties/SearchLayer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchLayerField".split(" "),
function(a,f,d,q,t,v,w,h){var l;d=l=function(u){function m(r){r=u.call(this,r)||this;r.field=null;r.id=null;r.subLayer=null;return r}a._inheritsLoose(m,u);m.prototype.clone=function(){return new l(q.clone({field:this.field,id:this.id,subLayer:this.subLayer}))};return m}(d.JSONSupport);f.__decorate([t.property({type:h,json:{write:{isRequired:!0}}})],d.prototype,"field",void 0);f.__decorate([t.property({type:String,json:{write:{isRequired:!0}}})],d.prototype,"id",void 0);f.__decorate([t.property({type:v.Integer,
json:{write:!0}})],d.prototype,"subLayer",void 0);return d=l=f.__decorate([w.subclass("esri.webdoc.applicationProperties.SearchLayer")],d)})},"esri/webdoc/applicationProperties/SearchLayerField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(a,f,d,q,t,v,w,h,l,u){var m;d=m=function(r){function x(I){I=r.call(this,I)||this;I.exactMatch=!1;I.name=null;I.type=null;return I}a._inheritsLoose(x,r);x.prototype.clone=function(){return new m({exactMatch:this.exactMatch,type:this.type,name:this.name})};return x}(d.JSONSupport);f.__decorate([q.property({type:Boolean,json:{write:!0}})],d.prototype,"exactMatch",void 0);f.__decorate([q.property({type:String,json:{write:!0}})],d.prototype,"name",void 0);f.__decorate([h.enumeration(u.kebabDict)],
d.prototype,"type",void 0);return d=m=f.__decorate([l.subclass("esri.webdoc.applicationProperties.SearchLayerField")],d)})},"esri/webdoc/applicationProperties/SearchTable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchTableField".split(" "),function(a,f,d,q,t,v,w,h){var l;d=l=function(u){function m(r){r=
u.call(this,r)||this;r.field=null;r.id=null;return r}a._inheritsLoose(m,u);m.prototype.clone=function(){return new l(q.clone({field:this.field,id:this.id}))};return m}(d.JSONSupport);f.__decorate([t.property({type:h,json:{write:{isRequired:!0}}})],d.prototype,"field",void 0);f.__decorate([t.property({type:String,json:{write:{isRequired:!0}}})],d.prototype,"id",void 0);return d=l=f.__decorate([w.subclass("esri.webdoc.applicationProperties.SearchTable")],d)})},"esri/webdoc/applicationProperties/SearchTableField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(a,f,d,q,t,v,w,h,l,u){var m;d=m=function(r){function x(I){I=r.call(this,I)||this;I.exactMatch=!1;I.name=null;I.type=null;return I}a._inheritsLoose(x,r);x.prototype.clone=function(){return new m({exactMatch:this.exactMatch,type:this.type,name:this.name})};return x}(d.JSONSupport);f.__decorate([q.property({type:Boolean,json:{write:!0}})],d.prototype,"exactMatch",void 0);f.__decorate([q.property({type:String,json:{write:!0}})],d.prototype,"name",void 0);f.__decorate([h.enumeration(u.kebabDict)],
d.prototype,"type",void 0);return d=m=f.__decorate([l.subclass("esri.webdoc.applicationProperties.SearchTableField")],d)})},"esri/webscene/Environment":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./Lighting ./background/utils".split(" "),function(a,f,d,q,t,v,w,h,l){var u;v=(m,r,x)=>({enabled:!x||!x.isPresentation});
d=u=function(m){function r(I){I=m.call(this,I)||this;I.lighting=new h;I.background=null;I.atmosphereEnabled=!0;I.starsEnabled=!0;return I}a._inheritsLoose(r,m);var x=r.prototype;x.clone=function(){return new u(this.cloneConstructProperties())};x.cloneConstructProperties=function(){return{lighting:h.prototype.clone.call(this.lighting),background:q.clone(this.background),atmosphereEnabled:this.atmosphereEnabled,starsEnabled:this.starsEnabled}};return r}(d.JSONSupport);f.__decorate([t.property({type:h,
json:{write:!0}})],d.prototype,"lighting",void 0);f.__decorate([t.property(l.backgroundProperty)],d.prototype,"background",void 0);f.__decorate([t.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:v}}})],d.prototype,"atmosphereEnabled",void 0);f.__decorate([t.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:v}}})],d.prototype,"starsEnabled",void 0);return d=u=f.__decorate([w.subclass("esri.webscene.Environment")],d)})},"esri/webscene/Lighting":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer".split(" "),
function(a,f,d,q,t,v,w,h,l,u){var m;d=m=function(r){function x(n){n=r.call(this,n)||this;n.date=null;n.directShadowsEnabled=!1;n.displayUTCOffset=null;return n}a._inheritsLoose(x,r);var I=x.prototype;I.readDate=function(n,B){return null!=B.datetime&&new Date(B.datetime)||null};I.writeDate=function(n,B,K){B[K]=n.getTime()};I.readDirectShadowsEnabled=function(n,B){return!!B.directShadows};I.writedirectShadowsEnabled=function(n,B,K){n&&(B[K]=n)};I.writeDisplayUTCOffset=function(n,B){null!=n&&(B.displayUTCOffset=
n)};I.clone=function(){return new m(this.cloneConstructProperties())};I.cloneConstructProperties=function(){const n={directShadowsEnabled:this.directShadowsEnabled,displayUTCOffset:null!=this.displayUTCOffset?this.displayUTCOffset:null};null!=this.date&&(n.date=new Date(this.date.getTime()));return n};return x}(d.JSONSupport);f.__decorate([q.property({type:Date,json:{type:Number,write:{target:"datetime"}}})],d.prototype,"date",void 0);f.__decorate([h.reader("date",["datetime"])],d.prototype,"readDate",
null);f.__decorate([u.writer("date")],d.prototype,"writeDate",null);f.__decorate([q.property({type:Boolean,json:{default:!1,write:{target:"directShadows"}}})],d.prototype,"directShadowsEnabled",void 0);f.__decorate([h.reader("directShadowsEnabled",["directShadows"])],d.prototype,"readDirectShadowsEnabled",null);f.__decorate([u.writer("directShadowsEnabled")],d.prototype,"writedirectShadowsEnabled",null);f.__decorate([q.property({type:Number,json:{write:!0}})],d.prototype,"displayUTCOffset",void 0);
f.__decorate([u.writer("displayUTCOffset")],d.prototype,"writeDisplayUTCOffset",null);return d=m=f.__decorate([l.subclass("esri.webscene.Lighting")],d)})},"esri/webscene/background/utils":function(){define(["exports","./Background","./ColorBackground"],function(a,f,d){f={base:f,key:"type",typeMap:{color:d}};f={types:f,json:{read:function(q){return(t,v,w)=>{if(!t)return t;for(const h in q.typeMap)if(t.type===h)return v=new q.typeMap[h],v.read(t,w),v}}(f),write:{overridePolicy:(q,t,v)=>({enabled:!v||
!v.isPresentation})}}};a.backgroundProperty=f;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/webscene/background/Background":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(a,f,d,q,t,v,w,h){d=function(l){function u(m){return l.call(this,m)||this}
a._inheritsLoose(u,l);u.prototype.clone=function(){};return u}(d.JSONSupport);f.__decorate([q.property({readOnly:!0,json:{read:!1}})],d.prototype,"type",void 0);return d=f.__decorate([h.subclass("esri.webscene.background.Background")],d)})},"esri/webscene/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../symbols/support/materialUtils ./Background".split(" "),
function(a,f,d,q,t,v,w,h,l,u,m){var r;t={...u.colorAndTransparencyProperty,nonNullable:!0};m=r=function(x){function I(B){B=x.call(this,B)||this;B.type="color";B.color=new d([0,0,0,1]);return B}a._inheritsLoose(I,x);var n=I.prototype;n.clone=function(){return new r(this.cloneProperties())};n.cloneProperties=function(){return{color:this.color.clone()}};return I}(m);f.__decorate([h.enumeration({color:"color"},{readOnly:!0})],m.prototype,"type",void 0);f.__decorate([q.property(t)],m.prototype,"color",
void 0);return m=r=f.__decorate([l.subclass("esri.webscene.background.ColorBackground")],m)})},"esri/webscene/InitialViewProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Viewpoint ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../geometry/SpatialReference ./Environment".split(" "),function(a,f,d,q,t,v,w,h,l,u,m){var r;q=r=function(x){function I(n){n=
x.call(this,n)||this;n.environment=new m;n.spatialReference=null;n.viewpoint=null;return n}a._inheritsLoose(I,x);I.prototype.clone=function(){return new r({environment:this.environment.clone(),spatialReference:this.spatialReference?this.spatialReference.clone():null,viewingMode:this.viewingMode,viewpoint:this.viewpoint?this.viewpoint.clone():null})};a._createClass(I,[{key:"viewingMode",set:function(n){this._set("viewingMode",n)}}]);return I}(q.JSONSupport);f.__decorate([t.property({type:m,json:{write:{isRequired:!0}}})],
q.prototype,"environment",void 0);f.__decorate([t.property({type:u})],q.prototype,"spatialReference",void 0);f.__decorate([t.property({type:["local","global"]})],q.prototype,"viewingMode",null);f.__decorate([t.property({type:d,json:{write:{isRequired:!0}}})],q.prototype,"viewpoint",void 0);return q=r=f.__decorate([l.subclass("esri.webscene.InitialViewProperties")],q)})},"esri/webscene/Presentation":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/collectionUtils ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/subclass ./Slide".split(" "),
function(a,f,d,q,t,v,w,h,l,u,m){const r=d.ofType(m);d=function(x){function I(B){B=x.call(this,B)||this;B.slides=new r;return B}a._inheritsLoose(I,x);var n=I.prototype;n.destroy=function(){this.slides.forEach(B=>B.destroy());this.slides.removeAll()};n.clone=function(){return new this.constructor({slides:this.slides.clone()})};a._createClass(I,[{key:"slides",set:function(B){B&&(B=B.filter(K=>!!K.viewpoint));this._set("slides",q.referenceSetter(B,this._get("slides"),r))}}]);return I}(t.JSONSupport);
f.__decorate([v.property({type:r,nonNullable:!0,json:{write:!0}}),l.cast(q.castForReferenceSetter)],d.prototype,"slides",null);return d=f.__decorate([u.subclass("esri.webscene.Presentation")],d)})},"esri/webscene/Slide":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Basemap ../Viewpoint ../core/asyncUtils ../core/Collection ../core/collectionUtils ../core/JSONSupport ../core/Logger ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/subclass ../core/accessorSupport/ensureType ../chunks/vec3 ../chunks/vec3f64 ../layers/Layer ../layers/mixins/OperationalLayer ../support/basemapUtils ../views/3d/support/mathUtils ../views/3d/support/viewpointUtils ../views/support/Scheduler ../webdoc/support/SlideThumbnail ./Lighting ./support/Description ./support/SlideEnvironment ./support/SlideGround ./support/SlideVisibleLayer ./support/Title".split(" "),
function(a,f,d,q,t,v,w,h,l,u,m,r,x,I,n,B,K,G,Q,J,ea,ha,Y,X,ma,g,y,P,U,ba,ka,fa){function qa(C){if("building-scene"===C.type||"map-image"===C.type)return C.allSublayers.toArray()}function c(C){if(C=qa(C))return C.filter(M=>M.visible).map(M=>M.id)}function p(C,M){C=M-C;43200<C&&(C-=86400);-43200>C&&(C+=86400);return C}let N=0;const ia=v.ofType(ka.SlideVisibleLayer),z=l.getLogger("esri.webscene.Slide");h=function(C){function M(e){e=C.call(this,e)||this;e.id=Date.now().toString(16)+"-slide-"+N++;e.title=
new fa;e.description=new P;e.thumbnail=new g.SlideThumbnail;e.viewpoint=null;e.basemap=null;e.ground=null;e.environment=new U.SlideEnvironment;e.visibleLayers=new ia;return e}a._inheritsLoose(M,C);var W=M.prototype;W.destroy=function(){this.visibleLayers.removeAll();this.basemap=null;this.thumbnail&&this.thumbnail.destroy();this.thumbnail=this.title=this.description=null};W.castTitle=function(e){return"string"===typeof e?new fa({text:e}):K.ensureType(fa,e)};W.castDescription=function(e){return"string"===
typeof e?new P({text:e}):K.ensureType(P,e)};W.castThumbnail=function(e){return"string"===typeof e?new g.SlideThumbnail({url:e}):K.ensureType(g.SlideThumbnail,e)};W.castBasemap=function(e){return ha.ensureType(e)};W.castVisibleLayers=function(e){return e&&"function"===typeof e.map?e.map(k=>{if("string"===typeof k)return{id:k};if(k instanceof J){const A=c(k);return{id:k.id,sublayerIds:A}}if(k.id)return{id:k.id,sublayerIds:k.sublayerIds};z.warn('Invalid visible layer, expected { id }, Layer or "id"');
return k}):null};W.clone=function(){return new this.constructor({id:this.id,title:this.title.clone(),thumbnail:this.thumbnail.clone(),description:this.description&&this.description.clone()||null,viewpoint:this.viewpoint&&this.viewpoint.clone()||null,basemap:this.basemap&&this.basemap.clone()||null,ground:this.ground&&this.ground.clone()||null,visibleLayers:this.visibleLayers.clone(),environment:this.environment&&this.environment.clone()||null})};W._updateVisibleLayersFrom=function(e){const k=[];return m.eachAlways(this._getLayers(e.map).map(A=>
e.whenLayerView(A).then(S=>{if(S.visible){const Z=c(A);k.push(new ka.SlideVisibleLayer({id:S.layer.id,sublayerIds:Z}))}})).toArray()).then(()=>{this.visibleLayers.removeAll();this.visibleLayers.addMany(k)})};W.updateFrom=function(e,k){k={screenshot:{format:"png",quality:80,width:120,height:75,disableDecorations:!0,...k&&k.screenshot}};return e.when(()=>{this.viewpoint=e.viewpoint.clone();this.environment.lighting=y.prototype.clone.apply(e.environment.lighting);this.basemap=e.map.basemap&&e.map.basemap.clone()||
null;this.ground=e.map.ground?ba.fromGround(e.map.ground):null;return this._updateVisibleLayersFrom(e)}).then(()=>e.takeScreenshot(k.screenshot)).then(A=>{this.thumbnail=new g.SlideThumbnail({url:A.dataUrl});return this})};W.applyTo=function(){var e=a._asyncToGenerator(function*(k,A){var S=this;u.isSome(this._applyToController)&&this._applyToController.abort();let Z=new AbortController;this._applyToController=Z;const V=m.onAbortOrThrow(A,()=>Z.abort()),F=k.resourceController.scheduler.registerTask(ma.TaskPriority.SLIDE);
let O=!1;A={animate:!0,...A,signal:this._applyToController.signal};var ca=function(){var ja=a._asyncToGenerator(function*(){yield m.all([F.schedule(()=>O=S._setViewpointOfInterest(k,A)),F.schedule(()=>S._applyBasemap(k,A),A.signal)]);yield m.all([F.schedule(()=>S._applyLayerVisibility(k),A.signal),F.schedule(()=>S._applyGround(k),A.signal),F.schedule(()=>S._applyViewpoint(k,A),A.signal)])});return function(){return ja.apply(this,arguments)}}();ca=yield t.result(k.addUpdatingPromise(ca()));O&&(k.contentCamera=
null);F.remove();this._applyToController===Z&&(this._applyToController=null);Z=null;null==V?void 0:V.remove();if(!1===ca.ok)throw ca.error;return this});return function(k,A){return e.apply(this,arguments)}}();W._applyBasemap=function(){var e=a._asyncToGenerator(function*(k,A){if(this.basemap){try{yield this.basemap.load(A)}catch(S){if(m.isAbortError(S))throw S;}k.map.basemap=ha.clonePreservingTiledLayers(this.basemap,k.map.basemap)}});return function(k,A){return e.apply(this,arguments)}}();W._applyGround=
function(e){this.ground&&(e.map.ground=this.ground.cloneAndApplyTo(e.map.ground))};W._getLayers=function(e){const k=new v;this._collectLayers(e,k);this._collectLayers(e.ground,k);return k};W._collectLayers=function(e,k){e.layers.forEach(A=>{ea.isOperationalLayer(A)&&(k.add(A),"layers"in A&&this._collectLayers(A,k))})};W._applyLayerVisibility=function(e){this.visibleLayers&&this._getLayers(e.map).forEach(k=>{var A=this.visibleLayers.find(Z=>Z.id===k.id);k.visible=null!=A;const S=A&&A.sublayerIds;A=
qa(k);S&&A&&A.forEach(Z=>Z.visible=0<=S.indexOf(Z.id))})};W._setViewpointOfInterest=function(e,k){if(e.state.fixedContentCamera||!this.viewpoint||k.ignoreViewpoint||!k.useDestinationCamera)return!1;k=X.toCamera(e,this.viewpoint);e.contentCamera=k;return u.isSome(k)};W._applyViewpoint=function(){var e=a._asyncToGenerator(function*(k,A){if(this.viewpoint&&!A.ignoreViewpoint){u.isSome(this.viewpoint.camera)&&(this.viewpoint.camera.fov=k.camera.fov);if(A.animate&&this.get("environment.lighting.date")){yield this._animateToLighting(k,
A);return}A.animate&&(k.environment.applyLighting(this.environment.lighting.clone()),yield k.goTo(this.viewpoint,A));k.viewpoint=this.viewpoint}k.environment.applyLighting(this.environment.lighting.clone())});return function(k,A){return e.apply(this,arguments)}}();W._animateToLighting=function(){var e=a._asyncToGenerator(function*(k,A){let S=null;"sun"===k.environment.lighting.type&&("global"===k.viewingMode&&(S=this._animateLightingWithCamera(k)),k.environment.lighting.cameraTrackingEnabled=!1);
k.environment.lighting.directShadowsEnabled=this.environment.lighting.directShadowsEnabled;null!=this.environment.lighting.displayUTCOffset&&"sun"===k.environment.lighting.type&&(k.environment.lighting.displayUTCOffset=this.environment.lighting.displayUTCOffset);const Z=()=>{S&&S.remove();"sun"===k.environment.lighting.type&&(k.environment.lighting.cameraTrackingEnabled=!0)};return k.goTo(this.viewpoint,A).then(()=>{k.environment.applyLighting(this.environment.lighting.clone());Z()},V=>{Z();throw V;
})});return function(k,A){return e.apply(this,arguments)}}();W._getTime=function(e){const k=e.getTime();e=3600*e.getUTCHours()+60*e.getUTCMinutes()+e.getUTCSeconds();return[k,e]};W._setTime=function(e,k,A){e.setTime(k);e.setUTCHours(A/3600);e.setUTCMinutes(A%3600/60);e.setUTCSeconds(A%3600%60);return e};W._animateLightingWithCamera=function(e){const [k,A]=this._getTime(new Date(e.environment.lighting.date.toString())),[S,Z]=this._getTime(this.environment.lighting.date),V=p(A,Z),F=e.renderCoordsHelper,
O=Q.create();F.toRenderCoords(e.camera.position,O);const ca=Q.create(),ja=Q.create();u.isSome(this.viewpoint.camera)&&F.toRenderCoords(this.viewpoint.camera.position,ca);const pa=new Date;return e.watch("camera",aa=>{F.toRenderCoords(aa.position,ja);var D=G.squaredDistance(O,ja);const b=G.squaredDistance(ca,ja);aa=0;0!==D+b&&(aa=D/(D+b));D=k+(S-k)*aa;aa=Y.moduloPositive(A+V*aa,86400);e.environment.lighting.date=this._setTime(pa,D,aa)})};M.createFrom=function(e,k){return(new this).updateFrom(e,k)};
a._createClass(M,[{key:"visibleLayers",set:function(e){this._set("visibleLayers",w.referenceSetter(e,this._get("visibleLayers"),ia))}}]);return M}(h.JSONSupport);f.__decorate([r.property({type:String,json:{write:{isRequired:!0}}})],h.prototype,"id",void 0);f.__decorate([r.property({type:fa,json:{default:()=>new fa({text:""}),write:{isRequired:!0}}})],h.prototype,"title",void 0);f.__decorate([n.cast("title")],h.prototype,"castTitle",null);f.__decorate([r.property({type:P,json:{write:{overridePolicy(C){return{enabled:!(!C||
!C.text)}}}}})],h.prototype,"description",void 0);f.__decorate([n.cast("description")],h.prototype,"castDescription",null);f.__decorate([r.property({type:g.SlideThumbnail,json:{default:()=>new g.SlideThumbnail({url:""}),write:{isRequired:!0}}})],h.prototype,"thumbnail",void 0);f.__decorate([n.cast("thumbnail")],h.prototype,"castThumbnail",null);f.__decorate([r.property({type:q,nonNullable:!0,json:{write:{isRequired:!0}}})],h.prototype,"viewpoint",void 0);f.__decorate([r.property({type:d,json:{read:{source:"baseMap"},
write:{target:"baseMap"}}})],h.prototype,"basemap",void 0);f.__decorate([n.cast("basemap")],h.prototype,"castBasemap",null);f.__decorate([r.property({type:ba,json:{write:!0}})],h.prototype,"ground",void 0);f.__decorate([r.property({type:ia,json:{write:{isRequired:!0}}})],h.prototype,"visibleLayers",null);f.__decorate([n.cast("visibleLayers")],h.prototype,"castVisibleLayers",null);f.__decorate([r.property({type:U.SlideEnvironment,json:{write:!0}})],h.prototype,"environment",void 0);return h=f.__decorate([B.subclass("esri.webscene.Slide")],
h)})},"esri/views/3d/support/viewpointUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../Camera ../../../geometry ../../../Graphic ../../../Viewpoint ../../../core/asyncUtils ../../../core/has ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../chunks/mat3 ../../../chunks/mat3f64 ../../../chunks/mat4f64 ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/projection ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/frustum ../../../geometry/support/webMercatorUtils ../camera/intersectionUtils ./cameraUtils ./ElevationProvider ./mathUtils ../../../geometry/Point ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry/Geometry".split(" "),
function(a,f,d,q,t,v,w,h,l,u,m,r,x,I,n,B,K,G,Q,J,ea,ha,Y,X,ma,g,y,P,U){function ba(H){return 360-ma.cyclicalDeg.normalize(H)}function ka(H){return ma.cyclicalDeg.normalize(360-H)}function fa(H){u.isSome(H)&&H.resolver&&H.resolver.reject();return null}function qa(H,L,da,la=null){if(!L)return fa(la);var na=H.spatialReference||y.WGS84;if(u.isSome(L.camera)){H=ea.project(L.camera.position,na);if(u.isNone(H))return fa(la);L=L.camera.clone();L.position=H;H=L;u.isSome(la)&&la.resolver&&la.resolver.resolve(H);
return H}if(u.isNone(L.targetGeometry))return fa(la);var sa=L.get("targetGeometry.spatialReference");if(sa&&!ea.canProject(sa,na))return fa(la);na=Y.internalToExternal(H,H.state.camera);sa=Y.OrientationMode.ADJUST;null!=L.rotation&&(na.heading=ba(L.rotation),sa=Y.OrientationMode.LOCKED);null!=da&&(na.tilt=da);if("point"===L.targetGeometry.type){const ta=L.targetGeometry;da=L.targetGeometry.clone();L=null!=L.scale?Y.scaleToDistance(H,L.scale,ta.latitude):H.state.camera.distance;return Y.fromCenterDistance(H,
da,L,na,sa,la)}return Y.fromExtent(H,L.targetGeometry.extent,na.heading,na.tilt,sa,la)}function c(){c=f._asyncToGenerator(function*(H,L,da){if(L&&H.spatialReference){var la={target:null};if("declaredClass"in L||Array.isArray(L))la.target=L;else{for(var na in L)la[na]=L[na];L.center&&!la.target&&(la.target=L.center)}L=la}else L=null;if(!L)throw new l("viewpointutils-create:no-target","Missing target for creating viewpoint");la=new d({fov:H.camera.fov});na=new v({camera:la});if(L.target instanceof v)return H=
yield k(H,L.target,L,da,na),D(H);if(L.target instanceof d)return D(S(H,L.target,na));var sa=null!=L.scale||null!=L.zoom;if(L.target instanceof P){var ta=L.target.xmin===L.target.xmax||L.target.ymin===L.target.ymax;return sa||ta?D(yield Z(H,L,L.target.center,la,da,na)):D(yield ca(H,L,L.target,la,da,na))}ta={boundingBox:G.empty(),hasZ:!1,screenSpaceObjects:[]};var wa=sa?Y.scaleToResolution(H,p(H,L)):void 0;yield W(H,L.target,wa,ta);if(isFinite(ta.boundingBox[0])){G.center(ta.boundingBox,b);xa.x=b[0];
xa.y=b[1];xa.z=b[2];xa.spatialReference=H.spatialReference;isFinite(xa.z)&&ta.hasZ?wa=G.isPoint(ta.boundingBox):(xa.z=void 0,wa=Q.isPoint(G.toRect(ta.boundingBox,oa)));if(sa||wa)return D(yield Z(H,L,xa,la,da,na));sa=ta.screenSpaceObjects;if(sa.length){wa=Number.NEGATIVE_INFINITY;for(let Aa=0;Aa<sa.length;Aa++){const ya=sa[Aa].screenSpaceBoundingRect;wa=Math.max(wa,Math.abs(ya[0]),Math.abs(ya[1]),Math.abs(ya[2]),Math.abs(ya[3]))}sa=.66-wa/Math.min(H.width,H.height)*2}else sa=.66;return D(yield pa(H,
L,xa,ta.boundingBox,sa,la,da,na))}return L.position?(da=ha.cameraOnContentAlongViewDirection(H),n.copy(ra,da.viewForward),Y.directionToHeadingTilt(H,da.eye,ra,da.up,za),la.position=new g(L.position),la.heading=null!=L.heading?L.heading:za.heading,la.tilt=null!=L.tilt?L.tilt:za.tilt,H=ia(H,null,la,na),D(H)):D(yield F(H,L,la,da,na))});return c.apply(this,arguments)}function p(H,L){return null==L.scale&&null!=L.zoom?Y.zoomToScale(H,L.zoom):L.scale}function N(H,L){let da=!1;null!=L.heading?(H.heading=
L.heading,da=!0):null!=L.rotation&&(H.heading=ba(L.rotation),da=!0);null!=L.tilt&&(H.tilt=L.tilt,da=!0);null!=L.fov&&(H.fov=L.fov);return da}function ia(H,L,da,la){const na=H.spatialReference||y.WGS84;L=u.isSome(L)?L:Y.externalToInternal(H,da);if(u.isNone(L))return la;la.targetGeometry=K.projectVectorToPoint(L.center,H.renderSpatialReference,na);la.scale=Y.computeScale(H,L);la.rotation=ka(da.heading);la.camera=da;return la}function z(H,L,da){if(L){if(!ea.canProject(L.spatialReference,H.spatialReference))throw new l("viewpointutils:incompatible-spatialreference",
`Spatial reference (${L.spatialReference?L.spatialReference.wkid:"unknown"}) is incompatible with the view (${H.spatialReference.wkid})`,{geometry:L});var la=[];if(!L.hasZ&&H.basemapTerrain){switch(L.type){case "point":var na=L;break;case "multipoint":case "polyline":na=L.extent.center;break;case "mesh":na=L.origin;break;case "extent":na=L.center;break;case "polygon":na=L.centroid}na&&ea.canProject(na,H.basemapTerrain.spatialReference)?b[2]=u.unwrapOr(X.getElevationAtPoint(H.elevationProvider,na),
0):b[2]=0}(0,Ea[L.type])(L,ta=>{la.push(ta[0],ta[1],ta[2])},b);var sa=la.length/3;if(0!==sa&&(na=Array(la.length),K.projectBuffer(la,L.spatialReference,0,na,H.spatialReference,0,sa)))for(L.hasZ&&(da.hasZ=!0),H=0;H<na.length;H+=3)L.hasZ?(b[0]=na[H+0],b[1]=na[H+1],b[2]=na[H+2]):(b[0]=na[H+0],b[1]=na[H+1]),G.expandWithVec3(da.boundingBox,b)}}function C(H,L,da,la){return M.apply(this,arguments)}function M(){M=f._asyncToGenerator(function*(H,L,da,la){const na=yield w.result(H.whenViewForGraphic(L));if(!1!==
na.ok&&!u.isNone(na.value)&&"whenGraphicBounds"in na.value)if(da=yield w.result(na.value.whenGraphicBounds(L,{minDemResolution:da})),!1===da.ok)z(H,L.geometry,la);else{var {screenSpaceObjects:sa,boundingBox:ta}=da.value;G.expandWithAABB(la.boundingBox,ta);sa&&sa.forEach(wa=>{la.screenSpaceObjects.push(wa)});isFinite(ta[2])&&(la.hasZ=!0)}else z(H,L.geometry,la)});return M.apply(this,arguments)}function W(H,L,da,la){return e.apply(this,arguments)}function e(){e=f._asyncToGenerator(function*(H,L,da,
la){if(Array.isArray(L)&&2===L.length){const na=L[0],sa=L[1];if("number"===typeof na&&"number"===typeof sa){xa.x=na;xa.y=sa;xa.z=void 0;xa.spatialReference=H.spatialReference.isGeographic?H.spatialReference:y.WGS84;z(H,xa,la);return}}L&&"function"===typeof L.map?yield m.eachAlways(L.map(na=>W(H,na,da,la))):L instanceof U?z(H,L,la):L instanceof t&&(yield C(H,L,da,la))});return e.apply(this,arguments)}function k(H,L,da,la,na){return A.apply(this,arguments)}function A(){A=f._asyncToGenerator(function*(H,
L,da,la,na){if(u.isSome(L.camera))return S(H,L.camera,na);na.scale=L.scale;na.rotation=L.rotation;na.targetGeometry=u.isSome(L.targetGeometry)?L.targetGeometry.clone():null;na.camera=null;null!=da.heading?na.rotation=ka(da.heading):null!=da.rotation&&(na.rotation=da.rotation);L=p(H,da);null!=L&&(na.scale=L);la=new Y.AsyncContext(la);qa(H,na,da.tilt,la);na.camera=yield la.resolver.promise;return na});return A.apply(this,arguments)}function S(H,L,da){const la=ea.project(L.position,H.spatialReference);
if(u.isNone(la))return null;L=L.clone();L.fov=H.camera.fov;L.position=la;return ia(H,null,L,da)}function Z(H,L,da,la,na,sa){return V.apply(this,arguments)}function V(){V=f._asyncToGenerator(function*(H,L,da,la,na,sa){if(u.isNone(da))throw new l("createfromcenter","invalid point");sa.targetGeometry=da.clone();const ta=ha.cameraOnContentAlongViewDirection(H);if(L.position)return da=sa.targetGeometry,na=H.renderSpatialReference,K.projectPointToVector(L.position,ua,na),K.projectPointToVector(da,va,na),
sa.targetGeometry=new g(da),la.position=new g(L.position),n.subtract(ra,va,ua),Y.directionToHeadingTilt(H,ua,ra,ta.up,la),sa.scale=Y.distanceToScale(H,n.distance(ua,va),sa.targetGeometry.latitude),sa.rotation=ka(la.heading),sa.camera=la,sa;if(L.zoomFactor){var wa=ta.distance/L.zoomFactor;const Aa=n.scale(b,ta.viewForward,-wa);ta.eye=n.add(b,ta.center,Aa);sa.scale=Y.distanceToScale(H,wa,da.latitude)}Y.internalToExternal(H,ta,la);wa=N(la,L)?Y.OrientationMode.LOCKED:Y.OrientationMode.ADJUST;L.zoomFactor||
(sa.scale=p(H,L),null==sa.scale&&(K.projectPointToVector(da,b,H.renderSpatialReference),J.intersectsPoint(ta.frustum,b)?sa.scale=Y.distanceToScale(H,n.distance(ta.eye,b),da.latitude):sa.scale=Y.computeScale(H,ta)),L=new Y.AsyncContext(na),Y.fromCenterScale(H,sa.targetGeometry,sa.scale,la,wa,L),sa.camera=yield L.resolver.promise);return sa});return V.apply(this,arguments)}function F(H,L,da,la,na){return O.apply(this,arguments)}function O(){O=f._asyncToGenerator(function*(H,L,da,la,na){var sa=ha.cameraOnContentAlongViewDirection(H);
sa=K.projectVectorToPoint(sa.center,H.renderSpatialReference,H.spatialReference);return Z(H,L,sa,da,la,na)});return O.apply(this,arguments)}function ca(H,L,da,la,na,sa){return ja.apply(this,arguments)}function ja(){ja=f._asyncToGenerator(function*(H,L,da,la,na,sa){sa.targetGeometry=da.clone();const ta=ha.cameraOnContentAlongViewDirection(H);Y.internalToExternal(H,ta,la);L=N(la,L)?Y.OrientationMode.LOCKED:Y.OrientationMode.ADJUST;na=new Y.AsyncContext(na);Y.fromExtent(H,da,la.heading,la.tilt,L,na);
sa.camera=yield na.resolver.promise;return sa});return ja.apply(this,arguments)}function pa(H,L,da,la,na,sa,ta,wa){return aa.apply(this,arguments)}function aa(){aa=f._asyncToGenerator(function*(H,L,da,la,na,sa,ta,wa){wa.targetGeometry=da.clone();const Aa=ha.cameraOnContentAlongViewDirection(H);var ya=0;da.hasZ?ya=da.z:H.basemapTerrain&&(ya=u.unwrap(X.getElevationAtPoint(H.elevationProvider,da)));n.set(b,da.x,da.y,ya);K.computeTranslationToOriginAndRotation(H.spatialReference,b,E,H.renderSpatialReference);
r.fromMat4(R,E);r.transpose(R,R);G.empty(T);da=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]];for(var Ba=0;Ba<da.length;Ba++){const Ca=da[Ba];let Da=la[Ca[2]];isFinite(Da)||(Da=ya);n.set(b,la[Ca[0]],la[Ca[1]],Da);K.projectVectorToVector(b,H.spatialReference,b,H.renderSpatialReference);G.expandWithVec3(T,n.transformMat3(b,b,R))}la=G.width(T);ya=G.height(T);da=G.depth(T);Ba=1/Math.tan(Aa.fovY/2);na=Math.max(.5*Math.sqrt(la*la+da*da)*Math.max(Ba,1/Math.tan(Aa.fovX/2))+.5*ya,.5*ya*
Ba+.5*Math.max(la,da))/na;Y.internalToExternal(H,Aa,sa);L=N(sa,L)?Y.OrientationMode.LOCKED:Y.OrientationMode.ADJUST;wa.scale=Y.distanceToScale(H,na,wa.targetGeometry.latitude);ta=new Y.AsyncContext(ta);Y.fromCenterScale(H,wa.targetGeometry,wa.scale,sa,L,ta);wa.camera=yield ta.resolver.promise;return wa});return aa.apply(this,arguments)}function D(H){H&&u.isSome(H.camera)&&(H.rotation=ka(H.camera.heading));return H}const b=B.create(),E=I.create(),R=x.create(),T=G.create(),oa=Q.create(),ra=B.create(),
ua=B.create(),va=B.create(),za={heading:0,tilt:0},xa=new g,Ea={point(H,L,da){da[0]=H.x;da[1]=H.y;H.hasZ&&(da[2]=H.z);L(da)},polygon(H,L,da){const la=H.hasZ;for(let na=0;na<H.rings.length;na++){const sa=H.rings[na];for(let ta=0;ta<sa.length;ta++)da[0]=sa[ta][0],da[1]=sa[ta][1],la&&(da[2]=sa[ta][2]),L(da)}},polyline(H,L,da){const la=H.hasZ;for(let na=0;na<H.paths.length;na++){const sa=H.paths[na];for(let ta=0;ta<sa.length;ta++)da[0]=sa[ta][0],da[1]=sa[ta][1],la&&(da[2]=sa[ta][2]),L(da)}},multipoint(H,
L,da){const la=H.points;H=H.hasZ;for(let na=0;na<la.length;na++)da[0]=la[na][0],da[1]=la[na][1],H&&(da[2]=la[na][2]),L(da)},extent(H,L,da){H.hasZ?(L(n.set(da,H.xmin,H.ymin,H.zmin)),L(n.set(da,H.xmax,H.ymin,H.zmin)),L(n.set(da,H.xmin,H.ymax,H.zmin)),L(n.set(da,H.xmax,H.ymax,H.zmin)),L(n.set(da,H.xmin,H.ymin,H.zmax)),L(n.set(da,H.xmax,H.ymin,H.zmax)),L(n.set(da,H.xmin,H.ymax,H.zmax)),L(n.set(da,H.xmax,H.ymax,H.zmax))):(L(n.set(da,H.xmin,H.ymin,da[2])),L(n.set(da,H.xmax,H.ymin,da[2])),L(n.set(da,H.xmin,
H.ymax,da[2])),L(n.set(da,H.xmax,H.ymax,da[2])))},mesh(H,L,da){if(H=H.vertexAttributes&&H.vertexAttributes.position)for(let la=0;la<H.length;la+=3)L(n.set(da,H[la+0],H[la+1],H[la+2]))}};a.create=function(H,L,da){return c.apply(this,arguments)};a.fromCamera=function(H,L,da=null){u.isNone(da)&&(da=new v);return ia(H,null,L.clone(),da)};a.headingToRotation=ka;a.rotationToHeading=ba;a.toCamera=qa;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/mat3":function(){define(["exports","./common"],
function(a,f){function d(c,p){c[0]=p[0];c[1]=p[1];c[2]=p[2];c[3]=p[4];c[4]=p[5];c[5]=p[6];c[6]=p[8];c[7]=p[9];c[8]=p[10];return c}function q(c,p){c[0]=p[0];c[1]=p[1];c[2]=p[2];c[3]=p[3];c[4]=p[4];c[5]=p[5];c[6]=p[6];c[7]=p[7];c[8]=p[8];return c}function t(c,p,N,ia,z,C,M,W,e,k){c[0]=p;c[1]=N;c[2]=ia;c[3]=z;c[4]=C;c[5]=M;c[6]=W;c[7]=e;c[8]=k;return c}function v(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c}function w(c,p){if(c===p){const N=p[1],ia=p[2],z=p[5];c[1]=p[3];
c[2]=p[6];c[3]=N;c[5]=p[7];c[6]=ia;c[7]=z}else c[0]=p[0],c[1]=p[3],c[2]=p[6],c[3]=p[1],c[4]=p[4],c[5]=p[7],c[6]=p[2],c[7]=p[5],c[8]=p[8];return c}function h(c,p){const N=p[0],ia=p[1],z=p[2],C=p[3],M=p[4],W=p[5],e=p[6],k=p[7];p=p[8];const A=p*M-W*k,S=-p*C+W*e,Z=k*C-M*e;let V=N*A+ia*S+z*Z;if(!V)return null;V=1/V;c[0]=A*V;c[1]=(-p*ia+z*k)*V;c[2]=(W*ia-z*M)*V;c[3]=S*V;c[4]=(p*N-z*e)*V;c[5]=(-W*N+z*C)*V;c[6]=Z*V;c[7]=(-k*N+ia*e)*V;c[8]=(M*N-ia*C)*V;return c}function l(c,p){const N=p[0],ia=p[1],z=p[2],
C=p[3],M=p[4],W=p[5],e=p[6],k=p[7];p=p[8];c[0]=M*p-W*k;c[1]=z*k-ia*p;c[2]=ia*W-z*M;c[3]=W*e-C*p;c[4]=N*p-z*e;c[5]=z*C-N*W;c[6]=C*k-M*e;c[7]=ia*e-N*k;c[8]=N*M-ia*C;return c}function u(c){const p=c[3],N=c[4],ia=c[5],z=c[6],C=c[7],M=c[8];return c[0]*(M*N-ia*C)+c[1]*(-M*p+ia*z)+c[2]*(C*p-N*z)}function m(c,p,N){const ia=p[0],z=p[1],C=p[2],M=p[3],W=p[4],e=p[5],k=p[6],A=p[7];p=p[8];const S=N[0],Z=N[1],V=N[2],F=N[3],O=N[4],ca=N[5],ja=N[6],pa=N[7];N=N[8];c[0]=S*ia+Z*M+V*k;c[1]=S*z+Z*W+V*A;c[2]=S*C+Z*e+V*p;
c[3]=F*ia+O*M+ca*k;c[4]=F*z+O*W+ca*A;c[5]=F*C+O*e+ca*p;c[6]=ja*ia+pa*M+N*k;c[7]=ja*z+pa*W+N*A;c[8]=ja*C+pa*e+N*p;return c}function r(c,p,N){const ia=p[0],z=p[1],C=p[2],M=p[3],W=p[4],e=p[5],k=p[6],A=p[7];p=p[8];const S=N[0];N=N[1];c[0]=ia;c[1]=z;c[2]=C;c[3]=M;c[4]=W;c[5]=e;c[6]=S*ia+N*M+k;c[7]=S*z+N*W+A;c[8]=S*C+N*e+p;return c}function x(c,p,N){const ia=p[0],z=p[1],C=p[2],M=p[3],W=p[4],e=p[5],k=p[6],A=p[7];p=p[8];const S=Math.sin(N);N=Math.cos(N);c[0]=N*ia+S*M;c[1]=N*z+S*W;c[2]=N*C+S*e;c[3]=N*M-S*
ia;c[4]=N*W-S*z;c[5]=N*e-S*C;c[6]=k;c[7]=A;c[8]=p;return c}function I(c,p,N){const ia=N[0],z=N[1];N=N[2];c[0]=ia*p[0];c[1]=ia*p[1];c[2]=ia*p[2];c[3]=z*p[3];c[4]=z*p[4];c[5]=z*p[5];c[6]=N*p[6];c[7]=N*p[7];c[8]=N*p[8];return c}function n(c,p,N){const ia=N[0];N=N[1];c[0]=ia*p[0];c[1]=ia*p[1];c[2]=ia*p[2];c[3]=N*p[3];c[4]=N*p[4];c[5]=N*p[5];return c}function B(c,p){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=p[0];c[7]=p[1];c[8]=1;return c}function K(c,p){const N=Math.sin(p);p=Math.cos(p);c[0]=p;c[1]=
N;c[2]=0;c[3]=-N;c[4]=p;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c}function G(c,p){c[0]=p[0];c[1]=0;c[2]=0;c[3]=0;c[4]=p[1];c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c}function Q(c,p){c[0]=p[0];c[1]=p[1];c[2]=0;c[3]=p[2];c[4]=p[3];c[5]=0;c[6]=p[4];c[7]=p[5];c[8]=1;return c}function J(c,p){var N=p[0],ia=p[1],z=p[2];p=p[3];var C=N+N,M=ia+ia;const W=z+z;N*=C;const e=ia*C;ia*=M;const k=z*C,A=z*M;z*=W;C*=p;M*=p;p*=W;c[0]=1-ia-z;c[3]=e-p;c[6]=k+M;c[1]=e+p;c[4]=1-N-z;c[7]=A-C;c[2]=k-M;c[5]=A+C;c[8]=1-N-ia;return c}function ea(c,
p){const N=p[0],ia=p[1],z=p[2],C=p[4],M=p[5],W=p[6],e=p[8],k=p[9];p=p[10];const A=p*M-W*k,S=-p*C+W*e,Z=k*C-M*e;var V=N*A+ia*S+z*Z;if(!V)return null;V=1/V;c[0]=A*V;c[1]=(-p*ia+z*k)*V;c[2]=(W*ia-z*M)*V;c[3]=S*V;c[4]=(p*N-z*e)*V;c[5]=(-W*N+z*C)*V;c[6]=Z*V;c[7]=(-k*N+ia*e)*V;c[8]=(M*N-ia*C)*V;return c}function ha(c,p){const N=p[0],ia=p[1],z=p[2],C=p[3],M=p[4],W=p[5],e=p[6],k=p[7];var A=p[8],S=p[9],Z=p[10],V=p[11];const F=p[12],O=p[13],ca=p[14];p=p[15];const ja=N*W-ia*M,pa=N*e-z*M,aa=N*k-C*M,D=ia*e-z*
W,b=ia*k-C*W,E=z*k-C*e,R=A*O-S*F,T=A*ca-Z*F;A=A*p-V*F;const oa=S*ca-Z*O;S=S*p-V*O;Z=Z*p-V*ca;V=ja*Z-pa*S+aa*oa+D*A-b*T+E*R;if(!V)return null;V=1/V;c[0]=(W*Z-e*S+k*oa)*V;c[1]=(e*A-M*Z-k*T)*V;c[2]=(M*S-W*A+k*R)*V;c[3]=(z*S-ia*Z-C*oa)*V;c[4]=(N*Z-z*A+C*T)*V;c[5]=(ia*A-N*S-C*R)*V;c[6]=(O*E-ca*b+p*D)*V;c[7]=(ca*aa-F*E-p*pa)*V;c[8]=(F*b-O*aa+p*ja)*V;return c}function Y(c,p,N){c[0]=2/p;c[1]=0;c[2]=0;c[3]=0;c[4]=-2/N;c[5]=0;c[6]=-1;c[7]=1;c[8]=1;return c}function X(c){return"mat3("+c[0]+", "+c[1]+", "+c[2]+
", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+")"}function ma(c){return Math.sqrt(c[0]**2+c[1]**2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**2+c[7]**2+c[8]**2)}function g(c,p,N){c[0]=p[0]+N[0];c[1]=p[1]+N[1];c[2]=p[2]+N[2];c[3]=p[3]+N[3];c[4]=p[4]+N[4];c[5]=p[5]+N[5];c[6]=p[6]+N[6];c[7]=p[7]+N[7];c[8]=p[8]+N[8];return c}function y(c,p,N){c[0]=p[0]-N[0];c[1]=p[1]-N[1];c[2]=p[2]-N[2];c[3]=p[3]-N[3];c[4]=p[4]-N[4];c[5]=p[5]-N[5];c[6]=p[6]-N[6];c[7]=p[7]-N[7];c[8]=p[8]-N[8];return c}function P(c,
p,N){c[0]=p[0]*N;c[1]=p[1]*N;c[2]=p[2]*N;c[3]=p[3]*N;c[4]=p[4]*N;c[5]=p[5]*N;c[6]=p[6]*N;c[7]=p[7]*N;c[8]=p[8]*N;return c}function U(c,p,N,ia){c[0]=p[0]+N[0]*ia;c[1]=p[1]+N[1]*ia;c[2]=p[2]+N[2]*ia;c[3]=p[3]+N[3]*ia;c[4]=p[4]+N[4]*ia;c[5]=p[5]+N[5]*ia;c[6]=p[6]+N[6]*ia;c[7]=p[7]+N[7]*ia;c[8]=p[8]+N[8]*ia;return c}function ba(c,p){return c[0]===p[0]&&c[1]===p[1]&&c[2]===p[2]&&c[3]===p[3]&&c[4]===p[4]&&c[5]===p[5]&&c[6]===p[6]&&c[7]===p[7]&&c[8]===p[8]}function ka(c,p){const N=c[0],ia=c[1],z=c[2],C=
c[3],M=c[4],W=c[5],e=c[6],k=c[7];c=c[8];const A=p[0],S=p[1],Z=p[2],V=p[3],F=p[4],O=p[5],ca=p[6],ja=p[7];p=p[8];return Math.abs(N-A)<=f.EPSILON*Math.max(1,Math.abs(N),Math.abs(A))&&Math.abs(ia-S)<=f.EPSILON*Math.max(1,Math.abs(ia),Math.abs(S))&&Math.abs(z-Z)<=f.EPSILON*Math.max(1,Math.abs(z),Math.abs(Z))&&Math.abs(C-V)<=f.EPSILON*Math.max(1,Math.abs(C),Math.abs(V))&&Math.abs(M-F)<=f.EPSILON*Math.max(1,Math.abs(M),Math.abs(F))&&Math.abs(W-O)<=f.EPSILON*Math.max(1,Math.abs(W),Math.abs(O))&&Math.abs(e-
ca)<=f.EPSILON*Math.max(1,Math.abs(e),Math.abs(ca))&&Math.abs(k-ja)<=f.EPSILON*Math.max(1,Math.abs(k),Math.abs(ja))&&Math.abs(c-p)<=f.EPSILON*Math.max(1,Math.abs(c),Math.abs(p))}function fa(c){const p=f.EPSILON,N=c[0],ia=c[1],z=c[2],C=c[3],M=c[4],W=c[5],e=c[6],k=c[7];c=c[8];return Math.abs(1-(N*N+C*C+e*e))<=p&&Math.abs(1-(ia*ia+M*M+k*k))<=p&&Math.abs(1-(z*z+W*W+c*c))<=p}const qa=Object.freeze({__proto__:null,fromMat4:d,copy:q,set:t,identity:v,transpose:w,invert:h,adjoint:l,determinant:u,multiply:m,
translate:r,rotate:x,scale:I,scaleByVec2:n,fromTranslation:B,fromRotation:K,fromScaling:G,fromMat2d:Q,fromQuat:J,normalFromMat4Legacy:ea,normalFromMat4:ha,projection:Y,str:X,frob:ma,add:g,subtract:y,multiplyScalar:P,multiplyScalarAndAdd:U,exactEquals:ba,equals:ka,isOrthoNormal:fa,mul:m,sub:y});a.add=g;a.adjoint=l;a.copy=q;a.determinant=u;a.equals=ka;a.exactEquals=ba;a.frob=ma;a.fromMat2d=Q;a.fromMat4=d;a.fromQuat=J;a.fromRotation=K;a.fromScaling=G;a.fromTranslation=B;a.identity=v;a.invert=h;a.isOrthoNormal=
fa;a.mat3=qa;a.mul=m;a.multiply=m;a.multiplyScalar=P;a.multiplyScalarAndAdd=U;a.normalFromMat4=ha;a.normalFromMat4Legacy=ea;a.projection=Y;a.rotate=x;a.scale=I;a.scaleByVec2=n;a.set=t;a.str=X;a.sub=y;a.subtract=y;a.translate=r;a.transpose=w})},"esri/chunks/mat3f64":function(){define(["exports"],function(a){function f(){return[1,0,0,0,1,0,0,0,1]}function d(w){return[w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7],w[8]]}function q(w,h,l,u,m,r,x,I,n){return[w,h,l,u,m,r,x,I,n]}function t(w,h){return new Float64Array(w,
h,9)}const v=Object.freeze({__proto__:null,create:f,clone:d,fromValues:q,createView:t});a.clone=d;a.create=f;a.createView=t;a.fromValues=q;a.mat3f64=v})},"esri/chunks/mat4f64":function(){define(["exports"],function(a){function f(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function d(h){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9],h[10],h[11],h[12],h[13],h[14],h[15]]}function q(h,l,u,m,r,x,I,n,B,K,G,Q,J,ea,ha,Y){return[h,l,u,m,r,x,I,n,B,K,G,Q,J,ea,ha,Y]}function t(h,l){return new Float64Array(h,
l,16)}const v=f(),w=Object.freeze({__proto__:null,create:f,clone:d,fromValues:q,createView:t,IDENTITY:v});a.IDENTITY=v;a.clone=d;a.create=f;a.createView=t;a.fromValues=q;a.mat4f64=w})},"esri/geometry/support/frustum":function(){define("exports ../../core/ObjectStack ../../chunks/mat4 ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/vec4 ../../chunks/vec4f64 ./clipRay ./plane ./vectorStacks".split(" "),function(a,f,d,q,t,v,w,h,l,u){function m(){return[t.create(),t.create(),t.create(),t.create(),
t.create(),t.create(),t.create(),t.create()]}function r(G,Q){l.fromPoints(Q[a.PointIndex.FAR_BOTTOM_LEFT],Q[a.PointIndex.NEAR_BOTTOM_LEFT],Q[a.PointIndex.NEAR_TOP_LEFT],G[a.PlaneIndex.LEFT]);l.fromPoints(Q[a.PointIndex.NEAR_BOTTOM_RIGHT],Q[a.PointIndex.FAR_BOTTOM_RIGHT],Q[a.PointIndex.FAR_TOP_RIGHT],G[a.PlaneIndex.RIGHT]);l.fromPoints(Q[a.PointIndex.FAR_BOTTOM_LEFT],Q[a.PointIndex.FAR_BOTTOM_RIGHT],Q[a.PointIndex.NEAR_BOTTOM_RIGHT],G[a.PlaneIndex.BOTTOM]);l.fromPoints(Q[a.PointIndex.NEAR_TOP_LEFT],
Q[a.PointIndex.NEAR_TOP_RIGHT],Q[a.PointIndex.FAR_TOP_RIGHT],G[a.PlaneIndex.TOP]);l.fromPoints(Q[a.PointIndex.NEAR_BOTTOM_LEFT],Q[a.PointIndex.NEAR_BOTTOM_RIGHT],Q[a.PointIndex.NEAR_TOP_RIGHT],G[a.PlaneIndex.NEAR]);l.fromPoints(Q[a.PointIndex.FAR_BOTTOM_RIGHT],Q[a.PointIndex.FAR_BOTTOM_LEFT],Q[a.PointIndex.FAR_TOP_LEFT],G[a.PlaneIndex.FAR])}function x(G,Q){for(let J=0;J<a.NumPlanes.NUM;J++)if(!l.clip(G[J],Q))return!1;return!0}a.PlaneIndex=void 0;(function(G){G[G.LEFT=0]="LEFT";G[G.RIGHT=1]="RIGHT";
G[G.BOTTOM=2]="BOTTOM";G[G.TOP=3]="TOP";G[G.NEAR=4]="NEAR";G[G.FAR=5]="FAR"})(a.PlaneIndex||(a.PlaneIndex={}));a.PointIndex=void 0;(function(G){G[G.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT";G[G.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT";G[G.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT";G[G.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT";G[G.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT";G[G.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT";G[G.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT";G[G.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"})(a.PointIndex||(a.PointIndex={}));const I=
{bottom:[a.PointIndex.FAR_BOTTOM_RIGHT,a.PointIndex.NEAR_BOTTOM_RIGHT,a.PointIndex.NEAR_BOTTOM_LEFT,a.PointIndex.FAR_BOTTOM_LEFT],near:[a.PointIndex.NEAR_BOTTOM_LEFT,a.PointIndex.NEAR_BOTTOM_RIGHT,a.PointIndex.NEAR_TOP_RIGHT,a.PointIndex.NEAR_TOP_LEFT],far:[a.PointIndex.FAR_BOTTOM_RIGHT,a.PointIndex.FAR_BOTTOM_LEFT,a.PointIndex.FAR_TOP_LEFT,a.PointIndex.FAR_TOP_RIGHT],right:[a.PointIndex.NEAR_BOTTOM_RIGHT,a.PointIndex.FAR_BOTTOM_RIGHT,a.PointIndex.FAR_TOP_RIGHT,a.PointIndex.NEAR_TOP_RIGHT],left:[a.PointIndex.FAR_BOTTOM_LEFT,
a.PointIndex.NEAR_BOTTOM_LEFT,a.PointIndex.NEAR_TOP_LEFT,a.PointIndex.FAR_TOP_LEFT],top:[a.PointIndex.FAR_TOP_LEFT,a.PointIndex.NEAR_TOP_LEFT,a.PointIndex.NEAR_TOP_RIGHT,a.PointIndex.FAR_TOP_RIGHT]};a.NumPlanes=void 0;(function(G){G[G.NUM=6]="NUM"})(a.NumPlanes||(a.NumPlanes={}));a.NumPoints=void 0;(function(G){G[G.NUM=8]="NUM"})(a.NumPoints||(a.NumPoints={}));const n=[w.fromValues(-1,-1,-1,1),w.fromValues(1,-1,-1,1),w.fromValues(1,1,-1,1),w.fromValues(-1,1,-1,1),w.fromValues(-1,-1,1,1),w.fromValues(1,
-1,1,1),w.fromValues(1,1,1,1),w.fromValues(-1,1,1,1)],B=new f.ObjectStack(h.create),K=m();a.computePlanes=r;a.copy=function(G,Q){for(let J=0;J<a.NumPlanes.NUM;J++)l.copy(G[J],Q[J])};a.create=function(G){return G?[l.create(G[0]),l.create(G[1]),l.create(G[2]),l.create(G[3]),l.create(G[4]),l.create(G[5])]:[l.create(),l.create(),l.create(),l.create(),l.create(),l.create()]};a.createPoints=m;a.fromMatrix=function(G,Q,J,ea=K){G=d.multiply(u.sm4d.get(),Q,G);d.invert(G,G);for(Q=0;Q<a.NumPoints.NUM;++Q){const ha=
v.transformMat4(u.sv4d.get(),n[Q],G);q.set(ea[Q],ha[0]/ha[3],ha[1]/ha[3],ha[2]/ha[3])}r(J,ea)};a.intersectClipRay=function(G,Q){for(let J=0;J<a.NumPlanes.NUM;J++)if(!l.clipInfinite(G[J],Q))return!1;return!0};a.intersectsAABB=function(G,Q){for(let J=0;J<a.NumPlanes.NUM;J++)if(l.isAABBFullyInside(G[J],Q))return!1;return!0};a.intersectsLineSegment=function(G,Q,J){return x(G,h.fromLineSegmentAndDirection(Q,J,B.get()))};a.intersectsPoint=function(G,Q){for(let J=0;J<a.NumPlanes.NUM;J++)if(0<l.signedDistance(G[J],
Q))return!1;return!0};a.intersectsRay=function(G,Q){return x(G,h.fromRay(Q,B.get()))};a.intersectsSphere=function(G,Q){for(let J=0;J<a.NumPlanes.NUM;J++){const ea=G[J];if(ea[0]*Q[0]+ea[1]*Q[1]+ea[2]*Q[2]+ea[3]>=Q[3])return!1}return!0};a.planePointIndices=I;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/core/ObjectStack":function(){define(["exports","./nextTick"],function(a,f){let d=function(){function q(v){this.allocator=v;this._items=[];this._itemsPtr=0;this._grow()}var t=q.prototype;
t.get=function(){0===this._itemsPtr&&f.nextTick(()=>this._reset());this._itemsPtr===this._items.length&&this._grow();return this._items[this._itemsPtr++]};t._reset=function(){this._items.length=Math.min(Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3072),this._items.length);this._itemsPtr=0};t._grow=function(){for(let v=0;v<Math.max(8,Math.min(this._items.length,1024));v++)this._items.push(this.allocator())};return q}();a.ObjectStack=d;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/vec4f64":function(){define(["exports"],
function(a){function f(){return[0,0,0,0]}function d(J){return[J[0],J[1],J[2],J[3]]}function q(J,ea,ha,Y){return[J,ea,ha,Y]}function t(J){const ea=f(),ha=Math.min(4,J.length);for(let Y=0;Y<ha;++Y)ea[Y]=J[Y];return ea}function v(J,ea){return new Float64Array(J,ea,4)}function w(){return f()}function h(){return[1,1,1,1]}function l(){return[1,0,0,0]}function u(){return[0,1,0,0]}function m(){return[0,0,1,0]}function r(){return[0,0,0,1]}const x=f(),I=h(),n=l(),B=u(),K=m(),G=r(),Q=Object.freeze({__proto__:null,
create:f,clone:d,fromValues:q,fromArray:t,createView:v,zeros:w,ones:h,unitX:l,unitY:u,unitZ:m,unitW:r,ZEROS:x,ONES:I,UNIT_X:n,UNIT_Y:B,UNIT_Z:K,UNIT_W:G});a.ONES=I;a.UNIT_W=G;a.UNIT_X=n;a.UNIT_Y=B;a.UNIT_Z=K;a.ZEROS=x;a.clone=d;a.create=f;a.createView=v;a.fromArray=t;a.fromValues=q;a.ones=h;a.unitW=r;a.unitX=l;a.unitY=u;a.unitZ=m;a.vec4f64=Q;a.zeros=w})},"esri/geometry/support/clipRay":function(){define(["exports","../../core/ObjectStack","../../chunks/vec3","./ray","./vectorStacks"],function(a,f,
d,q,t){function v(m){return m?{ray:q.create(m.ray),c0:m.c0,c1:m.c1}:{ray:q.create(),c0:0,c1:Number.MAX_VALUE}}function w(m,r,x,I=v()){q.copy(m,I.ray);I.c0=r;I.c1=x;return I}function h(m,r,x=v()){const I=d.length(m.vector);q.fromValues(m.origin,r,x.ray);x.c0=0;x.c1=I;return x}function l(m,r,x){return d.add(x,m.ray.origin,d.scale(x,m.ray.direction,r))}const u=new f.ObjectStack(()=>({c0:0,c1:0,ray:null}));a.copy=function(m,r=v()){return w(m.ray,m.c0,m.c1,r)};a.create=v;a.fromLineSegment=function(m,r=
v()){const x=d.normalize(t.sv3d.get(),m.vector);return h(m,x,r)};a.fromLineSegmentAndDirection=h;a.fromRay=function(m,r=v()){q.copy(m,r.ray);r.c0=0;r.c1=Number.MAX_VALUE;return r};a.fromValues=w;a.getAt=l;a.getEnd=function(m,r){return l(m,m.c1,r)};a.getStart=function(m,r){return l(m,m.c0,r)};a.wrap=function(m,r,x){const I=u.get();I.ray=m;I.c0=r;I.c1=x;return I};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/geometry/support/ray":function(){define("exports ../../core/arrayUtils ../../core/ObjectStack ../../chunks/vec3 ../../chunks/vec3f64 ./vectorStacks".split(" "),
function(a,f,d,q,t,v){function w(m){return m?{origin:t.clone(m.origin),direction:t.clone(m.direction)}:{origin:t.create(),direction:t.create()}}function h(m,r,x=w()){q.copy(x.origin,m);q.copy(x.direction,r);return x}function l(m,r){m=q.cross(v.sv3d.get(),q.normalize(v.sv3d.get(),m.direction),q.subtract(v.sv3d.get(),r,m.origin));return q.dot(m,m)}const u=new d.ObjectStack(function(){return{origin:null,direction:null}});a.closestPoint=function(m,r,x){r=q.dot(m.direction,q.subtract(x,r,m.origin));q.add(x,
m.origin,q.scale(x,m.direction,r));return x};a.copy=function(m,r=w()){return h(m.origin,m.direction,r)};a.create=w;a.distance=function(m,r){return Math.sqrt(l(m,r))};a.distance2=l;a.equals=function(m,r){return f.equals(m.origin,r.origin)&&f.equals(m.direction,r.direction)};a.fromPoints=function(m,r,x=w()){q.copy(x.origin,m);q.subtract(x.direction,r,m);return x};a.fromValues=h;a.wrap=function(m,r){const x=u.get();x.origin=m;x.direction=r;return x};Object.defineProperty(a,"__esModule",{value:!0})})},
"esri/geometry/support/vectorStacks":function(){define(["exports","../../core/VectorStack"],function(a,f){const d=f.VectorStack.createVec2f64(),q=f.VectorStack.createVec3f64(),t=f.VectorStack.createVec4f64(),v=f.VectorStack.createMat3f64(),w=f.VectorStack.createMat4f64();f=f.VectorStack.createQuatf64();a.sm3d=v;a.sm4d=w;a.sq4d=f;a.sv2d=d;a.sv3d=q;a.sv4d=t;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/core/VectorStack":function(){define("exports ../chunks/_rollupPluginBabelHelpers ./byteSizeEstimations ./nextTick ../chunks/mat3f64 ../chunks/mat4f64 ../chunks/quatf64 ../chunks/vec2f64 ../chunks/vec3f64 ../chunks/vec4f64".split(" "),
function(a,f,d,q,t,v,w,h,l,u){let m=function(){function x(n,B,K){this.itemByteSize=n;this.itemCreate=B;this._buffers=[];this._items=[];this._itemsPtr=0;this._itemsPerBuffer=Math.ceil(K/this.itemByteSize)}var I=x.prototype;I.get=function(){0===this._itemsPtr&&q.nextTick(()=>this._reset());const n=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=n;){const B=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize);for(let K=0;K<this._itemsPerBuffer;++K)this._items.push(this.itemCreate(B,
K*this.itemByteSize));this._buffers.push(B)}return this._items[this._itemsPtr++]};I._reset=function(){const n=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>n;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0};x.createVec2f64=function(n=r){return new x(16,h.createView,n)};x.createVec3f64=function(n=r){return new x(24,l.createView,n)};x.createVec4f64=function(n=r){return new x(32,u.createView,n)};x.createMat3f64=function(n=
r){return new x(72,t.createView,n)};x.createMat4f64=function(n=r){return new x(128,v.createView,n)};x.createQuatf64=function(n=r){return new x(32,w.createView,n)};f._createClass(x,[{key:"test",get:function(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}}]);return x}();const r=4*d.ByteSizeUnit.KILOBYTES;a.VectorStack=m;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(a){function f(d){return 32+d.length}
a.ByteSizeUnit=void 0;(function(d){d[d.KILOBYTES=1024]="KILOBYTES";d[d.MEGABYTES=1048576]="MEGABYTES";d[d.GIGABYTES=1073741824]="GIGABYTES"})(a.ByteSizeUnit||(a.ByteSizeUnit={}));a.estimateAttributesObjectSize=function(d){if(!d)return 0;let q=32;for(const t in d)if(d.hasOwnProperty(t)){const v=d[t];switch(typeof v){case "string":q+=f(v);break;case "number":q+=16;break;case "boolean":q+=4}}return q};a.estimateFixedArraySize=function(d,q){return 32+d.length*q};a.estimateNumberByteSize=function(){return 16};
a.estimateStringByteSize=f;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/quatf64":function(){define(["exports"],function(a){function f(){return[0,0,0,1]}function d(h){return[h[0],h[1],h[2],h[3]]}function q(h,l,u,m){return[h,l,u,m]}function t(h,l){return new Float64Array(h,l,4)}const v=f(),w=Object.freeze({__proto__:null,create:f,clone:d,fromValues:q,createView:t,IDENTITY:v});a.IDENTITY=v;a.clone=d;a.create=f;a.createView=t;a.fromValues=q;a.quatf64=w})},"esri/chunks/vec2f64":function(){define(["exports"],
function(a){function f(){return[0,0]}function d(B){return[B[0],B[1]]}function q(B,K){return[B,K]}function t(B){const K=[0,0],G=Math.min(2,B.length);for(let Q=0;Q<G;++Q)K[Q]=B[Q];return K}function v(B,K){return new Float64Array(B,K,2)}function w(){return[0,0]}function h(){return[1,1]}function l(){return[1,0]}function u(){return[0,1]}const m=[0,0],r=[1,1],x=[1,0],I=[0,1],n=Object.freeze({__proto__:null,create:f,clone:d,fromValues:q,fromArray:t,createView:v,zeros:w,ones:h,unitX:l,unitY:u,ZEROS:m,ONES:r,
UNIT_X:x,UNIT_Y:I});a.ONES=r;a.UNIT_X=x;a.UNIT_Y=I;a.ZEROS=m;a.clone=d;a.create=f;a.createView=v;a.fromArray=t;a.fromValues=q;a.ones=h;a.unitX=l;a.unitY=u;a.vec2f64=n;a.zeros=w})},"esri/geometry/support/plane":function(){define("exports ../../core/mathUtils ../../core/maybe ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/sphere ./vectorStacks".split(" "),function(a,f,d,q,t,v,w){function h(g=ha){return[g[0],g[1],g[2],g[3]]}function l(g,y){return u(y[0],y[1],y[2],y[3],g)}function u(g,y,P,U,ba=h()){ba[0]=
g;ba[1]=y;ba[2]=P;ba[3]=U;return ba}function m(g,y,P){var U=y[0]*y[0]+y[1]*y[1]+y[2]*y[2];U=1E-5<Math.abs(U-1)&&1E-12<U?1/Math.sqrt(U):1;P[0]=y[0]*U;P[1]=y[1]*U;P[2]=y[2]*U;P[3]=-(P[0]*g[0]+P[1]*g[1]+P[2]*g[2]);return P}function r(g,y,P,U=h()){var ba=P[0]-y[0],ka=P[1]-y[1],fa=P[2]-y[2];P=g[0]-y[0];const qa=g[1]-y[1],c=g[2]-y[2];y=ka*c-fa*qa;fa=fa*P-ba*c;ba=ba*qa-ka*P;ka=y*y+fa*fa+ba*ba;ka=1E-5<Math.abs(ka-1)&&1E-12<ka?1/Math.sqrt(ka):1;U[0]=y*ka;U[1]=fa*ka;U[2]=ba*ka;U[3]=-(U[0]*g[0]+U[1]*g[1]+U[2]*
g[2])}function x(g,y,P,U,ba){if(3>g.count)return!1;g.getVec(P,K);let ka=U,fa=!1;for(;ka<g.count-1&&!fa;)g.getVec(ka,G),ka++,fa=!q.exactEquals(K,G);if(!fa)return!1;ka=Math.max(ka,ba);for(fa=!1;ka<g.count&&!fa;)g.getVec(ka,Q),ka++,q.subtract(J,K,G),q.normalize(J,J),q.subtract(ea,G,Q),q.normalize(ea,ea),fa=!q.exactEquals(K,Q)&&!q.exactEquals(G,Q)&&.99619469809>Math.abs(q.dot(J,ea));if(!fa)return 0===P&&1===U&&2===ba?!1:x(g,y,0,1,2);r(K,G,Q,y);return!0}function I(g,y,P){g=q.scale(w.sv3d.get(),g,q.dot(g,
y));q.subtract(P,y,g);return P}function n(g,y){return q.dot(g,y)+g[3]}function B(g,y,P,U,ba){const ka=q.dot(g,P);if(0===ka)return!1;g=-(q.dot(g,y)+g[3])/ka;U&Y.CLAMP&&(g=f.clamp(g,0,1));if(!(U&Y.INFINITE_MIN)&&0>g||!(U&Y.INFINITE_MAX)&&1<g)return!1;q.add(ba,y,q.scale(ba,P,g));return!0}const K=t.create(),G=t.create(),Q=t.create(),J=t.create(),ea=t.create(),ha=[0,0,1,0];var Y;(function(g){g[g.NONE=0]="NONE";g[g.CLAMP=1]="CLAMP";g[g.INFINITE_MIN=4]="INFINITE_MIN";g[g.INFINITE_MAX=8]="INFINITE_MAX"})(Y||
(Y={}));const X=Y.INFINITE_MIN|Y.INFINITE_MAX,ma=Y.INFINITE_MAX;a.UP=ha;a.clip=function(g,y){const P=q.dot(g,y.ray.direction);g=-n(g,y.ray.origin);if(0>g&&0<=P)return!1;if(-1E-6<P&&1E-6>P)return 0<g;if((0>g||0>P)&&!(0>g&&0>P))return!0;g/=P;0<P?g<y.c1&&(y.c1=g):g>y.c0&&(y.c0=g);return y.c0<=y.c1};a.clipInfinite=function(g,y){const P=q.dot(g,y.ray.direction);g=-n(g,y.ray.origin);if(-1E-6<P&&1E-6>P)return 0<g;g/=P;0<P?g<y.c1&&(y.c1=g):g>y.c0&&(y.c0=g);return y.c0<=y.c1};a.copy=l;a.create=h;a.distance=
function(g,y){return Math.abs(n(g,y))};a.fromManyPoints=function(g,y){return x(g,y,0,1,2)};a.fromManyPointsSampleAt=x;a.fromNormalAndOffset=function(g,y,P){q.copy(P,g);P[3]=y;return P};a.fromPoints=r;a.fromPositionAndNormal=m;a.fromValues=u;a.fromVectorsAndPoint=function(g,y,P,U){q.cross(Q,y,g);return m(P,Q,U)};a.intersectLine=function(g,y,P,U){P=q.subtract(w.sv3d.get(),P,y);return B(g,y,P,X,U)};a.intersectLineSegment=function(g,y,P){return B(g,y.origin,y.vector,Y.NONE,P)};a.intersectLineSegmentClamp=
function(g,y,P){return B(g,y.origin,y.vector,Y.CLAMP,P)};a.intersectRay=function(g,y,P){return d.isSome(y)?B(g,y.origin,y.direction,ma,P):!1};a.isAABBFullyInside=function(g,y){const P=y[0],U=y[1],ba=y[2],ka=y[3],fa=y[4];y=y[5];return 0<=g[0]*(0<g[0]?P:ka)+g[1]*(0<g[1]?U:fa)+g[2]*(0<g[2]?ba:y)+g[3]};a.isPointInside=function(g,y){return 0<=n(g,y)};a.isPointOutside=function(g,y){return 0>n(g,y)};a.isSphereFullyInside=function(g,y){return 0<=n(g,v.getCenter(y))-y[3]};a.isSphereFullyOutside=function(g,
y){return 0>n(g,v.getCenter(y))+y[3]};a.negate=function(g,y){y[0]=-g[0];y[1]=-g[1];y[2]=-g[2];y[3]=-g[3];return y};a.normal=function(g){return g};a.projectPoint=function(g,y,P){const U=q.scale(w.sv3d.get(),g,-g[3]);y=q.subtract(w.sv3d.get(),y,U);g=I(g,y,w.sv3d.get());q.add(P,g,U);return P};a.projectVector=I;a.setOffsetFromPoint=function(g,y,P){y!==g&&l(g,y);g[3]=-q.dot(g,P);return g};a.signedDistance=n;a.wrap=function(g,y,P,U){return u(g,y,P,U,w.sv4d.get())};Object.defineProperty(a,"__esModule",{value:!0})})},
"esri/chunks/sphere":function(){define("exports ../core/has ../core/Logger ../core/mathUtils ../core/maybe ./mat4 ./vec3 ./vec3f64 ./vec4 ./vec4f64 ../geometry/support/Axis ../geometry/support/ray ../geometry/support/vector ../geometry/support/vectorStacks".split(" "),function(a,f,d,q,t,v,w,h,l,u,m,r,x,I){function n(){return u.create()}function B(e,k=n()){return l.copy(k,e)}function K(e,k){return u.fromValues(e[0],e[1],e[2],k)}function G(e){return e}function Q(e){e[0]=e[1]=e[2]=e[3]=0}function J(e){return e}
function ea(e){return Array.isArray(e)?e[3]:e}function ha(e){return Array.isArray(e)?e:M}function Y(e,k,A,S){return u.fromValues(e,k,A,S)}function X(e,k,A){e!==A&&w.copy(A,e);A[3]=e[3]+k;return A}function ma(e,k,A){ia.error("sphere.setExtent is not yet supported");return e===A?A:B(e,A)}function g(e,k,A){if(t.isNone(k))return!1;const {origin:S,direction:Z}=k;var V=z;V[0]=S[0]-e[0];V[1]=S[1]-e[1];V[2]=S[2]-e[2];k=Z[0]*Z[0]+Z[1]*Z[1]+Z[2]*Z[2];const F=2*(Z[0]*V[0]+Z[1]*V[1]+Z[2]*V[2]);e=F*F-4*k*(V[0]*
V[0]+V[1]*V[1]+V[2]*V[2]-e[3]*e[3]);if(0>e)return!1;V=Math.sqrt(e);e=(-F-V)/(2*k);k=(-F+V)/(2*k);if(0>e||k<e&&0<k)e=k;if(0>e)return!1;A&&(A[0]=S[0]+Z[0]*e,A[1]=S[1]+Z[1]*e,A[2]=S[2]+Z[2]*e);return!0}function y(e,k){return g(e,k,null)}function P(e,k,A){if(g(e,k,A))return A;e=U(e,k,I.sv3d.get());w.add(A,k.origin,w.scale(I.sv3d.get(),k.direction,w.distance(k.origin,e)/w.length(k.direction)));return A}function U(e,k,A){const S=I.sv3d.get(),Z=I.sm4d.get();w.cross(S,k.origin,k.direction);const V=ea(e);
w.cross(A,S,k.origin);w.scale(A,A,1/w.length(A)*V);e=qa(e,k.origin);k=x.angle(k.origin,A);v.fromRotation(Z,k+e,S);w.transformMat4(A,A,Z);return A}function ba(e,k,A){if(g(e,k,A))return A;r.closestPoint(k,ha(e),A);return ka(e,A,A)}function ka(e,k,A){k=w.subtract(I.sv3d.get(),k,ha(e));k=w.scale(I.sv3d.get(),k,e[3]/w.length(k));return w.add(A,k,ha(e))}function fa(e,k){k=w.subtract(I.sv3d.get(),k,ha(e));k=w.squaredLength(k);return Math.sqrt(Math.abs(k-e[3]*e[3]))}function qa(e,k){k=w.subtract(I.sv3d.get(),
k,ha(e));k=w.length(k);e=ea(e);return q.acosClamped(e/(e+Math.abs(e-k)))}function c(e,k,A,S){e=w.subtract(C,k,ha(e));switch(A){case m.Axis.X:return A=q.cartesianToSpherical(e,C)[2],w.set(S,-Math.sin(A),Math.cos(A),0);case m.Axis.Y:return e=q.cartesianToSpherical(e,C),A=e[1],e=e[2],k=Math.sin(A),w.set(S,-k*Math.cos(e),-k*Math.sin(e),Math.cos(A));case m.Axis.Z:return w.normalize(S,e)}}function p(e,k){k=w.subtract(W,k,ha(e));return w.length(k)-e[3]}function N(e,k,A,S){const Z=p(e,k);e=c(e,k,m.Axis.Z,
W);A=w.scale(W,e,A-Z);return w.add(S,k,A)}const ia=d.getLogger("esri.geometry.support.sphere"),z=h.create(),C=h.create(),M=h.create(),W=h.create();f=Object.freeze({__proto__:null,create:n,copy:B,fromCenterAndRadius:K,wrap:G,clear:Q,fromRadius:J,getRadius:ea,getCenter:ha,fromValues:Y,elevate:X,setExtent:ma,intersectRay:g,intersectsRay:y,intersectRayClosestSilhouette:P,closestPointOnSilhouette:U,closestPoint:ba,projectPoint:ka,distanceToSilhouette:fa,angleToSilhouette:qa,axisAt:c,altitudeAt:p,setAltitudeAt:N});
a.altitudeAt=p;a.angleToSilhouette=qa;a.axisAt=c;a.clear=Q;a.closestPoint=ba;a.closestPointOnSilhouette=U;a.copy=B;a.create=n;a.distanceToSilhouette=fa;a.elevate=X;a.fromCenterAndRadius=K;a.fromRadius=J;a.fromValues=Y;a.getCenter=ha;a.getRadius=ea;a.intersectRay=g;a.intersectRayClosestSilhouette=P;a.intersectsRay=y;a.projectPoint=ka;a.setAltitudeAt=N;a.setExtent=ma;a.sphere=f;a.wrap=G})},"esri/geometry/support/Axis":function(){define(["exports"],function(a){a.Axis=void 0;var f=a.Axis||(a.Axis={});
f[f.X=0]="X";f[f.Y=1]="Y";f[f.Z=2]="Z";Object.defineProperty(a,"__esModule",{value:!0})})},"esri/geometry/support/vector":function(){define(["exports","../../core/mathUtils","../../chunks/vec3","../../chunks/vec3f64"],function(a,f,d,q){const t=q.create(),v=q.create();a.angle=function(w,h){w=d.dot(w,h)/(d.length(w)*d.length(h));return-f.acosClamped(w)};a.angleAroundAxis=function(w,h,l){d.normalize(t,w);d.normalize(v,h);w=d.dot(t,v);w=f.acosClamped(w);h=d.cross(t,t,v);return 0>d.dot(h,l)?2*Math.PI-
w:w};a.projectPoint=function(w,h,l){h=d.dot(w,h)/d.dot(w,w);return d.scale(l,w,h)};a.projectPointSignedLength=function(w,h){return d.dot(w,h)/d.length(w)};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/camera/intersectionUtils":function(){define("exports ../../../core/maybe ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/projectionEllipsoid ../../../geometry/support/aaBoundingRect ../webgl-engine/lib/Intersector".split(" "),function(a,f,d,q,t,v,w){function h(n,B){return n.elevationProvider?
f.unwrapOr(n.elevationProvider.getElevation(B[0],B[1],B[2],n.renderCoordsHelper.spatialReference,"ground"),0):0}function l(n,B,K){if(!n.state.isGlobal)return!1;const G=h(n,B);({far:n}=n.stateManager.constraintsManager.nearFarHeuristic.compute(B,K,n.renderDataExtent,G,I));n*=n;return d.squaredDistance(B,K)>n}const u={},m=q.create(),r=q.create(),x=q.create(),I={near:0,far:0};a.cameraOnContentAlongViewDirection=function(n,B,K,G){const Q=n.state.camera.clone();B&&(Q.eye=B,Q.center=K,Q.up=G);B=Q.ray;K=
u[n.viewingMode];K||(K=w.newIntersector(n.state.viewingMode),K.options.backfacesTerrain=!n.state.isGlobal,K.options.invisibleTerrain=!0,u[n.viewingMode]=K);({isGlobal:G}=n.state);n.sceneIntersectionHelper.intersectRay(B,K,r)&&!l(n,B.origin,r)?B=!0:!n.renderCoordsHelper.intersectManifold(B,0,r)||l(n,B.origin,r)?G?(K=t.getReferenceEllipsoid(n.spatialReference).radius,K=d.dot(B.origin,B.origin)-K*K,d.scale(r,B.direction,(0<K?Math.sqrt(K)/3:1)/d.length(B.direction)),d.add(r,r,B.origin),B=!0):B=!1:B=!0;
B||d.copy(r,Q.center);K=n.state.constraints;G=K.minimumPoiDistance;d.squaredDistance(Q.eye,r)<G&&(B=K.collision.enabled,d.copy(x,Q.viewForward),d.scale(x,x,G),B?Q.eye=d.subtract(m,r,x):d.add(r,Q.eye,x),n=n.renderCoordsHelper,G=n.getAltitude(Q.eye),K=K.collision.elevationMargin,B&&G<K&&(d.subtract(x,r,Q.eye),Q.eye=n.setAltitude(m,K,Q.eye),d.add(r,Q.eye,x)));Q.center=r;return Q};a.eyeWithinExtent=function(n,B,K,G){return f.isSome(n.renderCoordsHelper.fromRenderCoords(B.eye,m,G))&&v.containsPoint(K,
m)};a.surfaceElevationBelowRenderLocation=h;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Intersector":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f64 ../../../../geometry/support/ray ../../../ViewingMode ./IntersectorInterfaces ./intersectorUtils ./verticalOffsetUtils ../materials/renderers/utils".split(" "),
function(a,f,d,q,t,v,w,h,l,u,m,r,x,I,n){function B(ha){return new Q(ha)}let K=function(){function ha(X){this.options=new r.IntersectorOptions;this._results=new G;this.transform=new I.IntersectorTransform;this.tolerance=1E-5;this.verticalOffset=null;this._ray=u.create();this._rayEnd=w.create();this._rayBeginTransformed=w.create();this._rayEndTransformed=w.create();this.viewingMode=null==X?m.ViewingMode.Global:X}var Y=ha.prototype;Y.reset=function(X,ma,g){this.resetWithRay(u.fromPoints(X,ma,this._ray),
g)};Y.resetWithRay=function(X,ma){this.camera=ma;X!==this._ray&&u.copy(X,this._ray);0!==this.options.verticalOffset?this.viewingMode===m.ViewingMode.Local?this._ray.origin[2]-=this.options.verticalOffset:this.verticalOffset=this.options.verticalOffset:this.verticalOffset=null;v.add(this._rayEnd,this._ray.origin,this._ray.direction);this._results.init(this._ray)};Y.intersect=function(X=null,ma,g,y,P){this.point=ma;this.filterPredicate=y;this.tolerance=null==g?1E-5:g;ma=I.getVerticalOffsetObject3D(this.verticalOffset);
if(d.isSome(X)&&0<X.length){const U=P?ba=>{P(ba)&&this.intersectObject(ba)}:ba=>{this.intersectObject(ba)};for(const ba of X)X=ba.getSpatialQueryAccelerator&&ba.getSpatialQueryAccelerator(),d.isSome(X)?(d.isSome(ma)?X.forEachAlongRayWithVerticalOffset(this._ray.origin,this._ray.direction,U,ma):X.forEachAlongRay(this._ray.origin,this._ray.direction,U),this.options.selectionMode&&this.options.hud&&X.forEachDegenerateObject(U)):ba.objects.forAll(ka=>U(ka))}this.sortResults()};Y.intersectObject=function(X){const ma=
X.geometryRecords;if(ma){var g=X.transformation,y=I.getVerticalOffsetObject3D(this.verticalOffset);for(const P of ma){const {geometry:U,material:ba,instanceParameters:ka}=P;if(n.isInstanceHidden(ka))continue;const fa=U.id;this.transform.setAndInvalidateLazyTransforms(g,P.getShaderTransformation());v.transformMat4(this._rayBeginTransformed,this.rayBegin,this.transform.inverse);v.transformMat4(this._rayEndTransformed,this.rayEnd,this.transform.inverse);const qa=this.transform.transform;d.isSome(y)&&
(y.objectTransform=this.transform);ba.intersect(U,ka,this.transform.transform,this,this._rayBeginTransformed,this._rayEndTransformed,(c,p,N,ia,z,C)=>{0<=c&&(!d.isSome(this.filterPredicate)||this.filterPredicate(this._ray.origin,this._rayEnd,c))&&(ia?(null==this._results.hud.dist||c<this._results.hud.dist)&&this._results.hud.set(r.IntersectorType.HUD,{object:X,geometryId:fa,triangleNr:N,center:C},c,p,t.IDENTITY,z):((null==this._results.min.drapedLayerOrder||z>=this._results.min.drapedLayerOrder)&&
(null==this._results.min.dist||c<this._results.min.dist)&&this._results.min.set(r.IntersectorType.OBJECT,{object:X,geometryId:fa,triangleNr:N},c,p,qa,z),this.options.store!==r.StoreResults.MIN&&(null==this._results.max.drapedLayerOrder||z<this._results.max.drapedLayerOrder)&&(null==this._results.max.dist||c>this._results.max.dist)&&this._results.max.set(r.IntersectorType.OBJECT,{object:X,geometryId:fa,triangleNr:N},c,p,qa,z),this.options.store===r.StoreResults.ALL&&(ia=B(this._ray),ia.set(r.IntersectorType.OBJECT,
{object:X,geometryId:fa,triangleNr:N},c,p,qa),this._results.all.push(ia))))},P.shaderTransformation)}}};Y.sortResults=function(){this._results.all.sort((X,ma)=>X.dist!==ma.dist?d.unwrapOr(X.dist,0)-d.unwrapOr(ma.dist,0):X.drapedLayerOrder!==ma.drapedLayerOrder?d.unwrapOr(X.drapedLayerOrder,Number.MAX_VALUE)-d.unwrapOr(ma.drapedLayerOrder,Number.MAX_VALUE):d.unwrapOr(ma.drapedLayerGraphicOrder,Number.MIN_VALUE)-d.unwrapOr(X.drapedLayerGraphicOrder,Number.MIN_VALUE))};f._createClass(ha,[{key:"results",
get:function(){return this._results}},{key:"ray",get:function(){return this._ray}},{key:"rayBegin",get:function(){return this._ray.origin}},{key:"rayEnd",get:function(){return this._rayEnd}}]);return ha}(),G=function(){function ha(){this._min=new Q(u.create());this._max=new Q(u.create());this._hud=new Q(u.create());this._ground=new Q(u.create())}ha.prototype.init=function(Y){this._min.init(Y);this._max.init(Y);this._hud.init(Y);this._ground.init(Y);this.all=[]};f._createClass(ha,[{key:"min",get:function(){return this._min}},
{key:"max",get:function(){return this._max}},{key:"hud",get:function(){return this._hud}},{key:"ground",get:function(){return this._ground}}]);return ha}(),Q=function(){function ha(X){this.intersector=r.IntersectorType.OBJECT;this.normal=w.create();this.transformation=t.create();this._ray=u.create();this.init(X)}var Y=ha.prototype;Y.getIntersectionPoint=function(X){if(!x.isValidIntersectorResult(this))return!1;v.scale(J,this.ray.direction,this.dist);v.add(X,this.ray.origin,J);return!0};Y.getTransformedNormal=
function(X){v.copy(ea,this.normal);ea[3]=0;h.transformMat4(ea,ea,this.transformation);v.copy(X,ea);return v.normalize(X,X)};Y.init=function(X){this.drapedLayerGraphicOrder=this.drapedLayerOrder=this.target=this.dist=null;this.intersector=r.IntersectorType.OBJECT;u.copy(X,this._ray)};Y.set=function(X,ma,g,y,P,U,ba){this.intersector=X;this.dist=g;v.copy(this.normal,d.unwrapOr(y,w.UNIT_Z));q.copy(this.transformation,d.unwrapOr(P,t.IDENTITY));this.target=ma;this.drapedLayerOrder=U;this.drapedLayerGraphicOrder=
ba};Y.copy=function(X){u.copy(X.ray,this._ray);this.intersector=X.intersector;this.dist=X.dist;this.target=X.target;this.drapedLayerOrder=X.drapedLayerOrder;this.drapedLayerGraphicOrder=X.drapedLayerGraphicOrder;v.copy(this.normal,X.normal);q.copy(this.transformation,X.transformation)};f._createClass(ha,[{key:"ray",get:function(){return this._ray}},{key:"distanceInRenderSpace",get:function(){return d.isSome(this.dist)?(v.scale(J,this.ray.direction,this.dist),v.length(J)):null}}]);return ha}();const J=
w.create(),ea=l.create();a.DEFAULT_TOLERANCE=1E-5;a.newIntersector=function(ha){return new K(ha)};a.newIntersectorResult=B;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/IntersectorInterfaces":function(){define(["exports"],function(a){a.IntersectorType=void 0;(function(f){f[f.OBJECT=0]="OBJECT";f[f.HUD=1]="HUD";f[f.TERRAIN=2]="TERRAIN";f[f.OVERLAY=3]="OVERLAY";f[f.I3S=4]="I3S";f[f.PCL=5]="PCL";f[f.LOD=6]="LOD";f[f.VOXEL=7]="VOXEL"})(a.IntersectorType||(a.IntersectorType=
{}));a.StoreResults=void 0;(function(f){f[f.MIN=0]="MIN";f[f.MINMAX=1]="MINMAX";f[f.ALL=2]="ALL"})(a.StoreResults||(a.StoreResults={}));a.IntersectorOptions=function(){this.verticalOffset=0;this.selectionMode=!1;this.selectOpaqueTerrainOnly=this.hud=!0;this.invisibleTerrain=!1;this.backfacesTerrain=!0;this.isFiltered=!1;this.store=a.StoreResults.ALL};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/intersectorUtils":function(){define("exports ../../../../core/maybe ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/boundedPlane ./IntersectorInterfaces".split(" "),
function(a,f,d,q,t,v){function w(l){return f.isSome(l)&&f.isSome(l.dist)}const h=q.create();a.isHudIntersectorResult=function(l){return w(l)&&l.intersector===v.IntersectorType.HUD&&!!l.target&&f.isSome(l.target.center)};a.isObjectIntersectorResult=function(l){return w(l)&&l.intersector===v.IntersectorType.OBJECT&&!!l.target};a.isValidIntersectorResult=w;a.sliceFilterPredicate=function(l){return(u,m,r)=>{d.lerp(h,u,m,r);return!t.extrusionContainsPoint(l,h)}};Object.defineProperty(a,"__esModule",{value:!0})})},
"esri/chunks/boundedPlane":function(){define("exports ../core/has ../core/Logger ../core/mathUtils ../core/ObjectStack ./mat4 ./mat4f64 ./vec3 ./vec3f64 ../geometry/support/Axis ../geometry/support/lineSegment ../geometry/support/plane ../geometry/support/ray ../geometry/support/vector ../geometry/support/vectorStacks".split(" "),function(a,f,d,q,t,v,w,h,l,u,m,r,x,I,n){function B(b=V){return{plane:r.create(b.plane),origin:l.clone(b.origin),basis1:l.clone(b.basis1),basis2:l.clone(b.basis2)}}function K(b,
E,R){const T=ja.get();T.origin=b;T.basis1=E;T.basis2=R;T.plane=r.wrap(0,0,0,0);ea(T);return T}function G(b,E=B()){return J(b.origin,b.basis1,b.basis2,E)}function Q(b,E){h.copy(E.origin,b.origin);h.copy(E.basis1,b.basis1);h.copy(E.basis2,b.basis2);r.copy(E.plane,b.plane)}function J(b,E,R,T=B()){h.copy(T.origin,b);h.copy(T.basis1,E);h.copy(T.basis2,R);ea(T);1E-6<Math.abs(h.dot(T.basis1,T.basis2)/(h.length(T.basis1)*h.length(T.basis2)))&&Z.warn("fromValues()","Provided basis vectors are not perpendicular");
1E-6<Math.abs(h.dot(T.basis1,W(T)))&&Z.warn("fromValues()","Basis vectors and plane normal are not perpendicular");1E-6<Math.abs(-h.dot(W(T),T.origin)-T.plane[3])&&Z.warn("fromValues()","Plane offset is not consistent with plane origin");return T}function ea(b){r.fromVectorsAndPoint(b.basis2,b.basis1,b.origin,b.plane)}function ha(b,E,R){b!==R&&G(b,R);b=h.scale(n.sv3d.get(),W(b),E);h.add(R.origin,R.origin,b);R.plane[3]-=E;return R}function Y(b,E,R){X(E,R);ha(R,N(b,b.origin),R);return R}function X(b,
E=B()){const R=(b[2]-b[0])/2,T=(b[3]-b[1])/2;h.set(E.origin,b[0]+R,b[1]+T,0);h.set(E.basis1,R,0,0);h.set(E.basis2,0,T,0);r.fromValues(0,0,1,0,E.plane);return E}function ma(b,E,R){return r.intersectRay(b.plane,E,R)?e(b,R):!1}function g(b,E,R){if(ma(b,E,R))return R;b=y(b,E,n.sv3d.get());h.add(R,E.origin,h.scale(n.sv3d.get(),E.direction,h.distance(E.origin,b)/h.length(E.direction)));return R}function y(b,E,R){const T=F.get();var oa=F.get();S(b,E,T,oa);oa=Number.POSITIVE_INFINITY;for(const ua of pa){var ra=
A(b,ua,O.get());const va=n.sv3d.get();r.intersectLineSegment(T,ra,va)&&(ra=h.direction(n.sv3d.get(),E.origin,va),ra=Math.abs(q.acosClamped(h.dot(E.direction,ra))),ra<oa&&(oa=ra,h.copy(R,va)))}return oa===Number.POSITIVE_INFINITY?P(b,E,R):R}function P(b,E,R){if(ma(b,E,R))return R;const T=F.get(),oa=F.get();S(b,E,T,oa);let ra=Number.POSITIVE_INFINITY;for(const va of pa){var ua=A(b,va,O.get());const za=n.sv3d.get();r.intersectLineSegmentClamp(T,ua,za)&&(ua=x.distance2(E,za),r.isPointInside(oa,za)&&ua<
ra&&(ra=ua,h.copy(R,za)))}ka(b,E.origin)<ra&&U(b,E.origin,R);return R}function U(b,E,R){var T=r.projectPoint(b.plane,E,n.sv3d.get());E=m.projectPointClamp(k(b,b.basis1),T,-1,1,n.sv3d.get());T=m.projectPointClamp(k(b,b.basis2),T,-1,1,n.sv3d.get());h.subtract(R,h.add(n.sv3d.get(),E,T),b.origin);return R}function ba(b,E,R){const {origin:T,basis1:oa,basis2:ra}=b,ua=h.subtract(n.sv3d.get(),E,T);E=I.projectPointSignedLength(oa,ua);const va=I.projectPointSignedLength(ra,ua);b=I.projectPointSignedLength(W(b),
ua);return h.set(R,E,va,b)}function ka(b,E){E=ba(b,E,n.sv3d.get());const {basis1:R,basis2:T}=b;b=h.length(R);var oa=h.length(T);b=Math.max(Math.abs(E[0])-b,0);oa=Math.max(Math.abs(E[1])-oa,0);E=E[2];return b*b+oa*oa+E*E}function fa(b,E){return Math.sqrt(ka(b,E))}function qa(b,E){let R=Number.NEGATIVE_INFINITY;for(const oa of pa){var T=A(b,oa,O.get());T=m.distance2(T,E);T>R&&(R=T)}return Math.sqrt(R)}function c(b,E){return r.isPointInside(b.plane,E)&&e(b,E)}function p(b,E,R,T){switch(R){case u.Axis.X:h.copy(T,
b.basis1);h.normalize(T,T);break;case u.Axis.Y:h.copy(T,b.basis2);h.normalize(T,T);break;case u.Axis.Z:h.copy(T,W(b))}return T}function N(b,E){const R=-b.plane[3];return I.projectPointSignedLength(W(b),E)-R}function ia(b,E,R,T){const oa=N(b,E);b=h.scale(ca,W(b),R-oa);h.add(T,E,b);return T}function z(b,E){return h.exactEquals(b.basis1,E.basis1)&&h.exactEquals(b.basis2,E.basis2)&&h.exactEquals(b.origin,E.origin)}function C(b,E,R){b!==R&&G(b,R);v.invert(aa,E);v.transpose(aa,aa);h.transformMat4(R.basis1,
b.basis1,aa);h.transformMat4(R.basis2,b.basis2,aa);h.transformMat4(r.normal(R.plane),r.normal(b.plane),aa);h.transformMat4(R.origin,b.origin,E);r.setOffsetFromPoint(R.plane,R.plane,R.origin);return R}function M(b,E,R,T){b!==T&&G(b,T);v.fromRotation(D,E,R);h.transformMat4(T.basis1,b.basis1,D);h.transformMat4(T.basis2,b.basis2,D);ea(T);return T}function W(b){return r.normal(b.plane)}function e(b,E){const R=h.subtract(n.sv3d.get(),E,b.origin);E=h.squaredLength(b.basis1);const T=h.squaredLength(b.basis2),
oa=h.dot(b.basis1,R);b=h.dot(b.basis2,R);return 0>-oa-E&&0>oa-E&&0>-b-T&&0>b-T}function k(b,E){const R=O.get();h.copy(R.origin,b.origin);h.copy(R.vector,E);return R}function A(b,E,R){const {basis1:T,basis2:oa,origin:ra}=b;b=h.scale(n.sv3d.get(),T,E.origin[0]);const ua=h.scale(n.sv3d.get(),oa,E.origin[1]);h.add(R.origin,b,ua);h.add(R.origin,R.origin,ra);b=h.scale(n.sv3d.get(),T,E.direction[0]);E=h.scale(n.sv3d.get(),oa,E.direction[1]);h.scale(R.vector,h.add(b,b,E),2);return R}function S(b,E,R,T){b=
W(b);r.fromVectorsAndPoint(b,E.direction,E.origin,R);r.fromVectorsAndPoint(r.normal(R),b,E.origin,T)}const Z=d.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");f=function(){this.plane=r.create();this.origin=l.create();this.basis1=l.create();this.basis2=l.create()};const V={plane:r.create(),origin:l.fromValues(0,0,0),basis1:l.fromValues(1,0,0),basis2:l.fromValues(0,1,0)},F=new t.ObjectStack(r.create),O=new t.ObjectStack(m.create),ca=l.create(),ja=new t.ObjectStack(()=>({origin:null,basis1:null,
basis2:null,plane:null})),pa=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],aa=w.create(),D=w.create();t=Object.freeze({__proto__:null,BoundedPlaneClass:f,create:B,wrap:K,copy:G,copyWithoutVerify:Q,fromValues:J,updateUnboundedPlane:ea,elevate:ha,setExtent:Y,fromAABoundingRect:X,intersectRay:ma,intersectRayClosestSilhouette:g,closestPointOnSilhouette:y,closestPoint:P,projectPoint:U,projectPointLocal:ba,distance2:ka,
distance:fa,distanceToSilhouette:qa,extrusionContainsPoint:c,axisAt:p,altitudeAt:N,setAltitudeAt:ia,equals:z,transform:C,rotate:M,normal:W,UP:V});a.BoundedPlaneClass=f;a.UP=V;a.altitudeAt=N;a.axisAt=p;a.boundedPlane=t;a.closestPoint=P;a.closestPointOnSilhouette=y;a.copy=G;a.copyWithoutVerify=Q;a.create=B;a.distance=fa;a.distance2=ka;a.distanceToSilhouette=qa;a.elevate=ha;a.equals=z;a.extrusionContainsPoint=c;a.fromAABoundingRect=X;a.fromValues=J;a.intersectRay=ma;a.intersectRayClosestSilhouette=g;
a.normal=W;a.projectPoint=U;a.projectPointLocal=ba;a.rotate=M;a.setAltitudeAt=ia;a.setExtent=Y;a.transform=C;a.updateUnboundedPlane=ea;a.wrap=K})},"esri/geometry/support/lineSegment":function(){define("exports ../../core/mathUtils ../../core/ObjectStack ../../chunks/vec3 ../../chunks/vec3f64 ./vectorStacks".split(" "),function(a,f,d,q,t,v){function w(n){return n?{origin:t.clone(n.origin),vector:t.clone(n.vector)}:{origin:t.create(),vector:t.create()}}function h(n,B){const K=I.get();K.origin=n;K.vector=
B;return K}function l(n,B,K=w()){q.copy(K.origin,n);q.copy(K.vector,B);return K}function u(n,B){B=q.subtract(v.sv3d.get(),B,n.origin);var K=q.dot(n.vector,B);const G=q.dot(n.vector,n.vector);K=f.clamp(K/G,0,1);n=q.subtract(v.sv3d.get(),q.scale(v.sv3d.get(),n.vector,K),B);return q.dot(n,n)}function m(n,B,K,G,Q){const {vector:J,origin:ea}=n;B=q.subtract(v.sv3d.get(),B,ea);B=q.dot(J,B)/q.squaredLength(J);q.scale(Q,J,f.clamp(B,K,G));return q.add(Q,Q,n.origin)}function r(n,B,K,G){const Q=n.origin;var J=
q.add(v.sv3d.get(),Q,n.vector);n=B.origin;var ea=q.add(v.sv3d.get(),n,B.vector),ha=v.sv3d.get();B=v.sv3d.get();ha[0]=Q[0]-n[0];ha[1]=Q[1]-n[1];ha[2]=Q[2]-n[2];B[0]=ea[0]-n[0];B[1]=ea[1]-n[1];B[2]=ea[2]-n[2];if(1E-6>Math.abs(B[0])&&1E-6>Math.abs(B[1])&&1E-6>Math.abs(B[2]))return!1;ea=v.sv3d.get();ea[0]=J[0]-Q[0];ea[1]=J[1]-Q[1];ea[2]=J[2]-Q[2];if(1E-6>Math.abs(ea[0])&&1E-6>Math.abs(ea[1])&&1E-6>Math.abs(ea[2]))return!1;J=ha[0]*B[0]+ha[1]*B[1]+ha[2]*B[2];var Y=B[0]*ea[0]+B[1]*ea[1]+B[2]*ea[2];const X=
B[0]*B[0]+B[1]*B[1]+B[2]*B[2],ma=(ea[0]*ea[0]+ea[1]*ea[1]+ea[2]*ea[2])*X-Y*Y;if(1E-6>Math.abs(ma))return!1;ha=(J*Y-(ha[0]*ea[0]+ha[1]*ea[1]+ha[2]*ea[2])*X)/ma;J=(J+Y*ha)/X;K&&(ha=f.clamp(ha,0,1),J=f.clamp(J,0,1));K=v.sv3d.get();Y=v.sv3d.get();K[0]=Q[0]+ha*ea[0];K[1]=Q[1]+ha*ea[1];K[2]=Q[2]+ha*ea[2];Y[0]=n[0]+J*B[0];Y[1]=n[1]+J*B[1];Y[2]=n[2]+J*B[2];G.tA=ha;G.tB=J;G.pA=K;G.pB=Y;G.distance2=q.squaredDistance(K,Y);return!0}const x={tA:0,tB:0,pA:t.create(),pB:t.create(),distance2:0},I=new d.ObjectStack(()=>
({origin:null,vector:null}));a.closestLineSegmentDistance2=function(n,B){return r(n,B,!0,x)?x.distance2:null};a.closestLineSegmentPoint=function(n,B,K){return r(n,B,!0,x)?(q.copy(K,x.pA),!0):!1};a.closestRayDistance2=function(n,B){if(r(n,h(B.origin,B.direction),!1,x)){const {tA:K,pB:G,distance2:Q}=x;if(0<=K&&1>=K)return Q;if(0>K)return q.squaredDistance(n.origin,G);if(1<K)return q.squaredDistance(q.add(v.sv3d.get(),n.origin,n.vector),G)}return null};a.copy=function(n,B=w()){return l(n.origin,n.vector,
B)};a.create=w;a.distance=function(n,B){return Math.sqrt(u(n,B))};a.distance2=u;a.fromPoints=function(n,B,K=w()){q.copy(K.origin,n);q.subtract(K.vector,B,n);return K};a.fromValues=l;a.pointAt=function(n,B,K){return q.add(K,n.origin,q.scale(K,n.vector,B))};a.projectPoint=function(n,B,K){return m(n,B,0,1,K)};a.projectPointClamp=m;a.wrap=h;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/verticalOffsetUtils":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat3 ../../../../chunks/mat3f64 ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/quat ../../../../chunks/quatf64 ../../../../chunks/vec3 ../../../../chunks/vec3f32 ../../../../chunks/vec3f64 ../../../../chunks/vec4f64 ../../../../chunks/sphere".split(" "),
function(a,f,d,q,t,v,w,h,l,u,m,r,x,I){let n=function(){function X(){this._transform=w.create();this._transformInverse=new B({value:this._transform},v.invert,w.create);this._transformInverseTranspose=new B(this._transformInverse,v.transpose,w.create);this._transformTranspose=new B({value:this._transform},v.transpose,w.create);this._transformInverseRotation=new B({value:this._transform},q.normalFromMat4Legacy,t.create)}var ma=X.prototype;ma._invalidateLazyTransforms=function(){this._transformInverse.invalidate();
this._transformInverseTranspose.invalidate();this._transformTranspose.invalidate();this._transformInverseRotation.invalidate()};ma.setTransformMatrix=function(g){v.copy(this._transform,g)};ma.multiplyTransform=function(g){v.multiply(this._transform,this._transform,g)};ma.set=function(g){v.copy(this._transform,g);this._invalidateLazyTransforms()};ma.setAndInvalidateLazyTransforms=function(g,y){this.setTransformMatrix(g);this.multiplyTransform(y);this._invalidateLazyTransforms()};f._createClass(X,[{key:"transform",
get:function(){return this._transform}},{key:"inverse",get:function(){return this._transformInverse.value}},{key:"inverseTranspose",get:function(){return this._transformInverseTranspose.value}},{key:"inverseRotation",get:function(){return this._transformInverseRotation.value}},{key:"transpose",get:function(){return this._transformTranspose.value}}]);return X}(),B=function(){function X(ma,g,y){this.original=ma;this.update=g;this.dirty=!0;this.transform=y()}X.prototype.invalidate=function(){this.dirty=
!0};f._createClass(X,[{key:"value",get:function(){this.dirty&&(this.update(this.transform,this.original.value),this.dirty=!1);return this.transform}}]);return X}(),K=function(){function X(g=0){this.offset=g;this.tmpVertex=r.create()}var ma=X.prototype;ma.applyToVertex=function(g,y,P){const U=g+this.localOrigin[0],ba=y+this.localOrigin[1],ka=P+this.localOrigin[2],fa=this.offset/Math.sqrt(U*U+ba*ba+ka*ka);this.tmpVertex[0]=g+U*fa;this.tmpVertex[1]=y+ba*fa;this.tmpVertex[2]=P+ka*fa;return this.tmpVertex};
ma.applyToAabb=function(g){var y=g[0]+this.localOrigin[0];const P=g[1]+this.localOrigin[1],U=g[2]+this.localOrigin[2],ba=g[3]+this.localOrigin[0],ka=g[4]+this.localOrigin[1],fa=g[5]+this.localOrigin[2],qa=this.offset/Math.sqrt(y*y+P*P+U*U);g[0]+=y*qa;g[1]+=P*qa;g[2]+=U*qa;y=this.offset/Math.sqrt(ba*ba+ka*ka+fa*fa);g[3]+=ba*y;g[4]+=ka*y;g[5]+=fa*y;return g};return X}(),G=function(){function X(g=0){this.offset=g;this.componentLocalOriginLength=0;this.tmpVertex=r.create();this.mbs=x.create();this.obb=
{center:r.create(),halfSize:m.create(),quaternion:null}}var ma=X.prototype;ma.applyToVertex=function(g,y,P){const U=P+this.componentLocalOriginLength,ba=this.offset/Math.sqrt(g*g+y*y+U*U);this.tmpVertex[0]=g+g*ba;this.tmpVertex[1]=y+y*ba;this.tmpVertex[2]=P+U*ba;return this.tmpVertex};ma.applyToAabb=function(g){var y=g[0];const P=g[1],U=g[2]+this.componentLocalOriginLength,ba=g[3],ka=g[4],fa=g[5]+this.componentLocalOriginLength,qa=this.offset/Math.sqrt(y*y+P*P+U*U);g[0]+=y*qa;g[1]+=P*qa;g[2]+=U*qa;
y=this.offset/Math.sqrt(ba*ba+ka*ka+fa*fa);g[3]+=ba*y;g[4]+=ka*y;g[5]+=fa*y;return g};ma.applyToMbs=function(g){const y=Math.sqrt(g[0]*g[0]+g[1]*g[1]+g[2]*g[2]),P=this.offset/y;this.mbs[0]=g[0]+g[0]*P;this.mbs[1]=g[1]+g[1]*P;this.mbs[2]=g[2]+g[2]*P;this.mbs[3]=g[3]+g[3]*this.offset/y;return this.mbs};ma.applyToObb=function(g){var y=g.center;const P=this.offset/Math.sqrt(y[0]*y[0]+y[1]*y[1]+y[2]*y[2]);this.obb.center[0]=y[0]+y[0]*P;this.obb.center[1]=y[1]+y[1]*P;this.obb.center[2]=y[2]+y[2]*P;u.transformQuat(this.obb.halfSize,
g.halfSize,g.quaternion);u.add(this.obb.halfSize,this.obb.halfSize,g.center);y=this.offset/Math.sqrt(this.obb.halfSize[0]*this.obb.halfSize[0]+this.obb.halfSize[1]*this.obb.halfSize[1]+this.obb.halfSize[2]*this.obb.halfSize[2]);this.obb.halfSize[0]+=this.obb.halfSize[0]*y;this.obb.halfSize[1]+=this.obb.halfSize[1]*y;this.obb.halfSize[2]+=this.obb.halfSize[2]*y;u.subtract(this.obb.halfSize,this.obb.halfSize,g.center);h.conjugate(Y,g.quaternion);u.transformQuat(this.obb.halfSize,this.obb.halfSize,Y);
this.obb.halfSize[0]*=0>this.obb.halfSize[0]?-1:1;this.obb.halfSize[1]*=0>this.obb.halfSize[1]?-1:1;this.obb.halfSize[2]*=0>this.obb.halfSize[2]?-1:1;this.obb.quaternion=g.quaternion;return this.obb};f._createClass(X,[{key:"localOrigin",set:function(g){this.componentLocalOriginLength=Math.sqrt(g[0]*g[0]+g[1]*g[1]+g[2]*g[2])}}]);return X}(),Q=function(){function X(g=0){this.offset=g;this.sphere=I.create();this.tmpVertex=r.create()}var ma=X.prototype;ma.applyToVertex=function(g,y,P){const U=this.objectTransform.transform;
let ba=U[0]*g+U[4]*y+U[8]*P+U[12],ka=U[1]*g+U[5]*y+U[9]*P+U[13];g=U[2]*g+U[6]*y+U[10]*P+U[14];y=this.offset/Math.sqrt(ba*ba+ka*ka+g*g);ba+=ba*y;ka+=ka*y;g+=g*y;y=this.objectTransform.inverse;this.tmpVertex[0]=y[0]*ba+y[4]*ka+y[8]*g+y[12];this.tmpVertex[1]=y[1]*ba+y[5]*ka+y[9]*g+y[13];this.tmpVertex[2]=y[2]*ba+y[6]*ka+y[10]*g+y[14];return this.tmpVertex};ma.applyToMinMax=function(g,y){const P=this.offset/Math.sqrt(g[0]*g[0]+g[1]*g[1]+g[2]*g[2]);g[0]+=g[0]*P;g[1]+=g[1]*P;g[2]+=g[2]*P;g=this.offset/
Math.sqrt(y[0]*y[0]+y[1]*y[1]+y[2]*y[2]);y[0]+=y[0]*g;y[1]+=y[1]*g;y[2]+=y[2]*g};ma.applyToAabb=function(g){var y=this.offset/Math.sqrt(g[0]*g[0]+g[1]*g[1]+g[2]*g[2]);g[0]+=g[0]*y;g[1]+=g[1]*y;g[2]+=g[2]*y;y=this.offset/Math.sqrt(g[3]*g[3]+g[4]*g[4]+g[5]*g[5]);g[3]+=g[3]*y;g[4]+=g[4]*y;g[5]+=g[5]*y;return g};ma.applyToBoundingSphere=function(g){const y=Math.sqrt(g[0]*g[0]+g[1]*g[1]+g[2]*g[2]),P=this.offset/y;this.sphere[0]=g[0]+g[0]*P;this.sphere[1]=g[1]+g[1]*P;this.sphere[2]=g[2]+g[2]*P;this.sphere[3]=
g[3]+g[3]*this.offset/y;return this.sphere};return X}();const J=new Q,ea=new G,ha=new K,Y=l.create();a.I3SVerticalOffsetGlobalViewingMode=G;a.IntersectorTransform=n;a.Object3DVerticalOffsetGlobalViewingMode=Q;a.TERRAIN_ID="terrain";a.TerrainVerticalOffsetGlobalViewingMode=K;a.getVerticalOffsetI3S=function(X){return d.isSome(X)?(ea.offset=X,ea):null};a.getVerticalOffsetObject3D=function(X){return d.isSome(X)?(J.offset=X,J):null};a.getVerticalOffsetTerrain=function(X){return d.isSome(X)?(ha.offset=
X,ha):null};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/quat":function(){define("exports ./mat3f64 ./quatf64 ./vec3f64 ./common ./vec3 ./vec4".split(" "),function(a,f,d,q,t,v,w){function h(e){e[0]=0;e[1]=0;e[2]=0;e[3]=1;return e}function l(e,k,A){A*=.5;const S=Math.sin(A);e[0]=S*k[0];e[1]=S*k[1];e[2]=S*k[2];e[3]=Math.cos(A);return e}function u(e,k){const A=2*Math.acos(k[3]),S=Math.sin(A/2);S>t.EPSILON?(e[0]=k[0]/S,e[1]=k[1]/S,e[2]=k[2]/S):(e[0]=1,e[1]=0,e[2]=0);return A}function m(e,
k,A){const S=k[0],Z=k[1],V=k[2];k=k[3];const F=A[0],O=A[1],ca=A[2];A=A[3];e[0]=S*A+k*F+Z*ca-V*O;e[1]=Z*A+k*O+V*F-S*ca;e[2]=V*A+k*ca+S*O-Z*F;e[3]=k*A-S*F-Z*O-V*ca;return e}function r(e,k,A){A*=.5;const S=k[0],Z=k[1],V=k[2];k=k[3];const F=Math.sin(A);A=Math.cos(A);e[0]=S*A+k*F;e[1]=Z*A+V*F;e[2]=V*A-Z*F;e[3]=k*A-S*F;return e}function x(e,k,A){A*=.5;const S=k[0],Z=k[1],V=k[2];k=k[3];const F=Math.sin(A);A=Math.cos(A);e[0]=S*A-V*F;e[1]=Z*A+k*F;e[2]=V*A+S*F;e[3]=k*A-Z*F;return e}function I(e,k,A){A*=.5;
const S=k[0],Z=k[1],V=k[2];k=k[3];const F=Math.sin(A);A=Math.cos(A);e[0]=S*A+Z*F;e[1]=Z*A-S*F;e[2]=V*A+k*F;e[3]=k*A-V*F;return e}function n(e,k){const A=k[0],S=k[1];k=k[2];e[0]=A;e[1]=S;e[2]=k;e[3]=Math.sqrt(Math.abs(1-A*A-S*S-k*k));return e}function B(e,k,A,S){const Z=k[0],V=k[1],F=k[2];k=k[3];let O=A[0],ca=A[1],ja=A[2];A=A[3];let pa;let aa;var D=Z*O+V*ca+F*ja+k*A;0>D&&(D=-D,O=-O,ca=-ca,ja=-ja,A=-A);1-D>t.EPSILON?(pa=Math.acos(D),aa=Math.sin(pa),D=Math.sin((1-S)*pa)/aa,S=Math.sin(S*pa)/aa):D=1-S;
e[0]=D*Z+S*O;e[1]=D*V+S*ca;e[2]=D*F+S*ja;e[3]=D*k+S*A;return e}function K(e){var k=t.RANDOM();const A=t.RANDOM(),S=t.RANDOM(),Z=Math.sqrt(1-k);k=Math.sqrt(k);e[0]=Z*Math.sin(2*Math.PI*A);e[1]=Z*Math.cos(2*Math.PI*A);e[2]=k*Math.sin(2*Math.PI*S);e[3]=k*Math.cos(2*Math.PI*S);return e}function G(e,k){const A=k[0],S=k[1],Z=k[2];k=k[3];var V=A*A+S*S+Z*Z+k*k;V=V?1/V:0;e[0]=-A*V;e[1]=-S*V;e[2]=-Z*V;e[3]=k*V;return e}function Q(e,k){e[0]=-k[0];e[1]=-k[1];e[2]=-k[2];e[3]=k[3];return e}function J(e,k){var A=
k[0]+k[4]+k[8];if(0<A)A=Math.sqrt(A+1),e[3]=.5*A,A=.5/A,e[0]=(k[5]-k[7])*A,e[1]=(k[6]-k[2])*A,e[2]=(k[1]-k[3])*A;else{let S=0;k[4]>k[0]&&(S=1);k[8]>k[3*S+S]&&(S=2);const Z=(S+1)%3,V=(S+2)%3;A=Math.sqrt(k[3*S+S]-k[3*Z+Z]-k[3*V+V]+1);e[S]=.5*A;A=.5/A;e[3]=(k[3*Z+V]-k[3*V+Z])*A;e[Z]=(k[3*Z+S]+k[3*S+Z])*A;e[V]=(k[3*V+S]+k[3*S+V])*A}return e}function ea(e,k,A,S){var Z=.5*Math.PI/180;k*=Z;A*=Z;S*=Z;Z=Math.sin(k);k=Math.cos(k);const V=Math.sin(A);A=Math.cos(A);const F=Math.sin(S);S=Math.cos(S);e[0]=Z*A*
S-k*V*F;e[1]=k*V*S+Z*A*F;e[2]=k*A*F-Z*V*S;e[3]=k*A*S+Z*V*F;return e}function ha(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function Y(e,k,A){const S=v.dot(k,A);if(-.999999>S)return v.cross(N,ia,k),1E-6>v.len(N)&&v.cross(N,z,k),v.normalize(N,N),l(e,N,Math.PI),e;if(.999999<S)return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e;v.cross(N,k,A);e[0]=N[0];e[1]=N[1];e[2]=N[2];e[3]=1+S;return c(e,e)}function X(e,k,A,S,Z,V){B(C,k,Z,V);B(M,A,S,V);B(e,C,M,2*V*(1-V));return e}function ma(e,k,A,S){const Z=W;Z[0]=
A[0];Z[3]=A[1];Z[6]=A[2];Z[1]=S[0];Z[4]=S[1];Z[7]=S[2];Z[2]=-k[0];Z[5]=-k[1];Z[8]=-k[2];return c(e,J(e,Z))}const g=w.copy,y=w.set,P=w.add,U=w.scale,ba=w.dot,ka=w.lerp,fa=w.length,qa=w.squaredLength,c=w.normalize,p=w.exactEquals;w=w.equals;const N=q.create(),ia=q.fromValues(1,0,0),z=q.fromValues(0,1,0),C=d.create(),M=d.create(),W=f.create();f=Object.freeze({__proto__:null,identity:h,setAxisAngle:l,getAxisAngle:u,multiply:m,rotateX:r,rotateY:x,rotateZ:I,calculateW:n,slerp:B,random:K,invert:G,conjugate:Q,
fromMat3:J,fromEuler:ea,str:ha,copy:g,set:y,add:P,mul:m,scale:U,dot:ba,lerp:ka,length:fa,len:fa,squaredLength:qa,sqrLen:qa,normalize:c,exactEquals:p,equals:w,rotationTo:Y,sqlerp:X,setAxes:ma});a.add=P;a.calculateW=n;a.conjugate=Q;a.copy=g;a.dot=ba;a.equals=w;a.exactEquals=p;a.fromEuler=ea;a.fromMat3=J;a.getAxisAngle=u;a.identity=h;a.invert=G;a.len=fa;a.length=fa;a.lerp=ka;a.mul=m;a.multiply=m;a.normalize=c;a.quat=f;a.random=K;a.rotateX=r;a.rotateY=x;a.rotateZ=I;a.rotationTo=Y;a.scale=U;a.set=y;a.setAxes=
ma;a.setAxisAngle=l;a.slerp=B;a.sqlerp=X;a.sqrLen=qa;a.squaredLength=qa;a.str=ha})},"esri/chunks/vec3f32":function(){define(["exports"],function(a){function f(){return new Float32Array(3)}function d(K){const G=new Float32Array(3);G[0]=K[0];G[1]=K[1];G[2]=K[2];return G}function q(K,G,Q){const J=new Float32Array(3);J[0]=K;J[1]=G;J[2]=Q;return J}function t(K,G){return new Float32Array(K,G,3)}function v(){return f()}function w(){return q(1,1,1)}function h(){return q(1,0,0)}function l(){return q(0,1,0)}
function u(){return q(0,0,1)}const m=f(),r=w(),x=h(),I=l(),n=u(),B=Object.freeze({__proto__:null,create:f,clone:d,fromValues:q,createView:t,zeros:v,ones:w,unitX:h,unitY:l,unitZ:u,ZEROS:m,ONES:r,UNIT_X:x,UNIT_Y:I,UNIT_Z:n});a.ONES=r;a.UNIT_X=x;a.UNIT_Y=I;a.UNIT_Z=n;a.ZEROS=m;a.clone=d;a.create=f;a.createView=t;a.fromValues=q;a.ones=w;a.unitX=h;a.unitY=l;a.unitZ=u;a.vec3f32=B;a.zeros=v})},"esri/views/3d/webgl-engine/materials/renderers/utils":function(){define("exports ../../../../../core/maybe ../../../../../chunks/mat4 ../../../../../chunks/mat4f64 ../../lib/Util ../../../../webgl/doublePrecisionUtils".split(" "),
function(a,f,d,q,t,v){const w=new Float64Array(3),h=new Float32Array(6),l=q.create();a.addObject3DStateID=function(u,m){f.isNone(u)&&(u=[]);u.push(m);return u};a.calculateTransformRelativeToOrigin=function(u,m,r){const x=u.origin.vec3;t.setMatrixTranslation3(l,-x[0],-x[1],-x[2]);f.isSome(u.transformation)?d.multiply(m,l,u.transformation):d.copy(m,l);r&&(d.invert(r,m),d.transpose(r,r))};a.encodeDoubleVec3=function(u,m,r,x,I){w[0]=u.get(m,0);w[1]=u.get(m,1);w[2]=u.get(m,2);v.encodeDoubleArray(w,h,3);
r.set(I,0,h[0]);x.set(I,0,h[1]);r.set(I,1,h[2]);x.set(I,1,h[3]);r.set(I,2,h[4]);x.set(I,2,h[5])};a.isInstanceHidden=function(u){return f.isSome(u)?!u.visible:!1};a.removeObject3DStateID=function(u,m){if(f.isNone(u))return null;u=u.filter(r=>r!==m);return 0===u.length?null:u};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Util":function(){define(["exports","../../../../chunks/vec2","../../../../chunks/vec2f64","../../../../chunks/vec4","../../../../chunks/vec4f64"],
function(a,f,d,q,t){function v(l,u){if(!l)throw u=u||"assert",console.log(Error(u).stack),new h(u);}const w=t.create();let h=function(){function l(u){this.message=u}l.prototype.toString=function(){return`AssertException: ${this.message}`};return l}();a.assert=v;a.fovd2fovx=function(l,u,m){return 2*Math.atan(u*Math.tan(.5*l)/Math.sqrt(u*u+m*m))};a.fovd2fovy=function(l,u,m){return 2*Math.atan(m*Math.tan(.5*l)/Math.sqrt(u*u+m*m))};a.fovx2fovd=function(l,u,m){return 2*Math.atan(Math.sqrt(u*u+m*m)*Math.tan(.5*
l)/u)};a.fovy2fovd=function(l,u,m){return 2*Math.atan(Math.sqrt(u*u+m*m)*Math.tan(.5*l)/m)};a.inverseProjectionInfo=function(l,u,m,r,x){0===l[11]?(r[0]=2/(u*l[0]),r[1]=2/(m*l[5]),r[2]=(1+l[12])/l[0],r[3]=(1+l[13])/l[5],f.set(x,0,1)):(r[0]=-2/(u*l[0]),r[1]=-2/(m*l[5]),r[2]=(1-l[8])/l[0],r[3]=(1-l[9])/l[5],f.set(x,1,0))};a.isTranslationMatrix=function(l){return 1===l[0]&&0===l[1]&&0===l[2]&&0===l[3]&&0===l[4]&&1===l[5]&&0===l[6]&&0===l[7]&&0===l[8]&&0===l[9]&&1===l[10]&&0===l[11]&&1===l[15]};a.logWithBase=
function(l,u){return Math.log(l)/Math.log(u)};a.project=function(l,u,m,r,x){x||(x=l);w[0]=l[0];w[1]=l[1];w[2]=l[2];w[3]=1;q.transformMat4(w,w,u);2<x.length&&(x[2]=-w[2]);q.transformMat4(w,w,m);v(0!==w[3]);x[0]=w[0]/w[3];x[1]=w[1]/w[3];x[2]=w[2]/w[3];x[0]=(.5*x[0]+.5)*r[2]+r[0];x[1]=(.5*x[1]+.5)*r[3]+r[1]};a.rayBoxTest=function(l,u,m,r){let x,I=(m[0]-l[0])/u[0],n=(r[0]-l[0])/u[0];I>n&&(x=I,I=n,n=x);let B=(m[1]-l[1])/u[1],K=(r[1]-l[1])/u[1];B>K&&(x=B,B=K,K=x);if(I>K||B>n)return!1;B>I&&(I=B);K<n&&(n=
K);m=(m[2]-l[2])/u[2];l=(r[2]-l[2])/u[2];m>l&&(x=m,m=l,l=x);if(I>l||m>n)return!1;l<n&&(n=l);return 0>n?!1:!0};a.rayRay2D=function(l,u,m,r,x,I=d.create()){const n=(r[x]-m[x])*(u[0]-l[0])-(r[0]-m[0])*(u[x]-l[x]);if(0===n)return!1;m=((r[0]-m[0])*(l[x]-m[x])-(r[x]-m[x])*(l[0]-m[0]))/n;I[0]=l[0]+m*(u[0]-l[0]);I[1]=l[x]+m*(u[x]-l[x]);return!0};a.setMatrixTranslation3=function(l,u,m,r){l[12]=u;l[13]=m;l[14]=r};a.verify=function(l,u){l||console.warn("Verify failed: "+(u||"")+"\n"+Error("verify").stack)};
Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/vec2":function(){define(["exports","./common"],function(a,f){function d(z,C){z[0]=C[0];z[1]=C[1];return z}function q(z,C,M){z[0]=C;z[1]=M;return z}function t(z,C,M){z[0]=C[0]+M[0];z[1]=C[1]+M[1];return z}function v(z,C,M){z[0]=C[0]-M[0];z[1]=C[1]-M[1];return z}function w(z,C,M){z[0]=C[0]*M[0];z[1]=C[1]*M[1];return z}function h(z,C,M){z[0]=C[0]/M[0];z[1]=C[1]/M[1];return z}function l(z,C){z[0]=Math.ceil(C[0]);z[1]=Math.ceil(C[1]);return z}
function u(z,C){z[0]=Math.floor(C[0]);z[1]=Math.floor(C[1]);return z}function m(z,C,M){z[0]=Math.min(C[0],M[0]);z[1]=Math.min(C[1],M[1]);return z}function r(z,C,M){z[0]=Math.max(C[0],M[0]);z[1]=Math.max(C[1],M[1]);return z}function x(z,C){z[0]=Math.round(C[0]);z[1]=Math.round(C[1]);return z}function I(z,C,M){z[0]=C[0]*M;z[1]=C[1]*M;return z}function n(z,C,M,W){z[0]=C[0]+M[0]*W;z[1]=C[1]+M[1]*W;return z}function B(z,C){const M=C[0]-z[0];z=C[1]-z[1];return Math.sqrt(M*M+z*z)}function K(z,C){const M=
C[0]-z[0];z=C[1]-z[1];return M*M+z*z}function G(z){const C=z[0];z=z[1];return Math.sqrt(C*C+z*z)}function Q(z){const C=z[0];z=z[1];return C*C+z*z}function J(z,C){z[0]=-C[0];z[1]=-C[1];return z}function ea(z,C){z[0]=1/C[0];z[1]=1/C[1];return z}function ha(z,C){var M=C[0];const W=C[1];M=M*M+W*W;0<M&&(M=1/Math.sqrt(M),z[0]=C[0]*M,z[1]=C[1]*M);return z}function Y(z,C){return z[0]*C[0]+z[1]*C[1]}function X(z,C,M){C=C[0]*M[1]-C[1]*M[0];z[0]=z[1]=0;z[2]=C;return z}function ma(z,C,M,W){const e=C[0];C=C[1];
z[0]=e+W*(M[0]-e);z[1]=C+W*(M[1]-C);return z}function g(z,C){C=C||1;const M=2*f.RANDOM()*Math.PI;z[0]=Math.cos(M)*C;z[1]=Math.sin(M)*C;return z}function y(z,C,M){const W=C[0];C=C[1];z[0]=M[0]*W+M[2]*C;z[1]=M[1]*W+M[3]*C;return z}function P(z,C,M){const W=C[0];C=C[1];z[0]=M[0]*W+M[2]*C+M[4];z[1]=M[1]*W+M[3]*C+M[5];return z}function U(z,C,M){const W=C[0];C=C[1];z[0]=M[0]*W+M[3]*C+M[6];z[1]=M[1]*W+M[4]*C+M[7];return z}function ba(z,C,M){const W=C[0];C=C[1];z[0]=M[0]*W+M[4]*C+M[12];z[1]=M[1]*W+M[5]*C+
M[13];return z}function ka(z,C,M,W){const e=C[0]-M[0];C=C[1]-M[1];const k=Math.sin(W);W=Math.cos(W);z[0]=e*W-C*k+M[0];z[1]=e*k+C*W+M[1];return z}function fa(z,C){var M=z[0];z=z[1];const W=C[0];C=C[1];let e=M*M+z*z;0<e&&(e=1/Math.sqrt(e));let k=W*W+C*C;0<k&&(k=1/Math.sqrt(k));M=(M*W+z*C)*e*k;return 1<M?0:-1>M?Math.PI:Math.acos(M)}function qa(z){return"vec2("+z[0]+", "+z[1]+")"}function c(z,C){return z[0]===C[0]&&z[1]===C[1]}function p(z,C){const M=z[0];z=z[1];const W=C[0];C=C[1];return Math.abs(M-
W)<=f.EPSILON*Math.max(1,Math.abs(M),Math.abs(W))&&Math.abs(z-C)<=f.EPSILON*Math.max(1,Math.abs(z),Math.abs(C))}function N(z,C,M,W,e){let k=C[0]-M[0];M=C[1]-M[1];e=(W[0]*k+W[1]*M)*(e-1);k=W[0]*e;M=W[1]*e;z[0]=C[0]+k;z[1]=C[1]+M;return z}const ia=Object.freeze({__proto__:null,copy:d,set:q,add:t,subtract:v,multiply:w,divide:h,ceil:l,floor:u,min:m,max:r,round:x,scale:I,scaleAndAdd:n,distance:B,squaredDistance:K,length:G,squaredLength:Q,negate:J,inverse:ea,normalize:ha,dot:Y,cross:X,lerp:ma,random:g,
transformMat2:y,transformMat2d:P,transformMat3:U,transformMat4:ba,rotate:ka,angle:fa,str:qa,exactEquals:c,equals:p,projectAndScale:N,len:G,sub:v,mul:w,div:h,dist:B,sqrDist:K,sqrLen:Q});a.add=t;a.angle=fa;a.ceil=l;a.copy=d;a.cross=X;a.dist=B;a.distance=B;a.div=h;a.divide=h;a.dot=Y;a.equals=p;a.exactEquals=c;a.floor=u;a.inverse=ea;a.len=G;a.length=G;a.lerp=ma;a.max=r;a.min=m;a.mul=w;a.multiply=w;a.negate=J;a.normalize=ha;a.projectAndScale=N;a.random=g;a.rotate=ka;a.round=x;a.scale=I;a.scaleAndAdd=n;
a.set=q;a.sqrDist=K;a.sqrLen=Q;a.squaredDistance=K;a.squaredLength=Q;a.str=qa;a.sub=v;a.subtract=v;a.transformMat2=y;a.transformMat2d=P;a.transformMat3=U;a.transformMat4=ba;a.vec2=ia})},"esri/views/webgl/doublePrecisionUtils":function(){define(["exports"],function(a){function f(t,v,w){for(let h=0;h<w;++h)v[2*h]=t[h],v[2*h+1]=t[h]-v[2*h]}const d=new Float64Array(1),q=new Float32Array(2);a.decodeDoubleArray=function(t,v,w){for(let h=0;h<w;++h)v[h]=t[2*h]+t[2*h+1]};a.encodeDouble=function(t,v){q[0]=
t;q[1]=t-q[0];v[0]=q[0];v[1]=q[1]};a.encodeDoubleArray=f;a.encodeDoubleArraySplit=function(t,v,w,h){for(let l=0;l<h;++l)d[0]=t[l],f(d,q,1),v[l]=q[0],w[l]=q[1]};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/support/cameraUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../Camera ../../../core/Logger ../../../core/mathUtils ../../../core/maybe ../../../core/promiseUtils ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/Point ../../../geometry/projection ../../../geometry/projectionEllipsoid ../../../geometry/SpatialReference ../../../geometry/support/scaleUtils ../../ViewingMode ../camera/intersectionUtils ../../../chunks/cameraUtilsPlanar ../../../chunks/cameraUtilsSpherical ./earthUtils ./ElevationProvider ./mathUtils ../../support/spatialReferenceSupport".split(" "),
function(a,f,d,q,t,v,w,h,l,u,m,r,x,I,n,B,K,G,Q,J,ea,ha){function Y(F){return"global"===F.viewingMode?G.cameraUtilsSpherical:K.cameraUtilsPlanar}function X(F,O,ca){const ja=F.state.camera,pa=ja.width/2/ja.pixelRatio;F.renderCoordsHelper.viewingMode===n.ViewingMode.Global&&null!=ca&&(O*=Math.cos(t.deg2rad(ca)));O/=F.renderCoordsHelper.unitInMeters;return pa/(96*39.37/O)/Math.tan(ja.fovX/2)}function ma(F,O,ca){const ja=F.state.camera;O=96*39.37/(ja.width/2/ja.pixelRatio/(O*Math.tan(ja.fovX/2)));F.renderCoordsHelper.viewingMode===
n.ViewingMode.Global&&(O/=Math.cos(t.deg2rad(ca)));return O*=F.renderCoordsHelper.unitInMeters}function g(F,O,ca,ja,pa,aa){if(z(aa)){const D=new V(aa.signal);c(F,ja.heading,ja.tilt,O,ca,pa,D);D.resolver.promise.then(b=>{b=ia(F,b,ja.fov);if(v.isNone(b))aa.resolver.reject();else return aa.resolver.resolve(b)},b=>aa.resolver.reject(b))}else return O=c(F,ja.heading,ja.tilt,O,ca,pa),ia(F,O,ja.fov,aa)}function y(F,O,ca,ja,pa){return Y(F).directionToHeadingTilt(O,ca,ja,pa)}function P(F,O){return!!(F.basemapTerrain&&
F.renderCoordsHelper.fromRenderCoords(O,k,F.spatialReference)&&v.unwrapOr(J.getElevationAtPoint(F.elevationProvider,k),0)>k.z-1)}function U(F,O,ca){return ba.apply(this,arguments)}function ba(){ba=f._asyncToGenerator(function*(F,O,ca){if(!F.renderCoordsHelper.fromRenderCoords(O,k,F.spatialReference))return!1;F=yield F.elevationProvider.queryElevation(k.x,k.y,k.z,k.spatialReference,"ground",ca);return v.unwrapOr(F,0)>k.z-1});return ba.apply(this,arguments)}function ka(F,O,ca){return fa.apply(this,
arguments)}function fa(){fa=f._asyncToGenerator(function*(F,O,ca){const ja=l.create();O?O instanceof u?(m.projectPointToVector(O,ja,F.renderSpatialReference),null==O.z&&null!=F.basemapTerrain&&(O=yield F.elevationProvider.queryElevation(O.x,O.y,O.z,O.spatialReference,"ground",ca),v.isSome(O)&&F.renderCoordsHelper.setAltitude(ja,O))):h.copy(ja,O):h.copy(ja,F.state.camera.center);return ja});return fa.apply(this,arguments)}function qa(F,O){const ca=l.create();O&&O instanceof u?(m.projectPointToVector(O,
ca,F.renderSpatialReference),null==O.z&&null!=F.basemapTerrain&&(O=J.getElevationAtPoint(F.elevationProvider,O),v.isSome(O)&&F.renderCoordsHelper.setAltitude(ca,O))):O?h.copy(ca,O):h.copy(ca,F.state.camera.center);return ca}function c(F,O,ca,ja,pa,aa,D){const b=ja&&ja instanceof u?ja:null;if(z(D))return ka(F,ja,D.signal).then(E=>{p(F,O,ca,b,E,pa,aa,D)},E=>D.resolver.reject(E)),null;ja=qa(F,ja);return p(F,O,ca,b,ja,pa,aa,D)}function p(F,O,ca,ja,pa,aa,D,b){if(v.isNone(ja)&&(ja=m.projectVectorToPoint(pa,
F.renderSpatialReference,F.spatialReference||x.WGS84),v.isNone(ja)))return null;aa=Math.max(aa,F.state.constraints.minimumPoiDistance);var E=N(F,O,ca,pa,aa,D);const R=Y(F).eyeForCenterWithHeadingTilt,T=R(pa,aa,E.heading,E.tilt);if(D===a.OrientationMode.ADJUST&&"global"===F.viewingMode&&0<ca){const oa=()=>{var ra=aa,ua=aa;var va=F.state.constraints.tilt(ua);ua=Y(F).eyeTiltToLookAtTilt(ca,pa,ua);ua=Math.min(ua,.5*Math.PI);va=va.min*(1-.7)+.7*ua;ra=Y(F).lookAtTiltToEyeTilt(va,pa,ra);D=1>ca-ra?a.OrientationMode.LOCKED:
a.OrientationMode.ADJUST;return p(F,O,ra,ja,pa,aa,D,b)};E=F.map.ground.navigationConstraint;if(!E||"stay-above"===E.type){if(P(F,T.eye))return oa();if(z(b))return U(F,T.eye,b.signal).then(ra=>{if(ra)return oa();b.resolver.resolve({eye:T.eye,up:T.up,center:l.clone(pa),heading:T.heading,tilt:T.tilt});return null}),null}}E=!b||z(b)?{center:l.create(),eye:l.create(),up:l.create(),tilt:0,heading:0}:b;E.eye=T.eye;E.up=T.up;E.center=l.clone(pa);E.heading=T.heading;E.tilt=T.tilt;z(b)&&b.resolver.resolve(E);
return E}function N(F,O,ca,ja,pa,aa){var D=0;if(aa=aa===a.OrientationMode.ADJUST)if(D=F.pointsOfInterest.centerOnSurfaceFrequent.distance,8<Math.log(pa/D)/Math.LN2)aa=!0;else{var b=F.renderSpatialReference,E=F.spatialReference||x.WGS84;aa=m.projectVectorToPoint(ja,b,E);b=m.projectVectorToPoint(F.pointsOfInterest.centerOnSurfaceFrequent.renderLocation,b,E);v.isNone(aa)||v.isNone(b)?aa=!1:(D*=Math.tan(.5*F.state.camera.fov),aa=5<b.distance(aa)/D)}aa?(O=0,aa=F.state.constraints.tilt(pa),aa.max=Math.min(aa.max,
.5*Math.PI),aa=aa.min*(1-.7)+.7*aa.max,ca=Y(F).eyeTiltToLookAtTilt(ca,ja,pa),D=Math.min(ca,aa)):D=Y(F).eyeTiltToLookAtTilt(ca,ja,pa);ca=D=F.state.constraints.clampTilt(pa,D);ca=Y(F).lookAtTiltToEyeTilt(ca,ja,pa);return{heading:O,tilt:ca}}function ia(F,O,ca,ja){if(v.isNone(O))return null;F=m.projectVectorToPoint(O.eye,F.renderSpatialReference,F.spatialReference||x.WGS84);return v.isNone(F)?null:v.isSome(ja)?(ja.position=F,ja.heading=O.heading,ja.tilt=O.tilt,ja.fov=ca,ja):new d(F,O.heading,O.tilt,ca)}
function z(F){return F&&"resolver"in F}const C=q.getLogger("esri.views.3d.support.cameraUtils"),M=l.create(),W=l.create(),e={heading:0,tilt:0},k=new u,A=new ea.Cyclical(-2.0037508342788905E7,2.0037508342788905E7),S=new ea.Cyclical(-180,180);a.OrientationMode=void 0;(function(F){F[F.LOCKED=0]="LOCKED";F[F.ADJUST=1]="ADJUST"})(a.OrientationMode||(a.OrientationMode={}));const Z=l.create();let V=function(F){this.signal=F;this.resolver=w.createResolver()};a.AsyncContext=V;a.computeScale=function(F,O,ca){const ja=
F.renderSpatialReference;O||(O=F.state.camera);var pa=x.WGS84;O instanceof d?(pa=O.position.latitude,m.projectPointToVector(O.position,M,ja),m.projectPointToVector(ca,W,ja),O=h.distance(M,W)):(m.projectVectorToVector(O.center,ja,W,pa),pa=W[1],O=O.distance);return ma(F,O,pa)};a.directionToHeadingTilt=y;a.distanceToScale=ma;a.externalToInternal=function(F,O){if(v.isNone(O))return null;var ca=F.renderSpatialReference;const ja=Y(F).headingTiltToDirectionUp,pa=l.create();if(!m.projectPointToVector(O.position,
pa,ca))return null;ca=ja(pa,O.heading,O.tilt);h.scale(ca.direction,ca.direction,F.state.camera.distance);h.add(ca.direction,ca.direction,pa);F=B.cameraOnContentAlongViewDirection(F,pa,ca.direction,ca.up);F.fov=t.deg2rad(O.fov);return F};a.fromCenterDistance=g;a.fromCenterScale=function(F,O,ca,ja,pa,aa){ca=X(F,ca,O.latitude);return g(F,O,ca,ja,pa,aa)};a.fromExtent=function(F,O,ca,ja,pa,aa=null){var D=null!=O.zmax&&null!=O.zmin;let b;if(F.state.isGlobal){if(!ha.isSpatialReferenceSupported(O.spatialReference,
n.ViewingMode.Global))return z(aa)&&aa.resolver.reject(),null;var E=new u(O.xmin,O.ymin,O.spatialReference);const oa=new u(O.xmax,O.ymax,O.spatialReference),ra=O.spatialReference.isGeographic?S:A;var R=new u({x:ra.center(E.x,oa.x),y:(oa.y+E.y)/2,z:D?(O.zmax+O.zmin)/2:null,spatialReference:O.spatialReference});const ua=r.getReferenceEllipsoid(O.spatialReference);var T=Q.getGreatCircleSpanAt(R,E,oa);b=T.lon;T=T.lat;ra.diff(E.x,oa.x)>ra.range/2&&(b+=ua.halfCircumference);b=Math.min(b,ua.halfCircumference);
T=Math.min(T,ua.halfCircumference)}else R=v.unwrapOr(F.renderSpatialReference,O.spatialReference),R.equals(O.spatialReference)||(O=m.project(O,R)),b=O.xmax-O.xmin,T=O.ymax-O.ymin,R=new u({x:O.xmin+.5*b,y:O.ymin+.5*T,z:D?(O.zmax+O.zmin)/2:null,spatialReference:R});E=F.state.camera;O=Math.max(1/Math.tan(E.fovX/2)*b*.5,1/Math.tan(E.fovY/2)*T*.5,1/Math.tan(E.fov/2)*(D?O.zmax-O.zmin:0)*.5)/1;if(z(aa))D=new V(aa.signal),c(F,ca,ja,R,O,pa,D),D.resolver.promise.then(oa=>{oa=ia(F,oa,F.camera.fov);if(v.isNone(oa))aa.resolver.reject();
else return aa.resolver.resolve(oa)},oa=>aa.resolver.reject(oa));else return ca=c(F,ca,ja,R,O,pa),ia(F,ca,F.camera.fov,aa)};a.getObserverForPointAtDistance=c;a.headingTiltToDirectionUp=function(F,O,ca,ja,pa){return Y(F).headingTiltToDirectionUp(O,ca,ja,pa)};a.internalToExternal=function(F,O,ca){const ja=F.renderSpatialReference,pa=y(F,O.eye,O.viewForward,O.up,e);F=F.spatialReference||x.WGS84;m.projectVectorToVector(O.eye,ja,Z,F)||(F=x.WGS84,m.projectVectorToVector(O.eye,ja,Z,F));if(v.isNone(ca))return new d(new u(Z,
F),pa.heading,pa.tilt,t.rad2deg(O.fov));ca.position.x=Z[0];ca.position.y=Z[1];ca.position.z=Z[2];ca.position.spatialReference=F;ca.heading=pa.heading;ca.tilt=pa.tilt;ca.fov=t.rad2deg(O.fov);return ca};a.observerToCamera=ia;a.scaleToDistance=X;a.scaleToResolution=function(F,O){return F.spatialReference?I.getResolutionForScale(O,F.spatialReference):void 0};a.scaleToZoom=function(F,O){var ca;if(F=null==(ca=F.basemapTerrain)?void 0:ca.tilingScheme)return F.levelAtScale(O);C.error("#scaleToZoom()","Cannot compute zoom from scale without a tiling scheme")};
a.toExtent=function(F,O,ca){const ja=m.projectVectorToPoint(ca,F.renderSpatialReference,F.spatialReference||x.WGS84);if(v.isNone(ja))return null;var pa=Math.tan(O.fovX/2),aa=Math.tan(O.fovY/2);O=h.dist(O.eye,ca);pa*=2*O;aa*=2*O;return"global"===F.viewingMode?G.toExtent(F,ja,pa,aa):K.toExtent(F,ja,pa,aa)};a.zoomToScale=function(F,O){var ca;if(F=null==(ca=F.basemapTerrain)?void 0:ca.tilingScheme)return F.scaleAtLevel(O);C.error("#zoomToScale()","Cannot compute scale from zoom without a tiling scheme")};
Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/cameraUtilsPlanar":function(){define("exports ../core/mathUtils ./mat4 ./mat4f64 ./vec3 ./vec3f64 ../geometry/Extent ../geometry/projection ../views/3d/support/cameraUtilsInternal".split(" "),function(a,f,d,q,t,v,w,h,l){function u(ea,ha,Y,X=l.createDirectionUp()){const {direction:ma,up:g}=X;d.fromZRotation(G,-f.deg2rad(ha));d.rotateX(G,G,f.deg2rad(Y));t.transformMat4(ma,K,G);t.scale(ma,ma,-1);t.transformMat4(g,B,G);return X}function m(ea,
ha,Y,X){return l.directionToHeadingTilt(ha,Y,X,K,B)}function r(ea,ha,Y,X){const ma=u(ea,Y,X),g=v.create();t.scale(g,ma.direction,-ha);t.add(g,g,ea);return{up:ma.up,eye:g,heading:Y,tilt:X}}function x(ea){return f.rad2deg(ea)}function I(ea){return f.deg2rad(ea)}function n(ea,ha,Y,X,ma){const g=ea.renderSpatialReference;ea=ea.map&&ea.spatialReference||ha.spatialReference;h.projectPointToVector(ha,Q,g);h.projectPointToVector(ha,J,g);Q[0]-=Y/2;J[0]+=Y/2;Q[1]-=X/2;J[1]+=X/2;h.projectVectorToVector(Q,g,
Q,ea);h.projectVectorToVector(J,g,J,ea);ma?(ma.xmin=Q[0],ma.ymin=Q[1],ma.xmax=J[0],ma.ymax=J[1],ma.spatialReference=ea):ma=new w(Q[0],Q[1],J[0],J[1],ea);return ma}const B=v.fromValues(0,1,0),K=v.fromValues(0,0,1),G=q.create(),Q=v.create(),J=v.create();q=Object.freeze({__proto__:null,headingTiltToDirectionUp:u,directionToHeadingTilt:m,eyeForCenterWithHeadingTilt:r,lookAtTiltToEyeTilt:x,eyeTiltToLookAtTilt:I,toExtent:n});a.cameraUtilsPlanar=q;a.directionToHeadingTilt=m;a.eyeForCenterWithHeadingTilt=
r;a.eyeTiltToLookAtTilt=I;a.headingTiltToDirectionUp=u;a.lookAtTiltToEyeTilt=x;a.toExtent=n})},"esri/views/3d/support/cameraUtilsInternal":function(){define(["exports","../../../core/mathUtils","../../../chunks/vec3","../../../chunks/vec3f64"],function(a,f,d,q){const t=q.create(),v=q.create();a.createDirectionUp=function(){return{direction:q.create(),up:q.create()}};a.directionToHeadingTilt=function(w,h,l,u,m){let r=d.normalize(t,w),x=d.dot(r,u);const I=0<x;x=Math.abs(x);.99<x&&(x=Math.abs(d.dot(h,
u)),.99>x?(d.copy(r,h),I&&d.scale(r,r,-1)):r=null);h=0;r&&(d.scale(v,u,d.dot(u,r)),d.subtract(r,r,v),h=d.dot(r,m)/(d.length(r)*d.length(m)),d.cross(v,r,m),h=(0<d.dot(v,u)?1:-1)*f.rad2deg(f.acosClamped(h)));w=f.rad2deg(f.acosClamped(-d.dot(u,w)/d.length(w)));if(!l)return{heading:h,tilt:w};l.heading=h;l.tilt=w;return l};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/cameraUtilsSpherical":function(){define("exports ../core/mathUtils ./mat4 ./mat4f64 ./vec3 ./vec3f64 ../geometry/Extent ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/webMercatorUtils ../views/3d/support/cameraUtilsInternal ../views/3d/support/earthUtils ../views/3d/support/mathUtils".split(" "),
function(a,f,d,q,t,v,w,h,l,u,m,r,x){function I(P,U,ba,ka=m.createDirectionUp()){t.cross(g,P,ha);0===t.dot(g,g)&&t.cross(g,P,Y);d.fromRotation(ma,-f.deg2rad(U),P);d.rotate(ma,ma,-f.deg2rad(ba),g);const {up:fa,direction:qa}=ka;t.cross(fa,g,P);t.normalize(fa,fa);t.transformMat4(fa,fa,ma);t.normalize(qa,P);t.negate(qa,qa);t.transformMat4(qa,qa,ma);return ka}function n(P,U,ba,ka){const fa=g,qa=y;t.normalize(fa,P);t.cross(y,fa,ha);0===t.dot(y,y)&&t.cross(y,fa,Y);t.cross(qa,y,fa);return m.directionToHeadingTilt(U,
ba,ka,fa,qa)}function B(P,U,ba,ka){const fa={eye:v.create(),up:null,tilt:ka,heading:ba},qa=g;qa[0]=P[0];qa[1]=P[2];qa[2]=-P[1];ba=f.deg2rad(ba);var c=f.deg2rad(ka);ka=Math.sin(ba);ba=Math.cos(ba);var p=Math.sin(c),N=Math.cos(c);const ia=t.length(qa);if(1E-8>Math.abs(c))c=U+ia;else{var z=ia/p,C=f.asinClamped(U/z);c=z*Math.sin(Math.PI-c-C)}N*=U;z=U*U*p*p;C=ba*ba*z;const M=c-N,W=M*M;var e=C*(C+W-qa[1]*qa[1]);if(0>e)return t.scale(fa.eye,qa,c/ia),fa.tilt=0,fa;var k=Math.sqrt(e);const A=qa[1]*M;e=C+W;
k=0<ba?-k+A:k+A;if(1E-8>Math.abs(e))return 1E-8>ia?(fa.eye[0]=0,fa.eye[1]=0,fa.eye[2]=U):t.scale(fa.eye,qa,c/ia),fa.tilt=0,K(fa.eye),G(fa,P);fa.eye[1]=k/e;U*=p;k=fa.eye[1]*fa.eye[1];p=1-k;e=Math.sqrt(p);z=C*k+ka*ka*z-2*ba*U*fa.eye[1]*e*M+p*W;if(1E-8>Math.abs(z))return t.scale(fa.eye,qa,c/ia),fa.tilt=0,K(fa.eye),G(fa,P);fa.eye[0]=(p*(c*qa[0]-N*qa[0])-U*e*(qa[0]*fa.eye[1]*ba+qa[2]*ka))/z;fa.eye[2]=(p*(c*qa[2]-N*qa[2])-U*e*(qa[2]*fa.eye[1]*ba-qa[0]*ka))/z;t.scale(fa.eye,fa.eye,c);K(fa.eye);return G(fa,
P)}function K(P){const U=P[1];P[1]=-P[2];P[2]=U}function G(P,U){U=I(U,P.heading,P.tilt);P.up=U.up;return P}function Q(P,U,ba){U=t.length(U);ba=f.asinClamped(ba/(Math.sqrt(ba*ba+U*U-2*ba*U*Math.cos(Math.PI-P))/Math.sin(P)));return f.rad2deg(P-ba)}function J(P,U,ba){P=f.deg2rad(P);U=t.length(U);return f.asinClamped(ba/(U/Math.sin(P)))+P}function ea(P,U,ba,ka,fa){function qa(ia){const z=Math.PI/2;ia=x.cyclical2PI.normalize(ia,-z);ia>z&&(ia=Math.PI-ia);return ia}var c=U.latitude;var p=h.getReferenceEllipsoid(P.spatialReference).radius;
U=U.longitude;var N=r.getLonDeltaForDistance(c,ba,p)/2;ba=U-N;U+=N;c=f.deg2rad(c);c=(1+Math.sin(c))/(1-Math.sin(c));N=(c+1)*Math.tan(ka/p/2);c=1.5*Math.PI-2*Math.atan(.5*(N+Math.sqrt(4*c+N*N)));ka=c+ka/p;c=qa(c);ka=qa(ka);ka<c&&(p=ka,ka=c,c=p);c=Math.max(f.rad2deg(c),-90);ka=Math.min(f.rad2deg(ka),90);U=X.monotonic(ba,U);180<U-ba&&(p=(U-ba-180)/2,ba+=p,U-=p);p=P.spatialReference&&P.spatialReference.isGeographic?P.spatialReference:l.WGS84;fa?(fa.xmin=ba,fa.ymin=c,fa.xmax=U,fa.ymax=ka,fa.spatialReference=
p):fa=new w(ba,c,U,ka,p);P.spatialReference&&P.spatialReference.isWebMercator&&u.geographicToWebMercator(fa,!1,fa);return fa}const ha=v.fromValues(0,0,1),Y=t.normalize(v.create(),v.fromValues(1,1,1)),X=new x.Cyclical(-180,180),ma=q.create(),g=v.create(),y=v.create();q=Object.freeze({__proto__:null,headingTiltToDirectionUp:I,directionToHeadingTilt:n,eyeForCenterWithHeadingTilt:B,lookAtTiltToEyeTilt:Q,eyeTiltToLookAtTilt:J,toExtent:ea});a.cameraUtilsSpherical=q;a.directionToHeadingTilt=n;a.eyeForCenterWithHeadingTilt=
B;a.eyeTiltToLookAtTilt=J;a.headingTiltToDirectionUp=I;a.lookAtTiltToEyeTilt=Q;a.toExtent=ea})},"esri/views/3d/support/earthUtils":function(){define(["exports","../../../core/mathUtils","../../../geometry/Point","../../../geometry/projectionEllipsoid"],function(a,f,d,q){function t(h,l,u){return v(h,l.longitude,l.latitude,u.longitude,u.latitude)}function v(h,l,u,m,r){u=f.deg2rad(u);r=f.deg2rad(r);l=f.deg2rad(l);const x=f.deg2rad(m);m=Math.sin((u-r)/2);l=Math.sin((l-x)/2);u=2*f.asinClamped(Math.sqrt(m*
m+Math.cos(u)*Math.cos(r)*l*l));return Math.round(u*h*1E4)/1E4}function w(h,l){h/=15;l||(h=Math.round(h));return h}a.getGreatCircleDistance=v;a.getGreatCircleDistanceFromPoints=t;a.getGreatCircleSpanAt=function(h,l,u){const m=l.spatialReference,r=q.getReferenceEllipsoid(m),x=new d(l.x,h.y,m),I=new d(u.x,h.y,m);l=new d(h.x,l.y,m);h=new d(h.x,u.y,m);return{lon:t(r.radius,x,I),lat:t(r.radius,l,h)}};a.getLatDeltaForDistance=function(h,l){return f.rad2deg(h/l)};a.getLonDeltaForDistance=function(h,l,u){l/=
u;h=f.deg2rad(h);l=Math.sin(l/2);h=Math.cos(h);h=2*f.asinClamped(Math.sqrt(l*l/(h*h)));return f.rad2deg(h)};a.getMaxCameraAltitude=function(h,l){h=f.deg2rad(h/2);return(1-Math.sin(h))*l/Math.sin(h)};a.longitudeToTimezone=w;a.pointToTimezone=function(h,l){return w(h.longitude,l)};a.positionToTimezoneInfo=function(h,l){l||(l={hours:0,minutes:0,seconds:0});l.hours=w(h[0],!0);h=l.hours%1;l.hours-=h;l.minutes=60*h;h=l.minutes%1;l.minutes-=h;l.seconds=Math.round(60*h);return l};Object.defineProperty(a,
"__esModule",{value:!0})})},"esri/views/3d/support/ElevationProvider":function(){define(["exports","../../../core/maybe","../../../layers/graphics/dehydratedFeatureUtils"],function(a,f,d){function q(t){return"array"in t}a.SamplePosition=function(t,v=null,w=0){this.array=t;this.spatialReference=v;this.offset=w};a.getElevationAtPoint=function(t,v,w="ground"){if(d.isDehydratedPoint(v))return t.getElevation(v.x,v.y,v.z||0,v.spatialReference,w);if(q(v)){let h=v.offset;return t.getElevation(v.array[h++],
v.array[h++],v.array[h]||0,f.unwrapOr(v.spatialReference,t.spatialReference),w)}return t.getElevation(v[0],v[1],v[2]||0,t.spatialReference,w)};a.isSamplePosition=q;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/layers/graphics/dehydratedFeatureUtils":function(){define(["exports"],function(a){a.isDehydratedPoint=function(f){return"point"===f.type};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/webdoc/support/SlideThumbnail":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,f,d,q,t,v,w,h,l){var u;a.SlideThumbnail=u=function(m){function r(){var I=m.apply(this,arguments)||this;I.url="";return I}f._inheritsLoose(r,m);var x=r.prototype;x.destroy=function(){this.url=""};x.clone=function(){return new u({url:this.url})};return r}(q.JSONSupport);d.__decorate([t.property({type:String,json:{write:{isRequired:!0}}})],a.SlideThumbnail.prototype,"url",void 0);a.SlideThumbnail=u=d.__decorate([l.subclass("esri.webdoc.support.SlideThumbnail")],a.SlideThumbnail);Object.defineProperty(a,
"__esModule",{value:!0})})},"esri/webscene/support/Description":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(a,f,d,q,t,v,w,h){var l;d=l=function(u){function m(){var r=u.apply(this,arguments)||this;r.text="";return r}a._inheritsLoose(m,u);m.prototype.clone=
function(){return new l({text:this.text})};return m}(d.JSONSupport);f.__decorate([q.property({type:String,json:{write:!0}})],d.prototype,"text",void 0);return d=l=f.__decorate([h.subclass("esri.webscene.support.Description")],d)})},"esri/webscene/support/SlideEnvironment":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Lighting".split(" "),
function(a,f,d,q,t,v,w,h,l,u){var m;a.SlideEnvironment=m=function(r){function x(){var I=r.apply(this,arguments)||this;I.lighting=new u;return I}f._inheritsLoose(x,r);x.prototype.clone=function(){return new m({lighting:u.prototype.clone.call(this.lighting)})};return x}(q.JSONSupport);d.__decorate([t.property({type:u,json:{write:!0}})],a.SlideEnvironment.prototype,"lighting",void 0);a.SlideEnvironment=m=d.__decorate([l.subclass("esri.webscene.Environment")],a.SlideEnvironment);Object.defineProperty(a,
"__esModule",{value:!0})})},"esri/webscene/support/SlideGround":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Ground ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../webdoc/support/opacityUtils".split(" "),function(a,f,d,q,t,v,w,h,l,u){var m;q=m=function(r){function x(){var n=r.apply(this,arguments)||this;n.opacity=
null;return n}a._inheritsLoose(x,r);var I=x.prototype;I.clone=function(){return new m({opacity:this.opacity})};I.cloneAndApplyTo=function(n){if(null==this.opacity)return n;n=null!=n?n.clone():new d;n.opacity=this.opacity;return n};x.fromGround=function(n){return new m({opacity:n.opacity})};return x}(q.JSONSupport);f.__decorate([t.property({type:Number,json:{type:h.Integer,read:{reader:u.transparencyToOpacity,source:"transparency"},write:{writer:(r,x)=>{x.transparency=u.opacityToTransparency(r)},target:"transparency"}}})],
q.prototype,"opacity",void 0);return q=m=f.__decorate([l.subclass("esri.webscene.support.SlideGround")],q)})},"esri/webscene/support/SlideVisibleLayer":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(a,f,d,q,t,v,w,h){var l;a.SlideVisibleLayer=l=function(u){function m(r){r=
u.call(this,r)||this;r.id="";r.sublayerIds=null;return r}f._inheritsLoose(m,u);m.prototype.clone=function(){return new l({id:this.id,sublayerIds:t.clone(this.sublayerIds)})};return m}(q.JSONSupport);d.__decorate([v.property({type:String,json:{write:!0}})],a.SlideVisibleLayer.prototype,"id",void 0);d.__decorate([v.property({type:[w.Integer],json:{read:{source:"subLayerIds"},write:{target:"subLayerIds"}}})],a.SlideVisibleLayer.prototype,"sublayerIds",void 0);a.SlideVisibleLayer=l=d.__decorate([h.subclass("esri.webscene.support.SlideVisibleLayer")],
a.SlideVisibleLayer);Object.defineProperty(a,"__esModule",{value:!0})})},"esri/webscene/support/Title":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(a,f,d,q,t,v,w,h){var l;d=l=function(u){function m(){var r=u.apply(this,arguments)||this;r.text="";return r}
a._inheritsLoose(m,u);m.prototype.clone=function(){return new l({text:this.text})};return m}(d.JSONSupport);f.__decorate([q.property({type:String,json:{write:{isRequired:!0}}})],d.prototype,"text",void 0);return d=l=f.__decorate([h.subclass("esri.webscene.support.Title")],d)})},"esri/webscene/TransportationNetwork":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass".split(" "),
function(a,f,d,q,t,v,w,h){var l;d=l=function(u){function m(r){return u.call(this,r)||this}a._inheritsLoose(m,u);m.prototype.clone=function(){return new l({name:this.name,path:this.path,title:this.title})};return m}(d.JSONSupport);f.__decorate([q.property({type:String,json:{write:!0}})],d.prototype,"name",void 0);f.__decorate([q.property({type:String,json:{write:!0}})],d.prototype,"path",void 0);f.__decorate([q.property({type:String,json:{write:!0}})],d.prototype,"title",void 0);return d=l=f.__decorate([h.subclass("esri.webscene.TransportationNetwork")],
d)})},"esri/webscene/Version":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../core/Version"],function(a,f,d){d=function(q){function t(v,w){return q.call(this,v,w,"webscene")||this}f._inheritsLoose(t,q);f._createClass(t,[{key:"supportsGround",get:function(){return this.since(1,8)}},{key:"supportsVisibleElevationLayersInSlides",get:function(){return this.lessThan(1,8)}}]);return t}(d.Version);a.Version=d;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/core/Version":function(){define(["exports",
"./Error"],function(a,f){let d=function(){function q(v,w,h=""){this.major=v;this.minor=w;this._context=h}var t=q.prototype;t.lessThan=function(v,w){return this.major<v||v===this.major&&this.minor<w};t.since=function(v,w){return!this.lessThan(v,w)};t.validate=function(v){if(this.major!==v.major)throw new f((this._context&&this._context+":")+"unsupported-version",`Required major ${this._context&&this._context+" "}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:v});
};t.clone=function(){return new q(this.major,this.minor,this._context)};q.parse=function(v,w=""){const [h,l]=v.split(".");var u=/^\s*\d+\s*$/;if(!h||!h.match||!h.match(u))throw new f((w&&w+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:v});if(!l||!l.match||!l.match(u))throw new f((w&&w+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:v});v=parseInt(h,10);u=parseInt(l,10);return new q(v,u,w)};return q}();a.Version=
d;Object.defineProperty(a,"__esModule",{value:!0})})},"*noref":1}});
define("require ./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./kernel ./Map ./Viewpoint ./core/Collection ./core/Error ./core/Handles ./core/has ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/MultiOriginJSONSupport ./core/Promise ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/accessorSupport/originUtils ./core/accessorSupport/read ./geometry/Extent ./geometry/HeightModelInfo ./geometry/projection ./geometry/SpatialReference ./geometry/support/heightModelInfoUtils ./geometry/support/jsonUtils ./geometry/support/spatialReferenceUtils ./portal/Portal ./portal/PortalItem ./support/MapFloorInfo ./support/webSceneUtils ./views/ViewingMode ./views/support/spatialReferenceSupport ./webdoc/support/saveUtils ./webdoc/support/thumbnailUtils ./webscene/ApplicationProperties ./webscene/Environment ./webscene/InitialViewProperties ./webscene/Presentation ./webscene/TransportationNetwork ./webscene/Version".split(" "),function(a,
f,d,q,t,v,w,h,l,u,m,r,x,I,n,B,K,G,Q,J,ea,ha,Y,X,ma,g,y,P,U,ba,ka,fa,qa,c,p,N,ia,z,C,M,W,e,k,A,S,Z,V){const F=I.getLogger("esri.WebScene"),O=new V.Version(1,27);t=function(ja){function pa(D){var b=ja.call(this,D)||this;b._handles=new l;b.applicationProperties=null;b.clippingArea=null;b.clippingEnabled=!1;b.floorInfo=null;b.heightModelInfo=null;b.sourceVersion=null;b.transportationNetworks=null;b.presentation=new S;b.initialViewProperties=new A;b.portalItem=null;b.resourceInfo=null;b._debouncedSaveOperations=
G.debounce(function(){var E=f._asyncToGenerator(function*(R,T,oa){switch(R){case ca.SAVE:return b._saveImpl(T);case ca.SAVE_AS:return b._saveAsImpl(oa,T)}});return function(R,T,oa){return E.apply(this,arguments)}}());b.resourceReferences={portalItem:null,paths:[]};b.authoringApp=null;b.authoringAppVersion=null;b._isAuthoringAppSetByUser=!1;b._isAuthoringAppVersionSetByUser=!1;return b}f._inheritsLoose(pa,ja);var aa=pa.prototype;aa.initialize=function(){this.when().catch(D=>{F.error("#load()","Failed to load web scene",
D)});if(this.resourceInfo){let D;try{D=this._validateJSON(this.resourceInfo)}catch(b){this.addResolvingPromise(Promise.reject(b));return}this.read(D);this.addResolvingPromise(this._validateSpatialReference());this.addResolvingPromise(this._validateHeightModelInfo())}this._handles.add(this.allLayers.on("change",()=>this._scheduleLayersIdGC()))};aa.destroy=function(){this._unscheduleLayersIdGC();this._handles.destroy();this.presentation&&this.presentation.destroy();const D=this.portalItem;this.portalItem=
null;null==D?void 0:D.destroy()};aa.writeClippingArea=function(D,b){b.clippingArea||(b.clippingArea={});b.clippingArea.geometry=D.toJSON()};aa.readClippingEnabled=function(D,b){return b.clippingArea?!!b.clippingArea.clip:!1};aa.writeClippingEnabled=function(D,b){this.clippingArea&&(b.clippingArea||(b.clippingArea={}),b.clippingArea.clip=D)};aa.writeLayers=function(D,b,E,R){const T={...R,layerContainerType:"operational-layers"};D=D.map(oa=>this.verifyWriteLayer(oa,R)?oa.write({},T):null).filter(oa=>
!!oa);b[E]=D.toArray()};aa.verifyWriteLayer=function(D,b){return"write"in D?!0:(b&&b.messages&&b.messages.push(new h("layer:unsupported",`Layers (${D.title}, ${D.id}) of type '${D.declaredClass}' cannot be persisted in web scenes`,{layer:D})),!1)};aa.readSourceVersion=function(D,b){const [E,R]=b.version.split(".");return new V.Version(parseInt(E,10),parseInt(R,10))};aa.writeSourceVersion=function(D,b,E){b[E]=`${O.major}.${O.minor}`};aa.writeAuthoringApp=function(D,b){b.authoringApp=D&&this._isAuthoringAppSetByUser?
D:"ArcGIS API for JavaScript"};aa.writeAuthoringAppVersion=function(D,b){b.authoringAppVersion=D&&this._isAuthoringAppVersionSetByUser?D:q.version};aa.writeGround=function(D,b,E,R){b[E]=D?D.write({},R):{transparency:0,layers:[]}};aa.readInitialViewProperties=function(D,b){D={};b.initialState&&b.initialState.environment&&(D.environment=k.fromJSON(b.initialState.environment));D.spatialReference=b.spatialReference?ba.fromJSON(b.spatialReference):ba.WebMercator;D.viewingMode=b.viewingMode||"global";b.initialState&&
b.initialState.viewpoint&&(D.viewpoint=v.fromJSON(b.initialState.viewpoint));return new A(D)};aa.load=function(D){this.addResolvingPromise(this._loadFromSource());return Promise.resolve(this)};aa.loadAll=function(){return x.loadAll(this,D=>{const b=this.presentation&&this.presentation.slides;D(this.ground,this.basemap,this.layers,b&&b.map(E=>E.basemap))})};aa.read=function(D,b){b={...b,origin:"web-scene"};const E=this._isAuthoringAppVersionSetByUser,R=this._isAuthoringAppSetByUser;g.readLoadable(this,
D,T=>ja.prototype.read.call(this,D,T),b);R||(this._isAuthoringAppSetByUser=!1);E||(this._isAuthoringAppVersionSetByUser=!1);if(D.baseMap&&Array.isArray(D.baseMap.elevationLayers)&&this.sourceVersion.supportsVisibleElevationLayersInSlides){b=D.baseMap.elevationLayers.map(ua=>({id:ua.id}));const T=this.presentation.slides,oa=(ua,va)=>ua.visibleLayers.some(za=>za.id===va),ra=b.filter(ua=>!T.some(va=>oa(va,ua.id)));T.forEach(ua=>{ua.visibleLayers.addMany(ra)})}};aa._writeBasemapElevationLayers=function(D){const b=
D.ground&&D.ground.layers;!D.baseMap&&b&&b.length&&(D.baseMap={title:"Basemap",baseMapLayers:[]});D.baseMap&&(D.baseMap.elevationLayers=m.clone(b))};aa.write=function(D,b){var E;if("loaded"!==this.loadStatus)throw b=new h("webscene:not-loaded","Web scene must be loaded before it can be serialized"),F.error("#toJSON()","Web scene must be loaded before it can be serialized",this.loadError||this.loadStatus),b;this._runLayersIdGC();var R=!(null!=(E=b)&&E.messages);b={messages:[],...b,origin:"web-scene"};
D=ja.prototype.write.call(this,D,b);if(R&&(b=b.messages.filter(T=>"web-document-write:property-required"===T.name),b.length))throw R=new h("web-document:property-required","One or more properties that are required in the webscene JSON are missing, see details for the specific errors",{errors:b}),F.error("#toJSON()","One or more properties that are required in the webscene JSON are missing",b),R;this._writeBasemapElevationLayers(D);return D};aa.save=function(){var D=f._asyncToGenerator(function*(b){return this._debouncedSaveOperations(ca.SAVE,
b)});return function(b){return D.apply(this,arguments)}}();aa._saveImpl=function(){var D=f._asyncToGenerator(function*(b){this.portalItem||(F.error("save(): requires the .portalItem property to be set"),yield Promise.reject(new h("webscene:portal-item-not-set","Portal item to save to has not been set on the WebScene")));"Web Scene"!==this.portalItem.type&&(yield Promise.reject(new h("webscene:portal-item-wrong-type",'Portal item needs to have type "Web Scene"')));const E=this._updateFromPromise;yield this._ensureLoadBeforeSave();
const R=this._enableVerifyItemRelativeUrls({origin:"web-scene",url:this.portalItem.itemUrl&&Q.urlToObject(this.portalItem.itemUrl),messages:[],portal:this.portalItem.portal||c.getDefault(),portalItem:this.portalItem,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}}),T=this.write({},R);yield Promise.all(R.resources.pendingOperations);yield this._verifySave(T,R,b);this._updateTypeKeywords(this.portalItem);yield this.portalItem.update({data:T});
yield M.saveResources(this.resourceReferences,R,null);ma.updateOrigins(R);E&&(yield E);yield this._saveThumbnail();return this.portalItem});return function(b){return D.apply(this,arguments)}}();aa.saveAs=function(){var D=f._asyncToGenerator(function*(b,E){return this._debouncedSaveOperations(ca.SAVE_AS,E,b)});return function(b,E){return D.apply(this,arguments)}}();aa._saveAsImpl=function(){var D=f._asyncToGenerator(function*(b,E){b=p.from(b);b||(F.error("saveAs(portalItem): requires a portal item parameter"),
yield Promise.reject(new h("webscene:portal-item-required","saveAs requires a portal item to save to")));b.id&&(b=b.clone(),b.id=null);const R=b.portal||c.getDefault();yield this._ensureLoadBeforeSave();b.type="Web Scene";b.portal=R;const T=this._enableVerifyItemRelativeUrls({origin:"web-scene",url:null,messages:[],portal:R,portalItem:b,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}}),oa=this.write({},T);yield Promise.all(T.resources.pendingOperations);
yield this._verifySaveAs(oa,T,E);const ra=this.thumbnailUrl,ua=!this._isOverridden("thumbnailUrl");this._updateTypeKeywords(b);yield R._signIn();yield R.user.addItem({item:b,folder:E&&E.folder,data:oa});yield M.saveResources(this.resourceReferences,T,null);this.portalItem=b;B.MultiOriginJSONSupport.prototype.read.call(this,{version:oa.version,authoringApp:oa.authoringApp,authoringAppVersion:oa.authoringAppVersion},{name:"web-scene",ignoreDefaults:!0,url:b.itemUrl&&Q.urlToObject(b.itemUrl)});ma.updateOrigins(T);
ra&&(this.thumbnailUrl=ua?Q.addQueryParameter(ra,"w","8192"):ra);T.portalItem=b;yield this._saveThumbnail();return b});return function(b,E){return D.apply(this,arguments)}}();aa._saveThumbnail=function(){var D=f._asyncToGenerator(function*(){this._isOverridden("thumbnailUrl")&&(yield this.portalItem.updateThumbnail({thumbnail:this.thumbnailUrl}),this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))});return function(){return D.apply(this,arguments)}}();aa._verifySave=function(D,b,
E,R=!1){if(!qa.isEarth(this.spatialReference))return Promise.reject(new h("webscene:unsupported-spatial-reference","Webscenes using spatial reference systems from Mars or Moon can not be saved currently."));let T=b.messages.filter(ra=>"error"===ra.type).map(ra=>new h(ra.name,ra.message,ra.details));b.blockedRelativeUrls&&(T=T.concat(b.blockedRelativeUrls.map(ra=>new h("url:unsupported",`Relative url '${ra}' is not supported in Web Scene`))));E&&E.ignoreUnsupported&&(T=T.filter(ra=>"layer:unsupported"!==
ra.name&&"symbol:unsupported"!==ra.name&&"symbol-layer:unsupported"!==ra.name&&"property:unsupported"!==ra.name&&"url:unsupported"!==ra.name&&"scenemodification:unsupported"!==ra.name));null!=E&&E.requiredPropertyChecksDisabled&&(T=T.filter(ra=>"web-document-write:property-required"!==ra.name));const oa=E&&E.strictSchemaValidationEnabled;return(oa?(new Promise((ra,ua)=>a(["./webscene/support/schemaValidator"],ra,ua))).then(ra=>{ra=ra.validate(D);if(0<ra.length){const ua=`webscene did not validate:\n${ra.join("\n")}`;
F.error(`${R?"saveAs":"save"}(): ${ua}`)}return ra.map(ua=>new h("webscene:schema-validation",ua))}).then(ra=>{if(oa&&0<ra.length)throw ia.createSchemaValidationError(ra.concat(T));return T}):Promise.resolve(T)).then(ra=>{if(0<ra.length)return Promise.reject(new h("webscene:save","Failed to save webscene due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:ra}))})};aa._verifySaveAs=function(D,b,E){return this.canNotSaveAs(b)?Promise.reject(ia.createCopyError()):
this._verifySave(D,b,E,!0)};aa.verifySaveAs=function(D){const b=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),E=this.write({},b);return this._verifySaveAs(E,b,D)};aa.canNotSaveAs=function(D){D||(D=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),this.write({},D));return D.verifyItemRelativeUrls&&0<D.verifyItemRelativeUrls.writtenUrls.length};aa.updateFrom=function(){var D=f._asyncToGenerator(function*(b,E={}){this._updateFromPromise=b=this._updateFrom(b,
E);yield b;this._updateFromPromise===b&&(this._updateFromPromise=null)});return function(b){return D.apply(this,arguments)}}();aa._updateFrom=function(){var D=f._asyncToGenerator(function*(b,E={}){yield b.whenReady();if(!E.environmentExcluded&&b.environment){if(b.environment.lighting.type&&"sun"!==b.environment.lighting.type)throw new h("lighting:unsupported",`${b.environment.lighting.type} lighting cannot be stored in WebScene`);this.initialViewProperties.environment=k.prototype.clone.apply(b.environment)}!E.viewpointExcluded&&
b.viewpoint&&(this.initialViewProperties.viewpoint=b.viewpoint.clone());this.initialViewProperties.spatialReference=b.spatialReference.clone();this.initialViewProperties.viewingMode=b.viewingMode;n.isSome(b.clippingArea)?b.clippingArea!==this.clippingArea&&(this.clippingArea=b.clippingArea.clone(),this.clippingEnabled=!0):this.clippingEnabled=!1;b.heightModelInfo&&(this.heightModelInfo=b.heightModelInfo.clone());if(b.map===this)for(const R of b.allLayerViews)"visible"in R&&"visible"in R.layer&&R._isOverridden("visible")&&
(R.layer.visible=R.visible);if(!1===E.thumbnailExcluded||null==E.thumbnailExcluded&&!E.viewpointExcluded)yield this._updateFromThumbnail(b,E.thumbnailSize||void 0)});return function(b){return D.apply(this,arguments)}}();aa._updateFromThumbnail=function(){var D=f._asyncToGenerator(function*(b,E){E=W.getOptimalThumbnailSize(b,E);this.thumbnailUrl=(yield b.takeScreenshot({format:"jpg",width:E.width,height:E.height,disableDecorations:!0})).dataUrl});return function(b,E){return D.apply(this,arguments)}}();
aa._loadFromSource=function(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-scene"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):this._loadObjectsWithLayers()};aa._readAndLoadFromJSON=function(D,b){D=this._validateJSON(D);this.read(D,b);return this._loadFromJSON(D,b)};aa._extractOperationalLayers=function(D){const b=[];if(!this.sourceVersion.supportsGround&&D.baseMap&&Array.isArray(D.baseMap.elevationLayers))for(const T of D.baseMap.elevationLayers)b.push(T);
const E=[],R=T=>{T.layers&&(T.layers=T.layers.filter(R));return"ArcGISTiledElevationServiceLayer"===T.layerType?(this.sourceVersion.supportsGround||E.push(T),!1):!0};return{operationalLayers:D.operationalLayers?D.operationalLayers.filter(R):[],operationalElevationLayers:E,basemapElevationLayers:b}};aa._loadFromJSON=function(D,b){const E=new w;return this._validateSpatialReference().then(()=>this._validateHeightModelInfo()).then(()=>new Promise((R,T)=>a(["./layers/support/layersCreator"],R,T))).then(({populateOperationalLayers:R})=>
{const {operationalLayers:T,operationalElevationLayers:oa,basemapElevationLayers:ra}=this._extractOperationalLayers(D),ua=[],va={context:{...b,layerContainerType:"operational-layers"}};this.portalItem&&(va.context.portal=this.portalItem.portal||c.getDefault());0<ra.length&&ua.push(R(this.ground.layers,ra,{...va,context:{...va.context,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));0<oa.length&&ua.push(R(E,oa,{...va,context:{...va.context,layerContainerType:"ground"},
defaultLayerType:"ArcGISTiledElevationServiceLayer"}));T&&0<T.length&&ua.push(R(this.layers,T,va));return G.eachAlways(ua).then(()=>{})}).then(()=>this._loadObjectsWithLayers()).then(()=>{this.ground.layers.addMany(E)})};aa._ensureLoadBeforeSave=function(){var D=f._asyncToGenerator(function*(){yield this.load();yield this._loadObjectsWithLayers();const b=[];for(const E of this.allLayers.items)if("beforeSave"in E&&"function"===typeof E.beforeSave){const R=E.beforeSave();R&&b.push(R)}yield G.eachAlways(b)});
return function(){return D.apply(this,arguments)}}();aa._loadObjectsWithLayers=function(){var D=f._asyncToGenerator(function*(){const b=[];this.ground&&b.push(this.ground.load());this.basemap&&b.push(this.basemap.load());this.presentation.slides.forEach(E=>{E.basemap&&b.push(E.basemap.load())});yield G.eachAlways(b)});return function(){return D.apply(this,arguments)}}();aa._loadFromItem=function(){var D=f._asyncToGenerator(function*(b){yield b.load().catch(T=>{throw new h("webscene:load-portal-item",
"Failed to load portal item",{error:T});});if("Web Scene"!==b.type)throw new h("webscene:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Scene'",{type:b.type});const E=yield b.fetchData();this.resourceInfo=E;const R={origin:"web-scene",url:Q.urlToObject(b.itemUrl),portal:b.portal||c.getDefault(),portalItem:b,readResourcePaths:[]};yield this._readAndLoadFromJSON(E,R);this.resourceReferences={portalItem:b,paths:R.readResourcePaths}});return function(b){return D.apply(this,arguments)}}();
aa._validateSpatialReference=function(){const D=this.initialViewProperties,b=this._sceneSpatialReference;let E;if("local"!==D.viewingMode){if(!C.isSpatialReferenceSupported(b,z.ViewingMode.Global))return Promise.reject(new h("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in global mode, only Web Mercator, WGS84 GCS or CGCS2000 are supported",{spatialReference:b,viewingMode:D.viewingMode}));E=oa=>!oa||U.canProjectWithoutEngine(oa,b)}else{if(!C.isSpatialReferenceSupported(b,
z.ViewingMode.Local))return Promise.reject(new h("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in local mode, only projected coordinate systems are supported",{spatialReference:b,viewingMode:D.viewingMode}));E=oa=>!oa||oa.equals(b)}const R=oa=>oa&&(n.isSome(oa.camera)&&oa.camera.position&&oa.camera.position.spatialReference||n.isSome(oa.targetGeometry)&&oa.targetGeometry.spatialReference);var T=R(D.viewpoint);return T&&!E(T)?Promise.reject(new h("webscene:incompatible-camera-spatial-reference",
"Camera spatial reference (${cameraSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{cameraSpatialReference:T,sceneSpatialReference:b,viewingMode:D.viewingMode})):(T=this.presentation.slides.find(oa=>!E(R(oa.viewpoint))))?(T=R(T.viewpoint),Promise.reject(new h("webscene:incompatible-slide-spatial-reference","Slide spatial reference (${slideSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",
{slideSpatialReference:T,sceneSpatialReference:b,viewingMode:D.viewingMode}))):Promise.resolve()};aa._validateHeightModelInfo=function(){const D=ka.validateWebSceneError(this.heightModelInfo,this._sceneSpatialReference);return D?Promise.reject(D):Promise.resolve()};aa._validateJSON=function(D){const b=V.Version.parse(D.version||"","webscene");O.validate(b);D.version=`${b.major}.${b.minor}`;1===b.major&&2>=b.minor&&(D.spatialReference=ba.WebMercator.toJSON());return D};aa._updateTypeKeywords=function(D){"local"===
this.initialViewProperties.viewingMode?D.typeKeywords?-1===D.typeKeywords.indexOf("ViewingMode-Local")&&D.typeKeywords.push("ViewingMode-Local"):D.typeKeywords=["ViewingMode-Local"]:"global"===this.initialViewProperties.viewingMode&&D.typeKeywords&&(D.typeKeywords=D.typeKeywords.filter(b=>"ViewingMode-Local"!==b));D.typeKeywords&&(D.typeKeywords=D.typeKeywords.filter((b,E,R)=>R.indexOf(b)===E))};aa._enableVerifyItemRelativeUrls=function(D){const b=this._verifyItemRelativeRootPath;b&&(D.verifyItemRelativeUrls=
{rootPath:b,writtenUrls:[]});return D};aa._unscheduleLayersIdGC=function(){this._layersIdGCTimeoutId&&(clearTimeout(this._layersIdGCTimeoutId),this._layersIdGCTimeoutId=0)};aa._scheduleLayersIdGC=function(){this._unscheduleLayersIdGC();this._layersIdGCTimeoutId=setTimeout(()=>{this._layersIdGCTimeoutId=0;this._runLayersIdGC()},3E3)};aa._runLayersIdGC=function(){this._unscheduleLayersIdGC();var D=this.applicationProperties&&this.applicationProperties.viewing&&this.applicationProperties.viewing.search;
const b=E=>!!this.allLayers.find(R=>R.id===E);D&&D.layers&&(D.layers=D.layers.filter(E=>b(E.id)));(D=this.presentation&&this.presentation.slides)&&D.forEach(E=>{E.visibleLayers&&(E.visibleLayers=E.visibleLayers.filter(R=>b(R.id)))})};pa.fromJSON=function(D){if(!D)throw new h("webscene:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:D})};f._createClass(pa,[{key:"thumbnailUrl",get:function(){return this.portalItem&&this.portalItem.thumbnailUrl||null},set:function(D){D?
this._override("thumbnailUrl",D):(this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))}},{key:"authoringApp",set:function(D){this._isAuthoringAppSetByUser=!0;this._set("authoringApp",D)}},{key:"authoringAppVersion",set:function(D){this._isAuthoringAppVersionSetByUser=!0;this._set("authoringAppVersion",D)}},{key:"spatialReference",get:function(){var D,b;return null!=(D=null==(b=this.initialViewProperties)?void 0:b.spatialReference)?D:ba.WebMercator}},{key:"viewingMode",get:function(){var D,
b;return null!=(D=null==(b=this.initialViewProperties)?void 0:b.viewingMode)?D:"global"}},{key:"_sceneSpatialReference",get:function(){return this.initialViewProperties.spatialReference||ba.WebMercator}},{key:"_verifyItemRelativeRootPath",get:function(){return this.portalItem&&this.portalItem.itemUrl?Q.urlToObject(this.portalItem.itemUrl).path:null}}]);return pa}(r.LoadableMixin(K.EsriPromiseMixin(B.MultiOriginJSONMixin(t))));t.VERSION=O;d.__decorate([J.property({type:e,json:{write:!0}})],t.prototype,
"applicationProperties",void 0);d.__decorate([J.property({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],t.prototype,"basemap",void 0);d.__decorate([J.property({type:y,json:{read:{source:"clippingArea.geometry",reader:fa.fromJSON},write:{target:"clippingArea.geometry"}}})],t.prototype,"clippingArea",void 0);d.__decorate([X.writer("clippingArea")],t.prototype,"writeClippingArea",null);d.__decorate([J.property({type:Boolean,json:{write:{target:"clippingArea.clip"}}})],t.prototype,"clippingEnabled",
void 0);d.__decorate([ha.reader("clippingEnabled",["clippingArea"])],t.prototype,"readClippingEnabled",null);d.__decorate([X.writer("clippingEnabled")],t.prototype,"writeClippingEnabled",null);d.__decorate([J.property({type:N,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],t.prototype,"floorInfo",void 0);d.__decorate([J.property({type:P,json:{write:!0}})],t.prototype,"heightModelInfo",void 0);d.__decorate([J.property({json:{write:{target:"operationalLayers",ignoreOrigin:!0}}})],
t.prototype,"layers",void 0);d.__decorate([X.writer("layers")],t.prototype,"writeLayers",null);d.__decorate([J.property({readOnly:!0,type:V.Version,json:{type:(()=>{const ja=[],pa=O.major;for(let aa=8;aa<=O.minor;aa++)ja.push(`${pa}.${aa}`);return ja})(),write:{ignoreOrigin:!0,target:"version",isRequired:!0,overridePolicy:()=>({enabled:!0,allowNull:!0,ignoreOrigin:!0})}}})],t.prototype,"sourceVersion",void 0);d.__decorate([ha.reader("sourceVersion",["version"])],t.prototype,"readSourceVersion",null);
d.__decorate([X.writer("sourceVersion")],t.prototype,"writeSourceVersion",null);d.__decorate([J.property({json:{read:!1,write:!1}})],t.prototype,"tables",void 0);d.__decorate([J.property()],t.prototype,"thumbnailUrl",null);d.__decorate([J.property({type:String,json:{write:{writerEnsuresNonNull:!0,ignoreOrigin:!0}}})],t.prototype,"authoringApp",null);d.__decorate([X.writer("authoringApp")],t.prototype,"writeAuthoringApp",null);d.__decorate([J.property({type:String,json:{write:{writerEnsuresNonNull:!0,
ignoreOrigin:!0}}})],t.prototype,"authoringAppVersion",null);d.__decorate([X.writer("authoringAppVersion")],t.prototype,"writeAuthoringAppVersion",null);d.__decorate([J.property({json:{write:{isRequired:!0,allowNull:!0,ignoreOrigin:!0,enabled:!0}}})],t.prototype,"ground",void 0);d.__decorate([X.writer("ground")],t.prototype,"writeGround",null);d.__decorate([J.property({type:w.ofType(Z),json:{write:!0}})],t.prototype,"transportationNetworks",void 0);d.__decorate([J.property({type:S,nonNullable:!0,
json:{write:{ignoreOrigin:!0,writer:(ja,pa,aa,D)=>{ja.slides&&0<ja.slides.length&&(pa.presentation=ja.write({},{...D,isPresentation:!0}))}}}})],t.prototype,"presentation",void 0);d.__decorate([J.property({type:A,nonNullable:!0,json:{write:{target:"initialState",isRequired:!0,ignoreOrigin:!0},default:()=>new A({viewingMode:"global",spatialReference:ba.WebMercator})}})],t.prototype,"initialViewProperties",void 0);d.__decorate([ha.reader("initialViewProperties",["initialState.environment","spatialReference",
"viewingMode","initialState.viewpoint"])],t.prototype,"readInitialViewProperties",null);d.__decorate([J.property({type:ba,json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],t.prototype,"spatialReference",null);d.__decorate([J.property({type:["local","global"],json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],t.prototype,"viewingMode",null);d.__decorate([J.property({type:p})],t.prototype,"portalItem",void 0);d.__decorate([J.property()],t.prototype,"resourceInfo",void 0);t=d.__decorate([Y.subclass("esri.WebScene")],
t);var ca;(function(ja){ja[ja.SAVE=0]="SAVE";ja[ja.SAVE_AS=1]="SAVE_AS"})(ca||(ca={}));return t});