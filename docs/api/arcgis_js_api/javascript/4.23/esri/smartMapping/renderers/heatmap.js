// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../renderers/ClassBreaksRenderer ../../renderers/DictionaryRenderer ../../renderers/DotDensityRenderer ../../renderers/HeatmapRenderer ../../renderers/Renderer ../../renderers/SimpleRenderer ../../renderers/UniqueValueRenderer ../../renderers/support/jsonUtils ../../core/Error ../../core/maybe ../../renderers/support/HeatmapColorStop ./support/utils ../statistics/heatmapStatistics ../support/utils ../support/adapters/support/layerUtils ../../chunks/heatmap".split(" "),
function(x,l,y,T,U,V,E,W,X,Y,Z,z,p,m,q,F,G,g,r){function H(a){return t.apply(this,arguments)}function t(){t=l._asyncToGenerator(function*(a){if(!(a&&a.layer&&a.view))throw new z("heatmap-renderer:missing-parameters","'layer' and 'view' parameters are required");const {blurRadius:c,minRatio:d,maxRatio:b,fadeToTransparent:n}=a;a={...a};a.blurRadius=null==c?10:c;a.minRatio=null==d?.01:d;a.maxRatio=null==b?1:b;a.fadeToTransparent=null==n?!0:n;var f=[g.LayerType.CSVLayer,g.LayerType.FeatureLayer,g.LayerType.OGCFeatureLayer,
g.LayerType.GeoJSONLayer,g.LayerType.WFSLayer],e=g.createLayerAdapter(a.layer,f);a.layer=e;if(!e)throw new z("heatmap-renderer:invalid-parameters","'layer' must be one of these types: "+g.getLayerTypeLabels(f).join(", "));f=p.isSome(a.signal)?{signal:a.signal}:null;yield e.load(f);f=yield G.getFieldsList({field:a.field});if(e=q.verifyBasicFieldValidity(e,f,"heatmap-renderer:invalid-parameters"))throw e;return a});return t.apply(this,arguments)}function I(a){return u.apply(this,arguments)}function u(){u=
l._asyncToGenerator(function*(a){let c=a.scheme,d=null;var b=null;b=yield q.getBasemapInfo(a.basemap,a.view);d=p.isSome(b.basemapId)?b.basemapId:null;b=p.isSome(b.basemapTheme)?b.basemapTheme:null;if(c)return{scheme:r.cloneScheme(c),basemapId:d,basemapTheme:b};if(a=r.getSchemes({basemap:d,basemapTheme:b}))c=a.primaryScheme,d=a.basemapId,b=a.basemapTheme;return{scheme:c,basemapId:d,basemapTheme:b}});return u.apply(this,arguments)}function J(a,c){return v.apply(this,arguments)}function v(){v=l._asyncToGenerator(function*(a,
c){const {fieldOffset:d}=a,{field:b,basemap:n,blurRadius:f,minRatio:e,maxRatio:K,fadeToTransparent:L,heatmapScheme:M,view:N}=c,{scheme:A,basemapId:O,basemapTheme:P}=yield I({basemap:n,scheme:M,view:N});var k=A.colors;const B=k.length,C=(c=!a.count)?[0,100]:[a.min,a.max],Q=(K-e)/(B-1),h=k[0],D=[new m({ratio:0,color:new y([h.r,h.g,h.b,0])}),new m({ratio:.01,color:new y([h.r,h.g,h.b,0])}),new m({ratio:L?e:.01,color:h})];q.createColors(k,B).forEach((R,S)=>{D.push(new m({ratio:e+Q*S,color:R}))});k=new E({blurRadius:f,
colorStops:D,field:b,minPixelIntensity:C[0],maxPixelIntensity:C[1]});null!=d&&(k.fieldOffset=d);return{renderer:k,statistics:a,defaultValuesUsed:c,scheme:r.cloneScheme(A),basemapId:O,basemapTheme:P}});return v.apply(this,arguments)}function w(){w=l._asyncToGenerator(function*(a){a=yield H(a);const c=a.statistics?a.statistics:yield F({layer:a.layer,field:a.field,fieldOffset:a.fieldOffset,blurRadius:a.blurRadius,view:a.view,signal:a.signal});return J(c,a)});return w.apply(this,arguments)}x.createRenderer=
function(a){return w.apply(this,arguments)};Object.defineProperty(x,"__esModule",{value:!0})});