// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../core/shaderLibrary/ShaderOutputOptions ../core/shaderLibrary/Slice.glsl ../core/shaderLibrary/output/OutputHighlight.glsl ../core/shaderLibrary/shading/MultipassTerrainTest.glsl ../core/shaderLibrary/util/View.glsl ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/basicInterfaces ../lib/DefaultVertexAttributeLocations ../lib/OrderIndependentTransparency ../lib/Program ../lib/StencilUtils ../../../../chunks/ColorMaterial.glsl ../../../webgl/renderState".split(" "),
function(y,r,v,g,m,z,A,B,w,d,n,e,l,C,p,D,t,E,q){n=function(k){function h(){return k.apply(this,arguments)||this}v._inheritsLoose(h,k);var a=h.prototype;a.initializeProgram=function(f){var b=h.shader.get();const c=this.configuration;b=b.build({output:c.output,oitEnabled:c.transparencyPassType===l.TransparencyPassType.Color,attributeColor:c.vertexColors,slicePlaneEnabled:c.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,multipassTerrainEnabled:c.multipassTerrainEnabled,
cullAboveGround:c.cullAboveGround});return new D.Program(f.rctx,b,C.Default3D)};a.bindPass=function(f,b){w.bindProjectionMatrix(this.program,b.camera.projectionMatrix);this.program.setUniform4fv("eColor",f.color);this.configuration.output===m.ShaderOutput.Highlight&&A.bindOutputHighlight(this.program,b);(this.configuration.output===m.ShaderOutput.Depth||b.multipassTerrainEnabled)&&this.program.setUniform2fv("nearFar",b.camera.nearFar);b.multipassTerrainEnabled&&(this.program.setUniform2fv("inverseViewport",
b.inverseViewport),B.bindMultipassTerrainTexture(this.program,b))};a.bindDraw=function(f){w.bindView(this.program,f);this.program.rebindTextures();z.bindSliceUniformsWithOrigin(this.program,this.configuration,f)};a._createPipeline=function(f,b){const c=this.configuration,u=f===l.TransparencyPassType.NONE,x=f===l.TransparencyPassType.FrontFace;return q.makePipelineState({blending:c.output!==m.ShaderOutput.Color&&c.output!==m.ShaderOutput.Alpha||!c.transparent?null:u?p.blendingDefault:p.oitBlending(f),
culling:q.cullingParams(c.cullFace),depthTest:{func:p.oitDepthTest(f)},depthWrite:u||x?c.writeDepth&&q.defaultDepthWriteParams:null,colorWrite:q.defaultColorWriteParams,stencilWrite:c.sceneHasOcludees?t.stencilWriteMaskOn:null,stencilTest:c.sceneHasOcludees?b?t.stencilToolMaskBaseParams:t.stencilBaseAllZerosParams:null,polygonOffset:u||x?c.polygonOffset&&F:p.getOITPolygonOffset(c.enableOffset)})};a.initializePipeline=function(){this._occludeePipelineState=this._createPipeline(this.configuration.transparencyPassType,
!0);return this._createPipeline(this.configuration.transparencyPassType,!1)};a.getPipelineState=function(f,b){return b?this._occludeePipelineState:k.prototype.getPipelineState.call(this,f,b)};return h}(n.ShaderTechnique);n.shader=new d.ReloadableShaderModule(E.ColorMaterialShader,()=>new Promise((k,h)=>y(["./ColorMaterial.glsl"],k,h)));const F={factor:1,units:1};d=function(k){function h(){var a=k.apply(this,arguments)||this;a.output=m.ShaderOutput.Color;a.cullFace=l.CullFaceOptions.None;a.slicePlaneEnabled=
!1;a.vertexColors=!1;a.transparent=!1;a.polygonOffset=!1;a.enableOffset=!0;a.writeDepth=!0;a.sceneHasOcludees=!1;a.transparencyPassType=l.TransparencyPassType.NONE;a.multipassTerrainEnabled=!1;a.cullAboveGround=!1;return a}v._inheritsLoose(h,k);return h}(e.ShaderTechniqueConfiguration);g.__decorate([e.parameter({count:m.ShaderOutput.COUNT})],d.prototype,"output",void 0);g.__decorate([e.parameter({count:l.CullFaceOptions.COUNT})],d.prototype,"cullFace",void 0);g.__decorate([e.parameter()],d.prototype,
"slicePlaneEnabled",void 0);g.__decorate([e.parameter()],d.prototype,"vertexColors",void 0);g.__decorate([e.parameter()],d.prototype,"transparent",void 0);g.__decorate([e.parameter()],d.prototype,"polygonOffset",void 0);g.__decorate([e.parameter()],d.prototype,"enableOffset",void 0);g.__decorate([e.parameter()],d.prototype,"writeDepth",void 0);g.__decorate([e.parameter()],d.prototype,"sceneHasOcludees",void 0);g.__decorate([e.parameter({count:l.TransparencyPassType.COUNT})],d.prototype,"transparencyPassType",
void 0);g.__decorate([e.parameter()],d.prototype,"multipassTerrainEnabled",void 0);g.__decorate([e.parameter()],d.prototype,"cullAboveGround",void 0);r.ColorMaterialTechnique=n;r.ColorMaterialTechniqueConfiguration=d;Object.defineProperty(r,"__esModule",{value:!0})});