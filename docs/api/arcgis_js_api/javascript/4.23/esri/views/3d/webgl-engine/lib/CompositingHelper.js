// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
define("../../../../core/maybe ../../terrain/interfaces ./glUtil3D ../../../../chunks/Compositing.glsl ../shaders/CompositingTechnique ../../../webgl/enums ../../../webgl/Util".split(" "),function(n,t,u,l,f,p,q){let v=function(){function r(a,c){this._rctx=a;this._techniqueRepository=c}var h=r.prototype;h.dispose=function(){this._vao=n.disposeMaybe(this._vao)};h.compositeTransparent=function(a,c,k,d=1){const g=this._rctx;b.alphaMode=f.AlphaMode.Alpha;b.function=l.CompositingFunction.Transparency;b.hasOpacityFactor=
1!==d;d=this._techniqueRepository.acquire(f.CompositingTechnique,b);const e=g.useTechnique(d);e.bindTexture(a,"colorTexture");e.bindTexture(c,"alphaTexture");e.bindTexture(k,"frontFaceTexture");a=this._ensureVAO();g.bindVAO(a);g.drawArrays(p.PrimitiveType.TRIANGLE_STRIP,0,q.vertexCount(a,"geometry"));d.release()};h.composite=function(a,c=f.AlphaMode.None,k=1,d=l.CompositingFunction.Standard,g=t.OverlayIndex.INNER){const e=this._rctx;b.alphaMode=c;b.function=d;b.hasOpacityFactor=1!==k;c=this._techniqueRepository.acquire(f.CompositingTechnique,
b);const m=e.useTechnique(c);m.bindTexture(a,"tex");b.hasOpacityFactor&&m.setUniform1f("opacity",k);d===l.CompositingFunction.OverlayWithTransparency&&m.setUniform1i("overlayIdx",g);a=this._ensureVAO();e.bindVAO(a);e.drawArrays(p.PrimitiveType.TRIANGLE_STRIP,0,q.vertexCount(a,"geometry"));c.release()};h._ensureVAO=function(){n.isNone(this._vao)&&(this._vao=u.createQuadVAO(this._rctx));return this._vao};return r}();const b=new f.CompositingTechniqueConfiguration;return v});