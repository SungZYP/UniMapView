// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
require({cache:{"esri/libs/i3s/enums":function(){define(["exports"],function(b){b.IndexType=void 0;(function(f){f[f.None=0]="None";f[f.Int16=1]="Int16";f[f.Int32=2]="Int32"})(b.IndexType||(b.IndexType={}));b.ModificationType=void 0;(function(f){f[f.Replace=0]="Replace";f[f.Outside=1]="Outside";f[f.Inside=2]="Inside";f[f.Finished=3]="Finished"})(b.ModificationType||(b.ModificationType={}));Object.defineProperty(b,"__esModule",{value:!0})})},"esri/libs/i3s/I3SModule":function(){define(["require","exports",
"../../assets"],function(b,f,B){function l(c){return B.getAssetUrl(`esri/libs/i3s/${c}`)}let u;f.get=function(){u||(u=(new Promise(c=>(new Promise((k,g)=>b(["../../chunks/i3s"],k,g))).then(k=>k.i3s).then(({default:k})=>{const g=k({locateFile:l,onRuntimeInitialized:()=>c(g)});delete g.then}))).catch(c=>Promise.reject(c)));return u};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/3d/layers/i3s/I3SNode":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/vec4f64"],
function(b,f,B){let l=function(c,k){this.id=c;this.mbs=k;this.renderMbs=B.fromArray([0,0,0,-1]);this.imModificationImpact=b.NodeIMModificationImpact.NotChecked};b.NodeFilterImpact=void 0;(function(c){c[c.Unmodified=0]="Unmodified";c[c.Culled=1]="Culled";c[c.NotChecked=2]="NotChecked"})(b.NodeFilterImpact||(b.NodeFilterImpact={}));b.NodeIMModificationImpact=void 0;(function(c){c[c.Unmodified=0]="Unmodified";c[c.PotentiallyModified=1]="PotentiallyModified";c[c.Culled=2]="Culled";c[c.Unknown=3]="Unknown";
c[c.NotChecked=4]="NotChecked"})(b.NodeIMModificationImpact||(b.NodeIMModificationImpact={}));let u=function(c){function k(g,v,x,y,z,D,E,F,G,w){g=c.call(this,g,x)||this;g.index=v;g.childCount=y;g.level=z;g.resources=D;g.version=E;g.lodMetric=F;g.maxError=G;g.numFeatures=w;g.failed=!1;g.hasModifications=!1;g.cacheState=b.CacheState.Unknown;g.vertexCount=0;g.memory=0;return g}f._inheritsLoose(k,c);return k}(l);b.CacheState=void 0;(function(c){c[c.Unknown=0]="Unknown";c[c.Uncached=1]="Uncached";c[c.Cached=
2]="Cached"})(b.CacheState||(b.CacheState={}));b.LodMetric=void 0;(function(c){c[c.None=0]="None";c[c.MaxScreenThreshold=1]="MaxScreenThreshold";c[c.ScreenSpaceRelative=2]="ScreenSpaceRelative";c[c.RemovedFeatureDiameter=3]="RemovedFeatureDiameter";c[c.DistanceRangeFromDefaultCamera=4]="DistanceRangeFromDefaultCamera"})(b.LodMetric||(b.LodMetric={}));b.NodeState=void 0;(function(c){c[c.Hole=0]="Hole";c[c.Leaf=1]="Leaf"})(b.NodeState||(b.NodeState={}));b.Node=u;b.NodeBase=l;b.NodeTraversalState=function(c,
k,g,v){this.nodeHasLOD=c;this.isChosen=k;this.lodLevel=g;this.version=v};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/vec4f64":function(){define(["exports"],function(b){function f(){return[0,0,0,0]}function B(d){return[d[0],d[1],d[2],d[3]]}function l(d,C,a,e){return[d,C,a,e]}function u(d){const C=f(),a=Math.min(4,d.length);for(let e=0;e<a;++e)C[e]=d[e];return C}function c(d,C){return new Float64Array(d,C,4)}function k(){return f()}function g(){return[1,1,1,1]}function v(){return[1,
0,0,0]}function x(){return[0,1,0,0]}function y(){return[0,0,1,0]}function z(){return[0,0,0,1]}const D=f(),E=g(),F=v(),G=x(),w=y(),A=z(),L=Object.freeze({__proto__:null,create:f,clone:B,fromValues:l,fromArray:u,createView:c,zeros:k,ones:g,unitX:v,unitY:x,unitZ:y,unitW:z,ZEROS:D,ONES:E,UNIT_X:F,UNIT_Y:G,UNIT_Z:w,UNIT_W:A});b.ONES=E;b.UNIT_W=A;b.UNIT_X=F;b.UNIT_Y=G;b.UNIT_Z=w;b.ZEROS=D;b.clone=B;b.create=f;b.createView=c;b.fromArray=u;b.fromValues=l;b.ones=g;b.unitW=z;b.unitX=v;b.unitY=x;b.unitZ=y;b.vec4f64=
L;b.zeros=k})},"*noref":1}});
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../core/typedArrayUtil ../../../libs/i3s/enums ../../../libs/i3s/I3SModule ./i3s/I3SNode".split(" "),function(b,f,B,l,u,c,k){function g(){g=f._asyncToGenerator(function*(a){yield A();const e=[a.geometryBuffer];return{result:E(a,e),transferList:e}});return g.apply(this,arguments)}function v(){v=f._asyncToGenerator(function*(a){var e;yield A();const m=[a.geometryBuffer];var {geometryBuffer:p}=a,q=p.byteLength;a=d._malloc(q);
q=new Uint8Array(d.HEAPU8.buffer,a,q);q.set(new Uint8Array(p));p=d.dracoDecompressPointCloudData(a,q.byteLength);d._free(a);if(0<p.error.length)throw`i3s.wasm: ${p.error}`;a=0<(null==(e=p.featureIds)?void 0:e.length)?l.slice(p.featureIds):null;e=l.slice(p.positions);a&&m.push(a.buffer);m.push(e.buffer);return{result:{positions:e,featureIds:a},transferList:m}});return v.apply(this,arguments)}function x(){x=f._asyncToGenerator(function*(a){yield A();F(a);a={buffer:a.buffer};return{result:a,transferList:[a.buffer]}});
return x.apply(this,arguments)}function y(){y=f._asyncToGenerator(function*(a){yield A();D(a)});return y.apply(this,arguments)}function z(){z=f._asyncToGenerator(function*(a){yield A();d.setLegacySchema(a.context,a.jsonSchema)});return z.apply(this,arguments)}function D(a){const e=a.modifications,m=d._malloc(8*e.length),p=new Float64Array(d.HEAPU8.buffer,m,e.length);for(let q=0;q<e.length;++q)p[q]=e[q];d.setModifications(a.context,m,e.length,a.isGeodetic);d._free(m)}function E(a,e){if(!d)return null;
const {context:m,localOrigin:p,globalTrafo:q,mbs:M,obb:N,elevationOffset:R,geometryBuffer:O,geometryDescriptor:P,indexToVertexProjector:S,vertexToRenderProjector:T}=a;var H=d._malloc(O.byteLength),I=d._malloc(33*Float64Array.BYTES_PER_ELEMENT),h=new Uint8Array(d.HEAPU8.buffer,H,O.byteLength);h.set(new Uint8Array(O));var n=new Float64Array(d.HEAPU8.buffer,I,33);w(n,p);var r=n.byteOffset+3*n.BYTES_PER_ELEMENT,t=new Float64Array(n.buffer,r);w(t,q);r+=16*n.BYTES_PER_ELEMENT;t=new Float64Array(n.buffer,
r);w(t,M);r+=4*n.BYTES_PER_ELEMENT;B.isSome(N)&&(t=new Float64Array(n.buffer,r),w(t,N.center),r+=3*n.BYTES_PER_ELEMENT,t=new Float64Array(n.buffer,r),w(t,N.halfSize),r+=3*n.BYTES_PER_ELEMENT,t=new Float64Array(n.buffer,r),w(t,N.quaternion));n={isDraco:!1,isLegacy:!1,color:a.layouts.some(J=>J.some(K=>"color"===K.name)),normal:a.needNormals&&a.layouts.some(J=>J.some(K=>"normalCompressed"===K.name)),uv0:a.layouts.some(J=>J.some(K=>"uv0"===K.name)),uvRegion:a.layouts.some(J=>J.some(K=>"uvRegion"===K.name)),
featureIndex:P.featureIndex};h=d.process(m,!!a.obb,H,h.byteLength,P,n,I,R,S,T,a.normalReferenceFrame);d._free(I);d._free(H);if(0<h.error.length)throw`i3s.wasm: ${h.error}`;if(h.discarded)return null;H=0<h.componentOffsets.length?l.slice(h.componentOffsets):null;I=0<h.featureIds.length?l.slice(h.featureIds):null;n=l.slice(h.interleavedVertedData).buffer;r=h.indicesType===u.IndexType.Int16?l.slice(new Uint16Array(h.indices.buffer,h.indices.byteOffset,h.indices.byteLength/2)):l.slice(new Uint32Array(h.indices.buffer,
h.indices.byteOffset,h.indices.byteLength/4));t=l.slice(h.positions);const Q=h.positionIndicesType===u.IndexType.Int16?l.slice(new Uint16Array(h.positionIndices.buffer,h.positionIndices.byteOffset,h.positionIndices.byteLength/2)):l.slice(new Uint32Array(h.positionIndices.buffer,h.positionIndices.byteOffset,h.positionIndices.byteLength/4));a={layout:a.layouts[0],interleavedVertexData:n,indices:r,hasColors:h.hasColors,hasModifications:h.hasModifications,positionData:{data:t,indices:Q}};I&&e.push(I.buffer);
H&&e.push(H.buffer);e.push(n);e.push(r.buffer);e.push(t.buffer);e.push(Q.buffer);return{componentOffsets:H,featureIds:I,transformedGeometry:a,obb:h.obb}}function F(a){const {context:e,buffer:m}=a;a=d._malloc(m.byteLength);const p=m.byteLength/Float64Array.BYTES_PER_ELEMENT,q=new Float64Array(d.HEAPU8.buffer,a,p),M=new Float64Array(m);q.set(M);d.filterOBBs(e,a,p);M.set(q);d._free(a)}function G(a){d&&d.destroy(a)}function w(a,e){for(let m=0;m<e.length;++m)a[m]=e[m]}function A(){if(d)return Promise.resolve();
L||(L=c.get().then(a=>{d=a;L=null}));return L}let L,d;const C={transform:E,destroy:G};b.destroyContext=function(a){G(a)};b.dracoDecompressPointCloudData=function(a){return v.apply(this,arguments)};b.filterObbsForModifications=function(a){return x.apply(this,arguments)};b.filterObbsForModificationsSync=F;b.initialize=A;b.interpretObbModificationResults=function(a){return 0===a?k.NodeIMModificationImpact.Unmodified:1===a?k.NodeIMModificationImpact.PotentiallyModified:2===a?k.NodeIMModificationImpact.Culled:
k.NodeIMModificationImpact.Unknown};b.process=function(a){return g.apply(this,arguments)};b.setLegacySchema=function(a){return z.apply(this,arguments)};b.setModifications=function(a){return y.apply(this,arguments)};b.setModificationsSync=D;b.test=C;Object.defineProperty(b,"__esModule",{value:!0})});