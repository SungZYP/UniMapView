// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2f32 ../../support/buffer/InterleavedLayout ../core/shaderLibrary/ShaderOutputOptions ../core/shaderLibrary/hud/HUD.glsl ../lib/GLMaterial ../lib/Material ../lib/RenderSlot ../lib/VertexAttribute ./internal/bufferWriterUtils ../shaders/LineCalloutTechnique".split(" "),function(n,k,g,u,v,p,w,q,l,d,m,r){let A=function(f){function c(a){a=f.call(this,a,x)||this;a.techniqueConfig=new r.LineCalloutTechniqueConfiguration;
a._uniqueMaterialIdentifier=c.uniqueMaterialIdentifier(a.parameters);return a}k._inheritsLoose(c,f);var b=c.prototype;b.getPassParameters=function(){return this.parameters};b.getTechniqueConfig=function(a,e){a=(null==e?void 0:e.slot)!==l.RenderSlot.LINE_CALLOUTS;this.techniqueConfig.occlusionTestEnabled=this.parameters.occlusionTest;this.techniqueConfig.verticalOffset=!!this.parameters.verticalOffset;this.techniqueConfig.screenSizePerspective=!!this.parameters.screenSizePerspective;this.techniqueConfig.depthHudEnabled=
a;this.techniqueConfig.depthHudAlignStartEnabled=!!this.parameters.depthHUDAlignStart;this.techniqueConfig.screenCenterOffsetUnitsEnabled="screen"===this.parameters.centerOffsetUnits?p.HUDSpace.Screen:p.HUDSpace.World;this.techniqueConfig.slicePlaneEnabled=this.parameters.slicePlaneEnabled;this.techniqueConfig.multipassGeometryEnabled=e?e.multipassGeometryEnabled:!1;return this.techniqueConfig};b.intersect=function(){};b.requiresSlot=function(a){switch(a){case l.RenderSlot.LINE_CALLOUTS:case l.RenderSlot.LINE_CALLOUTS_HUD_DEPTH:return!0}return!1};
b.createGLMaterial=function(a){return a.output===v.ShaderOutput.Color?new y(a):null};b.createBufferWriter=function(){return new z};b.validateParameters=function(a){a=c.uniqueMaterialIdentifier(a);a!==this._uniqueMaterialIdentifier&&(this._uniqueMaterialIdentifier=a)};c.uniqueMaterialIdentifier=function(a){return JSON.stringify({screenOffset:a.screenOffset||[0,0],centerOffsetUnits:a.centerOffsetUnits||"world"})};k._createClass(c,[{key:"uniqueMaterialIdentifier",get:function(){return this._uniqueMaterialIdentifier}}]);
return c}(q.Material),y=function(f){function c(){return f.apply(this,arguments)||this}k._inheritsLoose(c,f);var b=c.prototype;b.updateParameters=function(a){return this.ensureTechnique(r.LineCalloutTechnique,a)};b.beginSlot=function(a){return this.updateParameters(a)};b.bind=function(a,e){e.bindPass(this._material.getPassParameters(),a)};return c}(w);const x={verticalOffset:null,screenSizePerspective:null,screenOffset:[0,0],color:[0,0,0,1],size:1,borderColor:null,occlusionTest:!1,shaderPolygonOffset:1E-5,
depthHUDAlignStart:!1,centerOffsetUnits:"world",slicePlaneEnabled:!1,...q.DefaultMaterialParameters},B=u.newLayout().vec3f(d.VertexAttribute.POSITION).vec3f(d.VertexAttribute.NORMAL).vec2f(d.VertexAttribute.UV0).vec4f(d.VertexAttribute.AUXPOS1),t=[g.fromValues(0,0),g.fromValues(1,0),g.fromValues(0,1),g.fromValues(1,0),g.fromValues(1,1),g.fromValues(0,1)];let z=function(){function f(){this.vertexBufferLayout=B}var c=f.prototype;c.allocate=function(b){return this.vertexBufferLayout.createBuffer(b)};
c.elementCount=function(b){return 6*b.indices.get(d.VertexAttribute.POSITION).length};c.write=function(b,a,e,h){m.writePosition(a.indices.get(d.VertexAttribute.POSITION),a.vertexAttributes.get(d.VertexAttribute.POSITION).data,b.transformation,e.position,h,6);m.writeNormal(a.indices.get(d.VertexAttribute.NORMAL),a.vertexAttributes.get(d.VertexAttribute.NORMAL).data,b.invTranspTransformation,e.normal,h,6);m.writeBufferVec4(a.indices.get(d.VertexAttribute.AUXPOS1),a.vertexAttributes.get(d.VertexAttribute.AUXPOS1).data,
e.auxpos1,h,6);for(b=0;b<t.length;++b)e.uv0.setVec(h+b,t[b])};return f}();n.LineCalloutMaterial=A;Object.defineProperty(n,"__esModule",{value:!0})});