// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec3f64 ../../../geometry/projection ../../../geometry/SpatialReference ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/frustum ../../../geometry/support/spatialReferenceUtils ./PatchGeometryFactory ./Tile ../webgl-engine/materials/internal/MaterialUtil".split(" "),function(m,q,r,h,n,f,t,u,v,w,x,p,y){let A=function(k){function l(a,b,c){var d=k.call(this)||
this;d.horizontalScaleFactor=1;d.isWebmercatorOnPlateeCaree=!1;d.extentInRenderSR=u.create();void 0!==a&&d.init(a,b,c);return d}q._inheritsLoose(l,k);var e=l.prototype;e.init=function(a,b,c){k.prototype.init.call(this,a,b,c);b=c.view.renderSpatialReference;a=c.spatialReference;this.horizontalScaleFactor=c=(b=r.isSome(b)&&w.isPlateCarree(b))&&a.isGeographic?this.ellipsoid.radius*Math.PI/180:1;this.isWebmercatorOnPlateeCaree=b&&a.isWebMercator;a=this.extentInRenderSR;b=this.extent;if(this.isWebmercatorOnPlateeCaree)c=
h.fromValues(b[0],b[1],0),n.projectVectorToVector(c,f.WebMercator,c,f.PlateCarree),b=h.fromValues(b[2],b[3],0),n.projectVectorToVector(b,f.WebMercator,b,f.PlateCarree),a[0]=c[0],a[1]=c[1],a[2]=b[0],a[3]=b[1];else for(let d=0;4>d;++d)a[d]=b[d]*c;this.centerAtSeaLevel[0]=.5*(a[0]+a[2]);this.centerAtSeaLevel[1]=.5*(a[1]+a[3]);this.centerAtSeaLevel[2]=0;this._edgeLen=Math.max(a[2]-a[0],a[3]-a[1]);this._edgeLen2=this._edgeLen*this._edgeLen;this.updateRadiusAndCenter()};e.updateRadiusAndCenter=function(){this._updateCenter();
var a=this.extentInRenderSR;const b=.5*(a[2]-a[0]);a=.5*(a[3]-a[1]);this._center[p.CenterPosition.MIDDLE][3]=Math.max(Math.sqrt(b*b+a*a),.5*(this.elevationBounds[0]-this.elevationBounds[1]))};e._isVisible=function(a){return v.intersectsAABB(a,this._aabb())};e._aabb=function(){const a=this.extentInRenderSR;return t.wrap(a[0],a[1],this.elevationBounds[0],a[2],a[3],this.elevationBounds[1])};e.intersectsRay=function(a,b,c,d,z){g[0]=1/b[0];g[1]=1/b[1];g[2]=1/b[2];b=z*(this.extent[2]-this.extent[0])*this.horizontalScaleFactor*
.1;return y.intersectAabbInvDirBefore(this._aabb(),a,g,c+b,d)};e.createGeometry=function(a,b){x.createPlanarGlobePatch(a,this.extent,b,this.horizontalScaleFactor,this.isWebmercatorOnPlateeCaree,this.renderData);this.setMemoryDirty()};e.getDefaultVerticesPerRowOnLevel=function(){return 9>this.level?3:2};return l}(p.Tile);const g=h.create();m.PlanarPatch=A;Object.defineProperty(m,"__esModule",{value:!0})});