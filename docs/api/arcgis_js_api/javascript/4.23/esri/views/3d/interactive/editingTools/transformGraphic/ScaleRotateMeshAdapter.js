// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/HandleOwner ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/support/axisAngleDegrees ../../../../ViewingMode ./undoRecords".split(" "),
function(b,r,d,t,k,g,l,e,x,y,z,u,m,v,w){b.ScaleRotateMeshAdapter=function(n){function h(a){a=n.call(this,a)||this;a.angle=0;a.scale=1;a.initialAngle=0;a.previousAngle=0;a.previousScale=1;return a}r._inheritsLoose(h,n);var f=h.prototype;f.initialize=function(){this.restart()};f.restart=function(){this.handles.remove("scale-heading-update-key");const a=this.geometry.transform;this.scale=1;if(g.isSome(a)){const c=m.axis(a.rotation)[2];.999999<Math.abs(c)&&(this.angle=k.deg2rad(m.angle(a.rotation))*Math.sign(c))}this.previousAngle=
this.initialAngle=this.angle;this.previousScale=this.scale;this.handles.add(l.watch(()=>({angle:this.angle,scale:this.scale}),c=>this._update(c),l.sync),"scale-heading-update-key")};f.cancel=function(){this.scale=1;this.angle=this.initialAngle};f.createUndoRecord=function(){return w.createGraphicGeometryUndoRecord(this.graphic)};f._update=function({scale:a,angle:c}){const p=this.geometry.anchor,q=this.viewingMode===v.ViewingMode.Global;a!==this.previousScale&&(this.geometry.scale(a/this.previousScale,
{origin:p,geographic:q}),this.previousScale=a,g.isSome(this.geometry.transform)&&this.graphic.notifyMeshTransformChanged(),this.graphic.notifyGeometryChanged());c!==this.previousAngle&&(this.geometry.rotate(0,0,k.rad2deg(c-this.previousAngle),{origin:p,geographic:q}),this.previousAngle=c,g.isSome(this.geometry.transform)&&this.graphic.notifyMeshTransformChanged(),this.graphic.notifyGeometryChanged())};return h}(t.HandleOwner);d.__decorate([e.property({constructOnly:!0})],b.ScaleRotateMeshAdapter.prototype,
"graphic",void 0);d.__decorate([e.property({constructOnly:!0})],b.ScaleRotateMeshAdapter.prototype,"geometry",void 0);d.__decorate([e.property({constructOnly:!0})],b.ScaleRotateMeshAdapter.prototype,"viewingMode",void 0);d.__decorate([e.property()],b.ScaleRotateMeshAdapter.prototype,"angle",void 0);d.__decorate([e.property()],b.ScaleRotateMeshAdapter.prototype,"scale",void 0);b.ScaleRotateMeshAdapter=d.__decorate([u.subclass("esri.views.3d.interactive.editingTools.transformGraphic.ScaleRotateMeshAdapter")],
b.ScaleRotateMeshAdapter);Object.defineProperty(b,"__esModule",{value:!0})});