// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
define("require exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../core/shaderLibrary/attributes/VertexPosition.glsl ../../core/shaderTechnique/ReloadableShaderModule ../../core/shaderTechnique/ShaderTechnique ../../core/shaderTechnique/ShaderTechniqueConfiguration ../Program ./bufferLayouts ../../../../../chunks/EdgeShaderProgram.glsl ../../shaders/sources/edgeRenderer/EdgeUtil.glsl ../../../../webgl/enums ../../../../webgl/renderState".split(" "),function(u,
q,r,g,v,d,p,e,w,x,y,t,k,n){p=function(l){function f(){return l.apply(this,arguments)||this}r._inheritsLoose(f,l);var a=f.prototype;a.bindPass=function(m){const b=this.program,{edgeRenderParameters:c,bindParameters:h}=m;v.bindViewProjTransform(b,c.viewProjectionTransform);b.setUniformMatrix3fv("transformNormalViewFromGlobal",c.transformNormalViewFromGlobal);b.setUniformMatrix4fv("proj",h.camera.projectionMatrix);b.setUniform2f("depthBias",.5,-4E-4);b.setUniform2f("pixelToNDC",2/h.camera.fullViewport[2],
2/h.camera.fullViewport[3]);b.setUniform2f("ndcToPixel",h.camera.fullViewport[2]/2,h.camera.fullViewport[3]/2);b.setUniform1f("distanceFalloffFactor",c.distanceFalloffFactor);b.setUniform2f("inverseViewport",1/h.camera.fullViewport[2],1/h.camera.fullViewport[3]);b.setUniform1f("pixelRatio",h.camera.pixelRatio||1)};a.initializeProgram=function(m){var b=f.shader.get();const c=this.configuration;b=b.build({slicePlaneEnabled:c.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,
silhouette:c.silhouette,legacy:c.legacy,antialiasing:c.antialiasing,mode:c.mode,doublePrecisionRequiresObfuscation:c.doublePrecisionRequiresObfuscation,multipassTerrainEnabled:c.multipassTerrainEnabled,cullAboveGround:c.cullAboveGround});return new w.Program(m.rctx,b,x.EdgeShaderAttributeLocations)};a.initializePipeline=function(m){return(m=m.rctx.capabilities.blendMinMax)?n.makePipelineState({blending:n.separateBlendingParams(k.BlendFactor.ONE,k.BlendFactor.ONE,k.BlendFactor.ZERO,k.BlendFactor.ONE,
k.BlendOperation.ADD,m.MAX),depthTest:{func:k.CompareFunction.LEQUAL},colorWrite:n.defaultColorWriteParams}):n.makePipelineState({depthTest:{func:k.CompareFunction.LEQUAL},depthWrite:n.defaultDepthWriteParams,colorWrite:n.defaultColorWriteParams})};return f}(p.ShaderTechnique);p.shader=new d.ReloadableShaderModule(y.EdgeShaderProgram,()=>new Promise((l,f)=>u(["../../shaders/sources/edgeRenderer/EdgeShaderProgram.glsl"],l,f)));d=function(l){function f(){var a=l.apply(this,arguments)||this;a.slicePlaneEnabled=
!1;a.silhouette=!1;a.legacy=!1;a.antialiasing=!1;a.mode=t.EdgeUtilMode.SOLID;a.doublePrecisionRequiresObfuscation=!1;a.multipassTerrainEnabled=!1;a.cullAboveGround=!1;return a}r._inheritsLoose(f,l);return f}(e.ShaderTechniqueConfiguration);g.__decorate([e.parameter()],d.prototype,"slicePlaneEnabled",void 0);g.__decorate([e.parameter()],d.prototype,"silhouette",void 0);g.__decorate([e.parameter()],d.prototype,"legacy",void 0);g.__decorate([e.parameter()],d.prototype,"antialiasing",void 0);g.__decorate([e.parameter({count:t.EdgeUtilMode.COUNT})],
d.prototype,"mode",void 0);g.__decorate([e.parameter()],d.prototype,"doublePrecisionRequiresObfuscation",void 0);g.__decorate([e.parameter()],d.prototype,"multipassTerrainEnabled",void 0);g.__decorate([e.parameter()],d.prototype,"cullAboveGround",void 0);q.EdgeShaderTechnique=p;q.EdgeShaderTechniqueConfiguration=d;Object.defineProperty(q,"__esModule",{value:!0})});