// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
define(["exports","../../engine/webgl/enums","../../engine/webgl/materialKey/MaterialKey"],function(m,f,g){function h(a){switch(a.type){case "line-marker":var b;return{type:"line-marker",color:null==(b=a.color)?void 0:b.toJSON(),placement:a.placement,style:a.style};default:return a.constructor.fromJSON(a.toJSON()).toJSON()}}function n(a,b,d){var c=g.createMaterialKey(f.WGLGeometryType.FILL,{...b,isOutlinedFill:b.supportsOutlineFills});c=d?hydrateKey(c):c;var e=a.clone();a=e.outline;b.supportsOutlineFills||
(e.outline=null);e={materialKey:c,hash:e.hash(),isOutlinedFill:!!b.supportsOutlineFills,...h(e)};if(b.supportsOutlineFills)return e;c=[];c.push(e);a&&(b=g.createMaterialKey(f.WGLGeometryType.LINE,{...b,isOutline:!0}),d={materialKey:d?hydrateKey(b):b,hash:a.hash(),...h(a)},c.push(d));return{type:"composite-symbol",layers:c,hash:c.reduce((k,l)=>l.hash+k,"")}}function p(a,b,d){var c=g.createMaterialKey(f.WGLGeometryType.LINE,b);const e=d?hydrateKey(c):c;a=a.clone();c=a.marker;a.marker=null;const k=[];
k.push({materialKey:e,hash:a.hash(),...h(a)});if(c){var l;b=g.createMaterialKey(f.WGLGeometryType.MARKER,b);d=d?hydrateKey(b):b;c.color=null!=(l=c.color)?l:a.color;k.push({materialKey:d,hash:c.hash(),lineWidth:a.width,...h(c)})}return{type:"composite-symbol",layers:k,hash:k.reduce((q,r)=>r.hash+q,"")}}m.createSymbolSchema=function(a,b,d){if(!a)return null;switch(a.type){case "simple-fill":case "picture-fill":return n(a,b,d);case "simple-marker":case "picture-marker":var c=g.createMaterialKey(f.WGLGeometryType.MARKER,
b);d=d?hydrateKey(c):c;c=h(a);return a={materialKey:d,hash:a.hash(),...c,angle:a.angle,maxVVSize:b.maxVVSize};case "simple-line":return p(a,b,d);case "text":return c=g.createMaterialKey(f.WGLGeometryType.TEXT,b),d=d?hydrateKey(c):c,c=h(a),a={materialKey:d,hash:a.hash(),...c,angle:a.angle,maxVVSize:b.maxVVSize};case "label":return c=a.toJSON(),b=g.createMaterialKey(f.WGLGeometryType.LABEL,{...b,placement:c.labelPlacement}),a={materialKey:d?hydrateKey(b):b,hash:a.hash(),...c,labelPlacement:c.labelPlacement};
case "cim":return{type:"cim",rendererKey:b.vvFlags,data:a.data,maxVVSize:b.maxVVSize};case "CIMSymbolReference":return{type:"cim",rendererKey:b.vvFlags,data:a,maxVVSize:b.maxVVSize};case "web-style":return{...h(a),type:"web-style",hash:a.hash(),rendererKey:b.vvFlags,maxVVSize:b.maxVVSize};default:throw Error(`symbol not supported ${a.type}`);}};Object.defineProperty(m,"__esModule",{value:!0})});