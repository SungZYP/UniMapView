// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/Feature/FeatureAttachments":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Attachments ../Widget ./FeatureAttachments/FeatureAttachmentsViewModel ./support/FeatureElementInfo ../support/widgetUtils ../../core/Logger ../support/jsxFactory".split(" "),
function(h,p,v,A,E,w,C,T,Y,S,O,m,f,q,B,K){E=function(D){function H(P,L){P=D.call(this,P,L)||this;P._featureElementInfo=null;P.attachmentsWidget=new S;P.description=null;P.displayType=null;P.graphic=null;P.headingLevel=2;P.title=null;P.viewModel=new m;return P}h._inheritsLoose(H,D);var Q=H.prototype;Q.initialize=function(){this._featureElementInfo=new f;v.init(this,["viewModel.description","viewModel.title","headingLevel"],()=>this._setupFeatureElementInfo());v.init(this,"viewModel.graphic",P=>this.attachmentsWidget.graphic=
P)};Q.destroy=function(){this.attachmentsWidget.destroy();this._featureElementInfo.destroy()};Q.render=function(){var P;const {attachmentsWidget:L}=this;return K.tsx("div",{class:"esri-feature-attachments"},null==(P=this._featureElementInfo)?void 0:P.render(),null==L?void 0:L.render())};Q._setupFeatureElementInfo=function(){const {description:P,title:L,headingLevel:V}=this;this._featureElementInfo.set({description:P,title:L,headingLevel:V})};return H}(O);p.__decorate([T.property({readOnly:!0})],E.prototype,
"attachmentsWidget",void 0);p.__decorate([A.aliasOf("viewModel.description")],E.prototype,"description",void 0);p.__decorate([A.aliasOf("attachmentsWidget.displayType")],E.prototype,"displayType",void 0);p.__decorate([A.aliasOf("viewModel.graphic")],E.prototype,"graphic",void 0);p.__decorate([T.property()],E.prototype,"headingLevel",void 0);p.__decorate([A.aliasOf("viewModel.title")],E.prototype,"title",void 0);p.__decorate([T.property({type:m})],E.prototype,"viewModel",void 0);return E=p.__decorate([Y.subclass("esri.widgets.Feature.FeatureAttachments")],
E)})},"esri/widgets/Attachments":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/unitFormatUtils ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Attachments/AttachmentsViewModel ./Attachments/support/attachmentUtils ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/jsxFactory".split(" "),
function(h,p,v,A,E,w,C,T,Y,S,O,m,f,q,B,K,D,H){const Q={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},P=window.CSS;C=function(L){function V(e,r){e=L.call(this,e,r)||this;e.abilities=null;e.displayType="auto";e.graphic=null;e.label=void 0;e.messages=null;e.messagesUnits=null;e.selectedFile=null;e.submitting=!1;e.viewModel=new f;e.visibleElements={...Q};e._supportsImageOrientation=P&&P.supports&&P.supports("image-orientation",
"from-image");e._addAttachmentForm=null;e._updateAttachmentForm=null;return e}h._inheritsLoose(V,L);var n=V.prototype;n.initialize=function(){this.own(E.on(this,"viewModel.attachmentInfos","change",()=>this.scheduleRender()),E.init(this,"viewModel.mode",()=>this._modeChanged()))};n.castVisibleElements=function(e){return{...Q,...e}};n.addAttachment=function(){const {_addAttachmentForm:e,viewModel:r}=this;this._set("submitting",!0);this._set("error",null);return r.addAttachment(e).then(z=>{this._set("submitting",
!1);this._set("error",null);r.mode="view";return z}).catch(z=>{this._set("submitting",!1);this._set("error",new v("attachments:add-attachment",this.messages.addErrorMessage,z));throw z;})};n.deleteAttachment=function(e){const {viewModel:r}=this;this._set("submitting",!0);this._set("error",null);return r.deleteAttachment(e).then(z=>{this._set("submitting",!1);this._set("error",null);r.mode="view";return z}).catch(z=>{this._set("submitting",!1);this._set("error",new v("attachments:delete-attachment",
this.messages.deleteErrorMessage,z));throw z;})};n.updateAttachment=function(){const {viewModel:e}=this,{_updateAttachmentForm:r}=this;this._set("submitting",!0);this._set("error",null);return e.updateAttachment(r).then(z=>{this._set("submitting",!1);this._set("error",null);e.mode="view";return z}).catch(z=>{this._set("submitting",!1);this._set("error",new v("attachments:update-attachment",this.messages.updateErrorMessage,z));throw z;})};n.render=function(){const {submitting:e,viewModel:r}=this,{state:z}=
r;return H.tsx("div",{class:this.classes("esri-attachments","esri-widget")},e?this.renderProgressBar():null,"loading"===z?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())};n.renderErrorMessage=function(){const {error:e,visibleElements:r}=this;return e&&r.errorMessage?H.tsx("div",{key:"error-message",class:"esri-attachments__error-message"},e.message):null};n.renderAttachments=function(){const {mode:e,activeAttachmentInfo:r}=this.viewModel;return"add"===e?this.renderAddForm():
"edit"===e?this.renderDetailsForm(r):this.renderAttachmentContainer()};n.renderLoading=function(){return H.tsx("div",{class:"esri-attachments__loader-container",key:"loader"},H.tsx("div",{class:"esri-attachments__loader"}))};n.renderProgressBar=function(){return this.visibleElements.progressBar?H.tsx("div",{class:"esri-attachments__progress-bar",key:"progress-bar"}):null};n.renderAddForm=function(){const {submitting:e,selectedFile:r}=this;var z=e||!r,J=this.visibleElements.cancelAddButton?H.tsx("button",
{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--tertiary","esri-button--small","esri-button--half",e&&"esri-button--disabled")},this.messages.cancel):null;z=this.visibleElements.addSubmitButton?H.tsx("button",{type:"submit",disabled:z,class:this.classes("esri-button","esri-button--secondary","esri-button--small","esri-button--half",{["esri-button--disabled"]:z})},this.messages.add):null;const M=r?H.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},
r.name):null;J=H.tsx("form",{bind:this,afterCreate:B.storeNode,afterRemoved:B.discardNode,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},H.tsx("fieldset",{class:"esri-attachments__file-fieldset"},M,H.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},r?this.messages.changeFile:this.messages.selectFile,H.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),
z,J);return H.tsx("div",{key:"add-form-container",class:"esri-attachments__form-node"},J)};n.renderDetailsForm=function(e){const {visibleElements:r,viewModel:z,selectedFile:J,submitting:M}=this,{contentType:N,size:x,url:y}=e;var {abilities:t}=z,I=M||!J,W=t.editing&&t.operations.delete&&r.deleteButton?H.tsx("button",{key:"delete-button",type:"button",disabled:M,bind:this,onclick:na=>this._submitDeleteAttachment(na,e),class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-attachments__delete-button",
{["esri-button--disabled"]:M})},this.messages.delete):null;I=t.editing&&t.operations.update&&r.updateButton?H.tsx("button",{disabled:I,key:"update-button",type:"submit",class:this.classes("esri-button","esri-button--small","esri-button--third",{["esri-button--disabled"]:I})},this.messages.update):null;const aa=this.visibleElements.cancelUpdateButton?H.tsx("button",{disabled:M,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--small",
"esri-button--tertiary","esri-button--third",{["esri-button--disabled"]:M})},this.messages.cancel):null;var fa=J?H.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},J.name):null;t=t.editing&&t.operations.update?H.tsx("fieldset",{key:"file",class:"esri-attachments__file-fieldset"},fa,H.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},this.messages.changeFile,H.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",
bind:this,onchange:this._handleFileInputChange}))):null;fa=H.tsx("fieldset",{key:"size",class:"esri-attachments__metadata-fieldset"},H.tsx("label",null,A.formatFileSize(this.messagesUnits,x)));const ja=H.tsx("fieldset",{key:"content-type",class:"esri-attachments__metadata-fieldset"},H.tsx("label",null,N));W=H.tsx("form",{bind:this,afterCreate:B.storeNode,afterRemoved:B.discardNode,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},H.tsx("div",{class:"esri-attachments__metadata"},
fa,ja),t,H.tsx("div",{class:"esri-attachments__actions"},W,aa,I));return H.tsx("div",{key:"edit-form-container",class:"esri-attachments__form-node"},H.tsx("a",{class:"esri-attachments__item-link",href:y,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:e,size:400}),H.tsx("div",{class:"esri-attachments__item-link-overlay"},H.tsx("span",{class:"esri-attachments__item-link-overlay-icon"},H.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},
H.tsx("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),H.tsx("path",{fill:"none",d:"M0 0h32v32H0z"}))))),W)};n.renderImageMask=function({attachmentInfo:e,size:r}){var {supportsResizeAttachments:z}=this.viewModel;const {contentType:J,name:M,url:N}=e,x=z&&q.isSupportedImage(J);e=(e=this._getCSSTransform(e,x))?{transform:e,"image-orientation":"none"}:{};const y=-1===N.indexOf("?")?"?":"\x26";r=x?`${N}${y}w=${r}`:q.getIconPath(J);z={["esri-attachments__image--resizable"]:z};
return H.tsx("div",{class:this.classes({["esri-attachments__item-mask--icon"]:!x},"esri-attachments__item-mask")},H.tsx("img",{styles:e,alt:M,src:r,class:this.classes(z,"esri-attachments__image")}))};n.renderAttachmentInfo=function({attachmentInfo:e,displayType:r}){var {viewModel:z}=this;({abilities:z}=z);const {name:J,url:M}=e;r=this.renderImageMask({attachmentInfo:e,size:"list"===r?48:400});var N=z.editing?H.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",
B.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}):null;N=H.tsx("label",{class:"esri-attachments__label"},H.tsx("span",{class:"esri-attachments__filename"},J||this.messages.noTitle),N);r=[r,N];z=z.editing?H.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},r):H.tsx("a",{key:"details-link",
class:"esri-attachments__item-button",href:M,target:"_blank"},r);return H.tsx("li",{class:"esri-attachments__item",key:e},z)};n.renderAttachmentContainer=function(){const {effectiveDisplayType:e,viewModel:r,visibleElements:z}=this,{attachmentInfos:J,abilities:M}=r;var N=J&&J.length;const x={["esri-attachments__container--list"]:"preview"!==e,["esri-attachments__container--preview"]:"preview"===e},y=M.editing&&M.operations.add&&z.addButton?H.tsx("button",{bind:this,onclick:()=>this._startAddAttachment(),
class:this.classes("esri-button","esri-button--tertiary","esri-attachments__add-attachment-button"),type:"button"},H.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon","esri-icon-plus")}),this.messages.add):null;N=N?H.tsx("ul",{class:"esri-attachments__items"},J.toArray().map(t=>this.renderAttachmentInfo({attachmentInfo:t,displayType:e}))):H.tsx("div",{class:"esri-widget__content--empty"},this.messages.noAttachments);return H.tsx("div",{key:"attachments-container",
class:this.classes("esri-attachments__container",x)},N,y)};n._modeChanged=function(){this._set("error",null);this._set("selectedFile",null)};n._handleFileInputChange=function(e){e=(e=e.target)&&e.files&&e.files.item(0);this._set("selectedFile",e)};n._submitDeleteAttachment=function(e,r){e.preventDefault();this.deleteAttachment(r)};n._submitAddAttachment=function(e){e.preventDefault();this.addAttachment()};n._submitUpdateAttachment=function(e){e.preventDefault();this.updateAttachment()};n._startEditAttachment=
function(e){const {viewModel:r}=this;r.activeAttachmentInfo=e;r.mode="edit"};n._startAddAttachment=function(){this.viewModel.mode="add"};n._cancelForm=function(e){e.preventDefault();this.viewModel.mode="view"};n._getCSSTransform=function(e,r){({orientationInfo:e}=e);return!this._supportsImageOrientation&&r&&e?[e.rotation?`rotate(${e.rotation}deg)`:"",e.mirrored?"scaleX(-1)":""].join(" "):""};h._createClass(V,[{key:"effectiveDisplayType",get:function(){const {displayType:e}=this;return e&&"auto"!==
e?e:this.viewModel.supportsResizeAttachments?"preview":"list"}}]);return V}(m);p.__decorate([w.aliasOf("viewModel.abilities")],C.prototype,"abilities",void 0);p.__decorate([S.property()],C.prototype,"displayType",void 0);p.__decorate([S.property({readOnly:!0})],C.prototype,"effectiveDisplayType",null);p.__decorate([w.aliasOf("viewModel.graphic")],C.prototype,"graphic",void 0);p.__decorate([S.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],C.prototype,"label",void 0);p.__decorate([S.property(),
K.messageBundle("esri/widgets/Attachments/t9n/Attachments")],C.prototype,"messages",void 0);p.__decorate([S.property(),K.messageBundle("esri/core/t9n/Units")],C.prototype,"messagesUnits",void 0);p.__decorate([S.property({readOnly:!0})],C.prototype,"selectedFile",void 0);p.__decorate([S.property({readOnly:!0})],C.prototype,"submitting",void 0);p.__decorate([S.property({readOnly:!0})],C.prototype,"error",void 0);p.__decorate([S.property({type:f})],C.prototype,"viewModel",void 0);p.__decorate([S.property()],
C.prototype,"visibleElements",void 0);p.__decorate([Y.cast("visibleElements")],C.prototype,"castVisibleElements",null);return C=p.__decorate([O.subclass("esri.widgets.Attachments")],C)})},"esri/core/unitFormatUtils":function(){define("exports ./byteSizeEstimations ./mathUtils ./string ./unitUtils ../intl/number".split(" "),function(h,p,v,A,E,w){function C(S,O,m){return S.units[O][m]}function T(S,O,m,f=2,q="abbr"){return`${w.formatNumber(O,{minimumFractionDigits:f,maximumFractionDigits:f})} ${C(S,
m,q)}`}const Y=["B","kB","MB","GB","TB"];h.formatAngleDegrees=function(S,O,m=2){S=E.convertUnit(S,O,"degrees");return w.formatNumber(S,{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:m,minimumFractionDigits:m})};h.formatDMS=function(S,O,m=2){S=E.convertUnit(S,O,"degrees");O=S-Math.floor(S);S-=O;O*=60;let f=O-Math.floor(O);O-=f;f*=60;return`${S.toFixed()}\u00b0 ${O.toFixed()}' ${f.toFixed(m)}"`};h.formatDecimal=T;h.formatFileSize=function(S,O){let m=0===O?0:Math.floor(Math.log(O)/
Math.log(p.ByteSizeUnit.KILOBYTES));m=v.clamp(m,0,Y.length-1);O=w.formatNumber(O/p.ByteSizeUnit.KILOBYTES**m,{maximumFractionDigits:2});return A.replace(S.units.bytes[Y[m]],{fileSize:O})};h.formatImperialArea=function(S,O,m,f=2,q="abbr"){const B=E.preferredImperialAreaUnit(O,m);return T(S,E.convertUnit(O,m,B),B,f,q)};h.formatImperialLength=function(S,O,m,f=2,q="abbr"){const B=E.preferredImperialLengthUnit(O,m);return T(S,E.convertUnit(O,m,B),B,f,q)};h.formatImperialVerticalLength=function(S,O,m,f=
2,q="abbr"){const B=E.preferredImperialVerticalLengthUnit(O,m);return T(S,E.convertUnit(O,m,B),B,f,q)};h.formatMetricArea=function(S,O,m,f=2,q="abbr"){const B=E.preferredMetricAreaUnit(O,m);return T(S,E.convertUnit(O,m,B),B,f,q)};h.formatMetricLength=function(S,O,m,f=2,q="abbr"){const B=E.preferredMetricLengthUnit(O,m);return T(S,E.convertUnit(O,m,B),B,f,q)};h.formatMetricVerticalLength=function(S,O,m,f=2,q="abbr"){const B=E.preferredMetricVerticalLengthUnit(O,m);return T(S,E.convertUnit(O,m,B),B,
f,q)};h.unitName=C;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(h){function p(v){return 32+v.length}h.ByteSizeUnit=void 0;(function(v){v[v.KILOBYTES=1024]="KILOBYTES";v[v.MEGABYTES=1048576]="MEGABYTES";v[v.GIGABYTES=1073741824]="GIGABYTES"})(h.ByteSizeUnit||(h.ByteSizeUnit={}));h.estimateAttributesObjectSize=function(v){if(!v)return 0;let A=32;for(const E in v)if(v.hasOwnProperty(E)){const w=v[E];switch(typeof w){case "string":A+=
p(w);break;case "number":A+=16;break;case "boolean":A+=4}}return A};h.estimateFixedArraySize=function(v,A){return 32+v.length*A};h.estimateNumberByteSize=function(){return 16};h.estimateStringByteSize=p;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/widgets/Attachments/AttachmentsViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Collection ../../core/Error ../../core/HandleOwner ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../Feature/support/featureUtils".split(" "),
function(h,p,v,A,E,w,C,T,Y,S,O,m,f,q,B,K){const D={editing:!1,operations:{add:!0,update:!0,delete:!0}},H=A.ofType(q);A=function(Q){function P(V){var n=Q.call(this,V)||this;n._getAttachmentsPromise=null;n._attachmentLayer=null;n.abilities={...D};n.activeAttachmentInfo=null;n.attachmentInfos=new H;n.graphic=null;n.mode="view";n.handles.add([T.init(h._assertThisInitialized(n),"graphic",()=>n._graphicChanged())]);return n}h._inheritsLoose(P,Q);var L=P.prototype;L.destroy=function(){this.graphic=this._attachmentLayer=
null};L.castAbilities=function(V){return{...D,...V}};L.getAttachments=function(){var V=h._asyncToGenerator(function*(){const {_attachmentLayer:n,attachmentInfos:e}=this;if(!n||"function"!==typeof n.queryAttachments)throw new E("invalid-layer","getAttachments(): A valid layer is required.");const r=this._getFeatureId();var z=new B({objectIds:[r],returnMetadata:!0});const J=[];this._getAttachmentsPromise=z=n.queryAttachments(z).then(M=>M[r]||J).catch(()=>J);this.notifyChange("state");z=yield z;e.removeAll();
z.length&&e.addMany(z);this._getAttachmentsPromise=null;this.notifyChange("state");return z});return function(){return V.apply(this,arguments)}}();L.addAttachment=function(){var V=h._asyncToGenerator(function*(n){const {_attachmentLayer:e,attachmentInfos:r,graphic:z,abilities:J}=this;if(!n)throw new E("invalid-attachment","addAttachment(): An attachment is required.",{attachment:n});if(!J.operations.add)throw new E("invalid-abilities","addAttachment(): add abilities are required.");if(!e||"function"!==
typeof e.addAttachment)throw new E("invalid-layer","addAttachment(): A valid layer is required.");n=yield e.addAttachment(z,n).then(M=>this._queryAttachment(M.objectId));r.add(n);return n});return function(n){return V.apply(this,arguments)}}();L.deleteAttachment=function(){var V=h._asyncToGenerator(function*(n){const {_attachmentLayer:e,attachmentInfos:r,graphic:z,abilities:J}=this;if(!n)throw new E("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:n});
if(!J.operations.delete)throw new E("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!e||"function"!==typeof e.deleteAttachments)throw new E("invalid-layer","deleteAttachment(): A valid layer is required.");const M=yield e.deleteAttachments(z,[n.id]).then(()=>n);r.remove(M);return M});return function(n){return V.apply(this,arguments)}}();L.updateAttachment=function(){var V=h._asyncToGenerator(function*(n,e=this.activeAttachmentInfo){const {_attachmentLayer:r,attachmentInfos:z,
graphic:J,abilities:M}=this;if(!n)throw new E("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:n});if(!e)throw new E("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!M.operations.update)throw new E("invalid-abilities","updateAttachment(): Update abilities are required.");const N=z.findIndex(x=>x===e);if(!r||"function"!==typeof r.updateAttachment)throw new E("invalid-layer","updateAttachment(): A valid layer is required.");
n=yield r.updateAttachment(J,e.id,n).then(x=>this._queryAttachment(x.objectId));z.splice(N,1,n);return n});return function(n){return V.apply(this,arguments)}}();L._queryAttachment=function(){var V=h._asyncToGenerator(function*(n){if(!n)throw new E("invalid-attachment-id","Could not query attachment.");const {_attachmentLayer:e}=this,r=this._getFeatureId();n=new B({objectIds:[r],attachmentsWhere:`AttachmentId=${n}`,returnMetadata:!0});return e.queryAttachments(n).then(z=>z[r][0])});return function(n){return V.apply(this,
arguments)}}();L._getFeatureId=function(){const {_attachmentLayer:V,graphic:n}=this;if(!V||!n)return null;const {objectIdField:e}=V,{attributes:r}=n;return r&&r[e]};L._graphicChanged=function(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))};L._setAttachmentLayer=function(){var {graphic:V}=this;this._attachmentLayer=(V=K.getSourceLayer(V))?"scene"===V.type&&C.isSome(V.associatedLayer)?V.associatedLayer:V:null};h._createClass(P,[{key:"state",get:function(){return this._getAttachmentsPromise?
"loading":this.graphic?"ready":"disabled"}},{key:"supportsResizeAttachments",get:function(){return this.get("graphic.layer.capabilities.operations.supportsResizeAttachments")||!1}}]);return P}(w.HandleOwner);p.__decorate([Y.property()],A.prototype,"abilities",void 0);p.__decorate([m.cast("abilities")],A.prototype,"castAbilities",null);p.__decorate([Y.property()],A.prototype,"activeAttachmentInfo",void 0);p.__decorate([Y.property({readOnly:!0,type:H})],A.prototype,"attachmentInfos",void 0);p.__decorate([Y.property({type:v})],
A.prototype,"graphic",void 0);p.__decorate([Y.property()],A.prototype,"mode",void 0);p.__decorate([Y.property({readOnly:!0})],A.prototype,"state",null);p.__decorate([Y.property({readOnly:!0})],A.prototype,"supportsResizeAttachments",null);return A=p.__decorate([f.subclass("esri.widgets.Attachments.AttachmentsViewModel")],A)})},"esri/widgets/Feature/support/featureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Logger ../../../core/maybe ../../../core/string ../../../intl/date ../../../intl/number ../../../layers/support/fieldUtils ../../../popup/support/FieldInfoFormat ../../../support/arcadeOnDemand".split(" "),
function(h,p,v,A,E,w,C,T,Y,S,O){function m(){m=p._asyncToGenerator(function*(G,R){return"function"===typeof G?G.call(null,R):G});return m.apply(this,arguments)}function f(G){return G?pa.test(G):!1}function q(G,R){if(!f(R)||!G)return null;const X=R.replace(pa,"").toLowerCase();let ea;G.some(da=>da.name.toLowerCase()===X?(ea=da,!0):!1);return ea}function B(G,R){return(R=K(R,G))?R.name:G}function K(G,R){return G&&"function"===typeof G.getField?G.getField(R):null}function D({formattedAttributes:G,template:R,
fieldInfoMap:X}){return`${w.replace(w.replace(R,ea=>{{const da=X.get(ea.toLowerCase());ea=`{${da&&da.fieldName||ea}}`}return ea}),G).replace(ja,"")}`.trim()}function H(G,R,X=!1){const ea=R[G];"string"===typeof ea&&(X=(X?encodeURIComponent(ea):ea).replace(ia,"%27"),R[G]=X)}function Q(G,R=!1){const X={...G};Object.keys(X).forEach(ea=>H(ea,X,R));return X}function P(G,R){return G.replace(na,(X,ea,da)=>(X=K(R,da))?`{${X.name}}`:ea)}function L(G,R,X){return(G=P(G,X))?G.replace(Ca,(ea,da,ka)=>{da=`${da||
ka}`.trim();return w.replace(ea,Q(R,da&&"{"!==da[0]))}):G}function V(G,R){var X=R.fieldName,ea=n(R.fieldInfos,X),da=null==ea?void 0:ea.clone();ea=R.preventPlacesFormatting;R=R.layer;X=K(R,X);if(da&&"date"===(null==X?void 0:X.type)){X=da.format||new S;X.dateFormat=X.dateFormat||"short-date-short-time";var ka;if(!(ka="feature"===(null==R?void 0:R.type)&&R.datesInUnknownTimezone)){if(ka=!(null==R||!R.layer))ka=R.layer,ka="map-image"===(null==ka?void 0:ka.type);ka=ka&&R.layer.datesInUnknownTimezone}X.dateTimeFormatOptions=
ka?{timeZone:"UTC"}:null;da.format=X}da=da&&da.format;"string"!==typeof G||!da||null!=da.dateFormat||null==da.places&&null==da.digitSeparator||(R=Number(G),isNaN(R)||(G=R));return"string"===typeof G||null==G||null==da?z(G):ea?T.formatNumber(G,{...T.convertNumberFormatToIntlOptions(da),minimumFractionDigits:0,maximumFractionDigits:20}):da.format(G)}function n(G,R){if(G&&G.length&&R){var X=R.toLowerCase(),ea=void 0;G.some(da=>da.fieldName&&da.fieldName.toLowerCase()===X?(ea=da,!0):!1);return ea}}function e({fieldName:G,
graphic:R,layer:X}){if(I(G)||!X||"function"!==typeof X.getFeatureType)return null;const {typeIdField:ea}=X;return ea&&G===ea?(G=X.getFeatureType(R))?G.name:null:null}function r({fieldName:G,value:R,graphic:X,layer:ea}){return I(G)||!ea||"function"!==typeof ea.getFieldDomain?null:(G=ea.getFieldDomain(G,{feature:X}))&&"coded-value"===G.type?G.getName(R):null}function z(G){return"string"===typeof G?G.replace(za,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):G}function J(G){const {value:R,fieldName:X,
fieldInfos:ea,fieldInfoMap:da,layer:ka,graphic:ya}=G;return null==R?"":(G=r({fieldName:X,value:R,graphic:ya,layer:ka}))||(G=e({fieldName:X,graphic:ya,layer:ka}))?G:da.get(X.toLowerCase())?V(R,{fieldInfos:ea,fieldName:X,layer:ka}):(G=ka&&ka.fieldsIndex)&&G.isDateField(X)?C.formatDate(R,Fa):z(R)}function M(G,R){return N.apply(this,arguments)}function N(){N=p._asyncToGenerator(function*(G,R){var X,ea;const {layer:da,graphic:ka,outFields:ya,objectIds:Da,returnGeometry:Sa,spatialReference:Va}=G;G=Da[0];
if("number"!==typeof G&&"string"!==typeof G)return fa.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",{layer:da,graphic:ka,objectId:G,requiredFields:ya}),null;if(null==(X=da.capabilities)||null==(ea=X.operations)||!ea.supportsQuery)return fa.warn("The specified layer cannot be queried. The following fields will not be available.",{layer:da,graphic:ka,requiredFields:ya,returnGeometry:Sa}),null;X=da.createQuery();X.objectIds=Da;X.outFields=null!=ya&&ya.length?
ya:[da.objectIdField];X.returnGeometry=!!Sa;X.returnZ=!!Sa;X.returnM=!!Sa;X.outSpatialReference=Va;return(yield da.queryFeatures(X,R)).features[0]});return N.apply(this,arguments)}function x(G){return y.apply(this,arguments)}function y(){y=p._asyncToGenerator(function*(G){var R;if(null==(R=G.expressionInfos)||!R.length)return!1;R=yield O.loadArcade();({arcadeUtils:{hasGeometryFunctions:R}}=R);return R(G)});return y.apply(this,arguments)}function t(){t=p._asyncToGenerator(function*({graphic:G,popupTemplate:R,
layer:X,spatialReference:ea},da){if(X&&R&&("function"===typeof X.load&&(yield X.load(da)),G.attributes)){var ka=G.attributes[X.objectIdField];if(null!=ka){ka=[ka];var ya=yield R.getRequiredFields(X.fieldsIndex),Da=Y.featureHasFields(ya,G);ya=Da?[]:ya;R=R.returnGeometry||(yield x(R));if(!Da||R)if(X=yield M({layer:X,graphic:G,outFields:ya,objectIds:ka,returnGeometry:R,spatialReference:ea},da))X.geometry&&(G.geometry=X.geometry),X.attributes&&(G.attributes={...G.attributes,...X.attributes})}}});return t.apply(this,
arguments)}function I(G=""){return G?-1!==G.indexOf("relationships/"):!1}function W({attributes:G,graphic:R,relatedInfo:X}){G&&R&&X&&Object.keys(R.attributes).forEach(ea=>{var da={layerId:X.relation.id.toString(),fieldName:ea};G[da?`${"relationships/"}${da.layerId}/${da.fieldName}`:""]=R.attributes[ea]})}function aa(G,R){G&&R&&(R.relatedFeatures&&R.relatedFeatures&&R.relatedFeatures.forEach(X=>W({attributes:G,graphic:X,relatedInfo:R})),R.relatedStatsFeatures&&R.relatedStatsFeatures&&R.relatedStatsFeatures.forEach(X=>
W({attributes:G,graphic:X,relatedInfo:R})))}const fa=A.getLogger("esri.widgets.Feature.support.featureUtils"),ja=/href=(""|'')/gi,na=/(\{([^\{\r\n]+)\})/g,ia=/'/g,pa=/^\s*expression\//i,za=/(\n)/gi,sa=/[\u00A0-\u9999<>&]/gim,Ca=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,Na=/^(?:mailto:|tel:)/,Fa=C.convertDateFormatToIntlOptions("short-date-short-time"),ua=G=>{if(!G)return!1;G=G.toUpperCase();return-1<G.indexOf("CURRENT_TIMESTAMP")||-1<G.indexOf("CURRENT_DATE")||-1<G.indexOf("CURRENT_TIME")},Wa=({layer:G,
method:R,query:X,definitionExpression:ea})=>{var da,ka;null!=(da=G.capabilities)&&null!=(ka=da.query)&&ka.supportsCacheHint&&"attachments"!==R&&(G=E.isSome(X.where)&&X.where,R=E.isSome(X.geometry)&&X.geometry,ua(ea)||ua(G)||"extent"===(null==R?void 0:R.type)||"tile"===X.resultType||(X.cacheHint=!0))};h.applyTextFormattingHTML=z;h.createfieldInfoMap=function(G,R){const X=new Map;G&&G.forEach(ea=>{const da=B(ea.fieldName,R);ea.fieldName=da;X.set(da.toLowerCase(),ea)});return X};h.fixTokens=P;h.formatAttributes=
function({fieldInfos:G,attributes:R,layer:X,graphic:ea,fieldInfoMap:da,relatedInfos:ka}){const ya={};null==ka?void 0:ka.forEach(Da=>aa(ya,Da));Object.keys(R).forEach(Da=>{ya[Da]=J({fieldName:Da,fieldInfos:G,fieldInfoMap:da,layer:X,value:R[Da],graphic:ea})});return ya};h.formatEditInfo=function(G,R){const {creatorField:X,creationDateField:ea,editorField:da,editDateField:ka}=G;if(R){G=R[ka];if("number"===typeof G)return R=R[da],{type:"edit",date:C.formatDate(G,Fa),user:R};G=R[ea];return"number"===typeof G?
(R=R[X],{type:"create",date:C.formatDate(G,Fa),user:R}):null}};h.formatValueToFieldInfo=V;h.getAllFieldInfos=function(G){const R=[];if(!G)return R;const {fieldInfos:X,content:ea}=G;X&&R.push(...X);if(!ea||!Array.isArray(ea))return R;ea.forEach(da=>{"fields"===da.type&&(da=da&&da.fieldInfos)&&R.push(...da)});return R};h.getFieldInfo=n;h.getFieldInfoLabel=function(G,R){return(R=q(R,null==G?void 0:G.fieldName))?R.title||null:G?G.label||G.fieldName:null};h.getFixedFieldName=B;h.getFixedFieldNames=function(G,
R){return G&&G.map(X=>B(X,R))};h.getSourceLayer=function(G){if(!E.isNone(G))return G.get("sourceLayer")||G.get("layer")};h.graphicCallback=function(G,R){return m.apply(this,arguments)};h.htmlEntities=function(G){return G.replace(sa,R=>`&#${R.charCodeAt(0)};`)};h.isExpressionField=f;h.isRelatedField=I;h.preLayerQueryCallback=({query:G,layer:R,method:X})=>{Wa({layer:R,method:X,query:G,definitionExpression:`${R.definitionExpression} ${R.serviceDefinitionExpression}`})};h.preRequestCallback=({queryPayload:G,
layer:R,method:X})=>{Wa({layer:R,method:X,query:G,definitionExpression:`${R.definitionExpression} ${R.serviceDefinitionExpression}`})};h.queryUpdatedFeature=function(G,R){return t.apply(this,arguments)};h.shouldOpenInNewTab=function(G=""){if(G)return!Na.test(G.trim().toLowerCase())};h.substituteAttributes=D;h.substituteFieldsInLinksAndAttributes=function({attributes:G,globalAttributes:R,layer:X,text:ea,expressionAttributes:da,fieldInfoMap:ka}){return ea?D({formattedAttributes:R,template:L(ea,{...R,
...da,...G},X),fieldInfoMap:ka}):""};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/widgets/Attachments/support/attachmentUtils":function(){define(["exports","../../../assets"],function(h,p){h.getIconPath=function(v){const A=p.getAssetUrl("esri/themes/base/images/files/");return v?"text/plain"===v?`${A}text-32.svg`:"application/pdf"===v?`${A}pdf-32.svg`:"text/csv"===v?`${A}csv-32.svg`:"application/gpx+xml"===v?`${A}gpx-32.svg`:"application/x-dwf"===v?`${A}cad-32.svg`:"application/postscript"===
v||"application/json"===v||"text/xml"===v||"model/vrml"===v?`${A}code-32.svg`:"application/x-zip-compressed"===v||"application/x-7z-compressed"===v||"application/x-gzip"===v||"application/x-tar"===v||"application/x-gtar"===v||"application/x-bzip2"===v||"application/gzip"===v||"application/x-compress"===v||"application/x-apple-diskimage"===v||"application/x-rar-compressed"===v||"application/zip"===v?`${A}zip-32.svg`:-1!==v.indexOf("image/")?`${A}image-32.svg`:-1!==v.indexOf("audio/")?`${A}sound-32.svg`:
-1!==v.indexOf("video/")?`${A}video-32.svg`:-1!==v.indexOf("msexcel")||-1!==v.indexOf("ms-excel")||-1!==v.indexOf("spreadsheetml")?`${A}excel-32.svg`:-1!==v.indexOf("msword")||-1!==v.indexOf("ms-word")||-1!==v.indexOf("wordprocessingml")?`${A}word-32.svg`:-1!==v.indexOf("powerpoint")||-1!==v.indexOf("presentationml")?`${A}report-32.svg`:`${A}generic-32.svg`:`${A}generic-32.svg`};h.isSupportedImage=function(v){v=v.toLowerCase();return"image/bmp"===v||"image/emf"===v||"image/exif"===v||"image/gif"===
v||"image/x-icon"===v||"image/jpeg"===v||"image/png"===v||"image/tiff"===v||"image/x-wmf"===v};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureAttachments/FeatureAttachmentsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Attachments/AttachmentsViewModel".split(" "),
function(h,p,v,A,E,w,C,T){A=function(Y){function S(O){O=Y.call(this,O)||this;O.description=null;O.title=null;return O}h._inheritsLoose(S,Y);return S}(T);p.__decorate([v.property()],A.prototype,"description",void 0);p.__decorate([v.property()],A.prototype,"title",void 0);return A=p.__decorate([C.subclass("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],A)})},"esri/widgets/Feature/support/FeatureElementInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Widget ../../support/Heading ../../support/widgetUtils ../../../core/Logger ../../support/jsxFactory".split(" "),
function(h,p,v,A,E,w,C,T,Y,S,O,m){A=function(f){function q(K,D){K=f.call(this,K,D)||this;K.description=null;K.headingLevel=2;K.title=null;return K}h._inheritsLoose(q,f);var B=q.prototype;B.render=function(){return m.tsx("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())};B.renderTitle=function(){const {title:K}=this;return K?m.tsx(Y.Heading,{level:this.headingLevel,class:"esri-feature-element-info__title"},K):null};B.renderDescription=function(){const {description:K}=
this;return K?m.tsx("div",{key:"description",class:"esri-feature-element-info__description"},K):null};return q}(T);p.__decorate([v.property()],A.prototype,"description",void 0);p.__decorate([v.property()],A.prototype,"headingLevel",void 0);p.__decorate([v.property()],A.prototype,"title",void 0);return A=p.__decorate([C.subclass("esri.widgets.Feature.support.FeatureElementInfo")],A)})},"esri/widgets/support/Heading":function(){define("exports ../../core/mathUtils ./widgetUtils ../../core/has ../../core/Logger ./jsxFactory".split(" "),
function(h,p,v,A,E,w){const C={heading:"esri-widget__heading"};h.CSS=C;h.Heading=function(T,Y){const S=p.clamp(Math.ceil(T.level),1,6),O=`h${S}`;delete T.level;return w.tsx(O,{...T,class:v.classes(C.heading,T.class),role:"heading","aria-level":String(S)},Y)};h.incrementHeadingLevel=function(T,Y=1){return p.clamp(Math.ceil(T+Y),1,6)};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent/FeatureContentViewModel ./support/featureUtils ../support/widget ../support/jsxFactory".split(" "),
function(h,p,v,A,E,w,C,T,Y,S,O,m,f){A=function(q){function B(D,H){D=q.call(this,D,H)||this;D.creator=null;D.graphic=null;D.viewModel=null;D._addTargetToAnchors=Q=>{Array.from(Q.querySelectorAll("a")).forEach(P=>{O.shouldOpenInNewTab(P.href)&&!P.hasAttribute("target")&&P.setAttribute("target","_blank")})};return D}h._inheritsLoose(B,q);var K=B.prototype;K.renderLoading=function(){return f.tsx("div",{class:"esri-feature-content__loader-container",key:"loader"},f.tsx("div",{class:"esri-feature-content__loader"}))};
K.renderCreated=function(){var D;const H=null==(D=this.viewModel)?void 0:D.created;return H?H instanceof HTMLElement?f.tsx("div",{key:H,bind:H,afterCreate:this._attachToNode}):m.isWidget(H)?f.tsx("div",{key:H},!H.destroyed&&H.render()):f.tsx("div",{key:H,innerHTML:H,afterCreate:this._addTargetToAnchors}):null};K.render=function(){var D;const H=null==(D=this.viewModel)?void 0:D.state;return f.tsx("div",{class:"esri-feature-content"},"loading"===H?this.renderLoading():this.renderCreated())};K._attachToNode=
function(D){D.appendChild(this)};return B}(Y);p.__decorate([v.aliasOf("viewModel.creator")],A.prototype,"creator",void 0);p.__decorate([v.aliasOf("viewModel.graphic")],A.prototype,"graphic",void 0);p.__decorate([C.property({type:S})],A.prototype,"viewModel",void 0);return A=p.__decorate([T.subclass("esri.widgets.Feature.FeatureContent")],A)})},"esri/widgets/Feature/FeatureContent/FeatureContentViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../support/featureUtils".split(" "),
function(h,p,v,A,E,w,C,T,Y,S,O,m){A=function(f){function q(K){var D=f.call(this,K)||this;D._loadingPromise=null;D.created=null;D.creator=null;D.destroyer=null;D.graphic=null;D.handles.add(w.init(h._assertThisInitialized(D),"creator",H=>{D._destroyContent();D._createContent(H)}));return D}h._inheritsLoose(q,f);var B=q.prototype;B.destroy=function(){this._destroyContent()};B._destroyContent=function(){const {created:K,graphic:D,destroyer:H}=this;K&&(m.graphicCallback(H,{graphic:D}).catch(()=>null),
this._set("created",null))};B._createContent=function(){var K=h._asyncToGenerator(function*(D){var {graphic:H}=this;this._loadingPromise=D=m.graphicCallback(D,{graphic:H}).catch(()=>null);this.notifyChange("state");H=yield D;D===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",H))});return function(D){return K.apply(this,arguments)}}();h._createClass(q,[{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}}]);return q}(E.HandleOwnerMixin(A));
p.__decorate([C.property({readOnly:!0})],A.prototype,"created",void 0);p.__decorate([C.property()],A.prototype,"creator",void 0);p.__decorate([C.property()],A.prototype,"destroyer",void 0);p.__decorate([C.property({type:v})],A.prototype,"graphic",void 0);p.__decorate([C.property({readOnly:!0})],A.prototype,"state",null);return A=p.__decorate([O.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],A)})},"esri/widgets/Feature/FeatureExpression":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent ./FeatureFields ./FeatureMedia ./FeatureExpression/FeatureExpressionViewModel ../support/widgetUtils ../../core/Logger ../support/jsxFactory".split(" "),
function(h,p,v,A,E,w,C,T,Y,S,O,m,f,q,B,K){E=function(D){function H(P,L){P=D.call(this,P,L)||this;P.viewModel=new f;return P}h._inheritsLoose(H,D);var Q=H.prototype;Q.initialize=function(){v.init(this,"viewModel.contentElementViewModel",()=>this._setupExpressionWidget())};Q.destroy=function(){this._destroyContentWidget()};Q.renderLoading=function(){return K.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},K.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating",
"esri-feature__loading-spinner")}))};Q.render=function(){var P;const {state:L}=this.viewModel;return K.tsx("div",{class:"esri-feature-expression"},"loading"===L?this.renderLoading():"disabled"===L?null:null==(P=this._contentWidget)?void 0:P.render())};Q._destroyContentWidget=function(){const {_contentWidget:P}=this;P&&(P.viewModel=null,P.destroy());this._contentWidget=null};Q._setupExpressionWidget=function(){const {contentElementViewModel:P,contentElement:L}=this.viewModel,V=null==L?void 0:L.type;
this._destroyContentWidget();this._contentWidget=P?"fields"===V?new O({viewModel:P}):"media"===V?new m({viewModel:P}):"text"===V?new S({viewModel:P}):null:null;this.scheduleRender()};return H}(Y);p.__decorate([A.property({type:f})],E.prototype,"viewModel",void 0);return E=p.__decorate([T.subclass("esri.widgets.Feature.FeatureExpression")],E)})},"esri/widgets/Feature/FeatureFields":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureFields/FeatureFieldsViewModel ./support/FeatureElementInfo ../support/uriUtils ../support/widgetUtils ../support/decorators/messageBundle ../../core/Logger ../support/jsxFactory".split(" "),
function(h,p,v,A,E,w,C,T,Y,S,O,m,f,q,B,K,D){E=function(H){function Q(L,V){L=H.call(this,L,V)||this;L._featureElementInfo=null;L.attributes=null;L.description=null;L.expressionInfos=null;L.fieldInfos=null;L.title=null;L.viewModel=new O;L.messages=null;L.messagesURIUtils=null;return L}h._inheritsLoose(Q,H);var P=Q.prototype;P.initialize=function(){this._featureElementInfo=new m;v.init(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo())};P.destroy=function(){this._featureElementInfo.destroy()};
P.renderFieldInfo=function(L,V){var {attributes:n}=this.viewModel;const e=L.fieldName,r=L.label||e;n=n?null==n[e]?"":n[e]:"";L=!(!L.format||!L.format.dateFormat);n="number"!==typeof n||L?f.autoLink(this.messagesURIUtils,n):this._forceLTR(n);L={["esri-feature-fields__field-data--date"]:L};return D.tsx("tr",{key:`fields-element-info-row-${e}-${V}`},D.tsx("th",{key:`fields-element-info-row-header-${e}-${V}`,class:"esri-feature-fields__field-header",innerHTML:r}),D.tsx("td",{key:`fields-element-info-row-data-${e}-${V}`,
class:this.classes("esri-feature-fields__field-data",L),innerHTML:n}))};P.renderFields=function(){const {formattedFieldInfos:L}=this.viewModel;return null!=L&&L.length?D.tsx("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},D.tsx("tbody",null,L.map((V,n)=>this.renderFieldInfo(V,n)))):null};P.render=function(){var L;return D.tsx("div",{class:"esri-feature-fields"},null==(L=this._featureElementInfo)?void 0:L.render(),this.renderFields())};P._setupFeatureElementInfo=function(){const {description:L,
title:V}=this;this._featureElementInfo.set({description:L,title:V})};P._forceLTR=function(L){return`&lrm;${L}`};return Q}(S);p.__decorate([A.aliasOf("viewModel.attributes")],E.prototype,"attributes",void 0);p.__decorate([A.aliasOf("viewModel.description")],E.prototype,"description",void 0);p.__decorate([A.aliasOf("viewModel.expressionInfos")],E.prototype,"expressionInfos",void 0);p.__decorate([A.aliasOf("viewModel.fieldInfos")],E.prototype,"fieldInfos",void 0);p.__decorate([A.aliasOf("viewModel.title")],
E.prototype,"title",void 0);p.__decorate([T.property({type:O})],E.prototype,"viewModel",void 0);p.__decorate([T.property(),B.messageBundle("esri/widgets/Feature/t9n/Feature")],E.prototype,"messages",void 0);p.__decorate([T.property(),B.messageBundle("esri/widgets/support/t9n/uriUtils")],E.prototype,"messagesURIUtils",void 0);return E=p.__decorate([Y.subclass("esri.widgets.Feature.FeatureFields")],E)})},"esri/widgets/Feature/FeatureFields/FeatureFieldsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/ExpressionInfo ../../../popup/FieldInfo ../support/featureUtils".split(" "),
function(h,p,v,A,E,w,C,T,Y,S,O){v=function(m){function f(q){q=m.call(this,q)||this;q.attributes=null;q.expressionInfos=null;q.description=null;q.fieldInfos=null;q.title=null;return q}h._inheritsLoose(f,m);h._createClass(f,[{key:"formattedFieldInfos",get:function(){const {expressionInfos:q,fieldInfos:B}=this,K=[];null==B?void 0:B.forEach(D=>{if(!D.hasOwnProperty("visible")||D.visible)D=D.clone(),D.label=O.getFieldInfoLabel(D,q),K.push(D)});return K}}]);return f}(v);p.__decorate([A.property()],v.prototype,
"attributes",void 0);p.__decorate([A.property({type:[Y]})],v.prototype,"expressionInfos",void 0);p.__decorate([A.property()],v.prototype,"description",void 0);p.__decorate([A.property({type:[S]})],v.prototype,"fieldInfos",void 0);p.__decorate([A.property({readOnly:!0})],v.prototype,"formattedFieldInfos",null);p.__decorate([A.property()],v.prototype,"title",void 0);return v=p.__decorate([T.subclass("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],v)})},"esri/widgets/support/uriUtils":function(){define(["exports",
"../../core/string"],function(h,p){function v(E){let w=null;A.some(C=>{C.pattern.test(E)&&(w=C);return!!w});return w}const A=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];h.autoLink=function(E,w){if("string"!==typeof w||!w)return w;const C=v(w);if(!C)return w;const T=w.match(C.pattern);
E=p.replace(p.replace(C.label,{messages:E,hierPart:T&&T[2]}),{appName:C.appName});return w.replace(C.pattern,`<a${C.target?` target="${C.target}"`:""} href="$1"${"_blank"===C.target?' rel\x3d"noreferrer"':""}>${E}</a>`)};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureMedia":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/events ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureMedia/FeatureMediaViewModel ./support/FeatureElementInfo ./support/featureUtils ../support/chartUtils ../support/widgetUtils ../support/decorators/messageBundle ../../core/Logger ../support/jsxFactory ../support/widgetThemeUtils".split(" "),
function(h,p,v,A,E,w,C,T,Y,S,O,m,f,q,B,K,D,H,Q,P){w=function(L){function V(e,r){var z=L.call(this,e,r)||this;z._refreshTimer=null;z._refreshIntervalInfo=null;z._featureElementInfo=null;z.attributes=null;z.activeMediaInfoIndex=null;z.description=null;z.fieldInfoMap=null;z.layer=null;z.mediaInfos=null;z.popupTemplate=null;z.relatedInfos=null;z.title=null;z.viewModel=new m;z.messages=null;z._getChartDependencies=function(){var J=h._asyncToGenerator(function*(M){const N=yield B.loadChartsModule(),{destroyed:x,
viewModel:y}=h._assertThisInitialized(z);if(!x&&y&&M){var {activeMediaInfo:t}=y;z._renderChart({chartDiv:M,mediaInfo:t,chartsModule:N})}});return function(M){return J.apply(this,arguments)}}();return z}h._inheritsLoose(V,L);var n=V.prototype;n.initialize=function(){this._featureElementInfo=new f;this.own(A.init(this,["viewModel.activeMediaInfo","viewModel.activeMediaInfoIndex"],()=>this._setupMediaRefreshTimer()),A.init(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo()))};
n.destroy=function(){this._clearMediaRefreshTimer();this._featureElementInfo.destroy()};n.render=function(){var e;return Q.tsx("div",{bind:this,class:"esri-feature-media",onkeyup:this._handleMediaKeyup},null==(e=this._featureElementInfo)?void 0:e.render(),this.renderMedia())};n.renderMedia=function(){const {formattedMediaInfoCount:e}=this.viewModel;return e?Q.tsx("div",{key:"media-element-container",class:"esri-feature-media__container"},this.renderMediaPageButton("previous"),this.renderMediaInfo(),
this.renderMediaPageButton("next")):null};n.renderImageMediaInfo=function(e){var {_refreshIntervalInfo:r}=this;const {activeMediaInfoIndex:z,formattedMediaInfoCount:J}=this.viewModel,{value:M,refreshInterval:N,altText:x,title:y,type:t}=e,{sourceURL:I,linkURL:W}=M;e=q.shouldOpenInNewTab(W)?"_blank":"_self";const aa="_blank"===e?"noreferrer":"";r=N?r:null;r=Q.tsx("img",{alt:x||y,key:`media-${t}-${z}-${J}-${r?r.timestamp:0}`,src:r?r.sourceURL:I});return(e=W?Q.tsx("a",{title:y,href:W,rel:aa,target:e},
r):null)?e:r};n.renderChartMediaInfo=function(e){const {activeMediaInfoIndex:r,formattedMediaInfoCount:z}=this.viewModel;return Q.tsx("div",{key:`media-${e.type}-${r}-${z}`,bind:this,class:"esri-feature-media__chart",afterCreate:this._getChartDependencies})};n.renderMediaInfoType=function(){const {activeMediaInfo:e}=this.viewModel;return e?"image"===e.type?this.renderImageMediaInfo(e):-1!==e.type.indexOf("chart")?this.renderChartMediaInfo(e):null:null};n.renderMediaInfo=function(){var {activeMediaInfo:e}=
this.viewModel;if(!e)return null;const r=e.title?Q.tsx("div",{key:"media-title",class:"esri-feature-media__item-title",innerHTML:e.title}):null;e=e.caption?Q.tsx("div",{key:"media-caption",class:"esri-feature-media__item-caption",innerHTML:e.caption}):null;return Q.tsx("div",{key:"media-container",class:"esri-feature-media__item-container"},Q.tsx("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType()),r,e)};n.renderMediaPageButton=function(e){if(2>this.viewModel.formattedMediaInfoCount)return null;
const r=(e="previous"===e)?this.messages.previous:this.messages.next,z=e?this.classes("esri-feature-media__button","esri-feature-media__previous"):this.classes("esri-feature-media__button","esri-feature-media__next"),J=e?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon","esri-icon-left-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon","esri-icon-right-triangle-arrow"),M=e?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon--rtl",
"esri-icon-right-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon--rtl","esri-icon-left-triangle-arrow");return Q.tsx("button",{type:"button",key:e?"media-previous":"media-next",title:r,"aria-label":r,tabIndex:0,class:z,bind:this,onclick:e?this._previous:this._next},Q.tsx("span",{"aria-hidden":"true",class:J}),Q.tsx("span",{"aria-hidden":"true",class:M}))};n._setupFeatureElementInfo=function(){const {description:e,title:r}=this;this._featureElementInfo.set({description:e,
title:r})};n._next=function(){this.viewModel.next()};n._previous=function(){this.viewModel.previous()};n._handleMediaKeyup=function(e){const r=v.eventKey(e);"ArrowLeft"===r&&(e.stopPropagation(),this.viewModel.previous());"ArrowRight"===r&&(e.stopPropagation(),this.viewModel.next())};n._renderChart=function(e){const {abilities:r}=this.viewModel,{chartsModule:z,chartDiv:J,mediaInfo:M}=e,{value:N,type:x}=M,{am4core:y}=z,t=B.getColorSet(y);P.isDarkTheme()&&y.useTheme(z.am4themes_dark);const I=window.matchMedia("(prefers-reduced-motion: reduce)");
r.chartAnimation&&!I.matches?y.useTheme(z.am4themes_animated):y.unuseTheme(z.am4themes_animated);y.useTheme(function(W){W instanceof y.ColorSet&&t&&(W.list=t)});e="pie-chart"===x?this._createPieChart(e):this._createXYChart(e);J.setAttribute("aria-label",M.altText||M.title);e.data=N.series.map(W=>({tooltip:W.tooltip,value:W.value})).filter(W=>"pie-chart"===x?0<W.value:!0)};n._customizeChartTooltip=function(e,r){e.label.wrap=!0;e.label.maxWidth=200;e.autoTextColor=!1;e.getFillFromObject=!1;e.label.fill=
r.color("#ffffff");e.background.fill=r.color({r:0,g:0,b:0,a:.7})};n._createPieChart=function(e){const {chartDiv:r,chartsModule:z}=e,{am4core:J,am4charts:M}=z;e=J.create(r,M.PieChart);e.rtl=K.isRTL(this.container);const N=e.series.push(new M.PieSeries);N.labels.template.disabled=!0;N.ticks.template.disabled=!0;N.dataFields.value="value";N.dataFields.category="tooltip";this._customizeChartTooltip(N.tooltip,J);N.slices.template.tooltipText=e.rtl?"{category}: %{value.percent.formatNumber('#.0')}":"{category}: {value.percent.formatNumber('#.0')}%";
return e};n._getMinSeriesValue=function(e){let r=0;e.forEach(z=>r=Math.min(z.value,r));return r};n._createColumnChart=function(e,r){const {chartsModule:z,mediaInfo:J}=r;({value:r}=J);const {am4core:M,am4charts:N}=z,x=e.xAxes.push(new N.CategoryAxis);x.dataFields.category="tooltip";x.renderer.labels.template.disabled=!0;this._customizeChartTooltip(x.tooltip,M);x.tooltip.events.on("sizechanged",()=>{x.tooltip.dy=-x.tooltip.contentHeight});var y=e.yAxes.push(new N.ValueAxis);const t=y.renderer.labels.template;
y.renderer.minLabelPosition=.05;y.renderer.maxLabelPosition=.95;y.min=this._getMinSeriesValue(r.series);this._customizeChartTooltip(y.tooltip,M);t.wrap=!0;y=e.series.push(new N.ColumnSeries);y.dataFields.valueY="value";y.dataFields.categoryX="tooltip";e.cursor=new N.XYCursor;15<r.series.length&&(e.scrollbarX=new M.Scrollbar)};n._createBarChart=function(e,r){const {chartsModule:z,mediaInfo:J}=r;({value:r}=J);const {am4core:M,am4charts:N}=z,x=e.yAxes.push(new N.CategoryAxis);x.dataFields.category="tooltip";
x.renderer.inversed=!0;x.renderer.labels.template.disabled=!0;this._customizeChartTooltip(x.tooltip,M);x.tooltip.events.on("sizechanged",()=>{x.tooltip.dx=x.tooltip.contentWidth});var y=e.xAxes.push(new N.ValueAxis);const t=y.renderer.labels.template;y.renderer.minLabelPosition=.05;y.renderer.maxLabelPosition=.95;y.min=this._getMinSeriesValue(r.series);this._customizeChartTooltip(y.tooltip,M);t.wrap=!0;y=e.series.push(new N.ColumnSeries);y.dataFields.valueX="value";y.dataFields.categoryY="tooltip";
e.cursor=new N.XYCursor;15<r.series.length&&(e.scrollbarY=new M.Scrollbar)};n._createLineChart=function(e,r){const {chartsModule:z,mediaInfo:J}=r;({value:r}=J);const {am4core:M,am4charts:N}=z,x=e.xAxes.push(new N.CategoryAxis);x.dataFields.category="tooltip";x.renderer.labels.template.disabled=!0;this._customizeChartTooltip(x.tooltip,M);x.tooltip.events.on("sizechanged",()=>{x.tooltip.dy=-x.tooltip.contentHeight});var y=e.yAxes.push(new N.ValueAxis);const t=y.renderer.labels.template;y.renderer.minLabelPosition=
.05;y.renderer.maxLabelPosition=.95;y.min=this._getMinSeriesValue(r.series);this._customizeChartTooltip(y.tooltip,M);t.wrap=!0;y=e.series.push(new N.LineSeries);y.dataFields.categoryX="tooltip";y.dataFields.valueY="value";e.cursor=new N.XYCursor;15<r.series.length&&(e.scrollbarX=new M.Scrollbar)};n._createXYChart=function(e){const {chartDiv:r,chartsModule:z,mediaInfo:J}=e,{type:M}=J,{am4core:N,am4charts:x}=z,y=N.create(r,x.XYChart);y.rtl=K.isRTL(this.container);"column-chart"===M&&this._createColumnChart(y,
e);"bar-chart"===M&&this._createBarChart(y,e);"line-chart"===M&&this._createLineChart(y,e);return y};n._clearMediaRefreshTimer=function(){const {_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)};n._updateMediaInfoTimestamp=function(e){const r=Date.now();this._refreshIntervalInfo={timestamp:r,sourceURL:this._getImageSource(e,r)};this.scheduleRender()};n._setupMediaRefreshTimer=function(){this._clearMediaRefreshTimer();const {activeMediaInfo:e}=this.viewModel;e&&"image"===e.type&&
e.refreshInterval&&this._setRefreshTimeout(e)};n._setRefreshTimeout=function(e){const {refreshInterval:r,value:z}=e;r&&(e=6E4*r,this._updateMediaInfoTimestamp(z.sourceURL),this._refreshTimer=setInterval(()=>{this._updateMediaInfoTimestamp(z.sourceURL)},e))};n._getImageSource=function(e,r){const z=-1!==e.indexOf("?")?"\x26":"?",[J,M=""]=e.split("#");return`${J}${z}timestamp=${r}${M?"#":""}${M}`};return V}(O);p.__decorate([E.aliasOf("viewModel.attributes")],w.prototype,"attributes",void 0);p.__decorate([E.aliasOf("viewModel.activeMediaInfoIndex")],
w.prototype,"activeMediaInfoIndex",void 0);p.__decorate([E.aliasOf("viewModel.description")],w.prototype,"description",void 0);p.__decorate([E.aliasOf("viewModel.fieldInfoMap")],w.prototype,"fieldInfoMap",void 0);p.__decorate([E.aliasOf("viewModel.layer")],w.prototype,"layer",void 0);p.__decorate([E.aliasOf("viewModel.mediaInfos")],w.prototype,"mediaInfos",void 0);p.__decorate([E.aliasOf("viewModel.popupTemplate")],w.prototype,"popupTemplate",void 0);p.__decorate([E.aliasOf("viewModel.relatedInfos")],
w.prototype,"relatedInfos",void 0);p.__decorate([E.aliasOf("viewModel.title")],w.prototype,"title",void 0);p.__decorate([Y.property({type:m})],w.prototype,"viewModel",void 0);p.__decorate([Y.property(),D.messageBundle("esri/widgets/Feature/t9n/Feature")],w.prototype,"messages",void 0);return w=p.__decorate([S.subclass("esri.widgets.Feature.FeatureMedia")],w)})},"esri/widgets/Feature/FeatureMedia/FeatureMediaViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/subclass ../../../popup/FieldInfo ../../../popup/content/support/ChartMediaInfoValueSeries ../support/featureUtils ../support/relatedFeatureUtils".split(" "),
function(h,p,v,A,E,w,C,T,Y,S,O,m){const f={chartAnimation:!0};v=function(q){function B(D){D=q.call(this,D)||this;D.abilities={...f};D.activeMediaInfoIndex=0;D.attributes=null;D.description=null;D.fieldInfoMap=null;D.formattedAttributes=null;D.expressionAttributes=null;D.layer=null;D.mediaInfos=null;D.popupTemplate=null;D.relatedInfos=null;D.title=null;return D}h._inheritsLoose(B,q);var K=B.prototype;K.castAbilities=function(D){return{...f,...D}};K.setActiveMedia=function(D){this._setContentElementMedia(D)};
K.next=function(){this._pageContentElementMedia(1)};K.previous=function(){this._pageContentElementMedia(-1)};K._setContentElementMedia=function(D){const {formattedMediaInfoCount:H}=this;this.activeMediaInfoIndex=(D+H)%H};K._pageContentElementMedia=function(D){const {activeMediaInfoIndex:H}=this;this._setContentElementMedia(H+D)};K._formatMediaInfos=function(){const {attributes:D,mediaInfos:H,formattedAttributes:Q,expressionAttributes:P,fieldInfoMap:L,layer:V}=this;return null==H?void 0:H.map(n=>{n=
null==n?void 0:n.clone();if(!n)return null;n.title=O.substituteFieldsInLinksAndAttributes({attributes:D,fieldInfoMap:L,globalAttributes:Q,expressionAttributes:P,layer:V,text:n.title});n.caption=O.substituteFieldsInLinksAndAttributes({attributes:D,fieldInfoMap:L,globalAttributes:Q,expressionAttributes:P,layer:V,text:n.caption});n.altText=O.substituteFieldsInLinksAndAttributes({attributes:D,fieldInfoMap:L,globalAttributes:Q,expressionAttributes:P,layer:V,text:n.altText});if("image"===n.type){var {value:e}=
n;this._setImageValue({value:e,formattedAttributes:Q,layer:V});return n.value.sourceURL?n:void 0}return"pie-chart"===n.type||"line-chart"===n.type||"column-chart"===n.type||"bar-chart"===n.type?({value:e}=n,this._setChartValue({value:e,chartType:n.type,attributes:D,formattedAttributes:Q,layer:V}),n):null}).filter(Boolean)};K._setImageValue=function(D){const {fieldInfoMap:H}=this,{value:Q,formattedAttributes:P,layer:L}=D,{linkURL:V,sourceURL:n}=Q;n&&(D=O.fixTokens(n,L),Q.sourceURL=O.substituteAttributes({formattedAttributes:P,
template:D,fieldInfoMap:H}));V&&(D=O.fixTokens(V,L),Q.linkURL=O.substituteAttributes({formattedAttributes:P,template:D,fieldInfoMap:H}))};K._setChartValue=function(D){const {value:H,attributes:Q,formattedAttributes:P,chartType:L,layer:V}=D,{popupTemplate:n,relatedInfos:e}=this,{fields:r,normalizeField:z}=H;H.fields=O.getFixedFieldNames(r,V);z&&(H.normalizeField=O.getFixedFieldName(z,V));if(r.some(M=>!!(null!=P[M]||O.isRelatedField(M)&&e.size))){var J=null==n?void 0:n.fieldInfos;r.forEach(M=>{O.isRelatedField(M)?
H.series=[...H.series,...this._getRelatedChartInfos({fieldInfos:J,fieldName:M,formattedAttributes:P,chartType:L,value:H})]:(M=this._getChartOption({value:H,attributes:Q,chartType:L,formattedAttributes:P,fieldName:M,fieldInfos:J}),H.series.push(M))})}};K._getRelatedChartInfos=function(D){var H;const {fieldInfos:Q,fieldName:P,formattedAttributes:L,chartType:V,value:n}=D,e=[];D=m.getRelatedFieldInfo(P);const {layerId:r,fieldName:z}=D;D=null==(H=this.relatedInfos)?void 0:H.get(r.toString());if(!D)return e;
const {relatedFeatures:J,relation:M}=D;if(!M||!J)return e;({cardinality:H}=M);J.forEach(N=>{const {attributes:x}=N;x&&Object.keys(x).forEach(y=>{y===z&&e.push(this._getChartOption({value:n,attributes:x,formattedAttributes:L,fieldName:P,chartType:V,relatedFieldName:y,fieldInfos:Q}))})});return"one-to-many"===H||"many-to-many"===H?e:[e[0]]};K._getTooltip=function({label:D,value:H,chartType:Q}){return"pie-chart"===Q?D:`${D}: ${H}`};K._getChartOption=function(D){const {value:H,attributes:Q,formattedAttributes:P,
fieldName:L,relatedFieldName:V,fieldInfos:n,chartType:e}=D;var {layer:r}=this;const {normalizeField:z,tooltipField:J}=H;var M=z?O.isRelatedField(z)?Q[m.getRelatedFieldInfo(z).fieldName]:Q[z]:null;D=V&&void 0!==Q[V]?Q[V]:void 0!==Q[L]?Q[L]:P[L];const N=void 0===D?null:D&&M?D/M:D;D=new S({value:N});if(O.isRelatedField(L)){var x=m.getRelatedFieldInfo(L);var y=m.getRelatedFieldInfo(J);y=y?y.fieldName:null;r=O.formatValueToFieldInfo(N,{fieldInfos:n,fieldName:V,layer:r,preventPlacesFormatting:!!M});x=x?
x.label||x.fieldName:V;D.tooltip=this._getTooltip({label:y&&void 0!==Q[y]?Q[y]:x,value:r,chartType:e});return D}M=O.getFieldInfo(n,L);r=O.getFixedFieldName(L,r);M=J&&void 0!==P[J]?P[J]:O.getFieldInfoLabel(M||new Y({fieldName:r}),null==(x=this.popupTemplate)?void 0:x.expressionInfos);D.tooltip=this._getTooltip({label:M,value:P[r],chartType:e});return D};h._createClass(B,[{key:"activeMediaInfo",get:function(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}},{key:"formattedMediaInfos",
get:function(){return this._formatMediaInfos()||[]}},{key:"formattedMediaInfoCount",get:function(){return this.formattedMediaInfos.length}}]);return B}(v);p.__decorate([A.property()],v.prototype,"abilities",void 0);p.__decorate([C.cast("abilities")],v.prototype,"castAbilities",null);p.__decorate([A.property()],v.prototype,"activeMediaInfoIndex",void 0);p.__decorate([A.property({readOnly:!0})],v.prototype,"activeMediaInfo",null);p.__decorate([A.property()],v.prototype,"attributes",void 0);p.__decorate([A.property()],
v.prototype,"description",void 0);p.__decorate([A.property()],v.prototype,"fieldInfoMap",void 0);p.__decorate([A.property()],v.prototype,"formattedAttributes",void 0);p.__decorate([A.property()],v.prototype,"expressionAttributes",void 0);p.__decorate([A.property({readOnly:!0})],v.prototype,"formattedMediaInfos",null);p.__decorate([A.property()],v.prototype,"layer",void 0);p.__decorate([A.property({readOnly:!0})],v.prototype,"formattedMediaInfoCount",null);p.__decorate([A.property()],v.prototype,"mediaInfos",
void 0);p.__decorate([A.property()],v.prototype,"popupTemplate",void 0);p.__decorate([A.property()],v.prototype,"relatedInfos",void 0);p.__decorate([A.property()],v.prototype,"title",void 0);return v=p.__decorate([T.subclass("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],v)})},"esri/widgets/Feature/support/relatedFeatureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../layers/support/fieldUtils ../../../rest/support/Query ../../../rest/support/RelationshipQuery ../../../rest/support/StatisticDefinition ../../../tasks/QueryTask ./featureUtils".split(" "),
function(h,p,v,A,E,w,C,T,Y,S,O,m){function f(n,e){if(!e.relationships)return null;let r=null;({relationships:e}=e);e.some(z=>z.id===parseInt(n,10)?(r=z,!0):!1);return r}function q({originRelationship:n,relationships:e,layerId:r}){let z;e&&e.some(J=>{`${J.relatedTableId}`===r&&J.id===n.id&&(z=J);return!!z});return z}function B(n,e){e=e.toLowerCase();for(const r in n)if(r.toLowerCase()===e)return n[r];return null}function K(n,e,r,z){const J=new Y;J.outFields=["*"];J.relationshipId="number"===typeof e.id?
e.id:parseInt(e.id,10);J.objectIds=[n.attributes[r.objectIdField]];return r.queryRelatedFeatures(J,z)}function D(n,e,r){let z=0;const J=[];for(;z<e.length;)J.push(`${n} IN (${e.slice(z,r+z)})`),z+=r;return J.join(" OR ")}function H(n,e,r,z){return Q.apply(this,arguments)}function Q(){Q=p._asyncToGenerator(function*(n,e,r,z){var J=r.layerId.toString();const {layerInfo:M,queryTask:N,relation:x,relatedFields:y,outStatistics:t}=e;J=q({originRelationship:x,relationships:M.relationships,layerId:J});if(J.relationshipTableId&&
J.keyFieldInRelationshipTable){r=(yield K(n,J,r,z))[n.attributes[r.objectIdField]];if(!r)return null;const I=r.features.map(W=>W.attributes[M.objectIdField]);if(0<(null==t?void 0:t.length)&&M.supportsStatistics)return e=new T,e.where=D(M.objectIdField,I,1E3),e.outFields=y,e.outStatistics=t,e={features:Promise.resolve(r),statsFeatures:N.execute(e)},w.eachAlways(e)}return(J=null==J?void 0:J.keyField)?(r=C.isNumericField(P(M.fields,J)),n=B(n.attributes,x.keyField),J=r?`${J}=${n}`:`${J}='${n}'`,n=N.execute(new T({where:J,
outFields:e.relatedFields}),z),e=e.outStatistics&&0<e.outStatistics.length&&M.supportsStatistics?N.execute(new T({where:J,outFields:e.relatedFields,outStatistics:e.outStatistics}),z):null,z={features:n},e&&(z.statsFeatures=e),w.eachAlways(z)):null});return Q.apply(this,arguments)}function P(n,e){if(null!=n){e=e.toLowerCase();for(const r of n)if(r&&r.name.toLowerCase()===e)return r}return null}const L=E.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),V=new Map;h.createRelatedInfo=function(n,
e){if(n=f(n,e)){var r=`${e.url}/${n.relatedTableId}`;e=new O({url:r,sourceSpatialReference:e.spatialReference});return{url:r,queryTask:e,relation:n,relatedFields:[],outStatistics:[]}}};h.getDestinationRelation=q;h.getRelatedFieldInfo=function(n){if(!m.isRelatedField(n))return null;const [e,r]=n.split("/").slice(1);return{layerId:e,fieldName:r}};h.queryLayerInfos=function({relatedInfos:n,layer:e},r){const z={};n.forEach((J,M)=>{({relation:J}=J);if(!J)throw M=new A("relation-required","A relation is required on a layer to retrieve related records."),
L.error(M),M;({relatedTableId:J}=J);if("number"!==typeof J)throw M=new A("A related table ID is required on a layer to retrieve related records."),L.error(M),M;J=`${e.url}/${J}`;const N=V.get(J),x=N?N:v(J,{query:{f:"json"},signal:r&&r.signal});N||V.set(J,x);z[M]=x});return w.eachAlways(z)};h.queryRelatedFeatures=function({graphic:n,relatedInfos:e,layer:r},z){const J={};e.forEach((M,N)=>{M.layerInfo&&(J[N]=H(n,M,r,z))});return w.eachAlways(J)};h.setRelatedFeatures=function(n,e){if(e&&n){var {features:r,
statsFeatures:z}=n;n=r&&r.value;e.relatedFeatures=n?n.features:[];n=z&&z.value;e.relatedStatsFeatures=n?n.features:[]}};h.updateRelatedInfo=function({relatedInfo:n,fieldName:e,fieldInfo:r}){n.relatedFields.push(e);r.statisticType&&(e=new S({statisticType:r.statisticType,onStatisticField:e,outStatisticFieldName:e}),n.outStatistics.push(e))};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/widgets/support/chartUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../intl ../../core/has ../../intl/locale".split(" "),
function(h,p,v,A,E,w){function C(f){if(!f)return"en-us";if(S.has(f.toLowerCase()))return f.toLowerCase();{f=f.split("-")[0].toLowerCase();let B=null;for(q of S.keys())if(q.startsWith(f)){B=q;break}var q=B}return q||"en-us"}function T(){T=v._asyncToGenerator(function*(f=w.getLocale()){f=C(f);if(O&&f===m)return O;O=(new Promise((q,B)=>h(["../../chunks/index"],q,B))).then(q=>q.index);m=f;try{const [q,B]=yield Promise.all([O,S.get(m)()]);m===f&&(q.am4core.options.defaultLocale=B.default);q.am4core.options.suppressWarnings=
!0;q.am4core.options.autoDispose=!0}catch{return m=O=null}return O});return T.apply(this,arguments)}A="#ffffff #858585 #ffbebe #ffebbe #ffebaf #ffffbe #e9ffbe #d3ffbe #beffe8 #bee8ff #bed2ff #e8beff #ffbee8 #ebebeb #707070 #ff7f7f #ffa77f #ffd37f #ffff73 #d1ff73 #a3ff73 #73ffdf #73dfff #73b2ff #df73ff #ff73df #d6d6d6 #5c5c5c #ff0000 #ff5500 #ffaa00 #ffff00 #aaff00 #55ff00 #00ffc5 #00c5ff #0070ff #c500ff #ff00c5 #c2c2c2 #474747 #e60000 #e64c00 #e69800 #e6e600 #98e600 #4ce600 #00e6a9 #00a9e6 #005ce6 #a900e6 #e600a9 #adadad #242424 #a80000 #a83800 #a87000 #a8a800 #70a800 #38a800 #00a884 #0084a8 #004da8 #8400a8 #a80084 #999999 #1a1a1a #730000 #732600 #734c00 #737300 #4c7300 #267300 #00734c #004c73 #002673 #4c0073 #73004".split(" ");
var Y=[{name:"default",colors:[].concat(A.slice(30,39),A.slice(28,30).reverse())},{name:"cat-dark",colors:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8 #b7814a #3caf99 #6b6bd6 #b54779 #7f7f7f".split(" ")},{name:"tropical-bliss",colors:"#fce138 #ff9399 #fcd27e #f1983c #a553b7 #b1a9d0 #6ecffc #4c81cd #fc6f84 #fc3e5a #6af689 #48885c".split(" ")},{name:"desert-blooms",colors:"#102432 #144d59 #ffc730 #ed9310 #a64f1b #661510 #d9351a #b31515 #4a0932 #8c213f #18382e #2c6954".split(" ")},{name:"under-the-sea",
colors:"#bf9727 #607100 #00734c #704489 #01acca #024e76 #f09100 #ea311f #c6004b #7570b3 #666666 #333333".split(" ")},{name:"vibrant-rainbow",colors:"#fffb00 #f5cb11 #9fd40c #46e39c #32b8a6 #7ff2fa #ac08cc #dd33ff #eb7200 #e8a784 #bf2e2e #6c7000".split(" ")},{name:"ocean-bay",colors:"#191921 #11495c #78b1c2 #454f4b #8f8f82 #9be0c0 #87b051 #f7ec88 #ebdcc1 #dbb658 #c43541 #75351e".split(" ")},{name:"prairie-summer",colors:"#332424 #751555 #d47013 #d68989 #211173 #82aad6 #7bfaeb #6ec9a8 #6b6408 #eada40 #ccc54a #1fc235".split(" ")},
{name:"pastel-chalk",colors:"#fffd99 #f5e6a4 #c1d48c #b8e3d0 #a0b8b5 #cbf7fa #d791f2 #dfc1eb #f2b983 #e8c4b2 #bf8e8e #94995c".split(" ")},{name:"seq-yellow-orange-red-bright",colors:"#910000 #b1260b #c0370f #e05919 #ef6a1d #ff7b22 #ffa143 #ffb454 #ffda74 #ffed85".split(" ")},{name:"seq-reds-bright",colors:"#57453b #7b4238 #9f4036 #c23d33 #d7483c #ec5244 #f3696c #f9816c #ffc4ae #fff0dc".split(" ")},{name:"seq-purples-bright",colors:"#4e465c #5a4a78 #695291 #775baa #8663c3 #946bdc #aa89e8 #c1a6f3 #d7c4ff #e6e1ff".split(" ")},
{name:"seq-blues-bright",colors:"#404d54 #435c6c #48799d #4b88b6 #4d96ce #50a5e7 #74bbed #98d0f3 #bce6f9 #e6faff".split(" ")},{name:"seq-greens-bright",colors:"#39544c #386757 #368165 #359b73 #33b581 #4bc392 #64d2a2 #7ce0b3 #cbf6d9 #f4ffea".split(" ")},{name:"seq-browns-bright",colors:"#524834 #715b38 #8f6e3c #ae8140 #cc9444 #eba748 #eeb664 #f0c47f #f9e0b7 #fff8eb".split(" ")}];const S=new Map([["ar",()=>(new Promise((f,q)=>h(["../../chunks/ar"],f,q))).then(f=>f.ar)],["bg-bg",()=>(new Promise((f,
q)=>h(["../../chunks/bg_BG"],f,q))).then(f=>f.bg_BG)],["bs-ba",()=>(new Promise((f,q)=>h(["../../chunks/bs_BA"],f,q))).then(f=>f.bs_BA)],["ca-es",()=>(new Promise((f,q)=>h(["../../chunks/ca_ES"],f,q))).then(f=>f.ca_ES)],["cs-cz",()=>(new Promise((f,q)=>h(["../../chunks/cs_CZ"],f,q))).then(f=>f.cs_CZ)],["da-dk",()=>(new Promise((f,q)=>h(["../../chunks/da_DK"],f,q))).then(f=>f.da_DK)],["de-de",()=>(new Promise((f,q)=>h(["../../chunks/de_DE"],f,q))).then(f=>f.de_DE)],["de-ch",()=>(new Promise((f,q)=>
h(["../../chunks/de_CH"],f,q))).then(f=>f.de_CH)],["el-gr",()=>(new Promise((f,q)=>h(["../../chunks/el_GR"],f,q))).then(f=>f.el_GR)],["en-us",()=>(new Promise((f,q)=>h(["../../chunks/en_US"],f,q))).then(f=>f.en_US)],["en-ca",()=>(new Promise((f,q)=>h(["../../chunks/en_CA"],f,q))).then(f=>f.en_CA)],["es-es",()=>(new Promise((f,q)=>h(["../../chunks/es_ES"],f,q))).then(f=>f.es_ES)],["et-ee",()=>(new Promise((f,q)=>h(["../../chunks/et_EE"],f,q))).then(f=>f.et_EE)],["fi-fi",()=>(new Promise((f,q)=>h(["../../chunks/fi_FI"],
f,q))).then(f=>f.fi_FI)],["fr-fr",()=>(new Promise((f,q)=>h(["../../chunks/fr_FR"],f,q))).then(f=>f.fr_FR)],["he-il",()=>(new Promise((f,q)=>h(["../../chunks/he_IL"],f,q))).then(f=>f.he_IL)],["hr-hr",()=>(new Promise((f,q)=>h(["../../chunks/hr_HR"],f,q))).then(f=>f.hr_HR)],["hu-hu",()=>(new Promise((f,q)=>h(["../../chunks/hu_HU"],f,q))).then(f=>f.hu_HU)],["id-id",()=>(new Promise((f,q)=>h(["../../chunks/id_ID"],f,q))).then(f=>f.id_ID)],["it-it",()=>(new Promise((f,q)=>h(["../../chunks/it_IT"],f,q))).then(f=>
f.it_IT)],["ja-jp",()=>(new Promise((f,q)=>h(["../../chunks/ja_JP"],f,q))).then(f=>f.ja_JP)],["ko-kr",()=>(new Promise((f,q)=>h(["../../chunks/ko_KR"],f,q))).then(f=>f.ko_KR)],["lt-lt",()=>(new Promise((f,q)=>h(["../../chunks/lt_LT"],f,q))).then(f=>f.lt_LT)],["lv-lv",()=>(new Promise((f,q)=>h(["../../chunks/lv_LV"],f,q))).then(f=>f.lv_LV)],["nb-no",()=>(new Promise((f,q)=>h(["../../chunks/nb_NO"],f,q))).then(f=>f.nb_NO)],["nl-nl",()=>(new Promise((f,q)=>h(["../../chunks/nl_NL"],f,q))).then(f=>f.nl_NL)],
["pl-pl",()=>(new Promise((f,q)=>h(["../../chunks/pl_PL"],f,q))).then(f=>f.pl_PL)],["pt-br",()=>(new Promise((f,q)=>h(["../../chunks/pt_BR"],f,q))).then(f=>f.pt_BR)],["pt-pt",()=>(new Promise((f,q)=>h(["../../chunks/pt_PT"],f,q))).then(f=>f.pt_PT)],["ro-ro",()=>(new Promise((f,q)=>h(["../../chunks/ro_RO"],f,q))).then(f=>f.ro_RO)],["ru-ru",()=>(new Promise((f,q)=>h(["../../chunks/ru_RU"],f,q))).then(f=>f.ru_RU)],["sk-sk",()=>(new Promise((f,q)=>h(["../../chunks/sk_SK"],f,q))).then(f=>f.sk_SK)],["sl-sl",
()=>(new Promise((f,q)=>h(["../../chunks/sl_SL"],f,q))).then(f=>f.sl_SL)],["sr-rs",()=>(new Promise((f,q)=>h(["../../chunks/sr_RS"],f,q))).then(f=>f.sr_RS)],["sv-se",()=>(new Promise((f,q)=>h(["../../chunks/sv_SE"],f,q))).then(f=>f.sv_SE)],["th-th",()=>(new Promise((f,q)=>h(["../../chunks/th_TH"],f,q))).then(f=>f.th_TH)],["tr-tr",()=>(new Promise((f,q)=>h(["../../chunks/tr_TR"],f,q))).then(f=>f.tr_TR)],["uk-ua",()=>(new Promise((f,q)=>h(["../../chunks/uk_UA"],f,q))).then(f=>f.uk_UA)],["vi-vn",()=>
(new Promise((f,q)=>h(["../../chunks/vi_VN"],f,q))).then(f=>f.vi_VN)],["zh-cn",()=>(new Promise((f,q)=>h(["../../chunks/zh_Hans"],f,q))).then(f=>f.zh_Hans)],["zh-hk",()=>(new Promise((f,q)=>h(["../../chunks/zh_Hant"],f,q))).then(f=>f.zh_Hant)],["zh-tw",()=>(new Promise((f,q)=>h(["../../chunks/zh_Hant"],f,q))).then(f=>f.zh_Hant)]]);let O,m;p.getChartLocale=C;p.getColorSet=function(f,q="default"){const B=Y.find(K=>K.name===q);return B?B.colors.map(K=>f.color(K)):null};p.loadChartsModule=function(){return T.apply(this,
arguments)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureExpression/FeatureExpressionViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../chunks/languageUtils ../../../core/Accessor ../../../core/HandleOwner ../../../core/throttle ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/content/AttachmentsContent ../../../popup/content/Content ../../../popup/content/CustomContent ../../../popup/content/ExpressionContent ../../../popup/content/FieldsContent ../../../popup/content/MediaContent ../../../popup/content/TextContent ../../../popup/ElementExpressionInfo ../FeatureContent/FeatureContentViewModel ../FeatureFields/FeatureFieldsViewModel ../FeatureMedia/FeatureMediaViewModel ../support/arcadeFeatureUtils".split(" "),
function(h,p,v,A,E,w,C,T,Y,S,O,m,f,q,B,K,D,H,Q,P,L,V,n,e,r){E=function(z){function J(M){var N=z.call(this,M)||this;N._abortController=null;N.expressionInfo=null;N.graphic=null;N.contentElement=null;N.contentElementViewModel=null;N.interceptor=null;N.view=null;N._cancelQuery=()=>{const {_abortController:x}=h._assertThisInitialized(N);x&&x.abort();N._abortController=null};N._createVM=()=>{var x,y;const t=null==(x=N.contentElement)?void 0:x.type;null==(y=N.contentElementViewModel)?void 0:y.destroy();
x="fields"===t?new n:"media"===t?new e:"text"===t?new V:null;N._set("contentElementViewModel",x)};N._compile=h._asyncToGenerator(function*(){N._cancelQuery();const x=new AbortController;N._abortController=x;yield N._compileExpression();N._abortController===x&&(N._abortController=null)});N._compileThrottled=C.throttle(N._compile,1,h._assertThisInitialized(N));N._compileExpression=h._asyncToGenerator(function*(){const {expressionInfo:x,graphic:y,interceptor:t,spatialReference:I,map:W,view:aa,_abortController:fa}=
h._assertThisInitialized(N);if(x&&y&&I&&W){var ja=yield r.loadArcadeUtils();if(fa===N._abortController)if((ja=yield r.createCompiledExpression({arcadeUtils:ja,expressionInfo:x,graphic:y,interceptor:t,map:W,spatialReference:I,view:aa}))&&"esri.arcade.Dictionary"===ja.declaredClass){ja=yield A.castAsJsonAsync(ja,fa.signal);var na=null==ja?void 0:ja.type;ja="media"===na?Q.fromJSON(ja):"text"===na?P.fromJSON(ja):"fields"===na?H.fromJSON(ja):null;N._set("contentElement",ja)}else N._set("contentElement",
null)}else N._set("contentElement",null)});N.handles.add([T.init(h._assertThisInitialized(N),["expressionInfo","graphic","map","spatialReference","view"],N._compileThrottled),T.init(h._assertThisInitialized(N),"contentElement",N._createVM)]);return N}h._inheritsLoose(J,z);J.prototype.destroy=function(){var M;this._cancelQuery();null==(M=this.contentElementViewModel)?void 0:M.destroy();this._set("contentElementViewModel",null);this._set("contentElement",null)};h._createClass(J,[{key:"spatialReference",
get:function(){var M;return(null==(M=this.view)?void 0:M.spatialReference)||null},set:function(M){void 0===M?this._clearOverride("spatialReference"):this._override("spatialReference",M)}},{key:"state",get:function(){const {_abortController:M,contentElement:N,contentElementViewModel:x}=this;return M?"loading":N||x?"ready":"disabled"}},{key:"map",get:function(){var M;return(null==(M=this.view)?void 0:M.map)||null},set:function(M){void 0===M?this._clearOverride("map"):this._override("map",M)}}]);return J}(w.HandleOwnerMixin(E));
p.__decorate([Y.property()],E.prototype,"_abortController",void 0);p.__decorate([Y.property({type:L})],E.prototype,"expressionInfo",void 0);p.__decorate([Y.property({type:v})],E.prototype,"graphic",void 0);p.__decorate([Y.property({readOnly:!0})],E.prototype,"contentElement",void 0);p.__decorate([Y.property({readOnly:!0})],E.prototype,"contentElementViewModel",void 0);p.__decorate([Y.property()],E.prototype,"interceptor",void 0);p.__decorate([Y.property()],E.prototype,"spatialReference",null);p.__decorate([Y.property({readOnly:!0})],
E.prototype,"state",null);p.__decorate([Y.property()],E.prototype,"map",null);p.__decorate([Y.property()],E.prototype,"view",void 0);return E=p.__decorate([f.subclass("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],E)})},"esri/chunks/languageUtils":function(){define("exports ../arcade/FunctionWrapper ../arcade/ImmutableArray ../arcade/ImmutablePathArray ../arcade/ImmutablePointArray ../core/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ./datetime ../core/maybe ../core/number ../geometry/support/coordsUtils ../intl/locale ../arcade/featureset/support/shared".split(" "),
function(h,p,v,A,E,w,C,T,Y,S,O,m,f,q,B,K,D,H){function Q(c,k,F){return""===k||null===k||void 0===k||k===F||k===F?c:c=c.split(k).join(F)}function P(c){return c instanceof Xa||c instanceof p||c instanceof bb}function L(c){return n(c)||r(c)||t(c)||e(c)||null===c||c===Ia||"number"===typeof c?!0:!1}function V(c,k){return void 0===c?k:c}function n(c){return"string"===typeof c||c instanceof String}function e(c){return"boolean"===typeof c}function r(c){return"number"===typeof c}function z(c){return"number"===
typeof c&&isFinite(c)&&Math.floor(c)===c}function J(c){return c instanceof Array}function M(c){return"esri.arcade.Feature"===(null==c?void 0:c.arcadeDeclaredClass)?!0:!1}function N(c){return!0===(c&&c.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===c.declaredRootClass)}function x(c){return!0===(c&&c.declaredRootClass&&"esri.arcade.featureSetCollection"===c.declaredRootClass)}function y(c){return c instanceof v}function t(c){return c instanceof Date}function I(c,k,F){if(c.length<k||
c.length>F)throw Error("Function called with wrong number of Parameters");}function W(c){return 0>c?-Math.round(-c):Math.round(c)}function aa(){let c=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(k){const F=(c+16*Math.random())%16|0;c=Math.floor(c/16);return("x"===k?F:F&3|8).toString(16)})}function fa(c,k){if(!1===isNaN(c)){if(void 0===k||null===k||""===k)return c.toString();k=Q(k,"\u2030","");k=Q(k,"\u00a4","");return B.format(c,{pattern:k})}return c.toString()}
function ja(c,k){c=f.DateTime.fromJSDate(c);return void 0===k||null===k||""===k?c.toISO({suppressMilliseconds:!0}):c.toFormat(na(k),{locale:D.getLocale(),numberingSystem:"latn"})}function na(c){c=c.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let k="";const F=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const ca of c.match(F))switch(ca){case "D":k+=
"d";break;case "DD":k+="dd";break;case "DDD":k+="o";break;case "d":k+="c";break;case "ddd":k+="ccc";break;case "dddd":k+="cccc";break;case "M":k+="L";break;case "MM":k+="LL";break;case "MMM":k+="LLL";break;case "MMMM":k+="LLLL";break;case "YY":k+="yy";break;case "Y":case "YYYY":k+="yyyy";break;case "Q":k+="q";break;case "Z":k+="ZZ";break;case "ZZ":k+="ZZZ";break;case "S":k+="'S'";break;case "SS":k+="'SS'";break;case "SSS":k+="u";break;case "A":case "a":k+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":k+=
ca;break;default:k=2<=ca.length&&"["===ca.slice(0,1)&&"]"===ca.slice(-1)?k+`'${ca.slice(1,-1)}'`:k+`'${ca}'`}return k}function ia(c,k,F){switch(F){case "\x3e":return c>k;case "\x3c":return c<k;case "\x3e\x3d":return c>=k;case "\x3c\x3d":return c<=k}return!1}function pa(c,k,F){if(null===c){if(null===k||k===Ia)return ia(null,null,F);if(r(k))return ia(0,k,F);if(n(k)||e(k))return ia(0,ua(k),F);if(t(k))return ia(0,k.getTime(),F)}if(c===Ia){if(null===k||k===Ia)return ia(null,null,F);if(r(k))return ia(0,
k,F);if(n(k)||e(k))return ia(0,ua(k),F);if(t(k))return ia(0,k.getTime(),F)}else if(r(c)){if(r(k))return ia(c,k,F);if(e(k))return ia(c,ua(k),F);if(null===k||k===Ia)return ia(c,0,F);if(n(k))return ia(c,ua(k),F);if(t(k))return ia(c,k.getTime(),F)}else if(n(c)){if(n(k))return ia(sa(c),sa(k),F);if(t(k))return ia(ua(c),k.getTime(),F);if(r(k))return ia(ua(c),k,F);if(null===k||k===Ia)return ia(ua(c),0,F);if(e(k))return ia(ua(c),ua(k),F)}else if(t(c)){if(t(k))return ia(c,k,F);if(null===k||k===Ia)return ia(c.getTime(),
0,F);if(r(k))return ia(c.getTime(),k,F);if(e(k)||n(k))return ia(c.getTime(),ua(k),F)}else if(e(c)){if(e(k))return ia(c,k,F);if(r(k))return ia(ua(c),ua(k),F);if(t(k))return ia(ua(c),k.getTime(),F);if(null===k||k===Ia)return ia(ua(c),0,F);if(n(k))return ia(ua(c),ua(k),F)}return!za(c,k)||"\x3c\x3d"!==F&&"\x3e\x3d"!==F?!1:!0}function za(c,k){if(c===k||null===c&&k===Ia||null===k&&c===Ia)return!0;if(t(c)&&t(k))return c.getTime()===k.getTime();if(c instanceof A||c instanceof E)return c.equalityTest(k);if(c instanceof
S&&k instanceof S){const F=c.cache._arcadeCacheId,ca=k.cache._arcadeCacheId;if(void 0!==F&&null!==F)return F===ca}return void 0!==c&&void 0!==k&&null!==c&&null!==k&&"object"===typeof c&&"object"===typeof k&&(c._arcadeCacheId===k._arcadeCacheId&&void 0!==c._arcadeCacheId&&null!==c._arcadeCacheId||c._underlyingGraphic===k._underlyingGraphic&&void 0!==c._underlyingGraphic&&null!==c._underlyingGraphic)?!0:!1}function sa(c,k){if(n(c))return c;if(null===c)return"";if(r(c))return fa(c,k);if(e(c))return c.toString();
if(t(c))return ja(c,k);if(c instanceof T)return JSON.stringify(c.toJSON());if(J(c)){k=[];for(var F=0;F<c.length;F++)k[F]=Fa(c[F]);return"["+k.join(",")+"]"}if(c instanceof v){k=[];for(F=0;F<c.length();F++)k[F]=Fa(c.get(F));return"["+k.join(",")+"]"}return null!==c&&"object"===typeof c&&void 0!==c.castToText?c.castToText():P(c)?"object, Function":""}function Ca(c){const k=[];if(!1===J(c))return null;if(c instanceof v){for(var F=0;F<c.length();F++)k[F]=ua(c.get(F));return k}for(F=0;F<c.length;F++)k[F]=
ua(c[F]);return k}function Na(c,k){if(n(c))return c;if(null===c)return"";if(r(c))return fa(c,k);if(e(c))return c.toString();if(t(c))return ja(c,k);if(c instanceof T)return c instanceof C?'{"xmin":'+c.xmin.toString()+',"ymin":'+c.ymin.toString()+","+(c.hasZ?'"zmin":'+c.zmin.toString()+",":"")+(c.hasM?'"mmin":'+c.mmin.toString()+",":"")+'"xmax":'+c.xmax.toString()+',"ymax":'+c.ymax.toString()+","+(c.hasZ?'"zmax":'+c.zmax.toString()+",":"")+(c.hasM?'"mmax":'+c.mmax.toString()+",":"")+'"spatialReference":'+
Va(c.spatialReference)+"}":Va(c.toJSON(),(ca,ba)=>ca.key===ba.key?0:"spatialReference"===ca.key?1:"spatialReference"===ba.key||ca.key<ba.key?-1:ca.key>ba.key?1:0);if(J(c)){k=[];for(var F=0;F<c.length;F++)k[F]=Fa(c[F]);return"["+k.join(",")+"]"}if(c instanceof v){k=[];for(F=0;F<c.length();F++)k[F]=Fa(c.get(F));return"["+k.join(",")+"]"}return null!==c&&"object"===typeof c&&void 0!==c.castToText?c.castToText():P(c)?"object, Function":""}function Fa(c){return null===c?"null":e(c)||r(c)||n(c)?JSON.stringify(c):
c instanceof T||c instanceof v||c instanceof Array?Na(c):c instanceof Date?JSON.stringify(ja(c,"")):null!==c&&"object"===typeof c&&void 0!==c.castToText?c.castToText():"null"}function ua(c,k){return r(c)?c:null===c||""===c?0:t(c)?NaN:e(c)?c?1:0:J(c)||""===c||void 0===c?NaN:void 0!==k&&n(c)?(k=Q(k,"\u2030",""),k=Q(k,"\u00a4",""),B.parse(c,{pattern:k})):c===Ia?0:Number(c)}function Wa(c){return t(c)?c:n(c)&&(c=R(c))?c.toJSDate():null}function G(c){return t(c)?f.DateTime.fromJSDate(c):n(c)?R(c):null}
function R(c){const k=/ (\d\d)/;let F=f.DateTime.fromISO(c);return F.isValid||k.test(c)&&(c=c.replace(k,"T$1"),F=f.DateTime.fromISO(c),F.isValid)?F:null}function X(c){return e(c)?c:n(c)?(c=c.toLowerCase(),"true"===c?!0:!1):r(c)?0===c||isNaN(c)?!1:!0:!1}function ea(c,k){if(q.isNone(c))return null;if(null===c.spatialReference||void 0===c.spatialReference)c.spatialReference=k;return c}function da(c){if(null===c)return null;if(c instanceof S)return"NaN"===c.x||null===c.x||isNaN(c.x)?null:c;if(c instanceof
O){if(0===c.rings.length)return null;for(const k of c.rings)if(0<k.length)return c;return null}if(c instanceof m){if(0===c.paths.length)return null;for(const k of c.paths)if(0<k.length)return c;return null}return c instanceof Y?0===c.points.length?null:c:c instanceof C?"NaN"===c.xmin||null===c.xmin||isNaN(c.xmin)?null:c:null}function ka(c,k){if(!c||!c.domain)return k;let F=null;if("string"===c.field.type||"esriFieldTypeString"===c.field.type)k=sa(k);else{if(null===k||void 0===k)return null;if(""===
k)return k;k=ua(k)}for(let ca=0;ca<c.domain.codedValues.length;ca++){const ba=c.domain.codedValues[ca];ba.code===k&&(F=ba)}return null===F?k:F.name}function ya(c,k){if(!c||!c.domain)return k;let F=null;k=sa(k);for(let ca=0;ca<c.domain.codedValues.length;ca++){const ba=c.domain.codedValues[ca];ba.name===k&&(F=ba)}return null===F?k:F.code}function Da(c,k,F=null,ca=null){if(!k||!k.fields)return null;let ba=null;for(let Ja=0;Ja<k.fields.length;Ja++){const Ga=k.fields[Ja];Ga.name.toLowerCase()===c.toString().toLowerCase()&&
(ba=Ga)}if(null===ba)throw Error("Field not found");let oa,xa;null===ca&&F&&k.typeIdField&&(ca=F.hasField(k.typeIdField)?F.field(k.typeIdField):null);null!==ca&&void 0!==ca&&k.types.some(function(Ja){return Ja.id===ca?((oa=Ja.domains&&Ja.domains[ba.name])&&"inherited"===oa.type&&(oa=Sa(ba.name,k),xa=!0),!0):!1});xa||oa||(oa=Sa(c,k));return{field:ba,domain:oa}}function Sa(c,k){let F;k.fields.some(function(ca){ca.name.toLowerCase()===c.toLowerCase()&&(F=ca.domain);return!!F});return F}function Va(c,
k){k||(k={});"function"===typeof k&&(k={cmp:k});const F="boolean"===typeof k.cycles?k.cycles:!1,ca=k.cmp&&function(oa){return function(xa){return function(Ja,Ga){return oa({key:Ja,value:xa[Ja]},{key:Ga,value:xa[Ga]})}}}(k.cmp),ba=[];return function Ja(xa){xa&&xa.toJSON&&"function"===typeof xa.toJSON&&(xa=xa.toJSON());if(void 0!==xa){if("number"===typeof xa)return isFinite(xa)?""+xa:"null";if("object"!==typeof xa)return JSON.stringify(xa);var Ga;if(Array.isArray(xa)){var Qa="[";for(Ga=0;Ga<xa.length;Ga++)Ga&&
(Qa+=","),Qa+=Ja(xa[Ga])||"null";return Qa+"]"}if(null===xa)return"null";if(-1!==ba.indexOf(xa)){if(F)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var vb=ba.push(xa)-1,lb=Object.keys(xa).sort(ca&&ca(xa));Qa="";for(Ga=0;Ga<lb.length;Ga++){const Ya=lb[Ga],Ta=Ja(xa[Ya]);Ta&&(Qa&&(Qa+=","),Qa+=JSON.stringify(Ya)+":"+Ta)}ba.splice(vb,1);return"{"+Qa+"}"}}(c)}function wb(c){if(null===c)return null;const k=[];for(const F of c)F&&F.arcadeDeclaredClass&&
"esri.arcade.Feature"===F.arcadeDeclaredClass?k.push(F.geometry()):k.push(F);return k}function Ha(c,k){if(k instanceof S)c.push(k.hasZ?k.hasM?[k.x,k.y,k.z,k.m]:[k.x,k.y,k.z]:[k.x,k.y]);else throw Error("Invalid Argument");}function qa(c,k){if(J(c)||y(c)){let F=!1,ca=!1,ba=[];if(J(c)){for(const oa of c)Ha(ba,oa);0<ba.length&&(k=c[0].spatialReference,F=c[0].hasZ,ca=c[0].hasM)}else if(c instanceof E)ba=c._elements,0<ba.length&&(F=c._hasZ,ca=c._hasM,k=c.get(0).spatialReference);else if(y(c)){for(const oa of c.toArray())Ha(ba,
oa);0<ba.length&&(k=c.get(0).spatialReference,F=!0===c.get(0).hasZ,ca=!0===c.get(0).hasM)}else throw Error("Invalid Argument");if(0===ba.length)return null;!1===K.isClockwise(ba,ca,F)&&(ba=ba.slice(0).reverse());return new O({rings:[ba],spatialReference:k,hasZ:F,hasM:ca})}return c}function xb(c,k){if(J(c)||y(c)){let F=!1,ca=!1,ba=[];if(J(c)){for(const oa of c)Ha(ba,oa);0<ba.length&&(k=c[0].spatialReference,F=!0===c[0].hasZ,ca=!0===c[0].hasM)}else if(c instanceof E)ba=c._elements,0<ba.length&&(F=c._hasZ,
ca=c._hasM,k=c.get(0).spatialReference);else if(y(c)){for(const oa of c.toArray())Ha(ba,oa);0<ba.length&&(k=c.get(0).spatialReference,F=!0===c.get(0).hasZ,ca=!0===c.get(0).hasM)}return 0===ba.length?null:new m({paths:[ba],spatialReference:k,hasZ:F,hasM:ca})}return c}function La(c,k){if(J(c)||y(c)){let F=!1,ca=!1,ba=[];if(J(c)){for(const oa of c)Ha(ba,oa);0<ba.length&&(k=c[0].spatialReference,F=!0===c[0].hasZ,ca=!0===c[0].hasM)}else if(c instanceof E)ba=c._elements,0<ba.length&&(F=c._hasZ,ca=c._hasM,
k=c.get(0).spatialReference);else if(y(c)){for(const oa of c.toArray())Ha(ba,oa);0<ba.length&&(k=c.get(0).spatialReference,F=!0===c.get(0).hasZ,ca=!0===c.get(0).hasM)}return 0===ba.length?null:new Y({points:ba,spatialReference:k,hasZ:F,hasM:ca})}return c}function mb(c,k=!1){const F=[];if(null===c)return F;if(!0===J(c)){for(var ca=0;ca<c.length;ca++){var ba=sa(c[ca]);""===ba&&!0!==k||F.push(ba)}return F}if(c instanceof v){for(ca=0;ca<c.length();ca++)ba=sa(c.get(ca)),""===ba&&!0!==k||F.push(ba);return F}return L(c)?
(c=sa(c),""===c&&!0!==k||F.push(c),F):[]}function ib(c){cb++;return 0===cb%100?(cb=0,w.create(k=>{setTimeout(()=>{k(c)},0)})):c}function yb(c,k,F){switch(F){case "\x26":return c&k;case "|":return c|k;case "^":return c^k;case "\x3c\x3c":return c<<k;case "\x3e\x3e":return c>>k;case "\x3e\x3e\x3e":return c>>>k}}function Za(c,k=null){if(null!=c){if(e(c)||r(c)||n(c))return c;if(c instanceof T)return!0===(null==k?void 0:k.keepGeometryType)?c:c.toJSON();if(c instanceof v)return c.toArray().map(F=>Za(F,k));
if(c instanceof Array)return c.map(F=>Za(F,k));if(c instanceof Date)return c;if(null!==c&&"object"===typeof c&&void 0!==c.castAsJson)return c.castAsJson(k)}return null}function Fb(c,k,F,ca,ba){return nb(c,k,F).then(oa=>{ba[ca]=oa})}function nb(c,k=null,F=null){c instanceof v&&(c=c.toArray());if(null!=c){if(L(c)||c instanceof T||c instanceof Date)return w.resolve(Za(c,F));if(c instanceof Array){const ca=[],ba=[];for(const oa of c)null===oa||L(oa)||oa instanceof T||oa instanceof Date?ba.push(Za(oa,
F)):(ba.push(null),ca.push(Fb(oa,k,F,ba.length-1,ba)));return 0<ca.length?w.all(ca).then(()=>ba):w.resolve(ba)}if(null!==c&&"object"===typeof c&&void 0!==c.castAsJsonAsync)return c.castAsJsonAsync(k,F)}return w.resolve(null)}function zb(c,k,F){const ca=c.fullSchema();return null!==ca&&ca.fields?Da(k,ca,c,F):null}function Ab(c){c=c.fullSchema();return null!==c&&c.fields?c.typeIdField?{subtypeField:c.typeIdField,subtypes:c.types?c.types.map(k=>({name:k.name,code:k.id})):[]}:null:null}function Bb(c,
k,F,ca){const ba=c.fullSchema();if(null===ba||!ba.fields)return null;ca=Da(k,ba,c,ca);if(void 0===F)try{F=c.field(k)}catch(oa){return null}return ka(ca,F)}function ob(c,k,F,ca){const ba=c.fullSchema();if(null===ba||!ba.fields)return null;if(void 0===F){try{F=c.field(k)}catch(oa){return null}return F}c=Da(k,ba,c,ca);return ya(c,F)}function Ka(c){c=c.fullSchema();if(null===c||!c.fields)return null;const k=[];for(const F of c.fields)k.push(H.esriFieldToJson(F));return{objectIdField:c.objectIdField,globalIdField:c.globalIdField,
geometryType:void 0===H.layerGeometryEsriRestConstants[c.geometryType]?"":H.layerGeometryEsriRestConstants[c.geometryType],fields:k}}let db=function(c){this.value=c},eb=function(c){this.value=c},Xa=function(c){this.fn=c},bb=function(c,k){this.paramCount=k;this.fn=c};const jb=Xa,pb=bb,Ia={type:"VOID"},qb={type:"BREAK"},fb={type:"CONTINUE"};let cb=0;const gb=Object.freeze({__proto__:null,ReturnResultE:db,ImplicitResultE:eb,NativeFunctionE:Xa,SizzleFunctionE:bb,NativeFunction:jb,ImplicitResult:eb,ReturnResult:db,
SizzleFunction:pb,voidOperation:Ia,breakResult:qb,continueResult:fb,multiReplace:Q,isFunctionParameter:P,isSimpleType:L,defaultUndefined:V,isString:n,isBoolean:e,isNumber:r,isInteger:z,isArray:J,isFeature:M,isFeatureSet:N,isFeatureSetCollection:x,isImmutableArray:y,isDate:t,pcCheck:I,absRound:W,generateUUID:aa,formatNumber:fa,formatDate:ja,standardiseDateFormat:na,greaterThanLessThan:pa,equalityTest:za,toString:sa,toNumberArray:Ca,toStringExplicit:Na,toNumber:ua,toDate:Wa,toDateTime:G,toBoolean:X,
fixSpatialReference:ea,fixNullGeometry:da,getDomainValue:ka,getDomainCode:ya,getDomain:Da,stableStringify:Va,autoCastFeatureToGeometry:wb,autoCastArrayOfPointsToPolygon:qa,autoCastArrayOfPointsToPolyline:xb,autoCastArrayOfPointsToMultiPoint:La,toStringArray:mb,tick:ib,binaryOperator:yb,castAsJson:Za,castAsJsonAsync:nb,featureFullDomain:zb,featureSubtypes:Ab,featureDomainValueLookup:Bb,featureDomainCodeLookup:ob,featureSchema:Ka});h.ImplicitResult=eb;h.ImplicitResultE=eb;h.NativeFunction=jb;h.NativeFunctionE=
Xa;h.ReturnResult=db;h.ReturnResultE=db;h.SizzleFunction=pb;h.SizzleFunctionE=bb;h.absRound=W;h.autoCastArrayOfPointsToMultiPoint=La;h.autoCastArrayOfPointsToPolygon=qa;h.autoCastArrayOfPointsToPolyline=xb;h.autoCastFeatureToGeometry=wb;h.binaryOperator=yb;h.breakResult=qb;h.castAsJson=Za;h.castAsJsonAsync=nb;h.continueResult=fb;h.defaultUndefined=V;h.equalityTest=za;h.featureDomainCodeLookup=ob;h.featureDomainValueLookup=Bb;h.featureFullDomain=zb;h.featureSchema=Ka;h.featureSubtypes=Ab;h.fixNullGeometry=
da;h.fixSpatialReference=ea;h.formatDate=ja;h.formatNumber=fa;h.generateUUID=aa;h.getDomain=Da;h.getDomainCode=ya;h.getDomainValue=ka;h.greaterThanLessThan=pa;h.isArray=J;h.isBoolean=e;h.isDate=t;h.isFeature=M;h.isFeatureSet=N;h.isFeatureSetCollection=x;h.isFunctionParameter=P;h.isImmutableArray=y;h.isInteger=z;h.isNumber=r;h.isSimpleType=L;h.isString=n;h.lc=gb;h.multiReplace=Q;h.pcCheck=I;h.stableStringify=Va;h.standardiseDateFormat=na;h.tick=ib;h.toBoolean=X;h.toDate=Wa;h.toDateTime=G;h.toNumber=
ua;h.toNumberArray=Ca;h.toString=sa;h.toStringArray=mb;h.toStringExplicit=Na;h.voidOperation=Ia})},"esri/arcade/FunctionWrapper":function(){define(function(){return function(h,p){this.context=this.definition=null;this.definition=h;this.context=p}})},"esri/arcade/ImmutableArray":function(){define(function(){return function(){function h(v=[]){this._elements=v}var p=h.prototype;p.length=function(){return this._elements.length};p.get=function(v){return this._elements[v]};p.toArray=function(){const v=
[];for(let A=0;A<this.length();A++)v.push(this.get(A));return v};return h}()})},"esri/arcade/ImmutablePathArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray","./ImmutablePointArray"],function(h,p,v){return function(A){function E(C,T,Y,S,O){C=A.call(this,C)||this;C._lazyPath=[];C._hasZ=!1;C._hasM=!1;C._hasZ=Y;C._hasM=S;C._spRef=T;C._cacheId=O;return C}h._inheritsLoose(E,A);var w=E.prototype;w.get=function(C){if(void 0===this._lazyPath[C]){const T=this._elements[C];if(void 0===
T)return;this._lazyPath[C]=new v(T,this._spRef,this._hasZ,this._hasM,this._cacheId,C)}return this._lazyPath[C]};w.equalityTest=function(C){return C===this?!0:null===C||!1===C instanceof E?!1:C.getUniqueHash()===this.getUniqueHash()};w.getUniqueHash=function(){return this._cacheId.toString()};return E}(p)})},"esri/arcade/ImmutablePointArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray","../geometry/Point"],function(h,p,v){return function(A){function E(C,T,Y,S,O,m){C=
A.call(this,C)||this;C._lazyPt=[];C._hasZ=!1;C._hasM=!1;C._spRef=T;C._hasZ=Y;C._hasM=S;C._cacheId=O;C._partId=m;return C}h._inheritsLoose(E,A);var w=E.prototype;w.get=function(C){if(void 0===this._lazyPt[C]){const T=this._elements[C];if(void 0===T)return;const Y=this._hasZ,S=this._hasM;let O=null;O=Y&&!S?new v(T[0],T[1],T[2],void 0,this._spRef):S&&!Y?new v(T[0],T[1],void 0,T[2],this._spRef):Y&&S?new v(T[0],T[1],T[2],T[3],this._spRef):new v(T[0],T[1],this._spRef);O.cache._arcadeCacheId=this._cacheId.toString()+
"-"+this._partId.toString()+"-"+C.toString();this._lazyPt[C]=O}return this._lazyPt[C]};w.equalityTest=function(C){return C===this?!0:null===C||!1===C instanceof E?!1:C.getUniqueHash()===this.getUniqueHash()};w.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return E}(p)})},"esri/chunks/datetime":function(){define(["exports"],function(h){function p(a){return"undefined"===typeof a}function v(a){return"number"===typeof a}function A(a){return"number"===typeof a&&
0===a%1}function E(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(a){return!1}}function w(a,b,d){if(0!==a.length)return a.reduce((g,l)=>{l=[b(l),l];return g?d(g[0],l[0])===g[0]?g:l:l},null)[1]}function C(a,b){return b.reduce((d,g)=>{d[g]=a[g];return d},{})}function T(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function Y(a,b,d){return A(a)&&a>=b&&a<=d}function S(a,b=2){return 0>a?"-"+(""+-a).padStart(b,"0"):(""+a).padStart(b,"0")}function O(a){if(!p(a)&&null!==a&&
""!==a)return parseInt(a,10)}function m(a){if(!p(a)&&null!==a&&""!==a)return parseFloat(a)}function f(a){if(!p(a)&&null!==a&&""!==a)return a=1E3*parseFloat("0."+a),Math.floor(a)}function q(a,b,d=!1){b=10**b;return(d?Math.trunc:Math.round)(a*b)/b}function B(a){return 0===a%4&&(0!==a%100||0===a%400)}function K(a,b){var d=b-1;d=d-12*Math.floor(d/12)+1;return 2===d?B(a+(b-d)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][d-1]}function D(a){let b=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,
a.millisecond);100>a.year&&0<=a.year&&(b=new Date(b),b.setUTCFullYear(b.getUTCFullYear()-1900));return+b}function H(a){var b=a-1;b=(b+Math.floor(b/4)-Math.floor(b/100)+Math.floor(b/400))%7;return 4===(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7||3===b?53:52}function Q(a){return 99<a?a:60<a?1900+a:2E3+a}function P(a,b,d,g=null){a=new Date(a);const l={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};g&&(l.timeZone=g);return(b=(new Intl.DateTimeFormat(d,
{timeZoneName:b,...l})).formatToParts(a).find(u=>"timezonename"===u.type.toLowerCase()))?b.value:null}function L(a,b){a=parseInt(a,10);Number.isNaN(a)&&(a=0);b=parseInt(b,10)||0;b=0>a||Object.is(a,-0)?-b:b;return 60*a+b}function V(a){const b=Number(a);if("boolean"===typeof a||""===a||Number.isNaN(b))throw new Pa(`Invalid unit value ${a}`);return b}function n(a,b){const d={};for(const g in a)if(T(a,g)){const l=a[g];void 0!==l&&null!==l&&(d[b(g)]=V(l))}return d}function e(a,b){const d=Math.trunc(Math.abs(a/
60)),g=Math.trunc(Math.abs(a%60));a=0<=a?"+":"-";switch(b){case "short":return`${a}${S(d,2)}:${S(g,2)}`;case "narrow":return`${a}${d}${0<g?`:${g}`:""}`;case "techie":return`${a}${S(d,2)}${S(g,2)}`;default:throw new RangeError(`Value format ${b} is out of range for property format`);}}function r(a){return C(a,["hour","minute","second","millisecond"])}function z(a){switch(a){case "narrow":return[...Gc];case "short":return[...Tb];case "long":return[...Hc];case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");
case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function J(a){switch(a){case "narrow":return[...Ic];case "short":return[...Ub];case "long":return[...Vb];case "numeric":return"1234567".split("");default:return null}}function M(a){switch(a){case "narrow":return[...Jc];case "short":return[...Kc];case "long":return[...Lc];default:return null}}function N(a,b,d="always",g=!1){const l={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week",
"wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var u=-1===["hours","minutes","seconds"].indexOf(a);if("auto"===d&&u)switch(d="days"===a,b){case 1:return d?"tomorrow":`next ${l[a][0]}`;case -1:return d?"yesterday":`last ${l[a][0]}`;case 0:return d?"today":`this ${l[a][0]}`}d=Object.is(b,-0)||0>b;b=Math.abs(b);u=1===b;const U=l[a];a=g?u?U[1]:U[2]||U[1]:u?l[a][0]:a;return d?`${b} ${a} ago`:`in ${b} ${a}`}function x(a,b){let d="";for(const g of a)d=
g.literal?d+g.val:d+b(g.val);return d}function y(a,b){if(p(a)||null===a)return b;if(a instanceof rb)return a;if("string"===typeof a){const d=a.toLowerCase();return"local"===d||"system"===d?b:"utc"===d||"gmt"===d?Ma.utcInstance:Ma.parseSpecifier(d)||$a.create(a)}return v(a)?Ma.instance(a):"object"===typeof a&&a.offset&&"number"===typeof a.offset?a:new Mc(a)}function t(a,b={}){const d=JSON.stringify([a,b]);let g=Wb[d];g||(g=new Intl.ListFormat(a,b),Wb[d]=g);return g}function I(a,b={}){const d=JSON.stringify([a,
b]);let g=Gb[d];g||(g=new Intl.DateTimeFormat(a,b),Gb[d]=g);return g}function W(a,b={}){const d=JSON.stringify([a,b]);let g=Hb[d];g||(g=new Intl.NumberFormat(a,b),Hb[d]=g);return g}function aa(a,b={}){const {base:d,...g}=b,l=JSON.stringify([a,g]);let u=Ib[l];u||(u=new Intl.RelativeTimeFormat(a,b),Ib[l]=u);return u}function fa(a){const b=[];for(let d=1;12>=d;d++){const g=ma.utc(2016,d,1);b.push(a(g))}return b}function ja(a){const b=[];for(let d=1;7>=d;d++){const g=ma.utc(2016,11,13+d);b.push(a(g))}return b}
function na(a,b,d,g,l){a=a.listingMode(d);return"error"===a?null:"en"===a?g(b):l(b)}function ia(...a){a=a.reduce((b,d)=>b+d.source,"");return RegExp(`^${a}$`)}function pa(...a){return b=>a.reduce(([d,g,l],u)=>{const [U,Z,ha]=u(b,l);return[{...d,...U},g||Z,ha]},[{},null,1]).slice(0,2)}function za(a,...b){if(null==a)return[null,null];for(const [d,g]of b)if(b=d.exec(a))return g(b);return[null,null]}function sa(...a){return(b,d)=>{const g={};let l;for(l=0;l<a.length;l++)g[a[l]]=O(b[d+l]);return[g,null,
d+l]}}function Ca(a,b,d){a=a[b];return p(a)?d:O(a)}function Na(a,b){return[{year:Ca(a,b),month:Ca(a,b+1,1),day:Ca(a,b+2,1)},null,b+3]}function Fa(a,b){return[{hours:Ca(a,b,0),minutes:Ca(a,b+1,0),seconds:Ca(a,b+2,0),milliseconds:f(a[b+3])},null,b+4]}function ua(a,b){const d=!a[b]&&!a[b+1];a=L(a[b+1],a[b+2]);return[{},d?null:Ma.instance(a),b+3]}function Wa(a,b){return[{},a[b]?$a.create(a[b]):null,b+1]}function G(a){const [b,d,g,l,u,U,Z,ha,va]=a,la="-"===b[0];a=ha&&"-"===ha[0];const ra=(wa,Ua=!1)=>void 0!==
wa&&(Ua||wa&&la)?-wa:wa;return[{years:ra(m(d)),months:ra(m(g)),weeks:ra(m(l)),days:ra(m(u)),hours:ra(m(U)),minutes:ra(m(Z)),seconds:ra(m(ha),"-0"===ha),milliseconds:ra(f(va),a)}]}function R(a,b,d,g,l,u,U){b={year:2===b.length?Q(O(b)):O(b),month:Tb.indexOf(d)+1,day:O(g),hour:O(l),minute:O(u)};U&&(b.second=O(U));a&&(b.weekday=3<a.length?Vb.indexOf(a)+1:Ub.indexOf(a)+1);return b}function X(a){const [,b,d,g,l,u,U,Z,ha,va,la,ra]=a;a=R(b,l,g,d,u,U,Z);let wa;wa=ha?Nc[ha]:va?0:L(la,ra);return[a,new Ma(wa)]}
function ea(a){const [,b,d,g,l,u,U,Z]=a;return[R(b,l,g,d,u,U,Z),Ma.utcInstance]}function da(a){const [,b,d,g,l,u,U,Z]=a;return[R(b,Z,d,g,l,u,U),Ma.utcInstance]}function ka(a,b,d=!1){a={values:d?b.values:{...a.values,...b.values||{}},loc:a.loc.clone(b.loc),conversionAccuracy:b.conversionAccuracy||a.conversionAccuracy};return new ta(a)}function ya(a,b,d,g,l){a=a[l][d];var u=b[d]/a;u=Math.sign(u)!==Math.sign(g[l])&&0!==g[l]&&1>=Math.abs(u)?0>u?Math.floor(u):Math.ceil(u):Math.trunc(u);g[l]+=u;b[d]-=u*
a}function Da(a,b){Oc.reduce((d,g)=>{if(p(b[g]))return d;d&&ya(a,b,d,b,g);return g},null)}function Sa(a,b){a=b.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(ta.fromMillis(a).as("days"))}function Va(a,b,d){var g=[["years",(Z,ha)=>ha.year-Z.year],["quarters",(Z,ha)=>ha.quarter-Z.quarter],["months",(Z,ha)=>ha.month-Z.month+12*(ha.year-Z.year)],["weeks",(Z,ha)=>{Z=Sa(Z,ha);return(Z-Z%7)/7}],["days",Sa]];const l={};let u,U;
for(const [Z,ha]of g)0<=d.indexOf(Z)&&(u=Z,g=ha(a,b),U=a.plus({[Z]:g}),U>b?(a=a.plus({[Z]:g-1}),--g):a=U,l[Z]=g);return[a,l,U,u]}function wb(a,b,d,g){let [l,u,U,Z]=Va(a,b,d);a=b-l;d=d.filter(ha=>0<=["hours","minutes","seconds","milliseconds"].indexOf(ha));0===d.length&&(U<b&&(U=l.plus({[Z]:1})),U!==l&&(u[Z]=(u[Z]||0)+a/(U-l)));b=ta.fromObject(u,g);return 0<d.length?ta.fromMillis(a,g).shiftTo(...d).plus(b):b}function Ha({numberingSystem:a},b=""){return new RegExp(`${Jb[a||"latn"]}${b}`)}function qa(a,
b=d=>d){return{regex:a,deser:([d])=>{{let g=parseInt(d,10);if(isNaN(g)){g="";for(let l=0;l<d.length;l++){const u=d.charCodeAt(l);if(-1!==d[l].search(Jb.hanidec))g+=Pc.indexOf(d[l]);else for(const U in Xb){const [Z,ha]=Xb[U];u>=Z&&u<=ha&&(g+=u-Z)}}d=parseInt(g,10)}else d=g}return b(d)}}}function xb(a){return a.replace(/\./g,"\\.?").replace(Kb,Yb)}function La(a,b){return null===a?null:{regex:RegExp(a.map(xb).join("|")),deser:([d])=>a.findIndex(g=>d.replace(/\./g,"").replace(Kb," ").toLowerCase()===
g.replace(/\./g,"").replace(Kb," ").toLowerCase())+b}}function mb(a,b){return{regex:a,deser:([,d,g])=>L(d,g),groups:b}}function ib(a){return{regex:a,deser:([b])=>b}}function yb(a,b){const d=Ha(b),g=Ha(b,"{2}"),l=Ha(b,"{3}"),u=Ha(b,"{4}"),U=Ha(b,"{6}"),Z=Ha(b,"{1,2}"),ha=Ha(b,"{1,3}"),va=Ha(b,"{1,6}"),la=Ha(b,"{1,9}"),ra=Ha(b,"{2,4}"),wa=Ha(b,"{4,6}"),Ua=sb=>({regex:RegExp(sb.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([Qc])=>Qc,literal:!0}),kb=(sb=>{if(a.literal)return Ua(sb);switch(sb.val){case "G":return La(b.eras("short",
!1),0);case "GG":return La(b.eras("long",!1),0);case "y":return qa(va);case "yy":return qa(ra,Q);case "yyyy":return qa(u);case "yyyyy":return qa(wa);case "yyyyyy":return qa(U);case "M":return qa(Z);case "MM":return qa(g);case "MMM":return La(b.months("short",!0,!1),1);case "MMMM":return La(b.months("long",!0,!1),1);case "L":return qa(Z);case "LL":return qa(g);case "LLL":return La(b.months("short",!1,!1),1);case "LLLL":return La(b.months("long",!1,!1),1);case "d":return qa(Z);case "dd":return qa(g);
case "o":return qa(ha);case "ooo":return qa(l);case "HH":return qa(g);case "H":return qa(Z);case "hh":return qa(g);case "h":return qa(Z);case "mm":return qa(g);case "m":return qa(Z);case "q":return qa(Z);case "qq":return qa(g);case "s":return qa(Z);case "ss":return qa(g);case "S":return qa(ha);case "SSS":return qa(l);case "u":return ib(la);case "uu":return ib(Z);case "uuu":return qa(d);case "a":return La(b.meridiems(),0);case "kkkk":return qa(u);case "kk":return qa(ra,Q);case "W":return qa(Z);case "WW":return qa(g);
case "E":case "c":return qa(d);case "EEE":return La(b.weekdays("short",!1,!1),1);case "EEEE":return La(b.weekdays("long",!1,!1),1);case "ccc":return La(b.weekdays("short",!0,!1),1);case "cccc":return La(b.weekdays("long",!0,!1),1);case "Z":case "ZZ":return mb(new RegExp(`([+-]${Z.source})(?::(${g.source}))?`),2);case "ZZZ":return mb(new RegExp(`([+-]${Z.source})(${g.source})?`),2);case "z":return ib(/[a-z_+-/]{1,256}?/i);default:return Ua(sb)}})(a)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};
kb.token=a;return kb}function Za(a){return[`^${a.map(b=>b.regex).reduce((b,d)=>`${b}(${d.source})`,"")}$`,a]}function Fb(a,b,d){if(a=a.match(b)){b={};let g=1;for(const l in d)if(T(d,l)){const u=d[l],U=u.groups?u.groups+1:1;!u.literal&&u.token&&(b[u.token.val[0]]=u.deser(a.slice(g,g+U)));g+=U}return[a,b]}return[a,{}]}function nb(a){const b=l=>{switch(l){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";
case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}};let d=null,g;p(a.z)||(d=$a.create(a.z));p(a.Z)||(d||(d=new Ma(a.Z)),g=a.Z);p(a.q)||(a.M=3*(a.q-1)+1);p(a.h)||(12>a.h&&1===a.a?a.h+=12:12===a.h&&0===a.a&&(a.h=0));0===a.G&&a.y&&(a.y=-a.y);p(a.u)||(a.S=f(a.u));return[Object.keys(a).reduce((l,u)=>{const U=b(u);U&&(l[U]=a[u]);return l},{}),d,g]}function zb(){Lb||(Lb=
ma.fromMillis(1555555555555));return Lb}function Ab(a,b){if(a.literal)return a;const d=Oa.macroTokenToFormatOpts(a.val);if(!d)return a;b=Oa.create(b,d).formatDateTimeParts(zb()).map(g=>{{const {type:u,value:U}=g;if("literal"===u)g={literal:!0,val:U};else{g=d[u];var l=Rc[u];"object"===typeof l&&(l=l[g]);g=l?{literal:!1,val:l}:void 0}}return g});return b.includes(void 0)?a:b}function Bb(a,b){return Array.prototype.concat(...a.map(d=>Ab(d,b)))}function ob(a,b,d){d=Bb(Oa.parseFormat(d),a);var g=d.map(u=>
yb(u,a));const l=g.find(u=>u.invalidReason);if(l)return{input:b,tokens:d,invalidReason:l.invalidReason};{const [u,U]=Za(g);g=RegExp(u,"i");const [Z,ha]=Fb(b,g,U),[va,la,ra]=ha?nb(ha):[null,null,void 0];if(T(ha,"a")&&T(ha,"H"))throw new tb("Can't include meridiem when specifying 24-hour format");return{input:b,tokens:d,regex:g,rawMatches:Z,matches:ha,result:va,zone:la,specificOffset:ra}}}function Ka(a,b){return new Ra("unit out of range",`you specified ${b} (of type ${typeof b}) as a ${a}, which is invalid`)}
function db(a,b,d){a=(new Date(Date.UTC(a,b-1,d))).getUTCDay();return 0===a?7:a}function eb(a,b){a=B(a)?Mb:Nb;const d=a.findIndex(g=>g<b);return{month:d+1,day:b-a[d]}}function Xa(a){const {year:b,month:d,day:g}=a;var l=g+(B(b)?Mb:Nb)[d-1];const u=db(b,d,g);l=Math.floor((l-u+10)/7);let U;1>l?(U=b-1,l=H(U)):l>H(b)?(U=b+1,l=1):U=b;return{weekYear:U,weekNumber:l,weekday:u,...r(a)}}function bb(a){const {weekYear:b,weekNumber:d,weekday:g}=a;var l=db(b,1,4),u=B(b)?366:365;l=7*d+g-l-3;1>l?(u=b-1,l+=B(u)?
366:365):l>u?(u=b+1,l-=B(b)?366:365):u=b;const {month:U,day:Z}=eb(u,l);return{year:u,month:U,day:Z,...r(a)}}function jb(a){const {year:b,month:d,day:g}=a;var l=g+(B(b)?Mb:Nb)[d-1];return{year:b,ordinal:l,...r(a)}}function pb(a){const {year:b,ordinal:d}=a,{month:g,day:l}=eb(b,d);return{year:b,month:g,day:l,...r(a)}}function Ia(a){const b=A(a.year),d=Y(a.month,1,12),g=Y(a.day,1,K(a.year,a.month));return b?d?g?!1:Ka("day",a.day):Ka("month",a.month):Ka("year",a.year)}function qb(a){const {hour:b,minute:d,
second:g,millisecond:l}=a;a=Y(b,0,23)||24===b&&0===d&&0===g&&0===l;const u=Y(d,0,59),U=Y(g,0,59),Z=Y(l,0,999);return a?u?U?Z?!1:Ka("millisecond",l):Ka("second",g):Ka("minute",d):Ka("hour",b)}function fb(a){return new Ra("unsupported zone",`the zone "${a.name}" is not supported`)}function cb(a){null===a.weekData&&(a.weekData=Xa(a.c));return a.weekData}function gb(a,b){a={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new ma({...a,...b,old:a})}function c(a,b,d){let g=a-6E4*b;const l=
d.offset(g);if(b===l)return[g,b];g-=6E4*(l-b);b=d.offset(g);return l===b?[g,l]:[a-6E4*Math.min(l,b),Math.max(l,b)]}function k(a,b){a=new Date(a+6E4*b);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function F(a,b,d){return c(D(a),b,d)}function ca(a,b){const d=a.o;var g=a.c.year+Math.trunc(b.years);const l=a.c.month+Math.trunc(b.months)+3*Math.trunc(b.quarters);g={...a.c,
year:g,month:l,day:Math.min(a.c.day,K(g,l))+Math.trunc(b.days)+7*Math.trunc(b.weeks)};b=ta.fromObject({years:b.years-Math.trunc(b.years),quarters:b.quarters-Math.trunc(b.quarters),months:b.months-Math.trunc(b.months),weeks:b.weeks-Math.trunc(b.weeks),days:b.days-Math.trunc(b.days),hours:b.hours,minutes:b.minutes,seconds:b.seconds,milliseconds:b.milliseconds}).as("milliseconds");g=D(g);let [u,U]=c(g,d,a.zone);0!==b&&(u+=b,U=a.zone.offset(u));return{ts:u,o:U}}function ba(a,b,d,g,l,u){const {setZone:U,
zone:Z}=d;return a&&0!==Object.keys(a).length?(a=ma.fromObject(a,{...d,zone:b||Z,specificOffset:u}),U?a:a.setZone(Z)):ma.invalid(new Ra("unparsable",`the input "${l}" can't be parsed as ${g}`))}function oa(a,b,d=!0){return a.isValid?Oa.create(Aa.create("en-US"),{allowZ:d,forceSimple:!0}).formatDateTimeFromString(a,b):null}function xa(a,b){const d=9999<a.c.year||0>a.c.year;let g="";d&&0<=a.c.year&&(g+="+");g+=S(a.c.year,d?6:4);b?(g=g+"-"+S(a.c.month),g=g+"-"+S(a.c.day)):(g+=S(a.c.month),g+=S(a.c.day));
return g}function Ja(a,b,d,g,l){let u=S(a.c.hour);b?(u=u+":"+S(a.c.minute),0===a.c.second&&d||(u+=":")):u+=S(a.c.minute);0===a.c.second&&d||(u+=S(a.c.second),0===a.c.millisecond&&g||(u=u+"."+S(a.c.millisecond,3)));l&&(a.isOffsetFixed&&0===a.offset?u+="Z":0>a.o?(u=u+"-"+S(Math.trunc(-a.o/60)),u=u+":"+S(Math.trunc(-a.o%60))):(u=u+"+"+S(Math.trunc(a.o/60)),u=u+":"+S(Math.trunc(a.o%60))));return u}function Ga(a){const b={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",
hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!b)throw new Zb(a);return b}function Qa(a,b){const d=y(b.zone,Ea.defaultZone);b=Aa.fromObject(b);const g=Ea.now();var l;if(p(a.year))a=g;else{for(const u of $b)p(a[u])&&
(a[u]=ac[u]);if(l=Ia(a)||qb(a))return ma.invalid(l);l=d.offset(g);[a,l]=F(a,l,d)}return new ma({ts:a,zone:d,loc:b,o:l})}function vb(a,b,d){const g=p(d.round)?!0:d.round,l=(U,Z)=>{U=q(U,g||d.calendary?0:2,!0);return b.loc.clone(d).relFormatter(d).format(U,Z)},u=U=>d.calendary?b.hasSame(a,U)?0:b.startOf(U).diff(a.startOf(U),U).get(U):b.diff(a,U).get(U);if(d.unit)return l(u(d.unit),d.unit);for(const U of d.units){const Z=u(U);if(1<=Math.abs(Z))return l(Z,U)}return l(a>b?-0:0,d.units[d.units.length-1])}
function lb(a){let b={};0<a.length&&"object"===typeof a[a.length-1]?(b=a[a.length-1],a=Array.from(a).slice(0,a.length-1)):a=Array.from(a);return[b,a]}function Ya(a){if(ma.isDateTime(a))return a;if(a&&a.valueOf&&v(a.valueOf()))return ma.fromJSDate(a);if(a&&"object"===typeof a)return ma.fromObject(a);throw new Pa(`Unknown datetime argument: ${a}, of type ${typeof a}`);}class Ta extends Error{}class Sc extends Ta{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}class Tc extends Ta{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}
class Uc extends Ta{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}class tb extends Ta{}class Zb extends Ta{constructor(a){super(`Invalid unit ${a}`)}}class Pa extends Ta{}class ab extends Ta{constructor(){super("Zone is an abstract class")}}const Ob={year:"numeric",month:"numeric",day:"numeric"},bc={year:"numeric",month:"short",day:"numeric"},Vc={year:"numeric",month:"short",day:"numeric",weekday:"short"},cc={year:"numeric",month:"long",day:"numeric"},dc={year:"numeric",month:"long",
day:"numeric",weekday:"long"},ec={hour:"numeric",minute:"numeric"},fc={hour:"numeric",minute:"numeric",second:"numeric"},gc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},hc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},ic={hour:"numeric",minute:"numeric",hourCycle:"h23"},jc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},kc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},lc={hour:"numeric",
minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},mc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},nc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},oc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},pc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},Wc={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",
minute:"numeric"},qc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},rc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},sc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},tc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},Hc="January February March April May June July August September October November December".split(" "),
Tb="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Gc="JFMAMJJASOND".split(""),Vb="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Ub="Mon Tue Wed Thu Fri Sat Sun".split(" "),Ic="MTWTFSS".split(""),uc=["AM","PM"],Lc=["Before Christ","Anno Domini"],Kc=["BC","AD"],Jc=["B","A"],Xc={D:Ob,DD:bc,DDD:cc,DDDD:dc,t:ec,tt:fc,ttt:gc,tttt:hc,T:ic,TT:jc,TTT:kc,TTTT:lc,f:mc,ff:oc,fff:qc,ffff:sc,F:nc,FF:pc,FFF:rc,FFFF:tc};class Oa{static create(a,b={}){return new Oa(a,b)}static parseFormat(a){let b=
null,d="",g=!1;const l=[];for(let u=0;u<a.length;u++){const U=a.charAt(u);"'"===U?(0<d.length&&l.push({literal:g,val:d}),b=null,d="",g=!g):g?d+=U:U===b?d+=U:(0<d.length&&l.push({literal:!1,val:d}),b=d=U)}0<d.length&&l.push({literal:g,val:d});return l}static macroTokenToFormatOpts(a){return Xc[a]}constructor(a,b){this.opts=b;this.loc=a;this.systemLoc=null}formatWithSystemDefault(a,b){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(a,{...this.opts,
...b}).format()}formatDateTime(a,b={}){return this.loc.dtFormatter(a,{...this.opts,...b}).format()}formatDateTimeParts(a,b={}){return this.loc.dtFormatter(a,{...this.opts,...b}).formatToParts()}resolvedOptions(a,b={}){return this.loc.dtFormatter(a,{...this.opts,...b}).resolvedOptions()}num(a,b=0){if(this.opts.forceSimple)return S(a,b);const d={...this.opts};0<b&&(d.padTo=b);return this.loc.numberFormatter(d).format(a)}formatDateTimeFromString(a,b){const d="en"===this.loc.listingMode(),g=this.loc.outputCalendar&&
"gregory"!==this.loc.outputCalendar,l=(la,ra)=>this.loc.extract(a,la,ra),u=la=>a.isOffsetFixed&&0===a.offset&&la.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,la.format):"",U=(la,ra)=>d?z(la)[a.month-1]:l(ra?{month:la}:{month:la,day:"numeric"},"month"),Z=(la,ra)=>d?J(la)[a.weekday-1]:l(ra?{weekday:la}:{weekday:la,month:"long",day:"numeric"},"weekday"),ha=la=>{const ra=Oa.macroTokenToFormatOpts(la);return ra?this.formatWithSystemDefault(a,ra):la},va=la=>d?M(la)[0>a.year?0:1]:l({era:la},"era");return x(Oa.parseFormat(b),
la=>{switch(la){case "S":return this.num(a.millisecond);case "u":case "SSS":return this.num(a.millisecond,3);case "s":return this.num(a.second);case "ss":return this.num(a.second,2);case "uu":return this.num(Math.floor(a.millisecond/10),2);case "uuu":return this.num(Math.floor(a.millisecond/100));case "m":return this.num(a.minute);case "mm":return this.num(a.minute,2);case "h":return this.num(0===a.hour%12?12:a.hour%12);case "hh":return this.num(0===a.hour%12?12:a.hour%12,2);case "H":return this.num(a.hour);
case "HH":return this.num(a.hour,2);case "Z":return u({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return u({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return u({format:"techie",allowZ:this.opts.allowZ});case "ZZZZ":return a.zone.offsetName(a.ts,{format:"short",locale:this.loc.locale});case "ZZZZZ":return a.zone.offsetName(a.ts,{format:"long",locale:this.loc.locale});case "z":return a.zoneName;case "a":return d?uc[12>a.hour?0:1]:l({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return g?
l({day:"numeric"},"day"):this.num(a.day);case "dd":return g?l({day:"2-digit"},"day"):this.num(a.day,2);case "c":return this.num(a.weekday);case "ccc":return Z("short",!0);case "cccc":return Z("long",!0);case "ccccc":return Z("narrow",!0);case "E":return this.num(a.weekday);case "EEE":return Z("short",!1);case "EEEE":return Z("long",!1);case "EEEEE":return Z("narrow",!1);case "L":return g?l({month:"numeric",day:"numeric"},"month"):this.num(a.month);case "LL":return g?l({month:"2-digit",day:"numeric"},
"month"):this.num(a.month,2);case "LLL":return U("short",!0);case "LLLL":return U("long",!0);case "LLLLL":return U("narrow",!0);case "M":return g?l({month:"numeric"},"month"):this.num(a.month);case "MM":return g?l({month:"2-digit"},"month"):this.num(a.month,2);case "MMM":return U("short",!1);case "MMMM":return U("long",!1);case "MMMMM":return U("narrow",!1);case "y":return g?l({year:"numeric"},"year"):this.num(a.year);case "yy":return g?l({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),
2);case "yyyy":return g?l({year:"numeric"},"year"):this.num(a.year,4);case "yyyyyy":return g?l({year:"numeric"},"year"):this.num(a.year,6);case "G":return va("short");case "GG":return va("long");case "GGGGG":return va("narrow");case "kk":return this.num(a.weekYear.toString().slice(-2),2);case "kkkk":return this.num(a.weekYear,4);case "W":return this.num(a.weekNumber);case "WW":return this.num(a.weekNumber,2);case "o":return this.num(a.ordinal);case "ooo":return this.num(a.ordinal,3);case "q":return this.num(a.quarter);
case "qq":return this.num(a.quarter,2);case "X":return this.num(Math.floor(a.ts/1E3));case "x":return this.num(a.ts);default:return ha(la)}})}formatDurationFromString(a,b){const d=l=>{switch(l[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "M":return"month";case "y":return"year";default:return null}};b=Oa.parseFormat(b);const g=b.reduce((l,{literal:u,val:U})=>u?l:l.concat(U),[]);a=a.shiftTo(...g.map(d).filter(l=>l));
return x(b,(l=>u=>{const U=d(u);return U?this.num(l.get(U),u.length):u})(a))}}class Ra{constructor(a,b){this.reason=a;this.explanation=b}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}class rb{get type(){throw new ab;}get name(){throw new ab;}get isUniversal(){throw new ab;}offsetName(a,b){throw new ab;}formatOffset(a,b){throw new ab;}offset(a){throw new ab;}equals(a){throw new ab;}get isValid(){throw new ab;}}let Pb=null;class vc extends rb{static get instance(){null===
Pb&&(Pb=new vc);return Pb}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,{format:b,locale:d}){return P(a,b,d)}formatOffset(a,b){return e(this.offset(a),b)}offset(a){return-(new Date(a)).getTimezoneOffset()}equals(a){return"system"===a.type}get isValid(){return!0}}let Cb={};const Yc={year:0,month:1,day:2,hour:3,minute:4,second:5};let Db={};class $a extends rb{static create(a){Db[a]||(Db[a]=new $a(a));return Db[a]}static resetCache(){Db=
{};Cb={}}static isValidSpecifier(a){return this.isValidZone(a)}static isValidZone(a){if(!a)return!1;try{return(new Intl.DateTimeFormat("en-US",{timeZone:a})).format(),!0}catch(b){return!1}}constructor(a){super();this.zoneName=a;this.valid=$a.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,{format:b,locale:d}){return P(a,b,d,this.name)}formatOffset(a,b){return e(this.offset(a),b)}offset(a){a=new Date(a);if(isNaN(a))return NaN;var b=this.name;
Cb[b]||(Cb[b]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:b,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}));b=Cb[b];if(b.formatToParts){b=b.formatToParts(a);var d=[];for(let va=0;va<b.length;va++){const {type:la,value:ra}=b[va],wa=Yc[la];p(wa)||(d[wa]=parseInt(ra,10))}b=d}else{{b=b.format(a).replace(/\u200E/g,"");b=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(b);const [,va,la,ra,wa,Ua,kb]=b;b=[ra,va,la,wa,Ua,kb]}}const [g,l,u,U,Z,ha]=b;b=
D({year:g,month:l,day:u,hour:24===U?0:U,minute:Z,second:ha,millisecond:0});a=+a;d=a%1E3;return(b-(a-(0<=d?d:1E3+d)))/6E4}equals(a){return"iana"===a.type&&a.name===this.name}get isValid(){return this.valid}}let Qb=null;class Ma extends rb{static get utcInstance(){null===Qb&&(Qb=new Ma(0));return Qb}static instance(a){return 0===a?Ma.utcInstance:new Ma(a)}static parseSpecifier(a){return a&&(a=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new Ma(L(a[1],a[2])):null}constructor(a){super();this.fixed=
a}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${e(this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,b){return e(this.fixed,b)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===a.type&&a.fixed===this.fixed}get isValid(){return!0}}class Mc extends rb{constructor(a){super();this.zoneName=a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}
let wc=()=>Date.now(),xc="system",yc=null,zc=null,Ac=null,Bc;class Ea{static get now(){return wc}static set now(a){wc=a}static set defaultZone(a){xc=a}static get defaultZone(){return y(xc,vc.instance)}static get defaultLocale(){return yc}static set defaultLocale(a){yc=a}static get defaultNumberingSystem(){return zc}static set defaultNumberingSystem(a){zc=a}static get defaultOutputCalendar(){return Ac}static set defaultOutputCalendar(a){Ac=a}static get throwOnInvalid(){return Bc}static set throwOnInvalid(a){Bc=
a}static resetCaches(){Aa.resetCache();$a.resetCache()}}let Wb={},Gb={},Hb={},Ib={},Eb=null;class Zc{constructor(a,b,d){this.padTo=d.padTo||0;this.floor=d.floor||!1;const {padTo:g,floor:l,...u}=d;if(!b||0<Object.keys(u).length)b={useGrouping:!1,...d},0<d.padTo&&(b.minimumIntegerDigits=d.padTo),this.inf=W(a,b)}format(a){if(this.inf)return this.inf.format(this.floor?Math.floor(a):a);a=this.floor?Math.floor(a):q(a,3);return S(a,this.padTo)}}class $c{constructor(a,b,d){this.opts=d;if(a.zone.isUniversal){var g=
a.offset/60*-1;g=0<=g?`Etc/GMT+${g}`:`Etc/GMT${g}`;0!==a.offset&&$a.create(g).valid?this.dt=a:(g="UTC",this.dt=d.timeZoneName?a:0===a.offset?a:ma.fromMillis(a.ts+6E4*a.offset))}else"system"===a.zone.type?this.dt=a:(this.dt=a,g=a.zone.name);a={...this.opts};g&&(a.timeZone=g);this.dtf=I(b,a)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class ad{constructor(a,b,d){this.opts={style:"long",
...d};!b&&E()&&(this.rtf=aa(a,d))}format(a,b){return this.rtf?this.rtf.format(a,b):N(b,a,this.opts.numeric,"long"!==this.opts.style)}formatToParts(a,b){return this.rtf?this.rtf.formatToParts(a,b):[]}}class Aa{static fromOpts(a){return Aa.create(a.locale,a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,b,d,g=!1){a=a||Ea.defaultLocale;var l;(l=a)||(g?g="en-US":(Eb||(Eb=(new Intl.DateTimeFormat).resolvedOptions().locale),g=Eb),l=g);return new Aa(l,b||Ea.defaultNumberingSystem,d||Ea.defaultOutputCalendar,
a)}static resetCache(){Eb=null;Gb={};Hb={};Ib={}}static fromObject({locale:a,numberingSystem:b,outputCalendar:d}={}){return Aa.create(a,b,d)}constructor(a,b,d,g){var l=a.indexOf("-u-");if(-1===l)a=[a];else{let ha;l=a.substring(0,l);try{ha=I(a).resolvedOptions()}catch(ra){ha=I(l).resolvedOptions()}const {numberingSystem:va,calendar:la}=ha;a=[l,va,la]}const [u,U,Z]=a;this.locale=u;this.numberingSystem=b||U||null;this.outputCalendar=d||Z||null;b=this.locale;d=this.numberingSystem;if((a=this.outputCalendar)||
d)b+="-u",a&&(b+=`-ca-${a}`),d&&(b+=`-nu-${d}`);this.intl=b;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=g;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var a=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;
this.fastNumbersCached=a}return this.fastNumbersCached}listingMode(){const a=this.isEnglish(),b=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return a&&b?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?Aa.create(a.locale||this.specifiedLocale,a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a=
{}){return this.clone({...a,defaultToEN:!1})}months(a,b=!1,d=!0){return na(this,a,d,z,()=>{const g=b?{month:a,day:"numeric"}:{month:a},l=b?"format":"standalone";this.monthsCache[l][a]||(this.monthsCache[l][a]=fa(u=>this.extract(u,g,"month")));return this.monthsCache[l][a]})}weekdays(a,b=!1,d=!0){return na(this,a,d,J,()=>{const g=b?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},l=b?"format":"standalone";this.weekdaysCache[l][a]||(this.weekdaysCache[l][a]=ja(u=>this.extract(u,g,"weekday")));
return this.weekdaysCache[l][a]})}meridiems(a=!0){return na(this,void 0,a,()=>uc,()=>{if(!this.meridiemCache){const b={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[ma.utc(2016,11,13,9),ma.utc(2016,11,13,19)].map(d=>this.extract(d,b,"dayperiod"))}return this.meridiemCache})}eras(a,b=!0){return na(this,a,b,M,()=>{const d={era:a};this.eraCache[a]||(this.eraCache[a]=[ma.utc(-40,1,1),ma.utc(2017,1,1)].map(g=>this.extract(g,d,"era")));return this.eraCache[a]})}extract(a,b,d){return(a=this.dtFormatter(a,
b).formatToParts().find(g=>g.type.toLowerCase()===d))?a.value:null}numberFormatter(a={}){return new Zc(this.intl,a.forceSimple||this.fastNumbers,a)}dtFormatter(a,b={}){return new $c(a,this.intl,b)}relFormatter(a={}){return new ad(this.intl,this.isEnglish(),a)}listFormatter(a={}){return t(this.intl,a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===a.locale&&this.numberingSystem===
a.numberingSystem&&this.outputCalendar===a.outputCalendar}}const Cc=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Rb=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Dc=RegExp(`${Rb.source}${Cc.source}?`),Sb=RegExp(`(?:T${Dc.source})?`),bd=sa("weekYear","weekNumber","weekDay"),cd=sa("year","ordinal"),Ec=RegExp(`${Rb.source} ?(?:${Cc.source}|(${/[A-Za-z_+-]{1,256}(:?\/[A-Za-z0-9_+-]{1,256}(\/[A-Za-z0-9_+-]{1,256})?)?/.source}))?`),dd=RegExp(`(?: ${Ec.source})?`),ed=RegExp(`^T?${Rb.source}$`),fd=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/,
Nc={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},gd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,hd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,id=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
jd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,kd=ia(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Sb),ld=ia(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Sb),md=ia(/(\d{4})-?(\d{3})/,Sb),nd=ia(Dc),od=pa(Na,Fa,ua),pd=pa(bd,Fa,ua),qd=pa(cd,Fa,ua),rd=pa(Fa,ua),sd=pa(Fa),td=ia(/(\d{4})-(\d\d)-(\d\d)/,dd),ud=ia(Ec),vd=pa(Na,Fa,ua,Wa),wd=pa(Fa,ua,Wa),Fc={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,
minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},xd={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,milliseconds:2592E6},...Fc},yd={years:{quarters:4,months:12,weeks:52.1775,
days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...Fc},hb="years quarters months weeks days hours minutes seconds milliseconds".split(" "),Oc=hb.slice(0).reverse();class ta{constructor(a){const b="longterm"===a.conversionAccuracy||
!1;this.values=a.values;this.loc=a.loc||Aa.create();this.conversionAccuracy=b?"longterm":"casual";this.invalid=a.invalid||null;this.matrix=b?yd:xd;this.isLuxonDuration=!0}static fromMillis(a,b){return ta.fromObject({milliseconds:a},b)}static fromObject(a,b={}){if(null==a||"object"!==typeof a)throw new Pa(`Duration.fromObject: argument expected to be an object, got ${null===a?"null":typeof a}`);return new ta({values:n(a,ta.normalizeUnit),loc:Aa.fromObject(b),conversionAccuracy:b.conversionAccuracy})}static fromDurationLike(a){if(v(a))return ta.fromMillis(a);
if(ta.isDuration(a))return a;if("object"===typeof a)return ta.fromObject(a);throw new Pa(`Unknown duration argument ${a} of type ${typeof a}`);}static fromISO(a,b){const [d]=za(a,[fd,G]);return d?ta.fromObject(d,b):ta.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,b){const [d]=za(a,[ed,sd]);return d?ta.fromObject(d,b):ta.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,b=null){if(!a)throw new Pa("need to specify a reason the Duration is invalid");
a=a instanceof Ra?a:new Ra(a,b);if(Ea.throwOnInvalid)throw new Uc(a);return new ta({invalid:a})}static normalizeUnit(a){const b={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a?a.toLowerCase():a];if(!b)throw new Zb(a);return b}static isDuration(a){return a&&
a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(a,b={}){b={...b,floor:!1!==b.round&&!1!==b.floor};return this.isValid?Oa.create(this.loc,b).formatDurationFromString(this,a):"Invalid Duration"}toHuman(a={}){const b=hb.map(d=>{const g=this.values[d];return p(g)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...a,unit:d.slice(0,-1)}).format(g)}).filter(d=>d);return this.loc.listFormatter({type:"conjunction",
style:a.listStyle||"narrow",...a}).format(b)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let a="P";0!==this.years&&(a+=this.years+"Y");if(0!==this.months||0!==this.quarters)a+=this.months+3*this.quarters+"M";0!==this.weeks&&(a+=this.weeks+"W");0!==this.days&&(a+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)a+="T";0!==this.hours&&(a+=this.hours+"H");0!==this.minutes&&(a+=this.minutes+"M");if(0!==this.seconds||
0!==this.milliseconds)a+=q(this.seconds+this.milliseconds/1E3,3)+"S";"P"===a&&(a+="T0S");return a}toISOTime(a={}){if(!this.isValid)return null;var b=this.toMillis();if(0>b||864E5<=b)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...a};b=this.shiftTo("hours","minutes","seconds","milliseconds");let d="basic"===a.format?"hhmm":"hh:mm";a.suppressSeconds&&0===b.seconds&&0===b.milliseconds||(d+="basic"===a.format?"ss":":ss",a.suppressMilliseconds&&0===b.milliseconds||
(d+=".SSS"));b=b.toFormat(d);a.includePrefix&&(b="T"+b);return b}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;a=ta.fromDurationLike(a);const b={};for(const d of hb)if(T(a.values,d)||T(this.values,d))b[d]=a.get(d)+this.get(d);return ka(this,{values:b},!0)}minus(a){if(!this.isValid)return this;a=ta.fromDurationLike(a);return this.plus(a.negate())}mapUnits(a){if(!this.isValid)return this;
const b={};for(const d of Object.keys(this.values))b[d]=V(a(this.values[d],d));return ka(this,{values:b},!0)}get(a){return this[ta.normalizeUnit(a)]}set(a){if(!this.isValid)return this;a={...this.values,...n(a,ta.normalizeUnit)};return ka(this,{values:a})}reconfigure({locale:a,numberingSystem:b,conversionAccuracy:d}={}){a={loc:this.loc.clone({locale:a,numberingSystem:b})};d&&(a.conversionAccuracy=d);return ka(this,a)}as(a){return this.isValid?this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;
const a=this.toObject();Da(this.matrix,a);return ka(this,{values:a},!0)}shiftTo(...a){if(!this.isValid||0===a.length)return this;a=a.map(u=>ta.normalizeUnit(u));const b={},d={},g=this.toObject();let l;for(const u of hb)if(0<=a.indexOf(u)){l=u;let U=0;for(const ha in d)U+=this.matrix[ha][u]*d[ha],d[ha]=0;v(g[u])&&(U+=g[u]);const Z=Math.trunc(U);b[u]=Z;d[u]=(1E3*U-1E3*Z)/1E3;for(const ha in g)hb.indexOf(ha)>hb.indexOf(u)&&ya(this.matrix,g,ha,b,u)}else v(g[u])&&(d[u]=g[u]);for(const u in d)0!==d[u]&&
(b[l]+=u===l?d[u]:d[u]/this.matrix[l][u]);return ka(this,{values:b},!0).normalize()}negate(){if(!this.isValid)return this;const a={};for(const b of Object.keys(this.values))a[b]=0===this.values[b]?0:-this.values[b];return ka(this,{values:a},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?
this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;
for(const g of hb){var b=this.values[g];var d=a.values[g];b=void 0===b||0===b?void 0===d||0===d:b===d;if(!b)return!1}return!0}}class Ba{constructor(a){this.s=a.start;this.e=a.end;this.invalid=a.invalid||null;this.isLuxonInterval=!0}static invalid(a,b=null){if(!a)throw new Pa("need to specify a reason the Interval is invalid");a=a instanceof Ra?a:new Ra(a,b);if(Ea.throwOnInvalid)throw new Tc(a);return new Ba({invalid:a})}static fromDateTimes(a,b){a=Ya(a);b=Ya(b);var d=a&&a.isValid?b&&b.isValid?b<a?
Ba.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${b.toISO()}`):null:Ba.invalid("missing or invalid end"):Ba.invalid("missing or invalid start");return null==d?new Ba({start:a,end:b}):d}static after(a,b){b=ta.fromDurationLike(b);a=Ya(a);return Ba.fromDateTimes(a,a.plus(b))}static before(a,b){b=ta.fromDurationLike(b);a=Ya(a);return Ba.fromDateTimes(a.minus(b),a)}static fromISO(a,b){const [d,g]=(a||"").split("/",2);if(d&&g){let U;
try{var l=ma.fromISO(d,b);U=l.isValid}catch(ha){U=!1}let Z;try{var u=ma.fromISO(g,b);Z=u.isValid}catch(ha){Z=!1}if(U&&Z)return Ba.fromDateTimes(l,u);if(U){if(u=ta.fromISO(g,b),u.isValid)return Ba.after(l,u)}else if(Z&&(l=ta.fromISO(d,b),l.isValid))return Ba.before(u,l)}return Ba.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&a.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===
this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(a="milliseconds"){return this.isValid?this.toDuration(...[a]).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const b=this.start.startOf(a),d=this.end.startOf(a);return Math.floor(d.diff(b,a).get(a))+1}hasSame(a){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,a):!1}isEmpty(){return this.s.valueOf()===
this.e.valueOf()}isAfter(a){return this.isValid?this.s>a:!1}isBefore(a){return this.isValid?this.e<=a:!1}contains(a){return this.isValid?this.s<=a&&this.e>a:!1}set({start:a,end:b}={}){return this.isValid?Ba.fromDateTimes(a||this.s,b||this.e):this}splitAt(...a){if(!this.isValid)return[];a=a.map(Ya).filter(u=>this.contains(u)).sort();const b=[];let {s:d}=this,g=0;for(;d<this.e;){var l=a[g]||this.e;l=+l>+this.e?this.e:l;b.push(Ba.fromDateTimes(d,l));d=l;g+=1}return b}splitBy(a){a=ta.fromDurationLike(a);
if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let {s:b}=this,d=1;const g=[];for(;b<this.e;){var l=this.start.plus(a.mapUnits(u=>u*d));l=+l>+this.e?this.e:l;g.push(Ba.fromDateTimes(b,l));b=l;d+=1}return g}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return this.isValid?+this.e===+a.s:!1}abutsEnd(a){return this.isValid?+a.e===+this.s:!1}engulfs(a){return this.isValid?this.s<=a.s&&this.e>=a.e:
!1}equals(a){return this.isValid&&a.isValid?this.s.equals(a.s)&&this.e.equals(a.e):!1}intersection(a){if(!this.isValid)return this;const b=this.s>a.s?this.s:a.s;a=this.e<a.e?this.e:a.e;return b>=a?null:Ba.fromDateTimes(b,a)}union(a){return this.isValid?Ba.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const [b,d]=a.sort((g,l)=>g.s-l.s).reduce(([g,l],u)=>l?l.overlaps(u)||l.abutsStart(u)?[g,l.union(u)]:[g.concat([l]),u]:[g,u],[[],null]);d&&b.push(d);return b}static xor(a){let b=
null,d=0;const g=[];a=a.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]);a=Array.prototype.concat(...a).sort((l,u)=>l.time-u.time);for(const l of a)d+="s"===l.type?1:-1,1===d?b=l.time:(b&&+b!==+l.time&&g.push(Ba.fromDateTimes(b,l.time)),b=null);return Ba.merge(g)}difference(...a){return Ba.xor([this].concat(a)).map(b=>this.intersection(b)).filter(b=>b&&!b.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toISO(a){return this.isValid?`${this.s.toISO(a)}/${this.e.toISO(a)}`:
"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:"Invalid Interval"}toFormat(a,{separator:b=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(a)}${b}${this.e.toFormat(a)}`:"Invalid Interval"}toDuration(a,b){return this.isValid?this.e.diff(this.s,a,b):ta.invalid(this.invalidReason)}mapEndpoints(a){return Ba.fromDateTimes(a(this.s),a(this.e))}}class ub{static hasDST(a=
Ea.defaultZone){const b=ma.now().setZone(a).set({month:12});return!a.isUniversal&&b.offset!==b.set({month:6}).offset}static isValidIANAZone(a){return $a.isValidZone(a)}static normalizeZone(a){return y(a,Ea.defaultZone)}static months(a="long",{locale:b=null,numberingSystem:d=null,locObj:g=null,outputCalendar:l="gregory"}={}){return(g||Aa.create(b,d,l)).months(a)}static monthsFormat(a="long",{locale:b=null,numberingSystem:d=null,locObj:g=null,outputCalendar:l="gregory"}={}){return(g||Aa.create(b,d,
l)).months(a,!0)}static weekdays(a="long",{locale:b=null,numberingSystem:d=null,locObj:g=null}={}){return(g||Aa.create(b,d,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:b=null,numberingSystem:d=null,locObj:g=null}={}){return(g||Aa.create(b,d,null)).weekdays(a,!0)}static meridiems({locale:a=null}={}){return Aa.create(a).meridiems()}static eras(a="short",{locale:b=null}={}){return Aa.create(b,null,"gregory").eras(a)}static features(){return{relative:E()}}}const Jb={arab:"[\u0660-\u0669]",
arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",
latn:"\\d"},Xb={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Pc=Jb.hanidec.replace(/[\[|\]]/g,"").split(""),Yb=`( |${String.fromCharCode(160)})`,Kb=new RegExp(Yb,"g"),Rc={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M",
"2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};let Lb=null;const Nb=[0,31,59,90,120,151,181,212,243,273,304,334],Mb=[0,31,60,91,121,152,182,213,244,274,305,335],ac={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},zd={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Ad={ordinal:1,hour:0,
minute:0,second:0,millisecond:0},$b="year month day hour minute second millisecond".split(" "),Bd="weekYear weekNumber weekday hour minute second millisecond".split(" "),Cd="year ordinal hour minute second millisecond".split(" ");class ma{constructor(a){const b=a.zone||Ea.defaultZone;let d=a.invalid||(Number.isNaN(a.ts)?new Ra("invalid input"):null)||(b.isValid?null:fb(b));this.ts=p(a.ts)?Ea.now():a.ts;let g=null;var l=null;d||(a.old&&a.old.ts===this.ts&&a.old.zone.equals(b)?[g,l]=[a.old.c,a.old.o]:
(l=b.offset(this.ts),g=k(this.ts,l),g=(d=Number.isNaN(g.year)?new Ra("invalid input"):null)?null:g,l=d?null:l));this._zone=b;this.loc=a.loc||Aa.create();this.invalid=d;this.weekData=null;this.c=g;this.o=l;this.isLuxonDateTime=!0}static now(){return new ma({})}static local(){const [a,b]=lb(arguments),[d,g,l,u,U,Z,ha]=b;return Qa({year:d,month:g,day:l,hour:u,minute:U,second:Z,millisecond:ha},a)}static utc(){const [a,b]=lb(arguments),[d,g,l,u,U,Z,ha]=b;a.zone=Ma.utcInstance;return Qa({year:d,month:g,
day:l,hour:u,minute:U,second:Z,millisecond:ha},a)}static fromJSDate(a,b={}){a="[object Date]"===Object.prototype.toString.call(a)?a.valueOf():NaN;if(Number.isNaN(a))return ma.invalid("invalid input");const d=y(b.zone,Ea.defaultZone);return d.isValid?new ma({ts:a,zone:d,loc:Aa.fromObject(b)}):ma.invalid(fb(d))}static fromMillis(a,b={}){if(v(a))return-864E13>a||864E13<a?ma.invalid("Timestamp out of range"):new ma({ts:a,zone:y(b.zone,Ea.defaultZone),loc:Aa.fromObject(b)});throw new Pa(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`);
}static fromSeconds(a,b={}){if(v(a))return new ma({ts:1E3*a,zone:y(b.zone,Ea.defaultZone),loc:Aa.fromObject(b)});throw new Pa("fromSeconds requires a numerical input");}static fromObject(a,b={}){a=a||{};var d=y(b.zone,Ea.defaultZone);if(!d.isValid)return ma.invalid(fb(d));var g=Ea.now();const l=p(b.specificOffset)?d.offset(g):b.specificOffset,u=n(a,Ga);var U=!p(u.ordinal),Z=!p(u.year),ha=!p(u.month)||!p(u.day);Z=Z||ha;var va=u.weekYear||u.weekNumber;b=Aa.fromObject(b);if((Z||U)&&va)throw new tb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");
if(ha&&U)throw new tb("Can't mix ordinal dates with month/day");ha=va||u.weekday&&!Z;let la=k(g,l);ha?(g=Bd,va=zd,la=Xa(la)):U?(g=Cd,va=Ad,la=jb(la)):(g=$b,va=ac);let ra=!1;for(var wa of g)p(u[wa])?u[wa]=ra?va[wa]:la[wa]:ra=!0;ha?(wa=A(u.weekYear),g=Y(u.weekNumber,1,H(u.weekYear)),va=Y(u.weekday,1,7),wa=wa?g?va?!1:Ka("weekday",u.weekday):Ka("week",u.week):Ka("weekYear",u.weekYear)):U?(wa=A(u.year),g=Y(u.ordinal,1,B(u.year)?366:365),wa=wa?g?!1:Ka("ordinal",u.ordinal):Ka("year",u.year)):wa=Ia(u);if(wa=
wa||qb(u))return ma.invalid(wa);U=ha?bb(u):U?pb(u):u;const [Ua,kb]=F(U,l,d);d=new ma({ts:Ua,zone:d,o:kb,loc:b});return u.weekday&&Z&&a.weekday!==d.weekday?ma.invalid("mismatched weekday",`you can't specify both a weekday of ${u.weekday} and a date of ${d.toISO()}`):d}static fromISO(a,b={}){const [d,g]=za(a,[kd,od],[ld,pd],[md,qd],[nd,rd]);return ba(d,g,b,"ISO 8601",a)}static fromRFC2822(a,b={}){const [d,g]=za(a.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[gd,X]);return ba(d,g,
b,"RFC 2822",a)}static fromHTTP(a,b={}){const [d,g]=za(a,[hd,ea],[id,ea],[jd,da]);return ba(d,g,b,"HTTP",b)}static fromFormat(a,b,d={}){if(p(a)||p(b))throw new Pa("fromFormat requires an input string and a format");const {locale:g=null,numberingSystem:l=null}=d;var u=Aa.fromOpts({locale:g,numberingSystem:l,defaultToEN:!0});{const {result:la,zone:ra,specificOffset:wa,invalidReason:Ua}=ob(u,a,b);u=[la,ra,wa,Ua]}const [U,Z,ha,va]=u;return va?ma.invalid(va):ba(U,Z,d,`format ${b}`,a,ha)}static fromString(a,
b,d={}){return ma.fromFormat(a,b,d)}static fromSQL(a,b={}){const [d,g]=za(a,[td,vd],[ud,wd]);return ba(d,g,b,"SQL",a)}static invalid(a,b=null){if(!a)throw new Pa("need to specify a reason the DateTime is invalid");a=a instanceof Ra?a:new Ra(a,b);if(Ea.throwOnInvalid)throw new Sc(a);return new ma({invalid:a})}static isDateTime(a){return a&&a.isLuxonDateTime||!1}get(a){return this[a]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?
this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:
NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?cb(this).weekYear:NaN}get weekNumber(){return this.isValid?cb(this).weekNumber:NaN}get weekday(){return this.isValid?cb(this).weekday:NaN}get ordinal(){return this.isValid?jb(this.c).ordinal:NaN}get monthShort(){return this.isValid?ub.months("short",{locObj:this.loc})[this.month-
1]:null}get monthLong(){return this.isValid?ub.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?ub.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?ub.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,
{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return B(this.year)}get daysInMonth(){return K(this.year,this.month)}get daysInYear(){return this.isValid?B(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?H(this.weekYear):NaN}resolvedLocaleOptions(a={}){const {locale:b,numberingSystem:d,
calendar:g}=Oa.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:b,numberingSystem:d,outputCalendar:g}}toUTC(a=0,b={}){return this.setZone(Ma.instance(a),b)}toLocal(){return this.setZone(Ea.defaultZone)}setZone(a,{keepLocalTime:b=!1,keepCalendarTime:d=!1}={}){a=y(a,Ea.defaultZone);if(a.equals(this.zone))return this;if(a.isValid){let g=this.ts;if(b||d)b=a.offset(this.ts),d=this.toObject(),[g]=F(d,b,a);return gb(this,{ts:g,zone:a})}return ma.invalid(fb(a))}reconfigure({locale:a,numberingSystem:b,
outputCalendar:d}={}){a=this.loc.clone({locale:a,numberingSystem:b,outputCalendar:d});return gb(this,{loc:a})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;a=n(a,Ga);var b=!p(a.weekYear)||!p(a.weekNumber)||!p(a.weekday);const d=!p(a.ordinal),g=!p(a.year),l=!p(a.month)||!p(a.day),u=a.weekYear||a.weekNumber;if((g||l||d)&&u)throw new tb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&d)throw new tb("Can't mix ordinal dates with month/day");
b?b=bb({...Xa(this.c),...a}):p(a.ordinal)?(b={...this.toObject(),...a},p(a.day)&&(b.day=Math.min(K(b.year,b.month),b.day))):b=pb({...jb(this.c),...a});const [U,Z]=F(b,this.o,this.zone);return gb(this,{ts:U,o:Z})}plus(a){if(!this.isValid)return this;a=ta.fromDurationLike(a);return gb(this,ca(this,a))}minus(a){if(!this.isValid)return this;a=ta.fromDurationLike(a).negate();return gb(this,ca(this,a))}startOf(a){if(!this.isValid)return this;const b={};a=ta.normalizeUnit(a);switch(a){case "years":b.month=
1;case "quarters":case "months":b.day=1;case "weeks":case "days":b.hour=0;case "hours":b.minute=0;case "minutes":b.second=0;case "seconds":b.millisecond=0}"weeks"===a&&(b.weekday=1);"quarters"===a&&(b.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(b)}endOf(a){return this.isValid?this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,b={}){return this.isValid?Oa.create(this.loc.redefaultToEN(b)).formatDateTimeFromString(this,a):"Invalid DateTime"}toLocaleString(a=Ob,b={}){return this.isValid?
Oa.create(this.loc.clone(b),a).formatDateTime(this):"Invalid DateTime"}toLocaleParts(a={}){return this.isValid?Oa.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO({format:a="extended",suppressSeconds:b=!1,suppressMilliseconds:d=!1,includeOffset:g=!0}={}){if(!this.isValid)return null;a="extended"===a;let l=xa(this,a);return l=l+"T"+Ja(this,a,b,d,g)}toISODate({format:a="extended"}={}){return this.isValid?xa(this,"extended"===a):null}toISOWeekDate(){return oa(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=
!1,suppressSeconds:b=!1,includeOffset:d=!0,includePrefix:g=!1,format:l="extended"}={}){return this.isValid?(g?"T":"")+Ja(this,"extended"===l,b,a,d):null}toRFC2822(){return oa(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return oa(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?xa(this,!0):null}toSQLTime({includeOffset:a=!0,includeZone:b=!1,includeOffsetSpace:d=!0}={}){let g="HH:mm:ss.SSS";if(b||a)d&&(g+=" "),b?g+="z":a&&(g+="ZZ");return oa(this,g,!0)}toSQL(a={}){return this.isValid?
`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1E3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const b={...this.c};a.includeConfig&&(b.outputCalendar=this.outputCalendar,b.numberingSystem=this.loc.numberingSystem,
b.locale=this.loc.locale);return b}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(a,b="milliseconds",d={}){if(!this.isValid||!a.isValid)return ta.invalid("created by diffing an invalid DateTime");d={locale:this.locale,numberingSystem:this.numberingSystem,...d};const g=(Array.isArray(b)?b:[b]).map(ta.normalizeUnit);b=a.valueOf()>this.valueOf();a=wb(b?this:a,b?a:this,g,d);return b?a.negate():a}diffNow(a="milliseconds",b={}){return this.diff(ma.now(),a,b)}until(a){return this.isValid?Ba.fromDateTimes(this,
a):this}hasSame(a,b){if(!this.isValid)return!1;const d=a.valueOf();a=this.setZone(a.zone,{keepLocalTime:!0});return a.startOf(b)<=d&&d<=a.endOf(b)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a={}){if(!this.isValid)return null;const b=a.base||ma.fromObject({},{zone:this.zone}),d=a.padding?this<b?-a.padding:a.padding:0;let g="years months days hours minutes seconds".split(" "),l=a.unit;Array.isArray(a.unit)&&(g=
a.unit,l=void 0);return vb(b,this.plus(d),{...a,numeric:"always",units:g,unit:l})}toRelativeCalendar(a={}){return this.isValid?vb(a.base||ma.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every(ma.isDateTime))throw new Pa("min requires all arguments be DateTimes");return w(a,b=>b.valueOf(),Math.min)}static max(...a){if(!a.every(ma.isDateTime))throw new Pa("max requires all arguments be DateTimes");return w(a,b=>
b.valueOf(),Math.max)}static fromFormatExplain(a,b,d={}){const {locale:g=null,numberingSystem:l=null}=d;d=Aa.fromOpts({locale:g,numberingSystem:l,defaultToEN:!0});return ob(d,a,b)}static fromStringExplain(a,b,d={}){return ma.fromFormatExplain(a,b,d)}static get DATE_SHORT(){return Ob}static get DATE_MED(){return bc}static get DATE_MED_WITH_WEEKDAY(){return Vc}static get DATE_FULL(){return cc}static get DATE_HUGE(){return dc}static get TIME_SIMPLE(){return ec}static get TIME_WITH_SECONDS(){return fc}static get TIME_WITH_SHORT_OFFSET(){return gc}static get TIME_WITH_LONG_OFFSET(){return hc}static get TIME_24_SIMPLE(){return ic}static get TIME_24_WITH_SECONDS(){return jc}static get TIME_24_WITH_SHORT_OFFSET(){return kc}static get TIME_24_WITH_LONG_OFFSET(){return lc}static get DATETIME_SHORT(){return mc}static get DATETIME_SHORT_WITH_SECONDS(){return nc}static get DATETIME_MED(){return oc}static get DATETIME_MED_WITH_SECONDS(){return pc}static get DATETIME_MED_WITH_WEEKDAY(){return Wc}static get DATETIME_FULL(){return qc}static get DATETIME_FULL_WITH_SECONDS(){return rc}static get DATETIME_HUGE(){return sc}static get DATETIME_HUGE_WITH_SECONDS(){return tc}}
h.DateTime=ma;h.Info=ub;h.Interval=Ba})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(h,p,v){function A(m){m||(m=v.getLocale());let f=m in Y;if(!f){const D=m.split("-");1<D.length&&D[0]in Y&&(m=D[0],f=!0);f||(m="en")}const [q,B,K="#,##0.###"]=Y[m];return{decimal:q,group:B,pattern:K}}function E(m,f,q){q=q||{};!0===q.places&&(q.places=0);Infinity===q.places&&(q.places=6);f=f.split(".");var B="string"===typeof q.places&&q.places.indexOf(","),K=q.places;B?K=q.places.substring(B+
1):0<=K||(K=(f[1]||[]).length);0>q.round||(m=Number(m.toFixed(Number(K))));m=String(Math.abs(m)).split(".");const D=m[1]||"";f[1]||q.places?(B&&(q.places=q.places.substring(0,B)),B=void 0!==q.places?q.places:f[1]&&f[1].lastIndexOf("0")+1,B>D.length&&(m[1]=D.padEnd(Number(B),"0")),K<D.length&&(m[1]=D.substr(0,Number(K)))):m[1]&&m.pop();K=f[0].replace(",","");B=K.indexOf("0");-1!==B&&(B=K.length-B,B>m[0].length&&(m[0]=m[0].padStart(B,"0")),-1===K.indexOf("#")&&(m[0]=m[0].substr(m[0].length-B)));K=f[0].lastIndexOf(",");
let H,Q;-1!==K&&(H=f[0].length-K-1,f=f[0].substr(0,K),K=f.lastIndexOf(","),-1!==K&&(Q=f.length-K-1));f=[];for(K=m[0];K;)B=K.length-H,f.push(0<B?K.substr(B):K),K=0<B?K.slice(0,B):"",Q&&(H=Q,Q=void 0);m[0]=f.reverse().join(q.group||",");return m.join(q.decimal||".")}function w(m){m=m||{};var f=A(m.locale);const q=m.pattern||f.pattern,B=f.group,K=f.decimal;let D=1;if(-1!==q.indexOf("%"))D/=100;else if(-1!==q.indexOf("\u2030"))D/=1E3;else if(-1!==q.indexOf("\u00a4"))throw Error("currency notation not supported");
f=q.split(";");1===f.length&&f.push("-"+f[0]);return{regexp:O(f,function(H){H="(?:"+p.escapeRegExpString(H,".")+")";return H.replace(S,function(Q){const P={signed:!1,separator:m.strict?B:[B,""],fractional:m.fractional,decimal:K,exponent:!1};Q=Q.split(".");let L=m.places;1===Q.length&&1!==D&&(Q[1]="###");1===Q.length||0===L?P.fractional=!1:(void 0===L&&(L=m.pattern?Q[1].lastIndexOf("0")+1:Infinity),L&&null==m.fractional&&(P.fractional=!0),!m.places&&L<Q[1].length&&(L+=","+Q[1].length),P.places=L);
Q=Q[0].split(",");1<Q.length&&(P.groupSize=Q.pop().length,1<Q.length&&(P.groupSize2=Q.pop().length));return"("+C(P)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:B,decimal:K,factor:D}}function C(m){m=m||{};"places"in m||(m.places=Infinity);"string"!==typeof m.decimal&&(m.decimal=".");"fractional"in m&&!/^0/.test(String(m.places))||(m.fractional=[!0,!1]);"exponent"in m||(m.exponent=[!0,!1]);"eSigned"in m||(m.eSigned=[!0,!1]);var f=T(m);const q=O(m.fractional,function(K){let D="";K&&0!==m.places&&
(D="\\"+m.decimal,D=Infinity===m.places?"(?:"+D+"\\d+)?":D+("\\d{"+m.places+"}"));return D},!0),B=O(m.exponent,function(K){return K?"([eE]"+T({signed:m.eSigned})+")":""});f+=q;q&&(f="(?:(?:"+f+")|(?:"+q+"))");return f+B}function T(m){m=m||{};"signed"in m||(m.signed=[!0,!1]);"separator"in m?"groupSize"in m||(m.groupSize=3):m.separator="";const f=O(m.signed,function(B){return B?"[-+]":""},!0),q=O(m.separator,function(B){if(!B)return"(?:\\d+)";B=p.escapeRegExpString(B);" "===B?B="\\s":"\u00a0"===B&&
(B="\\s\\xa0");const K=m.groupSize,D=m.groupSize2;return D?(B="(?:0|[1-9]\\d{0,"+(D-1)+"}(?:["+B+"]\\d{"+D+"})*["+B+"]\\d{"+K+"})",0<K-D?"(?:"+B+"|(?:0|[1-9]\\d{0,"+(K-1)+"}))":B):"(?:0|[1-9]\\d{0,"+(K-1)+"}(?:["+B+"]\\d{"+K+"})*)"},!0);return f+q}const Y={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],
"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},S=/[#0,]*[#0](?:\.0*#*)?/,O=function(m,
f,q){if(!(m instanceof Array))return f(m);const B=[];for(let K=0;K<m.length;K++)B.push(f(m[K]));m=B.join("|");return"("+(q?"?:":"")+m+")"};h._parseInfo=w;h.format=function(m,f){f={...f};var q=A(f.locale);f.customs=q;var B=f.pattern||q.pattern;if(isNaN(m)||Infinity===Math.abs(m))return null;{f=f||{};q=f.customs.group;const D=f.customs.decimal;B=B.split(";");var K=B[0];B=B[0>m?1:0]||"-"+K;if(-1!==B.indexOf("%"))m*=100;else if(-1!==B.indexOf("\u2030"))m*=1E3;else{if(-1!==B.indexOf("\u00a4"))throw Error("currency notation not supported");
if(-1!==B.indexOf("E"))throw Error("exponential notation not supported");}const H=S;K=K.match(H);if(!K)throw Error("unable to find a number expression in pattern: "+B);!1===f.fractional&&(f.places=0);m=B.replace(H,E(m,K[0],{decimal:D,group:q,places:f.places,round:f.round}))}return m};h.getCustoms=A;h.parse=function(m,f){f=w(f);m=(new RegExp("^"+f.regexp+"$")).exec(m);if(!m)return NaN;let q=m[1];if(!m[1]){if(!m[2])return NaN;q=m[2];f.factor*=-1}q=q.replace(new RegExp("["+f.group+"\\s\\xa0]","g"),"").replace(f.decimal,
".");return Number(q)*f.factor};h.regexp=function(m){return w(m).regexp};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/arcade/featureset/support/shared":function(){define(["exports","../../../core/promiseUtils","../../../geometry/Extent","../../../layers/support/Field"],function(h,p,v,A){function E(w){return w instanceof Date}h.FeatureServiceDatabaseType=void 0;(function(w){w[w.Standardised=0]="Standardised";w[w.StandardisedNoInterval=1]="StandardisedNoInterval";w[w.SqlServer=2]="SqlServer";
w[w.Oracle=3]="Oracle";w[w.Postgres=4]="Postgres";w[w.PGDB=5]="PGDB";w[w.FILEGDB=6]="FILEGDB";w[w.NotEvaluated=7]="NotEvaluated"})(h.FeatureServiceDatabaseType||(h.FeatureServiceDatabaseType={}));h.IdState=void 0;(function(w){w[w.InFeatureSet=0]="InFeatureSet";w[w.NotInFeatureSet=1]="NotInFeatureSet";w[w.Unknown=2]="Unknown"})(h.IdState||(h.IdState={}));h.callback=function(w,C){return function(){try{w.apply(null,arguments)}catch(T){C.reject(T)}}};h.cloneAttributes=function(w){const C={};for(const T in w)C[T]=
w[T];return C};h.cloneField=function(w){return A.fromJSON(w.toJSON())};h.convertLinearUnitsToCode=function(w){if(void 0===w)return null;if("number"===typeof w||"number"===typeof w)return w;switch(w.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};h.convertSquareUnitsToCode=function(w){if(void 0===w)return null;if("number"===typeof w)return w;switch(w.toLowerCase()){case "meters":case "meter":return 109404;
case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};h.defaultMaxRecords=1E3;h.equalityTest=function(w,C){return w===C?!0:E(w)&&E(C)?w.getTime()===C.getTime():!1};h.errback=function(w){return function(C){w.reject(C)}};h.esriFieldToJson=function(w){return w.toJSON?w.toJSON():w};h.extractServiceUrl=function(w){if(void 0===w)return"";w=w.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");w=w.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return w=
w.split("?")[0]};h.isArray=function(w){return w instanceof Array};h.isBoolean=function(w){return"boolean"===typeof w};h.isDate=E;h.isNumber=function(w){return"number"===typeof w};h.isString=function(w){return"string"===typeof w||w instanceof String};h.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",
geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",
esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};h.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",
envelope:"extent"};h.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};h.reduceArrayWithPromises=function(w,C){return p.create((T,
Y)=>{const S=p.resolve(!0);w.reduce((O,m,f,q)=>O.then(B=>{try{return C(B,m,f,q)}catch(K){return p.reject(K)}},B=>p.reject(B)),S).then(T,Y)})};h.sameGeomType=function(w,C){return w===C||"point"===w&&"esriGeometryPoint"===C||"polyline"===w&&"esriGeometryPolyline"===C||"polygon"===w&&"esriGeometryPolygon"===C||"extent"===w&&"esriGeometryEnvelope"===C||"multipoint"===w&&"esriGeometryMultipoint"===C||"point"===C&&"esriGeometryPoint"===w||"polyline"===C&&"esriGeometryPolyline"===w||"polygon"===C&&"esriGeometryPolygon"===
w||"extent"===C&&"esriGeometryEnvelope"===w||"multipoint"===C&&"esriGeometryMultipoint"===w?!0:!1};h.shapeExtent=function(w){if(null===w)return null;switch(w.type){case "polygon":case "multipoint":case "polyline":return w.extent;case "point":return new v({xmin:w.x,ymin:w.y,xmax:w.x,ymax:w.y,spatialReference:w.spatialReference});case "extent":return w}return null};h.stableStringify=function(w,C){C||(C={});"function"===typeof C&&(C={cmp:C});const T="boolean"===typeof C.cycles?C.cycles:!1,Y=C.cmp&&function(O){return function(m){return function(f,
q){return O({key:f,value:m[f]},{key:q,value:m[q]})}}}(C.cmp),S=[];return function f(m){m&&m.toJSON&&"function"===typeof m.toJSON&&(m=m.toJSON());if(void 0!==m){if("number"===typeof m)return isFinite(m)?""+m:"null";if("object"!==typeof m)return JSON.stringify(m);var q;if(Array.isArray(m)){var B="[";for(q=0;q<m.length;q++)q&&(B+=","),B+=f(m[q])||"null";return B+"]"}if(null===m)return"null";if(-1!==S.indexOf(m)){if(T)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");
}var K=S.push(m)-1,D=Object.keys(m).sort(Y&&Y(m));B="";for(q=0;q<D.length;q++){const H=D[q],Q=f(m[H]);Q&&(B&&(B+=","),B+=JSON.stringify(H)+":"+Q)}S.splice(K,1);return"{"+B+"}"}}(w)};h.toEsriGeometryType=function(w){switch(w){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/core/throttle":function(){define(["exports"],
function(h){h.throttle=function(p,v,A,E){let w=null,C=1E3;"number"===typeof v?(C=v,E=A):(w=null!=v?v:null,C=A);let T=0,Y;const S=()=>{T=0;p.apply(E,Y)};v=(...O)=>{w&&w.apply(E,O);Y=O;C?T||(T=setTimeout(S,C)):S()};v.remove=()=>{T&&(clearTimeout(T),T=0)};v.forceUpdate=()=>{T&&(clearTimeout(T),S())};v.hasPendingUpdates=()=>!!T;return v};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/widgets/Feature/support/arcadeFeatureUtils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Logger ../../../core/promiseUtils ../../../layers/FeatureLayer ./featureUtils".split(" "),
function(h,p,v,A,E,w,C){function T(Q){return`<ul class="esri-widget__list">${Q.map(P=>`<li>${"string"===typeof P?C.applyTextFormattingHTML(C.htmlEntities(P)):P}</li>`).join("")}</ul>`}function Y(Q){return`<table class="esri-widget__table">${Q.keys().map(P=>{var L=Q.field(P);L="string"===typeof L?C.applyTextFormattingHTML(C.htmlEntities(L)):L;return`<tr><th>${P}</th><td>${L}</td></tr>`}).join("")}</table>`}function S({aggregatedFeatures:Q,arcadeUtils:P,featureSetVars:L,context:V,viewInfo:n,map:e,graphic:r,
interceptor:z}){L.forEach(J=>{J=J.toLowerCase();var M={map:e,spatialReference:n.sr,interceptor:z};"$map"===J&&(V.vars[J]=P.convertMapToFeatureSetCollection(M));"$layer"===J&&(V.vars[J]=P.convertFeatureLayerToFeatureSet({layer:r.sourceLayer,spatialReference:n.sr,interceptor:z}));"$datastore"===J&&(V.vars[J]=P.convertServiceUrlToWorkspace({url:r.sourceLayer.url,spatialReference:n.sr,interceptor:z}));if("$aggregatedfeatures"===J){M=r.layer;const {fields:N,objectIdField:x,geometryType:y,spatialReference:t,
displayField:I}=M;M=new w({fields:N,objectIdField:x,geometryType:y,spatialReference:t,displayField:I,..."feature"===M.type?{templates:M.templates,typeIdField:M.typeIdField,types:M.types}:null,source:Q});V.vars[J]=P.convertFeatureLayerToFeatureSet({layer:M,spatialReference:n.sr,interceptor:z})}})}function O(){return new Promise((Q,P)=>h(["../../../support/arcadeUtils"],Q,P))}function m(Q){return f.apply(this,arguments)}function f(){f=v._asyncToGenerator(function*({graphic:Q,view:P}){const {isAggregate:L,
layer:V}=Q;if(!L||!V||"2d"!==(null==P?void 0:P.type))return[];P=yield P.whenLayerView(V);if(!P.createQuery||!P.queryFeatures)return[];const n=P.createQuery();n.aggregateIds=[Q.getObjectId()];({features:Q}=yield P.queryFeatures(n));return Q});return f.apply(this,arguments)}function q(Q){return B.apply(this,arguments)}function B(){B=v._asyncToGenerator(function*({expressionInfo:Q,arcadeUtils:P,interceptor:L,spatialReference:V,map:n,graphic:e,view:r}){if(!Q||!Q.expression)return null;const z=P.createSyntaxTree(Q.expression),
J=D.filter(N=>P.hasVariable(z,N));[r]=yield E.all([m({graphic:e,view:r}),P.loadScriptDependencies(z,!0,J)]);const M=P.getViewInfo({spatialReference:V});V=P.createExecContext(e,M);V.interceptor=L;V.useAsync=!0;S({aggregatedFeatures:r,arcadeUtils:P,featureSetVars:J,context:V,viewInfo:M,map:n,graphic:e,interceptor:L});L=P.createFunction(z,V);return P.executeAsyncFunction(L,V).catch(N=>H.error("arcade-execution-error",{error:N,graphic:e,expressionInfo:Q}))});return B.apply(this,arguments)}function K(){K=
v._asyncToGenerator(function*({expressionInfos:Q,spatialReference:P,graphic:L,interceptor:V,map:n,view:e}){if(!Q||!Q.length)return{};const r=yield O(),z={};for(const J of Q)z[`expression/${J.name}`]=q({expressionInfo:J,arcadeUtils:r,interceptor:V,spatialReference:P,map:n,graphic:L,view:e});Q=yield E.eachAlways(z);P={};for(const J in Q)L=Q[J].value,L="string"===typeof L?C.applyTextFormattingHTML(C.htmlEntities(L)):Array.isArray(L)?T(L):"esri.arcade.Dictionary"===(null==L?void 0:L.declaredClass)?Y(L):
L,P[J]=L;return P});return K.apply(this,arguments)}const D=["$datastore","$map","$layer","$aggregatedfeatures"],H=A.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");p.createCompiledExpression=q;p.createCompiledExpressions=function(Q){return K.apply(this,arguments)};p.loadArcadeUtils=O;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../arcade/featureset/support/FeatureSetQueryInterceptor ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/throttle ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../popup/content/TextContent ./FeatureAttachments/FeatureAttachmentsViewModel ./FeatureContent/FeatureContentViewModel ./FeatureExpression/FeatureExpressionViewModel ./FeatureFields/FeatureFieldsViewModel ./FeatureMedia/FeatureMediaViewModel ./support/arcadeFeatureUtils ./support/featureUtils ./support/relatedFeatureUtils".split(" "),
function(h,p,v,A,E,w,C,T,Y,S,O,m,f,q,B,K,D,H,Q,P,L,V,n,e,r){var z;const J=C.getLogger("esri.widgets.FeatureViewModel"),M={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};E=z=function(N){function x(t){var I=N.call(this,t)||this;I._handles=new w;I._error=null;I._featureAbortController=null;I.graphicChangedThrottled=S.throttle(I._graphicChanged,1,h._assertThisInitialized(I));I._expressionAttributes=null;I._graphicExpressionAttributes=
null;I.abilities={...M};I.content=null;I.contentViewModels=[];I.defaultPopupTemplateEnabled=!1;I.formattedAttributes=null;I.lastEditInfo=null;I.relatedInfos=new Map;I.title="";I.view=null;I._isAllowedContentType=W=>{const {abilities:aa}=h._assertThisInitialized(I);return"attachments"===W.type&&aa.attachmentsContent||"custom"===W.type&&aa.customContent||"fields"===W.type&&aa.fieldsContent||"media"===W.type&&aa.mediaContent||"text"===W.type&&aa.textContent||"expression"===W.type&&aa.expressionContent};
I._handles.add(O.init(h._assertThisInitialized(I),["graphic","_effectivePopupTemplate","abilities"],()=>I.graphicChangedThrottled()));return I}h._inheritsLoose(x,N);var y=x.prototype;y.destroy=function(){this._clear();this._cancelFeatureQuery();this._error=null;this._handles.destroy();this.graphic=this._handles=null;this._destroyContentViewModels();this.relatedInfos.clear()};y.castAbilities=function(t){return{...M,...t}};y.setActiveMedia=function(t,I){t=this.contentViewModels[t];t instanceof V&&t.setActiveMedia(I)};
y.nextMedia=function(t){t=this.contentViewModels[t];t instanceof V&&t.next()};y.previousMedia=function(t){t=this.contentViewModels[t];t instanceof V&&t.previous()};y._clear=function(){this._set("title","");this._set("content",null);this._set("formattedAttributes",null)};y._graphicChanged=function(){var t=h._asyncToGenerator(function*(){this._cancelFeatureQuery();this._error=null;this._clear();const {graphic:I}=this;if(I){var W=new AbortController;this._featureAbortController=W;try{yield this._queryFeature({signal:W.signal})}catch(aa){Y.isAbortError(aa)||
(this._error=aa,J.error("error","The popupTemplate could not be displayed for this feature.",{error:aa,graphic:I,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===W&&(this._featureAbortController=null)}});return function(){return t.apply(this,arguments)}}();y._cancelFeatureQuery=function(){const {_featureAbortController:t}=this;t&&t.abort();this._featureAbortController=null};y._compileContentElement=function(t,I){if("attachments"===t.type)return this._compileAttachments(t,
I);if("custom"===t.type)return this._compileCustom(t,I);if("fields"===t.type)return this._compileFields(t,I);if("media"===t.type)return this._compileMedia(t,I);if("text"===t.type)return this._compileText(t,I);if("expression"===t.type)return this._compileExpression(t,I)};y._compileContent=function(t){this._destroyContentViewModels();if(this.graphic)return Array.isArray(t)?t.filter(this._isAllowedContentType).map((I,W)=>this._compileContentElement(I,W)):"string"===typeof t?this._compileText(new D({text:t}),
0).text:t};y._destroyContentViewModels=function(){var t;null==(t=this._handles)?void 0:t.remove("content-view-models");this.contentViewModels.forEach(I=>I&&!I.destroyed&&I.destroy());this._set("contentViewModels",[])};y._setExpressionContentVM=function(t,I){const {formattedAttributes:W}=this,{contentElement:aa,contentElementViewModel:fa}=t;t=null==aa?void 0:aa.type;fa&&t&&("fields"===t&&(this._createFieldsFormattedAttributes({contentElement:aa,contentElementIndex:I,formattedAttributes:W}),fa.set(this._createFieldsVMParams(aa,
I))),"media"===t&&(this._createMediaFormattedAttributes({contentElement:aa,contentElementIndex:I,formattedAttributes:W}),fa.set(this._createMediaVMParams(aa,I))),"text"===t&&fa.set(this._createTextVMParams(aa)))};y._compileExpression=function(t,I){const {expressionInfo:W}=t,{graphic:aa,map:fa,spatialReference:ja,view:na}=this,ia=new P({expressionInfo:W,graphic:aa,interceptor:z.interceptor,map:fa,spatialReference:ja,view:na});this.contentViewModels[I]=ia;this._handles.add(O.init(ia,"contentElementViewModel",
()=>this._setExpressionContentVM(ia,I)),"content-view-models");return t};y._compileAttachments=function(t,I){const {graphic:W}=this,{description:aa,title:fa}=t;this.contentViewModels[I]=new H({graphic:W,...this._compileTitleAndDesc({title:fa,description:aa})});return t};y._compileCustom=function(t,I){const {graphic:W}=this,{creator:aa,destroyer:fa}=t;this.contentViewModels[I]=new Q({graphic:W,creator:aa,destroyer:fa});return t};y._compileTitleAndDesc=function({title:t,description:I}){const {_fieldInfoMap:W,
_sourceLayer:aa,graphic:fa,formattedAttributes:ja,_expressionAttributes:na}=this,{attributes:ia}=fa,pa=ja.global;return{title:e.substituteFieldsInLinksAndAttributes({attributes:ia,fieldInfoMap:W,globalAttributes:pa,expressionAttributes:na,layer:aa,text:t}),description:e.substituteFieldsInLinksAndAttributes({attributes:ia,fieldInfoMap:W,globalAttributes:pa,expressionAttributes:na,layer:aa,text:I})}};y._createFieldsVMParams=function(t,I){const {_effectivePopupTemplate:W,formattedAttributes:aa}=this,
fa={...aa.global,...aa.content[I]};I=(null==t?void 0:t.fieldInfos)||(null==W?void 0:W.fieldInfos);I=null==I?void 0:I.filter(({fieldName:pa})=>e.isExpressionField(pa)||e.isRelatedField(pa)||fa.hasOwnProperty(pa));const ja=null==W?void 0:W.expressionInfos,{description:na,title:ia}=t;return{attributes:fa,expressionInfos:ja,fieldInfos:I,...this._compileTitleAndDesc({title:ia,description:na})}};y._compileFields=function(t,I){const W=t.clone();t=new L(this._createFieldsVMParams(t,I));this.contentViewModels[I]=
t;W.fieldInfos=t.formattedFieldInfos.slice(0);return W};y._createMediaVMParams=function(t,I){const {abilities:W,graphic:aa,_fieldInfoMap:fa,formattedAttributes:ja,_effectivePopupTemplate:na,relatedInfos:ia,_sourceLayer:pa,_expressionAttributes:za}=this,{attributes:sa}=aa,{description:Ca,mediaInfos:Na,title:Fa}=t;return{abilities:{chartAnimation:W.chartAnimation},activeMediaInfoIndex:t.activeMediaInfoIndex||0,attributes:sa,layer:pa,fieldInfoMap:fa,formattedAttributes:{...ja.global,...ja.content[I]},
expressionAttributes:za,mediaInfos:Na,popupTemplate:na,relatedInfos:ia,...this._compileTitleAndDesc({title:Fa,description:Ca})}};y._compileMedia=function(t,I){const W=t.clone();t=new V(this._createMediaVMParams(t,I));W.mediaInfos=t.formattedMediaInfos.slice(0);this.contentViewModels[I]=t;return W};y._createTextVMParams=function(t){const {graphic:I,_fieldInfoMap:W,_sourceLayer:aa,_expressionAttributes:fa}=this;if(t&&t.text){const {attributes:ja}=I;t.text=e.substituteFieldsInLinksAndAttributes({attributes:ja,
fieldInfoMap:W,globalAttributes:this.formattedAttributes.global,expressionAttributes:fa,layer:aa,text:t.text})}return{graphic:I,creator:t.text}};y._compileText=function(t,I){t=t.clone();this.contentViewModels[I]=new Q(this._createTextVMParams(t));return t};y._compileLastEditInfo=function(){const {_effectivePopupTemplate:t,_sourceLayer:I,graphic:W}=this;if(t){var {lastEditInfoEnabled:aa}=t,fa=null==I?void 0:I.editFieldsInfo;if(aa&&fa)return e.formatEditInfo(fa,W.attributes)}};y._compileTitle=function(t){const {_fieldInfoMap:I,
_sourceLayer:W,graphic:aa,_expressionAttributes:fa}=this,{attributes:ja}=aa;return e.substituteFieldsInLinksAndAttributes({attributes:ja,fieldInfoMap:I,globalAttributes:this.formattedAttributes.global,expressionAttributes:fa,layer:W,text:t})};y._getTitle=function(){var t=h._asyncToGenerator(function*(){const {_effectivePopupTemplate:I,graphic:W}=this;return e.graphicCallback(null==I?void 0:I.title,{graphic:W})});return function(){return t.apply(this,arguments)}}();y._getContent=function(){var t=h._asyncToGenerator(function*(){const {_effectivePopupTemplate:I,
graphic:W}=this;return e.graphicCallback(null==I?void 0:I.content,{graphic:W})});return function(){return t.apply(this,arguments)}}();y._queryFeature=function(){var t=h._asyncToGenerator(function*(I){const {_featureAbortController:W,_sourceLayer:aa,graphic:fa,_effectivePopupTemplate:ja,spatialReference:na,map:ia,view:pa}=this,{content:{value:za},title:{value:sa}}=yield Y.eachAlways({content:this._getContent(),title:this._getTitle()});W===this._featureAbortController&&fa&&(yield e.queryUpdatedFeature({graphic:fa,
popupTemplate:ja,layer:aa,spatialReference:na},I),{expressionAttributes:{value:I}}=yield Y.eachAlways({checkForRelatedFeatures:this._checkForRelatedFeatures(I),expressionAttributes:n.createCompiledExpressions({expressionInfos:null==ja?void 0:ja.expressionInfos,spatialReference:na,graphic:fa,map:ia,interceptor:z.interceptor,view:pa})}),W===this._featureAbortController&&fa&&(this._expressionAttributes=I,this._graphicExpressionAttributes={...fa.attributes,...I},this._set("formattedAttributes",this._createFormattedAttributes(za)),
this._set("title",this._compileTitle(sa)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(za)||null)))});return function(I){return t.apply(this,arguments)}}();y._createMediaFormattedAttributes=function({contentElement:t,contentElementIndex:I,formattedAttributes:W}){const {_effectivePopupTemplate:aa,graphic:fa,relatedInfos:ja,_sourceLayer:na,_fieldInfoMap:ia,_graphicExpressionAttributes:pa}=this;W.content[I]=e.formatAttributes({fieldInfos:null==
aa?void 0:aa.fieldInfos,graphic:fa,attributes:{...pa,...t.attributes},layer:na,fieldInfoMap:ia,relatedInfos:ja})};y._createFieldsFormattedAttributes=function({contentElement:t,contentElementIndex:I,formattedAttributes:W}){if(t.fieldInfos){const {graphic:aa,relatedInfos:fa,_sourceLayer:ja,_fieldInfoMap:na,_graphicExpressionAttributes:ia}=this;W.content[I]=e.formatAttributes({fieldInfos:t.fieldInfos,graphic:aa,attributes:{...ia,...t.attributes},layer:ja,fieldInfoMap:na,relatedInfos:fa})}};y._createFormattedAttributes=
function(t){const {_effectivePopupTemplate:I,graphic:W,relatedInfos:aa,_sourceLayer:fa,_fieldInfoMap:ja,_graphicExpressionAttributes:na}=this,ia={global:e.formatAttributes({fieldInfos:null==I?void 0:I.fieldInfos,graphic:W,attributes:na,layer:fa,fieldInfoMap:ja,relatedInfos:aa}),content:[]};Array.isArray(t)&&t.forEach((pa,za)=>{"fields"===pa.type&&this._createFieldsFormattedAttributes({contentElement:pa,contentElementIndex:za,formattedAttributes:ia});"media"===pa.type&&this._createMediaFormattedAttributes({contentElement:pa,
contentElementIndex:za,formattedAttributes:ia})});return ia};y._checkForRelatedFeatures=function(t){const {graphic:I,_effectivePopupTemplate:W}=this;return this._queryRelatedInfos(I,e.getAllFieldInfos(W),t)};y._queryRelatedInfos=function(){var t=h._asyncToGenerator(function*(I,W,aa){const {relatedInfos:fa,_sourceLayer:ja}=this;fa.clear();const na=T.isSome(ja.associatedLayer)?yield ja.associatedLayer.load(aa):ja;if(na){var ia=W.filter(sa=>sa&&e.isRelatedField(sa.fieldName));if(ia&&ia.length){W.forEach(sa=>
this._configureRelatedInfo(sa,na));var pa=yield r.queryLayerInfos({relatedInfos:fa,layer:na},aa);Object.keys(pa).forEach(sa=>{var Ca;const Na=fa.get(sa.toString());sa=null==(Ca=pa[sa])?void 0:Ca.value;Na&&sa&&(Na.layerInfo=sa.data)});var za=yield r.queryRelatedFeatures({graphic:I,relatedInfos:fa,layer:na},aa);Object.keys(za).forEach(sa=>{var Ca;r.setRelatedFeatures(null==(Ca=za[sa])?void 0:Ca.value,fa.get(sa.toString()))})}}});return function(I,W,aa){return t.apply(this,arguments)}}();y._configureRelatedInfo=
function(t,I){const {relatedInfos:W}=this,aa=r.getRelatedFieldInfo(t.fieldName);if(aa){var {layerId:fa,fieldName:ja}=aa;fa&&(I=W.get(fa.toString())||r.createRelatedInfo(fa,I))&&(r.updateRelatedInfo({relatedInfo:I,fieldName:ja,fieldInfo:t}),this.relatedInfos.set(fa,I))}};h._createClass(x,[{key:"_effectivePopupTemplate",get:function(){return T.isSome(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}},{key:"_fieldInfoMap",get:function(){return e.createfieldInfoMap(e.getAllFieldInfos(this._effectivePopupTemplate),
this._sourceLayer)}},{key:"_sourceLayer",get:function(){return e.getSourceLayer(this.graphic)}},{key:"state",get:function(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}},{key:"graphic",set:function(t){this._set("graphic",t?t.clone():null)}},{key:"spatialReference",get:function(){return this.get("view.spatialReference")||null},set:function(t){void 0===t?this._clearOverride("spatialReference"):this._override("spatialReference",t)}},{key:"map",get:function(){return this.get("view.map")||
null},set:function(t){void 0===t?this._clearOverride("map"):this._override("map",t)}},{key:"waitingForContent",get:function(){return!!this._featureAbortController}}]);return x}(E);E.interceptor=new A.FeatureSetQueryInterceptor(e.preLayerQueryCallback,e.preRequestCallback);p.__decorate([m.property()],E.prototype,"_error",void 0);p.__decorate([m.property()],E.prototype,"_featureAbortController",void 0);p.__decorate([m.property({readOnly:!0})],E.prototype,"_effectivePopupTemplate",null);p.__decorate([m.property({readOnly:!0})],
E.prototype,"_fieldInfoMap",null);p.__decorate([m.property({readOnly:!0})],E.prototype,"_sourceLayer",null);p.__decorate([m.property()],E.prototype,"abilities",void 0);p.__decorate([B.cast("abilities")],E.prototype,"castAbilities",null);p.__decorate([m.property({readOnly:!0})],E.prototype,"content",void 0);p.__decorate([m.property({readOnly:!0})],E.prototype,"contentViewModels",void 0);p.__decorate([m.property({type:Boolean})],E.prototype,"defaultPopupTemplateEnabled",void 0);p.__decorate([m.property({readOnly:!0})],
E.prototype,"state",null);p.__decorate([m.property({readOnly:!0})],E.prototype,"formattedAttributes",void 0);p.__decorate([m.property({type:v,value:null})],E.prototype,"graphic",null);p.__decorate([m.property({readOnly:!0})],E.prototype,"lastEditInfo",void 0);p.__decorate([m.property({readOnly:!0})],E.prototype,"relatedInfos",void 0);p.__decorate([m.property()],E.prototype,"spatialReference",null);p.__decorate([m.property({readOnly:!0})],E.prototype,"title",void 0);p.__decorate([m.property()],E.prototype,
"map",null);p.__decorate([m.property({readOnly:!0})],E.prototype,"waitingForContent",null);p.__decorate([m.property()],E.prototype,"view",void 0);return E=z=p.__decorate([K.subclass("esri.widgets.FeatureViewModel")],E)})},"esri/arcade/featureset/support/FeatureSetQueryInterceptor":function(){define(["exports"],function(h){h.FeatureSetQueryInterceptor=function(p,v){this.preLayerQueryCallback=p;this.preRequestCallback=v;this.preLayerQueryCallback||(this.preLayerQueryCallback=A=>{});this.preRequestCallback||
(this.preLayerQueryCallback=A=>{})};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/widgets/Feature/support/FeatureContentMixin":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/set ../../../core/accessorSupport/decorators/subclass ../../support/widget ../../support/jsxFactory".split(" "),function(h,p,v,A,E,w,
C,T,Y,S,O){h.FeatureContentMixin=m=>{m=function(f){function q(){var B=f.apply(this,arguments)||this;B.renderNodeContent=K=>S.isWidget(K)&&!K.destroyed?O.tsx("div",{key:K},K.render()):K instanceof HTMLElement?O.tsx("div",{key:K,bind:K,afterCreate:B._attachToNode}):S.hasDomNode(K)?O.tsx("div",{key:K,bind:K.domNode,afterCreate:B._attachToNode}):null;return B}p._inheritsLoose(q,f);q.prototype._attachToNode=function(B){B.appendChild(this)};return q}(m);return m=v.__decorate([Y.subclass("esri.widgets.Feature.ContentMixin")],
m)};Object.defineProperty(h,"__esModule",{value:!0})})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Feature/FeatureAttachments ./Feature/FeatureContent ./Feature/FeatureExpression ./Feature/FeatureFields ./Feature/FeatureMedia ./Feature/FeatureViewModel ./Feature/support/FeatureContentMixin ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/jsxFactory ../intl/substitute".split(" "),function(h,
p,v,A,E,w,C,T,Y,S,O,m,f,q,B,K,D,H,Q,P,L,V,n,e,r){const z={title:!0,content:!0,lastEditedInfo:!0};A=function(J){function M(x,y){x=J.call(this,x,y)||this;x._contentWidgets=[];x.graphic=null;x.defaultPopupTemplateEnabled=!1;x.headingLevel=2;x.label=void 0;x.messages=null;x.messagesCommon=null;x.messagesURIUtils=null;x.spatialReference=null;x.title=null;x.visibleElements={...z};x.map=null;x.view=null;x.viewModel=new H;return x}p._inheritsLoose(M,J);var N=M.prototype;N.initialize=function(){this.own(E.init(this,
"viewModel.contentViewModels",()=>this._setupContentWidgets()))};N.loadDependencies=function(){return new Promise((x,y)=>h(["../chunks/calcite-notice"],x,y))};N.destroy=function(){this._destroyContentWidgets()};N.castVisibleElements=function(x){return{...z,...x}};N.render=function(){var {state:x}=this.viewModel;x=e.tsx("div",{class:"esri-feature__size-container",key:"container"},this.renderTitle(),"error"===x?this.renderError():"loading"===x?this.renderLoading():this.renderContentContainer());return e.tsx("div",
{class:this.classes("esri-feature","esri-widget")},x)};N.setActiveMedia=function(x,y){this.viewModel.setActiveMedia(x,y)};N.nextMedia=function(x){this.viewModel.nextMedia(x)};N.previousMedia=function(x){this.viewModel.previousMedia(x)};N.renderError=function(){const {messagesCommon:x,messages:y,visibleElements:t}=this;return e.tsx("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},t.title?e.tsx("div",{key:"error-title",slot:"title"},x.errorMessage):null,e.tsx("div",
{key:"error-message",slot:"message"},y.loadingError))};N.renderLoading=function(){return e.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},e.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))};N.renderContentContainer=function(){const {visibleElements:x}=this;return x.content?e.tsx("div",{class:"esri-feature__main-container"},[this.renderContent(),this.renderLastEditInfo()]):null};N.renderTitle=function(){const {visibleElements:x,
title:y}=this;return x.title?e.tsx(P.Heading,{level:this.headingLevel,class:"esri-feature__title",innerHTML:y}):null};N.renderContent=function(){var x=this.viewModel.content;return x?Array.isArray(x)?x.length?e.tsx("div",{key:"content-content-elements"},x.map(this.renderContentElement,this)):null:"string"===typeof x?(x=this._contentWidgets[0],!x||x.destroyed?null:e.tsx("div",{key:"content-content"},x.render())):this.renderNodeContent(x):null};N.renderContentElement=function(x,y){const {visibleElements:t}=
this;if("boolean"!==typeof t.content&&!t.content[x.type])return null;switch(x.type){case "attachments":return this.renderAttachments(y);case "custom":return this.renderCustom(x,y);case "fields":return this.renderFields(y);case "media":return this.renderMedia(y);case "text":return this.renderText(x,y);case "expression":return this.renderExpression(y);default:return null}};N.renderAttachments=function(x){const y=this._contentWidgets[x];if(!y||y.destroyed)return null;const {state:t,attachmentInfos:I}=
y.viewModel;return"loading"===t||0<I.length?e.tsx("div",{key:this._buildKey("attachments-element",x),class:this.classes("esri-feature__content-element")},y.render()):null};N.renderExpression=function(x){const y=this._contentWidgets[x];return!y||y.destroyed?null:e.tsx("div",{key:this._buildKey("expression-element",x),class:"esri-feature__content-element"},y.render())};N.renderCustom=function(x,y){({creator:x}=x);const t=this._contentWidgets[y];return!t||t.destroyed?null:x?e.tsx("div",{key:this._buildKey("custom-element",
y),class:"esri-feature__content-element"},t.render()):null};N.renderFields=function(x){const y=this._contentWidgets[x];return!y||y.destroyed?null:e.tsx("div",{key:this._buildKey("fields-element",x),class:"esri-feature__content-element"},y.render())};N.renderMedia=function(x){const y=this._contentWidgets[x];return!y||y.destroyed?null:e.tsx("div",{key:this._buildKey("media-element",x),class:"esri-feature__content-element"},y.render())};N.renderLastEditInfo=function(){const {visibleElements:x,messages:y}=
this;var {lastEditInfo:t}=this.viewModel;if(!t||!x.lastEditedInfo)return null;const {date:I,user:W}=t;t=r.substitute("edit"===t.type?W?y.lastEditedByUser:y.lastEdited:W?y.lastCreatedByUser:y.lastCreated,{date:I,user:W});return e.tsx("div",{key:"edit-info-element",class:this.classes("esri-feature__last-edited-info","esri-feature__content-element")},t)};N.renderText=function(x,y){const t=this._contentWidgets[y];return!t||t.destroyed?null:x.text?e.tsx("div",{key:this._buildKey("text-element",y),class:this.classes("esri-feature__content-element",
"esri-feature__text")},t.render()):null};N._buildKey=function(x,...y){const t=this.get("viewModel.graphic.uid")||"0";y=y.join("-");return`${x}__${t}-${y}`};N._destroyContentWidget=function(x){x&&(x.viewModel=null,!x.destroyed&&x.destroy())};N._destroyContentWidgets=function(){this._contentWidgets.forEach(x=>this._destroyContentWidget(x));this._contentWidgets=[]};N._setupContentWidgets=function(){this._destroyContentWidgets();const {headingLevel:x,visibleElements:y}=this;var t=this.get("viewModel.content");
const {contentViewModels:I}=this.viewModel;Array.isArray(t)?t.forEach((W,aa)=>{"attachments"===W.type&&(this._contentWidgets[aa]=new f({displayType:W.displayType,headingLevel:y.title?x+1:x,viewModel:I[aa]}));"fields"===W.type&&(this._contentWidgets[aa]=new K({viewModel:I[aa]}));"media"===W.type&&(this._contentWidgets[aa]=new D({viewModel:I[aa]}));"text"===W.type&&(this._contentWidgets[aa]=new q({viewModel:I[aa]}));"custom"===W.type&&(this._contentWidgets[aa]=new q({viewModel:I[aa]}));"expression"===
W.type&&(this._contentWidgets[aa]=new B({viewModel:I[aa]}))},this):(t=I[0])&&!t.destroyed&&(this._contentWidgets[0]=new q({viewModel:t}));this.scheduleRender()};return M}(Q.FeatureContentMixin(m));v.__decorate([w.aliasOf("viewModel.graphic")],A.prototype,"graphic",void 0);v.__decorate([w.aliasOf("viewModel.defaultPopupTemplateEnabled")],A.prototype,"defaultPopupTemplateEnabled",void 0);v.__decorate([S.property()],A.prototype,"headingLevel",void 0);v.__decorate([S.property({aliasOf:{source:"messages.widgetLabel",
overridable:!0}})],A.prototype,"label",void 0);v.__decorate([S.property(),V.messageBundle("esri/widgets/Feature/t9n/Feature")],A.prototype,"messages",void 0);v.__decorate([S.property(),V.messageBundle("esri/t9n/common")],A.prototype,"messagesCommon",void 0);v.__decorate([S.property(),V.messageBundle("esri/widgets/support/t9n/uriUtils")],A.prototype,"messagesURIUtils",void 0);v.__decorate([w.aliasOf("viewModel.spatialReference")],A.prototype,"spatialReference",void 0);v.__decorate([w.aliasOf("viewModel.title")],
A.prototype,"title",void 0);v.__decorate([S.property()],A.prototype,"visibleElements",void 0);v.__decorate([Y.cast("visibleElements")],A.prototype,"castVisibleElements",null);v.__decorate([w.aliasOf("viewModel.map")],A.prototype,"map",void 0);v.__decorate([w.aliasOf("viewModel.view")],A.prototype,"view",void 0);v.__decorate([S.property({type:H})],A.prototype,"viewModel",void 0);return A=v.__decorate([O.subclass("esri.widgets.Feature")],A)});