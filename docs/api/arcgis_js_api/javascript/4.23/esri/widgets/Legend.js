// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/Legend/LegendViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../intl ../../core/Accessor ../../core/Collection ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./support/ActiveLayerInfo ../../intl/locale".split(" "),function(A,I,K,q,r,L,E,F,Q,l,z,b,e,f){const t=r.ofType(e),
c="esri.layers.BuildingSceneLayer esri.layers.CSVLayer esri.layers.FeatureLayer esri.layers.GeoJSONLayer esri.layers.GeoRSSLayer esri.layers.GroupLayer esri.layers.HeatmapLayer esri.layers.ImageryLayer esri.layers.ImageryTileLayer esri.layers.MapImageLayer esri.layers.OGCFeatureLayer esri.layers.PointCloudLayer esri.layers.StreamLayer esri.layers.SceneLayer esri.layers.TileLayer esri.layers.VoxelLayer esri.layers.WFSLayer esri.layers.WMSLayer esri.layers.WMTSLayer esri.layers.WCSLayer".split(" "),
g=["view.basemapView.baseLayerViews","view.groundView.layerViews","view.layerViews","view.basemapView.referenceLayerViews"];K=function(y){function u(k){k=y.call(this,k)||this;k._handles=new L;k._layerViewByLayerId={};k._layerInfosByLayerViewId={};k._activeLayerInfosByLayerViewId={};k._activeLayerInfosWithNoParent=new r;k.activeLayerInfos=new t;k.basemapLegendVisible=!1;k.groundLegendVisible=!1;k.hideLayersNotInCurrentView=!1;k.keepCacheOnDestroy=!1;k.respectLayerVisibility=!0;k.layerInfos=[];k.view=
null;return k}A._inheritsLoose(u,y);var B=u.prototype;B.initialize=function(){this._handles.add(E.init(this,"view",this._viewHandles),"view");this._handles.add(f.onLocaleChange(()=>this._refresh()))};B.destroy=function(){this._destroyViewActiveLayerInfos();this._handles.destroy();this.view=this._handles=null};B._viewHandles=function(){this._handles.remove("state");this.view&&this._handles.add(E.init(this,"state",this._stateHandles),"state")};B._stateHandles=function(){this._resetAll();"ready"===this.state&&
this._watchPropertiesAndAllLayerViews()};B._resetAll=function(){this._handles.remove(["all-layer-views","legend-properties"]);this._destroyViewActiveLayerInfos();this.activeLayerInfos.removeAll()};B._destroyViewActiveLayerInfos=function(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)};B._destroyViewActiveLayerInfo=function(k){this._handles.remove(k);const w=this._activeLayerInfosByLayerViewId[k];delete this._activeLayerInfosByLayerViewId[k];w&&w.parent&&
w.parent.children.remove(w)};B._watchPropertiesAndAllLayerViews=function(){const {allLayerViews:k}=this.view;k.length&&this._refresh();this._handles.add(k.on("change",this._allLayerViewsChangeHandle.bind(this)),"all-layer-views");this._handles.add(E.watch(this,"layerInfos, basemapLegendVisible, groundLegendVisible",this._propertiesChangeHandle.bind(this)),"legend-properties")};B._allLayerViewsChangeHandle=function(k){k.removed.forEach(w=>this._destroyViewActiveLayerInfo(w.uid));this._refresh()};B._propertiesChangeHandle=
function(){this._destroyViewActiveLayerInfos();this._refresh()};B._refresh=function(){this._layerInfosByLayerViewId={};this.activeLayerInfos.removeAll();this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this);this._sortActiveLayerInfos(this.activeLayerInfos)};B._sortActiveLayerInfos=function(k){if(!(2>k.length)){var w=[];k.forEach(v=>{if(!v.parent){var n=v.layer.parent;(n=(n=n&&"uid"in n&&this._layerViewByLayerId[n.uid])&&
this._activeLayerInfosByLayerViewId[n.uid])&&-1!==k.indexOf(n)&&(w.push(v),v.parent=n,n.children.add(v),this._sortActiveLayerInfos(n.children))}});k.removeMany(w);var P={};this.view.allLayerViews.forEach((v,n)=>P[v.layer.uid]=n);k.sort((v,n)=>(P[n.layer.uid]||0)-(P[v.layer.uid]||0))}};B._generateLayerViews=function(){const k=[];g.filter(this._filterLayerViews,this).map(this.get,this).filter(w=>null!=w).forEach(this._collectLayerViews("layerViews",k));return k};B._filterLayerViews=function(k){const w=
!this.groundLegendVisible&&"view.groundView.layerViews"===k;return!(!this.basemapLegendVisible&&("view.basemapView.baseLayerViews"===k||"view.basemapView.referenceLayerViews"===k))&&!w};B._collectLayerViews=function(k,w){const P=v=>{v&&v.forEach(n=>{w.push(n);P(n[k])});return w};return P};B._filterLayerViewsByLayerInfos=function(k){const w=this.layerInfos;return w&&w.length?w.some(P=>this._hasLayerInfo(P,k)):!0};B._hasLayerInfo=function(k,w){const P=this._isLayerUIDMatching(k.layer,w.layer.uid);P&&
(this._layerInfosByLayerViewId[w.uid]=k);return P};B._isLayerUIDMatching=function(k,w){return k&&(k.uid===w||this._hasLayerUID(k.layers,w))};B._hasLayerUID=function(k,w){return k&&k.some(P=>this._isLayerUIDMatching(P,w))};B._isLayerViewSupported=function(k){return c.includes(k.layer.declaredClass)?(this._layerViewByLayerId[k.layer.uid]=k,!0):!1};B._generateActiveLayerInfo=function(k){this._isLayerActive(k)?this._buildActiveLayerInfo(k):(this._handles.remove(k.uid),this._handles.add(E.watch(k,"legendEnabled, layer.legendEnabled",
()=>this._layerActiveHandle(k)),k.uid))};B._layerActiveHandle=function(k){this._isLayerActive(k)&&(this._handles.remove(k.uid),this._buildActiveLayerInfo(k))};B._isLayerActive=function(k){return this.respectLayerVisibility?k.legendEnabled&&k.get("layer.legendEnabled"):!0};B._buildActiveLayerInfo=function(k){var w,P=k.layer;const v=k.uid;var n=this._layerInfosByLayerViewId[v];let J=this._activeLayerInfosByLayerViewId[v];J||(J=new e({layer:P,layerView:k,title:n&&void 0!==n.title&&n.layer.uid===P.uid?
n.title:P.title,view:this.view,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:n&&n.sublayerIds||[]}),this._activeLayerInfosByLayerViewId[v]=J);n=P.parent&&"uid"in P.parent&&this._layerViewByLayerId[null==(w=P.parent)?void 0:w.uid];J.parent=this._activeLayerInfosByLayerViewId[null==n?void 0:n.uid];if(!this._handles.has(v)){w=E.watch(P,"title",U=>this._titleHandle(U,J));n=E.watch(P,
"renderer?, opacity, pointSymbol?, lineSymbol?, polygonSymbol?",()=>this._constructLegendElements(J));const X=E.whenTrue(this.view,"stationary",()=>this._scaleHandle(J)),Y=E.watch(k,"_effectiveRenderer",()=>this._constructLegendElements(J)),D=E.watch(P,"effect",()=>this._constructLegendElements(J));w=[w,n,X,Y,D];this.respectLayerVisibility&&(k=E.watch(k,"legendEnabled",U=>this._legendEnabledHandle(U,J)),P=E.watch(P,"legendEnabled",U=>this._legendEnabledHandle(U,J)),w.push(k,P));this._handles.add(w,
v)}J.isScaleDriven||this._constructLegendElements(J);this._addActiveLayerInfo(J)};B._titleHandle=function(k,w){w.title=k;this._constructLegendElements(w)};B._legendEnabledHandle=function(k,w){k?this._addActiveLayerInfo(w):this._removeActiveLayerInfo(w)};B._scaleHandle=function(k){(k.isScaleDriven||k.hideLayersNotInCurrentView)&&this._constructLegendElements(k)};B._addActiveLayerInfo=function(k){const {layerView:w,layer:P}=k;if(this._isLayerActive(w)&&-1===this.activeLayerInfos.indexOf(k)){var v=k.parent;
if(v)-1===v.children.indexOf(k)&&v.children.push(k),this._sortActiveLayerInfos(v.children);else{var n;v=null==(n=this.layerInfos)?void 0:n.some(J=>J.layer.uid===P.uid);P.parent&&"uid"in P.parent&&!v?this._activeLayerInfosWithNoParent.add(k):(this.activeLayerInfos.add(k),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const J=[];this._activeLayerInfosWithNoParent.forEach(X=>{var Y=X.layer.parent;Y=Y&&"uid"in Y&&this._layerViewByLayerId[null==Y?void 0:
Y.uid];if(Y=this._activeLayerInfosByLayerViewId[null==Y?void 0:Y.uid])J.push(X),X.parent=Y});J.length&&(this._activeLayerInfosWithNoParent.removeMany(J),J.forEach(X=>this._addActiveLayerInfo(X)))}}};B._removeActiveLayerInfo=function(k){const w=k.parent;w?w.children.remove(k):this.activeLayerInfos.remove(k)};B._constructLegendElements=function(k){const w=k.layer;"featureCollections"in w&&w.featureCollections?k.buildLegendElementsForFeatureCollections(w.featureCollections):"renderer"in w&&w.renderer?
k.buildLegendElementsForRenderer(w.renderer):"url"in w&&w.url?k.buildLegendElementsForTools():k.children.forEach(P=>this._constructLegendElements(P))};A._createClass(u,[{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}}]);return u}(q);I.__decorate([F.property({type:t})],K.prototype,"activeLayerInfos",void 0);I.__decorate([F.property()],K.prototype,"basemapLegendVisible",void 0);I.__decorate([F.property()],K.prototype,"groundLegendVisible",void 0);I.__decorate([F.property()],
K.prototype,"hideLayersNotInCurrentView",void 0);I.__decorate([F.property()],K.prototype,"keepCacheOnDestroy",void 0);I.__decorate([F.property()],K.prototype,"respectLayerVisibility",void 0);I.__decorate([F.property()],K.prototype,"layerInfos",void 0);I.__decorate([F.property({readOnly:!0})],K.prototype,"state",null);I.__decorate([F.property()],K.prototype,"view",void 0);return K=I.__decorate([b.subclass("esri.widgets.Legend.LegendViewModel")],K)})},"esri/widgets/Legend/support/ActiveLayerInfo":function(){define("require ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../kernel ../../../request ../../../symbols ../../../core/Accessor ../../../core/Collection ../../../core/Handles ../../../core/jsonMap ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../core/screenUtils ../../../core/urlUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/PropertyOrigin ../../../layers/effects/EffectView ../../../layers/effects/jsonUtils ../../../layers/support/ExportImageParameters ../../../layers/support/fieldUtils ../../../renderers/support/jsonUtils ../../../renderers/support/rendererConversion ../../../renderers/visualVariables/support/SizeVariableLegendOptions ../../../symbols/support/cimSymbolUtils ../../../symbols/support/previewUtils ../../../symbols/support/renderUtils ../../../symbols/support/symbolUtils ../../../symbols/support/utils ./clusterUtils ./colorRampUtils ./heatmapRampUtils ./relationshipRampUtils ./sizeRampUtils ./utils ../../smartMapping/support/utils ../../../symbols/SimpleMarkerSymbol ../../../symbols/SimpleFillSymbol".split(" "),
function(A,I,K,q,r,L,E,F,Q,l,z,b,e,f,t,c,g,y,u,B,k,w,P,v,n,J,X,Y,D,U,d,h,M,S,W,m,C,G,T,ea,ba,H,O,Z){function fa(sa){return"esri.renderers.SimpleRenderer"===sa.declaredClass}function ja(sa){return"esri.renderers.ClassBreaksRenderer"===sa.declaredClass}function ra(sa){return"esri.renderers.UniqueValueRenderer"===sa.declaredClass}function qa(sa){return"esri.renderers.HeatmapRenderer"===sa.declaredClass}function la(sa){return"esri.renderers.PointCloudClassBreaksRenderer"===sa.declaredClass}function na(sa){return"esri.renderers.PointCloudStretchRenderer"===
sa.declaredClass}function ca(sa){return"esri.renderers.PointCloudUniqueValueRenderer"===sa.declaredClass}function ta(sa){return"esri.renderers.DotDensityRenderer"===sa.declaredClass}function oa(sa){return"esri.layers.BuildingSceneLayer"===sa.declaredClass}function wa(sa){sa="authoringInfo"in sa&&(null==sa?void 0:sa.authoringInfo);return"univariate-color-size"===(null==sa?void 0:sa.type)}function xa(sa){sa="authoringInfo"in sa&&(null==sa?void 0:sa.authoringInfo);return"univariate-color-size"===(null==
sa?void 0:sa.type)&&"above-and-below"===(null==sa?void 0:sa.univariateTheme)}const za=b.getLogger("esri.widgets.Legend.support.ActiveLayerInfo"),ya=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,Ea=new z.JSONMap({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Fa={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],
f32:[-3.4*1E39,3.4*1E39],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},Ia=new O({size:6,outline:{color:[128,128,128,.5],width:.5}}),Na=new Z({style:"solid"}),Oa=new O({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let Ha={};E=function(sa){function Ja(p){p=sa.call(this,p)||this;p._handles=new l;p._hasColorRamp=!1;p._hasOpacityRamp=!1;p._hasSizeRamp=!1;p._webStyleSymbolCache=new Map;p._dotDensityUrlCache=new Map;p._scaleDrivenSizeVariable=null;p._hasClusterSizeVariable=
!1;p.children=new Q;p.layerView=null;p.layer=null;p.legendElements=[];p.parent=null;p.hideLayersNotInCurrentView=!1;p.keepCacheOnDestroy=!1;p.respectLayerVisibility=!0;p.sublayerIds=[];p.title=null;p.view=null;return p}I._inheritsLoose(Ja,sa);var ia=Ja.prototype;ia.initialize=function(){const p=()=>this.notifyChange("ready");this._handles.add([g.on(this,"children","change",a=>{const {added:x,removed:N}=a,R=this._handles;x.forEach(V=>{const aa=`activeLayerInfo-ready-watcher-${V.layer.uid}`;R.add(g.init(V,
"ready",p),aa)});N.forEach(V=>R.remove(V.layer.uid));p()})]);this.keepCacheOnDestroy||(Ha={})};ia.destroy=function(){this._handles.destroy();this._scaleDrivenSizeVariable=this._dotDensityUrlCache=this._webStyleSymbolCache=this._handles=null;this.keepCacheOnDestroy||(Ha=null)};ia.buildLegendElementsForFeatureCollections=function(){var p=I._asyncToGenerator(function*(a){if(this.hideLayersNotInCurrentView&&!(yield this._isLayerInCurrentView()))this.legendElements=[],this.notifyChange("ready");else{a=
Array.from(a,x=>{if("esri.layers.FeatureLayer"===x.declaredClass)return this._getRendererLegendElements(x.renderer,{title:x.title});if(x.featureSet&&x.featureSet.features.length){var N=x.layerDefinition,R=N&&N.drawingInfo;R=R&&Y.fromJSON(R.renderer);N=Ea.read(N.geometryType);return R?this._getRendererLegendElements(R,{title:x.name,geometryType:N}):(za.warn("drawingInfo not available!"),null)}return null});try{const x=[];yield f.eachAlways(a).then(N=>{N.forEach(({value:R})=>R&&x.push(...R))});this.legendElements=
x;this.notifyChange("ready")}catch(x){za.warn("error while building legend for layer!",x)}}});return function(a){return p.apply(this,arguments)}}();ia.buildLegendElementsForRenderer=function(){var p=I._asyncToGenerator(function*(a){try{this.legendElements=(this.hideLayersNotInCurrentView?yield this._isLayerInCurrentView():1)?yield this._getRendererLegendElements(a):[],this.notifyChange("ready")}catch(x){za.warn("error while building legend for layer!",x)}});return function(a){return p.apply(this,
arguments)}}();ia.buildLegendElementsForTools=function(){var p=I._asyncToGenerator(function*(){var a=this;const x=this.layer;if("esri.layers.VoxelLayer"===x.declaredClass)this._constructLegendElementsForVoxellayer();else if("esri.layers.WMTSLayer"===x.declaredClass)this._constructLegendElementsForWMTSlayer();else if("esri.layers.WMSLayer"===x.declaredClass)yield this._constructLegendElementsForWMSSublayers();else if(oa(x))yield this._constructLegendElementsForBuildingSceneLayer();else if("esri.layers.MapImageLayer"===
x.declaredClass||"esri.layers.TileLayer"===x.declaredClass||oa(x))yield this._constructLegendElementsForSublayers();else{this._handles.remove("imageryLayers-watcher");var N="default";if("esri.layers.ImageryLayer"===x.declaredClass){var R,V;N=(null==x?void 0:null==(R=x.renderingRule)?void 0:R.functionName)||"default";R=null!=(V=x.bandIds)&&V.length?x.bandIds.join(""):"###";N=N+"_"+R}yield this._getLegendLayers(`${x.uid}-${N}`).then(function(){var aa=I._asyncToGenerator(function*(da){a.legendElements=
[];a.notifyChange("ready");da=da.map(function(){var ma=I._asyncToGenerator(function*(ua){if("esri.layers.ImageryLayer"===x.declaredClass||"esri.layers.ImageryTileLayer"===x.declaredClass){const Ca=x.watch(["renderingRule","bandIds"],()=>f.debounce(I._asyncToGenerator(function*(){Ha["default"]=null;x.renderer?yield a.buildLegendElementsForRenderer(x.renderer):yield a.buildLegendElementsForTools()}))());a._handles.add(Ca,"imageryLayers-watcher")}(ua=a._generateSymbolTableElementForLegendLayer(ua))&&
ua.infos.length&&("esri.layers.ImageryLayer"===x.declaredClass&&(ua.title=x.title),a.legendElements.push(ua));a.notifyChange("ready")});return function(ua){return ma.apply(this,arguments)}}());yield f.eachAlways(da)});return function(da){return aa.apply(this,arguments)}}()).catch(aa=>{za.warn("Request to server for legend has failed!",aa)})}});return function(){return p.apply(this,arguments)}}();ia._isLayerInCurrentView=function(){var p=I._asyncToGenerator(function*(){const a=this.layer,x=this.layerView,
N=x&&"createQuery"in x&&"queryFeatureCount"in x;if(!(N||x&&"createQuery"in a&&"queryFeatureCount"in a))return!0;yield g.whenFalseOnce(x,"updating");const R=N?"createQuery"in x&&x.createQuery():"createQuery"in a&&a.createQuery();R.geometry=this.view.extent;return 0!==(N?"queryFeatureCount"in x&&(yield x.queryFeatureCount(R)):"queryFeatureCount"in a&&(yield a.queryFeatureCount(R)))});return function(){return p.apply(this,arguments)}}();ia._getParentLayerOpacity=function(p){let a=1;const x=p.parent;
x&&"uid"in x&&(a=this._getParentLayerOpacity(x));return p.opacity*a};ia._isGroupActive=function(){const p=this.children;return p.length?p.some(a=>a.ready):!1};ia._isScaleDrivenSizeVariable=function(p){if(p&&"size"!==p.type)return!1;const a=p.minSize,x=p.maxSize;return"object"===typeof a&&a?this._isScaleDrivenSizeVariable(a):"object"===typeof x&&x?this._isScaleDrivenSizeVariable(x):!!p.expression||ya.test(p.valueExpression)};ia._isLayerScaleDriven=function(p){if("minScale"in p&&0<p.minScale||"maxScale"in
p&&0<p.maxScale)return!0;if("sublayers"in p&&p.sublayers)return p.sublayers.some(x=>this._isLayerScaleDriven(x));const a=p.parent;if(!1===p.loaded&&a&&"esri.layers.MapImageLayer"===a.declaredClass&&"source"in p&&p.source&&"map-layer"===p.source.type)for(const x of a.sourceJSON.layers)if(x.id===p.source.mapLayerId&&(0<x.minScale||0<x.maxScale))return!0;return!1};ia._constructLegendElementsForVoxellayer=function(){var p=I._asyncToGenerator(function*(){this.legendElements=[];this._handles.remove("voxel-style-watcher");
var a=this.layer;this._handles.add(g.watch(a,"style",()=>this._constructLegendElementsForVoxellayer()),"voxel-style-watcher");const x=e.unwrap(a.getVariableStyle(null)),N=[];if(x){var R;if(null!=(R=x.uniqueValues)&&R.length){const aa=[];x.uniqueValues.forEach(da=>{da.enabled&&aa.push({label:da.label||`${da.value}`,value:da.value,symbol:new Z({color:da.color,outline:null})})});aa.length&&N.push({type:"symbol-table",title:x.label,infos:aa})}else if(x.transferFunction){const {colorStops:aa,stretchRange:da}=
x.transferFunction;R=aa.toArray().reverse();const ma=da.map((Ca,ha)=>`${0===ha?ba.SPECIAL_CHARS_LESS_THAN:ba.SPECIAL_CHARS_GREATER_THAN} ${H.formatNumberLabel(Ca)}`).reverse(),ua=R.map(Ca=>({color:Ca.color,value:null,label:null}));ua[0].label=ma[0];ua[ua.length-1].label=ma[1];N.push({type:"color-ramp",title:x.label,infos:ua,preview:S.renderColorRampPreviewHTML(R.map(Ca=>Ca.color))})}}const V=a.opacity;a=N.reduce((aa,da)=>aa.concat(this._getAllInfos(da)),[]).filter(aa=>!(null==aa||!aa.symbol)).map(aa=>
this._getSymbolPreview(aa,V));yield f.eachAlways(a);this.legendElements=N;this.notifyChange("ready")});return function(){return p.apply(this,arguments)}}();ia._constructLegendElementsForWMTSlayer=function(){this.legendElements=[];this._handles.remove("wmts-activeLayer-watcher");const p=this.layer.activeLayer;this._handles.add(g.watch(this.layer,"activeLayer",()=>this._constructLegendElementsForWMTSlayer()),"wmts-activeLayer-watcher");if(p.styleId&&p.styles){let a=null;p.styles.some(x=>p.styleId===
x.id?(a=x.legendUrl,!0):!1);a&&(this.legendElements=[{type:"symbol-table",title:p.title,infos:[{src:a,opacity:this.opacity}]}])}this.notifyChange("ready")};ia._constructLegendElementsForWMSSublayers=function(){var p=I._asyncToGenerator(function*(){this.legendElements=[];this._handles.remove("wms-sublayers-watcher");const a=this.layer;let x=null;if(a.customParameters||a.customLayerParameters)x={...a.customParameters,...a.customLayerParameters};this._handles.add(g.watch(this.layer,"sublayers",()=>this._constructLegendElementsForWMSSublayers()),
"wms-sublayers-watcher");this.legendElements=yield this._generateLegendElementsForWMSSublayers(a.sublayers,x);this.notifyChange("ready")});return function(){return p.apply(this,arguments)}}();ia._generateLegendElementsForWMSSublayers=function(){var p=I._asyncToGenerator(function*(a,x){const N=[];this._handles.add(a.on("change",()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");a=a.toArray();for(const R of a)a=R.watch(["title","visible","legendEnabled"],()=>this._constructLegendElementsForWMSSublayers()),
this._handles.add(a,"wms-sublayers-watcher"),(!this.respectLayerVisibility||R.visible&&R.legendEnabled)&&(a=yield this._generateSymbolTableElementForWMSSublayer(R,x))&&a.infos.length&&N.unshift(a);return N});return function(a,x){return p.apply(this,arguments)}}();ia._generateSymbolTableElementForWMSSublayer=function(){var p=I._asyncToGenerator(function*(a,x){return!a.legendUrl&&a.sublayers?(x=(yield this._generateLegendElementsForWMSSublayers(a.sublayers,x)).filter(N=>N),{type:"symbol-table",title:a.title,
infos:x}):this._generateSymbolTableElementForLegendUrl(a,x)});return function(a,x){return p.apply(this,arguments)}}();ia._generateSymbolTableElementForLegendUrl=function(){var p=I._asyncToGenerator(function*(a,x){var N;let R=a.legendUrl;if(R){var V={type:"symbol-table",title:a.title||a.name||a.id&&a.id+"",infos:[]};x&&(R=c.addQueryParameters(R,x));x=null;a=null==(N=a.layer)?void 0:N.opacity;try{if(x=(yield L(R,{responseType:"image"})).data)x.style.opacity=a}catch{}V.infos.push({src:R,preview:x,opacity:a});
return V}});return function(a,x){return p.apply(this,arguments)}}();ia._getLegendLayers=function(p,a){const x=Ha&&Ha[p];return x?Promise.resolve(x):this._legendRequest(a).then(N=>{N=N.layers;return Ha[p]=N})};ia._legendRequest=function(p){var a=this.layer;p={f:"json",dynamicLayers:p};if("esri.layers.ImageryLayer"===a.declaredClass){var x=a.exportImageServiceParameters.renderingRule;x&&(p.renderingRule=JSON.stringify(x.rasterFunctionDefinition||x.toJSON()));a.bandIds&&(p.bandIds=a.bandIds.join());
if(a.raster||a.viewId||a.customParameters){const {raster:N,viewId:R,customParameters:V}=a;p={raster:N,viewId:R,...p,...V}}}x=a.url.replace(/(\/)+$/,"");"version"in a&&10.01<=a.version?(a=x.indexOf("?"),x=-1<a?x.substring(0,a)+"/legend"+x.substring(a):x+"/legend"):(a=x.toLowerCase().indexOf("/rest/"),a=x.substring(0,a)+x.substring(a+5,x.length),x="https://utility.arcgis.com/sharing/tools/legend?soapUrl\x3d"+encodeURI(a)+"\x26returnbytes\x3dtrue");return L(x,{query:p}).then(N=>N.data)};ia._constructLegendElementsForBuildingSceneLayer=
function(){var p=I._asyncToGenerator(function*(){this.legendElements=[];this._handles.remove("sublayers-watcher");const a=this.layer;this._handles.add(g.watch(a,"sublayers",()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");try{this.legendElements=yield this._generateLegendElementsForBuildingSublayers(a.sublayers,this.opacity),this.notifyChange("ready")}catch(x){za.warn("Request to server for legend has failed!",x)}});return function(){return p.apply(this,arguments)}}();
ia._generateLegendElementsForBuildingSublayers=function(){var p=I._asyncToGenerator(function*(a,x){let N=[];this._handles.add(a.on("change",()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");a=a.toArray();for(const V of a)if(a=V.watch(["renderer","opacity","title","visible"],()=>this._constructLegendElementsForBuildingSceneLayer()),this._handles.add(a,"sublayers-watcher"),!this.respectLayerVisibility||V.visible){a=V&&null!=V.opacity?V.opacity:null;var R=null!=a?a*x:x;"building-group"===
V.type?(a={type:"symbol-table",title:V.title,infos:[]},R=yield this._generateLegendElementsForBuildingSublayers(V.sublayers,R),a.infos.push(...R),N=[a,...N]):V.renderer&&(N=[...yield this._getRendererLegendElements(V.renderer,{title:V.title,opacity:R,sublayer:V}),...N])}return N.filter(V=>!!V&&("infos"in V?0<V.infos.length:!0))});return function(a,x){return p.apply(this,arguments)}}();ia._constructLegendElementsForSublayers=function(){var p=I._asyncToGenerator(function*(){this.legendElements=[];this._handles.remove("sublayers-watcher");
const a=this.layer;this._handles.add(g.watch(a,"sublayers",()=>this._constructLegendElementsForSublayers),"sublayers-watcher");try{this.legendElements=yield this._generateLegendElementsForSublayers(a.sublayers,this.opacity),this.notifyChange("ready")}catch(x){za.warn("Request to server for legend has failed!",x)}});return function(){return p.apply(this,arguments)}}();ia._generateLegendElementsForSublayers=function(){var p=I._asyncToGenerator(function*(a,x,N){const R=this.layer;let V=[];this._handles.add(a.on("change",
()=>this._constructLegendElementsForSublayers()),"sublayers-watcher");a=a.toArray();!N&&this.sublayerIds&&this.sublayerIds.length&&(a=this.sublayerIds.map(aa=>R.findSublayerById(aa)).filter(Boolean));for(const aa of a)if(a=aa.watch("renderer, opacity, title, visible, legendEnabled",()=>this._constructLegendElementsForSublayers()),this._handles.add(a,"sublayers-watcher"),!this.respectLayerVisibility||aa.visible&&aa.legendEnabled&&this._isSublayerInScale(aa))a=aa&&null!=aa.opacity?aa.opacity:null,a=
null!=a?a*x:x,aa.renderer&&!aa.sublayers&&aa.originIdOf("renderer")>P.OriginId.SERVICE?(yield aa.load(),V=[...yield this._getRendererLegendElements(aa.renderer,{title:aa.title,opacity:a,sublayer:aa}),...V]):(a=yield this._generateSymbolTableElementForSublayer(aa,a,N))&&V.unshift(a);return V.filter(aa=>!!aa&&("infos"in aa?0<aa.infos.length:!0))});return function(a,x,N){return p.apply(this,arguments)}}();ia._generateSymbolTableElementForSublayer=function(){var p=I._asyncToGenerator(function*(a,x,N){if(!N){N=
new Map;var R=this.layer,V=a.source;let aa=null;if(V&&("map-layer"!==V.type||V.mapLayerId!==a.id||V.gdbVersion&&V.gdbVersion!==("gdbVersion"in R&&R.gdbVersion))||a.originIdOf("renderer")>P.OriginId.SERVICE||a.originIdOf("labelingInfo")>P.OriginId.SERVICE||a.originIdOf("labelsVisible")>P.OriginId.SERVICE)V=new J.ExportImageParameters({layer:this.layer}),aa=V.hasDynamicLayers?V.dynamicLayers:null,V.destroy();(yield this._getLegendLayers(aa||`${R.uid}-default`,aa)).forEach(da=>N.set(da.layerId,da))}R=
N.get(a.id);return(!R||null!=R&&R.subLayerIds&&R.defaultVisibility)&&a.sublayers?(x=yield this._generateLegendElementsForSublayers(a.sublayers,x,N),{type:"symbol-table",title:a.title,infos:x}):this._generateSymbolTableElementForLegendLayer(R,a,x)});return function(a,x,N){return p.apply(this,arguments)}}();ia._generateSymbolTableElementForLegendLayer=function(p,a,x){var N;if(!p||!p.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(p,a))return null;var R=null==a?void 0:a.renderer;let V=
(null==a?void 0:a.title)||p.layerName;R&&(!a||(null==a?void 0:a.originIdOf("renderer"))>P.OriginId.SERVICE)&&(R=(null==a?void 0:a.title)||this._getRendererTitle(R,a))&&(V&&"string"!==typeof R&&"title"in R&&(R.title=V),V=R);const aa={type:"symbol-table",title:V,legendType:p.legendType?p.legendType:null,infos:[]},da=a?this._sanitizeLegendForSublayer(p.legend.slice(),a):p.legend;0<(null==(N=p.legendGroups)?void 0:N.length)?p.legendGroups.forEach(ma=>{var ua;const Ca={type:"symbol-table",title:ma.heading,
legendType:p.legendType?p.legendType:null,infos:this._generateSymbolTableElementInfosForLegendLayer(da.filter(ha=>ha.groupId===ma.id),p.layerId,x)};0<(null==(ua=Ca.infos)?void 0:ua.length)&&aa.infos.push(Ca)}):aa.infos=this._generateSymbolTableElementInfosForLegendLayer(da,p.layerId,x);return 0<aa.infos.length?aa:null};ia._generateSymbolTableElementInfosForLegendLayer=function(p,a,x){return p.map(N=>{let R=N.url;if(N.imageData&&0<N.imageData.length)R=`data:image/png;base64,${N.imageData}`;else if(0!==
R.indexOf("http"))R=r.addTokenParameter(`${this.layer.url}/${a}/images/${R}`);else return null;return{label:N.label,src:R,opacity:null==x?this.opacity:x,width:N.width,height:N.height}}).filter(N=>!!N)};ia._isSublayerInScale=function(p){const a=p.minScale||0;p=p.maxScale||0;return 0<a&&a<this.scale||p>this.scale?!1:!0};ia._isLegendLayerInScale=function(p,a){a=a||this.layer;let x=null,N=null,R=!0;!a.minScale&&0!==a.minScale||!a.maxScale&&0!==a.maxScale?(0===p.minScale&&a.tileInfo&&(x=a.tileInfo.lods[0].scale),
0===p.maxScale&&a.tileInfo&&(N=a.tileInfo.lods[a.tileInfo.lods.length-1].scale)):(x=Math.min(a.minScale,p.minScale)||a.minScale||p.minScale,N=Math.max(a.maxScale,p.maxScale));if(0<x&&x<this.scale||N>this.scale)R=!1;return R};ia._sanitizeLegendForSublayer=function(p,a){if("version"in this.layer&&10.1>this.layer.version||0===p.length)return p;a=a.renderer;let x=null,N=null;p.some(R=>R.values)&&p.some((R,V)=>{R.values||(x=V,N=R,N.label||(N.label="others"));return null!=N});a?"unique-value"===a.type?
N&&(p.splice(x,1),p.push(N)):"class-breaks"===a.type&&(N&&p.splice(x,1),p.reverse(),N&&p.push(N)):N&&(p.splice(x,1),p.push(N));return p};ia._getRendererLegendElements=function(){var p=I._asyncToGenerator(function*(a,x={}){var N=this.view;N=fa(a)||ja(a)||ra(a)||qa(a)||ta(a)?"2d"===N.type||D.isSupportedRenderer3D(a):"raster-stretch"===a.type||"raster-colormap"===a.type||"raster-shaded-relief"===a.type||la(a)||na(a)||ca(a)||"vector-field"===a.type||"flow"===a.type;return N?la(a)||na(a)||ca(a)||"esri.renderers.PointCloudRGBRenderer"===
a.declaredClass?this._constructPointCloudRendererLegendElements(a,x):ta(a)?this._constructDotDensityRendererLegendElements(a):this._constructRendererLegendElements(a,x):(za.warn(`Renderer of type '${a.type}' not supported!`),[])});return function(a){return p.apply(this,arguments)}}();ia._getPointCloudRendererTitle=function(p){return p.legendOptions&&p.legendOptions.title||p.field};ia._constructPointCloudRendererLegendElements=function(p,a={}){a=a.title;const x=[];let N=null;var R=null;if(la(p))N=
{type:"symbol-table",title:a||this._getPointCloudRendererTitle(p),infos:[]},p.colorClassBreakInfos.forEach(V=>{N.infos.unshift({label:V.label||V.minValue+" - "+V.maxValue,value:[V.minValue,V.maxValue],symbol:this._getAppliedCloneSymbol(Ia,V.color)})});else if(na(p)){R=p.stops;let V=null;if(R.length&&(1===R.length&&(V=R[0].color),!V)){const aa=R[0].value,da=R[R.length-1].value;null!=aa&&null!=da&&(V=C.getColorFromPointCloudStops(aa+(da-aa)/2,R))}N={type:"symbol-table",title:null,infos:[{label:null,
value:null,symbol:this._getAppliedCloneSymbol(Ia,V||Ia.color)}]};R=C.getRampStopsForPointCloud(p.stops);R={type:"color-ramp",title:a||this._getPointCloudRendererTitle(p),infos:R,preview:S.renderColorRampPreviewHTML(R.map(aa=>aa.color))}}else ca(p)&&(N={type:"symbol-table",title:a||this._getPointCloudRendererTitle(p),infos:[]},p.colorUniqueValueInfos.forEach(V=>{N.infos.push({label:V.label||V.values.join(", "),value:V.values.join(", "),symbol:this._getAppliedCloneSymbol(Ia,V.color)})}));N&&N.infos.length&&
x.push(N);R&&R.infos.length&&x.push(R);a=x.reduce((V,aa)=>V.concat(aa.infos),[]).filter(V=>!!V.symbol).map(V=>this._getSymbolPreview(V,this.opacity,{symbolConfig:{applyColorModulation:!!p.colorModulation}}));return f.eachAlways(a).then(()=>x)};ia._getElementInfoForDotDensity=function(p,a){const {backgroundColor:x,outline:N,dotSize:R}=p;var V=this.effectList;V=null==V?void 0:V.effects.map(da=>da.toJSON());V=n.effectFunctionsFromJSON(V);V=R+"-"+a+"-"+x+"-"+(N&&JSON.stringify(N.toJSON()))+"-"+V;const aa=
this._dotDensityUrlCache;p=aa.has(V)?aa.get(V):S.renderDotDensityPreviewHTML(p,a);aa.set(V,p);a=M.renderSymbol([[{shape:{type:"image",x:0,y:0,width:p.width,height:p.height,src:p.src},fill:null,stroke:null,offset:[0,0]}]],[p.width,p.height],{effectView:this.effectList});return{opacity:1,src:p.src,preview:a,width:p.width,height:p.height}};ia._constructDotDensityRendererLegendElements=function(p){const a=p.calculateDotValue(this.view.scale),x={type:"symbol-table",title:{value:a&&Math.round(a),unit:p.legendOptions&&
p.legendOptions.unit||""},infos:[]};p.attributes.forEach(N=>{const R=this._getElementInfoForDotDensity(p,N.color);R.label=N.label||N.valueExpressionTitle||N.field;x.infos.push(R)});return Promise.resolve([x])};ia._constructRendererLegendElements=function(){var p=I._asyncToGenerator(function*(a,x={}){const {title:N,sublayer:R}=x,V=R||this.layer;a=yield this._loadRenderer(a);this._hasSizeRamp=this._hasOpacityRamp=this._hasColorRamp=!1;this._scaleDrivenSizeVariable=null;const aa=(yield this._getVisualVariableLegendElements(a,
V))||[],da={type:"symbol-table",title:N||this._getRendererTitle(a,V),infos:[]};let ma=null,ua=!1;const Ca=new Set;if("flow"!==a.type||this._hasSizeRamp)if(wa(a)){var ha=N,ka=xa(a)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",Aa=aa.findIndex(pa=>"color-ramp"===pa.type);Aa=-1!==Aa?aa.splice(Aa,1)[0]:null;var va=aa.findIndex(pa=>"size-ramp"===pa.type);va=-1!==va?aa.splice(va,1)[0]:null;var Ba=[];Aa&&(ha=Aa.title,Ba.push(Aa));va&&(ha=va.title,Ba.push(va));0<Ba.length&&aa.push({type:ka,
title:ha,infos:Ba})}else if(qa(a))ha=G.getHeatmapRampStops(a),aa.push({type:"heatmap-ramp",title:N,infos:ha,preview:S.renderColorRampPreviewHTML(ha.map(pa=>pa.color),{effectList:this.effectList})});else if(ra(a)){if((ka=a&&a.authoringInfo)&&"relationship"===ka.type){const {focus:pa,numClasses:Da,field1:Ka,field2:La}=ka;if(Da&&Ka&&La){Aa=[Ka,La];ka=T.getRotationAngleForFocus(pa)||0;for(ha of Aa){const {field:Pa,normalizationField:Ma,label:Qa}=ha;Aa=Qa||{field:this._getFieldAlias(Pa,V),normField:Ma&&
this._getFieldAlias(Ma,V)};va=Oa.clone();va.angle=ka;da.infos.push({label:Aa,symbol:va});Ca.add(va);ka+=90}ha=T.getRelationshipRampElement({focus:pa,numClasses:Da,infos:a.uniqueValueInfos});aa.unshift(ha)}}else{const pa=a.field;a.uniqueValueInfos.forEach(Da=>{Da.symbol&&da.infos.push({label:Da.label||this._getDomainName(pa,Da.value,V)||Da.value,value:Da.value,symbol:Da.symbol})})}a.defaultSymbol&&(da.infos.push({label:a.defaultLabel||"others",symbol:a.defaultSymbol}),ua=!0)}else if(ja(a))ma=this._isUnclassedRenderer(a),
ma&&this._hasSizeRamp||(a.classBreakInfos.forEach(pa=>{pa.symbol&&da.infos.unshift({label:pa.label||(ma?null:pa.minValue+" - "+pa.maxValue),value:[pa.minValue,pa.maxValue],symbol:pa.symbol})}),ma&&(da.title=null),this._updateInfosforClassedSizeRenderer(a,da.infos)),a.defaultSymbol&&!ma&&(da.infos.push({label:a.defaultLabel||"others",symbol:a.defaultSymbol}),ua=!0);else if("raster-stretch"===a.type)if("esri.layers.ImageryTileLayer"===this.layer.declaredClass||"esri.layers.WCSLayer"===this.layer.declaredClass)ha=
this._constructTileImageryStretchRendererElements(a),"stretch-ramp"===ha.type?aa.push(ha):da.infos=ha;else{ha=this.layer;a.statistics&&a.statistics.length&&(ka=null!=a.statistics[0].min?a.statistics[0].min:a.statistics[0][0],Aa=null!=a.statistics[0].max?a.statistics[0].max:a.statistics[0][1]);va=[];va=e.unwrap(ha.renderingRule?yield ha.generateRasterInfo(ha.renderingRule):ha.serviceRasterInfo);const pa=va.keyProperties.BandProperties;Ba=Fa[ha.rasterInfo.pixelType.toLowerCase()];1===va.bandCount?(ka=
null!=ka?ka:va.statistics?va.statistics[ha.bandIds[0]].min:Ba[0],Aa=null!=Aa?Aa:va.statistics?va.statistics[ha.bandIds[0]].max:Ba[1],ka||Aa?aa.push(this._getStretchLegendElements(a,{min:ka,max:Aa})):this._getServerSideLegend()):ha.bandIds&&1===ha.bandIds.length?(ka=null!=ka?ka:va.statistics?va.statistics[ha.bandIds[0]].min:Ba[0],Aa=null!=Aa?Aa:va.statistics?va.statistics[ha.bandIds[0]].max:Ba[1],ka||Aa?aa.push(this._getStretchLegendElements(a,{min:ka,max:Aa})):this._getServerSideLegend()):3<=va.bandCount?
pa&&pa.length>=va.bandCount?ha.bandIds&&3===ha.bandIds.length?(va=ha.bandIds.map(Da=>pa[Da].BandName),da.infos=this._createSymbolTableElementMultiBand(va)):"lerc"===ha.format?(va=[0,1,2].map(Da=>pa[Da].BandName),da.infos=this._createSymbolTableElementMultiBand(va)):this._getServerSideLegend():"lerc"===ha.format?(va=["band1","band2","band3"],da.infos=this._createSymbolTableElementMultiBand(va)):this._getServerSideLegend():this._getServerSideLegend()}else if("raster-colormap"===a.type)a.colormapInfos.forEach(pa=>
{da.infos.push({label:pa.label,value:pa.value,symbol:this._getAppliedCloneSymbol(Na,pa.color)})});else if(fa(a)){ha=a.symbol;switch(x.geometryType){case "point":ha="pointSymbol"in V&&V.pointSymbol;break;case "polyline":ha="lineSymbol"in V&&V.lineSymbol;break;case "polygon":ha="polygonSymbol"in V&&V.polygonSymbol}a.symbol&&!this._hasSizeRamp&&da.infos.push({label:a.label,symbol:ha})}else"vector-field"===a.type?(a.outputUnit&&(this.title="("+a.toJSON().outputUnit+")"),da.title=a.attributeField,ha=a.getClassBreakInfos(),
null!=ha&&ha.length?ha.forEach(pa=>{da.infos.push({label:pa.minValue+" - "+pa.maxValue,symbol:pa.symbol})}):da.infos.push({label:a.attributeField,symbol:a.getDefaultSymbol()})):"raster-shaded-relief"===a.type&&aa.push(this._getStretchLegendElements(a,{min:0,max:255}));else ha=yield ba.getSymbolForFlowRenderer(a),da.infos.push({label:null,symbol:ha});const Ga=a.defaultSymbol;!Ga||ua||fa(a)||ma&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||aa.push({type:"symbol-table",infos:[{label:a.defaultLabel||
"others",symbol:Ga}]});da.infos.length&&aa.unshift(da);const Ra=null==x.opacity?this.opacity:x.opacity,Sa=this._isTallSymbol("visualVariables"in a&&a.visualVariables),Ta="esri.layers.ImageryLayer"===this.layer.declaredClass||"esri.layers.ImageryTileLayer"===this.layer.declaredClass;x=aa.reduce((pa,Da)=>pa.concat(this._getAllInfos(Da)),[]).filter(pa=>!(null==pa||!pa.symbol)).map(pa=>this._getSymbolPreview(pa,Ra,{isDefault:pa.symbol===Ga,applyScaleDrivenSize:!Ca.has(pa.symbol),symbolConfig:{isTall:Sa,
isSquareFill:Ta},effectList:Ca.has(pa.symbol)?null:this.effectList}));a=null;yield f.eachAlways(x);return aa});return function(a){return p.apply(this,arguments)}}();ia._getServerSideLegend=function(){setTimeout(()=>this.buildLegendElementsForTools(),0)};ia._getAllInfos=function(p){const a=null==p?void 0:p.infos;return a?a.reduce((x,N)=>x.concat(this._getAllInfos(N)),[]):[p]};ia._constructTileImageryStretchRendererElements=function(p){function a(ua){var Ca;const ha=(null!=R&&null!=(Ca=R.bandIds)&&
Ca.length?R.bandIds:Array.from(Array(Math.min(V.bandCount,3)).keys())).map(ka=>ua&&ua[ka]&&ua[ka].BandName||"band"+(ka+1));3>ha.length?ha.push(ha[1]):3<ha.length&&ha.splice(3);return ha}var x,N;const R=this.layer,V=R.rasterInfo,aa=V.bandCount||p.statistics.length;var da,ma=[];ma=V.keyProperties&&V.keyProperties.BandProperties;(da=null!=p&&null!=(x=p.statistics)&&x.length?p.statistics:null==V?void 0:V.statistics)?(x=void 0!==da[0].min?da[0].min:da[0][0],da=da[0].max||da[0][1]):(da=Fa[R.rasterInfo.pixelType.toLowerCase()],
x=da[0],da=da[1]);R.hasStandardTime()&&(x=R.getStandardTimeValue(x),da=R.getStandardTimeValue(da));if(1===V.bandCount||1===(null==(N=R.bandIds)?void 0:N.length))return this._getStretchLegendElements(p,{min:x,max:da});ma=ma&&ma.length>=aa?a(ma):a();return this._createSymbolTableElementMultiBand(ma)};ia._getStretchLegendElements=function(p,a){p=C.getStrectchRampStops(p.colorRamp,a);return{type:"stretch-ramp",title:"",infos:p,preview:S.renderColorRampPreviewHTML(p.map(x=>x.color))}};ia._getSizeLegendElement=
function(){var p=I._asyncToGenerator(function*(a,x,N,R){return{type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(x):a,infos:yield ea.getRampStops(N,x,yield ba.getMedianColor(N),this.scale,this.view.type,R)}});return function(a,x,N,R){return p.apply(this,arguments)}}();ia._createSymbolTableElementMultiBand=function(p){const a=[],x=["red","green","blue"];p.forEach((N,R)=>{a.push({label:{colorName:x[R],bandName:N},src:ba.RGB_IMG_SOURCE[R],opacity:1})});return a};ia._updateInfosforClassedSizeRenderer=
function(p,a){const x=p.authoringInfo&&"class-breaks-size"===p.authoringInfo.type,N=p.classBreakInfos.some(R=>W.isVolumetricSymbol(R.symbol));if(x&&N){const R=ea.REAL_WORLD_MAX_SIZE;p=p.classBreakInfos.length;const V=(R-ea.REAL_WORLD_MIN_SIZE)/(1<p?p-1:p);a.forEach((aa,da)=>{aa.size=R-V*da})}};ia._isTallSymbol=function(p){let a=!1,x=!1;if(p)for(let N=0;N<p.length&&(!a||!x);N++){const R=p[N];"size"===R.type&&("height"===R.axis&&(a=!0),"width-and-depth"===R.axis&&(x=!0))}return a&&x};ia._getSymbolPreview=
function(){var p=I._asyncToGenerator(function*(a,x,N){var R=null!=N&&N.isDefault||null!=a.size||!this._hasSizeRamp?a.size:t.px2pt(h.SymbolSizeDefaults.size);this._scaleDrivenSizeVariable&&null!=N&&N.applyScaleDrivenSize&&({getSize:R}=yield new Promise((V,aa)=>A(["../../../renderers/visualVariables/support/visualVariableUtils"],V,aa)),R=R(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:"simple-marker"===a.symbol.type?a.symbol.style:null}));return S.renderPreviewHTML(a.symbol,
{size:R,opacity:x,scale:!1,symbolConfig:null==N?void 0:N.symbolConfig,effectView:null==N?void 0:N.effectList}).then(V=>{a.preview=V;return a}).catch(()=>{a.preview=null;return a})});return function(a,x,N){return p.apply(this,arguments)}}();ia._loadRenderer=function(){var p=I._asyncToGenerator(function*(a){var x,N;const R=[];var V=this.layer;a=a.clone();this._hasClusterSizeVariable=!1;const aa="visualVariables"in a&&(null==(x=a.visualVariables)?void 0:x.some(ma=>"size"===ma.type&&"outline"!==ma.target&&
!ya.test(ma.valueExpression)));if(a&&"visualVariables"in a&&!aa&&"featureReduction"in V&&"cluster"===(null==(N=V.featureReduction)?void 0:N.type)&&(x=e.unwrap(m.getClusterSizeVariable(this.layerView._effectiveRenderer,this.view)))){V=V.featureReduction;if("clusterMinSize"in V&&"clusterMaxSize"in V){const {clusterMinSize:ma,clusterMaxSize:ua}=V;x.legendOptions=new U({showLegend:ma!==ua})}a.visualVariables=(a.visualVariables||[]).concat([x]);this._hasClusterSizeVariable=!0}const da=yield ba.getMedianColor(a);
if(ja(a)||ra(a))V=(a.classBreakInfos||a.uniqueValueInfos).map(ma=>this._fetchSymbol(ma.symbol,da).then(ua=>{ma.symbol=ua}).catch(()=>{ma.symbol=null})),Array.prototype.push.apply(R,V);R.push(this._fetchSymbol(a.symbol||a.defaultSymbol,a.defaultSymbol?null:da).then(ma=>{this._applySymbolToRenderer(a,ma,fa(a))}).catch(()=>{this._applySymbolToRenderer(a,null,fa(a))}));return f.eachAlways(R).then(()=>a)});return function(a){return p.apply(this,arguments)}}();ia._applySymbolToRenderer=function(p,a,x){x?
p.symbol=a:p.defaultSymbol=a};ia._fetchSymbol=function(p,a){if(!p)return Promise.reject();if("web-style"===p.type){var x=p.portal;x=p.name+"-"+p.styleName+"-"+p.styleUrl+"-"+(x&&x.url)+"-"+(x&&x.user&&x.user.username);const N=this._webStyleSymbolCache;N.has(x)||("2d"===this.view.type?N.set(x,p.fetchCIMSymbol()):N.set(x,p.fetchSymbol()));return N.get(x).then(R=>this._getAppliedCloneSymbol(R,a)).catch(()=>{za.warn("Fetching web-style failed!");return Promise.reject()})}return Promise.resolve(this._getAppliedCloneSymbol(p,
a))};ia._getAppliedCloneSymbol=function(p,a){if(!p||!a)return p;p=p.clone();const x=a&&a.toRgba();-1<p.type.indexOf("3d")?this._applyColorTo3dSymbol(p,x):"cim"===p.type?d.applyCIMSymbolColor(p,a):p.color&&(p.color=new q(x||p.color));return p};ia._applyColorTo3dSymbol=function(p,a){a&&p.symbolLayers.forEach(x=>{x&&(x.material||(x.material={}),x.material.color=new q(a))})};ia._getVisualVariableLegendElements=function(){var p=I._asyncToGenerator(function*(a,x){var N=this;if(!("visualVariables"in a&&
a.visualVariables)||"vector-field"===a.type)return null;var R=a.visualVariables,V=[];const aa=[],da=[];for(const ha of R)"color"===ha.type?V.push(ha):"size"===ha.type?aa.push(ha):"opacity"===ha.type&&da.push(ha);R=[...V,...aa,...da];let ma;if(0===V.length&&ja(a)&&a.classBreakInfos&&1===a.classBreakInfos.length)var ua=(ua=a.classBreakInfos[0])&&ua.symbol;0===V.length&&fa(a)&&(ua=a.symbol);ua&&(-1<ua.type.indexOf("3d")?(V=ua.symbolLayers.getItemAt(0),"water"===V.type?e.isSome(V.color)&&(ma=V.color):
e.isSome(V.material)&&e.isSome(V.material.color)&&(ma=V.material.color)):ua.url||(ma=ua.color));const Ca=this.effectList;return(yield Promise.all(R.map(function(){var ha=I._asyncToGenerator(function*(ka){if(!ka.legendOptions||!1!==ka.legendOptions.showLegend){const va="flow"===a.type?ka.field:N._getRampTitle(ka,x);let Ba=null;var Aa="getField"in x&&x.getField&&x.getField(ka.field);Aa=Aa&&X.isDateField(Aa);"color"===ka.type?(ka=yield C.getRampStops(ka,null,Aa),Ba={type:"color-ramp",title:va,infos:ka,
preview:S.renderColorRampPreviewHTML(ka.map(Ga=>Ga.color),{effectList:Ca})},N._hasColorRamp||(N._hasColorRamp=!(null==Ba.infos||!Ba.infos.length))):"size"===ka.type&&"outline"!==ka.target?ya.test(ka.valueExpression)?N._hasClusterSizeVariable||(N._scaleDrivenSizeVariable=ka):(Ba=yield N._getSizeLegendElement(va,ka,a,Aa),N._hasSizeRamp||(N._hasSizeRamp=!(null==Ba.infos||!Ba.infos.length))):"opacity"===ka.type&&(ka=yield C.getRampStops(ka,ma,Aa),Ba={type:"opacity-ramp",title:va,infos:ka,preview:S.renderColorRampPreviewHTML(ka.map(Ga=>
Ga.color),{effectList:Ca})},N._hasOpacityRamp||(N._hasOpacityRamp=!(null==Ba.infos||!Ba.infos.length)));return Ba&&Ba.infos?Ba:null}});return function(ka){return ha.apply(this,arguments)}}()))).filter(ha=>!!ha)});return function(a,x){return p.apply(this,arguments)}}();ia._getDomainName=function(p,a,x){return p&&"function"!==typeof p?(x=(p="getField"in x&&x.getField&&x.getField(p))&&"getFieldDomain"in x&&x.getFieldDomain?x.getFieldDomain(p.name):null)&&"coded-value"===x.type?x.getName(a):null:null};
ia._getClusterTitle=function(p){var a=this.layer;p=p.field;if("featureReduction"in a&&a.featureReduction&&"cluster"===a.featureReduction.type&&(a=a.featureReduction,a=(a="popupTemplate"in a&&a.popupTemplate)&&a.fieldInfos))for(const x of a)if(x.fieldName===p)return"cluster_count"===p?x.label||{showCount:!0}:x.label;return{showCount:!0}};ia._getRampTitle=function(p,a){let x=p.field,N=p.normalizationField,R=!1,V=!1,aa=!1;var da=null;x="function"===typeof x?null:x;N="function"===typeof N?null:N;da=p.legendOptions&&
p.legendOptions.title;if(null==da)if(p.valueExpressionTitle)da=p.valueExpressionTitle;else{if("renderer"in a&&a.renderer&&"authoringInfo"in a.renderer&&a.renderer.authoringInfo&&a.renderer.authoringInfo.visualVariables)for(p=a.renderer.authoringInfo.visualVariables,da=0;da<p.length;da++){const ma=p[da];if("color"===ma.type){if("ratio"===ma.style){R=!0;break}if("percent"===ma.style){V=!0;break}if("percent-of-total"===ma.style){aa=!0;break}}}da={field:x&&this._getFieldAlias(x,a),normField:N&&this._getFieldAlias(N,
a),ratio:R,ratioPercent:V,ratioPercentTotal:aa}}return da};ia._getRendererTitle=function(p,a){if(p.legendOptions&&p.legendOptions.title)return p.legendOptions.title;if(p.valueExpressionTitle)return p.valueExpressionTitle;let x=p.field,N=null,R=null;ja(p)&&(N=p.normalizationField,R="percent-of-total"===p.normalizationType);x="function"===typeof x?null:x;N="function"===typeof N?null:N;p=null;if(x||N)p={field:x&&this._getFieldAlias(x,a),normField:N&&this._getFieldAlias(N,a),normByPct:R};return p};ia._getFieldAlias=
function(p,a){var x="popupTemplate"in a&&a.popupTemplate;x=x&&x.fieldInfos;let N=null;x&&x.some(V=>p===V.fieldName?(N=V,!0):!1);x=null;"getField"in a&&a.getField?x=a.getField(p):"fieldsIndex"in a&&a.fieldsIndex&&(x=a.fieldsIndex.get(p));a=N||x;let R=null;a&&(R=N&&N.label||x&&x.alias||"name"in a&&a.name||"fieldName"in a&&a.fieldName);return R};ia._isUnclassedRenderer=function(p){const a=p.visualVariables;let x=!1;ja(p)&&p.classBreakInfos&&1===p.classBreakInfos.length&&a&&(x=p.field?a.some(N=>!(!N||
p.field!==N.field||(p.normalizationField||N.normalizationField)&&p.normalizationField!==N.normalizationField)):!!a.length);return x};I._createClass(Ja,[{key:"effectList",get:function(){const p=this.layer;let a=null;"effect"in p&&p.effect&&(a=new v.EffectView,a.effect=p.effect,a.end(),a.scale=this.scale);return a}},{key:"opacity",get:function(){var p;const a=this.layer.opacity,x=null==(p=this.parent)?void 0:p.opacity;p=(p=this.layer.parent)&&"uid"in p?this._getParentLayerOpacity(p):null;return null!=
x?x*a:null!=p?p*a:a}},{key:"ready",get:function(){return null===this.layer?!0:0<this.children.length?this._isGroupActive():0<this.legendElements.length}},{key:"scale",get:function(){return this.view&&this.view.scale}},{key:"isScaleDriven",get:function(){var p=this.layer;if(null===p)return!1;if("effect"in p&&p.effect&&Array.isArray(p.effect)||"featureReduction"in p&&p.featureReduction&&"cluster"===p.featureReduction.type)return!0;if("renderer"in p&&p.renderer){if("dot-density"===p.renderer.type)return!0;
const a=p.get("renderer.valueExpression");if(ya.test(a))return!0;if(p=p.get("renderer.visualVariables"))return p.some(x=>this._isScaleDrivenSizeVariable(x))}return this._isLayerScaleDriven(this.layer)}},{key:"version",get:function(){return this._get("version")+1}}]);return Ja}(F);K.__decorate([y.property()],E.prototype,"children",void 0);K.__decorate([y.property({readOnly:!0})],E.prototype,"effectList",null);K.__decorate([y.property()],E.prototype,"layerView",void 0);K.__decorate([y.property()],E.prototype,
"layer",void 0);K.__decorate([y.property()],E.prototype,"legendElements",void 0);K.__decorate([y.property({readOnly:!0})],E.prototype,"opacity",null);K.__decorate([y.property()],E.prototype,"parent",void 0);K.__decorate([y.property({readOnly:!0,dependsOn:[]})],E.prototype,"ready",null);K.__decorate([y.property()],E.prototype,"hideLayersNotInCurrentView",void 0);K.__decorate([y.property()],E.prototype,"keepCacheOnDestroy",void 0);K.__decorate([y.property()],E.prototype,"respectLayerVisibility",void 0);
K.__decorate([y.property({readOnly:!0})],E.prototype,"scale",null);K.__decorate([y.property()],E.prototype,"sublayerIds",void 0);K.__decorate([y.property({readOnly:!0})],E.prototype,"isScaleDriven",null);K.__decorate([y.property()],E.prototype,"title",void 0);K.__decorate([y.property({readOnly:!0,dependsOn:["ready"],value:0})],E.prototype,"version",null);K.__decorate([y.property()],E.prototype,"view",void 0);return E=K.__decorate([w.subclass("esri.widgets.Legend.support.ActiveLayerInfo")],E)})},"esri/layers/effects/EffectView":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./parser ./utils".split(" "),
function(A,I,K,q,r,L,E,F,Q,l,z,b){function e(c){c=z.parse(c)||[];var g=(g=c[0])?"type"in g:!1;return g?[{scale:-1,effects:c}]:c}function f(c,g,y){var u,B,k,w;return null!=(u=c[0])&&u.effects&&null!=(B=g[0])&&B.effects?(-1===(null==(k=c[0])?void 0:k.scale)||-1===(null==(w=g[0])?void 0:w.scale))&&(1<c.length||1<g.length)&&0>=y?!1:b.canInterpolateEffects(c[0].effects,g[0].effects):!0}function t(c,g,y){var u,B;const k=c.length>g.length?c:g;c=c.length>g.length?g:c;const w=c[c.length-1];g=null!=(u=null==
w?void 0:w.scale)?u:y;u=null!=(B=null==w?void 0:w.effects)?B:[];for(B=c.length;B<k.length;B++)c.push({scale:g,effects:[...u]});for(B=0;B<k.length;B++)c[B].scale=-1===c[B].scale?y:c[B].scale,k[B].scale=-1===k[B].scale?y:k[B].scale,b.normalizeEffects(c[B].effects,k[B].effects)}A.EffectView=function(c){function g(u){u=c.call(this,u)||this;u._from=null;u._to=null;u._final=null;u._current=[];u._time=0;u.duration=r("mapview-transitions-duration");u.effects=[];return u}I._inheritsLoose(g,c);var y=g.prototype;
y.canTransitionTo=function(u){try{return 0<this.scale&&f(this._current,e(u),this.scale)}catch{return!1}};y.transitionStep=function(u,B){this._applyTimeTransition(u);this._updateForScale(B)};y.end=function(){this._applyTimeTransition(this.duration)};y._transitionTo=function(u){0<this.scale&&f(this._current,u,this.scale)?(this._final=u,this._to=L.clone(u),t(this._current,this._to,this.scale),this._from=L.clone(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=u);this._set("effects",
this._current[0]?L.clone(this._current[0].effects):[])};y._applyTimeTransition=function(u){if(this._to&&this._from&&this._current&&this._final){this._time+=u;u=Math.min(1,this._time/this.duration);for(let k=0;k<this._current.length;k++){const w=this._current[k],P=this._from[k],v=this._to[k];var B=P.scale;w.scale=B+(v.scale-B)*u;for(B=0;B<w.effects.length;B++)w.effects[B].interpolate(P.effects[B],v.effects[B],u)}1===u&&(this._current=this._final,this._set("effects",this._current[0]?L.clone(this._current[0].effects):
[]),this._from=this._to=this._final=null)}};y._updateForScale=function(u){this._set("scale",u);if(0!==this._current.length){var B=this._current,k=this._current.length-1,w,P=1;if(1===B.length||u>=B[0].scale)var v=w=B[0].effects;else if(u<=B[k].scale)v=w=B[k].effects;else for(let n=0;n<k;n++){const J=B[n],X=B[n+1];if(J.scale>=u&&X.scale<=u){P=(u-J.scale)/(X.scale-J.scale);w=J.effects;v=X.effects;break}}for(u=0;u<this.effects.length;u++)this.effects[u].interpolate(w[u],v[u],P)}};I._createClass(g,[{key:"effect",
set:function(u){const B=this._get("effect");u=u||"";if(B!==u){this._set("effect",u);try{this._transitionTo(e(u))}catch(k){this._transitionTo([]),E.getLogger(this.declaredClass).warn("Invalid Effect",{effect:u,error:k})}}}},{key:"hasEffects",get:function(){return this.transitioning||!!this.effects.length}},{key:"scale",set:function(u){this._updateForScale(u)}},{key:"transitioning",get:function(){return null!==this._to}}]);return g}(q);K.__decorate([F.property()],A.EffectView.prototype,"_to",void 0);
K.__decorate([F.property()],A.EffectView.prototype,"duration",void 0);K.__decorate([F.property({value:""})],A.EffectView.prototype,"effect",null);K.__decorate([F.property({readOnly:!0})],A.EffectView.prototype,"effects",void 0);K.__decorate([F.property({readOnly:!0})],A.EffectView.prototype,"hasEffects",null);K.__decorate([F.property({value:0})],A.EffectView.prototype,"scale",null);K.__decorate([F.property({readOnly:!0})],A.EffectView.prototype,"transitioning",null);A.EffectView=K.__decorate([l.subclass("esri.layers.effects.EffectView")],
A.EffectView);A.canInterpolateEffectStops=f;A.convertEffectToStops=e;A.normalizeEffectStops=t;Object.defineProperty(A,"__esModule",{value:!0})})},"esri/layers/support/ExportImageParameters":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/HandleOwner ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./commonProperties ./sublayerUtils ../../views/support/floorFilterUtils".split(" "),
function(A,I,K,q,r,L,E,F,Q,l,z,b,e,f){const t={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};A.ExportImageParameters=function(c){function g(u){u=c.call(this,u)||this;u.floors=null;u.scale=0;return u}I._inheritsLoose(g,c);var y=g.prototype;y.destroy=function(){this.layer=null};y.toJSON=
function(){var u=this.layer;u={dpi:u.dpi,format:u.imageFormat,transparent:u.imageTransparency,gdbVersion:u.gdbVersion||null};this.hasDynamicLayers&&this.dynamicLayers?u.dynamicLayers=this.dynamicLayers:u={...u,layers:this.layers,layerDefs:this.layerDefs};return u};I._createClass(g,[{key:"dynamicLayers",get:function(){if(!this.hasDynamicLayers)return null;const u=this.visibleSublayers.map(B=>{const k=f.getLayerFloorFilterClause(this.floors,B);return B.toExportImageJSON(k)});return u.length?JSON.stringify(u):
null}},{key:"hasDynamicLayers",get:function(){return this.layer&&e.isExportDynamic(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}},{key:"layer",set:function(u){this._get("layer")!==u&&(this._set("layer",u),this.handles.remove("layer"),u&&this.handles.add([u.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),u.on("sublayer-update",B=>this.notifyChange(t[B.propertyName]))],"layer"))}},{key:"layers",get:function(){const u=this.visibleSublayers;return u?u.length?"show:"+
u.map(B=>B.id).join(","):"show:-1":null}},{key:"layerDefs",get:function(){var u;const B=!(null==(u=this.floors)||!u.length);u=this.visibleSublayers.filter(k=>null!=k.definitionExpression||B&&null!=k.floorInfo);return u.length?JSON.stringify(u.reduce((k,w)=>{var P=f.getLayerFloorFilterClause(this.floors,w);P=L.isSome(P)?f.combineFloorsDefinitionExpression(P,w):w.definitionExpression;k[w.id]=P;return k},{})):null}},{key:"version",get:function(){this.commitProperty("layers");this.commitProperty("layerDefs");
this.commitProperty("dynamicLayers");this.commitProperty("timeExtent");const u=this.layer;u&&(u.commitProperty("dpi"),u.commitProperty("imageFormat"),u.commitProperty("imageTransparency"),u.commitProperty("gdbVersion"));return(this._get("version")||0)+1}},{key:"visibleSublayers",get:function(){const u=[];if(!this.layer)return u;var B=this.layer.sublayers;const k=w=>{const P=this.scale,v=0===w.minScale||P<=w.minScale,n=0===w.maxScale||P>=w.maxScale;w.visible&&(0===P||v&&n)&&(w.sublayers?w.sublayers.forEach(k):
u.unshift(w))};B&&B.forEach(k);B=this._get("visibleSublayers");return!B||B.length!==u.length||B.some((w,P)=>u[P]!==w)?u:B}}]);return g}(r.HandleOwnerMixin(q));K.__decorate([E.property({readOnly:!0})],A.ExportImageParameters.prototype,"dynamicLayers",null);K.__decorate([E.property()],A.ExportImageParameters.prototype,"floors",void 0);K.__decorate([E.property({readOnly:!0})],A.ExportImageParameters.prototype,"hasDynamicLayers",null);K.__decorate([E.property()],A.ExportImageParameters.prototype,"layer",
null);K.__decorate([E.property({readOnly:!0})],A.ExportImageParameters.prototype,"layers",null);K.__decorate([E.property({readOnly:!0})],A.ExportImageParameters.prototype,"layerDefs",null);K.__decorate([E.property({type:Number})],A.ExportImageParameters.prototype,"scale",void 0);K.__decorate([E.property(b.combinedViewLayerTimeExtentProperty)],A.ExportImageParameters.prototype,"timeExtent",void 0);K.__decorate([E.property({readOnly:!0})],A.ExportImageParameters.prototype,"version",null);K.__decorate([E.property({readOnly:!0})],
A.ExportImageParameters.prototype,"visibleSublayers",null);A.ExportImageParameters=K.__decorate([z.subclass("esri.layers.mixins.ExportImageParameters")],A.ExportImageParameters);Object.defineProperty(A,"__esModule",{value:!0})})},"esri/layers/support/sublayerUtils":function(){define(["exports","../../core/accessorSupport/PropertyOrigin"],function(A,I){function K(q,r){if(!q||!q.length)return!0;r=r.slice().reverse().flatten(({sublayers:F})=>F&&F.toArray().reverse()).map(F=>F.id).toArray();if(q.length>
r.length)return!1;let L=0;const E=r.length;for(const {id:F}of q){for(;L<E&&r[L]!==F;)L++;if(L>=E)return!1}return!0}A.isExportDynamic=function(q,r,L){return q.some(E=>{const F=E.source;return!(!F||"map-layer"===F.type&&F.mapLayerId===E.id&&(!F.gdbVersion||F.gdbVersion===L.gdbVersion))||E.originIdOf("renderer")>I.OriginId.SERVICE||E.originIdOf("labelingInfo")>I.OriginId.SERVICE||E.originIdOf("opacity")>I.OriginId.SERVICE||E.originIdOf("labelsVisible")>I.OriginId.SERVICE})?!0:!K(q,r)};A.isSublayerOverhaul=
function(q){return!!q&&q.some(r=>null!=r.minScale||r.layerDefinition&&null!=r.layerDefinition.minScale)};A.shouldWriteSublayerStructure=function(q,r,L){return r.flatten(({sublayers:E})=>E).length!==q.length||q.some(E=>E.originIdOf("minScale")>L||E.originIdOf("maxScale")>L||E.originIdOf("renderer")>L||E.originIdOf("labelingInfo")>L||E.originIdOf("opacity")>L||E.originIdOf("labelsVisible")>L||E.originIdOf("source")>L)?!0:!K(q,r)};Object.defineProperty(A,"__esModule",{value:!0})})},"esri/renderers/support/rendererConversion":function(){define(["exports",
"../../core/has","../../core/Error","../../core/maybe","../../symbols/support/symbolConversion"],function(A,I,K,q,r){function L(l){return q.isNone(l)||"simple"===l.type||"unique-value"===l.type||"class-breaks"===l.type||"dictionary"===l.type||"heatmap"===l.type}function E(l,z){if(!z)return null;z=Array.isArray(z)?z:[z];if(0<z.length){const b=z.map(f=>f.details.symbol.type||f.details.symbol.declaredClass).filter(f=>!!f);b.sort();const e=[];b.forEach((f,t)=>{0!==t&&f===b[t-1]||e.push(f)});return new K("renderer-conversion-3d:unsupported-symbols",
`Renderer contains symbols (${e.join(", ")}) which are not supported in 3D`,{renderer:l,symbolErrors:z})}return null}function F(l){const z=l.uniqueValueInfos.map(e=>r.to3D(e.symbol).error).filter(e=>!!e),b=r.to3D(l.defaultSymbol);b.error&&z.unshift(b.error);return E(l,z)}function Q(l){const z=l.classBreakInfos.map(e=>r.to3D(e.symbol).error).filter(e=>!!e),b=r.to3D(l.defaultSymbol);b.error&&z.unshift(b.error);return E(l,z)}A.isSupportedRenderer3D=L;A.validateTo3D=function(l){if(q.isNone(l))return null;
if(!L(l))return new K("renderer-conversion-3d:unsupported-renderer",`Unsupported renderer of type '${l.type||l.declaredClass}'`,{renderer:l});switch(l.type){case "simple":return E(l,r.to3D(l.symbol).error);case "unique-value":return F(l);case "class-breaks":return Q(l)}return null};Object.defineProperty(A,"__esModule",{value:!0})})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(A,I,K){function q(b){b=K.toCIMSymbolJSON(b);if("CIMTextSymbol"===
b.type)return b.height;let e=0;if(b.symbolLayers)for(const f of b.symbolLayers)K.isCIMMarker(f)&&f.size>e?e=f.size:K.isCIMStroke(f)&&f.width>e?e=f.width:K.isCIMFill(f);return e}function r(b,e,f,t){if("CIMTextSymbol"===b.type)b.height*=e;else{if(f&&b.effects)for(const c of b.effects)F(c,e);if(b.symbolLayers)for(const c of b.symbolLayers)switch(c.type){case "CIMPictureMarker":case "CIMVectorMarker":L(c,e,t);break;case "CIMPictureStroke":case "CIMSolidStroke":null!=t&&t.preserveOutlineWidth||!c.width||
(c.width*=e);break;case "CIMPictureFill":c.height&&(c.height*=e);c.offsetX&&(c.offsetX*=e);c.offsetY&&(c.offsetY*=e);break;case "CIMHatchFill":r(c.lineSymbol,e,!0,{...t,preserveOutlineWidth:!1}),c.offsetX&&(c.offsetX*=e),c.offsetY&&(c.offsetY*=e),c.separation&&(c.separation*=e)}}}function L(b,e,f){b.markerPlacement&&E(b.markerPlacement,e);b.offsetX&&(b.offsetX*=e);b.offsetY&&(b.offsetY*=e);b.anchorPoint&&"Absolute"===b.anchorPointUnits&&(b.anchorPoint={x:b.anchorPoint.x*e,y:b.anchorPoint.y*e});b.size*=
e;if("CIMVectorMarker"===b.type&&b.markerGraphics)for(const t of b.markerGraphics)b.scaleSymbolsProportionally||r(t.symbol,e,!0,f)}function E(b,e){K.isCIMMarkerStrokePlacement(b)&&b.offset&&(b.offset*=e);switch(b.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":b.customEndingOffset&&(b.customEndingOffset*=e);b.offsetAlongLine&&(b.offsetAlongLine*=e);if(b.placementTemplate&&b.placementTemplate.length){var f=b.placementTemplate.map(t=>t*e);b.placementTemplate=
f}break;case "CIMMarkerPlacementAlongLineVariableSize":b.maxRandomOffset&&(b.maxRandomOffset*=e);b.placementTemplate&&b.placementTemplate.length&&(f=b.placementTemplate.map(t=>t*e),b.placementTemplate=f);break;case "CIMMarkerPlacementOnLine":b.startPointOffset&&(b.startPointOffset*=e);break;case "CIMMarkerPlacementAtExtremities":b.offsetAlongLine&&(b.offsetAlongLine*=e);break;case "CIMMarkerPlacementAtRatioPositions":b.beginPosition&&(b.beginPosition*=e);b.endPosition&&(b.endPosition*=e);break;case "CIMMarkerPlacementPolygonCenter":b.offsetX&&
(b.offsetX*=e);b.offsetY&&(b.offsetY*=e);break;case "CIMMarkerPlacementInsidePolygon":b.offsetX&&(b.offsetX*=e),b.offsetY&&(b.offsetY*=e),b.stepX&&(b.stepX*=e),b.stepY&&(b.stepY*=e)}}function F(b,e){switch(b.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":b.width&&(b.width*=e);break;case "CIMGeometricEffectBuffer":b.size&&(b.size*=e);break;case "CIMGeometricEffectCut":b.beginCut&&(b.beginCut*=e);b.endCut&&(b.endCut*=e);b.middleCut&&(b.middleCut*=e);break;case "CIMGeometricEffectDashes":b.customEndingOffset&&
(b.customEndingOffset*=e);b.offsetAlongLine&&(b.offsetAlongLine*=e);if(b.dashTemplate&&b.dashTemplate.length){const f=b.dashTemplate.map(t=>t*e);b.dashTemplate=f}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":b.length&&(b.length*=e);break;case "CIMGeometricEffectMove":b.offsetX&&(b.offsetX*=e);b.offsetY&&(b.offsetY*=e);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":b.offset&&(b.offset*=e);break;case "CIMGeometricEffectRegularPolygon":b.radius&&
(b.radius*=e);break;case "CIMGeometricEffectTaperedPolygon":b.fromWidth&&(b.fromWidth*=e);b.length&&(b.length*=e);b.toWidth&&(b.toWidth*=e);break;case "CIMGeometricEffectWave":b.amplitude&&(b.amplitude*=e),b.period&&(b.period*=e)}}function Q(b,e){let f;f="CIMTextSymbol"===b.type?b.symbol:b;b="CIMPolygonSymbol"===b.type;if(f.symbolLayers)for(const t of f.symbolLayers)if(!(t.colorLocked||b&&(K.isCIMStroke(t)||K.isCIMMarker(t)&&t.markerPlacement&&K.isCIMMarkerStrokePlacement(t.markerPlacement))))switch(t.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":t.tintColor&&
l(e,t.tintColor);break;case "CIMVectorMarker":t.markerGraphics.forEach(c=>{Q(c.symbol,e)});break;case "CIMSolidStroke":case "CIMSolidFill":l(e,t.color);break;case "CIMHatchFill":Q(t.lineSymbol,e)}}function l(b,e){for(const f of b)if(f.join(".")===e.join("."))return;b.push(e)}function z(b,e,f){var t="CIMTextSymbol"===b.type?b.symbol:b;b="CIMPolygonSymbol"===t.type?!0:!1;if(t.symbolLayers)for(const c of t.symbolLayers)if(!c.colorLocked){if(b)if(f){if({layersToColor:t}=f,(K.isCIMStroke(c)||K.isCIMMarker(c)&&
c.markerPlacement&&K.isCIMMarkerStrokePlacement(c.markerPlacement))&&"fill"===t||K.isCIMFill(c)&&"outline"===t)continue}else if(K.isCIMStroke(c)||K.isCIMMarker(c)&&c.markerPlacement&&K.isCIMMarkerStrokePlacement(c.markerPlacement))continue;t=e.toArray();switch(c.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":c.tintColor=t;break;case "CIMVectorMarker":c.markerGraphics.forEach(g=>{z(g.symbol,e,f)});break;case "CIMSolidStroke":case "CIMSolidFill":c.color=t;break;case "CIMHatchFill":z(c.lineSymbol,
e,f)}}}A.applyCIMSymbolColor=function(b,e,f){e instanceof I||(e=new I(e));(b=K.toCIMSymbolJSON(b))&&z(b,e,f)};A.applyCIMSymbolRotation=function(b,e,f=!1){b=K.toCIMSymbolJSON(b);f&&0!==e&&(e=360-e);if("CIMTextSymbol"===b.type)b.angle=e;else if("CIMPointSymbol"===b.type&&b.symbolLayers){f=e-(b.angle||0);for(const t of b.symbolLayers)if(K.isCIMMarker(t)){let c=t.rotation||0;c=t.rotateClockwise?c-f:c+f;t.rotation=c}b.angle=e}};A.getCIMSymbolColor=function(b){b=K.toCIMSymbolJSON(b);const e=[];Q(b,e);return e.length?
new I(K.fromCIMColor(e[0])):null};A.getCIMSymbolRotation=function(b,e=!1){b=K.toCIMSymbolJSON(b);return"CIMTextSymbol"===b.type||"CIMPointSymbol"===b.type?e&&0!==b.angle?360-b.angle:b.angle||0:0};A.getCIMSymbolSize=q;A.scaleCIMMarker=L;A.scaleCIMSymbolTo=function(b,e,f){const t=K.toCIMSymbolJSON(b);b=q(b);if(0===b)if("CIMTextSymbol"===t.type)t.height=e;else{if(t.symbolLayers)for(const c of t.symbolLayers)switch(c.type){case "CIMPictureMarker":case "CIMVectorMarker":c.size=e;break;case "CIMPictureStroke":case "CIMSolidStroke":c.width=
e}}else r(t,e/b,!1,f)};Object.defineProperty(A,"__esModule",{value:!0})})},"esri/symbols/cim/utils":function(){define(["require","exports"],function(A,I){function K(q,r){"string"!==typeof q&&(q=String(q));switch(r){case "LowerCase":return q.toLowerCase();case "Allcaps":return q.toUpperCase();default:return q}}I._adjustTextCase=K;I.colorToArray=function(q){return[q.r,q.g,q.b,q.a]};I.createLabelOverrideFunction=function(q,r,L){const E=z=>{let b=z.length;for(;b--;)if(-1===" /-,\n".indexOf(z.charAt(b)))return!1;
return!0},F=[];var Q=0;let l=-1;do l=r.indexOf("[",Q),l>=Q&&(l>Q&&(Q=r.substr(Q,l-Q),F.push([Q,null,E(Q)])),Q=l+1,l=r.indexOf("]",Q),l>=Q&&(l>Q&&(Q=r.substr(Q,l-Q),(Q=q[Q])&&F.push([null,Q,!1])),Q=l+1));while(-1!==l);Q<r.length-1&&(q=r.substr(Q),F.push([q,null,E(q)]));return z=>{let b="",e=null;for(const f of F){const [t,c,g]=f;if(t)g?e=t:(e&&(b+=e,e=null),b+=t);else{const y=z.attributes[c];y&&(e&&(b+=e,e=null),b+=y)}}return K(b,L)}};I.evaluateValueOrFunction=function(q,r,L,E){return"function"===
typeof q?q(r,L,E):q};I.fromCIMColor=function(q){return q?{r:q[0],g:q[1],b:q[2],a:q[3]/255}:{r:0,g:0,b:0,a:0}};I.getValue=q=>isNaN(q)||!q?0:q;I.importGeometryEngine=function(){return new Promise((q,r)=>A(["../../geometry/geometryEngineJSON"],q,r))};I.isCIMFill=function(q){return"CIMGradientFill"===q.type||"CIMHatchFill"===q.type||"CIMPictureFill"===q.type||"CIMSolidFill"===q.type||"CIMWaterFill"===q.type};I.isCIMMarker=function(q){return"CIMVectorMarker"===q.type||"CIMPictureMarker"===q.type||"CIMBarChartMarker"===
q.type||"CIMCharacterMarker"===q.type||"CIMPieChartMarker"===q.type||"CIMStackedBarChartMarker"===q.type};I.isCIMMarkerStrokePlacement=function(q){return"CIMMarkerPlacementAlongLineRandomSize"===q.type||"CIMMarkerPlacementAlongLineSameSize"===q.type||"CIMMarkerPlacementAlongLineVariableSize"===q.type||"CIMMarkerPlacementAtExtremities"===q.type||"CIMMarkerPlacementAtMeasuredUnits"===q.type||"CIMMarkerPlacementAtRatioPositions"===q.type||"CIMMarkerPlacementOnLine"===q.type||"CIMMarkerPlacementOnVertices"===
q.type};I.isCIMStroke=function(q){return"CIMGradientStroke"===q.type||"CIMPictureStroke"===q.type||"CIMSolidStroke"===q.type};I.isGeometryEngineRequired=q=>{if(!q)return!1;for(const r of q)switch(r.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":return!0}return!1};I.resampleHermite=function(q,r,L,E,F,Q,l=!0){const z=r/F;L/=Q;const b=Math.ceil(z/2),e=Math.ceil(L/2);for(let c=0;c<Q;c++)for(let g=0;g<F;g++){const y=4*(g+(l?Q-c-1:c)*F);var f=0;let u=0,B=0,k=0,w=0,P=0,v=0;const n=
(c+.5)*L;for(let J=Math.floor(c*L);J<(c+1)*L;J++){var t=Math.abs(n-(J+.5))/e;const X=(g+.5)*z;t*=t;for(let Y=Math.floor(g*z);Y<(g+1)*z;Y++){let D=Math.abs(X-(Y+.5))/b;f=Math.sqrt(t+D*D);-1<=f&&1>=f&&(f=2*f*f*f-3*f*f+1,0<f&&(D=4*(Y+J*r),v+=f*q[D+3],B+=f,255>q[D+3]&&(f=f*q[D+3]/250),k+=f*q[D],w+=f*q[D+1],P+=f*q[D+2],u+=f))}}E[y]=k/u;E[y+1]=w/u;E[y+2]=P/u;E[y+3]=v/B}};I.toCIMSymbolJSON=function(q){var r;return null==(r=q.data)?void 0:r.symbol};Object.defineProperty(I,"__esModule",{value:!0})})},"esri/symbols/support/previewUtils":function(){define(["exports",
"../../Color"],function(A,I){function K(q,r){return Math.round(Math.min(Math.max(q+191.25*r,0),255))}A.SymbolSizeDefaults=void 0;(function(q){q[q.size=22]="size";q[q.lineWidth=50]="lineWidth";q[q.maxSize=120]="maxSize";q[q.maxOutlineSize=80]="maxOutlineSize";q[q.tallSymbolWidth=20]="tallSymbolWidth"})(A.SymbolSizeDefaults||(A.SymbolSizeDefaults={}));A.adjustColorBrightness=function(q,r){if("type"in q&&("linear"===q.type||"pattern"===q.type))return q;q=new I(q);return new I([K(q.r,r),K(q.g,r),K(q.b,
r),q.a])};A.adjustColorComponentBrightness=K;A.getConeShapes=function(q,r){let L=r?A.SymbolSizeDefaults.tallSymbolWidth:q;r=r?4:6;L=L<=A.SymbolSizeDefaults.size?L-.5*r:L-r;r=.15*L;const E=L;q-=r;return[{type:"ellipse",cx:.5*L,cy:q,rx:.5*L,ry:r},{type:"path",path:[{command:"M",values:[.5*E,0]},{command:"L",values:[E,q]},{command:"L",values:[0,q]},{command:"Z",values:[]}]}]};A.getCubeShapes=function(q,r){let L=r?A.SymbolSizeDefaults.tallSymbolWidth:q;var E=r?4:6;E=L=L<=A.SymbolSizeDefaults.size?L-.5*
E:L-E;r=r?.35*L:.5*L;return[{type:"path",path:[{command:"M",values:[.5*E,0]},{command:"L",values:[E,.5*r]},{command:"L",values:[.5*E,r]},{command:"L",values:[0,.5*r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*r]},{command:"L",values:[.5*E,r]},{command:"L",values:[.5*E,q]},{command:"L",values:[0,q-.5*r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*E,r]},{command:"L",values:[.5*E,q]},{command:"L",values:[E,q-.5*r]},{command:"L",values:[E,.5*r]},
{command:"Z",values:[]}]}]};A.getCylinderShapes=function(q,r){var L=r?A.SymbolSizeDefaults.tallSymbolWidth:q;r=r?4:6;L=L<=A.SymbolSizeDefaults.size?L-.5*r:L-r;r=.5*L;const E=.15*L;q-=E;return[{type:"ellipse",cx:.5*L,cy:q,rx:r,ry:E},{type:"path",path:[{command:"M",values:[0,E]},{command:"L",values:[0,q]},{command:"L",values:[L,q]},{command:"L",values:[L,E]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*L,cy:E,rx:r,ry:E}]};A.getDiamondShapes=function(q){var r=q;r=r<A.SymbolSizeDefaults.size?r-2:r-
4;const L=Math.floor(q/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*r,0]},{command:"L",values:[r,.5*q-L]},{command:"L",values:[.45*r-L,.5*q+L]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*r,0]},{command:"L",values:[.45*r-L,.5*q+L]},{command:"L",values:[0,.5*q-L]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*q-L]},{command:"L",values:[.45*r-L,.5*q+L]},{command:"L",values:[.45*r,q]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",
values:[.45*r,q]},{command:"L",values:[r,.5*q-L]},{command:"L",values:[.45*r-L,.5*q+L]},{command:"Z",values:[]}]}]};A.getExtrudeSymbolShapes=function(q){const r=A.SymbolSizeDefaults.size;q*=.5;return[{type:"path",path:[{command:"M",values:[0,.35*r]},{command:"L",values:[.3*r,.7*r]},{command:"L",values:[.3*r,.7*r+q]},{command:"L",values:[0,.7*r+q-.35*r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*r,.7*r]},{command:"L",values:[.3*r,.7*r+q]},{command:"L",values:[r,q]},{command:"L",
values:[r,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*r,0]},{command:"L",values:[r,0]},{command:"L",values:[.3*r,.7*r]},{command:"L",values:[0,.35*r]},{command:"Z",values:[]}]}]};A.getInvertedConeShapes=function(q){let r=q;r=r<A.SymbolSizeDefaults.size?r-3:r-6;const L=.15*r,E=r;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[E,0]},{command:"L",values:[.5*E,q-L]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*r,cy:0,rx:.5*r,ry:L}]};A.getPathSymbolShapes=
function(q,r,L){var E=A.SymbolSizeDefaults.size;let F=E,Q=E;1>q?F*=.75:1<q&&(Q*=1.25);q=E;r&&L&&(F=Q=q=E=0);return[{type:"path",path:[{command:"M",values:[q,0]},{command:"L",values:[L?q:.875*q,0]},{command:"L",values:[L?F-.5*q:0,Q-.5*E]},{command:"L",values:[F-.5*q,Q-.5*E]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[q,0]},{command:"L",values:[q,r?0:.125*E]},{command:"L",values:[F-.5*q,r?Q-.5*E:E]},{command:"L",values:[F-.5*q,Q-.5*E]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",
values:[F-.5*q,Q-.5*E]},{command:"L",values:[L?F-.5*q:0,Q-.5*E]},{command:"L",values:[L?F-.5*q:0,r?Q-.5*E:E]},{command:"L",values:[F-.5*q,r?Q-.5*E:E]},{command:"Z",values:[]}]}]};A.getTetrahedronShapes=function(q){var r=q;r=r<A.SymbolSizeDefaults.size?r-1:r-2;return[{type:"path",path:[{command:"M",values:[.45*q,0]},{command:"L",values:[q,r]},{command:"L",values:[.45*q,.6*r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*q,0]},{command:"L",values:[.45*q,.6*r]},{command:"L",
values:[0,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,r]},{command:"L",values:[.45*q,.6*r]},{command:"L",values:[q,r]},{command:"Z",values:[]}]}]};A.getWaterSymbolShapes=function(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},
{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},
{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]};
A.shapes={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],
cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],
tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",
path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};Object.defineProperty(A,"__esModule",{value:!0})})},"esri/symbols/support/renderUtils":function(){define("exports ../../kernel ../../request ../../core/colorUtils ../../core/Error ../../core/has ../../libs/maquette/projection ../../libs/maquette/projector ./svgUtils ./utils".split(" "),
function(A,I,K,q,r,L,E,F,Q,l){function z(e,f,t){return e?K(e,{responseType:"image"}).then(c=>{c=c.data;const g=c.width,y=c.height,u=g/y;let B=f;t&&(B=Math.min(B,Math.max(g,y)));return{image:c,width:1>=u?Math.ceil(B*u):B,height:1>=u?B:Math.ceil(B/u)}}):Promise.reject(new r("renderUtils: imageDataSize","href not provided."))}const b=F.createProjector();A.renderSymbol=function(e,f,t){const c=Math.ceil(f[0]);f=Math.ceil(f[1]);if(!e.some(y=>!!y.length))return null;const g=t&&t.node||document.createElement("div");
null!=t.opacity&&(g.style.opacity=t.opacity.toString());null!=t.effectView&&(g.style.filter=l.getCSSFilterFromEffectList(t.effectView));b.append(g,Q.renderSVG.bind(null,e,c,f,t));return g};A.tintImageWithColor=function(e,f,t,c,g){return z(e,f,g).then(y=>{const u=y.width?y.width:f,B=y.height?y.height:f;var k;if(k=y.image)k=t&&"ignore"!==c?"multiply"===c&&255===t.r&&255===t.g&&255===t.b&&1===t.a?!1:!0:!1;if(k){var w=y.image.width,P=y.image.height;L("edge")&&/\.svg$/i.test(e)&&(--w,--P);k=Math.ceil(u);
var v=Math.ceil(B);var n=document.createElement("canvas");n.width=k;n.height=v;n.style.width=k+"px";n.style.height=v+"px";n=n.getContext("2d");n.clearRect(0,0,k,v);k=n;k.drawImage(y.image,0,0,w,P,0,0,u,B);v=k.getImageData(0,0,u,B);n=[t.r/255,t.g/255,t.b/255,t.a];const X=q.toHSV(t);for(let Y=0;Y<v.data.length;Y+=4){y=v.data;w=Y;P=n;var J=X;switch(c){case "multiply":y[w+0]*=P[0];y[w+1]*=P[1];y[w+2]*=P[2];y[w+3]*=P[3];break;default:{const D=q.toHSV({r:y[w+0],g:y[w+1],b:y[w+2]});D.h=J.h;D.s=J.s;D.v=D.v/
100*J.v;J=q.toRGB(D);y[w+0]=J.r;y[w+1]=J.g;y[w+2]=J.b;y[w+3]*=P[3]}}}k.putImageData(v,0,0);e=k.canvas.toDataURL("image/png")}else(k=I.id&&I.id.findCredential(e))&&k.token&&(y=-1===e.indexOf("?")?"?":"\x26",e=`${e}${y}token=${k.token}`);return{url:e,width:u,height:B}}).catch(function(){return{url:e,width:f,height:f}})};Object.defineProperty(A,"__esModule",{value:!0})})},"esri/core/colorUtils":function(){define(["exports"],function(A){function I(l,z){const b=[];let e,f;if(l[0].length!==z.length)throw"dimensions do not match";
const t=l.length,c=l[0].length;let g=0;for(e=0;e<t;e++){for(f=g=0;f<c;f++)g+=l[e][f]*z[f];b.push(g)}return b}function K(l){l=[l.r/255,l.g/255,l.b/255].map(z=>.04045>=z?z/12.92:((z+.055)/1.055)**2.4);l=I(F,l);return{x:100*l[0],y:100*l[1],z:100*l[2]}}function q(l){l=I(Q,[l.x/100,l.y/100,l.z/100]).map(z=>Math.min(1,Math.max(.0031308>=z?12.92*z:1.055*z**(1/2.4)-.055,0)));return{r:Math.round(255*l[0]),g:Math.round(255*l[1]),b:Math.round(255*l[2])}}function r(l){l=[l.x/95.047,l.y/100,l.z/108.883].map(z=>
z>(6/29)**3?z**(1/3):1/3*(29/6)**2*z+4/29);return{l:116*l[1]-16,a:500*(l[0]-l[1]),b:200*(l[1]-l[2])}}function L(l){const z=l.l;l=[(z+16)/116+l.a/500,(z+16)/116,(z+16)/116-l.b/200].map(b=>b>6/29?b**3:3*(6/29)**2*(b-4/29));return{x:95.047*l[0],y:100*l[1],z:108.883*l[2]}}function E(l){if("r"in l&&"g"in l&&"b"in l)return l;if("l"in l&&"c"in l&&"h"in l){var z=l.c;var b=l.h;z={l:l.l,a:z*Math.cos(b),b:z*Math.sin(b)};return q(L(z))}if("l"in l&&"a"in l&&"b"in l)return q(L(l));if("x"in l&&"y"in l&&"z"in l)return q(l);
if("h"in l&&"s"in l&&"v"in l){{b=(l.h+360)%360/60;z=l.v/100*255;l=l.s/100*z;const e=l*(1-Math.abs(b%2-1));switch(Math.floor(b)){case 0:b={r:l,g:e,b:0};break;case 1:b={r:e,g:l,b:0};break;case 2:b={r:0,g:l,b:e};break;case 3:b={r:0,g:e,b:l};break;case 4:b={r:e,g:0,b:l};break;case 5:case 6:b={r:l,g:0,b:e};break;default:b={r:0,g:0,b:0}}b.r=Math.round(b.r+z-l);b.g=Math.round(b.g+z-l);b.b=Math.round(b.b+z-l);z=b}return z}return l}const F=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],Q=[[3.2406,
-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];A.darken=function(l,z){l=r(K(l));l.l*=1-z;return q(L(l))};A.toHSV=function(l){if("h"in l&&"s"in l&&"v"in l)return l;var z=E(l);{l=z.r;const b=z.g,e=z.b;z=Math.max(l,b,e);const f=z-Math.min(l,b,e);l=0===f?0:z===l?(b-e)/f%6:z===b?(e-l)/f+2:(l-b)/f+4;0>l&&(l+=6);l={h:60*l,s:100*(0===f?0:f/z),v:100/255*z}}return l};A.toLAB=function(l){return"l"in l&&"a"in l&&"b"in l?l:r(K(E(l)))};A.toLCH=function(l){if(!("l"in l&&"c"in l&&"h"in l)){{var z=r(K(E(l)));
l=z.l;var b=z.a;const e=z.b;z=Math.sqrt(b*b+e*e);b=Math.atan2(e,b);b=0<b?b:b+2*Math.PI;l={l,c:z,h:b}}}return l};A.toRGB=E;A.toXYZ=function(l){return"x"in l&&"y"in l&&"z"in l?l:K(E(l))};Object.defineProperty(A,"__esModule",{value:!0})})},"esri/symbols/support/svgUtils":function(){define("exports ../../Color ../../core/has ../../chunks/mat2df32 ../../chunks/mat2d ../../widgets/support/widgetUtils ../../core/Logger ../../widgets/support/jsxFactory".split(" "),function(A,I,K,q,r,L,E,F){function Q(m,C){m*=
S/180;return Math.abs(C*Math.sin(m))+Math.abs(C*Math.cos(m))}function l(m){return m.map(C=>`${C.command} ${C.values.join(" ")}`).join(" ").trim()}function z(m,C,G,T){if(m){if("circle"===m.type)return F.tsx("circle",{fill:C,"fill-rule":"evenodd",stroke:G.color,"stroke-width":G.width,"stroke-linecap":G.cap,"stroke-linejoin":G.join,"stroke-dasharray":G.dashArray,"stroke-miterlimit":"4",cx:m.cx,cy:m.cy,r:m.r});if("ellipse"===m.type)return F.tsx("ellipse",{fill:C,"fill-rule":"evenodd",stroke:G.color,"stroke-width":G.width,
"stroke-linecap":G.cap,"stroke-linejoin":G.join,"stroke-dasharray":G.dashArray,"stroke-miterlimit":"4",cx:m.cx,cy:m.cy,rx:m.rx,ry:m.ry});if("rect"===m.type)return F.tsx("rect",{fill:C,"fill-rule":"evenodd",stroke:G.color,"stroke-width":G.width,"stroke-linecap":G.cap,"stroke-linejoin":G.join,"stroke-dasharray":G.dashArray,"stroke-miterlimit":"4",x:m.x,y:m.y,width:m.width,height:m.height});if("image"===m.type)return F.tsx("image",{href:m.src,x:m.x,y:m.y,width:m.width,height:m.height,preserveAspectRatio:"none"});
if("path"===m.type)return m="string"!==typeof m.path?l(m.path):m.path,F.tsx("path",{fill:C,"fill-rule":"evenodd",stroke:G.color,"stroke-width":G.width,"stroke-linecap":G.cap,"stroke-linejoin":G.join,"stroke-dasharray":G.dashArray,"stroke-miterlimit":"4",d:m});if("text"===m.type)return F.tsx("text",{fill:C,"fill-rule":"evenodd",stroke:G.color,"stroke-width":G.width,"stroke-linecap":G.cap,"stroke-linejoin":G.join,"stroke-dasharray":G.dashArray,"stroke-miterlimit":"4","text-anchor":T.align,"text-decoration":T.decoration,
kerning:T.kerning,rotate:T.rotate,"text-rendering":Y,"font-style":T.font.style,"font-variant":T.font.variant,"font-weight":T.font.weight,"font-size":T.font.size,"font-family":T.font.family,x:m.x,y:m.y},m.text)}return null}function b(m){const C={fill:"none",pattern:null,linearGradient:null};if(m)if("type"in m&&"pattern"===m.type){var G=`patternId-${++J}`;C.fill=`url(#${G})`;C.pattern={id:G,x:m.x,y:m.y,width:m.width,height:m.height,image:{x:0,y:0,width:m.width,height:m.height,href:m.src}}}else"type"in
m&&"linear"===m.type?(G=`linearGradientId-${++X}`,C.fill=`url(#${G})`,C.linearGradient={id:G,x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,stops:m.colors.map(T=>({offset:T.offset,color:T.color&&(new I(T.color)).toString()}))}):m&&(m=new I(m),C.fill=m.toString());return C}function e(m){const C={color:"none",width:1,cap:"butt",join:"4",dashArray:"none"};if(m&&(null!=m.width&&(C.width=m.width),m.cap&&(C.cap=m.cap),m.join&&(C.join=m.join.toString()),m.color&&(C.color=(new I(m.color)).toString()),m.style)){let T=null;
m.style in M&&(T=M[m.style]);if(Array.isArray(T)){T=T.slice(0);for(var G=0;G<T.length;++G)T[G]*=m.width;if("butt"!==m.cap){for(G=0;G<T.length;G+=2)T[G]-=m.width,1>T[G]&&(T[G]=1);for(G=1;G<T.length;G+=2)T[G]+=m.width}T=T.join(",")}C.dashArray=T}return C}function f(m,C){const G={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};m&&(G.align=m.align,G.decoration=m.decoration,G.kerning=m.kerning?"auto":"0",G.rotate=m.rotated?"90":"0",
G.font.style=C.style||"normal",G.font.variant=C.variant||"normal",G.font.weight=C.weight||"normal",G.font.size=C.size&&C.size.toString()||"10pt",G.font.family=C.family||"serif");return G}function t(m){const {pattern:C,linearGradient:G}=m;return C?F.tsx("pattern",{id:C.id,patternUnits:"userSpaceOnUse",x:C.x,y:C.y,width:C.width,height:C.height},F.tsx("image",{x:C.image.x,y:C.image.y,width:C.image.width,height:C.image.height,href:C.image.href})):G?(m=G.stops.map((T,ea)=>F.tsx("stop",{key:`${ea}-stop`,
offset:T.offset,"stop-color":T.color})),F.tsx("linearGradient",{id:G.id,gradientUnits:"userSpaceOnUse",x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2},m)):null}function c(m,C,G){return r.translate(m,r.identity(m),[C,G])}function g(m,C,G,T,ea){r.scale(m,r.identity(m),[C,G]);m[4]=m[4]*C-T*C+T;m[5]=m[5]*G-ea*G+ea;return m}function y(m,C,G,T){var ea=C%360*Math.PI/180;r.rotate(m,r.identity(m),ea);C=Math.cos(ea);ea=Math.sin(ea);const ba=m[4],H=m[5];m[4]=ba*C-H*ea+T*ea-G*C+G;m[5]=H*C+ba*ea-G*ea-T*C+T;return m}function u(m,
C){d&&"left"in d?(d.left>m&&(d.left=m),d.right<m&&(d.right=m),d.top>C&&(d.top=C),d.bottom<C&&(d.bottom=C)):d={left:m,bottom:C,right:m,top:C}}function B(m){const C=m.args,G=C.length;switch(m.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(m=0;m<G;m+=2)u(C[m],C[m+1]);h.x=C[G-2];h.y=C[G-1];break;case "H":for(m=0;m<G;++m)u(C[m],h.y);h.x=C[G-1];break;case "V":for(m=0;m<G;++m)u(h.x,C[m]);h.y=C[G-1];break;case "m":m=0;"x"in h||(u(h.x=C[0],h.y=C[1]),m=2);for(;m<G;m+=2)u(h.x+=C[m],h.y+=C[m+
1]);break;case "l":case "t":for(m=0;m<G;m+=2)u(h.x+=C[m],h.y+=C[m+1]);break;case "h":for(m=0;m<G;++m)u(h.x+=C[m],h.y);break;case "v":for(m=0;m<G;++m)u(h.x,h.y+=C[m]);break;case "c":for(m=0;m<G;m+=6)u(h.x+C[m],h.y+C[m+1]),u(h.x+C[m+2],h.y+C[m+3]),u(h.x+=C[m+4],h.y+=C[m+5]);break;case "s":case "q":for(m=0;m<G;m+=4)u(h.x+C[m],h.y+C[m+1]),u(h.x+=C[m+2],h.y+=C[m+3]);break;case "A":for(m=0;m<G;m+=7)u(C[m+5],C[m+6]);h.x=C[G-2];h.y=C[G-1];break;case "a":for(m=0;m<G;m+=7)u(h.x+=C[m+5],h.y+=C[m+6])}}function k(m,
C,G){const T=D[m.toLowerCase()];"number"===typeof T&&(T?C.length>=T&&(m={action:m,args:C.slice(0,C.length-C.length%T)},G.push(m),B(m)):(m={action:m,args:[]},G.push(m),B(m)))}function w(m){const C={x:0,y:0,width:0,height:0};if("circle"===m.type)C.x=m.cx-m.r,C.y=m.cy-m.r,C.width=2*m.r,C.height=2*m.r;else if("ellipse"===m.type)C.x=m.cx-m.rx,C.y=m.cy-m.ry,C.width=2*m.rx,C.height=2*m.ry;else if("image"===m.type||"rect"===m.type)C.x=m.x,C.y=m.y,C.width=m.width,C.height=m.height;else if("path"===m.type){{const ea=
("string"!==typeof m.path?l(m.path):m.path).match(U),ba=[];d={};h={};if(ea){m="";var G=[],T=ea.length;for(let H=0;H<T;++H){const O=ea[H],Z=parseFloat(O);isNaN(Z)?(m&&k(m,G,ba),G=[],m=O):G.push(Z)}k(m,G,ba);m={x:0,y:0,width:0,height:0};d&&"left"in d&&(m.x=d.left,m.y=d.top,m.width=d.right-d.left,m.height=d.bottom-d.top)}else m=null}C.x=m.x;C.y=m.y;C.width=m.width;C.height=m.height}return C}function P(m){const C={x:0,y:0,width:0,height:0};let G=null,T=Number.NEGATIVE_INFINITY,ea=Number.NEGATIVE_INFINITY;
for(const ba of m)G?(G.x=Math.min(G.x,ba.x),G.y=Math.min(G.y,ba.y),T=Math.max(T,ba.x+ba.width),ea=Math.max(ea,ba.y+ba.height)):(G=C,G.x=ba.x,G.y=ba.y,T=ba.x+ba.width,ea=ba.y+ba.height);G&&(G.width=T-G.x,G.height=ea-G.y);return G}function v(m,C,G,T,ea,ba,H,O,Z){var fa=(H&&ba?Q(ba,C):C)/2,ja=(H&&ba?Q(ba,G):G)/2;Z&&(fa=Z[0],ja=Z[1],fa=(H&&ba?Q(ba,fa):fa)/2,ja=(H&&ba?Q(ba,ja):ja)/2);const ra=m.width+T,qa=m.height+T;H=q.create();Z=q.create();var la=!1;if(ea&&0!==ra&&0!==qa){ea=C!==G?C/G:ra/qa;la=C>G?C:
G;let na=1,ca=1;isNaN(la)||(1<ea?(na=la/ra,ca=la/ea/qa):(ca=la/qa,na=la*ea/ra));r.multiply(Z,Z,g(H,na,ca,fa,ja));la=!0}ea=m.x+(ra-T)/2;m=m.y+(qa-T)/2;r.multiply(Z,Z,c(H,fa-ea,ja-m));!la&&(ra>C||qa>G)&&(T=ra/C>qa/G,C=(T?C:G)/(T?ra:qa),r.multiply(Z,Z,g(H,C,C,ea,m)));ba&&r.multiply(Z,Z,y(H,ba,ea,m));O&&r.multiply(Z,Z,c(H,O[0],O[1]));return`matrix(${Z[0]},${Z[1]},${Z[2]},${Z[3]},${Z[4]},${Z[5]})`}function n(m,C,G){m=null==m?void 0:m.effects.find(O=>"bloom"===O.type);if(!m)return null;const {strength:T,
radius:ea}=m;m=0<T?ea:0;const ba=(T+m)*C,H=4*T+1;return F.tsx("filter",{id:`bloom${G}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},F.tsx("feMorphology",{operator:"dilate",radius:(T+.5*m)*5**(C/100)*(.4+C/100),in:"SourceGraphic",result:"dilate"}),F.tsx("feGaussianBlur",{in:"dilate",stdDeviation:ba/25,result:"blur"}),F.tsx("feGaussianBlur",{in:"blur",stdDeviation:ba/50,result:"intensityBlur"}),F.tsx("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},
F.tsx("feFuncR",{type:"linear",slope:H}),F.tsx("feFuncG",{type:"linear",slope:H}),F.tsx("feFuncB",{type:"linear",slope:H})),F.tsx("feMerge",null,F.tsx("feMergeNode",{in:"intensityBlur"}),F.tsx("feMergeNode",{in:"intensityBrightness"}),F.tsx("feGaussianBlur",{stdDeviation:T/10})))}let J=0,X=0;L=K("android");const Y=K("chrome")||L&&4<=L?"auto":"optimizeLegibility",D={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},U=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let d={},h={};const M={solid:"none",
shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},S=Math.PI;let W=1;A.computeBBox=P;A.generateFillAttributes=b;A.generateStrokeAttributes=e;A.generateTextAttributes=f;A.getBoundingBox=w;A.getTransformMatrix=v;A.renderDef=t;A.renderSVG=function(m,C,G,T){const ea=[],ba=[],H=++W,O=n(null==T?void 0:T.effectView,C,H);var Z=null;if(O){var fa;Z=null==T?void 0:null==
(fa=T.effectView)?void 0:fa.effects.find(ja=>"bloom"===ja.type);Z=(Z.strength?Z.strength+Z.radius/2:0)/3;Z=[Math.max(C+C*Z,10),Math.max(G+G*Z,10)]}for(const ja of m){m=[];fa=[];let ra=0,qa=0,la=0;for(const na of ja){const {shape:ca,fill:ta,stroke:oa,font:wa,offset:xa}=na;ra+=oa&&oa.width||0;const za=b(ta),ya=e(oa),Ea="text"===ca.type?f(ca,wa):null;ea.push(t(za));m.push(z(ca,za.fill,ya,Ea));fa.push(w(ca));xa&&(qa+=xa[0],la+=xa[1])}fa=v(P(fa),C,G,ra,null==T?void 0:T.scale,null==T?void 0:T.rotation,
null==T?void 0:T.useRotationSize,[qa,la],Z);ba.push(F.tsx("g",{transform:fa},m))}null!=T&&T.useRotationSize&&null!=T&&T.rotation&&(C=Q(null==T?void 0:T.rotation,C),G=Q(null==T?void 0:T.rotation,G));O&&(C=Z[0],G=Z[1]);return F.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:C,height:G,style:"display: block;"},O,F.tsx("defs",null,ea),O?F.tsx("g",{filter:`url(#bloom${H})`},ba):ba)};A.renderShape=z;Object.defineProperty(A,"__esModule",{value:!0})})},"esri/chunks/mat2df32":function(){define(["exports"],
function(A){function I(){const Q=new Float32Array(6);Q[0]=1;Q[3]=1;return Q}function K(Q){const l=new Float32Array(6);l[0]=Q[0];l[1]=Q[1];l[2]=Q[2];l[3]=Q[3];l[4]=Q[4];l[5]=Q[5];return l}function q(Q,l,z,b,e,f){const t=new Float32Array(6);t[0]=Q;t[1]=l;t[2]=z;t[3]=b;t[4]=e;t[5]=f;return t}function r(Q,l){return new Float32Array(Q,l,6)}function L(Q,l,z,b){const e=l[b];l=l[b+1];Q[b]=z[0]*e+z[2]*l+z[4];Q[b+1]=z[1]*e+z[3]*l+z[5]}function E(Q,l,z,b=0,e=0,f=2){for(e=e||l.length/f;b<e;b++)L(Q,l,z,b*f)}const F=
Object.freeze({__proto__:null,create:I,clone:K,fromValues:q,createView:r,transform:L,transformMany:E});A.clone=K;A.create=I;A.createView=r;A.fromValues=q;A.mat2df32=F;A.transform=L;A.transformMany=E})},"esri/chunks/mat2d":function(){define(["exports","./common"],function(A,I){function K(v,n){v[0]=n[0];v[1]=n[1];v[2]=n[2];v[3]=n[3];v[4]=n[4];v[5]=n[5];return v}function q(v){v[0]=1;v[1]=0;v[2]=0;v[3]=1;v[4]=0;v[5]=0;return v}function r(v,n,J,X,Y,D,U){v[0]=n;v[1]=J;v[2]=X;v[3]=Y;v[4]=D;v[5]=U;return v}
function L(v,n){const J=n[0],X=n[1],Y=n[2],D=n[3],U=n[4];n=n[5];let d=J*D-X*Y;if(!d)return null;d=1/d;v[0]=D*d;v[1]=-X*d;v[2]=-Y*d;v[3]=J*d;v[4]=(Y*n-D*U)*d;v[5]=(X*U-J*n)*d;return v}function E(v){return v[0]*v[3]-v[1]*v[2]}function F(v,n,J){const X=n[0],Y=n[1],D=n[2],U=n[3],d=n[4];n=n[5];const h=J[0],M=J[1],S=J[2],W=J[3],m=J[4];J=J[5];v[0]=X*h+D*M;v[1]=Y*h+U*M;v[2]=X*S+D*W;v[3]=Y*S+U*W;v[4]=X*m+D*J+d;v[5]=Y*m+U*J+n;return v}function Q(v,n,J){const X=n[0],Y=n[1],D=n[2],U=n[3],d=n[4];n=n[5];const h=
Math.sin(J);J=Math.cos(J);v[0]=X*J+D*h;v[1]=Y*J+U*h;v[2]=X*-h+D*J;v[3]=Y*-h+U*J;v[4]=d;v[5]=n;return v}function l(v,n,J){const X=n[1],Y=n[2],D=n[3],U=n[4],d=n[5],h=J[0];J=J[1];v[0]=n[0]*h;v[1]=X*h;v[2]=Y*J;v[3]=D*J;v[4]=U;v[5]=d;return v}function z(v,n,J){const X=n[0],Y=n[1],D=n[2],U=n[3],d=n[4];n=n[5];const h=J[0];J=J[1];v[0]=X;v[1]=Y;v[2]=D;v[3]=U;v[4]=X*h+D*J+d;v[5]=Y*h+U*J+n;return v}function b(v,n){const J=Math.sin(n);n=Math.cos(n);v[0]=n;v[1]=J;v[2]=-J;v[3]=n;v[4]=0;v[5]=0;return v}function e(v,
n){v[0]=n[0];v[1]=0;v[2]=0;v[3]=n[1];v[4]=0;v[5]=0;return v}function f(v,n){v[0]=1;v[1]=0;v[2]=0;v[3]=1;v[4]=n[0];v[5]=n[1];return v}function t(v){return"mat2d("+v[0]+", "+v[1]+", "+v[2]+", "+v[3]+", "+v[4]+", "+v[5]+")"}function c(v){return Math.sqrt(v[0]**2+v[1]**2+v[2]**2+v[3]**2+v[4]**2+v[5]**2+1)}function g(v,n,J){v[0]=n[0]+J[0];v[1]=n[1]+J[1];v[2]=n[2]+J[2];v[3]=n[3]+J[3];v[4]=n[4]+J[4];v[5]=n[5]+J[5];return v}function y(v,n,J){v[0]=n[0]-J[0];v[1]=n[1]-J[1];v[2]=n[2]-J[2];v[3]=n[3]-J[3];v[4]=
n[4]-J[4];v[5]=n[5]-J[5];return v}function u(v,n,J){v[0]=n[0]*J;v[1]=n[1]*J;v[2]=n[2]*J;v[3]=n[3]*J;v[4]=n[4]*J;v[5]=n[5]*J;return v}function B(v,n,J,X){v[0]=n[0]+J[0]*X;v[1]=n[1]+J[1]*X;v[2]=n[2]+J[2]*X;v[3]=n[3]+J[3]*X;v[4]=n[4]+J[4]*X;v[5]=n[5]+J[5]*X;return v}function k(v,n){return v[0]===n[0]&&v[1]===n[1]&&v[2]===n[2]&&v[3]===n[3]&&v[4]===n[4]&&v[5]===n[5]}function w(v,n){const J=v[0],X=v[1],Y=v[2],D=v[3],U=v[4];v=v[5];const d=n[0],h=n[1],M=n[2],S=n[3],W=n[4];n=n[5];return Math.abs(J-d)<=I.EPSILON*
Math.max(1,Math.abs(J),Math.abs(d))&&Math.abs(X-h)<=I.EPSILON*Math.max(1,Math.abs(X),Math.abs(h))&&Math.abs(Y-M)<=I.EPSILON*Math.max(1,Math.abs(Y),Math.abs(M))&&Math.abs(D-S)<=I.EPSILON*Math.max(1,Math.abs(D),Math.abs(S))&&Math.abs(U-W)<=I.EPSILON*Math.max(1,Math.abs(U),Math.abs(W))&&Math.abs(v-n)<=I.EPSILON*Math.max(1,Math.abs(v),Math.abs(n))}const P=Object.freeze({__proto__:null,copy:K,identity:q,set:r,invert:L,determinant:E,multiply:F,rotate:Q,scale:l,translate:z,fromRotation:b,fromScaling:e,fromTranslation:f,
str:t,frob:c,add:g,subtract:y,multiplyScalar:u,multiplyScalarAndAdd:B,exactEquals:k,equals:w,mul:F,sub:y});A.add=g;A.copy=K;A.determinant=E;A.equals=w;A.exactEquals=k;A.frob=c;A.fromRotation=b;A.fromScaling=e;A.fromTranslation=f;A.identity=q;A.invert=L;A.mat2d=P;A.mul=F;A.multiply=F;A.multiplyScalar=u;A.multiplyScalarAndAdd=B;A.rotate=Q;A.scale=l;A.set=r;A.str=t;A.sub=y;A.subtract=y;A.translate=z})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(A,I,K,q,r,L,E,F,Q,l,z,b,e){function f(d){d=d.symbolLayers;if(!d)return null;let h=null;d.forEach(M=>{if("object"!==M.type||null==M.resource.href)h="water"===M.type?F.unwrap(M.color):F.isSome(M.material)?F.unwrap(M.material.color):null});return h?new q(h):null}function t(d,h){if(null==h)return d;d=d.toRgba();d[3]*=h;return new q(d)}function c(d,h,M){if(d=d.symbolLayers){var S=W=>{W=F.isSome(W)?W:null;h=h||W||null!=M&&U;return t(h,M)};d.forEach(W=>{if("object"!==W.type||null==W.resource.href||
h)if("water"===W.type)W.color=S(W.color);else{var m=F.isSome(W.material)?W.material.color:null;m=S(m);F.isNone(W.material)?W.material=new e.Symbol3DMaterial({color:m}):W.material.color=m;null!=M&&"outline"in W&&F.isSome(W.outline)&&F.isSome(W.outline.color)&&(W.outline.color=t(W.outline.color,M))}})}}function g(d,h){return y.apply(this,arguments)}function y(){y=K._asyncToGenerator(function*(d,h){(d=d.symbolLayers)&&(yield L.forEach(d,function(){var M=K._asyncToGenerator(function*(S){return u(S,h)});
return function(S){return M.apply(this,arguments)}}()))});return y.apply(this,arguments)}function u(d,h){return B.apply(this,arguments)}function B(){B=K._asyncToGenerator(function*(d,h){switch(d.type){case "extrude":d.size="number"===typeof h[2]?h[2]:0;break;case "icon":case "line":case "text":h=k(h);F.isSome(h)&&(d.size=h);break;case "path":{const M=v(h,l.ONES,[d.width,void 0,d.height]);d.width=X(h[0],d.width,1,M);d.height=X(h[2],d.height,1,M)}break;case "object":yield w(d,h)}});return B.apply(this,
arguments)}function k(d){for(const h of d)if("number"===typeof h)return h;return null}function w(d,h){return P.apply(this,arguments)}function P(){P=K._asyncToGenerator(function*(d,h){const {resourceSize:M,symbolSize:S}=yield n(d),W=v(h,M,S);d.width=X(h[0],S[0],M[0],W);d.depth=X(h[1],S[1],M[1],W);d.height=X(h[2],S[2],M[2],W)});return P.apply(this,arguments)}function v(d,h,M){for(let S=0;3>S;S++){const W=d[S];switch(W){case "symbol-value":return null!=M[S]?M[S]/h[S]:1;case "proportional":break;default:if(W&&
h[S])return W/h[S]}}return 1}function n(d){return J.apply(this,arguments)}function J(){J=K._asyncToGenerator(function*(d){const h=yield(yield new Promise((G,T)=>A(["./symbolLayerUtils"],G,T))).computeObjectLayerResourceSize(d,10),{width:M,height:S,depth:W}=d;d=[M,W,S];let m=1;for(var C=0;3>C;C++)if(null!=d[C]){m=d[C]/h[C];break}for(C=0;3>C;C++)null==d[C]&&(d[C]=h[C]*m);return{resourceSize:h,symbolSize:d}});return J.apply(this,arguments)}function X(d,h,M,S){switch(d){case "proportional":return M*S;
case "symbol-value":return null!=h?h:M;default:return d}}function Y(){Y=K._asyncToGenerator(function*(d,h){if(d&&h){if(r.isSymbol3D(d))return g(d,h);if(r.isSymbol2D(d)&&(h=k(h),!F.isNone(h)))switch(d.type){case "simple-marker":d.size=h;break;case "picture-marker":{const M=d.width/d.height;1<M?(d.width=h,d.height=h*M):(d.width=h*M,d.height=h);break}case "simple-line":d.width=h;break;case "text":d.font.size=h}}});return Y.apply(this,arguments)}const D=/\/resource\/(.*?)\.svg$/,U=new q("white");I.applyColorToSymbol=
function(d,h,M){if(d&&(h||null!=M))if(h&&(h=new q(h)),r.isSymbol3D(d))c(d,h,M);else if(r.isSymbol2D(d)){if(h=h||d.color)d.color=t(h,M);null!=M&&"outline"in d&&d.outline&&d.outline.color&&(d.outline.color=t(d.outline.color,M))}};I.applyOpacityToColor=t;I.applyRotationToSymbol=function(d,h,M){d&&null!=h&&(r.isSymbol3D(d)?(d=d.symbolLayers)&&d.forEach(S=>{if(S&&"object"===S.type)switch(M){case "tilt":S.tilt=h;break;case "roll":S.roll=h;break;default:S.heading=h}}):!r.isSymbol2D(d)||"simple-marker"!==
d.type&&"picture-marker"!==d.type&&"text"!==d.type||(d.angle=h))};I.applySizesToSymbol=function(d,h){return Y.apply(this,arguments)};I.getCSSFilterFromEffectList=function(d){if(!d)return null;d=d.effects.filter(h=>"bloom"!==h.type).map(h=>h.toJSON());return z.effectFunctionsFromJSON(d)};I.getColorFromSymbol=function(d,h){if(!d)return null;let M=null;r.isSymbol3D(d)?M=f(d):r.isSymbol2D(d)&&(M=d.color?new q(d.color):null);return M?t(M,h):null};I.getIconHref=function(d,h){h=h.resource.href;return!E("esri-canvas-svg-support")&&
d.styleOrigin&&D.test(h)?h.replace(D,"/resource/png/$1.png"):h};I.getSymbolOutlineSize=function(d){if(!d)return 0;if(r.isSymbol3D(d)){{const h=d.symbolLayers&&d.symbolLayers.length;h?(d=d.symbolLayers.getItemAt(h-1),d="outline"in d?F.get(d,"outline","size"):void 0):d=void 0}return F.isSome(d)?d:0}return(d=b.getStroke(d))&&Q.px2pt(d.width)||0};I.isVolumetricSymbol=function(d){if(F.isNone(d)||!("symbolLayers"in d)||F.isNone(d.symbolLayers))return!1;switch(d.type){case "point-3d":return d.symbolLayers.some(h=>
"object"===h.type);case "line-3d":return d.symbolLayers.some(h=>"path"===h.type);case "polygon-3d":return d.symbolLayers.some(h=>"object"===h.type||"extrude"===h.type);default:return!1}};Object.defineProperty(I,"__esModule",{value:!0})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(A,I,K,q,r,L,E){function F(e){if(!e)return null;let f;switch(e.type){case "simple-fill":case "picture-fill":case "simple-marker":f=
F(e.outline);break;case "simple-line":{const t=L.pt2px(e.width);"none"!==e.style&&0!==t&&(f={color:e.color,style:b(e.style),width:t,cap:e.cap,join:"miter"===e.join?L.pt2px(e.miterLimit):e.join});break}default:f=null}return f}const Q={left:"start",center:"middle",right:"end",justify:"start"},l={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},z=new r(1E3),b=function(){const e={};return function(f){if(e[f])return e[f];const t=f.replace(/-/g,"");return e[f]=t}}();
K=new K([128,128,128]);A.defaultThematicColor=K;A.dekebabifyLineStyle=b;A.getFill=function(e){const f=e.style;let t=null;if(e)switch(e.type){case "simple-marker":"cross"!==f&&"x"!==f&&(t=e.color);break;case "simple-fill":"solid"===f?t=e.color:"none"!==f&&(t={type:"pattern",x:0,y:0,src:I.getAssetUrl(`esri/symbols/patterns/${f}.png`),width:5,height:5});break;case "picture-fill":t={type:"pattern",src:e.url,width:L.pt2px(e.width)*e.xscale,height:L.pt2px(e.height)*e.yscale,x:L.pt2px(e.xoffset),y:L.pt2px(e.yoffset)};
break;case "text":t=e.color;break;case "cim":t=E.getCIMSymbolColor(e)}return t};A.getPatternUrlWithColor=function(e,f){const t=e+"-"+f;return void 0!==z.get(t)?Promise.resolve(z.get(t)):q(e,{responseType:"image"}).then(c=>{c=c.data;const g=c.naturalWidth,y=c.naturalHeight,u=document.createElement("canvas");u.width=g;u.height=y;const B=u.getContext("2d");B.fillStyle=f;B.fillRect(0,0,g,y);B.globalCompositeOperation="destination-in";B.drawImage(c,0,0);c=u.toDataURL();z.put(t,c);return c})};A.getSVGAlign=
function(e){return e=(e=e.horizontalAlignment)&&Q[e.toLowerCase()]||"middle"};A.getSVGBaseline=function(e){return(e=e.verticalAlignment)&&l[e.toLowerCase()]||"alphabetic"};A.getSVGBaselineShift=function(e){return"bottom"===e.verticalAlignment?"super":null};A.getStroke=F;Object.defineProperty(A,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(A){return function(){function I(q,r){this._storage=new A.MemCacheStorage;this._storage.maxSize=q;r&&this._storage.registerRemoveFunc("",
r)}var K=I.prototype;K.put=function(q,r){this._storage.put(q,r,1,1)};K.pop=function(q){return this._storage.pop(q)};K.get=function(q){return this._storage.get(q)};K.clear=function(){this._storage.clearAll()};K.destroy=function(){this._storage.destroy()};return I}()})},"esri/symbols/support/symbolUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ../../support/arcadeOnDemand ./previewUtils ./utils".split(" "),function(A,I,K,q,r,L,E,F){function Q(c,
g){if(g&&(c.style.filter=F.getCSSFilterFromEffectList(g),g=g.effects))for(const y of g)if("drop-shadow"===(null==y?void 0:y.type)){0>y.offsetX?c.style.marginLeft=`${Math.abs(y.offsetX)}px`:c.style.marginRight=`${y.offsetX}px`;break}}function l(c,g){return z.apply(this,arguments)}function z(){z=K._asyncToGenerator(function*(c,g){switch(c.type){case "web-style":var {previewWebStyleSymbol:y}=yield new Promise((u,B)=>A(["./previewWebStyleSymbol"],u,B));return y(c,l,g);case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return{previewSymbol3D:y}=
yield new Promise((u,B)=>A(["./previewSymbol3D"],u,B)),y(c,g);case "simple-marker":case "simple-line":case "simple-fill":case "picture-marker":case "picture-fill":case "text":return{previewSymbol2D:y}=yield new Promise((u,B)=>A(["./previewSymbol2D"],u,B)),y(c,g);case "cim":return{previewCIMSymbol:y}=yield new Promise((u,B)=>A(["./previewCIMSymbol"],u,B)),y(c,g)}});return z.apply(this,arguments)}function b(c){return c&&"opacity"in c?c.opacity*b(c.parent):1}function e(){e=K._asyncToGenerator(function*(c,
g){var y,u;if(c){var B=c.sourceLayer;B=null!=(y=r.isSome(g)&&null!=(u=g.useSourceLayer)&&u?B:c.layer)?y:B;y=b(B);if(r.isSome(c.symbol)&&(!r.isSome(g)||!0!==g.ignoreGraphicSymbol))return c="web-style"===c.symbol.type?yield c.symbol.fetchSymbol(r.isSome(g)?g.abortOptions:null):c.symbol.clone(),F.applyColorToSymbol(c,null,y),c;var k=r.isSome(g)&&g.renderer||B&&"renderer"in B&&B.renderer;if(u=k&&"getSymbolAsync"in k?yield k.getSymbolAsync(c,g):null){u="web-style"===u.type?yield u.fetchSymbol(r.isSome(g)?
g.abortOptions:null):u.clone();if(!("visualVariables"in k&&k.visualVariables&&k.visualVariables.length))return F.applyColorToSymbol(u,null,y),u;"arcadeRequiredForVisualVariables"in k&&k.arcadeRequiredForVisualVariables&&(r.isNone(g)||r.isNone(g.arcade))&&(g={...r.unwrap(g)},g.arcade=yield L.loadArcade());B=yield new Promise((X,Y)=>A(["../../renderers/visualVariables/support/visualVariableUtils"],X,Y));var w=[],P=[],v=[],n=[];for(var J of k.visualVariables)switch(J.type){case "color":w.push(J);break;
case "opacity":P.push(J);break;case "rotation":n.push(J);break;case "size":J.target||v.push(J)}J=(J=!!w.length&&w[w.length-1])?B.getColor(J,c,g):null;P=(P=!!P.length&&P[P.length-1])?B.getOpacity(P,c,g):null;null!=y&&(P=null!=P?P*y:y);F.applyColorToSymbol(u,J,P);v.length&&(y=B.getAllSizes(v,c,g),yield F.applySizesToSymbol(u,y));for(const X of n)F.applyRotationToSymbol(u,B.getRotationAngle(X,c,g),X.axis);return u}}});return e.apply(this,arguments)}function f(){f=K._asyncToGenerator(function*(c,g){var y;
if(c){var u=b(c.layer||c.sourceLayer);if(r.isSome(c.symbol)&&(!r.isSome(g)||!0!==g.ignoreGraphicSymbol))return c="web-style"===c.symbol.type?yield c.symbol.fetchSymbol(r.isSome(g)?g.abortOptions:null):c.symbol.clone(),F.getColorFromSymbol(c,u);var B=r.isSome(g)&&g.renderer||c.get("layer.renderer")||c.get("sourceLayer.renderer"),k=yield B.getSymbolAsync(c,g);if(k){k="web-style"===k.type?yield k.fetchSymbol(r.isSome(g)?g.abortOptions:null):k.clone();k=F.getColorFromSymbol(k,u);if(!("visualVariables"in
B)||"visualVariables"in B&&!B.visualVariables||"visualVariables"in B&&(null==(y=B.visualVariables)||!y.length))return k;B.arcadeRequiredForVisualVariables&&(r.isNone(g)||r.isNone(g.arcade))&&(g={...r.unwrap(g)},g.arcade=yield L.loadArcade());y=yield new Promise((v,n)=>A(["../../renderers/visualVariables/support/visualVariableUtils"],v,n));var w=[],P=[];for(const v of B.visualVariables)switch(v.type){case "color":w.push(v);break;case "opacity":P.push(v)}B=(B=0<w.length?w[w.length-1]:null)?y.getColor(B,
c,g):k;c=(k=0<P.length?P[P.length-1]:null)?y.getOpacity(k,c,g):null;null!=u&&(c=null!=c?c*u:u);return B?F.applyOpacityToColor(B,c):null}}});return f.apply(this,arguments)}let t=null;I.getDisplayedColor=function(c,g){return f.apply(this,arguments)};I.getDisplayedSymbol=function(c,g){return e.apply(this,arguments)};I.renderColorRampPreviewHTML=function(c,g={}){var y="horizontal"===g.align;const {width:u=y?75:24,height:B=y?24:75,gradient:k=!0}=g;var w=window.devicePixelRatio,P=u*w,v=B*w;w=document.createElement("canvas");
w.width=P;w.height=v;w.style.width=`${u}px`;w.style.height=`${B}px`;const n=w.getContext("2d");var J=y?P:0,X=y?0:v;if(k){const Y=n.createLinearGradient(0,0,J,X);y=c.length;const D=1===y?0:1/(y-1);c.forEach((U,d)=>Y.addColorStop(d*D,U.toString()));n.fillStyle=Y;n.fillRect(0,0,P,v)}else{P=y?P/c.length:P;v=y?v:v/c.length;X=J=0;for(const Y of c)n.fillStyle=Y.toString(),n.fillRect(J,X,P,v),J=y?J+P:0,X=y?0:X+v}c=document.createElement("div");c.style.width=`${u}px`;c.style.height=`${B}px`;Q(c,null==g?void 0:
g.effectList);c.appendChild(w);return c};I.renderDotDensityPreviewHTML=function(c,g,y){const {backgroundColor:u,outline:B,dotSize:k}=c;y=y&&y.swatchSize||E.SymbolSizeDefaults.size;const w=Math.round(y*y/k**2*.8),P=window.devicePixelRatio;c=document.createElement("canvas");const v=y*P;c.width=v;c.height=v;c.style.width=`${c.width/P}px`;c.style.height=`${c.height/P}px`;const n=c.getContext("2d");u&&(n.fillStyle=u.toCss(!0),n.fillRect(0,0,v,v),n.fill());n.fillStyle=g.toCss(!0);if(t&&t.length/2===w)for(g=
0;g<2*w;g+=2)n.fillRect(t[g],t[g+1],k*P,k*P),n.fill();else for(t=[],g=0;g<2*w;g+=2){const J=Math.floor(Math.random()*(v-0+1)),X=Math.floor(Math.random()*(v-0+1));t.push(J,X);n.fillRect(J,X,k*P,k*P);n.fill()}B&&(B.color&&(n.strokeStyle=B.color.toCss(!0)),n.lineWidth=B.width,n.strokeRect(0,0,v,v));y=new Image(y,y);y.src=c.toDataURL();return y};I.renderPreviewHTML=l;Object.defineProperty(I,"__esModule",{value:!0})})},"esri/widgets/Legend/support/clusterUtils":function(){define(["exports","../../../renderers/visualVariables/SizeVariable"],
function(A,I){const K=(q,r)=>{q=q.featuresTilingScheme.getClosestInfoForScale(q.scale).level;return null!=r&&r.levels?r.levels[q]:null};A.getClusterSizeVariable=function(q,r){if(!(q&&"visualVariables"in q&&q.visualVariables))return null;q=q.visualVariables.find(L=>"size"===L.type);return(r=K(r,q))?new I({field:q.field,minSize:r[2].size,minDataValue:r[2].value,maxSize:r[3].size,maxDataValue:r[3].value}):null};Object.defineProperty(A,"__esModule",{value:!0})})},"esri/widgets/Legend/support/colorRampUtils":function(){define(["require",
"exports","../../../chunks/_rollupPluginBabelHelpers","../../../Color","./utils"],function(A,I,K,q,r){function L(e,f){const t=[],c=e.length-1;5===e.length?t.push(0,2,4):t.push(0,c);return e.map((g,y)=>-1<t.indexOf(y)?r.createStopLabel(g,y,c,f):null)}function E(){E=K._asyncToGenerator(function*(e,f,t){let c=!1,g=[],y=[];if(e.stops){var u=e.stops;g=u.map(k=>k.value);(c=u.some(k=>!!k.label))&&(y=u.map(k=>k.label))}u=g[g.length-1];if(null==g[0]&&null==u)return null;const B=c?null:L(g,t);return(yield Promise.all(g.map(function(){var k=
K._asyncToGenerator(function*(w,P){const v="opacity"===e.type?yield F(w,e,f):(yield new Promise((n,J)=>A(["../../../renderers/visualVariables/support/visualVariableUtils"],n,J))).getColor(e,w);return{value:w,color:v,label:c?y[P]:B[P]}});return function(w,P){return k.apply(this,arguments)}}()))).reverse()});return E.apply(this,arguments)}function F(e,f){return Q.apply(this,arguments)}function Q(){Q=K._asyncToGenerator(function*(e,f,t=b){t=new q(t);e=(yield new Promise((c,g)=>A(["../../../renderers/visualVariables/support/visualVariableUtils"],
c,g))).getOpacity(f,e);null!=e&&(t.a=e);return t});return Q.apply(this,arguments)}function l(e,f){const {startIndex:t,endIndex:c,weight:g}=z(e,f);if(t===c)return f[t].color;e=q.blendColors(f[t].color,f[c].color,g);return new q(e)}function z(e,f){let t=0,c=f.length-1;f.some((g,y)=>{if(e<g.value)return c=y,!0;t=y;return!1});return{startIndex:t,endIndex:c,weight:(e-f[t].value)/(f[c].value-f[t].value)}}const b=new q([64,64,64]);I.getColorFromPointCloudStops=l;I.getRampStops=function(e,f,t){return E.apply(this,
arguments)};I.getRampStopsForPointCloud=function(e){let f=!1,t=[],c=[];t=e.map(u=>u.value);(f=e.some(u=>!!u.label))&&(c=e.map(u=>u.label));const g=t[t.length-1];if(null==t[0]&&null==g)return null;const y=f?null:L(t,!1);return t.map((u,B)=>{const k=l(u,e);return{value:u,color:k,label:f?c[B]:y[B]}}).reverse()};I.getStrectchRampStops=function(e,f){let t=[];if(e&&"multipart"===e.type)e.colorRamps.reverse().forEach(function(c,g){0===g?t.push({value:f.max,color:new q(c.toColor),label:"high"}):t.push({value:null,
color:new q(c.toColor),label:""});g===e.colorRamps.length-1?t.push({value:f.min,color:new q(c.fromColor),label:"low"}):t.push({value:null,color:new q(c.fromColor),label:""})});else{let c,g;e&&"algorithmic"===e.type?(c=e.fromColor,g=e.toColor):(c=[0,0,0,1],g=[255,255,255,1]);t=[{value:f.max,color:new q(g),label:"high"},{value:f.min,color:new q(c),label:"low"}]}return t};Object.defineProperty(I,"__esModule",{value:!0})})},"esri/widgets/Legend/support/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../symbols ../../../intl/date ../../../renderers/support/numberUtils ../../../symbols/SimpleLineSymbol".split(" "),
function(A,I,K,q,r,L,E){function F(b){return Q.apply(this,arguments)}function Q(){Q=K._asyncToGenerator(function*(b){if(!("visualVariables"in b&&b.visualVariables))return null;b=b.visualVariables.find(t=>"color"===t.type);if(!b)return null;var e=null,f=null;if(b.stops){if(1===b.stops.length)return b.stops[0].color;e=b.stops[0].value;f=b.stops[b.stops.length-1].value}e+=(f-e)/2;({getColor:f}=yield new Promise((t,c)=>A(["../../../renderers/visualVariables/support/visualVariableUtils"],t,c)));return f(b,
e)});return Q.apply(this,arguments)}function l(){l=K._asyncToGenerator(function*(b,e){const f=b.trailWidth||1;b=e||(yield F(b))||b.color;return new E({cap:"butt",color:b,width:f})});return l.apply(this,arguments)}const z=r.convertDateFormatToIntlOptions("short-date");I.RGB_IMG_SOURCE=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII\x3d","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII\x3d",
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII\x3d"];I.SPECIAL_CHARS_GREATER_THAN="\x3e";I.SPECIAL_CHARS_LESS_THAN="\x3c";I.createStopLabel=function(b,e,f,t){let c="";0===e?c="\x3c ":e===f&&(c="\x3e ");e=null;e=t?r.formatDate(b,z):L.format(b);return c+e};I.getMedianColor=F;I.getSymbolForFlowRenderer=function(b,e){return l.apply(this,arguments)};Object.defineProperty(I,
"__esModule",{value:!0})})},"esri/renderers/support/numberUtils":function(){define(["exports","../../intl","../../intl/number"],function(A,I,K){function q(z,b){return z-b}function r(z,b){let e;e=Number(z.toFixed(b));e<z?z=e+1/10**b:(z=e,e-=1/10**b);e=Number(e.toFixed(b));z=Number(z.toFixed(b));return[e,z]}function L(z,b,e,f,t){z=F(z,b,e,f);b=null==z.next||z.next<=t;return(null==z.previous||z.previous<=t)&&b||z.previous+z.next<=2*t}function E(z){z=String(z);var b=z.match(Q);if(b&&b[1])return{integer:b[1].split("").length,
fractional:b[3]?b[3].split("").length:0};if(-1<z.toLowerCase().indexOf("e")&&(b=z.split("e"),z=b[0],b=b[1],z&&b)){z=Number(z);b=Number(b);const e=0<b;e||(b=Math.abs(b));z=E(z);e?(z.integer+=b,z.fractional=b>z.fractional?0:z.fractional-b):(z.fractional+=b,z.integer=b>z.integer?1:z.integer-b);return z}return{integer:0,fractional:0}}function F(z,b,e,f){const t={previous:null,next:null};if(null!=e){const c=z-e;t.previous=Math.floor(Math.abs(100*(b-e-c)/c))}null!=f&&(z=f-z,t.next=Math.floor(Math.abs(100*
(f-b-z)/z)));return t}const Q=/^-?(\d+)(\.(\d+))?$/i,l={maximumFractionDigits:20};A.format=function(z){return K.formatNumber(z,l)};A.numDigits=E;A.percentChange=F;A.round=function(z,b={}){z=z.slice(0);const {tolerance:e=2,strictBounds:f=!1,indexes:t=z.map((g,y)=>y)}=b;t.sort(q);for(b=0;b<t.length;b++){const g=t[b],y=z[g],u=0===g?null:z[g-1],B=g===z.length-1?null:z[g+1],k=E(y).fractional;if(k){let w=0,P=!1;for(var c=void 0;w<=k&&!P;)c=r(y,w),c=f&&0===b?c[1]:c[0],P=L(y,c,u,B,e),w++;P&&(z[g]=c)}}return z};
Object.defineProperty(A,"__esModule",{value:!0})})},"esri/widgets/Legend/support/heatmapRampUtils":function(){define(["exports","../../../renderers/support/HeatmapColorStop"],function(A,I){A.getHeatmapRampStops=function(K){K=K.colorStops;let q=K.length-1;if(K&&K[0]){const r=K[q];r&&1!==r.ratio&&(K=K.slice(0),K.push(new I({ratio:1,color:r.color})),q++)}return K.map((r,L)=>{let E="";0===L?E="low":L===q&&(E="high");return{color:r.color,label:E,ratio:r.ratio}}).reverse()};Object.defineProperty(A,"__esModule",
{value:!0})})},"esri/widgets/Legend/support/relationshipRampUtils":function(){define(["exports","../../../core/lang","../../../symbols/support/gfxUtils","../../../symbols/support/previewSymbol3D"],function(A,I,K,q){function r(l){if(l){var {type:z}=l;return-1<z.indexOf("3d")?q.getSymbolLayerFill(l.symbolLayers.getItemAt(0)):"simple-line"===z||"simple-marker"===l.type&&("x"===l.style||"cross"===l.style)?(l=K.getStroke(l))&&l.color:K.getFill(l)}}function L(l,z){const b=z.HH.label,e=z.LL.label,f=z.HL.label;
z=z.LH.label;switch(l){case "HH":return{top:b,bottom:e,left:f,right:z};case "HL":return{top:f,bottom:z,left:e,right:b};case "LL":return{top:e,bottom:b,left:z,right:f};case "LH":return{top:z,bottom:f,left:b,right:e};default:return{top:b,bottom:e,left:f,right:z}}}function E(l){let z=F[l];l&&null==z&&(z=F.HH);return z||0}const F={HH:315,HL:45,LL:135,LH:225},Q={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L",
"M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};A.getRelationshipRampColors2D=function(l,z){const b=[],e=l.length**.5;l=I.clone(l);var f=(z||"HH").split("");z=f[0];for(f="H"===f[1];l.length;){const t=[];for(;t.length<e;)t.push(l.shift());f&&t.reverse();b.push(t)}"L"===z&&b.reverse();return b};A.getRelationshipRampElement=function(l){const {focus:z,infos:b,numClasses:e}=l;var f=Q[e];const t={};b.forEach(c=>{t[c.value]={label:c.label,fill:r(c.symbol)}});l=[];for(let c=0;c<e;c++){const g=[];for(let y=
0;y<e;y++)g.push(t[f[c][y]].fill);l.push(g)}f=L(z,t);return{type:"relationship-ramp",numClasses:e,focus:z,colors:l,labels:f,rotation:E(z)}};A.getRotationAngleForFocus=E;Object.defineProperty(A,"__esModule",{value:!0})})},"esri/symbols/support/previewSymbol3D":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../assets ../../core/colorUtils ../../core/has ../../core/Error ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/screenUtils ./gfxUtils ./IconSymbol3DLayerResource ./ObjectSymbol3DLayerResource ./previewUtils ./renderUtils ./utils ./webStyleSymbolUtils".split(" "),
function(A,I,K,q,r,L,E,F,Q,l,z,b,e,f,t,c,g){function y(H){const O=H.outline;var Z=F.isSome(H.material)?H.material.color:null;Z=F.isSome(Z)?Z.toHex():null;if(F.isNone(O)||"pattern"in O&&F.isSome(O.pattern)&&"style"===O.pattern.type&&"none"===O.pattern.style)return"fill"===H.type&&"#ffffff"===Z?{color:"#bdc3c7",width:.75}:null;H=l.pt2px(O.size)||0;return{color:"rgba("+(F.isSome(O.color)?O.color.toRgba():"255,255,255,1")+")",width:Math.min(H,G),style:"pattern"in O&&F.isSome(O.pattern)&&"style"===O.pattern.type?
z.dekebabifyLineStyle(O.pattern.style):null,join:"butt",cap:"patternCap"in O?O.patternCap:"butt"}}function u(H,O){var Z=O&&O.resource;Z=Z&&Z.href;if(H.thumbnail&&H.thumbnail.url)return Promise.resolve(H.thumbnail.url);if(Z&&"object"!==O.type)return Promise.resolve(c.getIconHref(H,O));const fa=K.getAssetUrl("esri/images/Legend/legend3dsymboldefault.png");return H.styleOrigin&&(H.styleOrigin.styleName||H.styleOrigin.styleUrl)?g.resolveWebStyleSymbol(H.styleOrigin,{portal:H.styleOrigin.portal},"webRef").catch(ja=>
ja).then(ja=>{var ra;return(null==ja?void 0:null==(ra=ja.thumbnail)?void 0:ra.url)||fa}):Promise.resolve(fa)}function B(H,O=1){const Z=H.a;H=q.toHSV(H);const {r:fa,g:ja,b:ra}=q.toRGB({h:H.h,s:H.s/O,v:100-(100-H.v)/O});return[fa,ja,ra,Z]}function k(H){return"water"===H.type?F.isNone(H.color)?null:H.color:F.isNone(H.material)||F.isNone(H.material.color)?null:H.material.color}function w(H,O=0){var Z=k(H);if(!Z){if("fill"===H.type)return null;O=f.adjustColorComponentBrightness(z.defaultThematicColor.r,
O);return[O,O,O,100]}H=Z.toRgba();for(Z=0;3>Z;Z++)H[Z]=f.adjustColorComponentBrightness(H[Z],O);return H}function P(H,O){return v.apply(this,arguments)}function v(){v=I._asyncToGenerator(function*(H,O){H=H.style;return"none"===H?null:{type:"pattern",x:0,y:0,src:yield z.getPatternUrlWithColor(K.getAssetUrl(`esri/symbols/patterns/${H}.png`),O.toCss(!0)),width:5,height:5}});return v.apply(this,arguments)}function n(H){return H.outline?y(H):{color:"rgba(0, 0, 0, 1)",width:1.5}}function J(H,O){H=k(H);
if(!H)return null;let Z;Z="rgba("+(f.adjustColorComponentBrightness(H.r,O)+",");Z+=f.adjustColorComponentBrightness(H.g,O)+",";Z+=f.adjustColorComponentBrightness(H.b,O)+",";return Z+H.a+");"}function X(H,O){O=J(H,O);if(!O)return{};if("pattern"in H&&F.isSome(H.pattern)&&"style"===H.pattern.type&&"none"===H.pattern.style)return null;const Z=Math.min(H.size?l.pt2px(H.size):.75,G);return{color:O,width:Z,style:"pattern"in H&&F.isSome(H.pattern)&&"style"===H.pattern.type?z.dekebabifyLineStyle(H.pattern.style):
null,cap:"cap"in H?H.cap:null,join:"join"in H?"miter"===H.join?l.pt2px(2):H.join:null}}function Y(H,O,Z){Z*=.75;return{type:"linear",x1:Z?.25*Z:0,y1:Z?.5*Z:0,x2:Z||4,y2:Z?.5*Z:4,colors:[{color:H,offset:0},{color:O,offset:1}]}}function D(H){const O=H.depth,Z=H.height;return(H=H.width)&&O&&Z&&H===O&&H<Z}function U(H,O,Z){const fa=[];if(!H)return fa;switch(H.type){case "icon":switch(H.resource&&H.resource.primitive||b.defaultPrimitive){case "circle":fa.push({shape:{type:"circle",cx:0,cy:0,r:.5*O},fill:w(H,
0),stroke:y(H)});break;case "square":fa.push({shape:{type:"path",path:[{command:"M",values:[0,O]},{command:"L",values:[0,0]},{command:"L",values:[O,0]},{command:"L",values:[O,O]},{command:"Z",values:[]}]},fill:w(H,0),stroke:y(H)});break;case "triangle":fa.push({shape:{type:"path",path:[{command:"M",values:[0,O]},{command:"L",values:[.5*O,0]},{command:"L",values:[O,O]},{command:"Z",values:[]}]},fill:w(H,0),stroke:y(H)});break;case "cross":fa.push({shape:{type:"path",path:[{command:"M",values:[.5*O,
0]},{command:"L",values:[.5*O,O]},{command:"M",values:[0,.5*O]},{command:"L",values:[O,.5*O]}]},stroke:n(H)});break;case "x":fa.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[O,O]},{command:"M",values:[O,0]},{command:"L",values:[0,O]}]},stroke:n(H)});break;case "kite":fa.push({shape:{type:"path",path:[{command:"M",values:[0,.5*O]},{command:"L",values:[.5*O,0]},{command:"L",values:[O,.5*O]},{command:"L",values:[.5*O,O]},{command:"Z",values:[]}]},fill:w(H,0),stroke:y(H)})}break;
case "object":switch(H.resource&&H.resource.primitive||e.defaultPrimitive){case "cone":var ja=w(H,0);H=w(H,-.6);H=Y(ja,H,Z?ea:O);O=f.getConeShapes(O,Z);fa.push({shape:O[0],fill:H});fa.push({shape:O[1],fill:H});break;case "inverted-cone":Z=w(H,0);H=w(H,-.6);H=Y(Z,H,O);O=f.getInvertedConeShapes(O);fa.push({shape:O[0],fill:H});fa.push({shape:O[1],fill:Z});break;case "cube":O=f.getCubeShapes(O,Z);fa.push({shape:O[0],fill:w(H,0)});fa.push({shape:O[1],fill:w(H,-.3)});fa.push({shape:O[2],fill:w(H,-.5)});
break;case "cylinder":{ja=w(H,0);const ra=w(H,-.6);ja=Y(ja,ra,Z?ea:O);O=f.getCylinderShapes(O,Z);fa.push({shape:O[0],fill:ja});fa.push({shape:O[1],fill:ja});fa.push({shape:O[2],fill:w(H,0)});break}case "diamond":O=f.getDiamondShapes(O);fa.push({shape:O[0],fill:w(H,-.3)});fa.push({shape:O[1],fill:w(H,0)});fa.push({shape:O[2],fill:w(H,-.3)});fa.push({shape:O[3],fill:w(H,-.7)});break;case "sphere":Z=w(H,0);H=w(H,-.6);H=Y(Z,H);H.x1=0;H.y1=0;H.x2=.25*O;H.y2=.25*O;fa.push({shape:{type:"circle",cx:0,cy:0,
r:.5*O},fill:H});break;case "tetrahedron":O=f.getTetrahedronShapes(O),fa.push({shape:O[0],fill:w(H,-.3)}),fa.push({shape:O[1],fill:w(H,0)}),fa.push({shape:O[2],fill:w(H,-.6)})}}return fa}function d(H){return(H="number"===typeof(null==H?void 0:H.size)?null==H?void 0:H.size:null)?l.pt2px(H):null}function h(H,O){const Z=d(O),fa=O&&O.maxSize?l.pt2px(O.maxSize):null,ja=O&&O.disableUpsampling,ra=H.symbolLayers,qa=[];let la=0,na=0;const ca=ra.getItemAt(ra.length-1);let ta;ca&&"icon"===ca.type&&(ta=ca.size&&
l.pt2px(ca.size));ra.forEach(oa=>{if("icon"===oa.type||"object"===oa.type){var wa="icon"===oa.type?oa.size&&l.pt2px(oa.size):0,xa=Z||wa?Math.ceil(Math.min(Z||wa,fa||C)):m;if(oa&&oa.resource&&oa.resource.href){var za=u(H,oa).then(function(ya){const Ea=oa.get("material.color");var Fa="icon"===oa.type?"multiply":"tint";return t.tintImageWithColor(ya,xa,Ea,Fa,ja)}).then(function(ya){const Ea=ya.width,Fa=ya.height;la=Math.max(la,Ea);na=Math.max(na,Fa);return[{shape:{type:"image",x:0,y:0,width:Ea,height:Fa,
src:ya.url},fill:null,stroke:null}]});qa.push(za)}else{let ya=xa;"icon"===oa.type&&ta&&Z&&(ya=wa/ta*xa);wa="tall"===(null==O?void 0:O.symbolConfig)||(null==O?void 0:null==(za=O.symbolConfig)?void 0:za.isTall)||("object"===oa.type?D(oa):!1);la=Math.max(la,wa?ea:ya);na=Math.max(na,ya);qa.push(Promise.resolve(U(oa,ya,wa)))}}});return Q.eachAlways(qa).then(function(oa){const wa=[];oa.forEach(function(xa){xa.value?wa.push(xa.value):xa.error&&ba.warn("error while building swatchInfo!",xa.error)});return t.renderSymbol(wa,
[la,na],{node:O&&O.node,scale:!1,opacity:O&&O.opacity})})}function M(H,O){const Z=H.symbolLayers,fa=[];H=c.isVolumetricSymbol(H);const ja=d(O),ra=(O&&O.maxSize?l.pt2px(O.maxSize):null)||G;let qa=0,la=0,na;Z.forEach((ca,ta)=>{if(ca&&("line"===ca.type||"path"===ca.type)){var oa=[];switch(ca.type){case "line":var wa=X(ca,0);if(F.isNone(wa))break;var xa=wa&&wa.width||0;0===ta&&(na=xa);ca=Math.min(ja||xa,ra);ta=0===ta?ca:ja?xa/na*ca:ca;xa=ta>T/2?2*ta:T;la=Math.max(la,ta);qa=Math.max(qa,xa);wa.width=ta;
oa.push({shape:{type:"path",path:[{command:"M",values:[0,.5*la]},{command:"L",values:[qa,.5*la]}]},stroke:wa});break;case "path":wa=Math.min(ja||m,ra);ta=w(ca,0);xa=w(ca,-.2);var za=J(ca,-.4);za=za?{color:za,width:1}:{};if("quad"===ca.profile){const ya=ca.width;ca=ca.height;ca=f.getPathSymbolShapes(ya&&ca?ya/ca:1,0===ca,0===ya);za={...za,join:"bevel"};oa.push({shape:ca[0],fill:xa,stroke:za});oa.push({shape:ca[1],fill:xa,stroke:za});oa.push({shape:ca[2],fill:ta,stroke:za})}else oa.push({shape:f.shapes.pathSymbol3DLayer[0],
fill:xa,stroke:za}),oa.push({shape:f.shapes.pathSymbol3DLayer[1],fill:ta,stroke:za});qa=la=Math.max(la,wa)}fa.push(oa)}});return Promise.resolve(t.renderSymbol(fa,[qa,la],{node:O&&O.node,scale:H,opacity:O&&O.opacity}))}function S(H,O){return W.apply(this,arguments)}function W(){W=I._asyncToGenerator(function*(H,O){const Z="mesh-3d"===H.type;H=H.symbolLayers;var fa=d(O);const ja=O&&O.maxSize?l.pt2px(O.maxSize):null;fa=fa||m;const ra=[];let qa=0,la=0;var na=!1;for(let za=0;za<H.length;za++){var ca=
H.getItemAt(za);const ya=[];if(!Z||"fill"===ca.type){var ta=f.shapes.fill[0];switch(ca.type){case "fill":var oa=y(ca);na=Math.min(fa,ja||C);qa=Math.max(qa,na);la=Math.max(la,na);na=!0;var wa=w(ca,0),xa="pattern"in ca&&ca.pattern;ca=k(ca);!Z&&F.isSome(xa)&&"style"===xa.type&&"solid"!==xa.style&&ca&&(wa=yield P(xa,ca));ya.push({shape:ta,fill:wa,stroke:oa});break;case "line":ca=X(ca,0);if(F.isNone(ca))break;ca={stroke:ca,shape:ta};qa=Math.max(qa,m);la=Math.max(la,m);ya.push(ca);break;case "extrude":ta=
{join:"round",width:1,...X(ca,-.4)};oa=w(ca,0);ca=w(ca,-.2);wa=Math.min(fa,ja||C);xa=f.getExtrudeSymbolShapes(wa);ta.width=1;ya.push({shape:xa[0],fill:ca,stroke:ta});ya.push({shape:xa[1],fill:ca,stroke:ta});ya.push({shape:xa[2],fill:oa,stroke:ta});ca=.7*m+.5*wa;qa=Math.max(qa,m);la=Math.max(la,ca);break;case "water":na=k(ca),ca=B(na),ta=B(na,2),oa=B(na,3),wa=f.getWaterSymbolShapes(),na=!0,ya.push({shape:wa[0],fill:ca}),ya.push({shape:wa[1],fill:ta}),ya.push({shape:wa[2],fill:oa}),ca=Math.min(fa,ja||
C),qa=Math.max(qa,ca),la=Math.max(la,ca)}ra.push(ya)}}return Promise.resolve(t.renderSymbol(ra,[qa,la],{node:O&&O.node,scale:na,opacity:O&&O.opacity}))});return W.apply(this,arguments)}const m=f.SymbolSizeDefaults.size,C=f.SymbolSizeDefaults.maxSize,G=f.SymbolSizeDefaults.maxOutlineSize,T=f.SymbolSizeDefaults.lineWidth,ea=f.SymbolSizeDefaults.tallSymbolWidth,ba=E.getLogger("esri.symbols.support.previewSymbol3D");A.getPatternDescriptor=P;A.getSizeFromOptions=d;A.getSymbolLayerFill=w;A.previewSymbol3D=
function(H,O){if(0===H.symbolLayers.length)return Promise.reject(new L("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(H.type){case "point-3d":return h(H,O);case "line-3d":return M(H,O);case "polygon-3d":case "mesh-3d":return S(H,O)}return Promise.reject(new L("symbolPreview: swatchInfo3D","symbol not supported."))};Object.defineProperty(A,"__esModule",{value:!0})})},"esri/symbols/support/webStyleSymbolUtils":function(){define("exports ../../symbols ../../core/devEnvironmentUtils ../../core/Error ../../core/urlUtils ../../portal/Portal ../../chunks/persistableUrlUtils ./jsonUtils ./StyleOrigin ./styleUtils ./Thumbnail".split(" "),
function(A,I,K,q,r,L,E,F,Q,l,z){function b(f,t,c,g,y){var u=f.data;const B={portal:c&&c.portal||L.getDefault(),url:r.urlToObject(f.baseUrl),origin:"portal-item"};u=u.items.find(n=>n.name===t);if(!u)return Promise.reject(new q("symbolstyleutils:symbol-name-not-found",`The symbol name '${t}' could not be found`,{symbolName:t}));let k=E.fromJSON(l.symbolUrlFromStyleItem(u,g),B),w=u.thumbnail&&u.thumbnail.href;const P=u.thumbnail&&u.thumbnail.imageData;K.isDevEnvironment()&&(k=K.adjustStaticAGOUrl(k),
w=K.adjustStaticAGOUrl(w));const v={portal:c.portal,url:r.urlToObject(r.removeFile(k)),origin:"portal-item"};return l.requestJSON(k,y).then(n=>{n="cimRef"===g?l.makeCIMSymbolRef(n.data):n.data;if((n=F.fromJSON(n,v))&&I.isSymbol3D(n)){if(w){const J=E.fromJSON(w,B);n.thumbnail=new z.Thumbnail({url:J})}else P&&(n.thumbnail=new z.Thumbnail({url:`data:image/png;base64,${P}`}));f.styleUrl?n.styleOrigin=new Q({portal:c.portal,styleUrl:f.styleUrl,name:t}):f.styleName&&(n.styleOrigin=new Q({portal:c.portal,
styleName:f.styleName,name:t}))}return n})}function e(f,t,c){const g=l.Style2DUrlTemplate.replace(/\{SymbolName\}/gi,f.name);return l.requestJSON(g,c).then(y=>{y=l.makeCIMSymbolRef(y.data);return F.fromJSON(y,{portal:t.portal,url:r.urlToObject(r.removeFile(g)),origin:"portal-item"})})}A.fetchSymbolFromStyle=b;A.resolveWebStyleSymbol=function(f,t,c,g){return f.name?f.styleName&&"Esri2DPointSymbolsStyle"===f.styleName?e(f,t,g):l.fetchStyle(f,t,g).then(y=>b(y,f.name,t,c,g)):Promise.reject(new q("symbolstyleutils:style-symbol-reference-name-missing",
"Missing name in style symbol reference"))};Object.defineProperty(A,"__esModule",{value:!0})})},"esri/core/devEnvironmentUtils":function(){define(["exports"],function(A){const I=/^devext.arcgis.com$/,K=/^qaext.arcgis.com$/,q=/^[\w-]*\.mapsdevext.arcgis.com$/,r=/^[\w-]*\.mapsqa.arcgis.com$/,L=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,I,K,/^jsapps.esri.com$/,q,r];A.adjustStaticAGOUrl=function(E,F){return E?(F=F||globalThis.location.hostname)?null!=F.match(I)||null!=F.match(q)?E.replace("static.arcgis.com",
"staticdev.arcgis.com"):null!=F.match(K)||null!=F.match(r)?E.replace("static.arcgis.com","staticqa.arcgis.com"):E:E:E};A.isDevEnvironment=function(E){E=E||globalThis.location.hostname;return L.some(F=>{var Q;return null!=(null==(Q=E)?void 0:Q.match(F))})};A.isTelemetryDevEnvironment=function(E){E=E||globalThis.location.hostname;return[/^zrh-.+?\.esri\.com$/].concat(L).some(F=>{var Q;return null!=(null==(Q=E)?void 0:Q.match(F))})};Object.defineProperty(A,"__esModule",{value:!0})})},"esri/widgets/Legend/support/sizeRampUtils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../Color ../../../symbols ../../../renderers/support/numberUtils ../../../symbols/support/cimSymbolUtils ../../../symbols/support/utils ./utils ../../support/widgetThemeUtils".split(" "),
function(A,I,K,q,r,L,E,F,Q,l){function z(d,h){const M=d.length-1;return d.map((S,W)=>Q.createStopLabel(S,W,M,h))}function b(){b=K._asyncToGenerator(function*(d,h,M,S,W,m){var C,G,T=h.legendOptions;T=T&&T.customValues;const ea=yield t(d,M);var ba=null!=h.minSize&&null!=h.maxSize;M=h.stops&&1<h.stops.length;var H=!!h.target;if(ea&&(T||ba||M&&!H)){var O=F.isVolumetricSymbol(ea),Z=null,fa=ba=null;ba=O&&!M?L.round([h.minDataValue,h.maxDataValue]):T||(yield B(h,ea,S,W));T=null==d?void 0:d.authoringInfo;
var ja=(H="univariate-color-size"===(null==T?void 0:T.type))&&"above-and-below"===(null==T?void 0:T.univariateTheme);!ba&&M&&(ba=h.stops.map(na=>na.value),Z=h.stops.some(na=>!!na.label),"flow"===d.type&&(ba=L.round(ba)),Z&&(fa=h.stops.map(na=>na.label)));O&&2<(null==(C=ba)?void 0:C.length)&&!ja&&(ba=[ba[0],ba[ba.length-1]]);if(!ba)return null;H&&5!==(null==(G=ba)?void 0:G.length)&&(ba=w({minSize:ba[0],maxSize:ba[ba.length-1]}));var ra=O?e(d,ba):null,qa=F.getSymbolOutlineSize(ea),la=Z?null:z(ba,m);
return(yield Promise.all(ba.map(function(){var na=K._asyncToGenerator(function*(ca,ta){const oa=O?ra[ta]:yield n(h,ea,ca,S,W),wa=X(ja&&"class-breaks"===d.type?f(d,ta):ea,oa);return{value:ca,symbol:wa,label:Z?fa[ta]:la[ta],size:oa,outlineSize:qa}});return function(ca,ta){return na.apply(this,arguments)}}()))).reverse()}});return b.apply(this,arguments)}function e(d,h){d=null==d?void 0:d.authoringInfo;const M="univariate-color-size"===(null==d?void 0:d.type);let S=[12,30];if(M){const W=h[0],m=h[h.length-
1];S=h.map(C=>12+(C-W)/(m-W)*18)}M&&"below"===(null==d?void 0:d.univariateTheme)&&S.reverse();return S}function f(d,h){const M=d.classBreakInfos,S=M.length;h=2>S||!(2<=h)?M[0].symbol.clone():M[S-1].symbol.clone();d.visualVariables.some(W=>"color"===W.type)&&(-1<h.type.indexOf("3d")?y(h):u(h));return h}function t(d,h){return c.apply(this,arguments)}function c(){c=K._asyncToGenerator(function*(d,h){if("flow"===d.type)return Q.getSymbolForFlowRenderer(d,h);let M=null,S=null;"simple"===d.type?M=d.symbol:
"class-breaks"===d.type?(M=(d=d.classBreakInfos)&&d[0]&&d[0].symbol,S=1<d.length):"unique-value"===d.type&&(M=(d=d.uniqueValueInfos)&&d[0]&&d[0].symbol,S=1<d.length);if(!M||g(M))return null;M=M.clone();if(h||S)-1<M.type.indexOf("3d")?y(M):u(M);return M});return c.apply(this,arguments)}function g(d){return d?r.isSymbol3D(d)?d.symbolLayers?d.symbolLayers.some(h=>h&&"fill"===h.type):!1:-1!==d.type.indexOf("fill"):!1}function y(d){"line-3d"===d.type?d.symbolLayers.forEach(h=>{h.material={color:U}}):d.symbolLayers.forEach(h=>
{"icon"!==h.type||h.resource&&h.resource.href?h.material={color:D}:(h.material={color:Y},h.outline={color:U,size:1.5})})}function u(d){const h=l.isDarkTheme();if("cim"===d.type)E.applyCIMSymbolColor(d,new q(D));else if(-1!==d.type.indexOf("line"))d.color=U;else if(d.color=h?U:Y,"simple-marker"===d.type)if(d.outline){var M,S;"#ffffff"===(null==(M=d.outline)?void 0:null==(S=M.color)?void 0:S.toHex())&&(d.outline.color=U)}else d.outline={color:U,width:1.5}}function B(d,h,M,S){return k.apply(this,arguments)}
function k(){k=K._asyncToGenerator(function*(d,h,M,S){const W=(yield new Promise((G,T)=>A(["../../../renderers/visualVariables/support/visualVariableUtils"],G,T))).getSizeRangeAtScale(d,M,S),m=W&&w(W);if(W||m){var C=m.map(G=>{{const T=W.minSize,ea=W.maxSize,ba=d.minDataValue,H=d.maxDataValue;let O=null;G=O=G<=T?ba:G>=ea?H:(G-T)/(ea-T)*(H-ba)+ba}return G});C=L.round(C);for(let G=1;G<C.length-1;G++){const T=yield P(d,h,C[G],C[G-1],M,S);T&&(C[G]=T[0],m[G]=T[1])}return C}});return k.apply(this,arguments)}
function w(d){const h=d.minSize;d=(d.maxSize-h)/4;const M=[];for(let S=0;5>S;S++)M.push(h+d*S);return M}function P(d,h,M,S,W,m){return v.apply(this,arguments)}function v(){v=K._asyncToGenerator(function*(d,h,M,S,W,m){const C=yield n(d,h,M,W,m);S=yield n(d,h,S,W,m);var G=L.numDigits(M),T=G.fractional,ea=G.integer;let ba=G=null;0<M&&1>M&&(G=10**T,M*=G,ea=L.numDigits(M).integer);for(T=ea-1;0<=T;T--){var H=10**T;ea=Math.floor(M/H)*H;H*=Math.ceil(M/H);null!=G&&(ea/=G,H/=G);let O=(ea+H)/2;[,O]=L.round([ea,
O,H],{indexes:[1]});const Z=yield n(d,h,ea,W,m),fa=yield n(d,h,H,W,m),ja=yield n(d,h,O,W,m),ra=L.percentChange(C,Z,S,null),qa=L.percentChange(C,fa,S,null),la=L.percentChange(C,ja,S,null);let na=20>=ra.previous,ca=20>=qa.previous;na&&ca&&(ra.previous<=qa.previous?(na=!0,ca=!1):(ca=!0,na=!1));na?ba=[ea,Z]:ca?ba=[H,fa]:20>=la.previous&&(ba=[O,ja]);if(ba)break}return ba});return v.apply(this,arguments)}function n(d,h,M,S,W){return J.apply(this,arguments)}function J(){J=K._asyncToGenerator(function*(d,
h,M,S,W){const {getSize:m}=yield new Promise((C,G)=>A(["../../../renderers/visualVariables/support/visualVariableUtils"],C,G));return m(d,M,{scale:S,view:W,shape:"simple-marker"===h.type?h.style:null})});return J.apply(this,arguments)}function X(d,h){d=d.clone();if(r.isSymbol3D(d))F.isVolumetricSymbol(d)||d.symbolLayers.forEach(M=>{"fill"!==M.type&&(M.size=h)});else if("esri.symbols.SimpleMarkerSymbol"===d.declaredClass)d.size=h;else if("esri.symbols.PictureMarkerSymbol"===d.declaredClass){const M=
d.width,S=d.height;d.height=h;d.width=M/S*h}else"esri.symbols.SimpleLineSymbol"===d.declaredClass?d.width=h:"esri.symbols.TextSymbol"===d.declaredClass&&d.font&&(d.font.size=h);return d}const Y=[255,255,255],D=[200,200,200],U=[128,128,128];I.REAL_WORLD_MAX_SIZE=30;I.REAL_WORLD_MIN_SIZE=12;I.getRampStops=function(d,h,M,S,W,m){return b.apply(this,arguments)};Object.defineProperty(I,"__esModule",{value:!0})})},"esri/widgets/smartMapping/support/utils":function(){define("exports ../../../Color ../../../core/maybe ../../../intl/date ../../../intl/number ../../../renderers/support/utils ../../../renderers/visualVariables/SizeVariable".split(" "),
function(A,I,K,q,r,L,E){A.formatDateLabel=function(F){return q.formatDate(new Date(F),L.timelineDateFormatOptions)};A.formatNumberLabel=function(F){const Q=Math.floor(Math.log10(Math.abs(F)))+1;return r.formatNumber(F,{notation:1E6<=Math.abs(F)?"compact":"standard",minimumSignificantDigits:2,maximumSignificantDigits:4>Q||6<Q?4:Q})};A.getDeviationValues=function(F,Q,l){if(!K.isSome(Q)||!K.isSome(F))return[];const z=[];for(let b=-1*l;b<=l;b++)0!==b&&z.push(Q+b*F);return z};A.getDynamicPathForSizeStops=
function(F){const {max:Q,min:l,padding:z,pathHeight:b,pathWidth:e,stops:f}=F,t=Q-l;let c=`M0 0 L${e} 0 `,g;F=3===f.length?[f[0],f[1],f[2]]:[f[0],f[2],f[4]];const y=Math.min.apply(Math,F.map(B=>B.size)),u=Math.max(Math.abs(F[0].size-F[1].size),Math.abs(F[2].size-F[1].size));F.reverse();F.forEach(({size:B,value:k},w)=>{k=Math.round(b-(k-l)/t*b);g=Math.round((B-y)/u*100)/100*e;0===g&&(g=z*e);0===w&&(c+=`L${g} 0 `);c+=`L${g} ${k} `});return c+=`L${g} ${b} L0 ${b} L0 0 Z`};A.getFillFromColor=function(F){return F instanceof
I?F.toCss(!0):I.fromString(F).toCss(!0)};A.getPathForSizeStops=function(F){const {bottomValue:Q,bottomWidth:l,max:z,min:b,pathHeight:e,pathWidth:f,topValue:t,topWidth:c}=F;F=c*f;const g=l*f,y=z-b;return`M${F} 0 L${F} ${Math.round(e-(t-b)/y*e)} L${g} ${Math.round(e-(Q-b)/y*e)} L${g} ${e} L0 ${e} L0 0 Z`};A.getSizesFromVariable=function(F){let Q=F.maxSize;F=F.minSize;Q instanceof E&&(Q=Q.stops[0].size);F instanceof E&&(F=F.stops[0].size);return[Q,F]};A.getStopChanges=function(F,Q,l){const z=l.length-
1,b=l[0],e=l[z]-b,f=Q-F,t=[];for(let c=1;c<z;c++)t.push({index:c,value:(l[c]-b)/e*f+F});t.unshift({index:0,value:F});t.push({index:z,value:Q});return t};Object.defineProperty(A,"__esModule",{value:!0})})},"esri/renderers/support/utils":function(){define("exports ../../core/arrayUtils ../../core/Logger ../../intl/date ./numberUtils ../visualVariables/support/ColorStop".split(" "),function(A,I,K,q,r,L){function E(f,t,c){let g="";0===t?g=z.lt+" ":t===c&&(g=z.gt+" ");return g+f}function F(f){let t=f.minValue,
c=f.maxValue;const g=f.isFirstBreak?"":z.gt+" ";f="percent-of-total"===f.normalizationType?z.pct:"";t=null==t?"":r.format(t);c=null==c?"":r.format(c);return g+t+f+" "+z.ld+" "+c+f}function Q(f,t){return"normalizationField"in f&&f.normalizationField?{type:"normalized-field",field:f.field,normalizationField:f.normalizationField}:"field"in f&&f.field?{type:"field",field:f.field}:"valueExpression"in f&&f.valueExpression?{type:"expression",expression:f.valueExpression,title:f.valueExpressionTitle,returnType:t}:
null}const l=K.getLogger("esri.renderers.support.utils"),z={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},b={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},e={millisecond:"long-month-day-year-long-time",second:"long-month-day-year-long-time",minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",day:"long-month-day-year",month:"long-month-day-year",year:"year"};K=q.convertDateFormatToIntlOptions("short-date");A.calculateDateFormatInterval=
function(f){f=f.map(u=>new Date(u));const t=f.length;let c=Infinity,g=null;for(let u=0;u<t-1;u++){const B=f[u];let k=Infinity,w=null;for(let P=u+1;P<t;P++){var y=f[P];y=B.getFullYear()!==y.getFullYear()&&"year"||B.getMonth()!==y.getMonth()&&"month"||B.getDate()!==y.getDate()&&"day"||B.getHours()!==y.getHours()&&"hour"||B.getMinutes()!==y.getMinutes()&&"minute"||B.getSeconds()!==y.getSeconds()&&"second"||"millisecond";const v=b[y];v<k&&(k=v,w=y)}k<c&&(c=k,g=w)}return g};A.createClassBreakLabel=F;A.createColorStops=
function(f){const {values:t,colors:c,labelIndexes:g,isDate:y,dateFormatOptions:u}=f;return t.map((B,k)=>{let w=null;if(!g||-1<g.indexOf(k)){let P;(P=y?q.formatDate(B,u):r.format(B))&&(w=E(P,k,t.length-1))}return new L({value:B,color:c[k],label:w})})};A.createUniqueValueLabel=function(f){const {value:t,domain:c,fieldInfo:g,dateFormatInterval:y}=f;f=String(t);const u=c&&"codedValues"in c&&c.codedValues?c.getName(t):null;u?f=u:"number"===typeof t&&(f=g&&"date"===g.type?q.formatDate(t,y&&q.convertDateFormatToIntlOptions(e[y])):
r.format(t));return f};A.getAttribute=Q;A.getAttributes=function(f,t){const c=[];if("class-breaks"===f.type||"heatmap"===f.type)c.push(Q(f,"number"));else if("unique-value"===f.type){var g=f.authoringInfo;if(g&&"relationship"===g.type){if(g.field1&&g.field2){var y=g.field2.field;const u=g.field2.normalizationField;c.push(Q({field:g.field1.field,normalizationField:g.field1.normalizationField}));c.push(Q({field:y,normalizationField:u}))}}else y=f.uniqueValueInfos[0],g=null,y&&y.value&&(y=typeof f.uniqueValueInfos[0].value,
"string"===y||"number"===y)&&(g=y),c.push(Q(f,g)),[f.field2,f.field3].forEach(u=>u&&c.push({type:"field",field:u}))}else"dot-density"===f.type&&f.attributes.forEach(u=>c.push(Q(u,"number")));(f=t?t(f):"visualVariables"in f?f.visualVariables:null)&&f.forEach(u=>c.push(Q(u,"number")));return I.unique(c.filter(Boolean),(u,B)=>"field"===u.type&&"field"===B.type?u.field===B.field:"normalized-field"===u.type&&"normalized-field"===B.type?u.field===B.field&&u.normalizationField===B.normalizationField:"expression"===
u.type&&"expression"===B.type?u.expression===B.expression:!1)};A.setLabelsForClassBreaks=function(f){const t=f.classBreakInfos,c=f.normalizationType;let g=[];if(t&&t.length)if("standard-deviation"===f.classificationMethod)l.warn("setLabelsForClassBreaks","cannot set labels for class breaks generated using 'standard-deviation' method.");else if(f.round){g.push(t[0].minValue);for(const y of t)g.push(y.maxValue);g=r.round(g);t.forEach((y,u)=>{y.label=F({minValue:0===u?g[0]:g[u],maxValue:g[u+1],isFirstBreak:0===
u,normalizationType:c})})}else t.forEach((y,u)=>{y.label=F({minValue:y.minValue,maxValue:y.maxValue,isFirstBreak:0===u,normalizationType:c})})};A.timelineDateFormatOptions=K;A.updateClassBreak=function(f){if("standard-deviation"===f.classificationMethod)l.warn("updateClassBreak","cannot update labels for class breaks generated using 'standard-deviation' method.");else{var t=f.classBreaks,c=f.change,g=c.index;c=c.value;var y=t.length,u=-1,B=-1;0===g?u=g:g===y?B=g-1:(B=g-1,u=g);f=f.normalizationType;
g=null;-1<u&&u<y&&(g=t[u],g.minValue=c,g.label=F({minValue:g.minValue,maxValue:g.maxValue,isFirstBreak:0===u,normalizationType:f}));-1<B&&B<y&&(g=t[B],g.maxValue=c,g.label=F({minValue:g.minValue,maxValue:g.maxValue,isFirstBreak:0===B,normalizationType:f}))}};A.updateColorStops=function(f){const {stops:t,changes:c,isDate:g,dateFormatOptions:y}=f,u=t.map(k=>k.value);f=[];for(const k of c)f.push(k.index),u[k.index]=k.value;const B=r.round(u,{indexes:f});t.forEach((k,w)=>{k.value=u[w];if(null!=k.label){let P,
v=null;(P=g?q.formatDate(B[w],y):r.format(B[w]))&&(v=E(P,w,t.length-1));k.label=v}})};Object.defineProperty(A,"__esModule",{value:!0})})},"esri/widgets/Legend/styles/Card":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../intl ../../../core/Handles ../../../core/screenUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../symbols/support/svgUtils ../../../symbols/support/utils ../../Widget ./support/relationshipUtils ./support/univariateUtils ../support/styleUtils ../../support/Heading ../../support/decorators/accessibleHandler ../../support/decorators/messageBundle ../../../core/Logger ../../support/jsxFactory ../../support/widgetUtils ../../../intl/substitute".split(" "),
function(A,I,K,q,r,L,E,F,Q,l,z,b,e,f,t,c,g,y,u,B,k,w,P){var v;(function(J){J.Auto="auto";J.Stack="stack";J.SideBySide="side-by-side"})(v||(v={}));const n=window.devicePixelRatio;K=function(J){function X(D,U){D=J.call(this,D,U)||this;D._handles=new q;D._hasIndicators=!1;D._selectedSectionName=null;D._sectionNames=[];D._sectionMap=new Map;D.activeLayerInfos=null;D.headingLevel=3;D.layout=v.Stack;D.messages=null;D.messagesCommon=null;D.type="card";D.view=null;return D}A._inheritsLoose(X,J);var Y=X.prototype;
Y.initialize=function(){this.own([this.watch("activeLayerInfos",D=>{this._handles.removeAll();this._watchForSectionChanges(D)})])};Y.destroy=function(){this._handles.destroy();this._handles=null};Y.render=function(){this._hasIndicators=this.layout===v.Auto&&768>=this.view.container.clientWidth||this.layout===v.Stack;var D=this.activeLayerInfos;D=D&&D.toArray().map(h=>this._renderLegendForLayer(h)).filter(h=>!!h);this._hasIndicators?this._selectedSectionName&&-1!==this._sectionNames.indexOf(this._selectedSectionName)||
(this._selectedSectionName=this._sectionNames&&this._sectionNames[0]):this._selectedSectionName=null;const U=this._sectionNames.length;var d=this._sectionNames.map((h,M)=>{M=P.substitute(this.messagesCommon.pagination.pageText,{index:M+1,total:U});return k.tsx("div",{key:h,role:"tab",id:h,"aria-label":M,"aria-controls":`${h}-panel`,"aria-selected":(this._selectedSectionName===h).toString(),tabIndex:this._selectedSectionName===h?0:-1,title:M,onclick:this._selectSection,onkeydown:this._focusSection,
bind:this,class:this.classes("esri-legend--card__carousel-indicator",{["esri-legend--card__carousel-indicator--activated"]:this._selectedSectionName===h}),"data-section-name":h})});d=this._hasIndicators&&1<U?k.tsx("div",{class:"esri-legend--card__carousel-indicator-container",key:"carousel-navigation",role:"tablist"},d):null;D=this._hasIndicators?this._sectionMap.get(this._selectedSectionName):D&&D.length?D:null;return k.tsx("div",{class:this.classes("esri-legend--card",{["esri-legend--stacked"]:this._hasIndicators})},
D?D:k.tsx("div",{class:"esri-legend--card__message"},this.messages.noLegend),d)};Y._selectSection=function(D){if(D=D.target.getAttribute("data-section-name"))this._selectedSectionName=D};Y._focusSection=function(D){switch(D.key){case "ArrowLeft":case "ArrowRight":this._switchSectionOnArrowPress(D);break;case "Enter":case " ":this._selectSection(D)}};Y._switchSectionOnArrowPress=function(D){const U=D.key,d="ArrowLeft"===U?-1:1;D=D.target.getAttribute("data-section-name");D=this._sectionNames.indexOf(D);
const h=this._sectionNames;let M=null;-1!==D&&(h[D+d]?M=document.getElementById(h[D+d]):"ArrowLeft"===U?M=document.getElementById(h[h.length-1]):"ArrowRight"===U&&(M=document.getElementById(h[0])),M&&M.focus())};Y._watchForSectionChanges=function(D){this._generateSectionNames();D&&(D.forEach(U=>{const d=`activeLayerInfo-${U.layer.uid}-version-change`;this._handles.remove(d);this._watchForSectionChanges(U.children);this._handles.add(U.watch("version",()=>this._generateSectionNames()),d)}),this._handles.remove("activeLayerInfos-collection-change"),
this._handles.add(D.on("change",()=>this._watchForSectionChanges(D)),"activeLayerInfos-collection-change"))};Y._generateSectionNames=function(){this._sectionNames.length=0;this._selectedSectionName=null;this.activeLayerInfos&&this.activeLayerInfos.forEach(this._generateSectionNamesForActiveLayerInfo,this)};Y._getSectionName=function(D,U,d){return`${this.id}${D.uid}-type-${U.type}-${d}`};Y._generateSectionNamesForActiveLayerInfo=function(D){D.children.forEach(this._generateSectionNamesForActiveLayerInfo,
this);D.legendElements&&D.legendElements.forEach((U,d)=>{this._sectionNames.push(this._getSectionName(D.layer,U,d))})};Y._renderLegendForLayer=function(D){if(!D.ready)return null;if(D.children.length){var U=D.children.map(d=>this._renderLegendForLayer(d)).toArray();return k.tsx("div",{key:D.layer.uid,class:this.classes("esri-legend--card__service","esri-legend--card__group-layer")},k.tsx("div",{class:"esri-legend--card__service-caption-container"},D.title),U)}{if((U=D.legendElements)&&!U.length)return null;
const d=U.some(h=>"relationship-ramp"===h.type);U=U.map((h,M)=>this._renderLegendForElement(h,D,M,d)).filter(h=>!!h);return U.length?k.tsx("div",{key:D.layer.uid,class:this.classes("esri-legend--card__service",{["esri-legend--card__group-layer-child"]:!!D.parent})},k.tsx("div",{class:"esri-legend--card__service-caption-container"},k.tsx("div",{class:"esri-legend--card__service-caption-text"},D.title)),k.tsx("div",{class:"esri-legend--card__service-content"},U)):null}};Y._renderLegendForElement=function(D,
U,d,h=!1){var M="color-ramp"===D.type,S="opacity-ramp"===D.type,W="size-ramp"===D.type;const m=U.layer;var C=null;"string"===typeof D.title?C=D.title:D.title&&(C=D.title,M=c.getTitle(this.messages,C,M||S),C=C.title?`${C.title} (${M})`:M);d=this._getSectionName(m,D,d);M=this._hasIndicators?k.tsx("div",null,k.tsx(g.Heading,{level:this.headingLevel,class:"esri-legend--card__carousel-title"},U.title),k.tsx(g.Heading,{level:g.incrementHeadingLevel(this.headingLevel),class:"esri-legend--card__layer-caption"},
C)):C?k.tsx(g.Heading,{level:this.headingLevel,class:"esri-legend--card__layer-caption"},C):null;C=U.effectList;S=null;"symbol-table"===D.type?(W=D.infos.map((G,T)=>this._renderLegendForElementInfo(G,U,D.legendType,T)).filter(G=>!!G),W.length&&(S=k.tsx("div",{class:this.classes({["esri-legend--card__label-container"]:!(W[0].properties.classes&&W[0].properties.classes["esri-legend--card__symbol-row"])&&!h,["esri-legend--card__relationship-label-container"]:h})},W))):"color-ramp"===D.type||"opacity-ramp"===
D.type||"heatmap-ramp"===D.type?S=this._renderLegendForRamp(D,m.opacity,C):W?S=this._renderSizeRamp(D,m.opacity):"relationship-ramp"===D.type?S=f.renderRelationshipRamp(D,this.id,m.opacity,C):"univariate-above-and-below-ramp"===D.type?S=this._renderUnivariateAboveAndBelowRamp(D,m.opacity,C):"univariate-color-size-ramp"===D.type&&(S=this._renderUnivariateColorSizeRamp(D,m.opacity,C));if(!S)return null;h=k.tsx("div",{key:d,class:"esri-legend--card__section",id:`${d}-panel`,role:"tabpanel","aria-labelledby":d,
tabIndex:0},[M,S]);this._sectionMap.set(d,h);return h};Y._renderUnivariateAboveAndBelowRamp=function(D,U,d){const {sizeRampElement:h,colorRampElement:M}=t.getUnivariateAboveAndBelowRampElements(D,U,"horizontal");if(!h)return null;D=t.getUnivariateSizeRampSize(h,"full",!0,"horizontal");var S=t.getUnivariateColorRampSize(h,"above",!0,"horizontal"),W=t.getUnivariateColorRampSize(h,"below",!0,"horizontal");S=t.getUnivariateColorRampPreview(M,{width:S,height:12,rampAlignment:"horizontal",opacity:U,type:"above",
effectList:d});U=t.getUnivariateColorRampPreview(M,{width:W,height:12,rampAlignment:"horizontal",opacity:U,type:"below",effectList:d});d=t.getUnivariateColorRampMargin(h,"card");W=h.infos.map(G=>G.label);const m=W.length-1;W=W.map((G,T)=>0===T||T===m?k.tsx("div",{key:T},G):null);const C={marginTop:"3px",display:"flex"};w.isRTL(this.container)?C.marginRight=`${d}px`:C.marginLeft=`${d}px`;D={width:`${D}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return k.tsx("div",{class:"esri-legend--card__layer-row",
key:"size-ramp-preview",styles:{display:"flex",flexDirection:"column"}},k.tsx("div",{class:this.classes("esri-legend--card__symbol-container","esri-legend__size-ramp--horizontal"),styles:{display:"flex",flexDirection:"row"}},h.infos.map((G,T)=>k.tsx("div",{key:T,class:"esri-legend--card__symbol",bind:G.preview,afterCreate:c.attachToNode}))),S?k.tsx("div",{class:"esri-univariate-above-and-below-ramp__color--card",styles:C,key:"color-ramp-preview"},k.tsx("div",{bind:S,afterCreate:c.attachToNode}),k.tsx("div",
{bind:U,afterCreate:c.attachToNode})):null,k.tsx("div",{class:"esri-legend__layer-cell esri-legend__layer-cell--info"},k.tsx("div",{class:"esri-legend__ramp-labels",styles:D},W)))};Y._renderUnivariateColorSizeRamp=function(D,U,d){const {sizeRampElement:h,colorRampElement:M}=t.getUnivariateColorSizeRampElements(D,"horizontal");if(!h)return null;D=t.getUnivariateSizeRampSize(h,"full",!1,"horizontal");var S=t.getUnivariateColorRampSize(h,"full",!1,"horizontal");U=t.getUnivariateColorRampPreview(M,{width:S,
height:12,rampAlignment:"horizontal",opacity:U,type:"full",effectList:d});const W=t.getUnivariateColorRampMargin(h,"card"),m=h.infos.length-1;d=h.infos.map((C,G)=>0===G||G===m?k.tsx("div",{key:G},C.label):null);S={marginTop:"3px",display:"flex"};w.isRTL(this.container)?S.marginRight=`${W}px`:S.marginLeft=`${W}px`;D={width:`${D}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return k.tsx("div",{class:"esri-legend--card__layer-row",key:"size-ramp-preview",styles:{display:"flex",
flexDirection:"column"}},k.tsx("div",{class:this.classes("esri-legend--card__symbol-container","esri-legend__size-ramp--horizontal"),styles:{display:"flex",flexDirection:"row"}},h.infos.map((C,G)=>k.tsx("div",{key:G,class:"esri-legend--card__symbol",bind:C.preview,afterCreate:c.attachToNode}))),k.tsx("div",{class:"esri-univariate-above-and-below-ramp__color--card",styles:S,key:"color-ramp-preview"},k.tsx("div",{bind:U,afterCreate:c.attachToNode})),k.tsx("div",{class:"esri-legend__layer-cell esri-legend__layer-cell--info"},
k.tsx("div",{class:"esri-legend__ramp-labels",styles:D},d)))};Y._renderLegendForElementInfo=function(D,U,d,h){var M=U.layer;if(D.type)return this._renderLegendForElement(D,U,h);d=c.isImageryStretchedLegend(M,d);if(D.preview){var S;if(!D.symbol||-1===D.symbol.type.indexOf("simple-fill")){if(!D.label)return k.tsx("div",{key:h,bind:D.preview,afterCreate:c.attachToNode});U={["esri-legend--card__symbol-cell"]:this._hasIndicators};return k.tsx("div",{key:h,class:this.classes("esri-legend--card__layer-row",
{["esri-legend--card__symbol-row"]:this._hasIndicators})},k.tsx("div",{class:this.classes(U),bind:D.preview,afterCreate:c.attachToNode}),k.tsx("div",{class:this.classes("esri-legend--card__image-label",{["esri-legend--card__label-cell"]:this._hasIndicators})},c.getTitle(this.messages,D.label,!1)||""))}let m=d=255,C=255,G=0,T=255,ea=255,ba=255,H=0;const O=D.symbol.color&&D.symbol.color.a,Z=D.symbol.outline&&D.symbol.outline.color&&D.symbol.outline.color.a;O&&(d=D.symbol.color.r,m=D.symbol.color.g,
C=D.symbol.color.b,G=D.symbol.color.a*M.opacity);Z&&(T=D.symbol.outline.color.r,ea=D.symbol.outline.color.g,ba=D.symbol.outline.color.b,H=D.symbol.outline.color.a*M.opacity);var W=(M=null!=(W=null==(S=D.symbol.color)?void 0:S.isBright)?W:!0)?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)";U={background:O?`rgba(${d}, ${m}, ${C}, ${G})`:"none",color:M?"black":"white",textShadow:`-1px -1px 0 ${W},\n                                              1px -1px 0 ${W},\n                                              -1px 1px 0 ${W},\n                                              1px 1px 0 ${W}`,
border:Z?`1px solid rgba(${T}, ${ea}, ${ba}, ${H})`:"none",filter:b.getCSSFilterFromEffectList(U.effectList)};return k.tsx("div",{key:h,class:"esri-legend--card__layer-row"},k.tsx("div",{class:"esri-legend--card__label-element",styles:U}," ",D.label," "))}if(D.src)return U=this._renderImage(D,M,d),k.tsx("div",{key:h,class:"esri-legend--card__layer-row"},U,k.tsx("div",{class:"esri-legend--card__image-label"},D.label||""))};Y._renderImage=function(D,U,d){const {label:h,src:M,opacity:S}=D;d={["esri-legend--card__imagery-layer-image--stretched"]:d,
["esri-legend--card__symbol"]:!d};U={opacity:`${null!=S?S:U.opacity}`};return k.tsx("img",{alt:c.getTitle(this.messages,h,!1),src:M,border:0,width:D.width,height:D.height,class:this.classes(d),styles:U})};Y._renderSizeRampLines=function(D){D=D.infos;var U=D[0],d=D[D.length-1],h=U.symbol;D=this._hasIndicators;U=r.pt2px(U.size+U.outlineSize)*n;d=r.pt2px(d.size+d.outlineSize)*n;const M=D?U:U+50*n,S=D?U/2+50*n:U;var W;h?-1<h.type.indexOf("3d")?(W=h.symbolLayers&&h.symbolLayers.length)?(W=h.symbolLayers.getItemAt(W-
1).get("resource.primitive"),W="triangle"===W||"cone"===W||"tetrahedron"===W):W=void 0:W="triangle"===h.style:W=void 0;if(h)if(-1<h.type.indexOf("3d")){var m=h.symbolLayers&&h.symbolLayers.length;m?(h=h.symbolLayers.getItemAt(m-1),h=h.resource&&h.resource.primitive,h="circle"===h||"cross"===h||"kite"===h||"sphere"===h||"cube"===h||"diamond"===h):h=void 0}else h=h.style,h="circle"===h||"diamond"===h||"cross"===h;else h=void 0;m=document.createElement("canvas");m.width=M;m.height=S;m.style.width=`${m.width/
n}px`;m.style.height=`${m.height/n}px`;const C=m.getContext("2d");if(D){C.beginPath();var G=M/2-d/2;C.moveTo(0,0);C.lineTo(G,S);G=M/2+d/2;C.moveTo(M,0);C.lineTo(G,S)}else C.beginPath(),C.moveTo(0,S/2-d/2),C.lineTo(M,0),C.moveTo(0,S/2+d/2),C.lineTo(M,S);C.strokeStyle="#ddd";C.stroke();return k.tsx("div",{bind:m,afterCreate:c.attachToNode,styles:D?{display:"flex",marginTop:`-${W?0:h?U/2:0}px`,marginBottom:`-${W?d:h?d/2:0}px`}:{display:"flex",marginRight:`-${W?0:h?U/2:0}px`,marginLeft:`-${W?0:h?d/2:
0}px`}})};Y._renderSizeRamp=function(D,U){var d=D.infos;const h=d[0].label,M=d[d.length-1].label;let S=d[0].preview;d=d[d.length-1].preview;const W=this._hasIndicators,m={"flex-direction":W?"column":"row-reverse"};S&&(S=S.cloneNode(!0),S.style.display="flex");d&&(d=d.cloneNode(!0),d.style.display="flex");U={opacity:null!=U?`${U}`:""};return k.tsx("div",{class:this.classes("esri-legend--card__layer-row",{["esri-legend--card__size-ramp-row"]:W})},k.tsx("div",{class:"esri-legend--card__ramp-label"},
W?h:M),k.tsx("div",{class:"esri-legend--card__size-ramp-container",styles:m},k.tsx("div",{bind:S,afterCreate:c.attachToNode,class:"esri-legend--card__size-ramp-preview",styles:U}),this._renderSizeRampLines(D),k.tsx("div",{bind:d,afterCreate:c.attachToNode,class:"esri-legend--card__size-ramp-container",styles:U})),k.tsx("div",{class:"esri-legend--card__ramp-label"},W?M:h))};Y._renderLegendForRamp=function(D,U,d){var h=D.infos;const M="heatmap-ramp"===D.type,S=h.length-1;var W=2<S&&!M?25*S:100,m=W+
20;const C=h.slice(0).reverse();C.forEach((ea,ba)=>{ea.offset=M?ea.ratio:ba/S});const G=C.length-1;D=(D=0!==C.length%2&&C[C.length/2|0])&&k.tsx("div",{class:"esri-legend--card__interval-separators-container"},k.tsx("div",{class:"esri-legend--card__interval-separator"},"|"),k.tsx("div",{class:"esri-legend--card__ramp-label"},D.label));const T=h[h.length-1].label;h=h[0].label;W=z.renderSVG([[{shape:{type:"path",path:"M0 12.5 L10 0 L10 25 Z"},fill:C[0].color,stroke:{width:0}},{shape:{type:"rect",x:10,
y:0,width:W,height:25},fill:{type:"linear",x1:10,y1:0,x2:W+10,y2:0,colors:C},stroke:{width:0}},{shape:{type:"path",path:`M${W+10} 0 L${m} ${12.5} L${W+10} ${25} Z`},fill:C[G].color,stroke:{width:0}}]],m,25);({messages:m}=this);U={filter:b.getCSSFilterFromEffectList(d),opacity:null==U?null:`${U}`};return k.tsx("div",{class:"esri-legend--card__layer-row",styles:{justifyContent:"center"}},k.tsx("div",{class:"esri-legend--card__ramp-label"},M?m[T]:T),k.tsx("div",{class:"esri-legend--card__symbol-container"},
k.tsx("div",{styles:U},W),D),k.tsx("div",{class:"esri-legend--card__ramp-label"},M?m[h]:h))};return X}(e);I.__decorate([L.property()],K.prototype,"activeLayerInfos",void 0);I.__decorate([L.property()],K.prototype,"headingLevel",void 0);I.__decorate([L.property()],K.prototype,"layout",void 0);I.__decorate([L.property(),u.messageBundle("esri/widgets/Legend/t9n/Legend")],K.prototype,"messages",void 0);I.__decorate([L.property(),u.messageBundle("esri/t9n/common")],K.prototype,"messagesCommon",void 0);
I.__decorate([L.property({readOnly:!0})],K.prototype,"type",void 0);I.__decorate([L.property()],K.prototype,"view",void 0);I.__decorate([y.accessibleHandler()],K.prototype,"_selectSection",null);return K=I.__decorate([l.subclass("esri.widgets.Legend.styles.Card")],K)})},"esri/widgets/Legend/styles/support/relationshipUtils":function(){define("exports ../../../../symbols/support/svgUtils ../../../../symbols/support/utils ../../../support/widgetUtils ../../../../core/has ../../../../core/Logger ../../../support/jsxFactory".split(" "),
function(A,I,K,q,r,L,E){function F(z,b,e){const f=`${e}_arrowStart`;e=`${e}_arrowEnd`;z="left"===z;const t={markerStart:null,markerEnd:null};switch(b){case "HL":z?t.markerStart=`url(#${e})`:t.markerEnd=`url(#${f})`;break;case "LL":t.markerStart=`url(#${e})`;break;case "LH":z?t.markerEnd=`url(#${f})`:t.markerStart=`url(#${e})`;break;default:t.markerEnd=`url(#${f})`}return t}function Q(z,b,e,f,t=60){const {focus:c,numClasses:g,colors:y,rotation:u}=z;z=!!c;const B=Math.sqrt(t**2+t**2)+(z?0:5),k=[],w=
[];var P=[],v=(t||75)/g;for(var n=0;n<g;n++){var J=n*v;for(var X=0;X<g;X++){var Y=X*v;const D=I.generateFillAttributes(y[n][X]),U=I.generateStrokeAttributes(null);Y={type:"rect",x:Y,y:J,width:v,height:v};k.push(I.renderDef(D));w.push(I.renderShape(Y,D.fill,U,null));P.push(I.getBoundingBox(Y))}}v=null;z||(v="margin: -15px -15px -18px -15px");n=F("left",c,b);J=F("right",c,b);X=I.computeBBox(P);P=I.getTransformMatrix(X,B,B,0,!1,u,!1);X=I.getTransformMatrix(X,B,B,0,!1,z?-45:null,!1);e={filter:K.getCSSFilterFromEffectList(f),
opacity:null==e?null:`${e}`};return E.tsx("div",{styles:e,class:z?l.diamondMidColRamp:l.squareTableCell},E.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:B,height:B,style:v},E.tsx("defs",null,E.tsx("marker",{id:`${b}_arrowStart`,markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"strokeWidth",orient:"auto"},E.tsx("polyline",{points:"0,0 5,5 0,10",fill:"none",stroke:"#555555","stroke-width":"1"})),E.tsx("marker",{id:`${b}_arrowEnd`,markerWidth:"10",markerHeight:"10",refX:"0",refY:"5",
markerUnits:"strokeWidth",orient:"auto"},E.tsx("polyline",{points:"5,0 0,5 5,10",fill:"none",stroke:"#555555","stroke-width":"1"})),k),E.tsx("g",{transform:P},w),E.tsx("g",{transform:X},E.tsx("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":n.markerStart,"marker-end":n.markerEnd,x1:-10,y1:t-15,x2:-10,y2:15}),E.tsx("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":J.markerStart,"marker-end":J.markerEnd,x1:15,y1:t+10,x2:t-15,y2:t+10}))))}const l={diamondContainer:"esri-relationship-ramp--diamond__container",
diamondLeftCol:"esri-relationship-ramp--diamond__left-column",diamondRightCol:"esri-relationship-ramp--diamond__right-column",diamondMidCol:"esri-relationship-ramp--diamond__middle-column",diamondMidColLabel:"esri-relationship-ramp--diamond__middle-column--label",diamondMidColRamp:"esri-relationship-ramp--diamond__middle-column--ramp",squareTable:"esri-relationship-ramp--square__table",squareTableRow:"esri-relationship-ramp--square__table-row",squareTableCell:"esri-relationship-ramp--square__table-cell",
squareTableLabel:"esri-relationship-ramp--square__table-label",squareTableLabelLeftBottom:"esri-relationship-ramp--square__table-label--left-bottom",squareTableLabelRightBottom:"esri-relationship-ramp--square__table-label--right-bottom",squareTableLabelLeftTop:"esri-relationship-ramp--square__table-label--left-top",squareTableLabelRightTop:"esri-relationship-ramp--square__table-label--right-top"};A.renderRelationshipRamp=function(z,b,e,f){const {focus:t,labels:c}=z,g=!!t;z=Q(z,b,e,f);b={justifyContent:"center"};
e=q.isRTL();return g?E.tsx("div",{class:l.diamondContainer,styles:b},E.tsx("div",{class:l.diamondLeftCol},e?c.right:c.left),E.tsx("div",{class:l.diamondMidCol},E.tsx("div",{class:l.diamondMidColLabel},c.top),z,E.tsx("div",{class:l.diamondMidColLabel},c.bottom)),E.tsx("div",{class:l.diamondRightCol},e?c.left:c.right)):E.tsx("div",{class:l.squareTable},E.tsx("div",{class:l.squareTableRow},E.tsx("div",{class:q.classes(l.squareTableCell,l.squareTableLabel,l.squareTableLabelRightBottom)},e?c.top:c.left),
E.tsx("div",{class:l.squareTableCell}),E.tsx("div",{class:q.classes(l.squareTableCell,l.squareTableLabel,l.squareTableLabelLeftBottom)},e?c.left:c.top)),E.tsx("div",{class:l.squareTableRow},E.tsx("div",{class:l.squareTableCell}),z,E.tsx("div",{class:l.squareTableCell})),E.tsx("div",{class:l.squareTableRow},E.tsx("div",{class:q.classes(l.squareTableCell,l.squareTableLabel,l.squareTableLabelRightTop)},e?c.right:c.bottom),E.tsx("div",{class:l.squareTableCell}),E.tsx("div",{class:q.classes(l.squareTableCell,
l.squareTableLabel,l.squareTableLabelLeftTop)},e?c.bottom:c.right)))};Object.defineProperty(A,"__esModule",{value:!0})})},"esri/widgets/Legend/styles/support/univariateUtils":function(){define("exports ../../../../core/screenUtils ../../../../libs/maquette/projection ../../../../libs/maquette/projector ../../../../symbols/support/symbolUtils ../../../support/widgetUtils ../../../../core/has ../../../../core/Logger ../../../support/jsxFactory".split(" "),function(A,I,K,q,r,L,E,F,Q){function l(c="vertical"){return"vertical"===
c?Q.tsx("svg",{height:"4",width:"10"},Q.tsx("line",{x1:"0",y1:"2",x2:"10",y2:"2",style:"stroke:rgb(200, 200, 200);stroke-width:1"})):Q.tsx("svg",{height:"10",width:"10"},Q.tsx("line",{x1:"5",y1:"0",x2:"5",y2:"10",style:"stroke:rgb(200, 200, 200);stroke-width:1"}))}function z(c,g="vertical"){const y=document.createElement("div");y.style.height="20px";y.className=t.univariateAboveAndBelowSymbol;null!=c&&(y.style.opacity=c.toString());f.append(y,l.bind(null,g));return y}function b(c,g,y="vertical",u){c.infos.forEach((B,
k)=>{if(u&&2===k)B.preview=z(g,y);else{k=I.pt2px(B.size)+("horizontal"===y?20:10);const w="div"===B.preview.tagName.toLowerCase(),P=w?B.preview:document.createElement("div");P.className=t.univariateAboveAndBelowSymbol;"horizontal"===y?P.style.width=`${k}px`:P.style.height=`${k}px`;w||P.appendChild(B.preview);B.preview=P}})}function e(c,g,y,u="vertical"){let B=0;c=c.infos;const k=Math.floor(c.length/2);var w="full"===g||"above"===g?0:k;for(g="full"===g||"below"===g?c.length-1:k;w<=g;w++)if(y&&w===
k)B+="horizontal"===u?10:20;else{const P=I.pt2px(c[w].size)+("horizontal"===u?20:10);B+=P}return Math.round(B)}const f=q.createProjector(),t={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};A.getUnivariateAboveAndBelowRampElements=function(c,g,y="vertical"){var u=c.infos;c=u.find(({type:w})=>"size-ramp"===w);u=u.find(({type:w})=>"color-ramp"===w);c&&(c={...c},c.infos=[...c.infos],b(c,g,y,!0));u&&(u={...u},u.infos=[...u.infos]);if("horizontal"===
y){var B,k;null==(B=c)?void 0:B.infos.reverse();null==(k=u)?void 0:k.infos.reverse()}return{sizeRampElement:c,colorRampElement:u}};A.getUnivariateColorRampMargin=function(c,g="classic"){c=c.infos;return"classic"===g?(I.pt2px(c[0].size)+10)/2:(I.pt2px(c[0].size)-I.pt2px(c[c.length-1].size))/2};A.getUnivariateColorRampPreview=function(c,g){if(!c)return null;c=c.infos.map(y=>y.color);c=r.renderColorRampPreviewHTML("full"===g.type?c:"above"===g.type?c.slice(0,3):c.slice(2,5),{width:g.width,height:g.height,
align:g.rampAlignment,effectList:g.effectList});c.className=t.colorRamp;null!=g.opacity&&(c.style.opacity=g.opacity.toString());return c};A.getUnivariateColorRampSize=function(c,g,y,u="vertical"){const B=e(c,g,y,u);c=c.infos;var k=Math.floor(c.length/2);const w="full"===g||"above"===g?0:k;k="full"===g||"below"===g?c.length-1:k;y=y?"vertical"===u?20:10:0;u="vertical"===u?10*("full"===g?2:1):20*("full"===g?2:1);return Math.round(B-(I.pt2px("full"===g?c[w].size+c[k].size:"above"===g?c[w].size:c[k].size)/
2+y/2+u/2))};A.getUnivariateColorSizeRampElements=function(c,g="vertical"){var y=c.infos;c=y.find(({type:k})=>"size-ramp"===k);y=y.find(({type:k})=>"color-ramp"===k);c&&(c={...c},c.infos=[...c.infos],b(c,null,g,!1));y&&(y={...y},y.infos=[...y.infos]);if("horizontal"===g){var u,B;null==(u=c)?void 0:u.infos.reverse();null==(B=y)?void 0:B.infos.reverse()}return{sizeRampElement:c,colorRampElement:y}};A.getUnivariateSizeRampSize=e;Object.defineProperty(A,"__esModule",{value:!0})})},"esri/widgets/Legend/support/styleUtils":function(){define(["exports",
"../../../intl","../../../intl/substitute"],function(A,I,K){A.attachToNode=function(q){q.appendChild(this)};A.getTitle=function(q,r,L){if(r){if("string"===typeof r||"number"===typeof r)return r;if("value"in r||"unit"in r)return K.substitute(q.dotValue,r);if("colorName"in r||"bandName"in r)return q[r.colorName]+": "+(q[r.bandName]||r.bandName);if("showCount"in r)return r.showCount?q.clusterCountTitle:null;var E=null;L?E=r.ratioPercentTotal?"showRatioPercentTotal":r.ratioPercent?"showRatioPercent":
r.ratio?"showRatio":r.normField?"showNormField":r.field?"showField":null:L||(E=r.normField?"showNormField":r.normByPct?"showNormPct":r.field?"showField":null);return E?K.substitute("showField"===E?"{field}":q[E],{field:r.field,normField:r.normField}):null}};A.isImageryStretchedLegend=function(q,r){return!!(r&&"Stretched"===r&&10.3<=q.version&&"esri.layers.ImageryLayer"===q.declaredClass)};A.isRendererTitle=function(q,r){return!r};Object.defineProperty(A,"__esModule",{value:!0})})},"esri/widgets/support/Heading":function(){define("exports ../../core/mathUtils ./widgetUtils ../../core/has ../../core/Logger ./jsxFactory".split(" "),
function(A,I,K,q,r,L){const E={heading:"esri-widget__heading"};A.CSS=E;A.Heading=function(F,Q){const l=I.clamp(Math.ceil(F.level),1,6),z=`h${l}`;delete F.level;return L.tsx(z,{...F,class:K.classes(E.heading,F.class),role:"heading","aria-level":String(l)},Q)};A.incrementHeadingLevel=function(F,Q=1){return I.clamp(Math.ceil(F+Q),1,6)};Object.defineProperty(A,"__esModule",{value:!0})})},"esri/widgets/Legend/styles/Classic":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../intl ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Widget ./support/relationshipUtils ./support/univariateUtils ../support/styleUtils ../../support/Heading ../../support/widgetUtils ../../support/decorators/messageBundle ../../../core/Logger ../../support/jsxFactory ../../../intl/number".split(" "),
function(A,I,K,q,r,L,E,F,Q,l,z,b,e,f,t,c,g,y){const u={display:"flex",alignItems:"flex-start"},B={marginLeft:"3px"},k={display:"table-cell",verticalAlign:"middle"};K=function(w){function P(n,J){n=w.call(this,n,J)||this;n.activeLayerInfos=null;n.headingLevel=3;n.messages=null;n.type="classic";return n}A._inheritsLoose(P,w);var v=P.prototype;v.render=function(){var n=this.activeLayerInfos;n=n&&n.toArray().map(J=>this._renderLegendForLayer(J)).filter(J=>!!J);return g.tsx("div",null,n&&n.length?n:g.tsx("div",
{class:"esri-legend__message"},this.messages.noLegend))};v._renderLegendForLayer=function(n){if(!n.ready)return null;var J=!!n.children.length;const X=`${"esri-legend__"}${n.layer.uid}-version-${n.version}`,Y=n.title?e.Heading({level:this.headingLevel,class:this.classes("esri-widget__heading","esri-legend__service-label")},n.title):null;if(J)return J=n.children.map(D=>this._renderLegendForLayer(D)).toArray(),g.tsx("div",{key:X,class:this.classes("esri-legend__service","esri-legend__group-layer")},
Y,J);if((J=n.legendElements)&&!J.length)return null;J=J.map(D=>this._renderLegendForElement(D,n.layer,n.effectList)).filter(D=>!!D);return J.length?g.tsx("div",{key:X,class:this.classes("esri-legend__service",{["esri-legend__group-layer-child"]:!!n.parent}),tabIndex:0},Y,g.tsx("div",{class:"esri-legend__layer"},J)):null};v._renderLegendForElement=function(n,J,X,Y){var D="color-ramp"===n.type,U="opacity-ramp"===n.type;const d="size-ramp"===n.type;let h=null;if("symbol-table"===n.type||d){var M=n.infos.map(W=>
this._renderLegendForElementInfo(W,J,X,d,n.legendType)).filter(W=>!!W);M.length&&(h=g.tsx("div",{class:"esri-legend__layer-body"},M))}else"color-ramp"===n.type||"opacity-ramp"===n.type||"heatmap-ramp"===n.type||"stretch-ramp"===n.type?h=this._renderLegendForRamp(n,J.opacity):"relationship-ramp"===n.type?h=l.renderRelationshipRamp(n,this.id,J.opacity,X):"univariate-above-and-below-ramp"===n.type?h=this._renderUnivariateAboveAndBelowRamp(n,J.opacity,X):"univariate-color-size-ramp"===n.type&&(h=this._renderUnivariateColorSizeRamp(n,
J.opacity,X));if(!h)return null;M=n.title;var S=null;"string"===typeof M?S=M:M&&(S=b.getTitle(this.messages,M,D||U),S=b.isRendererTitle(M,D||U)&&M.title?`${M.title} (${S})`:S);D=Y?"esri-legend__layer-child-table":"esri-legend__layer-table";U=S?g.tsx("div",{class:"esri-legend__layer-caption"},S):null;return g.tsx("div",{class:this.classes(D,{["esri-legend__layer-table--size-ramp"]:d||!Y})},U,h)};v._renderUnivariateAboveAndBelowRamp=function(n,J,X){const {sizeRampElement:Y,colorRampElement:D}=z.getUnivariateAboveAndBelowRampElements(n,
J);if(!Y)return null;var U=z.getUnivariateColorRampSize(Y,"above",!0);n=z.getUnivariateColorRampSize(Y,"below",!0);const d=z.getUnivariateColorRampPreview(D,{width:12,height:U,rampAlignment:"vertical",opacity:J,type:"above",effectList:X});J=z.getUnivariateColorRampPreview(D,{width:12,height:n,rampAlignment:"vertical",opacity:J,type:"below",effectList:X});var h=z.getUnivariateColorRampMargin(Y);const M=Y.infos.map(G=>G.label);X=M.map((G,T)=>{const ea=2===T;return 0===T?g.tsx("div",{key:T,class:G?d?
"esri-univariate-above-and-below-ramp__label":"esri-legend__ramp-label":null},G):ea?g.tsx("div",null):null});const S=M.length-1,W=Math.floor(M.length/2),m=M.map((G,T)=>{const ea=T===S;return T===W||ea?g.tsx("div",{key:T,class:G?d?"esri-univariate-above-and-below-ramp__label":"esri-legend__ramp-label":null},G):null}),C={display:"table-cell",verticalAlign:"middle"};h={marginTop:`${h}px`};U={height:`${U}px`};n={height:`${n}px`};return g.tsx("div",{key:"univariate-above-and-below-ramp-preview",styles:u},
g.tsx("div",{class:"esri-legend__layer-body"},Y.infos.map((G,T)=>g.tsx("div",{class:this.classes("esri-legend__layer-row","esri-legend__size-ramp")},g.tsx("div",{class:"esri-legend__symbol",styles:C,bind:G.preview,afterCreate:b.attachToNode}),d||0!==T%2?null:g.tsx("div",{class:"esri-legend__layer-cell esri-legend__layer-cell--info"},M[T])))),d?g.tsx("div",{styles:h,key:"color-ramp-preview"},g.tsx("div",{styles:B},g.tsx("div",{styles:k},g.tsx("div",{class:"esri-legend__ramps",bind:d,afterCreate:b.attachToNode})),
g.tsx("div",{styles:k},g.tsx("div",{class:"esri-legend__ramp-labels",styles:U},X))),g.tsx("div",{styles:B},g.tsx("div",{styles:k},g.tsx("div",{class:"esri-legend__ramps",bind:J,afterCreate:b.attachToNode})),g.tsx("div",{styles:k},g.tsx("div",{class:"esri-legend__ramp-labels",styles:n},m)))):null)};v._renderUnivariateColorSizeRamp=function(n,J,X){const {sizeRampElement:Y,colorRampElement:D}=z.getUnivariateColorSizeRampElements(n);if(!Y)return null;var U=z.getUnivariateColorRampMargin(Y);n=z.getUnivariateColorRampSize(Y,
"full",!1);J=z.getUnivariateColorRampPreview(D,{width:12,height:n,rampAlignment:"vertical",opacity:J,type:"full",effectList:X});const d=Y.infos.length-1;X=Y.infos.map((M,S)=>0===S||S===d?g.tsx("div",{key:S,class:M.label?D?"esri-univariate-above-and-below-ramp__label":"esri-legend__ramp-label":null},M.label):null);const h={display:"table-cell",verticalAlign:"middle"};U={marginTop:`${U}px`};n={height:`${n}px`};return g.tsx("div",{key:"univariate-above-and-below-ramp-preview",styles:u},g.tsx("div",{class:"esri-legend__layer-body"},
Y.infos.map(M=>g.tsx("div",{class:this.classes("esri-legend__layer-row","esri-legend__size-ramp")},g.tsx("div",{class:"esri-legend__symbol",styles:h,bind:M.preview,afterCreate:b.attachToNode})))),g.tsx("div",{styles:U,key:"color-ramp-preview"},g.tsx("div",{styles:B},g.tsx("div",{styles:k},g.tsx("div",{class:"esri-legend__ramps",bind:J,afterCreate:b.attachToNode})),g.tsx("div",{styles:k},g.tsx("div",{class:"esri-legend__ramp-labels",styles:n},X)))))};v._renderLegendForRamp=function(n,J){const X=n.infos,
Y="heatmap-ramp"===n.type,D="stretch-ramp"===n.type,U=n.preview;U.className=`${"esri-legend__color-ramp"} ${"opacity-ramp"===n.type?"esri-legend__opacity-ramp":""}`;null!=J&&(U.style.opacity=J.toString());n=X.map(d=>g.tsx("div",{class:d.label?"esri-legend__ramp-label":null},Y?this.messages[d.label]:D?this._getStretchStopLabel(d):d.label));J={height:U.style.height};return g.tsx("div",{class:"esri-legend__layer-row"},g.tsx("div",{class:"esri-legend__layer-cell esri-legend__layer-cell--symbols",styles:{width:"24px"}},
g.tsx("div",{class:"esri-legend__ramps",bind:U,afterCreate:b.attachToNode})),g.tsx("div",{class:"esri-legend__layer-cell esri-legend__layer-cell--info"},g.tsx("div",{class:"esri-legend__ramp-labels",styles:J},n)))};v._getStretchStopLabel=function(n){return n.label?this.messages[n.label]+": "+("string"===typeof n.value?n.value:y.formatNumber(n.value,{style:"decimal",notation:-1<n.value.toString().indexOf("e")?"scientific":"standard"})):""};v._renderLegendForElementInfo=function(n,J,X,Y,D){if(n.type)return this._renderLegendForElement(n,
J,X,!0);X=null;D=b.isImageryStretchedLegend(J,D);n.preview?X=g.tsx("div",{class:"esri-legend__symbol",bind:n.preview,afterCreate:b.attachToNode}):n.src&&(X=this._renderImage(n,J,D));if(!X)return null;J={["esri-legend__imagery-layer-info--stretched"]:D};return g.tsx("div",{class:"esri-legend__layer-row"},g.tsx("div",{class:this.classes("esri-legend__layer-cell esri-legend__layer-cell--symbols",{["esri-legend__imagery-layer-info--stretched"]:D,["esri-legend__size-ramp"]:!D&&Y})},X),g.tsx("div",{class:this.classes("esri-legend__layer-cell esri-legend__layer-cell--info",
J)},b.getTitle(this.messages,n.label,!1)||""))};v._renderImage=function(n,J,X){const {label:Y,src:D,opacity:U}=n;X={["esri-legend__imagery-layer-image--stretched"]:X,["esri-legend__symbol"]:!X};J={opacity:`${null!=U?U:J.opacity}`};return g.tsx("img",{alt:b.getTitle(this.messages,Y,!1),src:D,border:0,width:n.width,height:n.height,class:this.classes(X),styles:J})};return P}(Q);I.__decorate([q.property()],K.prototype,"activeLayerInfos",void 0);I.__decorate([q.property()],K.prototype,"headingLevel",void 0);
I.__decorate([q.property(),t.messageBundle("esri/widgets/Legend/t9n/Legend")],K.prototype,"messages",void 0);I.__decorate([q.property({readOnly:!0})],K.prototype,"type",void 0);return K=I.__decorate([F.subclass("esri.widgets.Legend.styles.Classic")],K)})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Legend/LegendViewModel ./Legend/styles/Card ./Legend/styles/Classic ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/jsxFactory".split(" "),function(A,I,K,q,
r,L,E,F,Q,l,z,b,e,f,t,c,g,y){L=function(u){function B(w,P){w=u.call(this,w,P)||this;w._handles=new K;w.activeLayerInfos=null;w.basemapLegendVisible=!1;w.groundLegendVisible=!1;w.headingLevel=3;w.hideLayersNotInCurrentView=!1;w.keepCacheOnDestroy=!1;w.respectLayerVisibility=!0;w.iconClass="esri-icon-layer-list";w.label=void 0;w.layerInfos=null;w.messages=null;w.style=new f;w.view=null;w.viewModel=new b;return w}A._inheritsLoose(B,u);var k=B.prototype;k.initialize=function(){this.own(q.on(this,"view",
"resize",()=>this.scheduleRender()),q.on(this,"activeLayerInfos","change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),q.watch(this,"headingLevel",w=>{const {style:P}=this;P&&(P.headingLevel=w)}),q.init(this,"style",(w,P)=>{P&&w!==P&&P.destroy();w&&(w.activeLayerInfos=this.activeLayerInfos,"card"===w.type&&(w.view=this.view),w.headingLevel=this.headingLevel)}))};k.destroy=function(){this._handles.destroy();this._handles=null};k.castStyle=function(w){if(w instanceof e||w instanceof f)return w;
if("string"===typeof w)return"card"===w?new e:new f;if(w&&"string"===typeof w.type){const P={...w};delete P.type;return new ("card"===w.type?e:f)(P)}return new f};k.render=function(){return y.tsx("div",{class:this.classes("esri-legend","esri-widget",this.style instanceof f?"esri-widget--panel":null)},this.style.render())};k._refreshActiveLayerInfos=function(w){this._handles.removeAll();w.forEach(P=>this._renderOnActiveLayerInfoChange(P));this.scheduleRender()};k._renderOnActiveLayerInfoChange=function(w){var P=
q.init(w,"version",()=>this.scheduleRender());this._handles.add(P,`version_${w.layer.uid}`);P=q.on(w,"children","change",()=>{w.children.forEach(v=>this._renderOnActiveLayerInfoChange(v))});this._handles.add(P,`children_${w.layer.uid}`);w.children.forEach(v=>this._renderOnActiveLayerInfoChange(v))};return B}(z);I.__decorate([r.aliasOf("viewModel.activeLayerInfos")],L.prototype,"activeLayerInfos",void 0);I.__decorate([r.aliasOf("viewModel.basemapLegendVisible")],L.prototype,"basemapLegendVisible",
void 0);I.__decorate([r.aliasOf("viewModel.groundLegendVisible")],L.prototype,"groundLegendVisible",void 0);I.__decorate([Q.property()],L.prototype,"headingLevel",void 0);I.__decorate([r.aliasOf("viewModel.hideLayersNotInCurrentView")],L.prototype,"hideLayersNotInCurrentView",void 0);I.__decorate([r.aliasOf("viewModel.keepCacheOnDestroy")],L.prototype,"keepCacheOnDestroy",void 0);I.__decorate([r.aliasOf("viewModel.respectLayerVisibility")],L.prototype,"respectLayerVisibility",void 0);I.__decorate([Q.property()],
L.prototype,"iconClass",void 0);I.__decorate([Q.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],L.prototype,"label",void 0);I.__decorate([r.aliasOf("viewModel.layerInfos")],L.prototype,"layerInfos",void 0);I.__decorate([Q.property(),c.messageBundle("esri/widgets/Legend/t9n/Legend")],L.prototype,"messages",void 0);I.__decorate([Q.property()],L.prototype,"style",void 0);I.__decorate([F.cast("style")],L.prototype,"castStyle",null);I.__decorate([r.aliasOf("viewModel.view")],L.prototype,
"view",void 0);I.__decorate([Q.property()],L.prototype,"viewModel",void 0);return L=I.__decorate([l.subclass("esri.widgets.Legend")],L)});