// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/LayerList/LayerListViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/Evented ../../core/Handles ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ListItem ./support/layerListUtils".split(" "),function(R,H,r,D,T,qa,M,E,n,S,K,y,C,da){const na=
r.ofType(C);r=function(ha){function N(k){var t=ha.call(this,k)||this;t._handles=new T;t.listItemCreatedFunction=null;t.operationalItems=new na;t.view=null;t._callListItemsCreatedDebounced=qa.debounce(R._asyncToGenerator(function*(){return t._callListItemsCreated()}),300);return t}R._inheritsLoose(N,ha);var G=N.prototype;G.initialize=function(){this._handles.add(M.init(this,["view","view.ready"],()=>this._viewHandles()),"view")};G.destroy=function(){this._handles.destroy();this.view=this._handles=
null;this.operationalItems.removeAll()};G.triggerAction=function(k,t){k&&!k.disabled&&this.emit("trigger-action",{action:k,item:t})};G.moveListItem=function(k,t,z,A){var ia,Q;const u=null==k?void 0:k.layer;if(u){var U=null==(ia=this.view)?void 0:null==(Q=ia.map)?void 0:Q.layers;ia=t?da.getItemLayers(t):U;U=z?da.getItemLayers(z):U;ia&&U&&({operationalItems:Q}=this,t=(null==t?void 0:t.children)||Q,Q=(null==z?void 0:z.children)||Q,A=U.length-A,k.parent=z||null,t.includes(k)&&t.remove(k),ia.includes(u)&&
ia.remove(u),Q.includes(k)||Q.add(k,A),U.includes(u)||U.add(u,A))}};G._createLayerViewHandles=function(k){const {_handles:t}=this;t.remove("layer-views");this._compileList();k&&t.add(k.on("change",()=>this._compileList()),"layer-views")};G._createMapLayerHandles=function(k){const {_handles:t}=this;t.remove("map-layers");this._compileList();k&&t.add(k.on("change",()=>this._compileList()),"map-layers")};G._watchItemProperties=function(k){this._watchItemChildren(k,`${"children"}-${k.uid}`)};G._watchItemChildren=
function(k,t){this._handles.add([k.children.on("change",()=>{this._callListItemCreatedChildren(k.children)})],t);k.children.forEach(z=>this._watchItemChildren(z,t))};G._callListItemCreatedChildren=function(k){k.forEach(t=>this._callListItemCreated(t))};G._callListItemCreated=function(k){"function"===typeof this.listItemCreatedFunction&&this.listItemCreatedFunction.call(null,{item:k});this._callListItemCreatedChildren(k.children)};G._createListItem=function(k){const {view:t}=this;k=new C({layer:k,
view:t});this._watchItemProperties(k);return k};G._removeAllItems=function(){const {_handles:k,operationalItems:t}=this;t.forEach(z=>{k.remove(`${"children"}-${z.uid}`)});t.removeAll()};G._getViewableLayers=function(k){if(k)return k.filter(t=>"hide"!==da.findLayerListMode(t))};G._watchLayersListMode=function(k){const {_handles:t}=this;t.remove("layer-list-mode");k&&k.forEach(z=>{t.add(M.watch(z,"listMode",()=>this._compileList()),"layer-list-mode")})};G._compileList=function(){var k=this.get("view.map.layers");
this._watchLayersListMode(k);(k=this._getViewableLayers(k))&&k.length?(this._createNewItems(k),this._removeItems(k),this._sortItems(k),this._beforeCallListItemsCreated()):this._removeAllItems()};G._beforeCallListItemsCreated=function(){var k=R._asyncToGenerator(function*(){return this._callListItemsCreatedDebounced().catch(qa.throwIfNotAbortError)});return function(){return k.apply(this,arguments)}}();G._callListItemsCreated=function(){var k=R._asyncToGenerator(function*(){var t;yield null==(t=this.view)?
void 0:t.when();this.operationalItems.forEach(z=>this._callListItemCreated(z))});return function(){return k.apply(this,arguments)}}();G._createNewItems=function(k){const {operationalItems:t}=this;k.forEach(z=>{t.find(A=>A.layer===z)||t.add(this._createListItem(z))})};G._removeItems=function(k){const {_handles:t,operationalItems:z}=this,A=[];z.forEach(ia=>{ia&&k&&k.find(Q=>ia.layer===Q)||(t.remove(`${"children"}-${ia.uid}`),A.push(ia))});z.removeMany(A)};G._sortItems=function(k){const {operationalItems:t}=
this;t.sort((z,A)=>{z=k.indexOf(z.layer);A=k.indexOf(A.layer);return z>A?-1:z<A?1:0})};G._viewHandles=function(){const {_handles:k,view:t}=this;k.remove(["map-layers","layer-views","view-layers"]);this._compileList();t&&t.ready&&k.add([M.init(this,"view.map.allLayers",z=>this._createMapLayerHandles(z)),M.init(this,"view.allLayerViews",z=>this._createLayerViewHandles(z)),M.init(this,"listItemCreatedFunction",()=>this._compileList())],"view-layers")};R._createClass(N,[{key:"state",get:function(){const k=
this.get("view");return this.get("view.ready")?"ready":k?"loading":"disabled"}}]);return N}(D.EventedAccessor);H.__decorate([E.property()],r.prototype,"listItemCreatedFunction",void 0);H.__decorate([E.property({type:na})],r.prototype,"operationalItems",void 0);H.__decorate([E.property({readOnly:!0})],r.prototype,"state",null);H.__decorate([E.property()],r.prototype,"view",void 0);return r=H.__decorate([y.subclass("esri.widgets.LayerList.LayerListViewModel")],r)})},"esri/widgets/LayerList/ListItem":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/HandleOwner ../../core/Identifiable ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionSlider ../../support/actions/ActionToggle ./ListItemPanel ./support/layerListUtils".split(" "),
function(R,H,r,D,T,qa,M,E,n,S,K,y,C,da,na,ha,N,G,k){var t;n=D.ofType({key:"type",defaultKeyValue:"button",base:da,typeMap:{button:na,toggle:N,slider:ha}});const z=D.ofType(n);r=t=function(A){function ia(u){u=A.call(this,u)||this;u.actionsSections=new z;u.actionsOpen=!1;u.children=new (D.ofType(t));u.childrenSortable=!0;u.error=null;u.layer=null;u.layerView=null;u.open=!1;u.panel=null;u.parent=null;u.sortable=!0;u.view=null;u.visible=null;return u}R._inheritsLoose(ia,A);var Q=ia.prototype;Q.initialize=
function(){this.handles.add([M.init(this,"layer",u=>this._watchLayerProperties(u)),M.init(this,"view",u=>this._updateChildren(u)),M.init(this,"panel",u=>this._setListItemOnPanel(u)),M.init(this,["layer","view"],()=>this._getLayerView())])};Q.destroy=function(){this.view=null};Q.castPanel=function(u){this.get("panel.open")&&!u.hasOwnProperty("open")&&(u.open=!0);return u?new G(u):null};Q.clone=function(){return new t({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,children:this.children.clone(),
layer:this.layer,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})};Q._setListItemOnPanel=function(u){u&&(u.listItem=this)};Q._updateChildren=function(u){const U=this.children;U&&U.forEach(ka=>ka.view=u)};Q._addChildren=function(u){this.handles.remove("child-list-mode");this.children.removeAll();if(u){u.forEach(ka=>{this.handles.add(M.watch(ka,"listMode",()=>this._addChildren(u)),"child-list-mode")});var U=u.filter(ka=>"hide"!==k.findLayerListMode(ka));this.children.addMany(this._makeChildren(U))}};
Q._watchSublayerChanges=function(u){u&&this.handles.add(u.on("change",()=>{this._addChildren(u)}),"layer")};Q._initializeChildLayers=function(u){this._addChildren(u);this._watchSublayerChanges(u)};Q._makeChildren=function(u){return u.map(U=>k.canDisplayLayer(U)?new t({layer:U,parent:this,view:this.view}):null).reverse()};Q._watchLayerProperties=function(u){if(this.handles&&(this.handles.remove("layer"),this.handles.remove("child-list-mode"),u))if(this.handles.add(M.watch(u,"listMode",()=>this._watchLayerProperties(u)),
"layer"),"hide-children"===k.findLayerListMode(u))this.children.removeAll();else{var U=k.getNormalizedChildLayerProperty(u);U&&this.handles.add(M.init(u,U,()=>{u.hasOwnProperty(U)&&this._initializeChildLayers(u[U])}),"layer")}};Q._getLayerView=function(){var u=R._asyncToGenerator(function*(){const {layer:U,view:ka}=this;if(U&&ka)try{const Ea=yield ka.whenLayerView(U);Ea.layer===this.layer&&this._set("layerView",Ea)}catch{}});return function(){return u.apply(this,arguments)}}();Q._isLayerUpdating=
function(u){return u&&"loading"===u.loadStatus};R._createClass(ia,[{key:"incompatible",get:function(){const {layerView:u}=this;return u&&"spatialReferenceSupported"in u?!u.spatialReferenceSupported:!1}},{key:"title",get:function(){const u=this.get("layer.layer");return(!u||u&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""},set:function(u){void 0===u?this._clearOverride("title"):this._override("title",u)}},{key:"updating",get:function(){const u=this.layerView;
return u?u.updating:this._isLayerUpdating(this.layer)}},{key:"visibleAtCurrentScale",get:function(){return!k.isLayerOutsideScaleRange(this.layer,this.get("view.scale"))}},{key:"visibilityMode",get:function(){return k.findLayerVisibilityMode(this.layer)}}]);return ia}(qa.IdentifiableMixin(T.HandleOwnerMixin(r)));H.__decorate([y.property({type:z})],r.prototype,"actionsSections",void 0);H.__decorate([y.property()],r.prototype,"actionsOpen",void 0);H.__decorate([y.property({type:D})],r.prototype,"children",
void 0);H.__decorate([y.property()],r.prototype,"childrenSortable",void 0);H.__decorate([E.aliasOf("layer.loadError?")],r.prototype,"error",void 0);H.__decorate([y.property({readOnly:!0})],r.prototype,"incompatible",null);H.__decorate([y.property()],r.prototype,"layer",void 0);H.__decorate([y.property({readOnly:!0})],r.prototype,"layerView",void 0);H.__decorate([y.property()],r.prototype,"open",void 0);H.__decorate([y.property({type:G})],r.prototype,"panel",void 0);H.__decorate([K.cast("panel")],
r.prototype,"castPanel",null);H.__decorate([y.property()],r.prototype,"parent",void 0);H.__decorate([y.property()],r.prototype,"sortable",void 0);H.__decorate([y.property()],r.prototype,"title",null);H.__decorate([y.property({readOnly:!0})],r.prototype,"updating",null);H.__decorate([y.property({value:null})],r.prototype,"view",void 0);H.__decorate([E.aliasOf("layer.visible")],r.prototype,"visible",void 0);H.__decorate([y.property({readOnly:!0})],r.prototype,"visibleAtCurrentScale",null);H.__decorate([y.property({readOnly:!0})],
r.prototype,"visibilityMode",null);return r=t=H.__decorate([C.subclass("esri.widgets.LayerList.ListItem")],r)})},"esri/support/actions/ActionSlider":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ActionBase".split(" "),function(R,H,r,D,T,qa,M,E){var n;D=n=function(S){function K(y){y=S.call(this,
y)||this;y.displayValueEnabled=!1;y.max=1;y.min=0;y.step=.1;y.type="slider";y.value=null;return y}R._inheritsLoose(K,S);K.prototype.clone=function(){return new n({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})};return K}(E);H.__decorate([r.property()],D.prototype,"displayValueEnabled",void 0);H.__decorate([r.property()],
D.prototype,"max",void 0);H.__decorate([r.property()],D.prototype,"min",void 0);H.__decorate([r.property()],D.prototype,"step",void 0);H.__decorate([r.property()],D.prototype,"value",void 0);return D=n=H.__decorate([M.subclass("esri.support.Action.ActionSlider")],D)})},"esri/widgets/LayerList/ListItemPanel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Handles ../../core/Identifiable ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./support/layerListUtils ../support/widget ../support/jsxFactory".split(" "),
function(R,H,r,D,T,qa,M,E,n,S,K,y,C,da,na){T=function(ha){function N(k,t){k=ha.call(this,k,t)||this;k._legend=null;k._handles=new D;k.content=null;k.image=null;k.listItem=null;k.open=!1;k.visible=!0;return k}H._inheritsLoose(N,ha);var G=N.prototype;G.initialize=function(){this.own([qa.init(this,"content",k=>this._createLegend(k))])};G.destroy=function(){const {_legend:k}=this;k&&k.destroy();this._legend=null};G.render=function(){return na.tsx("div",{class:"esri-layer-list-panel"},this._renderContents())};
G._renderContent=function(k){const {_legend:t,listItem:z}=this;return k?"legend"===k?z&&z.view&&z.layer&&t?na.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--legend"),key:t},t.render()):null:"string"===typeof k?na.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--string"),key:k,innerHTML:k}):da.isWidget(k)?na.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--widget"),
key:k},k.render()):k instanceof HTMLElement?na.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--html-element"),key:k,bind:k,afterCreate:this._attachToNode}):null:null};G._renderContents=function(){const {content:k}=this;return Array.isArray(k)?k.map(t=>this._renderContent(t)):this._renderContent(k)};G._getLegendOptions=function(){const {listItem:k}=this;if(!k)return{};const {layer:t,view:z}=k;return t&&z?{view:z,layerInfos:[C.getLegendLayerInfo(t)]}:
{}};G._createLegend=function(k){this._hasLegend(k)&&!this._legend&&(new Promise((t,z)=>R(["../Legend"],A=>t(Object.freeze({__proto__:null,default:A})),z))).then(({default:t})=>{const {_handles:z}=this,A=new t(this._getLegendOptions());this._legend=A;this.notifyChange("className");this.notifyChange("title");t=qa.init(this,["listItem.view","listItem.layer","listItem.layer.source","listItem.layer.parent"],()=>this._updateLegend(A));z.add(t,"legends");this.scheduleRender()})};G._hasLegend=function(k){return"legend"===
k?!0:Array.isArray(k)?k.some(t=>"legend"===t):!1};G._attachToNode=function(k){k.appendChild(this)};G._updateLegend=function(k){k.set(this._getLegendOptions());this.scheduleRender()};G._getWidget=function(k){return"legend"===k?this._legend:da.isWidget(k)?k:null};G._getFirstWidget=function(){const {content:k}=this;if(Array.isArray(k)){let t=null;k.some(z=>{(z=this._getWidget(z))&&(t=z);return!!z});return t}return this._getWidget(k)};H._createClass(N,[{key:"className",get:function(){const {image:k}=
this,t=this._getFirstWidget();return this._get("className")||!k&&t?t.iconClass:""},set:function(k){void 0===k?this._clearOverride("className"):this._override("className",k)}},{key:"title",get:function(){const k=this._getFirstWidget();return this._get("title")||k?k.label:""},set:function(k){void 0===k?this._clearOverride("title"):this._override("title",k)}}]);return N}(T.IdentifiableMixin(y));r.__decorate([M.property()],T.prototype,"className",null);r.__decorate([M.property()],T.prototype,"content",
void 0);r.__decorate([M.property()],T.prototype,"image",void 0);r.__decorate([M.property()],T.prototype,"listItem",void 0);r.__decorate([M.property()],T.prototype,"title",null);r.__decorate([M.property()],T.prototype,"open",void 0);r.__decorate([M.property()],T.prototype,"visible",void 0);return T=r.__decorate([K.subclass("esri.widgets.LayerList.ListItemPanel")],T)})},"esri/widgets/LayerList/support/layerListUtils":function(){define(["exports"],function(R){function H(n){if(n)return null!=n.listMode?
n.listMode:void 0}function r(n){if(n)return null!=n.minScale?n.minScale:void 0}function D(n){if(n)return null!=n.maxScale?n.maxScale:void 0}function T(n){if(n){if(!("type"in n))return"sublayers";if(n.listMode!==E.hideChildren&&"wmts"!==n.type)switch(n.type){case "group":return"layers";case "analysis":return"analyses";default:return"sublayers"}}}function qa(n,S){n&&n.sort((K,y)=>{K=S.indexOf(K.uid);y=S.indexOf(y.uid);return K>y?-1:K<y?1:0})}function M(n){return!(null==n||!n.layer)}const E={hide:"hide",
hideChildren:"hide-children"};R.canDisplayLayer=function(n){return H(n)!==E.hide};R.canSortSublayers=function(n){n=n&&(n.get("layer.layer")||n.layer);if(!n)return!1;n=n.get("capabilities.exportMap.supportsDynamicLayers");return"boolean"===typeof n?n:!0};R.findLayerListMode=H;R.findLayerMaxScale=D;R.findLayerMinScale=r;R.findLayerVisibilityMode=function(n){if(!n)return"inherited";var S=n.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"===typeof S)return S?"independent":"inherited";
S=n.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"===typeof S?S?"independent":"inherited":null!=n.visibilityMode?n.visibilityMode:"independent"};R.findSelectedItem=function(n,S){var K;const y=null==(K=n.layer)?void 0:K.uid;return y&&S.find(C=>{var da;return(null==(da=C.layer)?void 0:da.uid)===y})};R.getItemLayers=function(n){return(n=null==n?void 0:n.layer)&&"group"===n.type?n.layers:null};R.getLegendLayerInfo=function(n){var S=M(n)?n:null;const K=null==n?void 0:n.parent;
return(S="map-image"===(null==K?void 0:K.type)&&S.source)&&K?{layer:K,title:"",sublayerIds:[S.mapLayerId]}:{layer:n,title:""}};R.getNormalizedChildLayerProperty=T;R.isLayerOutsideScaleRange=function(n,S){if(!n||isNaN(S))return!1;var K=r(n);n=D(n);K=!isNaN(K)&&0<K&&S>K;S=!isNaN(n)&&0<n&&S<n;return K||S};R.isSublayer=M;R.sortChildLayersToIds=function(n,S){if(n=null==n?void 0:n.layer){var K=T(n);K&&(n=n.get(K),qa(n,S))}};R.sortLayersToIds=qa;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/chunks/sortable.esm":function(){define(["exports"],
function(R){function H(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(a);b&&(e=e.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable}));c.push.apply(c,e)}return c}function r(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?H(Object(c),!0).forEach(function(e){var h=c[e];e in a?Object.defineProperty(a,e,{value:h,enumerable:!0,configurable:!0,writable:!0}):a[e]=h}):Object.getOwnPropertyDescriptors?
Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):H(Object(c)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(c,e))})}return a}function D(a){"@babel/helpers - typeof";D="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};return D(a)}function T(){T=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=
arguments[b],e;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e])}return a};return T.apply(this,arguments)}function qa(a,b){if(null==a)return{};if(null==a)var c={};else{c={};var e=Object.keys(a),h;for(h=0;h<e.length;h++){var l=e[h];0<=b.indexOf(l)||(c[l]=a[l])}}if(Object.getOwnPropertySymbols)for(h=Object.getOwnPropertySymbols(a),l=0;l<h.length;l++)e=h[l],0<=b.indexOf(e)||Object.prototype.propertyIsEnumerable.call(a,e)&&(c[e]=a[e]);return c}function M(a){if("undefined"!==typeof window&&
window.navigator)return!!navigator.userAgent.match(a)}function E(a,b,c){a.addEventListener(b,c,!va&&wb)}function n(a,b,c){a.removeEventListener(b,c,!va&&wb)}function S(a,b){if(b){"\x3e"===b[0]&&(b=b.substring(1));if(a)try{if(a.matches)return a.matches(b);if(a.msMatchesSelector)return a.msMatchesSelector(b);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(b)}catch(c){}return!1}}function K(a,b,c,e){if(a){c=c||document;do{if(null!=b&&("\x3e"===b[0]?a.parentNode===c&&S(a,b):S(a,b))||e&&a===c)return a;
if(a===c)break}while(a=a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode)}return null}function y(a,b,c){if(a&&b)if(a.classList)a.classList[c?"add":"remove"](b);else{var e=(" "+a.className+" ").replace(xb," ").replace(" "+b+" "," ");a.className=(e+(c?" "+b:"")).replace(xb," ")}}function C(a,b,c){var e=a&&a.style;if(e){if(void 0===c)return document.defaultView&&document.defaultView.getComputedStyle?c=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:
c[b];b in e||-1!==b.indexOf("webkit")||(b="-webkit-"+b);e[b]=c+("string"===typeof c?"":"px")}}function da(a,b){var c="";if("string"===typeof a)c=a;else{do{var e=C(a,"transform");e&&"none"!==e&&(c=e+" "+c)}while(!b&&(a=a.parentNode))}return(a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)&&new a(c)}function na(a,b,c){if(a){a=a.getElementsByTagName(b);b=0;var e=a.length;if(c)for(;b<e;b++)c(a[b],b);return a}return[]}function ha(){var a=document.scrollingElement;return a?
a:document.documentElement}function N(a,b,c,e,h){if(a.getBoundingClientRect||a===window){if(a!==window&&a.parentNode&&a!==ha()){var l=a.getBoundingClientRect();var m=l.top;var w=l.left;var B=l.bottom;var F=l.right;var I=l.height;var O=l.width}else w=m=0,B=window.innerHeight,F=window.innerWidth,I=window.innerHeight,O=window.innerWidth;if((b||c)&&a!==window&&(h=h||a.parentNode,!va)){do if(h&&h.getBoundingClientRect&&("none"!==C(h,"transform")||c&&"static"!==C(h,"position"))){B=h.getBoundingClientRect();
m-=B.top+parseInt(C(h,"border-top-width"));w-=B.left+parseInt(C(h,"border-left-width"));B=m+l.height;F=w+l.width;break}while(h=h.parentNode)}e&&a!==window&&(e=(a=da(h||a))&&a.a,h=a&&a.d,a&&(m/=h,w/=e,O/=e,I/=h,B=m+I,F=w+O));return{top:m,left:w,bottom:B,right:F,width:O,height:I}}}function G(a,b,c){var e=Q(a,!0);for(a=N(a)[b];e;){b=N(e)[c];var h=void 0;h="top"===c||"left"===c?a>=b:a<=b;if(!h)return e;if(e===ha())break;e=Q(e,!1)}return!1}function k(a,b,c,e){for(var h=0,l=0,m=a.children;l<m.length;){if("none"!==
m[l].style.display&&m[l]!==p.ghost&&(e||m[l]!==p.dragged)&&K(m[l],c.draggable,a,!1)){if(h===b)return m[l];h++}l++}return null}function t(a,b){for(a=a.lastElementChild;a&&(a===p.ghost||"none"===C(a,"display")||b&&!S(a,b));)a=a.previousElementSibling;return a||null}function z(a,b){var c=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)"TEMPLATE"===a.nodeName.toUpperCase()||a===p.clone||b&&!S(a,b)||c++;return c}function A(a){var b=0,c=0,e=ha();if(a){do{var h=da(a),l=h.d;b+=a.scrollLeft*
h.a;c+=a.scrollTop*l}while(a!==e&&(a=a.parentNode))}return[b,c]}function ia(a,b){for(var c in a)if(a.hasOwnProperty(c))for(var e in b)if(b.hasOwnProperty(e)&&b[e]===a[c][e])return Number(c);return-1}function Q(a,b){if(!a||!a.getBoundingClientRect)return ha();var c=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var e=C(a);if(a.clientWidth<a.scrollWidth&&("auto"==e.overflowX||"scroll"==e.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==e.overflowY||"scroll"==e.overflowY)){if(!a.getBoundingClientRect||
a===document.body)break;if(c||b)return a;c=!0}}while(a=a.parentNode);return ha()}function u(a,b){return Math.round(a.top)===Math.round(b.top)&&Math.round(a.left)===Math.round(b.left)&&Math.round(a.height)===Math.round(b.height)&&Math.round(a.width)===Math.round(b.width)}function U(a,b){return function(){if(!Sa){var c=arguments;1===c.length?a.call(this,c[0]):a.apply(this,c);Sa=setTimeout(function(){Sa=void 0},b)}}}function ka(a,b,c){a.scrollLeft+=b;a.scrollTop+=c}function Ea(a){var b=window.Polymer,
c=window.jQuery||window.Zepto;return b&&b.dom?b.dom(a).cloneNode(!0):c?c(a).clone(!0)[0]:a.cloneNode(!0)}function Ia(){var a=[],b;return{captureAnimationState:function(){a=[];this.options.animation&&[].slice.call(this.el.children).forEach(function(c){if("none"!==C(c,"display")&&c!==p.ghost){a.push({target:c,rect:N(c)});var e=r({},a[a.length-1].rect);if(c.thisAnimationDuration){var h=da(c,!0);h&&(e.top-=h.f,e.left-=h.e)}c.fromRect=e}})},addAnimationState:function(c){a.push(c)},removeAnimationState:function(c){a.splice(ia(a,
{target:c}),1)},animateAll:function(c){var e=this;if(this.options.animation){var h=!1,l=0;a.forEach(function(m){var w=0,B=m.target,F=B.fromRect,I=N(B),O=B.prevFromRect,ja=B.prevToRect;m=m.rect;var ea=da(B,!0);ea&&(I.top-=ea.f,I.left-=ea.e);B.toRect=I;B.thisAnimationDuration&&u(O,I)&&!u(F,I)&&(m.top-I.top)/(m.left-I.left)===(F.top-I.top)/(F.left-I.left)&&(w=Math.sqrt(Math.pow(O.top-m.top,2)+Math.pow(O.left-m.left,2))/Math.sqrt(Math.pow(O.top-ja.top,2)+Math.pow(O.left-ja.left,2))*e.options.animation);
u(I,F)||(B.prevFromRect=F,B.prevToRect=I,w||(w=e.options.animation),e.animate(B,m,I,w));w&&(h=!0,l=Math.max(l,w),clearTimeout(B.animationResetTimer),B.animationResetTimer=setTimeout(function(){B.animationTime=0;B.prevFromRect=null;B.fromRect=null;B.prevToRect=null;B.thisAnimationDuration=null},w),B.thisAnimationDuration=w)});clearTimeout(b);h?b=setTimeout(function(){"function"===typeof c&&c()},l):"function"===typeof c&&c();a=[]}else clearTimeout(b),"function"===typeof c&&c()},animate:function(c,e,
h,l){if(l){C(c,"transition","");C(c,"transform","");var m=da(this.el),w=(e.left-h.left)/(m&&m.a||1);e=(e.top-h.top)/(m&&m.d||1);c.animatingX=!!w;c.animatingY=!!e;C(c,"transform","translate3d("+w+"px,"+e+"px,0)");this.forRepaintDummy=c.offsetWidth;C(c,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:""));C(c,"transform","translate3d(0,0,0)");"number"===typeof c.animated&&clearTimeout(c.animated);c.animated=setTimeout(function(){C(c,"transition","");C(c,"transform","");
c.animated=!1;c.animatingX=!1;c.animatingY=!1},l)}}}}function ca(a){var b=r({putSortable:la,cloneEl:aa,targetEl:v,rootEl:Y,oldIndex:Ma,oldDraggableIndex:Ta,newIndex:ta,newDraggableIndex:Fa},a);a=b.sortable;var c=b.rootEl,e=b.name,h=b.targetEl,l=b.cloneEl,m=b.toEl,w=b.fromEl,B=b.oldIndex,F=b.newIndex,I=b.oldDraggableIndex,O=b.newDraggableIndex,ja=b.originalEvent,ea=b.putSortable,oa=b.extraEventProperties;if(a=a||c&&c[ua]){var X=a.options,wa="on"+e.charAt(0).toUpperCase()+e.substr(1);!window.CustomEvent||
va||Ua?(b=document.createEvent("Event"),b.initEvent(e,!0,!0)):b=new CustomEvent(e,{bubbles:!0,cancelable:!0});b.to=m||c;b.from=w||c;b.item=h||c;b.clone=l;b.oldIndex=B;b.newIndex=F;b.oldDraggableIndex=I;b.newDraggableIndex=O;b.originalEvent=ja;b.pullMode=ea?ea.lastPutMode:void 0;e=r(r({},oa),Va.getEventProperties(e,a));for(var xa in e)b[xa]=e[xa];c&&c.dispatchEvent(b);X[wa]&&X[wa].call(a,b)}}function p(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));
this.el=a;this.options=b=T({},b);a[ua]=this;var c={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?"\x3eli":"\x3e*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return yb(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,m){l.setData("Text",m.textContent)},dropBubble:!1,
dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==p.supportPointer&&"PointerEvent"in window&&!Wa,emptyInsertThreshold:5};Va.initializePlugins(this,a,c);for(var e in c)e in b||(b[e]=c[e]);zb(b);for(var h in this)"_"===h.charAt(0)&&"function"===typeof this[h]&&
(this[h]=this[h].bind(this));if(this.nativeDraggable=b.forceFallback?!1:Jb)this.options.touchStartThreshold=1;b.supportPointer?E(a,"pointerdown",this._onTapStart):(E(a,"mousedown",this._onTapStart),E(a,"touchstart",this._onTapStart));this.nativeDraggable&&(E(a,"dragover",this),E(a,"dragenter",this));bb.push(this.el);b.store&&b.store.get&&this.sort(b.store.get(this)||[]);T(this,Ia())}function d(a,b,c,e,h,l,m,w){var B=a[ua],F=B.options.onMove,I;if(!window.CustomEvent||va||Ua){var O=document.createEvent("Event");
O.initEvent("move",!0,!0)}else O=new CustomEvent("move",{bubbles:!0,cancelable:!0});O.to=b;O.from=a;O.dragged=c;O.draggedRect=e;O.related=h||b;O.relatedRect=l||N(b);O.willInsertAfter=w;O.originalEvent=m;a.dispatchEvent(O);F&&(I=F.call(B,O,m));return I}function f(a){a.draggable=!1}function g(){mb=!1}function q(a,b,c){c=N(k(c.el,0,c.options,!0));return b?a.clientX<c.left-10||a.clientY<c.top&&a.clientX<c.right:a.clientY<c.top-10||a.clientY<c.bottom&&a.clientX<c.left}function x(a,b,c){c=N(t(c.el,c.options.draggable));
return b?a.clientX>c.right+10||a.clientX<=c.right&&a.clientY>c.bottom&&a.clientX>=c.left:a.clientX>c.right&&a.clientY>c.top||a.clientX<=c.right&&a.clientY>c.bottom+10}function J(a,b,c,e,h,l,m,w){a=e?a.clientY:a.clientX;var B=e?c.height:c.width,F=e?c.top:c.left;c=e?c.bottom:c.right;e=!1;if(!m)if(w&&cb<B*h)if(!Xa&&(1===Ya?a>F+B*l/2:a<c-B*l/2)&&(Xa=!0),Xa)e=!0;else{if(1===Ya?a<F+cb:a>c-cb)return-Ya}else if(a>F+B*(1-h)/2&&a<c-B*(1-h)/2)return b=z(v)<z(b)?1:-1,b;if(e||m)if(a<F+B*l/2||a>c-B*l/2)return a>
F+B/2?1:-1;return 0}function P(a){a=a.tagName+a.className+a.src+a.href+a.textContent;for(var b=a.length,c=0;b--;)c+=a.charCodeAt(b);return c.toString(36)}function V(a){db.length=0;a=a.getElementsByTagName("input");for(var b=a.length;b--;){var c=a[b];c.checked&&db.push(c)}}function Z(a){return setTimeout(a,0)}function ma(){fa.forEach(function(a){clearInterval(a.pid)});fa=[]}function za(){}function Na(){}var va=M(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ua=M(/Edge/i),Ab=M(/firefox/i),
Wa=M(/safari/i)&&!M(/chrome/i)&&!M(/android/i),Za=M(/iP(ad|od|hone)/i),Kb=M(/chrome/i)&&M(/android/i),wb={capture:!1,passive:!1},xb=/\s+/g,Sa,ua="Sortable"+(new Date).getTime(),Oa=[],nb={initializeByDefault:!0},Va={mount:function(a){for(var b in nb)!nb.hasOwnProperty(b)||b in a||(a[b]=nb[b]);Oa.forEach(function(c){if(c.pluginName===a.pluginName)throw"Sortable: Cannot mount plugin ".concat(a.pluginName," more than once");});Oa.push(a)},pluginEvent:function(a,b,c){var e=this;this.eventCanceled=!1;c.cancel=
function(){e.eventCanceled=!0};var h=a+"Global";Oa.forEach(function(l){if(b[l.pluginName]){if(b[l.pluginName][h])b[l.pluginName][h](r({sortable:b},c));if(b.options[l.pluginName]&&b[l.pluginName][a])b[l.pluginName][a](r({sortable:b},c))}})},initializePlugins:function(a,b,c,e){Oa.forEach(function(l){var m=l.pluginName;if(a.options[m]||l.initializeByDefault)l=new l(a,b,a.options),l.sortable=a,l.options=a.options,a[m]=l,T(c,l.defaults)});for(var h in a.options)a.options.hasOwnProperty(h)&&(e=this.modifyOption(a,
h,a.options[h]),"undefined"!==typeof e&&(a.options[h]=e))},getEventProperties:function(a,b){var c={};Oa.forEach(function(e){"function"===typeof e.eventProperties&&T(c,e.eventProperties.call(b[e.pluginName],a))});return c},modifyOption:function(a,b,c){var e;Oa.forEach(function(h){a[h.pluginName]&&h.optionListeners&&"function"===typeof h.optionListeners[b]&&(e=h.optionListeners[b].call(a[h.pluginName],c))});return e}},Lb=["evt"],sa=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:
{},e=c.evt;c=qa(c,Lb);Va.pluginEvent.bind(p)(a,b,r({dragEl:v,parentEl:ba,ghostEl:L,rootEl:Y,nextEl:Ja,lastDownEl:eb,cloneEl:aa,cloneHidden:Ga,dragStarted:$a,putSortable:la,activeSortable:p.active,originalEvent:e,oldIndex:Ma,oldDraggableIndex:Ta,newIndex:ta,newDraggableIndex:Fa,hideGhostForTarget:Bb,unhideGhostForTarget:Cb,cloneNowHidden:function(){Ga=!0},cloneNowShown:function(){Ga=!1},dispatchSortableEvent:function(h){ca({sortable:b,name:h,originalEvent:e})}},c))},v,ba,L,Y,Ja,eb,aa,Ga,Ma,ta,Ta,Fa,
fb,la,Pa=!1,gb=!1,bb=[],Ka,ya,ob,pb,Db,Eb,$a,Qa,Ya,Xa=!1,hb=!1,cb,pa,qb=[],mb=!1,db=[],ib="undefined"!==typeof document,Fb=Ua||va?"cssFloat":"float",Jb=ib&&!Kb&&!Za&&"draggable"in document.createElement("div"),Gb=function(){if(ib){if(va)return!1;var a=document.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}}(),yb=function(a,b){var c=C(a),e=parseInt(c.width)-parseInt(c.paddingLeft)-parseInt(c.paddingRight)-parseInt(c.borderLeftWidth)-parseInt(c.borderRightWidth),
h=k(a,0,b);a=k(a,1,b);var l=h&&C(h);b=a&&C(a);var m=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+N(h).width,w=b&&parseInt(b.marginLeft)+parseInt(b.marginRight)+N(a).width;return"flex"===c.display?"column"===c.flexDirection||"column-reverse"===c.flexDirection?"vertical":"horizontal":"grid"===c.display?1>=c.gridTemplateColumns.split(" ").length?"vertical":"horizontal":h&&l["float"]&&"none"!==l["float"]?(c="left"===l["float"]?"left":"right",!a||"both"!==b.clear&&b.clear!==c?"horizontal":"vertical"):
h&&("block"===l.display||"flex"===l.display||"table"===l.display||"grid"===l.display||m>=e&&"none"===c[Fb]||a&&"none"===c[Fb]&&m+w>e)?"vertical":"horizontal"},Mb=function(a,b,c){var e=c?a.left:a.top,h=c?a.right:a.bottom;a=c?a.width:a.height;var l=c?b.left:b.top,m=c?b.right:b.bottom;b=c?b.width:b.height;return e===l||h===m||e+a/2===l+b/2},Nb=function(a,b){var c;bb.some(function(e){var h=e[ua].options.emptyInsertThreshold;if(h&&!t(e)){var l=N(e),m=b>=l.top-h&&b<=l.bottom+h;if(a>=l.left-h&&a<=l.right+
h&&m)return c=e}});return c},zb=function(a){function b(h,l){return function(m,w,B,F){var I=m.options.group.name&&w.options.group.name&&m.options.group.name===w.options.group.name;if(null==h&&(l||I))return!0;if(null==h||!1===h)return!1;if(l&&"clone"===h)return h;if("function"===typeof h)return b(h(m,w,B,F),l)(m,w,B,F);m=(l?m:w).options.group.name;return!0===h||"string"===typeof h&&h===m||h.join&&-1<h.indexOf(m)}}var c={},e=a.group;e&&"object"==D(e)||(e={name:e});c.name=e.name;c.checkPull=b(e.pull,
!0);c.checkPut=b(e.put);c.revertClone=e.revertClone;a.group=c},Bb=function(){!Gb&&L&&C(L,"display","none")},Cb=function(){!Gb&&L&&C(L,"display","")};ib&&document.addEventListener("click",function(a){if(gb)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),gb=!1},!0);var La=function(a){if(v){a=a.touches?a.touches[0]:a;var b=Nb(a.clientX,a.clientY);if(b){var c={},e;for(e in a)a.hasOwnProperty(e)&&(c[e]=a[e]);c.target=c.rootEl=b;
c.preventDefault=void 0;c.stopPropagation=void 0;b[ua]._onDragOver(c)}}},Ob=function(a){v&&v.parentNode[ua]._isOutsideThisEl(a.target)};p.prototype={constructor:p,_isOutsideThisEl:function(a){this.el.contains(a)||a===this.el||(Qa=null)},_getDirection:function(a,b){return"function"===typeof this.options.direction?this.options.direction.call(this,a,b,v):this.options.direction},_onTapStart:function(a){if(a.cancelable){var b=this,c=this.el,e=this.options,h=e.preventOnFilter,l=a.type,m=a.touches&&a.touches[0]||
a.pointerType&&"touch"===a.pointerType&&a,w=(m||a).target,B=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||w,F=e.filter;V(c);if(!(v||/mousedown|pointerdown/.test(l)&&0!==a.button||e.disabled||B.isContentEditable||!this.nativeDraggable&&Wa&&w&&"SELECT"===w.tagName.toUpperCase()||(w=K(w,e.draggable,c,!1),w&&w.animated||eb===w))){Ma=z(w);Ta=z(w,e.draggable);if("function"===typeof F){if(F.call(this,a,w,this)){ca({sortable:b,rootEl:B,name:"filter",targetEl:w,toEl:c,fromEl:c});
sa("filter",b,{evt:a});h&&a.cancelable&&a.preventDefault();return}}else if(F&&(F=F.split(",").some(function(I){if(I=K(B,I.trim(),c,!1))return ca({sortable:b,rootEl:I,name:"filter",targetEl:w,fromEl:c,toEl:c}),sa("filter",b,{evt:a}),!0}))){h&&a.cancelable&&a.preventDefault();return}e.handle&&!K(B,e.handle,c,!1)||this._prepareDragStart(a,m,w)}}},_prepareDragStart:function(a,b,c){var e=this,h=e.el,l=e.options,m=h.ownerDocument;if(c&&!v&&c.parentNode===h){var w=N(c);Y=h;v=c;ba=v.parentNode;Ja=v.nextSibling;
eb=c;fb=l.group;p.dragged=v;Ka={target:v,clientX:(b||a).clientX,clientY:(b||a).clientY};Db=Ka.clientX-w.left;Eb=Ka.clientY-w.top;this._lastX=(b||a).clientX;this._lastY=(b||a).clientY;v.style["will-change"]="all";c=function(){sa("delayEnded",e,{evt:a});p.eventCanceled?e._onDrop():(e._disableDelayedDragEvents(),!Ab&&e.nativeDraggable&&(v.draggable=!0),e._triggerDragStart(a,b),ca({sortable:e,name:"choose",originalEvent:a}),y(v,l.chosenClass,!0))};l.ignore.split(",").forEach(function(B){na(v,B.trim(),
f)});E(m,"dragover",La);E(m,"mousemove",La);E(m,"touchmove",La);E(m,"mouseup",e._onDrop);E(m,"touchend",e._onDrop);E(m,"touchcancel",e._onDrop);Ab&&this.nativeDraggable&&(this.options.touchStartThreshold=4,v.draggable=!0);sa("delayStart",this,{evt:a});!l.delay||l.delayOnTouchOnly&&!b||this.nativeDraggable&&(Ua||va)?c():p.eventCanceled?this._onDrop():(E(m,"mouseup",e._disableDelayedDrag),E(m,"touchend",e._disableDelayedDrag),E(m,"touchcancel",e._disableDelayedDrag),E(m,"mousemove",e._delayedDragTouchMoveHandler),
E(m,"touchmove",e._delayedDragTouchMoveHandler),l.supportPointer&&E(m,"pointermove",e._delayedDragTouchMoveHandler),e._dragStartTimer=setTimeout(c,l.delay))}},_delayedDragTouchMoveHandler:function(a){a=a.touches?a.touches[0]:a;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){v&&f(v);clearTimeout(this._dragStartTimer);
this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;n(a,"mouseup",this._disableDelayedDrag);n(a,"touchend",this._disableDelayedDrag);n(a,"touchcancel",this._disableDelayedDrag);n(a,"mousemove",this._delayedDragTouchMoveHandler);n(a,"touchmove",this._delayedDragTouchMoveHandler);n(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,b){b=b||"touch"==a.pointerType&&a;!this.nativeDraggable||b?this.options.supportPointer?E(document,
"pointermove",this._onTouchMove):b?E(document,"touchmove",this._onTouchMove):E(document,"mousemove",this._onTouchMove):(E(v,"dragend",this),E(Y,"dragstart",this._onDragStart));try{document.selection?Z(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(c){}},_dragStarted:function(a,b){Pa=!1;if(Y&&v){sa("dragStarted",this,{evt:b});this.nativeDraggable&&E(document,"dragover",Ob);var c=this.options;!a&&y(v,c.dragClass,!1);y(v,c.ghostClass,!0);p.active=this;a&&this._appendGhost();
ca({sortable:this,name:"start",originalEvent:b})}else this._nulling()},_emulateDragOver:function(){if(ya){this._lastX=ya.clientX;this._lastY=ya.clientY;Bb();for(var a=document.elementFromPoint(ya.clientX,ya.clientY),b=a;a&&a.shadowRoot;){a=a.shadowRoot.elementFromPoint(ya.clientX,ya.clientY);if(a===b)break;b=a}v.parentNode[ua]._isOutsideThisEl(a);if(b){do{if(b[ua]){var c=void 0;if((c=b[ua]._onDragOver({clientX:ya.clientX,clientY:ya.clientY,target:a,rootEl:b}))&&!this.options.dragoverBubble)break}a=
b}while(b=b.parentNode)}Cb()}},_onTouchMove:function(a){if(Ka){var b=this.options,c=b.fallbackTolerance,e=b.fallbackOffset;b=a.touches?a.touches[0]:a;var h=L&&da(L,!0),l=L&&h&&h.a,m=L&&h&&h.d,w=Za&&pa&&A(pa);l=(b.clientX-Ka.clientX+e.x)/(l||1)+(w?w[0]-qb[0]:0)/(l||1);e=(b.clientY-Ka.clientY+e.y)/(m||1)+(w?w[1]-qb[1]:0)/(m||1);if(!p.active&&!Pa){if(c&&Math.max(Math.abs(b.clientX-this._lastX),Math.abs(b.clientY-this._lastY))<c)return;this._onDragStart(a,!0)}L&&(h?(h.e+=l-(ob||0),h.f+=e-(pb||0)):h={a:1,
b:0,c:0,d:1,e:l,f:e},c="matrix(".concat(h.a,",").concat(h.b,",").concat(h.c,",").concat(h.d,",").concat(h.e,",").concat(h.f,")"),C(L,"webkitTransform",c),C(L,"mozTransform",c),C(L,"msTransform",c),C(L,"transform",c),ob=l,pb=e,ya=b);a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!L){var a=this.options.fallbackOnBody?document.body:Y,b=N(v,!0,Za,!0,a),c=this.options;if(Za){for(pa=a;"static"===C(pa,"position")&&"none"===C(pa,"transform")&&pa!==document;)pa=pa.parentNode;pa!==document.body&&
pa!==document.documentElement?(pa===document&&(pa=ha()),b.top+=pa.scrollTop,b.left+=pa.scrollLeft):pa=ha();qb=A(pa)}L=v.cloneNode(!0);y(L,c.ghostClass,!1);y(L,c.fallbackClass,!0);y(L,c.dragClass,!0);C(L,"transition","");C(L,"transform","");C(L,"box-sizing","border-box");C(L,"margin",0);C(L,"top",b.top);C(L,"left",b.left);C(L,"width",b.width);C(L,"height",b.height);C(L,"opacity","0.8");C(L,"position",Za?"absolute":"fixed");C(L,"zIndex","100000");C(L,"pointerEvents","none");p.ghost=L;a.appendChild(L);
C(L,"transform-origin",Db/parseInt(L.style.width)*100+"% "+Eb/parseInt(L.style.height)*100+"%")}},_onDragStart:function(a,b){var c=this,e=a.dataTransfer,h=c.options;sa("dragStart",this,{evt:a});p.eventCanceled?this._onDrop():(sa("setupClone",this),p.eventCanceled||(aa=Ea(v),aa.draggable=!1,aa.style["will-change"]="",this._hideClone(),y(aa,this.options.chosenClass,!1),p.clone=aa),c.cloneId=Z(function(){sa("clone",c);p.eventCanceled||(c.options.removeCloneOnHide||Y.insertBefore(aa,v),c._hideClone(),
ca({sortable:c,name:"clone"}))}),!b&&y(v,h.dragClass,!0),b?(gb=!0,c._loopId=setInterval(c._emulateDragOver,50)):(n(document,"mouseup",c._onDrop),n(document,"touchend",c._onDrop),n(document,"touchcancel",c._onDrop),e&&(e.effectAllowed="move",h.setData&&h.setData.call(c,e,v)),E(document,"drop",c),C(v,"transform","translateZ(0)")),Pa=!0,c._dragStartId=Z(c._dragStarted.bind(c,b,a)),E(document,"selectstart",c),$a=!0,Wa&&C(document.body,"user-select","none"))},_onDragOver:function(a){function b(Ha,jb){sa(Ha,
X,r({evt:a,isOwner:ja,axis:xa?"vertical":"horizontal",revert:B,dragRect:Aa,targetRect:w,canSort:ea,fromSortable:oa,target:m,completed:e,onMove:function(Hb,Pb){return d(Y,l,v,Aa,Hb,N(Hb),a,Pb)},changed:h},jb))}function c(){b("dragOverAnimationCapture");X.captureAnimationState();X!==oa&&oa.captureAnimationState()}function e(Ha){b("dragOverCompleted",{insertion:Ha});Ha&&(ja?O._hideClone():O._showClone(X),X!==oa&&(y(v,la?la.options.ghostClass:O.options.ghostClass,!1),y(v,F.ghostClass,!0)),la!==X&&X!==
p.active?la=X:X===p.active&&la&&(la=null),oa===X&&(X._ignoreWhileAnimating=m),X.animateAll(function(){b("dragOverAnimationComplete");X._ignoreWhileAnimating=null}),X!==oa&&(oa.animateAll(),oa._ignoreWhileAnimating=null));if(m===v&&!v.animated||m===l&&!m.animated)Qa=null;F.dragoverBubble||a.rootEl||m===document||(v.parentNode[ua]._isOutsideThisEl(a.target),!Ha&&La(a));!F.dragoverBubble&&a.stopPropagation&&a.stopPropagation();return wa=!0}function h(){ta=z(v);Fa=z(v,F.draggable);ca({sortable:X,name:"change",
toEl:l,newIndex:ta,newDraggableIndex:Fa,originalEvent:a})}var l=this.el,m=a.target,w,B,F=this.options,I=F.group,O=p.active,ja=fb===I,ea=F.sort,oa=la||O,X=this,wa=!1;if(!mb){void 0!==a.preventDefault&&a.cancelable&&a.preventDefault();m=K(m,F.draggable,l,!0);b("dragOver");if(p.eventCanceled)return wa;if(v.contains(a.target)||m.animated&&m.animatingX&&m.animatingY||X._ignoreWhileAnimating===m)return e(!1);gb=!1;if(O&&!F.disabled&&(ja?ea||(B=ba!==Y):la===this||(this.lastPutMode=fb.checkPull(this,O,v,
a))&&I.checkPut(this,O,v,a))){var xa="vertical"===this._getDirection(a,m);var Aa=N(v);b("dragOverValid");if(p.eventCanceled)return wa;if(B)return ba=Y,c(),this._hideClone(),b("revert"),p.eventCanceled||(Ja?Y.insertBefore(v,Ja):Y.appendChild(v)),e(!0);I=t(l,F.draggable);if(!I||x(a,xa,this)&&!I.animated){if(I===v)return e(!1);I&&l===a.target&&(m=I);m&&(w=N(m));if(!1!==d(Y,l,v,Aa,m,w,a,!!m))return c(),l.appendChild(v),ba=l,h(),e(!0)}else if(I&&q(a,xa,this)){var Ba=k(l,0,F,!0);if(Ba===v)return e(!1);
m=Ba;w=N(m);if(!1!==d(Y,l,v,Aa,m,w,a,!1))return c(),l.insertBefore(v,Ba),ba=l,h(),e(!0)}else if(m.parentNode===l){w=N(m);var W=0;W=v.parentNode!==l;var ra=!Mb(v.animated&&v.toRect||Aa,m.animated&&m.toRect||w,xa);I=xa?"top":"left";var Da=G(m,"top","top")||G(v,"top","top"),kb=Da?Da.scrollTop:void 0;Qa!==m&&(Ba=w[I],Xa=!1,hb=!ra&&F.invertSwap||W);W=J(a,m,w,xa,ra?1:F.swapThreshold,null==F.invertedSwapThreshold?F.swapThreshold:F.invertedSwapThreshold,hb,Qa===m);if(0!==W){ra=z(v);do{ra-=W;var Ca=ba.children[ra]}while(Ca&&
("none"===C(Ca,"display")||Ca===L))}if(0===W||Ca===m)return e(!1);Qa=m;Ya=W;Ca=m.nextElementSibling;ra=!1;ra=1===W;W=d(Y,l,v,Aa,m,w,a,ra);if(!1!==W){if(1===W||-1===W)ra=1===W;mb=!0;setTimeout(g,30);c();ra&&!Ca?l.appendChild(v):m.parentNode.insertBefore(v,ra?Ca:m);Da&&ka(Da,0,kb-Da.scrollTop);ba=v.parentNode;void 0===Ba||hb||(cb=Math.abs(Ba-N(m)[I]));h();return e(!0)}}if(l.contains(v))return e(!1)}return!1}},_ignoreWhileAnimating:null,_offMoveEvents:function(){n(document,"mousemove",this._onTouchMove);
n(document,"touchmove",this._onTouchMove);n(document,"pointermove",this._onTouchMove);n(document,"dragover",La);n(document,"mousemove",La);n(document,"touchmove",La)},_offUpEvents:function(){var a=this.el.ownerDocument;n(a,"mouseup",this._onDrop);n(a,"touchend",this._onDrop);n(a,"pointerup",this._onDrop);n(a,"touchcancel",this._onDrop);n(document,"selectstart",this)},_onDrop:function(a){var b=this.el,c=this.options;ta=z(v);Fa=z(v,c.draggable);sa("drop",this,{evt:a});ba=v&&v.parentNode;ta=z(v);Fa=
z(v,c.draggable);if(!p.eventCanceled&&(Xa=hb=Pa=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),clearTimeout(this.cloneId),clearTimeout(this._dragStartId),this.nativeDraggable&&(n(document,"drop",this),n(b,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Wa&&C(document.body,"user-select",""),C(v,"transform",""),a&&($a&&(a.cancelable&&a.preventDefault(),!c.dropBubble&&a.stopPropagation()),L&&L.parentNode&&L.parentNode.removeChild(L),(Y===ba||la&&"clone"!==
la.lastPutMode)&&aa&&aa.parentNode&&aa.parentNode.removeChild(aa),v&&(this.nativeDraggable&&n(v,"dragend",this),f(v),v.style["will-change"]="",$a&&!Pa&&y(v,la?la.options.ghostClass:this.options.ghostClass,!1),y(v,this.options.chosenClass,!1),ca({sortable:this,name:"unchoose",toEl:ba,newIndex:null,newDraggableIndex:null,originalEvent:a}),Y!==ba?(0<=ta&&(ca({rootEl:ba,name:"add",toEl:ba,fromEl:Y,originalEvent:a}),ca({sortable:this,name:"remove",toEl:ba,originalEvent:a}),ca({rootEl:ba,name:"sort",toEl:ba,
fromEl:Y,originalEvent:a}),ca({sortable:this,name:"sort",toEl:ba,originalEvent:a})),la&&la.save()):ta!==Ma&&0<=ta&&(ca({sortable:this,name:"update",toEl:ba,originalEvent:a}),ca({sortable:this,name:"sort",toEl:ba,originalEvent:a})),p.active)))){if(null==ta||-1===ta)ta=Ma,Fa=Ta;ca({sortable:this,name:"end",toEl:ba,originalEvent:a});this.save()}this._nulling()},_nulling:function(){sa("nulling",this);Y=v=ba=L=Ja=aa=eb=Ga=Ka=ya=$a=ta=Fa=Ma=Ta=Qa=Ya=la=fb=p.dragged=p.ghost=p.clone=p.active=null;db.forEach(function(a){a.checked=
!0});db.length=ob=pb=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);break;case "dragenter":case "dragover":v&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a=[],b,c=this.el.children,e=0,h=c.length,l=this.options;e<h;e++)b=c[e],K(b,l.draggable,this.el,!1)&&a.push(b.getAttribute(l.dataIdAttr)||P(b));return a},sort:function(a,b){var c=
{},e=this.el;this.toArray().forEach(function(h,l){l=e.children[l];K(l,this.options.draggable,e,!1)&&(c[h]=l)},this);b&&this.captureAnimationState();a.forEach(function(h){c[h]&&(e.removeChild(c[h]),e.appendChild(c[h]))});b&&this.animateAll()},save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,b){return K(a,b||this.options.draggable,this.el,!1)},option:function(a,b){var c=this.options;if(void 0===b)return c[a];var e=Va.modifyOption(this,a,b);c[a]="undefined"!==typeof e?
e:b;"group"===a&&zb(c)},destroy:function(){sa("destroy",this);var a=this.el;a[ua]=null;n(a,"mousedown",this._onTapStart);n(a,"touchstart",this._onTapStart);n(a,"pointerdown",this._onTapStart);this.nativeDraggable&&(n(a,"dragover",this),n(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(b){b.removeAttribute("draggable")});this._onDrop();this._disableDelayedDragEvents();bb.splice(bb.indexOf(this.el),1);this.el=a=null},_hideClone:function(){Ga||(sa("hideClone",
this),p.eventCanceled||(C(aa,"display","none"),this.options.removeCloneOnHide&&aa.parentNode&&aa.parentNode.removeChild(aa),Ga=!0))},_showClone:function(a){"clone"!==a.lastPutMode?this._hideClone():Ga&&(sa("showClone",this),p.eventCanceled||(v.parentNode!=Y||this.options.group.revertClone?Ja?Y.insertBefore(aa,Ja):Y.appendChild(aa):Y.insertBefore(aa,v),this.options.group.revertClone&&this.animate(v,aa),C(aa,"display",""),Ga=!1))}};ib&&E(document,"touchmove",function(a){(p.active||Pa)&&a.cancelable&&
a.preventDefault()});p.utils={on:E,off:n,css:C,find:na,is:function(a,b){return!!K(a,b,a,!1)},extend:function(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},throttle:U,closest:K,toggleClass:y,clone:Ea,index:z,nextTick:Z,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:yb,getChild:k};p.get=function(a){return a[ua]};p.mount=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];b[0].constructor===Array&&(b=b[0]);b.forEach(function(e){if(!e.prototype||
!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(p.utils=r(r({},p.utils),e.utils));Va.mount(e)})};p.create=function(a,b){return new p(a,b)};p.version="1.14.0";var fa=[],ab,rb,sb=!1,tb,ub,lb,Ra,vb=U(function(a,b,c,e){if(b.scroll){var h=(a.touches?a.touches[0]:a).clientX,l=(a.touches?a.touches[0]:a).clientY,m=b.scrollSensitivity,w=b.scrollSpeed,B=ha(),F=!1;if(rb!==c){rb=c;ma();ab=b.scroll;var I=b.scrollFn;!0===ab&&(ab=
Q(c,!0))}c=0;var O=ab;do{var ja=O,ea=N(ja),oa=ea.top,X=ea.bottom,wa=ea.left,xa=ea.right,Aa=ea.width;ea=ea.height;var Ba=void 0,W=void 0,ra=ja.scrollWidth,Da=ja.scrollHeight;W=C(ja);var kb=ja.scrollLeft,Ca=ja.scrollTop;ja===B?(Ba=Aa<ra&&("auto"===W.overflowX||"scroll"===W.overflowX||"visible"===W.overflowX),W=ea<Da&&("auto"===W.overflowY||"scroll"===W.overflowY||"visible"===W.overflowY)):(Ba=Aa<ra&&("auto"===W.overflowX||"scroll"===W.overflowX),W=ea<Da&&("auto"===W.overflowY||"scroll"===W.overflowY));
wa=Ba&&(Math.abs(xa-h)<=m&&kb+Aa<ra)-(Math.abs(wa-h)<=m&&!!kb);oa=W&&(Math.abs(X-l)<=m&&Ca+ea<Da)-(Math.abs(oa-l)<=m&&!!Ca);if(!fa[c])for(X=0;X<=c;X++)fa[X]||(fa[X]={});if(fa[c].vx!=wa||fa[c].vy!=oa||fa[c].el!==ja)if(fa[c].el=ja,fa[c].vx=wa,fa[c].vy=oa,clearInterval(fa[c].pid),0!=wa||0!=oa)F=!0,fa[c].pid=setInterval(function(){e&&0===this.layer&&p.active._onTouchMove(lb);var Ha=fa[this.layer].vy?fa[this.layer].vy*w:0,jb=fa[this.layer].vx?fa[this.layer].vx*w:0;"function"===typeof I&&"continue"!==I.call(p.dragged.parentNode[ua],
jb,Ha,a,lb,fa[this.layer].el)||ka(fa[this.layer].el,jb,Ha)}.bind({layer:c}),24);c++}while(b.bubbleScroll&&O!==B&&(O=Q(O,!1)));sb=F}},30),Ib=function(a){var b=a.originalEvent,c=a.putSortable,e=a.dragEl,h=a.activeSortable,l=a.dispatchSortableEvent,m=a.hideGhostForTarget;a=a.unhideGhostForTarget;b&&(h=c||h,m(),b=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:b,b=document.elementFromPoint(b.clientX,b.clientY),a(),h&&!h.el.contains(b)&&(l("spill"),this.onSpill({dragEl:e,putSortable:c})))};
za.prototype={startIndex:null,dragStart:function(a){this.startIndex=a.oldDraggableIndex},onSpill:function(a){var b=a.dragEl;a=a.putSortable;this.sortable.captureAnimationState();a&&a.captureAnimationState();var c=k(this.sortable.el,this.startIndex,this.options);c?this.sortable.el.insertBefore(b,c):this.sortable.el.appendChild(b);this.sortable.animateAll();a&&a.animateAll()},drop:Ib};T(za,{pluginName:"revertOnSpill"});Na.prototype={onSpill:function(a){var b=a.dragEl;a=a.putSortable||this.sortable;
a.captureAnimationState();b.parentNode&&b.parentNode.removeChild(b);a.animateAll()},drop:Ib};T(Na,{pluginName:"removeOnSpill"});p.mount(new function(){function a(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var b in this)"_"===b.charAt(0)&&"function"===typeof this[b]&&(this[b]=this[b].bind(this))}a.prototype={dragStarted:function(b){b=b.originalEvent;this.sortable.nativeDraggable?E(document,"dragover",this._handleAutoScroll):this.options.supportPointer?
E(document,"pointermove",this._handleFallbackAutoScroll):b.touches?E(document,"touchmove",this._handleFallbackAutoScroll):E(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(b){b=b.originalEvent;this.options.dragOverBubble||b.rootEl||this._handleAutoScroll(b)},drop:function(){this.sortable.nativeDraggable?n(document,"dragover",this._handleAutoScroll):(n(document,"pointermove",this._handleFallbackAutoScroll),n(document,"touchmove",this._handleFallbackAutoScroll),n(document,
"mousemove",this._handleFallbackAutoScroll));clearInterval(Ra);ma();clearTimeout(Sa);Sa=void 0},nulling:function(){lb=rb=ab=sb=Ra=tb=ub=null;fa.length=0},_handleFallbackAutoScroll:function(b){this._handleAutoScroll(b,!0)},_handleAutoScroll:function(b,c){var e=this,h=(b.touches?b.touches[0]:b).clientX,l=(b.touches?b.touches[0]:b).clientY,m=document.elementFromPoint(h,l);lb=b;if(c||this.options.forceAutoScrollFallback||Ua||va||Wa){vb(b,this.options,m,c);var w=Q(m,!0);!sb||Ra&&h===tb&&l===ub||(Ra&&clearInterval(Ra),
Ra=setInterval(function(){var B=Q(document.elementFromPoint(h,l),!0);B!==w&&(w=B,ma());vb(b,e.options,B,c)},10),tb=h,ub=l)}else this.options.bubbleScroll&&Q(m,!0)!==ha()?vb(b,this.options,Q(m,!1),!1):ma()}};return T(a,{pluginName:"scroll",initializeByDefault:!0})});p.mount(Na,za);R.Sortable=p})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/events ../core/Handles ../core/has ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./LayerList/LayerListViewModel ./LayerList/ListItem ./LayerList/support/layerListUtils ./support/decorators/accessibleHandler ./support/decorators/messageBundle ../core/Logger ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../chunks/sortable.esm".split(" "),function(R,
H,r,D,T,qa,M,E,n,S,K,y,C,da,na,ha,N,G,k,t,z,A,ia,Q){function u(Ia){const {actionsOpen:ca,children:p}=Ia;ca&&(Ia.actionsOpen=!1);p.forEach(d=>u(d))}const U=D.ofType(ha),ka={exclusive:"exclusive",inherited:"inherited",independent:"independent"},Ea={statusIndicators:!0};D=function(Ia){function ca(d,f){var g=Ia.call(this,d,f)||this;g._handles=new qa;g._sortableNodes=new Map;g._sortableMap=new Map;g._focusSortUid=null;g._newUI=M("esri-layerlist-new-ui");g._tooltipReferenceMap=new Map;g.visibleItems=null;
g.iconClass="esri-icon-layers";g.label=void 0;g.listItemCanGiveFunction=null;g.listItemCanReceiveFunction=null;g.listItemCreatedFunction=null;g.messages=null;g.messagesCommon=null;g.multipleSelectionEnabled=!1;g.operationalItems=null;g.selectionEnabled=!1;g.selectedItems=new U;g.view=null;g.viewModel=new na;g.visibleElements={...Ea};g._onSortableSort=({to:q,from:x,item:J,newIndex:P})=>{x&&q&&(x===q?g._sortLayers(g._sortableMap.get(x.dataset.group)):g._moveLayerFromChildList({to:q,from:x,item:J,newIndex:P}))};
g._sortableCanSort=(q,x)=>!(!q.el.dataset.group||!x.el.dataset.group);g._sortableCanPull=(q,x,J)=>{const {listItemCanGiveFunction:P}=H._assertThisInitialized(g);J={selected:J["data-item"],from:x.el["data-item"],to:q.el["data-item"]};return g._sortableCanSort(q,x)&&"function"===typeof P?P.call(null,J):!0};g._sortableCanPut=(q,x,J)=>{const {listItemCanReceiveFunction:P}=H._assertThisInitialized(g);J={selected:J["data-item"],from:x.el["data-item"],to:q.el["data-item"]};return g._sortableCanSort(q,x)&&
"function"===typeof P?P.call(null,J):!0};g._onSortableEnd=({oldIndex:q,from:x,to:J,item:P})=>{x!==J&&x.insertBefore(P,x.children[q])};return g}H._inheritsLoose(ca,Ia);var p=ca.prototype;p.initialize=function(){const d=this.operationalItems;this._setVisibleItems(d);this.own(E.on(this,"operationalItems","change",()=>this._itemsChanged(d)),E.init(this,"selectionEnabled",()=>this._toggleAllSorting()))};p.loadDependencies=function(){return Promise.all([new Promise((d,f)=>R(["../chunks/calcite-tooltip-manager"],
d,f)),new Promise((d,f)=>R(["../chunks/calcite-tooltip"],d,f))])};p.destroy=function(){this._destroySortables();this._tooltipReferenceMap.clear();this._handles.destroy();this._handles=null};p.castVisibleElements=function(d){return{...Ea,...d}};p.triggerAction=function(d,f){this.viewModel.triggerAction(d,f)};p.render=function(){var d;const {visibleItems:f,_newUI:g}=this;var q=null==(d=this.viewModel)?void 0:d.state;d={["esri-layer-list--new-ui"]:g,["esri-hidden"]:"loading"===q,["esri-disabled"]:"disabled"===
q};q=this.renderItemTooltips();const x=this.renderItems();return A.tsx("div",{class:this.classes("esri-layer-list esri-widget esri-widget--panel",d)},null!=f&&f.length?[q,q.length?A.tsx("calcite-tooltip-manager",null,x):x]:this.renderNoItems())};p.renderItemTooltip=function(d){const {_tooltipReferenceMap:f,messages:g}=this;return d?A.tsx("calcite-tooltip",{label:g.layerIncompatible,referenceElement:f.get(d.uid)},g.layerIncompatibleTooltip):null};p.renderItemTooltipNodes=function(d){const {incompatible:f,
children:g}=d;return[f?this.renderItemTooltip(d):null,...f?[]:null==g?void 0:g.toArray().map(q=>this.renderItemTooltipNodes(q))]};p.renderItemTooltips=function(){return this.visibleItems.toArray().map(d=>this.renderItemTooltipNodes(d))};p.renderNoItems=function(){return A.tsx("div",{class:"esri-layer-list__no-items"},this.messages.noItemsToDisplay)};p.renderItems=function(){const {visibleItems:d,selectionEnabled:f,messages:g}=this;return A.tsx("ul",{"aria-label":g.widgetLabel,role:f?"listbox":void 0,
afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,"data-group":"root",bind:this,class:this.classes("esri-layer-list__list","esri-layer-list__list--root","esri-layer-list__list--independent")},null==d?void 0:d.map(q=>this.renderItem(q,null)).toArray())};p.renderActionsMenuIcon=function(d,f){const {messagesCommon:g}=this;return A.tsx("div",{key:"actions-menu-toggle","data-item":d,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,
class:this.classes("esri-layer-list__item-actions-menu-item",{["esri-layer-list__item-actions-menu-item--active"]:d.actionsOpen}),tabindex:"0",role:"button","aria-controls":f,"aria-label":g.options,title:g.options},A.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"}))};p.renderActionsMenu=function(d,f,g,q){var {panel:x}=d;x=x&&x.visible?this.renderPanelButton(x):null;const J=(f=1===g&&this._getSingleActionButton(f))?this.renderAction({item:d,action:f,singleAction:!0}):null;return(d=
!f&&g?this.renderActionsMenuIcon(d,q):null)||x||f?A.tsx("div",{key:"actions-menu",class:"esri-layer-list__item-actions-menu"},x,J,d):null};p.renderChildList=function(d,f){var g;const {selectionEnabled:q}=this,{visibilityMode:x,children:J}=d,P=this._hasChildren(d),V=!P&&q&&"group"===(null==(g=d.layer)?void 0:g.type),{exclusive:Z,inherited:ma}=ka;g={["esri-layer-list__list--exclusive"]:x===Z,["esri-layer-list__list--inherited"]:x===ma,["esri-layer-list__list--independent"]:x!==ma&&x!==Z};return P||
V?A.tsx("ul",{bind:this,key:"list-items",id:f,"data-group":d.uid,"data-item":d,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,class:this.classes("esri-layer-list__list",g),"aria-expanded":d.open?"true":"false",role:q?"listbox":x===Z?"radiogroup":"group",hidden:d.open||V?null:!0},null==J?void 0:J.map(za=>this.renderItem(za,d)).toArray()):null};p.renderChildrenToggle=function(d,f){var {messagesCommon:g}=this;const q=this._hasChildren(d),x={["esri-layer-list__child-toggle--open"]:d.open};
g=d.open?g.collapse:g.expand;return q?A.tsx("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":d,key:"toggle-children",class:this.classes("esri-layer-list__child-toggle",x),tabindex:"0",role:"button","aria-controls":f,"aria-label":g,title:g},A.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed","esri-icon-right-triangle-arrow")}),A.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--opened",
"esri-icon-down-arrow")}),A.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed-rtl","esri-icon-left-triangle-arrow")})):null};p.renderItemMessage=function(d){return d.error?A.tsx("div",{key:"esri-layer-list__error",class:"esri-layer-list__item-message",role:"alert"},A.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),this.messages.layerError):d.incompatible?A.tsx("div",{key:"esri-layer-list__incompatible",class:"esri-layer-list__item-message",
role:"alert"},A.tsx("span",{bind:this,tabIndex:0,"aria-hidden":"true",class:"esri-icon-notice-triangle",afterCreate:f=>this._setTooltipReference(f,d)}),this.messages.layerIncompatible):null};p.renderItemContent=function(d,f,g){var {id:q}=this,x=`${q}_${d.uid}`;q=`${x}_actions`;x=`${x}__list`;const {panel:J}=d,P=this._filterActions(d.actionsSections),V=this._countActions(P);return[A.tsx("div",{key:"list-item-container",class:"esri-layer-list__item-container"},this.renderChildrenToggle(d,x),this.renderLabel(d,
f,g),this.renderActionsMenu(d,P,V,q)),this.renderItemMessage(d),V?this.renderActionsSections(d,P,q):null,J&&J.open?J.render():null,this.renderChildList(d,x)]};p.renderItem=function(d,f){const {_newUI:g,id:q,selectionEnabled:x,selectedItems:J,visibleElements:P}=this,V=`${`${q}_${d.uid}`}__title`;var Z=this._hasMessage(d);Z={["esri-layer-list__item--has-children"]:this._hasChildren(d),["esri-layer-list__item--has-message"]:!!Z,["esri-layer-list__item--updating"]:d.updating&&!f&&P.statusIndicators,["esri-layer-list__item--invisible"]:g&&
!d.visible,["esri-layer-list__item--invisible-at-scale"]:!d.visibleAtCurrentScale,["esri-layer-list__item--selectable"]:x};if(x){var ma;const za={["data-layer-uid"]:null==(ma=d.layer)?void 0:ma.uid,["data-sort-filter"]:(!d.sortable).toString()};return A.tsx("li",{key:`item-with-selection-${d.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes("esri-layer-list__item",Z),"aria-labelledby":V,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,
"data-item":d,"data-group":f?f.uid:"root",tabIndex:0,"aria-selected":N.findSelectedItem(d,J)?"true":"false",role:"option",...za},this.renderItemContent(d,f,V))}return A.tsx("li",{key:`item-no-selection-${d.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes("esri-layer-list__item",Z),"aria-labelledby":V},this.renderItemContent(d,f,V))};p.renderItemTitle=function(d,f){const {messages:g}=this,q=d.title||g.untitledLayer;d=d.visibleAtCurrentScale?q:`${q} (${g.layerInvisibleAtScale})`;
return A.tsx("span",{key:"layer-title-container",id:f,title:d,"aria-label":d,class:"esri-layer-list__item-title"},q)};p.renderItemToggleIcon=function(d,f){const {_newUI:g}=this,{exclusive:q}=ka;f=f&&f.visibilityMode;return A.tsx("span",{key:"item-toggle-icon",class:this.classes({["esri-layer-list__item-toggle-icon"]:g,["esri-layer-list__item-toggle-icon"]:g&&f!==q,["esri-layer-list__item-radio-icon"]:g&&f===q,["esri-icon-radio-checked"]:f===q&&d.visible,["esri-icon-radio-unchecked"]:f===q&&!d.visible,
["esri-icon-visible"]:f!==q&&d.visible,["esri-icon-non-visible"]:f!==q&&!d.visible}),"aria-hidden":"true"})};p.renderItemToggle=function(d,f,g){const {selectionEnabled:q,messages:x}=this,{exclusive:J}=ka,P=f&&f.visibilityMode;return q?A.tsx("span",{key:"item-toggle-selection-enabled",class:"esri-layer-list__item-toggle",bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":d,"data-parent-visibility":P,tabIndex:0,title:d.visible?x.hideLayer:x.showLayer,"aria-checked":d.visible?
"true":"false",role:P===J?"radio":"switch","aria-labelledby":g},this.renderItemToggleIcon(d,f)):A.tsx("span",{key:"item-toggle",class:"esri-layer-list__item-toggle"},this.renderItemToggleIcon(d,f))};p.renderLabel=function(d,f,g){const {selectionEnabled:q,_newUI:x,messages:J}=this,{inherited:P,exclusive:V}=ka,Z=null==f?void 0:f.visibilityMode;var ma=Z===V?"radio":"switch";f=[this.renderItemToggle(d,f,g),this.renderItemTitle(d,g)];x&&f.reverse();ma=q?A.tsx("div",{key:`item-label-no-selection-${d.uid}`,
class:"esri-layer-list__item-label"},f):A.tsx("div",{key:`item-label-with-selection-${d.uid}`,class:"esri-layer-list__item-label",bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":d,"data-parent-visibility":Z,tabIndex:0,"aria-checked":d.visible?"true":"false",title:d.visible?J.hideLayer:J.showLayer,role:ma,"aria-labelledby":g},f);return Z===P||d.error?A.tsx("div",{key:`item-label-container-${d.uid}`,class:"esri-layer-list__item-label"},this.renderItemTitle(d,g)):
ma};p.renderPanelButton=function(d){const {className:f,open:g,title:q,image:x}=d,J=x||f?f:"esri-icon-default-action",P=this._getIconImageStyles(d),V={["esri-layer-list__item-actions-menu-item--active"]:g},Z={["esri-layer-list__item-action-image"]:!!P["background-image"]};J&&(Z[J]=!!J);return A.tsx("div",{key:`panel-${d.uid}`,bind:this,"data-panel":d,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes("esri-layer-list__item-actions-menu-item",V),role:"button",tabindex:"0",title:q,
"aria-label":q},A.tsx("span",{class:this.classes(Z),styles:P}))};p.renderActionsSections=function(d,f,g){f=f.toArray().map((q,x)=>A.tsx("ul",{key:`${d}-action-section-${x}`,class:"esri-layer-list__item-actions-list"},this.renderActionSection(d,q)));return A.tsx("div",{role:"group","aria-expanded":d.actionsOpen?"true":"false",key:"actions-section",id:g,class:"esri-layer-list__item-actions",hidden:d.actionsOpen?null:!0},f)};p.renderActionSection=function(d,f){return(f&&f.toArray()).map(g=>this.renderAction({item:d,
action:g}))};p.renderActionIcon=function(d){const {active:f,className:g}=d,q=this._getIconImageStyles(d);d="button"!==d.type||d.image||g?g:"esri-icon-default-action";const x={["esri-layer-list__item-action-image"]:!f&&!!q["background-image"],["esri-icon-loading-indicator"]:f,["esri-rotating"]:f};d&&!f&&(x[d]=!0);return A.tsx("span",{key:"action-icon","aria-hidden":"true",class:this.classes("esri-layer-list__item-action-icon",x),styles:q})};p.renderActionTitle=function(d,f){return f?null:A.tsx("span",
{key:"action-title",class:"esri-layer-list__item-action-title"},d)};p.renderAction=function(d){const {item:f,action:g,singleAction:q}=d,{active:x,disabled:J,title:P}=g;d={["esri-layer-list__item-actions-menu-item"]:q&&"button"===g.type,["esri-layer-list__item-action"]:x||!q&&"toggle"!==g.type,["esri-layer-list__action-toggle"]:!x&&"toggle"===g.type,["esri-layer-list__action-toggle--on"]:!x&&"toggle"===g.type&&g.value,["esri-disabled-element"]:J};const V=[this.renderActionIcon(g),this.renderActionTitle(P,
q)];return q?A.tsx("div",{bind:this,"data-item":f,"data-action":g,role:"button",key:`single-action-${g.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:d,tabindex:"0",title:P,"aria-label":P},V):A.tsx("li",{bind:this,"data-item":f,"data-action":g,key:`action-${g.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:d,tabindex:"0",role:"button",title:P,"aria-label":P},V)};p._setTooltipReference=function(d,f){this._tooltipReferenceMap.set(f.uid,d);this.scheduleRender()};
p._hasMessage=function(d){return!!d.error||d.incompatible};p._hasChildren=function(d){return!!d.children.length&&!this._hasMessage(d)};p._sortNodeRemoved=function(d){const {_sortableMap:f}=this;d=d.dataset.group;const g=f.get(d);g&&g.destroy();f.delete(d)};p._destroySortables=function(){const {_sortableMap:d,_sortableNodes:f}=this;d.forEach(g=>g&&g.destroy());d.clear();f.clear()};p._moveLayerFromChildList=function({to:d,from:f,item:g,newIndex:q}){this.viewModel.moveListItem(g["data-item"],f["data-item"],
d["data-item"],q)};p._sortLayers=function(d){if(d){var f=d.el["data-item"];d=d.toArray();if(f)N.sortChildLayersToIds(f,d);else{var g,q;N.sortLayersToIds(null==(g=this.view)?void 0:null==(q=g.map)?void 0:q.layers,d)}}};p._toggleSorting=function(d,f){const {_sortableMap:g,selectionEnabled:q}=this,x=g.get(f);var J=d["data-item"];J=("root"===f?!0:J.childrenSortable&&N.canSortSublayers(J))&&q;x?x.option("disabled",!J):J&&(d=Q.Sortable.create(d,{dataIdAttr:"data-layer-uid",group:{name:f,pull:this._sortableCanPull,
put:this._sortableCanPut},filter:'[data-sort-filter\x3d"true"]',fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!J,chosenClass:"esri-layer-list--chosen"}),g.set(f,d))};p._toggleAllSorting=function(){this._sortableNodes.forEach((d,f)=>this._toggleSorting(d,f))};p._sortNodeCreated=function(d){const f=d.dataset.group;f&&(this._sortableNodes.set(f,d),this._toggleSorting(d,f))};p._setVisibleItems=function(d){this._tooltipReferenceMap.clear();this.visibleItems=null==d?
void 0:d.filter(f=>this.errorsVisible||!f.error)};p._getSingleActionButton=function(d){return d.reduce(f=>f).filter(f=>f&&"button"===f.type).getItemAt(0)};p._focusListItem=function(d){var f;const {_focusSortUid:g}=this;d&&g&&(null==(f=d["data-item"].layer)?void 0:f.uid)===g&&(d.focus(),this._focusSortUid=null)};p._watchActionSectionChanges=function(d,f){const g="action-section"+f;this._handles.add(d.on("change",this.scheduleRender.bind(this)),g);d.forEach(q=>this._renderOnActionChanges(q,f))};p._renderOnActionChanges=
function(d,f){f="actions"+f;"toggle"===d.type?this._handles.add([E.init(d,"className image id title visible value".split(" "),()=>this.scheduleRender())],f):"slider"===d.type?this._handles.add([E.init(d,"className id title visible value displayValueEnabled max min step".split(" "),()=>this.scheduleRender())],f):this._handles.add([E.init(d,["className","image","id","title","visible"],()=>this.scheduleRender())],f)};p._renderOnItemChanges=function(d){const f=d.uid,g="items"+f;this._handles.add([E.init(d,
"actionsOpen visible open updating title visibleAtCurrentScale error visibilityMode panel panel.title panel.content panel.className sortable childrenSortable".split(" "),()=>this.scheduleRender()),d.actionsSections.on("change",()=>this.scheduleRender()),d.children.on("change",()=>this.scheduleRender())],g);d.children.forEach(q=>this._renderOnItemChanges(q));d.actionsSections.forEach(q=>this._watchActionSectionChanges(q,f))};p._itemsChanged=function(d){this._handles.removeAll();d.forEach(f=>this._renderOnItemChanges(f));
this._setVisibleItems(d);this.scheduleRender()};p._filterActions=function(d){return d.map(f=>f.filter(g=>g.visible))};p._countActions=function(d){return d.reduce((f,g)=>f+g.length,0)};p._getIconImageStyles=function(d){d="esri.widgets.LayerList.ListItemPanel"===d.declaredClass||"esri.support.Action.ActionButton"===d.declaredClass||"esri.support.Action.ActionToggle"===d.declaredClass?d.image:null;return{"background-image":d?`url("${d}")`:null}};p._selectionKeydown=function(d){var f=T.eventKey(d);if(-1===
["ArrowDown","ArrowUp"].indexOf(f))this._toggleSelection(d);else{d.stopPropagation();var g=d.currentTarget,q=g["data-item"],{_sortableMap:x,selectedItems:J}=this;if(g=x.get(g.dataset.group)){var P=N.findSelectedItem(q,J),V=g.toArray();d=V.indexOf(d.target.dataset.layerUid);if(-1!==d){if("ArrowDown"===f){const va=d+1;if(va>=V.length)return;if(P){var Z;V.splice(va,0,V.splice(d,1)[0]);g.sort(V);this._sortLayers(g);this._focusSortUid=null==(Z=q.layer)?void 0:Z.uid}else{var ma;this._focusSortUid=null==
(ma=q.layer)?void 0:ma.uid;this.scheduleRender()}}if("ArrowUp"===f&&(f=d-1,!(-1>=f)))if(P){var za;V.splice(f,0,V.splice(d,1)[0]);g.sort(V);this._sortLayers(g);this._focusSortUid=null==(za=q.layer)?void 0:za.uid}else{var Na;this._focusSortUid=null==(Na=q.layer)?void 0:Na.uid;this.scheduleRender()}}}}};p._toggleActionsOpen=function(d){const f=d.currentTarget["data-item"];var {actionsOpen:g}=f;(g=!g)&&this.operationalItems.forEach(q=>u(q));f.actionsOpen=g;d.stopPropagation()};p._triggerPanel=function(d){const f=
d.currentTarget["data-panel"];f&&(f.open=!f.open);d.stopPropagation()};p._triggerAction=function(d){var f=d.currentTarget;const g=f["data-action"];f=f["data-item"];"toggle"===g.type&&(g.value=!g.value);this.triggerAction(g,f);d.stopPropagation()};p._toggleVisibility=function(d){var f=d.currentTarget;const g=f.getAttribute("data-parent-visibility");f=f["data-item"];g===ka.exclusive&&f.visible||(f.visible=!f.visible);d.stopPropagation()};p._toggleChildrenClick=function(d){const f=d.currentTarget["data-item"];
f.open=!f.open;d.stopPropagation()};p._toggleSelection=function(d){d.stopPropagation();const {multipleSelectionEnabled:f,selectedItems:g}=this;d=d.currentTarget["data-item"];const q=N.findSelectedItem(d,g),{length:x}=g,J=q&&1===x;f?q?null==g.remove?void 0:g.remove(q):g.add(d):x&&!J?(g.removeAll(),g.add(d)):q?null==g.remove?void 0:g.remove(q):g.add(d)};return ca}(da);r.__decorate([y.property()],D.prototype,"visibleItems",void 0);r.__decorate([y.property()],D.prototype,"iconClass",void 0);r.__decorate([y.property()],
D.prototype,"errorsVisible",void 0);r.__decorate([y.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],D.prototype,"label",void 0);r.__decorate([y.property()],D.prototype,"listItemCanGiveFunction",void 0);r.__decorate([y.property()],D.prototype,"listItemCanReceiveFunction",void 0);r.__decorate([n.aliasOf("viewModel.listItemCreatedFunction")],D.prototype,"listItemCreatedFunction",void 0);r.__decorate([y.property(),k.messageBundle("esri/widgets/LayerList/t9n/LayerList")],D.prototype,
"messages",void 0);r.__decorate([y.property(),k.messageBundle("esri/t9n/common")],D.prototype,"messagesCommon",void 0);r.__decorate([y.property()],D.prototype,"multipleSelectionEnabled",void 0);r.__decorate([n.aliasOf("viewModel.operationalItems")],D.prototype,"operationalItems",void 0);r.__decorate([y.property()],D.prototype,"selectionEnabled",void 0);r.__decorate([y.property()],D.prototype,"selectedItems",void 0);r.__decorate([n.aliasOf("viewModel.view")],D.prototype,"view",void 0);r.__decorate([z.vmEvent("trigger-action"),
y.property({type:na})],D.prototype,"viewModel",void 0);r.__decorate([y.property()],D.prototype,"visibleElements",void 0);r.__decorate([K.cast("visibleElements")],D.prototype,"castVisibleElements",null);r.__decorate([n.aliasOf("viewModel.triggerAction")],D.prototype,"triggerAction",null);r.__decorate([G.accessibleHandler()],D.prototype,"_toggleActionsOpen",null);r.__decorate([G.accessibleHandler()],D.prototype,"_triggerPanel",null);r.__decorate([G.accessibleHandler()],D.prototype,"_triggerAction",
null);r.__decorate([G.accessibleHandler()],D.prototype,"_toggleVisibility",null);r.__decorate([G.accessibleHandler()],D.prototype,"_toggleChildrenClick",null);r.__decorate([G.accessibleHandler()],D.prototype,"_toggleSelection",null);return D=r.__decorate([C.subclass("esri.widgets.LayerList")],D)});