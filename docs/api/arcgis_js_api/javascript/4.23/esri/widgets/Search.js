// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/Search/SearchResultRenderer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./SearchViewModel ../support/decorators/accessibleHandler ../support/decorators/messageBundle ../../core/Logger ../support/jsxFactory ../support/widgetUtils".split(" "),function(n,a,
b,l,f,B,q,A,x,e,g,d,p,t){l=function(N){function I(u,K){u=N.call(this,u,K)||this;u.messages=null;u.showMoreResultsOpen=!1;u.viewModel=null;return u}n._inheritsLoose(I,N);var H=I.prototype;H.render=function(){return p.tsx("div",{class:"esri-search-result-renderer esri-widget"},p.tsx("div",{key:"esri-search-renderer__container",class:this.classes("esri-search-result-renderer__more-results",{["esri-search-result-renderer__more-results--show-more-results"]:this.showMoreResultsOpen})},this.renderSearchResultName(),
this.renderMoreResults()))};H.renderMoreResults=function(){return p.tsx("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())};H.renderSearchResultName=function(){var u;const K=null==(u=this.viewModel)?void 0:u.selectedResult;return p.tsx("div",{key:"esri-search-renderer__result-name",class:"esri-search-result-renderer__more-results-item"},K&&K.name||"")};H.renderMoreResultsLists=function(){var u,K=null==(u=this.viewModel)?void 0:u.results;
({resultCount:u}=this.viewModel);if(2>u)return null;K=K.map(z=>this.renderMoreResultsList(z));return p.tsx("div",{key:"esri-search-renderer__more-results-container",class:"esri-search-result-renderer__more-results-list"},K)};H.renderMoreResultsButton=function(){const {messages:u}=this,{resultCount:K}=this.viewModel;return 2>K?null:p.tsx("div",{key:"esri-search-renderer__more-results-button",class:"esri-search-result-renderer__more-results-item"},p.tsx("a",{class:"esri-widget__anchor",href:"#",bind:this,
onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?u.hideMoreResults:u.showMoreResults))};H.renderMoreResultsHeader=function(u,K){return p.tsx("div",{key:`esri-search-result-renderer__header-${K}`,class:"esri-search-result-renderer__more-results-list-header"},u)};H.renderMoreResultsList=function(u){var K,z;const {results:L}=u;var W=L.length;const Z=!!W,ba=null==(K=this.viewModel)?void 0:K.selectedResult;K=1===W&&L[0]===ba;W=this._getSourceName(u.source,
u.sourceIndex);W=1<(null==(z=this.viewModel)?void 0:z.results.length)&&!K?this.renderMoreResultsHeader(W,u.sourceIndex):null;z=Z&&L.map((aa,F)=>this.renderMoreResultsListItem(aa,F));z=Z&&!K?p.tsx("ul",{key:`esri-search-result-renderer__list-${u.sourceIndex}`},z):null;return Z?p.tsx("div",{key:`esri-search-result-renderer__results-${u.sourceIndex}`},W,z):null};H.renderMoreResultsListItem=function(u,K){const z=this.get("viewModel.selectedResult");return u!==z?p.tsx("li",{key:`esri-search-result-renderer__list-item-${K}`},
p.tsx("a",{class:"esri-widget__anchor",href:"#",tabindex:"0",bind:this,"data-result":u,onclick:this._selectResultClick,onkeydown:this._selectResultClick},u.name)):null};H._showMoreResultsClick=function(u){u.preventDefault();this.showMoreResultsOpen=!this.showMoreResultsOpen;(u=this.get("viewModel.view.popup"))&&u.reposition()};H._selectResultClick=function(u){u.preventDefault();u=u.currentTarget["data-result"];this.viewModel&&this.viewModel.select(u)};H._getSourceName=function(u,K){return K===x.ALL_INDEX?
this.messages.all:u.name};return I}(A);a.__decorate([b.property(),g.messageBundle("esri/widgets/Search/t9n/Search")],l.prototype,"messages",void 0);a.__decorate([b.property()],l.prototype,"showMoreResultsOpen",void 0);a.__decorate([b.property()],l.prototype,"viewModel",void 0);a.__decorate([e.accessibleHandler()],l.prototype,"_showMoreResultsClick",null);a.__decorate([e.accessibleHandler()],l.prototype,"_selectResultClick",null);return l=a.__decorate([q.subclass("esri.widgets.Search.SearchResultRenderer")],
l)})},"esri/widgets/Search/SearchViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../assets ../../config ../../Graphic ../../PopupTemplate ../../symbols ../../core/Accessor ../../core/Collection ../../core/deprecate ../../core/Error ../../core/Evented ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../geometry/SpatialReference ../../intl/locale ../../intl/messages ../../portal/Portal ../../views/support/layerViewUtils ./LayerSearchSource ./LocatorSearchSource ./SearchSource ./support/geometryUtils ./support/locatorUtils ../support/geolocationUtils ../support/GoTo ../../symbols/TextSymbol ../../symbols/PictureMarkerSymbol ../../symbols/SimpleLineSymbol ../../symbols/SimpleFillSymbol".split(" "),
function(n,a,b,l,f,B,q,A,x,e,g,d,p,t,N,I,H,u,K,z,L,W,Z,ba,aa,F,h,v,m,G,y,D,E,P,S,M,O,V,Y,T){function R(da,U){return da.hasOwnProperty(U)&&null!=da[U]&&""!==da[U]}const ea=N.getLogger("esri.widgets.Search.SearchViewModel"),ha=x.ofType({key:da=>da.layer?"layer":"locator",base:D,typeMap:{layer:G,locator:y}}),ia=aa.WGS84,fa=/<(?:.|\s)*?>/g;q=function(da){function U(c){c=da.call(this,c)||this;c._handles=new p;c._gotoController=null;c._searching=null;c.autoNavigate=!0;c.autoSelect=!0;c.defaultPopupTemplate=
null;c.defaultSources=new ha;c.defaultSymbols={point:new V({url:b.getAssetUrl(t("trident")?"esri/images/search/search-symbol-32.png":"esri/images/search/search-symbol-32.svg"),size:24,width:24,height:24}),polyline:new Y({color:[130,130,130,1],width:2}),polygon:new T({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})};c.includeDefaultSources=!0;c.maxInputLength=128;c.maxResults=6;c.maxSuggestions=6;c.messages=null;c.minSuggestCharacters=3;c.popupEnabled=!0;c.popupTemplate=null;c.portal=
v.getDefault();c.resultCount=null;c.resultGraphicEnabled=!0;c.resultGraphic=null;c.results=null;c.selectedSuggestion=null;c.searchAllEnabled=!0;c.selectedResult=null;c.sources=new ha;c.suggestionDelay=350;c.suggestionCount=null;c.suggestions=null;c.suggestionsEnabled=!0;c.view=null;return c}n._inheritsLoose(U,da);var J=U.prototype;J.initialize=function(){var c=this;const k=function(){var r=n._asyncToGenerator(function*(){const w=yield h.fetchMessageBundle("esri/widgets/Search/t9n/Search");c.messages=
w;c.defaultPopupTemplate=new B({title:w.searchResult,content:"{Match_addr}"})});return function(){return r.apply(this,arguments)}}();k();this._handles.add([K.init(this,["includeDefaultSources","view","portal"],()=>this._update()),F.onLocaleChange(k)])};J.destroy=function(){this._abortGoTo();this.clearGraphics();this._handles.destroy();this._handles=null};J.clear=function(){this.searchTerm=""};J.clearGraphics=function(){this._removeHighlight();this._closePopup();this.view&&this.view.graphics.remove(this.resultGraphic);
this._set("resultGraphic",null)};J.search=function(c,k){this.emit("search-start");this.clearGraphics();const r=this._createSuggestionForSearch(c);return this._searching=c=this.when().then(()=>this._getResultsFromSources(r,k).then(w=>{var C;if(null!=(C=I.unwrap(null==k?void 0:k.signal))&&C.aborted)return null;const Q={activeSourceIndex:this.activeSourceIndex,searchTerm:r.text,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(Q,w,r);w=this._getFirstResult(Q.results);C=(r.location&&
w?w.name:r.text).replace(fa,"");this._set("searchTerm",C);(r.key&&"number"===typeof r.sourceIndex||r.location)&&this._set("selectedSuggestion",r);this._set("results",Q.results);this._set("resultCount",Q.results.reduce((X,ca)=>X+ca.results.length,0));this.emit("search-complete",Q);return this._selectFirstResult(w).then(()=>Q)})).then(w=>{this._clearSearching();return w},w=>{this._clearSearching();throw w;})};J.searchNearby=function(c){if(!this.locationEnabled){var k=new g("searchNearby:geolocation-unsupported",
"Geolocation API is unsupported.",{geolocation:navigator.geolocation});ea.error(k);return Promise.reject(k)}this._searching=k=S.getCurrentPosition().then(r=>S.positionToPoint({position:r,view:this.view},c)).then(r=>this.search(r,c));k.catch(()=>{}).then(()=>this._clearSearching());return k};J.select=function(c){this.clearGraphics();if(!c){var k=new g("select:missing-parameter","Cannot select without a searchResult.",{searchResult:c});ea.error(k);return Promise.reject(k)}const {view:r}=this,w=R(c,
"sourceIndex")?c.sourceIndex:this._getSourceIndexOfResult(c),C=this.allSources.getItemAt(w);if(!C)return k=new g("select:missing-source","Cannot select without a source.",{source:C}),ea.error(k),Promise.reject(k);k=C instanceof G?this._getLayerSourcePopupTemplate(C):C.popupTemplate;const Q=C.resultSymbol||this._getDefaultSymbol(c),X=R(C,"resultGraphicEnabled")?C.resultGraphicEnabled:this.resultGraphicEnabled,ca=R(C,"autoNavigate")?C.autoNavigate:this.autoNavigate,ja=R(C,"popupEnabled")?C.popupEnabled:
this.popupEnabled,sa=ja?k||this.popupTemplate||this.defaultPopupTemplate:null,{feature:ka}=c;if(!ka)return k=new g("select:missing-feature","Cannot select without a feature.",{feature:ka}),ea.error(k),Promise.reject(k);const {attributes:ta,geometry:qa,layer:ua,sourceLayer:va}=ka,oa=E.getPointFromGeometry(qa);k={layerViewQuery:this._getLayerView(ka),elevationQuery:r&&I.isSome(oa)?E.getPointWithElevation(oa,r).catch(()=>oa):Promise.resolve(oa)};return H.eachAlways(k).then(la=>{const ma=la.layerViewQuery.value,
wa=la.elevationQuery.value;Q instanceof O&&(Q.text=c.name);la=r&&ca?c.target||c.extent:null;return(I.isSome(la)?this._goToSearchResult(la):Promise.resolve()).then(()=>{var pa;const na=ma?ka:new f({geometry:qa,symbol:Q,attributes:ta,layer:ua,sourceLayer:va,popupTemplate:sa}),ra=ja&&(null==(pa=this.view)?void 0:pa.popup);(pa=ra&&na.getEffectivePopupTemplate(ra.defaultPopupTemplateEnabled))&&r.popup.open({features:[na],location:wa});ma&&m.highlightsSupported(ma)&&!pa&&this._highlightFeature({graphic:na,
layerView:ma});!ma&&X&&r&&r.graphics.push(na);this._setResultFloor(c);this._set("selectedResult",c);this._set("resultGraphic",na);this.emit("select-result",{result:c,source:C,sourceIndex:w});return c})})};J.suggest=function(c,k,r){const w=c||this.searchTerm;this.emit("suggest-start",{searchTerm:w});return this._suggestTimer(k,r).then(()=>this._suggestImmediate(w,r).then(C=>{this._set("suggestions",C.results);this._set("suggestionCount",C.results.reduce((Q,X)=>Q+X.results.length,0));this.emit("suggest-complete",
C);return C}))};J.when=function(){var c=n._asyncToGenerator(function*(){yield u.whenOnce(()=>!this.updating)});return function(){return c.apply(this,arguments)}}();J._update=function(){var c=n._asyncToGenerator(function*(){const {portal:k,view:r}=this;if(this.includeDefaultSources){const w=this._updatingPromise=H.eachAlways([null==k?void 0:k.load(),null==r?void 0:r.when()]);if(this.destroyed)return;yield w;if(w!==this._updatingPromise)return}yield u.whenOnce(()=>this.messages);this.destroyed||this._updateDefaultSources();
this._updatingPromise=null});return function(){return c.apply(this,arguments)}}();J._clearSearching=function(){this._searching=null};J._convertHelperServices=function(){var c,k;const r=null==(c=this.portal)?void 0:null==(k=c.helperServices)?void 0:k.geocode;return r?r.map(w=>{if(!1!==w.placefinding){var C=l.apiKey&&P.isArcGISWorldGeocoder(w.url)?{url:P.meteredArcGISLocatorUrl}:null;w=y.fromJSON({...w,...C});C=w.url;(P.isArcGISWorldGeocoder(C)||P.isProxiedArcGISWorldGeocoder(C)||P.isMeteredArcGISWorldGeocoder(C))&&
w.set({singleLineFieldName:"SingleLine",outFields:w.outFields||["Addr_type","Match_addr","StAddr","City"],placeholder:w.placeholder||this.messages.placeholder,defaultZoomScale:"number"===typeof w.defaultZoomScale?w.defaultZoomScale:2500});if(w.singleLineFieldName)return w}}).filter(Boolean):[]};J._getLayerSources=function(c,k){var r;const w=null==(r=this.view)?void 0:r.map;return c.map(C=>{const Q=w.findLayerById(C.id);if(Q){C=this._getLayerJSON(C);var X=G.fromJSON(C);X.placeholder=k;this._getLayer(Q,
C).then(ca=>{X.layer=ca});return X}}).filter(Boolean).toArray()};J._getTableSources=function(c,k){var r;const w=null==(r=this.view)?void 0:r.map;return c.map(C=>{const Q=w.findTableById(C.id);if(Q){C=this._getLayerJSON(C);var X=G.fromJSON(C);X.placeholder=k;this._getLayer(Q,C).then(ca=>{X.layer=ca});return X}}).filter(Boolean).toArray()};J._convertApplicationProperties=function(){var c,k,r;const w=null==(c=this.view)?void 0:c.map;c=null==w?void 0:null==(k=w.applicationProperties)?void 0:null==(r=
k.viewing)?void 0:r.search;if(!c)return[];const {enabled:C,hintText:Q,layers:X,tables:ca}=c;if(!C)return[];k=this._getLayerSources(X,Q);r=this._getTableSources(ca,Q);return[...k,...r]};J._getSubLayer=function(c,k){return c.load().then(()=>{if(!c.allSublayers)return Promise.reject();const r=c.allSublayers.find(w=>w.id===k.subLayer);return r?r.createFeatureLayer():Promise.reject()})};J._getBuildingSubLayer=function(){var c=n._asyncToGenerator(function*(k,r){yield k.load();k=k.allSublayers.find(w=>w.id===
r.subLayer);if("building-component"!==(null==k?void 0:k.type))return Promise.reject();yield k.load();if(null==k.associatedLayer)return Promise.reject();yield k.associatedLayer.load();return k});return function(k,r){return c.apply(this,arguments)}}();J._getLayer=function(c,k){return"feature"===c.type||"scene"===c.type||"csv"===c.type||"geojson"===c.type||"ogc-feature"===c.type?Promise.resolve(c):"map-image"===c.type?this._getSubLayer(c,k).catch(()=>{const r=new g("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",
{layer:c});ea.error(r);return null}):"building-scene"===c.type?this._getBuildingSubLayer(c,k):Promise.resolve(null)};J._getLayerJSON=function(c){return"function"===typeof c.toJSON?c.toJSON():c};J._updateDefaultSources=function(){const {defaultSources:c,includeDefaultSources:k}=this;c.removeAll();k&&c.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])};J._abortGoTo=function(){this._gotoController&&this._gotoController.abort();this._gotoController=null};J._clear=function(){this._abortGoTo();
this._set("resultCount",null);this._set("results",null);this._set("suggestions",null);this._set("suggestionCount",null);this._set("selectedResult",null);this._set("selectedSuggestion",null);this.emit("search-clear")};J._closePopup=function(){var c;const k=null==(c=this.view)?void 0:c.popup;({resultGraphic:c}=this);if(k&&c){var {selectedFeature:r}=k;r&&r===c&&k.close()}};J._suggestTimer=function(c,k){return H.after(null!=c?c:this.suggestionDelay,null,k&&k.signal)};J._createLocationForSearch=function(c){return c instanceof
f?E.getPointFromGeometry(c.geometry):c instanceof ba?c:Array.isArray(c)&&2===c.length?new ba({longitude:c[0],latitude:c[1]}):null};J._createSuggestionForSearch=function(c){if(c&&R(c,"key")&&R(c,"text")&&R(c,"sourceIndex"))return c;const k=this._createLocationForSearch(c),r="string"===typeof c?c:this.searchTerm,{selectedSuggestion:w,selectedResult:C}=this,Q=(c=!c&&w&&C)&&w.location;return c&&w.key===C.key&&w.sourceIndex===C.sourceIndex||Q?w:{location:I.unwrap(k),text:k?"":r,sourceIndex:null,key:null}};
J._getFirstResult=function(c){let k=null;c&&c.some(r=>{({results:r}=r);r=r[0];const w=!!r;w&&(k=r);return w});return k};J._selectFirstResult=function(c){return this.autoSelect&&c?this.select(c):Promise.resolve(null)};J._suggestImmediate=function(c,k){return this.when().then(()=>this._getSuggestionsFromSources(c,k)).then(r=>{var w;if(null!=(w=I.unwrap(null==k?void 0:k.signal))&&w.aborted)return null;w={activeSourceIndex:this.activeSourceIndex,searchTerm:c,numResults:0,numErrors:0,errors:[],results:[]};
this._formatResponse(w,r);return w})};J._formatSourceResponse=function(c,k,r){const w=k&&k.value||[];k=k&&k.error;const C=this.allSources.getItemAt(r);k?(c.errors.push({sourceIndex:r,source:C,error:k}),ea.error(k),c.numErrors++):(c.results.push({sourceIndex:r,source:C,results:w}),c.numResults+=w.length)};J._formatResponse=function(c,k,r){if(k)if(-1===c.activeSourceIndex){const w=r&&R(r,"sourceIndex")&&-1!==r.sourceIndex?r.sourceIndex:void 0;k.forEach((C,Q)=>{this._formatSourceResponse(c,C,void 0!==
w?w:Q)})}else this._formatSourceResponse(c,k[0],c.activeSourceIndex)};J._getResultsFromSources=function(c,k){var {allSources:r}=this;const w=!c.location&&R(c,"sourceIndex")?c.sourceIndex:this.activeSourceIndex,C=[];if(!r.length)return r=new g("search:no-sources-defined","At least one source is required.",{allSources:r}),ea.error(r),Promise.reject(r);-1===w?r.forEach((Q,X)=>{C.push(this._getResultsFromSource(c,X,k))}):C.push(this._getResultsFromSource(c,w,k));return H.eachAlways(C)};J._getSuggestionsFromSources=
function(c,k){const {allSources:r,activeSourceIndex:w}=this,C=[];if(!r.length){const Q=new g("suggest:no-sources-defined","At least one source is required.",{allSources:r});ea.error(Q);return Promise.reject(Q)}-1===w?r.forEach((Q,X)=>{C.push(this._getSuggestionsFromSource(c,X,k))}):C.push(this._getSuggestionsFromSource(c,w,k));return H.eachAlways(C)};J._getResultsFromSource=function(c,k,r){var w;const C=this.allSources.getItemAt(k),{location:Q=null}=c,X=(null==(w=this.view)?void 0:w.spatialReference)||
ia;w=R(C,"maxResults")?C.maxResults:this.maxResults;const ca=C instanceof G&&R(C,"exactMatch")?C.exactMatch:!1,{view:ja}=this;return C.getResults({view:ja,sourceIndex:k,location:Q,suggestResult:c,spatialReference:X,exactMatch:ca,maxResults:w},r)};J._getSuggestionsFromSource=function(c,k,r){const w=this.allSources.getItemAt(k);var C=R(w,"suggestionsEnabled")?w.suggestionsEnabled:this.suggestionsEnabled,Q=c.length,X=R(w,"minSuggestCharacters")?w.minSuggestCharacters:this.minSuggestCharacters;if(C&&
c.trim()&&Q>=X){var ca;C=(null==(ca=this.view)?void 0:ca.spatialReference)||ia;ca=R(w,"maxSuggestions")?w.maxSuggestions:this.maxSuggestions;({view:Q}=this);X=w instanceof G&&R(w,"exactMatch")?w.exactMatch:!1;return w.getSuggestions({view:Q,sourceIndex:k,suggestTerm:c,spatialReference:C,maxSuggestions:ca,exactMatch:X},r)}return Promise.resolve(null)};J._getLayerSourcePopupTemplate=function(c){const {layer:k}=c;if(k)return R(c,"popupTemplate")?c.popupTemplate:k.popupTemplate};J._getSourceIndexOfResult=
function(c){let k=null;this.results.some(r=>r.results.some(w=>w===c?(k=r.sourceIndex,!0):!1));return k};J._goToSearchResult=function(){var c=n._asyncToGenerator(function*(k){const r=!!k;this._abortGoTo();const w=new AbortController;this._gotoController=w;yield this.callGoTo({target:{target:k},options:{animate:r,signal:w.signal}});this._gotoController=null});return function(k){return c.apply(this,arguments)}}();J._getDefaultSymbol=function(c){var k;const {defaultSymbols:r}=this;c=null==(k=c.feature)?
void 0:k.geometry;if(!I.isSome(c))return null;if((k=this._get("defaultSymbol"))&&("point"===c.type||"multipoint"===c.type))return k;switch(c.type){case "point":case "multipoint":return r.point;case "polyline":return r.polyline;case "extent":case "polygon":return r.polygon;default:return null}};J._removeHighlight=function(){this._handles.remove("highlight")};J._getLayerView=function(){var c=n._asyncToGenerator(function*(k){const {view:r}=this;if(!k||!r||"building-component"===k.layer.type||"subtype-sublayer"===
k.layer.type)return Promise.resolve(null);({layer:k}=k);yield r.when();return r.whenLayerView(k)});return function(k){return c.apply(this,arguments)}}();J._highlightFeature=function(c){const {graphic:k,layerView:r}=c,{attributes:w,layer:C}=k;({objectIdField:c}=C);c=r.highlight(w&&w[c]||k);this._handles.add(c,"highlight")};J._setResultFloor=function(c){var k,r,w;const {view:C}=this,Q=null==(k=c.feature)?void 0:k.attributes;(c=null==(r=c.feature)?void 0:r.sourceLayer)&&"floorInfo"in c&&null!=c&&null!=
(w=c.floorInfo)&&w.floorField&&Q&&C.emit("select-result-floor",Q[c.floorInfo.floorField])};n._createClass(U,[{key:"activeSource",get:function(){return this.allSources.getItemAt(this.activeSourceIndex)||null}},{key:"activeSourceIndex",get:function(){return 1!==this.allSources.length&&this.searchAllEnabled?-1:0},set:function(c){void 0===c?this._clearOverride("activeSourceIndex"):this._override("activeSourceIndex",c)}},{key:"allPlaceholder",get:function(){var c;return null==(c=this.messages)?void 0:
c.allPlaceholder},set:function(c){c?this._override("allPlaceholder",c):this._clearOverride("allPlaceholder")}},{key:"allSources",get:function(){const {sources:c,defaultSources:k,includeDefaultSources:r}=this,w="function"===typeof r?r.call(null,{sources:c,defaultSources:k}):r?k.concat(c):c,C=this._get("allSources")||new ha;C.removeAll();C.addMany(w.filter(Boolean));return C}},{key:"defaultSymbol",get:function(){e.deprecatedProperty(ea,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"});
return this._get("defaultSymbol")},set:function(c){e.deprecatedProperty(ea,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"});this._set("defaultSymbol",c)}},{key:"locationEnabled",get:function(){return this._get("locationEnabled")||S.supported()},set:function(c){if(void 0===c)this._clearOverride("locationEnabled");else{var k=S.supported();if(c&&!k){const r=new g("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});ea.error(r)}this._override("locationEnabled",
c&&k)}}},{key:"placeholder",get:function(){const {allSources:c,activeSourceIndex:k,allPlaceholder:r}=this;if(-1===k)return r;const w=c.getItemAt(k);return w?w.placeholder:""}},{key:"searchTerm",get:function(){return this._get("searchTerm")||""},set:function(c){this._set("searchTerm",c||"");this.clearGraphics();this.selectedSuggestion&&this.selectedSuggestion.text!==c&&this._set("selectedSuggestion",null);""===c&&this._clear()}},{key:"state",get:function(){return this._searching?"searching":this.updating?
"loading":0===this.allSources.length?"disabled":"ready"}},{key:"updating",get:function(){return null!=this._updatingPromise}}]);return U}(M.GoToMixin(d.EventedMixin(A)));q.ALL_INDEX=-1;a.__decorate([z.property()],q.prototype,"_searching",void 0);a.__decorate([z.property()],q.prototype,"_updatingPromise",void 0);a.__decorate([z.property({readOnly:!0,value:null})],q.prototype,"activeSource",null);a.__decorate([z.property()],q.prototype,"activeSourceIndex",null);a.__decorate([z.property()],q.prototype,
"allPlaceholder",null);a.__decorate([z.property({readOnly:!0})],q.prototype,"allSources",null);a.__decorate([z.property()],q.prototype,"autoNavigate",void 0);a.__decorate([z.property()],q.prototype,"autoSelect",void 0);a.__decorate([z.property()],q.prototype,"defaultPopupTemplate",void 0);a.__decorate([z.property({readOnly:!0})],q.prototype,"defaultSources",void 0);a.__decorate([z.property()],q.prototype,"defaultSymbol",null);a.__decorate([z.property()],q.prototype,"defaultSymbols",void 0);a.__decorate([z.property()],
q.prototype,"includeDefaultSources",void 0);a.__decorate([z.property()],q.prototype,"locationEnabled",null);a.__decorate([z.property()],q.prototype,"maxInputLength",void 0);a.__decorate([z.property()],q.prototype,"maxResults",void 0);a.__decorate([z.property()],q.prototype,"maxSuggestions",void 0);a.__decorate([z.property()],q.prototype,"messages",void 0);a.__decorate([z.property()],q.prototype,"minSuggestCharacters",void 0);a.__decorate([z.property({readOnly:!0})],q.prototype,"placeholder",null);
a.__decorate([z.property()],q.prototype,"popupEnabled",void 0);a.__decorate([z.property({type:B})],q.prototype,"popupTemplate",void 0);a.__decorate([z.property({type:v})],q.prototype,"portal",void 0);a.__decorate([z.property()],q.prototype,"resultCount",void 0);a.__decorate([z.property()],q.prototype,"resultGraphicEnabled",void 0);a.__decorate([z.property({readOnly:!0})],q.prototype,"resultGraphic",void 0);a.__decorate([z.property({readOnly:!0})],q.prototype,"results",void 0);a.__decorate([z.property({readOnly:!0})],
q.prototype,"selectedSuggestion",void 0);a.__decorate([z.property()],q.prototype,"searchAllEnabled",void 0);a.__decorate([z.property({readOnly:!0})],q.prototype,"selectedResult",void 0);a.__decorate([z.property()],q.prototype,"searchTerm",null);a.__decorate([z.property({type:ha})],q.prototype,"sources",void 0);a.__decorate([z.property({readOnly:!0})],q.prototype,"state",null);a.__decorate([z.property()],q.prototype,"suggestionDelay",void 0);a.__decorate([z.property()],q.prototype,"suggestionCount",
void 0);a.__decorate([z.property({readOnly:!0})],q.prototype,"suggestions",void 0);a.__decorate([z.property()],q.prototype,"suggestionsEnabled",void 0);a.__decorate([z.property({readOnly:!0})],q.prototype,"updating",null);a.__decorate([z.property()],q.prototype,"view",void 0);a.__decorate([z.property()],q.prototype,"clear",null);return q=a.__decorate([Z.subclass("esri.widgets.Search.SearchViewModel")],q)})},"esri/views/support/layerViewUtils":function(){define(["exports","../../core/maybe"],function(n,
a){n.extractSafeScaleBounds=function(b){var l,f;const B=b.effectiveScaleRange;b=null!=(l=null==B?void 0:B.minScale)?l:0;l=null!=(f=null==B?void 0:B.maxScale)?f:0;return{minScale:b,maxScale:l}};n.highlightsSupported=function(b){return b&&"function"===typeof b.highlight};n.isScaleRangeActive=function(b,l){return 0<b||0<l};n.occludeesSupported=function(b){return b&&"function"===typeof b.maskOccludee};n.scaleBoundsPredicate=function(b,l,f){return a.isNone(b)||b>f&&(0===l||b<l)};Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/widgets/Search/LayerSearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchSource ./support/layerSearchUtils".split(" "),function(n,a,b,l,f,B,q,A){var x;f=x=function(e){function g(p){var t=e.call(this,p)||this;t.displayField=null;t.exactMatch=null;t.orderByFields=null;t.searchFields=
null;t.searchTemplate=null;t.suggestionTemplate=null;t.getResults=(N,I)=>A.getResults({source:n._assertThisInitialized(t),...N},I);t.getSuggestions=(N,I)=>A.getSuggestions({source:n._assertThisInitialized(t),...N},I);return t}n._inheritsLoose(g,e);var d=g.prototype;d.clone=function(){return new x({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?b.clone(this.outFields):
null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?b.clone(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})};
d._getFirstStringField=function(){var p,t;return null!=(p=null==(t=this.layer.fieldsIndex.fields.find(N=>"string"===N.type))?void 0:t.name)?p:""};d._getDisplayField=function(){return this.displayField||this.layer.displayField||this._getFirstStringField()};d._getSearchFieldsString=function(){const {layer:p,searchFields:t}=this;return p.loaded?`: ${(t||[this._getDisplayField()]).map(N=>{const I=p.getField(N);return I&&I.alias||N}).join(", ")}`:""};d._getLayerTitle=function(){var {layer:p}=this;if(p&&
({title:p}=p,p))return`${p}${this._getSearchFieldsString()}`};n._createClass(g,[{key:"layer",set:function(p){this._set("layer",p);p&&p.load().catch(()=>{})}},{key:"name",get:function(){return this._getLayerTitle()||""},set:function(p){void 0===p?this._clearOverride("name"):this._override("name",p)}}]);return g}(q);a.__decorate([l.property({json:{read:{source:"field.name"},write:{target:"field.name"}}})],f.prototype,"displayField",void 0);a.__decorate([l.property({json:{read:{source:"field.exactMatch"},
write:{target:"field.exactMatch"}}})],f.prototype,"exactMatch",void 0);a.__decorate([l.property({value:null})],f.prototype,"layer",null);a.__decorate([l.property()],f.prototype,"name",null);a.__decorate([l.property({type:[String],json:{write:!0}})],f.prototype,"orderByFields",void 0);a.__decorate([l.property()],f.prototype,"searchFields",void 0);a.__decorate([l.property()],f.prototype,"searchTemplate",void 0);a.__decorate([l.property()],f.prototype,"suggestionTemplate",void 0);return f=x=a.__decorate([B.subclass("esri.widgets.Search.LayerSearchSource")],
f)})},"esri/widgets/Search/SearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Identifiable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(n,a,b,l,f,B,q,A,x){b=function(e){function g(d){d=e.call(this,d)||this;d.autoNavigate=null;d.filter=null;d.getResults=null;d.getSuggestions=null;
d.maxResults=null;d.maxSuggestions=null;d.minSuggestCharacters=null;d.outFields=null;d.placeholder="";d.popupEnabled=null;d.popupTemplate=null;d.prefix="";d.resultGraphicEnabled=null;d.resultSymbol=null;d.suggestionsEnabled=null;d.suffix="";d.withinViewEnabled=!1;d.zoomScale=null;return d}n._inheritsLoose(g,e);return g}(b.IdentifiableMixin(l.JSONSupport));a.__decorate([f.property()],b.prototype,"autoNavigate",void 0);a.__decorate([f.property()],b.prototype,"filter",void 0);a.__decorate([f.property()],
b.prototype,"getResults",void 0);a.__decorate([f.property()],b.prototype,"getSuggestions",void 0);a.__decorate([f.property()],b.prototype,"maxResults",void 0);a.__decorate([f.property()],b.prototype,"maxSuggestions",void 0);a.__decorate([f.property()],b.prototype,"minSuggestCharacters",void 0);a.__decorate([f.property()],b.prototype,"outFields",void 0);a.__decorate([f.property()],b.prototype,"placeholder",void 0);a.__decorate([f.property()],b.prototype,"popupEnabled",void 0);a.__decorate([f.property()],
b.prototype,"popupTemplate",void 0);a.__decorate([f.property()],b.prototype,"prefix",void 0);a.__decorate([f.property()],b.prototype,"resultGraphicEnabled",void 0);a.__decorate([f.property()],b.prototype,"resultSymbol",void 0);a.__decorate([f.property()],b.prototype,"suggestionsEnabled",void 0);a.__decorate([f.property()],b.prototype,"suffix",void 0);a.__decorate([f.property()],b.prototype,"withinViewEnabled",void 0);a.__decorate([f.property()],b.prototype,"zoomScale",void 0);return b=a.__decorate([x.subclass("esri.widgets.Search.SearchSource")],
b)})},"esri/widgets/Search/support/layerSearchUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Error ../../../core/lang ../../../core/Logger ../../../core/maybe ../../../core/unitUtils ../../../geometry/Polygon ./geometryUtils ../../../intl/substitute ../../../intl/date".split(" "),function(n,a,b,l,f,B,q,A,x,e,g,d){function p(y,D){const {filter:E,withinViewEnabled:P}=y;y=D&&D.extent;return E&&E.geometry||(P&&y?y:void 0)}function t(y){return N.apply(this,
arguments)}function N(){N=a._asyncToGenerator(function*(y){y&&(yield y.load())});return N.apply(this,arguments)}function I(y){var D,E,P;return null!=(D=null==y?void 0:null==(E=y.capabilities)?void 0:null==(P=E.query)?void 0:P.supportsPagination)?D:!1}function H(y){var D,E,P,S;return null!=(D=null==y?void 0:null==(E=y.fieldsIndex)?void 0:null==(P=E.fields)?void 0:null==(S=P.find(M=>"string"===M.type))?void 0:S.name)?D:""}function u(y,D){return y&&D?D.every(E=>!!y.getField(E)):!1}function K(y,D,E){let P=
null;({codedValues:y}=y);y&&y.some(S=>{var M=S.name;M=E?M:M.toLowerCase();return(E?D:D.toLowerCase())===M?(P=S.code.toString(),!0):!1});return P}function z(y,D){return(D=D&&D.where)?`(${y}) AND (${D})`:y}function L({currentTerm:y,field:D,filter:E,exactMatch:P,url:S,type:M}){var O=D.type;D=D.name;if("string"===O||"date"===O||"global-id"===O){if(O=S=v.test(S))a:{for(O=0;O<y.length;O++)if(255<y.charCodeAt(O)){O=!0;break a}O=!1}O=O?"N":"";if(P&&"search"===M)return z(`${D} = ${O}'${y}'`,E);M=S?D:`UPPER(${D})`;
y=S?y:y.toUpperCase();return z(`${M} LIKE ${O}${P?`'${y}%'`:`'%${y}%'`}`,E)}return"oid"===O||"small-integer"===O||"integer"===O||"single"===O||"double"===O?(P=Number(y),isNaN(P)?null:z(`${D} = ${P}`,E)):z(`${D} = ${y}`,E)}function W({searchTerm:y,layer:D,searchFields:E,filter:P,exactMatch:S,type:M}){const {definitionExpression:O,url:V}=D;let Y="";y&&E&&E.forEach(T=>{var R=D.getField(T);T=((T="function"===typeof D.getFieldDomain&&D.getFieldDomain(T))&&"coded-value"===T.type?K(T,y,S):null)||y||null;
null!==T&&(R=L({currentTerm:T,field:R,filter:P,exactMatch:S,url:V,type:M}))&&(Y+=Y?` OR (${R})`:`(${R})`)});return O?`(${O}) AND (${Y})`:Y}function Z(y,D){let E=null;({codedValues:y}=y);y&&y.length&&y.some(P=>P.code===D?(E=P.name,!0):!1);return E}function ba(y,D){return y[Object.keys(y).find(E=>E.toLowerCase()===D.toLowerCase())]}function aa(y,D,E){const P=y.sourceLayer,{attributes:S}=y;y="function"===typeof P.getFieldDomain&&P.getFieldDomain(E);return D?g.substitute(D,S):E&&S?(D=P.getField(E),E=
ba(S,E),null==E?"":y&&"coded-value"===y.type?Z(y,E):"date"===(null==D?void 0:D.type)?d.formatDate(new Date(E)):"number"===typeof E?E.toString():"string"!==typeof E?"":E.trim()):""}function F(y,D,E,P){return y.features.map(S=>{var M=S.sourceLayer,{attributes:O}=S;({objectIdField:M}=M);O=O[M];return S={text:aa(S,D.suggestionTemplate,P),key:O,sourceIndex:E}})}function h(y,D,E,P,S,M,O){return y.features.map(V=>{{var Y=V.clone();var T=V.sourceLayer;T=(T=T&&T.objectIdField)&&V.attributes[T];const ea=aa(V,
E.searchTemplate,S);var R=e.createExtentFromGeometry(Y.geometry,D,M);R="number"===typeof O?e.scaleExtent(f.clone(R),D,O):R;V=V.clone();q.isSome(R)&&(V.geometry=x.fromExtent(R));Y={extent:R,target:V,feature:Y,key:T,name:ea,sourceIndex:P}}return Y})}const v=/https?:\/\/services.*\.arcgis\.com/i,m=/(?:\{([^}]+)\})/g,G=B.getLogger("esri.widgets.Search.support.layerSearchUtils");n.getResults=function(y,D){const {exactMatch:E=!1,location:P,maxResults:S,spatialReference:M,source:O,sourceIndex:V,suggestResult:Y,
view:T}=y,{layer:R,filter:ea,zoomScale:ha}=O,ia=T&&T.scale,fa=p(O,T),da=D&&D.signal;return t(R).then(()=>{const U=R.popupTemplate;return U?U.getRequiredFields(R.fieldsIndex):null}).then(U=>{var J,c,k;const {objectIdField:r,returnZ:w}=R,C=O.displayField||O.layer.displayField||H(O.layer);if(!R.getField(C))throw G.error("invalid-field: displayField is invalid."),new l("getResults():invalid-field","displayField is invalid.");U=U&&U.length?U:[C];var Q=(U=O.outFields||U)&&-1!==U.indexOf("*");-1!==U.indexOf(r)||
Q||U.push(r);null!=(J=R.floorInfo)&&J.floorField&&U.push(R.floorInfo.floorField);if(!Q&&!u(R,U))throw G.error("invalid-field: outField is invalid."),new l("getResults():invalid-field","outField is invalid.");J=R.createQuery();({orderByFields:Q}=O);Q&&(J.orderByFields=Q);M&&(J.outSpatialReference=M,Q=1/A.getMetersPerUnitForSR(M))&&(J.maxAllowableOffset=Q);Q="mesh"===R.geometryType||"multipatch"===R.geometryType;const X=(null==(c=R.capabilities)?void 0:null==(k=c.data)?void 0:k.supportsZ)&&!Q;J.returnZ=
X&&!1!==w;J.returnGeometry=!0;J.multipatchOption=Q?"xyFootprint":null;U&&(J.outFields=U);if(P)J.geometry=P;else if(Y.key)J.objectIds=[Y.key];else{c=O.searchFields||[C];if(!u(R,c))throw G.error("invalid-field: search field is invalid."),new l("getResults():invalid-field","search field is invalid.");I(R)&&(J.num=S);fa&&(J.geometry=fa);if(!Y.text.trim())return[];const {prefix:ca="",suffix:ja=""}=O;k=`${ca}${Y.text}${ja}`.replace(/'/g,"''");c=W({searchTerm:k,layer:R,searchFields:c,filter:ea,exactMatch:E,
type:"search"});if(!c)return[];J.where=c}return R.queryFeatures(J,{signal:da}).then(ca=>h(ca,T,O,V,C,ia,ha))})};n.getSuggestions=function(y,D){const {source:E,spatialReference:P,view:S,suggestTerm:M,maxSuggestions:O,sourceIndex:V,exactMatch:Y}=y,{layer:T,filter:R}=E,ea=D&&D.signal,ha=p(E,S);return t(T).then(()=>{if(!I(T))return[];const ia=E.displayField||E.layer.displayField||H(E.layer);var fa=E.searchFields||[ia];const da=[];E.suggestionTemplate?E.suggestionTemplate.replace(m,(w,C)=>{da.push(C);
return w}):da.push(ia);var U=da&&-1!==da.indexOf("*");-1!==da.indexOf(T.objectIdField)||U||da.push(T.objectIdField);var J=!!T.getField(ia);U=U||u(T,da);const c=u(T,fa);if(!J)throw G.error("invalid-field: displayField is invalid."),new l("getSuggestions():invalid-field","displayField is invalid.");if(!U)throw G.error("invalid-field: outField is invalid."),new l("getSuggestions():invalid-field","outField is invalid.");if(!c)throw G.error("invalid-field: search field is invalid."),new l("getSuggestions():invalid-field",
"search field is invalid.");J=T.createQuery();({orderByFields:U}=E);U&&(J.orderByFields=U);J.outSpatialReference=P;J.returnGeometry=!1;J.num=O;J.outFields=da;ha&&(J.geometry=ha);if(!M.trim())return[];const {prefix:k="",suffix:r=""}=E;U=`${k}${M}${r}`.replace(/'/g,"''");fa=W({searchTerm:U,layer:T,searchFields:fa,filter:R,exactMatch:Y,type:"suggest"});if(!fa)return[];J.where=fa;return T.queryFeatures(J,{signal:ea}).then(w=>F(w,E,V,ia))})};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/widgets/Search/support/geometryUtils":function(){define("exports ../../../geometry ../../../core/Error ../../../core/Logger ../../../core/maybe ../../../geometry/support/scaleUtils ../../../geometry/Extent".split(" "),
function(n,a,b,l,f,B,q){function A(e,g,d){const p=e.hasZ?e.z:void 0;return g&&g.map?(d?B.getExtentForScale(g,d):g.extent).clone().centerAt(e).set({zmax:p,zmin:p}):new q({xmin:e.x-.25,ymin:e.y-.25,xmax:e.x+.25,ymax:e.y+.25,spatialReference:e.spatialReference,zmin:p,zmax:p})}const x=l.getLogger("esri.widgets.Search.support.geometryUtils");n.createExtentFromGeometry=function(e,g,d){if(f.isNone(e))return null;if("extent"===e.type)return e;if("multipoint"===e.type||"polygon"===e.type||"polyline"===e.type)return e.extent;
if("point"===e.type)return A(e,g,d)};n.getPointFromGeometry=function(e){if(f.isNone(e))return null;switch(e.type){case "point":return e;case "extent":return e.center;case "polygon":return e.centroid;case "multipoint":return e.getPoint(0);case "polyline":return e.getPoint(0,0)}return null};n.getPointWithElevation=function(e,g){var d,p;if(!g)return x.error("missing-parameter: view is missing."),Promise.reject(new b("searchgeometryutils:missing-parameter","view is missing."));if(!e)return x.error("missing-parameter: point is missing."),
Promise.reject(new b("searchgeometryutils:missing-parameter","point is missing."));if(e.hasZ||"2d"===g.type)return Promise.resolve(e);const t=null==g?void 0:null==(d=g.map)?void 0:d.ground;return t&&t.layers.length?t.queryElevation(e,{cache:null==(p=g.basemapTerrain)?void 0:p.elevationQueryCache}).then(N=>N.geometry):Promise.resolve(e)};n.scaleExtent=function(e,g,d){return f.isNone(e)||f.isNone(g)?null:A(e.center,g,d)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/widgets/Search/LocatorSearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/deprecate ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../tasks/Locator ./SearchSource ./support/locatorUtils".split(" "),
function(n,a,b,l,f,B,q,A,x,e,g){var d;const p=f.getLogger("esri.widgets.Search.LocatorSearchSource");f=d=function(t){function N(I){var H=t.call(this,I)||this;H.apiKey=null;H.categories=null;H.countryCode=null;H.defaultZoomScale=null;H.localSearchDisabled=!1;H.locationType=null;H.name="";H.placeholder="";H.searchTemplate="";H.singleLineFieldName=null;H.suggestionsEnabled=null;H.url=null;H.zoomScale=null;H.getResults=(u,K)=>g.getResults({source:n._assertThisInitialized(H),...u},K);H.getSuggestions=
(u,K)=>g.getSuggestions({source:n._assertThisInitialized(H),...u},K);return H}n._inheritsLoose(N,t);N.prototype.clone=function(){return new d({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?l.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,
resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?l.clone(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})};n._createClass(N,[{key:"locator",get:function(){b.deprecatedProperty(p,"locator",{replacement:"url",
version:"4.22"});return this._get("locator")},set:function(I){b.deprecatedProperty(p,"locator",{replacement:"url",version:"4.22"});this._set("url",I.url);this._set("locator",I)}}]);return N}(e);a.__decorate([B.property()],f.prototype,"apiKey",void 0);a.__decorate([B.property()],f.prototype,"categories",void 0);a.__decorate([B.property()],f.prototype,"countryCode",void 0);a.__decorate([B.property({json:{write:!0}})],f.prototype,"defaultZoomScale",void 0);a.__decorate([B.property()],f.prototype,"localSearchDisabled",
void 0);a.__decorate([B.property({type:x,json:{read:!1,write:!1}})],f.prototype,"locator",null);a.__decorate([B.property()],f.prototype,"locationType",void 0);a.__decorate([B.property({json:{write:!0}})],f.prototype,"name",void 0);a.__decorate([B.property({json:{write:!0}})],f.prototype,"placeholder",void 0);a.__decorate([B.property()],f.prototype,"searchTemplate",void 0);a.__decorate([B.property({json:{write:!0}})],f.prototype,"singleLineFieldName",void 0);a.__decorate([B.property({json:{read:{source:"suggest"},
write:{target:"suggest"}}})],f.prototype,"suggestionsEnabled",void 0);a.__decorate([B.property({json:{write:!0}})],f.prototype,"url",void 0);a.__decorate([B.property({json:{write:!0}})],f.prototype,"zoomScale",void 0);return f=d=a.__decorate([A.subclass("esri.widgets.Search.LocatorSearchSource")],f)})},"esri/tasks/Locator":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../geometry/SpatialReference ../rest/locator/addressToLocations ../rest/locator/addressesToLocations ../rest/locator/locationToAddress ../rest/locator/suggestLocations ./Task".split(" "),
function(n,a,b,l,f,B,q,A,x,e,g,d,p){l=function(t){function N(H){H=t.call(this,H)||this;H.outSpatialReference=null;H.url=null;return H}n._inheritsLoose(N,t);var I=N.prototype;I.addressToLocations=function(H,u){!H.outSpatialReference&&this.outSpatialReference&&(H.outSpatialReference=this.outSpatialReference);return x.addressToLocations(this.url,H,{...this.requestOptions,...u})};I.suggestLocations=function(H,u){return d.suggestLocations(this.url,H,{...this.requestOptions,...u})};I.addressesToLocations=
function(H,u){!H.outSpatialReference&&this.outSpatialReference&&(H.outSpatialReference=this.outSpatialReference);return e.addressesToLocations(this.url,H,{...this.requestOptions,...u})};I.locationToAddress=function(H,u){!H.outSpatialReference&&this.outSpatialReference&&(H.outSpatialReference=this.outSpatialReference);return g.locationToAddress(this.url,H,{...this.requestOptions,...u})};return N}(p);a.__decorate([b.property({type:A})],l.prototype,"outSpatialReference",void 0);a.__decorate([b.property()],
l.prototype,"url",void 0);return l=a.__decorate([q.subclass("esri.tasks.Locator")],l)})},"esri/rest/locator/addressToLocations":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ./utils ../support/AddressCandidate ../support/AddressToLocationsParameters".split(" "),function(n,a,b,l,f,B,q){function A(){A=a._asyncToGenerator(function*(e,g,d){g=q.from(g);e=l.parseUrl(e);const {address:p,...t}=g.toJSON();g=l.encode({...e.query,...p,...t,f:"json"});d=l.asValidOptions(g,
d);return b(`${e.path}/findAddressCandidates`,d).then(x)});return A.apply(this,arguments)}function x({data:e}){if(!e)return[];const {candidates:g,spatialReference:d}=e;return g?g.map(p=>{if(p){var {extent:t,location:N}=p,I=t?f.isValidExtent(t):!0;if(f.isValidLocation(N)&&I)return t&&(t.spatialReference=d),N.spatialReference=d,B.fromJSON(p)}}):[]}n.addressToLocations=function(e,g,d){return A.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/locator/utils":function(){define(["exports"],
function(n){n.isValidExtent=function(a){return a&&"number"===typeof a.xmin&&"number"===typeof a.ymin&&"number"===typeof a.xmax&&"number"===typeof a.ymax};n.isValidLocation=function(a){return a&&"number"===typeof a.x&&"number"===typeof a.y};n.normalizeExtent=function(a){return a?a.shiftCentralMeridian():null};n.normalizePoint=function(a){return a?a.clone().normalize():null};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/AddressCandidate":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/Point".split(" "),
function(n,a,b,l,f,B,q,A,x,e){b=function(g){function d(p){p=g.call(this,p)||this;p.address=null;p.attributes=null;p.extent=null;p.location=null;p.score=null;return p}n._inheritsLoose(d,g);return d}(b.JSONSupport);a.__decorate([l.property({type:String,json:{write:!0}})],b.prototype,"address",void 0);a.__decorate([l.property({type:Object,json:{write:!0}})],b.prototype,"attributes",void 0);a.__decorate([l.property({type:x,json:{write:!0}})],b.prototype,"extent",void 0);a.__decorate([l.property({type:e,
json:{write:!0}})],b.prototype,"location",void 0);a.__decorate([l.property({type:Number,json:{write:!0}})],b.prototype,"score",void 0);return b=a.__decorate([A.subclass("esri.rest.support.AddressCandidate")],b)})},"esri/rest/support/AddressToLocationsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference ../../geometry/Extent".split(" "),
function(n,a,b,l,f,B,q,A,x,e,g,d,p){b=function(t){function N(I){I=t.call(this,I)||this;I.address=null;I.apiKey=null;I.categories=null;I.countryCode=null;I.forStorage=null;I.location=null;I.locationType=null;I.magicKey=null;I.maxLocations=null;I.outFields=null;I.outSpatialReference=null;I.searchExtent=null;return I}n._inheritsLoose(N,t);return N}(l.JSONSupport);a.__decorate([f.property({type:Object,json:{write:!0}})],b.prototype,"address",void 0);a.__decorate([f.property(e.apiKey)],b.prototype,"apiKey",
void 0);a.__decorate([f.property({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,N)=>{N.category=t?t.join(","):null}}}})],b.prototype,"categories",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"countryCode",void 0);a.__decorate([f.property({type:Boolean,json:{write:!0}})],b.prototype,"forStorage",void 0);a.__decorate([f.property({type:g,json:{write:{writer:(t,N)=>{N.location=t?t.clone().normalize():null}}}})],
b.prototype,"location",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"locationType",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"magicKey",void 0);a.__decorate([f.property({type:Number,json:{write:!0}})],b.prototype,"maxLocations",void 0);a.__decorate([f.property({type:[String],json:{write:{writer:(t,N)=>{N.outFields=t?t.join(","):null}}}})],b.prototype,"outFields",void 0);a.__decorate([f.property({type:d,json:{read:{source:"outSR"},
write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);a.__decorate([f.property({type:p,json:{write:{writer:(t,N)=>{t=t?t.shiftCentralMeridian():null;N.searchExtent=t}}}})],b.prototype,"searchExtent",void 0);b=a.__decorate([x.subclass("esri.rest.support.AddressToLocationsParameters")],b);b.from=A.ensureType(b);return b})},"esri/rest/support/commonProperties":function(){define(["exports"],function(n){n.apiKey={type:String,json:{read:{source:"token"},write:{target:"token"}}};Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/rest/locator/addressesToLocations":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ../support/AddressCandidate ../support/AddressesToLocationsParameters".split(" "),function(n,a,b,l,f,B){function q(){q=a._asyncToGenerator(function*(x,e,g){e=B.from(e);x=l.parseUrl(x);e={...e.toJSON(),f:"json"};e=l.encode({...x.query,...e});g=l.asValidOptions(e,g);return b(`${x.path}/geocodeAddresses`,g).then(A)});return q.apply(this,arguments)}
function A(x){({data:x}=x);if(!x)return[];const {locations:e,spatialReference:g}=x;return e?e.map(d=>{const {location:p}=d;p&&(p.spatialReference=g);return f.fromJSON(d)}):[]}n.addressesToLocations=function(x,e,g){return q.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/AddressesToLocationsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/SpatialReference".split(" "),
function(n,a,b,l,f,B,q,A,x,e){b=function(g){function d(p){p=g.call(this,p)||this;p.addresses=null;p.categories=null;p.countryCode=null;p.locationType=null;p.outSpatialReference=null;return p}n._inheritsLoose(d,g);return d}(l.JSONSupport);a.__decorate([f.property({type:[Object],json:{read:{reader:g=>g&&g.records?g.records.map(d=>d.attributes):null},write:{writer:(g,d)=>{const p=[];Array.isArray(g)&&g.forEach(t=>{p.push({attributes:t})});d.addresses={records:p}}}}})],b.prototype,"addresses",void 0);
a.__decorate([f.property({type:[String],json:{read:{source:"category",reader:g=>g?g.split(","):null},write:{target:"category",writer:(g,d)=>{d.category=g?g.join(","):null}}}})],b.prototype,"categories",void 0);a.__decorate([f.property({type:String,json:{read:{source:"sourceCountry"},write:{target:"sourceCountry"}}})],b.prototype,"countryCode",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"locationType",void 0);a.__decorate([f.property({type:e,json:{read:{source:"outSR"},
write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);b=a.__decorate([x.subclass("esri.rest.support.AddressesToLocationsParameters")],b);b.from=A.ensureType(b);return b})},"esri/rest/locator/locationToAddress":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ../support/AddressCandidate ../support/LocationToAddressParameters".split(" "),function(n,a,b,l,f,B){function q(){q=a._asyncToGenerator(function*(x,e,g){e=B.from(e);x=l.parseUrl(x);e={...e.toJSON(),
f:"json"};e=l.encode({...x.query,...e});g=l.asValidOptions(e,g);return b(`${x.path}/reverseGeocode`,g).then(A)});return q.apply(this,arguments)}function A({data:x}){if(x){var {address:e,location:g}=x;return f.fromJSON({address:e&&e.Match_addr||"",attributes:e||{},location:g,score:100})}}n.locationToAddress=function(x,e,g){return q.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/LocationToAddressParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference".split(" "),
function(n,a,b,l,f,B,q,A,x,e,g,d){b=function(p){function t(N){N=p.call(this,N)||this;N.apiKey=null;N.location=null;N.locationType=null;N.outSpatialReference=null;return N}n._inheritsLoose(t,p);return t}(l.JSONSupport);a.__decorate([f.property(e.apiKey)],b.prototype,"apiKey",void 0);a.__decorate([f.property({type:g,json:{write:{writer:(p,t)=>{p=p?p.clone().normalize():null;t.location="undefined"!==typeof p?p:null}}}})],b.prototype,"location",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],
b.prototype,"locationType",void 0);a.__decorate([f.property({type:d,json:{read:{source:"outSR"},write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);b=a.__decorate([x.subclass("esri.rest.support.LocationToAddressParameters")],b);b.from=A.ensureType(b);return b})},"esri/rest/locator/suggestLocations":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ../support/SuggestionCandidate ../support/SuggestLocationsParameters".split(" "),function(n,a,b,
l,f,B){function q(){q=a._asyncToGenerator(function*(x,e,g){x=l.parseUrl(x);e=B.from(e);e={...e.toJSON(),f:"json"};e=l.encode({...x.query,...e});g=l.asValidOptions(e,g);return b(`${x.path}/suggest`,g).then(A)});return q.apply(this,arguments)}function A(x){({data:x}=x);if(!x)return[];({suggestions:x}=x);return x?x.map(e=>new f(e)):[]}n.suggestLocations=function(x,e,g){return q.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/SuggestionCandidate":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(n,a,b,l,f,B,q,A){b=function(x){function e(g){g=x.call(this,g)||this;g.isCollection=null;g.magicKey=null;g.text=null;return g}n._inheritsLoose(e,x);return e}(b.JSONSupport);a.__decorate([l.property({type:Boolean,json:{write:!0}})],b.prototype,"isCollection",void 0);a.__decorate([l.property({type:String,json:{write:!0}})],b.prototype,"magicKey",void 0);a.__decorate([l.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);return b=a.__decorate([A.subclass("esri.rest.support.SuggestionCandidate")],
b)})},"esri/rest/support/SuggestLocationsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference ../../geometry/Extent".split(" "),function(n,a,b,l,f,B,q,A,x,e,g,d,p){b=function(t){function N(I){I=
t.call(this,I)||this;I.apiKey=null;I.categories=null;I.countryCode=null;I.location=null;I.maxSuggestions=null;I.outSpatialReference=null;I.searchExtent=null;I.text=null;return I}n._inheritsLoose(N,t);return N}(l.JSONSupport);a.__decorate([f.property(e.apiKey)],b.prototype,"apiKey",void 0);a.__decorate([f.property({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,N)=>{N.category=t?t.join(","):null}}}})],b.prototype,"categories",void 0);a.__decorate([f.property({type:String,
json:{write:!0}})],b.prototype,"countryCode",void 0);a.__decorate([f.property({type:g,json:{write:{writer:(t,N)=>{N.location=t?t.clone().normalize():null}}}})],b.prototype,"location",void 0);a.__decorate([f.property({type:Number,json:{write:!0}})],b.prototype,"maxSuggestions",void 0);a.__decorate([f.property({type:d,json:{read:{source:"outSR"},write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);a.__decorate([f.property({type:p,json:{write:{writer:(t,N)=>{t=t?t.shiftCentralMeridian():
null;N.searchExtent=JSON.stringify(t)}}}})],b.prototype,"searchExtent",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);b=a.__decorate([x.subclass("esri.rest.support.SuggestLocationsParameters")],b);b.from=A.ensureType(b);return b})},"esri/widgets/Search/support/locatorUtils":function(){define("exports ../../../Graphic ../../../core/maybe ../../../geometry/Polygon ../../../rest/locator/addressToLocations ../../../rest/locator/locationToAddress ../../../rest/locator/suggestLocations ../../../rest/support/AddressToLocationsParameters ../../../rest/support/LocationToAddressParameters ../../../rest/support/SuggestLocationsParameters ./geometryUtils".split(" "),
function(n,a,b,l,f,B,q,A,x,e,g){function d(u,K){if(K.localSearchDisabled)return null;K=null==u?void 0:u.scale;return"number"===typeof K&&3E5>=K?u.get("extent.center"):null}function p(u,K){const {source:z,spatialReference:L,location:W,sourceIndex:Z,view:ba}=u,{apiKey:aa,url:F,zoomScale:h,defaultZoomScale:v}=z,m=ba&&ba.scale;u=K&&K.signal;K=new x;K.location=W;aa&&(K.apiKey=aa);L&&(K.outSpatialReference=L);return B.locationToAddress(F,K,{signal:u}).then(G=>H([G],{sourceIndex:Z,scale:m,view:ba,zoomScale:h,
defaultZoomScale:v})).catch(()=>[])}function t(u,K){const {filter:z,withinViewEnabled:L}=u;u=K&&K.extent;return(K=g.createExtentFromGeometry(z&&z.geometry,K,K&&K.scale))||(L&&u?u:void 0)}function N(u,K){const {source:z,suggestResult:L,spatialReference:W,view:Z,maxResults:ba,sourceIndex:aa}=u,F=z&&z.zoomScale,h=z&&z.defaultZoomScale;if(!L.text.trim())return Promise.resolve(null);u=`${!L.key&&z.prefix?z.prefix:""}${L.text}${!L.key&&z.suffix?z.suffix:""}`;const v=new A,{apiKey:m,url:G}=z,y=Z&&Z.scale;
var D=t(z,Z);K=K&&K.signal;m&&(v.apiKey=m);if(!G)return Promise.resolve(null);z.categories&&(v.categories=z.categories);z.locationType&&(v.locationType=z.locationType);W&&(v.outSpatialReference=W);const E=d(Z,z);E&&(v.location=E);v.maxLocations=ba;D&&(v.searchExtent=b.unwrap(D));z.countryCode&&(v.countryCode=z.countryCode);({key:D}=L);const P=`${D}`;D&&(v.magicKey=P);v.address={};v.address[z.singleLineFieldName||"Single Line Input"]=u;z.outFields&&(v.outFields=z.outFields);return f.addressToLocations(G,
v,{signal:K}).then(S=>H(S,{key:P,scale:y,sourceIndex:aa,view:Z,zoomScale:F,defaultZoomScale:h}))}function I(u,K){return u.map(z=>({text:z.text,key:z.magicKey,sourceIndex:K}))}function H(u,K){return u.filter(Boolean).map(z=>{{const {key:Z,scale:ba,sourceIndex:aa,view:F,zoomScale:h,defaultZoomScale:v}=K,{attributes:m,extent:G,location:y,address:D}=z;z=new a({geometry:y,attributes:m});var L=G||y,W=g.createExtentFromGeometry(L,F,ba);L="number"===typeof h?g.scaleExtent(W,F,h):"number"===typeof v&&"point"===
L.type?g.scaleExtent(W,F,v):W;W=y?`${y.x},${y.y}`:"";W=D||W;const E=z.clone();b.isSome(L)&&(E.geometry=l.fromExtent(L));z={extent:L,feature:z,target:E,key:Z,name:W,sourceIndex:aa}}return z})}n.getLocation=d;n.getResults=function(u,K){return u.location?p(u,K):N(u,K)};n.getSuggestions=function(u,K){const {source:z,spatialReference:L,view:W,suggestTerm:Z,maxSuggestions:ba,sourceIndex:aa}=u;u=new e;const {apiKey:F,url:h}=z,v=t(z,W);K=K&&K.signal;if(!h)return Promise.resolve(null);F&&(u.apiKey=F);z.categories&&
(u.categories=z.categories);L&&(u.outSpatialReference=L);const m=d(W,z);m&&(u.location=m);if(!Z.trim())return Promise.resolve(null);const {prefix:G="",suffix:y=""}=z;u.text=`${G}${Z}${y}`;v&&(u.searchExtent=b.unwrap(v));u.maxSuggestions=ba;z.countryCode&&(u.countryCode=z.countryCode);return q.suggestLocations(h,u,{signal:K}).then(D=>I(D,aa))};n.isArcGISWorldGeocoder=function(u){return u?/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(u):!1};n.isMeteredArcGISWorldGeocoder=
function(u){return u?/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(u):!1};n.isProxiedArcGISWorldGeocoder=function(u){return u?/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi.test(u):!1};n.meteredArcGISLocatorUrl="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";Object.defineProperty(n,"__esModule",{value:!0})})},"esri/widgets/support/geolocationUtils":function(){define("exports ../../config ../../core/Error ../../core/has ../../core/Logger ../../geometry/Point ../../geometry/support/webMercatorUtils ../../portal/Portal ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/urlUtils ../../core/unitUtils ../../geometry ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Polygon ../../geometry/Polyline ../../rest/geometryService/units ../../rest/operations/generalize ../../rest/support/GeneralizeParameters ../../rest/operations/lengths ../../rest/support/LengthsParameters ../../rest/operations/offset ../../rest/support/OffsetParameters ../../rest/geometryService/project ../../rest/operations/relation ../../rest/support/RelationParameters ../../rest/operations/trimExtend ../../rest/support/TrimExtendParameters ../../rest/support/ProjectParameters".split(" "),
function(n,a,b,l,f,B,q,A,x,e,g,d,p,t,N,I,H,u,K,z,L,W,Z,ba,aa,F,h,v,m,G,y){function D(M,O,V){if(!O)return Promise.resolve(M);const Y=O.spatialReference;return Y.isWGS84?Promise.resolve(M):Y.isWebMercator?Promise.resolve(q.geographicToWebMercator(M)):E(V).then(T=>{if(!T)throw new b("geometry-service:missing-url","Geometry service URL is missing");const R=new y({geometries:[M],outSpatialReference:Y});return F.project(T,R,V).then(ea=>ea[0])})}function E(M){if(a.geometryServiceUrl)return Promise.resolve(a.geometryServiceUrl);
const O=A.getDefault();return O.load(M).catch(()=>{}).then(()=>O.get("helperServices.geometry.url"))}const P=f.getLogger("esri.widgets.support.geolocationUtils"),S={maximumAge:0,timeout:15E3,enableHighAccuracy:!0};n.getCurrentPosition=function(M){M||(M=S);return new Promise((O,V)=>{setTimeout(()=>V(new b("geolocation:timeout","getting the current geolocation position timed out")),15E3);navigator.geolocation.getCurrentPosition(O,V,M)})};n.positionToPoint=function(M,O){const {position:V,view:Y}=M;M=
V&&V.coords||{};M={accuracy:M.accuracy,altitude:M.altitude,altitudeAccuracy:M.altitudeAccuracy,heading:M.heading,latitude:M.latitude,longitude:M.longitude,speed:M.speed};M=V?{coords:M,timestamp:V.timestamp}:V;M=(M=M&&M.coords)?new B({longitude:M.longitude,latitude:M.latitude,z:M.altitude||null,spatialReference:{wkid:4326}}):null;return D(M,Y,O)};n.supported=function(){var M;(M=l("esri-geolocation"))||P.warn("geolocation-unsupported","Geolocation unsupported.");M&&((M=window.isSecureContext)||P.warn("insecure-context",
"Geolocation requires a secure origin."));return M};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/geometryService/units":function(){define(["exports","../../core/jsonMap"],function(n,a){a=new a.JSONMap({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});n.conversionTypeKebabDict=a;n.units={UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,
UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,
UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,
UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",
UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/operations/generalize":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(n,a,b){const l=new a.JSONMap({109006:"centimeters",
9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});n.generalizeToRESTParameters=function(f){const {geometries:B,deviationUnit:q,maxDeviation:A}=f.toJSON();f={maxDeviation:A};B&&B.length&&(f.geometries=JSON.stringify({geometryType:b.getJsonType(B[0]),geometries:B}),f.sr=JSON.stringify(B[0].spatialReference));l.write(q,f,"deviationUnit");return f};Object.defineProperty(n,"__esModule",
{value:!0})})},"esri/rest/support/GeneralizeParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),function(n,a,b,l,f,B,q,A,x){b=function(e){function g(d){d=e.call(this,d)||this;d.deviationUnit=null;d.geometries=null;d.maxDeviation=
null;return d}n._inheritsLoose(g,e);return g}(b.JSONSupport);a.__decorate([l.property({type:String,json:{write:!0}})],b.prototype,"deviationUnit",void 0);a.__decorate([l.property({json:{read:{reader:e=>e?e.map(g=>x.fromJSON(g)):null},write:{writer:(e,g)=>{g.geometries=e.map(d=>d.toJSON())}}}})],b.prototype,"geometries",void 0);a.__decorate([l.property({type:Number,json:{write:!0}})],b.prototype,"maxDeviation",void 0);b=a.__decorate([A.subclass("esri.rest.support.GeneralizeParameters")],b);b.from=
q.ensureType(b);return b})},"esri/rest/operations/lengths":function(){define(["exports","../../core/jsonMap"],function(n,a){const b=new a.JSONMap({preserveShape:"preserve-shape"});n.lengthsToRESTParameters=function(l){const {polylines:f,lengthUnit:B,geodesic:q,calculationType:A}=l.toJSON(),x={};x.polylines=JSON.stringify(f);l=l.polylines[0].spatialReference;x.sr=l.wkid?l.wkid:JSON.stringify(l.toJSON());B&&(x.lengthUnit=B);q&&(x.geodesic=q);A&&(x.calculationType=b.toJSON(A));return x};Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/rest/support/LengthsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils ../../geometry/Polyline".split(" "),function(n,a,b,l,f,B,q,A,x,e,g){b=function(d){function p(t){t=d.call(this,t)||
this;t.calculationType=null;t.geodesic=null;t.lengthUnit=null;t.polylines=null;return t}n._inheritsLoose(p,d);return p}(l.JSONSupport);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"calculationType",void 0);a.__decorate([f.property({type:Boolean,json:{write:!0}})],b.prototype,"geodesic",void 0);a.__decorate([f.property({json:{write:!0}})],b.prototype,"lengthUnit",void 0);a.__decorate([f.property({type:[g],json:{read:{reader:d=>d?d.map(p=>e.fromJSON(p)):null},write:{writer:(d,
p)=>{p.polylines=d.map(t=>t.toJSON())}}}})],b.prototype,"polylines",void 0);b=a.__decorate([x.subclass("esri.rest.support.LengthsParameters")],b);b.from=A.ensureType(b);return b})},"esri/rest/operations/offset":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(n,a,b){const l=new a.JSONMap({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),f=new a.JSONMap({9001:"meters",9002:"feet",9036:"kilometers",
9093:"miles",109012:"nautical-miles",109001:"yards"});n.offsetToRESTParameters=function(B){const {geometries:q,bevelRatio:A,offsetDistance:x,offsetHow:e,offsetUnit:g}=B.toJSON();B={bevelRatio:A,offsetDistance:x};q&&q.length&&(B.geometries=JSON.stringify({geometryType:b.getJsonType(q[0]),geometries:q}),B.sr=JSON.stringify(q[0].spatialReference));e&&(B.offsetHow=l.toJSON(e));g&&(B.offsetUnit=f.toJSON(g));return B};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/OffsetParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(n,a,b,l,f,B,q,A,x){b=function(e){function g(d){d=e.call(this,d)||this;d.bevelRatio=null;d.geometries=null;d.offsetDistance=null;d.offsetHow=null;d.offsetUnit=null;return d}n._inheritsLoose(g,e);return g}(b.JSONSupport);a.__decorate([l.property({type:Number,json:{write:!0}})],b.prototype,"bevelRatio",void 0);a.__decorate([l.property({json:{read:{reader:e=>e?e.map(g=>x.fromJSON(g)):null},write:{writer:(e,g)=>{g.geometries=e.map(d=>d.toJSON())}}}})],b.prototype,"geometries",void 0);a.__decorate([l.property({type:Number,
json:{write:!0}})],b.prototype,"offsetDistance",void 0);a.__decorate([l.property({type:String,json:{write:!0}})],b.prototype,"offsetHow",void 0);a.__decorate([l.property({type:String,json:{write:!0}})],b.prototype,"offsetUnit",void 0);b=a.__decorate([A.subclass("esri.rest.support.OffsetParameters")],b);b.from=q.ensureType(b);return b})},"esri/rest/geometryService/project":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../utils ./utils ../support/ProjectParameters".split(" "),
function(n,a,b,l,f,B,q,A){function x(){x=a._asyncToGenerator(function*(g,d,p){d=e(d);g=B.parseUrl(g);const t={...g.query,f:"json",...d.toJSON()},N=d.outSpatialReference,I=f.getJsonType(d.geometries[0]);d=B.asValidOptions(t,p);return b(g.path+"/project",d).then(({data:{geometries:H}})=>q.decodeGeometries(H,I,N))});return x.apply(this,arguments)}const e=l.ensureType(A);n.project=function(g,d,p){return x.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/geometryService/utils":function(){define(["exports",
"../../geometry/support/jsonUtils"],function(n,a){n.decodeGeometries=function(b,l,f){const B=a.getGeometryType(l);return b.map(q=>{q=B.fromJSON(q);q.spatialReference=f;return q})};n.encodeGeometries=function(b){return{geometryType:a.getJsonType(b[0]),geometries:b.map(l=>l.toJSON())}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/ProjectParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(n,a,b,l,f,B,q,A,x){b=function(e){function g(d){d=e.call(this,d)||this;d.geometries=null;d.outSpatialReference=null;d.transformation=null;d.transformForward=null;return d}n._inheritsLoose(g,e);g.prototype.toJSON=function(){const d=this.geometries.map(function(N){return N.toJSON()}),p=this.geometries[0],t={};t.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());t.inSR=p.spatialReference.wkid||JSON.stringify(p.spatialReference.toJSON());t.geometries=JSON.stringify({geometryType:x.getJsonType(p),
geometries:d});this.transformation&&(t.transformation=this.transformation.wkid||JSON.stringify(this.transformation));null!=this.transformForward&&(t.transformForward=this.transformForward);return t};return g}(b.JSONSupport);a.__decorate([l.property()],b.prototype,"geometries",void 0);a.__decorate([l.property({json:{read:{source:"outSR"}}})],b.prototype,"outSpatialReference",void 0);a.__decorate([l.property()],b.prototype,"transformation",void 0);a.__decorate([l.property()],b.prototype,"transformForward",
void 0);return b=a.__decorate([A.subclass("esri.rest.support.ProjectParameters")],b)})},"esri/rest/operations/relation":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(n,a,b){const l=new a.JSONMap({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",
esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});n.relationToRESTParameters=function(f){const {geometries1:B,geometries2:q,relation:A,relationParameter:x}=f.toJSON();f={};if(B&&B.length){f.geometries1=JSON.stringify({geometryType:b.getJsonType(B[0]),geometries:B});const e=B[0].spatialReference;f.sr=e.wkid?e.wkid:
JSON.stringify(e)}q&&0<q.length&&(f.geometries2=JSON.stringify({geometryType:b.getJsonType(q[0]),geometries:q}));A&&(f.relation=l.toJSON(A));x&&(f.relationParam=x);return f};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/RelationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(n,a,b,l,f,B,q,A,x){b=function(e){function g(d){d=e.call(this,d)||this;d.geometries1=null;d.geometries2=null;d.relation=null;d.relationParameter=null;return d}n._inheritsLoose(g,e);return g}(b.JSONSupport);a.__decorate([l.property({json:{read:{reader:e=>e?e.map(g=>x.fromJSON(g)):null},write:{writer:(e,g)=>{g.geometries1=e.map(d=>d.toJSON())}}}})],b.prototype,"geometries1",void 0);a.__decorate([l.property({json:{read:{reader:e=>e?e.map(g=>x.fromJSON(g)):null},write:{writer:(e,g)=>{g.geometries2=
e.map(d=>d.toJSON())}}}})],b.prototype,"geometries2",void 0);a.__decorate([l.property({type:String,json:{write:!0}})],b.prototype,"relation",void 0);a.__decorate([l.property({type:String,json:{write:!0}})],b.prototype,"relationParameter",void 0);b=a.__decorate([A.subclass("esri.rest.support.RelationParameters")],b);b.from=q.ensureType(b);return b})},"esri/rest/operations/trimExtend":function(){define(["exports","../../core/jsonMap"],function(n,a){const b=new a.JSONMap({0:"default-curve-extension",
1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});n.trimExtendToRESTParameters=function(l){const {extendHow:f,polylines:B,trimExtendTo:q}=l.toJSON();l={};l.extendHow=b.toJSON(f);B&&B.length&&(l.polylines=JSON.stringify(B),l.sr=JSON.stringify(B[0].spatialReference));q&&(l.trimExtendTo=JSON.stringify(q));return l};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/rest/support/TrimExtendParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils ../../geometry/Polyline".split(" "),
function(n,a,b,l,f,B,q,A,x,e,g){b=function(d){function p(t){t=d.call(this,t)||this;t.extendHow="default-curve-extension";t.polylines=null;t.trimExtendTo=null;return t}n._inheritsLoose(p,d);return p}(l.JSONSupport);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"extendHow",void 0);a.__decorate([f.property({type:[g],json:{read:{reader:d=>d?d.map(p=>e.fromJSON(p)):null},write:{writer:(d,p)=>{p.polylines=d.map(t=>t.toJSON())}}}})],b.prototype,"polylines",void 0);a.__decorate([f.property({json:{read:{reader:d=>
d?e.fromJSON(d):null},write:{writer:(d,p)=>{p.trimExtendTo=d.toJSON()}}}})],b.prototype,"trimExtendTo",void 0);b=a.__decorate([x.subclass("esri.rest.support.TrimExtendParameters")],b);b.from=A.ensureType(b);return b})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(n,a,b,l,f,B,q,A){n.GoToMixin=x=>{x=function(e){function g(...d){d=e.call(this,...d)||this;d.goToOverride=null;d.view=null;return d}a._inheritsLoose(g,e);g.prototype.callGoTo=function(d){const {view:p}=this;return this.goToOverride?this.goToOverride(p,d):p.goTo(d.target,d.options)};return g}(x);b.__decorate([l.property()],x.prototype,"goToOverride",void 0);b.__decorate([l.property()],x.prototype,"view",void 0);return x=b.__decorate([A.subclass("esri.widgets.support.GoTo")],x)};Object.defineProperty(n,
"__esModule",{value:!0})})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/events ../core/Handles ../core/string ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Search/SearchResultRenderer ./Search/SearchViewModel ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/decorators/vmEvent ./support/jsxFactory ../intl/substitute".split(" "),function(n,
a,b,l,f,B,q,A,x,e,g,d,p,t,N,I,H,u,K,z,L,W){const Z=/<[a-z/][\s\S]*>/i;b=function(ba){function aa(h,v){var m=ba.call(this,h,v)||this;m._activeMenuItemIndex=-1;m._handles=new f;m._inputNode=null;m._menuItemCount=0;m._sourceMenuButtonNode=null;m._sourceListNode=null;m._suggestionListNode=null;m._searchResultRenderer=new N;m._locateFailed=null;m._container=null;m.activeMenu="none";m.activeSource=null;m.activeSourceIndex=null;m.allPlaceholder=null;m.allSources=null;m.autoNavigate=null;m.autoSelect=null;
m.defaultSources=null;m.disabled=!1;m.goToOverride=null;m.iconClass="esri-icon-search";m.includeDefaultSources=null;m.label=void 0;m.locationEnabled=null;m.maxResults=null;m.maxSuggestions=null;m.messages=null;m.messagesCommon=null;m.minSuggestCharacters=null;m.popupEnabled=null;m.popupTemplate=null;m.portal=null;m.resultGraphic=null;m.resultGraphicEnabled=null;m.results=null;m.searchAllEnabled=null;m.searchTerm=null;m.selectedResult=null;m.sources=null;m.suggestions=null;m.suggestionsEnabled=null;
m.view=null;m.viewModel=new I;m._clearActiveMenu=()=>{m.activeMenu="none"};m._removeActiveMenu=G=>{var y;(G=G.relatedTarget)&&null!=(y=m._container)&&y.contains(G)||m._clearActiveMenu()};m.own(q.watch(n._assertThisInitialized(m),"searchTerm",G=>{(G&&"warning"===m.activeMenu||!G&&!m.get("viewModel.selectedSuggestion.location"))&&m._clearActiveMenu()}),q.on(n._assertThisInitialized(m),"viewModel.allSources","change",()=>m._watchSourceChanges()),q.init(n._assertThisInitialized(m),"activeMenu",()=>m._resetActiveMenuItemIndex()),
q.init(n._assertThisInitialized(m),"viewModel.defaultPopupTemplate",G=>{G&&(G.content=m._renderSearchResultsContent.bind(n._assertThisInitialized(m)))}));return m}n._inheritsLoose(aa,ba);var F=aa.prototype;F.destroy=function(){this._handles.destroy();this._handles=null;this._cancelSuggest();this._cancelSearch();this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)};F.clear=function(){};F.focus=function(){var h;
null==(h=this._inputNode)?void 0:h.focus();this.emit("search-focus")};F.blur=function(){var h;null==(h=this._inputNode)?void 0:h.blur();this.emit("search-blur")};F.search=function(h){this._clearActiveMenu();this._cancelSuggest();this._cancelSearch();const v=new AbortController,{signal:m}=v;this._searchController=v;return this.viewModel.search(h,{signal:m}).catch(G=>{if(this._searchController===v)return this._clearActiveMenu(),this._searchController=null,G}).then(G=>{if(this._searchController===v)return this.activeMenu=
G.numResults?"none":"warning",this._searchController=null,G})};F.suggest=function(h){this._cancelSuggest();const v=new AbortController,{signal:m}=v;this._suggestController=v;return this.viewModel.suggest(h,null,{signal:m}).then(G=>{if(this._suggestController===v)return this._suggestController=null,G.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),G}).catch(()=>{if(this._suggestController===v)return this._suggestController=null})};F.render=function(){const {state:h}=this.viewModel;
return L.tsx("div",{class:this.classes("esri-search esri-widget",{["esri-disabled"]:"disabled"===h,["esri-widget--disabled"]:this.disabled})},"loading"===h?this.renderLoader():this.renderContainer())};F.renderSubmitButton=function(){const {messages:h}=this;return L.tsx("button",{"aria-label":h.searchButtonTitle,bind:this,class:this.classes("esri-search__submit-button","esri-widget--button"),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:h.searchButtonTitle,type:"button"},
L.tsx("span",{"aria-hidden":"true",class:"esri-icon-search"}))};F.renderWarningMenu=function(){return L.tsx("div",{key:"esri-search__error-menu",class:this.classes("esri-menu","esri-search__warning-menu")},L.tsx("div",{class:"esri-search__warning-body"},this.renderWarning()))};F.renderSourceMenuButton=function(){const {messages:h,activeMenu:v,sourceMenuId:m,sourceMenuButtonId:G}=this,{activeSourceIndex:y,allSources:D}=this.viewModel;return 1<D.length?L.tsx("button",{id:G,key:"esri-search__source-menu-button",
bind:this,"aria-label":h.searchIn,title:h.searchIn,"aria-haspopup":"true","aria-expanded":("source"===v).toString(),"aria-controls":m,class:this.classes("esri-search__sources-button","esri-widget--button"),onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,afterCreate:H.storeNode,"data-node-ref":"_sourceMenuButtonNode",type:"button"},L.tsx("span",{"aria-hidden":"true",class:"esri-icon-down-arrow esri-search__sources-button--down"}),L.tsx("span",{"aria-hidden":"true",
class:"esri-icon-up-arrow esri-search__sources-button--up"}),L.tsx("span",{class:"esri-search__source-name"},this._getSourceName(y))):null};F.renderSourcesList=function(){const {allSources:h,searchAllEnabled:v}=this.viewModel,{_activeMenuItemIndex:m,activeMenu:G,sourceMenuId:y,sourceMenuButtonId:D}=this,E="source"===G&&-1<m?this._buildId("source-item",m):null;return 1<h.length?L.tsx("ul",{"aria-activedescendant":E,"aria-labelledby":D,id:y,role:"menu",bind:this,afterCreate:H.storeNode,onkeydown:this._handleSourceMenuKeydown,
onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:"esri-menu__list",tabIndex:-1},v?this.renderSource(I.ALL_INDEX):null,h.map((P,S)=>this.renderSource(S)).toArray()):null};F.renderSourcesMenu=function(){const {allSources:h}=this.viewModel;return 1<h.length?L.tsx("div",{key:"esri-search__source-menu",class:this.classes("esri-menu","esri-search__sources-menu")},this.renderSourcesList()):null};F.renderLoader=function(){const {messages:h,messagesCommon:v}=this;return L.tsx("div",
{class:"esri-widget__loader",key:"base-loader"},L.tsx("span",{"aria-hidden":"true",class:"esri-widget__loader-animation"}),L.tsx("span",{class:"esri-icon-font-fallback-text"},h.searchButtonTitle),L.tsx("span",{class:"esri-widget__loader-text"},v.loading))};F.renderContainer=function(){const {allSources:h,state:v}=this.viewModel,{activeMenu:m}=this;return L.tsx("div",{tabIndex:-1,afterCreate:G=>{this._container=G;G.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:G=>{G.removeEventListener("focusout",
this._removeActiveMenu)},class:this.classes({["esri-search--multiple-sources"]:1<h.length,["esri-search--loading"]:"loading"===v,["esri-search--searching"]:"searching"===v,["esri-search--warning"]:"warning"===m,["esri-search--sources"]:"source"===m,["esri-search--show-suggestions"]:"suggestion"===m},"esri-search__container"),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())};F.renderClearButton=
function(){return this.searchTerm?L.tsx("button",{bind:this,class:this.classes("esri-search__clear-button","esri-widget--button"),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},L.tsx("span",{"aria-hidden":"true",class:"esri-icon-close"})):null};F.renderLocationGroup=function(){const {messages:h,locationEnabled:v,displayedSearchTerm:m}=this,G="suggestion"===this.activeMenu&&0===this._activeMenuItemIndex;
return v&&!m?L.tsx("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes("esri-menu__list","esri-search__suggestions-list","esri-search__suggestions-list--current-location")},L.tsx("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":("suggestion"===this.activeMenu&&0===this._activeMenuItemIndex).toString(),role:"option",class:this.classes("esri-menu__list-item",G?"esri-menu__list-item--focus":
null)},L.tsx("span",{"aria-hidden":"true",class:"esri-icon-locate-circled"})," ",h.useCurrentLocation)):null};F.renderInput=function(){const {activeMenu:h,locationEnabled:v,displayedSearchTerm:m,messages:G,suggestionsMenuId:y,inputId:D,_activeMenuItemIndex:E}=this,{maxInputLength:P,placeholder:S,searchTerm:M,suggestionCount:O}=this.viewModel,V=!!(v&&!m||O),Y="suggestion"===h&&-1<E?this._buildId("suggestion-item",E):null;return L.tsx("input",{"aria-activedescendant":Y,"aria-autocomplete":"list","aria-expanded":(V&&
"suggestion"===h).toString(),"aria-controls":V?y:null,"aria-haspopup":"listbox","aria-label":G.searchButtonTitle,bind:this,placeholder:S,maxlength:P,autocomplete:"off",type:"text",class:this.classes("esri-input","esri-search__input"),value:M,id:D,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:H.storeNode,"data-node-ref":"_inputNode",onfocus:this.focus,onblur:this.blur,title:M?"":S})};F.renderForm=
function(){return L.tsx("form",{key:"esri-search__form",bind:this,class:"esri-search__form",onsubmit:this._formSubmit,role:"search"},this.renderInput())};F.renderSuggestList=function(h){const {sourceIndex:v}=h,m=h.results;return h.results.length?L.tsx("ul",{role:"group",key:`esri-search__suggestion-list-${v}`,class:this.classes("esri-menu__list","esri-search__suggestions-list")},m.map(G=>this.renderSuggestion(G,this._menuItemCount++))):null};F.renderSuggestionsGroup=function(){const {suggestions:h}=
this.viewModel;return h?h.map(v=>[this.renderSuggestionHeader(v),this.renderSuggestList(v)]):null};F.renderSuggestionsMenu=function(){const {displayedSearchTerm:h,locationEnabled:v,suggestionsMenuId:m,inputId:G}=this,{suggestionCount:y}=this.viewModel;this._menuItemCount=0;return v&&!h||y?L.tsx("div",{id:m,key:"esri-search__suggestions-menu",class:this.classes("esri-menu","esri-search__suggestions-menu"),role:"listbox","aria-labelledby":G,bind:this,afterCreate:H.storeNode,"data-node-ref":"_suggestionListNode"},
this.renderLocationGroup(),this.renderSuggestionsGroup()):null};F.renderInputContainer=function(){return L.tsx("div",{key:"esri-search__input-container",class:"esri-search__input-container"},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())};F.renderSuggestionHeader=function(h){const {allSources:v,activeSourceIndex:m}=this.viewModel,{sourceIndex:G}=h,y=1<v.length&&m===I.ALL_INDEX;return h.results.length&&y?L.tsx("div",{key:`esri-search__suggestion-header-${G}`,class:"esri-menu__header"},
this._getSourceName(G)):null};F.renderSuggestion=function(h,v){const {_activeMenuItemIndex:m,messages:G}=this;var {searchTerm:y}=this.viewModel;if(y){var {text:D}=h;D=D||G.untitledResult;const E=[];if(Z.test(D))E.push(L.tsx("div",{innerHTML:D}));else{D=this._splitResult(D,y);const P=y.toLowerCase();D.forEach((S,M)=>{S&&S.length&&(S.toLowerCase()===P?E.push(L.tsx("strong",{key:M},S)):E.push(S))})}y="suggestion"===this.activeMenu&&m===v;return L.tsx("li",{bind:this,id:this._buildId("suggestion-item",
v),"aria-selected":("suggestion"===this.activeMenu&&this._activeMenuItemIndex===v).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${v}`,"data-suggestion":h,role:"option",class:this.classes("esri-menu__list-item",y?"esri-menu__list-item--focus":null)},E)}};F.renderSource=function(h){const {activeSourceIndex:v,searchAllEnabled:m}=this.viewModel,G={["esri-menu__list-item--active"]:h===v,["esri-menu__list-item--focus"]:"source"===this.activeMenu&&h===(m?this._activeMenuItemIndex-
1:this._activeMenuItemIndex)};return L.tsx("li",{bind:this,key:`esri-search__source-${h}`,id:this._buildId("source-item",m?h+1:h),"aria-checked":(h===v).toString(),onclick:this._handleSourceClick,"data-source-index":h,role:"menuitemradio",class:this.classes("esri-search__source","esri-menu__list-item",G)},this._getSourceName(h))};F.renderNoResultsWarning=function(h){const {messages:v}=this;h=h?W.substitute(v.noResultsFoundForValue,{value:`"${h}"`}):v.noResultsFound;return L.tsx("div",{key:"esri-search__no_results"},
L.tsx("div",{class:"esri-search__warning-header"},v.noResults),L.tsx("div",{class:"esri-search__warning-text"},h))};F.renderEmptySearchWarning=function(){const {messages:h}=this;return L.tsx("div",{key:"esri-search__empty-search"},L.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),L.tsx("span",{class:"esri-search__no-value-text"},h.emptyValue))};F.renderLocateWarning=function(){const {messages:h}=this;return L.tsx("div",{key:"esri-search__locate-error"},L.tsx("span",{"aria-hidden":"true",
class:"esri-icon-notice-triangle"}),L.tsx("span",{class:"esri-search__no-value-text"},h.locateError))};F.renderWarning=function(){var h;const {displayedSearchTerm:v,_locateFailed:m}=this,{viewModel:G}=this;return m?this.renderLocateWarning():null!=(h=G.selectedSuggestion)&&h.location||v?this.renderNoResultsWarning(v):this.renderEmptySearchWarning()};F._resetActiveMenuItemIndex=function(){this._activeMenuItemIndex=-1};F._buildId=function(h,v){return`${this.id}-${h}${void 0===v?"":`-${v}`}`};F._watchSourceChanges=
function(){const {_handles:h,viewModel:{allSources:v}}=this;h.remove("sources");v.forEach(m=>h.add(q.watch(m,"name",()=>this.scheduleRender()),"sources"))};F._handleSourcesMenuToggleFocus=function(){"source"!==this.activeMenu&&this._clearActiveMenu()};F._handleSourcesMenuToggleClick=function(){this.activeMenu="source"===this.activeMenu?"none":"source";this.renderNow();if("source"===this.activeMenu){var h;null==(h=this._sourceListNode)?void 0:h.focus()}};F._handleClearButtonClick=function(){this.viewModel.clear();
this._focus()};F._handleSearchButtonClick=function(){this.search()};F._handleSuggestionClick=function(h){if(h=h.currentTarget["data-suggestion"])this._focus(),this.search(h)};F._handleUseCurrentLocationClick=function(){this._useCurrentLocation()};F._useCurrentLocation=function(){this._focus("none");this._cancelSuggest();this._cancelSearch();const h=new AbortController,{signal:v}=h;this._searchController=h;this.viewModel.searchNearby({signal:v}).then(m=>{this.activeMenu=m.numResults?"none":"warning"}).catch(()=>
{this._locateFailed=!0;this.activeMenu="warning"}).then(()=>{this._searchController=null})};F._handleSourceClick=function(h){this._setSourceFromMenuItem(h.currentTarget)};F._setSourceFromMenuItem=function(h){var v;h&&(this.viewModel.activeSourceIndex=h["data-source-index"],this._clearActiveMenu(),null==(v=this._sourceMenuButtonNode)?void 0:v.focus())};F._cancelSuggest=function(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)};F._cancelSearch=function(){this._searchController&&
(this._searchController.abort(),this._searchController=null);this._locateFailed=!1};F._handleInputKeyup=function(h){var v,m=l.eventKey(h);if(!h.ctrlKey&&!h.metaKey&&"Copy"!==m&&"ArrowLeft"!==m&&"ArrowRight"!==m&&"Shift"!==m)if("Tab"===m||"Escape"===m||h.shiftKey&&"Tab"===m)this._cancelSuggest(),"Escape"===m&&this._clearActiveMenu();else{var G="Home"===m||"End"===m||"ArrowUp"===m||"ArrowDown"===m;if("Enter"===m&&0>this._activeMenuItemIndex)this._cancelSuggest();else{var y=null==(v=this._suggestionListNode)?
void 0:v.getElementsByTagName("li");if(null!=y&&y.length){"suggestion"!==this.activeMenu&&this._openSuggestionMenu();if(G){h.preventDefault();this._cancelSuggest();this._handleItemNavigation(m,y,this._suggestionListNode);return}h=y[this._activeMenuItemIndex];if("Enter"===m&&h){(m=h["data-suggestion"])?(this._focus(),this.search(m)):h["data-current-location-item"]&&this._useCurrentLocation();return}}this.viewModel.searchTerm&&this.suggest()}}};F._handleItemNavigation=function(h,v,m){const G=this._activeMenuItemIndex;
"Home"===h&&(this._activeMenuItemIndex=0);"End"===h&&(this._activeMenuItemIndex=v.length-1);"ArrowUp"===h&&(this._activeMenuItemIndex=0>=this._activeMenuItemIndex?v.length-1:this._activeMenuItemIndex-1);"ArrowDown"===h&&(this._activeMenuItemIndex=this._activeMenuItemIndex===v.length-1?0:this._activeMenuItemIndex+1);G!==this._activeMenuItemIndex&&H.keepMenuItemWithinView(v[this._activeMenuItemIndex],m)};F._scrollToTopSuggestion=function(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=
0)};F._openSuggestionMenu=function(){this.activeMenu="suggestion"};F._handleInputPaste=function(h){h=h.target;this.viewModel.searchTerm!==h.value&&(this.viewModel.searchTerm=h.value);this.viewModel.searchTerm&&this.suggest()};F._handleSourceMenuKeydown=function(h){const v=l.eventKey(h);H.isActivationKey(v)?(h.preventDefault(),h=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex],this._setSourceFromMenuItem(h)):"ArrowUp"!==v&&"ArrowDown"!==v&&"End"!==v&&"Home"!==v||h.preventDefault()};
F._handleSourceMenuKeyup=function(h){var v;const m=l.eventKey(h),G="ArrowUp"===m||"ArrowDown"===m||"End"===m||"Home"===m;G&&h.preventDefault();if("Escape"===m){var y;this._clearActiveMenu();null==(y=this._sourceMenuButtonNode)?void 0:y.focus()}else(h=null==(v=this._sourceListNode)?void 0:v.getElementsByTagName("li"))&&0!==h.length&&G&&("source"!==this.activeMenu&&(this.activeMenu="source"),this._handleItemNavigation(m,h,this._sourceListNode.parentElement))};F._focus=function(h){this.focus();h&&(this.activeMenu=
h)};F._formSubmit=function(h){h.preventDefault();-1===this._activeMenuItemIndex&&this.search()};F._getSourceName=function(h){const {messages:v}=this;var {allSources:m}=this.viewModel;m=m.getItemAt(h);return h===I.ALL_INDEX?v.all:m?m.name||v.untitledSource:v.untitledSource};F._splitResult=function(h,v){v=B.escapeRegExpString(v);return h.replace(new RegExp(`(^|)(${v})(|$)`,"ig"),"$1|$2|$3").split("|")};F._renderSearchResultsContent=function(){this._searchResultRenderer.showMoreResultsOpen=!1;this._searchResultRenderer.viewModel=
this.viewModel;return this._searchResultRenderer};n._createClass(aa,[{key:"displayedSearchTerm",get:function(){return`${this.viewModel.searchTerm}`.trim()}},{key:"inputId",get:function(){return this._buildId("input")}},{key:"suggestionsMenuId",get:function(){return this._buildId("suggest-menu")}},{key:"sourceMenuId",get:function(){return this._buildId("source-menu")}},{key:"sourceMenuButtonId",get:function(){return this._buildId("source-menu-button")}}]);return aa}(t);a.__decorate([d.property()],
b.prototype,"_activeMenuItemIndex",void 0);a.__decorate([d.property()],b.prototype,"displayedSearchTerm",null);a.__decorate([d.property({readOnly:!0})],b.prototype,"inputId",null);a.__decorate([d.property({readOnly:!0})],b.prototype,"suggestionsMenuId",null);a.__decorate([d.property({readOnly:!0})],b.prototype,"sourceMenuId",null);a.__decorate([d.property({readOnly:!0})],b.prototype,"sourceMenuButtonId",null);a.__decorate([d.property()],b.prototype,"activeMenu",void 0);a.__decorate([A.aliasOf("viewModel.activeSource")],
b.prototype,"activeSource",void 0);a.__decorate([A.aliasOf("viewModel.activeSourceIndex")],b.prototype,"activeSourceIndex",void 0);a.__decorate([A.aliasOf("viewModel.allPlaceholder")],b.prototype,"allPlaceholder",void 0);a.__decorate([A.aliasOf("viewModel.allSources")],b.prototype,"allSources",void 0);a.__decorate([A.aliasOf("viewModel.autoNavigate")],b.prototype,"autoNavigate",void 0);a.__decorate([A.aliasOf("viewModel.autoSelect")],b.prototype,"autoSelect",void 0);a.__decorate([A.aliasOf("viewModel.defaultSources")],
b.prototype,"defaultSources",void 0);a.__decorate([d.property()],b.prototype,"disabled",void 0);a.__decorate([A.aliasOf("viewModel.goToOverride")],b.prototype,"goToOverride",void 0);a.__decorate([d.property()],b.prototype,"iconClass",void 0);a.__decorate([A.aliasOf("viewModel.includeDefaultSources")],b.prototype,"includeDefaultSources",void 0);a.__decorate([d.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],b.prototype,"label",void 0);a.__decorate([A.aliasOf("viewModel.locationEnabled")],
b.prototype,"locationEnabled",void 0);a.__decorate([A.aliasOf("viewModel.maxResults")],b.prototype,"maxResults",void 0);a.__decorate([A.aliasOf("viewModel.maxSuggestions")],b.prototype,"maxSuggestions",void 0);a.__decorate([d.property(),u.messageBundle("esri/widgets/Search/t9n/Search")],b.prototype,"messages",void 0);a.__decorate([d.property(),u.messageBundle("esri/t9n/common")],b.prototype,"messagesCommon",void 0);a.__decorate([A.aliasOf("viewModel.minSuggestCharacters")],b.prototype,"minSuggestCharacters",
void 0);a.__decorate([A.aliasOf("viewModel.popupEnabled")],b.prototype,"popupEnabled",void 0);a.__decorate([A.aliasOf("viewModel.popupTemplate")],b.prototype,"popupTemplate",void 0);a.__decorate([A.aliasOf("viewModel.portal")],b.prototype,"portal",void 0);a.__decorate([A.aliasOf("viewModel.resultGraphic")],b.prototype,"resultGraphic",void 0);a.__decorate([A.aliasOf("viewModel.resultGraphicEnabled")],b.prototype,"resultGraphicEnabled",void 0);a.__decorate([A.aliasOf("viewModel.results")],b.prototype,
"results",void 0);a.__decorate([A.aliasOf("viewModel.searchAllEnabled")],b.prototype,"searchAllEnabled",void 0);a.__decorate([A.aliasOf("viewModel.searchTerm")],b.prototype,"searchTerm",void 0);a.__decorate([A.aliasOf("viewModel.selectedResult")],b.prototype,"selectedResult",void 0);a.__decorate([A.aliasOf("viewModel.sources")],b.prototype,"sources",void 0);a.__decorate([A.aliasOf("viewModel.suggestions")],b.prototype,"suggestions",void 0);a.__decorate([A.aliasOf("viewModel.suggestionsEnabled")],
b.prototype,"suggestionsEnabled",void 0);a.__decorate([A.aliasOf("viewModel.view")],b.prototype,"view",void 0);a.__decorate([z.vmEvent("search-complete search-clear search-start select-result suggest-start suggest-complete".split(" ")),d.property({type:I})],b.prototype,"viewModel",void 0);a.__decorate([A.aliasOf("viewModel.clear")],b.prototype,"clear",null);return b=a.__decorate([p.subclass("esri.widgets.Search")],b)});