// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/deprecate ../core/domUtils ../core/Evented ../core/Handles ../core/has ../core/lang ../core/Logger ../core/maybe ../core/Promise ../core/promiseUtils ../core/reactiveUtils ../core/uuid ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/subclass ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleTrackingTarget ../libs/maquette-advanced-projector/projector ../chunks/componentsUtils ./support/jsxWidgetSupport ./support/vnodeCache ./support/widgetUtils ./support/widgetThemeUtils ../intl/locale ../intl/messages".split(" "),
function(m,f,d,G,H,I,J,ba,K,L,D,M,w,x,N,g,O,P,Q,R,S,T,A,v,U,V,W,X){function E(k,e){for(const c in e)null!=k[c]&&("object"===typeof k[c]&&"object"===typeof e[c]?E(k[c],e[c]):k[c]=e[c]);return k}const F=L.getLogger("esri.widgets.Widget");let Y=0;const Z=S.createAdvancedProjector({postProcessProjectionOptions(k){const e=k.eventHandlerInterceptor,c=/capture$/i;k.eventHandlerInterceptor=(b,q,a,r)=>{const n=e(b,q,a,r),t=c.test(b);b=b.replace(c,"");if(!(b.toLowerCase()in a)||t){const l=b[2].toLowerCase()+
b.slice(3),p=u=>n.call(a,u);a.addEventListener(l,p,t);const h=r.afterRemoved;r.afterRemoved=u=>{null==h?void 0:h(u);a.removeEventListener(l,p,t)}}return n}},handleInterceptedEvent(k,e,c,b){const {eventPhase:q,type:a}=b,r=q===Event.CAPTURING_PHASE;let n=`on${a}${r?"capture":""}`;e=e.properties;if(!(n in e||(n=`on${a[0].toUpperCase()}${a.slice(1)}${r?"Capture":""}`,n in e)))return;v.clearVNodeCache();k.scheduleRender();e[n].call(e.bind||c,b)}});let B=!1;d=function(k){function e(b,q){var a=k.call(this,
b,q)||this;a._attached=!1;a._internalHandles=new J;a._projector=Z;a._readyForTrueRender=!1;a.domNode=null;a.iconClass="esri-icon-checkbox-unchecked";a.label=a.declaredClass.split(".").pop();a.visible=!0;a.key=m._assertThisInitialized(a);a._loadLocale=w.debounce(m._asyncToGenerator(function*(){if(a._messageBundleProps&&a._messageBundleProps.length){const l=yield w.eachAlways(a._messageBundleProps.map(function(){var p=m._asyncToGenerator(function*({bundlePath:h,propertyName:u}){h=yield X.fetchMessageBundle(h);
a.uiStrings&&Object.keys(a.uiStrings)&&(h=E(K.clone(h),a.uiStrings));a[u]=h});return function(h){return p.apply(this,arguments)}}()));for(const p of l)p.error&&F.error("widget-intl:locale-error",a.declaredClass,p.error)}yield a.loadLocale()}));T.commitAssetPath();b=V.getThemeName()||"light";["light","dark"].includes(b)||G.deprecated(F,"The following themes are deprecated: light-blue, dark-blue, light-green, dark-green, light-purple, dark-purple, light-red, and dark-red.",{version:"4.19",warnOnce:!0,
see:"https://developers.arcgis.com/javascript/latest/styling/"});const r="esri-widget-uid-"+N.generateUUID(),n=a.render.bind(m._assertThisInitialized(a));a._trackingTarget=new R.SimpleTrackingTarget(()=>a.scheduleRender());const t=()=>{var l;if(!a._readyForTrueRender||a.destroyed)return null;if(!a.visible)return{vnodeSelector:"div",properties:{key:r,class:"",styles:{display:"none"}},domNode:void 0,children:void 0,text:void 0};const p=n();let {properties:h}=p;h||(p.properties=h={});let {key:u,styles:y}=
h;u||(h.key=r);y||(h.styles=y={});y.display||(y.display="");let aa=0;null==(l=p.children)?void 0:l.forEach(C=>{if(!A.isWidgetConstructor(C.vnodeSelector)){var {properties:z}=C;z||(C.properties=z={});z.key||(z.key=`${a.id}--${aa++}`)}});return A.processWidgets(m._assertThisInitialized(a),p)};a.render=()=>{if(B)return t();let l=v.getVNodeCache(m._assertThisInitialized(a));if(l)return l;a._trackingTarget.clear();B=!0;try{l=Q.runTracked(a._trackingTarget,t)}finally{B=!1}v.setVNodeCache(m._assertThisInitialized(a),
l);return l};a.addResolvingPromise(a._resourcesFetch=a.beforeFirstRender().then(()=>{a._readyForTrueRender=!0;a._postInitialize()}));return a}m._inheritsLoose(e,k);var c=e.prototype;c.normalizeCtorArgs=function(b,q){b={...b};q&&(b.container=q);return b};c.postInitialize=function(){};c.beforeFirstRender=function(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(w.throwIfNotAbortError)};c.loadDependencies=function(){var b=m._asyncToGenerator(function*(){});return function(){return b.apply(this,
arguments)}}();c.loadLocale=function(){var b=m._asyncToGenerator(function*(){});return function(){return b.apply(this,arguments)}}();c.destroy=function(){this.destroyed||(this._trackingTarget=D.destroyMaybe(this._trackingTarget),this.viewModel=D.destroyMaybe(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,v.deleteVNodeCache(this))};c.castContainer=function(b){return H.byId(b)};
c.render=function(){throw Error("not implemented");};c.scheduleRender=function(){this.destroyed||(v.deleteVNodeCache(this),this._projector.scheduleRender())};c.classes=function(...b){return U.classes.apply(this,b)};c.own=function(b){1<arguments.length&&(b=Array.prototype.slice.call(arguments));this._internalHandles.add(b)};c.renderNow=function(){v.deleteVNodeCache(this);this._projector.renderNow()};c._postInitialize=function(){var b,q=this;this.destroyed||(this.scheduleRender(),null!=(b=this._delegatedEventNames)&&
b.length&&this._internalHandles.add(x.watch(()=>this.viewModel,(a,r)=>{r&&this._internalHandles.remove("delegated-events");a&&this._internalHandles.add(this._delegatedEventNames.map(n=>a.on(n,t=>{this.emit(n,t)})),"delegated-events")},x.initial)),this.postInitialize(),b=function(){var a=m._asyncToGenerator(function*(){yield q._loadLocale().catch(w.throwIfNotAbortError);q.scheduleRender()});return function(){return a.apply(this,arguments)}}(),this._internalHandles.add([W.onLocaleChange(b),x.watch(()=>
this.uiStrings,b),x.when(()=>this.container,a=>{this.destroyed||this._attach(a)},{initial:!0,once:!0})]))};c._attach=function(b){b&&(this._projector.merge(b,this.render),this._attached=!0)};c._detach=function(b){b&&this._attached&&(this._projector.detach(this.render),b.parentNode&&b.parentNode.removeChild(b),this._attached=!1)};m._createClass(e,[{key:"container",set:function(b){this._get("container")||this._set("container",b)}},{key:"id",get:function(){return this._get("id")||this.get("container.id")||
Date.now().toString(16)+"-widget-"+Y++},set:function(b){b&&this._set("id",b)}},{key:"renderable",get:function(){return this._resourcesFetch}},{key:"test",get:function(){return{projector:this._projector,handles:this._internalHandles}}}]);return e}(M.EsriPromiseMixin(I.EventedAccessor));d[A.WIDGET_SYMBOL]=!0;f.__decorate([g.property()],d.prototype,"_readyForTrueRender",void 0);f.__decorate([g.property({value:null})],d.prototype,"container",null);f.__decorate([O.cast("container")],d.prototype,"castContainer",
null);f.__decorate([g.property({aliasOf:"container"})],d.prototype,"domNode",void 0);f.__decorate([g.property()],d.prototype,"iconClass",void 0);f.__decorate([g.property()],d.prototype,"id",null);f.__decorate([g.property()],d.prototype,"label",void 0);f.__decorate([g.property()],d.prototype,"renderable",null);f.__decorate([g.property()],d.prototype,"uiStrings",void 0);f.__decorate([g.property()],d.prototype,"viewModel",void 0);f.__decorate([g.property()],d.prototype,"visible",void 0);f.__decorate([g.property()],
d.prototype,"key",void 0);f.__decorate([g.property()],d.prototype,"children",void 0);f.__decorate([g.property()],d.prototype,"afterCreate",void 0);f.__decorate([g.property()],d.prototype,"afterUpdate",void 0);f.__decorate([g.property()],d.prototype,"afterRemoved",void 0);return d=f.__decorate([P.subclass("esri.widgets.Widget")],d)});