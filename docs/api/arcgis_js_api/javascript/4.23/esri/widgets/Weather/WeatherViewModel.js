// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../views/3d/environment/CloudyWeather ../../views/3d/environment/FoggyWeather ../../views/3d/environment/RainyWeather ../../views/3d/environment/SnowyWeather ../../views/3d/environment/SunnyWeather ../../views/3d/environment/weather ./enums".split(" "),
function(l,d,b,p,q,c,m,g,r,t,u,v,w,x,y,e){const z=q.getLogger("esri.widgets.Weather.WeatherViewModel");b=function(n){function h(a){a=n.call(this,a)||this;a.view=null;a._handles=new p;a._settingWeather=!1;a._weatherByType={sunny:new x,cloudy:new t,rainy:new v,snowy:new w,foggy:new u};return a}l._inheritsLoose(h,n);var k=h.prototype;k.initialize=function(){this._handles.add([m.watch(()=>this.current,a=>{this._settingWeather||c.isNone(a)||(this._weatherByType={...this._weatherByType,[a.type]:a})},m.syncAndInitial)])};
k.destroy=function(){this._handles=c.destroyMaybe(this._handles)};k.setWeatherByType=function(a){if(y.validateWeatherType(a,z)){var f=this._environment;c.isSome(f)&&(this._settingWeather=!0,f.weather=this._weatherByType[a],this._settingWeather=!1)}};l._createClass(h,[{key:"state",get:function(){const a=this.view;if(c.isNone(a)||!a.ready)return e.WeatherState.Disabled;switch(this.error){case "unsupported-view":case "local-scene":return e.WeatherState.Error;default:return e.WeatherState.Ready}}},{key:"error",
get:function(){const a=this.view;return c.isNone(a)||!a.ready?null:"3d"!==a.type?e.WeatherError.UnsupportedView:"local"===a.viewingMode?e.WeatherError.LocalScene:a.environmentManager.weatherVisible?null:e.WeatherError.NotVisible}},{key:"current",get:function(){const a=c.applySome(this._environment,f=>f.weather);return c.unwrapOr(a,this._weatherByType.sunny)},set:function(a){c.applySome(this._environment,f=>f.weather=a)}},{key:"test",get:function(){return{...this._weatherByType}}},{key:"_environment",
get:function(){const a=this.view;return c.isSome(a)&&"3d"===a.type?a.environment:null}}]);return h}(b);d.__decorate([g.property()],b.prototype,"view",void 0);d.__decorate([g.property()],b.prototype,"state",null);d.__decorate([g.property()],b.prototype,"error",null);d.__decorate([g.property()],b.prototype,"current",null);d.__decorate([g.property()],b.prototype,"_environment",null);return b=d.__decorate([r.subclass("esri.widgets.Weather.WeatherViewModel")],b)});