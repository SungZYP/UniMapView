// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/interactive/snapping/SnappingOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./FeatureSnappingLayerSource ./Settings".split(" "),function(d,h,c,B,g,u,F,L,K,M,y){c=function(k){function m(q){q=k.call(this,
q)||this;q.enabled=!1;q.enabledToggled=!1;q.selfEnabled=!0;q.featureEnabled=!0;q.featureSources=new B;q.distance=y.defaults.distance;q.touchSensitivityMultiplier=y.defaults.touchSensitivityMultiplier;return q}d._inheritsLoose(m,k);d._createClass(m,[{key:"effectiveEnabled",get:function(){return this.enabledToggled?!this.enabled:this.enabled}},{key:"effectiveSelfEnabled",get:function(){return this.effectiveEnabled&&this.selfEnabled}},{key:"effectiveFeatureEnabled",get:function(){return this.effectiveEnabled&&
this.featureEnabled}}]);return m}(c);h.__decorate([g.property()],c.prototype,"enabled",void 0);h.__decorate([g.property()],c.prototype,"enabledToggled",void 0);h.__decorate([g.property()],c.prototype,"selfEnabled",void 0);h.__decorate([g.property()],c.prototype,"featureEnabled",void 0);h.__decorate([g.property({type:B.ofType(M)})],c.prototype,"featureSources",void 0);h.__decorate([g.property()],c.prototype,"distance",void 0);h.__decorate([g.property()],c.prototype,"touchSensitivityMultiplier",void 0);
h.__decorate([g.property({readOnly:!0})],c.prototype,"effectiveEnabled",null);h.__decorate([g.property({readOnly:!0})],c.prototype,"effectiveSelfEnabled",null);h.__decorate([g.property({readOnly:!0})],c.prototype,"effectiveFeatureEnabled",null);return c=h.__decorate([K.subclass("esri.views.interactive.snapping.SnappingOptions")],c)})},"esri/views/interactive/snapping/FeatureSnappingLayerSource":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(d,h,c,B,g,u,F,L){c=function(K){function M(y){y=K.call(this,y)||this;y.layer=null;y.enabled=!0;y.updating=!1;y.availability=1;return y}d._inheritsLoose(M,K);return M}(c);h.__decorate([B.property({constructOnly:!0})],c.prototype,"layer",void 0);h.__decorate([B.property()],c.prototype,"enabled",void 0);h.__decorate([B.property()],c.prototype,"updating",void 0);h.__decorate([B.property()],c.prototype,"availability",void 0);return c=h.__decorate([L.subclass("esri.views.interactive.snapping.SnappingLayerSource")],
c)})},"esri/views/interactive/snapping/Settings":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass".split(" "),function(d,h,c,B,g,u,F){let L=function(K){function M(){var y=K.apply(this,arguments)||this;y.enabled=!0;return y}h._inheritsLoose(M,K);return M}(g.JSONSupport);c.__decorate([u.property({type:Boolean})],L.prototype,
"enabled",void 0);L=c.__decorate([F.subclass("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],L);g=function(K){function M(y){y=K.call(this,y)||this;y.lineSnapper=new L;y.parallelLineSnapper=new L;y.rightAngleSnapper=new L;y.rightAngleTriangleSnapper=new L;y.shortLineThreshold=15;y.distance=5;y.pointThreshold=1E-6;y.intersectionParallelLineThreshold=1E-6;y.parallelLineThreshold=1E-6;y.touchSensitivityMultiplier=1.5;y.pointOnLineThreshold=1E-6;y.orange=new B([255,127,0]);y.lineHintWidthReference=
3;y.lineHintWidthTarget=3;y.lineHintFadedExtensions=.3;y.parallelLineHintWidth=2;y.parallelLineHintLength=24;y.parallelLineHintOffset=1.5;y.rightAngleHintSize=24;y.rightAngleHintOutlineSize=1.5;return y}h._inheritsLoose(M,K);return M}(g.JSONSupport);c.__decorate([u.property({type:L,constructOnly:!0,nonNullable:!0,json:{write:!0}})],g.prototype,"lineSnapper",void 0);c.__decorate([u.property({type:L,constructOnly:!0,nonNullable:!0,json:{write:!0}})],g.prototype,"parallelLineSnapper",void 0);c.__decorate([u.property({type:L,
constructOnly:!0,nonNullable:!0,json:{write:!0}})],g.prototype,"rightAngleSnapper",void 0);c.__decorate([u.property({type:L,constructOnly:!0,nonNullable:!0,json:{write:!0}})],g.prototype,"rightAngleTriangleSnapper",void 0);c.__decorate([u.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],g.prototype,"shortLineThreshold",void 0);c.__decorate([u.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],g.prototype,"distance",void 0);c.__decorate([u.property({type:Number,
nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],g.prototype,"pointThreshold",void 0);c.__decorate([u.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],g.prototype,"intersectionParallelLineThreshold",void 0);c.__decorate([u.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],g.prototype,"parallelLineThreshold",void 0);c.__decorate([u.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],g.prototype,"touchSensitivityMultiplier",
void 0);c.__decorate([u.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],g.prototype,"pointOnLineThreshold",void 0);c.__decorate([u.property({type:B,nonNullable:!0})],g.prototype,"orange",void 0);c.__decorate([u.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],g.prototype,"lineHintWidthReference",void 0);c.__decorate([u.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],g.prototype,"lineHintWidthTarget",void 0);c.__decorate([u.property({type:Number,
nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],g.prototype,"lineHintFadedExtensions",void 0);c.__decorate([u.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],g.prototype,"parallelLineHintWidth",void 0);c.__decorate([u.property({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],g.prototype,"parallelLineHintLength",void 0);c.__decorate([u.property({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],g.prototype,"parallelLineHintOffset",
void 0);c.__decorate([u.property({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],g.prototype,"rightAngleHintSize",void 0);c.__decorate([u.property({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],g.prototype,"rightAngleHintOutlineSize",void 0);g=c.__decorate([F.subclass("esri.views.interactive.snapping.Settings.Defaults")],g);c=new g;d.defaults=c;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/widgets/Attachments":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/unitFormatUtils ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Attachments/AttachmentsViewModel ./Attachments/support/attachmentUtils ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/jsxFactory".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p,E,x){const A={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},r=window.CSS;F=function(G){function H(e,z){e=G.call(this,e,z)||this;e.abilities=null;e.displayType="auto";e.graphic=null;e.label=void 0;e.messages=null;e.messagesUnits=null;e.selectedFile=null;e.submitting=!1;e.viewModel=new m;e.visibleElements={...A};e._supportsImageOrientation=r&&r.supports&&r.supports("image-orientation",
"from-image");e._addAttachmentForm=null;e._updateAttachmentForm=null;return e}d._inheritsLoose(H,G);var w=H.prototype;w.initialize=function(){this.own(g.on(this,"viewModel.attachmentInfos","change",()=>this.scheduleRender()),g.init(this,"viewModel.mode",()=>this._modeChanged()))};w.castVisibleElements=function(e){return{...A,...e}};w.addAttachment=function(){const {_addAttachmentForm:e,viewModel:z}=this;this._set("submitting",!0);this._set("error",null);return z.addAttachment(e).then(S=>{this._set("submitting",
!1);this._set("error",null);z.mode="view";return S}).catch(S=>{this._set("submitting",!1);this._set("error",new c("attachments:add-attachment",this.messages.addErrorMessage,S));throw S;})};w.deleteAttachment=function(e){const {viewModel:z}=this;this._set("submitting",!0);this._set("error",null);return z.deleteAttachment(e).then(S=>{this._set("submitting",!1);this._set("error",null);z.mode="view";return S}).catch(S=>{this._set("submitting",!1);this._set("error",new c("attachments:delete-attachment",
this.messages.deleteErrorMessage,S));throw S;})};w.updateAttachment=function(){const {viewModel:e}=this,{_updateAttachmentForm:z}=this;this._set("submitting",!0);this._set("error",null);return e.updateAttachment(z).then(S=>{this._set("submitting",!1);this._set("error",null);e.mode="view";return S}).catch(S=>{this._set("submitting",!1);this._set("error",new c("attachments:update-attachment",this.messages.updateErrorMessage,S));throw S;})};w.render=function(){const {submitting:e,viewModel:z}=this,{state:S}=
z;return x.tsx("div",{class:this.classes("esri-attachments","esri-widget")},e?this.renderProgressBar():null,"loading"===S?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())};w.renderErrorMessage=function(){const {error:e,visibleElements:z}=this;return e&&z.errorMessage?x.tsx("div",{key:"error-message",class:"esri-attachments__error-message"},e.message):null};w.renderAttachments=function(){const {mode:e,activeAttachmentInfo:z}=this.viewModel;return"add"===e?this.renderAddForm():
"edit"===e?this.renderDetailsForm(z):this.renderAttachmentContainer()};w.renderLoading=function(){return x.tsx("div",{class:"esri-attachments__loader-container",key:"loader"},x.tsx("div",{class:"esri-attachments__loader"}))};w.renderProgressBar=function(){return this.visibleElements.progressBar?x.tsx("div",{class:"esri-attachments__progress-bar",key:"progress-bar"}):null};w.renderAddForm=function(){const {submitting:e,selectedFile:z}=this;var S=e||!z,J=this.visibleElements.cancelAddButton?x.tsx("button",
{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--tertiary","esri-button--small","esri-button--half",e&&"esri-button--disabled")},this.messages.cancel):null;S=this.visibleElements.addSubmitButton?x.tsx("button",{type:"submit",disabled:S,class:this.classes("esri-button","esri-button--secondary","esri-button--small","esri-button--half",{["esri-button--disabled"]:S})},this.messages.add):null;const O=z?x.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},
z.name):null;J=x.tsx("form",{bind:this,afterCreate:I.storeNode,afterRemoved:I.discardNode,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},x.tsx("fieldset",{class:"esri-attachments__file-fieldset"},O,x.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},z?this.messages.changeFile:this.messages.selectFile,x.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),
S,J);return x.tsx("div",{key:"add-form-container",class:"esri-attachments__form-node"},J)};w.renderDetailsForm=function(e){const {visibleElements:z,viewModel:S,selectedFile:J,submitting:O}=this,{contentType:t,size:l,url:b}=e;var {abilities:f}=S,n=O||!J,P=f.editing&&f.operations.delete&&z.deleteButton?x.tsx("button",{key:"delete-button",type:"button",disabled:O,bind:this,onclick:N=>this._submitDeleteAttachment(N,e),class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-attachments__delete-button",
{["esri-button--disabled"]:O})},this.messages.delete):null;n=f.editing&&f.operations.update&&z.updateButton?x.tsx("button",{disabled:n,key:"update-button",type:"submit",class:this.classes("esri-button","esri-button--small","esri-button--third",{["esri-button--disabled"]:n})},this.messages.update):null;const U=this.visibleElements.cancelUpdateButton?x.tsx("button",{disabled:O,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--small",
"esri-button--tertiary","esri-button--third",{["esri-button--disabled"]:O})},this.messages.cancel):null;var T=J?x.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},J.name):null;f=f.editing&&f.operations.update?x.tsx("fieldset",{key:"file",class:"esri-attachments__file-fieldset"},T,x.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},this.messages.changeFile,x.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",
bind:this,onchange:this._handleFileInputChange}))):null;T=x.tsx("fieldset",{key:"size",class:"esri-attachments__metadata-fieldset"},x.tsx("label",null,B.formatFileSize(this.messagesUnits,l)));const v=x.tsx("fieldset",{key:"content-type",class:"esri-attachments__metadata-fieldset"},x.tsx("label",null,t));P=x.tsx("form",{bind:this,afterCreate:I.storeNode,afterRemoved:I.discardNode,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},x.tsx("div",{class:"esri-attachments__metadata"},
T,v),f,x.tsx("div",{class:"esri-attachments__actions"},P,U,n));return x.tsx("div",{key:"edit-form-container",class:"esri-attachments__form-node"},x.tsx("a",{class:"esri-attachments__item-link",href:b,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:e,size:400}),x.tsx("div",{class:"esri-attachments__item-link-overlay"},x.tsx("span",{class:"esri-attachments__item-link-overlay-icon"},x.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},x.tsx("path",
{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),x.tsx("path",{fill:"none",d:"M0 0h32v32H0z"}))))),P)};w.renderImageMask=function({attachmentInfo:e,size:z}){var {supportsResizeAttachments:S}=this.viewModel;const {contentType:J,name:O,url:t}=e,l=S&&q.isSupportedImage(J);e=(e=this._getCSSTransform(e,l))?{transform:e,"image-orientation":"none"}:{};const b=-1===t.indexOf("?")?"?":"\x26";z=l?`${t}${b}w=${z}`:q.getIconPath(J);S={["esri-attachments__image--resizable"]:S};
return x.tsx("div",{class:this.classes({["esri-attachments__item-mask--icon"]:!l},"esri-attachments__item-mask")},x.tsx("img",{styles:e,alt:O,src:z,class:this.classes(S,"esri-attachments__image")}))};w.renderAttachmentInfo=function({attachmentInfo:e,displayType:z}){var {viewModel:S}=this;({abilities:S}=S);const {name:J,url:O}=e;z=this.renderImageMask({attachmentInfo:e,size:"list"===z?48:400});var t=S.editing?x.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",
I.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}):null;t=x.tsx("label",{class:"esri-attachments__label"},x.tsx("span",{class:"esri-attachments__filename"},J||this.messages.noTitle),t);z=[z,t];S=S.editing?x.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},z):x.tsx("a",{key:"details-link",
class:"esri-attachments__item-button",href:O,target:"_blank"},z);return x.tsx("li",{class:"esri-attachments__item",key:e},S)};w.renderAttachmentContainer=function(){const {effectiveDisplayType:e,viewModel:z,visibleElements:S}=this,{attachmentInfos:J,abilities:O}=z;var t=J&&J.length;const l={["esri-attachments__container--list"]:"preview"!==e,["esri-attachments__container--preview"]:"preview"===e},b=O.editing&&O.operations.add&&S.addButton?x.tsx("button",{bind:this,onclick:()=>this._startAddAttachment(),
class:this.classes("esri-button","esri-button--tertiary","esri-attachments__add-attachment-button"),type:"button"},x.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon","esri-icon-plus")}),this.messages.add):null;t=t?x.tsx("ul",{class:"esri-attachments__items"},J.toArray().map(f=>this.renderAttachmentInfo({attachmentInfo:f,displayType:e}))):x.tsx("div",{class:"esri-widget__content--empty"},this.messages.noAttachments);return x.tsx("div",{key:"attachments-container",
class:this.classes("esri-attachments__container",l)},t,b)};w._modeChanged=function(){this._set("error",null);this._set("selectedFile",null)};w._handleFileInputChange=function(e){e=(e=e.target)&&e.files&&e.files.item(0);this._set("selectedFile",e)};w._submitDeleteAttachment=function(e,z){e.preventDefault();this.deleteAttachment(z)};w._submitAddAttachment=function(e){e.preventDefault();this.addAttachment()};w._submitUpdateAttachment=function(e){e.preventDefault();this.updateAttachment()};w._startEditAttachment=
function(e){const {viewModel:z}=this;z.activeAttachmentInfo=e;z.mode="edit"};w._startAddAttachment=function(){this.viewModel.mode="add"};w._cancelForm=function(e){e.preventDefault();this.viewModel.mode="view"};w._getCSSTransform=function(e,z){({orientationInfo:e}=e);return!this._supportsImageOrientation&&z&&e?[e.rotation?`rotate(${e.rotation}deg)`:"",e.mirrored?"scaleX(-1)":""].join(" "):""};d._createClass(H,[{key:"effectiveDisplayType",get:function(){const {displayType:e}=this;return e&&"auto"!==
e?e:this.viewModel.supportsResizeAttachments?"preview":"list"}}]);return H}(k);h.__decorate([u.aliasOf("viewModel.abilities")],F.prototype,"abilities",void 0);h.__decorate([M.property()],F.prototype,"displayType",void 0);h.__decorate([M.property({readOnly:!0})],F.prototype,"effectiveDisplayType",null);h.__decorate([u.aliasOf("viewModel.graphic")],F.prototype,"graphic",void 0);h.__decorate([M.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],F.prototype,"label",void 0);h.__decorate([M.property(),
p.messageBundle("esri/widgets/Attachments/t9n/Attachments")],F.prototype,"messages",void 0);h.__decorate([M.property(),p.messageBundle("esri/core/t9n/Units")],F.prototype,"messagesUnits",void 0);h.__decorate([M.property({readOnly:!0})],F.prototype,"selectedFile",void 0);h.__decorate([M.property({readOnly:!0})],F.prototype,"submitting",void 0);h.__decorate([M.property({readOnly:!0})],F.prototype,"error",void 0);h.__decorate([M.property({type:m})],F.prototype,"viewModel",void 0);h.__decorate([M.property()],
F.prototype,"visibleElements",void 0);h.__decorate([K.cast("visibleElements")],F.prototype,"castVisibleElements",null);return F=h.__decorate([y.subclass("esri.widgets.Attachments")],F)})},"esri/core/unitFormatUtils":function(){define("exports ./byteSizeEstimations ./mathUtils ./string ./unitUtils ../intl/number".split(" "),function(d,h,c,B,g,u){function F(M,y,k){return M.units[y][k]}function L(M,y,k,m=2,q="abbr"){return`${u.formatNumber(y,{minimumFractionDigits:m,maximumFractionDigits:m})} ${F(M,
k,q)}`}const K=["B","kB","MB","GB","TB"];d.formatAngleDegrees=function(M,y,k=2){M=g.convertUnit(M,y,"degrees");return u.formatNumber(M,{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:k,minimumFractionDigits:k})};d.formatDMS=function(M,y,k=2){M=g.convertUnit(M,y,"degrees");y=M-Math.floor(M);M-=y;y*=60;let m=y-Math.floor(y);y-=m;m*=60;return`${M.toFixed()}\u00b0 ${y.toFixed()}' ${m.toFixed(k)}"`};d.formatDecimal=L;d.formatFileSize=function(M,y){let k=0===y?0:Math.floor(Math.log(y)/
Math.log(h.ByteSizeUnit.KILOBYTES));k=c.clamp(k,0,K.length-1);y=u.formatNumber(y/h.ByteSizeUnit.KILOBYTES**k,{maximumFractionDigits:2});return B.replace(M.units.bytes[K[k]],{fileSize:y})};d.formatImperialArea=function(M,y,k,m=2,q="abbr"){const I=g.preferredImperialAreaUnit(y,k);return L(M,g.convertUnit(y,k,I),I,m,q)};d.formatImperialLength=function(M,y,k,m=2,q="abbr"){const I=g.preferredImperialLengthUnit(y,k);return L(M,g.convertUnit(y,k,I),I,m,q)};d.formatImperialVerticalLength=function(M,y,k,m=
2,q="abbr"){const I=g.preferredImperialVerticalLengthUnit(y,k);return L(M,g.convertUnit(y,k,I),I,m,q)};d.formatMetricArea=function(M,y,k,m=2,q="abbr"){const I=g.preferredMetricAreaUnit(y,k);return L(M,g.convertUnit(y,k,I),I,m,q)};d.formatMetricLength=function(M,y,k,m=2,q="abbr"){const I=g.preferredMetricLengthUnit(y,k);return L(M,g.convertUnit(y,k,I),I,m,q)};d.formatMetricVerticalLength=function(M,y,k,m=2,q="abbr"){const I=g.preferredMetricVerticalLengthUnit(y,k);return L(M,g.convertUnit(y,k,I),I,
m,q)};d.unitName=F;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(d){function h(c){return 32+c.length}d.ByteSizeUnit=void 0;(function(c){c[c.KILOBYTES=1024]="KILOBYTES";c[c.MEGABYTES=1048576]="MEGABYTES";c[c.GIGABYTES=1073741824]="GIGABYTES"})(d.ByteSizeUnit||(d.ByteSizeUnit={}));d.estimateAttributesObjectSize=function(c){if(!c)return 0;let B=32;for(const g in c)if(c.hasOwnProperty(g)){const u=c[g];switch(typeof u){case "string":B+=
h(u);break;case "number":B+=16;break;case "boolean":B+=4}}return B};d.estimateFixedArraySize=function(c,B){return 32+c.length*B};d.estimateNumberByteSize=function(){return 16};d.estimateStringByteSize=h;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/widgets/Attachments/AttachmentsViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Collection ../../core/Error ../../core/HandleOwner ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../Feature/support/featureUtils".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p){const E={editing:!1,operations:{add:!0,update:!0,delete:!0}},x=B.ofType(q);B=function(A){function r(H){var w=A.call(this,H)||this;w._getAttachmentsPromise=null;w._attachmentLayer=null;w.abilities={...E};w.activeAttachmentInfo=null;w.attachmentInfos=new x;w.graphic=null;w.mode="view";w.handles.add([L.init(d._assertThisInitialized(w),"graphic",()=>w._graphicChanged())]);return w}d._inheritsLoose(r,A);var G=r.prototype;G.destroy=function(){this.graphic=this._attachmentLayer=
null};G.castAbilities=function(H){return{...E,...H}};G.getAttachments=function(){var H=d._asyncToGenerator(function*(){const {_attachmentLayer:w,attachmentInfos:e}=this;if(!w||"function"!==typeof w.queryAttachments)throw new g("invalid-layer","getAttachments(): A valid layer is required.");const z=this._getFeatureId();var S=new I({objectIds:[z],returnMetadata:!0});const J=[];this._getAttachmentsPromise=S=w.queryAttachments(S).then(O=>O[z]||J).catch(()=>J);this.notifyChange("state");S=yield S;e.removeAll();
S.length&&e.addMany(S);this._getAttachmentsPromise=null;this.notifyChange("state");return S});return function(){return H.apply(this,arguments)}}();G.addAttachment=function(){var H=d._asyncToGenerator(function*(w){const {_attachmentLayer:e,attachmentInfos:z,graphic:S,abilities:J}=this;if(!w)throw new g("invalid-attachment","addAttachment(): An attachment is required.",{attachment:w});if(!J.operations.add)throw new g("invalid-abilities","addAttachment(): add abilities are required.");if(!e||"function"!==
typeof e.addAttachment)throw new g("invalid-layer","addAttachment(): A valid layer is required.");w=yield e.addAttachment(S,w).then(O=>this._queryAttachment(O.objectId));z.add(w);return w});return function(w){return H.apply(this,arguments)}}();G.deleteAttachment=function(){var H=d._asyncToGenerator(function*(w){const {_attachmentLayer:e,attachmentInfos:z,graphic:S,abilities:J}=this;if(!w)throw new g("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:w});
if(!J.operations.delete)throw new g("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!e||"function"!==typeof e.deleteAttachments)throw new g("invalid-layer","deleteAttachment(): A valid layer is required.");const O=yield e.deleteAttachments(S,[w.id]).then(()=>w);z.remove(O);return O});return function(w){return H.apply(this,arguments)}}();G.updateAttachment=function(){var H=d._asyncToGenerator(function*(w,e=this.activeAttachmentInfo){const {_attachmentLayer:z,attachmentInfos:S,
graphic:J,abilities:O}=this;if(!w)throw new g("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:w});if(!e)throw new g("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!O.operations.update)throw new g("invalid-abilities","updateAttachment(): Update abilities are required.");const t=S.findIndex(l=>l===e);if(!z||"function"!==typeof z.updateAttachment)throw new g("invalid-layer","updateAttachment(): A valid layer is required.");
w=yield z.updateAttachment(J,e.id,w).then(l=>this._queryAttachment(l.objectId));S.splice(t,1,w);return w});return function(w){return H.apply(this,arguments)}}();G._queryAttachment=function(){var H=d._asyncToGenerator(function*(w){if(!w)throw new g("invalid-attachment-id","Could not query attachment.");const {_attachmentLayer:e}=this,z=this._getFeatureId();w=new I({objectIds:[z],attachmentsWhere:`AttachmentId=${w}`,returnMetadata:!0});return e.queryAttachments(w).then(S=>S[z][0])});return function(w){return H.apply(this,
arguments)}}();G._getFeatureId=function(){const {_attachmentLayer:H,graphic:w}=this;if(!H||!w)return null;const {objectIdField:e}=H,{attributes:z}=w;return z&&z[e]};G._graphicChanged=function(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))};G._setAttachmentLayer=function(){var {graphic:H}=this;this._attachmentLayer=(H=p.getSourceLayer(H))?"scene"===H.type&&F.isSome(H.associatedLayer)?H.associatedLayer:H:null};d._createClass(r,[{key:"state",get:function(){return this._getAttachmentsPromise?
"loading":this.graphic?"ready":"disabled"}},{key:"supportsResizeAttachments",get:function(){return this.get("graphic.layer.capabilities.operations.supportsResizeAttachments")||!1}}]);return r}(u.HandleOwner);h.__decorate([K.property()],B.prototype,"abilities",void 0);h.__decorate([k.cast("abilities")],B.prototype,"castAbilities",null);h.__decorate([K.property()],B.prototype,"activeAttachmentInfo",void 0);h.__decorate([K.property({readOnly:!0,type:x})],B.prototype,"attachmentInfos",void 0);h.__decorate([K.property({type:c})],
B.prototype,"graphic",void 0);h.__decorate([K.property()],B.prototype,"mode",void 0);h.__decorate([K.property({readOnly:!0})],B.prototype,"state",null);h.__decorate([K.property({readOnly:!0})],B.prototype,"supportsResizeAttachments",null);return B=h.__decorate([m.subclass("esri.widgets.Attachments.AttachmentsViewModel")],B)})},"esri/widgets/Feature/support/featureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Logger ../../../core/maybe ../../../core/string ../../../intl/date ../../../intl/number ../../../layers/support/fieldUtils ../../../popup/support/FieldInfoFormat ../../../support/arcadeOnDemand".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y){function k(){k=h._asyncToGenerator(function*(fa,la){return"function"===typeof fa?fa.call(null,la):fa});return k.apply(this,arguments)}function m(fa){return fa?W.test(fa):!1}function q(fa,la){if(!m(la)||!fa)return null;const ma=la.replace(W,"").toLowerCase();let aa;fa.some(ba=>ba.name.toLowerCase()===ma?(aa=ba,!0):!1);return aa}function I(fa,la){return(la=p(la,fa))?la.name:fa}function p(fa,la){return fa&&"function"===typeof fa.getField?fa.getField(la):null}function E({formattedAttributes:fa,
template:la,fieldInfoMap:ma}){return`${u.replace(u.replace(la,aa=>{{const ba=ma.get(aa.toLowerCase());aa=`{${ba&&ba.fieldName||aa}}`}return aa}),fa).replace(v,"")}`.trim()}function x(fa,la,ma=!1){const aa=la[fa];"string"===typeof aa&&(ma=(ma?encodeURIComponent(aa):aa).replace(R,"%27"),la[fa]=ma)}function A(fa,la=!1){const ma={...fa};Object.keys(ma).forEach(aa=>x(aa,ma,la));return ma}function r(fa,la){return fa.replace(N,(ma,aa,ba)=>(ma=p(la,ba))?`{${ma.name}}`:aa)}function G(fa,la,ma){return(fa=r(fa,
ma))?fa.replace(qa,(aa,ba,ha)=>{ba=`${ba||ha}`.trim();return u.replace(aa,A(la,ba&&"{"!==ba[0]))}):fa}function H(fa,la){var ma=la.fieldName,aa=w(la.fieldInfos,ma),ba=null==aa?void 0:aa.clone();aa=la.preventPlacesFormatting;la=la.layer;ma=p(la,ma);if(ba&&"date"===(null==ma?void 0:ma.type)){ma=ba.format||new M;ma.dateFormat=ma.dateFormat||"short-date-short-time";var ha;if(!(ha="feature"===(null==la?void 0:la.type)&&la.datesInUnknownTimezone)){if(ha=!(null==la||!la.layer))ha=la.layer,ha="map-image"===
(null==ha?void 0:ha.type);ha=ha&&la.layer.datesInUnknownTimezone}ma.dateTimeFormatOptions=ha?{timeZone:"UTC"}:null;ba.format=ma}ba=ba&&ba.format;"string"!==typeof fa||!ba||null!=ba.dateFormat||null==ba.places&&null==ba.digitSeparator||(la=Number(fa),isNaN(la)||(fa=la));return"string"===typeof fa||null==fa||null==ba?S(fa):aa?L.formatNumber(fa,{...L.convertNumberFormatToIntlOptions(ba),minimumFractionDigits:0,maximumFractionDigits:20}):ba.format(fa)}function w(fa,la){if(fa&&fa.length&&la){var ma=la.toLowerCase(),
aa=void 0;fa.some(ba=>ba.fieldName&&ba.fieldName.toLowerCase()===ma?(aa=ba,!0):!1);return aa}}function e({fieldName:fa,graphic:la,layer:ma}){if(n(fa)||!ma||"function"!==typeof ma.getFeatureType)return null;const {typeIdField:aa}=ma;return aa&&fa===aa?(fa=ma.getFeatureType(la))?fa.name:null:null}function z({fieldName:fa,value:la,graphic:ma,layer:aa}){return n(fa)||!aa||"function"!==typeof aa.getFieldDomain?null:(fa=aa.getFieldDomain(fa,{feature:ma}))&&"coded-value"===fa.type?fa.getName(la):null}function S(fa){return"string"===
typeof fa?fa.replace(ea,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):fa}function J(fa){const {value:la,fieldName:ma,fieldInfos:aa,fieldInfoMap:ba,layer:ha,graphic:ka}=fa;return null==la?"":(fa=z({fieldName:ma,value:la,graphic:ka,layer:ha}))||(fa=e({fieldName:ma,graphic:ka,layer:ha}))?fa:ba.get(ma.toLowerCase())?H(la,{fieldInfos:aa,fieldName:ma,layer:ha}):(fa=ha&&ha.fieldsIndex)&&fa.isDateField(ma)?F.formatDate(la,Ca):S(la)}function O(fa,la){return t.apply(this,arguments)}function t(){t=h._asyncToGenerator(function*(fa,
la){var ma,aa;const {layer:ba,graphic:ha,outFields:ka,objectIds:pa,returnGeometry:oa,spatialReference:ra}=fa;fa=pa[0];if("number"!==typeof fa&&"string"!==typeof fa)return T.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",{layer:ba,graphic:ha,objectId:fa,requiredFields:ka}),null;if(null==(ma=ba.capabilities)||null==(aa=ma.operations)||!aa.supportsQuery)return T.warn("The specified layer cannot be queried. The following fields will not be available.",{layer:ba,
graphic:ha,requiredFields:ka,returnGeometry:oa}),null;ma=ba.createQuery();ma.objectIds=pa;ma.outFields=null!=ka&&ka.length?ka:[ba.objectIdField];ma.returnGeometry=!!oa;ma.returnZ=!!oa;ma.returnM=!!oa;ma.outSpatialReference=ra;return(yield ba.queryFeatures(ma,la)).features[0]});return t.apply(this,arguments)}function l(fa){return b.apply(this,arguments)}function b(){b=h._asyncToGenerator(function*(fa){var la;if(null==(la=fa.expressionInfos)||!la.length)return!1;la=yield y.loadArcade();({arcadeUtils:{hasGeometryFunctions:la}}=
la);return la(fa)});return b.apply(this,arguments)}function f(){f=h._asyncToGenerator(function*({graphic:fa,popupTemplate:la,layer:ma,spatialReference:aa},ba){if(ma&&la&&("function"===typeof ma.load&&(yield ma.load(ba)),fa.attributes)){var ha=fa.attributes[ma.objectIdField];if(null!=ha){ha=[ha];var ka=yield la.getRequiredFields(ma.fieldsIndex),pa=K.featureHasFields(ka,fa);ka=pa?[]:ka;la=la.returnGeometry||(yield l(la));if(!pa||la)if(ma=yield O({layer:ma,graphic:fa,outFields:ka,objectIds:ha,returnGeometry:la,
spatialReference:aa},ba))ma.geometry&&(fa.geometry=ma.geometry),ma.attributes&&(fa.attributes={...fa.attributes,...ma.attributes})}}});return f.apply(this,arguments)}function n(fa=""){return fa?-1!==fa.indexOf("relationships/"):!1}function P({attributes:fa,graphic:la,relatedInfo:ma}){fa&&la&&ma&&Object.keys(la.attributes).forEach(aa=>{var ba={layerId:ma.relation.id.toString(),fieldName:aa};fa[ba?`${"relationships/"}${ba.layerId}/${ba.fieldName}`:""]=la.attributes[aa]})}function U(fa,la){fa&&la&&(la.relatedFeatures&&
la.relatedFeatures&&la.relatedFeatures.forEach(ma=>P({attributes:fa,graphic:ma,relatedInfo:la})),la.relatedStatsFeatures&&la.relatedStatsFeatures&&la.relatedStatsFeatures.forEach(ma=>P({attributes:fa,graphic:ma,relatedInfo:la})))}const T=B.getLogger("esri.widgets.Feature.support.featureUtils"),v=/href=(""|'')/gi,N=/(\{([^\{\r\n]+)\})/g,R=/'/g,W=/^\s*expression\//i,ea=/(\n)/gi,da=/[\u00A0-\u9999<>&]/gim,qa=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,va=/^(?:mailto:|tel:)/,Ca=F.convertDateFormatToIntlOptions("short-date-short-time"),
Ba=fa=>{if(!fa)return!1;fa=fa.toUpperCase();return-1<fa.indexOf("CURRENT_TIMESTAMP")||-1<fa.indexOf("CURRENT_DATE")||-1<fa.indexOf("CURRENT_TIME")},ta=({layer:fa,method:la,query:ma,definitionExpression:aa})=>{var ba,ha;null!=(ba=fa.capabilities)&&null!=(ha=ba.query)&&ha.supportsCacheHint&&"attachments"!==la&&(fa=g.isSome(ma.where)&&ma.where,la=g.isSome(ma.geometry)&&ma.geometry,Ba(aa)||Ba(fa)||"extent"===(null==la?void 0:la.type)||"tile"===ma.resultType||(ma.cacheHint=!0))};d.applyTextFormattingHTML=
S;d.createfieldInfoMap=function(fa,la){const ma=new Map;fa&&fa.forEach(aa=>{const ba=I(aa.fieldName,la);aa.fieldName=ba;ma.set(ba.toLowerCase(),aa)});return ma};d.fixTokens=r;d.formatAttributes=function({fieldInfos:fa,attributes:la,layer:ma,graphic:aa,fieldInfoMap:ba,relatedInfos:ha}){const ka={};null==ha?void 0:ha.forEach(pa=>U(ka,pa));Object.keys(la).forEach(pa=>{ka[pa]=J({fieldName:pa,fieldInfos:fa,fieldInfoMap:ba,layer:ma,value:la[pa],graphic:aa})});return ka};d.formatEditInfo=function(fa,la){const {creatorField:ma,
creationDateField:aa,editorField:ba,editDateField:ha}=fa;if(la){fa=la[ha];if("number"===typeof fa)return la=la[ba],{type:"edit",date:F.formatDate(fa,Ca),user:la};fa=la[aa];return"number"===typeof fa?(la=la[ma],{type:"create",date:F.formatDate(fa,Ca),user:la}):null}};d.formatValueToFieldInfo=H;d.getAllFieldInfos=function(fa){const la=[];if(!fa)return la;const {fieldInfos:ma,content:aa}=fa;ma&&la.push(...ma);if(!aa||!Array.isArray(aa))return la;aa.forEach(ba=>{"fields"===ba.type&&(ba=ba&&ba.fieldInfos)&&
la.push(...ba)});return la};d.getFieldInfo=w;d.getFieldInfoLabel=function(fa,la){return(la=q(la,null==fa?void 0:fa.fieldName))?la.title||null:fa?fa.label||fa.fieldName:null};d.getFixedFieldName=I;d.getFixedFieldNames=function(fa,la){return fa&&fa.map(ma=>I(ma,la))};d.getSourceLayer=function(fa){if(!g.isNone(fa))return fa.get("sourceLayer")||fa.get("layer")};d.graphicCallback=function(fa,la){return k.apply(this,arguments)};d.htmlEntities=function(fa){return fa.replace(da,la=>`&#${la.charCodeAt(0)};`)};
d.isExpressionField=m;d.isRelatedField=n;d.preLayerQueryCallback=({query:fa,layer:la,method:ma})=>{ta({layer:la,method:ma,query:fa,definitionExpression:`${la.definitionExpression} ${la.serviceDefinitionExpression}`})};d.preRequestCallback=({queryPayload:fa,layer:la,method:ma})=>{ta({layer:la,method:ma,query:fa,definitionExpression:`${la.definitionExpression} ${la.serviceDefinitionExpression}`})};d.queryUpdatedFeature=function(fa,la){return f.apply(this,arguments)};d.shouldOpenInNewTab=function(fa=
""){if(fa)return!va.test(fa.trim().toLowerCase())};d.substituteAttributes=E;d.substituteFieldsInLinksAndAttributes=function({attributes:fa,globalAttributes:la,layer:ma,text:aa,expressionAttributes:ba,fieldInfoMap:ha}){return aa?E({formattedAttributes:la,template:G(aa,{...la,...ba,...fa},ma),fieldInfoMap:ha}):""};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/widgets/Attachments/support/attachmentUtils":function(){define(["exports","../../../assets"],function(d,h){d.getIconPath=function(c){const B=
h.getAssetUrl("esri/themes/base/images/files/");return c?"text/plain"===c?`${B}text-32.svg`:"application/pdf"===c?`${B}pdf-32.svg`:"text/csv"===c?`${B}csv-32.svg`:"application/gpx+xml"===c?`${B}gpx-32.svg`:"application/x-dwf"===c?`${B}cad-32.svg`:"application/postscript"===c||"application/json"===c||"text/xml"===c||"model/vrml"===c?`${B}code-32.svg`:"application/x-zip-compressed"===c||"application/x-7z-compressed"===c||"application/x-gzip"===c||"application/x-tar"===c||"application/x-gtar"===c||"application/x-bzip2"===
c||"application/gzip"===c||"application/x-compress"===c||"application/x-apple-diskimage"===c||"application/x-rar-compressed"===c||"application/zip"===c?`${B}zip-32.svg`:-1!==c.indexOf("image/")?`${B}image-32.svg`:-1!==c.indexOf("audio/")?`${B}sound-32.svg`:-1!==c.indexOf("video/")?`${B}video-32.svg`:-1!==c.indexOf("msexcel")||-1!==c.indexOf("ms-excel")||-1!==c.indexOf("spreadsheetml")?`${B}excel-32.svg`:-1!==c.indexOf("msword")||-1!==c.indexOf("ms-word")||-1!==c.indexOf("wordprocessingml")?`${B}word-32.svg`:
-1!==c.indexOf("powerpoint")||-1!==c.indexOf("presentationml")?`${B}report-32.svg`:`${B}generic-32.svg`:`${B}generic-32.svg`};d.isSupportedImage=function(c){c=c.toLowerCase();return"image/bmp"===c||"image/emf"===c||"image/exif"===c||"image/gif"===c||"image/x-icon"===c||"image/jpeg"===c||"image/png"===c||"image/tiff"===c||"image/x-wmf"===c};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/widgets/FeatureForm":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/compilerUtils ../core/maybe ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ../layers/support/domainUtils ../layers/support/fieldUtils ./Widget ./FeatureForm/FeatureFormViewModel ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/decorators/vmEvent ./support/jsxFactory ../chunks/datetime ../intl/locale".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p,E,x,A,r,G,H,w,e){const z={datePattern:"D",timePattern:"tt"};B=function(S){function J(t,l){var b=S.call(this,t,l)||this;b._activeDateFieldEdit=null;b._activeInputName=null;b._activeNumberFieldEdit=null;b._fieldFocusNeeded=!1;b._fieldToInitialIncompatibleDomainValue=new Map;b._switchFieldsWithInitialIncompatibleValue=new Set;b._userUpdatedInputFieldNames=new Set;b.description=null;b.feature=null;b.fieldConfig=null;b.formTemplate=null;b.groupDisplay="all";b.headingLevel=
2;b.label=void 0;b.layer=null;b.messages=null;b.messagesTemplates=null;b.strict=null;b.title=null;b.viewModel=new p;b._handleSwitchClick=f=>{f.target===f.currentTarget&&f.stopImmediatePropagation()};b._handleRadioInputChange=f=>{b._commitInputValue(f.target)};b._handleInputInput=f=>{b._commitInputValue(f.currentTarget,!0)};b._handleFormKeyDown=b._handleFormKeyDown.bind(h._assertThisInitialized(b));b._handleInputBlur=b._handleInputBlur.bind(h._assertThisInitialized(b));b._handleInputFocus=b._handleInputFocus.bind(h._assertThisInitialized(b));
b._handleNumberInputMouseDown=b._handleNumberInputMouseDown.bind(h._assertThisInitialized(b));b._handleInputKeyDown=b._handleInputKeyDown.bind(h._assertThisInitialized(b));b._handleOptionChange=b._handleOptionChange.bind(h._assertThisInitialized(b));b._handleGroupClick=b._handleGroupClick.bind(h._assertThisInitialized(b));b._handleSubmit=b._handleSubmit.bind(h._assertThisInitialized(b));b._afterInputCreateOrUpdate=b._afterInputCreateOrUpdate.bind(h._assertThisInitialized(b));return b}h._inheritsLoose(J,
S);var O=J.prototype;O.initialize=function(){this.own(this.watch("feature",()=>{const t=this._getFocusableInput("forward");this._activeInputName=t&&t.name;this._userUpdatedInputFieldNames.clear();this._fieldToInitialIncompatibleDomainValue.clear();this._switchFieldsWithInitialIncompatibleValue.clear();this._fieldFocusNeeded=!0}),this.on("submit",t=>{if(0<t.invalid.length){const [l]=t.invalid;t.invalid.forEach(b=>this._userUpdatedInputFieldNames.add(b));this._activeInputName=l;this._fieldFocusNeeded=
!0;this.scheduleRender()}}))};O.loadDependencies=function(){return Promise.all([new Promise((t,l)=>d(["../chunks/calcite-combobox"],t,l)),new Promise((t,l)=>d(["../chunks/calcite-combobox-item"],t,l)),new Promise((t,l)=>d(["../chunks/calcite-combobox-item-group"],t,l)),new Promise((t,l)=>d(["../chunks/calcite-input-message"],t,l)),new Promise((t,l)=>d(["../chunks/calcite-switch"],t,l))])};O.destroy=function(){this._userUpdatedInputFieldNames.clear();this._userUpdatedInputFieldNames=null};O.getValues=
function(){return null};O.submit=function(){return null};O.render=function(){const {state:t}=this.viewModel;return H.tsx("div",{class:this.classes("esri-feature-form","esri-widget","esri-widget--panel")},"ready"===t?this.renderForm():null)};O.renderForm=function(){var t=this.title?H.tsx(E.Heading,{key:"title",level:this.headingLevel},this.title):null;const l=this.description?H.tsx("p",{class:"esri-feature-form__description-text",key:"description"},this.description):null;t=t||l?H.tsx("div",{class:"esri-feature-form__form-header"},
t,l):null;return H.tsx("form",{class:"esri-feature-form__form",novalidate:!0,onsubmit:this._handleSubmit,onkeydown:this._handleFormKeyDown},t,this.renderFields())};O.renderFields=function(){const {viewModel:{inputFields:t}}=this;return t.map((l,b)=>l&&l.inputFields?this.renderGroup(l,b):this.renderLabeledField(l))};O.renderGroup=function(t,l){const {description:b,inputFields:f,label:n,state:P}=t,U=f.filter(va=>va.visible);var T=this.viewModel.findField(this._activeInputName);T=!(!T||T.group!==t);
const v=`${this.id}_group_${l}`,N=`${this.id}_group-label_${l}`,R=`${this.id}_group-description_${l}`,W=b?H.tsx("p",{class:this.classes("esri-feature-form__group-description","esri-feature-form__description-text"),id:R},b):null,ea="sequential"===this.groupDisplay,da=ea?T:"expanded"===P,qa=da?"esri-icon-up":"esri-icon-down";return H.tsx("fieldset",{"aria-expanded":da.toString(),"aria-labelledby":N,"aria-describedby":b?R:"",class:this.classes("esri-feature-form__group",ea?"esri-feature-form__group--sequential":
null,da?null:"esri-feature-form__group--collapsed",T?"esri-feature-form__group--active":null),"data-group":t,id:v,key:l,onclick:this._handleGroupClick},H.tsx("button",{role:ea?"presentation":void 0,class:"esri-feature-form__group-header",type:"button",tabIndex:ea?-1:0},H.tsx("div",{class:"esri-feature-form__group-title"},H.tsx(E.Heading,{class:"esri-feature-form__group-label",id:N,level:this.title?E.incrementHeadingLevel(this.headingLevel):this.headingLevel},n),W),ea?null:H.tsx("span",{class:this.classes(qa,
"esri-feature-form__group-toggle-icon")})),U.map(va=>this.renderLabeledField(va)))};O._getFocusableInput=function(t,l){var b=this.viewModel.allInputFields;b="forward"===t?b:b.slice().reverse();l?l&&l.inputFields?t=b.indexOf(l.inputFields[0]):(this._isInputFieldInGroup(l)&&"collapsed"===l.group.state?({inputFields:l}=l.group,t="forward"===t?l[l.length-1]:l[0]):t=l,t=b.indexOf(t)+1):t=0;for(;t<b.length;t++)if(l=b[t],l.visible)return l;return null};O.renderLabeledField=function(t){const {label:l,layer:b,
type:f}=t;return H.tsx("label",{key:`${b.id}-${t.name}`,class:"esri-feature-form__label"},[l,"unsupported"!==f?this.renderInputField(t):this.renderUnsupportedField(t),this.renderAuxiliaryText(t)])};O.renderInputField=function(t){const {domain:l,name:b,type:f,value:n}=t,P=this.getCommonInputProps(t);if("coded-value"===(null==l?void 0:l.type)){if(this._inputFieldHasInputType(t,"switch")){const {fieldElement:U}=t;if(this._switchFieldsWithInitialIncompatibleValue.has(b)||null==n||U.input.onValue!==n&&
U.input.offValue!==n)this._switchFieldsWithInitialIncompatibleValue.add(b);else return this.renderSwitchInputField(t,P)}return"radio-buttons"===t.inputType?this.renderRadioButtonsInputField(t,l.codedValues.map(({code:U,name:T})=>({value:U,name:T})),P):this.renderSelectInputField(t,this._getFieldValueOptions(b,l),P)}return"datetime-picker"===t.inputType||"date"===f?this.renderDateInputField(t,P):"number"===f?H.tsx("input",{type:"number",...P,value:u.isSome(this._activeNumberFieldEdit)&&this._activeNumberFieldEdit.fieldName===
t.name?this._activeNumberFieldEdit.value:`${P.value}`}):"text-area"===t.inputType?H.tsx("textarea",{...P}):H.tsx("input",{type:"text",...P})};O._parseDateTime=function(t,l,b){if(b){var f;t=w.DateTime.fromJSDate(this._parseDate(t,b));l=w.DateTime.fromMillis(null!=(f=l.value)?f:Date.now());t="date"===b?t.set({hour:l.hour,minute:l.minute,second:l.second}):t.set({day:l.day,month:l.month,year:l.year});return t.isValid?t.toMillis():null}b=w.DateTime.fromJSDate(this._parseDate(t));return b.isValid?b.toMillis():
null};O.renderDateInputField=function(t,l){const {value:b,includeTime:f}=t,{date:n,time:P}=this._formatDate(0);var U=`${this.id}-${l.key}`;const T=`${U}-date`;U=`${U}-time`;const {_activeDateFieldEdit:v}=this;let {date:N,time:R}=this._formatDate(b);if((null==v?void 0:v.fieldName)===t.name){var W,ea,da,qa;N=null!=(W=null==(ea=v.date.input)?void 0:ea.value)?W:N;R=null!=(da=null==(qa=v.time.input)?void 0:qa.value)?da:R}return H.tsx("div",{key:`${l.key}-date`,class:"esri-feature-form__date-input-container"},
H.tsx("div",{class:this.classes("esri-feature-form__date-input-part",f?null:"esri-feature-form__date-input-part--lone")},H.tsx("input",{"aria-label":t.label,"aria-describedby":T,type:"text",...l,"data-date-part":"date",class:this.classes(l.class,"esri-feature-form__input--date"),value:N}),H.tsx("div",{class:"esri-feature-form__date-format-hint",id:T},n)),f?H.tsx("div",{class:"esri-feature-form__date-input-part",key:"time-input"},H.tsx("input",{"aria-describedby":U,"aria-label":t.label,type:"text",
...l,"data-date-part":"time",class:this.classes(l.class,"esri-feature-form__input--time"),value:R}),H.tsx("div",{class:"esri-feature-form__date-format-hint",id:U},P)):null)};O.renderUnsupportedField=function(t){t=this.getCommonInputProps(t);return H.tsx("input",{afterCreate:t.afterCreate,afterUpdate:t.afterUpdate,class:this.classes("esri-input","esri-feature-form__input","esri-feature-form__input--disabled"),onfocus:t.onfocus,readOnly:!0,tabIndex:t.tabIndex,type:"text",value:t.value,["data-field-name"]:t["data-field-name"]})};
O.renderSelectInputField=function(t,l,b){const {value:f}=t,{messages:n,messagesTemplates:P}=this;var U=l.map(N=>N.map(R=>H.tsx("calcite-combobox-item",{value:`${R.value}`,"text-label":R.name,key:`#${R.value}`,selected:f===R.value})));const [T,v]=U;this._registerIncompatibleValue(f,l.flat(),t,N=>{v.unshift(H.tsx("calcite-combobox-item",{value:`${N}`,"text-label":`${N}`,key:"incompatible-option",readOnly:!0}))});l=0<v.length?[H.tsx("calcite-combobox-item-group",{key:"recommended",label:n.recommended},
T),H.tsx("calcite-combobox-item-group",{key:"other",label:P.other},v)]:T;U=u.isNone(t.fieldElement)||this._inputFieldHasInputType(t,"combo-box")&&t.fieldElement.input.showNoValueOption;!t.required&&U&&(t=this._inputFieldHasInputType(t,"combo-box")&&t.fieldElement.input.noValueOptionLabel||this.messages.empty,l.unshift(H.tsx("calcite-combobox-item",{value:"","text-label":this.messages.empty,key:"empty-option"},t)));return H.tsx("calcite-combobox",{...b,"selection-mode":"single",disabled:b.readOnly,
allowCustomValues:!1,onCalciteComboboxChange:N=>this._handleOptionChange(N.target)},l)};O._registerIncompatibleValue=function(t,l,b,f){const n=this._fieldToInitialIncompatibleDomainValue,P=n.has(b.name);if(P||null!=t&&""!==t&&!l.find(U=>U.value===t)||P)P||n.set(b.name,t),null==f?void 0:f(n.get(b.name))};O.renderRadioButtonsInputField=function(t,l,b){const {value:f}=t,n=l.map(P=>this.renderRadioButton({key:P.name,label:P.name,name:t.name,value:P.value,selected:P.value===f,props:b}));this._registerIncompatibleValue(f,
l,t);l=u.isNone(t.fieldElement)||this._inputFieldHasInputType(t,"radio-buttons")&&t.fieldElement.input.showNoValueOption;!t.required&&l&&(l=this._inputFieldHasInputType(t,"radio-buttons")&&t.fieldElement.input.noValueOptionLabel||this.messages.empty,n.unshift(this.renderRadioButton({key:"empty-option",label:l,name:t.name,value:"",selected:""===f||null===f,props:b})));return H.tsx("div",{key:`${b.key}-radio`,class:"esri-feature-form__input--radio-group"},n)};O.renderSwitchInputField=function(t,l){const {value:b}=
t;t=this._inputFieldHasInputType(t,"switch")?b===t.fieldElement.input.onValue:!1;return H.tsx("calcite-switch",{...l,class:"esri-feature-form__input--switch",onclick:this._handleSwitchClick,checked:t,disabled:l.readOnly})};O.renderRadioButton=function({key:t,name:l,value:b,selected:f,label:n,props:P}){return H.tsx("label",{key:t,class:"esri-feature-form__input--radio-label"},H.tsx("input",{...P,class:"esri-feature-form__input--radio",name:l,type:"radio",value:b,checked:f,onchange:this._handleRadioInputChange}),
n)};O.renderAuxiliaryText=function(t){const l=this._userUpdatedInputFieldNames.has(t.name)&&!t.valid?t.errorMessage:u.isSome(this.viewModel.contingencyConstraintViolations.get(t.name))?this.messages.validationErrors.valuesIncompatible:null;if(u.isSome(l))return H.tsx("calcite-input-message",{status:"invalid",icon:!0,active:!0},l);if(t.description)return H.tsx("div",{key:"description",class:"esri-feature-form__description-text"},t.description)};O.getCommonInputProps=function(t){var {groupDisplay:l}=
this;const {editable:b,group:f,hint:n,maxLength:P,minLength:U,name:T,required:v,type:N,valid:R,value:W}=t,ea=this._userUpdatedInputFieldNames.has(T),da=!b;l="all"===l&&u.isSome(f)&&"collapsed"===f.state;return{afterCreate:this._afterInputCreateOrUpdate,afterUpdate:this._afterInputCreateOrUpdate,"aria-invalid":R?"false":"true",class:this.classes("esri-input","esri-feature-form__input",da?"esri-feature-form__input--disabled":null,ea&&!R?"esri-feature-form__input--invalid":null),key:T,label:T,minlength:-1<
U?`${U}`:"",maxlength:-1<P?`${P}`:"",...this._getNumberFieldConstraints(t),readOnly:da,value:null==W?"":`${W}`,["data-field-name"]:T,onfocus:this._handleInputFocus,oninput:this._handleInputInput,onblur:this._handleInputBlur,onkeydown:this._handleInputKeyDown,onmousedown:"number"===N?this._handleNumberInputMouseDown:null,placeholder:"number"===N||"text"===N?n:"",required:v,tabIndex:l?-1:0}};O._isInputFieldInGroup=function(t){return!(t&&t.inputFields)&&u.isSome(t.group)};O._handleNumberInputMouseDown=
function({target:t}){t.focus();this.scheduleRender()};O._getFieldValueOptions=function(t,l){l=l.codedValues.map(({code:b,name:f})=>({value:b,name:f}));t=this.viewModel.fieldsWithContingentValues.has(t)?this._getContingentValueOptions(t):[];if(0<t.length){const b=new Set(t.map(f=>f.value));l=l.filter(f=>!b.has(f.value));return[t,l]}return[l,[]]};O._getContingentValueOptions=function(t){const l={};for(var b of this.viewModel.allInputFields){const {name:n,value:P}=b;!u.isNone(P)&&n!==t&&this.viewModel.fieldsWithContingentValues.has(n)&&
(l[n]=P)}var f=this.viewModel.joinedContingentValues.slice();b=new Map;for(const n of f){f=n.values[t];if(u.isNone(f)||"code"!==f.objectType&&"null"!==f.objectType)continue;const {code:P,name:U}="null"===f.objectType?{code:"",name:this.messages.empty}:f.codedValue;b.has(P)||Object.entries(l).every(([T,v])=>!n.values.hasOwnProperty(T)||this._valueIsValidContingentValue(v,n.values[T]))&&b.set(P,{name:U,value:P})}return[...b.values()]};O._getInputFieldFromInput=function(t){return this.viewModel.findField(t.getAttribute("data-field-name"))};
O._getNumberFieldConstraints=function(t){return(t=m.getDomainRange(t.domain)||q.getFieldRange(t.field))&&t.max!==Number.MAX_VALUE&&t.min!==Number.MIN_VALUE?t:{min:null,max:null}};O._afterInputCreateOrUpdate=function(t){var {viewModel:l}=this;const b=this._getInputFieldFromInput(t);l=l.findField(this._activeInputName);const f=this._fieldToInitialIncompatibleDomainValue.get(b.name)===b.value;this._fieldFocusNeeded&&l===b&&("radio-buttons"!==b.inputType||f||t.checked)&&(this._fieldFocusNeeded=!1,t.focus())};
O._handleInputFocus=function(t){t=t.target;const l=this._getInputFieldFromInput(t);this._activeInputName=l.name;"date"===l.type?this._syncDateFieldEdits(t):this._isNumberInputField(l)&&this._setUpNumberFieldEdit(t)};O._isNumberInputField=function({domain:t,inputType:l="text-box",type:b}){return"number"===b&&"text-box"===l&&(!t||"coded-value"!==t.type)};O._handleInputBlur=function(t){const l=t.target,b=this._getInputFieldFromInput(l);if("date"===b.type){const P=t.relatedTarget;var f=P&&this._getInputFieldFromInput(P);
if(f&&"date"===b.type&&"date"===f.type&&b.field===f.field){if(""!==l.value&&""===P.value){var n;f=P.getAttribute("data-date-part");P.value=this._formatDate(null!=(n=b.value)?n:Date.now())[f];this._parseDate(l.value,l.getAttribute("data-date-part"))&&this._commitInputValue(t.target,!0,!1)}return}}"number"===b.type&&u.isSome(this._activeNumberFieldEdit)&&(this._activeNumberFieldEdit.input.value=`${b.value}`,this._activeNumberFieldEdit=null);this._commitInputValue(l);this.scheduleRender()};O._commitInputValue=
function(t,l=!1,b=!0){const f=this._getInputFieldFromInput(t);if(this._activeDateFieldEdit){const {date:v,time:N}=this._activeDateFieldEdit,R=this._parseDateTime(t.value,f,v.active?"date":"time");t=null!==this.viewModel.getValue(f.name);const W=v.input&&(N.input||!f.includeTime),ea=null===R;if(l)ea||(W||!b||t)&&this._updateDateFieldValue(f,R);else{var n,P;if(""===(null==(n=v.input)?void 0:n.value)||""===(null==(P=N.input)?void 0:P.value))this._updateDateFieldValue(f,null);else if(W){var U,T;l=`${v.input.value} ${null!=
(U=null==(T=N.input)?void 0:T.value)?U:""}`;U=this._parseDateTime(l,f);null===U&&t||this._updateDateFieldValue(f,U)}this._activeDateFieldEdit=null}}else u.isSome(this._activeNumberFieldEdit)&&this._isNumberInputField(f)&&(this._activeNumberFieldEdit.value=t.value),this._updateFieldValue(t)};O._handleInputKeyDown=function(t){const {key:l,altKey:b,ctrlKey:f,metaKey:n}=t;var P=this._getInputFieldFromInput(t.target);if("Enter"!==l){var {type:U}=P.field;P="single"===U||"double"===U;if(!("integer"!==U&&
"small-integer"!==U&&!P||b||f||n)&&1===l.length){U=Number(l);const T=["-","+"],v=["e","."];P=P?[...T,...v]:T;isNaN(U)&&-1===P.indexOf(l)&&t.preventDefault()}}else this._isInputFieldInGroup(P)&&"collapsed"===P.group.state&&(P.group.state="expanded")};O._setUpNumberFieldEdit=function(t){this._activeNumberFieldEdit={fieldName:this._getInputFieldFromInput(t).name,input:t,value:t.value}};O._syncDateFieldEdits=function(t){var l,b;const f=this._getInputFieldFromInput(t);if("date"===f.type){var n=t.getAttribute("data-date-part"),
P="date"===n?{value:t.value,input:t,active:!0}:{...null==(l=this._activeDateFieldEdit)?void 0:l.date,active:!1};t="time"===n?{value:t.value,input:t,active:!0}:{...null==(b=this._activeDateFieldEdit)?void 0:b.time,active:!1};this._activeDateFieldEdit={fieldName:f.name,date:P,time:t}}};O._updateFieldValue=function(t){const l=t.getAttribute("data-field-name");this.viewModel.setValue(l,this._parseValue(t));this._userUpdatedInputFieldNames.add(l);this.viewModel.fieldsWithContingentValues.has(l)&&(t=Object.fromEntries(Object.entries(this.getValues()).filter(([,
b])=>u.isSome(b))),this.viewModel.validateContingencyConstraints(t))};O._updateDateFieldValue=function(t,l){this.viewModel.setValue(t.name,l);this._userUpdatedInputFieldNames.add(t.name)};O._parseValue=function(t){var l=this._getInputFieldFromInput(t),b=t.value;if(this._inputFieldHasInputType(l,"switch")&&"CALCITE-COMBOBOX"!==t.tagName)return t.checked?l.fieldElement.input.onValue:l.fieldElement.input.offValue;if("radio-buttons"===l.inputType&&"radio"===t.type&&!t.checked)return l.value;var {type:f}=
l;if("number"===f)return b?parseFloat(b):null;if("date"===f){if(!b)return null;f=Number(b);if(!isNaN(f))return f;t=t.getAttribute("data-date-part");b=this._parseDate(b,t);if(!b)return null;b=w.DateTime.fromJSDate(b);var n=l.domain;const P=w.DateTime.now();f=P;n&&"range"===n.type&&(n=w.DateTime.fromMillis(n.maxValue),P<n&&(f=n));l=this.viewModel.getValue(l.name);l=null!=l?w.DateTime.fromMillis(l):f;b="date"===t?b.set({hour:l.hour,minute:l.minute,second:l.second}):b.set({day:l.day,month:l.month,year:l.year});
return b.toMillis()}return b};O._handleOptionChange=function(t){this._commitInputValue(t);this.scheduleRender()};O._handleGroupClick=function(t){var l;const b=t.currentTarget["data-group"],f="expanded"===b.state,n="sequential"===this.groupDisplay;if(!f||t.target.closest(".esri-feature-form__group-header")){this._activeInputName=null==(l=this._getFocusableInput("forward",b))?void 0:l.name;if(n){t=t.target.closest(".esri-feature-form__group-header");if(f&&!t)return;this.viewModel.inputFields.forEach(P=>
{P&&P.inputFields&&P!==b&&(P.state="collapsed")})}b.state=f?"collapsed":"expanded";this._fieldFocusNeeded=n;this.scheduleRender()}};O._handleSubmit=function(t){t.preventDefault()};O._handleFormKeyDown=function(t){"Enter"===t.key&&this.viewModel.submit()};O._formatDate=function(t){if(null==t)return{date:"",time:""};t=w.DateTime.fromMillis(t,{locale:e.getLocale(),numberingSystem:"latn"});return{date:t.toLocaleString({year:"numeric",month:"2-digit",day:"2-digit"}),time:t.toFormat(z.timePattern)}};O._parseDate=
function(t,l){if(null==t||""===t)return null;const {timePattern:b,datePattern:f}=z;t=w.DateTime.fromFormat(t,l?"date"===l?f:b:`${f} ${b}`,{locale:e.getLocale(),numberingSystem:"latn"});return t.isValid?t.toJSDate():null};O._inputFieldHasInputType=function(t,l){var b;return u.isSome(t.fieldElement)&&(null==(b=t.fieldElement.input)?void 0:b.type)===l};O._valueIsValidContingentValue=function(t,l){var b;switch(l.objectType){case "any":return!0;case "null":return null==t;case "code":return t===(null==
(b=l.codedValue)?void 0:b.code);case "range":return t>=l.minValue&&t<=l.maxValue;default:return g.neverReached(l.objectType),!1}};return J}(I);c.__decorate([F.aliasOf("viewModel.description")],B.prototype,"description",void 0);c.__decorate([F.aliasOf("viewModel.feature")],B.prototype,"feature",void 0);c.__decorate([F.aliasOf("viewModel.fieldConfig")],B.prototype,"fieldConfig",void 0);c.__decorate([F.aliasOf("viewModel.formTemplate")],B.prototype,"formTemplate",void 0);c.__decorate([y.property()],
B.prototype,"groupDisplay",void 0);c.__decorate([y.property()],B.prototype,"headingLevel",void 0);c.__decorate([y.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],B.prototype,"label",void 0);c.__decorate([F.aliasOf("viewModel.layer")],B.prototype,"layer",void 0);c.__decorate([y.property(),A.messageBundle("esri/widgets/FeatureForm/t9n/FeatureForm")],B.prototype,"messages",void 0);c.__decorate([y.property(),A.messageBundle("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],B.prototype,
"messagesTemplates",void 0);c.__decorate([F.aliasOf("viewModel.strict")],B.prototype,"strict",void 0);c.__decorate([F.aliasOf("viewModel.title")],B.prototype,"title",void 0);c.__decorate([y.property(),G.vmEvent(["value-change","submit"])],B.prototype,"viewModel",void 0);c.__decorate([F.aliasOf("viewModel.getValues")],B.prototype,"getValues",null);c.__decorate([F.aliasOf("viewModel.submit")],B.prototype,"submit",null);return B=c.__decorate([k.subclass("esri.widgets.FeatureForm")],B)})},"esri/widgets/FeatureForm/FeatureFormViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../intl ../../core/Evented ../../core/HandleOwner ../../core/Logger ../../core/maybe ../../core/Promise ../../core/reactiveUtils ../../core/ReentrantObjectPool ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../form/FormTemplate ../../layers/support/ContingentValue ../../layers/support/LayerContingentValuesCache ../../support/arcadeOnDemand ./InputField ./InputFieldGroup ../../intl/locale ../../intl/messages".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p,E,x,A,r,G,H,w,e){const z=new c({attributes:{}}),S=F.getLogger("esri.widgets.FeatureForm.FeatureFormViewModel");c=function(J){function O(l){var b=J.call(this,l)||this;b._arcade=null;b._compiledExpressionLookup=new Map;b._expressionLookup=new Map;b._contingentValuesCache=null;b._fieldPool=new y.ReentrantObjectPool(G,f=>b.handles.add(M.watch(()=>f.value,()=>{f.isUsingValueExpression&&b._afterValueChange(f)}),f.id),({id:f})=>b.handles.remove(f));b._fieldGroupPool=
new y.ReentrantObjectPool(H);b._featureClone=z.clone();b._initialFeature=z.clone();b._needsArcade=!1;b._inputFieldCache=new Map;b._inputFieldGroupCache=new Map;b.contingencyConstraintViolations=new Map;b.messages=null;b.strict=!1;return b}d._inheritsLoose(O,J);var t=O.prototype;t.initialize=function(){var l=this;const b=function(){var P=d._asyncToGenerator(function*(){return l.messages=yield e.fetchMessageBundle("esri/widgets/FeatureForm/t9n/FeatureForm")});return function(){return P.apply(this,arguments)}}();
b();const f=M.watch(()=>this.layer,P=>{"feature"===(null==P?void 0:P.type)&&this.addResolvingPromise(A.createLoadedLayerContingentValuesCache(P).then(U=>{this._contingentValuesCache=U;this.notifyChange("fieldsWithContingentValues")}))},{initial:!0}),n=M.watch(()=>{var P,U;const {formTemplate:T}=this;if(L.isNone(T))return null;const v=null!=(P=T.expressionInfos)?P:[];P=null!=(U=T.elements)?U:[];return[...v.map(N=>N.expression),...null==P?void 0:P.map(N=>this._getExpressionsFromElementRecursive(N)).flat()]},
function(){var P=d._asyncToGenerator(function*(U){if(!U||1>U.length)l._compiledExpressionLookup.clear(),l._expressionLookup.clear();else{var {_compiledExpressionLookup:T,_expressionLookup:v,formTemplate:N}=l;U=new Set(U);v.clear();if(L.isSome(N)&&L.isSome(N.expressionInfos))for(var R of N.expressionInfos)U.delete(R.name),v.set(R.name,R.expression);for(const W of T.keys())U.delete(W),v.set(W,W);if(!(1>U.size)){l._needsArcade=!0;R=yield r.loadArcade();l._arcade=R;({arcadeUtils:R}=R);for(const W of U.values())R.hasGeometryOperations(W)&&
(yield R.enableGeometryOperations(),n.remove()),v.set(W,W),l._setFunctionForExpression(W);l.notifyChange("inputFields")}}});return function(U){return P.apply(this,arguments)}}(),{initial:!0});this.handles.add([w.onLocaleChange(b),n,f])};t.destroy=function(){this.layer=this.feature=null;this._contingentValuesCache=L.destroyMaybe(this._contingentValuesCache);this._fieldPool.destroy();this._fieldGroupPool.destroy()};t.findField=function(l){return this.allInputFields.find(b=>b.name===l)};t.getValue=function(l){var b;
const {_featureClone:f,layer:n}=this,P=!(null==n||!n.getField(l));return null!=(b=f.getAttribute(l))?b:P?null:void 0};t.setValue=function(l,b){const {_featureClone:f,strict:n}=this,P=this.findField(l);b=""===b?null:b;P&&f.getAttribute(l)!==b&&(P.value=b,n&&!P.valid||this._afterValueChange(P))};t.getValues=function(){return{...this._featureClone.attributes}};t.submit=function(){var l=this.allInputFields;const b=new Set(l.filter(n=>n.valid).map(({name:n})=>n));l=l.filter(n=>!n.valid).map(({name:n})=>
n);const f=this.getValues();if(0<this.validateContingencyConstraints(f,{includeIncompleteViolations:!0}).length)for(const [n,P]of this.contingencyConstraintViolations.entries())"error"===P.type&&(b.delete(n),l.push(n));this.emit("submit",{valid:[...b],invalid:l,values:f})};t.validateContingencyConstraints=function(l,b){const {_contingentValuesCache:f}=this,n=new Map;this.contingencyConstraintViolations=n;if(L.isNone(f))return[];const {invalid:P,incomplete:U}=f.validateContingencyConstraints(l);l=
[...P,...null!=b&&b.includeIncompleteViolations?U:[]];for(const T of l)for(const v of T.fieldGroup.fields)n.set(v,T);return l};t._cullCaches=function(l,b,f){const n=[],P=[];for(const U of l)U.inputFields?(P.push(U.label),n.push(...U.inputFields.map(T=>T.name))):n.push(U.name);this._cullInputFieldCache(n,b);this._cullInputFieldGroupCache(P,f)};t._cullInputFieldCache=function(l,b){b=b.filter(f=>!l.includes(f));for(const f in b)this._inputFieldCache.delete(f)};t._cullInputFieldGroupCache=function(l,
b){b=b.filter(f=>!l.includes(f));for(const f in b)this._inputFieldGroupCache.delete(f)};t._releasePreviousInputFields=function(){const l=this._get("inputFields");if(l&&!(1>l.length))for(const b of l)"groupElement"in b?this._releaseInputFieldGroup(b):this._releaseInputField(b)};t._releaseInputFieldGroup=function(l){l.inputFields.forEach(b=>this._releaseInputField(b));this._fieldGroupPool.release(l)};t._releaseInputField=function(l){this._fieldPool.release(l)};t._emitChangeEvent=function({name:l,valid:b,
value:f}){this.emit("value-change",{layer:this.layer,feature:this.feature,fieldName:l,value:f,valid:b})};t._generateInputFieldsFromElements=function(l,b){const f=[];for(const n of l)this._isSupportedElement(n)&&f.push("group"===n.type?this._acquireAndInitializeInputFieldGroup(n,b):this._acquireAndInitializeInputField({field:this._layerFieldsByName.get(n.fieldName),fieldElement:n,...b}));return f};t._generateInputFieldsFromLayerFields=function(l,b){return Array.isArray(l)?l.map(f=>this._acquireAndInitializeInputField({field:f,
fieldElement:null,...b})):(S.warn("esri.widgets.FeatureForm.FeatureFormViewModel","No attribute fields found."),[])};t._acquireAndInitializeInputField=function(l){var b,f,n,P,U,T;const {arcade:v,feature:N,field:R,fieldElement:W,group:ea,initialFeature:da,layer:qa,messages:va}=l;l=null!=(b=this._getCompiledExpression(null==W?void 0:W.requiredExpression))?b:void 0;b=null!=(f=this._getCompiledExpression(null==W?void 0:W.visibilityExpression))?f:void 0;f=null!=(n=this._getCompiledExpression(null==W?void 0:
W.valueExpression))?n:void 0;n=null!=(P=this._getCompiledExpression(null==W?void 0:W.editableExpression))?P:void 0;P=R.name;const Ca=null!=(U=null==(T=this._inputFieldCache.get(P))?void 0:T.value)?U:this.getValue(P);U=this._fieldPool.acquire();this._inputFieldCache.set(P,U);return U.set({field:R,fieldElement:W,arcade:v,feature:N,group:ea,initialFeature:da,layer:qa,messages:va,requiredFunction:l,visibilityFunction:b,editableFunction:n,valueFunction:f,value:Ca})};t._acquireAndInitializeInputFieldGroup=
function(l,b){var f,n;const P=null!=(f=null==(n=this._inputFieldGroupCache.get(l.label))?void 0:n.state)?f:l.initialState;f=this._fieldGroupPool.acquire();this._inputFieldGroupCache.set(l.label,f);n=[];for(const v of l.elements)this._isSupportedElement(v)&&n.push(this._acquireAndInitializeInputField({field:this._layerFieldsByName.get(v.fieldName),fieldElement:v,group:f,...b}));const {arcade:U,feature:T}=b;b=this._getCompiledExpression(l.visibilityExpression);return f.set({arcade:U,feature:T,groupElement:l,
inputFields:n,state:P,visibilityFunction:b})};t._afterValueChange=function(l){const {name:b,value:f}=l;if(this.get("layer.typeIdField")===l.name&&"types"in this.layer){const n=new Set;this.layer.types.forEach(P=>Object.keys(P.domains).forEach(U=>n.add(U)));n.forEach(P=>{(P=this.findField(P))&&P.notifyChange("domain")})}this._featureClone.setAttribute(b,f);this.notifyChange("inputFields");this._emitChangeEvent(l)};t._getCompiledExpression=function(l){return this._compiledExpressionLookup.get(this._expressionLookup.get(l))};
t._getExpressionsFromElementRecursive=function(l){const b=[];l.visibilityExpression&&b.push(l.visibilityExpression);if("field"===l.type){const f=["requiredExpression","valueExpression","editableExpression"];for(const n of f)l[n]&&b.push(l[n])}if("group"===l.type&&l.elements)for(const f of l.elements)b.push(...this._getExpressionsFromElementRecursive(f));return b};t._setFunctionForExpression=function(l){const {_arcade:{arcadeUtils:b},_compiledExpressionLookup:f}=this;f.set(l,b.createFunction(l))};
t._isSupportedElement=function(l){if("field"===l.type||"group"===l.type)return!0;S.warn("form-info::unsupported-element-type","Only element types 'field' and 'group' are supported",`Element ${l.label} has unsupported type '${l.type}'`);return!1};t._joinContingentValues=function(){var l=this._contingentValuesCache;if(L.isNone(l))return[];var b="typeIdField"in this.layer?this.layer.typeIdField:null;b=b?this.getValue(b):null;const f=[];for(var n of l.fieldGroups){const {contingencies:v,fields:N,name:R}=
n;l=[];for(var P of v)P.isRetired||L.isSome(P.subtype)&&P.subtype.code!==b||l.push({values:P.values});0<l.length&&f.push({name:R,fields:N,contingencies:l})}const [U,T]=this._generateJoinPlan(f);n=U.flatMap(v=>this._joinFieldGroupContingencies(v));P=T.flatMap(v=>v.contingencies);return[...n,...P]};t._generateJoinPlan=function(l){var b=new Map,f=[],n=new Set;for(var P of l)for(const N of P.fields)if(b.has(N)){const R=b.get(N),W=P,ea=[R.name,W.name].sort().join("|");n.has(ea)||(f.push([R,W]),n.add(ea),
b.set(N,W))}else b.set(N,P);b=new Set(f.flat());l=new Set(l);for(var U of b)l.delete(U);U=new Map;b=new Map;for(var T of new Set(f.flat()))n=Symbol(T.name),U.set(n,new Set([T])),b.set(T,n);for(const [N,R]of f)if(f=b.get(N),T=b.get(R),f!==T){n=U.get(f);P=U.get(T);for(var v of P)n.add(v),b.set(v,f);U.delete(T)}v=[...U.values()].map(N=>[...N]);f=[...l];return[v,f]};t._joinFieldGroupContingencies=function(l){const b=l.slice();var f=b.shift(),n=b.shift();l=this._generateJoinKey(f.fields,n.fields);let P=
new Set([...f.fields,...n.fields]),U=new Map;for(var T of f.contingencies)[f]=this._hashContingency(T,l.codedValueFields,!0),U.has(f)?U.get(f).push(T):U.set(f,[T]);for(;0<b.length;){T=new Map;f=b.shift();const R=this._generateJoinKey(P,f.fields);for(var v of n.contingencies){const [W,ea]=this._hashContingency(v,l.codedValueFields);n=ea?this._findMatchingContingenciesWithAnyHashMask(U,W):U.get(W);U.has("#JSAPI_CONTINGENT_VALUE_ANY_HASH")&&n.push(...this._findMatchingContingenciesContainingAny(v,U.get("#JSAPI_CONTINGENT_VALUE_ANY_HASH"),
l.codedValueFields));if(!L.isNone(n))for(var N of n){n=0<l.rangeFields.length?this._joinContingenciesWithRangeDomains(N,v,l.rangeFields):this._joinContingencies(N,v);if(L.isNone(n))break;const [da]=this._hashContingency(n,R.codedValueFields,!0);T.has(da)?T.get(da).push(n):T.set(da,[n])}}U=T;n=f;l=R;P=new Set([...P,...n.fields])}v=[];for(const R of n.contingencies){const [W,ea]=this._hashContingency(R,l.codedValueFields);N=ea?this._findMatchingContingenciesWithAnyHashMask(U,W):U.get(W);U.has("#JSAPI_CONTINGENT_VALUE_ANY_HASH")&&
N.push(...this._findMatchingContingenciesContainingAny(R,U.get("#JSAPI_CONTINGENT_VALUE_ANY_HASH"),l.codedValueFields));if(!L.isNone(N))for(const da of N)N=0<l.rangeFields.length?this._joinContingenciesWithRangeDomains(da,R,l.rangeFields):this._joinContingencies(da,R),L.isSome(N)&&v.push(N)}return v};t._joinContingencies=function(l,b){b={values:{...l.values,...b.values}};for(const [f,n]of Object.entries(b.values))"any"===n.objectType&&L.isSome(l.values[f])&&(b.values[f]=l.values[f]);return b};t._joinContingenciesWithRangeDomains=
function(l,b,f){const n=this._joinContingencies(l,b);for(const U of f){var P=l.values[U];const T=b.values[U],{leftIsNull:v,rightIsNull:N,bothAreNull:R,leftIsAny:W,rightIsAny:ea,bothAreAny:da,leftIsRange:qa,rightIsRange:va}=this._compareObjectTypes(P.objectType,T.objectType);if(!R&&!da)if(v&&ea||N&&W)n.values[U]=new x({objectType:"null"});else{if(v&&va||N&&qa)return null;W?(P.minValue=-Infinity,P.maxValue=Infinity):ea&&(T.minValue=-Infinity,T.maxValue=Infinity);f=Math.max(P.minValue,T.minValue);P=
Math.min(P.maxValue,T.maxValue);if(f>P)return null;n.values[U]=new x({objectType:"range",minValue:f,maxValue:P})}}return n};t._findMatchingContingenciesContainingAny=function(l,b,f){return b.filter(n=>f.every(P=>{var U,T;const v=n.values[P];P=l.values[P];return"any"===v.objectType||"any"===P.objectType||(null==(U=v.codedValue)?void 0:U.code)===(null==(T=P.codedValue)?void 0:T.code)}))};t._findMatchingContingenciesWithAnyHashMask=function(l,b){b=RegExp(`${b}$`);const f=[];for(const [n,P]of l){if("#JSAPI_CONTINGENT_VALUE_ANY_HASH"===
n)break;b.test(n)&&f.push(...P)}return f};t._generateJoinKey=function(l,b){l=Array.isArray(l)?new Set(l):l;var f=Array.isArray(b)?new Set(b):b;b=l.size<f.size?l:f;l=b===l?f:l;f=new Set;const n=new Set;for(const P of b)if(l.has(P)&&(b=this.layer.getFieldDomain(P,{feature:this.feature}),!L.isNone(b)))switch(b.type){case "coded-value":f.add(P);break;case "range":n.add(P)}return{codedValueFields:[...f],rangeFields:[...n]}};t._hashContingency=function(l,b,f=!1){if(1>b.length)return["#JSAPI_CONTINGENT_VALUE_EMPTY_HASH",
!1];const n=[];let P=!1;for(const T of b)if(b=l.values[T],"any"===b.objectType){if(f)return["#JSAPI_CONTINGENT_VALUE_ANY_HASH",!0];P=!0;n.push(`${T}:.*`)}else if("null"===b.objectType)n.push(`${T}:${"#JSAPI_CONTINGENT_VALUE_NULL_HASH"}`);else{var U;n.push(`${T}:${null==(U=b.codedValue)?void 0:U.code}`)}return[n.sort().join("\x26"),P]};t._compareObjectTypes=function(l,b){return{leftIsNull:"null"===l,rightIsNull:"null"===b,bothAreNull:"null"===l&&"null"===b,leftIsAny:"any"===l,rightIsAny:"any"===b,
bothAreAny:"any"===l&&"any"===b,leftIsRange:"range"===l,rightIsRange:"range"===b}};d._createClass(O,[{key:"allInputFields",get:function(){return this.inputFields.reduce((l,b)=>b.inputFields?[...l,...b.inputFields]:[...l,b],[])}},{key:"_layerFieldsByName",get:function(){return new Map(this.layer.fields.map(l=>[l.name,l]))}},{key:"description",get:function(){const {formTemplate:l}=this;return L.isSome(l)?l.description:""},set:function(l){void 0===l?this._clearOverride("description"):this._override("description",
l)}},{key:"feature",get:function(){return this._get("feature")},set:function(l){this._featureClone=l?l.clone():z.clone();this._initialFeature=this._featureClone.clone();this._inputFieldCache.clear();this._inputFieldGroupCache.clear();this.contingencyConstraintViolations.clear();this._set("feature",l)}},{key:"fieldsWithContingentValues",get:function(){if(L.isNone(this._contingentValuesCache))return new Set;const l=this._contingentValuesCache.fieldGroups.flatMap(b=>b.fields);return new Set(l)}},{key:"formTemplate",
get:function(){return this.layer&&"formTemplate"in this.layer?this.layer.formTemplate:null},set:function(l){void 0===l?this._clearOverride("formTemplate"):this._override("formTemplate",l)}},{key:"inputFields",get:function(){const {_arcade:l,_featureClone:b,_initialFeature:f,_inputFieldCache:n,_inputFieldGroupCache:P,_needsArcade:U,formTemplate:T,messages:v,layer:N,state:R}=this;if("ready"!==R||U&&!l)return[];var W=b.clone();const ea=Array.from(n.keys()),da=Array.from(P.keys());W={arcade:l,feature:W,
initialFeature:f,layer:N,messages:v};W=L.isSome(T)&&0<T.elements.length?this._generateInputFieldsFromElements(T.elements,W):this._generateInputFieldsFromLayerFields(null==N?void 0:N.fields,W);this._cullCaches(W,ea,da);this._releasePreviousInputFields();return W.filter(qa=>qa.visible)}},{key:"joinedContingentValues",get:function(){return this._joinContingentValues()}},{key:"layer",get:function(){var l;return null!=(l=this.feature)&&l.sourceLayer&&"applyEdits"in this.feature.sourceLayer?this.feature.sourceLayer:
null},set:function(l){l?this._override("layer",l):this._clearOverride("layer")}},{key:"state",get:function(){return this.messages&&this.get("layer.loaded")?"ready":"disabled"}},{key:"submittable",get:function(){return this.valid?!0:this.allInputFields.filter(l=>!l.valid).every(({submittable:l})=>l)}},{key:"title",get:function(){const {formTemplate:l}=this;return L.isSome(l)?l.title:""},set:function(l){void 0===l?this._clearOverride("title"):this._override("title",l)}},{key:"valid",get:function(){const l=
this.allInputFields;return 0<l.length&&l.every(({valid:b})=>b)}}]);return O}(u.HandleOwnerMixin(K.EsriPromiseMixin(g.EventedAccessor)));h.__decorate([k.property({readOnly:!0})],c.prototype,"allInputFields",null);h.__decorate([k.property()],c.prototype,"_layerFieldsByName",null);h.__decorate([k.property({readOnly:!0})],c.prototype,"_inputFieldCache",void 0);h.__decorate([k.property({readOnly:!0})],c.prototype,"_inputFieldGroupCache",void 0);h.__decorate([k.property()],c.prototype,"contingencyConstraintViolations",
void 0);h.__decorate([k.property()],c.prototype,"description",null);h.__decorate([k.property()],c.prototype,"feature",null);h.__decorate([k.property()],c.prototype,"fieldsWithContingentValues",null);h.__decorate([k.property({type:E})],c.prototype,"formTemplate",null);h.__decorate([k.property({readOnly:!0,dependsOn:"formTemplate messages feature layer.fields layer.loaded state".split(" ")})],c.prototype,"inputFields",null);h.__decorate([k.property()],c.prototype,"joinedContingentValues",null);h.__decorate([k.property()],
c.prototype,"layer",null);h.__decorate([k.property()],c.prototype,"messages",void 0);h.__decorate([k.property()],c.prototype,"state",null);h.__decorate([k.property()],c.prototype,"strict",void 0);h.__decorate([k.property()],c.prototype,"submittable",null);h.__decorate([k.property()],c.prototype,"title",null);h.__decorate([k.property()],c.prototype,"valid",null);h.__decorate([k.property()],c.prototype,"getValues",null);h.__decorate([k.property()],c.prototype,"submit",null);return c=h.__decorate([p.subclass("esri.widgets.FeatureForm.FeatureFormViewModel")],
c)})},"esri/layers/support/ContingentValue":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(d,h,c,B,g,u,F,L){c=function(K){function M(y){y=K.call(this,y)||this;y.maxValue=null;y.minValue=null;return y}d._inheritsLoose(M,K);return M}(c);h.__decorate([B.property()],
c.prototype,"objectType",void 0);h.__decorate([B.property()],c.prototype,"maxValue",void 0);h.__decorate([B.property()],c.prototype,"minValue",void 0);h.__decorate([B.property()],c.prototype,"codedValue",void 0);return c=h.__decorate([L.subclass("esri.layers.support.ContingentValue")],c)})},"esri/layers/support/LayerContingentValuesCache":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../request ../../core/JSONSupport ../../core/Loadable ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./arcgisLayerUrl ./Contingency ./ContingencyConstraintViolation ./ContingentValue ./ContingentValuesResult ./FieldGroup ./Subtype".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p,E,x){var A;B=A=function(r){function G(w){w=r.call(this,w)||this;w.request=c;w.fieldGroups=null;w.fieldGroupDefinitions=null;return w}d._inheritsLoose(G,r);var H=G.prototype;H.initialize=function(){};G.createLoadedLayerContingentValuesCache=function(){var w=d._asyncToGenerator(function*(e){yield e.load();var z=e.sourceJSON.hasContingentValuesDefinition;if(z)return(new A({layer:e})).load();if(void 0===z){z=k.parse(e.url);if(u.isNone(z))return null;z=z.url.path;
if((yield A._staticFetchEnterpriseFeatureRoot(z)).supportsQueryDataElements&&(z=yield A._staticFetchEnterpriseFieldGroup(z,e.layerId.toString())))return z=z.map(S=>({name:S.name,isEditingRestrictive:S.isEditingRestrictive,fields:S.fieldNames.names})),(new A({layer:e,fieldGroupDefinitions:z})).load()}return null});return function(e){return w.apply(this,arguments)}}();H.load=function(){var w=d._asyncToGenerator(function*(e){const z=this.layer.load(e).then(()=>this._initializeContingentValues(this.fieldGroupDefinitions,
e));this.addResolvingPromise(z);return this});return function(e){return w.apply(this,arguments)}}();H.validateContingencyConstraints=function(w,e){const z=this.layer.typeIdField,S=Object.keys(w),J=[],O=[];for(const l of this.fieldGroups){const b=l.isEditingRestrictive?"error":"warning";if(e&&!l.fields.some(P=>e.includes(P)))continue;if(!l.fields.every(P=>S.includes(P))){O.push(new q({fieldGroup:l,type:b}));continue}let f=!1;const n=w[z];var t=l.contingencies.filter(P=>!P.isRetired&&P.subtype?P.subtype.code===
n:!0);for(const P of t){t=!0;for(const U in P.values){const T=P.values[U];if("any"!==T.objectType)if("null"===T.objectType){if(null!=w[U]){t=!1;break}}else if("code"===T.objectType){if(w[U]!==T.codedValue.code){t=!1;break}}else if("range"===T.objectType){const v=w[U];if(v<T.minValue||v>T.maxValue){t=!1;break}}}if(t){f=!0;break}}f||J.push(new q({fieldGroup:l,type:b}))}return{invalid:J,incomplete:O}};H.getContingentValues=function(w,e,z=!1){const S=w[this.layer.typeIdField],J={};let O=[];const t=this.fieldGroups.filter(b=>
b.fields.includes(e));O.push(new I({objectType:"any"}));for(const b of t){let f=[];var l=b.contingencies.filter(U=>!U.isRetired&&U.subtype?U.subtype.code===S:!0);let n=!1;const P={};for(const U of l){let T;l=!0;for(const v in U.values){const N=U.values[v];if(e===v)T=N,n=n||"range"===N.objectType;else if(void 0!==w[v]&&"any"!==N.objectType)if("null"===N.objectType)null!==w[v]&&(l=!1);else if("code"===N.objectType)w[v]!==N.codedValue.code&&(l=!1);else if("range"===N.objectType){const R=w[v];if(R<N.minValue||
R>N.maxValue)l=!1}}if(T&&l){if("any"===T.objectType){f.length=0;f.push(T);break}l=this._generateKey(T);P[l]||f.push(T);P[l]=!0}}n&&(f=this._joinRange(f));J[b.name]=f;O=z?this._filterIntersection(O,f):null}1===t.length&&(O=[]);return new p({contingentValuesAllGroups:O,contingentValuesByFieldGroup:J})};H._generateKey=function(w){switch(w.objectType){case "any":return"@any@";case "null":return"@null@";case "code":return w.codedValue.name+w.codedValue.code.toString();case "range":return w.minValue.toString()+
"-"+w.maxValue.toString()}};H._joinRange=function(w){w.sort((J,O)=>"null"===J.objectType?-1:"null"===O.objectType?1:J.minValue-O.minValue);let e,z;const S=[];for(const J of w)"null"===J.objectType?S.push(J):void 0===e?(e=J.minValue,z=J.maxValue):z<J.minValue?(S.push(new I({objectType:"range",minValue:e,maxValue:z})),e=J.minValue,z=J.maxValue):z<J.maxValue&&(z=J.maxValue);S.push(new I({objectType:"range",minValue:e,maxValue:z}));return S};H._filterIntersection=function(w,e){var z,S;if(0===w.length||
0===e.length)return[];if("any"===w[0].objectType)return e;if("any"===e[0].objectType)return w;const J="range"===w[0].objectType||"range"===(null==(z=w[1])?void 0:z.objectType);z="range"===e[0].objectType||"range"===(null==(S=e[1])?void 0:S.objectType);return J||z?this._intersectRanges(w,e):this._intersectValues(w,e)};H._intersectRanges=function(w,e){const z=[];let S=0;for(const J of w)for(;S<e.length;S++){const O=e[S];if("null"===J.objectType&&"null"===O.objectType)z.push(new I({objectType:"null"}));
else if("null"===J.objectType)break;else if("null"===O.objectType)continue;if(J.maxValue<O.minValue)break;if(J.maxValue===O.minValue){z.push(new I({objectType:"range",minValue:J.maxValue,maxValue:O.minValue}));break}if(!(J.minValue>O.maxValue))if(J.minValue===O.maxValue)z.push(new I({objectType:"range",minValue:J.minValue,maxValue:O.maxValue}));else{w=J.minValue>O.minValue?J.minValue:O.minValue;if(J.maxValue<O.maxValue){z.push(new I({objectType:"range",minValue:w,maxValue:J.maxValue}));break}z.push(new I({objectType:"range",
minValue:w,maxValue:O.maxValue}))}}return z};H._intersectValues=function(w,e){const z=[];for(const S of w)e.some(J=>{if(S.objectType===J.objectType)switch(S.objectType){case "any":case "null":return!0;case "code":return S.codedValue.code===J.codedValue.code&&S.codedValue.name===J.codedValue.name}return!1})&&z.push(S);return z};G._staticFetchEnterpriseFeatureRoot=function(){var w=d._asyncToGenerator(function*(e,z){return c(e,{responseType:"json",query:{f:"json"},...z}).then(S=>S.data)});return function(e,
z){return w.apply(this,arguments)}}();G._staticFetchEnterpriseFieldGroup=function(){var w=d._asyncToGenerator(function*(e,z,S){return c(`${e}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([z]),f:"json"},...S}).then(J=>{var O;return null==(O=J.data.layerDataElements)?void 0:O[0].dataElement.fieldGroups})});return function(e,z,S){return w.apply(this,arguments)}}();H._initializeContingentValues=function(){var w=d._asyncToGenerator(function*(e,z){e=e?e:yield this._fetchFieldGroupDefs(z);
this.fieldGroups=0===e.length?[]:yield this._fetchContingentValues(e,z)});return function(e,z){return w.apply(this,arguments)}}();H._fetchFieldGroupDefs=function(){var w=d._asyncToGenerator(function*(e){var z=this;const S=this.layer.sourceJSON,J=this.layer.layerId.toString(),O=u.unwrap(k.parse(this.layer.url)).url.path;return S.hasContingentValuesDefinition?(yield this._fetchAGOLFieldGroup(O,J,e)).map(t=>({name:t.name,isEditingRestrictive:t.restrictive,fields:t.fields.map(l=>this.layer.fieldsIndex.normalizeFieldName(l))})):
void 0!==S.hasContingentValuesDefinition?[]:this._fetchEnterpriseFeatureRoot(O,e).then(function(){var t=d._asyncToGenerator(function*(l){return l.supportsQueryDataElements?(yield z._fetchEnterpriseFieldGroup(O,J,e)).map(b=>({name:b.name,isEditingRestrictive:b.isEditingRestrictive,fields:b.fieldNames.names.map(f=>z.layer.fieldsIndex.normalizeFieldName(f))})):[]});return function(l){return t.apply(this,arguments)}}())});return function(e){return w.apply(this,arguments)}}();H._fetchAGOLFieldGroup=function(){var w=
d._asyncToGenerator(function*(e,z,S){return c(`${e}/${z}/fieldgroups`,{responseType:"json",query:{f:"json"},...S}).then(J=>J.data.fieldGroups)});return function(e,z,S){return w.apply(this,arguments)}}();H._fetchEnterpriseFieldGroup=function(){var w=d._asyncToGenerator(function*(e,z,S){return A._staticFetchEnterpriseFieldGroup(e,z,S)});return function(e,z,S){return w.apply(this,arguments)}}();H._fetchEnterpriseFeatureRoot=function(){var w=d._asyncToGenerator(function*(e,z){return A._staticFetchEnterpriseFeatureRoot(e,
z)});return function(e,z){return w.apply(this,arguments)}}();H._fetchContingentValues=function(){var w=d._asyncToGenerator(function*(e,z){const S=this.layer.sourceJSON,J=this.layer.layerId.toString(),O=u.unwrap(k.parse(this.layer.url)).url.path;if(S.hasContingentValuesDefinition)return z=yield this._fetchAGOLContingentValues(O,J,z),this._constructFieldGroupsAGOL(e,z);z=yield this._fetchEnterpriseContingentValues(O,J,z);return this._constructFieldGroupsEnterprise(e,z)});return function(e,z){return w.apply(this,
arguments)}}();H._constructFieldGroupsAGOL=function(w,e){return w.map(z=>{const S=e.contingentValuesDefinition.fieldGroups.find(J=>J.name===z.name);if(S){let J=[];J=e.contingentValuesDefinition.hasSubType?this._parseAGOLFieldGroupSubtype(z,e,S.subTypes):this._parseAGOLFieldGroup(z,e,S.contingentValues);return new E({name:z.name,isEditingRestrictive:z.isEditingRestrictive,fields:z.fields,contingencies:J})}return null}).filter(z=>null!==z)};H._parseAGOLFieldGroupSubtype=function(w,e,z){let S=[];z.forEach(J=>
{const O=this._getSubtypeAGOL(J.name);S=S.concat(this._parseAGOLFieldGroup(w,e,J.contingentValues,O))});return S};H._parseAGOLFieldGroup=function(w,e,z,S=null){const J=[];for(const O of z)z=this._parseAGOLContingency(O,w,e,S),J.push(z);return J};H._parseAGOLContingency=function(w,e,z,S){const J=w.id,O=w.retired?1===w.retired:!1,t={};for(let b=0,f=0;b<e.fields.length;b++){const n=e.fields[b];var l=z.typeCodes[w.types[b]];if("Code"===l){let P=w.values[f];f++;const U=this._getDomain(S,n);"string"===
this.layer.getField(n).type&&(l=z.stringDicts.find(T=>T.domain===U.name))&&(P=l.entries[P]);l=U.codedValues.find(T=>T.code===P);l=new I({codedValue:l,objectType:"code"});t[n]=l}else"Range"===l?(l=w.values[f],f++,l=new I({minValue:l.range[0],maxValue:l.range[1],objectType:"range"}),t[n]=l):"Any"===l?(l=new I({objectType:"any"}),t[n]=l):(l=new I({objectType:"null"}),t[n]=l)}return new m({id:J,isRetired:O,subtype:S,values:t})};H._constructFieldGroupsEnterprise=function(w,e){const z=e.fieldGroups;return w.map(S=>
{var J=z.find(O=>O.name===S.name);return J?(J=J.contingencies.map(O=>{const t=O.id,l=O.isRetired||!1,b=this._getSubtypeEnterprise(O.subtypeCode),f={};for(let P=0;P<S.fields.length;P++){const U=S.fields[P];let T=O.values[P];if("number"===typeof T||"string"===typeof T){var n=this._getDomain(b,U);const v=this.layer.getField(U);"string"===v.type?T=e.stringDictionary[T]:"date"===v.type&&(T=(new Date(`${T}+00:00`)).getTime());n=n.codedValues.find(N=>N.code===T);n=new I({codedValue:n,objectType:"code"});
f[U]=n}else"object"===typeof T?(n=new I({minValue:T.minValue,maxValue:T.maxValue,objectType:"range"}),f[U]=n):T?(n=new I({objectType:"any"}),f[U]=n):(n=new I({objectType:"null"}),f[U]=n)}return new m({id:t,isRetired:l,subtype:b,values:f})}),new E({name:S.name,isEditingRestrictive:S.isEditingRestrictive,fields:S.fields,contingencies:J})):null}).filter(S=>null!==S)};H._fetchEnterpriseContingentValues=function(){var w=d._asyncToGenerator(function*(e,z,S){return c(`${e}/queryContingentValues`,{responseType:"json",
query:{layers:JSON.stringify([z]),f:"json"},...S}).then(J=>{var O;return null==(O=J.data.contingentValueSets)?void 0:O[0]})});return function(e,z,S){return w.apply(this,arguments)}}();H._fetchAGOLContingentValues=function(){var w=d._asyncToGenerator(function*(e,z,S){return c(`${e}/${z}/contingentValues`,{responseType:"json",query:{f:"json"},...S}).then(J=>J.data)});return function(e,z,S){return w.apply(this,arguments)}}();H._getSubtypeEnterprise=function(w){var e=this.layer.sourceJSON;let z;e.subtypes&&
(e=e.subtypes.find(S=>S.code===w),z=x.fromJSON(e));return z?z:null};H._getSubtypeAGOL=function(w){var e=this.layer.sourceJSON;let z;e.subtypes&&(e=e.subtypes.find(S=>S.name===w),z=x.fromJSON(e));return z?z:null};H._getDomain=function(w,e){w=w?w.domains[e]:this.layer.getFieldDomain(e);return"inherited"===w.type?this.layer.getFieldDomain(e):w};return G}(B.JSONSupportMixin(g));h.__decorate([F.property({constructOnly:!0})],B.prototype,"layer",void 0);h.__decorate([F.property({constructOnly:!0})],B.prototype,
"request",void 0);h.__decorate([F.property({type:[E]})],B.prototype,"fieldGroups",void 0);h.__decorate([F.property()],B.prototype,"fieldGroupDefinitions",void 0);return B=A=h.__decorate([y.subclass("esri.layers.support.LayerContingentValuesCache")],B)})},"esri/layers/support/Contingency":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,h,c,B,g,u,F,L){c=function(K){function M(y){y=K.call(this,y)||this;y.isRetired=!1;return y}d._inheritsLoose(M,K);return M}(c);h.__decorate([B.property()],c.prototype,"id",void 0);h.__decorate([B.property()],c.prototype,"isRetired",void 0);h.__decorate([B.property()],c.prototype,"subtype",void 0);h.__decorate([B.property()],c.prototype,"values",void 0);return c=h.__decorate([L.subclass("esri.layers.support.Contingency")],c)})},"esri/layers/support/ContingencyConstraintViolation":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,h,c,B,g,u,F,L){c=function(K){function M(y){return K.call(this,y)||this}d._inheritsLoose(M,K);return M}(c);h.__decorate([B.property()],c.prototype,"fieldGroup",void 0);h.__decorate([B.property()],c.prototype,"type",void 0);return c=h.__decorate([L.subclass("esri.layers.support.ContingencyConstraintViolation")],c)})},"esri/layers/support/ContingentValuesResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,h,c,B,g,u,F,L){c=function(K){function M(y){return K.call(this,y)||this}d._inheritsLoose(M,K);return M}(c);h.__decorate([B.property()],c.prototype,"contingentValuesAllGroups",void 0);h.__decorate([B.property()],c.prototype,"contingentValuesByFieldGroup",void 0);return c=h.__decorate([L.subclass("esri.layers.support.ContingentValuesResult")],c)})},"esri/layers/support/FieldGroup":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,h,c,B,g,u,F,L){c=function(K){function M(y){y=K.call(this,y)||this;y.fields=null;y.isEditingRestrictive=!1;return y}d._inheritsLoose(M,K);return M}(c);h.__decorate([B.property()],c.prototype,"name",void 0);h.__decorate([B.property()],c.prototype,"fields",void 0);h.__decorate([B.property()],c.prototype,"isEditingRestrictive",void 0);h.__decorate([B.property()],c.prototype,"contingencies",void 0);return c=h.__decorate([L.subclass("esri.layers.support.FieldGroup")],c)})},"esri/layers/support/Subtype":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,h,c,B,g,u,F,L){c=function(K){function M(){var y=K.apply(this,arguments)||this;y.code=null;y.defaultValues={};y.domains={};y.name=null;return y}d._inheritsLoose(M,K);return M}(c.JSONSupport);h.__decorate([B.property({type:Number,json:{write:!0}})],c.prototype,"code",void 0);h.__decorate([B.property({type:Object,json:{write:!0}})],c.prototype,"defaultValues",void 0);h.__decorate([B.property({type:Object,json:{write:!0}})],c.prototype,"domains",void 0);h.__decorate([B.property({type:String,
json:{write:!0}})],c.prototype,"name",void 0);return c=h.__decorate([L.subclass("esri.layers.support.Subtype")],c)})},"esri/widgets/FeatureForm/InputField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../intl ../../core/Accessor ../../core/HandleOwner ../../core/maybe ../../core/reactiveUtils ../../core/uid ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/CodedValueDomain ../../layers/support/Domain ../../layers/support/InheritedDomain ../../layers/support/RangeDomain ../../layers/support/domainUtils ../../layers/support/fieldUtils ../../intl/substitute".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p,E,x,A,r){function G(O){return 1E7<=O||-1E7>=O}function H(O){return!!O&&"maxLength"in O}var w;(function(O){O.Text="text";O.Number="number";O.Date="date";O.Unsupported="unsupported"})(w||(w={}));var e;(e||(e={})).TOO_SHORT="length-validation-error::too-short";const z={type:"number"},S={type:"number",intlOptions:{notation:"scientific"}},J={type:"date",intlOptions:{day:"2-digit",month:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}};
c=function(O){function t(b){b=O.call(this,b)||this;b._storedValue=null;b.arcade=null;b.editableFunction=null;b.id=L.generateUID().toString();b.requiredFunction=null;b.valueFunction=null;b.visibilityFunction=null;b.feature=null;b.field=null;b.fieldElement=null;b.layer=null;b.description=null;b.inputType=null;b.error=null;b.group=null;b.hint=null;b.messages=null;b.name=null;return b}d._inheritsLoose(t,O);var l=t.prototype;l.initialize=function(){this.handles.add(F.watch(()=>this.value,(b,f)=>{if(b!==
f){const {feature:n,name:P,value:U}=this;n.setAttribute(P,U)}}))};l._isDomainCompatible=function(b){const {field:f}=this;if("coded-value"===(null==b?void 0:b.type)){const n=typeof b.codedValues[0].code;if("string"===n&&A.isStringField(f)||"number"===n&&A.isNumericField(f))return!0}return"range"===(null==b?void 0:b.type)&&A.isNumericField(f)||A.isDateField(f)?!0:!1};l._validate=function(){const {domain:b,field:f,initialFeature:n,minLength:P,required:U,type:T,valid:v,value:N}=this,R=U&&null===N,W=void 0!==
v;return!R&&n.getAttribute(f.name)===N&&W?null:"text"===T&&-1<P&&"string"===typeof N&&N.length<P?e.TOO_SHORT:b?null!==N||U?x.validateDomainValue(b,N):null:R?A.TypeValidationError.INVALID_TYPE:A.validateFieldValue(f,N)};l._isVisibleByDefault=function(){var b;const f=null==(b=this.field)?void 0:b.type;return"oid"!==f&&"global-id"!==f&&!this._isGeometryField()};l._isEditorField=function(){return-1<A.getFeatureEditFields(this.layer).indexOf(this.name)};l._isGeometryField=function(){return-1<A.getFeatureGeometryFields(this.layer).indexOf(this.name)};
l._shouldUseValueExpression=function(){return this._layerFieldAllowsEdits&&!this._configAllowsEdits&&u.isSome(this.valueFunction)};l._toErrorMessage=function(){const {domain:b,field:f,messages:n,minLength:P,value:U,required:T,type:v}=this;var N=this.error;return T&&null===U?n.validationErrors.cannotBeNull:N===x.DomainValidationError.VALUE_OUT_OF_RANGE||N===A.NumericRangeValidationError.OUT_OF_RANGE?(N=x.getDomainRange(b)||A.getFieldRange(f),r.substitute(n.validationErrors.outsideRange,N,{format:{max:"date"===
v?J:G(N.max)?S:z,min:"date"===v?J:G(N.min)?S:z}})):N===x.DomainValidationError.INVALID_CODED_VALUE?n.validationErrors.invalidCodedValue:N===A.TypeValidationError.INVALID_TYPE?n.validationErrors.invalidType:N===e.TOO_SHORT?r.substitute(n.validationErrors.tooShort,{min:P}):null};d._createClass(t,[{key:"_configAllowsEdits",get:function(){var b,f,n;const {fieldElement:P,layer:U,name:T}=this;if(u.isSome(P))return!1!==P.editable;const v="subtype-group"!==(null==U?void 0:U.type)?null==U?void 0:null==(b=
U.popupTemplate)?void 0:null==(f=b.fieldInfos)?void 0:f.find(({fieldName:N})=>N===T):null;return null!=(n=null==v?void 0:v.isEditable)?n:!0}},{key:"_layerFieldAllowsEdits",get:function(){const {field:b,layer:f}=this;return(null==f?void 0:f.capabilities.operations.supportsEditing)&&(null==b?void 0:b.editable)}},{key:"isUsingValueExpression",get:function(){return this._shouldUseValueExpression()}},{key:"evaluatedEditableExpression",get:function(){const {editableFunction:b}=this;if(u.isNone(b))return null;
const {arcade:f}=this;return f.arcadeUtils.executeFunction(b,f.arcadeUtils.createExecContext(this.feature))}},{key:"evaluatedRequiredExpression",get:function(){const {requiredFunction:b}=this;if(u.isNone(b))return null;const {arcade:f}=this;return f.arcadeUtils.executeFunction(b,f.arcadeUtils.createExecContext(this.feature))}},{key:"evaluatedVisibilityExpression",get:function(){const {visibilityFunction:b}=this;if(u.isNone(b))return null;const {arcade:f}=this;return f.arcadeUtils.executeFunction(b,
f.arcadeUtils.createExecContext(this.feature))}},{key:"evaluatedValueExpression",get:function(){const {valueFunction:b}=this;if(u.isNone(b))return null;const {arcade:f}=this;return f.arcadeUtils.executeFunction(b,f.arcadeUtils.createExecContext(this.feature))}},{key:"initialFeature",set:function(b){this._set("initialFeature",b);this.notifyChange("valid")}},{key:"domain",get:function(){var b,{typeIdField:f}=this.layer;const n=f===this.name;var P=null==(b=this.field)?void 0:b.domain;if(n&&!P)return{layer:f}=
this,f="subtype-group"===f.type?f.sublayers.map(({subtypeCode:U,title:T})=>({id:U,name:T})):f.types.map(({id:U,name:T})=>({code:U,name:T})),new q({name:"__internal-type-based-coded-value-domain__",codedValues:f});({feature:b}=this);f=f&&this.layer.getFieldDomain(this.name,{feature:b})||P;P=u.get(this.fieldElement,"domain");return u.isSome(P)&&this._isDomainCompatible(P)?P:f}},{key:"editable",get:function(){var b;return this._layerFieldAllowsEdits?null!=(b=this.evaluatedEditableExpression)?b:this._configAllowsEdits:
!1}},{key:"errorMessage",get:function(){return this._toErrorMessage()}},{key:"includeTime",get:function(){var b,{fieldElement:f}=this;f=u.isSome(f)&&"datetime-picker"===(null==(b=f.input)?void 0:b.type)?f.input.includeTime:void 0;return void 0===f?!0:f}},{key:"label",get:function(){return u.isSome(this.fieldElement)&&this.fieldElement.label||this.field.alias||this.field.name}},{key:"maxLength",get:function(){if(this.type===w.Date)return-1;const {field:b,fieldElement:f}=this,n=null==b?void 0:b.length,
P=u.isSome(f)&&H(f.input)?f.input.maxLength:NaN;return!isNaN(P)&&-1<=P&&(-1===n||P<=n)?P:n}},{key:"minLength",get:function(){if(this.type===w.Date)return-1;const {field:b,fieldElement:f}=this,n=null==b?void 0:b.length,P=u.isSome(f)&&H(f.input)?f.input.minLength:NaN;return!isNaN(P)&&-1<=P&&(-1===n||P<=n)?P:-1}},{key:"required",get:function(){var b,f;return this.editable?!1===(null==(b=this.field)?void 0:b.nullable)?!0:null!=(f=this.evaluatedRequiredExpression)?f:!1:!1}},{key:"submittable",get:function(){const {field:b,
required:f,valid:n,value:P}=this;return n?!0:f&&u.isNone(P)?!1:this.initialFeature.getAttribute(b.name)===P}},{key:"type",get:function(){const {field:b}=this;return A.isNumericField(b)?w.Number:A.isStringField(b)?w.Text:A.isDateField(b)?w.Date:w.Unsupported}},{key:"valid",get:function(){const b=this.editable?this._validate():null;this._set("error",b);return null===b}},{key:"value",get:function(){return this._shouldUseValueExpression()?this.evaluatedValueExpression:this.get("_storedValue")},set:function(b){this.notifyChange("evaluatedVisibilityExpression");
this.set("_storedValue",b)}},{key:"visible",get:function(){if(this._isEditorField())return!1;if(u.isSome(this.fieldElement)){var b;return null!=(b=this.evaluatedVisibilityExpression)?b:!0}return this._isVisibleByDefault()}}]);return t}(g.HandleOwnerMixin(B));h.__decorate([K.property()],c.prototype,"_storedValue",void 0);h.__decorate([K.property()],c.prototype,"_configAllowsEdits",null);h.__decorate([K.property()],c.prototype,"_layerFieldAllowsEdits",null);h.__decorate([K.property()],c.prototype,"arcade",
void 0);h.__decorate([K.property()],c.prototype,"editableFunction",void 0);h.__decorate([K.property()],c.prototype,"requiredFunction",void 0);h.__decorate([K.property()],c.prototype,"valueFunction",void 0);h.__decorate([K.property()],c.prototype,"isUsingValueExpression",null);h.__decorate([K.property()],c.prototype,"visibilityFunction",void 0);h.__decorate([K.property()],c.prototype,"evaluatedEditableExpression",null);h.__decorate([K.property()],c.prototype,"evaluatedRequiredExpression",null);h.__decorate([K.property()],
c.prototype,"evaluatedVisibilityExpression",null);h.__decorate([K.property()],c.prototype,"evaluatedValueExpression",null);h.__decorate([K.property()],c.prototype,"feature",void 0);h.__decorate([K.property()],c.prototype,"field",void 0);h.__decorate([K.property()],c.prototype,"fieldElement",void 0);h.__decorate([K.property()],c.prototype,"initialFeature",null);h.__decorate([K.property()],c.prototype,"layer",void 0);h.__decorate([K.property({aliasOf:"fieldElement.description"})],c.prototype,"description",
void 0);h.__decorate([K.property()],c.prototype,"domain",null);h.__decorate([K.property()],c.prototype,"editable",null);h.__decorate([K.property({aliasOf:"fieldElement.input.type"})],c.prototype,"inputType",void 0);h.__decorate([K.property({readOnly:!0})],c.prototype,"error",void 0);h.__decorate([K.property({dependsOn:["error","messages","value"]})],c.prototype,"errorMessage",null);h.__decorate([K.property()],c.prototype,"group",void 0);h.__decorate([K.property({aliasOf:"fieldElement.hint"})],c.prototype,
"hint",void 0);h.__decorate([K.property()],c.prototype,"includeTime",null);h.__decorate([K.property()],c.prototype,"label",null);h.__decorate([K.property()],c.prototype,"maxLength",null);h.__decorate([K.property()],c.prototype,"minLength",null);h.__decorate([K.property()],c.prototype,"messages",void 0);h.__decorate([K.property({aliasOf:"field.name"})],c.prototype,"name",void 0);h.__decorate([K.property()],c.prototype,"required",null);h.__decorate([K.property()],c.prototype,"submittable",null);h.__decorate([K.property()],
c.prototype,"type",null);h.__decorate([K.property()],c.prototype,"valid",null);h.__decorate([K.property({value:null})],c.prototype,"value",null);h.__decorate([K.property()],c.prototype,"visible",null);return c=h.__decorate([m.subclass("esri.widgets.FeatureForm.InputField")],c)})},"esri/widgets/FeatureForm/InputFieldGroup":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/HandleOwner ../../core/maybe ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y){c=function(k){function m(q){q=k.call(this,q)||this;q.arcade=null;q.visibilityExpression=null;q.visibilityFunction=null;q.description=null;q.feature=null;q.groupElement=null;q.label=null;return q}d._inheritsLoose(m,k);m.prototype._dirtyEvaluatedVisibility=function(){const {groupElement:q}=this;g.isSome(q)&&q.visibilityExpression&&this.notifyChange("evaluatedVisibility")};d._createClass(m,[{key:"evaluatedVisibility",get:function(){const {visibilityFunction:q}=this;if(!g.isNone(q)){var {arcade:I}=
this;return I.arcadeUtils.executeFunction(q,I.arcadeUtils.createExecContext(this.feature))}}},{key:"inputFields",get:function(){return this._get("inputFields")},set:function(q){this.handles.removeAll();q&&this.handles.add(q.map(I=>I.watch("visible",this._dirtyEvaluatedVisibility)));this._set("inputFields",q)}},{key:"state",get:function(){return g.isSome(this.groupElement)&&this.groupElement.initialState||"expanded"},set:function(q){g.isNone(q)?this._clearOverride("state"):this._override("state",q)}},
{key:"visible",get:function(){return!1!==this.evaluatedVisibility&&this.inputFields&&this.inputFields.some(q=>q.visible)}}]);return m}(B.HandleOwnerMixin(c));h.__decorate([M.property()],c.prototype,"arcade",void 0);h.__decorate([u.aliasOf("groupElement.visibilityExpression")],c.prototype,"visibilityExpression",void 0);h.__decorate([M.property()],c.prototype,"visibilityFunction",void 0);h.__decorate([M.property()],c.prototype,"evaluatedVisibility",null);h.__decorate([u.aliasOf("groupElement.description")],
c.prototype,"description",void 0);h.__decorate([M.property()],c.prototype,"feature",void 0);h.__decorate([M.property()],c.prototype,"groupElement",void 0);h.__decorate([M.property()],c.prototype,"inputFields",null);h.__decorate([u.aliasOf("groupElement.label")],c.prototype,"label",void 0);h.__decorate([M.property()],c.prototype,"state",null);h.__decorate([M.property()],c.prototype,"visible",null);return c=h.__decorate([y.subclass("esri.widgets.FeatureForm.InputFieldGroup")],c)})},"esri/widgets/support/Heading":function(){define("exports ../../core/mathUtils ./widgetUtils ../../core/has ../../core/Logger ./jsxFactory".split(" "),
function(d,h,c,B,g,u){const F={heading:"esri-widget__heading"};d.CSS=F;d.Heading=function(L,K){const M=h.clamp(Math.ceil(L.level),1,6),y=`h${M}`;delete L.level;return u.tsx(y,{...L,class:c.classes(F.heading,L.class),role:"heading","aria-level":String(M)},K)};d.incrementHeadingLevel=function(L,K=1){return h.clamp(Math.ceil(L+K),1,6)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/chunks/datetime":function(){define(["exports"],function(d){function h(a){return"undefined"===typeof a}function c(a){return"number"===
typeof a}function B(a){return"number"===typeof a&&0===a%1}function g(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(a){return!1}}function u(a,C,Y){if(0!==a.length)return a.reduce((ca,ia)=>{ia=[C(ia),ia];return ca?Y(ca[0],ia[0])===ca[0]?ca:ia:ia},null)[1]}function F(a,C){return C.reduce((Y,ca)=>{Y[ca]=a[ca];return Y},{})}function L(a,C){return Object.prototype.hasOwnProperty.call(a,C)}function K(a,C,Y){return B(a)&&a>=C&&a<=Y}function M(a,C=2){return 0>a?"-"+(""+-a).padStart(C,
"0"):(""+a).padStart(C,"0")}function y(a){if(!h(a)&&null!==a&&""!==a)return parseInt(a,10)}function k(a){if(!h(a)&&null!==a&&""!==a)return parseFloat(a)}function m(a){if(!h(a)&&null!==a&&""!==a)return a=1E3*parseFloat("0."+a),Math.floor(a)}function q(a,C,Y=!1){C=10**C;return(Y?Math.trunc:Math.round)(a*C)/C}function I(a){return 0===a%4&&(0!==a%100||0===a%400)}function p(a,C){var Y=C-1;Y=Y-12*Math.floor(Y/12)+1;return 2===Y?I(a+(C-Y)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][Y-1]}function E(a){let C=
Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);100>a.year&&0<=a.year&&(C=new Date(C),C.setUTCFullYear(C.getUTCFullYear()-1900));return+C}function x(a){var C=a-1;C=(C+Math.floor(C/4)-Math.floor(C/100)+Math.floor(C/400))%7;return 4===(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7||3===C?53:52}function A(a){return 99<a?a:60<a?1900+a:2E3+a}function r(a,C,Y,ca=null){a=new Date(a);const ia={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};
ca&&(ia.timeZone=ca);return(C=(new Intl.DateTimeFormat(Y,{timeZoneName:C,...ia})).formatToParts(a).find(na=>"timezonename"===na.type.toLowerCase()))?C.value:null}function G(a,C){a=parseInt(a,10);Number.isNaN(a)&&(a=0);C=parseInt(C,10)||0;C=0>a||Object.is(a,-0)?-C:C;return 60*a+C}function H(a){const C=Number(a);if("boolean"===typeof a||""===a||Number.isNaN(C))throw new mb(`Invalid unit value ${a}`);return C}function w(a,C){const Y={};for(const ca in a)if(L(a,ca)){const ia=a[ca];void 0!==ia&&null!==
ia&&(Y[C(ca)]=H(ia))}return Y}function e(a,C){const Y=Math.trunc(Math.abs(a/60)),ca=Math.trunc(Math.abs(a%60));a=0<=a?"+":"-";switch(C){case "short":return`${a}${M(Y,2)}:${M(ca,2)}`;case "narrow":return`${a}${Y}${0<ca?`:${ca}`:""}`;case "techie":return`${a}${M(Y,2)}${M(ca,2)}`;default:throw new RangeError(`Value format ${C} is out of range for property format`);}}function z(a){return F(a,["hour","minute","second","millisecond"])}function S(a){switch(a){case "narrow":return[...Jd];case "short":return[...Jc];
case "long":return[...Kd];case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function J(a){switch(a){case "narrow":return[...Ld];case "short":return[...Kc];case "long":return[...Lc];case "numeric":return"1234567".split("");default:return null}}function O(a){switch(a){case "narrow":return[...Md];case "short":return[...Nd];case "long":return[...Od];default:return null}}function t(a,C,Y="always",ca=!1){const ia=
{years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var na=-1===["hours","minutes","seconds"].indexOf(a);if("auto"===Y&&na)switch(Y="days"===a,C){case 1:return Y?"tomorrow":`next ${ia[a][0]}`;case -1:return Y?"yesterday":`last ${ia[a][0]}`;case 0:return Y?"today":`this ${ia[a][0]}`}Y=Object.is(C,-0)||0>C;C=Math.abs(C);na=1===C;const xa=ia[a];a=ca?na?xa[1]:xa[2]||
xa[1]:na?ia[a][0]:a;return Y?`${C} ${a} ago`:`in ${C} ${a}`}function l(a,C){let Y="";for(const ca of a)Y=ca.literal?Y+ca.val:Y+C(ca.val);return Y}function b(a,C){if(h(a)||null===a)return C;if(a instanceof Sb)return a;if("string"===typeof a){const Y=a.toLowerCase();return"local"===Y||"system"===Y?C:"utc"===Y||"gmt"===Y?ib.utcInstance:ib.parseSpecifier(Y)||zb.create(a)}return c(a)?ib.instance(a):"object"===typeof a&&a.offset&&"number"===typeof a.offset?a:new Pd(a)}function f(a,C={}){const Y=JSON.stringify([a,
C]);let ca=Mc[Y];ca||(ca=new Intl.ListFormat(a,C),Mc[Y]=ca);return ca}function n(a,C={}){const Y=JSON.stringify([a,C]);let ca=qc[Y];ca||(ca=new Intl.DateTimeFormat(a,C),qc[Y]=ca);return ca}function P(a,C={}){const Y=JSON.stringify([a,C]);let ca=Zb[Y];ca||(ca=new Intl.NumberFormat(a,C),Zb[Y]=ca);return ca}function U(a,C={}){const {base:Y,...ca}=C,ia=JSON.stringify([a,ca]);let na=rc[ia];na||(na=new Intl.RelativeTimeFormat(a,C),rc[ia]=na);return na}function T(a){const C=[];for(let Y=1;12>=Y;Y++){const ca=
X.utc(2016,Y,1);C.push(a(ca))}return C}function v(a){const C=[];for(let Y=1;7>=Y;Y++){const ca=X.utc(2016,11,13+Y);C.push(a(ca))}return C}function N(a,C,Y,ca,ia){a=a.listingMode(Y);return"error"===a?null:"en"===a?ca(C):ia(C)}function R(...a){a=a.reduce((C,Y)=>C+Y.source,"");return RegExp(`^${a}$`)}function W(...a){return C=>a.reduce(([Y,ca,ia],na)=>{const [xa,Ea,Ia]=na(C,ia);return[{...Y,...xa},ca||Ea,Ia]},[{},null,1]).slice(0,2)}function ea(a,...C){if(null==a)return[null,null];for(const [Y,ca]of C)if(C=
Y.exec(a))return ca(C);return[null,null]}function da(...a){return(C,Y)=>{const ca={};let ia;for(ia=0;ia<a.length;ia++)ca[a[ia]]=y(C[Y+ia]);return[ca,null,Y+ia]}}function qa(a,C,Y){a=a[C];return h(a)?Y:y(a)}function va(a,C){return[{year:qa(a,C),month:qa(a,C+1,1),day:qa(a,C+2,1)},null,C+3]}function Ca(a,C){return[{hours:qa(a,C,0),minutes:qa(a,C+1,0),seconds:qa(a,C+2,0),milliseconds:m(a[C+3])},null,C+4]}function Ba(a,C){const Y=!a[C]&&!a[C+1];a=G(a[C+1],a[C+2]);return[{},Y?null:ib.instance(a),C+3]}function ta(a,
C){return[{},a[C]?zb.create(a[C]):null,C+1]}function fa(a){const [C,Y,ca,ia,na,xa,Ea,Ia,Qa]=a,La="-"===C[0];a=Ia&&"-"===Ia[0];const Ra=(Oa,gb=!1)=>void 0!==Oa&&(gb||Oa&&La)?-Oa:Oa;return[{years:Ra(k(Y)),months:Ra(k(ca)),weeks:Ra(k(ia)),days:Ra(k(na)),hours:Ra(k(xa)),minutes:Ra(k(Ea)),seconds:Ra(k(Ia),"-0"===Ia),milliseconds:Ra(m(Qa),a)}]}function la(a,C,Y,ca,ia,na,xa){C={year:2===C.length?A(y(C)):y(C),month:Jc.indexOf(Y)+1,day:y(ca),hour:y(ia),minute:y(na)};xa&&(C.second=y(xa));a&&(C.weekday=3<a.length?
Lc.indexOf(a)+1:Kc.indexOf(a)+1);return C}function ma(a){const [,C,Y,ca,ia,na,xa,Ea,Ia,Qa,La,Ra]=a;a=la(C,ia,ca,Y,na,xa,Ea);let Oa;Oa=Ia?Qd[Ia]:Qa?0:G(La,Ra);return[a,new ib(Oa)]}function aa(a){const [,C,Y,ca,ia,na,xa,Ea]=a;return[la(C,ia,ca,Y,na,xa,Ea),ib.utcInstance]}function ba(a){const [,C,Y,ca,ia,na,xa,Ea]=a;return[la(C,Ea,Y,ca,ia,na,xa),ib.utcInstance]}function ha(a,C,Y=!1){a={values:Y?C.values:{...a.values,...C.values||{}},loc:a.loc.clone(C.loc),conversionAccuracy:C.conversionAccuracy||a.conversionAccuracy};
return new Sa(a)}function ka(a,C,Y,ca,ia){a=a[ia][Y];var na=C[Y]/a;na=Math.sign(na)!==Math.sign(ca[ia])&&0!==ca[ia]&&1>=Math.abs(na)?0>na?Math.floor(na):Math.ceil(na):Math.trunc(na);ca[ia]+=na;C[Y]-=na*a}function pa(a,C){Rd.reduce((Y,ca)=>{if(h(C[ca]))return Y;Y&&ka(a,C,Y,C,ca);return ca},null)}function oa(a,C){a=C.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(Sa.fromMillis(a).as("days"))}function ra(a,C,Y){var ca=[["years",
(Ea,Ia)=>Ia.year-Ea.year],["quarters",(Ea,Ia)=>Ia.quarter-Ea.quarter],["months",(Ea,Ia)=>Ia.month-Ea.month+12*(Ia.year-Ea.year)],["weeks",(Ea,Ia)=>{Ea=oa(Ea,Ia);return(Ea-Ea%7)/7}],["days",oa]];const ia={};let na,xa;for(const [Ea,Ia]of ca)0<=Y.indexOf(Ea)&&(na=Ea,ca=Ia(a,C),xa=a.plus({[Ea]:ca}),xa>C?(a=a.plus({[Ea]:ca-1}),--ca):a=xa,ia[Ea]=ca);return[a,ia,xa,na]}function Aa(a,C,Y,ca){let [ia,na,xa,Ea]=ra(a,C,Y);a=C-ia;Y=Y.filter(Ia=>0<=["hours","minutes","seconds","milliseconds"].indexOf(Ia));0===
Y.length&&(xa<C&&(xa=ia.plus({[Ea]:1})),xa!==ia&&(na[Ea]=(na[Ea]||0)+a/(xa-ia)));C=Sa.fromObject(na,ca);return 0<Y.length?Sa.fromMillis(a,ca).shiftTo(...Y).plus(C):C}function Fa({numberingSystem:a},C=""){return new RegExp(`${sc[a||"latn"]}${C}`)}function ya(a,C=Y=>Y){return{regex:a,deser:([Y])=>{{let ca=parseInt(Y,10);if(isNaN(ca)){ca="";for(let ia=0;ia<Y.length;ia++){const na=Y.charCodeAt(ia);if(-1!==Y[ia].search(sc.hanidec))ca+=Sd.indexOf(Y[ia]);else for(const xa in Nc){const [Ea,Ia]=Nc[xa];na>=
Ea&&na<=Ia&&(ca+=na-Ea)}}Y=parseInt(ca,10)}else Y=ca}return C(Y)}}}function Da(a){return a.replace(/\./g,"\\.?").replace($b,Oc)}function za(a,C){return null===a?null:{regex:RegExp(a.map(Da).join("|")),deser:([Y])=>a.findIndex(ca=>Y.replace(/\./g,"").replace($b," ").toLowerCase()===ca.replace(/\./g,"").replace($b," ").toLowerCase())+C}}function Ja(a,C){return{regex:a,deser:([,Y,ca])=>G(Y,ca),groups:C}}function Ka(a){return{regex:a,deser:([C])=>C}}function Ma(a,C){const Y=Fa(C),ca=Fa(C,"{2}"),ia=Fa(C,
"{3}"),na=Fa(C,"{4}"),xa=Fa(C,"{6}"),Ea=Fa(C,"{1,2}"),Ia=Fa(C,"{1,3}"),Qa=Fa(C,"{1,6}"),La=Fa(C,"{1,9}"),Ra=Fa(C,"{2,4}"),Oa=Fa(C,"{4,6}"),gb=vb=>({regex:RegExp(vb.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([Td])=>Td,literal:!0}),wb=(vb=>{if(a.literal)return gb(vb);switch(vb.val){case "G":return za(C.eras("short",!1),0);case "GG":return za(C.eras("long",!1),0);case "y":return ya(Qa);case "yy":return ya(Ra,A);case "yyyy":return ya(na);case "yyyyy":return ya(Oa);case "yyyyyy":return ya(xa);
case "M":return ya(Ea);case "MM":return ya(ca);case "MMM":return za(C.months("short",!0,!1),1);case "MMMM":return za(C.months("long",!0,!1),1);case "L":return ya(Ea);case "LL":return ya(ca);case "LLL":return za(C.months("short",!1,!1),1);case "LLLL":return za(C.months("long",!1,!1),1);case "d":return ya(Ea);case "dd":return ya(ca);case "o":return ya(Ia);case "ooo":return ya(ia);case "HH":return ya(ca);case "H":return ya(Ea);case "hh":return ya(ca);case "h":return ya(Ea);case "mm":return ya(ca);case "m":return ya(Ea);
case "q":return ya(Ea);case "qq":return ya(ca);case "s":return ya(Ea);case "ss":return ya(ca);case "S":return ya(Ia);case "SSS":return ya(ia);case "u":return Ka(La);case "uu":return Ka(Ea);case "uuu":return ya(Y);case "a":return za(C.meridiems(),0);case "kkkk":return ya(na);case "kk":return ya(Ra,A);case "W":return ya(Ea);case "WW":return ya(ca);case "E":case "c":return ya(Y);case "EEE":return za(C.weekdays("short",!1,!1),1);case "EEEE":return za(C.weekdays("long",!1,!1),1);case "ccc":return za(C.weekdays("short",
!0,!1),1);case "cccc":return za(C.weekdays("long",!0,!1),1);case "Z":case "ZZ":return Ja(new RegExp(`([+-]${Ea.source})(?::(${ca.source}))?`),2);case "ZZZ":return Ja(new RegExp(`([+-]${Ea.source})(${ca.source})?`),2);case "z":return Ka(/[a-z_+-/]{1,256}?/i);default:return gb(vb)}})(a)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};wb.token=a;return wb}function Na(a){return[`^${a.map(C=>C.regex).reduce((C,Y)=>`${C}(${Y.source})`,"")}$`,a]}function qb(a,C,Y){if(a=a.match(C)){C=
{};let ca=1;for(const ia in Y)if(L(Y,ia)){const na=Y[ia],xa=na.groups?na.groups+1:1;!na.literal&&na.token&&(C[na.token.val[0]]=na.deser(a.slice(ca,ca+xa)));ca+=xa}return[a,C]}return[a,{}]}function hb(a){const C=ia=>{switch(ia){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";
case "q":return"quarter";default:return null}};let Y=null,ca;h(a.z)||(Y=zb.create(a.z));h(a.Z)||(Y||(Y=new ib(a.Z)),ca=a.Z);h(a.q)||(a.M=3*(a.q-1)+1);h(a.h)||(12>a.h&&1===a.a?a.h+=12:12===a.h&&0===a.a&&(a.h=0));0===a.G&&a.y&&(a.y=-a.y);h(a.u)||(a.S=m(a.u));return[Object.keys(a).reduce((ia,na)=>{const xa=C(na);xa&&(ia[xa]=a[na]);return ia},{}),Y,ca]}function Va(){ac||(ac=X.fromMillis(1555555555555));return ac}function ab(a,C){if(a.literal)return a;const Y=kb.macroTokenToFormatOpts(a.val);if(!Y)return a;
C=kb.create(C,Y).formatDateTimeParts(Va()).map(ca=>{{const {type:na,value:xa}=ca;if("literal"===na)ca={literal:!0,val:xa};else{ca=Y[na];var ia=Pc[na];"object"===typeof ia&&(ia=ia[ca]);ca=ia?{literal:!1,val:ia}:void 0}}return ca});return C.includes(void 0)?a:C}function wa(a,C){return Array.prototype.concat(...a.map(Y=>ab(Y,C)))}function Pb(a,C,Y){Y=wa(kb.parseFormat(Y),a);var ca=Y.map(na=>Ma(na,a));const ia=ca.find(na=>na.invalidReason);if(ia)return{input:C,tokens:Y,invalidReason:ia.invalidReason};
{const [na,xa]=Na(ca);ca=RegExp(na,"i");const [Ea,Ia]=qb(C,ca,xa),[Qa,La,Ra]=Ia?hb(Ia):[null,null,void 0];if(L(Ia,"a")&&L(Ia,"H"))throw new Tb("Can't include meridiem when specifying 24-hour format");return{input:C,tokens:Y,regex:ca,rawMatches:Ea,matches:Ia,result:Qa,zone:La,specificOffset:Ra}}}function fb(a,C){return new rb("unit out of range",`you specified ${C} (of type ${typeof C}) as a ${a}, which is invalid`)}function sb(a,C,Y){a=(new Date(Date.UTC(a,C-1,Y))).getUTCDay();return 0===a?7:a}function D(a,
C){a=I(a)?Q:bc;const Y=a.findIndex(ca=>ca<C);return{month:Y+1,day:C-a[Y]}}function Ab(a){const {year:C,month:Y,day:ca}=a;var ia=ca+(I(C)?Q:bc)[Y-1];const na=sb(C,Y,ca);ia=Math.floor((ia-na+10)/7);let xa;1>ia?(xa=C-1,ia=x(xa)):ia>x(C)?(xa=C+1,ia=1):xa=C;return{weekYear:xa,weekNumber:ia,weekday:na,...z(a)}}function Bb(a){const {weekYear:C,weekNumber:Y,weekday:ca}=a;var ia=sb(C,1,4),na=I(C)?366:365;ia=7*Y+ca-ia-3;1>ia?(na=C-1,ia+=I(na)?366:365):ia>na?(na=C+1,ia-=I(C)?366:365):na=C;const {month:xa,day:Ea}=
D(na,ia);return{year:na,month:xa,day:Ea,...z(a)}}function Ib(a){const {year:C,month:Y,day:ca}=a;var ia=ca+(I(C)?Q:bc)[Y-1];return{year:C,ordinal:ia,...z(a)}}function Ub(a){const {year:C,ordinal:Y}=a,{month:ca,day:ia}=D(C,Y);return{year:C,month:ca,day:ia,...z(a)}}function bb(a){const C=B(a.year),Y=K(a.month,1,12),ca=K(a.day,1,p(a.year,a.month));return C?Y?ca?!1:fb("day",a.day):fb("month",a.month):fb("year",a.year)}function Qb(a){const {hour:C,minute:Y,second:ca,millisecond:ia}=a;a=K(C,0,23)||24===
C&&0===Y&&0===ca&&0===ia;const na=K(Y,0,59),xa=K(ca,0,59),Ea=K(ia,0,999);return a?na?xa?Ea?!1:fb("millisecond",ia):fb("second",ca):fb("minute",Y):fb("hour",C)}function Jb(a){return new rb("unsupported zone",`the zone "${a.name}" is not supported`)}function Cb(a){null===a.weekData&&(a.weekData=Ab(a.c));return a.weekData}function Db(a,C){a={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new X({...a,...C,old:a})}function Z(a,C,Y){let ca=a-6E4*C;const ia=Y.offset(ca);if(C===ia)return[ca,
C];ca-=6E4*(ia-C);C=Y.offset(ca);return ia===C?[ca,ia]:[a-6E4*Math.min(ia,C),Math.max(ia,C)]}function ja(a,C){a=new Date(a+6E4*C);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function sa(a,C,Y){return Z(E(a),C,Y)}function Ga(a,C){const Y=a.o;var ca=a.c.year+Math.trunc(C.years);const ia=a.c.month+Math.trunc(C.months)+3*Math.trunc(C.quarters);ca={...a.c,year:ca,month:ia,
day:Math.min(a.c.day,p(ca,ia))+Math.trunc(C.days)+7*Math.trunc(C.weeks)};C=Sa.fromObject({years:C.years-Math.trunc(C.years),quarters:C.quarters-Math.trunc(C.quarters),months:C.months-Math.trunc(C.months),weeks:C.weeks-Math.trunc(C.weeks),days:C.days-Math.trunc(C.days),hours:C.hours,minutes:C.minutes,seconds:C.seconds,milliseconds:C.milliseconds}).as("milliseconds");ca=E(ca);let [na,xa]=Z(ca,Y,a.zone);0!==C&&(na+=C,xa=a.zone.offset(na));return{ts:na,o:xa}}function Ha(a,C,Y,ca,ia,na){const {setZone:xa,
zone:Ea}=Y;return a&&0!==Object.keys(a).length?(a=X.fromObject(a,{...Y,zone:C||Ea,specificOffset:na}),xa?a:a.setZone(Ea)):X.invalid(new rb("unparsable",`the input "${ia}" can't be parsed as ${ca}`))}function Pa(a,C,Y=!0){return a.isValid?kb.create(Xa.create("en-US"),{allowZ:Y,forceSimple:!0}).formatDateTimeFromString(a,C):null}function Ta(a,C){const Y=9999<a.c.year||0>a.c.year;let ca="";Y&&0<=a.c.year&&(ca+="+");ca+=M(a.c.year,Y?6:4);C?(ca=ca+"-"+M(a.c.month),ca=ca+"-"+M(a.c.day)):(ca+=M(a.c.month),
ca+=M(a.c.day));return ca}function cb(a,C,Y,ca,ia){let na=M(a.c.hour);C?(na=na+":"+M(a.c.minute),0===a.c.second&&Y||(na+=":")):na+=M(a.c.minute);0===a.c.second&&Y||(na+=M(a.c.second),0===a.c.millisecond&&ca||(na=na+"."+M(a.c.millisecond,3)));ia&&(a.isOffsetFixed&&0===a.offset?na+="Z":0>a.o?(na=na+"-"+M(Math.trunc(-a.o/60)),na=na+":"+M(Math.trunc(-a.o%60))):(na=na+"+"+M(Math.trunc(a.o/60)),na=na+":"+M(Math.trunc(a.o%60))));return na}function Za(a){const C={year:"year",years:"year",month:"month",months:"month",
day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!C)throw new Qc(a);return C}function jb(a,C){const Y=b(C.zone,$a.defaultZone);C=Xa.fromObject(C);const ca=$a.now();
var ia;if(h(a.year))a=ca;else{for(const na of ua)h(a[na])&&(a[na]=Vb[na]);if(ia=bb(a)||Qb(a))return X.invalid(ia);ia=Y.offset(ca);[a,ia]=sa(a,ia,Y)}return new X({ts:a,zone:Y,loc:C,o:ia})}function cc(a,C,Y){const ca=h(Y.round)?!0:Y.round,ia=(xa,Ea)=>{xa=q(xa,ca||Y.calendary?0:2,!0);return C.loc.clone(Y).relFormatter(Y).format(xa,Ea)},na=xa=>Y.calendary?C.hasSame(a,xa)?0:C.startOf(xa).diff(a.startOf(xa),xa).get(xa):C.diff(a,xa).get(xa);if(Y.unit)return ia(na(Y.unit),Y.unit);for(const xa of Y.units){const Ea=
na(xa);if(1<=Math.abs(Ea))return ia(Ea,xa)}return ia(a>C?-0:0,Y.units[Y.units.length-1])}function Wb(a){let C={};0<a.length&&"object"===typeof a[a.length-1]?(C=a[a.length-1],a=Array.from(a).slice(0,a.length-1)):a=Array.from(a);return[C,a]}function Eb(a){if(X.isDateTime(a))return a;if(a&&a.valueOf&&c(a.valueOf()))return X.fromJSDate(a);if(a&&"object"===typeof a)return X.fromObject(a);throw new mb(`Unknown datetime argument: ${a}, of type ${typeof a}`);}class tb extends Error{}class Ud extends tb{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}
class Vd extends tb{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}class Wd extends tb{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}class Tb extends tb{}class Qc extends tb{constructor(a){super(`Invalid unit ${a}`)}}class mb extends tb{}class Fb extends tb{constructor(){super("Zone is an abstract class")}}const tc={year:"numeric",month:"numeric",day:"numeric"},Rc={year:"numeric",month:"short",day:"numeric"},Xd={year:"numeric",month:"short",day:"numeric",weekday:"short"},
Sc={year:"numeric",month:"long",day:"numeric"},Tc={year:"numeric",month:"long",day:"numeric",weekday:"long"},Uc={hour:"numeric",minute:"numeric"},Vc={hour:"numeric",minute:"numeric",second:"numeric"},Wc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},Xc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},Yc={hour:"numeric",minute:"numeric",hourCycle:"h23"},Zc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},$c={hour:"numeric",minute:"numeric",
second:"numeric",hourCycle:"h23",timeZoneName:"short"},ad={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},bd={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},cd={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},dd={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},ed={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},
Yd={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},fd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},gd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},hd={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},id={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",
minute:"numeric",second:"numeric",timeZoneName:"long"},Kd="January February March April May June July August September October November December".split(" "),Jc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Jd="JFMAMJJASOND".split(""),Lc="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Kc="Mon Tue Wed Thu Fri Sat Sun".split(" "),Ld="MTWTFSS".split(""),uc=["AM","PM"],Od=["Before Christ","Anno Domini"],Nd=["BC","AD"],Md=["B","A"],jd={D:tc,DD:Rc,DDD:Sc,DDDD:Tc,t:Uc,
tt:Vc,ttt:Wc,tttt:Xc,T:Yc,TT:Zc,TTT:$c,TTTT:ad,f:bd,ff:dd,fff:fd,ffff:hd,F:cd,FF:ed,FFF:gd,FFFF:id};class kb{static create(a,C={}){return new kb(a,C)}static parseFormat(a){let C=null,Y="",ca=!1;const ia=[];for(let na=0;na<a.length;na++){const xa=a.charAt(na);"'"===xa?(0<Y.length&&ia.push({literal:ca,val:Y}),C=null,Y="",ca=!ca):ca?Y+=xa:xa===C?Y+=xa:(0<Y.length&&ia.push({literal:!1,val:Y}),C=Y=xa)}0<Y.length&&ia.push({literal:ca,val:Y});return ia}static macroTokenToFormatOpts(a){return jd[a]}constructor(a,
C){this.opts=C;this.loc=a;this.systemLoc=null}formatWithSystemDefault(a,C){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(a,{...this.opts,...C}).format()}formatDateTime(a,C={}){return this.loc.dtFormatter(a,{...this.opts,...C}).format()}formatDateTimeParts(a,C={}){return this.loc.dtFormatter(a,{...this.opts,...C}).formatToParts()}resolvedOptions(a,C={}){return this.loc.dtFormatter(a,{...this.opts,...C}).resolvedOptions()}num(a,C=0){if(this.opts.forceSimple)return M(a,
C);const Y={...this.opts};0<C&&(Y.padTo=C);return this.loc.numberFormatter(Y).format(a)}formatDateTimeFromString(a,C){const Y="en"===this.loc.listingMode(),ca=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,ia=(La,Ra)=>this.loc.extract(a,La,Ra),na=La=>a.isOffsetFixed&&0===a.offset&&La.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,La.format):"",xa=(La,Ra)=>Y?S(La)[a.month-1]:ia(Ra?{month:La}:{month:La,day:"numeric"},"month"),Ea=(La,Ra)=>Y?J(La)[a.weekday-1]:ia(Ra?{weekday:La}:{weekday:La,
month:"long",day:"numeric"},"weekday"),Ia=La=>{const Ra=kb.macroTokenToFormatOpts(La);return Ra?this.formatWithSystemDefault(a,Ra):La},Qa=La=>Y?O(La)[0>a.year?0:1]:ia({era:La},"era");return l(kb.parseFormat(C),La=>{switch(La){case "S":return this.num(a.millisecond);case "u":case "SSS":return this.num(a.millisecond,3);case "s":return this.num(a.second);case "ss":return this.num(a.second,2);case "uu":return this.num(Math.floor(a.millisecond/10),2);case "uuu":return this.num(Math.floor(a.millisecond/
100));case "m":return this.num(a.minute);case "mm":return this.num(a.minute,2);case "h":return this.num(0===a.hour%12?12:a.hour%12);case "hh":return this.num(0===a.hour%12?12:a.hour%12,2);case "H":return this.num(a.hour);case "HH":return this.num(a.hour,2);case "Z":return na({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return na({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return na({format:"techie",allowZ:this.opts.allowZ});case "ZZZZ":return a.zone.offsetName(a.ts,{format:"short",
locale:this.loc.locale});case "ZZZZZ":return a.zone.offsetName(a.ts,{format:"long",locale:this.loc.locale});case "z":return a.zoneName;case "a":return Y?uc[12>a.hour?0:1]:ia({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return ca?ia({day:"numeric"},"day"):this.num(a.day);case "dd":return ca?ia({day:"2-digit"},"day"):this.num(a.day,2);case "c":return this.num(a.weekday);case "ccc":return Ea("short",!0);case "cccc":return Ea("long",!0);case "ccccc":return Ea("narrow",!0);case "E":return this.num(a.weekday);
case "EEE":return Ea("short",!1);case "EEEE":return Ea("long",!1);case "EEEEE":return Ea("narrow",!1);case "L":return ca?ia({month:"numeric",day:"numeric"},"month"):this.num(a.month);case "LL":return ca?ia({month:"2-digit",day:"numeric"},"month"):this.num(a.month,2);case "LLL":return xa("short",!0);case "LLLL":return xa("long",!0);case "LLLLL":return xa("narrow",!0);case "M":return ca?ia({month:"numeric"},"month"):this.num(a.month);case "MM":return ca?ia({month:"2-digit"},"month"):this.num(a.month,
2);case "MMM":return xa("short",!1);case "MMMM":return xa("long",!1);case "MMMMM":return xa("narrow",!1);case "y":return ca?ia({year:"numeric"},"year"):this.num(a.year);case "yy":return ca?ia({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),2);case "yyyy":return ca?ia({year:"numeric"},"year"):this.num(a.year,4);case "yyyyyy":return ca?ia({year:"numeric"},"year"):this.num(a.year,6);case "G":return Qa("short");case "GG":return Qa("long");case "GGGGG":return Qa("narrow");case "kk":return this.num(a.weekYear.toString().slice(-2),
2);case "kkkk":return this.num(a.weekYear,4);case "W":return this.num(a.weekNumber);case "WW":return this.num(a.weekNumber,2);case "o":return this.num(a.ordinal);case "ooo":return this.num(a.ordinal,3);case "q":return this.num(a.quarter);case "qq":return this.num(a.quarter,2);case "X":return this.num(Math.floor(a.ts/1E3));case "x":return this.num(a.ts);default:return Ia(La)}})}formatDurationFromString(a,C){const Y=ia=>{switch(ia[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";
case "h":return"hour";case "d":return"day";case "M":return"month";case "y":return"year";default:return null}};C=kb.parseFormat(C);const ca=C.reduce((ia,{literal:na,val:xa})=>na?ia:ia.concat(xa),[]);a=a.shiftTo(...ca.map(Y).filter(ia=>ia));return l(C,(ia=>na=>{const xa=Y(na);return xa?this.num(ia.get(xa),na.length):na})(a))}}class rb{constructor(a,C){this.reason=a;this.explanation=C}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}class Sb{get type(){throw new Fb;
}get name(){throw new Fb;}get isUniversal(){throw new Fb;}offsetName(a,C){throw new Fb;}formatOffset(a,C){throw new Fb;}offset(a){throw new Fb;}equals(a){throw new Fb;}get isValid(){throw new Fb;}}let vc=null;class wc extends Sb{static get instance(){null===vc&&(vc=new wc);return vc}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,{format:C,locale:Y}){return r(a,C,Y)}formatOffset(a,C){return e(this.offset(a),C)}offset(a){return-(new Date(a)).getTimezoneOffset()}equals(a){return"system"===
a.type}get isValid(){return!0}}let dc={};const kd={year:0,month:1,day:2,hour:3,minute:4,second:5};let ec={};class zb extends Sb{static create(a){ec[a]||(ec[a]=new zb(a));return ec[a]}static resetCache(){ec={};dc={}}static isValidSpecifier(a){return this.isValidZone(a)}static isValidZone(a){if(!a)return!1;try{return(new Intl.DateTimeFormat("en-US",{timeZone:a})).format(),!0}catch(C){return!1}}constructor(a){super();this.zoneName=a;this.valid=zb.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,
{format:C,locale:Y}){return r(a,C,Y,this.name)}formatOffset(a,C){return e(this.offset(a),C)}offset(a){a=new Date(a);if(isNaN(a))return NaN;var C=this.name;dc[C]||(dc[C]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:C,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}));C=dc[C];if(C.formatToParts){C=C.formatToParts(a);var Y=[];for(let Qa=0;Qa<C.length;Qa++){const {type:La,value:Ra}=C[Qa],Oa=kd[La];h(Oa)||(Y[Oa]=parseInt(Ra,10))}C=Y}else{{C=C.format(a).replace(/\u200E/g,
"");C=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(C);const [,Qa,La,Ra,Oa,gb,wb]=C;C=[Ra,Qa,La,Oa,gb,wb]}}const [ca,ia,na,xa,Ea,Ia]=C;C=E({year:ca,month:ia,day:na,hour:24===xa?0:xa,minute:Ea,second:Ia,millisecond:0});a=+a;Y=a%1E3;return(C-(a-(0<=Y?Y:1E3+Y)))/6E4}equals(a){return"iana"===a.type&&a.name===this.name}get isValid(){return this.valid}}let xc=null;class ib extends Sb{static get utcInstance(){null===xc&&(xc=new ib(0));return xc}static instance(a){return 0===a?ib.utcInstance:new ib(a)}static parseSpecifier(a){return a&&
(a=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new ib(G(a[1],a[2])):null}constructor(a){super();this.fixed=a}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${e(this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,C){return e(this.fixed,C)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===a.type&&a.fixed===this.fixed}get isValid(){return!0}}class Pd extends Sb{constructor(a){super();this.zoneName=a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}
let ld=()=>Date.now(),fc="system",gc=null,md=null,nd=null,od;class $a{static get now(){return ld}static set now(a){ld=a}static set defaultZone(a){fc=a}static get defaultZone(){return b(fc,wc.instance)}static get defaultLocale(){return gc}static set defaultLocale(a){gc=a}static get defaultNumberingSystem(){return md}static set defaultNumberingSystem(a){md=a}static get defaultOutputCalendar(){return nd}static set defaultOutputCalendar(a){nd=a}static get throwOnInvalid(){return od}static set throwOnInvalid(a){od=
a}static resetCaches(){Xa.resetCache();zb.resetCache()}}let Mc={},qc={},Zb={},rc={},Xb=null;class pd{constructor(a,C,Y){this.padTo=Y.padTo||0;this.floor=Y.floor||!1;const {padTo:ca,floor:ia,...na}=Y;if(!C||0<Object.keys(na).length)C={useGrouping:!1,...Y},0<Y.padTo&&(C.minimumIntegerDigits=Y.padTo),this.inf=P(a,C)}format(a){if(this.inf)return this.inf.format(this.floor?Math.floor(a):a);a=this.floor?Math.floor(a):q(a,3);return M(a,this.padTo)}}class Zd{constructor(a,C,Y){this.opts=Y;if(a.zone.isUniversal){var ca=
a.offset/60*-1;ca=0<=ca?`Etc/GMT+${ca}`:`Etc/GMT${ca}`;0!==a.offset&&zb.create(ca).valid?this.dt=a:(ca="UTC",this.dt=Y.timeZoneName?a:0===a.offset?a:X.fromMillis(a.ts+6E4*a.offset))}else"system"===a.zone.type?this.dt=a:(this.dt=a,ca=a.zone.name);a={...this.opts};ca&&(a.timeZone=ca);this.dtf=n(C,a)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class $d{constructor(a,C,Y){this.opts=
{style:"long",...Y};!C&&g()&&(this.rtf=U(a,Y))}format(a,C){return this.rtf?this.rtf.format(a,C):t(C,a,this.opts.numeric,"long"!==this.opts.style)}formatToParts(a,C){return this.rtf?this.rtf.formatToParts(a,C):[]}}class Xa{static fromOpts(a){return Xa.create(a.locale,a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,C,Y,ca=!1){a=a||$a.defaultLocale;var ia;(ia=a)||(ca?ca="en-US":(Xb||(Xb=(new Intl.DateTimeFormat).resolvedOptions().locale),ca=Xb),ia=ca);return new Xa(ia,C||$a.defaultNumberingSystem,
Y||$a.defaultOutputCalendar,a)}static resetCache(){Xb=null;qc={};Zb={};rc={}}static fromObject({locale:a,numberingSystem:C,outputCalendar:Y}={}){return Xa.create(a,C,Y)}constructor(a,C,Y,ca){var ia=a.indexOf("-u-");if(-1===ia)a=[a];else{let Ia;ia=a.substring(0,ia);try{Ia=n(a).resolvedOptions()}catch(Ra){Ia=n(ia).resolvedOptions()}const {numberingSystem:Qa,calendar:La}=Ia;a=[ia,Qa,La]}const [na,xa,Ea]=a;this.locale=na;this.numberingSystem=C||xa||null;this.outputCalendar=Y||Ea||null;C=this.locale;Y=
this.numberingSystem;if((a=this.outputCalendar)||Y)C+="-u",a&&(C+=`-ca-${a}`),Y&&(C+=`-nu-${Y}`);this.intl=C;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=ca;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var a=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;
this.fastNumbersCached=a}return this.fastNumbersCached}listingMode(){const a=this.isEnglish(),C=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return a&&C?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?Xa.create(a.locale||this.specifiedLocale,a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a=
{}){return this.clone({...a,defaultToEN:!1})}months(a,C=!1,Y=!0){return N(this,a,Y,S,()=>{const ca=C?{month:a,day:"numeric"}:{month:a},ia=C?"format":"standalone";this.monthsCache[ia][a]||(this.monthsCache[ia][a]=T(na=>this.extract(na,ca,"month")));return this.monthsCache[ia][a]})}weekdays(a,C=!1,Y=!0){return N(this,a,Y,J,()=>{const ca=C?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},ia=C?"format":"standalone";this.weekdaysCache[ia][a]||(this.weekdaysCache[ia][a]=v(na=>this.extract(na,
ca,"weekday")));return this.weekdaysCache[ia][a]})}meridiems(a=!0){return N(this,void 0,a,()=>uc,()=>{if(!this.meridiemCache){const C={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[X.utc(2016,11,13,9),X.utc(2016,11,13,19)].map(Y=>this.extract(Y,C,"dayperiod"))}return this.meridiemCache})}eras(a,C=!0){return N(this,a,C,O,()=>{const Y={era:a};this.eraCache[a]||(this.eraCache[a]=[X.utc(-40,1,1),X.utc(2017,1,1)].map(ca=>this.extract(ca,Y,"era")));return this.eraCache[a]})}extract(a,C,Y){return(a=
this.dtFormatter(a,C).formatToParts().find(ca=>ca.type.toLowerCase()===Y))?a.value:null}numberFormatter(a={}){return new pd(this.intl,a.forceSimple||this.fastNumbers,a)}dtFormatter(a,C={}){return new Zd(a,this.intl,C)}relFormatter(a={}){return new $d(this.intl,this.isEnglish(),a)}listFormatter(a={}){return f(this.intl,a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===
a.locale&&this.numberingSystem===a.numberingSystem&&this.outputCalendar===a.outputCalendar}}const qd=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,yc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,rd=RegExp(`${yc.source}${qd.source}?`),zc=RegExp(`(?:T${rd.source})?`),ae=da("weekYear","weekNumber","weekDay"),be=da("year","ordinal"),sd=RegExp(`${yc.source} ?(?:${qd.source}|(${/[A-Za-z_+-]{1,256}(:?\/[A-Za-z0-9_+-]{1,256}(\/[A-Za-z0-9_+-]{1,256})?)?/.source}))?`),ce=RegExp(`(?: ${sd.source})?`),de=RegExp(`^T?${yc.source}$`),
ee=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/,Qd={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},fe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,
ge=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,he=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,ie=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,je=R(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,zc),ke=R(/(\d{4})-?W(\d\d)(?:-?(\d))?/,zc),
le=R(/(\d{4})-?(\d{3})/,zc),me=R(rd),ne=W(va,Ca,Ba),oe=W(ae,Ca,Ba),pe=W(be,Ca,Ba),qe=W(Ca,Ba),re=W(Ca),se=R(/(\d{4})-(\d\d)-(\d\d)/,ce),te=R(sd),ue=W(va,Ca,Ba,ta),ve=W(Ca,Ba,ta),td={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},we={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,
seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,milliseconds:2592E6},...td},xe={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/
7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...td},Kb="years quarters months weeks days hours minutes seconds milliseconds".split(" "),Rd=Kb.slice(0).reverse();class Sa{constructor(a){const C="longterm"===a.conversionAccuracy||!1;this.values=a.values;this.loc=a.loc||Xa.create();this.conversionAccuracy=C?"longterm":"casual";this.invalid=a.invalid||null;this.matrix=C?xe:we;this.isLuxonDuration=!0}static fromMillis(a,C){return Sa.fromObject({milliseconds:a},
C)}static fromObject(a,C={}){if(null==a||"object"!==typeof a)throw new mb(`Duration.fromObject: argument expected to be an object, got ${null===a?"null":typeof a}`);return new Sa({values:w(a,Sa.normalizeUnit),loc:Xa.fromObject(C),conversionAccuracy:C.conversionAccuracy})}static fromDurationLike(a){if(c(a))return Sa.fromMillis(a);if(Sa.isDuration(a))return a;if("object"===typeof a)return Sa.fromObject(a);throw new mb(`Unknown duration argument ${a} of type ${typeof a}`);}static fromISO(a,C){const [Y]=
ea(a,[ee,fa]);return Y?Sa.fromObject(Y,C):Sa.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,C){const [Y]=ea(a,[de,re]);return Y?Sa.fromObject(Y,C):Sa.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,C=null){if(!a)throw new mb("need to specify a reason the Duration is invalid");a=a instanceof rb?a:new rb(a,C);if($a.throwOnInvalid)throw new Wd(a);return new Sa({invalid:a})}static normalizeUnit(a){const C={year:"years",years:"years",
quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a?a.toLowerCase():a];if(!C)throw new Qc(a);return C}static isDuration(a){return a&&a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(a,
C={}){C={...C,floor:!1!==C.round&&!1!==C.floor};return this.isValid?kb.create(this.loc,C).formatDurationFromString(this,a):"Invalid Duration"}toHuman(a={}){const C=Kb.map(Y=>{const ca=this.values[Y];return h(ca)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...a,unit:Y.slice(0,-1)}).format(ca)}).filter(Y=>Y);return this.loc.listFormatter({type:"conjunction",style:a.listStyle||"narrow",...a}).format(C)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;
let a="P";0!==this.years&&(a+=this.years+"Y");if(0!==this.months||0!==this.quarters)a+=this.months+3*this.quarters+"M";0!==this.weeks&&(a+=this.weeks+"W");0!==this.days&&(a+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)a+="T";0!==this.hours&&(a+=this.hours+"H");0!==this.minutes&&(a+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)a+=q(this.seconds+this.milliseconds/1E3,3)+"S";"P"===a&&(a+="T0S");return a}toISOTime(a={}){if(!this.isValid)return null;
var C=this.toMillis();if(0>C||864E5<=C)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...a};C=this.shiftTo("hours","minutes","seconds","milliseconds");let Y="basic"===a.format?"hhmm":"hh:mm";a.suppressSeconds&&0===C.seconds&&0===C.milliseconds||(Y+="basic"===a.format?"ss":":ss",a.suppressMilliseconds&&0===C.milliseconds||(Y+=".SSS"));C=C.toFormat(Y);a.includePrefix&&(C="T"+C);return C}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;
a=Sa.fromDurationLike(a);const C={};for(const Y of Kb)if(L(a.values,Y)||L(this.values,Y))C[Y]=a.get(Y)+this.get(Y);return ha(this,{values:C},!0)}minus(a){if(!this.isValid)return this;a=Sa.fromDurationLike(a);return this.plus(a.negate())}mapUnits(a){if(!this.isValid)return this;const C={};for(const Y of Object.keys(this.values))C[Y]=H(a(this.values[Y],Y));return ha(this,{values:C},!0)}get(a){return this[Sa.normalizeUnit(a)]}set(a){if(!this.isValid)return this;a={...this.values,...w(a,Sa.normalizeUnit)};
return ha(this,{values:a})}reconfigure({locale:a,numberingSystem:C,conversionAccuracy:Y}={}){a={loc:this.loc.clone({locale:a,numberingSystem:C})};Y&&(a.conversionAccuracy=Y);return ha(this,a)}as(a){return this.isValid?this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;const a=this.toObject();pa(this.matrix,a);return ha(this,{values:a},!0)}shiftTo(...a){if(!this.isValid||0===a.length)return this;a=a.map(na=>Sa.normalizeUnit(na));const C={},Y={},ca=this.toObject();let ia;for(const na of Kb)if(0<=
a.indexOf(na)){ia=na;let xa=0;for(const Ia in Y)xa+=this.matrix[Ia][na]*Y[Ia],Y[Ia]=0;c(ca[na])&&(xa+=ca[na]);const Ea=Math.trunc(xa);C[na]=Ea;Y[na]=(1E3*xa-1E3*Ea)/1E3;for(const Ia in ca)Kb.indexOf(Ia)>Kb.indexOf(na)&&ka(this.matrix,ca,Ia,C,na)}else c(ca[na])&&(Y[na]=ca[na]);for(const na in Y)0!==Y[na]&&(C[ia]+=na===ia?Y[na]:Y[na]/this.matrix[ia][na]);return ha(this,{values:C},!0).normalize()}negate(){if(!this.isValid)return this;const a={};for(const C of Object.keys(this.values))a[C]=0===this.values[C]?
0:-this.values[C];return ha(this,{values:a},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||
0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;for(const ca of Kb){var C=this.values[ca];var Y=a.values[ca];C=void 0===C||0===C?void 0===Y||0===Y:C===Y;if(!C)return!1}return!0}}class Ya{constructor(a){this.s=a.start;this.e=
a.end;this.invalid=a.invalid||null;this.isLuxonInterval=!0}static invalid(a,C=null){if(!a)throw new mb("need to specify a reason the Interval is invalid");a=a instanceof rb?a:new rb(a,C);if($a.throwOnInvalid)throw new Vd(a);return new Ya({invalid:a})}static fromDateTimes(a,C){a=Eb(a);C=Eb(C);var Y=a&&a.isValid?C&&C.isValid?C<a?Ya.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${C.toISO()}`):null:Ya.invalid("missing or invalid end"):
Ya.invalid("missing or invalid start");return null==Y?new Ya({start:a,end:C}):Y}static after(a,C){C=Sa.fromDurationLike(C);a=Eb(a);return Ya.fromDateTimes(a,a.plus(C))}static before(a,C){C=Sa.fromDurationLike(C);a=Eb(a);return Ya.fromDateTimes(a.minus(C),a)}static fromISO(a,C){const [Y,ca]=(a||"").split("/",2);if(Y&&ca){let xa;try{var ia=X.fromISO(Y,C);xa=ia.isValid}catch(Ia){xa=!1}let Ea;try{var na=X.fromISO(ca,C);Ea=na.isValid}catch(Ia){Ea=!1}if(xa&&Ea)return Ya.fromDateTimes(ia,na);if(xa){if(na=
Sa.fromISO(ca,C),na.isValid)return Ya.after(ia,na)}else if(Ea&&(ia=Sa.fromISO(Y,C),ia.isValid))return Ya.before(na,ia)}return Ya.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&a.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:
null}length(a="milliseconds"){return this.isValid?this.toDuration(...[a]).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const C=this.start.startOf(a),Y=this.end.startOf(a);return Math.floor(Y.diff(C,a).get(a))+1}hasSame(a){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,a):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(a){return this.isValid?this.s>a:!1}isBefore(a){return this.isValid?this.e<=a:!1}contains(a){return this.isValid?this.s<=a&&this.e>
a:!1}set({start:a,end:C}={}){return this.isValid?Ya.fromDateTimes(a||this.s,C||this.e):this}splitAt(...a){if(!this.isValid)return[];a=a.map(Eb).filter(na=>this.contains(na)).sort();const C=[];let {s:Y}=this,ca=0;for(;Y<this.e;){var ia=a[ca]||this.e;ia=+ia>+this.e?this.e:ia;C.push(Ya.fromDateTimes(Y,ia));Y=ia;ca+=1}return C}splitBy(a){a=Sa.fromDurationLike(a);if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let {s:C}=this,Y=1;const ca=[];for(;C<this.e;){var ia=this.start.plus(a.mapUnits(na=>
na*Y));ia=+ia>+this.e?this.e:ia;ca.push(Ya.fromDateTimes(C,ia));C=ia;Y+=1}return ca}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return this.isValid?+this.e===+a.s:!1}abutsEnd(a){return this.isValid?+a.e===+this.s:!1}engulfs(a){return this.isValid?this.s<=a.s&&this.e>=a.e:!1}equals(a){return this.isValid&&a.isValid?this.s.equals(a.s)&&this.e.equals(a.e):!1}intersection(a){if(!this.isValid)return this;const C=
this.s>a.s?this.s:a.s;a=this.e<a.e?this.e:a.e;return C>=a?null:Ya.fromDateTimes(C,a)}union(a){return this.isValid?Ya.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const [C,Y]=a.sort((ca,ia)=>ca.s-ia.s).reduce(([ca,ia],na)=>ia?ia.overlaps(na)||ia.abutsStart(na)?[ca,ia.union(na)]:[ca.concat([ia]),na]:[ca,na],[[],null]);Y&&C.push(Y);return C}static xor(a){let C=null,Y=0;const ca=[];a=a.map(ia=>[{time:ia.s,type:"s"},{time:ia.e,type:"e"}]);a=Array.prototype.concat(...a).sort((ia,
na)=>ia.time-na.time);for(const ia of a)Y+="s"===ia.type?1:-1,1===Y?C=ia.time:(C&&+C!==+ia.time&&ca.push(Ya.fromDateTimes(C,ia.time)),C=null);return Ya.merge(ca)}difference(...a){return Ya.xor([this].concat(a)).map(C=>this.intersection(C)).filter(C=>C&&!C.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toISO(a){return this.isValid?`${this.s.toISO(a)}/${this.e.toISO(a)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:
"Invalid Interval"}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:"Invalid Interval"}toFormat(a,{separator:C=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(a)}${C}${this.e.toFormat(a)}`:"Invalid Interval"}toDuration(a,C){return this.isValid?this.e.diff(this.s,a,C):Sa.invalid(this.invalidReason)}mapEndpoints(a){return Ya.fromDateTimes(a(this.s),a(this.e))}}class Yb{static hasDST(a=$a.defaultZone){const C=X.now().setZone(a).set({month:12});return!a.isUniversal&&
C.offset!==C.set({month:6}).offset}static isValidIANAZone(a){return zb.isValidZone(a)}static normalizeZone(a){return b(a,$a.defaultZone)}static months(a="long",{locale:C=null,numberingSystem:Y=null,locObj:ca=null,outputCalendar:ia="gregory"}={}){return(ca||Xa.create(C,Y,ia)).months(a)}static monthsFormat(a="long",{locale:C=null,numberingSystem:Y=null,locObj:ca=null,outputCalendar:ia="gregory"}={}){return(ca||Xa.create(C,Y,ia)).months(a,!0)}static weekdays(a="long",{locale:C=null,numberingSystem:Y=
null,locObj:ca=null}={}){return(ca||Xa.create(C,Y,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:C=null,numberingSystem:Y=null,locObj:ca=null}={}){return(ca||Xa.create(C,Y,null)).weekdays(a,!0)}static meridiems({locale:a=null}={}){return Xa.create(a).meridiems()}static eras(a="short",{locale:C=null}={}){return Xa.create(C,null,"gregory").eras(a)}static features(){return{relative:g()}}}const sc={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",
deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},Nc={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],
beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Sd=sc.hanidec.replace(/[\[|\]]/g,"").split(""),Oc=`( |${String.fromCharCode(160)})`,$b=new RegExp(Oc,"g"),Pc={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d",
"2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};let ac=null;const bc=[0,31,59,90,120,151,181,212,243,273,304,334],Q=[0,31,60,91,121,152,182,213,244,274,305,335],Vb={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},ub={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Ac={ordinal:1,hour:0,minute:0,second:0,millisecond:0},ua="year month day hour minute second millisecond".split(" "),
Bc="weekYear weekNumber weekday hour minute second millisecond".split(" "),V="year ordinal hour minute second millisecond".split(" ");class X{constructor(a){const C=a.zone||$a.defaultZone;let Y=a.invalid||(Number.isNaN(a.ts)?new rb("invalid input"):null)||(C.isValid?null:Jb(C));this.ts=h(a.ts)?$a.now():a.ts;let ca=null;var ia=null;Y||(a.old&&a.old.ts===this.ts&&a.old.zone.equals(C)?[ca,ia]=[a.old.c,a.old.o]:(ia=C.offset(this.ts),ca=ja(this.ts,ia),ca=(Y=Number.isNaN(ca.year)?new rb("invalid input"):
null)?null:ca,ia=Y?null:ia));this._zone=C;this.loc=a.loc||Xa.create();this.invalid=Y;this.weekData=null;this.c=ca;this.o=ia;this.isLuxonDateTime=!0}static now(){return new X({})}static local(){const [a,C]=Wb(arguments),[Y,ca,ia,na,xa,Ea,Ia]=C;return jb({year:Y,month:ca,day:ia,hour:na,minute:xa,second:Ea,millisecond:Ia},a)}static utc(){const [a,C]=Wb(arguments),[Y,ca,ia,na,xa,Ea,Ia]=C;a.zone=ib.utcInstance;return jb({year:Y,month:ca,day:ia,hour:na,minute:xa,second:Ea,millisecond:Ia},a)}static fromJSDate(a,
C={}){a="[object Date]"===Object.prototype.toString.call(a)?a.valueOf():NaN;if(Number.isNaN(a))return X.invalid("invalid input");const Y=b(C.zone,$a.defaultZone);return Y.isValid?new X({ts:a,zone:Y,loc:Xa.fromObject(C)}):X.invalid(Jb(Y))}static fromMillis(a,C={}){if(c(a))return-864E13>a||864E13<a?X.invalid("Timestamp out of range"):new X({ts:a,zone:b(C.zone,$a.defaultZone),loc:Xa.fromObject(C)});throw new mb(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`);}static fromSeconds(a,
C={}){if(c(a))return new X({ts:1E3*a,zone:b(C.zone,$a.defaultZone),loc:Xa.fromObject(C)});throw new mb("fromSeconds requires a numerical input");}static fromObject(a,C={}){a=a||{};var Y=b(C.zone,$a.defaultZone);if(!Y.isValid)return X.invalid(Jb(Y));var ca=$a.now();const ia=h(C.specificOffset)?Y.offset(ca):C.specificOffset,na=w(a,Za);var xa=!h(na.ordinal),Ea=!h(na.year),Ia=!h(na.month)||!h(na.day);Ea=Ea||Ia;var Qa=na.weekYear||na.weekNumber;C=Xa.fromObject(C);if((Ea||xa)&&Qa)throw new Tb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");
if(Ia&&xa)throw new Tb("Can't mix ordinal dates with month/day");Ia=Qa||na.weekday&&!Ea;let La=ja(ca,ia);Ia?(ca=Bc,Qa=ub,La=Ab(La)):xa?(ca=V,Qa=Ac,La=Ib(La)):(ca=ua,Qa=Vb);let Ra=!1;for(var Oa of ca)h(na[Oa])?na[Oa]=Ra?Qa[Oa]:La[Oa]:Ra=!0;Ia?(Oa=B(na.weekYear),ca=K(na.weekNumber,1,x(na.weekYear)),Qa=K(na.weekday,1,7),Oa=Oa?ca?Qa?!1:fb("weekday",na.weekday):fb("week",na.week):fb("weekYear",na.weekYear)):xa?(Oa=B(na.year),ca=K(na.ordinal,1,I(na.year)?366:365),Oa=Oa?ca?!1:fb("ordinal",na.ordinal):fb("year",
na.year)):Oa=bb(na);if(Oa=Oa||Qb(na))return X.invalid(Oa);xa=Ia?Bb(na):xa?Ub(na):na;const [gb,wb]=sa(xa,ia,Y);Y=new X({ts:gb,zone:Y,o:wb,loc:C});return na.weekday&&Ea&&a.weekday!==Y.weekday?X.invalid("mismatched weekday",`you can't specify both a weekday of ${na.weekday} and a date of ${Y.toISO()}`):Y}static fromISO(a,C={}){const [Y,ca]=ea(a,[je,ne],[ke,oe],[le,pe],[me,qe]);return Ha(Y,ca,C,"ISO 8601",a)}static fromRFC2822(a,C={}){const [Y,ca]=ea(a.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g,
" ").trim(),[fe,ma]);return Ha(Y,ca,C,"RFC 2822",a)}static fromHTTP(a,C={}){const [Y,ca]=ea(a,[ge,aa],[he,aa],[ie,ba]);return Ha(Y,ca,C,"HTTP",C)}static fromFormat(a,C,Y={}){if(h(a)||h(C))throw new mb("fromFormat requires an input string and a format");const {locale:ca=null,numberingSystem:ia=null}=Y;var na=Xa.fromOpts({locale:ca,numberingSystem:ia,defaultToEN:!0});{const {result:La,zone:Ra,specificOffset:Oa,invalidReason:gb}=Pb(na,a,C);na=[La,Ra,Oa,gb]}const [xa,Ea,Ia,Qa]=na;return Qa?X.invalid(Qa):
Ha(xa,Ea,Y,`format ${C}`,a,Ia)}static fromString(a,C,Y={}){return X.fromFormat(a,C,Y)}static fromSQL(a,C={}){const [Y,ca]=ea(a,[se,ue],[te,ve]);return Ha(Y,ca,C,"SQL",a)}static invalid(a,C=null){if(!a)throw new mb("need to specify a reason the DateTime is invalid");a=a instanceof rb?a:new rb(a,C);if($a.throwOnInvalid)throw new Ud(a);return new X({invalid:a})}static isDateTime(a){return a&&a.isLuxonDateTime||!1}get(a){return this[a]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?
this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?
this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Cb(this).weekYear:NaN}get weekNumber(){return this.isValid?Cb(this).weekNumber:NaN}get weekday(){return this.isValid?Cb(this).weekday:NaN}get ordinal(){return this.isValid?Ib(this.c).ordinal:NaN}get monthShort(){return this.isValid?
Yb.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Yb.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Yb.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Yb.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?
this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return I(this.year)}get daysInMonth(){return p(this.year,this.month)}get daysInYear(){return this.isValid?I(this.year)?366:365:NaN}get weeksInWeekYear(){return this.isValid?x(this.weekYear):NaN}resolvedLocaleOptions(a={}){const {locale:C,
numberingSystem:Y,calendar:ca}=kb.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:C,numberingSystem:Y,outputCalendar:ca}}toUTC(a=0,C={}){return this.setZone(ib.instance(a),C)}toLocal(){return this.setZone($a.defaultZone)}setZone(a,{keepLocalTime:C=!1,keepCalendarTime:Y=!1}={}){a=b(a,$a.defaultZone);if(a.equals(this.zone))return this;if(a.isValid){let ca=this.ts;if(C||Y)C=a.offset(this.ts),Y=this.toObject(),[ca]=sa(Y,C,a);return Db(this,{ts:ca,zone:a})}return X.invalid(Jb(a))}reconfigure({locale:a,
numberingSystem:C,outputCalendar:Y}={}){a=this.loc.clone({locale:a,numberingSystem:C,outputCalendar:Y});return Db(this,{loc:a})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;a=w(a,Za);var C=!h(a.weekYear)||!h(a.weekNumber)||!h(a.weekday);const Y=!h(a.ordinal),ca=!h(a.year),ia=!h(a.month)||!h(a.day),na=a.weekYear||a.weekNumber;if((ca||ia||Y)&&na)throw new Tb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ia&&Y)throw new Tb("Can't mix ordinal dates with month/day");
C?C=Bb({...Ab(this.c),...a}):h(a.ordinal)?(C={...this.toObject(),...a},h(a.day)&&(C.day=Math.min(p(C.year,C.month),C.day))):C=Ub({...Ib(this.c),...a});const [xa,Ea]=sa(C,this.o,this.zone);return Db(this,{ts:xa,o:Ea})}plus(a){if(!this.isValid)return this;a=Sa.fromDurationLike(a);return Db(this,Ga(this,a))}minus(a){if(!this.isValid)return this;a=Sa.fromDurationLike(a).negate();return Db(this,Ga(this,a))}startOf(a){if(!this.isValid)return this;const C={};a=Sa.normalizeUnit(a);switch(a){case "years":C.month=
1;case "quarters":case "months":C.day=1;case "weeks":case "days":C.hour=0;case "hours":C.minute=0;case "minutes":C.second=0;case "seconds":C.millisecond=0}"weeks"===a&&(C.weekday=1);"quarters"===a&&(C.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(C)}endOf(a){return this.isValid?this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,C={}){return this.isValid?kb.create(this.loc.redefaultToEN(C)).formatDateTimeFromString(this,a):"Invalid DateTime"}toLocaleString(a=tc,C={}){return this.isValid?
kb.create(this.loc.clone(C),a).formatDateTime(this):"Invalid DateTime"}toLocaleParts(a={}){return this.isValid?kb.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO({format:a="extended",suppressSeconds:C=!1,suppressMilliseconds:Y=!1,includeOffset:ca=!0}={}){if(!this.isValid)return null;a="extended"===a;let ia=Ta(this,a);return ia=ia+"T"+cb(this,a,C,Y,ca)}toISODate({format:a="extended"}={}){return this.isValid?Ta(this,"extended"===a):null}toISOWeekDate(){return Pa(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=
!1,suppressSeconds:C=!1,includeOffset:Y=!0,includePrefix:ca=!1,format:ia="extended"}={}){return this.isValid?(ca?"T":"")+cb(this,"extended"===ia,C,a,Y):null}toRFC2822(){return Pa(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Pa(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Ta(this,!0):null}toSQLTime({includeOffset:a=!0,includeZone:C=!1,includeOffsetSpace:Y=!0}={}){let ca="HH:mm:ss.SSS";if(C||a)Y&&(ca+=" "),C?ca+="z":a&&(ca+="ZZ");return Pa(this,ca,!0)}toSQL(a=
{}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1E3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const C={...this.c};a.includeConfig&&(C.outputCalendar=this.outputCalendar,C.numberingSystem=
this.loc.numberingSystem,C.locale=this.loc.locale);return C}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(a,C="milliseconds",Y={}){if(!this.isValid||!a.isValid)return Sa.invalid("created by diffing an invalid DateTime");Y={locale:this.locale,numberingSystem:this.numberingSystem,...Y};const ca=(Array.isArray(C)?C:[C]).map(Sa.normalizeUnit);C=a.valueOf()>this.valueOf();a=Aa(C?this:a,C?a:this,ca,Y);return C?a.negate():a}diffNow(a="milliseconds",C={}){return this.diff(X.now(),a,C)}until(a){return this.isValid?
Ya.fromDateTimes(this,a):this}hasSame(a,C){if(!this.isValid)return!1;const Y=a.valueOf();a=this.setZone(a.zone,{keepLocalTime:!0});return a.startOf(C)<=Y&&Y<=a.endOf(C)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a={}){if(!this.isValid)return null;const C=a.base||X.fromObject({},{zone:this.zone}),Y=a.padding?this<C?-a.padding:a.padding:0;let ca="years months days hours minutes seconds".split(" "),ia=a.unit;Array.isArray(a.unit)&&
(ca=a.unit,ia=void 0);return cc(C,this.plus(Y),{...a,numeric:"always",units:ca,unit:ia})}toRelativeCalendar(a={}){return this.isValid?cc(a.base||X.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every(X.isDateTime))throw new mb("min requires all arguments be DateTimes");return u(a,C=>C.valueOf(),Math.min)}static max(...a){if(!a.every(X.isDateTime))throw new mb("max requires all arguments be DateTimes");return u(a,
C=>C.valueOf(),Math.max)}static fromFormatExplain(a,C,Y={}){const {locale:ca=null,numberingSystem:ia=null}=Y;Y=Xa.fromOpts({locale:ca,numberingSystem:ia,defaultToEN:!0});return Pb(Y,a,C)}static fromStringExplain(a,C,Y={}){return X.fromFormatExplain(a,C,Y)}static get DATE_SHORT(){return tc}static get DATE_MED(){return Rc}static get DATE_MED_WITH_WEEKDAY(){return Xd}static get DATE_FULL(){return Sc}static get DATE_HUGE(){return Tc}static get TIME_SIMPLE(){return Uc}static get TIME_WITH_SECONDS(){return Vc}static get TIME_WITH_SHORT_OFFSET(){return Wc}static get TIME_WITH_LONG_OFFSET(){return Xc}static get TIME_24_SIMPLE(){return Yc}static get TIME_24_WITH_SECONDS(){return Zc}static get TIME_24_WITH_SHORT_OFFSET(){return $c}static get TIME_24_WITH_LONG_OFFSET(){return ad}static get DATETIME_SHORT(){return bd}static get DATETIME_SHORT_WITH_SECONDS(){return cd}static get DATETIME_MED(){return dd}static get DATETIME_MED_WITH_SECONDS(){return ed}static get DATETIME_MED_WITH_WEEKDAY(){return Yd}static get DATETIME_FULL(){return fd}static get DATETIME_FULL_WITH_SECONDS(){return gd}static get DATETIME_HUGE(){return hd}static get DATETIME_HUGE_WITH_SECONDS(){return id}}
d.DateTime=X;d.Info=Yb;d.Interval=Ya})},"esri/widgets/FeatureTemplates":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/HandleOwner ../core/maybe ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./FeatureTemplates/FeatureTemplatesViewModel ./FeatureTemplates/ItemList ./FeatureTemplates/TemplateItem ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/decorators/vmEvent ./support/jsxFactory".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p,E,x,A,r,G){function H(e){const {label:z}=e;return"items"in e?z:`${z}\u2013${e.layer.id}`}const w={filter:!0};B=function(e){function z(J,O){J=e.call(this,J,O)||this;J._iconIntersectionObserver=new IntersectionObserver((t,l)=>{t.forEach(function(){var b=h._asyncToGenerator(function*(f){if(f.isIntersecting){const U=f.target;if(U["data-has-icon"])l.unobserve(U);else{var {layer:n,template:P}=U["data-item"];U["data-has-icon"]=!0;f=yield p.fetchThumbnail(n,P).catch(()=>
{U["data-has-icon"]=!1;return null});g.isNone(f)||U.appendChild(f)}}});return function(f){return b.apply(this,arguments)}}())});J.enableListScroll=!0;J.filterFunction=null;J.filterText="";J.groupBy=null;J.headingLevel=4;J.label=void 0;J.layers=null;J.messages=null;J.selectedItem=null;J.viewModel=new q;J.visibleElements={...w};J.renderItemIcon=J.renderItemIcon.bind(h._assertThisInitialized(J));J._afterItemCreateOrUpdate=J._afterItemCreateOrUpdate.bind(h._assertThisInitialized(J));J._afterItemRemoved=
J._afterItemRemoved.bind(h._assertThisInitialized(J));return J}h._inheritsLoose(z,e);var S=z.prototype;S.initialize=function(){const J=({label:O})=>!this.filterText||-1<O.toLowerCase().indexOf(this.filterText.toLowerCase());this.own(u.init(this,"viewModel",(O,t)=>{O&&!O.filterFunction&&(this.filterFunction=J);t&&t!==O&&t.filterFunction===J&&(t.filterFunction=null)}))};S.destroy=function(){this._iconIntersectionObserver&&(this._iconIntersectionObserver.disconnect(),this._iconIntersectionObserver=null)};
S.loadDependencies=function(){return Promise.all([new Promise((J,O)=>d(["../chunks/calcite-icon"],J,O)),new Promise((J,O)=>d(["../chunks/calcite-input"],J,O)),new Promise((J,O)=>d(["../chunks/calcite-list-item"],J,O)),new Promise((J,O)=>d(["../chunks/calcite-progress"],J,O))])};S.castVisibleElements=function(J){return{...w,...J}};S.select=function(J){return null};S.render=function(){const {enableListScroll:J,filterText:O,headingLevel:t,messages:l,viewModel:{items:b,selectedItem:f,state:n}}=this,P=
this.visibleElements.filter;if(0<b.length&&"items"in b[0]){const U=b.find(T=>T.label===q.nullGroupBy.label);U&&(U.label=l.other)}return G.tsx("div",{class:this.classes("esri-feature-templates","esri-widget"),"aria-label":l.widgetLabel},"loading"===n?this.renderLoader():"ready"===n?G.tsx(I.ItemList,{id:this.id,identify:H,filterText:O,items:b,headingLevel:t,messages:{filterPlaceholder:l.filterPlaceholder,noItems:l.noItems,noMatches:l.noMatches},filterEnabled:P,onItemSelect:U=>{this.viewModel.select(U)},
onFilterChange:U=>{this.filterText=U;this.viewModel.refresh()},renderIcon:this.renderItemIcon,selectedItem:f,enableListScroll:J}):null)};S.renderItemIcon=function({item:J}){return G.tsx("span",{key:"icon",afterCreate:this._afterItemCreateOrUpdate,afterUpdate:this._afterItemCreateOrUpdate,afterRemoved:this._afterItemRemoved,"data-item":J,"data-has-icon":!1})};S.renderLoader=function(){return G.tsx("div",{class:"esri-feature-templates__loader",key:"loader"})};S._afterItemCreateOrUpdate=function(J){var O;
null==(O=this._iconIntersectionObserver)?void 0:O.observe(J)};S._afterItemRemoved=function(J){var O;null==(O=this._iconIntersectionObserver)?void 0:O.unobserve(J)};return z}(B.HandleOwnerMixin(m));c.__decorate([y.property()],B.prototype,"enableListScroll",void 0);c.__decorate([F.aliasOf("viewModel.filterFunction")],B.prototype,"filterFunction",void 0);c.__decorate([y.property()],B.prototype,"filterText",void 0);c.__decorate([F.aliasOf("viewModel.groupBy")],B.prototype,"groupBy",void 0);c.__decorate([y.property()],
B.prototype,"headingLevel",void 0);c.__decorate([y.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],B.prototype,"label",void 0);c.__decorate([F.aliasOf("viewModel.layers")],B.prototype,"layers",void 0);c.__decorate([y.property(),x.messageBundle("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],B.prototype,"messages",void 0);c.__decorate([F.aliasOf("viewModel.selectedItem")],B.prototype,"selectedItem",void 0);c.__decorate([y.property(),r.vmEvent("select")],B.prototype,"viewModel",
void 0);c.__decorate([y.property()],B.prototype,"visibleElements",void 0);c.__decorate([M.cast("visibleElements")],B.prototype,"castVisibleElements",null);c.__decorate([F.aliasOf("viewModel.select")],B.prototype,"select",null);return B=c.__decorate([k.subclass("esri.widgets.FeatureTemplates")],B)})},"esri/widgets/FeatureTemplates/FeatureTemplatesViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Evented ../../core/HandleOwner ../../core/maybe ../../core/ObjectPool ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./TemplateItem ./TemplateItemGroup".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q){function I(A){return A.reduce((r,G)=>[...r,...G.templates],[])}var p;const E=({layer:A})=>({key:A,label:A.title}),x=({layer:A})=>({key:A.geometryType,label:A.geometryType});c=p=function(A){function r(H){H=A.call(this,H)||this;H._itemPool=new F(m);H._groupPool=new F(q);H.filterFunction=null;H.selectedItem=null;return H}d._inheritsLoose(r,A);var G=r.prototype;G.initialize=function(){this._get("groupBy")||(this.groupBy="layer")};G.destroy=function(){this._templateToLayer.clear()};
G.refresh=function(){this.notifyChange("items")};G.select=function(H){H=(null==H?void 0:H.clone())||null;this._set("selectedItem",H);this.emit("select",{item:H,template:(null==H?void 0:H.template)||null})};G._createItem=function(H,w){const e=this._itemPool.acquire();e.set({template:H,layer:w});return e};G._createGroup=function(H,w){const e=this._groupPool.acquire();e.set("label",H);e.items=w;return e};G._releasePreviousItems=function(){this._destroyItems(this._get("items"))};G._destroyItems=function(H){H&&
(H[0]instanceof m?H.forEach(w=>this._destroyItem(w)):H.forEach(w=>this._destroyGroup(w)))};G._destroyGroup=function(H){H.items.forEach(w=>this._destroyItem(w));H.items.length=0;this._groupPool.release(H)};G._destroyItem=function(H){H.layer=null;H.template=null;this._itemPool.release(H)};G._ensureGroupByObject=function(H){return"string"===typeof H?{key:H,label:H}:H};d._createClass(r,[{key:"_templateToLayer",get:function(){const H=new Map;for(const [w,e]of this._featureTemplatesByLayer)for(const z of e)H.set(z,
w);return H}},{key:"groupBy",set:function(H){this._set("groupBy",H);if("function"===typeof H)this._groupByFunction=w=>this._ensureGroupByObject(H(w));else switch(H){case "none":this._groupByFunction=null;break;case "layer":this._groupByFunction=E;break;case "geometry":this._groupByFunction=x}}},{key:"layers",get:function(){return this._get("layers")},set:function(H){this.handles.remove("layers");if(H){const w=()=>this.notifyChange("state");this.handles.add(H.map(e=>L.when(e,"loadStatus",w)),"layers")}this._set("layers",
H)}},{key:"state",get:function(){const {layers:H}=this;return H&&0!==H.length?H.some(w=>"loading"===w.loadStatus||"not-loaded"===w.loadStatus)?"loading":"ready":"disabled"}},{key:"_featureTemplatesByLayer",get:function(){if(!this.layers)return new Map;const H=[];for(const w of this.layers){const e="templates"in w&&w.templates?w.templates:[],z="types"in w&&w.types?I(w.types):[];H.push([w,[...e,...z]])}return new Map(H)}},{key:"numberOfFeatureTemplates",get:function(){return Array.from(this._featureTemplatesByLayer.values()).reduce((H,
w)=>H+w.length,0)}},{key:"items",get:function(){if(0===this.numberOfFeatureTemplates)return this._releasePreviousItems(),[];var H=this._featureTemplatesByLayer,w=[],e=u.isSome(this.filterFunction)?this.filterFunction:p._nullFilterFunction;for(const [S,J]of H){const {loadStatus:O,capabilities:{operations:{supportsEditing:t,supportsAdd:l}}}=S;if("loaded"===O&&t&&l)for(const b of J)w.push({layer:S,template:b,matchesFilter:e({label:b.name})})}if(u.isNone(this._groupByFunction))return e=w.filter(({matchesFilter:S})=>
S).map(({template:S,layer:J})=>this._createItem(S,J)),this._releasePreviousItems(),e;H=new Map;for(var z of w){const {template:S,layer:J}=z;w=this._groupByFunction({template:S,layer:J});const {key:O,label:t}=u.isSome(w.key)?w:p.nullGroupBy;H.has(O)||H.set(O,{label:t,templateItemInfos:[]});H.get(O).templateItemInfos.push(z)}z=[];for(const S of H.values()){const {label:J,templateItemInfos:O}=S;w=O.filter(({matchesFilter:t})=>t);w=e({label:J})?O:0<O.length?w:[];0<w.length&&(w=w.map(({template:t,layer:l})=>
this._createItem(t,l)),z.push(this._createGroup(J,w)))}if(1===z.length&&z[0].label===p.nullGroupBy.label)return this._releasePreviousItems(),z[0].items;this._releasePreviousItems();return z}}]);return r}(g.HandleOwnerMixin(B.EventedAccessor));c.nullGroupBy={key:Symbol(),label:"Other\u200b"};c._nullFilterFunction=A=>!0;h.__decorate([K.property()],c.prototype,"_groupByFunction",void 0);h.__decorate([K.property({readOnly:!0})],c.prototype,"_templateToLayer",null);h.__decorate([K.property()],c.prototype,
"filterFunction",void 0);h.__decorate([K.property()],c.prototype,"groupBy",null);h.__decorate([K.property()],c.prototype,"layers",null);h.__decorate([K.property()],c.prototype,"state",null);h.__decorate([K.property({readOnly:!0})],c.prototype,"_featureTemplatesByLayer",null);h.__decorate([K.property({readOnly:!0})],c.prototype,"numberOfFeatureTemplates",null);h.__decorate([K.property({readOnly:!0})],c.prototype,"items",null);h.__decorate([K.property({readOnly:!0})],c.prototype,"selectedItem",void 0);
h.__decorate([K.property()],c.prototype,"select",null);return c=p=h.__decorate([k.subclass("esri.widgets.FeatureTemplates.FeatureTemplatesViewModel")],c)})},"esri/widgets/FeatureTemplates/TemplateItem":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Accessor ../../core/HandleOwner ../../core/Logger ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../symbols/support/symbolUtils".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I){function p(H,w){return E.apply(this,arguments)}function E(){E=h._asyncToGenerator(function*(H,w){var {renderer:e}=H;return e&&(w=new B({attributes:w.prototype.attributes}),e=yield e.getSymbolAsync(w))?e:x(H)});return E.apply(this,arguments)}function x(H){return A.apply(this,arguments)}function A(){A=h._asyncToGenerator(function*(H){({geometryType:H}=H);return(H="point"===H||"multipoint"===H?yield new Promise((w,e)=>d(["../../symbols/SimpleMarkerSymbol"],z=>
w(Object.freeze({__proto__:null,default:z})),e)):"polyline"===H?yield new Promise((w,e)=>d(["../../symbols/SimpleLineSymbol"],z=>w(Object.freeze({__proto__:null,default:z})),e)):"polygon"===H||"mesh"===H||"multipatch"===H?yield new Promise((w,e)=>d(["../../symbols/SimpleFillSymbol"],z=>w(Object.freeze({__proto__:null,default:z})),e)):null)?new H.default:null});return A.apply(this,arguments)}var r;const G=F.getLogger("esri.widgets.FeatureTemplates.TemplateItem");g=r=function(H){function w(z){z=H.call(this,
z)||this;z._activeFetchInfo={id:null,request:null};z.description=null;z.label=null;z.layer=null;z.template=null;z.thumbnail=null;return z}h._inheritsLoose(w,H);var e=w.prototype;e.initialize=function(){this.handles.add(K.init(this,["layer.renderer","template"],()=>{this._activeFetchInfo.id=null;this._activeFetchInfo.request=null;this._set("thumbnail",null)}))};e.clone=function(){const z=L.isSome(this.thumbnail)?this.thumbnail.cloneNode(!0):null,S=new r({layer:this.layer,template:this.template});S._set("thumbnail",
z);return S};w.fetchThumbnail=function(){var z=h._asyncToGenerator(function*(S,J){var O;if("subtype-group"===S.type)return G.warn("Thumbnails for sublayers of a SubtypeGroupLayer are not yet supported."),null;const t=yield p(S,J);if(L.isNone(t))return null;const l={maxSize:36};"dictionary"===(null==(O=S.renderer)?void 0:O.type)&&(l.fieldMap=S.renderer.fieldMap,l.feature={attributes:J.prototype.attributes});return yield I.renderPreviewHTML(t,l)});return function(S,J){return z.apply(this,arguments)}}();
return w}(u.HandleOwnerMixin(g));c.__decorate([M.property({aliasOf:"template.description"})],g.prototype,"description",void 0);c.__decorate([M.property({aliasOf:"template.name"})],g.prototype,"label",void 0);c.__decorate([M.property()],g.prototype,"layer",void 0);c.__decorate([M.property()],g.prototype,"template",void 0);c.__decorate([M.property({readOnly:!0})],g.prototype,"thumbnail",void 0);return g=r=c.__decorate([q.subclass("esri.widgets.FeatureTemplates.TemplateItem")],g)})},"esri/symbols/support/symbolUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ../../support/arcadeOnDemand ./previewUtils ./utils".split(" "),
function(d,h,c,B,g,u,F,L){function K(p,E){if(E&&(p.style.filter=L.getCSSFilterFromEffectList(E),E=E.effects))for(const x of E)if("drop-shadow"===(null==x?void 0:x.type)){0>x.offsetX?p.style.marginLeft=`${Math.abs(x.offsetX)}px`:p.style.marginRight=`${x.offsetX}px`;break}}function M(p,E){return y.apply(this,arguments)}function y(){y=c._asyncToGenerator(function*(p,E){switch(p.type){case "web-style":var {previewWebStyleSymbol:x}=yield new Promise((A,r)=>d(["./previewWebStyleSymbol"],A,r));return x(p,
M,E);case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return{previewSymbol3D:x}=yield new Promise((A,r)=>d(["./previewSymbol3D"],A,r)),x(p,E);case "simple-marker":case "simple-line":case "simple-fill":case "picture-marker":case "picture-fill":case "text":return{previewSymbol2D:x}=yield new Promise((A,r)=>d(["./previewSymbol2D"],A,r)),x(p,E);case "cim":return{previewCIMSymbol:x}=yield new Promise((A,r)=>d(["./previewCIMSymbol"],A,r)),x(p,E)}});return y.apply(this,arguments)}
function k(p){return p&&"opacity"in p?p.opacity*k(p.parent):1}function m(){m=c._asyncToGenerator(function*(p,E){var x,A;if(p){var r=p.sourceLayer;r=null!=(x=g.isSome(E)&&null!=(A=E.useSourceLayer)&&A?r:p.layer)?x:r;x=k(r);if(g.isSome(p.symbol)&&(!g.isSome(E)||!0!==E.ignoreGraphicSymbol))return p="web-style"===p.symbol.type?yield p.symbol.fetchSymbol(g.isSome(E)?E.abortOptions:null):p.symbol.clone(),L.applyColorToSymbol(p,null,x),p;var G=g.isSome(E)&&E.renderer||r&&"renderer"in r&&r.renderer;if(A=
G&&"getSymbolAsync"in G?yield G.getSymbolAsync(p,E):null){A="web-style"===A.type?yield A.fetchSymbol(g.isSome(E)?E.abortOptions:null):A.clone();if(!("visualVariables"in G&&G.visualVariables&&G.visualVariables.length))return L.applyColorToSymbol(A,null,x),A;"arcadeRequiredForVisualVariables"in G&&G.arcadeRequiredForVisualVariables&&(g.isNone(E)||g.isNone(E.arcade))&&(E={...g.unwrap(E)},E.arcade=yield u.loadArcade());r=yield new Promise((J,O)=>d(["../../renderers/visualVariables/support/visualVariableUtils"],
J,O));var H=[],w=[],e=[],z=[];for(var S of G.visualVariables)switch(S.type){case "color":H.push(S);break;case "opacity":w.push(S);break;case "rotation":z.push(S);break;case "size":S.target||e.push(S)}S=(S=!!H.length&&H[H.length-1])?r.getColor(S,p,E):null;w=(w=!!w.length&&w[w.length-1])?r.getOpacity(w,p,E):null;null!=x&&(w=null!=w?w*x:x);L.applyColorToSymbol(A,S,w);e.length&&(x=r.getAllSizes(e,p,E),yield L.applySizesToSymbol(A,x));for(const J of z)L.applyRotationToSymbol(A,r.getRotationAngle(J,p,E),
J.axis);return A}}});return m.apply(this,arguments)}function q(){q=c._asyncToGenerator(function*(p,E){var x;if(p){var A=k(p.layer||p.sourceLayer);if(g.isSome(p.symbol)&&(!g.isSome(E)||!0!==E.ignoreGraphicSymbol))return p="web-style"===p.symbol.type?yield p.symbol.fetchSymbol(g.isSome(E)?E.abortOptions:null):p.symbol.clone(),L.getColorFromSymbol(p,A);var r=g.isSome(E)&&E.renderer||p.get("layer.renderer")||p.get("sourceLayer.renderer"),G=yield r.getSymbolAsync(p,E);if(G){G="web-style"===G.type?yield G.fetchSymbol(g.isSome(E)?
E.abortOptions:null):G.clone();G=L.getColorFromSymbol(G,A);if(!("visualVariables"in r)||"visualVariables"in r&&!r.visualVariables||"visualVariables"in r&&(null==(x=r.visualVariables)||!x.length))return G;r.arcadeRequiredForVisualVariables&&(g.isNone(E)||g.isNone(E.arcade))&&(E={...g.unwrap(E)},E.arcade=yield u.loadArcade());x=yield new Promise((e,z)=>d(["../../renderers/visualVariables/support/visualVariableUtils"],e,z));var H=[],w=[];for(const e of r.visualVariables)switch(e.type){case "color":H.push(e);
break;case "opacity":w.push(e)}r=(r=0<H.length?H[H.length-1]:null)?x.getColor(r,p,E):G;p=(G=0<w.length?w[w.length-1]:null)?x.getOpacity(G,p,E):null;null!=A&&(p=null!=p?p*A:A);return r?L.applyOpacityToColor(r,p):null}}});return q.apply(this,arguments)}let I=null;h.getDisplayedColor=function(p,E){return q.apply(this,arguments)};h.getDisplayedSymbol=function(p,E){return m.apply(this,arguments)};h.renderColorRampPreviewHTML=function(p,E={}){var x="horizontal"===E.align;const {width:A=x?75:24,height:r=
x?24:75,gradient:G=!0}=E;var H=window.devicePixelRatio,w=A*H,e=r*H;H=document.createElement("canvas");H.width=w;H.height=e;H.style.width=`${A}px`;H.style.height=`${r}px`;const z=H.getContext("2d");var S=x?w:0,J=x?0:e;if(G){const O=z.createLinearGradient(0,0,S,J);x=p.length;const t=1===x?0:1/(x-1);p.forEach((l,b)=>O.addColorStop(b*t,l.toString()));z.fillStyle=O;z.fillRect(0,0,w,e)}else{w=x?w/p.length:w;e=x?e:e/p.length;J=S=0;for(const O of p)z.fillStyle=O.toString(),z.fillRect(S,J,w,e),S=x?S+w:0,J=
x?0:J+e}p=document.createElement("div");p.style.width=`${A}px`;p.style.height=`${r}px`;K(p,null==E?void 0:E.effectList);p.appendChild(H);return p};h.renderDotDensityPreviewHTML=function(p,E,x){const {backgroundColor:A,outline:r,dotSize:G}=p;x=x&&x.swatchSize||F.SymbolSizeDefaults.size;const H=Math.round(x*x/G**2*.8),w=window.devicePixelRatio;p=document.createElement("canvas");const e=x*w;p.width=e;p.height=e;p.style.width=`${p.width/w}px`;p.style.height=`${p.height/w}px`;const z=p.getContext("2d");
A&&(z.fillStyle=A.toCss(!0),z.fillRect(0,0,e,e),z.fill());z.fillStyle=E.toCss(!0);if(I&&I.length/2===H)for(E=0;E<2*H;E+=2)z.fillRect(I[E],I[E+1],G*w,G*w),z.fill();else for(I=[],E=0;E<2*H;E+=2){const S=Math.floor(Math.random()*(e-0+1)),J=Math.floor(Math.random()*(e-0+1));I.push(S,J);z.fillRect(S,J,G*w,G*w);z.fill()}r&&(r.color&&(z.strokeStyle=r.color.toCss(!0)),z.lineWidth=r.width,z.strokeRect(0,0,e,e));x=new Image(x,x);x.src=p.toDataURL();return x};h.renderPreviewHTML=M;Object.defineProperty(h,"__esModule",
{value:!0})})},"esri/symbols/support/previewUtils":function(){define(["exports","../../Color"],function(d,h){function c(B,g){return Math.round(Math.min(Math.max(B+191.25*g,0),255))}d.SymbolSizeDefaults=void 0;(function(B){B[B.size=22]="size";B[B.lineWidth=50]="lineWidth";B[B.maxSize=120]="maxSize";B[B.maxOutlineSize=80]="maxOutlineSize";B[B.tallSymbolWidth=20]="tallSymbolWidth"})(d.SymbolSizeDefaults||(d.SymbolSizeDefaults={}));d.adjustColorBrightness=function(B,g){if("type"in B&&("linear"===B.type||
"pattern"===B.type))return B;B=new h(B);return new h([c(B.r,g),c(B.g,g),c(B.b,g),B.a])};d.adjustColorComponentBrightness=c;d.getConeShapes=function(B,g){let u=g?d.SymbolSizeDefaults.tallSymbolWidth:B;g=g?4:6;u=u<=d.SymbolSizeDefaults.size?u-.5*g:u-g;g=.15*u;const F=u;B-=g;return[{type:"ellipse",cx:.5*u,cy:B,rx:.5*u,ry:g},{type:"path",path:[{command:"M",values:[.5*F,0]},{command:"L",values:[F,B]},{command:"L",values:[0,B]},{command:"Z",values:[]}]}]};d.getCubeShapes=function(B,g){let u=g?d.SymbolSizeDefaults.tallSymbolWidth:
B;var F=g?4:6;F=u=u<=d.SymbolSizeDefaults.size?u-.5*F:u-F;g=g?.35*u:.5*u;return[{type:"path",path:[{command:"M",values:[.5*F,0]},{command:"L",values:[F,.5*g]},{command:"L",values:[.5*F,g]},{command:"L",values:[0,.5*g]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*g]},{command:"L",values:[.5*F,g]},{command:"L",values:[.5*F,B]},{command:"L",values:[0,B-.5*g]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*F,g]},{command:"L",values:[.5*F,B]},{command:"L",
values:[F,B-.5*g]},{command:"L",values:[F,.5*g]},{command:"Z",values:[]}]}]};d.getCylinderShapes=function(B,g){var u=g?d.SymbolSizeDefaults.tallSymbolWidth:B;g=g?4:6;u=u<=d.SymbolSizeDefaults.size?u-.5*g:u-g;g=.5*u;const F=.15*u;B-=F;return[{type:"ellipse",cx:.5*u,cy:B,rx:g,ry:F},{type:"path",path:[{command:"M",values:[0,F]},{command:"L",values:[0,B]},{command:"L",values:[u,B]},{command:"L",values:[u,F]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*u,cy:F,rx:g,ry:F}]};d.getDiamondShapes=function(B){var g=
B;g=g<d.SymbolSizeDefaults.size?g-2:g-4;const u=Math.floor(B/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*g,0]},{command:"L",values:[g,.5*B-u]},{command:"L",values:[.45*g-u,.5*B+u]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*g,0]},{command:"L",values:[.45*g-u,.5*B+u]},{command:"L",values:[0,.5*B-u]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*B-u]},{command:"L",values:[.45*g-u,.5*B+u]},{command:"L",values:[.45*g,B]},{command:"Z",
values:[]}]},{type:"path",path:[{command:"M",values:[.45*g,B]},{command:"L",values:[g,.5*B-u]},{command:"L",values:[.45*g-u,.5*B+u]},{command:"Z",values:[]}]}]};d.getExtrudeSymbolShapes=function(B){const g=d.SymbolSizeDefaults.size;B*=.5;return[{type:"path",path:[{command:"M",values:[0,.35*g]},{command:"L",values:[.3*g,.7*g]},{command:"L",values:[.3*g,.7*g+B]},{command:"L",values:[0,.7*g+B-.35*g]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*g,.7*g]},{command:"L",values:[.3*
g,.7*g+B]},{command:"L",values:[g,B]},{command:"L",values:[g,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*g,0]},{command:"L",values:[g,0]},{command:"L",values:[.3*g,.7*g]},{command:"L",values:[0,.35*g]},{command:"Z",values:[]}]}]};d.getInvertedConeShapes=function(B){let g=B;g=g<d.SymbolSizeDefaults.size?g-3:g-6;const u=.15*g,F=g;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[F,0]},{command:"L",values:[.5*F,B-u]},{command:"Z",values:[]}]},{type:"ellipse",
cx:.5*g,cy:0,rx:.5*g,ry:u}]};d.getPathSymbolShapes=function(B,g,u){var F=d.SymbolSizeDefaults.size;let L=F,K=F;1>B?L*=.75:1<B&&(K*=1.25);B=F;g&&u&&(L=K=B=F=0);return[{type:"path",path:[{command:"M",values:[B,0]},{command:"L",values:[u?B:.875*B,0]},{command:"L",values:[u?L-.5*B:0,K-.5*F]},{command:"L",values:[L-.5*B,K-.5*F]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[B,0]},{command:"L",values:[B,g?0:.125*F]},{command:"L",values:[L-.5*B,g?K-.5*F:F]},{command:"L",values:[L-.5*
B,K-.5*F]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[L-.5*B,K-.5*F]},{command:"L",values:[u?L-.5*B:0,K-.5*F]},{command:"L",values:[u?L-.5*B:0,g?K-.5*F:F]},{command:"L",values:[L-.5*B,g?K-.5*F:F]},{command:"Z",values:[]}]}]};d.getTetrahedronShapes=function(B){var g=B;g=g<d.SymbolSizeDefaults.size?g-1:g-2;return[{type:"path",path:[{command:"M",values:[.45*B,0]},{command:"L",values:[B,g]},{command:"L",values:[.45*B,.6*g]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",
values:[.45*B,0]},{command:"L",values:[.45*B,.6*g]},{command:"L",values:[0,g]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,g]},{command:"L",values:[.45*B,.6*g]},{command:"L",values:[B,g]},{command:"Z",values:[]}]}]};d.getWaterSymbolShapes=function(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},
{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},
{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]};
d.shapes={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],
cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],
tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",
path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m){function q(b){b=b.symbolLayers;if(!b)return null;let f=null;b.forEach(n=>{if("object"!==n.type||null==n.resource.href)f="water"===n.type?L.unwrap(n.color):L.isSome(n.material)?L.unwrap(n.material.color):null});return f?new B(f):null}function I(b,f){if(null==f)return b;b=b.toRgba();b[3]*=f;return new B(b)}function p(b,f,n){if(b=b.symbolLayers){var P=U=>{U=L.isSome(U)?U:null;f=f||U||null!=n&&l;return I(f,n)};b.forEach(U=>{if("object"!==U.type||null==U.resource.href||
f)if("water"===U.type)U.color=P(U.color);else{var T=L.isSome(U.material)?U.material.color:null;T=P(T);L.isNone(U.material)?U.material=new m.Symbol3DMaterial({color:T}):U.material.color=T;null!=n&&"outline"in U&&L.isSome(U.outline)&&L.isSome(U.outline.color)&&(U.outline.color=I(U.outline.color,n))}})}}function E(b,f){return x.apply(this,arguments)}function x(){x=c._asyncToGenerator(function*(b,f){(b=b.symbolLayers)&&(yield u.forEach(b,function(){var n=c._asyncToGenerator(function*(P){return A(P,f)});
return function(P){return n.apply(this,arguments)}}()))});return x.apply(this,arguments)}function A(b,f){return r.apply(this,arguments)}function r(){r=c._asyncToGenerator(function*(b,f){switch(b.type){case "extrude":b.size="number"===typeof f[2]?f[2]:0;break;case "icon":case "line":case "text":f=G(f);L.isSome(f)&&(b.size=f);break;case "path":{const n=e(f,M.ONES,[b.width,void 0,b.height]);b.width=J(f[0],b.width,1,n);b.height=J(f[2],b.height,1,n)}break;case "object":yield H(b,f)}});return r.apply(this,
arguments)}function G(b){for(const f of b)if("number"===typeof f)return f;return null}function H(b,f){return w.apply(this,arguments)}function w(){w=c._asyncToGenerator(function*(b,f){const {resourceSize:n,symbolSize:P}=yield z(b),U=e(f,n,P);b.width=J(f[0],P[0],n[0],U);b.depth=J(f[1],P[1],n[1],U);b.height=J(f[2],P[2],n[2],U)});return w.apply(this,arguments)}function e(b,f,n){for(let P=0;3>P;P++){const U=b[P];switch(U){case "symbol-value":return null!=n[P]?n[P]/f[P]:1;case "proportional":break;default:if(U&&
f[P])return U/f[P]}}return 1}function z(b){return S.apply(this,arguments)}function S(){S=c._asyncToGenerator(function*(b){const f=yield(yield new Promise((N,R)=>d(["./symbolLayerUtils"],N,R))).computeObjectLayerResourceSize(b,10),{width:n,height:P,depth:U}=b;b=[n,U,P];let T=1;for(var v=0;3>v;v++)if(null!=b[v]){T=b[v]/f[v];break}for(v=0;3>v;v++)null==b[v]&&(b[v]=f[v]*T);return{resourceSize:f,symbolSize:b}});return S.apply(this,arguments)}function J(b,f,n,P){switch(b){case "proportional":return n*P;
case "symbol-value":return null!=f?f:n;default:return b}}function O(){O=c._asyncToGenerator(function*(b,f){if(b&&f){if(g.isSymbol3D(b))return E(b,f);if(g.isSymbol2D(b)&&(f=G(f),!L.isNone(f)))switch(b.type){case "simple-marker":b.size=f;break;case "picture-marker":{const n=b.width/b.height;1<n?(b.width=f,b.height=f*n):(b.width=f*n,b.height=f);break}case "simple-line":b.width=f;break;case "text":b.font.size=f}}});return O.apply(this,arguments)}const t=/\/resource\/(.*?)\.svg$/,l=new B("white");h.applyColorToSymbol=
function(b,f,n){if(b&&(f||null!=n))if(f&&(f=new B(f)),g.isSymbol3D(b))p(b,f,n);else if(g.isSymbol2D(b)){if(f=f||b.color)b.color=I(f,n);null!=n&&"outline"in b&&b.outline&&b.outline.color&&(b.outline.color=I(b.outline.color,n))}};h.applyOpacityToColor=I;h.applyRotationToSymbol=function(b,f,n){b&&null!=f&&(g.isSymbol3D(b)?(b=b.symbolLayers)&&b.forEach(P=>{if(P&&"object"===P.type)switch(n){case "tilt":P.tilt=f;break;case "roll":P.roll=f;break;default:P.heading=f}}):!g.isSymbol2D(b)||"simple-marker"!==
b.type&&"picture-marker"!==b.type&&"text"!==b.type||(b.angle=f))};h.applySizesToSymbol=function(b,f){return O.apply(this,arguments)};h.getCSSFilterFromEffectList=function(b){if(!b)return null;b=b.effects.filter(f=>"bloom"!==f.type).map(f=>f.toJSON());return y.effectFunctionsFromJSON(b)};h.getColorFromSymbol=function(b,f){if(!b)return null;let n=null;g.isSymbol3D(b)?n=q(b):g.isSymbol2D(b)&&(n=b.color?new B(b.color):null);return n?I(n,f):null};h.getIconHref=function(b,f){f=f.resource.href;return!F("esri-canvas-svg-support")&&
b.styleOrigin&&t.test(f)?f.replace(t,"/resource/png/$1.png"):f};h.getSymbolOutlineSize=function(b){if(!b)return 0;if(g.isSymbol3D(b)){{const f=b.symbolLayers&&b.symbolLayers.length;f?(b=b.symbolLayers.getItemAt(f-1),b="outline"in b?L.get(b,"outline","size"):void 0):b=void 0}return L.isSome(b)?b:0}return(b=k.getStroke(b))&&K.px2pt(b.width)||0};h.isVolumetricSymbol=function(b){if(L.isNone(b)||!("symbolLayers"in b)||L.isNone(b.symbolLayers))return!1;switch(b.type){case "point-3d":return b.symbolLayers.some(f=>
"object"===f.type);case "line-3d":return b.symbolLayers.some(f=>"path"===f.type);case "polygon-3d":return b.symbolLayers.some(f=>"object"===f.type||"extrude"===f.type);default:return!1}};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(d,h,c,B,g,u,F){function L(m){if(!m)return null;let q;switch(m.type){case "simple-fill":case "picture-fill":case "simple-marker":q=
L(m.outline);break;case "simple-line":{const I=u.pt2px(m.width);"none"!==m.style&&0!==I&&(q={color:m.color,style:k(m.style),width:I,cap:m.cap,join:"miter"===m.join?u.pt2px(m.miterLimit):m.join});break}default:q=null}return q}const K={left:"start",center:"middle",right:"end",justify:"start"},M={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},y=new g(1E3),k=function(){const m={};return function(q){if(m[q])return m[q];const I=q.replace(/-/g,"");return m[q]=I}}();
c=new c([128,128,128]);d.defaultThematicColor=c;d.dekebabifyLineStyle=k;d.getFill=function(m){const q=m.style;let I=null;if(m)switch(m.type){case "simple-marker":"cross"!==q&&"x"!==q&&(I=m.color);break;case "simple-fill":"solid"===q?I=m.color:"none"!==q&&(I={type:"pattern",x:0,y:0,src:h.getAssetUrl(`esri/symbols/patterns/${q}.png`),width:5,height:5});break;case "picture-fill":I={type:"pattern",src:m.url,width:u.pt2px(m.width)*m.xscale,height:u.pt2px(m.height)*m.yscale,x:u.pt2px(m.xoffset),y:u.pt2px(m.yoffset)};
break;case "text":I=m.color;break;case "cim":I=F.getCIMSymbolColor(m)}return I};d.getPatternUrlWithColor=function(m,q){const I=m+"-"+q;return void 0!==y.get(I)?Promise.resolve(y.get(I)):B(m,{responseType:"image"}).then(p=>{p=p.data;const E=p.naturalWidth,x=p.naturalHeight,A=document.createElement("canvas");A.width=E;A.height=x;const r=A.getContext("2d");r.fillStyle=q;r.fillRect(0,0,E,x);r.globalCompositeOperation="destination-in";r.drawImage(p,0,0);p=A.toDataURL();y.put(I,p);return p})};d.getSVGAlign=
function(m){return m=(m=m.horizontalAlignment)&&K[m.toLowerCase()]||"middle"};d.getSVGBaseline=function(m){return(m=m.verticalAlignment)&&M[m.toLowerCase()]||"alphabetic"};d.getSVGBaselineShift=function(m){return"bottom"===m.verticalAlignment?"super":null};d.getStroke=L;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(d){return function(){function h(B,g){this._storage=new d.MemCacheStorage;this._storage.maxSize=B;g&&this._storage.registerRemoveFunc("",
g)}var c=h.prototype;c.put=function(B,g){this._storage.put(B,g,1,1)};c.pop=function(B){return this._storage.pop(B)};c.get=function(B){return this._storage.get(B)};c.clear=function(){this._storage.clearAll()};c.destroy=function(){this._storage.destroy()};return h}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(d,h,c){function B(k){k=c.toCIMSymbolJSON(k);if("CIMTextSymbol"===k.type)return k.height;let m=0;if(k.symbolLayers)for(const q of k.symbolLayers)c.isCIMMarker(q)&&
q.size>m?m=q.size:c.isCIMStroke(q)&&q.width>m?m=q.width:c.isCIMFill(q);return m}function g(k,m,q,I){if("CIMTextSymbol"===k.type)k.height*=m;else{if(q&&k.effects)for(const p of k.effects)L(p,m);if(k.symbolLayers)for(const p of k.symbolLayers)switch(p.type){case "CIMPictureMarker":case "CIMVectorMarker":u(p,m,I);break;case "CIMPictureStroke":case "CIMSolidStroke":null!=I&&I.preserveOutlineWidth||!p.width||(p.width*=m);break;case "CIMPictureFill":p.height&&(p.height*=m);p.offsetX&&(p.offsetX*=m);p.offsetY&&
(p.offsetY*=m);break;case "CIMHatchFill":g(p.lineSymbol,m,!0,{...I,preserveOutlineWidth:!1}),p.offsetX&&(p.offsetX*=m),p.offsetY&&(p.offsetY*=m),p.separation&&(p.separation*=m)}}}function u(k,m,q){k.markerPlacement&&F(k.markerPlacement,m);k.offsetX&&(k.offsetX*=m);k.offsetY&&(k.offsetY*=m);k.anchorPoint&&"Absolute"===k.anchorPointUnits&&(k.anchorPoint={x:k.anchorPoint.x*m,y:k.anchorPoint.y*m});k.size*=m;if("CIMVectorMarker"===k.type&&k.markerGraphics)for(const I of k.markerGraphics)k.scaleSymbolsProportionally||
g(I.symbol,m,!0,q)}function F(k,m){c.isCIMMarkerStrokePlacement(k)&&k.offset&&(k.offset*=m);switch(k.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":k.customEndingOffset&&(k.customEndingOffset*=m);k.offsetAlongLine&&(k.offsetAlongLine*=m);if(k.placementTemplate&&k.placementTemplate.length){var q=k.placementTemplate.map(I=>I*m);k.placementTemplate=q}break;case "CIMMarkerPlacementAlongLineVariableSize":k.maxRandomOffset&&(k.maxRandomOffset*=m);k.placementTemplate&&
k.placementTemplate.length&&(q=k.placementTemplate.map(I=>I*m),k.placementTemplate=q);break;case "CIMMarkerPlacementOnLine":k.startPointOffset&&(k.startPointOffset*=m);break;case "CIMMarkerPlacementAtExtremities":k.offsetAlongLine&&(k.offsetAlongLine*=m);break;case "CIMMarkerPlacementAtRatioPositions":k.beginPosition&&(k.beginPosition*=m);k.endPosition&&(k.endPosition*=m);break;case "CIMMarkerPlacementPolygonCenter":k.offsetX&&(k.offsetX*=m);k.offsetY&&(k.offsetY*=m);break;case "CIMMarkerPlacementInsidePolygon":k.offsetX&&
(k.offsetX*=m),k.offsetY&&(k.offsetY*=m),k.stepX&&(k.stepX*=m),k.stepY&&(k.stepY*=m)}}function L(k,m){switch(k.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":k.width&&(k.width*=m);break;case "CIMGeometricEffectBuffer":k.size&&(k.size*=m);break;case "CIMGeometricEffectCut":k.beginCut&&(k.beginCut*=m);k.endCut&&(k.endCut*=m);k.middleCut&&(k.middleCut*=m);break;case "CIMGeometricEffectDashes":k.customEndingOffset&&(k.customEndingOffset*=m);k.offsetAlongLine&&(k.offsetAlongLine*=
m);if(k.dashTemplate&&k.dashTemplate.length){const q=k.dashTemplate.map(I=>I*m);k.dashTemplate=q}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":k.length&&(k.length*=m);break;case "CIMGeometricEffectMove":k.offsetX&&(k.offsetX*=m);k.offsetY&&(k.offsetY*=m);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":k.offset&&(k.offset*=m);break;case "CIMGeometricEffectRegularPolygon":k.radius&&(k.radius*=m);break;case "CIMGeometricEffectTaperedPolygon":k.fromWidth&&
(k.fromWidth*=m);k.length&&(k.length*=m);k.toWidth&&(k.toWidth*=m);break;case "CIMGeometricEffectWave":k.amplitude&&(k.amplitude*=m),k.period&&(k.period*=m)}}function K(k,m){let q;q="CIMTextSymbol"===k.type?k.symbol:k;k="CIMPolygonSymbol"===k.type;if(q.symbolLayers)for(const I of q.symbolLayers)if(!(I.colorLocked||k&&(c.isCIMStroke(I)||c.isCIMMarker(I)&&I.markerPlacement&&c.isCIMMarkerStrokePlacement(I.markerPlacement))))switch(I.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":I.tintColor&&
M(m,I.tintColor);break;case "CIMVectorMarker":I.markerGraphics.forEach(p=>{K(p.symbol,m)});break;case "CIMSolidStroke":case "CIMSolidFill":M(m,I.color);break;case "CIMHatchFill":K(I.lineSymbol,m)}}function M(k,m){for(const q of k)if(q.join(".")===m.join("."))return;k.push(m)}function y(k,m,q){var I="CIMTextSymbol"===k.type?k.symbol:k;k="CIMPolygonSymbol"===I.type?!0:!1;if(I.symbolLayers)for(const p of I.symbolLayers)if(!p.colorLocked){if(k)if(q){if({layersToColor:I}=q,(c.isCIMStroke(p)||c.isCIMMarker(p)&&
p.markerPlacement&&c.isCIMMarkerStrokePlacement(p.markerPlacement))&&"fill"===I||c.isCIMFill(p)&&"outline"===I)continue}else if(c.isCIMStroke(p)||c.isCIMMarker(p)&&p.markerPlacement&&c.isCIMMarkerStrokePlacement(p.markerPlacement))continue;I=m.toArray();switch(p.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":p.tintColor=I;break;case "CIMVectorMarker":p.markerGraphics.forEach(E=>{y(E.symbol,m,q)});break;case "CIMSolidStroke":case "CIMSolidFill":p.color=I;break;case "CIMHatchFill":y(p.lineSymbol,
m,q)}}}d.applyCIMSymbolColor=function(k,m,q){m instanceof h||(m=new h(m));(k=c.toCIMSymbolJSON(k))&&y(k,m,q)};d.applyCIMSymbolRotation=function(k,m,q=!1){k=c.toCIMSymbolJSON(k);q&&0!==m&&(m=360-m);if("CIMTextSymbol"===k.type)k.angle=m;else if("CIMPointSymbol"===k.type&&k.symbolLayers){q=m-(k.angle||0);for(const I of k.symbolLayers)if(c.isCIMMarker(I)){let p=I.rotation||0;p=I.rotateClockwise?p-q:p+q;I.rotation=p}k.angle=m}};d.getCIMSymbolColor=function(k){k=c.toCIMSymbolJSON(k);const m=[];K(k,m);return m.length?
new h(c.fromCIMColor(m[0])):null};d.getCIMSymbolRotation=function(k,m=!1){k=c.toCIMSymbolJSON(k);return"CIMTextSymbol"===k.type||"CIMPointSymbol"===k.type?m&&0!==k.angle?360-k.angle:k.angle||0:0};d.getCIMSymbolSize=B;d.scaleCIMMarker=u;d.scaleCIMSymbolTo=function(k,m,q){const I=c.toCIMSymbolJSON(k);k=B(k);if(0===k)if("CIMTextSymbol"===I.type)I.height=m;else{if(I.symbolLayers)for(const p of I.symbolLayers)switch(p.type){case "CIMPictureMarker":case "CIMVectorMarker":p.size=m;break;case "CIMPictureStroke":case "CIMSolidStroke":p.width=
m}}else g(I,m/k,!1,q)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/symbols/cim/utils":function(){define(["require","exports"],function(d,h){function c(B,g){"string"!==typeof B&&(B=String(B));switch(g){case "LowerCase":return B.toLowerCase();case "Allcaps":return B.toUpperCase();default:return B}}h._adjustTextCase=c;h.colorToArray=function(B){return[B.r,B.g,B.b,B.a]};h.createLabelOverrideFunction=function(B,g,u){const F=y=>{let k=y.length;for(;k--;)if(-1===" /-,\n".indexOf(y.charAt(k)))return!1;
return!0},L=[];var K=0;let M=-1;do M=g.indexOf("[",K),M>=K&&(M>K&&(K=g.substr(K,M-K),L.push([K,null,F(K)])),K=M+1,M=g.indexOf("]",K),M>=K&&(M>K&&(K=g.substr(K,M-K),(K=B[K])&&L.push([null,K,!1])),K=M+1));while(-1!==M);K<g.length-1&&(B=g.substr(K),L.push([B,null,F(B)]));return y=>{let k="",m=null;for(const q of L){const [I,p,E]=q;if(I)E?m=I:(m&&(k+=m,m=null),k+=I);else{const x=y.attributes[p];x&&(m&&(k+=m,m=null),k+=x)}}return c(k,u)}};h.evaluateValueOrFunction=function(B,g,u,F){return"function"===
typeof B?B(g,u,F):B};h.fromCIMColor=function(B){return B?{r:B[0],g:B[1],b:B[2],a:B[3]/255}:{r:0,g:0,b:0,a:0}};h.getValue=B=>isNaN(B)||!B?0:B;h.importGeometryEngine=function(){return new Promise((B,g)=>d(["../../geometry/geometryEngineJSON"],B,g))};h.isCIMFill=function(B){return"CIMGradientFill"===B.type||"CIMHatchFill"===B.type||"CIMPictureFill"===B.type||"CIMSolidFill"===B.type||"CIMWaterFill"===B.type};h.isCIMMarker=function(B){return"CIMVectorMarker"===B.type||"CIMPictureMarker"===B.type||"CIMBarChartMarker"===
B.type||"CIMCharacterMarker"===B.type||"CIMPieChartMarker"===B.type||"CIMStackedBarChartMarker"===B.type};h.isCIMMarkerStrokePlacement=function(B){return"CIMMarkerPlacementAlongLineRandomSize"===B.type||"CIMMarkerPlacementAlongLineSameSize"===B.type||"CIMMarkerPlacementAlongLineVariableSize"===B.type||"CIMMarkerPlacementAtExtremities"===B.type||"CIMMarkerPlacementAtMeasuredUnits"===B.type||"CIMMarkerPlacementAtRatioPositions"===B.type||"CIMMarkerPlacementOnLine"===B.type||"CIMMarkerPlacementOnVertices"===
B.type};h.isCIMStroke=function(B){return"CIMGradientStroke"===B.type||"CIMPictureStroke"===B.type||"CIMSolidStroke"===B.type};h.isGeometryEngineRequired=B=>{if(!B)return!1;for(const g of B)switch(g.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":return!0}return!1};h.resampleHermite=function(B,g,u,F,L,K,M=!0){const y=g/L;u/=K;const k=Math.ceil(y/2),m=Math.ceil(u/2);for(let p=0;p<K;p++)for(let E=0;E<L;E++){const x=4*(E+(M?K-p-1:p)*L);var q=0;let A=0,r=0,G=0,H=0,w=0,e=0;const z=
(p+.5)*u;for(let S=Math.floor(p*u);S<(p+1)*u;S++){var I=Math.abs(z-(S+.5))/m;const J=(E+.5)*y;I*=I;for(let O=Math.floor(E*y);O<(E+1)*y;O++){let t=Math.abs(J-(O+.5))/k;q=Math.sqrt(I+t*t);-1<=q&&1>=q&&(q=2*q*q*q-3*q*q+1,0<q&&(t=4*(O+S*g),e+=q*B[t+3],r+=q,255>B[t+3]&&(q=q*B[t+3]/250),G+=q*B[t],H+=q*B[t+1],w+=q*B[t+2],A+=q))}}F[x]=G/A;F[x+1]=H/A;F[x+2]=w/A;F[x+3]=e/r}};h.toCIMSymbolJSON=function(B){var g;return null==(g=B.data)?void 0:g.symbol};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/widgets/FeatureTemplates/TemplateItemGroup":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Identifiable ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,h,c,B,g,u,F,L,K){c=function(M){function y(k){k=M.call(this,k)||this;k.items=null;k.label=null;return k}d._inheritsLoose(y,M);return y}(B.IdentifiableMixin(c));h.__decorate([g.property()],c.prototype,"items",void 0);h.__decorate([g.property()],c.prototype,"label",void 0);return c=h.__decorate([K.subclass("esri.widgets.FeatureTemplates.TemplateItemGroup")],c)})},"esri/widgets/FeatureTemplates/ItemList":function(){define(["exports","../support/Heading","../support/jsxFactory","../support/widgetUtils"],
function(d,h,c,B){function g(M){const {headingLevel:y,identify:k,items:m,renderIcon:q,filterText:I,onItemMouseLeave:p,onItemMouseEnter:E,onItemSelect:x,selectedItem:A}=M,r=M.enableListScroll?K.scroller:null;return 0===m.length?c.tsx("div",{class:K.noMatchesMessage,key:"no-matches"},M.messages.noMatches):c.tsx("div",{class:r,key:"item-container"},m.map(G=>G.items?L({group:G,filterText:I,headingLevel:y,identify:k,onItemMouseLeave:p,onItemMouseEnter:E,onItemSelect:x,renderIcon:q,selectedItem:A}):F({item:G,
identify:k,grouped:!0,onItemMouseLeave:p,onItemMouseEnter:E,onItemSelect:x,renderIcon:q,filterText:I,selectedItem:A})))}function u(M){const {messages:y,filterText:k,enableListScroll:m}=M;return c.tsx("div",{key:"filter",class:m?null:K.filterContainerSticky},c.tsx("calcite-input",{onCalciteInputInput:q=>{q=q.currentTarget;M.onFilterChange&&M.onFilterChange(q.value)},placeholder:y.filterPlaceholder,value:k,type:"search"}))}function F(M){const {identify:y,item:k,selectedItem:m,grouped:q,onItemSelect:I,
onItemMouseEnter:p,onItemMouseLeave:E,renderIcon:x}=M;M=`${(null==y?void 0:y(k))||k.id}__${k.label}`;const A=m?`${(null==y?void 0:y(m))||m.id}__${m.label}`:"";return c.tsx("calcite-list-item",{"aria-level":q?"2":"","data-item":k,key:M,class:B.classes(K.item,M===A?K.itemSelected:""),label:k.label,onclick:r=>{r=r.currentTarget["data-item"];I&&I(r)},onmouseenter:r=>{r=r.currentTarget["data-item"];p&&p(r)},onkeydown:r=>{B.isActivationKey(r.key)&&(r=r.currentTarget["data-item"],I&&I(r))},onmouseleave:r=>
{r=r.currentTarget["data-item"];E&&E(r)},tabIndex:0},c.tsx("div",{slot:"content-start"},x&&x({item:k})))}function L(M){const {group:y,identify:k,onItemMouseLeave:m,onItemMouseEnter:q,onItemSelect:I,filterText:p,renderIcon:E,selectedItem:x,headingLevel:A}=M;return c.tsx("div",{class:K.group,key:y.label},c.tsx(h.Heading,{level:A,class:K.groupHeader},y.label),y.items.map(r=>F({item:r,identify:k,grouped:!0,onItemMouseLeave:m,onItemMouseEnter:q,onItemSelect:I,renderIcon:E,filterText:p,selectedItem:x})))}
const K={base:"esri-item-list",list:"esri-item-list__list",group:"esri-item-list__group",scroller:"esri-item-list__scroller",groupHeader:"esri-item-list__group__header",item:"esri-item-list__list-item",itemSelected:"esri-item-list__list-item--selected",itemContainer:"esri-item-list__list-item-container",itemLabel:"esri-item-list__list-item-label",noMatchesMessage:"esri-item-list__no-matches-message",noItemsMessage:"esri-item-list__no-items-message",filterContainer:"esri-item-list__filter-container",
filterContainerSticky:"esri-item-list__filter-container--sticky",filterPlaceholder:"esri-item-list__filter-placeholder",filterInput:"esri-item-list__filter-input",filterPlaceholderText:"esri-item-list__filter-placeholder-text",searchIcon:"esri-icon-search",widget:"esri-widget",input:"esri-input"};d.ItemList=function(M){var y;const {id:k,identify:m,filterEnabled:q=!0,headingLevel:I=4,items:p,selectedItem:E,messages:x,filterText:A="",onFilterChange:r,renderIcon:G,onItemMouseLeave:H,onItemMouseEnter:w,
onItemSelect:e}=M;M=null!=(y=M.enableListScroll)?y:!0;return c.tsx("div",{key:k},q?u({filterText:A,messages:x,onFilterChange:r,id:k}):null,g({enableListScroll:M,identify:m,items:p,selectedItem:E,messages:x,filterText:A,headingLevel:I,renderIcon:G,onItemMouseLeave:H,onItemMouseEnter:w,onItemSelect:e}))};d.renderGroup=L;d.renderItem=F;d.renderLabel=function(M){const {match:y,text:k}=M;M=null;if(y){M=k.toLowerCase();var m=y.toLowerCase(),q=M.indexOf(m);-1===q?M=k:(M=k.substring(0,q),m=k.substr(q,y.length),
q=k.substring(q+y.length),M=c.tsx("span",null,M,c.tsx("strong",null,m),q))}else M=k;return c.tsx("span",{class:K.itemLabel},M)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/widgets/Spinner":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Spinner/SpinnerViewModel ./support/widgetUtils ../core/Logger ./support/jsxFactory".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p){F=function(E){function x(r,G){r=E.call(this,r,G)||this;r._animationDelay=500;r._animationPromise=null;r.location=null;r.view=null;r.viewModel=new m;r.visible=!1;return r}d._inheritsLoose(x,E);var A=x.prototype;A.initialize=function(){this.own([g.watch(this,"visible",r=>this._visibleChange(r))])};A.destroy=function(){this._animationPromise=null};A.show=function(r){const {location:G,promise:H}=r;G&&(this.viewModel.location=G);this.visible=!0;r=()=>this.hide();
H&&H.catch(()=>{}).then(r)};A.hide=function(){this.visible=!1};A.render=function(){var {visible:r}=this,{screenLocation:G}=this.viewModel;G=!!G;r={["esri-spinner--start"]:r&&G,["esri-spinner--finish"]:!r&&G};G=this._getPositionStyles();return p.tsx("div",{class:this.classes("esri-spinner",r),styles:G})};A._visibleChange=function(r){if(r)this.viewModel.screenLocationEnabled=!0;else{var G=B.after(this._animationDelay);this._animationPromise=G;G.catch(()=>{}).then(()=>{this._animationPromise===G&&(this.viewModel.screenLocationEnabled=
!1,this._animationPromise=null)})}};A._getPositionStyles=function(){const {screenLocation:r,view:G}=this.viewModel;if(!G||c.isNone(r))return{};const {padding:H}=G;return{left:`${r.x-H.left}px`,top:`${r.y-H.top}px`}};return x}(k);h.__decorate([u.aliasOf("viewModel.location")],F.prototype,"location",void 0);h.__decorate([u.aliasOf("viewModel.view")],F.prototype,"view",void 0);h.__decorate([M.property({type:m})],F.prototype,"viewModel",void 0);h.__decorate([u.aliasOf("viewModel.visible")],F.prototype,
"visible",void 0);return F=h.__decorate([y.subclass("esri.widgets.Spinner")],F)})},"esri/widgets/Spinner/SpinnerViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../support/AnchorElementViewModel".split(" "),function(d,h,c,B,g,u,F,L){B=function(K){function M(y){y=K.call(this,y)||this;y.visible=
!1;return y}d._inheritsLoose(M,K);return M}(L);h.__decorate([c.property()],B.prototype,"visible",void 0);return B=h.__decorate([F.subclass("esri.widgets.CompassViewModel")],B)})},"esri/widgets/support/AnchorElementViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Evented ../../core/Handles ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y){c=function(k){function m(I){var p=k.call(this,I)||this;p._anchorHandles=new B;p.location=null;p.screenLocation=null;p.screenLocationEnabled=!1;p.view=null;p._anchorHandles.add([u.watch(d._assertThisInitialized(p),["screenLocationEnabled","location","view.size","view.stationary"],()=>p._updateScreenPointAndHandle()),u.watch(d._assertThisInitialized(p),["view","view.ready"],()=>p._wireUpView())]);return p}d._inheritsLoose(m,k);var q=m.prototype;q.destroy=function(){this.view=
null;this._anchorHandles&&this._anchorHandles.destroy();this._viewpointHandle=this._anchorHandles=null};q._wireUpView=function(){this._anchorHandles.remove("view");this._viewpointHandle=null;if(this.get("view.ready")){this._setScreenLocation();var {view:I}=this;I=u.pausable(I,"3d"===I.type?"camera":"viewpoint",()=>this._viewpointChange());this._anchorHandles.add(I,"view");this._viewpointHandle=I;this._toggleWatchingViewpoint()}};q._viewpointChange=function(){this._setScreenLocation();this.emit("view-change")};
q._updateScreenPointAndHandle=function(){this._setScreenLocation();this._toggleWatchingViewpoint()};q._toggleWatchingViewpoint=function(){const {_viewpointHandle:I,location:p,screenLocationEnabled:E}=this;I&&(p&&E?I.resume():I.pause())};q._setScreenLocation=function(){const {location:I,view:p,screenLocationEnabled:E}=this;var x=this.get("view.ready");x=E&&x&&g.isSome(I)?p.toScreen(I):null;this._set("screenLocation",x)};return m}(c.EventedAccessor);h.__decorate([F.property()],c.prototype,"location",
void 0);h.__decorate([F.property({readOnly:!0})],c.prototype,"screenLocation",void 0);h.__decorate([F.property()],c.prototype,"screenLocationEnabled",void 0);h.__decorate([F.property()],c.prototype,"view",void 0);return c=h.__decorate([y.subclass("esri.widgets.support.AnchorElementViewModel")],c)})},"esri/widgets/Editor/deprecationUtils":function(){define(["exports","../../core/deprecate"],function(d,h){d.workflowDeprecation=function(c,B,g){h.deprecated(c,"`"+B+"` is deprecated, because it instantiates the deprecated class 'esri.widgets.Editor.CreateWorkflow'",
{replacement:g,version:"4.23",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-Editor-CreateFeaturesWorkflow.html"})};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/widgets/Editor/EditorViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/Error ../../core/Evented ../../core/HandleOwner ../../core/Logger ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../layers/GraphicsLayer ../../views/interactive/snapping/SnappingOptions ../Attachments/AttachmentsViewModel ./CreateFeaturesWorkflow ./CreateWorkflow ./deprecationUtils ./UpdateWorkflow ../FeatureForm/FeatureFormViewModel ../FeatureTemplates/FeatureTemplatesViewModel ../Sketch/SketchViewModel ../Spinner/SpinnerViewModel".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p,E,x,A,r,G,H,w,e,z){function S(l,b,f){O.error(new B(l,b,f))}function J(l,b){return l&&l.find(f=>f.layer===b)}const O=F.getLogger("esri.widgets.Editor.EditorViewModel"),t=["create","create-features","update"];g=function(l){function b(n){n=l.call(this,n)||this;n._sketchGraphicsLayer=new I({listMode:"hide",internal:!0});n.activeWorkflow=null;n.activityQueue=[];n.failures=[];n.attachmentsViewModel=new E({abilities:{editing:!0}});n.featureFormViewModel=new H;n.featureTemplatesViewModel=
new w;n.layerInfos=null;n.sketchViewModel=new e({layer:n._sketchGraphicsLayer});n.snappingOptions=new p;n.spinnerViewModel=new z;return n}d._inheritsLoose(b,l);var f=b.prototype;f.initialize=function(){this.handles.add([L.on(this,"activeWorkflow","cancel",()=>this.emit("workflow-cancel")),L.on(this,"activeWorkflow","commit",()=>this.emit("workflow-commit")),L.init(this,"view.map",n=>{n&&n.add(this._sketchGraphicsLayer)}),L.watch(this,"editableItems",()=>{const {activeWorkflow:n}=this;this.refreshCreationTemplates();
if(n){var {stepId:P}=n;"create"===n.type?"awaiting-feature-creation-info"!==P||this.canCreate||this._cancelWorkflow():"update"===n.type&&("awaiting-feature-to-update"===P&&!this.canUpdate||"awaiting-update-feature-candidate"===P&&!n.data.candidates.some(U=>{const T=this.editableItems.find(v=>v.layer===U.layer);return T&&-1<T.supports.indexOf("update")}))&&this._cancelWorkflow()}})])};f.destroy=function(){this._cancelWorkflow().then(()=>{var n;null!=(n=this.view)&&n.map&&this.view.map.remove(this._sketchGraphicsLayer);
this.view=null})};f.startCreateWorkflowAtFeatureTypeSelection=function(){var n=d._asyncToGenerator(function*(){r.workflowDeprecation(O,"startCreateWorkflowAtFeatureTypeSelection","startCreateFeaturesWorkflowAtFeatureTypeSelection");if(this.canCreate){yield this._cancelWorkflow();var P=this._createCreateWorkflow();yield P.start();this._set("activeWorkflow",P)}else S("editing:unsupported-workflow","Create workflow is unsupported or disabled.")});return function(){return n.apply(this,arguments)}}();
f.startCreateFeaturesWorkflowAtFeatureTypeSelection=function(){var n=d._asyncToGenerator(function*(){return this.startCreateFeaturesWorkflow()});return function(){return n.apply(this,arguments)}}();f.startCreateWorkflowAtFeatureCreation=function(){var n=d._asyncToGenerator(function*(P){r.workflowDeprecation(O,"startCreateWorkflowAtFeatureCreation","startCreateFeaturesWorkflowAtFeatureCreation");if(this.canCreate){yield this._cancelWorkflow();var U=this._createCreateWorkflow("awaiting-feature-to-create");
U.data.creationInfo=P;yield U.start();this._set("activeWorkflow",U)}else S("editing:unsupported-workflow","Create workflow is unsupported or disabled.")});return function(P){return n.apply(this,arguments)}}();f.startCreateFeaturesWorkflowAtFeatureCreation=function(){var n=d._asyncToGenerator(function*(P){return this.startCreateFeaturesWorkflow(P,"creating-features")});return function(P){return n.apply(this,arguments)}}();f.startCreateFeaturesWorkflow=function(){var n=d._asyncToGenerator(function*(P,
U="awaiting-feature-creation-info"){if(!this.canCreate)throw new B("editing:unsupported-workflow","Creating features is unsupported or disabled.");yield this._cancelWorkflow();P=this._createCreateFeaturesWorkflow(P,U);yield P.start();this._set("activeWorkflow",P)});return function(P){return n.apply(this,arguments)}}();f.startCreateWorkflowAtFeatureEdit=function(){var n=d._asyncToGenerator(function*(P){r.workflowDeprecation(O,"startCreateWorkflowAtFeatureEdit");if(this.canCreate){yield this._cancelWorkflow();
var U=this._createCreateWorkflow("editing-new-feature");U.data.edits.feature=P;yield U.start();this._set("activeWorkflow",U)}else S("editing:unsupported-workflow","Create workflow is unsupported or disabled.")});return function(P){return n.apply(this,arguments)}}();f.startUpdateWorkflowAtFeatureSelection=function(){var n=d._asyncToGenerator(function*(){if(this.canUpdate){yield this._cancelWorkflow();var P=this._createUpdateWorkflow();yield P.start();this._set("activeWorkflow",P)}else S("editing:unsupported-workflow",
"Update workflow is unsupported or disabled.")});return function(){return n.apply(this,arguments)}}();f.startUpdateWorkflowAtMultipleFeatureSelection=function(){var n=d._asyncToGenerator(function*(P){if(this.canUpdate){yield this._cancelWorkflow();var U=this._createUpdateWorkflow("awaiting-update-feature-candidate");U.data.candidates=P;yield U.start();this._set("activeWorkflow",U)}else S("editing:unsupported-workflow","Update workflow is unsupported or disabled.")});return function(P){return n.apply(this,
arguments)}}();f.startUpdateWorkflowAtFeatureEdit=function(){var n=d._asyncToGenerator(function*(P){if(this.canUpdate){yield this._cancelWorkflow();var U=this._createUpdateWorkflow("editing-existing-feature");U.data.edits.feature=P;yield U.start();this._set("activeWorkflow",U)}else S("editing:unsupported-workflow","Update workflow is unsupported or disabled.")});return function(P){return n.apply(this,arguments)}}();f.deleteFeatureFromWorkflow=function(){var n=d._asyncToGenerator(function*(){const {activeWorkflow:P}=
this;P&&"update"===P.type?(yield this._delete(P.data.edits.feature),yield P.reset()):S("editing:unsupported-workflow","Deleting requires an active update workflow.")});return function(){return n.apply(this,arguments)}}();f.cancelWorkflow=function(){var n=d._asyncToGenerator(function*(P){return this._cancelWorkflow({warn:!0,...P})});return function(P){return n.apply(this,arguments)}}();f.refreshCreationTemplates=function(){const n=[];for(const {layer:P,supports:U}of this.editableItems)P.loaded&&U.includes("create")&&
n.push(P);this.featureTemplatesViewModel.layers=n};f._cancelWorkflow=function(){var n=d._asyncToGenerator(function*(P){const U=this.activeWorkflow;U?P&&!1===P.force?(yield U.cancel(P),this._set("activeWorkflow",null)):(this.emit("workflow-cancel"),this._set("activeWorkflow",null),yield U.cancel(P)):P&&P.warn&&S("editing:no-active-workflow","There is no active workflow to cancel.")});return function(P){return n.apply(this,arguments)}}();f._createCreateFeaturesWorkflow=function(n,P){return x.create(this,
n,P,(U,T)=>this._applyEdits(U,T))};f._createCreateWorkflow=function(n){return A.create(this,n,(P,U)=>this._applyEdits(P,U))};f._createUpdateWorkflow=function(n){return G.create(this,n,(P,U)=>this._applyEdits(P,U))};f._delete=function(){var n=d._asyncToGenerator(function*(P){const U=P.sourceLayer;"applyEdits"in U&&(yield this._applyEdits(U,{deleteFeatures:[P]}))});return function(P){return n.apply(this,arguments)}}();f._applyEdits=function(){var n=d._asyncToGenerator(function*(P,U){var T=this;yield this._queueOperation(d._asyncToGenerator(function*(){const v=
yield T.view.whenLayerView(P),N=yield P.applyEdits(U);yield L.whenFalseOnce(v,"updating");return N}))});return function(P,U){return n.apply(this,arguments)}}();f._queueOperation=function(n){this.activityQueue.push(n);this.notifyChange("syncing");const P=(U,T)=>{U=T.indexOf(U);-1<U&&T.splice(U,1)};return n().then(({addFeatureResults:U,deleteFeatureResults:T,updateFeatureResults:v})=>{if(U=U.find(N=>!!N.error)||v.find(N=>!!N.error)||T.find(N=>!!N.error))throw U.error;}).catch(U=>{S("editing:operation-error",
"An error occurred.",{error:U});const T={error:U,retry:()=>{P(T,this.failures);return this._queueOperation(n)},cancel:()=>{P(T,this.failures)}};this._set("failures",[...this.failures,T])}).then(()=>{P(n,this.activityQueue);this.notifyChange("syncing")})};d._createClass(b,[{key:"allowedWorkflows",get:function(){return this._get("allowedWorkflows")},set:function(n){n&&0!==n.length||(n=[...t]);this._set("allowedWorkflows",n)}},{key:"canCreate",get:function(){return this.editableItems.some(n=>n.supports.includes("create"))}},
{key:"canUpdate",get:function(){return this.editableItems.some(n=>n.supports.includes("update"))}},{key:"editableItems",get:function(){var n,P,U;const T=null==(n=this.view)?void 0:n.allLayerViews;if(!T)return new c;const v=new Set(null==(P=this.view)?void 0:null==(U=P.map)?void 0:U.editableLayers);return T.filter(N=>v.has(N.layer)).map(N=>{const {layer:R,suspended:W}=N,{data:ea,operations:da}=R.capabilities;N=J(this.layerInfos,R);const qa="supportsAttachment"in ea&&ea.supportsAttachment&&(!N||!1!==
N.allowAttachments);if(W)return{hasAttachments:qa,layer:R,supports:[]};const va=[];da.supportsAdd&&(this.allowedWorkflows.includes("create")||this.allowedWorkflows.includes("create-features"))&&(!N||!1!==N.enabled&&!1!==N.addEnabled)&&va.push("create");da.supportsUpdate&&this.allowedWorkflows.includes("update")&&(!N||!1!==N.enabled&&!1!==N.updateEnabled)&&va.push("update");!1!==(N&&N.deleteEnabled)&&da.supportsDelete&&va.push("delete");return{hasAttachments:qa,layer:R,supports:va}}).reverse()}},{key:"state",
get:function(){if(!this.get("view.ready")||0===this.editableItems.length)return"disabled";var n=this.attachmentsViewModel.mode;if("add"===n)return"adding-attachment";if("edit"===n)return"editing-attachment";({activeWorkflow:n}=this);return n?n.stepId:"ready"}},{key:"syncing",get:function(){return 0<this.activityQueue.length}},{key:"view",set:function(n){this.sketchViewModel.view=n;this.spinnerViewModel.view=n;this._set("view",n)}}]);return b}(u.HandleOwnerMixin(g.EventedAccessor));h.__decorate([m.property({readOnly:!0})],
g.prototype,"activeWorkflow",void 0);h.__decorate([m.property({readOnly:!0})],g.prototype,"activityQueue",void 0);h.__decorate([m.property({value:[...t]})],g.prototype,"allowedWorkflows",null);h.__decorate([m.property({readOnly:!0})],g.prototype,"canCreate",null);h.__decorate([m.property({readOnly:!0})],g.prototype,"canUpdate",null);h.__decorate([m.property({readOnly:!0})],g.prototype,"editableItems",null);h.__decorate([m.property({readOnly:!0})],g.prototype,"failures",void 0);h.__decorate([m.property()],
g.prototype,"attachmentsViewModel",void 0);h.__decorate([m.property()],g.prototype,"featureFormViewModel",void 0);h.__decorate([m.property()],g.prototype,"featureTemplatesViewModel",void 0);h.__decorate([m.property()],g.prototype,"layerInfos",void 0);h.__decorate([m.property()],g.prototype,"sketchViewModel",void 0);h.__decorate([K.aliasOf("sketchViewModel.snappingOptions")],g.prototype,"snappingOptions",void 0);h.__decorate([m.property()],g.prototype,"spinnerViewModel",void 0);h.__decorate([m.property()],
g.prototype,"state",null);h.__decorate([m.property({readOnly:!0})],g.prototype,"syncing",null);h.__decorate([m.property()],g.prototype,"view",null);return g=h.__decorate([q.subclass("esri.widgets.Editor.EditorViewModel")],g)})},"esri/layers/GraphicsLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../core/support/OwningCollection ./Layer ./mixins/BlendLayer ./mixins/ScaleRangeLayer ../support/GraphicsCollection ../symbols/support/ElevationInfo".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m){B=function(q){function I(E){E=q.call(this,E)||this;E.elevationInfo=null;E.graphics=new k.GraphicsCollection;E.screenSizePerspectiveEnabled=!0;E.type="graphics";E.internal=!1;return E}d._inheritsLoose(I,q);var p=I.prototype;p.destroy=function(){this.removeAll();this.graphics.destroy()};p.add=function(E){this.graphics.add(E);return this};p.addMany=function(E){this.graphics.addMany(E);return this};p.removeAll=function(){this.graphics.removeAll();return this};p.remove=
function(E){this.graphics.remove(E)};p.removeMany=function(E){this.graphics.removeMany(E)};p.on=function(E,x){return q.prototype.on.call(this,E,x)};p.graphicChanged=function(E){this.emit("graphic-update",E)};return I}(M.BlendLayer(y.ScaleRangeLayer(K)));h.__decorate([c.property({type:m})],B.prototype,"elevationInfo",void 0);h.__decorate([c.property(L.owningCollectionProperty(k.GraphicsCollection,"graphics"))],B.prototype,"graphics",void 0);h.__decorate([c.property({type:["show","hide"]})],B.prototype,
"listMode",void 0);h.__decorate([c.property()],B.prototype,"screenSizePerspectiveEnabled",void 0);h.__decorate([c.property({readOnly:!0})],B.prototype,"type",void 0);h.__decorate([c.property({constructOnly:!0})],B.prototype,"internal",void 0);return B=h.__decorate([F.subclass("esri.layers.GraphicsLayer")],B)})},"esri/widgets/Editor/CreateFeaturesWorkflow":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/arrayUtils ../../core/handleUtils ../../core/maybe ../../core/reactiveUtils ../../core/Logger ../../core/accessorSupport/ensureType ../../core/has ../../core/accessorSupport/set ../../core/accessorSupport/decorators/subclass ../../views/interactive/snapping/FeatureSnappingLayerSource ./CreateFeaturesWorkflowData ./Workflow ./workflowUtils".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I){var p;F=p=function(E){function x(r){r=E.call(this,r)||this;r.type="create-features";r.createFeatureState="create-new";r.featureFormHandle=null;r.visualVariableAttributes={rotation:null,size:null};r.highlightHandles=new Map;r.preventDefaultActionOnCancel=!1;return r}d._inheritsLoose(x,E);var A=x.prototype;A.updatePendingFeature=function(){var r=d._asyncToGenerator(function*(G){this.preventDefaultActionOnCancel=!0;this.data.viewModel.sketchViewModel.cancel();
c.remove(this.lastActiveGraphics,G);return this._startUpdating(G)});return function(G){return r.apply(this,arguments)}}();x.create=function(r,G,H,w){r=new p({data:new m.CreateFeaturesWorkflowData({creationInfo:g.unwrap(G),viewModel:r}),onCommit:function(){var e=d._asyncToGenerator(function*(z){yield w(z.creationInfo.layer,{addFeatures:z.viewModel.sketchViewModel.layer.graphics.toArray()})});return function(z){return e.apply(this,arguments)}}()});r._set("steps",this._createWorkflowSteps(r,H));return r};
A._fadeExistingFeatures=function(r){if("effect"in r){const H=r.effect;r.effect="saturate(0.6) opacity(0.8)";return B.makeHandle(()=>r.effect=H)}const G=r.opacity;r.opacity=.7;return B.makeHandle(()=>r.opacity=G)};A._highlight=function(r){const G=this.data.viewModel.view;"3d"===G.type&&this.highlightHandles.set(r,G.highlight(r))};A._removeHighlight=function(r){g.removeMaybe(this.highlightHandles.get(r));this.highlightHandles.delete(r)};A._startCreating=function(){var r=d._asyncToGenerator(function*(){this.createFeatureState=
"create-new";return I.startCreatingNewFeature(this.data.viewModel.sketchViewModel,this.data.creationInfo)});return function(){return r.apply(this,arguments)}}();A._startUpdating=function(){var r=d._asyncToGenerator(function*(G){const H=this.data.viewModel,w=H.sketchViewModel,e=this.data.creationInfo.layer,z=I.findLayerInfo(H.layerInfos,e);H.featureFormViewModel.set({feature:G,formTemplate:null==z?void 0:z.formTemplate});g.removeMaybe(this.featureFormHandle);this.featureFormHandle=H.featureFormViewModel.on("value-change",
d._asyncToGenerator(function*(){G.attributes=H.featureFormViewModel.getValues();yield I.updateGraphicSymbolWhenRequired(G)}));this._removeHighlight(G);this.createFeatureState="update-pending";this.visualVariableAttributes=I.getVisualVariableAttributes(G);return I.startUpdatingFeature(w,G,e,this.visualVariableAttributes)});return function(G){return r.apply(this,arguments)}}();x._createWorkflowSteps=function(r,G="awaiting-feature-creation-info"){const {data:H,handles:w}=r;let e=null,z=!0;G=I.createWorkflowSteps(["awaiting-feature-creation-info",
"creating-features"],G,{"awaiting-feature-creation-info":()=>({id:"awaiting-feature-creation-info",setUp(){var S=this;return d._asyncToGenerator(function*(){H.creationInfo=null;w.add(H.viewModel.featureTemplatesViewModel.on("select",({item:J})=>{H.creationInfo={layer:J.layer,template:J.template};H.viewModel.activeWorkflow.next()}),S.id)})()},tearDown(){var S=this;return d._asyncToGenerator(function*(){w.remove(S.id)})()}}),"creating-features":()=>({id:"creating-features",setUp(){var S=this;return d._asyncToGenerator(function*(){const J=
H.viewModel.view,O=H.viewModel.sketchViewModel;z=O.updateOnGraphicClick;O.updateOnGraphicClick=!1;r.lastActiveGraphics=[];r.featureFormHandle=g.removeMaybe(r.featureFormHandle);r.visualVariableAttributes={rotation:null,size:null};const t="2d"===J.type?r._fadeExistingFeatures(H.creationInfo.layer):null,l=O.on("create",function(){var T=d._asyncToGenerator(function*(v){if("cancel"===v.state){if(r.preventDefaultActionOnCancel){r.preventDefaultActionOnCancel=!1;return}if(1>r.lastActiveGraphics.length)return r._startCreating();
v=r.lastActiveGraphics.pop();return r._startUpdating(v)}if("complete"===v.state)return r._startUpdating(v.graphic)});return function(v){return T.apply(this,arguments)}}()),b=O.on("update",function(){var T=d._asyncToGenerator(function*(v){var N=v.graphics[0];if("complete"===v.state){N!==e&&(r.lastActiveGraphics.push(N),r._highlight(N));e=null;if(v.aborted&&r.preventDefaultActionOnCancel){r.preventDefaultActionOnCancel=!1;return}return r._startCreating()}"start"===v.state&&r._removeHighlight(N);yield I.visualVariableInteractiveUpdate(J,
N,v,r.visualVariableAttributes);v=N.attributes;g.isSome(r.visualVariableAttributes.rotation)&&({field:N}=r.visualVariableAttributes.rotation,H.viewModel.featureFormViewModel.setValue(N,v[N]));g.isSome(r.visualVariableAttributes.size)&&({field:N}=r.visualVariableAttributes.size,H.viewModel.featureFormViewModel.setValue(N,v[N]))});return function(v){return T.apply(this,arguments)}}()),f=O.on("delete",function(){var T=d._asyncToGenerator(function*(v){v=v.graphics[0];c.remove(r.lastActiveGraphics,v);
e=v});return function(v){return T.apply(this,arguments)}}());let n=null;const P=u.watch(()=>{var T;const v=O.snappingOptions.featureSources.find(N=>N.layer===H.creationInfo.layer);return{hasFeatureLayerSource:!!v,enabled:null!=(T=null==v?void 0:v.enabled)?T:!1}},({hasFeatureLayerSource:T,enabled:v})=>{const N=O.snappingOptions.featureSources;T?(g.isNone(n)&&(n=new k({layer:O.layer,enabled:v}),N.add(n)),n.enabled=v):(g.isSome(n)&&N.remove(n),n=g.destroyMaybe(n))},u.syncAndInitial),U=J.on("immediate-click",
function(){var T=d._asyncToGenerator(function*(v){v=yield J.hitTest(v,{include:O.layer});0<v.results.length&&(v=v.results[0].graphic,"transform"!==O.activeTool&&"reshape"!==O.activeTool||O.updateGraphics.getItemAt(0)===v||(yield r.updatePendingFeature(v)))});return function(v){return T.apply(this,arguments)}}());yield r._startCreating();w.add({remove:()=>{g.removeMaybe(r.featureFormHandle);l.remove();b.remove();f.remove();P.remove();g.isSome(n)&&O.snappingOptions.featureSources.remove(n);n=g.destroyMaybe(n);
O.cancel();U.remove();g.removeMaybe(t)}},S.id)})()},tearDown(S){var J=this;return d._asyncToGenerator(function*(){S.cancelled&&H.viewModel.sketchViewModel.layer.removeAll();w.remove(J.id);H.viewModel.sketchViewModel.updateOnGraphicClick=z})()}})});return I.avoidFeatureTemplateSelectionWithOnlyOneItem(H,G)};d._createClass(x,[{key:"numPendingFeatures",get:function(){return this.data.viewModel.sketchViewModel.layer.graphics.length}},{key:"pendingFeatures",get:function(){return this.data.viewModel.sketchViewModel.layer.graphics}}]);
return x}(q);return F=p=h.__decorate([y.subclass("esri.widgets.Editor.CreateFeaturesWorkflow")],F)})},"esri/widgets/Editor/CreateFeaturesWorkflowData":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(d,h,c,B,g,u,F,L,K){d.CreateFeaturesWorkflowData=function(M){function y(k){k=
M.call(this,k)||this;k.creationInfo=null;k.viewModel=null;return k}h._inheritsLoose(y,M);return y}(B);c.__decorate([g.property()],d.CreateFeaturesWorkflowData.prototype,"creationInfo",void 0);c.__decorate([g.property()],d.CreateFeaturesWorkflowData.prototype,"viewModel",void 0);d.CreateFeaturesWorkflowData=c.__decorate([K.subclass("esri.widgets.Editor.CreateFeaturesWorkflowData")],d.CreateFeaturesWorkflowData);Object.defineProperty(d,"__esModule",{value:!0})})},"esri/widgets/Editor/Workflow":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/Evented ../../core/HandleOwner ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,h,c,B,g,u,F,L,K,M){B=function(y){function k(q){q=y.call(this,q)||this;q._indexHistory=[];q._lastStepIndex=-1;q._stepIndex=-1;q._handleKeys={afterCommit:"after-commit",beforeCommit:"before-commit"};q.data=void 0;q.started=!1;q.steps=[];q.type=null;return q}d._inheritsLoose(k,y);var m=k.prototype;m.cancel=function(){var q=d._asyncToGenerator(function*(I={force:!0}){return!1!==I.force?this._cancel():new Promise((p,E)=>{this.emit("cancel-request",{controller:{allow:()=>{this._cancel().then(p)},
deny:()=>E(new c("workflow:cancel-denied","Request to cancel workflow was denied."))}})})});return function(){return q.apply(this,arguments)}}();m.commit=function(){var q=d._asyncToGenerator(function*(){this.handles.remove(this._handleKeys.beforeCommit);yield this.onCommit(this.data);this.handles.remove(this._handleKeys.afterCommit);this.emit("commit");this.started&&(yield this.reset())});return function(){return q.apply(this,arguments)}}();m.go=function(){var q=d._asyncToGenerator(function*(I){var {steps:p}=
this;p=p.findIndex(E=>E.id===I);this._indexHistory.push(this._stepIndex);yield this._go(p)});return function(I){return q.apply(this,arguments)}}();m.next=function(){var q=d._asyncToGenerator(function*(){this._indexHistory.push(this._stepIndex);yield this._go(this._stepIndex+1)});return function(){return q.apply(this,arguments)}}();m.previous=function(){var q=d._asyncToGenerator(function*(I={cancelCurrentStep:!1}){yield this._go(this._indexHistory.pop(),I.cancelCurrentStep)});return function(){return q.apply(this,
arguments)}}();m.reset=function(){var q=d._asyncToGenerator(function*(){yield this._cancel(!1);yield this.start()});return function(){return q.apply(this,arguments)}}();m.start=function(){var q=d._asyncToGenerator(function*(){this._set("started",!0);yield this._go(-1===this._stepIndex?0:this._stepIndex)});return function(){return q.apply(this,arguments)}}();m._cancel=function(){var q=d._asyncToGenerator(function*(I=!0){this.started&&(this._set("started",!1),yield this.steps[this._stepIndex].tearDown({cancelled:!0}),
this.data&&this.data.viewModel.sketchViewModel.layer.removeAll());this.handles.remove([this._handleKeys.afterCommit,this._handleKeys.beforeCommit]);this._resetIndexing(I);I&&this.emit("cancel")});return function(){return q.apply(this,arguments)}}();m._go=function(){var q=d._asyncToGenerator(function*(I=-1,p=!1){-1>=I||I>=this.steps.length||(this.started&&(-1<this._lastStepIndex&&(yield this.steps[this._lastStepIndex].tearDown({cancelled:p})),yield this.steps[I].setUp(),this._lastStepIndex=I),this._stepIndex=
I,this._notifyStepProps())});return function(){return q.apply(this,arguments)}}();m._resetIndexing=function(q=!0){this._lastStepIndex=this._stepIndex=-1;this._indexHistory.length=0;q&&this._notifyStepProps()};m._notifyStepProps=function(){this.notifyChange("stepId");this.notifyChange("hasPreviousStep");this.notifyChange("hasNextStep")};d._createClass(k,[{key:"hasNextStep",get:function(){const {steps:q}=this;return!!(q&&this._stepIndex<q.filter(I=>!I.parent).length-1)}},{key:"hasPreviousStep",get:function(){return 0<
this._stepIndex}},{key:"stepId",get:function(){var {steps:q}=this;return(q=q&&q[this._stepIndex])&&q.id}}]);return k}(g.HandleOwnerMixin(B.EventedAccessor));h.__decorate([u.property()],B.prototype,"data",void 0);h.__decorate([u.property()],B.prototype,"hasNextStep",null);h.__decorate([u.property()],B.prototype,"hasPreviousStep",null);h.__decorate([u.property()],B.prototype,"onCommit",void 0);h.__decorate([u.property()],B.prototype,"started",void 0);h.__decorate([u.property({readOnly:!0})],B.prototype,
"stepId",null);h.__decorate([u.property()],B.prototype,"steps",void 0);h.__decorate([u.property({readOnly:!0})],B.prototype,"type",void 0);h.__decorate([u.property()],B.prototype,"commit",null);return B=h.__decorate([M.subclass("esri.widgets.Editor.Workflow")],B)})},"esri/widgets/Editor/workflowUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Graphic ../../core/has ../../core/maybe ../../core/promiseUtils ../../core/screenUtils ../../core/watchUtils ../../core/accessorSupport/diffUtils ../../renderers/support/clickToleranceUtils ../../renderers/support/lengthUtils ../../renderers/visualVariables/support/sizeVariableUtils ../../renderers/visualVariables/support/visualVariableUtils ../../symbols/support/symbolConversion ../../symbols/support/symbolUtils ../../views/3d/layers/graphics/GraphicState ../../views/support/drapedUtils ../../views/support/hitTestSelectUtils".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p,E,x,A){function r(ta){const fa=ta.sourceLayer;var la;if(!(la="feature"!==fa.type)){a:switch(fa.renderer.type){case "class-breaks":case "simple":case "unique-value":case "dot-density":case "dictionary":la=!0;break a;default:la=!1}la=!la}if(la)return{rotation:null,size:null};let ma=la=null;var aa=fa.renderer.getVisualVariablesForType("rotation").filter(ba=>(!ba.axis||"heading"===ba.axis)&&ba.field&&!ba.valueExpression&&u.isSome(q.getRotationAngle(ba,ta)));1===
aa.length&&(la=G(aa[0],fa));aa=fa.renderer.getVisualVariablesForType("size").filter(ba=>ba.field&&!ba.useSymbolValue&&!ba.valueExpression&&m.getTransformationType(ba)===m.TransformationType.RealWorldSize&&u.isSome(q.getSize(ba,ta)));1===aa.length&&(ma=z(aa[0],fa));return{rotation:la,size:ma}}function G(ta,fa){const la="heading"===(ta.axis||"heading")&&"arithmetic"===ta.rotationType?-1:1,ma=ta.field,aa=(ta=fa.fields&&fa.fields.filter(ka=>ka.name===ma))&&1===ta.length?ta[0].type:"double";var ba=0,ha=
0;return{field:ma,getDefault:()=>Promise.resolve(0),getValue:ka=>{ha=ba-la*ka;return S((ha+360)%360,aa)},initValue:ka=>{ba=null!=ka?ka:ha;ha=0},isUpdatingInteractively:!1}}function H(ta,fa){switch(fa){case "width":return ta[0];case "depth":return ta[1];case "height":return ta[2];default:return ta[2]||ta[1]||ta[0]}}function w(ta,fa,la){return e.apply(this,arguments)}function e(){e=c._asyncToGenerator(function*(ta,fa,la){if(u.isNone(fa))return 0;({symbol:fa}=I.to3D(fa));if(u.isNone(fa)||"web-style"===
fa.type||"cim"===fa.type)return 0;fa=fa.symbolLayers.getItemAt(0);if(!fa)return 0;switch(fa.type){case "icon":return{computeIconLayerResourceSize:la}=yield new Promise((ma,aa)=>d(["../../symbols/support/symbolLayerUtils"],ma,aa)),fa.size||Math.min(Ba.icon,(yield la(fa,Ba.icon))[0])||Ba.icon;case "text":return fa.size||Ba.text;case "line":return fa.size||Ba.line;case "object":{const {computeObjectLayerResourceSize:ma}=yield new Promise((aa,ba)=>d(["../../symbols/support/symbolLayerUtils"],aa,ba));
ta=yield ma(fa,ta.scale/Ba.viewScaleSizeFactor);return H(ta,la)}case "path":return(null!=fa.width?fa.width:fa.height)||ta.scale/Ba.viewScaleSizeFactor;case "extrude":return fa.size||ta.scale/Ba.viewScaleSizeFactor;case "fill":case "water":return 0;default:return 0}});return e.apply(this,arguments)}function z(ta,fa){const la=ta.field,ma=ta.axis,aa=(fa=fa.fields&&fa.fields.filter(oa=>oa.name===la))&&1===fa.length?fa[0].type:"double";var ba=0,ha=0;const ka=k.meterIn[ta.valueUnit];let pa;pa="area"===
ta.valueRepresentation?oa=>(oa*ka/2)**2*Math.PI:"radius"===ta.valueRepresentation||"distance"===ta.valueRepresentation?oa=>oa*ka/2:oa=>oa*ka;return{field:la,getDefault:function(){var oa=c._asyncToGenerator(function*(ra,Aa){return S(pa(yield w(Aa,ra,ma)),aa)});return function(ra,Aa){return oa.apply(this,arguments)}}(),getValue:(oa,ra)=>{ba||(ba=ra.pixelSizeAt(ra.center));ha=ba*oa;return S(ha,aa)},initValue:oa=>{ba=null!=oa?oa:ha;ha=0},isUpdatingInteractively:!1}}function S(ta,fa){switch(fa){case "small-integer":case "integer":case "long":return Math.round(ta);
case "double":case "single":return ta;default:return 0}}function J(ta){return O.apply(this,arguments)}function O(){O=c._asyncToGenerator(function*(ta){const fa=yield p.getDisplayedSymbol(ta,{useSourceLayer:!0,ignoreGraphicSymbol:!0}),la=M.diff(ta.symbol,fa);u.isSome(la)&&(ta.symbol=fa)});return O.apply(this,arguments)}function t(ta){if("mesh"===ta||"multipatch"===ta)throw Error("Mesh and Multipatch not supported");return ta}function l(){l=c._asyncToGenerator(function*(ta,fa,la){yield b(ta,fa);const ma=
ta.on("create",function(){var aa=c._asyncToGenerator(function*(ba){if("cancel"===ba.state)return b(ta,fa);"complete"===ba.state&&(ba=ba.graphic,ba.sourceLayer||(ba.sourceLayer=fa.layer),ba.attributes||(ba.attributes={...fa.template.prototype.attributes}),yield J(ba),la(ba))});return function(ba){return aa.apply(this,arguments)}}());return{remove:()=>{ma.remove();ta.cancel()}}});return l.apply(this,arguments)}function b(ta,fa){return f.apply(this,arguments)}function f(){f=c._asyncToGenerator(function*(ta,
fa){const la=fa.layer;fa={...fa.template.prototype.attributes};yield n(ta,la,fa);fa={graphicProperties:{attributes:fa,sourceLayer:la},hasZ:la.capabilities.data.supportsZ};ta.layer.elevationInfo=la.elevationInfo;return ta.create(t(la.geometryType),fa)});return f.apply(this,arguments)}function n(ta,fa,la){return P.apply(this,arguments)}function P(){P=c._asyncToGenerator(function*(ta,fa,la){var ma;fa=new B({sourceLayer:fa,attributes:la});const {rotation:aa,size:ba}=r(fa);let ha=yield p.getDisplayedSymbol(fa,
{useSourceLayer:!0}),ka=!1;for(const pa of[ba,aa])u.isNone(pa)||null!=la[pa.field]||(la[pa.field]=yield pa.getDefault(ha,ta.view),ka=!0);ka&&(ha=yield p.getDisplayedSymbol(fa,{useSourceLayer:!0}));switch(null==(ma=ha)?void 0:ma.type){case "simple-fill":case "polygon-3d":ta.polygonSymbol=ha;break;case "simple-line":case "line-3d":ta.polylineSymbol=ha;break;case "simple-marker":case "picture-marker":case "point-3d":ta.pointSymbol=ha}});return P.apply(this,arguments)}function U(ta,fa,la,ma){return T.apply(this,
arguments)}function T(){T=c._asyncToGenerator(function*(ta,fa,la,ma){if(0===ta.length)return[];const {updatable:aa,graphicsByLayer:ba}=yield la.async(c._asyncToGenerator(function*(){var {results:ha}=yield F.whenOrAbort(A.hitTestSelectSameDistance(fa,la),ma);const ka=new Map,pa=({layer:oa})=>{var ra=ka.get(oa);return ra?ra:(ra=[],ka.set(oa,ra),ra)};ha.forEach(({graphic:oa})=>pa(oa).push(oa));ha=ta.filter(({supports:oa,layer:ra})=>-1<oa.indexOf("update")&&ka.has(ra));0!==ha.length&&la.stopPropagation();
return{updatable:ha,graphicsByLayer:ka}}));return F.whenOrAbort(F.eachAlways(aa.map(function(){var ha=c._asyncToGenerator(function*({layer:ka}){const {objectIdField:pa,displayField:oa}=ka,ra=[pa];ka.fieldsIndex.has(oa)&&ra.push(oa);const Aa=ba.get(ka);if(Aa.some(Fa=>ra.some(ya=>!(ya in Fa.attributes)))){const Fa=ka.createQuery();Fa.outFields=ra;Fa.returnGeometry=!1;Fa.objectIds=Aa.map(ya=>ya.getObjectId());return ka.queryFeatures(Fa,{signal:ma}).then(({features:ya})=>ya)}return Aa});return function(ka){return ha.apply(this,
arguments)}}())),ma)});return T.apply(this,arguments)}function v(ta,fa,la,ma){return N.apply(this,arguments)}function N(){N=c._asyncToGenerator(function*(ta,fa,la,ma){if(0===ta.length)return[];let aa=null;const ba=yield la.async(c._asyncToGenerator(function*(){var {results:ha}=yield F.whenOrAbort(fa.hitTest(la),ma);if(0===ha.length)return[];const ka=new Set;aa=ha;aa.forEach(({graphic:pa})=>ka.add(pa.layer));ha=ta.items.filter(({layer:pa,supports:oa})=>-1<oa.indexOf("update")&&ka.has(pa));0<ha.length&&
la.stopPropagation();return ha}));return F.whenOrAbort(F.eachAlways(ba.map(({layer:ha})=>{const {objectIdField:ka,displayField:pa}=ha;var oa=[ka];ha.fieldsIndex.has(pa)&&oa.push(pa);const ra=ha.createQuery();ra.outFields=oa;ra.returnGeometry=!1;oa="renderer"in ha?y.calculateTolerance({renderer:ha.renderer,event:la}):0;ra.geometry=x.createQueryGeometry(la.mapPoint,oa,fa);ra.outSpatialReference=fa.spatialReference;return ha.queryFeatures(ra,{signal:ma}).then(({features:Aa})=>{aa.forEach(({graphic:Fa})=>
{Fa.layer===ha&&(Aa.find(ya=>ya.attributes[ka]===Fa.attributes[ha.objectIdField])||Aa.push(Fa))});return Aa})})),ma)});return N.apply(this,arguments)}function R(){R=c._asyncToGenerator(function*(ta,fa,la,ma){switch(fa.type){case "3d":return U(ta,fa,la,ma);case "2d":return v(ta,fa,la,ma)}});return R.apply(this,arguments)}function W(){W=c._asyncToGenerator(function*(ta,fa,la){const ma=ta.layer,aa=ma.createQuery();aa.objectIds=[ta.getAttribute(ma.objectIdField)];aa.outFields=["*"];aa.outSpatialReference=
fa.spatialReference;aa.returnM=ma.capabilities.data.supportsM;aa.returnZ=ma.capabilities.data.supportsZ;return(yield ma.queryFeatures(aa,{signal:la})).features[0]});return W.apply(this,arguments)}function ea(ta,fa,la,ma){return da.apply(this,arguments)}function da(){da=c._asyncToGenerator(function*(ta,fa,la,ma){let aa=!1;const {rotation:ba,size:ha}=ma;[ba,ha].forEach(function(){var ka=c._asyncToGenerator(function*(pa){if(!u.isNone(pa)){var oa=fa.attributes[pa.field];u.isSome(oa)?pa.initValue(oa):
(oa=yield pa.getDefault(fa.symbol,ta.view),pa.initValue(oa),fa.setAttribute(pa.field,oa),aa=!0)}});return function(pa){return ka.apply(this,arguments)}}());aa&&(yield J(fa));ma={multipleSelectionEnabled:!1};"point"===la.geometryType&&(ma.enableRotation=u.isSome(ba),ma.enableScaling=u.isSome(ha));ta.layer.elevationInfo=la.elevationInfo;return ta.update(fa,ma)});return da.apply(this,arguments)}function qa(ta,fa,la,ma){return va.apply(this,arguments)}function va(){va=c._asyncToGenerator(function*(ta,
fa,la,ma){var aa;if(u.isSome(fa.geometry)&&"point"===(null==(aa=fa.geometry)?void 0:aa.type)){aa=ma.rotation;var ba=la.toolEventInfo;ba=!ba||"rotate-start"!==ba.type&&"rotate"!==ba.type&&"rotate-stop"!==ba.type?null:ba;if(u.isSome(aa)&&u.isSome(ba))if("rotate-stop"===ba.type)aa.isUpdatingInteractively=!1,aa.initValue();else{aa.isUpdatingInteractively=!0;const {field:ha,getValue:ka}=aa;fa.attributes[ha]=ka(ba.angle,ta)}ma=ma.size;la=la.toolEventInfo;la=!la||"scale-start"!==la.type&&"scale"!==la.type&&
"scale-stop"!==la.type?null:la;if(u.isSome(ma)&&u.isSome(la))if("scale-stop"===la.type)ma.isUpdatingInteractively=!1,ma.initValue();else{ma.isUpdatingInteractively=!0;const {field:ha,getValue:ka}=ma;fa.attributes[ha]=ka(la.xScale,ta)}yield J(fa)}});return va.apply(this,arguments)}function Ca(){Ca=c._asyncToGenerator(function*(ta,fa,la,ma,aa){const ba=ta.clone();yield J(ba);ma.map.add(la.layer);la.layer.add(ba);const ha=ta.sourceLayer,ka=ma.whenLayerView(ha),pa=()=>{const Ma=ta.attributes[ta.layer.objectIdField];
ka.then(Na=>Na.setVisibility(Ma,!1),()=>{});return{remove(){ka.then(Na=>Na.setVisibility(Ma,!0),()=>{})}}};let oa=null,ra=null;if("3d"===ma.type){const Ma=new E.GraphicState({graphic:ba});oa=ma.trackGraphicState(Ma);K.init(Ma,"displaying",Na=>{ra=Na?pa():u.removeMaybe(ra)})}else ra=pa();yield ea(la,ba,ha,fa);let Aa=null;ka.then(Ma=>Aa=Ma,()=>{});const Fa=fa.size,ya=fa.rotation,Da=ta.watch("attributes",function(){var Ma=c._asyncToGenerator(function*(Na){let qb=!1;for(const hb in Na){const Va=Na[hb];
Va!==ba.attributes[hb]&&(ba.setAttribute(hb,Va),u.isSome(Fa)&&!Fa.isUpdatingInteractively&&Fa.field===hb&&Fa.initValue(Va),u.isSome(ya)&&!ya.isUpdatingInteractively&&ya.field===hb&&ya.initValue(Va),u.isNone(Aa)||Aa.requiredFields.includes(hb))&&(qb=!0)}qb&&(yield J(ba))});return function(Na){return Ma.apply(this,arguments)}}()),za=la.on("update",function(){var Ma=c._asyncToGenerator(function*(Na){const qb=Na.graphics[0];if("complete"===Na.state)return ea(la,qb,ha,fa);yield qa(ma,qb,Na,fa);aa(qb.clone())});
return function(Na){return Ma.apply(this,arguments)}}()),Ja=la.on(["undo","redo"],function(){var Ma=c._asyncToGenerator(function*(Na){aa(Na.graphics[0].clone())});return function(Na){return Ma.apply(this,arguments)}}()),Ka=()=>{};return{interactive:{remove(){Ja.remove();za.remove();la.cancel();Da&&Da.remove();this.remove=Ka}},visual:{remove(){u.removeMaybe(ra);ma.whenLayerView(ha).then(Ma=>K.whenFalseOnce(Ma,"updating")).then(()=>{u.removeMaybe(oa);la.layer.remove(ba);this.remove=Ka})}}}});return Ca.apply(this,
arguments)}const Ba={icon:L.px2pt(24),text:L.px2pt(12),line:L.px2pt(1),viewScaleSizeFactor:100};h.avoidFeatureTemplateSelectionWithOnlyOneItem=function(ta,fa){ta.viewModel.refreshCreationTemplates();if("awaiting-feature-creation-info"===fa[0].id){var la=ta.viewModel.featureTemplatesViewModel.items;1!==la.length?la=null:(la=la[0],la="items"in la?1===la.items.length?la.items[0]:null:la);u.isSome(la)&&(ta.creationInfo={layer:la.layer,template:la.template},fa.shift())}return fa};h.createWorkflowSteps=
function(ta,fa,la){let ma=!1;return ta.filter(aa=>ma?!0:ma=aa===fa).map(aa=>la[aa]())};h.fetchCandidates=function(ta,fa,la,ma){return R.apply(this,arguments)};h.fetchFullFeature=function(ta,fa,la){return W.apply(this,arguments)};h.findLayerInfo=function(ta,fa){return ta&&ta.find(la=>la.layer===fa)};h.getVisualVariableAttributes=r;h.setUpFeatureAdd=function(ta,fa,la){return l.apply(this,arguments)};h.setUpGeometryUpdate=function(ta,fa,la,ma,aa){return Ca.apply(this,arguments)};h.sizeDefaults=Ba;h.startCreatingNewFeature=
b;h.startUpdatingFeature=ea;h.updateGraphicSymbolWhenRequired=J;h.visualVariableInteractiveUpdate=qa;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/renderers/support/clickToleranceUtils":function(){define(["exports"],function(d){function h(g,u){return u?"xoffset"in u&&u.xoffset?Math.max(g,Math.abs(u.xoffset)):"yoffset"in u&&u.yoffset?Math.max(g,Math.abs(u.yoffset||0)):g:g}function c(g,u){if("number"===typeof g)return g;if(g&&g.stops&&g.stops.length){{g=g.stops;let F=u=0;for(let L=0;L<g.length;L++){const K=
g[L].size;"number"===typeof K&&(u+=K,F++)}g=u/F}return g}return u}function B(g,u){if(!u)return g;u=u.filter(K=>"size"===K.type).map(K=>{const {maxSize:M,minSize:y}=K;return(c(M,g)+c(y,g))/2});let F=0;const L=u.length;if(0===L)return g;for(let K=0;K<L;K++)F+=u[K];return Math.max(Math.floor(F/L),g)}d.calculateTolerance=function(g){const u=g&&g.renderer;g="touch"===(g&&g.event&&g.event.pointerType)?9:6;if(!u)return g;g="visualVariables"in u?B(g,u.visualVariables):g;if("simple"===u.type)return h(g,u.symbol);
if("unique-value"===u.type){let F=g;u.uniqueValueInfos.forEach(L=>{F=h(F,L.symbol)});return F}if("class-breaks"===u.type){let F=g;u.classBreakInfos.forEach(L=>{F=h(F,L.symbol)});return F}return g};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/layers/graphics/GraphicState":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Evented ../../../../core/accessorSupport/decorators/property ../../../../core/arrayUtils ../../../../core/has ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/subclass".split(" "),
function(d,h,c,B,g,u,F,L,K){d.GraphicState=function(M){function y(k){k=M.call(this,k)||this;k.tracking=!1;k.displaying=!1;k.isDraped=!1;return k}h._inheritsLoose(y,M);return y}(B.EventedAccessor);c.__decorate([g.property({constructOnly:!0})],d.GraphicState.prototype,"graphic",void 0);c.__decorate([g.property()],d.GraphicState.prototype,"tracking",void 0);c.__decorate([g.property()],d.GraphicState.prototype,"displaying",void 0);c.__decorate([g.property()],d.GraphicState.prototype,"isDraped",void 0);
d.GraphicState=c.__decorate([K.subclass("esri.views.3d.layers.graphics.GraphicState")],d.GraphicState);Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/support/drapedUtils":function(){define("exports ../../geometry ../../core/maybe ../../core/unitUtils ../../renderers/support/clickToleranceUtils ../../geometry/Extent".split(" "),function(d,h,c,B,g,u){function F(K,M,y,k=new u){let m;if("2d"===y.type)m=M*y.resolution;else if("3d"===y.type){var q=y.overlayPixelSizeInMapUnits(K),I=y.basemapSpatialReference;
m=c.isSome(I)&&!I.equals(y.spatialReference)?B.getMetersPerUnitForSR(I)/B.getMetersPerUnitForSR(y.spatialReference):M*q}M=K.x-m;q=K.y-m;I=K.x+m;K=K.y+m;({spatialReference:y}=y);k.xmin=Math.min(M,I);k.ymin=Math.min(q,K);k.xmax=Math.max(M,I);k.ymax=Math.max(q,K);k.spatialReference=y;return k}const L=new u;d.createQueryGeometry=F;d.intersectsDrapedGeometry=function(K,M,y){K=y.toMap(K);if(c.isNone(K))return!1;const k=g.calculateTolerance();return F(K,k,y,L).intersects(M)};Object.defineProperty(d,"__esModule",
{value:!0})})},"esri/views/support/hitTestSelectUtils":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(d,h){function c(){c=h._asyncToGenerator(function*(B,g){if("2d"===B.type)return B.hitTest(g);B=yield B.hitTest(g);const u=B.results[0];g=B.results.findIndex(F=>F.distance!==u.distance);-1!==g&&(B.results=B.results.slice(0,g));return B});return c.apply(this,arguments)}d.hitTestSelectSameDistance=function(B,g){return c.apply(this,arguments)};Object.defineProperty(d,"__esModule",
{value:!0})})},"esri/widgets/Editor/CreateWorkflow":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/set ../../core/accessorSupport/decorators/subclass ./CreateWorkflowData ./Edits ./Workflow ./workflowUtils".split(" "),function(d,h,c,B,g,u,F,L,K,M,y,k,m){var q;B=q=function(I){function p(E){E=I.call(this,E)||this;E.type="create";return E}
d._inheritsLoose(p,I);p.create=function(E,x,A){E=new q({data:new M({edits:new y.Edits,viewModel:E}),onCommit:function(){var r=d._asyncToGenerator(function*(G){yield A(G.creationInfo.layer,{addFeatures:[G.edits.feature]})});return function(G){return r.apply(this,arguments)}}()});E._set("steps",this._createWorkflowSteps(E,x));return E};p._createWorkflowSteps=function(E,x="awaiting-feature-creation-info"){const {data:A,handles:r}=E;E=m.createWorkflowSteps(["awaiting-feature-creation-info","awaiting-feature-to-create",
"editing-new-feature"],x,{"awaiting-feature-creation-info":()=>({id:"awaiting-feature-creation-info",setUp(){var G=this;return d._asyncToGenerator(function*(){A.creationInfo=null;A.edits.feature=null;A.viewModel.featureTemplatesViewModel.select(null);r.add(A.viewModel.featureTemplatesViewModel.on("select",({item:H})=>{A.creationInfo={layer:H.layer,template:H.template};A.viewModel.activeWorkflow.next()}),G.id)})()},tearDown(){var G=this;return d._asyncToGenerator(function*(){r.remove(G.id)})()}}),
"awaiting-feature-to-create":()=>({id:"awaiting-feature-to-create",setUp(){var G=this;return d._asyncToGenerator(function*(){r.add(yield m.setUpFeatureAdd(A.viewModel.sketchViewModel,A.creationInfo,H=>{A.edits.feature=H;A.viewModel.activeWorkflow.next()}),G.id)})()},tearDown(){var G=this;return d._asyncToGenerator(function*(){r.remove(G.id)})()}}),"editing-new-feature":()=>({id:"editing-new-feature",setUp(){var G=this;return d._asyncToGenerator(function*(){const H=A.edits.feature,w=H.sourceLayer,
e=A.viewModel,z=e.sketchViewModel;var S=m.findLayerInfo(e.layerInfos,w);e.featureFormViewModel.set({feature:H,formTemplate:null==S?void 0:S.formTemplate});z.allowDeleteKey=!1;const J=m.getVisualVariableAttributes(H);yield m.startUpdatingFeature(z,H,w,J);S=z.on("update",function(){var O=d._asyncToGenerator(function*(t){var l=t.graphics[0];if("complete"===t.state)return m.startUpdatingFeature(z,l,w,J);yield m.visualVariableInteractiveUpdate(z.view,l,t,J);t=l.attributes;c.isSome(J.rotation)&&({field:l}=
J.rotation,e.featureFormViewModel.setValue(l,t[l]));c.isSome(J.size)&&({field:l}=J.size,e.featureFormViewModel.setValue(l,t[l]))});return function(t){return O.apply(this,arguments)}}());r.add([A.viewModel.featureFormViewModel.on("value-change",d._asyncToGenerator(function*(){A.edits.updateAttributes(A.viewModel.featureFormViewModel.getValues());H.attributes=A.edits.feature.attributes;"3d"===z.view.type&&(yield m.updateGraphicSymbolWhenRequired(H))})),S],G.id)})()},tearDown(G){var H=this;return d._asyncToGenerator(function*(){G.cancelled&&
A.viewModel.sketchViewModel.layer.removeAll();r.remove(H.id)})()}})});return m.avoidFeatureTemplateSelectionWithOnlyOneItem(A,E)};return p}(k);return B=q=h.__decorate([K.subclass("esri.widgets.Editor.CreateWorkflow")],B)})},"esri/widgets/Editor/CreateWorkflowData":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,h,c,B,g,u,F,L){c=function(K){function M(y){y=K.call(this,y)||this;y.creationInfo=null;y.edits=null;y.viewModel=null;return y}d._inheritsLoose(M,K);return M}(c);h.__decorate([B.property()],c.prototype,"creationInfo",void 0);h.__decorate([B.property()],c.prototype,"edits",void 0);h.__decorate([B.property()],c.prototype,"viewModel",void 0);return c=h.__decorate([L.subclass("esri.widgets.Editor.CreateWorkflowData")],c)})},"esri/widgets/Editor/Edits":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/HandleOwner ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y){function k(m){return u.isNone(m)?null:JSON.stringify(m)}d.Edits=function(m){function q(p){p=m.call(this,p)||this;p._baselineAttributesJSON=null;p._baselineGeometryJSON=null;p.feature=null;return p}h._inheritsLoose(q,m);var I=q.prototype;I.trackChanges=function(){this.feature&&(this._baselineAttributesJSON=k(this.feature.attributes),this._baselineGeometryJSON=k(this.feature.geometry),this.notifyChange("attributesModified"),this.notifyChange("geometryModified"))};I.updateAttributes=
function(p){this.feature.attributes=p;this.notifyChange("attributesModified")};I.updateGeometry=function(p){this.feature.geometry=p;this.notifyChange("geometryModified")};h._createClass(q,[{key:"attributesModified",get:function(){const {_baselineAttributesJSON:p,feature:E}=this;return!(!E||p===k(E.attributes))}},{key:"geometryModified",get:function(){const {_baselineGeometryJSON:p,feature:E}=this;return!(!E||p===k(E.geometry))}},{key:"modified",get:function(){return this.attributesModified||this.geometryModified}}]);
return q}(g.HandleOwnerMixin(B));c.__decorate([F.property()],d.Edits.prototype,"attributesModified",null);c.__decorate([F.property()],d.Edits.prototype,"feature",void 0);c.__decorate([F.property()],d.Edits.prototype,"geometryModified",null);c.__decorate([F.property()],d.Edits.prototype,"modified",null);d.Edits=c.__decorate([y.subclass("esri.widgets.Editor.Edits")],d.Edits);Object.defineProperty(d,"__esModule",{value:!0})})},"esri/widgets/Editor/UpdateWorkflow":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/handleUtils ../../core/maybe ../../core/promiseUtils ../../core/watchUtils ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/has ../../core/accessorSupport/set ../../core/accessorSupport/decorators/subclass ../../views/support/layerViewUtils ./Edits ./UpdateWorkflowData ./Workflow ./workflowUtils".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p,E){var x;F=x=function(A){function r(H){H=A.call(this,H)||this;H.type="update";return H}d._inheritsLoose(r,A);r.create=function(H,w,e){H=new x({data:new I({edits:new q.Edits,viewModel:H}),onCommit:function(){var z=d._asyncToGenerator(function*(S){const J=S.edits.feature,O=J.sourceLayer,t=J.clone();if(!S.edits.attributesModified){const {objectIdField:l}=O;t.attributes={[l]:J.getAttribute(l)}}S.edits.geometryModified||(t.geometry=null);yield e(O,{updateFeatures:[t]})});
return function(S){return z.apply(this,arguments)}}()});H._set("steps",this._createWorkflowSteps(H,w));return H};var G=r.prototype;G.highlight=function(H){var {data:{viewModel:{view:w}}}=this;w=H&&w.allLayerViews.items.find(({layer:e})=>e===H.layer);m.highlightsSupported(w)&&this.handles.add(w.highlight(H),"candidate-highlight")};G.unhighlight=function(){this.handles.remove("candidate-highlight")};r._createWorkflowSteps=function(H,w="awaiting-feature-to-update"){const {data:e,handles:z}=H;return E.createWorkflowSteps(["awaiting-feature-to-update",
"awaiting-update-feature-candidate","editing-existing-feature","adding-attachment","editing-attachment"],w,{"awaiting-feature-to-update":()=>({id:"awaiting-feature-to-update",setUp(){var S=this;return d._asyncToGenerator(function*(){const {spinnerViewModel:J,view:O}=e.viewModel;let t=null;z.add({remove(){t&&(t.abort(),t=null)}},S.id);e.edits.feature=null;const l=O.on("immediate-click",b=>{J.location=b.mapPoint;J.visible=!0;t&&t.abort();const {editableItems:f}=e.viewModel;t=new AbortController;(new Promise((n,
P)=>{g.onAbort(t.signal,()=>P(g.createAbortError()));n(E.fetchCandidates(f,O,b,t.signal))})).then(n=>{g.throwIfAborted(t);e.candidates=n.reduce((P,U)=>U.error?P:[...P,...U.value],[]);e.viewModel.spinnerViewModel.visible=1===e.candidates.length;0!==e.candidates.length&&(1===e.candidates.length?(e.edits.feature=e.candidates[0],e.viewModel.activeWorkflow.go("editing-existing-feature").catch(()=>{}).then(()=>e.viewModel.spinnerViewModel.visible=!1)):e.viewModel.activeWorkflow.next())})});z.add(l,S.id)})()},
tearDown(){var S=this;return d._asyncToGenerator(function*(){z.remove(S.id)})()}}),"awaiting-update-feature-candidate":()=>({id:"awaiting-update-feature-candidate",setUp(){var S=this;return d._asyncToGenerator(function*(){const {edits:J}=e;J.feature=null;z.add(u.watch(J,"feature",O=>{H.unhighlight();H.highlight(O)}),S.id)})()},tearDown(){var S=this;return d._asyncToGenerator(function*(){H.unhighlight();z.remove(S.id)})()}}),"editing-existing-feature":()=>({id:"editing-existing-feature",setUp(){var S=
this;return d._asyncToGenerator(function*(){const J=e.edits.feature,O=e.viewModel;e.editableItem=O.editableItems.find(U=>U.layer===J.layer);const t=new AbortController;z.add({remove:()=>t.abort()},S.id);var l=O.view.whenLayerView(J.layer),b=E.fetchFullFeature(J,O.view,t.signal);l=yield l;const f=yield b;if(!g.isAborted(t)){e.edits.updateGeometry(f.geometry);e.edits.updateAttributes(f.attributes);e.edits.trackChanges();O.attachmentsViewModel.set({graphic:f,mode:"view"});b=f.sourceLayer;var n=E.findLayerInfo(O.layerInfos,
b);O.featureFormViewModel.set({feature:f,formTemplate:null==n?void 0:n.formTemplate});var P="createInteractiveEditSession"in l?l.createInteractiveEditSession(J):null;l=[O.featureFormViewModel.on("value-change",U=>{e.edits.updateAttributes(O.featureFormViewModel.getValues());f.attributes=e.edits.feature.attributes;P&&P.setAttribute(U.fieldName,U.value)}),O.attachmentsViewModel.watch("mode",U=>{"add"===U&&e.viewModel.activeWorkflow.go("adding-attachment");"edit"===U&&e.viewModel.activeWorkflow.go("editing-attachment")})];
P&&(l.push(c.makeHandle(()=>P.rollback())),z.add(c.makeHandle(()=>P.commit()),H._handleKeys.afterCommit));({supportsGeometryUpdate:b}=b.capabilities.editing);if(b){O.sketchViewModel.allowDeleteKey=!1;const U=E.getVisualVariableAttributes(f),{interactive:T,visual:v}=yield E.setUpGeometryUpdate(f,U,O.sketchViewModel,O.view,({geometry:N,attributes:R})=>{if(B.isSome(U.rotation)){var {field:W}=U.rotation;O.featureFormViewModel.setValue(W,R[W])}B.isSome(U.size)&&({field:W}=U.size,O.featureFormViewModel.setValue(W,
R[W]));e.edits.updateAttributes(R);e.edits.updateGeometry(N)});l.push(T,v);z.add(T,H._handleKeys.beforeCommit);z.add(v,H._handleKeys.afterCommit)}else H.highlight(f);z.add(l,S.id)}})()},tearDown(){var S=this;return d._asyncToGenerator(function*(){H.unhighlight();z.remove(S.id)})()}}),"adding-attachment":()=>({id:"adding-attachment",parent:"editing-existing-feature",setUp(){return d._asyncToGenerator(function*(){})()},tearDown(){return d._asyncToGenerator(function*(){})()}}),"editing-attachment":()=>
({id:"editing-attachment",parent:"editing-existing-feature",setUp(){return d._asyncToGenerator(function*(){})()},tearDown(){return d._asyncToGenerator(function*(){})()}})})};return r}(p);return F=x=h.__decorate([k.subclass("esri.widgets.Editor.UpdateWorkflow")],F)})},"esri/views/support/layerViewUtils":function(){define(["exports","../../core/maybe"],function(d,h){d.extractSafeScaleBounds=function(c){var B,g;const u=c.effectiveScaleRange;c=null!=(B=null==u?void 0:u.minScale)?B:0;B=null!=(g=null==
u?void 0:u.maxScale)?g:0;return{minScale:c,maxScale:B}};d.highlightsSupported=function(c){return c&&"function"===typeof c.highlight};d.isScaleRangeActive=function(c,B){return 0<c||0<B};d.occludeesSupported=function(c){return c&&"function"===typeof c.maskOccludee};d.scaleBoundsPredicate=function(c,B,g){return h.isNone(c)||c>g&&(0===B||c<B)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/widgets/Editor/UpdateWorkflowData":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,h,c,B,g,u,F,L){c=function(K){function M(y){y=K.call(this,y)||this;y.candidates=null;y.editableItem=null;y.edits=null;y.viewModel=null;return y}d._inheritsLoose(M,K);return M}(c);h.__decorate([B.property()],c.prototype,"candidates",void 0);h.__decorate([B.property()],c.prototype,"editableItem",void 0);h.__decorate([B.property()],c.prototype,"edits",void 0);h.__decorate([B.property()],c.prototype,"viewModel",void 0);return c=h.__decorate([L.subclass("esri.widgets.Editor.UpdateWorkflowData")],
c)})},"esri/widgets/Sketch/SketchViewModel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../symbols ../../core/Collection ../../core/has ../../core/Error ../../core/Evented ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/projection ../../geometry/projectionEllipsoid ../../geometry/support/coordsUtils ../../geometry/support/spatialReferenceUtils ../../layers/GraphicsLayer ../../views/DOMContainer ../../views/3d/interactive/editingTools/isSupportedGraphicUtils ../../views/3d/interactive/editingTools/moveGraphic/isSupportedGraphic ../../views/3d/interactive/editingTools/reshapeGraphic/isSupportedGraphic ../../views/3d/interactive/editingTools/transformGraphic/isSupportedGraphic ../../views/draw/support/layerUtils ../../views/input/InputManager ../../views/interactive/keybindings ../../views/interactive/snapping/SnappingManager ../../views/interactive/snapping/SnappingOptions ../../views/support/screenUtils ./support/OperationHandle ../../symbols/SimpleMarkerSymbol ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p,E,x,A,r,G,H,w,e,z,S,J,O,t,l,b,f,n,P,U,T,v){function N(fa){return"polygon"===fa||"rectangle"===fa||"circle"===fa?!0:!1}function R(fa,la){ea("undo",fa.history.undo,fa.history.redo,la)}function W(fa,la){ea("redo",fa.history.redo,fa.history.undo,la)}function ea(fa,la,ma,aa){const ba=la.pop().updates,ha=[];aa.forEach((ka,pa)=>{pa=ba[pa];null!=pa&&("geometry"in pa&&y.isSome(pa.geometry)&&(ha.push({geometry:ka.geometry}),ka.geometry=pa.geometry),"symbol"in pa&&y.isSome(pa.symbol)&&
(ha.push({symbol:ka.symbol}),ka.symbol=pa.symbol),"undo"in pa&&(ha.push(pa),pa[fa](ka)))});ma.push({updates:ha})}function da(fa){return{updates:fa.map(la=>({geometry:la.geometry}))}}function qa(fa){return"requireError"in fa&&"aborted"===fa.requireError}const va=fa=>Object.freeze({__proto__:null,default:fa}),Ca=M.getLogger("esri.widgets.Sketch.SketchViewModel"),Ba={defaultZ:0},ta={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,
enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,tool:"transform"};u=function(fa){function la(aa){aa=fa.call(this,aa)||this;aa._numUpdating=0;aa._handles=new K;aa._internalGraphicsLayer=new H({listMode:"hide",internal:!0,title:"SVM Internal"});aa._operationHandle=null;aa._viewHandles=new K;aa.activeFillSymbol=null;aa.activeLineSymbol=null;aa.activeVertexSymbol=null;aa.allowDeleteKey=!0;aa.layer=null;aa.pointSymbol=new U({style:"circle",size:6,color:[255,
255,255],outline:{color:[50,50,50],width:1}});aa.polygonSymbol=new T({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}});aa.polylineSymbol=new v({color:[130,130,130,1],width:2});aa._snappingManager=null;aa.updateGraphics=new g;aa.updateOnGraphicClick=!0;aa.updatePointSymbol=new U({size:10,color:[0,200,255,.5],outline:{color:"black",width:1}});aa.updatePolygonSymbol=new T({color:[12,207,255,.2],outline:{join:"round",color:[12,207,255],width:2}});aa.updatePolylineSymbol=new v({color:[12,207,
255],width:2});aa.vertexSymbol=new U({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}});aa._moduleLoaderAbortController=null;aa._viewReadyAbortController=null;aa._originalAutoOpenEnabled=null;aa.defaultCreateOptions=Ba;aa.defaultUpdateOptions=ta;aa.snappingOptions=new f;return aa}h._inheritsLoose(la,fa);var ma=la.prototype;ma.initialize=function(){this._handles.add([m.on(()=>{var aa,ba;return null==(aa=this.view)?void 0:null==(ba=aa.map)?void 0:ba.layers},"change",aa=>
{aa.removed.includes(this.layer)&&this.cancel()}),m.on(()=>{var aa;return null==(aa=this.layer)?void 0:aa.graphics},"change",aa=>{if(y.isSome(this._operationHandle))for(const ba of aa.removed)this.updateGraphics.includes(ba)&&(1<this.updateGraphics.length?this._operationHandle.removeFromSelection(ba):this._operationHandle.cancel())}),m.watch(()=>{var aa,ba;return null!=(aa=null==(ba=this.layer)?void 0:ba.elevationInfo)?aa:null},aa=>{aa!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=
aa)},m.syncAndInitial),m.watch(()=>this.view,aa=>{y.destroyMaybe(this._snappingManager);aa&&(this._snappingManager=new b.SnappingManager({view:aa,options:this.snappingOptions}),"2d"===aa.type?new Promise((ba,ha)=>d(["../../views/2d/interactive/editingTools"],ba,ha)):"3d"===aa.type&&(new Promise((ba,ha)=>d(["../../views/3d/interactive/editingTools"],ba,ha)),new Promise((ba,ha)=>d(["../../views/3d/layers/GraphicsLayerView3D"],ka=>ba(va(ka)),ha))))},m.syncAndInitial),m.watch(()=>{var aa;return null==
(aa=this.view)?void 0:aa.spatialReference},(aa,ba)=>{aa&&ba&&!aa.equals(ba)&&this.cancel()})])};ma.destroy=function(){this.cancel();this._handles=y.destroyMaybe(this._handles);this._viewHandles=y.destroyMaybe(this._viewHandles);this._removeDefaultLayer();this._snappingManager=y.destroyMaybe(this._snappingManager);this._set("view",null);this.emit("destroy")};ma.cancel=function(){this._moduleLoaderAbortController=y.abortMaybe(this._moduleLoaderAbortController);this._viewReadyAbortController=y.abortMaybe(this._viewReadyAbortController);
this._operationHandle&&this._operationHandle.cancel()};ma.complete=function(){this._operationHandle&&this._operationHandle.complete()};ma.delete=function(){const {state:aa,updateGraphics:ba}=this;if("active"===aa&&ba.length){const {activeTool:ha,layer:ka}=this,pa=ba.toArray();ka.removeMany(pa);this.cancel();this._emitDeleteEvent({graphics:pa,tool:ha})}};ma.create=function(){var aa=h._asyncToGenerator(function*(ba,ha){this.cancel();yield this._waitViewReady();if("disabled"===this.state)throw this.layer||
this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),this.view||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),k.createAbortError();y.isSome(this.view.activeTool)&&(this.view.activeTool=null);if(ba){O.addUniqueLayer(this.view,this._internalGraphicsLayer);var ka=yield this._setupCreateOperation(ba,ha);y.isNone(ka)||this.destroyed?this.view.map.remove(this._internalGraphicsLayer):(ka.on("complete",()=>{if(ka===this._operationHandle){const pa=
this.createGraphic,oa=this._operationHandle.cancelled;this._operationHandle.destroy();this._operationHandle=null;this._set("createGraphic",null);this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer);ka.cancelled||null==pa||this.layer.add(pa);this.emit("create",{graphic:pa,state:oa?"cancel":"complete",tool:ba,toolEventInfo:null,type:"create"})}}),this._operationHandle=ka,this.view.ready&&w.isDOMContainer(this.view)&&this.view.focus())}else this._logError("sketch:missing-parameter",
"Missing parameter 'tool'.")});return function(ba,ha){return aa.apply(this,arguments)}}();ma.update=function(){var aa=h._asyncToGenerator(function*(ba,ha){this.cancel();yield this._waitViewReady();const {layer:ka,view:pa,state:oa}=this;if("disabled"===oa)throw pa||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),ka||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),k.createAbortError();y.isSome(this.view.activeTool)&&
(this.view.activeTool=null);const ra=Array.isArray(ba)?ba:[ba];null!=ba&&ra&&ra.length?ra.some(Aa=>Aa.layer!==ka?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):y.isNone(Aa.geometry)?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0):!1)||(ba=yield this._setupUpdateOperation(ra,ha),this.destroyed||y.isNone(ba)||qa(ba)||(O.addUniqueLayer(this.view,
this._internalGraphicsLayer),this._setUpdateOperationHandle(ba,ha),this.emit("update",{graphics:ra,state:"start",aborted:!1,tool:ba.tool,toolEventInfo:null,type:"update"}))):this._logError("sketch:missing-parameter","Missing parameter 'graphics'.")});return function(ba,ha){return aa.apply(this,arguments)}}();ma._updateSpatialReference=function(){var aa=h._asyncToGenerator(function*(ba){this._beginAsyncOperation();ba=Array.isArray(ba)?ba:[ba];for(const ha of ba)y.isSome(ha.geometry)&&"mesh"!==ha.geometry.type&&
!G.equals(ha.geometry.spatialReference,this.view.spatialReference)&&(x.canProjectWithoutEngine(ha.geometry.spatialReference,this.view.spatialReference)||x.isLoaded()||(yield x.load()),ha.geometry=x.project(ha.geometry,this.view.spatialReference));this._endAsyncOperation()});return function(ba){return aa.apply(this,arguments)}}();ma.undo=function(){this.canUndo()&&this._operationHandle.undo()};ma.redo=function(){this.canRedo()&&this._operationHandle.redo()};ma.canUndo=function(){return!(!this._operationHandle||
!this._operationHandle.canUndo())};ma.canRedo=function(){return!(!this._operationHandle||!this._operationHandle.canRedo())};ma.toggleUpdateTool=function(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()};ma._getFirstHit=function(){var aa=h._asyncToGenerator(function*(ba){const ha=[];switch(this.view.type){case "2d":{const pa=[];this.view.map.allLayers.forEach(oa=>{"vector-tile"!==oa.type&&"imagery"!==oa.type||pa.push(oa)});var ka=yield this.view.hitTest(ba,
{exclude:pa});0<ka.results.length&&(ka=ka.results[0],ka.graphic&&ha.push(ka))}break;case "3d":{const pa=[this.view.map.ground];this.view.map.allLayers.forEach(oa=>{"integrated-mesh"===oa.type&&pa.push(oa)});ka=yield this.view.hitTest(ba,{exclude:pa});if(0<ka.results.length){const oa=ka.results[0];(!ka.ground.mapPoint||1>this.view.map.ground.opacity||ka.ground.distance-y.unwrapOr(oa.distance,0)>-Math.min(3*ka.ground.distance,"global"===this.view.viewingMode?A.getReferenceEllipsoid(this.view.renderCoordsHelper.spatialReference).radius/
this.view.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY))&&ha.push(oa)}}}return{screenPoint:ba,results:ha}});return function(ba){return aa.apply(this,arguments)}}();ma._generateViewHandles=function(aa){var ba=this;return[aa.on("immediate-click",function(){var ha=h._asyncToGenerator(function*(ka){var pa="active"===ba.state&&"create"===ba._operationHandle.type;if("disabled"!==ba.state&&!pa&&ba.updateOnGraphicClick){ba._beginAsyncOperation();var oa=(yield ka.async(()=>ba._getFirstHit(n.createScreenPointFromEvent(ka)))).results;
pa=null;if(oa.length)for(const ra of oa){if(ra.graphic){oa=ra.graphic;if(ba.updateGraphics.includes(oa)||oa.layer===ba.layer){ka.stopPropagation();pa=oa;break}"2d"!==aa.type||ba._isComponentGraphic(oa)||"active"!==ba.state||ba.cancel()}}else"active"===ba.state&&ba.cancel();y.isSome(pa)&&!ba.updateGraphics.includes(pa)&&(yield ba.update([pa],{...ba.defaultUpdateOptions,reshapeOptions:{...ba.defaultUpdateOptions.reshapeOptions}}));ba._endAsyncOperation()}});return function(ka){return ha.apply(this,
arguments)}}(),t.ViewEventPriorities.WIDGET)]};ma._setupCreateOperation=function(){var aa=h._asyncToGenerator(function*(ba,ha){ba=yield this._setupDrawGraphicTool(ba,this.view,{hasZ:"3d"===this.view.type,...this.defaultCreateOptions,...ha});if(y.isNone(ba))return null;this.view.tools.add(ba);this.view.activeTool=ba;return this._setupCreateOperationHandle(ba)});return function(ba,ha){return aa.apply(this,arguments)}}();ma._setupDrawGraphicTool=function(){var aa=h._asyncToGenerator(function*(ba,ha,
ka){if("multipoint"===ba&&"3d"===ha.type)return this._logError("sketch:create","Multipoint geometries are not supported in SceneView"),null;const pa="rectangle"!==ba,oa="rectangle"!==ba;this.snappingOptions.enabledToggled=!1;ba={view:ha,mode:"rectangle"===ba||"circle"===ba?"hybrid":"click",...ka,snapToScene:!1,geometryType:ba,graphicSymbol:this._getGraphicSymbolFromTool(ba),snappingManager:this._snappingManager,forceUniformSize:oa,centered:pa};return"2d"===this.view.type?this._makeDrawGraphicTool2D(ba):
this._makeDrawGraphicTool3D(ba)});return function(ba,ha,ka){return aa.apply(this,arguments)}}();ma._makeDrawGraphicTool2D=function(){var aa=h._asyncToGenerator(function*(ba){const ha=yield this._requireModule(new Promise((ka,pa)=>d(["../../views/2d/interactive/editingTools"],ka,pa)));return qa(ha)||this.destroyed?null:new ha.module.DrawGraphicTool2D({...ba,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:N(ba.geometryType)?
this.activeFillSymbol:null})});return function(ba){return aa.apply(this,arguments)}}();ma._makeDrawGraphicTool3D=function(){var aa=h._asyncToGenerator(function*(ba){const ha=yield this._requireModule(new Promise((ka,pa)=>d(["../../views/3d/interactive/editingTools"],ka,pa)));return qa(ha)||this.destroyed?null:new ha.module.DrawGraphicTool3D({...ba,elevationInfo:this.layer.elevationInfo,snapToScene:y.isSome(this.layer.elevationInfo)?"absolute-height"===this.layer.elevationInfo.mode:!0})});return function(ba){return aa.apply(this,
arguments)}}();ma._setupCreateOperationHandle=function(aa){let ba=null;const ha=aa.forceUniformSize,ka=aa.centered,pa=[this.view.on("key-down",ra=>{if(ra.key===l.SKETCH_KEYS.pan)ra.stopPropagation(),ra.repeat||(aa.enabled=!1);else if(ra.key===l.SKETCH_KEYS.complete)ra.stopPropagation(),aa.completeCreateOperation();else if(ra.key!==l.SKETCH_KEYS.vertexAdd||ra.repeat)ra.key===l.SKETCH_KEYS.undo?(ra.stopPropagation(),oa.undo()):ra.key===l.SKETCH_KEYS.redo?(ra.stopPropagation(),oa.redo()):ra.key!==l.SKETCH_KEYS.snappingToggle||
"rectangle"===aa.geometryType||"circle"===aa.geometryType||ra.repeat?ra.key!==l.SKETCH_KEYS.constraint||"rectangle"!==aa.geometryType&&"circle"!==aa.geometryType||ra.repeat?ra.key!==l.SKETCH_KEYS.center||ra.repeat||(aa.centered=!ka,ra.stopPropagation()):(aa.forceUniformSize=!ha,ra.stopPropagation()):(this.snappingOptions.enabledToggled=!0,ra.stopPropagation());else{const Aa=aa.drawOperation.geometryType;if("polyline"===Aa||"polygon"===Aa||"multipoint"===Aa)ra.stopPropagation(),aa.drawOperation.commitStagedVertex()}},
t.ViewEventPriorities.WIDGET),this.view.on("key-up",ra=>{ra.key===l.SKETCH_KEYS.pan?aa.enabled=!0:ra.key===l.SKETCH_KEYS.snappingToggle&&"rectangle"!==aa.geometryType&&"circle"!==aa.geometryType?(this.snappingOptions.enabledToggled=!1,ra.stopPropagation()):ra.key!==l.SKETCH_KEYS.constraint||"rectangle"!==aa.geometryType&&"circle"!==aa.geometryType?ra.key===l.SKETCH_KEYS.center&&(aa.centered=ka,ra.stopPropagation()):(aa.forceUniformSize=ha,ra.stopPropagation())},t.ViewEventPriorities.WIDGET),aa.on("vertex-add",
ra=>{ba=y.isNone(ba)?"start":"active";switch(ra.operation){case "apply":this.emit("create",{graphic:y.unwrap(aa.graphic),state:ba,tool:this.activeTool,toolEventInfo:ra,type:"create"});break;case "undo":this._emitUndoEvent({graphics:[y.unwrap(aa.graphic)],tool:aa.geometryType});break;case "redo":this._emitRedoEvent({graphics:[y.unwrap(aa.graphic)],tool:aa.geometryType})}}),aa.on("cursor-update",ra=>{0<aa.drawOperation.numCommittedVertices&&this.emit("create",{graphic:y.unwrap(aa.graphic),state:"active",
tool:this.activeTool,toolEventInfo:{coordinates:ra.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),aa.on("vertex-remove",ra=>{switch(ra.operation){case "apply":this.emit("create",{graphic:y.unwrap(aa.graphic),state:"active",tool:this.activeTool,toolEventInfo:ra,type:"create"});break;case "undo":this._emitUndoEvent({graphics:[y.unwrap(aa.graphic)],tool:aa.geometryType});break;case "redo":this._emitRedoEvent({graphics:[y.unwrap(aa.graphic)],tool:aa.geometryType})}}),aa.on("complete",
ra=>{this._set("createGraphic",y.unwrap(ra.graphic));ba="complete";ra.aborted?oa&&oa.cancel():oa&&oa.complete()}),m.watch(()=>this._getGraphicSymbolFromTool(aa.geometryType),ra=>{aa.graphicSymbol=ra})],oa=new P.OperationHandle({activeComponent:aa,tool:aa.geometryType,type:"create",onEnd:()=>{var ra;pa.forEach(Aa=>Aa.remove());pa.length=0;null==(ra=this.view.tools)?void 0:ra.remove(aa);aa.destroy()},undo:()=>{aa.canUndo&&aa.undo()},redo:()=>{aa.canRedo&&aa.redo()},canUndo:()=>aa.canUndo,canRedo:()=>
aa.canRedo});return oa};ma._getGraphicSymbolFromTool=function(aa){switch(aa){case "point":case "multipoint":return this.pointSymbol;case "polyline":return this.polylineSymbol;case "circle":case "rectangle":case "polygon":return this.polygonSymbol;default:return null}};ma._setupUpdateOperation=function(){var aa=h._asyncToGenerator(function*(ba,ha){const {layer:ka,view:pa}=this;ha={tool:this._defaultUpdateTool,...this.defaultUpdateOptions,...ha,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,
...null==ha?void 0:ha.reshapeOptions}};var oa=ha.tool;for(var ra of ba)ka.remove(ra),ka.add(ra);if("3d"===pa.type){if(0===ba.length)return null;switch(oa){case "move":return this._setupMove3DOperation(ba,ha,pa,oa);case "reshape":if(1<ba.length)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;oa=S.isSupportedGraphic(ba[0]);if(oa===e.SupportedGraphicResult.SUPPORTED)return this._setupReshape3DOperation(ba[0],ha,pa);this._logError("sketch:reshape",
`Reshape operation not supported for provided graphic(s) (${e.isSupportedGraphicResultMessage(oa)}).`);return null;case "transform":return this._setupGraphicTransform3DOperation(ba,ha,pa)}}switch(oa){case "move":return this._setupMove2DOperation(ba,ha,pa);case "reshape":if(1<ba.length)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;ra=S.isSupportedGraphic(ba[0]);if(ra===e.SupportedGraphicResult.SUPPORTED)return this._setupTransformOrReshape2DOperation(ba,
oa,ha,pa);this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${e.isSupportedGraphicResultMessage(ra)}).`);return null;case "transform":return 1===ba.length&&(ra=y.get(ba[0].geometry,"type"),"point"===ra||"multipoint"===ra)&&(oa="reshape"),this._setupTransformOrReshape2DOperation(ba,oa,ha,pa)}});return function(ba,ha){return aa.apply(this,arguments)}}();ma._setupMove3DOperation=function(){var aa=h._asyncToGenerator(function*(ba,ha,ka,pa,oa=!1){var ra=this;for(var Aa of ba){const za=
z.isSupportedGraphic(Aa);if(za!==e.SupportedGraphicResult.SUPPORTED)return this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${e.isSupportedGraphicResultMessage(za)}).`),null}Aa=yield this._requireModule(new Promise((za,Ja)=>d(["../../views/3d/interactive/editingTools"],za,Ja)));if(qa(Aa))return Aa;const Fa=new Aa.module.GraphicMoveTool({view:ka,enableZ:ha.enableZ,snappingManager:this._snappingManager});this.view.tools.add(Fa);Fa.graphics.addMany(ba);oa||this.updateGraphics.addMany(ba);
const ya=[],Da=new P.UpdateOperationHandle({activeComponent:Fa,tool:pa,type:"update",onEnd:()=>{var za;ya.forEach(Ja=>Ja.remove());ya.length=0;null==(za=this.view.tools)?void 0:za.remove(Fa);Fa.destroyed||Fa.destroy()},undo:()=>{R(Da,this.updateGraphics.toArray());this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:pa})},redo:()=>{W(Da,this.updateGraphics.toArray());this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:pa})},addToSelection:za=>{this.updateGraphics.push(za);
Fa.graphics.push(za);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[za],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:za=>{const Ja=this.updateGraphics.indexOf(za);Da.history.undo.forEach(Ka=>Ka.updates.splice(Ja,1));Da.history.redo.forEach(Ka=>Ka.updates.splice(Ja,1));this.updateGraphics.remove(za);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,
toolEventInfo:{added:[],removed:[za],type:"selection-change"},type:"update"});0===this.updateGraphics.length?Da.complete():Fa.graphics.remove(za)},toggleTool:function(){var za=h._asyncToGenerator(function*(){if(1===ra.updateGraphics.length&&!1!==ha.toggleToolOnClick&&"transform"===pa){var Ja=ra.updateGraphics.getItemAt(0);S.isSupportedGraphic(Ja)===e.SupportedGraphicResult.SUPPORTED&&(Ja=yield ra._setupReshape3DOperation(Ja,ha,ka,!0),qa(Ja)||(Da.onEnd(),Da.destroy(),ra._setUpdateOperationHandle(Ja,
ha)))}});return function(){return za.apply(this,arguments)}}()});ya.push(...this._getHandlesForComponent(Da,ha),this.view.on("immediate-click",za=>this._getCommonUpdateOperationClickHandlers(Da,za,ha),t.ViewEventPriorities.WIDGET),ka.on("key-down",za=>{this._getCommonUpdateOperationKeyDownHandlers(Da,za);za.key===l.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!0,za.stopPropagation())},t.ViewEventPriorities.WIDGET),ka.on("key-up",za=>{za.key===l.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=
!1,za.stopPropagation())},t.ViewEventPriorities.WIDGET));return Da});return function(ba,ha,ka,pa){return aa.apply(this,arguments)}}();ma._setupGraphicTransform3DOperation=function(aa,ba,ha,ka=!1){if(1===aa.length&&J.isSupportedGraphic(aa[0])===e.SupportedGraphicResult.SUPPORTED){const pa=aa[0],oa=pa.geometry;if(y.isSome(oa)&&("point"===oa.type||"mesh"===oa.type))return this._setupPointTransform3DOperation(pa,ba,ha);if(y.isSome(oa)&&("polygon"===oa.type||"polyline"===oa.type))return this._setupPolyTransform3DOperation(pa,
ba,ha,ka)}return this._setupMove3DOperation(aa,ba,ha,"transform",ka)};ma._setupPointTransform3DOperation=function(){var aa=h._asyncToGenerator(function*(ba,ha,ka){var pa=this;const {enableRotation:oa,enableScaling:ra,enableZ:Aa}=ha,Fa=yield this._requireModule(new Promise((Ja,Ka)=>d(["../../views/3d/interactive/editingTools"],Ja,Ka)));if(qa(Fa))return Fa;const ya=new Fa.module.GraphicTransformTool({graphic:ba,view:ka,enableRotation:oa,enableScaling:ra,enableZ:Aa,snappingManager:this._snappingManager});
this.view.tools.add(ya);this.updateGraphics.add(ba);const Da=[],za=new P.UpdateOperationHandle({activeComponent:ya,tool:"transform",type:"update",onEnd:()=>{var Ja;Da.forEach(Ka=>Ka.remove());Da.length=0;null==(Ja=this.view.tools)?void 0:Ja.remove(ya);ya.destroyed||ya.destroy()},undo:()=>{R(za,this.updateGraphics.toArray());this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},redo:()=>{W(za,this.updateGraphics.toArray());this._emitRedoEvent({graphics:this.updateGraphics.toArray(),
tool:"transform"})},addToSelection:function(){var Ja=h._asyncToGenerator(function*(Ka){pa.updateGraphics.add(Ka);pa.emit("update",{graphics:pa.updateGraphics.toArray(),state:"active",aborted:!1,tool:pa.activeTool,toolEventInfo:{added:[Ka],removed:[],type:"selection-change"},type:"update"});Ka=yield pa._setupMove3DOperation(pa.updateGraphics.toArray(),ha,ka,"transform",!0);qa(Ka)||(za.onEnd(),za.destroy(),pa._setUpdateOperationHandle(Ka,ha))});return function(Ka){return Ja.apply(this,arguments)}}(),
removeFromSelection:Ja=>{this.updateGraphics.remove(Ja);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Ja],type:"selection-change"},type:"update"});za.complete()},toggleTool:()=>{}});Da.push(...this._getHandlesForComponent(za,ha),this.view.on("immediate-click",Ja=>this._getCommonUpdateOperationClickHandlers(za,Ja,ha),t.ViewEventPriorities.WIDGET),ka.on("key-down",Ja=>{this._getCommonUpdateOperationKeyDownHandlers(za,
Ja);Ja.key===l.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!0,Ja.stopPropagation())},t.ViewEventPriorities.WIDGET),ka.on("key-up",Ja=>{Ja.key===l.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!1,Ja.stopPropagation())},t.ViewEventPriorities.WIDGET));return za});return function(ba,ha,ka){return aa.apply(this,arguments)}}();ma._setupPolyTransform3DOperation=function(){var aa=h._asyncToGenerator(function*(ba,ha,ka,pa=!1){var oa=this;const {enableRotation:ra,enableScaling:Aa,
enableZ:Fa,preserveAspectRatio:ya}=ha,Da=yield this._requireModule(new Promise((Ma,Na)=>d(["../../views/3d/interactive/editingTools"],Ma,Na)));if(qa(Da))return Da;const za=new Da.module.ExtentTransformTool({graphic:ba,view:ka,enableRotation:ra,enableScaling:Aa,enableZ:Fa,preserveAspectRatio:ya});this.view.tools.add(za);pa||this.updateGraphics.add(ba);const Ja=[],Ka=new P.UpdateOperationHandle({activeComponent:za,tool:"transform",type:"update",onEnd:()=>{var Ma;Ja.forEach(Na=>Na.remove());Ja.length=
0;null==(Ma=this.view.tools)?void 0:Ma.remove(za);za.destroyed||za.destroy()},canUndo:()=>za.canUndo,undo:()=>{za.undo();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},canRedo:()=>za.canRedo,redo:()=>{za.redo();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},addToSelection:function(){var Ma=h._asyncToGenerator(function*(Na){oa.updateGraphics.add(Na);oa.emit("update",{graphics:oa.updateGraphics.toArray(),state:"active",aborted:!1,tool:oa.activeTool,
toolEventInfo:{added:[Na],removed:[],type:"selection-change"},type:"update"});Na=yield oa._setupMove3DOperation(oa.updateGraphics.toArray(),ha,ka,"transform",!0);qa(Na)||(Ka.onEnd(),Ka.destroy(),oa._setUpdateOperationHandle(Na,ha))});return function(Na){return Ma.apply(this,arguments)}}(),removeFromSelection:Ma=>{this.updateGraphics.remove(Ma);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Ma],type:"selection-change"},
type:"update"});Ka.complete()},toggleTool:function(){var Ma=h._asyncToGenerator(function*(){if(1===oa.updateGraphics.length&&!1!==ha.toggleToolOnClick){var Na=oa.updateGraphics.getItemAt(0);S.isSupportedGraphic(Na)===e.SupportedGraphicResult.SUPPORTED&&(Na=yield oa._setupReshape3DOperation(Na,ha,ka,!0),qa(Na)||(Ka.onEnd(),Ka.destroy(),oa._setUpdateOperationHandle(Na,ha)))}});return function(){return Ma.apply(this,arguments)}}()});Ja.push(...this._getHandlesForComponent(Ka,ha),this.view.on("immediate-click",
Ma=>this._getCommonUpdateOperationClickHandlers(Ka,Ma,ha),t.ViewEventPriorities.WIDGET),this.view.on("key-down",Ma=>this._getCommonUpdateOperationKeyDownHandlers(Ka,Ma),t.ViewEventPriorities.WIDGET),this.view.on("key-down",Ma=>{Ma.key!==l.SKETCH_KEYS.constraint||Ma.repeat||(za.preserveAspectRatio=!za.preserveAspectRatio,Ma.stopPropagation())},t.ViewEventPriorities.WIDGET),this.view.on("key-up",Ma=>{Ma.key===l.SKETCH_KEYS.constraint&&(za.preserveAspectRatio=!za.preserveAspectRatio,Ma.stopPropagation())},
t.ViewEventPriorities.WIDGET));return Ka});return function(ba,ha,ka){return aa.apply(this,arguments)}}();ma._setupMove2DOperation=function(){var aa=h._asyncToGenerator(function*(ba,ha,ka){var pa=this;this.updateGraphics.addMany(ba);yield this._updateSpatialReference(ba);const oa=yield this._getGraphicMover(ba,ha,ka);if(qa(oa))return oa;const ra=new P.UpdateOperationHandle({activeComponent:oa,tool:"move",type:"update",onEnd:()=>{var Da;this._displayDefaultCursor();ya.forEach(za=>za.remove());Fa.forEach(za=>
za.remove());ya=[];Fa=[];oa.destroy();null==(Da=this._internalGraphicsLayer)?void 0:Da.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const Da=this.updateGraphics.toArray();R(ra,Da);ra.refreshComponent();this._emitUndoEvent({graphics:Da,tool:"move"})},redo:()=>{const Da=this.updateGraphics.toArray();W(ra,Da);ra.refreshComponent();this._emitRedoEvent({graphics:Da,tool:"move"})},addToSelection:function(){var Da=h._asyncToGenerator(function*(za){yield pa._updateSpatialReference(za);pa.updateGraphics.push(za);
oa.graphics=pa.updateGraphics.toArray();pa.emit("update",{graphics:pa.updateGraphics.toArray(),state:"active",aborted:!1,tool:pa.activeTool,toolEventInfo:{added:[za],removed:[],type:"selection-change"},type:"update"})});return function(za){return Da.apply(this,arguments)}}(),removeFromSelection:Da=>{const za=this.updateGraphics.indexOf(Da);ra.history.undo.forEach(Ka=>Ka.updates.splice(za,1));ra.history.redo.forEach(Ka=>Ka.updates.splice(za,1));this.updateGraphics.remove(Da);const Ja=this.updateGraphics.toArray();
this.emit("update",{graphics:Ja,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Da],type:"selection-change"},type:"update"});0===this.updateGraphics.length?ra.complete():oa.graphics=Ja}});let Aa=!1,Fa=[ka.on("immediate-click",Da=>this._getCommonUpdateOperationClickHandlers(ra,Da,ha),t.ViewEventPriorities.WIDGET),ka.on("key-down",Da=>{this._getCommonUpdateOperationKeyDownHandlers(ra,Da);Da.key!==l.SKETCH_KEYS.constraint||Da.repeat||(Aa=!0,oa.enableMoveAllGraphics=!oa.enableMoveAllGraphics)},
t.ViewEventPriorities.WIDGET),ka.on("key-up",Da=>{Da.key===l.SKETCH_KEYS.constraint&&Aa&&(Aa=!1,oa.enableMoveAllGraphics=!oa.enableMoveAllGraphics)},t.ViewEventPriorities.WIDGET)],ya=this._getHandlesForComponent(ra,ha);return ra});return function(ba,ha,ka){return aa.apply(this,arguments)}}();ma._setupReshape3DOperation=function(){var aa=h._asyncToGenerator(function*(ba,ha,ka,pa=!1){var oa=this;const ra=yield this._requireModule(new Promise((Da,za)=>d(["../../views/3d/interactive/editingTools"],Da,
za)));if(qa(ra))return ra;this.snappingOptions.enabledToggled=!1;const Aa=new ra.module.GraphicReshapeTool({view:ka,graphic:ba,enableZVertex:ha.enableZ&&"move"===ha.reshapeOptions.vertexOperation,enableZShape:ha.enableZ&&"move"===ha.reshapeOptions.shapeOperation,enableMoveGraphic:"move"===ha.reshapeOptions.shapeOperation||"move-xy"===ha.reshapeOptions.shapeOperation,enableMidpoints:"split"===ha.reshapeOptions.edgeOperation,enableEdgeOffset:"offset"===ha.reshapeOptions.edgeOperation,snappingManager:this._snappingManager});
ka.tools.add(Aa);pa||this.updateGraphics.add(ba);const Fa=[],ya=new P.UpdateOperationHandle({activeComponent:Aa,tool:"reshape",type:"update",onEnd:()=>{var Da;Fa.forEach(za=>za.remove());Fa.length=0;null==(Da=this.view.tools)?void 0:Da.remove(Aa);Aa.destroyed||Aa.destroy()},canUndo:()=>Aa.canUndo,undo:()=>{Aa.undo();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"reshape"})},canRedo:()=>Aa.canRedo,redo:()=>{Aa.redo();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"reshape"})},
addToSelection:function(){var Da=h._asyncToGenerator(function*(za){oa.updateGraphics.add(za);oa.emit("update",{graphics:oa.updateGraphics.toArray(),state:"active",aborted:!1,tool:oa.activeTool,toolEventInfo:{added:[za],removed:[],type:"selection-change"},type:"update"});za=yield oa._setupMove3DOperation(oa.updateGraphics.toArray(),ha,ka,"transform",!0);qa(za)||(ya.onEnd(),ya.destroy(),oa._setUpdateOperationHandle(za,ha))});return function(za){return Da.apply(this,arguments)}}(),removeFromSelection:Da=>
{this.updateGraphics.remove(Da);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Da],type:"selection-change"},type:"update"});ya.complete()},toggleTool:function(){var Da=h._asyncToGenerator(function*(){if(!1!==ha.toggleToolOnClick){var za=yield oa._setupGraphicTransform3DOperation(oa.updateGraphics.toArray(),ha,ka,!0);qa(za)||(ya.onEnd(),ya.destroy(),oa._setUpdateOperationHandle(za,ha))}});return function(){return Da.apply(this,
arguments)}}()});Fa.push(...this._getHandlesForComponent(ya,ha),ka.on("immediate-click",Da=>this._getCommonUpdateOperationClickHandlers(ya,Da,ha),t.ViewEventPriorities.WIDGET),ka.on("key-down",Da=>{this._getCommonUpdateOperationKeyDownHandlers(ya,Da);Da.key===l.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!0,Da.stopPropagation())},t.ViewEventPriorities.WIDGET),ka.on("key-up",Da=>{Da.key===l.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!1,Da.stopPropagation())},
t.ViewEventPriorities.WIDGET));return ya});return function(ba,ha,ka){return aa.apply(this,arguments)}}();ma._setupTransformOrReshape2DOperation=function(){var aa=h._asyncToGenerator(function*(ba,ha,ka,pa){var oa=this;this.updateGraphics.addMany(ba);yield this._updateSpatialReference(ba);ba="transform"===ha?yield this._getBox(ba,ka,pa):yield this._getReshape(ba,ka,pa);if(qa(ba))return ba;const ra=new P.UpdateOperationHandle({activeComponent:ba,type:"update",onEnd:()=>{Fa.forEach(ya=>ya.remove());Aa.forEach(ya=>
ya.remove());Fa=[];Aa=[];ra.activeComponent&&!ra.activeComponent.destroyed&&ra.activeComponent.destroy();this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{R(ra,this.updateGraphics.toArray());ra.refreshComponent();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:ra.tool})},redo:()=>{W(ra,this.updateGraphics.toArray());ra.refreshComponent();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:ra.tool})},addToSelection:function(){var ya=h._asyncToGenerator(function*(Da){var za=
ra.activeComponent;if("reshape"===za.type){za=[...oa.updateGraphics,Da];oa.updateGraphics.removeAll();za=yield oa._setupMove2DOperation(za,ka,pa);if(qa(za))return;ra.onEnd();ra.destroy();oa._setUpdateOperationHandle(za,ka)}else oa.updateGraphics.add(Da),za.graphics=oa.updateGraphics.toArray(),za.refresh(),ra.resetHistory();oa.emit("update",{graphics:oa.updateGraphics.toArray(),state:"active",aborted:!1,tool:oa.activeTool,toolEventInfo:{added:[Da],removed:[],type:"selection-change"},type:"update"})});
return function(Da){return ya.apply(this,arguments)}}(),removeFromSelection:function(){var ya=h._asyncToGenerator(function*(Da){const za=oa.updateGraphics.indexOf(Da);ra.history.undo.forEach(Ka=>Ka.updates.splice(za,1));ra.history.redo.forEach(Ka=>Ka.updates.splice(za,1));oa.updateGraphics.remove(Da);const Ja=oa.updateGraphics.toArray();if(0===Ja.length)ra.complete();else{const Ka=Ja[0].geometry;1!==Ja.length||!y.isSome(Ka)||"point"!==Ka.type&&"multipoint"!==Ka.type?ra.activeComponent.graphics=Ja:
ra.toggleTool()}oa.emit("update",{graphics:Ja,state:"active",aborted:!1,tool:oa.activeTool,toolEventInfo:{added:[],removed:[Da],type:"selection-change"},type:"update"})});return function(Da){return ya.apply(this,arguments)}}(),toggleTool:function(){var ya=h._asyncToGenerator(function*(){if(!(1<oa.updateGraphics.length)){var Da=oa.updateGraphics.getItemAt(0),za=Da.geometry;y.isSome(za)&&("reshape"===ra.tool&&("point"===za.type||"multipoint"===za.type)||"transform"===ra.tool&&"extent"===za.type)||(za=
null,"transform"===ra.tool?za=yield oa._getReshape([Da],ka,pa):"reshape"===ra.tool&&(za=yield oa._getBox([Da],ka,pa)),qa(za)||(ra.activeComponent.destroy(),ra.activeComponent=za,ra.activeComponent&&(Fa.forEach(Ja=>Ja.remove()),Fa=oa._getHandlesForComponent(ra,ka))))}});return function(){return ya.apply(this,arguments)}}()});let Aa=[pa.on("immediate-click",ya=>this._getCommonUpdateOperationClickHandlers(ra,ya,ka),t.ViewEventPriorities.WIDGET),pa.on("key-down",ya=>{this._getCommonUpdateOperationKeyDownHandlers(ra,
ya);ya.key!==l.SKETCH_KEYS.snappingToggle||ya.repeat||(this.snappingOptions.enabledToggled=!0,ya.stopPropagation());ya.key===l.SKETCH_KEYS.constraint&&!ya.repeat&&ra&&(ya=ra.activeComponent)&&"box"===ya.type&&(ya.preserveAspectRatio=!ya.preserveAspectRatio)},t.ViewEventPriorities.WIDGET),pa.on("key-up",ya=>{var Da;ya.key===l.SKETCH_KEYS.snappingToggle&&"reshape"===(null==ra?void 0:null==(Da=ra.activeComponent)?void 0:Da.type)&&(this.snappingOptions.enabledToggled=!1,ya.stopPropagation());ya.key===
l.SKETCH_KEYS.constraint&&ra&&(ya=ra.activeComponent)&&"box"===ya.type&&(ya.preserveAspectRatio=!ya.preserveAspectRatio)},t.ViewEventPriorities.WIDGET)],Fa=this._getHandlesForComponent(ra,ka);return ra});return function(ba,ha,ka,pa){return aa.apply(this,arguments)}}();ma._getGraphicMover=function(){var aa=h._asyncToGenerator(function*(ba,ha,ka){({enableMoveAllGraphics:ha}=ha);const pa=yield this._requireModule(new Promise((oa,ra)=>d(["../../views/draw/support/GraphicMover"],Aa=>oa(va(Aa)),ra)));return qa(pa)?
pa:new pa.module.default({enableMoveAllGraphics:ha,highlightsEnabled:!0,indicatorsEnabled:!1,graphics:ba,view:ka,callbacks:{onGraphicMoveStart:({dx:oa,dy:ra,graphic:Aa})=>{this._displayGrabbingCursor();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:oa,dy:ra,mover:Aa,type:"move-start"},type:"update"})},onGraphicMove:({dx:oa,dy:ra,graphic:Aa})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,
tool:this.activeTool,toolEventInfo:{dx:oa,dy:ra,mover:Aa,type:"move"},type:"update"}),onGraphicMoveStop:({dx:oa,dy:ra,graphic:Aa})=>{this._displayPointerCursor();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:oa,dy:ra,mover:Aa,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})});return function(ba,ha,ka){return aa.apply(this,arguments)}}();
ma._getBox=function(){var aa=h._asyncToGenerator(function*(ba,ha,ka){const {enableRotation:pa,enableScaling:oa,preserveAspectRatio:ra}=ha;ha=yield this._requireModule(new Promise((Aa,Fa)=>d(["../../views/draw/support/Box"],ya=>Aa(va(ya)),Fa)));return qa(ha)?ha:new ha.module.default({graphics:ba,enableRotation:pa,enableScaling:oa,preserveAspectRatio:ra,layer:this._internalGraphicsLayer,view:ka,callbacks:{onMoveStart:Aa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,
tool:this.activeTool,toolEventInfo:{...Aa},type:"update"}),onMove:Aa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Aa},type:"update"}),onMoveStop:Aa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Aa},type:"update"}),onScaleStart:Aa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Aa},
type:"update"}),onScale:Aa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Aa},type:"update"}),onScaleStop:Aa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Aa},type:"update"}),onRotateStart:Aa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Aa},type:"update"}),onRotate:Aa=>
this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Aa},type:"update"}),onRotateStop:Aa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Aa},type:"update"})}})});return function(ba,ha,ka){return aa.apply(this,arguments)}}();ma._getReshape=function(){var aa=h._asyncToGenerator(function*(ba,ha,ka){var pa,oa;const ra="split"===(null==(pa=ha.reshapeOptions)?
void 0:pa.edgeOperation);ha="move"===(null==(oa=ha.reshapeOptions)?void 0:oa.shapeOperation);oa=yield this._requireModule(new Promise((Aa,Fa)=>d(["../../views/draw/support/Reshape"],ya=>Aa(va(ya)),Fa)));return qa(oa)?oa:new oa.module.default({enableMidpoints:ra,enableMovement:ha,graphic:ba[0],layer:this._internalGraphicsLayer,snappingManager:this._snappingManager,view:ka,callbacks:{onReshapeStart:Aa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,
toolEventInfo:{...Aa},type:"update"}),onReshape:Aa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Aa},type:"update"}),onReshapeStop:({mover:Aa,type:Fa})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:Aa,type:Fa},type:"update"}),onMoveStart:({dx:Aa,dy:Fa,mover:ya,type:Da})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",
aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Aa,dy:Fa,mover:ya,type:Da},type:"update"}),onMove:({dx:Aa,dy:Fa,mover:ya,type:Da})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Aa,dy:Fa,mover:ya,type:Da},type:"update"}),onMoveStop:({dx:Aa,dy:Fa,mover:ya,type:Da})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Aa,dy:Fa,mover:ya,type:Da},type:"update"}),
onVertexAdd:({added:Aa,type:Fa,vertices:ya})=>{Aa=Aa.map(Da=>r.geometryToCoordinates(Da.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:Aa,vertices:ya,type:Fa},type:"update"})},onVertexRemove:({removed:Aa,type:Fa,vertices:ya})=>{Aa=Aa.map(Da=>r.geometryToCoordinates(Da.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:Aa,
vertices:ya,type:Fa},type:"update"})}}})});return function(ba,ha,ka){return aa.apply(this,arguments)}}();ma._getHandlesForComponent=function(aa,ba){const ha=aa.activeComponent;switch(ha.type){case "graphic-mover":return[ha.on("graphic-click",({graphic:ka,viewEvent:pa})=>{var oa;null!=(oa=pa.native)&&oa.shiftKey&&(pa.stopPropagation(),aa.removeFromSelection(ka))}),ha.on("graphic-move-start",ka=>aa.addToHistory(da(ka.allGraphics)))];case "box":return[ha.on("graphic-click",ka=>this._onTransformOrReshape2DGraphicClick(aa,
ba,ka)),ha.on("move-start",ka=>aa.addToHistory(da(ka.graphics))),ha.on("rotate-start",ka=>aa.addToHistory(da(ka.graphics))),ha.on("scale-start",ka=>aa.addToHistory(da(ka.graphics)))];case "reshape":return[ha.on("graphic-click",ka=>this._onTransformOrReshape2DGraphicClick(aa,ba,ka)),ha.on("move-start",ka=>aa.addToHistory(da([ka.mover]))),ha.on("reshape-start",ka=>aa.addToHistory(da([ka.graphic]))),ha.on("vertex-add",ka=>aa.addToHistory(da([ka.oldGraphic]))),ha.on("vertex-remove",ka=>aa.addToHistory(da([ka.oldGraphic])))];
case "move-3d":return[ha.on("graphic-move-start",ka=>{aa.addToHistory(da(ka.allGraphics));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:0<ka.allGraphics.length?ka.allGraphics[0]:null,type:"move-start"},type:"update"})}),ha.on("graphic-move",ka=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ka.dx,dy:ka.dy,mover:0<ka.allGraphics.length?
ka.allGraphics[0]:null,type:"move"},type:"update"})}),ha.on("graphic-move-stop",ka=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:0<ka.allGraphics.length?ka.allGraphics[0]:null,type:"move-stop"},type:"update"})}),ha.on("immediate-click",ka=>{ka.shiftKey?this._toggleSelection([ka.graphic],aa,ba):aa.toggleTool()})];case "transform-3d":return[ha.on("record-undo",({record:ka})=>{aa.addToHistory({updates:[ka]})}),
ha.on("graphic-translate-start",ka=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ka.graphic,dx:ka.dxScreen,dy:ka.dyScreen,type:"move-start"},type:"update"})}),ha.on("graphic-translate-stop",ka=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ka.graphic,dx:ka.dxScreen,dy:ka.dyScreen,type:"move-stop"},type:"update"})}),ha.on("graphic-rotate-start",
ka=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ka.graphic,angle:ka.angle,type:"rotate-start"},type:"update"})}),ha.on("graphic-rotate-stop",ka=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ka.graphic,angle:ka.angle,type:"rotate-stop"},type:"update"})}),ha.on("graphic-scale-start",ka=>{this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ka.graphic,xScale:ka.xScale,yScale:ka.yScale,type:"scale-start"},type:"update"})}),ha.on("graphic-scale-stop",ka=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ka.graphic,xScale:ka.xScale,yScale:ka.yScale,type:"scale-stop"},type:"update"})}),ha.on("graphic-translate",ka=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,
tool:this.activeTool,toolEventInfo:{mover:ka.graphic,dx:ka.dxScreen,dy:ka.dyScreen,type:"move"},type:"update"})}),ha.on("graphic-rotate",ka=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ka.graphic,angle:ka.angle,type:"rotate"},type:"update"})}),ha.on("graphic-scale",ka=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ka.graphic,xScale:ka.xScale,
yScale:ka.yScale,type:"scale"},type:"update"})}),ha.on("immediate-click",ka=>{ka.shiftKey?this._toggleSelection([ka.graphic],aa,ba):aa.toggleTool()})];case "reshape-3d":return[ha.on("reshape",ka=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:ka,type:"update"})}),ha.on("move",ka=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:ka,type:"update"})}),ha.on("vertex-add",
ka=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:ka,type:"update"})}),ha.on("vertex-remove",ka=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:ka,type:"update"})}),ha.on("immediate-click",ka=>{ka.shiftKey?this._toggleSelection([ka.graphic],aa,ba):aa.toggleTool()})]}};ma._onTransformOrReshape2DGraphicClick=function(aa,ba,ha){var ka;const {graphic:pa,
viewEvent:oa}=ha;if(null!=(ka=oa.native)&&ka.shiftKey&&pa.layer===this.layer)return oa.stopPropagation(),aa.removeFromSelection(pa);if(ba.toggleToolOnClick)return oa.stopPropagation(),aa.toggleTool()};ma._setUpdateOperationHandle=function(aa,ba){this._operationHandle=aa;const ha=this.view.map;this._disablePopup(ba);aa.on("complete",()=>{if(aa===this._operationHandle){const ka=this.updateGraphics.toArray(),pa=this._operationHandle.tool;this._operationHandle.destroy();this._operationHandle=null;this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray());
this.updateGraphics.removeAll();ha&&ha.remove(this._internalGraphicsLayer);this._restorePopup(ba);this.emit("update",{graphics:ka,state:"complete",aborted:aa.cancelled,tool:pa,toolEventInfo:null,type:"update"})}})};ma._getCommonUpdateOperationClickHandlers=function(){var aa=h._asyncToGenerator(function*(ba,ha,ka){const pa=n.createScreenPointFromEvent(ha),oa=(yield ha.async(()=>this._getFirstHit(pa))).results;oa.length?ha.native.shiftKey&&this._toggleSelection(oa.map(ra=>ra.graphic),ba,ka)?ha.stopPropagation():
oa.some(ra=>ra.graphic&&this.updateGraphics.includes(ra.graphic))?ha.stopPropagation():ba.complete():ba.complete()});return function(ba,ha,ka){return aa.apply(this,arguments)}}();ma._toggleSelection=function(aa,ba,ha){const ka=!!ha.multipleSelectionEnabled;return aa.some(pa=>null==pa?!1:ka&&pa.layer===this.layer?(this.updateGraphics.includes(pa)?ba.removeFromSelection(pa):ba.addToSelection(pa),!0):!1)};ma._getCommonUpdateOperationKeyDownHandlers=function(aa,ba){if(aa){var ha=ba.key;ha===l.SKETCH_KEYS.undo&&
aa.canUndo()?(ba.stopPropagation(),aa.undo()):ha===l.SKETCH_KEYS.redo&&aa.canRedo()?(ba.stopPropagation(),aa.redo()):ha===l.SKETCH_KEYS.cancel?(ba.stopPropagation(),aa.cancel()):this.allowDeleteKey&&l.SKETCH_KEYS.delete.includes(ha)&&this._onDeleteKey(ba)}};ma._onDeleteKey=function(aa){if(this._operationHandle&&"update"===this._operationHandle.type){var ba=this.activeComponent,ha=this.updateGraphics.toArray();y.isNone(ba)||"reshape-3d"===ba.type||"reshape"===ba.type&&(1!==ha.length||"point"!==y.get(ha[0].geometry,
"type"))||(aa.stopPropagation(),this.delete())}};ma._removeDefaultLayer=function(){this._internalGraphicsLayer&&(this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=y.destroyMaybe(this._internalGraphicsLayer))};ma._isComponentGraphic=function(aa){const {activeComponent:ba}=this;return!aa||y.isNone(ba)?!1:aa.attributes&&aa.attributes.esriSketchTool||"draw-2d"===ba.type&&ba.graphic===aa||("box"===ba.type||"reshape"===ba.type)&&ba.isUIGraphic(aa)};
ma._displayPointerCursor=function(){this.view&&this.view.container&&"pointer"!==this.view.cursor&&(this.view.cursor="pointer")};ma._displayGrabbingCursor=function(){this.view&&this.view.container&&"grabbing"!==this.view.cursor&&(this.view.cursor="grabbing")};ma._displayDefaultCursor=function(){this.view&&this.view.container&&null!==this.view.cursor&&(this.view.cursor=null)};ma._logError=function(aa,ba,ha){Ca.error(new F(aa,ba,ha))};ma._requireModule=function(){var aa=h._asyncToGenerator(function*(ba){const ha=
new AbortController;this._moduleLoaderAbortController=ha;ba=yield ba;return this._moduleLoaderAbortController!==ha||ha.signal.aborted?{requireError:"aborted"}:{module:ba}});return function(ba){return aa.apply(this,arguments)}}();ma._emitUndoEvent=function(aa){this.emit("undo",{...aa,type:"undo"})};ma._emitRedoEvent=function(aa){this.emit("redo",{...aa,type:"redo"})};ma._emitDeleteEvent=function(aa){this.emit("delete",{...aa,type:"delete"})};ma.test=function(){return{operationHandle:this._operationHandle,
defaultUpdateOptions:ta}};ma.wait=function(){return m.whenOnce(()=>!this.updating)};ma._beginAsyncOperation=function(){this._numUpdating+=1;this.notifyChange("updating")};ma._endAsyncOperation=function(){--this._numUpdating;this.notifyChange("updating")};ma._disablePopupEnabled=function(aa){var ba;return"3d"!==(null==(ba=this.view)?void 0:ba.type)||this.updateOnGraphicClick||y.isSome(aa)&&aa.toggleToolOnClick};ma._disablePopup=function(aa){this._disablePopupEnabled(aa)&&(aa=this.view.popup)&&y.isNone(this._originalAutoOpenEnabled)&&
(this._originalAutoOpenEnabled=aa.autoOpenEnabled,aa.autoOpenEnabled=!1)};ma._restorePopup=function(aa){this._disablePopupEnabled(aa)&&(aa=this.view.popup)&&y.isSome(this._originalAutoOpenEnabled)&&(aa.autoOpenEnabled=this._originalAutoOpenEnabled,this._originalAutoOpenEnabled=null)};ma._waitViewReady=function(){var aa=h._asyncToGenerator(function*(){const ba=this.view;ba&&(y.abortMaybe(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,yield k.whenOrAbort(m.whenOnce(()=>
null==ba?void 0:ba.ready),this._viewReadyAbortController.signal))});return function(){return aa.apply(this,arguments)}}();h._createClass(la,[{key:"_defaultUpdateTool",get:function(){return"3d"===this.view.type?"move":"transform"}},{key:"updating",get:function(){return 0<this._numUpdating}},{key:"activeTool",get:function(){return this._operationHandle&&this._operationHandle.tool?this._operationHandle.tool:null}},{key:"activeComponent",get:function(){return this._operationHandle?this._operationHandle.activeComponent:
null}},{key:"createGraphic",get:function(){return!y.isSome(this.activeComponent)||"draw-3d"!==this.activeComponent.type&&"draw-2d"!==this.activeComponent.type?this._get("createGraphic"):y.unwrap(this.activeComponent.graphic)}},{key:"defaultCreateOptions",set:function(aa){this._set("defaultCreateOptions",{...Ba,...aa})}},{key:"defaultUpdateOptions",set:function(aa){this._set("defaultUpdateOptions",{...ta,...aa,reshapeOptions:{...ta.reshapeOptions,...null==aa?void 0:aa.reshapeOptions}})}},{key:"snappingOptions",
set:function(aa){y.isSome(this._snappingManager)&&(this._snappingManager.options=aa);this._set("snappingOptions",aa)}},{key:"state",get:function(){var aa;const ba=!(null==(aa=this.view)||!aa.ready||!this.layer);aa=this._operationHandle;return ba&&aa?"active":ba?"ready":"disabled"}},{key:"view",get:function(){return this._get("view")},set:function(aa){const ba=this._get("view");if(ba){const {container:ha,map:ka}=ba;ha&&(ba.cursor=null);ka&&ka.remove(this._internalGraphicsLayer);this._viewHandles.removeAll();
this.cancel()}this._handles.remove("view-ready");aa&&this._handles.add(m.when(()=>aa.ready,ha=>{this._viewHandles.removeAll();ha&&this._viewHandles.add(this._generateViewHandles(aa))},m.syncAndInitial),"view-ready");this._set("view",aa)}}]);return la}(L.EventedAccessor);c.__decorate([q.property()],u.prototype,"updating",null);c.__decorate([q.property()],u.prototype,"_operationHandle",void 0);c.__decorate([q.property({readOnly:!0})],u.prototype,"activeTool",null);c.__decorate([q.property()],u.prototype,
"activeFillSymbol",void 0);c.__decorate([q.property()],u.prototype,"activeLineSymbol",void 0);c.__decorate([q.property()],u.prototype,"activeVertexSymbol",void 0);c.__decorate([q.property()],u.prototype,"allowDeleteKey",void 0);c.__decorate([q.property({readOnly:!0})],u.prototype,"createGraphic",null);c.__decorate([q.property()],u.prototype,"defaultCreateOptions",null);c.__decorate([q.property()],u.prototype,"defaultUpdateOptions",null);c.__decorate([q.property()],u.prototype,"layer",void 0);c.__decorate([q.property({types:B.symbolTypes})],
u.prototype,"pointSymbol",void 0);c.__decorate([q.property({types:B.symbolTypes})],u.prototype,"polygonSymbol",void 0);c.__decorate([q.property({types:B.symbolTypes})],u.prototype,"polylineSymbol",void 0);c.__decorate([q.property({type:f,nonNullable:!0})],u.prototype,"snappingOptions",null);c.__decorate([q.property()],u.prototype,"_snappingManager",void 0);c.__decorate([q.property({readOnly:!0})],u.prototype,"state",null);c.__decorate([q.property({readOnly:!0})],u.prototype,"updateGraphics",void 0);
c.__decorate([q.property()],u.prototype,"updateOnGraphicClick",void 0);c.__decorate([q.property({types:B.symbolTypes})],u.prototype,"updatePointSymbol",void 0);c.__decorate([q.property({types:B.symbolTypes})],u.prototype,"updatePolygonSymbol",void 0);c.__decorate([q.property({types:B.symbolTypes})],u.prototype,"updatePolylineSymbol",void 0);c.__decorate([q.property({types:B.symbolTypes})],u.prototype,"vertexSymbol",void 0);c.__decorate([q.property({value:null})],u.prototype,"view",null);return u=
c.__decorate([E.subclass("esri.widgets.Sketch.SketchViewModel")],u)})},"esri/views/DOMContainer":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/domUtils ../core/reactiveUtils ../core/scheduling ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./overlay/ViewOverlay ../widgets/Popup".split(" "),function(d,h,c,B,g,u,F,L,K,M,y,k,m){function q(p){p&&(B.empty(p),
p.parentNode&&p.parentNode.removeChild(p))}const I=[0,0];d.DOMContainer=p=>{p=function(E){function x(...r){var G=E.call(this,...r)||this;G._freqInfo={freq:16,time:750};G._overlayRenderTaskHandle=null;G.height=0;G.position=null;G.resizing=!1;G.root=null;G.surface=null;G.suspended=!0;G.ui=null;G.userContent=null;G.width=0;G.widthBreakpoint=null;G.handles.add([G.watch("cursor",H=>{const w=G.surface;w&&w.setAttribute("data-cursor",H)}),G.watch("interacting",H=>{const w=G.surface;w&&w.setAttribute("data-interacting",
H.toString())})]);return G}h._inheritsLoose(x,E);var A=x.prototype;A.initialize=function(){this.handles.add(this.watch("ui",(r,G)=>this._handleUIChange(r,G)));this._wireUI(this.ui);this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])};A.destroy=function(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)};A.blur=function(){this.surface&&this.surface.blur()};
A.focus=function(){this.surface&&this.surface.focus()};A.pageToContainer=function(r,G,H){const w=this.position;r-=w[0];G-=w[1];H?(H[0]=r,H[1]=G):H=[r,G];return H};A.containerToPage=function(r,G,H){const w=this.position;r+=w[0];G+=w[1];H?(H[0]=r,H[1]=G):H=[r,G];return H};A._handleUIChange=function(r,G){G&&(this.handles.remove("ui"),G.destroy());r&&this._wireUI(r);this._set("ui",r)};A._wireUI=function(r){this.handles.remove("ui");r&&(r.view=this,this.handles.add([g.watch(()=>this.root,G=>{if(G){{const H=
document.createElement("div");G.appendChild(H);G=H}}else G=null;r.container=G},g.initial),g.watch(()=>this.popup,(G,H)=>{H&&r.remove(H,"popup");G&&(G.view=r.view,r.add(G,{key:"popup",position:"manual"}))},g.initial)],"ui"))};A._stopMeasuring=function(){this.handles.remove("measuring");this._get("resizing")&&this._set("resizing",!1)};A._startMeasuring=function(){const r=this._freqInfo;r.freq=16;r.time=750;this.handles.add([(()=>{const G=()=>{r.freq=16;r.time=750};window.addEventListener("resize",G);
return{remove(){window.removeEventListener("resize",G)}}})(),u.addFrameTask({prepare:G=>{const H=this._measure(),w=this._freqInfo;w.time+=G.deltaTime;H&&(w.freq=16,this._get("resizing")||this._set("resizing",!0));w.time<w.freq||(w.time=0,this._position()||H?w.freq=16:w.freq=Math.min(750,2*w.freq),!H&&512<=w.freq&&this._get("resizing")&&this._set("resizing",!1))}})],"measuring");this._measure();this._position()};A._measure=function(){var r=this.container;const G=r?r.clientWidth:0;r=r?r.clientHeight:
0;if(0===G||0===r)return this.suspended||this._set("suspended",!0),!1;const H=this.width,w=this.height;if(G===H&&r===w)return this.suspended&&this._set("suspended",!1),!1;this._set("width",G);this._set("height",r);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:H,oldHeight:w,width:G,height:r});return!0};A._position=function(){var r=this.container;const G=this.position;{const H=(r.ownerDocument||window.document).defaultView;r=r.getBoundingClientRect();I[0]=r.left+H.pageXOffset;
I[1]=r.top+H.pageYOffset}return G&&I[0]===G[0]&&I[1]===G[1]?!1:(this._set("position",[I[0],I[1]]),!0)};A.forceDOMReadyCycle=function(){};h._createClass(x,[{key:"container",set:function(r){var G=this._get("container");if(G!==r)if(this.handles.remove("dom-size"),this._stopMeasuring(),G&&(G.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),q(this.root),this._set("root",
null),B.reparent(this.userContent,G),q(this.userContent),this._set("userContent",null)),r){r.classList.add("esri-view");G=document.createElement("div");G.className="esri-view-user-storage";B.reparent(r,G);r.appendChild(G);this._set("userContent",G);G=document.createElement("div");G.className="esri-view-root";r.insertBefore(G,r.firstChild);this._set("root",G);const H=document.createElement("div");H.className="esri-view-surface";H.setAttribute("role","application");H.tabIndex=0;G.appendChild(H);this._set("surface",
H);const w=new k;G.appendChild(w.surface);this._set("overlay",w);w.watch("needsRender",e=>{e&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=u.addFrameTask({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)});this.forceDOMReadyCycle();this.handles.add(g.watch(()=>this.size,e=>{const [z,S]=e;z>=document.body.clientWidth||S>=document.body.clientHeight?H.classList.add("esri-view-surface--inset-outline"):
H.classList.remove("esri-view-surface--inset-outline")},g.initial),"dom-size");this._set("container",r);this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}},{key:"focused",get:function(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}},{key:"popup",get:function(){return this._get("popup")||new m({view:this})},set:function(r){const G=this._get("popup");
G&&G!==r&&G.destroy();this._set("popup",r)}},{key:"size",get:function(){return[this.width,this.height]}}]);return x}(p);c.__decorate([F.property({value:null,cast:E=>B.byId(E)})],p.prototype,"container",null);c.__decorate([F.property({readOnly:!0})],p.prototype,"focused",null);c.__decorate([F.property({readOnly:!0})],p.prototype,"height",void 0);c.__decorate([F.property({type:m})],p.prototype,"popup",null);c.__decorate([F.property({type:k})],p.prototype,"overlay",void 0);c.__decorate([F.property({readOnly:!0})],
p.prototype,"position",void 0);c.__decorate([F.property({readOnly:!0})],p.prototype,"resizing",void 0);c.__decorate([F.property({readOnly:!0})],p.prototype,"root",void 0);c.__decorate([F.property({value:null,readOnly:!0})],p.prototype,"size",null);c.__decorate([F.property({readOnly:!0})],p.prototype,"surface",void 0);c.__decorate([F.property({readOnly:!0})],p.prototype,"suspended",void 0);c.__decorate([F.property()],p.prototype,"ui",void 0);c.__decorate([F.property({readOnly:!0})],p.prototype,"userContent",
void 0);c.__decorate([F.property({readOnly:!0})],p.prototype,"width",void 0);c.__decorate([F.property()],p.prototype,"widthBreakpoint",void 0);return p=c.__decorate([y.subclass("esri.views.DOMContainer")],p)};d.isDOMContainer=function(p){return p&&"focus"in p};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/overlay/ViewOverlay":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../libs/maquette/projection ../../libs/maquette/projector ../support/WatchUpdatingTracking".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k){c=function(m){function q(){var p=m.apply(this,arguments)||this;p.items=new B;p._watchUpdatingTracking=new k.WatchUpdatingTracking;p._callbacks=new Map;p._projector=y.createProjector();p._hiddenProjector=y.createProjector();return p}d._inheritsLoose(q,m);var I=q.prototype;I.initialize=function(){const p=document.createElement("div");p.className="esri-overlay-surface";this._set("surface",p);this._hiddenSurface=document.createElement("div");this._hiddenSurface.setAttribute("style",
"visibility: hidden;");p.appendChild(this._hiddenSurface);this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,E=>{for(const x of E.added){const A=()=>x.render();this._callbacks.set(x,A);this._projector.append(this.surface,A)}for(const x of E.removed)E=this._projector.detach(this._callbacks.get(x)),this.surface.removeChild(E.domNode),this._callbacks.delete(x)})};I.addItem=function(p){this.items.add(p)};I.removeItem=function(p){this.items.remove(p)};I.destroy=function(){this.items.removeAll();
this._callbacks.forEach(p=>this._projector.detach(p));this._projector=this._callbacks=null;this._watchUpdatingTracking.destroy()};I.render=function(){this._projector.renderNow()};I.computeBoundingRect=function(p){const E=this._hiddenSurface,x=this._hiddenProjector;let A=null;const r=()=>A=p.render();x.append(E,r);x.renderNow();const G={left:0,top:0,right:0,bottom:0};if(A&&A.domNode){const H=A.domNode.getBoundingClientRect();G.left=H.left;G.top=H.top;G.right=H.right;G.bottom=H.bottom}for(x.detach(r);E.firstChild;)E.removeChild(E.firstChild);
return G};I.overlaps=function(p,E){p=this.computeBoundingRect(p);E=this.computeBoundingRect(E);return Math.max(p.left,E.left)<=Math.min(p.right,E.right)&&Math.max(p.top,E.top)<=Math.min(p.bottom,E.bottom)};I.renderCanvas=function(p){if(this.items.some(x=>x.visible)){var E=p.getContext("2d");E.save();E.font=`10px ${getComputedStyle(this.surface).fontFamily}`;this.items.forEach(x=>{E.save();x.renderCanvas(E);E.restore()});E.restore()}};d._createClass(q,[{key:"needsRender",get:function(){return 0<this.items.length}},
{key:"hasVisibleItems",get:function(){return this.items.some(p=>p.visible)}}]);return q}(c);h.__decorate([g.property({readOnly:!0})],c.prototype,"surface",void 0);h.__decorate([g.property({readOnly:!0})],c.prototype,"items",void 0);h.__decorate([g.property({readOnly:!0})],c.prototype,"needsRender",null);h.__decorate([g.property({readOnly:!0})],c.prototype,"_watchUpdatingTracking",void 0);h.__decorate([g.property({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],c.prototype,"updating",void 0);
return c=h.__decorate([K.subclass("esri.views.overlay.ViewOverlay")],c)})},"esri/widgets/Popup":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/Collection ../core/events ../core/Handles ../core/Logger ../core/maybe ../core/reactiveUtils ../core/throttle ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Feature ./Spinner ./Widget ./Feature/support/FeatureContentMixin ./Popup/PopupViewModel ./support/Heading ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../intl/substitute".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p,E,x,A,r,G,H,w,e,z,S,J,O,t){function l(P,U){return void 0===U?`${"esri-popup"}__${P}`:`${"esri-popup"}__${P}-${U}`}const b={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},f=F.getLogger("esri.widgets.Popup"),n={closeButton:!0,featureNavigation:!0};c=function(P){function U(v,N){var R=P.call(this,v,N)||this;R._blurClose=!1;R._blurContainer=!1;R._containerNode=null;R._mainContainerNode=null;R._featureMenuNode=null;R._actionsMenuNode=null;R._focusClose=
!1;R._focusContainer=!1;R._focusDockButton=!1;R._focusFeatureMenuButton=!1;R._focusActionsMenuButton=!1;R._focusFirstFeature=!1;R._focusFirstAction=!1;R._handles=new u;R._pointerOffsetInPx=16;R._spinner=null;R._feature=null;R._featureMenuIntersectionObserverCallback=([W])=>{null!=W&&W.isIntersecting&&R.viewModel.featurePage++};R._featureMenuIntersectionObserver=new IntersectionObserver(R._featureMenuIntersectionObserverCallback,{root:window.document});R._displaySpinnerThrottled=M.throttle(()=>R._displaySpinner(),
0);R.actions=null;R.alignment="auto";R.autoCloseEnabled=null;R.autoOpenEnabled=null;R.defaultPopupTemplateEnabled=null;R.content=null;R.collapsed=!1;R.collapseEnabled=!0;R.dockEnabled=!1;R.featureCount=null;R.featureMenuOpen=!1;R.features=null;R.goToOverride=null;R.headingLevel=2;R.highlightEnabled=null;R.location=null;R.label=void 0;R.maxInlineActions=3;R.messages=null;R.messagesCommon=null;R.promises=null;R.selectedFeature=null;R.selectedFeatureIndex=null;R.spinnerEnabled=!0;R.title=null;R.updateLocationEnabled=
null;R.view=null;R.viewModel=new H;R.visible=null;R.visibleElements={...n};R._addSelectedFeatureIndexHandle();R.own([y.watch(d._assertThisInitialized(R),"viewModel.screenLocation",()=>R._positionContainer()),y.watch(d._assertThisInitialized(R),["viewModel.active","dockEnabled"],()=>R._toggleScreenLocationEnabled()),y.watch(d._assertThisInitialized(R),"viewModel.screenLocation",(W,ea)=>{!!W!==!!ea&&R.reposition()}),y.watch(d._assertThisInitialized(R),["viewModel.view.padding","viewModel.view.size",
"viewModel.active","viewModel.location","alignment"],()=>R.reposition()),y.watch(d._assertThisInitialized(R),"spinnerEnabled",W=>R._spinnerEnabledChange(W)),y.watch(d._assertThisInitialized(R),"viewModel.view.size",(W,ea)=>R._updateDockEnabledForViewSize(W,ea)),y.watch(d._assertThisInitialized(R),"viewModel.view",(W,ea)=>R._viewChange(W,ea)),y.watch(d._assertThisInitialized(R),"viewModel.view.ready",(W,ea)=>R._viewReadyChange(W,ea)),y.watch(d._assertThisInitialized(R),["viewModel.waitingForResult",
"viewModel.location"],()=>{R._hideSpinner();R._displaySpinnerThrottled()}),y.watch(d._assertThisInitialized(R),["selectedFeatureWidget.viewModel.title","selectedFeatureWidget.viewModel.state"],()=>R._setTitleFromFeatureWidget()),y.watch(d._assertThisInitialized(R),["selectedFeatureWidget.viewModel.content","selectedFeatureWidget.viewModel.state"],()=>R._setContentFromFeatureWidget()),y.whenFalse(d._assertThisInitialized(R),"collapsed",()=>{var W,ea;"xsmall"===(null==(W=R.viewModel)?void 0:null==(ea=
W.view)?void 0:ea.widthBreakpoint)&&R.viewModel.active&&R.collapseEnabled&&R.viewModel.centerAtLocation()}),y.on(d._assertThisInitialized(R),"viewModel.allActions","change",()=>R._watchActions()),y.init(d._assertThisInitialized(R),"viewModel.allActions",()=>R._watchActions()),y.watch(d._assertThisInitialized(R),"viewModel.featureViewModels",()=>R._featureMenuViewportScrollTop())]);return R}d._inheritsLoose(U,P);var T=U.prototype;T.destroy=function(){var v,N;this._destroySelectedFeatureWidget();this._destroySpinner();
null==(v=this._handles)?void 0:v.destroy();this._unobserveFeatureMenuObserver();null==(N=this._featureMenuIntersectionObserver)?void 0:N.disconnect();this._handles=null};T.castVisibleElements=function(v){return{...n,...v}};T.blur=function(){const {active:v}=this.viewModel;v||f.warn("Popup can only be blurred when currently active.");this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0;this.scheduleRender()};T.clear=function(){this.viewModel.clear()};T.close=function(){this.visible=
!1};T.fetchFeatures=function(v,N){return this.viewModel.fetchFeatures(v,N)};T.focus=function(){const {active:v}=this.viewModel;v||f.warn("Popup can only be focused when currently active.");this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0;this.scheduleRender()};T.next=function(){return this.viewModel.next()};T.open=function(v){var N,R;this._handles.remove("selected-index");const W={collapsed:v?!!v.collapsed:!1,actionsMenuOpen:v?!!v.actionsMenuOpen:!1,featureMenuOpen:v?!!v.featureMenuOpen:
!1};"xsmall"===(null==(N=this.viewModel)?void 0:null==(R=N.view)?void 0:R.widthBreakpoint)&&(W.collapsed=!0);this.set(W);this.viewModel.open(v);this._shouldFocus(v);this._addSelectedFeatureIndexHandle()};T.previous=function(){return this.viewModel.previous()};T.reposition=function(){this.renderNow();this._positionContainer();this._setCurrentAlignment()};T.triggerAction=function(v){this.viewModel.triggerAction(v)};T.render=function(){var v,N,R,W;const {actionsMenuOpen:ea,dockEnabled:da,featureMenuVisible:qa,
dividedActions:va,currentAlignment:Ca,currentDockPosition:Ba}=this,{active:ta}=this.viewModel;var {menuActions:fa}=va;fa=ta&&1<fa.length&&ea;const la=null==(v=this.selectedFeature)?void 0:null==(N=v.layer)?void 0:N.title;v=null==(R=this.selectedFeature)?void 0:null==(W=R.layer)?void 0:W.id;return J.tsx("div",{class:this.classes("esri-popup",{["esri-popup--aligned-top-center"]:"top-center"===Ca,["esri-popup--aligned-bottom-center"]:"bottom-center"===Ca,["esri-popup--aligned-top-left"]:"top-left"===
Ca,["esri-popup--aligned-bottom-left"]:"bottom-left"===Ca,["esri-popup--aligned-top-right"]:"top-right"===Ca,["esri-popup--aligned-bottom-right"]:"bottom-right"===Ca,["esri-popup--is-docked"]:ta&&da,["esri-popup--shadow"]:ta&&!da,["esri-popup--is-docked-top-left"]:"top-left"===Ba,["esri-popup--is-docked-top-center"]:"top-center"===Ba,["esri-popup--is-docked-top-right"]:"top-right"===Ba,["esri-popup--is-docked-bottom-left"]:"bottom-left"===Ba,["esri-popup--is-docked-bottom-center"]:"bottom-center"===
Ba,["esri-popup--is-docked-bottom-right"]:"bottom-right"===Ba,["esri-popup--feature-menu-open"]:qa,["esri-popup--actions-menu-open"]:fa}),role:"presentation","data-layer-title":la,"data-layer-id":v,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},ta?[this.renderMainContainer(),this.renderPointer()]:null)};T.renderLoadingIcon=function(){return J.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-loading-indicator","esri-rotating")})};
T.renderNavigationLoading=function(){const {messagesCommon:v}=this;return this.viewModel.pendingPromisesCount?J.tsx("div",{key:l("loading-container"),role:"presentation",class:"esri-popup__loading-container","aria-label":v.loading,title:v.loading},this.renderLoadingIcon()):null};T.renderPreviousIcon=function(){const v=O.isRTL(this.container);return J.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",{["esri-icon-right-triangle-arrow"]:v,["esri-popup__pagination-previous-icon--rtl"]:v,
["esri-icon-left-triangle-arrow"]:!v,["esri-popup__pagination-previous-icon"]:!v})})};T.renderPreviousButton=function(){const {messages:v}=this;return J.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes("esri-popup__button","esri-popup__pagination-previous"),"aria-label":v.previous,title:v.previous},this.renderPreviousIcon())};T.renderNextIcon=function(){const v=O.isRTL(this.container);return J.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",
{["esri-icon-left-triangle-arrow"]:v,["esri-popup__pagination-next-icon--rtl"]:v,["esri-icon-right-triangle-arrow"]:!v,["esri-popup__pagination-next-icon"]:!v})})};T.renderNextButton=function(){const {messages:v}=this;return J.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes("esri-popup__button","esri-popup__pagination-next"),"aria-label":v.next,title:v.next},this.renderNextIcon())};T.renderFeatureMenuButton=function(){const {featureMenuOpen:v,
featureMenuId:N,messagesCommon:R}=this,{featureCount:W,selectedFeatureIndex:ea}=this.viewModel;return J.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes("esri-popup__button","esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":N,"aria-expanded":v.toString(),"aria-label":R.menu,title:R.menu},this._getPageText(W,
ea))};T.renderNavigationButtons=function(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null};T.renderDockIcon=function(){const {dockEnabled:v}=this,N=this._wouldDockTo();return J.tsx("span",{"aria-hidden":"true",class:this.classes({["esri-icon-minimize"]:v,["esri-popup__icon--dock-icon"]:!v,["esri-icon-dock-right"]:!v&&("top-right"===N||"bottom-right"===N),["esri-icon-dock-left"]:!v&&("top-left"===
N||"bottom-left"===N),["esri-icon-maximize"]:!v&&"top-center"===N,["esri-icon-dock-bottom"]:!v&&"bottom-center"===N},"esri-popup__icon")})};T.renderDockButton=function(){var v,N,R;const {dockEnabled:W,messages:ea}=this,da=null==(v=this.viewModel)?void 0:null==(N=v.view)?void 0:N.widthBreakpoint;v=W?ea.undock:ea.dock;return"xsmall"!==da&&null!=(R=this.dockOptions)&&R.buttonEnabled?J.tsx("div",{role:"button","aria-label":v,title:v,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,
afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes("esri-popup__button","esri-popup__button--dock")},this.renderDockIcon()):null};T.renderTitle=function(){const {title:v}=this.viewModel,{titleId:N,collapsible:R,contentCollapsed:W,messagesCommon:ea}=this;var da={["esri-popup__header-container--button"]:R};const qa=J.tsx(w.Heading,{level:this.headingLevel,class:"esri-popup__header-title",innerHTML:v});da=R?J.tsx("button",{key:`${v}--collapsible`,id:N,title:W?
ea.expand:ea.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",da),"aria-expanded":W?"false":"true",onclick:this._toggleCollapsed,type:"button"},qa):J.tsx("div",{key:v,id:N,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",da)},qa);return v?da:null};T.renderCloseIcon=function(){return J.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-close")})};
T.renderCloseButton=function(){const {visibleElements:v,messagesCommon:N}=this;return v.closeButton?J.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:"esri-popup__button","aria-label":N.close,title:N.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null};T.renderHeader=function(){return J.tsx("header",{class:"esri-popup__header"},this.renderTitle(),J.tsx("div",{class:"esri-popup__header-buttons"},
this.renderDockButton(),this.renderCloseButton()))};T.renderContentContainer=function(){const {contentId:v,hasContent:N,contentCollapsed:R}=this,{content:W}=this.viewModel;return N&&!R?J.tsx("article",{key:W,enterAnimation:this._createFeatureUpdatedAnimation(),id:v,class:"esri-popup__content"},this.renderContent()):null};T.renderActionsMenuButton=function(){const {actionsMenuId:v,actionsMenuButtonId:N,actionsMenuOpen:R,dividedActions:W,messagesCommon:ea}=this,da=R?ea.close:ea.open,{menuActions:qa}=
W;return qa.length?J.tsx("div",{key:l("actions-menu-button"),class:this.classes("esri-popup__button","esri-popup__actions-menu-button"),role:"button",id:N,"aria-haspopup":"true","aria-controls":R?v:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":da,title:da},J.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null};T.renderMenuActions=
function(){const {actionsMenuId:v,actionsMenuButtonId:N,actionsMenuOpen:R,dividedActions:W}=this,{menuActions:ea}=W;return ea.length&&R?J.tsx("ul",{id:v,role:"menu","aria-labelledby":N,key:l("actions"),class:"esri-popup__actions",bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},ea.toArray().map(da=>this.renderAction({action:da,type:"menu-item"}))):null};T.renderInlineActions=function(){const {inlineActions:v}=this.dividedActions;
return!!v.length&&v.toArray().map(N=>this.renderAction({action:N,type:"inline"}))};T.renderInlineActionsContainer=function(){const {inlineActions:v,menuActions:N}=this.dividedActions,R=!!v.length,W=!!N.length;return R||W?J.tsx("div",{key:"inline-actions-container","data-inline-actions":R.toString(),"data-menu-actions":W.toString(),class:"esri-popup__inline-actions-container"},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null};T.renderNavigation=function(){return this.featureNavigationVisible?
J.tsx("section",{key:l("navigation"),class:this.classes("esri-popup__navigation")},this.renderNavigationButtons()):null};T.renderFooter=function(){const {featureNavigationVisible:v,dividedActions:N}=this,{inlineActions:R,menuActions:W}=N,ea=!!R.length,da={["esri-popup__footer--has-pagination"]:v,["esri-popup__footer--has-actions"]:ea,["esri-popup__footer--has-actions-menu"]:!!W.length};return v||ea?J.tsx("div",{key:l("feature-buttons"),class:this.classes("esri-popup__footer",da)},this.renderInlineActionsContainer(),
this.renderNavigation()):null};T.renderFeatureMenuContainer=function(){var {messages:v}=this;const {featureViewModels:N,isLoadingFeature:R}=this.viewModel;v=t.substitute(v.selectedFeatures,{total:N.length});return J.tsx("section",{key:l("menu"),class:"esri-popup__feature-menu"},J.tsx("strong",{class:"esri-popup__feature-menu-header"},v),J.tsx("nav",{bind:this,class:"esri-popup__feature-menu-viewport","data-node-ref":"_featureMenuViewportNode",afterCreate:O.storeNode},this.renderFeatureMenu(),J.tsx("div",
{class:"esri-popup__feature-menu-observer",bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),R?J.tsx("div",{class:"esri-popup__feature-menu-loader"},this.renderLoadingIcon()):null))};T.renderPointer=function(){return this.dockEnabled?null:J.tsx("div",{key:l("pointer"),class:"esri-popup__pointer",role:"presentation"},J.tsx("div",{class:this.classes("esri-popup__pointer-direction","esri-popup--shadow")}))};T.renderMainContainer=function(){const {dockEnabled:v,currentAlignment:N,currentDockPosition:R,
titleId:W,contentId:ea,collapsible:da,hasContent:qa,contentCollapsed:va,visibleElements:Ca}=this,{title:Ba}=this.viewModel,ta="bottom-left"===N||"bottom-center"===N||"bottom-right"===N||"top-left"===R||"top-center"===R||"top-right"===R,fa="top-left"===N||"top-center"===N||"top-right"===N||"bottom-left"===R||"bottom-center"===R||"bottom-right"===R;return J.tsx("div",{class:this.classes("esri-popup__main-container","esri-widget",{["esri-popup--shadow"]:v,["esri-popup--is-collapsible"]:da,["esri-popup--is-collapsed"]:va}),
tabIndex:Ca.closeButton?null:-1,role:"dialog","aria-labelledby":Ba?W:"","aria-describedby":qa&&!va?ea:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},ta?this.renderFooter():null,ta?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),fa?this.renderFooter():null,fa?this.renderFeatureMenuContainer():null)};T.renderContent=function(){var v;const N=null==(v=this.viewModel)?void 0:v.content;
return N?"string"===typeof N?J.tsx("div",{key:N,innerHTML:N}):this.renderNodeContent(N):null};T.renderActionText=function(v){return J.tsx("span",{key:"text",class:"esri-popup__action-text"},v)};T.renderActionIcon=function(v){const N=this._getActionClass(v),R=this._getActionImage(v),W={["esri-icon-loading-indicator"]:v.active,["esri-rotating"]:v.active,["esri-popup__icon"]:!!N,["esri-popup__action-image"]:!v.active&&!!R};N&&(W[N]=!v.active);return J.tsx("span",{key:"icon","aria-hidden":"true",class:this.classes("esri-popup__icon",
W),styles:this._getIconStyles(R)})};T.renderAction=function(v){const {action:N,type:R}=v;v=this._getActionTitle(N);const W={["esri-popup__action"]:"toggle"!==N.type,["esri-popup__action-toggle"]:"toggle"===N.type,["esri-popup__action-toggle--on"]:"toggle"===N.type&&N.value,["esri-popup__button--disabled"]:N.disabled},ea=[this.renderActionIcon(N),this.renderActionText(v)];v="menu-item"===R?J.tsx("li",{key:N.uid,role:"menuitem",tabIndex:0,title:v,"aria-label":v,class:this.classes("esri-popup__button",
W),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":N.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},ea):J.tsx("div",{key:N.uid,role:"button",tabIndex:0,title:v,"aria-label":v,class:this.classes("esri-popup__button",W),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":N.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},ea);return N.visible?v:null};T.renderFeatureMenuItem=function(v,N){const {messages:R,messagesCommon:W}=this,{selectedFeatureIndex:ea,
selectedFeatureViewModel:da}=this.viewModel;var qa=v===da;const va={["esri-popup__feature-menu-item--selected"]:qa};qa=qa?J.tsx("span",{key:l(`feature-menu-selected-feature-${ea}`),title:R.selectedFeature,"aria-label":R.selectedFeature,class:"esri-icon-check-mark"}):null;v=J.tsx("span",{innerHTML:v.title||W.untitled});return J.tsx("li",{role:"menuitem",tabIndex:-1,key:l(`feature-menu-feature-${ea}`),class:this.classes(va,"esri-popup__feature-menu-item"),bind:this,"data-feature-index":N,onkeyup:this._handleFeatureMenuItemKeyup,
onclick:this._selectFeature,onkeydown:this._selectFeature},J.tsx("span",{class:"esri-popup__feature-menu-title"},v,qa))};T.renderFeatureMenu=function(){const {featureMenuId:v}=this,{featureViewModels:N}=this.viewModel;return 1<N.length?J.tsx("ol",{class:"esri-popup__feature-menu-list",id:v,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},N.filter(R=>!!R.graphic).map((R,W)=>this.renderFeatureMenuItem(R,W))):
null};T._getActionTitle=function(v){const {messages:N,selectedFeature:R,messagesCommon:W}=this,{id:ea}=v,da=null==R?void 0:R.attributes;return(v="zoom-to-feature"===ea?t.substitute(v.title,{messages:N}):"remove-selected-feature"===ea?t.substitute(v.title,{messages:W}):"zoom-to-clustered-features"===ea?t.substitute(v.title,{messages:N}):"browse-clustered-features"===ea?t.substitute(v.title,{messages:N}):v.title)&&da?t.substitute(v,da):v};T._getActionClass=function(v){var {selectedFeature:N}=this;N=
null==N?void 0:N.attributes;const {className:R,image:W}=v;return(v=W||R?R:"esri-icon-default-action")&&N?t.substitute(v,N):v};T._getActionImage=function(v){var {selectedFeature:N}=this;N=null==N?void 0:N.attributes;({image:v}=v);return v&&N?t.substitute(v,N):v};T._createFeatureUpdatedAnimation=function(){return O.cssTransition("enter","esri-popup--feature-updated")};T._getInlineActionCount=function(){const {maxInlineActions:v,featureNavigationVisible:N}=this;if("number"!==typeof v)return null;const R=
Math.round(v);return Math.max(N?R-1:R,0)};T._watchActions=function(){const {allActions:v}=this.viewModel;this.notifyChange("dividedActions");this._handles.remove("actions");v&&v.forEach(N=>{this._handles.add(y.watch(N,"uid active className disabled id title image visible".split(" "),()=>this.scheduleRender()),"actions")})};T._divideActions=function(){var {allActions:v}=this.viewModel;v=v.filter(ea=>ea.visible);const N=this._getInlineActionCount(),R=null===N,W=0===N;return{inlineActions:R?v.slice(0):
W?new B:v.slice(0,N),menuActions:R?new B:W?v.slice(0):v.slice(N)}};T._featureMenuOpenChanged=function(v){v?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0};T._actionsMenuOpenChanged=function(v){v?this._focusFirstAction=!0:this._focusActionsMenuButton=!0};T._setTitleFromFeatureWidget=function(){const {selectedFeatureWidget:v,messagesCommon:N}=this;if(v){var R,W;this.viewModel.title="error"===(null==(R=v.viewModel)?void 0:R.state)?N.errorMessage:(null==(W=v.viewModel)?void 0:W.title)||""}};
T._setContentFromFeatureWidget=function(){const {selectedFeatureWidget:v}=this;v&&(this.viewModel.content=v)};T._unobserveFeatureMenuObserver=function(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)};T._featureMenuIntersectionObserverCreated=function(v){this._unobserveFeatureMenuObserver();this._featureMenuIntersectionObserver.observe(v);this._featureMenuIntersectionObserverNode=v};T._handleFeatureMenuKeyup=function(v){"Escape"===
g.eventKey(v)&&(v.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())};T._handleActionMenuKeyup=function(v){"Escape"===g.eventKey(v)&&(v.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())};T._handleFeatureMenuItemKeyup=function(v){const N=g.eventKey(v);var {_featureMenuNode:R}=this;const W=v.currentTarget["data-feature-index"];if(R){R=R.querySelectorAll("li");var ea=R.length;"ArrowUp"===N?(v.stopPropagation(),
R[(W-1+ea)%ea].focus()):"ArrowDown"===N?(v.stopPropagation(),R[(W+1+ea)%ea].focus()):"Home"===N?(v.stopPropagation(),R[0].focus()):"End"===N&&(v.stopPropagation(),R[R.length-1].focus())}};T._handleActionMenuItemKeyup=function(v){const N=g.eventKey(v);var {_actionsMenuNode:R}=this;const W=v.currentTarget.dataset.actionUid;var {menuActions:ea}=this.dividedActions;ea=ea.findIndex(qa=>qa.uid===W);if(R){R=R.querySelectorAll("li");var da=R.length;"ArrowUp"===N?(v.stopPropagation(),R[(ea-1+da)%da].focus()):
"ArrowDown"===N?(v.stopPropagation(),R[(ea+1+da)%da].focus()):"Home"===N?(v.stopPropagation(),R[0].focus()):"End"===N&&(v.stopPropagation(),R[R.length-1].focus())}};T._handleMainKeyup=function(v){const N=g.eventKey(v);"ArrowLeft"===N&&(v.stopPropagation(),this.previous());"ArrowRight"===N&&(v.stopPropagation(),this.next())};T._spinnerEnabledChange=function(v){this._destroySpinner();v&&(v=this.get("viewModel.view"),this._createSpinner(v))};T._hideSpinner=function(){const {_spinner:v}=this;v&&(v.location=
null,v.hide())};T._displaySpinner=function(){const {_spinner:v}=this;if(v){var {location:N,waitingForResult:R}=this.viewModel;R?v.show({location:N}):v.hide()}};T._getIconStyles=function(v){return{"background-image":v?`url(${v})`:""}};T._shouldFocus=function(){var v=d._asyncToGenerator(function*(N){N.shouldFocus&&(yield K.whenOnce(()=>{var R;return!0===(null==(R=this.viewModel)?void 0:R.active)}),this.focus())});return function(N){return v.apply(this,arguments)}}();T._addSelectedFeatureIndexHandle=
function(){const v=y.watch(this,"viewModel.selectedFeatureIndex",(N,R)=>this._selectedFeatureIndexUpdated(N,R));this._handles.add(v,"selected-index")};T._selectedFeatureIndexUpdated=function(v,N){const {featureCount:R}=this;R&&v!==N&&-1!==v&&(this.featureMenuOpen=this.actionsMenuOpen=!1)};T._destroySelectedFeatureWidget=function(){const {_feature:v}=this;v&&(v.viewModel=null,v&&!v.destroyed&&v.destroy());this._feature=null};T._isScreenLocationWithinView=function(v,N){return-1<v.x&&-1<v.y&&v.x<=N.width&&
v.y<=N.height};T._isOutsideView=function(v){const {popupHeight:N,popupWidth:R,screenLocation:W,side:ea,view:da}=v;if(isNaN(R)||isNaN(N)||!da||!W)return!1;v=da.padding;return"right"===ea&&W.x+R/2>da.width-v.right||"left"===ea&&W.x-R/2<v.left||"top"===ea&&W.y-N<v.top||"bottom"===ea&&W.y+N>da.height-v.bottom?!0:!1};T._calculateAutoAlignment=function(v){if("auto"!==v)return v;const {_pointerOffsetInPx:N,_containerNode:R,_mainContainerNode:W,viewModel:ea}=this,{screenLocation:da,view:qa}=ea;if(L.isNone(da)||
!qa||!R)return"top-center";if(!this._isScreenLocationWithinView(da,qa))return this._get("currentAlignment")||"top-center";var va=(v=W?window.getComputedStyle(W,null):null)?parseInt(v.getPropertyValue("max-height").replace(/[^-\d\.]/g,""),10):0,Ca=v?parseInt(v.getPropertyValue("height").replace(/[^-\d\.]/g,""),10):0;const {height:Ba,width:ta}=R.getBoundingClientRect();v=ta+N;const fa=Math.max(Ba,va,Ca)+N;va=this._isOutsideView({popupHeight:fa,popupWidth:v,screenLocation:da,side:"right",view:qa});Ca=
this._isOutsideView({popupHeight:fa,popupWidth:v,screenLocation:da,side:"left",view:qa});const la=this._isOutsideView({popupHeight:fa,popupWidth:v,screenLocation:da,side:"top",view:qa});v=this._isOutsideView({popupHeight:fa,popupWidth:v,screenLocation:da,side:"bottom",view:qa});return Ca?la?"bottom-right":"top-right":va?la?"bottom-left":"top-left":la?v?"top-center":"bottom-center":"top-center"};T._callCurrentAlignment=function(v){return"function"===typeof v?v.call(this):v};T._getCurrentAlignment=
function(){const {alignment:v,dockEnabled:N}=this;return N||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(v)))};T._setCurrentAlignment=function(){this._set("currentAlignment",this._getCurrentAlignment())};T._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())};T._calculatePositionResult=function(v){const N=["left","right"];O.isRTL(this.container)&&N.reverse();return v.replace(/leading/gi,
N[0]).replace(/trailing/gi,N[1])};T._callDockPosition=function(v){return"function"===typeof v?v.call(this):v};T._getDockPosition=function(){var v;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(null==(v=this.dockOptions)?void 0:v.position)))};T._getCurrentDockPosition=function(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null};T._wouldDockTo=function(){return this.dockEnabled?null:this._getDockPosition()};T._calculateAutoDockPosition=
function(v){var N;if("auto"!==v)return v;v=null==(N=this.viewModel)?void 0:N.view;N=O.isRTL(this.container)?"top-left":"top-right";if(!v)return N;var R=v.padding||{left:0,right:0,top:0,bottom:0};R=v.width-R.left-R.right;({breakpoints:v}=v);return v&&R<=v.xsmall?"bottom-center":N};T._positionContainer=function(v=this._containerNode){v&&(this._containerNode=v);if(v){var {screenLocation:N}=this.viewModel,{width:R}=v.getBoundingClientRect();if(N=this._calculatePositionStyle(N,R))v.style.top=N.top,v.style.left=
N.left,v.style.bottom=N.bottom,v.style.right=N.right}};T._calculateFullWidth=function(v){const {currentAlignment:N,_pointerOffsetInPx:R}=this;return"top-left"===N||"bottom-left"===N||"top-right"===N||"bottom-right"===N?v+R:v};T._calculateAlignmentPosition=function(v,N,R,W){const {currentAlignment:ea,_pointerOffsetInPx:da}=this;W/=2;const qa=R.height-N;R=R.width-v;const {padding:va}=this.view;if("bottom-center"===ea)return{top:N+da-va.top,left:v-W-va.left};if("top-left"===ea)return{bottom:qa+da-va.bottom,
right:R+da-va.right};if("bottom-left"===ea)return{top:N+da-va.top,right:R+da-va.right};if("top-right"===ea)return{bottom:qa+da-va.bottom,left:v+da-va.left};if("bottom-right"===ea)return{top:N+da-va.top,left:v+da-va.left};if("top-center"===ea)return{bottom:qa+da-va.bottom,left:v-W-va.left}};T._calculatePositionStyle=function(v,N){const {dockEnabled:R,view:W}=this;if(W){if(R)return{left:"",top:"",right:"",bottom:""};if(!L.isNone(v)&&N&&(N=this._calculateFullWidth(N),v=this._calculateAlignmentPosition(v.x,
v.y,W,N)))return{top:void 0!==v.top?`${v.top}px`:"auto",left:void 0!==v.left?`${v.left}px`:"auto",bottom:void 0!==v.bottom?`${v.bottom}px`:"auto",right:void 0!==v.right?`${v.right}px`:"auto"}}};T._viewChange=function(v,N){v&&N&&(this.close(),this.clear())};T._viewReadyChange=function(v,N){v?(v=this.get("viewModel.view"),this._wireUpView(v)):N&&(this.close(),this.clear())};T._wireUpView=function(v){this._destroySpinner();if(v){var {spinnerEnabled:N}=this;N&&this._createSpinner(v);this._setDockEnabledForViewSize(this.dockOptions)}};
T._dockingThresholdCrossed=function(v,N,R){const [W,ea]=v,[da,qa]=N,{width:va,height:Ca}=R;return W<=va&&da>va||W>va&&da<=va||ea<=Ca&&qa>Ca||ea>Ca&&qa<=Ca};T._updateDockEnabledForViewSize=function(v,N){if(v&&N){var R=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},W=R.left+R.right,ea=R.top+R.bottom;R=[];var da=[];R[0]=v[0]-W;R[1]=v[1]-ea;da[0]=N[0]-W;da[1]=N[1]-ea;({dockOptions:v}=this);this._dockingThresholdCrossed(R,da,v.breakpoint)&&this._setDockEnabledForViewSize(v);this._setCurrentDockPosition()}};
T._focusDockButtonNode=function(v){this._focusDockButton&&(this._focusDockButton=!1,v.focus())};T._closeButtonNodeUpdated=function(v){this._focusClose?(this._focusClose=!1,v.focus()):this._blurClose&&(this._blurClose=!1,v.blur())};T._mainContainerNodeUpdated=function(v){this._mainContainerNode=v;this._focusContainer?(this._focusContainer=!1,v.focus()):this._blurContainer&&(this._blurContainer=!1,v.blur())};T._featureMenuNodeUpdated=function(v){(this._featureMenuNode=v)&&this._focusFirstFeature&&(this._focusFirstFeature=
!1,v=v.querySelectorAll("li"),v.length&&v[0].focus())};T._actionsMenuNodeUpdated=function(v){(this._actionsMenuNode=v)&&this._focusFirstAction&&(this._focusFirstAction=!1,v=v.querySelectorAll("li"),v.length&&v[0].focus())};T._focusFeatureMenuButtonNode=function(v){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,v.focus())};T._focusActionsMenuButtonNode=function(v){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,v.focus())};T._featureMenuViewportScrollTop=function(){this._featureMenuViewportNode&&
(this._featureMenuViewportNode.scrollTop=0)};T._toggleScreenLocationEnabled=function(){const {dockEnabled:v,viewModel:N}=this;N&&(N.screenLocationEnabled=N.active&&!v)};T._shouldDockAtCurrentViewSize=function(v){var N,R;v=v.breakpoint;const W=null==(N=this.viewModel)?void 0:null==(R=N.view)?void 0:R.ui;if(!W)return!1;const {width:ea,height:da}=W;if(isNaN(ea)||isNaN(da))return!1;N=v.hasOwnProperty("width")&&ea<=v.width;R=v.hasOwnProperty("height")&&da<=v.height;return N||R};T._setDockEnabledForViewSize=
function(v){v.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(v))};T._getPageText=function(v,N){return this.featureNavigationVisible?t.substitute(this.messages.pageText,{index:N+1,total:v}):null};T._destroySpinner=function(){const {_spinner:v,view:N}=this;v&&(N&&N.ui&&N.ui.remove(this._spinner,"popup-spinner"),v.destroy(),this._spinner=null)};T._createSpinner=function(v){v&&(this._spinner=new A({view:v}),v.ui.add(this._spinner,{key:"popup-spinner",position:"manual"}))};T._toggleCollapsed=
function(){this.collapsed=!this.collapsed};T._close=function(){this.close();this.view&&this.view.focus()};T._toggleDockEnabled=function(){this.dockEnabled=!this.dockEnabled;this._focusDockButton=!0;this.scheduleRender()};T._toggleFeatureMenu=function(){const v=!this.featureMenuOpen;this._featureMenuOpenChanged(v);this.actionsMenuOpen=!1;this.featureMenuOpen=v};T._toggleActionsMenu=function(){const v=!this.actionsMenuOpen;this._actionsMenuOpenChanged(v);this.featureMenuOpen=!1;this.actionsMenuOpen=
v};T._triggerAction=function(v){const N=v.currentTarget.dataset.actionUid;var {allActions:R}=this.viewModel;v=R.findIndex(W=>W.uid===N);(R=R.getItemAt(v))&&"toggle"===R.type&&(R.value=!R.value);this.actionsMenuOpen=!1;this.viewModel.triggerAction(v)};T._selectFeature=function(v){v=v.currentTarget["data-feature-index"];isNaN(v)||(this.viewModel.selectedFeatureIndex=v);this.featureMenuOpen=!1;this._focusFeatureMenuButton=!0;this.scheduleRender()};T._next=function(){this.next()};T._previous=function(){this.previous()};
d._createClass(U,[{key:"actionsMenuId",get:function(){return`${this.id}-actions-menu`}},{key:"actionsMenuButtonId",get:function(){return`${this.id}-actions-menu-button`}},{key:"featureMenuId",get:function(){return`${this.id}-feature-menu`}},{key:"titleId",get:function(){return`${this.id}-popup-title`}},{key:"contentId",get:function(){return`${this.id}-popup-content`}},{key:"hasContent",get:function(){var v,N,R,W,ea,da,qa;return!!(this.selectedFeatureWidget?(null==(v=this.selectedFeatureWidget)?0:
null==(N=v.viewModel)?0:N.waitingForContent)||"error"===(null==(R=this.selectedFeatureWidget)?void 0:null==(W=R.viewModel)?void 0:W.state)||(null==(ea=this.selectedFeatureWidget)?0:null==(da=ea.viewModel)?0:da.content):null==(qa=this.viewModel)?0:qa.content)}},{key:"featureNavigationVisible",get:function(){return this.viewModel.active&&1<this.viewModel.featureCount&&this.visibleElements.featureNavigation}},{key:"collapsible",get:function(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}},
{key:"featureMenuVisible",get:function(){return this.featureNavigationVisible&&this.featureMenuOpen}},{key:"contentCollapsed",get:function(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}},{key:"dividedActions",get:function(){return this._divideActions()}},{key:"actionsMenuOpen",get:function(){return this.viewModel.active?this._get("actionsMenuOpen"):!1},set:function(v){this._set("actionsMenuOpen",!!v)}},{key:"currentAlignment",get:function(){return this._getCurrentAlignment()}},
{key:"currentDockPosition",get:function(){return this._getCurrentDockPosition()}},{key:"dockOptions",get:function(){return this._get("dockOptions")||b},set:function(v){var N={...b};const R=this.get("viewModel.view.breakpoints");var W={};R&&(W.width=R.xsmall,W.height=R.xsmall);v={...N,...v};N={...N.breakpoint,...W};({breakpoint:W}=v);!0===W?v.breakpoint=N:"object"===typeof W&&(v.breakpoint={...N,...W});this._set("dockOptions",v);this._setCurrentDockPosition();this.reposition()}},{key:"selectedFeatureWidget",
get:function(){const {_feature:v,visibleElements:N,headingLevel:R}=this,{selectedFeatureViewModel:W}=this.viewModel,ea={...N,title:!1};if(!W)return null;v?(v.viewModel=W,v.visibleElements=ea):this._feature=new x({headingLevel:R+1,viewModel:W,visibleElements:ea});return this._feature}}]);return U}(G.FeatureContentMixin(r));h.__decorate([p.property({readOnly:!0})],c.prototype,"actionsMenuId",null);h.__decorate([p.property({readOnly:!0})],c.prototype,"actionsMenuButtonId",null);h.__decorate([p.property({readOnly:!0})],
c.prototype,"featureMenuId",null);h.__decorate([p.property({readOnly:!0})],c.prototype,"titleId",null);h.__decorate([p.property({readOnly:!0})],c.prototype,"contentId",null);h.__decorate([p.property({readOnly:!0})],c.prototype,"hasContent",null);h.__decorate([p.property({readOnly:!0})],c.prototype,"featureNavigationVisible",null);h.__decorate([p.property({readOnly:!0})],c.prototype,"collapsible",null);h.__decorate([p.property({readOnly:!0})],c.prototype,"featureMenuVisible",null);h.__decorate([p.property({readOnly:!0})],
c.prototype,"contentCollapsed",null);h.__decorate([p.property({readOnly:!0})],c.prototype,"dividedActions",null);h.__decorate([k.aliasOf("viewModel.actions")],c.prototype,"actions",void 0);h.__decorate([p.property()],c.prototype,"actionsMenuOpen",null);h.__decorate([p.property()],c.prototype,"alignment",void 0);h.__decorate([k.aliasOf("viewModel.autoCloseEnabled")],c.prototype,"autoCloseEnabled",void 0);h.__decorate([k.aliasOf("viewModel.autoOpenEnabled")],c.prototype,"autoOpenEnabled",void 0);h.__decorate([k.aliasOf("viewModel.defaultPopupTemplateEnabled")],
c.prototype,"defaultPopupTemplateEnabled",void 0);h.__decorate([k.aliasOf("viewModel.content")],c.prototype,"content",void 0);h.__decorate([p.property()],c.prototype,"collapsed",void 0);h.__decorate([p.property()],c.prototype,"collapseEnabled",void 0);h.__decorate([p.property({readOnly:!0})],c.prototype,"currentAlignment",null);h.__decorate([p.property({readOnly:!0})],c.prototype,"currentDockPosition",null);h.__decorate([p.property()],c.prototype,"dockOptions",null);h.__decorate([p.property()],c.prototype,
"dockEnabled",void 0);h.__decorate([k.aliasOf("viewModel.featureCount")],c.prototype,"featureCount",void 0);h.__decorate([p.property()],c.prototype,"featureMenuOpen",void 0);h.__decorate([k.aliasOf("viewModel.features")],c.prototype,"features",void 0);h.__decorate([k.aliasOf("viewModel.goToOverride")],c.prototype,"goToOverride",void 0);h.__decorate([p.property()],c.prototype,"headingLevel",void 0);h.__decorate([k.aliasOf("viewModel.highlightEnabled")],c.prototype,"highlightEnabled",void 0);h.__decorate([k.aliasOf("viewModel.location")],
c.prototype,"location",void 0);h.__decorate([p.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],c.prototype,"label",void 0);h.__decorate([p.property()],c.prototype,"maxInlineActions",void 0);h.__decorate([p.property(),z.messageBundle("esri/widgets/Popup/t9n/Popup")],c.prototype,"messages",void 0);h.__decorate([p.property(),z.messageBundle("esri/t9n/common")],c.prototype,"messagesCommon",void 0);h.__decorate([k.aliasOf("viewModel.promises")],c.prototype,"promises",void 0);h.__decorate([k.aliasOf("viewModel.selectedFeature")],
c.prototype,"selectedFeature",void 0);h.__decorate([k.aliasOf("viewModel.selectedFeatureIndex")],c.prototype,"selectedFeatureIndex",void 0);h.__decorate([p.property({readOnly:!0})],c.prototype,"selectedFeatureWidget",null);h.__decorate([p.property()],c.prototype,"spinnerEnabled",void 0);h.__decorate([k.aliasOf("viewModel.title")],c.prototype,"title",void 0);h.__decorate([k.aliasOf("viewModel.updateLocationEnabled")],c.prototype,"updateLocationEnabled",void 0);h.__decorate([k.aliasOf("viewModel.view")],
c.prototype,"view",void 0);h.__decorate([p.property({type:H}),S.vmEvent(["triggerAction","trigger-action"])],c.prototype,"viewModel",void 0);h.__decorate([k.aliasOf("viewModel.visible")],c.prototype,"visible",void 0);h.__decorate([p.property()],c.prototype,"visibleElements",void 0);h.__decorate([I.cast("visibleElements")],c.prototype,"castVisibleElements",null);h.__decorate([e.accessibleHandler()],c.prototype,"_close",null);h.__decorate([e.accessibleHandler()],c.prototype,"_toggleDockEnabled",null);
h.__decorate([e.accessibleHandler()],c.prototype,"_toggleFeatureMenu",null);h.__decorate([e.accessibleHandler()],c.prototype,"_toggleActionsMenu",null);h.__decorate([e.accessibleHandler()],c.prototype,"_triggerAction",null);h.__decorate([e.accessibleHandler()],c.prototype,"_selectFeature",null);h.__decorate([e.accessibleHandler()],c.prototype,"_next",null);h.__decorate([e.accessibleHandler()],c.prototype,"_previous",null);return c=h.__decorate([E.subclass("esri.widgets.Popup")],c)})},"esri/core/throttle":function(){define(["exports"],
function(d){d.throttle=function(h,c,B,g){let u=null,F=1E3;"number"===typeof c?(F=c,g=B):(u=null!=c?c:null,F=B);let L=0,K;const M=()=>{L=0;h.apply(g,K)};c=(...y)=>{u&&u.apply(g,y);K=y;F?L||(L=setTimeout(M,F)):M()};c.remove=()=>{L&&(clearTimeout(L),L=0)};c.forceUpdate=()=>{L&&(clearTimeout(L),M())};c.hasPendingUpdates=()=>!!L;return c};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/widgets/Feature":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Feature/FeatureAttachments ./Feature/FeatureContent ./Feature/FeatureExpression ./Feature/FeatureFields ./Feature/FeatureMedia ./Feature/FeatureViewModel ./Feature/support/FeatureContentMixin ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/jsxFactory ../intl/substitute".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p,E,x,A,r,G,H,w,e,z){const S={title:!0,content:!0,lastEditedInfo:!0};B=function(J){function O(l,b){l=J.call(this,l,b)||this;l._contentWidgets=[];l.graphic=null;l.defaultPopupTemplateEnabled=!1;l.headingLevel=2;l.label=void 0;l.messages=null;l.messagesCommon=null;l.messagesURIUtils=null;l.spatialReference=null;l.title=null;l.visibleElements={...S};l.map=null;l.view=null;l.viewModel=new x;return l}h._inheritsLoose(O,J);var t=O.prototype;t.initialize=function(){this.own(g.init(this,
"viewModel.contentViewModels",()=>this._setupContentWidgets()))};t.loadDependencies=function(){return new Promise((l,b)=>d(["../chunks/calcite-notice"],l,b))};t.destroy=function(){this._destroyContentWidgets()};t.castVisibleElements=function(l){return{...S,...l}};t.render=function(){var {state:l}=this.viewModel;l=e.tsx("div",{class:"esri-feature__size-container",key:"container"},this.renderTitle(),"error"===l?this.renderError():"loading"===l?this.renderLoading():this.renderContentContainer());return e.tsx("div",
{class:this.classes("esri-feature","esri-widget")},l)};t.setActiveMedia=function(l,b){this.viewModel.setActiveMedia(l,b)};t.nextMedia=function(l){this.viewModel.nextMedia(l)};t.previousMedia=function(l){this.viewModel.previousMedia(l)};t.renderError=function(){const {messagesCommon:l,messages:b,visibleElements:f}=this;return e.tsx("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},f.title?e.tsx("div",{key:"error-title",slot:"title"},l.errorMessage):null,e.tsx("div",
{key:"error-message",slot:"message"},b.loadingError))};t.renderLoading=function(){return e.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},e.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))};t.renderContentContainer=function(){const {visibleElements:l}=this;return l.content?e.tsx("div",{class:"esri-feature__main-container"},[this.renderContent(),this.renderLastEditInfo()]):null};t.renderTitle=function(){const {visibleElements:l,
title:b}=this;return l.title?e.tsx(r.Heading,{level:this.headingLevel,class:"esri-feature__title",innerHTML:b}):null};t.renderContent=function(){var l=this.viewModel.content;return l?Array.isArray(l)?l.length?e.tsx("div",{key:"content-content-elements"},l.map(this.renderContentElement,this)):null:"string"===typeof l?(l=this._contentWidgets[0],!l||l.destroyed?null:e.tsx("div",{key:"content-content"},l.render())):this.renderNodeContent(l):null};t.renderContentElement=function(l,b){const {visibleElements:f}=
this;if("boolean"!==typeof f.content&&!f.content[l.type])return null;switch(l.type){case "attachments":return this.renderAttachments(b);case "custom":return this.renderCustom(l,b);case "fields":return this.renderFields(b);case "media":return this.renderMedia(b);case "text":return this.renderText(l,b);case "expression":return this.renderExpression(b);default:return null}};t.renderAttachments=function(l){const b=this._contentWidgets[l];if(!b||b.destroyed)return null;const {state:f,attachmentInfos:n}=
b.viewModel;return"loading"===f||0<n.length?e.tsx("div",{key:this._buildKey("attachments-element",l),class:this.classes("esri-feature__content-element")},b.render()):null};t.renderExpression=function(l){const b=this._contentWidgets[l];return!b||b.destroyed?null:e.tsx("div",{key:this._buildKey("expression-element",l),class:"esri-feature__content-element"},b.render())};t.renderCustom=function(l,b){({creator:l}=l);const f=this._contentWidgets[b];return!f||f.destroyed?null:l?e.tsx("div",{key:this._buildKey("custom-element",
b),class:"esri-feature__content-element"},f.render()):null};t.renderFields=function(l){const b=this._contentWidgets[l];return!b||b.destroyed?null:e.tsx("div",{key:this._buildKey("fields-element",l),class:"esri-feature__content-element"},b.render())};t.renderMedia=function(l){const b=this._contentWidgets[l];return!b||b.destroyed?null:e.tsx("div",{key:this._buildKey("media-element",l),class:"esri-feature__content-element"},b.render())};t.renderLastEditInfo=function(){const {visibleElements:l,messages:b}=
this;var {lastEditInfo:f}=this.viewModel;if(!f||!l.lastEditedInfo)return null;const {date:n,user:P}=f;f=z.substitute("edit"===f.type?P?b.lastEditedByUser:b.lastEdited:P?b.lastCreatedByUser:b.lastCreated,{date:n,user:P});return e.tsx("div",{key:"edit-info-element",class:this.classes("esri-feature__last-edited-info","esri-feature__content-element")},f)};t.renderText=function(l,b){const f=this._contentWidgets[b];return!f||f.destroyed?null:l.text?e.tsx("div",{key:this._buildKey("text-element",b),class:this.classes("esri-feature__content-element",
"esri-feature__text")},f.render()):null};t._buildKey=function(l,...b){const f=this.get("viewModel.graphic.uid")||"0";b=b.join("-");return`${l}__${f}-${b}`};t._destroyContentWidget=function(l){l&&(l.viewModel=null,!l.destroyed&&l.destroy())};t._destroyContentWidgets=function(){this._contentWidgets.forEach(l=>this._destroyContentWidget(l));this._contentWidgets=[]};t._setupContentWidgets=function(){this._destroyContentWidgets();const {headingLevel:l,visibleElements:b}=this;var f=this.get("viewModel.content");
const {contentViewModels:n}=this.viewModel;Array.isArray(f)?f.forEach((P,U)=>{"attachments"===P.type&&(this._contentWidgets[U]=new m({displayType:P.displayType,headingLevel:b.title?l+1:l,viewModel:n[U]}));"fields"===P.type&&(this._contentWidgets[U]=new p({viewModel:n[U]}));"media"===P.type&&(this._contentWidgets[U]=new E({viewModel:n[U]}));"text"===P.type&&(this._contentWidgets[U]=new q({viewModel:n[U]}));"custom"===P.type&&(this._contentWidgets[U]=new q({viewModel:n[U]}));"expression"===P.type&&
(this._contentWidgets[U]=new I({viewModel:n[U]}))},this):(f=n[0])&&!f.destroyed&&(this._contentWidgets[0]=new q({viewModel:f}));this.scheduleRender()};return O}(A.FeatureContentMixin(k));c.__decorate([u.aliasOf("viewModel.graphic")],B.prototype,"graphic",void 0);c.__decorate([u.aliasOf("viewModel.defaultPopupTemplateEnabled")],B.prototype,"defaultPopupTemplateEnabled",void 0);c.__decorate([M.property()],B.prototype,"headingLevel",void 0);c.__decorate([M.property({aliasOf:{source:"messages.widgetLabel",
overridable:!0}})],B.prototype,"label",void 0);c.__decorate([M.property(),H.messageBundle("esri/widgets/Feature/t9n/Feature")],B.prototype,"messages",void 0);c.__decorate([M.property(),H.messageBundle("esri/t9n/common")],B.prototype,"messagesCommon",void 0);c.__decorate([M.property(),H.messageBundle("esri/widgets/support/t9n/uriUtils")],B.prototype,"messagesURIUtils",void 0);c.__decorate([u.aliasOf("viewModel.spatialReference")],B.prototype,"spatialReference",void 0);c.__decorate([u.aliasOf("viewModel.title")],
B.prototype,"title",void 0);c.__decorate([M.property()],B.prototype,"visibleElements",void 0);c.__decorate([K.cast("visibleElements")],B.prototype,"castVisibleElements",null);c.__decorate([u.aliasOf("viewModel.map")],B.prototype,"map",void 0);c.__decorate([u.aliasOf("viewModel.view")],B.prototype,"view",void 0);c.__decorate([M.property({type:x})],B.prototype,"viewModel",void 0);return B=c.__decorate([y.subclass("esri.widgets.Feature")],B)})},"esri/widgets/Feature/FeatureAttachments":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Attachments ../Widget ./FeatureAttachments/FeatureAttachmentsViewModel ./support/FeatureElementInfo ../support/widgetUtils ../../core/Logger ../support/jsxFactory".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p){g=function(E){function x(r,G){r=E.call(this,r,G)||this;r._featureElementInfo=null;r.attachmentsWidget=new M;r.description=null;r.displayType=null;r.graphic=null;r.headingLevel=2;r.title=null;r.viewModel=new k;return r}d._inheritsLoose(x,E);var A=x.prototype;A.initialize=function(){this._featureElementInfo=new m;c.init(this,["viewModel.description","viewModel.title","headingLevel"],()=>this._setupFeatureElementInfo());c.init(this,"viewModel.graphic",r=>this.attachmentsWidget.graphic=
r)};A.destroy=function(){this.attachmentsWidget.destroy();this._featureElementInfo.destroy()};A.render=function(){var r;const {attachmentsWidget:G}=this;return p.tsx("div",{class:"esri-feature-attachments"},null==(r=this._featureElementInfo)?void 0:r.render(),null==G?void 0:G.render())};A._setupFeatureElementInfo=function(){const {description:r,title:G,headingLevel:H}=this;this._featureElementInfo.set({description:r,title:G,headingLevel:H})};return x}(y);h.__decorate([L.property({readOnly:!0})],g.prototype,
"attachmentsWidget",void 0);h.__decorate([B.aliasOf("viewModel.description")],g.prototype,"description",void 0);h.__decorate([B.aliasOf("attachmentsWidget.displayType")],g.prototype,"displayType",void 0);h.__decorate([B.aliasOf("viewModel.graphic")],g.prototype,"graphic",void 0);h.__decorate([L.property()],g.prototype,"headingLevel",void 0);h.__decorate([B.aliasOf("viewModel.title")],g.prototype,"title",void 0);h.__decorate([L.property({type:k})],g.prototype,"viewModel",void 0);return g=h.__decorate([K.subclass("esri.widgets.Feature.FeatureAttachments")],
g)})},"esri/widgets/Feature/FeatureAttachments/FeatureAttachmentsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Attachments/AttachmentsViewModel".split(" "),function(d,h,c,B,g,u,F,L){B=function(K){function M(y){y=K.call(this,y)||this;y.description=null;y.title=
null;return y}d._inheritsLoose(M,K);return M}(L);h.__decorate([c.property()],B.prototype,"description",void 0);h.__decorate([c.property()],B.prototype,"title",void 0);return B=h.__decorate([F.subclass("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],B)})},"esri/widgets/Feature/support/FeatureElementInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Widget ../../support/Heading ../../support/widgetUtils ../../../core/Logger ../../support/jsxFactory".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k){B=function(m){function q(p,E){p=m.call(this,p,E)||this;p.description=null;p.headingLevel=2;p.title=null;return p}d._inheritsLoose(q,m);var I=q.prototype;I.render=function(){return k.tsx("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())};I.renderTitle=function(){const {title:p}=this;return p?k.tsx(K.Heading,{level:this.headingLevel,class:"esri-feature-element-info__title"},p):null};I.renderDescription=function(){const {description:p}=
this;return p?k.tsx("div",{key:"description",class:"esri-feature-element-info__description"},p):null};return q}(L);h.__decorate([c.property()],B.prototype,"description",void 0);h.__decorate([c.property()],B.prototype,"headingLevel",void 0);h.__decorate([c.property()],B.prototype,"title",void 0);return B=h.__decorate([F.subclass("esri.widgets.Feature.support.FeatureElementInfo")],B)})},"esri/widgets/Feature/FeatureContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent/FeatureContentViewModel ./support/featureUtils ../support/widget ../support/jsxFactory".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m){B=function(q){function I(E,x){E=q.call(this,E,x)||this;E.creator=null;E.graphic=null;E.viewModel=null;E._addTargetToAnchors=A=>{Array.from(A.querySelectorAll("a")).forEach(r=>{y.shouldOpenInNewTab(r.href)&&!r.hasAttribute("target")&&r.setAttribute("target","_blank")})};return E}d._inheritsLoose(I,q);var p=I.prototype;p.renderLoading=function(){return m.tsx("div",{class:"esri-feature-content__loader-container",key:"loader"},m.tsx("div",{class:"esri-feature-content__loader"}))};
p.renderCreated=function(){var E;const x=null==(E=this.viewModel)?void 0:E.created;return x?x instanceof HTMLElement?m.tsx("div",{key:x,bind:x,afterCreate:this._attachToNode}):k.isWidget(x)?m.tsx("div",{key:x},!x.destroyed&&x.render()):m.tsx("div",{key:x,innerHTML:x,afterCreate:this._addTargetToAnchors}):null};p.render=function(){var E;const x=null==(E=this.viewModel)?void 0:E.state;return m.tsx("div",{class:"esri-feature-content"},"loading"===x?this.renderLoading():this.renderCreated())};p._attachToNode=
function(E){E.appendChild(this)};return I}(K);h.__decorate([c.aliasOf("viewModel.creator")],B.prototype,"creator",void 0);h.__decorate([c.aliasOf("viewModel.graphic")],B.prototype,"graphic",void 0);h.__decorate([F.property({type:M})],B.prototype,"viewModel",void 0);return B=h.__decorate([L.subclass("esri.widgets.Feature.FeatureContent")],B)})},"esri/widgets/Feature/FeatureContent/FeatureContentViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../support/featureUtils".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k){B=function(m){function q(p){var E=m.call(this,p)||this;E._loadingPromise=null;E.created=null;E.creator=null;E.destroyer=null;E.graphic=null;E.handles.add(u.init(d._assertThisInitialized(E),"creator",x=>{E._destroyContent();E._createContent(x)}));return E}d._inheritsLoose(q,m);var I=q.prototype;I.destroy=function(){this._destroyContent()};I._destroyContent=function(){const {created:p,graphic:E,destroyer:x}=this;p&&(k.graphicCallback(x,{graphic:E}).catch(()=>null),
this._set("created",null))};I._createContent=function(){var p=d._asyncToGenerator(function*(E){var {graphic:x}=this;this._loadingPromise=E=k.graphicCallback(E,{graphic:x}).catch(()=>null);this.notifyChange("state");x=yield E;E===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",x))});return function(E){return p.apply(this,arguments)}}();d._createClass(q,[{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}}]);return q}(g.HandleOwnerMixin(B));
h.__decorate([F.property({readOnly:!0})],B.prototype,"created",void 0);h.__decorate([F.property()],B.prototype,"creator",void 0);h.__decorate([F.property()],B.prototype,"destroyer",void 0);h.__decorate([F.property({type:c})],B.prototype,"graphic",void 0);h.__decorate([F.property({readOnly:!0})],B.prototype,"state",null);return B=h.__decorate([y.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],B)})},"esri/widgets/Feature/FeatureExpression":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent ./FeatureFields ./FeatureMedia ./FeatureExpression/FeatureExpressionViewModel ../support/widgetUtils ../../core/Logger ../support/jsxFactory".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p){g=function(E){function x(r,G){r=E.call(this,r,G)||this;r.viewModel=new m;return r}d._inheritsLoose(x,E);var A=x.prototype;A.initialize=function(){c.init(this,"viewModel.contentElementViewModel",()=>this._setupExpressionWidget())};A.destroy=function(){this._destroyContentWidget()};A.renderLoading=function(){return p.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},p.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating",
"esri-feature__loading-spinner")}))};A.render=function(){var r;const {state:G}=this.viewModel;return p.tsx("div",{class:"esri-feature-expression"},"loading"===G?this.renderLoading():"disabled"===G?null:null==(r=this._contentWidget)?void 0:r.render())};A._destroyContentWidget=function(){const {_contentWidget:r}=this;r&&(r.viewModel=null,r.destroy());this._contentWidget=null};A._setupExpressionWidget=function(){const {contentElementViewModel:r,contentElement:G}=this.viewModel,H=null==G?void 0:G.type;
this._destroyContentWidget();this._contentWidget=r?"fields"===H?new y({viewModel:r}):"media"===H?new k({viewModel:r}):"text"===H?new M({viewModel:r}):null:null;this.scheduleRender()};return x}(K);h.__decorate([B.property({type:m})],g.prototype,"viewModel",void 0);return g=h.__decorate([L.subclass("esri.widgets.Feature.FeatureExpression")],g)})},"esri/widgets/Feature/FeatureFields":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureFields/FeatureFieldsViewModel ./support/FeatureElementInfo ../support/uriUtils ../support/widgetUtils ../support/decorators/messageBundle ../../core/Logger ../support/jsxFactory".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p,E){g=function(x){function A(G,H){G=x.call(this,G,H)||this;G._featureElementInfo=null;G.attributes=null;G.description=null;G.expressionInfos=null;G.fieldInfos=null;G.title=null;G.viewModel=new y;G.messages=null;G.messagesURIUtils=null;return G}d._inheritsLoose(A,x);var r=A.prototype;r.initialize=function(){this._featureElementInfo=new k;c.init(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo())};r.destroy=function(){this._featureElementInfo.destroy()};
r.renderFieldInfo=function(G,H){var {attributes:w}=this.viewModel;const e=G.fieldName,z=G.label||e;w=w?null==w[e]?"":w[e]:"";G=!(!G.format||!G.format.dateFormat);w="number"!==typeof w||G?m.autoLink(this.messagesURIUtils,w):this._forceLTR(w);G={["esri-feature-fields__field-data--date"]:G};return E.tsx("tr",{key:`fields-element-info-row-${e}-${H}`},E.tsx("th",{key:`fields-element-info-row-header-${e}-${H}`,class:"esri-feature-fields__field-header",innerHTML:z}),E.tsx("td",{key:`fields-element-info-row-data-${e}-${H}`,
class:this.classes("esri-feature-fields__field-data",G),innerHTML:w}))};r.renderFields=function(){const {formattedFieldInfos:G}=this.viewModel;return null!=G&&G.length?E.tsx("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},E.tsx("tbody",null,G.map((H,w)=>this.renderFieldInfo(H,w)))):null};r.render=function(){var G;return E.tsx("div",{class:"esri-feature-fields"},null==(G=this._featureElementInfo)?void 0:G.render(),this.renderFields())};r._setupFeatureElementInfo=function(){const {description:G,
title:H}=this;this._featureElementInfo.set({description:G,title:H})};r._forceLTR=function(G){return`&lrm;${G}`};return A}(M);h.__decorate([B.aliasOf("viewModel.attributes")],g.prototype,"attributes",void 0);h.__decorate([B.aliasOf("viewModel.description")],g.prototype,"description",void 0);h.__decorate([B.aliasOf("viewModel.expressionInfos")],g.prototype,"expressionInfos",void 0);h.__decorate([B.aliasOf("viewModel.fieldInfos")],g.prototype,"fieldInfos",void 0);h.__decorate([B.aliasOf("viewModel.title")],
g.prototype,"title",void 0);h.__decorate([L.property({type:y})],g.prototype,"viewModel",void 0);h.__decorate([L.property(),I.messageBundle("esri/widgets/Feature/t9n/Feature")],g.prototype,"messages",void 0);h.__decorate([L.property(),I.messageBundle("esri/widgets/support/t9n/uriUtils")],g.prototype,"messagesURIUtils",void 0);return g=h.__decorate([K.subclass("esri.widgets.Feature.FeatureFields")],g)})},"esri/widgets/Feature/FeatureFields/FeatureFieldsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/ExpressionInfo ../../../popup/FieldInfo ../support/featureUtils".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y){c=function(k){function m(q){q=k.call(this,q)||this;q.attributes=null;q.expressionInfos=null;q.description=null;q.fieldInfos=null;q.title=null;return q}d._inheritsLoose(m,k);d._createClass(m,[{key:"formattedFieldInfos",get:function(){const {expressionInfos:q,fieldInfos:I}=this,p=[];null==I?void 0:I.forEach(E=>{if(!E.hasOwnProperty("visible")||E.visible)E=E.clone(),E.label=y.getFieldInfoLabel(E,q),p.push(E)});return p}}]);return m}(c);h.__decorate([B.property()],c.prototype,
"attributes",void 0);h.__decorate([B.property({type:[K]})],c.prototype,"expressionInfos",void 0);h.__decorate([B.property()],c.prototype,"description",void 0);h.__decorate([B.property({type:[M]})],c.prototype,"fieldInfos",void 0);h.__decorate([B.property({readOnly:!0})],c.prototype,"formattedFieldInfos",null);h.__decorate([B.property()],c.prototype,"title",void 0);return c=h.__decorate([L.subclass("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],c)})},"esri/widgets/support/uriUtils":function(){define(["exports",
"../../core/string"],function(d,h){function c(g){let u=null;B.some(F=>{F.pattern.test(g)&&(u=F);return!!u});return u}const B=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];d.autoLink=function(g,u){if("string"!==typeof u||!u)return u;const F=c(u);if(!F)return u;const L=u.match(F.pattern);
g=h.replace(h.replace(F.label,{messages:g,hierPart:L&&L[2]}),{appName:F.appName});return u.replace(F.pattern,`<a${F.target?` target="${F.target}"`:""} href="$1"${"_blank"===F.target?' rel\x3d"noreferrer"':""}>${g}</a>`)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureMedia":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/events ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureMedia/FeatureMediaViewModel ./support/FeatureElementInfo ./support/featureUtils ../support/chartUtils ../support/widgetUtils ../support/decorators/messageBundle ../../core/Logger ../support/jsxFactory ../support/widgetThemeUtils".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p,E,x,A,r){u=function(G){function H(e,z){var S=G.call(this,e,z)||this;S._refreshTimer=null;S._refreshIntervalInfo=null;S._featureElementInfo=null;S.attributes=null;S.activeMediaInfoIndex=null;S.description=null;S.fieldInfoMap=null;S.layer=null;S.mediaInfos=null;S.popupTemplate=null;S.relatedInfos=null;S.title=null;S.viewModel=new k;S.messages=null;S._getChartDependencies=function(){var J=d._asyncToGenerator(function*(O){const t=yield I.loadChartsModule(),{destroyed:l,
viewModel:b}=d._assertThisInitialized(S);if(!l&&b&&O){var {activeMediaInfo:f}=b;S._renderChart({chartDiv:O,mediaInfo:f,chartsModule:t})}});return function(O){return J.apply(this,arguments)}}();return S}d._inheritsLoose(H,G);var w=H.prototype;w.initialize=function(){this._featureElementInfo=new m;this.own(B.init(this,["viewModel.activeMediaInfo","viewModel.activeMediaInfoIndex"],()=>this._setupMediaRefreshTimer()),B.init(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo()))};
w.destroy=function(){this._clearMediaRefreshTimer();this._featureElementInfo.destroy()};w.render=function(){var e;return A.tsx("div",{bind:this,class:"esri-feature-media",onkeyup:this._handleMediaKeyup},null==(e=this._featureElementInfo)?void 0:e.render(),this.renderMedia())};w.renderMedia=function(){const {formattedMediaInfoCount:e}=this.viewModel;return e?A.tsx("div",{key:"media-element-container",class:"esri-feature-media__container"},this.renderMediaPageButton("previous"),this.renderMediaInfo(),
this.renderMediaPageButton("next")):null};w.renderImageMediaInfo=function(e){var {_refreshIntervalInfo:z}=this;const {activeMediaInfoIndex:S,formattedMediaInfoCount:J}=this.viewModel,{value:O,refreshInterval:t,altText:l,title:b,type:f}=e,{sourceURL:n,linkURL:P}=O;e=q.shouldOpenInNewTab(P)?"_blank":"_self";const U="_blank"===e?"noreferrer":"";z=t?z:null;z=A.tsx("img",{alt:l||b,key:`media-${f}-${S}-${J}-${z?z.timestamp:0}`,src:z?z.sourceURL:n});return(e=P?A.tsx("a",{title:b,href:P,rel:U,target:e},z):
null)?e:z};w.renderChartMediaInfo=function(e){const {activeMediaInfoIndex:z,formattedMediaInfoCount:S}=this.viewModel;return A.tsx("div",{key:`media-${e.type}-${z}-${S}`,bind:this,class:"esri-feature-media__chart",afterCreate:this._getChartDependencies})};w.renderMediaInfoType=function(){const {activeMediaInfo:e}=this.viewModel;return e?"image"===e.type?this.renderImageMediaInfo(e):-1!==e.type.indexOf("chart")?this.renderChartMediaInfo(e):null:null};w.renderMediaInfo=function(){var {activeMediaInfo:e}=
this.viewModel;if(!e)return null;const z=e.title?A.tsx("div",{key:"media-title",class:"esri-feature-media__item-title",innerHTML:e.title}):null;e=e.caption?A.tsx("div",{key:"media-caption",class:"esri-feature-media__item-caption",innerHTML:e.caption}):null;return A.tsx("div",{key:"media-container",class:"esri-feature-media__item-container"},A.tsx("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType()),z,e)};w.renderMediaPageButton=function(e){if(2>this.viewModel.formattedMediaInfoCount)return null;
const z=(e="previous"===e)?this.messages.previous:this.messages.next,S=e?this.classes("esri-feature-media__button","esri-feature-media__previous"):this.classes("esri-feature-media__button","esri-feature-media__next"),J=e?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon","esri-icon-left-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon","esri-icon-right-triangle-arrow"),O=e?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon--rtl",
"esri-icon-right-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon--rtl","esri-icon-left-triangle-arrow");return A.tsx("button",{type:"button",key:e?"media-previous":"media-next",title:z,"aria-label":z,tabIndex:0,class:S,bind:this,onclick:e?this._previous:this._next},A.tsx("span",{"aria-hidden":"true",class:J}),A.tsx("span",{"aria-hidden":"true",class:O}))};w._setupFeatureElementInfo=function(){const {description:e,title:z}=this;this._featureElementInfo.set({description:e,
title:z})};w._next=function(){this.viewModel.next()};w._previous=function(){this.viewModel.previous()};w._handleMediaKeyup=function(e){const z=c.eventKey(e);"ArrowLeft"===z&&(e.stopPropagation(),this.viewModel.previous());"ArrowRight"===z&&(e.stopPropagation(),this.viewModel.next())};w._renderChart=function(e){const {abilities:z}=this.viewModel,{chartsModule:S,chartDiv:J,mediaInfo:O}=e,{value:t,type:l}=O,{am4core:b}=S,f=I.getColorSet(b);r.isDarkTheme()&&b.useTheme(S.am4themes_dark);const n=window.matchMedia("(prefers-reduced-motion: reduce)");
z.chartAnimation&&!n.matches?b.useTheme(S.am4themes_animated):b.unuseTheme(S.am4themes_animated);b.useTheme(function(P){P instanceof b.ColorSet&&f&&(P.list=f)});e="pie-chart"===l?this._createPieChart(e):this._createXYChart(e);J.setAttribute("aria-label",O.altText||O.title);e.data=t.series.map(P=>({tooltip:P.tooltip,value:P.value})).filter(P=>"pie-chart"===l?0<P.value:!0)};w._customizeChartTooltip=function(e,z){e.label.wrap=!0;e.label.maxWidth=200;e.autoTextColor=!1;e.getFillFromObject=!1;e.label.fill=
z.color("#ffffff");e.background.fill=z.color({r:0,g:0,b:0,a:.7})};w._createPieChart=function(e){const {chartDiv:z,chartsModule:S}=e,{am4core:J,am4charts:O}=S;e=J.create(z,O.PieChart);e.rtl=p.isRTL(this.container);const t=e.series.push(new O.PieSeries);t.labels.template.disabled=!0;t.ticks.template.disabled=!0;t.dataFields.value="value";t.dataFields.category="tooltip";this._customizeChartTooltip(t.tooltip,J);t.slices.template.tooltipText=e.rtl?"{category}: %{value.percent.formatNumber('#.0')}":"{category}: {value.percent.formatNumber('#.0')}%";
return e};w._getMinSeriesValue=function(e){let z=0;e.forEach(S=>z=Math.min(S.value,z));return z};w._createColumnChart=function(e,z){const {chartsModule:S,mediaInfo:J}=z;({value:z}=J);const {am4core:O,am4charts:t}=S,l=e.xAxes.push(new t.CategoryAxis);l.dataFields.category="tooltip";l.renderer.labels.template.disabled=!0;this._customizeChartTooltip(l.tooltip,O);l.tooltip.events.on("sizechanged",()=>{l.tooltip.dy=-l.tooltip.contentHeight});var b=e.yAxes.push(new t.ValueAxis);const f=b.renderer.labels.template;
b.renderer.minLabelPosition=.05;b.renderer.maxLabelPosition=.95;b.min=this._getMinSeriesValue(z.series);this._customizeChartTooltip(b.tooltip,O);f.wrap=!0;b=e.series.push(new t.ColumnSeries);b.dataFields.valueY="value";b.dataFields.categoryX="tooltip";e.cursor=new t.XYCursor;15<z.series.length&&(e.scrollbarX=new O.Scrollbar)};w._createBarChart=function(e,z){const {chartsModule:S,mediaInfo:J}=z;({value:z}=J);const {am4core:O,am4charts:t}=S,l=e.yAxes.push(new t.CategoryAxis);l.dataFields.category="tooltip";
l.renderer.inversed=!0;l.renderer.labels.template.disabled=!0;this._customizeChartTooltip(l.tooltip,O);l.tooltip.events.on("sizechanged",()=>{l.tooltip.dx=l.tooltip.contentWidth});var b=e.xAxes.push(new t.ValueAxis);const f=b.renderer.labels.template;b.renderer.minLabelPosition=.05;b.renderer.maxLabelPosition=.95;b.min=this._getMinSeriesValue(z.series);this._customizeChartTooltip(b.tooltip,O);f.wrap=!0;b=e.series.push(new t.ColumnSeries);b.dataFields.valueX="value";b.dataFields.categoryY="tooltip";
e.cursor=new t.XYCursor;15<z.series.length&&(e.scrollbarY=new O.Scrollbar)};w._createLineChart=function(e,z){const {chartsModule:S,mediaInfo:J}=z;({value:z}=J);const {am4core:O,am4charts:t}=S,l=e.xAxes.push(new t.CategoryAxis);l.dataFields.category="tooltip";l.renderer.labels.template.disabled=!0;this._customizeChartTooltip(l.tooltip,O);l.tooltip.events.on("sizechanged",()=>{l.tooltip.dy=-l.tooltip.contentHeight});var b=e.yAxes.push(new t.ValueAxis);const f=b.renderer.labels.template;b.renderer.minLabelPosition=
.05;b.renderer.maxLabelPosition=.95;b.min=this._getMinSeriesValue(z.series);this._customizeChartTooltip(b.tooltip,O);f.wrap=!0;b=e.series.push(new t.LineSeries);b.dataFields.categoryX="tooltip";b.dataFields.valueY="value";e.cursor=new t.XYCursor;15<z.series.length&&(e.scrollbarX=new O.Scrollbar)};w._createXYChart=function(e){const {chartDiv:z,chartsModule:S,mediaInfo:J}=e,{type:O}=J,{am4core:t,am4charts:l}=S,b=t.create(z,l.XYChart);b.rtl=p.isRTL(this.container);"column-chart"===O&&this._createColumnChart(b,
e);"bar-chart"===O&&this._createBarChart(b,e);"line-chart"===O&&this._createLineChart(b,e);return b};w._clearMediaRefreshTimer=function(){const {_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)};w._updateMediaInfoTimestamp=function(e){const z=Date.now();this._refreshIntervalInfo={timestamp:z,sourceURL:this._getImageSource(e,z)};this.scheduleRender()};w._setupMediaRefreshTimer=function(){this._clearMediaRefreshTimer();const {activeMediaInfo:e}=this.viewModel;e&&"image"===e.type&&
e.refreshInterval&&this._setRefreshTimeout(e)};w._setRefreshTimeout=function(e){const {refreshInterval:z,value:S}=e;z&&(e=6E4*z,this._updateMediaInfoTimestamp(S.sourceURL),this._refreshTimer=setInterval(()=>{this._updateMediaInfoTimestamp(S.sourceURL)},e))};w._getImageSource=function(e,z){const S=-1!==e.indexOf("?")?"\x26":"?",[J,O=""]=e.split("#");return`${J}${S}timestamp=${z}${O?"#":""}${O}`};return H}(y);h.__decorate([g.aliasOf("viewModel.attributes")],u.prototype,"attributes",void 0);h.__decorate([g.aliasOf("viewModel.activeMediaInfoIndex")],
u.prototype,"activeMediaInfoIndex",void 0);h.__decorate([g.aliasOf("viewModel.description")],u.prototype,"description",void 0);h.__decorate([g.aliasOf("viewModel.fieldInfoMap")],u.prototype,"fieldInfoMap",void 0);h.__decorate([g.aliasOf("viewModel.layer")],u.prototype,"layer",void 0);h.__decorate([g.aliasOf("viewModel.mediaInfos")],u.prototype,"mediaInfos",void 0);h.__decorate([g.aliasOf("viewModel.popupTemplate")],u.prototype,"popupTemplate",void 0);h.__decorate([g.aliasOf("viewModel.relatedInfos")],
u.prototype,"relatedInfos",void 0);h.__decorate([g.aliasOf("viewModel.title")],u.prototype,"title",void 0);h.__decorate([K.property({type:k})],u.prototype,"viewModel",void 0);h.__decorate([K.property(),E.messageBundle("esri/widgets/Feature/t9n/Feature")],u.prototype,"messages",void 0);return u=h.__decorate([M.subclass("esri.widgets.Feature.FeatureMedia")],u)})},"esri/widgets/Feature/FeatureMedia/FeatureMediaViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/subclass ../../../popup/FieldInfo ../../../popup/content/support/ChartMediaInfoValueSeries ../support/featureUtils ../support/relatedFeatureUtils".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k){const m={chartAnimation:!0};c=function(q){function I(E){E=q.call(this,E)||this;E.abilities={...m};E.activeMediaInfoIndex=0;E.attributes=null;E.description=null;E.fieldInfoMap=null;E.formattedAttributes=null;E.expressionAttributes=null;E.layer=null;E.mediaInfos=null;E.popupTemplate=null;E.relatedInfos=null;E.title=null;return E}d._inheritsLoose(I,q);var p=I.prototype;p.castAbilities=function(E){return{...m,...E}};p.setActiveMedia=function(E){this._setContentElementMedia(E)};
p.next=function(){this._pageContentElementMedia(1)};p.previous=function(){this._pageContentElementMedia(-1)};p._setContentElementMedia=function(E){const {formattedMediaInfoCount:x}=this;this.activeMediaInfoIndex=(E+x)%x};p._pageContentElementMedia=function(E){const {activeMediaInfoIndex:x}=this;this._setContentElementMedia(x+E)};p._formatMediaInfos=function(){const {attributes:E,mediaInfos:x,formattedAttributes:A,expressionAttributes:r,fieldInfoMap:G,layer:H}=this;return null==x?void 0:x.map(w=>{w=
null==w?void 0:w.clone();if(!w)return null;w.title=y.substituteFieldsInLinksAndAttributes({attributes:E,fieldInfoMap:G,globalAttributes:A,expressionAttributes:r,layer:H,text:w.title});w.caption=y.substituteFieldsInLinksAndAttributes({attributes:E,fieldInfoMap:G,globalAttributes:A,expressionAttributes:r,layer:H,text:w.caption});w.altText=y.substituteFieldsInLinksAndAttributes({attributes:E,fieldInfoMap:G,globalAttributes:A,expressionAttributes:r,layer:H,text:w.altText});if("image"===w.type){var {value:e}=
w;this._setImageValue({value:e,formattedAttributes:A,layer:H});return w.value.sourceURL?w:void 0}return"pie-chart"===w.type||"line-chart"===w.type||"column-chart"===w.type||"bar-chart"===w.type?({value:e}=w,this._setChartValue({value:e,chartType:w.type,attributes:E,formattedAttributes:A,layer:H}),w):null}).filter(Boolean)};p._setImageValue=function(E){const {fieldInfoMap:x}=this,{value:A,formattedAttributes:r,layer:G}=E,{linkURL:H,sourceURL:w}=A;w&&(E=y.fixTokens(w,G),A.sourceURL=y.substituteAttributes({formattedAttributes:r,
template:E,fieldInfoMap:x}));H&&(E=y.fixTokens(H,G),A.linkURL=y.substituteAttributes({formattedAttributes:r,template:E,fieldInfoMap:x}))};p._setChartValue=function(E){const {value:x,attributes:A,formattedAttributes:r,chartType:G,layer:H}=E,{popupTemplate:w,relatedInfos:e}=this,{fields:z,normalizeField:S}=x;x.fields=y.getFixedFieldNames(z,H);S&&(x.normalizeField=y.getFixedFieldName(S,H));if(z.some(O=>!!(null!=r[O]||y.isRelatedField(O)&&e.size))){var J=null==w?void 0:w.fieldInfos;z.forEach(O=>{y.isRelatedField(O)?
x.series=[...x.series,...this._getRelatedChartInfos({fieldInfos:J,fieldName:O,formattedAttributes:r,chartType:G,value:x})]:(O=this._getChartOption({value:x,attributes:A,chartType:G,formattedAttributes:r,fieldName:O,fieldInfos:J}),x.series.push(O))})}};p._getRelatedChartInfos=function(E){var x;const {fieldInfos:A,fieldName:r,formattedAttributes:G,chartType:H,value:w}=E,e=[];E=k.getRelatedFieldInfo(r);const {layerId:z,fieldName:S}=E;E=null==(x=this.relatedInfos)?void 0:x.get(z.toString());if(!E)return e;
const {relatedFeatures:J,relation:O}=E;if(!O||!J)return e;({cardinality:x}=O);J.forEach(t=>{const {attributes:l}=t;l&&Object.keys(l).forEach(b=>{b===S&&e.push(this._getChartOption({value:w,attributes:l,formattedAttributes:G,fieldName:r,chartType:H,relatedFieldName:b,fieldInfos:A}))})});return"one-to-many"===x||"many-to-many"===x?e:[e[0]]};p._getTooltip=function({label:E,value:x,chartType:A}){return"pie-chart"===A?E:`${E}: ${x}`};p._getChartOption=function(E){const {value:x,attributes:A,formattedAttributes:r,
fieldName:G,relatedFieldName:H,fieldInfos:w,chartType:e}=E;var {layer:z}=this;const {normalizeField:S,tooltipField:J}=x;var O=S?y.isRelatedField(S)?A[k.getRelatedFieldInfo(S).fieldName]:A[S]:null;E=H&&void 0!==A[H]?A[H]:void 0!==A[G]?A[G]:r[G];const t=void 0===E?null:E&&O?E/O:E;E=new M({value:t});if(y.isRelatedField(G)){var l=k.getRelatedFieldInfo(G);var b=k.getRelatedFieldInfo(J);b=b?b.fieldName:null;z=y.formatValueToFieldInfo(t,{fieldInfos:w,fieldName:H,layer:z,preventPlacesFormatting:!!O});l=l?
l.label||l.fieldName:H;E.tooltip=this._getTooltip({label:b&&void 0!==A[b]?A[b]:l,value:z,chartType:e});return E}O=y.getFieldInfo(w,G);z=y.getFixedFieldName(G,z);O=J&&void 0!==r[J]?r[J]:y.getFieldInfoLabel(O||new K({fieldName:z}),null==(l=this.popupTemplate)?void 0:l.expressionInfos);E.tooltip=this._getTooltip({label:O,value:r[z],chartType:e});return E};d._createClass(I,[{key:"activeMediaInfo",get:function(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}},{key:"formattedMediaInfos",
get:function(){return this._formatMediaInfos()||[]}},{key:"formattedMediaInfoCount",get:function(){return this.formattedMediaInfos.length}}]);return I}(c);h.__decorate([B.property()],c.prototype,"abilities",void 0);h.__decorate([F.cast("abilities")],c.prototype,"castAbilities",null);h.__decorate([B.property()],c.prototype,"activeMediaInfoIndex",void 0);h.__decorate([B.property({readOnly:!0})],c.prototype,"activeMediaInfo",null);h.__decorate([B.property()],c.prototype,"attributes",void 0);h.__decorate([B.property()],
c.prototype,"description",void 0);h.__decorate([B.property()],c.prototype,"fieldInfoMap",void 0);h.__decorate([B.property()],c.prototype,"formattedAttributes",void 0);h.__decorate([B.property()],c.prototype,"expressionAttributes",void 0);h.__decorate([B.property({readOnly:!0})],c.prototype,"formattedMediaInfos",null);h.__decorate([B.property()],c.prototype,"layer",void 0);h.__decorate([B.property({readOnly:!0})],c.prototype,"formattedMediaInfoCount",null);h.__decorate([B.property()],c.prototype,"mediaInfos",
void 0);h.__decorate([B.property()],c.prototype,"popupTemplate",void 0);h.__decorate([B.property()],c.prototype,"relatedInfos",void 0);h.__decorate([B.property()],c.prototype,"title",void 0);return c=h.__decorate([L.subclass("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],c)})},"esri/widgets/Feature/support/relatedFeatureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../layers/support/fieldUtils ../../../rest/support/Query ../../../rest/support/RelationshipQuery ../../../rest/support/StatisticDefinition ../../../tasks/QueryTask ./featureUtils".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k){function m(w,e){if(!e.relationships)return null;let z=null;({relationships:e}=e);e.some(S=>S.id===parseInt(w,10)?(z=S,!0):!1);return z}function q({originRelationship:w,relationships:e,layerId:z}){let S;e&&e.some(J=>{`${J.relatedTableId}`===z&&J.id===w.id&&(S=J);return!!S});return S}function I(w,e){e=e.toLowerCase();for(const z in w)if(z.toLowerCase()===e)return w[z];return null}function p(w,e,z,S){const J=new K;J.outFields=["*"];J.relationshipId="number"===typeof e.id?
e.id:parseInt(e.id,10);J.objectIds=[w.attributes[z.objectIdField]];return z.queryRelatedFeatures(J,S)}function E(w,e,z){let S=0;const J=[];for(;S<e.length;)J.push(`${w} IN (${e.slice(S,z+S)})`),S+=z;return J.join(" OR ")}function x(w,e,z,S){return A.apply(this,arguments)}function A(){A=h._asyncToGenerator(function*(w,e,z,S){var J=z.layerId.toString();const {layerInfo:O,queryTask:t,relation:l,relatedFields:b,outStatistics:f}=e;J=q({originRelationship:l,relationships:O.relationships,layerId:J});if(J.relationshipTableId&&
J.keyFieldInRelationshipTable){z=(yield p(w,J,z,S))[w.attributes[z.objectIdField]];if(!z)return null;const n=z.features.map(P=>P.attributes[O.objectIdField]);if(0<(null==f?void 0:f.length)&&O.supportsStatistics)return e=new L,e.where=E(O.objectIdField,n,1E3),e.outFields=b,e.outStatistics=f,e={features:Promise.resolve(z),statsFeatures:t.execute(e)},u.eachAlways(e)}return(J=null==J?void 0:J.keyField)?(z=F.isNumericField(r(O.fields,J)),w=I(w.attributes,l.keyField),J=z?`${J}=${w}`:`${J}='${w}'`,w=t.execute(new L({where:J,
outFields:e.relatedFields}),S),e=e.outStatistics&&0<e.outStatistics.length&&O.supportsStatistics?t.execute(new L({where:J,outFields:e.relatedFields,outStatistics:e.outStatistics}),S):null,S={features:w},e&&(S.statsFeatures=e),u.eachAlways(S)):null});return A.apply(this,arguments)}function r(w,e){if(null!=w){e=e.toLowerCase();for(const z of w)if(z&&z.name.toLowerCase()===e)return z}return null}const G=g.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),H=new Map;d.createRelatedInfo=function(w,
e){if(w=m(w,e)){var z=`${e.url}/${w.relatedTableId}`;e=new y({url:z,sourceSpatialReference:e.spatialReference});return{url:z,queryTask:e,relation:w,relatedFields:[],outStatistics:[]}}};d.getDestinationRelation=q;d.getRelatedFieldInfo=function(w){if(!k.isRelatedField(w))return null;const [e,z]=w.split("/").slice(1);return{layerId:e,fieldName:z}};d.queryLayerInfos=function({relatedInfos:w,layer:e},z){const S={};w.forEach((J,O)=>{({relation:J}=J);if(!J)throw O=new B("relation-required","A relation is required on a layer to retrieve related records."),
G.error(O),O;({relatedTableId:J}=J);if("number"!==typeof J)throw O=new B("A related table ID is required on a layer to retrieve related records."),G.error(O),O;J=`${e.url}/${J}`;const t=H.get(J),l=t?t:c(J,{query:{f:"json"},signal:z&&z.signal});t||H.set(J,l);S[O]=l});return u.eachAlways(S)};d.queryRelatedFeatures=function({graphic:w,relatedInfos:e,layer:z},S){const J={};e.forEach((O,t)=>{O.layerInfo&&(J[t]=x(w,O,z,S))});return u.eachAlways(J)};d.setRelatedFeatures=function(w,e){if(e&&w){var {features:z,
statsFeatures:S}=w;w=z&&z.value;e.relatedFeatures=w?w.features:[];w=S&&S.value;e.relatedStatsFeatures=w?w.features:[]}};d.updateRelatedInfo=function({relatedInfo:w,fieldName:e,fieldInfo:z}){w.relatedFields.push(e);z.statisticType&&(e=new M({statisticType:z.statisticType,onStatisticField:e,outStatisticFieldName:e}),w.outStatistics.push(e))};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/widgets/support/chartUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../intl ../../core/has ../../intl/locale".split(" "),
function(d,h,c,B,g,u){function F(m){if(!m)return"en-us";if(M.has(m.toLowerCase()))return m.toLowerCase();{m=m.split("-")[0].toLowerCase();let I=null;for(q of M.keys())if(q.startsWith(m)){I=q;break}var q=I}return q||"en-us"}function L(){L=c._asyncToGenerator(function*(m=u.getLocale()){m=F(m);if(y&&m===k)return y;y=(new Promise((q,I)=>d(["../../chunks/index"],q,I))).then(q=>q.index);k=m;try{const [q,I]=yield Promise.all([y,M.get(k)()]);k===m&&(q.am4core.options.defaultLocale=I.default);q.am4core.options.suppressWarnings=
!0;q.am4core.options.autoDispose=!0}catch{return k=y=null}return y});return L.apply(this,arguments)}B="#ffffff #858585 #ffbebe #ffebbe #ffebaf #ffffbe #e9ffbe #d3ffbe #beffe8 #bee8ff #bed2ff #e8beff #ffbee8 #ebebeb #707070 #ff7f7f #ffa77f #ffd37f #ffff73 #d1ff73 #a3ff73 #73ffdf #73dfff #73b2ff #df73ff #ff73df #d6d6d6 #5c5c5c #ff0000 #ff5500 #ffaa00 #ffff00 #aaff00 #55ff00 #00ffc5 #00c5ff #0070ff #c500ff #ff00c5 #c2c2c2 #474747 #e60000 #e64c00 #e69800 #e6e600 #98e600 #4ce600 #00e6a9 #00a9e6 #005ce6 #a900e6 #e600a9 #adadad #242424 #a80000 #a83800 #a87000 #a8a800 #70a800 #38a800 #00a884 #0084a8 #004da8 #8400a8 #a80084 #999999 #1a1a1a #730000 #732600 #734c00 #737300 #4c7300 #267300 #00734c #004c73 #002673 #4c0073 #73004".split(" ");
var K=[{name:"default",colors:[].concat(B.slice(30,39),B.slice(28,30).reverse())},{name:"cat-dark",colors:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8 #b7814a #3caf99 #6b6bd6 #b54779 #7f7f7f".split(" ")},{name:"tropical-bliss",colors:"#fce138 #ff9399 #fcd27e #f1983c #a553b7 #b1a9d0 #6ecffc #4c81cd #fc6f84 #fc3e5a #6af689 #48885c".split(" ")},{name:"desert-blooms",colors:"#102432 #144d59 #ffc730 #ed9310 #a64f1b #661510 #d9351a #b31515 #4a0932 #8c213f #18382e #2c6954".split(" ")},{name:"under-the-sea",
colors:"#bf9727 #607100 #00734c #704489 #01acca #024e76 #f09100 #ea311f #c6004b #7570b3 #666666 #333333".split(" ")},{name:"vibrant-rainbow",colors:"#fffb00 #f5cb11 #9fd40c #46e39c #32b8a6 #7ff2fa #ac08cc #dd33ff #eb7200 #e8a784 #bf2e2e #6c7000".split(" ")},{name:"ocean-bay",colors:"#191921 #11495c #78b1c2 #454f4b #8f8f82 #9be0c0 #87b051 #f7ec88 #ebdcc1 #dbb658 #c43541 #75351e".split(" ")},{name:"prairie-summer",colors:"#332424 #751555 #d47013 #d68989 #211173 #82aad6 #7bfaeb #6ec9a8 #6b6408 #eada40 #ccc54a #1fc235".split(" ")},
{name:"pastel-chalk",colors:"#fffd99 #f5e6a4 #c1d48c #b8e3d0 #a0b8b5 #cbf7fa #d791f2 #dfc1eb #f2b983 #e8c4b2 #bf8e8e #94995c".split(" ")},{name:"seq-yellow-orange-red-bright",colors:"#910000 #b1260b #c0370f #e05919 #ef6a1d #ff7b22 #ffa143 #ffb454 #ffda74 #ffed85".split(" ")},{name:"seq-reds-bright",colors:"#57453b #7b4238 #9f4036 #c23d33 #d7483c #ec5244 #f3696c #f9816c #ffc4ae #fff0dc".split(" ")},{name:"seq-purples-bright",colors:"#4e465c #5a4a78 #695291 #775baa #8663c3 #946bdc #aa89e8 #c1a6f3 #d7c4ff #e6e1ff".split(" ")},
{name:"seq-blues-bright",colors:"#404d54 #435c6c #48799d #4b88b6 #4d96ce #50a5e7 #74bbed #98d0f3 #bce6f9 #e6faff".split(" ")},{name:"seq-greens-bright",colors:"#39544c #386757 #368165 #359b73 #33b581 #4bc392 #64d2a2 #7ce0b3 #cbf6d9 #f4ffea".split(" ")},{name:"seq-browns-bright",colors:"#524834 #715b38 #8f6e3c #ae8140 #cc9444 #eba748 #eeb664 #f0c47f #f9e0b7 #fff8eb".split(" ")}];const M=new Map([["ar",()=>(new Promise((m,q)=>d(["../../chunks/ar"],m,q))).then(m=>m.ar)],["bg-bg",()=>(new Promise((m,
q)=>d(["../../chunks/bg_BG"],m,q))).then(m=>m.bg_BG)],["bs-ba",()=>(new Promise((m,q)=>d(["../../chunks/bs_BA"],m,q))).then(m=>m.bs_BA)],["ca-es",()=>(new Promise((m,q)=>d(["../../chunks/ca_ES"],m,q))).then(m=>m.ca_ES)],["cs-cz",()=>(new Promise((m,q)=>d(["../../chunks/cs_CZ"],m,q))).then(m=>m.cs_CZ)],["da-dk",()=>(new Promise((m,q)=>d(["../../chunks/da_DK"],m,q))).then(m=>m.da_DK)],["de-de",()=>(new Promise((m,q)=>d(["../../chunks/de_DE"],m,q))).then(m=>m.de_DE)],["de-ch",()=>(new Promise((m,q)=>
d(["../../chunks/de_CH"],m,q))).then(m=>m.de_CH)],["el-gr",()=>(new Promise((m,q)=>d(["../../chunks/el_GR"],m,q))).then(m=>m.el_GR)],["en-us",()=>(new Promise((m,q)=>d(["../../chunks/en_US"],m,q))).then(m=>m.en_US)],["en-ca",()=>(new Promise((m,q)=>d(["../../chunks/en_CA"],m,q))).then(m=>m.en_CA)],["es-es",()=>(new Promise((m,q)=>d(["../../chunks/es_ES"],m,q))).then(m=>m.es_ES)],["et-ee",()=>(new Promise((m,q)=>d(["../../chunks/et_EE"],m,q))).then(m=>m.et_EE)],["fi-fi",()=>(new Promise((m,q)=>d(["../../chunks/fi_FI"],
m,q))).then(m=>m.fi_FI)],["fr-fr",()=>(new Promise((m,q)=>d(["../../chunks/fr_FR"],m,q))).then(m=>m.fr_FR)],["he-il",()=>(new Promise((m,q)=>d(["../../chunks/he_IL"],m,q))).then(m=>m.he_IL)],["hr-hr",()=>(new Promise((m,q)=>d(["../../chunks/hr_HR"],m,q))).then(m=>m.hr_HR)],["hu-hu",()=>(new Promise((m,q)=>d(["../../chunks/hu_HU"],m,q))).then(m=>m.hu_HU)],["id-id",()=>(new Promise((m,q)=>d(["../../chunks/id_ID"],m,q))).then(m=>m.id_ID)],["it-it",()=>(new Promise((m,q)=>d(["../../chunks/it_IT"],m,q))).then(m=>
m.it_IT)],["ja-jp",()=>(new Promise((m,q)=>d(["../../chunks/ja_JP"],m,q))).then(m=>m.ja_JP)],["ko-kr",()=>(new Promise((m,q)=>d(["../../chunks/ko_KR"],m,q))).then(m=>m.ko_KR)],["lt-lt",()=>(new Promise((m,q)=>d(["../../chunks/lt_LT"],m,q))).then(m=>m.lt_LT)],["lv-lv",()=>(new Promise((m,q)=>d(["../../chunks/lv_LV"],m,q))).then(m=>m.lv_LV)],["nb-no",()=>(new Promise((m,q)=>d(["../../chunks/nb_NO"],m,q))).then(m=>m.nb_NO)],["nl-nl",()=>(new Promise((m,q)=>d(["../../chunks/nl_NL"],m,q))).then(m=>m.nl_NL)],
["pl-pl",()=>(new Promise((m,q)=>d(["../../chunks/pl_PL"],m,q))).then(m=>m.pl_PL)],["pt-br",()=>(new Promise((m,q)=>d(["../../chunks/pt_BR"],m,q))).then(m=>m.pt_BR)],["pt-pt",()=>(new Promise((m,q)=>d(["../../chunks/pt_PT"],m,q))).then(m=>m.pt_PT)],["ro-ro",()=>(new Promise((m,q)=>d(["../../chunks/ro_RO"],m,q))).then(m=>m.ro_RO)],["ru-ru",()=>(new Promise((m,q)=>d(["../../chunks/ru_RU"],m,q))).then(m=>m.ru_RU)],["sk-sk",()=>(new Promise((m,q)=>d(["../../chunks/sk_SK"],m,q))).then(m=>m.sk_SK)],["sl-sl",
()=>(new Promise((m,q)=>d(["../../chunks/sl_SL"],m,q))).then(m=>m.sl_SL)],["sr-rs",()=>(new Promise((m,q)=>d(["../../chunks/sr_RS"],m,q))).then(m=>m.sr_RS)],["sv-se",()=>(new Promise((m,q)=>d(["../../chunks/sv_SE"],m,q))).then(m=>m.sv_SE)],["th-th",()=>(new Promise((m,q)=>d(["../../chunks/th_TH"],m,q))).then(m=>m.th_TH)],["tr-tr",()=>(new Promise((m,q)=>d(["../../chunks/tr_TR"],m,q))).then(m=>m.tr_TR)],["uk-ua",()=>(new Promise((m,q)=>d(["../../chunks/uk_UA"],m,q))).then(m=>m.uk_UA)],["vi-vn",()=>
(new Promise((m,q)=>d(["../../chunks/vi_VN"],m,q))).then(m=>m.vi_VN)],["zh-cn",()=>(new Promise((m,q)=>d(["../../chunks/zh_Hans"],m,q))).then(m=>m.zh_Hans)],["zh-hk",()=>(new Promise((m,q)=>d(["../../chunks/zh_Hant"],m,q))).then(m=>m.zh_Hant)],["zh-tw",()=>(new Promise((m,q)=>d(["../../chunks/zh_Hant"],m,q))).then(m=>m.zh_Hant)]]);let y,k;h.getChartLocale=F;h.getColorSet=function(m,q="default"){const I=K.find(p=>p.name===q);return I?I.colors.map(p=>m.color(p)):null};h.loadChartsModule=function(){return L.apply(this,
arguments)};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureExpression/FeatureExpressionViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../chunks/languageUtils ../../../core/Accessor ../../../core/HandleOwner ../../../core/throttle ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/content/AttachmentsContent ../../../popup/content/Content ../../../popup/content/CustomContent ../../../popup/content/ExpressionContent ../../../popup/content/FieldsContent ../../../popup/content/MediaContent ../../../popup/content/TextContent ../../../popup/ElementExpressionInfo ../FeatureContent/FeatureContentViewModel ../FeatureFields/FeatureFieldsViewModel ../FeatureMedia/FeatureMediaViewModel ../support/arcadeFeatureUtils".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p,E,x,A,r,G,H,w,e,z){g=function(S){function J(O){var t=S.call(this,O)||this;t._abortController=null;t.expressionInfo=null;t.graphic=null;t.contentElement=null;t.contentElementViewModel=null;t.interceptor=null;t.view=null;t._cancelQuery=()=>{const {_abortController:l}=d._assertThisInitialized(t);l&&l.abort();t._abortController=null};t._createVM=()=>{var l,b;const f=null==(l=t.contentElement)?void 0:l.type;null==(b=t.contentElementViewModel)?void 0:b.destroy();
l="fields"===f?new w:"media"===f?new e:"text"===f?new H:null;t._set("contentElementViewModel",l)};t._compile=d._asyncToGenerator(function*(){t._cancelQuery();const l=new AbortController;t._abortController=l;yield t._compileExpression();t._abortController===l&&(t._abortController=null)});t._compileThrottled=F.throttle(t._compile,1,d._assertThisInitialized(t));t._compileExpression=d._asyncToGenerator(function*(){const {expressionInfo:l,graphic:b,interceptor:f,spatialReference:n,map:P,view:U,_abortController:T}=
d._assertThisInitialized(t);if(l&&b&&n&&P){var v=yield z.loadArcadeUtils();if(T===t._abortController)if((v=yield z.createCompiledExpression({arcadeUtils:v,expressionInfo:l,graphic:b,interceptor:f,map:P,spatialReference:n,view:U}))&&"esri.arcade.Dictionary"===v.declaredClass){v=yield B.castAsJsonAsync(v,T.signal);var N=null==v?void 0:v.type;v="media"===N?A.fromJSON(v):"text"===N?r.fromJSON(v):"fields"===N?x.fromJSON(v):null;t._set("contentElement",v)}else t._set("contentElement",null)}else t._set("contentElement",
null)});t.handles.add([L.init(d._assertThisInitialized(t),["expressionInfo","graphic","map","spatialReference","view"],t._compileThrottled),L.init(d._assertThisInitialized(t),"contentElement",t._createVM)]);return t}d._inheritsLoose(J,S);J.prototype.destroy=function(){var O;this._cancelQuery();null==(O=this.contentElementViewModel)?void 0:O.destroy();this._set("contentElementViewModel",null);this._set("contentElement",null)};d._createClass(J,[{key:"spatialReference",get:function(){var O;return(null==
(O=this.view)?void 0:O.spatialReference)||null},set:function(O){void 0===O?this._clearOverride("spatialReference"):this._override("spatialReference",O)}},{key:"state",get:function(){const {_abortController:O,contentElement:t,contentElementViewModel:l}=this;return O?"loading":t||l?"ready":"disabled"}},{key:"map",get:function(){var O;return(null==(O=this.view)?void 0:O.map)||null},set:function(O){void 0===O?this._clearOverride("map"):this._override("map",O)}}]);return J}(u.HandleOwnerMixin(g));h.__decorate([K.property()],
g.prototype,"_abortController",void 0);h.__decorate([K.property({type:G})],g.prototype,"expressionInfo",void 0);h.__decorate([K.property({type:c})],g.prototype,"graphic",void 0);h.__decorate([K.property({readOnly:!0})],g.prototype,"contentElement",void 0);h.__decorate([K.property({readOnly:!0})],g.prototype,"contentElementViewModel",void 0);h.__decorate([K.property()],g.prototype,"interceptor",void 0);h.__decorate([K.property()],g.prototype,"spatialReference",null);h.__decorate([K.property({readOnly:!0})],
g.prototype,"state",null);h.__decorate([K.property()],g.prototype,"map",null);h.__decorate([K.property()],g.prototype,"view",void 0);return g=h.__decorate([m.subclass("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],g)})},"esri/chunks/languageUtils":function(){define("exports ../arcade/FunctionWrapper ../arcade/ImmutableArray ../arcade/ImmutablePathArray ../arcade/ImmutablePointArray ../core/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ./datetime ../core/maybe ../core/number ../geometry/support/coordsUtils ../intl/locale ../arcade/featureset/support/shared".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p,E,x){function A(Z,ja,sa){return""===ja||null===ja||void 0===ja||ja===sa||ja===sa?Z:Z=Z.split(ja).join(sa)}function r(Z){return Z instanceof Ab||Z instanceof h||Z instanceof Bb}function G(Z){return w(Z)||z(Z)||f(Z)||e(Z)||null===Z||Z===bb||"number"===typeof Z?!0:!1}function H(Z,ja){return void 0===Z?ja:Z}function w(Z){return"string"===typeof Z||Z instanceof String}function e(Z){return"boolean"===typeof Z}function z(Z){return"number"===typeof Z}function S(Z){return"number"===
typeof Z&&isFinite(Z)&&Math.floor(Z)===Z}function J(Z){return Z instanceof Array}function O(Z){return"esri.arcade.Feature"===(null==Z?void 0:Z.arcadeDeclaredClass)?!0:!1}function t(Z){return!0===(Z&&Z.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===Z.declaredRootClass)}function l(Z){return!0===(Z&&Z.declaredRootClass&&"esri.arcade.featureSetCollection"===Z.declaredRootClass)}function b(Z){return Z instanceof c}function f(Z){return Z instanceof Date}function n(Z,ja,sa){if(Z.length<
ja||Z.length>sa)throw Error("Function called with wrong number of Parameters");}function P(Z){return 0>Z?-Math.round(-Z):Math.round(Z)}function U(){let Z=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ja){const sa=(Z+16*Math.random())%16|0;Z=Math.floor(Z/16);return("x"===ja?sa:sa&3|8).toString(16)})}function T(Z,ja){if(!1===isNaN(Z)){if(void 0===ja||null===ja||""===ja)return Z.toString();ja=A(ja,"\u2030","");ja=A(ja,"\u00a4","");return I.format(Z,{pattern:ja})}return Z.toString()}
function v(Z,ja){Z=m.DateTime.fromJSDate(Z);return void 0===ja||null===ja||""===ja?Z.toISO({suppressMilliseconds:!0}):Z.toFormat(N(ja),{locale:E.getLocale(),numberingSystem:"latn"})}function N(Z){Z=Z.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let ja="";const sa=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const Ga of Z.match(sa))switch(Ga){case "D":ja+=
"d";break;case "DD":ja+="dd";break;case "DDD":ja+="o";break;case "d":ja+="c";break;case "ddd":ja+="ccc";break;case "dddd":ja+="cccc";break;case "M":ja+="L";break;case "MM":ja+="LL";break;case "MMM":ja+="LLL";break;case "MMMM":ja+="LLLL";break;case "YY":ja+="yy";break;case "Y":case "YYYY":ja+="yyyy";break;case "Q":ja+="q";break;case "Z":ja+="ZZ";break;case "ZZ":ja+="ZZZ";break;case "S":ja+="'S'";break;case "SS":ja+="'SS'";break;case "SSS":ja+="u";break;case "A":case "a":ja+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":ja+=
Ga;break;default:ja=2<=Ga.length&&"["===Ga.slice(0,1)&&"]"===Ga.slice(-1)?ja+`'${Ga.slice(1,-1)}'`:ja+`'${Ga}'`}return ja}function R(Z,ja,sa){switch(sa){case "\x3e":return Z>ja;case "\x3c":return Z<ja;case "\x3e\x3d":return Z>=ja;case "\x3c\x3d":return Z<=ja}return!1}function W(Z,ja,sa){if(null===Z){if(null===ja||ja===bb)return R(null,null,sa);if(z(ja))return R(0,ja,sa);if(w(ja)||e(ja))return R(0,Ba(ja),sa);if(f(ja))return R(0,ja.getTime(),sa)}if(Z===bb){if(null===ja||ja===bb)return R(null,null,sa);
if(z(ja))return R(0,ja,sa);if(w(ja)||e(ja))return R(0,Ba(ja),sa);if(f(ja))return R(0,ja.getTime(),sa)}else if(z(Z)){if(z(ja))return R(Z,ja,sa);if(e(ja))return R(Z,Ba(ja),sa);if(null===ja||ja===bb)return R(Z,0,sa);if(w(ja))return R(Z,Ba(ja),sa);if(f(ja))return R(Z,ja.getTime(),sa)}else if(w(Z)){if(w(ja))return R(da(Z),da(ja),sa);if(f(ja))return R(Ba(Z),ja.getTime(),sa);if(z(ja))return R(Ba(Z),ja,sa);if(null===ja||ja===bb)return R(Ba(Z),0,sa);if(e(ja))return R(Ba(Z),Ba(ja),sa)}else if(f(Z)){if(f(ja))return R(Z,
ja,sa);if(null===ja||ja===bb)return R(Z.getTime(),0,sa);if(z(ja))return R(Z.getTime(),ja,sa);if(e(ja)||w(ja))return R(Z.getTime(),Ba(ja),sa)}else if(e(Z)){if(e(ja))return R(Z,ja,sa);if(z(ja))return R(Ba(Z),Ba(ja),sa);if(f(ja))return R(Ba(Z),ja.getTime(),sa);if(null===ja||ja===bb)return R(Ba(Z),0,sa);if(w(ja))return R(Ba(Z),Ba(ja),sa)}return!ea(Z,ja)||"\x3c\x3d"!==sa&&"\x3e\x3d"!==sa?!1:!0}function ea(Z,ja){if(Z===ja||null===Z&&ja===bb||null===ja&&Z===bb)return!0;if(f(Z)&&f(ja))return Z.getTime()===
ja.getTime();if(Z instanceof B||Z instanceof g)return Z.equalityTest(ja);if(Z instanceof M&&ja instanceof M){const sa=Z.cache._arcadeCacheId,Ga=ja.cache._arcadeCacheId;if(void 0!==sa&&null!==sa)return sa===Ga}return void 0!==Z&&void 0!==ja&&null!==Z&&null!==ja&&"object"===typeof Z&&"object"===typeof ja&&(Z._arcadeCacheId===ja._arcadeCacheId&&void 0!==Z._arcadeCacheId&&null!==Z._arcadeCacheId||Z._underlyingGraphic===ja._underlyingGraphic&&void 0!==Z._underlyingGraphic&&null!==Z._underlyingGraphic)?
!0:!1}function da(Z,ja){if(w(Z))return Z;if(null===Z)return"";if(z(Z))return T(Z,ja);if(e(Z))return Z.toString();if(f(Z))return v(Z,ja);if(Z instanceof L)return JSON.stringify(Z.toJSON());if(J(Z)){ja=[];for(var sa=0;sa<Z.length;sa++)ja[sa]=Ca(Z[sa]);return"["+ja.join(",")+"]"}if(Z instanceof c){ja=[];for(sa=0;sa<Z.length();sa++)ja[sa]=Ca(Z.get(sa));return"["+ja.join(",")+"]"}return null!==Z&&"object"===typeof Z&&void 0!==Z.castToText?Z.castToText():r(Z)?"object, Function":""}function qa(Z){const ja=
[];if(!1===J(Z))return null;if(Z instanceof c){for(var sa=0;sa<Z.length();sa++)ja[sa]=Ba(Z.get(sa));return ja}for(sa=0;sa<Z.length;sa++)ja[sa]=Ba(Z[sa]);return ja}function va(Z,ja){if(w(Z))return Z;if(null===Z)return"";if(z(Z))return T(Z,ja);if(e(Z))return Z.toString();if(f(Z))return v(Z,ja);if(Z instanceof L)return Z instanceof F?'{"xmin":'+Z.xmin.toString()+',"ymin":'+Z.ymin.toString()+","+(Z.hasZ?'"zmin":'+Z.zmin.toString()+",":"")+(Z.hasM?'"mmin":'+Z.mmin.toString()+",":"")+'"xmax":'+Z.xmax.toString()+
',"ymax":'+Z.ymax.toString()+","+(Z.hasZ?'"zmax":'+Z.zmax.toString()+",":"")+(Z.hasM?'"mmax":'+Z.mmax.toString()+",":"")+'"spatialReference":'+ra(Z.spatialReference)+"}":ra(Z.toJSON(),(Ga,Ha)=>Ga.key===Ha.key?0:"spatialReference"===Ga.key?1:"spatialReference"===Ha.key||Ga.key<Ha.key?-1:Ga.key>Ha.key?1:0);if(J(Z)){ja=[];for(var sa=0;sa<Z.length;sa++)ja[sa]=Ca(Z[sa]);return"["+ja.join(",")+"]"}if(Z instanceof c){ja=[];for(sa=0;sa<Z.length();sa++)ja[sa]=Ca(Z.get(sa));return"["+ja.join(",")+"]"}return null!==
Z&&"object"===typeof Z&&void 0!==Z.castToText?Z.castToText():r(Z)?"object, Function":""}function Ca(Z){return null===Z?"null":e(Z)||z(Z)||w(Z)?JSON.stringify(Z):Z instanceof L||Z instanceof c||Z instanceof Array?va(Z):Z instanceof Date?JSON.stringify(v(Z,"")):null!==Z&&"object"===typeof Z&&void 0!==Z.castToText?Z.castToText():"null"}function Ba(Z,ja){return z(Z)?Z:null===Z||""===Z?0:f(Z)?NaN:e(Z)?Z?1:0:J(Z)||""===Z||void 0===Z?NaN:void 0!==ja&&w(Z)?(ja=A(ja,"\u2030",""),ja=A(ja,"\u00a4",""),I.parse(Z,
{pattern:ja})):Z===bb?0:Number(Z)}function ta(Z){return f(Z)?Z:w(Z)&&(Z=la(Z))?Z.toJSDate():null}function fa(Z){return f(Z)?m.DateTime.fromJSDate(Z):w(Z)?la(Z):null}function la(Z){const ja=/ (\d\d)/;let sa=m.DateTime.fromISO(Z);return sa.isValid||ja.test(Z)&&(Z=Z.replace(ja,"T$1"),sa=m.DateTime.fromISO(Z),sa.isValid)?sa:null}function ma(Z){return e(Z)?Z:w(Z)?(Z=Z.toLowerCase(),"true"===Z?!0:!1):z(Z)?0===Z||isNaN(Z)?!1:!0:!1}function aa(Z,ja){if(q.isNone(Z))return null;if(null===Z.spatialReference||
void 0===Z.spatialReference)Z.spatialReference=ja;return Z}function ba(Z){if(null===Z)return null;if(Z instanceof M)return"NaN"===Z.x||null===Z.x||isNaN(Z.x)?null:Z;if(Z instanceof y){if(0===Z.rings.length)return null;for(const ja of Z.rings)if(0<ja.length)return Z;return null}if(Z instanceof k){if(0===Z.paths.length)return null;for(const ja of Z.paths)if(0<ja.length)return Z;return null}return Z instanceof K?0===Z.points.length?null:Z:Z instanceof F?"NaN"===Z.xmin||null===Z.xmin||isNaN(Z.xmin)?null:
Z:null}function ha(Z,ja){if(!Z||!Z.domain)return ja;let sa=null;if("string"===Z.field.type||"esriFieldTypeString"===Z.field.type)ja=da(ja);else{if(null===ja||void 0===ja)return null;if(""===ja)return ja;ja=Ba(ja)}for(let Ga=0;Ga<Z.domain.codedValues.length;Ga++){const Ha=Z.domain.codedValues[Ga];Ha.code===ja&&(sa=Ha)}return null===sa?ja:sa.name}function ka(Z,ja){if(!Z||!Z.domain)return ja;let sa=null;ja=da(ja);for(let Ga=0;Ga<Z.domain.codedValues.length;Ga++){const Ha=Z.domain.codedValues[Ga];Ha.name===
ja&&(sa=Ha)}return null===sa?ja:sa.code}function pa(Z,ja,sa=null,Ga=null){if(!ja||!ja.fields)return null;let Ha=null;for(let cb=0;cb<ja.fields.length;cb++){const Za=ja.fields[cb];Za.name.toLowerCase()===Z.toString().toLowerCase()&&(Ha=Za)}if(null===Ha)throw Error("Field not found");let Pa,Ta;null===Ga&&sa&&ja.typeIdField&&(Ga=sa.hasField(ja.typeIdField)?sa.field(ja.typeIdField):null);null!==Ga&&void 0!==Ga&&ja.types.some(function(cb){return cb.id===Ga?((Pa=cb.domains&&cb.domains[Ha.name])&&"inherited"===
Pa.type&&(Pa=oa(Ha.name,ja),Ta=!0),!0):!1});Ta||Pa||(Pa=oa(Z,ja));return{field:Ha,domain:Pa}}function oa(Z,ja){let sa;ja.fields.some(function(Ga){Ga.name.toLowerCase()===Z.toLowerCase()&&(sa=Ga.domain);return!!sa});return sa}function ra(Z,ja){ja||(ja={});"function"===typeof ja&&(ja={cmp:ja});const sa="boolean"===typeof ja.cycles?ja.cycles:!1,Ga=ja.cmp&&function(Pa){return function(Ta){return function(cb,Za){return Pa({key:cb,value:Ta[cb]},{key:Za,value:Ta[Za]})}}}(ja.cmp),Ha=[];return function cb(Ta){Ta&&
Ta.toJSON&&"function"===typeof Ta.toJSON&&(Ta=Ta.toJSON());if(void 0!==Ta){if("number"===typeof Ta)return isFinite(Ta)?""+Ta:"null";if("object"!==typeof Ta)return JSON.stringify(Ta);var Za;if(Array.isArray(Ta)){var jb="[";for(Za=0;Za<Ta.length;Za++)Za&&(jb+=","),jb+=cb(Ta[Za])||"null";return jb+"]"}if(null===Ta)return"null";if(-1!==Ha.indexOf(Ta)){if(sa)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var cc=Ha.push(Ta)-1,Wb=Object.keys(Ta).sort(Ga&&
Ga(Ta));jb="";for(Za=0;Za<Wb.length;Za++){const Eb=Wb[Za],tb=cb(Ta[Eb]);tb&&(jb&&(jb+=","),jb+=JSON.stringify(Eb)+":"+tb)}Ha.splice(cc,1);return"{"+jb+"}"}}(Z)}function Aa(Z){if(null===Z)return null;const ja=[];for(const sa of Z)sa&&sa.arcadeDeclaredClass&&"esri.arcade.Feature"===sa.arcadeDeclaredClass?ja.push(sa.geometry()):ja.push(sa);return ja}function Fa(Z,ja){if(ja instanceof M)Z.push(ja.hasZ?ja.hasM?[ja.x,ja.y,ja.z,ja.m]:[ja.x,ja.y,ja.z]:[ja.x,ja.y]);else throw Error("Invalid Argument");}function ya(Z,
ja){if(J(Z)||b(Z)){let sa=!1,Ga=!1,Ha=[];if(J(Z)){for(const Pa of Z)Fa(Ha,Pa);0<Ha.length&&(ja=Z[0].spatialReference,sa=Z[0].hasZ,Ga=Z[0].hasM)}else if(Z instanceof g)Ha=Z._elements,0<Ha.length&&(sa=Z._hasZ,Ga=Z._hasM,ja=Z.get(0).spatialReference);else if(b(Z)){for(const Pa of Z.toArray())Fa(Ha,Pa);0<Ha.length&&(ja=Z.get(0).spatialReference,sa=!0===Z.get(0).hasZ,Ga=!0===Z.get(0).hasM)}else throw Error("Invalid Argument");if(0===Ha.length)return null;!1===p.isClockwise(Ha,Ga,sa)&&(Ha=Ha.slice(0).reverse());
return new y({rings:[Ha],spatialReference:ja,hasZ:sa,hasM:Ga})}return Z}function Da(Z,ja){if(J(Z)||b(Z)){let sa=!1,Ga=!1,Ha=[];if(J(Z)){for(const Pa of Z)Fa(Ha,Pa);0<Ha.length&&(ja=Z[0].spatialReference,sa=!0===Z[0].hasZ,Ga=!0===Z[0].hasM)}else if(Z instanceof g)Ha=Z._elements,0<Ha.length&&(sa=Z._hasZ,Ga=Z._hasM,ja=Z.get(0).spatialReference);else if(b(Z)){for(const Pa of Z.toArray())Fa(Ha,Pa);0<Ha.length&&(ja=Z.get(0).spatialReference,sa=!0===Z.get(0).hasZ,Ga=!0===Z.get(0).hasM)}return 0===Ha.length?
null:new k({paths:[Ha],spatialReference:ja,hasZ:sa,hasM:Ga})}return Z}function za(Z,ja){if(J(Z)||b(Z)){let sa=!1,Ga=!1,Ha=[];if(J(Z)){for(const Pa of Z)Fa(Ha,Pa);0<Ha.length&&(ja=Z[0].spatialReference,sa=!0===Z[0].hasZ,Ga=!0===Z[0].hasM)}else if(Z instanceof g)Ha=Z._elements,0<Ha.length&&(sa=Z._hasZ,Ga=Z._hasM,ja=Z.get(0).spatialReference);else if(b(Z)){for(const Pa of Z.toArray())Fa(Ha,Pa);0<Ha.length&&(ja=Z.get(0).spatialReference,sa=!0===Z.get(0).hasZ,Ga=!0===Z.get(0).hasM)}return 0===Ha.length?
null:new K({points:Ha,spatialReference:ja,hasZ:sa,hasM:Ga})}return Z}function Ja(Z,ja=!1){const sa=[];if(null===Z)return sa;if(!0===J(Z)){for(var Ga=0;Ga<Z.length;Ga++){var Ha=da(Z[Ga]);""===Ha&&!0!==ja||sa.push(Ha)}return sa}if(Z instanceof c){for(Ga=0;Ga<Z.length();Ga++)Ha=da(Z.get(Ga)),""===Ha&&!0!==ja||sa.push(Ha);return sa}return G(Z)?(Z=da(Z),""===Z&&!0!==ja||sa.push(Z),sa):[]}function Ka(Z){Cb++;return 0===Cb%100?(Cb=0,u.create(ja=>{setTimeout(()=>{ja(Z)},0)})):Z}function Ma(Z,ja,sa){switch(sa){case "\x26":return Z&
ja;case "|":return Z|ja;case "^":return Z^ja;case "\x3c\x3c":return Z<<ja;case "\x3e\x3e":return Z>>ja;case "\x3e\x3e\x3e":return Z>>>ja}}function Na(Z,ja=null){if(null!=Z){if(e(Z)||z(Z)||w(Z))return Z;if(Z instanceof L)return!0===(null==ja?void 0:ja.keepGeometryType)?Z:Z.toJSON();if(Z instanceof c)return Z.toArray().map(sa=>Na(sa,ja));if(Z instanceof Array)return Z.map(sa=>Na(sa,ja));if(Z instanceof Date)return Z;if(null!==Z&&"object"===typeof Z&&void 0!==Z.castAsJson)return Z.castAsJson(ja)}return null}
function qb(Z,ja,sa,Ga,Ha){return hb(Z,ja,sa).then(Pa=>{Ha[Ga]=Pa})}function hb(Z,ja=null,sa=null){Z instanceof c&&(Z=Z.toArray());if(null!=Z){if(G(Z)||Z instanceof L||Z instanceof Date)return u.resolve(Na(Z,sa));if(Z instanceof Array){const Ga=[],Ha=[];for(const Pa of Z)null===Pa||G(Pa)||Pa instanceof L||Pa instanceof Date?Ha.push(Na(Pa,sa)):(Ha.push(null),Ga.push(qb(Pa,ja,sa,Ha.length-1,Ha)));return 0<Ga.length?u.all(Ga).then(()=>Ha):u.resolve(Ha)}if(null!==Z&&"object"===typeof Z&&void 0!==Z.castAsJsonAsync)return Z.castAsJsonAsync(ja,
sa)}return u.resolve(null)}function Va(Z,ja,sa){const Ga=Z.fullSchema();return null!==Ga&&Ga.fields?pa(ja,Ga,Z,sa):null}function ab(Z){Z=Z.fullSchema();return null!==Z&&Z.fields?Z.typeIdField?{subtypeField:Z.typeIdField,subtypes:Z.types?Z.types.map(ja=>({name:ja.name,code:ja.id})):[]}:null:null}function wa(Z,ja,sa,Ga){const Ha=Z.fullSchema();if(null===Ha||!Ha.fields)return null;Ga=pa(ja,Ha,Z,Ga);if(void 0===sa)try{sa=Z.field(ja)}catch(Pa){return null}return ha(Ga,sa)}function Pb(Z,ja,sa,Ga){const Ha=
Z.fullSchema();if(null===Ha||!Ha.fields)return null;if(void 0===sa){try{sa=Z.field(ja)}catch(Pa){return null}return sa}Z=pa(ja,Ha,Z,Ga);return ka(Z,sa)}function fb(Z){Z=Z.fullSchema();if(null===Z||!Z.fields)return null;const ja=[];for(const sa of Z.fields)ja.push(x.esriFieldToJson(sa));return{objectIdField:Z.objectIdField,globalIdField:Z.globalIdField,geometryType:void 0===x.layerGeometryEsriRestConstants[Z.geometryType]?"":x.layerGeometryEsriRestConstants[Z.geometryType],fields:ja}}let sb=function(Z){this.value=
Z},D=function(Z){this.value=Z},Ab=function(Z){this.fn=Z},Bb=function(Z,ja){this.paramCount=ja;this.fn=Z};const Ib=Ab,Ub=Bb,bb={type:"VOID"},Qb={type:"BREAK"},Jb={type:"CONTINUE"};let Cb=0;const Db=Object.freeze({__proto__:null,ReturnResultE:sb,ImplicitResultE:D,NativeFunctionE:Ab,SizzleFunctionE:Bb,NativeFunction:Ib,ImplicitResult:D,ReturnResult:sb,SizzleFunction:Ub,voidOperation:bb,breakResult:Qb,continueResult:Jb,multiReplace:A,isFunctionParameter:r,isSimpleType:G,defaultUndefined:H,isString:w,
isBoolean:e,isNumber:z,isInteger:S,isArray:J,isFeature:O,isFeatureSet:t,isFeatureSetCollection:l,isImmutableArray:b,isDate:f,pcCheck:n,absRound:P,generateUUID:U,formatNumber:T,formatDate:v,standardiseDateFormat:N,greaterThanLessThan:W,equalityTest:ea,toString:da,toNumberArray:qa,toStringExplicit:va,toNumber:Ba,toDate:ta,toDateTime:fa,toBoolean:ma,fixSpatialReference:aa,fixNullGeometry:ba,getDomainValue:ha,getDomainCode:ka,getDomain:pa,stableStringify:ra,autoCastFeatureToGeometry:Aa,autoCastArrayOfPointsToPolygon:ya,
autoCastArrayOfPointsToPolyline:Da,autoCastArrayOfPointsToMultiPoint:za,toStringArray:Ja,tick:Ka,binaryOperator:Ma,castAsJson:Na,castAsJsonAsync:hb,featureFullDomain:Va,featureSubtypes:ab,featureDomainValueLookup:wa,featureDomainCodeLookup:Pb,featureSchema:fb});d.ImplicitResult=D;d.ImplicitResultE=D;d.NativeFunction=Ib;d.NativeFunctionE=Ab;d.ReturnResult=sb;d.ReturnResultE=sb;d.SizzleFunction=Ub;d.SizzleFunctionE=Bb;d.absRound=P;d.autoCastArrayOfPointsToMultiPoint=za;d.autoCastArrayOfPointsToPolygon=
ya;d.autoCastArrayOfPointsToPolyline=Da;d.autoCastFeatureToGeometry=Aa;d.binaryOperator=Ma;d.breakResult=Qb;d.castAsJson=Na;d.castAsJsonAsync=hb;d.continueResult=Jb;d.defaultUndefined=H;d.equalityTest=ea;d.featureDomainCodeLookup=Pb;d.featureDomainValueLookup=wa;d.featureFullDomain=Va;d.featureSchema=fb;d.featureSubtypes=ab;d.fixNullGeometry=ba;d.fixSpatialReference=aa;d.formatDate=v;d.formatNumber=T;d.generateUUID=U;d.getDomain=pa;d.getDomainCode=ka;d.getDomainValue=ha;d.greaterThanLessThan=W;d.isArray=
J;d.isBoolean=e;d.isDate=f;d.isFeature=O;d.isFeatureSet=t;d.isFeatureSetCollection=l;d.isFunctionParameter=r;d.isImmutableArray=b;d.isInteger=S;d.isNumber=z;d.isSimpleType=G;d.isString=w;d.lc=Db;d.multiReplace=A;d.pcCheck=n;d.stableStringify=ra;d.standardiseDateFormat=N;d.tick=Ka;d.toBoolean=ma;d.toDate=ta;d.toDateTime=fa;d.toNumber=Ba;d.toNumberArray=qa;d.toString=da;d.toStringArray=Ja;d.toStringExplicit=va;d.voidOperation=bb})},"esri/arcade/FunctionWrapper":function(){define(function(){return function(d,
h){this.context=this.definition=null;this.definition=d;this.context=h}})},"esri/arcade/ImmutableArray":function(){define(function(){return function(){function d(c=[]){this._elements=c}var h=d.prototype;h.length=function(){return this._elements.length};h.get=function(c){return this._elements[c]};h.toArray=function(){const c=[];for(let B=0;B<this.length();B++)c.push(this.get(B));return c};return d}()})},"esri/arcade/ImmutablePathArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray",
"./ImmutablePointArray"],function(d,h,c){return function(B){function g(F,L,K,M,y){F=B.call(this,F)||this;F._lazyPath=[];F._hasZ=!1;F._hasM=!1;F._hasZ=K;F._hasM=M;F._spRef=L;F._cacheId=y;return F}d._inheritsLoose(g,B);var u=g.prototype;u.get=function(F){if(void 0===this._lazyPath[F]){const L=this._elements[F];if(void 0===L)return;this._lazyPath[F]=new c(L,this._spRef,this._hasZ,this._hasM,this._cacheId,F)}return this._lazyPath[F]};u.equalityTest=function(F){return F===this?!0:null===F||!1===F instanceof
g?!1:F.getUniqueHash()===this.getUniqueHash()};u.getUniqueHash=function(){return this._cacheId.toString()};return g}(h)})},"esri/arcade/ImmutablePointArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray","../geometry/Point"],function(d,h,c){return function(B){function g(F,L,K,M,y,k){F=B.call(this,F)||this;F._lazyPt=[];F._hasZ=!1;F._hasM=!1;F._spRef=L;F._hasZ=K;F._hasM=M;F._cacheId=y;F._partId=k;return F}d._inheritsLoose(g,B);var u=g.prototype;u.get=function(F){if(void 0===
this._lazyPt[F]){const L=this._elements[F];if(void 0===L)return;const K=this._hasZ,M=this._hasM;let y=null;y=K&&!M?new c(L[0],L[1],L[2],void 0,this._spRef):M&&!K?new c(L[0],L[1],void 0,L[2],this._spRef):K&&M?new c(L[0],L[1],L[2],L[3],this._spRef):new c(L[0],L[1],this._spRef);y.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+F.toString();this._lazyPt[F]=y}return this._lazyPt[F]};u.equalityTest=function(F){return F===this?!0:null===F||!1===F instanceof g?!1:F.getUniqueHash()===
this.getUniqueHash()};u.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return g}(h)})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(d,h,c){function B(k){k||(k=c.getLocale());let m=k in K;if(!m){const E=k.split("-");1<E.length&&E[0]in K&&(k=E[0],m=!0);m||(k="en")}const [q,I,p="#,##0.###"]=K[k];return{decimal:q,group:I,pattern:p}}function g(k,m,q){q=q||{};!0===q.places&&(q.places=0);Infinity===q.places&&(q.places=6);m=m.split(".");
var I="string"===typeof q.places&&q.places.indexOf(","),p=q.places;I?p=q.places.substring(I+1):0<=p||(p=(m[1]||[]).length);0>q.round||(k=Number(k.toFixed(Number(p))));k=String(Math.abs(k)).split(".");const E=k[1]||"";m[1]||q.places?(I&&(q.places=q.places.substring(0,I)),I=void 0!==q.places?q.places:m[1]&&m[1].lastIndexOf("0")+1,I>E.length&&(k[1]=E.padEnd(Number(I),"0")),p<E.length&&(k[1]=E.substr(0,Number(p)))):k[1]&&k.pop();p=m[0].replace(",","");I=p.indexOf("0");-1!==I&&(I=p.length-I,I>k[0].length&&
(k[0]=k[0].padStart(I,"0")),-1===p.indexOf("#")&&(k[0]=k[0].substr(k[0].length-I)));p=m[0].lastIndexOf(",");let x,A;-1!==p&&(x=m[0].length-p-1,m=m[0].substr(0,p),p=m.lastIndexOf(","),-1!==p&&(A=m.length-p-1));m=[];for(p=k[0];p;)I=p.length-x,m.push(0<I?p.substr(I):p),p=0<I?p.slice(0,I):"",A&&(x=A,A=void 0);k[0]=m.reverse().join(q.group||",");return k.join(q.decimal||".")}function u(k){k=k||{};var m=B(k.locale);const q=k.pattern||m.pattern,I=m.group,p=m.decimal;let E=1;if(-1!==q.indexOf("%"))E/=100;
else if(-1!==q.indexOf("\u2030"))E/=1E3;else if(-1!==q.indexOf("\u00a4"))throw Error("currency notation not supported");m=q.split(";");1===m.length&&m.push("-"+m[0]);return{regexp:y(m,function(x){x="(?:"+h.escapeRegExpString(x,".")+")";return x.replace(M,function(A){const r={signed:!1,separator:k.strict?I:[I,""],fractional:k.fractional,decimal:p,exponent:!1};A=A.split(".");let G=k.places;1===A.length&&1!==E&&(A[1]="###");1===A.length||0===G?r.fractional=!1:(void 0===G&&(G=k.pattern?A[1].lastIndexOf("0")+
1:Infinity),G&&null==k.fractional&&(r.fractional=!0),!k.places&&G<A[1].length&&(G+=","+A[1].length),r.places=G);A=A[0].split(",");1<A.length&&(r.groupSize=A.pop().length,1<A.length&&(r.groupSize2=A.pop().length));return"("+F(r)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:I,decimal:p,factor:E}}function F(k){k=k||{};"places"in k||(k.places=Infinity);"string"!==typeof k.decimal&&(k.decimal=".");"fractional"in k&&!/^0/.test(String(k.places))||(k.fractional=[!0,!1]);"exponent"in k||(k.exponent=[!0,
!1]);"eSigned"in k||(k.eSigned=[!0,!1]);var m=L(k);const q=y(k.fractional,function(p){let E="";p&&0!==k.places&&(E="\\"+k.decimal,E=Infinity===k.places?"(?:"+E+"\\d+)?":E+("\\d{"+k.places+"}"));return E},!0),I=y(k.exponent,function(p){return p?"([eE]"+L({signed:k.eSigned})+")":""});m+=q;q&&(m="(?:(?:"+m+")|(?:"+q+"))");return m+I}function L(k){k=k||{};"signed"in k||(k.signed=[!0,!1]);"separator"in k?"groupSize"in k||(k.groupSize=3):k.separator="";const m=y(k.signed,function(I){return I?"[-+]":""},
!0),q=y(k.separator,function(I){if(!I)return"(?:\\d+)";I=h.escapeRegExpString(I);" "===I?I="\\s":"\u00a0"===I&&(I="\\s\\xa0");const p=k.groupSize,E=k.groupSize2;return E?(I="(?:0|[1-9]\\d{0,"+(E-1)+"}(?:["+I+"]\\d{"+E+"})*["+I+"]\\d{"+p+"})",0<p-E?"(?:"+I+"|(?:0|[1-9]\\d{0,"+(p-1)+"}))":I):"(?:0|[1-9]\\d{0,"+(p-1)+"}(?:["+I+"]\\d{"+p+"})*)"},!0);return m+q}const K={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],
en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",",
"\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},M=/[#0,]*[#0](?:\.0*#*)?/,y=function(k,m,q){if(!(k instanceof Array))return m(k);const I=[];for(let p=0;p<k.length;p++)I.push(m(k[p]));k=I.join("|");return"("+(q?"?:":"")+k+")"};d._parseInfo=u;d.format=function(k,m){m={...m};var q=B(m.locale);m.customs=q;var I=m.pattern||q.pattern;if(isNaN(k)||Infinity===Math.abs(k))return null;{m=m||{};q=m.customs.group;const E=m.customs.decimal;I=I.split(";");var p=I[0];I=I[0>k?1:0]||
"-"+p;if(-1!==I.indexOf("%"))k*=100;else if(-1!==I.indexOf("\u2030"))k*=1E3;else{if(-1!==I.indexOf("\u00a4"))throw Error("currency notation not supported");if(-1!==I.indexOf("E"))throw Error("exponential notation not supported");}const x=M;p=p.match(x);if(!p)throw Error("unable to find a number expression in pattern: "+I);!1===m.fractional&&(m.places=0);k=I.replace(x,g(k,p[0],{decimal:E,group:q,places:m.places,round:m.round}))}return k};d.getCustoms=B;d.parse=function(k,m){m=u(m);k=(new RegExp("^"+
m.regexp+"$")).exec(k);if(!k)return NaN;let q=k[1];if(!k[1]){if(!k[2])return NaN;q=k[2];m.factor*=-1}q=q.replace(new RegExp("["+m.group+"\\s\\xa0]","g"),"").replace(m.decimal,".");return Number(q)*m.factor};d.regexp=function(k){return u(k).regexp};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/arcade/featureset/support/shared":function(){define(["exports","../../../core/promiseUtils","../../../geometry/Extent","../../../layers/support/Field"],function(d,h,c,B){function g(u){return u instanceof
Date}d.FeatureServiceDatabaseType=void 0;(function(u){u[u.Standardised=0]="Standardised";u[u.StandardisedNoInterval=1]="StandardisedNoInterval";u[u.SqlServer=2]="SqlServer";u[u.Oracle=3]="Oracle";u[u.Postgres=4]="Postgres";u[u.PGDB=5]="PGDB";u[u.FILEGDB=6]="FILEGDB";u[u.NotEvaluated=7]="NotEvaluated"})(d.FeatureServiceDatabaseType||(d.FeatureServiceDatabaseType={}));d.IdState=void 0;(function(u){u[u.InFeatureSet=0]="InFeatureSet";u[u.NotInFeatureSet=1]="NotInFeatureSet";u[u.Unknown=2]="Unknown"})(d.IdState||
(d.IdState={}));d.callback=function(u,F){return function(){try{u.apply(null,arguments)}catch(L){F.reject(L)}}};d.cloneAttributes=function(u){const F={};for(const L in u)F[L]=u[L];return F};d.cloneField=function(u){return B.fromJSON(u.toJSON())};d.convertLinearUnitsToCode=function(u){if(void 0===u)return null;if("number"===typeof u||"number"===typeof u)return u;switch(u.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};
d.convertSquareUnitsToCode=function(u){if(void 0===u)return null;if("number"===typeof u)return u;switch(u.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};d.defaultMaxRecords=1E3;d.equalityTest=function(u,F){return u===F?!0:g(u)&&g(F)?u.getTime()===F.getTime():!1};d.errback=function(u){return function(F){u.reject(F)}};d.esriFieldToJson=function(u){return u.toJSON?u.toJSON():u};d.extractServiceUrl=
function(u){if(void 0===u)return"";u=u.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");u=u.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return u=u.split("?")[0]};d.isArray=function(u){return u instanceof Array};d.isBoolean=function(u){return"boolean"===typeof u};d.isDate=g;d.isNumber=function(u){return"number"===typeof u};d.isString=function(u){return"string"===typeof u||u instanceof String};d.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",
long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",
esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};d.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",
extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};d.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",
esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};d.reduceArrayWithPromises=function(u,F){return h.create((L,K)=>{const M=h.resolve(!0);u.reduce((y,k,m,q)=>y.then(I=>{try{return F(I,k,m,q)}catch(p){return h.reject(p)}},I=>h.reject(I)),M).then(L,K)})};d.sameGeomType=function(u,F){return u===F||"point"===u&&"esriGeometryPoint"===F||"polyline"===u&&"esriGeometryPolyline"===F||"polygon"===u&&"esriGeometryPolygon"===F||"extent"===
u&&"esriGeometryEnvelope"===F||"multipoint"===u&&"esriGeometryMultipoint"===F||"point"===F&&"esriGeometryPoint"===u||"polyline"===F&&"esriGeometryPolyline"===u||"polygon"===F&&"esriGeometryPolygon"===u||"extent"===F&&"esriGeometryEnvelope"===u||"multipoint"===F&&"esriGeometryMultipoint"===u?!0:!1};d.shapeExtent=function(u){if(null===u)return null;switch(u.type){case "polygon":case "multipoint":case "polyline":return u.extent;case "point":return new c({xmin:u.x,ymin:u.y,xmax:u.x,ymax:u.y,spatialReference:u.spatialReference});
case "extent":return u}return null};d.stableStringify=function(u,F){F||(F={});"function"===typeof F&&(F={cmp:F});const L="boolean"===typeof F.cycles?F.cycles:!1,K=F.cmp&&function(y){return function(k){return function(m,q){return y({key:m,value:k[m]},{key:q,value:k[q]})}}}(F.cmp),M=[];return function m(k){k&&k.toJSON&&"function"===typeof k.toJSON&&(k=k.toJSON());if(void 0!==k){if("number"===typeof k)return isFinite(k)?""+k:"null";if("object"!==typeof k)return JSON.stringify(k);var q;if(Array.isArray(k)){var I=
"[";for(q=0;q<k.length;q++)q&&(I+=","),I+=m(k[q])||"null";return I+"]"}if(null===k)return"null";if(-1!==M.indexOf(k)){if(L)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var p=M.push(k)-1,E=Object.keys(k).sort(K&&K(k));I="";for(q=0;q<E.length;q++){const x=E[q],A=m(k[x]);A&&(I&&(I+=","),I+=JSON.stringify(x)+":"+A)}M.splice(p,1);return"{"+I+"}"}}(u)};d.toEsriGeometryType=function(u){switch(u){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";
case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/widgets/Feature/support/arcadeFeatureUtils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Logger ../../../core/promiseUtils ../../../layers/FeatureLayer ./featureUtils".split(" "),function(d,h,c,B,g,u,F){function L(A){return`<ul class="esri-widget__list">${A.map(r=>`<li>${"string"===
typeof r?F.applyTextFormattingHTML(F.htmlEntities(r)):r}</li>`).join("")}</ul>`}function K(A){return`<table class="esri-widget__table">${A.keys().map(r=>{var G=A.field(r);G="string"===typeof G?F.applyTextFormattingHTML(F.htmlEntities(G)):G;return`<tr><th>${r}</th><td>${G}</td></tr>`}).join("")}</table>`}function M({aggregatedFeatures:A,arcadeUtils:r,featureSetVars:G,context:H,viewInfo:w,map:e,graphic:z,interceptor:S}){G.forEach(J=>{J=J.toLowerCase();var O={map:e,spatialReference:w.sr,interceptor:S};
"$map"===J&&(H.vars[J]=r.convertMapToFeatureSetCollection(O));"$layer"===J&&(H.vars[J]=r.convertFeatureLayerToFeatureSet({layer:z.sourceLayer,spatialReference:w.sr,interceptor:S}));"$datastore"===J&&(H.vars[J]=r.convertServiceUrlToWorkspace({url:z.sourceLayer.url,spatialReference:w.sr,interceptor:S}));if("$aggregatedfeatures"===J){O=z.layer;const {fields:t,objectIdField:l,geometryType:b,spatialReference:f,displayField:n}=O;O=new u({fields:t,objectIdField:l,geometryType:b,spatialReference:f,displayField:n,
..."feature"===O.type?{templates:O.templates,typeIdField:O.typeIdField,types:O.types}:null,source:A});H.vars[J]=r.convertFeatureLayerToFeatureSet({layer:O,spatialReference:w.sr,interceptor:S})}})}function y(){return new Promise((A,r)=>d(["../../../support/arcadeUtils"],A,r))}function k(A){return m.apply(this,arguments)}function m(){m=c._asyncToGenerator(function*({graphic:A,view:r}){const {isAggregate:G,layer:H}=A;if(!G||!H||"2d"!==(null==r?void 0:r.type))return[];r=yield r.whenLayerView(H);if(!r.createQuery||
!r.queryFeatures)return[];const w=r.createQuery();w.aggregateIds=[A.getObjectId()];({features:A}=yield r.queryFeatures(w));return A});return m.apply(this,arguments)}function q(A){return I.apply(this,arguments)}function I(){I=c._asyncToGenerator(function*({expressionInfo:A,arcadeUtils:r,interceptor:G,spatialReference:H,map:w,graphic:e,view:z}){if(!A||!A.expression)return null;const S=r.createSyntaxTree(A.expression),J=E.filter(t=>r.hasVariable(S,t));[z]=yield g.all([k({graphic:e,view:z}),r.loadScriptDependencies(S,
!0,J)]);const O=r.getViewInfo({spatialReference:H});H=r.createExecContext(e,O);H.interceptor=G;H.useAsync=!0;M({aggregatedFeatures:z,arcadeUtils:r,featureSetVars:J,context:H,viewInfo:O,map:w,graphic:e,interceptor:G});G=r.createFunction(S,H);return r.executeAsyncFunction(G,H).catch(t=>x.error("arcade-execution-error",{error:t,graphic:e,expressionInfo:A}))});return I.apply(this,arguments)}function p(){p=c._asyncToGenerator(function*({expressionInfos:A,spatialReference:r,graphic:G,interceptor:H,map:w,
view:e}){if(!A||!A.length)return{};const z=yield y(),S={};for(const J of A)S[`expression/${J.name}`]=q({expressionInfo:J,arcadeUtils:z,interceptor:H,spatialReference:r,map:w,graphic:G,view:e});A=yield g.eachAlways(S);r={};for(const J in A)G=A[J].value,G="string"===typeof G?F.applyTextFormattingHTML(F.htmlEntities(G)):Array.isArray(G)?L(G):"esri.arcade.Dictionary"===(null==G?void 0:G.declaredClass)?K(G):G,r[J]=G;return r});return p.apply(this,arguments)}const E=["$datastore","$map","$layer","$aggregatedfeatures"],
x=B.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");h.createCompiledExpression=q;h.createCompiledExpressions=function(A){return p.apply(this,arguments)};h.loadArcadeUtils=y;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../arcade/featureset/support/FeatureSetQueryInterceptor ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/throttle ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../popup/content/TextContent ./FeatureAttachments/FeatureAttachmentsViewModel ./FeatureContent/FeatureContentViewModel ./FeatureExpression/FeatureExpressionViewModel ./FeatureFields/FeatureFieldsViewModel ./FeatureMedia/FeatureMediaViewModel ./support/arcadeFeatureUtils ./support/featureUtils ./support/relatedFeatureUtils".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p,E,x,A,r,G,H,w,e,z){var S;const J=F.getLogger("esri.widgets.FeatureViewModel"),O={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};g=S=function(t){function l(f){var n=t.call(this,f)||this;n._handles=new u;n._error=null;n._featureAbortController=null;n.graphicChangedThrottled=M.throttle(n._graphicChanged,1,d._assertThisInitialized(n));n._expressionAttributes=null;n._graphicExpressionAttributes=
null;n.abilities={...O};n.content=null;n.contentViewModels=[];n.defaultPopupTemplateEnabled=!1;n.formattedAttributes=null;n.lastEditInfo=null;n.relatedInfos=new Map;n.title="";n.view=null;n._isAllowedContentType=P=>{const {abilities:U}=d._assertThisInitialized(n);return"attachments"===P.type&&U.attachmentsContent||"custom"===P.type&&U.customContent||"fields"===P.type&&U.fieldsContent||"media"===P.type&&U.mediaContent||"text"===P.type&&U.textContent||"expression"===P.type&&U.expressionContent};n._handles.add(y.init(d._assertThisInitialized(n),
["graphic","_effectivePopupTemplate","abilities"],()=>n.graphicChangedThrottled()));return n}d._inheritsLoose(l,t);var b=l.prototype;b.destroy=function(){this._clear();this._cancelFeatureQuery();this._error=null;this._handles.destroy();this.graphic=this._handles=null;this._destroyContentViewModels();this.relatedInfos.clear()};b.castAbilities=function(f){return{...O,...f}};b.setActiveMedia=function(f,n){f=this.contentViewModels[f];f instanceof H&&f.setActiveMedia(n)};b.nextMedia=function(f){f=this.contentViewModels[f];
f instanceof H&&f.next()};b.previousMedia=function(f){f=this.contentViewModels[f];f instanceof H&&f.previous()};b._clear=function(){this._set("title","");this._set("content",null);this._set("formattedAttributes",null)};b._graphicChanged=function(){var f=d._asyncToGenerator(function*(){this._cancelFeatureQuery();this._error=null;this._clear();const {graphic:n}=this;if(n){var P=new AbortController;this._featureAbortController=P;try{yield this._queryFeature({signal:P.signal})}catch(U){K.isAbortError(U)||
(this._error=U,J.error("error","The popupTemplate could not be displayed for this feature.",{error:U,graphic:n,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===P&&(this._featureAbortController=null)}});return function(){return f.apply(this,arguments)}}();b._cancelFeatureQuery=function(){const {_featureAbortController:f}=this;f&&f.abort();this._featureAbortController=null};b._compileContentElement=function(f,n){if("attachments"===f.type)return this._compileAttachments(f,
n);if("custom"===f.type)return this._compileCustom(f,n);if("fields"===f.type)return this._compileFields(f,n);if("media"===f.type)return this._compileMedia(f,n);if("text"===f.type)return this._compileText(f,n);if("expression"===f.type)return this._compileExpression(f,n)};b._compileContent=function(f){this._destroyContentViewModels();if(this.graphic)return Array.isArray(f)?f.filter(this._isAllowedContentType).map((n,P)=>this._compileContentElement(n,P)):"string"===typeof f?this._compileText(new E({text:f}),
0).text:f};b._destroyContentViewModels=function(){var f;null==(f=this._handles)?void 0:f.remove("content-view-models");this.contentViewModels.forEach(n=>n&&!n.destroyed&&n.destroy());this._set("contentViewModels",[])};b._setExpressionContentVM=function(f,n){const {formattedAttributes:P}=this,{contentElement:U,contentElementViewModel:T}=f;f=null==U?void 0:U.type;T&&f&&("fields"===f&&(this._createFieldsFormattedAttributes({contentElement:U,contentElementIndex:n,formattedAttributes:P}),T.set(this._createFieldsVMParams(U,
n))),"media"===f&&(this._createMediaFormattedAttributes({contentElement:U,contentElementIndex:n,formattedAttributes:P}),T.set(this._createMediaVMParams(U,n))),"text"===f&&T.set(this._createTextVMParams(U)))};b._compileExpression=function(f,n){const {expressionInfo:P}=f,{graphic:U,map:T,spatialReference:v,view:N}=this,R=new r({expressionInfo:P,graphic:U,interceptor:S.interceptor,map:T,spatialReference:v,view:N});this.contentViewModels[n]=R;this._handles.add(y.init(R,"contentElementViewModel",()=>this._setExpressionContentVM(R,
n)),"content-view-models");return f};b._compileAttachments=function(f,n){const {graphic:P}=this,{description:U,title:T}=f;this.contentViewModels[n]=new x({graphic:P,...this._compileTitleAndDesc({title:T,description:U})});return f};b._compileCustom=function(f,n){const {graphic:P}=this,{creator:U,destroyer:T}=f;this.contentViewModels[n]=new A({graphic:P,creator:U,destroyer:T});return f};b._compileTitleAndDesc=function({title:f,description:n}){const {_fieldInfoMap:P,_sourceLayer:U,graphic:T,formattedAttributes:v,
_expressionAttributes:N}=this,{attributes:R}=T,W=v.global;return{title:e.substituteFieldsInLinksAndAttributes({attributes:R,fieldInfoMap:P,globalAttributes:W,expressionAttributes:N,layer:U,text:f}),description:e.substituteFieldsInLinksAndAttributes({attributes:R,fieldInfoMap:P,globalAttributes:W,expressionAttributes:N,layer:U,text:n})}};b._createFieldsVMParams=function(f,n){const {_effectivePopupTemplate:P,formattedAttributes:U}=this,T={...U.global,...U.content[n]};n=(null==f?void 0:f.fieldInfos)||
(null==P?void 0:P.fieldInfos);n=null==n?void 0:n.filter(({fieldName:W})=>e.isExpressionField(W)||e.isRelatedField(W)||T.hasOwnProperty(W));const v=null==P?void 0:P.expressionInfos,{description:N,title:R}=f;return{attributes:T,expressionInfos:v,fieldInfos:n,...this._compileTitleAndDesc({title:R,description:N})}};b._compileFields=function(f,n){const P=f.clone();f=new G(this._createFieldsVMParams(f,n));this.contentViewModels[n]=f;P.fieldInfos=f.formattedFieldInfos.slice(0);return P};b._createMediaVMParams=
function(f,n){const {abilities:P,graphic:U,_fieldInfoMap:T,formattedAttributes:v,_effectivePopupTemplate:N,relatedInfos:R,_sourceLayer:W,_expressionAttributes:ea}=this,{attributes:da}=U,{description:qa,mediaInfos:va,title:Ca}=f;return{abilities:{chartAnimation:P.chartAnimation},activeMediaInfoIndex:f.activeMediaInfoIndex||0,attributes:da,layer:W,fieldInfoMap:T,formattedAttributes:{...v.global,...v.content[n]},expressionAttributes:ea,mediaInfos:va,popupTemplate:N,relatedInfos:R,...this._compileTitleAndDesc({title:Ca,
description:qa})}};b._compileMedia=function(f,n){const P=f.clone();f=new H(this._createMediaVMParams(f,n));P.mediaInfos=f.formattedMediaInfos.slice(0);this.contentViewModels[n]=f;return P};b._createTextVMParams=function(f){const {graphic:n,_fieldInfoMap:P,_sourceLayer:U,_expressionAttributes:T}=this;if(f&&f.text){const {attributes:v}=n;f.text=e.substituteFieldsInLinksAndAttributes({attributes:v,fieldInfoMap:P,globalAttributes:this.formattedAttributes.global,expressionAttributes:T,layer:U,text:f.text})}return{graphic:n,
creator:f.text}};b._compileText=function(f,n){f=f.clone();this.contentViewModels[n]=new A(this._createTextVMParams(f));return f};b._compileLastEditInfo=function(){const {_effectivePopupTemplate:f,_sourceLayer:n,graphic:P}=this;if(f){var {lastEditInfoEnabled:U}=f,T=null==n?void 0:n.editFieldsInfo;if(U&&T)return e.formatEditInfo(T,P.attributes)}};b._compileTitle=function(f){const {_fieldInfoMap:n,_sourceLayer:P,graphic:U,_expressionAttributes:T}=this,{attributes:v}=U;return e.substituteFieldsInLinksAndAttributes({attributes:v,
fieldInfoMap:n,globalAttributes:this.formattedAttributes.global,expressionAttributes:T,layer:P,text:f})};b._getTitle=function(){var f=d._asyncToGenerator(function*(){const {_effectivePopupTemplate:n,graphic:P}=this;return e.graphicCallback(null==n?void 0:n.title,{graphic:P})});return function(){return f.apply(this,arguments)}}();b._getContent=function(){var f=d._asyncToGenerator(function*(){const {_effectivePopupTemplate:n,graphic:P}=this;return e.graphicCallback(null==n?void 0:n.content,{graphic:P})});
return function(){return f.apply(this,arguments)}}();b._queryFeature=function(){var f=d._asyncToGenerator(function*(n){const {_featureAbortController:P,_sourceLayer:U,graphic:T,_effectivePopupTemplate:v,spatialReference:N,map:R,view:W}=this,{content:{value:ea},title:{value:da}}=yield K.eachAlways({content:this._getContent(),title:this._getTitle()});P===this._featureAbortController&&T&&(yield e.queryUpdatedFeature({graphic:T,popupTemplate:v,layer:U,spatialReference:N},n),{expressionAttributes:{value:n}}=
yield K.eachAlways({checkForRelatedFeatures:this._checkForRelatedFeatures(n),expressionAttributes:w.createCompiledExpressions({expressionInfos:null==v?void 0:v.expressionInfos,spatialReference:N,graphic:T,map:R,interceptor:S.interceptor,view:W})}),P===this._featureAbortController&&T&&(this._expressionAttributes=n,this._graphicExpressionAttributes={...T.attributes,...n},this._set("formattedAttributes",this._createFormattedAttributes(ea)),this._set("title",this._compileTitle(da)),this._set("lastEditInfo",
this._compileLastEditInfo()||null),this._set("content",this._compileContent(ea)||null)))});return function(n){return f.apply(this,arguments)}}();b._createMediaFormattedAttributes=function({contentElement:f,contentElementIndex:n,formattedAttributes:P}){const {_effectivePopupTemplate:U,graphic:T,relatedInfos:v,_sourceLayer:N,_fieldInfoMap:R,_graphicExpressionAttributes:W}=this;P.content[n]=e.formatAttributes({fieldInfos:null==U?void 0:U.fieldInfos,graphic:T,attributes:{...W,...f.attributes},layer:N,
fieldInfoMap:R,relatedInfos:v})};b._createFieldsFormattedAttributes=function({contentElement:f,contentElementIndex:n,formattedAttributes:P}){if(f.fieldInfos){const {graphic:U,relatedInfos:T,_sourceLayer:v,_fieldInfoMap:N,_graphicExpressionAttributes:R}=this;P.content[n]=e.formatAttributes({fieldInfos:f.fieldInfos,graphic:U,attributes:{...R,...f.attributes},layer:v,fieldInfoMap:N,relatedInfos:T})}};b._createFormattedAttributes=function(f){const {_effectivePopupTemplate:n,graphic:P,relatedInfos:U,_sourceLayer:T,
_fieldInfoMap:v,_graphicExpressionAttributes:N}=this,R={global:e.formatAttributes({fieldInfos:null==n?void 0:n.fieldInfos,graphic:P,attributes:N,layer:T,fieldInfoMap:v,relatedInfos:U}),content:[]};Array.isArray(f)&&f.forEach((W,ea)=>{"fields"===W.type&&this._createFieldsFormattedAttributes({contentElement:W,contentElementIndex:ea,formattedAttributes:R});"media"===W.type&&this._createMediaFormattedAttributes({contentElement:W,contentElementIndex:ea,formattedAttributes:R})});return R};b._checkForRelatedFeatures=
function(f){const {graphic:n,_effectivePopupTemplate:P}=this;return this._queryRelatedInfos(n,e.getAllFieldInfos(P),f)};b._queryRelatedInfos=function(){var f=d._asyncToGenerator(function*(n,P,U){const {relatedInfos:T,_sourceLayer:v}=this;T.clear();const N=L.isSome(v.associatedLayer)?yield v.associatedLayer.load(U):v;if(N){var R=P.filter(da=>da&&e.isRelatedField(da.fieldName));if(R&&R.length){P.forEach(da=>this._configureRelatedInfo(da,N));var W=yield z.queryLayerInfos({relatedInfos:T,layer:N},U);
Object.keys(W).forEach(da=>{var qa;const va=T.get(da.toString());da=null==(qa=W[da])?void 0:qa.value;va&&da&&(va.layerInfo=da.data)});var ea=yield z.queryRelatedFeatures({graphic:n,relatedInfos:T,layer:N},U);Object.keys(ea).forEach(da=>{var qa;z.setRelatedFeatures(null==(qa=ea[da])?void 0:qa.value,T.get(da.toString()))})}}});return function(n,P,U){return f.apply(this,arguments)}}();b._configureRelatedInfo=function(f,n){const {relatedInfos:P}=this,U=z.getRelatedFieldInfo(f.fieldName);if(U){var {layerId:T,
fieldName:v}=U;T&&(n=P.get(T.toString())||z.createRelatedInfo(T,n))&&(z.updateRelatedInfo({relatedInfo:n,fieldName:v,fieldInfo:f}),this.relatedInfos.set(T,n))}};d._createClass(l,[{key:"_effectivePopupTemplate",get:function(){return L.isSome(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}},{key:"_fieldInfoMap",get:function(){return e.createfieldInfoMap(e.getAllFieldInfos(this._effectivePopupTemplate),this._sourceLayer)}},{key:"_sourceLayer",get:function(){return e.getSourceLayer(this.graphic)}},
{key:"state",get:function(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}},{key:"graphic",set:function(f){this._set("graphic",f?f.clone():null)}},{key:"spatialReference",get:function(){return this.get("view.spatialReference")||null},set:function(f){void 0===f?this._clearOverride("spatialReference"):this._override("spatialReference",f)}},{key:"map",get:function(){return this.get("view.map")||null},set:function(f){void 0===f?this._clearOverride("map"):
this._override("map",f)}},{key:"waitingForContent",get:function(){return!!this._featureAbortController}}]);return l}(g);g.interceptor=new B.FeatureSetQueryInterceptor(e.preLayerQueryCallback,e.preRequestCallback);h.__decorate([k.property()],g.prototype,"_error",void 0);h.__decorate([k.property()],g.prototype,"_featureAbortController",void 0);h.__decorate([k.property({readOnly:!0})],g.prototype,"_effectivePopupTemplate",null);h.__decorate([k.property({readOnly:!0})],g.prototype,"_fieldInfoMap",null);
h.__decorate([k.property({readOnly:!0})],g.prototype,"_sourceLayer",null);h.__decorate([k.property()],g.prototype,"abilities",void 0);h.__decorate([I.cast("abilities")],g.prototype,"castAbilities",null);h.__decorate([k.property({readOnly:!0})],g.prototype,"content",void 0);h.__decorate([k.property({readOnly:!0})],g.prototype,"contentViewModels",void 0);h.__decorate([k.property({type:Boolean})],g.prototype,"defaultPopupTemplateEnabled",void 0);h.__decorate([k.property({readOnly:!0})],g.prototype,"state",
null);h.__decorate([k.property({readOnly:!0})],g.prototype,"formattedAttributes",void 0);h.__decorate([k.property({type:c,value:null})],g.prototype,"graphic",null);h.__decorate([k.property({readOnly:!0})],g.prototype,"lastEditInfo",void 0);h.__decorate([k.property({readOnly:!0})],g.prototype,"relatedInfos",void 0);h.__decorate([k.property()],g.prototype,"spatialReference",null);h.__decorate([k.property({readOnly:!0})],g.prototype,"title",void 0);h.__decorate([k.property()],g.prototype,"map",null);
h.__decorate([k.property({readOnly:!0})],g.prototype,"waitingForContent",null);h.__decorate([k.property()],g.prototype,"view",void 0);return g=S=h.__decorate([p.subclass("esri.widgets.FeatureViewModel")],g)})},"esri/arcade/featureset/support/FeatureSetQueryInterceptor":function(){define(["exports"],function(d){d.FeatureSetQueryInterceptor=function(h,c){this.preLayerQueryCallback=h;this.preRequestCallback=c;this.preLayerQueryCallback||(this.preLayerQueryCallback=B=>{});this.preRequestCallback||(this.preLayerQueryCallback=
B=>{})};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/widgets/Feature/support/FeatureContentMixin":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/set ../../../core/accessorSupport/decorators/subclass ../../support/widget ../../support/jsxFactory".split(" "),function(d,h,c,B,g,u,F,L,K,M,y){d.FeatureContentMixin=
k=>{k=function(m){function q(){var I=m.apply(this,arguments)||this;I.renderNodeContent=p=>M.isWidget(p)&&!p.destroyed?y.tsx("div",{key:p},p.render()):p instanceof HTMLElement?y.tsx("div",{key:p,bind:p,afterCreate:I._attachToNode}):M.hasDomNode(p)?y.tsx("div",{key:p,bind:p.domNode,afterCreate:I._attachToNode}):null;return I}h._inheritsLoose(q,m);q.prototype._attachToNode=function(I){I.appendChild(this)};return q}(k);return k=c.__decorate([K.subclass("esri.widgets.Feature.ContentMixin")],k)};Object.defineProperty(d,
"__esModule",{value:!0})})},"esri/widgets/Popup/PopupViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../symbols ../../core/Collection ../../core/Error ../../core/Handles ../../core/Logger ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/webMercatorUtils ../../layers/Layer ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionToggle ../../symbols/support/symbolUtils ../../views/input/InputManager ../../views/support/layerViewUtils ../Feature/FeatureViewModel ./actions ./actionUtils ../support/AnchorElementViewModel ../support/GoTo ../../geometry/Point ../../symbols/SimpleFillSymbol".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p,E,x,A,r,G,H,w,e,z,S,J,O,t,l,b){const f=u.ofType({key:"type",defaultKeyValue:"button",base:A,typeMap:{button:r,toggle:G}}),n=K.getLogger("esri.widgets.Popup.PopupViewModel");c=function(P){function U(v){v=P.call(this,v)||this;v._handles=new L;v._pendingPromises=new Set;v._fetchFeaturesController=null;v._selectedClusterFeature=null;v.featurePage=null;v.actions=new f;v.defaultPopupTemplateEnabled=!1;v.autoCloseEnabled=!1;v.autoOpenEnabled=!0;v.browseClusterEnabled=
!1;v.content=null;v.featuresPerPage=20;v.featureViewModelAbilities=null;v.featureViewModels=[];v.highlightEnabled=!0;v.includeDefaultActions=!0;v.selectedClusterBoundaryFeature=new B({symbol:new b({outline:{width:1.5,color:"cyan"},style:"none"})});v.title=null;v.updateLocationEnabled=!1;v.view=null;v.visible=!1;v.zoomFactor=4;v.zoomToLocation=null;return v}d._inheritsLoose(U,P);var T=U.prototype;T.initialize=function(){this._handles.add([y.init(this,["autoOpenEnabled","view"],()=>this._autoOpenEnabledChange()),
this.on("view-change",()=>this._autoClose()),y.watch(this,["highlightEnabled","selectedFeature","visible","view"],()=>this._highlightFeature()),y.watch(this,"view.animation.state",v=>this._animationStateChange(v)),y.watch(this,"location",v=>this._locationChange(v)),y.watch(this,"selectedFeature",v=>this._selectedFeatureChange(v)),y.watch(this,["selectedFeatureIndex","featureCount","featuresPerPage"],()=>this._selectedFeatureIndexChange()),y.watch(this,["featurePage","selectedFeatureIndex","featureCount",
"featuresPerPage, featureViewModels"],()=>this._setGraphicOnFeatureViewModels()),y.watch(this,"featureViewModels",()=>this._featureViewModelsChange()),this.on("trigger-action",v=>J.triggerAction({event:v,view:this.view})),y.whenFalse(this,"waitingForResult",()=>this._waitingForResultChange(),!0),y.watch(this,["features","view","view.map","view.spatialReference"],()=>this._updateFeatureVMs()),y.watch(this,["view.scale"],this._viewScaleChange),y.whenFalse(this,"visible",()=>this.browseClusterEnabled=
!1),y.watch(this,"browseClusterEnabled",v=>v?this.enableClusterBrowsing():this.disableClusterBrowsing())])};T.destroy=function(){this._cancelFetchingFeatures();this._handles.destroy();this._handles=null;this._pendingPromises.clear();this.browseClusterEnabled=!1;this.view=null};T.centerAtLocation=function(){var {view:v}=this;const N=J.getSelectedTarget(this);return N?this.callGoTo({target:{target:N,scale:v.scale}}):(v=new F("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",
{target:N,view:v}),n.error(v),Promise.reject(v))};T.clear=function(){this.set({promises:[],features:[],content:null,title:null,location:null})};T.fetchFeatures=function(v,N){const {view:R}=this;return R&&v?R.fetchPopupFeatures(v,{event:N&&N.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:N&&N.signal}):(v=new F("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:v,view:R}),n.error(v),Promise.reject(v))};T.open=
function(v){v={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...v,visible:!0};var {fetchFeatures:N}=v;delete v.fetchFeatures;N&&this._setFetchFeaturesPromises(v.location);N=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const R of N)delete v[R];this.set(v)};T.triggerAction=function(v){(v=this.allActions.getItemAt(v))&&!v.disabled&&this.emit("trigger-action",{action:v})};T.next=function(){this.selectedFeatureIndex+=1;return this};T.previous=function(){--this.selectedFeatureIndex;return this};
T.disableClusterBrowsing=function(){J.removeClusteredFeaturesForBrowsing(this);this._clearBrowsedClusterGraphics()};T.enableClusterBrowsing=function(){var v=d._asyncToGenerator(function*(){yield J.displayClusterExtent(this);yield J.browseAggregateFeatures(this)});return function(){return v.apply(this,arguments)}}();T._animationStateChange=function(v){this.zoomToLocation||(S.zoomToFeature.disabled="waiting-for-target"===v)};T._clearBrowsedClusterGraphics=function(){var v;const N=null==(v=this.view)?
void 0:v.graphics;N&&(N.remove(this.selectedClusterBoundaryFeature),N.remove(this._selectedClusterFeature));this._selectedClusterFeature=null;this.selectedClusterBoundaryFeature.geometry=null};T._viewScaleChange=function(){var v;null!=(v=this.selectedFeature)&&v.isAggregate?(this.visible=this.browseClusterEnabled=!1,this.clear()):this.browseClusterEnabled&&(this.browseClusterEnabled=!1,this.features=[this.selectedFeature])};T._locationChange=function(v){const {selectedFeature:N,updateLocationEnabled:R}=
this;R&&v&&(!N||N.geometry)&&this.centerAtLocation()};T._selectedFeatureIndexChange=function(){this.featurePage=1<this.featureCount?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null};T._featureViewModelsChange=function(){this.featurePage=1<this.featureCount?1:null};T._setGraphicOnFeatureViewModels=function(){const {features:v,featureCount:N,featurePage:R,featuresPerPage:W,featureViewModels:ea}=this;if(null!==R){var da=((R-1)*W+N)%N;ea.slice(da,da+W).forEach((qa,va)=>{qa&&!qa.graphic&&
(qa.graphic=v[da+va])})}};T._selectedFeatureChange=function(){var v=d._asyncToGenerator(function*(N){if(N){var {location:R,updateLocationEnabled:W,view:ea}=this;this.browseClusterEnabled?(this._selectedClusterFeature&&(ea.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),N.isAggregate||(N.symbol=yield H.getDisplayedSymbol(N),this._selectedClusterFeature=N,ea.graphics.add(this._selectedClusterFeature))):!W&&R||!N.geometry?W&&!N.geometry&&this.centerAtLocation().then(()=>
{this.location=ea.center.clone()}):this.location=M.unwrap(this._getPointFromGeometry(N.geometry))}});return function(N){return v.apply(this,arguments)}}();T._waitingForResultChange=function(){!this.featureCount&&this.promises&&(this.visible=!1)};T._setFetchFeaturesPromises=function(v){return this._fetchFeaturesWithController(this._getScreenPoint(v||this.location)).then(N=>{const {clientOnlyGraphics:R,promisesPerLayerView:W}=N;N=Promise.resolve(R);const ea=W.map(da=>da.promise);this.promises=[N,...ea]})};
T._destroyFeatureVMs=function(){this.featureViewModels.forEach(v=>v&&!v.destroyed&&v.destroy());this._set("featureViewModels",[])};T._updateFeatureVMs=function(){const {selectedFeature:v,features:N,featureViewModels:R}=this;null!=v&&v.isAggregate||(this.browseClusterEnabled=!1);this._destroyFeatureVMs();if(N&&N.length){var W=R.slice(0),ea=[];N.forEach((da,qa)=>{if(da){var va=null;W.some((ta,fa)=>{ta&&ta.graphic===da&&(va=ta,W.splice(fa,1));return!!va});if(va)ea[qa]=va;else{var Ca,Ba;const ta=new z({abilities:this.featureViewModelAbilities,
defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:null==(Ca=this.view)?void 0:Ca.spatialReference,graphic:da===v?da:null,map:null==(Ba=this.view)?void 0:Ba.map,view:this.view});ea[qa]=ta}}});W.forEach(da=>da&&!da.destroyed&&da.destroy());this._set("featureViewModels",ea)}};T._getScreenPoint=function(v){const {view:N}=this;return N&&v&&"function"===typeof N.toScreen?N.toScreen(v):null};T._autoOpenEnabledChange=function(){const {_handles:v,autoOpenEnabled:N}=this;v.remove("auto-fetch-features");
if(N&&this.view){const R=this.view.on("click",W=>{"mouse"===W.pointerType&&0!==W.button||this._fetchFeaturesAndOpen(W)},w.ViewEventPriorities.WIDGET);v.add(R,"auto-fetch-features")}};T._cancelFetchingFeatures=function(){const v=this._fetchFeaturesController;v&&v.abort();this._fetchFeaturesController=null;this.notifyChange("waitingForResult")};T._fetchFeaturesWithController=function(v,N){this._cancelFetchingFeatures();const R=new AbortController,{signal:W}=R;this._fetchFeaturesController=R;this.notifyChange("waitingForResult");
v=this.fetchFeatures(v,{signal:W,event:N});v.catch(()=>{}).then(()=>{this._fetchFeaturesController=null;this.notifyChange("waitingForResult")});return v};T._fetchFeaturesAndOpen=function(v){const {screenPoint:N,mapPoint:R}=v,{view:W}=this;this._fetchFeaturesWithController(N,v).then(ea=>{const {clientOnlyGraphics:da,promisesPerLayerView:qa,location:va}=ea,Ca=[Promise.resolve(da),...qa.map(Ba=>Ba.promise)];W.popup.open({location:va||R,promises:Ca});return ea})};T._updatePendingPromises=function(v){v&&
this._pendingPromises.has(v)&&(this._pendingPromises.delete(v),this.notifyChange("pendingPromisesCount"))};T._autoClose=function(){this.autoCloseEnabled&&(this.visible=!1)};T._getPointFromGeometry=function(v){return M.isNone(v)?null:"point"===v.type?v:"extent"===v.type?v.center:"polygon"===v.type?v.centroid:"multipoint"===v.type||"polyline"===v.type?v.extent.center:null};T._getLayerView=function(){var v=d._asyncToGenerator(function*(N,R){yield N.when();return N.whenLayerView(R)});return function(N,
R){return v.apply(this,arguments)}}();T._highlightFeature=function(){var v=d._asyncToGenerator(function*(){this._handles.remove("highlight");const {selectedFeature:N,highlightEnabled:R,view:W,visible:ea}=this;if(N&&W&&R&&ea){var {layer:da,sourceLayer:qa}=N;if("map-notes"===(null==qa?void 0:qa.type)||"subtype-group"===(null==qa?void 0:qa.type))da=qa;if(da&&da instanceof x){var va=this._getLayerView(W,da);this._highlightPromise=va;var Ca=yield va;if(Ca&&e.highlightsSupported(Ca)&&this._highlightPromise===
va&&this.selectedFeature&&this.highlightEnabled&&this.visible){va="imagery"===da.type?void 0:"objectIdField"in da&&da.objectIdField;var Ba=N.attributes;Ca=Ca.highlight(Ba&&va&&Ba[va]||N);this._handles.add(Ca,"highlight")}}}});return function(){return v.apply(this,arguments)}}();T._updateFeatures=function(v){const {features:N}=this;v&&v.length&&(N.length?(v=v.filter(R=>-1===N.indexOf(R)),this.features=N.concat(v)):this.features=v)};d._createClass(U,[{key:"isLoadingFeature",get:function(){return this.featureViewModels.some(v=>
v.waitingForContent)}},{key:"active",get:function(){return!(!this.visible||this.waitingForResult)}},{key:"allActions",get:function(){const v=this._get("allActions")||new f;v.removeAll();const {actions:N,defaultActions:R,defaultPopupTemplateEnabled:W,includeDefaultActions:ea,selectedFeature:da}=this;var qa=ea?R.concat(N):N;const va=da&&("function"===typeof da.getEffectivePopupTemplate&&da.getEffectivePopupTemplate(W)||da.popupTemplate),Ca=va&&va.actions;(qa=va&&va.overwriteActions?Ca:Ca?Ca.concat(qa):
qa)&&qa.filter(Boolean).forEach(Ba=>v.add(Ba));return v}},{key:"defaultActions",get:function(){var v;const N=this._get("defaultActions")||new f;N.removeAll();N.addMany(null!=(v=this.selectedFeature)&&v.isAggregate?[S.zoomToClusteredFeatures.clone(),S.browseClusteredFeatures.clone()]:[S.zoomToFeature.clone()]);return N}},{key:"featureCount",get:function(){return this.features.length}},{key:"features",get:function(){return this._get("features")||[]},set:function(v){v=v||[];this._set("features",v);const {pendingPromisesCount:N,
promiseCount:R,selectedFeatureIndex:W}=this,ea=R&&v.length;ea&&N&&-1===W?this.selectedFeatureIndex=0:ea&&-1!==W||(this.selectedFeatureIndex=v.length?0:-1)}},{key:"location",get:function(){return this._get("location")||null},set:function(v){const N=this.get("view.spatialReference.isWebMercator");v&&v.get("spatialReference.isWGS84")&&N&&(v=E.geographicToWebMercator(v));this._set("location",v)}},{key:"pendingPromisesCount",get:function(){return this._pendingPromises.size}},{key:"waitingForResult",get:function(){return!(!(this._fetchFeaturesController||
0<this.pendingPromisesCount)||0!==this.featureCount)}},{key:"promiseCount",get:function(){return this.promises.length}},{key:"promises",get:function(){return this._get("promises")||[]},set:function(v){this._pendingPromises.clear();this.features=[];Array.isArray(v)&&v.length?(this._set("promises",v),v=v.slice(0),v.forEach(N=>{this._pendingPromises.add(N);N.then(R=>{this._pendingPromises.has(N)&&this._updateFeatures(R);this._updatePendingPromises(N)},()=>this._updatePendingPromises(N))})):this._set("promises",
[]);this.notifyChange("pendingPromisesCount")}},{key:"selectedFeature",get:function(){const {features:v,selectedFeatureIndex:N}=this;return-1===N?null:v[N]||null}},{key:"selectedFeatureIndex",get:function(){const v=this._get("selectedFeatureIndex");return"number"===typeof v?v:-1},set:function(v){const {featureCount:N}=this;v=isNaN(v)||-1>v||!N?-1:(v+N)%N;this._set("selectedFeatureIndex",v)}},{key:"selectedFeatureViewModel",get:function(){return this.featureViewModels[this.selectedFeatureIndex]||null}},
{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}}]);return U}(t.GoToMixin(O));h.__decorate([k.property()],c.prototype,"featurePage",void 0);h.__decorate([k.property()],c.prototype,"isLoadingFeature",null);h.__decorate([k.property({type:f})],c.prototype,"actions",void 0);h.__decorate([k.property({readOnly:!0})],c.prototype,"active",null);h.__decorate([k.property({readOnly:!0})],c.prototype,"allActions",null);h.__decorate([k.property({type:Boolean})],c.prototype,"defaultPopupTemplateEnabled",
void 0);h.__decorate([k.property()],c.prototype,"autoCloseEnabled",void 0);h.__decorate([k.property()],c.prototype,"autoOpenEnabled",void 0);h.__decorate([k.property()],c.prototype,"browseClusterEnabled",void 0);h.__decorate([k.property()],c.prototype,"content",void 0);h.__decorate([k.property({type:f,readOnly:!0})],c.prototype,"defaultActions",null);h.__decorate([k.property({readOnly:!0})],c.prototype,"featureCount",null);h.__decorate([k.property()],c.prototype,"features",null);h.__decorate([k.property()],
c.prototype,"featuresPerPage",void 0);h.__decorate([k.property()],c.prototype,"featureViewModelAbilities",void 0);h.__decorate([k.property({readOnly:!0})],c.prototype,"featureViewModels",void 0);h.__decorate([k.property()],c.prototype,"highlightEnabled",void 0);h.__decorate([k.property()],c.prototype,"includeDefaultActions",void 0);h.__decorate([k.property({type:l})],c.prototype,"location",null);h.__decorate([k.property({readOnly:!0})],c.prototype,"pendingPromisesCount",null);h.__decorate([k.property({readOnly:!0})],
c.prototype,"selectedClusterBoundaryFeature",void 0);h.__decorate([k.property({readOnly:!0})],c.prototype,"waitingForResult",null);h.__decorate([k.property({readOnly:!0})],c.prototype,"promiseCount",null);h.__decorate([k.property()],c.prototype,"promises",null);h.__decorate([k.property({value:null,readOnly:!0})],c.prototype,"selectedFeature",null);h.__decorate([k.property({value:-1})],c.prototype,"selectedFeatureIndex",null);h.__decorate([k.property({readOnly:!0})],c.prototype,"selectedFeatureViewModel",
null);h.__decorate([k.property({readOnly:!0})],c.prototype,"state",null);h.__decorate([k.property()],c.prototype,"title",void 0);h.__decorate([k.property()],c.prototype,"updateLocationEnabled",void 0);h.__decorate([k.property()],c.prototype,"view",void 0);h.__decorate([k.property()],c.prototype,"visible",void 0);h.__decorate([k.property()],c.prototype,"zoomFactor",void 0);h.__decorate([k.property()],c.prototype,"zoomToLocation",void 0);h.__decorate([k.property()],c.prototype,"centerAtLocation",null);
return c=h.__decorate([p.subclass("esri.widgets.Popup.PopupViewModel")],c)})},"esri/widgets/Popup/actions":function(){define(["exports","../../support/actions/ActionButton"],function(d,h){const c=new h({id:"zoom-to-feature",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"}),B=new h({id:"remove-selected-feature",title:"{messages.remove}",className:"esri-icon-trash"}),g=new h({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"});
h=new h({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:"esri-icon-table"});d.all=[c,B,h,g];d.browseClusteredFeatures=h;d.removeSelectedFeature=B;d.zoomToClusteredFeatures=g;d.zoomToFeature=c;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/widgets/Popup/actionUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/Logger ../../core/promiseUtils ./actions".split(" "),function(d,h,c,B,g,u){function F(p){const {selectedFeature:E,
location:x,view:A}=p;return A?"3d"===A.type?E||x:p.get("selectedFeature.geometry")||x:null}function L(p,E){if("3d"!==(null==E?void 0:E.type)||!p||"esri.Graphic"!==p.declaredClass)return!0;if((E=E.getViewForGraphic(p))&&"whenGraphicBounds"in E){let x=!1;E.whenGraphicBounds(p,{useViewElevation:!0}).then(A=>{x=!A||!A.boundingBox||A.boundingBox[0]===A.boundingBox[3]&&A.boundingBox[1]===A.boundingBox[4]&&A.boundingBox[2]===A.boundingBox[5]}).catch(()=>{const A=new c("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",
{graphic:p});I.error(A)});return x}return!0}function K(p){return M.apply(this,arguments)}function M(){M=h._asyncToGenerator(function*(p){const {location:E,selectedFeature:x,view:A,zoomFactor:r}=p,G=F(p);if(!G)return p=new c("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:G,view:A}),I.error(p),Promise.reject(p);const H=A.scale/r,w=p.get("selectedFeature.geometry")||E,e=w&&"point"===w.type&&L(x,A);u.zoomToFeature.active=!0;u.zoomToFeature.disabled=!0;try{yield p.view.goTo({target:G,
scale:e?H:void 0})}finally{u.zoomToFeature.active=!1,u.zoomToFeature.disabled=!1,p.zoomToLocation=null,e&&(p.location=w)}});return M.apply(this,arguments)}function y(p){return k.apply(this,arguments)}function k(){k=h._asyncToGenerator(function*(p){const {selectedFeature:E,view:x}=p;if("2d"!==(null==x?void 0:x.type))throw p=new c("zoomToCluster:invalid-view","View must be 2d MapView.",{view:x}),I.error(p),p;if(!E.isAggregate)throw p=new c("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",
{selectedFeature:E}),I.error(p),p;p=yield x.whenLayerView(E.sourceLayer);const A=p.createQuery();A.aggregateIds=[E.getObjectId()];u.zoomToClusteredFeatures.active=!0;u.zoomToClusteredFeatures.disabled=!0;({extent:p}=yield p.queryExtent(A));yield x.goTo({target:p});u.zoomToClusteredFeatures.active=!1;u.zoomToClusteredFeatures.disabled=!1});return k.apply(this,arguments)}function m(){m=h._asyncToGenerator(function*(p){const {selectedFeature:E,view:x}=p;if("2d"!==(null==x?void 0:x.type))throw p=new c("displayClusterExtent:invalid-view",
"View must be 2d MapView.",{view:x}),I.error(p),p;if(!E.isAggregate)throw p=new c("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:E}),I.error(p),p;var A=yield x.whenLayerView(E.sourceLayer);const r=A.createQuery();r.aggregateIds=[E.getObjectId()];({extent:A}=yield A.queryExtent(r));p.selectedClusterBoundaryFeature.geometry=A;x.graphics.add(p.selectedClusterBoundaryFeature)});return m.apply(this,arguments)}function q(){q=h._asyncToGenerator(function*(p){const {selectedFeature:E,
view:x}=p;if("2d"!==(null==x?void 0:x.type))throw p=new c("browseAggregateFeatures:invalid-view","View must be 2d MapView.",{view:x}),I.error(p),p;if(!E.isAggregate)throw p=new c("browseAggregateFeatures:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:E}),I.error(p),p;p=yield x.whenLayerView(E.sourceLayer);const A=p.createQuery();A.aggregateIds=[E.getObjectId()];u.browseClusteredFeatures.active=!0;u.browseClusteredFeatures.disabled=!0;({features:p}=
yield p.queryFeatures(A));u.browseClusteredFeatures.active=!1;u.browseClusteredFeatures.disabled=!1;x.popup.open({features:[E].concat(p),featureMenuOpen:!0})});return q.apply(this,arguments)}const I=B.getLogger("esri.widgets.Popup.PopupViewModel");d.browseAggregateFeatures=function(p){return q.apply(this,arguments)};d.displayClusterExtent=function(p){return m.apply(this,arguments)};d.getSelectedTarget=F;d.isZoomScreenSize=L;d.removeClusteredFeaturesForBrowsing=function(p){var E;null!=(E=p.selectedFeature)&&
E.isAggregate&&(p.features=p.features.filter(x=>x.isAggregate))};d.triggerAction=function(p){const {event:E,view:x}=p;({action:p}=E);var A=x&&x.popup;if(!p)return Promise.reject(new c("trigger-action:missing-arguments","Event has no action"));if(!A)return Promise.reject(new c("trigger-action:missing-arguments","view.popup is missing"));const {disabled:r,id:G}=p;if(!G)return Promise.reject(new c("trigger-action:invalid-action","action.id is missing"));if(r)return Promise.reject(new c("trigger-action:invalid-action",
"Action is disabled"));if(G===u.zoomToFeature.id)return K(A.viewModel).catch(g.throwIfNotAbortError);if(G===u.zoomToClusteredFeatures.id)return y(A.viewModel);if(G===u.browseClusteredFeatures.id)return A.featureMenuOpen=!A.featureMenuOpen,A.viewModel.browseClusterEnabled=!A.viewModel.browseClusterEnabled,Promise.resolve();A.viewModel.browseClusterEnabled=!1;if(G===u.removeSelectedFeature.id){A.close();({selectedFeature:p}=A);if(!p)return Promise.reject(new c(`trigger-action:${u.removeSelectedFeature.id}`,
"selectedFeature is required",{selectedFeature:p}));({sourceLayer:A}=p);A?A.remove(p):x.graphics.remove(p)}return Promise.resolve()};d.zoomToClusterExtent=y;d.zoomToLocation=K;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,h,c,B,g,u,F,L){d.GoToMixin=K=>{K=function(M){function y(...k){k=M.call(this,...k)||this;k.goToOverride=null;k.view=null;return k}h._inheritsLoose(y,M);y.prototype.callGoTo=function(k){const {view:m}=this;return this.goToOverride?this.goToOverride(m,k):m.goTo(k.target,k.options)};return y}(K);c.__decorate([B.property()],K.prototype,"goToOverride",void 0);c.__decorate([B.property()],K.prototype,"view",void 0);return K=c.__decorate([L.subclass("esri.widgets.support.GoTo")],K)};Object.defineProperty(d,
"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/isSupportedGraphicUtils":function(){define(["exports","../../../../core/has"],function(d,h){d.SupportedGraphicResult=void 0;(function(c){c[c.SUPPORTED=0]="SUPPORTED";c[c.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING";c[c.GEOMETRY_MISSING=2]="GEOMETRY_MISSING";c[c.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED";c[c.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED";c[c.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"})(d.SupportedGraphicResult||
(d.SupportedGraphicResult={}));d.isSupportedGraphicResultMessage=function(c){switch(c){case d.SupportedGraphicResult.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case d.SupportedGraphicResult.GEOMETRY_MISSING:return"no geometry";case d.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case d.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case d.SupportedGraphicResult.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""};
Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/moveGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/has","../../../../../core/maybe","../../../../../support/elevationInfoUtils","../isSupportedGraphicUtils"],function(d,h,c,B,g){d.isSupportedGraphic=function(u){var F;if("graphics"!==(null==(F=u.layer)?void 0:F.type))return g.SupportedGraphicResult.GRAPHICS_LAYER_MISSING;if(c.isNone(u.geometry))return g.SupportedGraphicResult.GEOMETRY_MISSING;
switch(u.geometry.type){case "polygon":case "point":case "polyline":case "mesh":break;case "multipoint":case "extent":return g.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED;default:return g.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED}return"on-the-ground"!==B.getGraphicEffectiveElevationMode(u)&&B.hasGraphicFeatureExpressionInfo(u)?g.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED:g.SupportedGraphicResult.SUPPORTED};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/support/elevationInfoUtils":function(){define(["exports",
"../core/maybe","../symbols/support/unitConversionUtils"],function(d,h,c){function B(M,y){return h.isNone(y)||!y.mode?M?"absolute-height":"on-the-ground":y.mode}function g(M,y){return B(h.isSome(M)?M.hasZ:!1,y)}function u(M){const y=F(M);return g(M.geometry,y)}function F(M){return M.layer&&"elevationInfo"in M.layer?M.layer.elevationInfo:null}function L(M,y,k,m,q,I,p=null){if(!h.isNone(I)){var E=h.isSome(p)?p.mode:"absolute-height";if("on-the-ground"===E)return 0;a:{I=K(y,k,m,q,M,I);p=h.isSome(p)&&
h.isSome(p.offset)?p.offset:0;switch(E){case "absolute-height":M=I-p;break a;case "relative-to-ground":M=I-(h.unwrapOr(M.elevationProvider.getElevation(y,k,m,q,"ground"),0)+p);break a;case "relative-to-scene":M=I-(h.unwrapOr(M.elevationProvider.getElevation(y,k,m,q,"scene"),0)+p);break a}M=void 0}return M}}function K(M,y,k,m,q,I){const p=h.isSome(I.offset)?I.offset:0;switch(I.mode){case "absolute-height":return k+p;case "on-the-ground":return h.unwrapOr(q.elevationProvider.getElevation(M,y,0,m,"ground"),
0);case "relative-to-ground":return k+h.unwrapOr(q.elevationProvider.getElevation(M,y,k,m,"ground"),0)+p;case "relative-to-scene":return k+h.unwrapOr(q.elevationProvider.getElevation(M,y,k,m,"scene"),0)+p}}d.getConvertedElevation=function(M,y,k,m=null){return L(M,y.x,y.y,y.hasZ?y.z:0,y.spatialReference,k,m)};d.getConvertedElevationFromVector=function(M,y,k,m,q=null){return L(M,y[0],y[1],2<y.length?y[2]:0,k,m,q)};d.getEffectiveElevationMode=B;d.getGeometryEffectiveElevationMode=g;d.getGraphicEffectiveElevationInfo=
function(M){var y=F(M);M=g(M.geometry,y);y=h.isSome(y)&&"on-the-ground"!==M?h.unwrapOr(y.offset,0)*c.getMetersPerUnit(h.unwrapOr(y.unit,"meters")):0;return{mode:M,offset:y}};d.getGraphicEffectiveElevationMode=u;d.getZForElevationMode=function(M,y,k){if(!h.isNone(k)&&k.mode){var m=M.hasZ?M.z:0,q=h.isSome(k.offset)?k.offset:0;switch(k.mode){case "absolute-height":return m-q;case "on-the-ground":return 0;case "relative-to-ground":return M=h.unwrapOr(y.elevationProvider.getElevation(M.x,M.y,M.z,M.spatialReference,
"ground"),0)+q,m-M;case "relative-to-scene":return M=h.unwrapOr(y.elevationProvider.getElevation(M.x,M.y,M.z,M.spatialReference,"scene"),0)+q,m-M}}};d.hasGraphicFeatureExpressionInfo=function(M){if("on-the-ground"===u(M))return!1;M=F(M);M=h.isSome(M)&&M.featureExpressionInfo?M.featureExpressionInfo.expression:null;return!(!M||"0"===M)};d.zValueInAbsoluteHeightMode=K;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/reshapeGraphic/isSupportedGraphic":function(){define(["exports",
"../../../../../core/maybe","../../../../../geometry/Circle","../../../../../support/elevationInfoUtils","../isSupportedGraphicUtils"],function(d,h,c,B,g){function u(F){var L;return"graphics"!==(null==(L=F.layer)?void 0:L.type)?{result:g.SupportedGraphicResult.GRAPHICS_LAYER_MISSING,geometry:null}:h.isNone(F.geometry)?{result:g.SupportedGraphicResult.GEOMETRY_MISSING,geometry:null}:"on-the-ground"!==B.getGraphicEffectiveElevationMode(F)&&B.hasGraphicFeatureExpressionInfo(F)?{result:g.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED,
geometry:null}:"point"!==F.geometry.type&&"polyline"!==F.geometry.type&&("polygon"!==F.geometry.type||F.geometry instanceof c)?{result:g.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED,geometry:null}:{result:g.SupportedGraphicResult.SUPPORTED,geometry:F.geometry}}d.geometryOfSupportedGraphic=function(F){return u(F).geometry};d.isSupportedGraphic=function(F){return u(F).result};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/geometry/Circle":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/unitUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./Point ./Polygon ./projectionEllipsoid ./support/geodesicUtils ./support/webMercatorUtils ./support/WKIDUnitConversion".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q){var I;g=I=function(p){function E(...A){A=p.call(this,...A)||this;A.center=null;A.geodesic=!1;A.numberOfPoints=60;A.radius=1E3;A.radiusUnit="meters";return A}d._inheritsLoose(E,p);var x=E.prototype;x.normalizeCtorArgs=function(A,r){if(!A||!A.center){if(A&&A.rings)return p.prototype.normalizeCtorArgs.call(this,A,r);A={center:A}}return{...p.prototype.normalizeCtorArgs.call(this),...A,...r}};x.initialize=function(){var A=this.center;const r=this.numberOfPoints;this.hasZ=
A&&A.hasZ;if(0===this.rings.length&&A){var G=c.convertUnit(this.radius,this.radiusUnit,"meters"),H=A.spatialReference,w="geographic";if(H.isWebMercator)w="webMercator";else if(null!=q[H.wkid]||H.wkt&&0===H.wkt.indexOf("PROJCS"))w="projected";if(this.geodesic){let e;switch(w){case "webMercator":e=m.webMercatorToGeographic(A);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":e=
A}A=this._createGeodesicCircle(e,G,r);"webMercator"===w&&(A=m.geographicToWebMercator(A))}else{let e;"webMercator"===w||"projected"===w?e=G/this._convert2Meters(1,A.spatialReference):"geographic"===w&&(e=c.lengthToDegrees(G,"meters",y.getReferenceEllipsoid(A.spatialReference).radius));A=this._createPlanarCircle(A,e,r)}this.spatialReference=A.spatialReference;this.addRing(A.rings[0])}};x.clone=function(){const {center:A,numberOfPoints:r,radius:G,radiusUnit:H,geodesic:w}=this;return new I({center:A.clone(),
numberOfPoints:r,radius:G,radiusUnit:H,geodesic:w})};x._createGeodesicCircle=function(A,r,G){let H=0;const w=[];for(;360>H;){const e=[0,0];k.directGeodeticSolver(e,[A.x,A.y],H,r);this.hasZ&&e.push(A.z);w.push(e);H+=360/G}w.push(w[0]);return new M(w)};x._createPlanarCircle=function(A,r,G){const H=[],w=2*Math.PI/G;for(let z=0;z<G;++z){var e=w*z;e=[A.x+Math.cos(-e)*r,A.y+Math.sin(-e)*r];this.hasZ&&e.push(A.z);H.push(e)}H.push(H[0]);return new M({spatialReference:A.spatialReference,rings:[H]})};x._convert2Meters=
function(A,r){if(null!=q[r.wkid])r=q.values[q[r.wkid]];else{r=r.wkt;const G=r.lastIndexOf(",")+1,H=r.lastIndexOf("]]");r=parseFloat(r.substring(G,H))}return A*r};return E}(M);h.__decorate([B.property({type:K})],g.prototype,"center",void 0);h.__decorate([B.property()],g.prototype,"geodesic",void 0);h.__decorate([B.property()],g.prototype,"numberOfPoints",void 0);h.__decorate([B.property()],g.prototype,"radius",void 0);h.__decorate([B.property()],g.prototype,"radiusUnit",void 0);return g=I=h.__decorate([L.subclass("esri.geometry.Circle")],
g)})},"esri/geometry/support/geodesicUtils":function(){define("exports ../../geometry ../../core/Error ../../core/unitUtils ./geodesicConstants ../Polyline ../Polygon ../Point ../SpatialReference".split(" "),function(d,h,c,B,g,u,F,L,K){function M(x){if(!x)return null;if(x.isGeographic&&x.wkid){var A=g.spheroids[x.wkid];if(A)return A}return x.wkt&&((x=g.WKT_SPHEROID_REGEX.exec(x.wkt))&&2===x.length?(A=x[1].split(","),!A||3>A.length?x=null:(x=parseFloat(A[1]),A=parseFloat(A[2]),x=isNaN(x)||isNaN(A)?
null:{a:x,f:0===A?0:1/A})):x=null,x)?x:null}function y(x){x=M(x||K.WGS84);if("b"in x&&"eSq"in x&&"radius"in x)return x;const A=x.a*(1-x.f);return Object.assign(x,{b:A,eSq:1-(A/x.a)**2,radius:(2*x.a+A)/3,densificationRatio:1E4/((2*x.a+A)/3)})}function k(x){return 0>x?x+360:x}function m(x,A,r){const {a:G,eSq:H}=y(r);r=Math.sqrt(H);const w=Math.sin(A[1]*g.toRadians);A=G*A[0]*g.toRadians;r=0<H?G*(1-H)*(w/(1-H*w*w)-1/(2*r)*Math.log((1-r*w)/(1+r*w)))*.5:G*w;x[0]=A;x[1]=r;return x}function q(x){return null!==
M(x)}function I(x,A){if("polyline"!==x.type&&"polygon"!==x.type)throw new c("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const {spatialReference:r}=x;if(!q(r))throw new c("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");var G="polyline"===x.type?x.paths:x.rings;const H=[],w=[0,0],e={distance:null};for(const J of G){G=[];H.push(G);G.push([J[0][0],J[0][1]]);var z=J[0][0],S=J[0][1];let O,t;for(let l=0;l<
J.length-1;l++){O=J[l+1][0];t=J[l+1][1];if(z===O&&S===t)continue;const b=[z,S];E(e,[z,S],[O,t],r);const {azimuth:f,distance:n}=e;z=n/A;if(1<z){for(S=1;S<=z-1;S++)p(w,b,f,S*A,r),G.push(w.slice(0));p(w,b,f,(n+Math.floor(z-1)*A)/2,r);G.push(w.slice(0))}p(w,b,f,n,r);G.push(w.slice(0));z=w[0];S=w[1]}}return"polyline"===x.type?new u({paths:H,spatialReference:r}):new F({rings:H,spatialReference:r})}function p(x,A,r,G,H){const w=A[0]*g.toRadians;A=A[1]*g.toRadians;r*=g.toRadians;const {a:e,b:z,f:S}=y(H);
H=Math.sin(r);r=Math.cos(r);var J=(1-S)*Math.tan(A);A=1/Math.sqrt(1+J*J);const O=J*A,t=Math.atan2(J,r);J=A*H;const l=J*J;var b=1-l,f=b*(e*e-z*z)/(z*z);const n=1+f/16384*(4096+f*(-768+f*(320-175*f))),P=f/1024*(256+f*(-128+f*(74-47*f)));f=G/(z*n);let U=2*Math.PI,T,v,N,R;for(;1E-12<Math.abs(f-U);)N=Math.cos(2*t+f),T=Math.sin(f),v=Math.cos(f),R=P*T*(N+P/4*(v*(-1+2*N*N)-P/6*N*(-3+4*T*T)*(-3+4*N*N))),U=f,f=G/(z*n)+R;G=O*T-A*v*r;b=S/16*b*(4+S*(4-3*b));G=Math.atan2(O*v+A*T*r,(1-S)*Math.sqrt(l+G*G))/g.toRadians;
x[0]=(w+(Math.atan2(T*H,A*v-O*T*r)-(1-b)*S*J*(f+b*T*(N+b*v*(-1+2*N*N)))))/g.toRadians;x[1]=G;return x}function E(x,A,r,G){var H=A[0]*g.toRadians;A=A[1]*g.toRadians;var w=r[0]*g.toRadians;r=r[1]*g.toRadians;const {a:e,b:z,f:S,radius:J}=y(G),O=w-H;var t=Math.atan((1-S)*Math.tan(A)),l=Math.atan((1-S)*Math.tan(r));G=Math.sin(t);t=Math.cos(t);const b=Math.sin(l);l=Math.cos(l);let f=1E3,n=O,P,U,T;let v,N,R;do{var W=Math.sin(n);var ea=Math.cos(n);T=Math.sqrt(l*W*l*W+(t*b-G*l*ea)*(t*b-G*l*ea));if(0===T)return x.distance=
0,x.azimuth=void 0,x.reverseAzimuth=void 0,x;ea=G*b+t*l*ea;v=Math.atan2(T,ea);N=t*l*W/T;U=1-N*N;W=ea-2*G*b/U;isNaN(W)&&(W=0);R=S/16*U*(4+S*(4-3*U));P=n;n=O+(1-R)*S*N*(v+R*T*(W+R*ea*(-1+2*W*W)))}while(1E-12<Math.abs(n-P)&&0<--f);if(0===f)return G=Math.acos(Math.sin(A)*Math.sin(r)+Math.cos(A)*Math.cos(r)*Math.cos(w-H))*J,H=w-H,x.azimuth=Math.atan2(Math.sin(H)*Math.cos(r),Math.cos(A)*Math.sin(r)-Math.sin(A)*Math.cos(r)*Math.cos(H))/g.toRadians,x.distance=G,x.reverseAzimuth=void 0,x;H=U*(e*e-z*z)/(z*
z);A=H/1024*(256+H*(-128+H*(74-47*H)));w=Math.atan2(t*Math.sin(n),t*b*Math.cos(n)-G*l);x.azimuth=Math.atan2(l*Math.sin(n),t*b-G*l*Math.cos(n))/g.toRadians;x.distance=z*(1+H/16384*(4096+H*(-768+H*(320-175*H))))*(v-A*T*(W+A/4*(ea*(-1+2*W*W)-A/6*W*(-3+4*T*T)*(-3+4*W*W))));x.reverseAzimuth=w/g.toRadians;return x}d.directGeodeticSolver=p;d.geodesicAreas=function(x,A="square-meters"){if(x.some(w=>!q(w.spatialReference)))throw new c("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");
const r=[];for(var G=0;G<x.length;G++){var H=x[G];const {radius:w,densificationRatio:e}=y(H.spatialReference);r.push(I(H,w*e))}x=[];G=[0,0];H=[0,0];for(let w=0;w<r.length;w++){const {rings:e,spatialReference:z}=r[w];let S=0;for(let J=0;J<e.length;J++){const O=e[J];m(G,O[0],z);m(H,O[O.length-1],z);let t=H[0]*G[1]-G[0]*H[1];for(let l=0;l<O.length-1;l++)m(G,O[l+1],z),m(H,O[l],z),t+=H[0]*G[1]-G[0]*H[1];S+=t}S=B.convertUnit(S,"square-meters",A);x.push(S/-2)}return x};d.geodesicDensify=I;d.geodesicDistance=
function(x,A,r="meters"){if(!x||!A)throw new c("geodesic-distance:missing-parameters","one or both input parameters are missing");if(!x.spatialReference||!A.spatialReference)throw new c("geodesic-distance:invalid-parameters","one or both input points do not have a spatial reference");if(!x.spatialReference.equals(A.spatialReference))throw new c("geodesic-distance:invalid-parameters","spatial references of input parameters do not match");const {spatialReference:G}=x;if(!q(G))throw new c("geodesic-distance:not-supported",
"input geometry spatial reference is not supported");if(x.equals(A))return{distance:0,azimuth:0,reverseAzimuth:0};const H={distance:null};E(H,[x.x,x.y],[A.x,A.y],G);H.distance=B.convertUnit(H.distance,"meters",r);H.azimuth=k(H.azimuth);H.reverseAzimuth=k(H.reverseAzimuth);return H};d.geodesicLengths=function(x,A="meters"){if(!x)throw new c("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(x.some(H=>!q(H.spatialReference)))throw new c("geodesic-lengths:invalid-spatial-reference",
"the input geometries spatial reference is not supported");const r=[];for(let H=0;H<x.length;H++){var G=x[H];const {spatialReference:w}=G;G="polyline"===G.type?G.paths:G.rings;let e=0;for(let z=0;z<G.length;z++){const S=G[z];let J=0;for(let O=1;O<S.length;O++){const t=S[O-1][0],l=S[O][0],b=S[O-1][1],f=S[O][1];if(b!==f||t!==l){const n={distance:null};E(n,[t,b],[l,f],w);J+=n.distance}}e+=J}e=B.convertUnit(e,"meters",A);r.push(e)}return r};d.inverseGeodeticSolver=E;d.isSupported=q;d.pointFromDistance=
function(x,A,r){if(!x||null==A||null==r)throw new c("point-from-distance:missing-parameters","one or more input parameters are missing or undefined");if(0>r||360<r)throw new c("point-from-distance:-of-bounds","azimuth is restricted to angles between, and including, 0\u00b0 to 360\u00b0 degrees");if(!x.spatialReference)throw new c("point-from-distance:missing-spatial-reference","the input point must have a spatial reference");const {spatialReference:G}=x;if(!q(G))throw new c("geodesic-distance:not-supported",
"input geometry spatial reference is not supported");const H=[0,0];p(H,[x.x,x.y],r,A,G);return new L({x:H[0],y:H[1],spatialReference:G})};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/transformGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/has","../../../../../core/maybe","../../../../../support/elevationInfoUtils","../isSupportedGraphicUtils"],function(d,h,c,B,g){d.isSupportedGraphic=function(u){var F;if("graphics"!==(null==
(F=u.layer)?void 0:F.type))return g.SupportedGraphicResult.GRAPHICS_LAYER_MISSING;if(c.isNone(u.geometry))return g.SupportedGraphicResult.GEOMETRY_MISSING;switch(u.geometry.type){case "point":break;case "polygon":case "polyline":case "multipoint":case "extent":case "mesh":return g.SupportedGraphicResult.SUPPORTED;default:return g.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED}return(F=c.isSome(u.symbol)&&"point-3d"===u.symbol.type&&u.symbol.symbolLayers)&&0<F.length&&F.some(L=>"object"===L.type)?
"on-the-ground"!==B.getGraphicEffectiveElevationMode(u)&&B.hasGraphicFeatureExpressionInfo(u)?g.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED:g.SupportedGraphicResult.SUPPORTED:g.SupportedGraphicResult.SYMBOL_TYPE_UNSUPPORTED};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/draw/support/layerUtils":function(){define(["exports","../../../core/maybe"],function(d,h){d.addUniqueLayer=function(c,B,g){if(B&&c&&c.map){({map:c}=c);var u=c.layers.find(F=>F===B);u||c.add(B,g);void 0!==g&&
null!==g&&c.layers.reorder(u,g)}};d.findLayerView=function(c,B){return c.allLayerViews.find(g=>{g=g.layer;return"sublayers"in g&&h.isSome(g.sublayers)&&!!g.sublayers.find(u=>u===B)||g===B})};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/keybindings":function(){define(["exports"],function(d){d.SKETCH_KEYS={redo:"r",undo:"z",center:"Alt",constraint:"Shift",snappingToggle:"Control",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "};Object.defineProperty(d,
"__esModule",{value:!0})})},"esri/views/interactive/snapping/SnappingManager":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Evented ../../../core/HandleOwner ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../../geometry/SpatialReference ./FeatureSnappingEngine ./SelfSnappingEngine ./SnappingOptions ./snappingUtils ./candidates/IntersectionSnappingCandidate".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p,E,x,A,r){d.SnappingManager=function(G){function H(e){e=G.call(this,e)||this;e.options=new x;e.engines=[];e._currentMainCandidate=null;e._currentOtherActiveCandidates=[];return e}h._inheritsLoose(H,G);var w=H.prototype;w.initialize=function(){this.handles.add([L.watch(()=>{const {effectiveFeatureEnabled:e,effectiveSelfEnabled:z,touchSensitivityMultiplier:S,distance:J}=this.options;return{effectiveFeatureEnabled:e,effectiveSelfEnabled:z,touchSensitivityMultiplier:S,
distance:J}},()=>{this.doneSnapping();this.emit("changed")},L.sync),L.watch(()=>this.options,e=>{for(const z of this.engines)z.options=e},L.sync),L.watch(()=>({ready:this.view.ready,spatialReference:this.view.spatialReference}),({ready:e,spatialReference:z})=>this._onViewChange(e,z),L.syncAndInitial)])};w.destroy=function(){this._destroyEngines()};w._onViewChange=function(e,z){this._destroyEngines();e&&(this.engines=[new E.SelfSnappingEngine({view:this.view,options:this.options}),new p.FeatureSnappingEngine({view:this.view,
spatialReference:null!=z?z:I.WGS84,options:this.options})])};w._destroyEngines=function(){for(const e of this.engines)e.destroy();this.engines.length=0};w.snap=function(){var e=h._asyncToGenerator(function*(z,S,J){const O=S.coordinateHelper.pointToVector(z),t=yield this._fetchCandidates(O,S,J);return{get valid(){return!F.isAborted(J)},apply:()=>{const {snappedPoint:l,hints:b}=this._processCandidates(O,t,S);this._removeVisualization();u.isSome(S.visualizer)&&this.handles.add(S.visualizer.draw(b,{coordinateHelper:S.coordinateHelper,
elevationInfo:S.elevationInfo,view:this.view}),"visualization-handle");return l}}});return function(z,S,J){return e.apply(this,arguments)}}();w.update=function(e,z){this._removeVisualization();let S=e;const J=[];if(u.isSome(this._currentMainCandidate)){const O=z.coordinateHelper;e=O.pointToVector(e);const t=this._currentMainCandidate.constraint.closestTo(e);if(A.squareDistance(A.anyMapPointToScreenPoint(e,O,z.elevationInfo,this.view),A.anyMapPointToScreenPoint(t,O,z.elevationInfo,this.view))<this._squaredPointProximityThreshold(z.pointer)){S=
O.vectorToDehydratedPoint(t);this._currentMainCandidate.targetPoint=t;J.push(...this._currentMainCandidate.hints);for(const l of this._currentOtherActiveCandidates)l.targetPoint=t,J.push(...l.hints)}else this._currentMainCandidate=null,this._currentOtherActiveCandidates=[]}u.isSome(z.visualizer)&&this.handles.add(z.visualizer.draw(J,{coordinateHelper:z.coordinateHelper,elevationInfo:z.elevationInfo,view:this.view}),"visualization-handle");return S};w.doneSnapping=function(){this._removeVisualization();
this._currentMainCandidate=null;this._currentOtherActiveCandidates=[]};w._removeVisualization=function(){this.handles.remove("visualization-handle")};w._fetchCandidates=function(){var e=h._asyncToGenerator(function*(z,S,J){return(yield Promise.all(this.engines.map(O=>O.fetchCandidates(z,S,J)))).flat()});return function(z,S,J){return e.apply(this,arguments)}}();w._processCandidates=function(e,z,S){if(1>z.length)return this.doneSnapping(),{snappedPoint:S.coordinateHelper.vectorToDehydratedPoint(e),
hints:[]};A.sortCandidatesInPlace(e,z);const J=this._currentMainCandidate;if(u.isSome(J)){const O=this._findOldConstraintInNewCandidates(J,z);if(0<=O)if(z[O]instanceof r.IntersectionSnappingCandidate){if(q.squaredDistance(e,J.targetPoint)<this._squaredPointProximityThreshold(S.pointer))return this._updateSnappingCandidate(J,z,S)}else return this._intersectWithOtherCandidates(O,z,e,S)}return this._intersectWithOtherCandidates(0,z,e,S)};w._findOldConstraintInNewCandidates=function(e,z){return e instanceof
r.IntersectionSnappingCandidate?0<=this._findOldCandidateIndex(z,e.first)&&0<=this._findOldCandidateIndex(z,e.second)?0:-1:this._findOldCandidateIndex(z,e)};w._intersectWithOtherCandidates=function(e,z,S,J){const O=z[e],t=[],l=J.coordinateHelper;for(let b=0;b<z.length;++b){if(b===e)continue;const f=z[b];for(const n of O.constraint.intersect(f.constraint)){const P=l.fromXYZ(n.intersection,O.targetPoint[2]);t.push([new r.IntersectionSnappingCandidate(l,P,O,f),A.squareDistance(A.anyMapPointToScreenPoint(S,
J.coordinateHelper,J.elevationInfo,this.view),A.anyMapPointToScreenPoint(P,J.coordinateHelper,J.elevationInfo,this.view))])}}return 0<t.length&&(t.sort((b,f)=>b[1]-f[1]),t[0][1]<this._squaredPointProximityThreshold(J.pointer))?this._updateSnappingCandidate(t[0][0],z,J):this._updateSnappingCandidate(O,z,J)};w._updateSnappingCandidate=function(e,z,S){this.doneSnapping();this._currentMainCandidate=e;const J=this._currentMainCandidate.targetPoint,O=[];O.push(...e.hints);for(const t of z){if(e instanceof
r.IntersectionSnappingCandidate){if(t.constraint.objectEqual(e.first.constraint)||t.constraint.objectEqual(e.second.constraint))continue}else if(t.constraint.objectEqual(e.constraint))continue;t.constraint.check(J)&&(t.targetPoint=J,this._currentOtherActiveCandidates.push(t),O.push(...t.hints))}return{snappedPoint:S.coordinateHelper.vectorToDehydratedPoint(J),hints:O}};w._squaredPointProximityThreshold=function(e){return"touch"===e?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold};
w._findOldCandidateIndex=function(e,z){let S=-1;for(let J=0;J<e.length;++J)if(z.constraint.objectEqual(e[J].constraint)){S=J;break}return S};h._createClass(H,[{key:"updating",get:function(){return this.engines.some(e=>e.updating)}},{key:"squaredMouseProximityTreshold",get:function(){return this.options.distance*this.options.distance}},{key:"squaredTouchProximityThreshold",get:function(){const {distance:e,touchSensitivityMultiplier:z}=this.options,S=e*z;return S*S}},{key:"test",get:function(){return{visualizationsActive:this.handles.has("visualization-handle"),
engines:this.engines}}}]);return H}(B.EventedMixin(g.HandleOwner));c.__decorate([K.property({constructOnly:!0})],d.SnappingManager.prototype,"view",void 0);c.__decorate([K.property()],d.SnappingManager.prototype,"options",void 0);c.__decorate([K.property({readOnly:!0})],d.SnappingManager.prototype,"updating",null);c.__decorate([K.property()],d.SnappingManager.prototype,"engines",void 0);c.__decorate([K.property()],d.SnappingManager.prototype,"squaredMouseProximityTreshold",null);c.__decorate([K.property()],
d.SnappingManager.prototype,"squaredTouchProximityThreshold",null);d.SnappingManager=c.__decorate([m.subclass("esri.views.interactive.snapping.SnappingManager")],d.SnappingManager);Object.defineProperty(d,"__esModule",{value:!0})})},"esri/chunks/vec2":function(){define(["exports","./common"],function(d,h){function c(N,R){N[0]=R[0];N[1]=R[1];return N}function B(N,R,W){N[0]=R;N[1]=W;return N}function g(N,R,W){N[0]=R[0]+W[0];N[1]=R[1]+W[1];return N}function u(N,R,W){N[0]=R[0]-W[0];N[1]=R[1]-W[1];return N}
function F(N,R,W){N[0]=R[0]*W[0];N[1]=R[1]*W[1];return N}function L(N,R,W){N[0]=R[0]/W[0];N[1]=R[1]/W[1];return N}function K(N,R){N[0]=Math.ceil(R[0]);N[1]=Math.ceil(R[1]);return N}function M(N,R){N[0]=Math.floor(R[0]);N[1]=Math.floor(R[1]);return N}function y(N,R,W){N[0]=Math.min(R[0],W[0]);N[1]=Math.min(R[1],W[1]);return N}function k(N,R,W){N[0]=Math.max(R[0],W[0]);N[1]=Math.max(R[1],W[1]);return N}function m(N,R){N[0]=Math.round(R[0]);N[1]=Math.round(R[1]);return N}function q(N,R,W){N[0]=R[0]*
W;N[1]=R[1]*W;return N}function I(N,R,W,ea){N[0]=R[0]+W[0]*ea;N[1]=R[1]+W[1]*ea;return N}function p(N,R){const W=R[0]-N[0];N=R[1]-N[1];return Math.sqrt(W*W+N*N)}function E(N,R){const W=R[0]-N[0];N=R[1]-N[1];return W*W+N*N}function x(N){const R=N[0];N=N[1];return Math.sqrt(R*R+N*N)}function A(N){const R=N[0];N=N[1];return R*R+N*N}function r(N,R){N[0]=-R[0];N[1]=-R[1];return N}function G(N,R){N[0]=1/R[0];N[1]=1/R[1];return N}function H(N,R){var W=R[0];const ea=R[1];W=W*W+ea*ea;0<W&&(W=1/Math.sqrt(W),
N[0]=R[0]*W,N[1]=R[1]*W);return N}function w(N,R){return N[0]*R[0]+N[1]*R[1]}function e(N,R,W){R=R[0]*W[1]-R[1]*W[0];N[0]=N[1]=0;N[2]=R;return N}function z(N,R,W,ea){const da=R[0];R=R[1];N[0]=da+ea*(W[0]-da);N[1]=R+ea*(W[1]-R);return N}function S(N,R){R=R||1;const W=2*h.RANDOM()*Math.PI;N[0]=Math.cos(W)*R;N[1]=Math.sin(W)*R;return N}function J(N,R,W){const ea=R[0];R=R[1];N[0]=W[0]*ea+W[2]*R;N[1]=W[1]*ea+W[3]*R;return N}function O(N,R,W){const ea=R[0];R=R[1];N[0]=W[0]*ea+W[2]*R+W[4];N[1]=W[1]*ea+W[3]*
R+W[5];return N}function t(N,R,W){const ea=R[0];R=R[1];N[0]=W[0]*ea+W[3]*R+W[6];N[1]=W[1]*ea+W[4]*R+W[7];return N}function l(N,R,W){const ea=R[0];R=R[1];N[0]=W[0]*ea+W[4]*R+W[12];N[1]=W[1]*ea+W[5]*R+W[13];return N}function b(N,R,W,ea){const da=R[0]-W[0];R=R[1]-W[1];const qa=Math.sin(ea);ea=Math.cos(ea);N[0]=da*ea-R*qa+W[0];N[1]=da*qa+R*ea+W[1];return N}function f(N,R){var W=N[0];N=N[1];const ea=R[0];R=R[1];let da=W*W+N*N;0<da&&(da=1/Math.sqrt(da));let qa=ea*ea+R*R;0<qa&&(qa=1/Math.sqrt(qa));W=(W*
ea+N*R)*da*qa;return 1<W?0:-1>W?Math.PI:Math.acos(W)}function n(N){return"vec2("+N[0]+", "+N[1]+")"}function P(N,R){return N[0]===R[0]&&N[1]===R[1]}function U(N,R){const W=N[0];N=N[1];const ea=R[0];R=R[1];return Math.abs(W-ea)<=h.EPSILON*Math.max(1,Math.abs(W),Math.abs(ea))&&Math.abs(N-R)<=h.EPSILON*Math.max(1,Math.abs(N),Math.abs(R))}function T(N,R,W,ea,da){let qa=R[0]-W[0];W=R[1]-W[1];da=(ea[0]*qa+ea[1]*W)*(da-1);qa=ea[0]*da;W=ea[1]*da;N[0]=R[0]+qa;N[1]=R[1]+W;return N}const v=Object.freeze({__proto__:null,
copy:c,set:B,add:g,subtract:u,multiply:F,divide:L,ceil:K,floor:M,min:y,max:k,round:m,scale:q,scaleAndAdd:I,distance:p,squaredDistance:E,length:x,squaredLength:A,negate:r,inverse:G,normalize:H,dot:w,cross:e,lerp:z,random:S,transformMat2:J,transformMat2d:O,transformMat3:t,transformMat4:l,rotate:b,angle:f,str:n,exactEquals:P,equals:U,projectAndScale:T,len:x,sub:u,mul:F,div:L,dist:p,sqrDist:E,sqrLen:A});d.add=g;d.angle=f;d.ceil=K;d.copy=c;d.cross=e;d.dist=p;d.distance=p;d.div=L;d.divide=L;d.dot=w;d.equals=
U;d.exactEquals=P;d.floor=M;d.inverse=G;d.len=x;d.length=x;d.lerp=z;d.max=k;d.min=y;d.mul=F;d.multiply=F;d.negate=r;d.normalize=H;d.projectAndScale=T;d.random=S;d.rotate=b;d.round=m;d.scale=q;d.scaleAndAdd=I;d.set=B;d.sqrDist=E;d.sqrLen=A;d.squaredDistance=E;d.squaredLength=A;d.str=n;d.sub=u;d.subtract=u;d.transformMat2=J;d.transformMat2d=O;d.transformMat3=t;d.transformMat4=l;d.vec2=v})},"esri/views/interactive/snapping/FeatureSnappingEngine":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/HandleOwner ../../../core/Handles ../../../core/MapUtils ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec3f64 ../../../layers/graphics/data/QueryEngineResult ./SnappingConstraint ./snappingUtils ./candidates/EdgeSnappingCandidate ./candidates/FeatureSnappingCandidate ./candidates/RightAngleSnappingCandidate".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p,E,x,A,r,G,H,w){h.FeatureSnappingEngine=function(S){function J(t){t=S.call(this,t)||this;t.sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null}};return t}c._inheritsLoose(J,S);var O=J.prototype;O.initialize=function(){this.updatingHandles.add(()=>this.snappingSources,()=>this.notifyChange("updating"),M.sync);L.isSome(this.view)&&this.handles.add([this.view.on("layerview-create",
t=>this._updateLayerView(t.layer,t.layerView)),this.view.on("layerview-destroy",t=>this._updateLayerView(t.layer,null))])};O._updateLayerView=function(t,l){for(const [,b]of this.snappingSources)b.snappingSource.layerSource.layer===t&&(b.layerView=l)};O.destroy=function(){this._set("options",null);for(const [,t]of this.snappingSources)t.destroy()};O.fetchCandidates=function(){var t=c._asyncToGenerator(function*(l,b,f){if(!this.options.effectiveFeatureEnabled)return[];var n=[];const P=this._computeScreeenSizeDistanceParameters(l,
b),U={distance:P,point:l,coordinateHelper:b.coordinateHelper,types:this.types,filter:null};for(const [,{snappingSource:T,layerView:v}]of this.snappingSources)!T.layerSource.enabled||L.isSome(v)&&v.suspended||n.push(T.fetchCandidates(U,f).then(N=>N.filter(R=>!this._candidateIsExcluded(T,R,b.excludeFeature))));n=(yield K.eachAlwaysValues(n)).flat();this._addRightAngleCandidates(n,l,P,b);K.throwIfAborted(f);r.sortCandidatesInPlace(l,n);return n});return function(l,b,f){return t.apply(this,arguments)}}();
O._addRightAngleCandidates=function(t,l,b,f){var n,P,U,T,v,N,R,W;const ea=L.isSome(f.vertexHandle)?null==(n=f.vertexHandle.rightEdge)?void 0:null==(P=n.rightVertex)?void 0:P.pos:L.isSome(f.editGeometryOperations)&&"polygon"===f.editGeometryOperations.data.type?null==(U=L.unwrap(null==(T=f.editGeometryOperations.data.components[0])?void 0:T.getFirstVertex()))?void 0:U.pos:null;n=L.isSome(f.vertexHandle)?null==(v=f.vertexHandle.leftEdge)?void 0:null==(N=v.leftVertex)?void 0:N.pos:L.isSome(f.editGeometryOperations)?
null==(R=L.unwrap(null==(W=f.editGeometryOperations.data.components[0])?void 0:W.getLastVertex()))?void 0:R.pos:null;v=t.length;for(N=0;N<v;N++)this._addRightAngleCandidate(t[N],n,l,b,f,t),this._addRightAngleCandidate(t[N],ea,l,b,f,t)};O._addRightAngleCandidate=function(t,l,b,f,n,P){if(!L.isNone(l)&&t instanceof G.EdgeSnappingCandidate){var U=t.constraint.closestTo(l),T=(U[0]-b[0])/f.x;b=(U[1]-b[1])/f.y;1>=T*T+b*b&&(n=n.coordinateHelper,P.push(new w.RightAngleSnappingCandidate({coordinateHelper:n,
targetPoint:U,otherVertex:l,otherVertexType:w.OtherVertexType.NEXT,previousVertex:t.constraint.start,constraint:new A.RayConstraint(n,l,U),objectId:t.objectId})))}};O._computeScreeenSizeDistanceParameters=function(t,l){const b=this.options.distance*("touch"===l.pointer?this.options.touchSensitivityMultiplier:1);return L.isNone(this.view)?{x:b,y:b}:"2d"===this.view.type?{x:b*this.view.resolution,y:b*this.view.resolution}:this._computeScreeenSizeDistanceParameters3D(t,b,this.view,l)};O._computeScreeenSizeDistanceParameters3D=
function(t,l,b,f){const {coordinateHelper:n,elevationInfo:P}=f,U=b.state.camera.computeScreenPixelSizeAt(r.anyMapPointToRender(t,n,P,b,z))*b.renderCoordsHelper.unitInMeters/b.mapCoordsHelper.unitInMeters;l*=U;const T=this._computeScreenMagnitudeOfMapOffset(t,U,0,b,f);t=this._computeScreenMagnitudeOfMapOffset(t,0,U,b,f);return{x:l/T,y:l/t}};O._computeScreenMagnitudeOfMapOffset=function(t,l,b,f,{coordinateHelper:n,elevationInfo:P}){const U=n.clone(t);U[0]+=l;U[1]+=b;t=r.anyMapPointToScreenPoint(t,n,
P,f);n=r.anyMapPointToScreenPoint(U,n,P,f);f=n.x-t.x;n=n.y-t.y;return Math.sqrt(f*f+n*n)};O._candidateIsExcluded=function(t,l,b){if(L.isNone(b))return!1;l=this._getCandidateObjectId(l);if(L.isNone(l))return!1;t=t.layerSource.layer;return"graphics"===t.type?b.uid===l:b.sourceLayer===t&&b.attributes&&"objectIdField"in t?b.attributes[t.objectIdField]===l:!1};O._getCandidateObjectId=function(t){return t instanceof H.FeatureSnappingCandidate?t.objectId:null};O._createSourceInfo=function(t){const l=this._createFeatureSnappingSourceType(t);
if(L.isNone(l))return null;if("loading"in l)return this.updatingHandles.addPromise(l.loading.then(()=>{this.destroyed||this.notifyChange("snappingSources")})),null;const b=L.isSome(this.view)?this.view.allLayerViews.find(f=>f.layer===t.layer):null;return new e(l.source,b)};O._createFeatureSnappingSourceType=function(t){switch(t.layer.type){case "feature":case "geojson":case "csv":case "subtype-group":case "wfs":return this._createFeatureSnappingSourceFeatureLayer(t);case "graphics":return this._createFeatureSnappingSourceGraphicsLayer(t)}return null};
O._createFeatureSnappingSourceFeatureLayer=function(t){switch(t.layer.source.type){case "feature-layer":var l=this._getSourceModule("featureService");return L.isSome(l.module)?{source:new l.module.FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:t})}:{loading:l.loader};case "memory":case "csv":case "geojson":case "wfs":if("mesh"!==t.layer.geometryType)return l=this._getSourceModule("featureCollection"),L.isSome(l.module)?{source:new l.module.FeatureCollectionSnappingSource({layerSource:t})}:
{loading:l.loader}}return null};O._createFeatureSnappingSourceGraphicsLayer=function(t){const l=this._getSourceModule("graphics");return L.isSome(l.module)?{source:new l.module.GraphicsSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:t})}:{loading:l.loader}};O._getSourceModule=function(t){const l=this.sourceModules[t];return L.isNone(l.loader)?(t=this._loadSourceModule(t).then(b=>{l.module=b}),l.loader=t,{module:l.module,loader:t}):{module:l.module,loader:l.loader}};
O._loadSourceModule=function(t){switch(t){case "featureService":return this.updatingHandles.addPromise(new Promise((l,b)=>d(["./featureSources/FeatureServiceSnappingSource"],l,b)));case "featureCollection":return this.updatingHandles.addPromise(new Promise((l,b)=>d(["./featureSources/FeatureCollectionSnappingSource"],l,b)));case "graphics":return this.updatingHandles.addPromise(new Promise((l,b)=>d(["./featureSources/GraphicsSnappingSource"],l,b)))}return null};c._createClass(J,[{key:"updating",get:function(){return F.someMap(this.snappingSources,
({snappingSource:t})=>t.updating)||this.updatingHandles.updating}},{key:"snappingSources",get:function(){var t;const l=this._get("snappingSources")||new Map,b=new Map;if(null!=(t=this.options)&&t.featureSources)for(const n of this.options.featureSources.items){t=n.layer.uid;var f=l.get(t);f?(l.delete(t),b.set(t,f)):n.layer.loaded?(f=this._createSourceInfo(n),L.isSome(f)&&b.set(t,f)):this.updatingHandles.addPromise(n.layer.load())}for(const [,n]of l)n.destroy();return b}},{key:"types",get:function(){return x.SnappingTypes.EDGE|
x.SnappingTypes.VERTEX}}]);return J}(g.HandleOwner);B.__decorate([k.property({constructOnly:!0})],h.FeatureSnappingEngine.prototype,"spatialReference",void 0);B.__decorate([k.property({constructOnly:!0})],h.FeatureSnappingEngine.prototype,"view",void 0);B.__decorate([k.property()],h.FeatureSnappingEngine.prototype,"options",void 0);B.__decorate([k.property({readOnly:!0})],h.FeatureSnappingEngine.prototype,"updating",null);B.__decorate([k.property({readOnly:!0})],h.FeatureSnappingEngine.prototype,
"snappingSources",null);h.FeatureSnappingEngine=B.__decorate([p.subclass("esri.views.interactive.snapping.FeatureSnappingEngine")],h.FeatureSnappingEngine);let e=function(){function S(J,O){this.snappingSource=J;this.layerView=O;this.handles=new u;O=this.snappingSource.layerSource.layer;"refresh"in O&&this.handles.add(O.on("refresh",()=>J.refresh()));this.handles.add([y.init(J,"updating",t=>J.layerSource.updating=t,!0),y.init(J,"availability",t=>J.layerSource.availability=t,!0)])}S.prototype.destroy=
function(){this.snappingSource.destroy();this.handles.destroy()};return S}();const z=E.create();Object.defineProperty(h,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./timeSupport ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p,E){function x(G,H,w,e,z,S){z-=w;S-=e;G=Math.min(1,Math.max(0,((G-w)*z+(H-e)*S)/(z*z+S*S)));return{x:w+z*G,y:e+S*G}}function A(G,H){return G?H?4:3:H?3:2}let r=function(){function G(w,e,z){this.items=w;this.queryGeometry=e;this.definitionExpression=z.definitionExpression;this.geometryType=z.geometryType;this.hasM=z.hasM;this.hasZ=z.hasZ;this.objectIdField=z.objectIdField;this.spatialReference=z.spatialReference;this.fieldsIndex=z.fieldsIndex;this.timeInfo=z.timeInfo;
this.featureAdapter=z.featureAdapter;this.aggregateAdapter=z.aggregateAdapter}var H=G.prototype;H.createQueryResponseForCount=function(w){const e=new M(w,this.featureAdapter,this.fieldsIndex);if(!w.outStatistics)return e.countDistinctValues(this.items);const {groupByFieldsForStatistics:z,having:S}=w;if(null==z||!z.length)return 1;const J=new Map,O=new Map,t=new Set;w=w.outStatistics;for(const b of w){({statisticType:w}=b);w="exceedslimit"!==w?b.onStatisticField:void 0;if(!O.has(w)){var l=[];for(const f of z){const n=
this._getAttributeValues(e,f,J);l.push(n)}O.set(w,this._calculateUniqueValues(l,e.returnDistinctValues))}w=O.get(w);for(const f in w){const {data:n,items:P}=w[f];l=n.join(",");S&&!e.validateItems(P,S)||t.add(l)}}return t.size};H.createQueryResponse=function(){var w=c._asyncToGenerator(function*(e){let z;z=e.outStatistics?e.outStatistics.some(S=>"exceedslimit"===S.statisticType)?this._createExceedsLimitQueryResponse(e):yield this._createStatisticsQueryResponse(e):this._createFeatureQueryResponse(e);
e.returnQueryGeometry&&(L.isValid(e.outSR)&&!L.equals(this.queryGeometry.spatialReference,e.outSR)?z.queryGeometry=q.cleanFromGeometryEngine({spatialReference:e.outSR,...k.project(this.queryGeometry,this.queryGeometry.spatialReference,e.outSR)}):z.queryGeometry=q.cleanFromGeometryEngine({spatialReference:e.outSR,...this.queryGeometry}));return z});return function(e){return w.apply(this,arguments)}}();H.createSnappingResponse=function(w,e){const z=this.featureAdapter,S=A(this.hasZ,this.hasM),{x:J,
y:O}=w.point,t="number"===typeof w.distance?w.distance:w.distance.x,l="number"===typeof w.distance?w.distance:w.distance.y,b={candidates:[]},f="esriGeometryPolygon"===this.geometryType;e=this._getPointCreator(w.point,this.spatialReference,e);for(const W of this.items){var n=z.getGeometry(W);if(B.isNone(n))continue;const {coords:ea,lengths:da}=n;if(w.types&h.SnappingTypes.EDGE){n=0;for(var P=0;P<da.length;P++){var U=da[P];for(var T=0;T<U;T++,n+=S){var v=ea[n],N=ea[n+1];if(T!==U-1){const qa=ea[n+S],
va=ea[n+S+1],{x:Ca,y:Ba}=x(J,O,v,N,qa,va);var R=(J-Ca)/t;const ta=(O-Ba)/l;R=R*R+ta*ta;1>=R&&b.candidates.push({type:"edge",objectId:z.getObjectId(W),distance:Math.sqrt(R),target:e(Ca,Ba),start:e(v,N),end:e(qa,va)})}}}}if(w.types&h.SnappingTypes.VERTEX)for(n=f?ea.length-S:ea.length,P=0;P<n;P+=S)U=ea[P],T=ea[P+1],v=(J-U)/t,N=(O-T)/l,v=v*v+N*N,1>=v&&b.candidates.push({type:"vertex",objectId:z.getObjectId(W),distance:Math.sqrt(v),target:e(U,T)})}b.candidates.sort((W,ea)=>W.distance-ea.distance);return b};
H._getPointCreator=function(w,e,z){const S=B.isSome(z)&&!L.equals(e,z)?J=>k.project(J,e,z):J=>J;return null!=w.z&&null!=w.m?(J,O)=>S({x:J,y:O,z:w.z,m:w.m}):null!=w.z?(J,O)=>S({x:J,y:O,z:w.z}):null!=w.m?(J,O)=>S({x:J,y:O,m:w.m}):(J,O)=>S({x:J,y:O})};H.executeAttributesQuery=function(w){var e=y.getWhereClause(w.where,this.fieldsIndex);if(!e)return Promise.resolve(this);if(e.isStandardized){let z=0;const S=[];for(const J of this.items)e.testFeature(J,this.featureAdapter)&&(S[z++]=J);e=new G(S,this.queryGeometry,
this);e.definitionExpression=w.where;return Promise.resolve(e)}return Promise.reject(new TypeError("Where clause is not standardized"))};H.executeAggregateIdsQuery=function(w){if(!w.aggregateIds||!w.aggregateIds.length||B.isNone(this.aggregateAdapter))return Promise.resolve(this);const e=new Set;for(const S of w.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(S).forEach(J=>e.add(J));const z=this.featureAdapter.getObjectId;return Promise.resolve(new G(this.items.filter(S=>e.has(z(S))),this.queryGeometry,
this))};H.executeObjectIdsQuery=function(w){if(!w.objectIds||!w.objectIds.length)return Promise.resolve(this);const e=new Set(w.objectIds),z=this.featureAdapter.getObjectId;return Promise.resolve(new G(this.items.filter(S=>e.has(z(S))),this.queryGeometry,this))};H.executeTimeQuery=function(w){w=m.getTimeOperator(this.timeInfo,w.timeExtent,this.featureAdapter);if(!B.isSome(w))return Promise.resolve(this);w=this.items.filter(w);return Promise.resolve(new G(w,this.queryGeometry,this))};H.filterLatest=
function(){const {trackIdField:w,startTimeField:e,endTimeField:z}=this.timeInfo;var S=z||e;const J=new Map,O=this.featureAdapter.getAttribute;for(const t of this.items){const l=O(t,w),b=O(t,S),f=J.get(l);(!f||b>O(f,S))&&J.set(l,t)}S=Array.from(J.values());return Promise.resolve(new G(S,this.queryGeometry,this))};H.project=function(){var w=c._asyncToGenerator(function*(e){if(!e||L.equals(this.spatialReference,e))return this;const z=this.featureAdapter,S=(yield k.projectMany(this.items.map(J=>q.getGeometry(this.geometryType,
this.hasZ,this.hasM,z.getGeometry(J))),this.spatialReference,e)).map((J,O)=>z.cloneWithGeometry(this.items[O],K.convertFromGeometry(J,this.hasZ,this.hasM)));return new G(S,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:e,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})});return function(e){return w.apply(this,arguments)}}();H.createSummaryStatisticsResponse=
function(){var w=c._asyncToGenerator(function*(e,z){const {field:S,valueExpression:J,normalizationField:O,normalizationType:t,normalizationTotal:l,minValue:b,maxValue:f,scale:n}=z;z=this.fieldsIndex.isDateField(S);e=yield this._getDataValues(e,{field:S,valueExpression:J,normalizationField:O,normalizationType:t,normalizationTotal:l,scale:n});const P=p.isNullCountSupported({normalizationType:t,normalizationField:O,minValue:b,maxValue:f}),U=this.fieldsIndex.get(S),T={value:.5,fieldType:null==U?void 0:
U.type};e=I.isStringField(U)?p.calculateStringStatistics({values:e,supportsNullCount:P,percentileParams:T}):p.calculateStatistics({values:e,minValue:b,maxValue:f,useSampleStdDev:!t,supportsNullCount:P,percentileParams:T});return p.processSummaryStatisticsResult(e,z)});return function(e,z){return w.apply(this,arguments)}}();H.createUniqueValuesResponse=function(){var w=c._asyncToGenerator(function*(e,z){const {field:S,valueExpression:J,domain:O,returnAllCodedValues:t,scale:l}=z;e=yield this._getDataValues(e,
{field:S,valueExpression:J,scale:l});e=p.calculateUniqueValuesCount(e);return p.createUVResult(e,O,t)});return function(e,z){return w.apply(this,arguments)}}();H.createClassBreaksResponse=function(){var w=c._asyncToGenerator(function*(e,z){const {field:S,valueExpression:J,normalizationField:O,normalizationType:t,normalizationTotal:l,classificationMethod:b,standardDeviationInterval:f,minValue:n,maxValue:P,numClasses:U,scale:T}=z;e=yield this._getDataValues(e,{field:S,valueExpression:J,normalizationField:O,
normalizationType:t,normalizationTotal:l,scale:T});e=p.calculateClassBreaks(e,{field:S,normalizationField:O,normalizationType:t,normalizationTotal:l,classificationMethod:b,standardDeviationInterval:f,minValue:n,maxValue:P,numClasses:U});return p.resolveCBResult(e,b)});return function(e,z){return w.apply(this,arguments)}}();H.createHistogramResponse=function(){var w=c._asyncToGenerator(function*(e,z){const {field:S,valueExpression:J,normalizationField:O,normalizationType:t,normalizationTotal:l,classificationMethod:b,
standardDeviationInterval:f,minValue:n,maxValue:P,numBins:U,scale:T}=z;e=yield this._getDataValues(e,{field:S,valueExpression:J,normalizationField:O,normalizationType:t,normalizationTotal:l,scale:T});return p.calculateHistogram(e,{field:S,normalizationField:O,normalizationType:t,normalizationTotal:l,classificationMethod:b,standardDeviationInterval:f,minValue:n,maxValue:P,numBins:U})});return function(e,z){return w.apply(this,arguments)}}();H._sortFeatures=function(w,e,z){if(1<w.length&&e&&e.length)for(const S of e.reverse()){e=
S.split(" ");const J=e[0],O=this.fieldsIndex.get(J);e=e[1]&&"desc"===e[1].toLowerCase();const t=p.getAttributeComparator(null==O?void 0:O.type,e);w.sort((l,b)=>{l=z(l,J,O);b=z(b,J,O);return t(l,b)})}};H._createFeatureQueryResponse=function(w){const e=this.items,{geometryType:z,hasM:S,hasZ:J,objectIdField:O,spatialReference:t}=this,{outFields:l,outSR:b,quantizationParameters:f,resultRecordCount:n,resultOffset:P,returnZ:U,returnM:T}=w,v=null!=n?e.length>(P||0)+n:!1,N=l&&(l.includes("*")?[...this.fieldsIndex.fields]:
l.map(R=>this.fieldsIndex.get(R)));return{exceededTransferLimit:v,features:this._createFeatures(w,e),fields:N,geometryType:z,hasM:S&&T,hasZ:J&&U,objectIdFieldName:O,spatialReference:q.cleanFromGeometryEngine(b?b:t),transform:f&&F.toQuantizationTransform(f)||null}};H._createFeatures=function(w,e){const z=new M(w,this.featureAdapter,this.fieldsIndex),{hasM:S,hasZ:J}=this,{orderByFields:O,quantizationParameters:t,returnGeometry:l,returnCentroid:b,maxAllowableOffset:f,resultOffset:n,resultRecordCount:P,
returnZ:U=!1,returnM:T=!1}=w,v=J&&U,N=S&&T;w=[];var R=0;e=[...e];this._sortFeatures(e,O,(da,qa,va)=>z.getFieldValue(da,qa,va));if(l||b){var W=F.toQuantizationTransform(t);if(l&&!b)for(var ea of e)w[R++]={attributes:z.getAttributes(ea),geometry:q.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ea),f,W,v,N)};else if(!l&&b)for(const da of e)w[R++]={attributes:z.getAttributes(da),centroid:q.transformCentroid(this,this.featureAdapter.getCentroid(da,this),W)};else for(const da of e)w[R++]=
{attributes:z.getAttributes(da),centroid:q.transformCentroid(this,this.featureAdapter.getCentroid(da,this),W),geometry:q.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(da),f,W,v,N)}}else for(W of e)(ea=z.getAttributes(W))&&(w[R++]={attributes:ea});R=n||0;null!=P&&(w=w.slice(R,Math.min(w.length,R+P)));return w};H._createExceedsLimitQueryResponse=function(w){var e=!1;let z=Number.POSITIVE_INFINITY,S=Number.POSITIVE_INFINITY;e=Number.POSITIVE_INFINITY;for(const J of w.outStatistics)if("exceedslimit"===
J.statisticType){z=null!=J.maxPointCount?J.maxPointCount:Number.POSITIVE_INFINITY;S=null!=J.maxRecordCount?J.maxRecordCount:Number.POSITIVE_INFINITY;e=null!=J.maxVertexCount?J.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)e=this.items.length>z;else if(this.items.length>S)e=!0;else{w=this.hasZ?this.hasM?4:3:this.hasM?3:2;const J=this.featureAdapter;e=this.items.reduce((O,t)=>{t=J.getGeometry(t);return O+(B.isSome(t)&&t.coords.length||0)},0)/w>e}return{fields:[{name:"exceedslimit",
type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(e)}}]}};H._createStatisticsQueryResponse=function(){var w=c._asyncToGenerator(function*(e){var z={attributes:{}};const S=[],J=new Map,O=new Map,t=new Map,l=new Map,b=new M(e,this.featureAdapter,this.fieldsIndex);var f=e.outStatistics;const {groupByFieldsForStatistics:n,having:P,orderByFields:U}=e;e=n&&n.length;const T=!!e,v=T&&n[0],N=T&&!this.fieldsIndex.get(v);
for(const qa of f){const {outStatisticFieldName:va,statisticType:Ca}=qa;f=qa;var R="exceedslimit"!==Ca?qa.onStatisticField:void 0;const Ba="percentile_disc"===Ca||"percentile_cont"===Ca,ta="EnvelopeAggregate"===Ca||"CentroidAggregate"===Ca||"ConvexHullAggregate"===Ca,fa=T&&1===e&&(R===v||N)&&"count"===Ca;if(T){if(!t.has(R)){var W=[];for(const la of n){var ea=this._getAttributeValues(b,la,J);W.push(ea)}t.set(R,this._calculateUniqueValues(W,b.returnDistinctValues))}W=t.get(R);for(const la in W){const {count:ma,
data:aa,items:ba,itemPositions:ha}=W[la];ea=aa.join(",");if(!P||b.validateItems(ba,P)){const ka=l.get(ea)||{attributes:{}};if(ta){ka.aggregateGeometries||(ka.aggregateGeometries={});const {aggregateGeometries:pa,outStatisticFieldName:oa}=yield this._getAggregateGeometry(f,ba);ka.aggregateGeometries[oa]=pa}else{var da=null;if(fa)da=ma;else{const pa=this._getAttributeValues(b,R,J);da=ha.map(oa=>pa[oa]);da=Ba&&"statisticParameters"in f?this._getPercentileValue(f,da):this._getStatisticValue(f,da,null,
b.returnDistinctValues)}ka.attributes[va]=da}n.forEach((pa,oa)=>ka.attributes[this.fieldsIndex.get(pa)?pa:`EXPR_${oa+1}`]=aa[oa]);l.set(ea,ka)}}}else if(ta){z.aggregateGeometries||(z.aggregateGeometries={});const {aggregateGeometries:la,outStatisticFieldName:ma}=yield this._getAggregateGeometry(f,this.items);z.aggregateGeometries[ma]=la}else R=this._getAttributeValues(b,R,J),z.attributes[va]=Ba&&"statisticParameters"in f?this._getPercentileValue(f,R):this._getStatisticValue(f,R,O,b.returnDistinctValues);
S.push({name:va,alias:va,type:"esriFieldTypeDouble"})}z=T?Array.from(l.values()):[z];this._sortFeatures(z,U,(qa,va)=>qa.attributes[va]);return{fields:S,features:z}});return function(e){return w.apply(this,arguments)}}();H._getAggregateGeometry=function(){var w=c._asyncToGenerator(function*(e,z){var S=yield new Promise((U,T)=>d(["../../../geometry/geometryEngineJSON"],U,T));const {statisticType:J,outStatisticFieldName:O}=e,{featureAdapter:t,spatialReference:l,geometryType:b,hasZ:f,hasM:n}=this;z=z.map(U=>
q.getGeometry(b,f,n,t.getGeometry(U)));const P=S.convexHull(l,z,!0)[0];e={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===J?(S=P?u.getPolygonExtent(P):u.getGeometryExtent(S.union(l,z)),e.aggregateGeometries={...S,spatialReference:l},e.outStatisticFieldName=O||"extent"):"CentroidAggregate"===J?(S=P?g.polygonCentroid(P):g.extentCentroid(u.getGeometryExtent(S.union(l,z))),e.aggregateGeometries={x:S[0],y:S[1],spatialReference:l},e.outStatisticFieldName=O||"centroid"):"ConvexHullAggregate"===
J&&(e.aggregateGeometries=P,e.outStatisticFieldName=O||"convexHull");return e});return function(e,z){return w.apply(this,arguments)}}();H._getStatisticValue=function(w,e,z,S){const {onStatisticField:J,statisticType:O}=w;w=null;w=null!=z&&z.has(J)?z.get(J):I.isStringField(this.fieldsIndex.get(J))?p.calculateStringStatistics({values:e,returnDistinct:S}):p.calculateStatistics({values:e,minValue:null,maxValue:null,useSampleStdDev:!0});z&&z.set(J,w);return w["var"===O?"variance":O]};H._getPercentileValue=
function(w,e){const {onStatisticField:z,statisticParameters:S,statisticType:J}=w,{value:O,orderBy:t}=S;w=this.fieldsIndex.get(z);return p.calculatePercentile(e,{value:O,orderBy:t,fieldType:null==w?void 0:w.type,isDiscrete:"percentile_disc"===J})};H._getAttributeValues=function(w,e,z){if(z.has(e))return z.get(e);const S=this.fieldsIndex.get(e),J=this.items.map(O=>w.getFieldValue(O,e,S));z.set(e,J);return J};H._getAttributeNormalizedValues=function(w,e){return this.items.map(z=>w.getNormalizedValue(z,
{field:e.field,fieldInfo:this.fieldsIndex.get(e.field),normalizationField:e.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(e.normalizationField),normalizationType:e.normalizationType,normalizationTotal:e.normalizationTotal}))};H._getAttributeExpressionValues=function(){var w=c._asyncToGenerator(function*(e,z,S){const {arcadeUtils:J}=yield E.loadArcade(),O=J.createFunction(z),t=S&&J.getViewInfo(S);return this.items.map(l=>e.getExpressionValue(l,{compiledFunc:O,viewInfo:t},J))});return function(e,
z,S){return w.apply(this,arguments)}}();H._calculateUniqueValues=function(w,e){const z={},S=this.items,J=S.length;for(let O=0;O<J;O++){const t=S[O],l=[];for(const f of w)l.push(f[O]);const b=l.join(",");e?null==z[b]&&(z[b]={count:1,data:l,items:[t],itemPositions:[O]}):null==z[b]?z[b]={count:1,data:l,items:[t],itemPositions:[O]}:(z[b].count++,z[b].items.push(t),z[b].itemPositions.push(O))}return z};H._getDataValues=function(){var w=c._asyncToGenerator(function*(e,z){const S=new M(e,this.featureAdapter,
this.fieldsIndex),{valueExpression:J,field:O,normalizationField:t,normalizationType:l,normalizationTotal:b,scale:f}=z;e=J?{viewingMode:"map",scale:f,spatialReference:e.outSR||this.spatialReference}:null;return J?this._getAttributeExpressionValues(S,J,e):this._getAttributeNormalizedValues(S,{field:O,normalizationField:t,normalizationType:l,normalizationTotal:b})});return function(e,z){return w.apply(this,arguments)}}();c._createClass(G,[{key:"size",get:function(){return this.items.length}}]);return G}();
h.SnappingTypes=void 0;(function(G){G[G.NONE=0]="NONE";G[G.EDGE=1]="EDGE";G[G.VERTEX=2]="VERTEX"})(h.SnappingTypes||(h.SnappingTypes={}));h.default=r;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(d,h,c){function B({scale:J,translate:O},t){return Math.round((t-O[0])/J[0])}function g({scale:J,translate:O},t){return Math.round((O[1]-t)/J[1])}function u(J,O,t){const l=[];let b,f,n,P;
for(let U=0;U<t.length;U++){const T=t[U];if(0<U){if(n=B(J,T[0]),P=g(J,T[1]),n!==b||P!==f)l.push(O(T,n-b,P-f)),b=n,f=P}else b=B(J,T[0]),f=g(J,T[1]),l.push(O(T,b,f))}return 0<l.length?l:null}function F(J,O,t,l){return u(J,t?l?S:z:l?z:e,O)}function L(J,O,t,l){const b=[];t=t?l?S:z:l?z:e;for(l=0;l<O.length;l++){const f=u(J,t,O[l]);f&&3<=f.length&&b.push(f)}return b.length?b:null}function K(J,O,t,l){const b=[];t=t?l?S:z:l?z:e;for(l=0;l<O.length;l++){const f=u(J,t,O[l]);f&&2<=f.length&&b.push(f)}return b.length?
b:null}function M({scale:J,translate:O},t){return t*J[0]+O[0]}function y({scale:J,translate:O},t){return O[1]-t*J[1]}function k(J,O,t){const l=Array(t.length);if(!t.length)return l;const [b,f]=J.scale;let n=M(J,t[0][0]);J=y(J,t[0][1]);l[0]=O(t[0],n,J);for(let P=1;P<t.length;P++){const U=t[P];n+=U[0]*b;J-=U[1]*f;l[P]=O(U,n,J)}return l}function m(J,O,t){const l=Array(t.length);for(let b=0;b<t.length;b++)l[b]=k(J,O,t[b]);return l}function q(J,O,t,l){return k(J,t?l?S:z:l?z:e,O)}function I(J,O,t,l){return m(J,
t?l?S:z:l?z:e,O)}function p(J,O,t,l){return m(J,t?l?S:z:l?z:e,O)}function E(J,O,t){let [l,b]=t[0],f=Math.min(l,O[0]),n=Math.min(b,O[1]),P=Math.max(l,O[2]);O=Math.max(b,O[3]);for(let U=1;U<t.length;U++){const [T,v]=t[U];l+=T;b+=v;0>T&&(f=Math.min(f,l));0<T&&(P=Math.max(P,l));0>v?n=Math.min(n,b):0<v&&(O=Math.max(O,b))}J[0]=f;J[1]=n;J[2]=P;J[3]=O;return J}function x(J,O){if(!O.length)return null;J[0]=J[1]=Number.POSITIVE_INFINITY;J[2]=J[3]=Number.NEGATIVE_INFINITY;for(let t=0;t<O.length;t++)E(J,J,O[t]);
return J}function A(J,O,t,l,b){O.xmin=B(J,t.xmin);O.ymin=g(J,t.ymin);O.xmax=B(J,t.xmax);O.ymax=g(J,t.ymax);O!==t&&(l&&(O.zmin=t.zmin,O.zmax=t.zmax),b&&(O.mmin=t.mmin,O.mmax=t.mmax));return O}function r(J,O,t,l,b){O.points=F(J,t.points,l,b);return O}function G(J,O,t,l,b){O.x=B(J,t.x);O.y=g(J,t.y);O!==t&&(l&&(O.z=t.z),b&&(O.m=t.m));return O}function H(J,O,t,l,b){J=L(J,t.rings,l,b);if(!J)return null;O.rings=J;return O}function w(J,O,t,l,b){J=K(J,t.paths,l,b);if(!J)return null;O.paths=J;return O}const e=
(J,O,t)=>[O,t],z=(J,O,t)=>[O,t,J[2]],S=(J,O,t)=>[O,t,J[2],J[3]];d.equals=function(J,O){if(J===O||null==J&&null==O)return!0;if(null==J||null==O)return!1;let t,l,b,f;J&&"upperLeft"===J.originPosition?(t=J.translate[0],l=J.translate[1],J=J.scale[0]):(t=h.isSome(J.extent)?J.extent.xmin:0,l=h.isSome(J.extent)?J.extent.ymax:0,J=J.tolerance);O&&"upperLeft"===O.originPosition?(b=O.translate[0],f=O.translate[1],O=O.scale[0]):(b=h.isSome(O.extent)?O.extent.xmin:0,f=h.isSome(O.extent)?O.extent.ymax:0,O=O.tolerance);
return t===b&&l===f&&J===O};d.getQuantizedBoundsCoordsArray=E;d.getQuantizedBoundsCoordsArrayArray=x;d.getQuantizedBoundsPaths=function(J){return x([0,0,0,0],J)};d.getQuantizedBoundsPoints=function(J){const O=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return E(O,O,J)};d.getQuantizedBoundsRings=function(J){return x([0,0,0,0],J)};d.quantizeBounds=function(J,O,t){O[0]=B(J,t[0]);O[3]=g(J,t[1]);O[2]=B(J,t[2]);O[1]=g(J,t[3]);return O};d.quantizeExtent=
A;d.quantizeGeometry=function(J,O){return J&&O?c.isPoint(O)?G(J,{},O,!1,!1):c.isPolyline(O)?w(J,{},O,!1,!1):c.isPolygon(O)?H(J,{},O,!1,!1):c.isMultipoint(O)?r(J,{},O,!1,!1):c.isExtent(O)?A(J,{},O,!1,!1):null:null};d.quantizeMultipoint=r;d.quantizePaths=K;d.quantizePoint=G;d.quantizePoints=F;d.quantizePolygon=H;d.quantizePolyline=w;d.quantizeRings=L;d.quantizeX=B;d.quantizeY=g;d.toQuantizationTransform=function(J){return J?{originPosition:"upper-left"===J.originPosition?"upperLeft":"lower-left"===
J.originPosition?"lowerLeft":J.originPosition,scale:J.tolerance?[J.tolerance,J.tolerance]:[1,1],translate:h.isSome(J.extent)?[J.extent.xmin,J.extent.ymax]:[0,0]}:null};d.unquantizeBounds=function(J,O,t){return t?(O[0]=M(J,t[0]),O[1]=y(J,t[3]),O[2]=M(J,t[2]),O[3]=y(J,t[1]),O):[M(J,O[0]),y(J,O[3]),M(J,O[2]),y(J,O[1])]};d.unquantizeCoordsArray=k;d.unquantizeCoordsArrayArray=m;d.unquantizeExtent=function(J,O,t,l,b){O.xmin=M(J,t.xmin);O.ymin=y(J,t.ymin);O.xmax=M(J,t.xmax);O.ymax=y(J,t.ymax);O!==t&&(l&&
(O.zmin=t.zmin,O.zmax=t.zmax),b&&(O.mmin=t.mmin,O.mmax=t.mmax));return O};d.unquantizeMultipoint=function(J,O,t,l,b){h.isSome(t)&&(O.points=q(J,t.points,l,b));return O};d.unquantizePaths=I;d.unquantizePoint=function(J,O,t,l,b){if(h.isNone(t))return O;O.x=M(J,t.x);O.y=y(J,t.y);O!==t&&(l&&(O.z=t.z),b&&(O.m=t.m));return O};d.unquantizePoints=q;d.unquantizePolygon=function(J,O,t,l,b){h.isSome(t)&&(O.rings=p(J,t.rings,l,b));return O};d.unquantizePolyline=function(J,O,t,l,b){h.isSome(t)&&(O.paths=I(J,t.paths,
l,b));return O};d.unquantizeRings=p;d.unquantizeX=M;d.unquantizeY=y;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport","../../../statistics/utils"],function(d,h,c){return function(){function B(u,F,L){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=u.returnDistinctValues;this.fieldsIndex=L;this.featureAdapter=F;if((F=u.outFields)&&-1===F.indexOf("*")){this.outFields=
F;u=0;for(const M of F){var K=h.getExpressionFromFieldName(M);K=(F=this.fieldsIndex.get(K))?null:h.getWhereClause(K,L);F=F?F.name:h.getAliasFromFieldName(M)||`FIELD_EXP_${u++}`;this._fieldDataCache.set(M,{alias:F,clause:K})}}}var g=B.prototype;g.countDistinctValues=function(u){if(!this.returnDistinctValues)return u.length;u.forEach(F=>this.getAttributes(F));return this._returnDistinctMap.size};g.getAttributes=function(u){u=this._processAttributesForOutFields(u);return this._processAttributesForDistinctValues(u)};
g.getFieldValue=function(u,F,L){const K=L?L.name:F;let M=null;this._fieldDataCache.has(K)?M=this._fieldDataCache.get(K).clause:L||(M=h.getWhereClause(F,this.fieldsIndex),this._fieldDataCache.set(K,{alias:K,clause:M}));return L?this.featureAdapter.getAttribute(u,K):M.calculateValue(u,this.featureAdapter)};g.getNormalizedValue=function(u,F){const L=F.normalizationType,K=F.normalizationTotal;let M=this.getFieldValue(u,F.field,F.fieldInfo);L&&Number.isFinite(M)&&(u=this.getFieldValue(u,F.normalizationField,
F.normalizationFieldInfo),M=c.getNormalizedValue(M,L,u,K));return M};g.getExpressionValue=function(u,F,L){u={attributes:this.featureAdapter.getAttributes(u)};u=L.createExecContext(u,F.viewInfo);return L.executeFunction(F.compiledFunc,u)};g.validateItem=function(u,F){this._fieldDataCache.has(F)||this._fieldDataCache.set(F,{alias:F,clause:h.getWhereClause(F,this.fieldsIndex)});return this._fieldDataCache.get(F).clause.testFeature(u,this.featureAdapter)};g.validateItems=function(u,F){this._fieldDataCache.has(F)||
this._fieldDataCache.set(F,{alias:F,clause:h.getWhereClause(F,this.fieldsIndex)});return this._fieldDataCache.get(F).clause.testSet(u,this.featureAdapter)};g._processAttributesForOutFields=function(u){const F=this.outFields;if(!F||!F.length)return this.featureAdapter.getAttributes(u);const L={};for(const K of F){const {alias:M,clause:y}=this._fieldDataCache.get(K);L[M]=y?y.calculateValue(u,this.featureAdapter):this.featureAdapter.getAttribute(u,M)}return L};g._processAttributesForDistinctValues=function(u){if(d.isNone(u)||
!this.returnDistinctValues)return u;var F=this.outFields,L=[];if(F)for(const M of F){var {alias:K}=this._fieldDataCache.get(M);L.push(u[K])}else for(K in u)L.push(u[K]);F=`${(F||["*"]).join(",")}=${L.join(",")}`;L=this._returnDistinctMap.get(F)||0;this._returnDistinctMap.set(F,++L);return 1<L?null:u};return B}()})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],function(d,h,c){function B(K,M){return K?F.get(K,M):
null}function g(K,M,y,k=!0){const m=[];for(const q of M)if("*"!==q&&!K.has(q))if(k){M=u(q);try{const I=B(M,K);if(!I)throw new h("feature-store:unsupported-query","invalid SQL expression",{where:M});if(!I.isStandardized)throw new h("feature-store:unsupported-query","expression is not standard",{clause:I});g(K,I.fieldNames,"expression contains missing fields")}catch(I){if((M=I&&I.details)&&(M.clause||M.where))throw I;M&&M.missingFields?m.push(...M.missingFields):m.push(q)}}else m.push(q);if(m.length)throw new h("feature-store:unsupported-query",
y,{missingFields:m});}function u(K){return K.split(" as ")[0]}const F=new c.WhereClauseCache(50,500),L=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));d.getAliasFromFieldName=function(K){return K.split(" as ")[1]};d.getExpressionFromFieldName=u;d.getWhereClause=B;d.hasInvalidFieldType=function(K,M){return(K=M.get(K))?!L.has(K.type):!1};d.validateFields=g;d.validateHaving=function(K,M,
y){if(!M)return!0;const k=F.get(M,K);if(!k)throw new h("feature-store:unsupported-query","invalid SQL expression",{having:M});if(!k.isAggregate)throw new h("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:M});g(K,k.fieldNames,"having contains missing fields");if(!k.getExpressions().every(m=>{const {aggregateType:q,field:I}=m,p=K.has(I)&&K.get(I).name;return y.some(E=>{const {onStatisticField:x,statisticType:A}=E;return(K.has(x)&&K.get(x).name)===p&&A.toLowerCase().trim()===
q})}))throw new h("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:M});return!0};d.validateWhere=function(K,M){if(!M)return!0;const y=F.get(M,K);if(!y)throw new h("feature-store:unsupported-query","invalid SQL expression",{where:M});if(!y.isStandardized)throw new h("feature-store:unsupported-query","where clause is not standard",{where:M});g(K,y.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(d,"__esModule",{value:!0})})},
"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(d,h,c){let B=function(){function g(u,F){this._cache=new h(u);this._invalidCache=new h(F)}g.prototype.get=function(u,F){const L=`${F.uid}:${u}`,K=this._cache.get(L);if(K)return K;if(void 0!==this._invalidCache.get(L))return null;try{const M=c.WhereClause.create(u,F);this._cache.put(L,M);return M}catch{return this._invalidCache.put(L,null),null}};return g}();d.WhereClauseCache=B;Object.defineProperty(d,
"__esModule",{value:!0})})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(d,h,c,B,g,u){function F(b,f){b+="";return b.length>=f?b:Array(f-b.length+1).join("0")+b}function L(b,f,n="0",P="0",U="0",T="0",v="",N="0",R="0"){return"+"===v||"-"===v?(b=`${F(parseInt(b,10),4)}-${F(parseInt(f,10),2)}-${F(parseInt(n,10),2)}`,f="",10>parseFloat(T)&&(f="0"),P=`${F(parseInt(P,
10),2)}:${F(parseInt(U,10),2)}:${f+parseFloat(T).toString()}`,v=`${v}${F(parseInt(N,10),2)}:${F(parseInt(R,10),2)}`,new Date(b+"T"+P+v)):new Date(parseInt(b,10),parseInt(f,10)-1,parseInt(n,10),parseInt(P,10),parseInt(U,10),parseFloat(T))}function K(b){let f=H.exec(b);if(null!==f){const [,n,P,U,T,v,N]=f;return L(n,P,U,T,v,N)}f=w.exec(b);if(null!==f){const [,n,P,U,T,v,N,R,W,ea]=f;return L(n,P,U,T,v,N,R,W,ea)}f=e.exec(b);if(null!==f){const [,n,P,U,T,v,N,R,W]=f;return L(n,P,U,T,v,"0",N,R,W)}f=z.exec(b);
if(null!==f){const [,n,P,U,T,v]=f;return L(n,P,U,T,v)}f=G.exec(b);if(null!==f){const [,n,P,U]=f;return L(n,P,U)}throw Error("SQL Invalid Timestamp");}function M(b){b=G.exec(b);if(null===b)throw Error("SQL Invalid Date");const [,f,n,P]=b;return new Date(parseInt(f,10),parseInt(n,10)-1,parseInt(P,10))}function y(b){return Array.isArray(b)?b:[b]}function k(b){return null!==b?!0!==b:null}function m(b,f){return null!=b&&null!=f?!0===b&&!0===f:!1===b||!1===f?!1:null}function q(b,f){return null!=b&&null!=
f?!0===b||!0===f:!0===b||!0===f?!0:null}function I(b,f){if(null==b)return null;let n=!1;for(const P of f)if(null==P)n=null;else if(b===P){n=!0;break}return n}function p(b,f,n){if(null==b)return null;{let P="",U=t.Normal;for(let T=0;T<f.length;T++){const v=f.charAt(T);switch(U){case t.Normal:v===n?U=t.Escaped:P="-[]/{}()*+?.\\^$|".includes(v)?P+("\\"+v):"%"===v?P+".*":"_"===v?P+".":P+v;break;case t.Escaped:P="-[]/{}()*+?.\\^$|".includes(v)?P+("\\"+v):P+v,U=t.Normal}}f=new RegExp("^"+P+"$","m")}return f.test(b)}
function E(b){return b instanceof Date?b.valueOf():b}function x(b,f,n){if(null==f||null==n)return null;f=E(f);n=E(n);switch(b){case "\x3c\x3e":return f!==n;case "\x3d":return f===n;case "\x3e":return f>n;case "\x3c":return f<n;case "\x3e\x3d":return f>=n;case "\x3c\x3d":return f<=n}}function A(b,f,n){if(f instanceof g.SqlInterval)if(n instanceof Date)switch(b){case "+":return new Date(f.valueInMilliseconds()+n.getTime());case "-":return f.valueInMilliseconds()-n.getTime();case "*":return f.valueInMilliseconds()*
n.getTime();case "/":return f.valueInMilliseconds()/n.getTime()}else if(n instanceof g.SqlInterval)switch(b){case "+":return g.SqlInterval.createFromMilliseconds(f.valueInMilliseconds()+n.valueInMilliseconds());case "-":return g.SqlInterval.createFromMilliseconds(f.valueInMilliseconds()-n.valueInMilliseconds());case "*":return f.valueInMilliseconds()*n.valueInMilliseconds();case "/":return f.valueInMilliseconds()/n.valueInMilliseconds()}else f=f.valueInMilliseconds();else if(n instanceof g.SqlInterval)if(f instanceof
Date)switch(b){case "+":return new Date(n.valueInMilliseconds()+f.getTime());case "-":return new Date(f.getTime()-n.valueInMilliseconds());case "*":return f.getTime()*n.valueInMilliseconds();case "/":return f.getTime()/n.valueInMilliseconds()}else n=n.valueInMilliseconds();else if(f instanceof Date&&"number"===typeof n)switch(n*=864E5,f=f.getTime(),b){case "+":return new Date(f+n);case "-":return new Date(f-n);case "*":return new Date(f*n);case "/":return new Date(f/n)}else if(n instanceof Date&&
"number"===typeof f)switch(f*=864E5,n=n.getTime(),b){case "+":return new Date(f+n);case "-":return new Date(f-n);case "*":return new Date(f*n);case "/":return new Date(f/n)}switch(b){case "+":return f+n;case "-":return f-n;case "*":return f*n;case "/":return f/n}}function r(b,f,n,P){b=P.getAttribute(b,f);return null!=b&&1===n[f]?new Date(b):b}const G=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,H=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,w=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,
e=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,z=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,S=new Set(["current_timestamp","current_date","current_time"]);let J=function(){function b(){}b.makeBool=function(f){return!0===f};b.featureValue=function(f,n,P,U){return r(f,n,P,U)};b.equalsNull=function(f){return null===f};b.applyLike=function(f,n,P){return p(f,n,P)};b.ensureArray=function(f){return y(f)};b.applyIn=function(f,n){return I(f,n)};b.currentDate=function(){const f=
new Date;f.setHours(0,0,0,0);return f};b.makeSqlInterval=function(f,n,P){return g.SqlInterval.createFromValueAndQualifer(f,n,P)};b.convertInterval=function(f){return f instanceof g.SqlInterval?f.valueInMilliseconds():f};b.currentTimestamp=function(){return new Date};b.compare=function(f,n,P){return x(f,n,P)};b.calculate=function(f,n,P){return A(f,n,P)};b.makeComparable=function(f){return E(f)};b.evaluateFunction=function(f,n){return g.evaluateFunction(f,n)};b.lookup=function(f,n){f=n[f];return void 0===
f?null:f};b.between=function(f,n){return null==f||null==n[0]||null==n[1]?null:f>=n[0]&&f<=n[1]};b.notbetween=function(f,n){return null==f||null==n[0]||null==n[1]?null:f<n[0]||f>n[1]};b.ternaryNot=function(f){return k(f)};b.ternaryAnd=function(f,n){return m(f,n)};b.ternaryOr=function(f,n){return q(f,n)};return b}(),O=function(){function b(n,P){this.fieldsIndex=P;this.datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=u.WhereGrammar.parse(n);const {isStandardized:U,isAggregate:T,
referencedFieldNames:v}=this._extractExpressionInfo(P);this.referencedFieldNames=v;this.isStandardized=U;this.isAggregate=T}b.create=function(n,P){return new b(n,P)};var f=b.prototype;f.testSet=function(n,P=l){const U={};for(const T of this.fieldNames)U[T]=n.map(v=>P.getAttribute(v,T));return!!this._evaluateNode(this.parseTree,{attributes:U},l)};f.calculateValue=function(n,P=l){n=this._evaluateNode(this.parseTree,n,P);return n instanceof g.SqlInterval?n.valueInMilliseconds()/864E5:n};f.calculateValueCompiled=
function(n,P=l){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(n,this.parameters,P,this.datefields);if(c("esri-csp-restrictions"))return this.calculateValue(n,P);this._compileMe();return this.parseTree._compiledVersion(n,this.parameters,P,this.datefields)};f.testFeature=function(n,P=l){return!!this._evaluateNode(this.parseTree,n,P)};f.testFeatureCompiled=function(n,P=l){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(n,this.parameters,
P,this.datefields);if(c("esri-csp-restrictions"))return this.testFeature(n,P);this._compileMe();return!!this.parseTree._compiledVersion(n,this.parameters,P,this.datefields)};f.getFunctions=function(){const n=new Set;this._visitAll(this.parseTree,P=>{"function"===P.type&&n.add(P.name.toLowerCase())});return Array.from(n)};f.getExpressions=function(){const n=new Map;this._visitAll(this.parseTree,P=>{if("function"===P.type){const U=P.name.toLowerCase();P=P.args.value[0];if("column_ref"===P.type){P=P.column;
const T=`${U}-${P}`;n.has(T)||n.set(T,{aggregateType:U,field:P})}}});return[...n.values()]};f.getVariables=function(){const n=new Set;this._visitAll(this.parseTree,P=>{"param"===P.type&&n.add(P.value.toLowerCase())});return Array.from(n)};f._compileMe=function(){const n="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",n)).bind(J)};f._extractExpressionInfo=function(n){const P=
[],U=new Set;let T=!0,v=!0;this._visitAll(this.parseTree,N=>{switch(N.type){case "column_ref":{const R=n.get(N.column);let W,ea;R?W=ea=R.name:(ea=N.column,W=ea.toLowerCase());!R||"date"!==R.type&&"esriFieldTypeDate"!==R.type||(this.datefields[R.name]=1);U.has(W)||(U.add(W),P.push(ea));N.column=ea;break}case "function":{const {name:R,args:W}=N;N=W.value.length;T&&(T=g.isStandardized(R,N));v&&(v=B.isAggregate(R,N))}}});return{referencedFieldNames:Array.from(P),isStandardized:T,isAggregate:v}};f._visitAll=
function(n,P){if(null!=n)switch(P(n),n.type){case "when_clause":this._visitAll(n.operand,P);this._visitAll(n.value,P);break;case "case_expression":for(const U of n.clauses)this._visitAll(U,P);"simple"===n.format&&this._visitAll(n.operand,P);null!==n.else&&this._visitAll(n.else,P);break;case "expr_list":for(const U of n.value)this._visitAll(U,P);break;case "unary_expr":this._visitAll(n.expr,P);break;case "binary_expr":this._visitAll(n.left,P);this._visitAll(n.right,P);break;case "function":this._visitAll(n.args,
P)}};f.evaluateNodeToJavaScript=function(n){switch(n.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(n.value)+", "+JSON.stringify(n.qualifier)+","+JSON.stringify(n.op)+")";case "case_expression":var P="";if("simple"===n.format){var U="this.makeComparable("+this.evaluateNodeToJavaScript(n.operand)+")";P="( ";for(let T=0;T<n.clauses.length;T++)P+=" ("+U+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(n.clauses[T].operand)+")) ? ("+this.evaluateNodeToJavaScript(n.clauses[T].value)+
") : "}else for(P="( ",U=0;U<n.clauses.length;U++)P+=" this.makeBool("+this.evaluateNodeToJavaScript(n.clauses[U].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(n.clauses[U].value)+") : ";P=null!==n.else?P+this.evaluateNodeToJavaScript(n.else):P+"null";return P+=" )";case "param":return"this.lookup("+JSON.stringify(n.value.toLowerCase())+",lookups)";case "expr_list":P="[";for(U of n.value)"["!==P&&(P+=","),P+=this.evaluateNodeToJavaScript(U);return P+="]";case "unary_expr":return"this.ternaryNot("+
this.evaluateNodeToJavaScript(n.expr)+")";case "binary_expr":switch(n.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(n.left)+","+this.evaluateNodeToJavaScript(n.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(n.left)+","+this.evaluateNodeToJavaScript(n.right)+" )";case "IS":if("null"!==n.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(n.left)+")";case "ISNOT":if("null"!==n.right.type)throw Error("Unsupported RHS for IS");
return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(n.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(n.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(n.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(n.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(n.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(n.left)+","+this.evaluateNodeToJavaScript(n.right)+")";case "NOTBETWEEN":return"this.notbetween("+
this.evaluateNodeToJavaScript(n.left)+","+this.evaluateNodeToJavaScript(n.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(n.left)+","+this.evaluateNodeToJavaScript(n.right)+","+JSON.stringify(n.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(n.left)+","+this.evaluateNodeToJavaScript(n.right)+","+JSON.stringify(n.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+
JSON.stringify(n.operator)+","+this.evaluateNodeToJavaScript(n.left)+","+this.evaluateNodeToJavaScript(n.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(n.operator)+","+this.evaluateNodeToJavaScript(n.left)+","+this.evaluateNodeToJavaScript(n.right)+")"}throw Error("Not Supported Operator "+n.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(n.value);case "date":return"(new Date("+M(n.value).getTime().toString()+"))";case "timestamp":return"(new Date("+
K(n.value).getTime().toString()+"))";case "current_time":return"date"===n.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(n.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(n.name)+","+this.evaluateNodeToJavaScript(n.args)+")"}throw Error("Unsupported sql syntax "+n.type);};f._evaluateNode=function(n,P,U){switch(n.type){case "interval":return P=this._evaluateNode(n.value,P,
U),g.SqlInterval.createFromValueAndQualifer(P,n.qualifier,n.op);case "case_expression":if("simple"===n.format){var T=E(this._evaluateNode(n.operand,P,U));for(var v=0;v<n.clauses.length;v++)if(T===E(this._evaluateNode(n.clauses[v].operand,P,U)))return this._evaluateNode(n.clauses[v].value,P,U)}else for(T=0;T<n.clauses.length;T++)if(!0===this._evaluateNode(n.clauses[T].operand,P,U))return this._evaluateNode(n.clauses[T].value,P,U);return null!==n.else?this._evaluateNode(n.else,P,U):null;case "param":return this.parameters[n.value.toLowerCase()];
case "expr_list":T=[];for(v of n.value)T.push(this._evaluateNode(v,P,U));return T;case "unary_expr":return k(this._evaluateNode(n.expr,P,U));case "binary_expr":switch(n.operator){case "AND":return m(this._evaluateNode(n.left,P,U),this._evaluateNode(n.right,P,U));case "OR":return q(this._evaluateNode(n.left,P,U),this._evaluateNode(n.right,P,U));case "IS":if("null"!==n.right.type)throw Error("Unsupported RHS for IS");return null===this._evaluateNode(n.left,P,U);case "ISNOT":if("null"!==n.right.type)throw Error("Unsupported RHS for IS");
return null!==this._evaluateNode(n.left,P,U);case "IN":return T=y(this._evaluateNode(n.right,P,U)),I(this._evaluateNode(n.left,P,U),T);case "NOT IN":return T=y(this._evaluateNode(n.right,P,U)),k(I(this._evaluateNode(n.left,P,U),T));case "BETWEEN":return T=this._evaluateNode(n.left,P,U),n=this._evaluateNode(n.right,P,U),null==T||null==n[0]||null==n[1]?null:T>=E(n[0])&&T<=E(n[1]);case "NOTBETWEEN":return T=this._evaluateNode(n.left,P,U),n=this._evaluateNode(n.right,P,U),null==T||null==n[0]||null==n[1]?
null:T<E(n[0])||T>E(n[1]);case "LIKE":return p(this._evaluateNode(n.left,P,U),this._evaluateNode(n.right,P,U),n.escape);case "NOT LIKE":return k(p(this._evaluateNode(n.left,P,U),this._evaluateNode(n.right,P,U),n.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return x(n.operator,this._evaluateNode(n.left,P,U),this._evaluateNode(n.right,P,U));case "-":case "+":case "*":case "/":return A(n.operator,this._evaluateNode(n.left,P,U),this._evaluateNode(n.right,
P,U))}case "null":case "bool":case "string":case "number":return n.value;case "date":return M(n.value);case "timestamp":return K(n.value);case "current_time":return P=new Date,"date"===n.mode&&P.setHours(0,0,0,0),P;case "column_ref":return r(P,n.column,this.datefields,U);case "function":return P=this._evaluateNode(n.args,P,U),this.isAggregate?B.aggregateFunction(n.name,P):g.evaluateFunction(n.name,P)}throw Error("Unsupported sql syntax "+n.type);};h._createClass(b,[{key:"fieldNames",get:function(){return this.referencedFieldNames}},
{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,n=>{"current_time"===n.type?this._hasDateFunctions=!0:"function"===n.type&&(this._hasDateFunctions=this._hasDateFunctions||S.has(n.name.toLowerCase()))});return this._hasDateFunctions}}]);return b}();var t;(function(b){b[b.Normal=0]="Normal";b[b.Escaped=1]="Escaped"})(t||(t={}));const l={getAttribute(b,f){return(b&&"object"===typeof b.attributes?
b.attributes:b)[f]}};d.WhereClause=O;d.defaultAttributeAdapter=l;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(d){function h(g){let u=0;for(let F=0;F<g.length;F++)u+=g[F];return u/g.length}function c(g){const u=h(g),F=g.length;let L=0;for(const K of g)L+=(K-u)**2;return 1<F?L/(F-1):0}const B={min:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.min.apply(Math,g[0])},max:{minParams:1,maxParams:1,evaluate:g=>null==
g[0]?null:Math.max.apply(Math,g[0])},avg:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:h(g[0])},sum:{minParams:1,maxParams:1,evaluate:g=>{if(null==g[0])g=null;else{{g=g[0];let u=0;for(let F=0;F<g.length;F++)u+=g[F];g=u}}return g}},stddev:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.sqrt(c(g[0]))},count:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:g[0].length},var:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:c(g[0])}};d.aggregateFunction=function(g,u){const F=B[g.toLowerCase()];
if(null==F)throw Error("Function Not Recognised");if(u.length<F.minParams||u.length>F.maxParams)throw Error(`Invalid Parameter count for call to ${g.toUpperCase()}`);return F.evaluate(u)};d.isAggregate=function(g,u){g=B[g.toLowerCase()];return null!=g&&u>=g.minParams&&u<=g.maxParams};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(d,h){let c=function(){function g(){this.op="+";this.minute=this.year=this.month=
this.hour=this.second=this.day=0}g._fixDefaults=function(u){if(null!==u.precision||null!==u.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};g.createFromMilliseconds=function(u){const F=new g;F.second=u/1E3;return F};g.createFromValueAndQualifer=function(u,F,L){let K=null;const M=new g;M.op="-"===L?"-":"+";if("interval-period"===F.type){g._fixDefaults(F);if("year"===F.period||"month"===F.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(u))M[F.period]=
parseFloat(u);else throw Error("Illegal Interval");}else{g._fixDefaults(F.start);g._fixDefaults(F.end);if("year"===F.start.period||"month"===F.start.period)throw Error("Year-Month Intervals not supported");if("year"===F.end.period||"month"===F.end.period)throw Error("Year-Month Intervals not supported");switch(F.start.period){case "day":switch(F.end.period){case "hour":K=/^[0-9]{1,} [0-9]{1,}$/;if(K.test(u))M[F.start.period]=parseFloat(u.split(" ")[0]),M[F.end.period]=parseFloat(u.split(" ")[1]);
else throw Error("Illegal Interval");break;case "minute":K=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(K.test(u))M[F.start.period]=parseFloat(u.split(" ")[0]),u=u.split(" ")[1].split(":"),M.hour=parseFloat(u[0]),M.minute=parseFloat(u[1]);else throw Error("Illegal Interval");break;case "second":K=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(K.test(u))M[F.start.period]=parseFloat(u.split(" ")[0]),u=u.split(" ")[1].split(":"),M.hour=parseFloat(u[0]),M.minute=parseFloat(u[1]),M.second=
parseFloat(u[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(F.end.period){case "minute":K=/^[0-9]{1,}:[0-9]{1,}$/;if(K.test(u))M.hour=parseFloat(u.split(":")[0]),M.minute=parseFloat(u.split(":")[1]);else throw Error("Illegal Interval");break;case "second":K=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(K.test(u))u=u.split(":"),M.hour=parseFloat(u[0]),M.minute=parseFloat(u[1]),M.second=parseFloat(u[2]);else throw Error("Illegal Interval");
break;default:throw"Invalid Interval.";}break;case "minute":switch(F.end.period){case "second":K=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(K.test(u))u=u.split(":"),M.minute=parseFloat(u[0]),M.second=parseFloat(u[1]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return M};g.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*
864E5+31536E6*this.year)};return g}();const B={extract:{minParams:2,maxParams:2,evaluate:([g,u])=>{if(null==u)return null;if(u instanceof Date)switch(g.toUpperCase()){case "SECOND":return u.getSeconds();case "MINUTE":return u.getMinutes();case "HOUR":return u.getHours();case "DAY":return u.getDate();case "MONTH":return u.getMonth()+1;case "YEAR":return u.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:g=>{if(2===g.length){const [u,
F]=g;return null==u||null==F?null:u.toString().substring(F-1)}if(3===g.length){const [u,F,L]=g;return null==u||null==F||null==L?null:0>=L?"":u.toString().substring(F-1,F+L-1)}}},position:{minParams:2,maxParams:2,evaluate:([g,u])=>null==g||null==u?null:u.indexOf(g)+1},trim:{minParams:2,maxParams:3,evaluate:g=>{var u=3===g.length,F=u?g[1]:" ";u=u?g[2]:g[1];if(null==F||null==u)return null;F=`(${h.escapeRegExpString(F)})`;switch(g[0]){case "BOTH":return u.replace(new RegExp(`^${F}*|${F}*$`,"g"),"");case "LEADING":return u.replace(new RegExp(`^${F}*`,
"g"),"");case "TRAILING":return u.replace(new RegExp(`${F}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.abs(g[0])},ceiling:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.ceil(g[0])},floor:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.floor(g[0])},log:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.log(g[0])},log10:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.log(g[0])*Math.LOG10E},
sin:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.sin(g[0])},cos:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.cos(g[0])},tan:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.tan(g[0])},asin:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.asin(g[0])},acos:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.acos(g[0])},atan:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:Math.atan(g[0])},sign:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:
0<g[0]?1:0>g[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:g=>null==g[0]||null==g[1]?null:g[0]**g[1]},mod:{minParams:2,maxParams:2,evaluate:g=>null==g[0]||null==g[1]?null:g[0]%g[1]},round:{minParams:1,maxParams:2,evaluate:g=>{const u=g[0];g=2===g.length?10**g[1]:1;return null==u?null:Math.round(u*g)/g}},truncate:{minParams:1,maxParams:2,evaluate:g=>null==g[0]?null:1===g.length?parseInt(g[0].toFixed(0),10):parseFloat(g[0].toFixed(g[1]))},char_length:{minParams:1,maxParams:1,evaluate:g=>"string"===
typeof g[0]||g[0]instanceof String?g[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:g=>{let u="";for(let F=0;F<g.length;F++){if(null==g[F])return null;u+=g[F].toString()}return u}},lower:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:g[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:g=>null==g[0]?null:g[0].toString().toUpperCase()}};d.SqlInterval=c;d.evaluateFunction=function(g,u){const F=B[g.toLowerCase()];if(null==F)throw Error("Function Not Recognised");
if(u.length<F.minParams||u.length>F.maxParams)throw Error(`Invalid Parameter count for call to ${g.toUpperCase()}`);return F.evaluate(u)};d.isStandardized=function(g,u){g=B[g.toLowerCase()];return null!=g&&u>=g.minParams&&u<=g.maxParams};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(d,h){var c={exports:{}};(function(g){(function(u,F){g.exports&&(g.exports=F())})(h.commonjsGlobal,function(){function u(L,
K,M,y){L=Error.call(this,L);Object.setPrototypeOf&&Object.setPrototypeOf(L,u.prototype);L.expected=K;L.found=M;L.location=y;L.name="SyntaxError";return L}function F(L,K,M){M=M||" ";if(L.length>K)return L;K-=L.length;M+=M.repeat(K);return L+M.slice(0,K)}(function(L,K){function M(){this.constructor=L}M.prototype=K.prototype;L.prototype=new M})(u,Error);u.prototype.format=function(L){var K="Error: "+this.message;if(this.location){var M=null,y;for(y=0;y<L.length;y++)if(L[y].source===this.location.source){M=
L[y].text.split(/\r\n|\n|\r/g);break}L=this.location.start;y=this.location.source+":"+L.line+":"+L.column;if(M){var k=this.location.end,m=F("",L.line.toString().length);M=M[L.line-1];k=L.line===k.line?k.column:M.length+1;K+="\n --\x3e "+y+"\n"+m+" |\n"+L.line+" | "+M+"\n"+m+" | "+F("",L.column-1)+F("",k-L.column,"^")}else K+="\n at "+y}return K};u.buildMessage=function(L,K){function M(I){return I.charCodeAt(0).toString(16).toUpperCase()}function y(I){return I.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,
"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+M(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+M(p)})}function k(I){return I.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+M(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+M(p)})}function m(I){return q[I.type](I)}
var q={literal:function(I){return'"'+y(I.text)+'"'},class:function(I){var p=I.parts.map(function(E){return Array.isArray(E)?k(E[0])+"-"+k(E[1]):k(E)});return"["+(I.inverted?"^":"")+p+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(I){return I.description}};return"Expected "+function(I){I=I.map(m);var p,E;I.sort();if(0<I.length){for(E=p=1;p<I.length;p++)I[p-1]!==I[p]&&(I[E]=I[p],E++);I.length=E}switch(I.length){case 1:return I[0];case 2:return I[0]+" or "+
I[1];default:return I.slice(0,-1).join(", ")+", or "+I[I.length-1]}}(L)+" but "+(K?'"'+y(K)+'"':"end of input")+" found."};return{SyntaxError:u,parse:function(L,K){function M(V,X){return{type:"literal",text:V,ignoreCase:X}}function y(V,X,a){return{type:"class",parts:V,inverted:X,ignoreCase:a}}function k(V){var X=Vb[V],a;if(!X){for(a=V-1;!Vb[a];)a--;X=Vb[a];for(X={line:X.line,column:X.column};a<V;)10===L.charCodeAt(a)?(X.line++,X.column=1):X.column++,a++;Vb[V]=X}return X}function m(V,X){var a=k(V),
C=k(X);return{source:Ab,start:{offset:V,line:a.line,column:a.column},end:{offset:X,line:C.line,column:C.column}}}function q(V){Q<ub||(Q>ub&&(ub=Q,Ac=[]),Ac.push(V))}function I(){var V=Q;wa();var X=E();X!==D?(wa(),V=X):(Q=V,V=D);return V}function p(){var V=Q;var X=E();if(X!==D){V=[];var a=Q;var C=wa();var Y=hb();if(Y!==D){var ca=wa();var ia=E();ia!==D?a=C=[C,Y,ca,ia]:(Q=a,a=D)}else Q=a,a=D;for(;a!==D;)V.push(a),a=Q,C=wa(),Y=hb(),Y!==D?(ca=wa(),ia=E(),ia!==D?a=C=[C,Y,ca,ia]:(Q=a,a=D)):(Q=a,a=D);a={type:"expr_list"};
X=[X];for(C=0;C<V.length;C++)X.push(V[C][3]);a.value=X;V=a}else Q=V,V=D;return V}function E(){var V=Q;var X=x();if(X!==D){V=[];var a=Q;var C=wa();var Y=ha();if(Y!==D){var ca=wa();var ia=x();ia!==D?a=C=[C,Y,ca,ia]:(Q=a,a=D)}else Q=a,a=D;for(;a!==D;)V.push(a),a=Q,C=wa(),Y=ha(),Y!==D?(ca=wa(),ia=x(),ia!==D?a=C=[C,Y,ca,ia]:(Q=a,a=D)):(Q=a,a=D);V=sb(X,V)}else Q=V,V=D;return V}function x(){var V=Q;var X=A();if(X!==D){V=[];var a=Q;var C=wa();var Y=ba();if(Y!==D){var ca=wa();var ia=A();ia!==D?a=C=[C,Y,ca,
ia]:(Q=a,a=D)}else Q=a,a=D;for(;a!==D;)V.push(a),a=Q,C=wa(),Y=ba(),Y!==D?(ca=wa(),ia=A(),ia!==D?a=C=[C,Y,ca,ia]:(Q=a,a=D)):(Q=a,a=D);V=sb(X,V)}else Q=V,V=D;return V}function A(){var V=Q;var X=aa();if(X===D){X=Q;if(33===L.charCodeAt(Q)){var a=Ub;Q++}else a=D,0===ua&&q(dc);if(a!==D){var C=Q;ua++;if(61===L.charCodeAt(Q)){var Y=bb;Q++}else Y=D,0===ua&&q(kd);ua--;Y===D?C=void 0:(Q=C,C=D);C!==D?X=a=[a,C]:(Q=X,X=D)}else Q=X,X=D}X!==D?(a=wa(),C=A(),C!==D?V={type:"unary_expr",operator:"NOT",expr:C}:(Q=V,V=
D)):(Q=V,V=D);if(V===D){X=Q;V=w();if(V!==D){wa();X=[];a=Q;C=wa();Y=r();if(Y!==D){var ca=wa();var ia=w();ia!==D?a=C=[C,Y,ca,ia]:(Q=a,a=D)}else Q=a,a=D;if(a!==D)for(;a!==D;)X.push(a),a=Q,C=wa(),Y=r(),Y!==D?(ca=wa(),ia=w(),ia!==D?a=C=[C,Y,ca,ia]:(Q=a,a=D)):(Q=a,a=D);else X=D;X!==D&&(X={type:"arithmetic",tail:X});X===D&&(X=Q,a=H(),a!==D?(wa(),C=Va(),C!==D?(wa(),C=p(),C!==D?(wa(),Y=ab(),Y!==D?X={op:a,right:C}:(Q=X,X=D)):(Q=X,X=D)):(Q=X,X=D)):(Q=X,X=D),X===D&&(X=Q,a=H(),a!==D?(wa(),C=Va(),C!==D?(wa(),C=
ab(),C!==D?X={op:a,right:{type:"expr_list",value:[]}}:(Q=X,X=D)):(Q=X,X=D)):(Q=X,X=D),X===D&&(X=Q,a=H(),a!==D?(wa(),C=f(),C!==D?X={op:a,right:C}:(Q=X,X=D)):(Q=X,X=D))),X===D&&(X=Q,Y=aa(),Y!==D?(wa(),a=ka(),a!==D?(wa(),C=w(),C!==D?(wa(),ca=ba(),ca!==D?(wa(),Y=w(),Y!==D?X={op:"NOT"+a,right:{type:"expr_list",value:[C,Y]}}:(Q=X,X=D)):(Q=X,X=D)):(Q=X,X=D)):(Q=X,X=D)):(Q=X,X=D),X===D&&(X=Q,Y=ka(),Y!==D?(wa(),a=w(),a!==D?(wa(),C=ba(),C!==D?(wa(),ca=w(),ca!==D?X={op:Y,right:{type:"expr_list",value:[a,ca]}}:
(Q=X,X=D)):(Q=X,X=D)):(Q=X,X=D)):(Q=X,X=D)),X===D&&(X=Q,a=la(),a!==D?(wa(),C=aa(),C!==D?(wa(),C=w(),C!==D?X={op:a+"NOT",right:C}:(Q=X,X=D)):(Q=X,X=D)):(Q=X,X=D),X===D&&(X=Q,a=la(),a!==D?(wa(),C=w(),C!==D?X={op:a,right:C}:(Q=X,X=D)):(Q=X,X=D)),X===D&&(X=Q,a=G(),a!==D?(wa(),C=N(),C!==D?(wa(),Y=Q,L.substr(Q,6).toLowerCase()===Tb?(ca=L.substr(Q,6),Q+=6):(ca=D,0===ua&&q(ce)),ca!==D?(ca=Q,ua++,ia=l(),ua--,ia===D?ca=void 0:(Q=ca,ca=D),ca!==D?Y="ESCAPE":(Q=Y,Y=D)):(Q=Y,Y=D),Y!==D?(wa(),Y=R(),Y!==D?X={op:a,
right:C,escape:Y.value}:(Q=X,X=D)):(Q=X,X=D)):(Q=X,X=D)):(Q=X,X=D),X===D&&(X=Q,a=G(),a!==D?(wa(),C=N(),C!==D?X={op:a,right:C,escape:""}:(Q=X,X=D)):(Q=X,X=D))))));X===D&&(X=null);""==X||void 0==X||null==X?X=V:(a=null,X=a="arithmetic"==X.type?sb(V,X.tail):fb(X.op,V,X.right,X.escape))}else Q=X,X=D;V=X}return V}function r(){if(L.substr(Q,2)===Qb){var V=Qb;Q+=2}else V=D,0===ua&&q(ec);V===D&&(62===L.charCodeAt(Q)?(V=Jb,Q++):(V=D,0===ua&&q(zb)),V===D&&(L.substr(Q,2)===Cb?(V=Cb,Q+=2):(V=D,0===ua&&q(xc)),
V===D&&(L.substr(Q,2)===Db?(V=Db,Q+=2):(V=D,0===ua&&q(ib)),V===D&&(60===L.charCodeAt(Q)?(V=Z,Q++):(V=D,0===ua&&q(Pd)),V===D&&(61===L.charCodeAt(Q)?(V=bb,Q++):(V=D,0===ua&&q(kd)),V===D&&(L.substr(Q,2)===ja?(V=ja,Q+=2):(V=D,0===ua&&q(ld))))))));return V}function G(){var V=V=Q;var X=aa();if(X!==D){var a=wa();var C=ma();C!==D?V=X=[X,a,C]:(Q=V,V=D)}else Q=V,V=D;V!==D&&(V=V[0]+" "+V[2]);V===D&&(V=ma());return V}function H(){var V=V=Q;var X=aa();if(X!==D){var a=wa();var C=fa();C!==D?V=X=[X,a,C]:(Q=V,V=D)}else Q=
V,V=D;V!==D&&(V=V[0]+" "+V[2]);V===D&&(V=fa());return V}function w(){var V=Q;var X=z();if(X!==D){V=[];var a=Q;var C=wa();var Y=e();if(Y!==D){var ca=wa();var ia=z();ia!==D?a=C=[C,Y,ca,ia]:(Q=a,a=D)}else Q=a,a=D;for(;a!==D;)V.push(a),a=Q,C=wa(),Y=e(),Y!==D?(ca=wa(),ia=z(),ia!==D?a=C=[C,Y,ca,ia]:(Q=a,a=D)):(Q=a,a=D);V=sb(X,V)}else Q=V,V=D;return V}function e(){if(43===L.charCodeAt(Q)){var V=sa;Q++}else V=D,0===ua&&q(fc);V===D&&(45===L.charCodeAt(Q)?(V=Ga,Q++):(V=D,0===ua&&q(gc)));return V}function z(){var V=
Q;var X=J();if(X!==D){V=[];var a=Q;var C=wa();var Y=S();if(Y!==D){var ca=wa();var ia=J();ia!==D?a=C=[C,Y,ca,ia]:(Q=a,a=D)}else Q=a,a=D;for(;a!==D;)V.push(a),a=Q,C=wa(),Y=S(),Y!==D?(ca=wa(),ia=J(),ia!==D?a=C=[C,Y,ca,ia]:(Q=a,a=D)):(Q=a,a=D);V=sb(X,V)}else Q=V,V=D;return V}function S(){if(42===L.charCodeAt(Q)){var V=Ha;Q++}else V=D,0===ua&&q(md);V===D&&(47===L.charCodeAt(Q)?(V=Pa,Q++):(V=D,0===ua&&q(nd)));return V}function J(){var V=R();if(V===D){var X=Q;var a=Q;var C=qa();if(C!==D){var Y=va();if(Y!==
D){var ca=Ca();ca!==D?a=parseFloat(C+Y+ca):(Q=a,a=D)}else Q=a,a=D}else Q=a,a=D;a===D&&(a=Q,C=qa(),C!==D?(Y=va(),Y!==D?a=parseFloat(C+Y):(Q=a,a=D)):(Q=a,a=D),a===D&&(a=Q,C=qa(),C!==D?(Y=Ca(),Y!==D?a=parseFloat(C+Y):(Q=a,a=D)):(Q=a,a=D),a===D&&(a=Q,C=qa(),C!==D&&(C=parseFloat(C)),a=C)));var ia=a;if(ia!==D){var na=Q;ua++;var xa=t();ua--;xa===D?na=void 0:(Q=na,na=D);na!==D?X={type:"number",value:ia}:(Q=X,X=D)}else Q=X,X=D;V=X;if(V===D){var Ea=Q;var Ia=Q;if(L.substr(Q,4).toLowerCase()===Eb){var Qa=L.substr(Q,
4);Q+=4}else Qa=D,0===ua&&q(rd);if(Qa!==D){var La=Q;ua++;var Ra=l();ua--;Ra===D?La=void 0:(Q=La,La=D);La!==D?Ia=Qa=[Qa,La]:(Q=Ia,Ia=D)}else Q=Ia,Ia=D;var Oa=Ia;Oa!==D&&(Oa={type:"bool",value:!0});Ea=Oa;if(Ea===D){Ea=Q;var gb=Q;if(L.substr(Q,5).toLowerCase()===tb){var wb=L.substr(Q,5);Q+=5}else wb=D,0===ua&&q(zc);if(wb!==D){var vb=Q;ua++;var Td=l();ua--;Td===D?vb=void 0:(Q=vb,vb=D);vb!==D?gb=wb=[wb,vb]:(Q=gb,gb=D)}else Q=gb,gb=D;Oa=gb;Oa!==D&&(Oa={type:"bool",value:!1});Ea=Oa}V=Ea;if(V===D){var hc=
Q;if(L.substr(Q,4).toLowerCase()===Wb){var ud=L.substr(Q,4);Q+=4}else ud=D,0===ua&&q(yc);if(ud!==D){var Cc=Q;ua++;var bf=l();ua--;bf===D?Cc=void 0:(Q=Cc,Cc=D);Cc!==D?hc=ud=[ud,Cc]:(Q=hc,hc=D)}else Q=hc,hc=D;var ye=hc;ye!==D&&(ye={type:"null",value:null});V=ye;if(V===D){var ic=Q;var jc=Q;if(L.substr(Q,4).toLowerCase()===Xc){var Ke=L.substr(Q,4);Q+=4}else Ke=D,0===ua&&q(ne);if(Ke!==D){var vd=Q;ua++;var cf=l();ua--;cf===D?vd=void 0:(Q=vd,vd=D);vd!==D?jc="DATE":(Q=jc,jc=D)}else Q=jc,jc=D;if(jc!==D){wa();
var Le=N();Le!==D?ic={type:"date",value:Le.value}:(Q=ic,ic=D)}else Q=ic,ic=D;V=ic;if(V===D){var kc=Q;var lc=Q;if(L.substr(Q,9).toLowerCase()===Wc){var Me=L.substr(Q,9);Q+=9}else Me=D,0===ua&&q(me);if(Me!==D){var wd=Q;ua++;var df=l();ua--;df===D?wd=void 0:(Q=wd,wd=D);wd!==D?lc="TIMESTAMP":(Q=lc,lc=D)}else Q=lc,lc=D;if(lc!==D){wa();var Ne=N();Ne!==D?kc={type:"timestamp",value:Ne.value}:(Q=kc,kc=D)}else Q=kc,kc=D;V=kc;if(V===D){var db=Q;var ze=ra();if(ze!==D){wa();if(45===L.charCodeAt(Q)){var Lb=Ga;
Q++}else Lb=D,0===ua&&q(gc);Lb===D&&(43===L.charCodeAt(Q)?(Lb=sa,Q++):(Lb=D,0===ua&&q(fc)));if(Lb!==D){wa();var Dc=N();if(Dc!==D){wa();var Oe=P();Oe!==D?db={type:"interval",value:Dc,qualifier:Oe,op:Lb}:(Q=db,db=D)}else Q=db,db=D}else Q=db,db=D}else Q=db,db=D;db===D&&(db=Q,ze=ra(),ze!==D?(wa(),Lb=N(),Lb!==D?(wa(),Dc=P(),Dc!==D?db={type:"interval",value:Lb,qualifier:Dc,op:""}:(Q=db,db=D)):(Q=db,db=D)):(Q=db,db=D));V=db}}}}}}var Ua=V;if(Ua===D){var nb=Q;var mc=Q;if(L.substr(Q,7).toLowerCase()===Tc){var Pe=
L.substr(Q,7);Q+=7}else Pe=D,0===ua&&q(je);if(Pe!==D){var xd=Q;ua++;var ef=l();ua--;ef===D?xd=void 0:(Q=xd,xd=D);xd!==D?mc="EXTRACT":(Q=mc,mc=D)}else Q=mc,mc=D;if(mc!==D){wa();var ff=Va();if(ff!==D){wa();var xb=Aa();xb===D&&(xb=Fa(),xb===D&&(xb=ya(),xb===D&&(xb=Da(),xb===D&&(xb=za(),xb===D&&(xb=Ja())))));var Qe=xb;if(Qe!==D){wa();var gf=pa();if(gf!==D){wa();var Re=E();if(Re!==D){wa();var hf=ab();hf!==D?nb={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:Qe},Re]}}:
(Q=nb,nb=D)}else Q=nb,nb=D}else Q=nb,nb=D}else Q=nb,nb=D}else Q=nb,nb=D}else Q=nb,nb=D;Ua=nb;if(Ua===D){var ob=Q;var nc=Q;if(L.substr(Q,9).toLowerCase()===Sc){var Se=L.substr(Q,9);Q+=9}else Se=D,0===ua&&q(ie);if(Se!==D){var yd=Q;ua++;var jf=l();ua--;jf===D?yd=void 0:(Q=yd,yd=D);yd!==D?nc="SUBSTRING":(Q=nc,nc=D)}else Q=nc,nc=D;if(nc!==D){wa();var kf=Va();if(kf!==D){wa();var Ae=E();if(Ae!==D){wa();var lf=pa();if(lf!==D){wa();var Be=E();if(Be!==D){wa();var Mb=Q;var oc=Q;if(L.substr(Q,3).toLowerCase()===
Xd){var Te=L.substr(Q,3);Q+=3}else Te=D,0===ua&&q(he);if(Te!==D){var zd=Q;ua++;var mf=l();ua--;mf===D?zd=void 0:(Q=zd,zd=D);zd!==D?oc="FOR":(Q=oc,oc=D)}else Q=oc,oc=D;var Ec=oc;if(Ec!==D){var nf=wa();var Ue=E();if(Ue!==D){var of=wa();Mb=Ec=[Ec,nf,Ue,of]}else Q=Mb,Mb=D}else Q=Mb,Mb=D;Mb===D&&(Mb=null);Ec=ab();Ec!==D?ob={type:"function",name:"substring",args:{type:"expr_list",value:Mb?[Ae,Be,Mb[2]]:[Ae,Be]}}:(Q=ob,ob=D)}else Q=ob,ob=D}else Q=ob,ob=D}else Q=ob,ob=D}else Q=ob,ob=D}else Q=ob,ob=D;Ua=ob;
if(Ua===D){var Wa=Q;var Ce=oa();if(Ce!==D){wa();var De=Va();if(De!==D){wa();var Nb=n();Nb===D&&(Nb=null);wa();var Fc=E();if(Fc!==D){wa();var Ee=pa();if(Ee!==D){wa();var Ve=E();if(Ve!==D){wa();var pf=ab();pf!==D?Wa={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==Nb?"BOTH":Nb},Fc,Ve]}}:(Q=Wa,Wa=D)}else Q=Wa,Wa=D}else Q=Wa,Wa=D}else Q=Wa,Wa=D}else Q=Wa,Wa=D}else Q=Wa,Wa=D;Wa===D&&(Wa=Q,Ce=oa(),Ce!==D?(wa(),De=Va(),De!==D?(wa(),Nb=n(),Nb===D&&(Nb=null),wa(),Fc=E(),
Fc!==D?(wa(),Ee=ab(),Ee!==D?Wa={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==Nb?"BOTH":Nb},Fc]}}:(Q=Wa,Wa=D)):(Q=Wa,Wa=D)):(Q=Wa,Wa=D)):(Q=Wa,Wa=D));Ua=Wa;if(Ua===D){var pb=Q;var pc=Q;if(L.substr(Q,8).toLowerCase()===Vc){var We=L.substr(Q,8);Q+=8}else We=D,0===ua&&q(le);if(We!==D){var Ad=Q;ua++;var qf=l();ua--;qf===D?Ad=void 0:(Q=Ad,Ad=D);Ad!==D?pc="POSITION":(Q=pc,pc=D)}else Q=pc,pc=D;if(pc!==D){wa();var rf=Va();if(rf!==D){wa();var Xe=E();if(Xe!==D){wa();var sf=
fa();if(sf!==D){wa();var Ye=E();if(Ye!==D){wa();var tf=ab();tf!==D?pb={type:"function",name:"position",args:{type:"expr_list",value:[Xe,Ye]}}:(Q=pb,pb=D)}else Q=pb,pb=D}else Q=pb,pb=D}else Q=pb,pb=D}else Q=pb,pb=D}else Q=pb,pb=D;Ua=pb;if(Ua===D){var Rb=Q;var Bd;var yb=Q;yb=Bd=O();if(yb===D)if(yb=Q,96===L.charCodeAt(Q)?(Bd=uc,Q++):(Bd=D,0===ua&&q($b)),Bd!==D){var Cd=[];if(wc.test(L.charAt(Q))){var Ob=L.charAt(Q);Q++}else Ob=D,0===ua&&q(Pc);if(Ob!==D)for(;Ob!==D;)Cd.push(Ob),wc.test(L.charAt(Q))?(Ob=
L.charAt(Q),Q++):(Ob=D,0===ua&&q(Pc));else Cd=D;Cd!==D?(96===L.charCodeAt(Q)?(Ob=uc,Q++):(Ob=D,0===ua&&q($b)),Ob!==D?yb=Cd.join(""):(Q=yb,yb=D)):(Q=yb,yb=D)}else Q=yb,yb=D;var Ze=yb;if(Ze!==D){wa();var uf=Va();if(uf!==D){wa();var Dd=p();Dd===D&&(Dd=null);wa();var vf=ab();vf!==D?Rb={type:"function",name:Ze,args:Dd?Dd:{type:"expr_list",value:[]}}:(Q=Rb,Rb=D)}else Q=Rb,Rb=D}else Q=Rb,Rb=D;Ua=Rb;if(Ua===D){var Gb;var eb=Q;var Fe=Ka();if(Fe!==D){wa();var Gc=E();if(Gc!==D){wa();var Hc=[];for(Gb=ea();Gb!==
D;)Hc.push(Gb),Gb=ea();Gb=wa();var Ed=Ma();Ed!==D?eb={type:"case_expression",format:"simple",operand:Gc,clauses:Hc,else:null}:(Q=eb,eb=D)}else Q=eb,eb=D}else Q=eb,eb=D;if(eb===D)if(eb=Q,Fe=Ka(),Fe!==D)if(wa(),Gc=E(),Gc!==D){wa();Hc=[];for(Gb=ea();Gb!==D;)Hc.push(Gb),Gb=ea();Gb=wa();Ed=da();if(Ed!==D){wa();var wf=Ma();wf!==D?eb={type:"case_expression",format:"simple",operand:Gc,clauses:Hc,else:Ed.value}:(Q=eb,eb=D)}else Q=eb,eb=D}else Q=eb,eb=D;else Q=eb,eb=D;var Ge=eb;if(Ge===D){var Hb;var lb=Q;var He=
Ka();if(He!==D){wa();var Ic=[];for(Hb=W();Hb!==D;)Ic.push(Hb),Hb=W();Hb=wa();var Fd=Ma();Fd!==D?lb={type:"case_expression",format:"searched",clauses:Ic,else:null}:(Q=lb,lb=D)}else Q=lb,lb=D;if(lb===D)if(lb=Q,He=Ka(),He!==D){wa();Ic=[];for(Hb=W();Hb!==D;)Ic.push(Hb),Hb=W();Hb=wa();Fd=da();if(Fd!==D){wa();var xf=Ma();xf!==D?lb={type:"case_expression",format:"searched",clauses:Ic,else:Fd.value}:(Q=lb,lb=D)}else Q=lb,lb=D}else Q=lb,lb=D;Ge=lb}Ua=Ge;if(Ua===D){var Gd;var Hd=Q;var $e=t();if($e!==D){var af=
[];for(Gd=b();Gd!==D;)af.push(Gd),Gd=b();Hd=$e+af.join("")}else Q=Hd,Hd=D;var Id=Hd;if(Id!==D){var Ie=Id;Id=/^CURRENT_DATE$/i.test(Ie)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Ie)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",column:Ie}}Ua=Id;if(Ua===D&&(Ua=f(),Ua===D)){Ua=Q;var yf=Va();if(yf!==D){wa();var Je=E();if(Je!==D){wa();var zf=ab();zf!==D?(Je.paren=!0,Ua=Je):(Q=Ua,Ua=D)}else Q=Ua,Ua=D}else Q=Ua,Ua=D}}}}}}}}return Ua}function O(){var V;var X=Q;var a=
t();if(a!==D){X=[];for(V=l();V!==D;)X.push(V),V=l();X=a+X.join("")}else Q=X,X=D;return X}function t(){if(Od.test(L.charAt(Q))){var V=L.charAt(Q);Q++}else V=D,0===ua&&q(od);return V}function l(){if(Nd.test(L.charAt(Q))){var V=L.charAt(Q);Q++}else V=D,0===ua&&q($a);return V}function b(){if(Md.test(L.charAt(Q))){var V=L.charAt(Q);Q++}else V=D,0===ua&&q(Mc);return V}function f(){var V=Q;if(64===L.charCodeAt(Q)){var X=Ta;Q++}else X=D,0===ua&&q(qc);if(X!==D){var a=O();a!==D?V=X=[X,a]:(Q=V,V=D)}else Q=V,
V=D;V!==D&&(V={type:"param",value:V[1]});return V}function n(){var V=Q;if(L.substr(Q,7).toLowerCase()===Yc){var X=L.substr(Q,7);Q+=7}else X=D,0===ua&&q(oe);if(X!==D){X=Q;ua++;var a=l();ua--;a===D?X=void 0:(Q=X,X=D);X!==D?V="LEADING":(Q=V,V=D)}else Q=V,V=D;V===D&&(V=Q,L.substr(Q,8).toLowerCase()===Zc?(X=L.substr(Q,8),Q+=8):(X=D,0===ua&&q(pe)),X!==D?(X=Q,ua++,a=l(),ua--,a===D?X=void 0:(Q=X,X=D),X!==D?V="TRAILING":(Q=V,V=D)):(Q=V,V=D),V===D&&(V=Q,L.substr(Q,4).toLowerCase()===$c?(X=L.substr(Q,4),Q+=
4):(X=D,0===ua&&q(qe)),X!==D?(X=Q,ua++,a=l(),ua--,a===D?X=void 0:(Q=X,X=D),X!==D?V="BOTH":(Q=V,V=D)):(Q=V,V=D)));return V}function P(){var V=Q;var X=Q;var a=U();if(a!==D){wa();var C=Va();if(C!==D)if(wa(),C=v(),C!==D){wa();var Y=ab();Y!==D?X={type:"interval-period",period:a.value,precision:C,secondary:null}:(Q=X,X=D)}else Q=X,X=D;else Q=X,X=D}else Q=X,X=D;X===D&&(X=Q,a=U(),a!==D&&(a=ac(a)),X=a);if(X!==D)if(wa(),a=Q,L.substr(Q,2).toLowerCase()===ad?(C=L.substr(Q,2),Q+=2):(C=D,0===ua&&q(re)),C!==D?(C=
Q,ua++,Y=l(),ua--,Y===D?C=void 0:(Q=C,C=D),C!==D?a="TO":(Q=a,a=D)):(Q=a,a=D),a!==D){wa();a=Q;C=U();C!==D&&(C={type:"interval-period",period:C.value,precision:null,secondary:null});a=C;if(a===D){a=Q;C=Ja();if(C!==D)if(wa(),C=Va(),C!==D)if(wa(),C=v(),C!==D)if(wa(),Y=hb(),Y!==D)if(wa(),Y=T(),Y!==D){wa();var ca=ab();ca!==D?a=bc(C,Y):(Q=a,a=D)}else Q=a,a=D;else Q=a,a=D;else Q=a,a=D;else Q=a,a=D;else Q=a,a=D;a===D&&(a=Q,C=Ja(),C!==D?(wa(),C=Va(),C!==D?(wa(),C=v(),C!==D?(wa(),Y=ab(),Y!==D?a={type:"interval-period",
period:"second",precision:C,secondary:null}:(Q=a,a=D)):(Q=a,a=D)):(Q=a,a=D)):(Q=a,a=D),a===D&&(a=Q,C=Ja(),C!==D&&(C={type:"interval-period",period:"second",precision:null,secondary:null}),a=C))}a!==D?V={type:"interval-qualifier",start:X,end:a}:(Q=V,V=D)}else Q=V,V=D;else Q=V,V=D;V===D&&(V=Q,a=U(),a!==D?(wa(),X=Va(),X!==D?(wa(),X=T(),X!==D?(wa(),C=ab(),C!==D?V={type:"interval-period",period:a.value,precision:X,secondary:null}:(Q=V,V=D)):(Q=V,V=D)):(Q=V,V=D)):(Q=V,V=D),V===D&&(V=Q,a=U(),a!==D&&(a=ac(a)),
V=a,V===D&&(V=Q,a=Ja(),a!==D?(wa(),X=Va(),X!==D?(wa(),X=v(),X!==D?(wa(),C=hb(),C!==D?(wa(),a=T(),a!==D?(wa(),C=ab(),C!==D?V=bc(X,a):(Q=V,V=D)):(Q=V,V=D)):(Q=V,V=D)):(Q=V,V=D)):(Q=V,V=D)):(Q=V,V=D),V===D&&(V=Q,a=Ja(),a!==D?(wa(),X=Va(),X!==D?(wa(),X=T(),X!==D?(wa(),C=ab(),C!==D?V={type:"interval-period",period:"second",precision:X,secondary:null}:(Q=V,V=D)):(Q=V,V=D)):(Q=V,V=D)):(Q=V,V=D),V===D&&(V=Q,a=Ja(),a!==D&&(a={type:"interval-period",period:"second",precision:null,secondary:null}),V=a)))));
return V}function U(){var V=Q;V=ya();V!==D&&(V={type:"string",value:"day"});V===D&&(V=Q,V=Da(),V!==D&&(V={type:"string",value:"hour"}),V===D&&(V=Q,V=za(),V!==D&&(V={type:"string",value:"minute"}),V===D&&(V=Q,V=Fa(),V!==D&&(V={type:"string",value:"month"}),V===D&&(V=Q,V=Aa(),V!==D&&(V={type:"string",value:"year"})))));return V}function T(){var V=Ba();V!==D&&(V=parseFloat(V));return V}function v(){var V=Ba();V!==D&&(V=parseFloat(V));return V}function N(){var V=R();V===D&&(V=f());return V}function R(){var V=
Q;if(39===L.charCodeAt(Q)){var X=cb;Q++}else X=D,0===ua&&q(Zb);X===D&&(L.substr(Q,2)===Za?(X=Za,Q+=2):(X=D,0===ua&&q(rc)));if(X!==D){X=[];var a=Q;L.substr(Q,2)===jb?(a=jb,Q+=2):(a=D,0===ua&&q(Xb));a!==D&&(a="'");a===D&&(jd.test(L.charAt(Q))?(a=L.charAt(Q),Q++):(a=D,0===ua&&q(pd)));for(;a!==D;)X.push(a),a=Q,L.substr(Q,2)===jb?(a=jb,Q+=2):(a=D,0===ua&&q(Xb)),a!==D&&(a="'"),a===D&&(jd.test(L.charAt(Q))?(a=L.charAt(Q),Q++):(a=D,0===ua&&q(pd)));39===L.charCodeAt(Q)?(a=cb,Q++):(a=D,0===ua&&q(Zb));a!==D?
V={type:"string",value:X.join("")}:(Q=V,V=D)}else Q=V,V=D;return V}function W(){var V=Q;if(Na()!==D){wa();var X=E();if(X!==D){wa();var a=qb();a!==D?(wa(),a=E(),a!==D?V={type:"when_clause",operand:X,value:a}:(Q=V,V=D)):(Q=V,V=D)}else Q=V,V=D}else Q=V,V=D;return V}function ea(){var V=Q;if(Na()!==D){wa();var X=E();if(X!==D){wa();var a=qb();a!==D?(wa(),a=E(),a!==D?V={type:"when_clause",operand:X,value:a}:(Q=V,V=D)):(Q=V,V=D)}else Q=V,V=D}else Q=V,V=D;return V}function da(){var V=Q;var X=Q;if(L.substr(Q,
4).toLowerCase()===Jd){var a=L.substr(Q,4);Q+=4}else a=D,0===ua&&q(Yb);if(a!==D){a=Q;ua++;var C=l();ua--;C===D?a=void 0:(Q=a,a=D);a!==D?X="ELSE":(Q=X,X=D)}else Q=X,X=D;X!==D?(wa(),X=E(),X!==D?V={type:"else_clause",value:X}:(Q=V,V=D)):(Q=V,V=D);return V}function qa(){var V=Ba();if(V===D){V=Q;if(45===L.charCodeAt(Q)){var X=Ga;Q++}else X=D,0===ua&&q(gc);X===D&&(43===L.charCodeAt(Q)?(X=sa,Q++):(X=D,0===ua&&q(fc)));if(X!==D){var a=Ba();a!==D?V=X[0]+a:(Q=V,V=D)}else Q=V,V=D}return V}function va(){var V=
Q;if(46===L.charCodeAt(Q)){var X=cc;Q++}else X=D,0===ua&&q(Zd);X!==D?(V=Ba(),V===D&&(V=null),V="."+(null!=V?V:"")):(Q=V,V=D);return V}function Ca(){var V;var X=V=Q;if(rb.test(L.charAt(Q))){var a=L.charAt(Q);Q++}else a=D,0===ua&&q(Xa);a!==D?(Sb.test(L.charAt(Q))?(X=L.charAt(Q),Q++):(X=D,0===ua&&q(qd)),X===D&&(X=null),X="e"+(null===X?"":X)):(Q=X,X=D);X!==D?(a=Ba(),a!==D?V=X+a:(Q=V,V=D)):(Q=V,V=D);return V}function Ba(){var V=[];var X=ta();if(X!==D)for(;X!==D;)V.push(X),X=ta();else V=D;V!==D&&(V=V.join(""));
return V}function ta(){if(kb.test(L.charAt(Q))){var V=L.charAt(Q);Q++}else V=D,0===ua&&q($d);return V}function fa(){var V=Q;if(L.substr(Q,2).toLowerCase()===Ud){var X=L.substr(Q,2);Q+=2}else X=D,0===ua&&q(ae);if(X!==D){X=Q;ua++;var a=l();ua--;a===D?X=void 0:(Q=X,X=D);X!==D?V="IN":(Q=V,V=D)}else Q=V,V=D;return V}function la(){var V=Q;if(L.substr(Q,2).toLowerCase()===Vd){var X=L.substr(Q,2);Q+=2}else X=D,0===ua&&q(be);if(X!==D){X=Q;ua++;var a=l();ua--;a===D?X=void 0:(Q=X,X=D);X!==D?V="IS":(Q=V,V=D)}else Q=
V,V=D;return V}function ma(){var V=Q;if(L.substr(Q,4).toLowerCase()===Wd){var X=L.substr(Q,4);Q+=4}else X=D,0===ua&&q(sd);if(X!==D){X=Q;ua++;var a=l();ua--;a===D?X=void 0:(Q=X,X=D);X!==D?V="LIKE":(Q=V,V=D)}else Q=V,V=D;return V}function aa(){var V=Q;if(L.substr(Q,3).toLowerCase()===Qc){var X=L.substr(Q,3);Q+=3}else X=D,0===ua&&q(de);if(X!==D){X=Q;ua++;var a=l();ua--;a===D?X=void 0:(Q=X,X=D);X!==D?V="NOT":(Q=V,V=D)}else Q=V,V=D;return V}function ba(){var V=Q;if(L.substr(Q,3).toLowerCase()===mb){var X=
L.substr(Q,3);Q+=3}else X=D,0===ua&&q(ee);if(X!==D){X=Q;ua++;var a=l();ua--;a===D?X=void 0:(Q=X,X=D);X!==D?V="AND":(Q=V,V=D)}else Q=V,V=D;return V}function ha(){var V=Q;if(L.substr(Q,2).toLowerCase()===Fb){var X=L.substr(Q,2);Q+=2}else X=D,0===ua&&q(Qd);if(X!==D){X=Q;ua++;var a=l();ua--;a===D?X=void 0:(Q=X,X=D);X!==D?V="OR":(Q=V,V=D)}else Q=V,V=D;return V}function ka(){var V=Q;if(L.substr(Q,7).toLowerCase()===tc){var X=L.substr(Q,7);Q+=7}else X=D,0===ua&&q(fe);if(X!==D){X=Q;ua++;var a=l();ua--;a===
D?X=void 0:(Q=X,X=D);X!==D?V="BETWEEN":(Q=V,V=D)}else Q=V,V=D;return V}function pa(){var V=Q;if(L.substr(Q,4).toLowerCase()===Rc){var X=L.substr(Q,4);Q+=4}else X=D,0===ua&&q(ge);if(X!==D){X=Q;ua++;var a=l();ua--;a===D?X=void 0:(Q=X,X=D);X!==D?V="FROM":(Q=V,V=D)}else Q=V,V=D;return V}function oa(){var V=Q;if(L.substr(Q,4).toLowerCase()===Uc){var X=L.substr(Q,4);Q+=4}else X=D,0===ua&&q(ke);if(X!==D){X=Q;ua++;var a=l();ua--;a===D?X=void 0:(Q=X,X=D);X!==D?V="TRIM":(Q=V,V=D)}else Q=V,V=D;return V}function ra(){var V=
Q;if(L.substr(Q,8).toLowerCase()===bd){var X=L.substr(Q,8);Q+=8}else X=D,0===ua&&q(se);if(X!==D){X=Q;ua++;var a=l();ua--;a===D?X=void 0:(Q=X,X=D);X!==D?V="INTERVAL":(Q=V,V=D)}else Q=V,V=D;return V}function Aa(){var V=Q;if(L.substr(Q,4).toLowerCase()===cd){var X=L.substr(Q,4);Q+=4}else X=D,0===ua&&q(te);if(X!==D){X=Q;ua++;var a=l();ua--;a===D?X=void 0:(Q=X,X=D);X!==D?V="YEAR":(Q=V,V=D)}else Q=V,V=D;return V}function Fa(){var V=Q;if(L.substr(Q,5).toLowerCase()===dd){var X=L.substr(Q,5);Q+=5}else X=
D,0===ua&&q(ue);if(X!==D){X=Q;ua++;var a=l();ua--;a===D?X=void 0:(Q=X,X=D);X!==D?V="MONTH":(Q=V,V=D)}else Q=V,V=D;return V}function ya(){var V=Q;if(L.substr(Q,3).toLowerCase()===ed){var X=L.substr(Q,3);Q+=3}else X=D,0===ua&&q(ve);if(X!==D){X=Q;ua++;var a=l();ua--;a===D?X=void 0:(Q=X,X=D);X!==D?V="DAY":(Q=V,V=D)}else Q=V,V=D;return V}function Da(){var V=Q;if(L.substr(Q,4).toLowerCase()===Yd){var X=L.substr(Q,4);Q+=4}else X=D,0===ua&&q(td);if(X!==D){X=Q;ua++;var a=l();ua--;a===D?X=void 0:(Q=X,X=D);
X!==D?V="HOUR":(Q=V,V=D)}else Q=V,V=D;return V}function za(){var V=Q;if(L.substr(Q,6).toLowerCase()===fd){var X=L.substr(Q,6);Q+=6}else X=D,0===ua&&q(we);if(X!==D){X=Q;ua++;var a=l();ua--;a===D?X=void 0:(Q=X,X=D);X!==D?V="MINUTE":(Q=V,V=D)}else Q=V,V=D;return V}function Ja(){var V=Q;if(L.substr(Q,6).toLowerCase()===gd){var X=L.substr(Q,6);Q+=6}else X=D,0===ua&&q(xe);if(X!==D){X=Q;ua++;var a=l();ua--;a===D?X=void 0:(Q=X,X=D);X!==D?V="SECOND":(Q=V,V=D)}else Q=V,V=D;return V}function Ka(){var V=Q;if(L.substr(Q,
4).toLowerCase()===hd){var X=L.substr(Q,4);Q+=4}else X=D,0===ua&&q(Kb);if(X!==D){X=Q;ua++;var a=l();ua--;a===D?X=void 0:(Q=X,X=D);X!==D?V="CASE":(Q=V,V=D)}else Q=V,V=D;return V}function Ma(){var V=Q;if(L.substr(Q,3).toLowerCase()===id){var X=L.substr(Q,3);Q+=3}else X=D,0===ua&&q(Rd);if(X!==D){X=Q;ua++;var a=l();ua--;a===D?X=void 0:(Q=X,X=D);X!==D?V="END":(Q=V,V=D)}else Q=V,V=D;return V}function Na(){var V=Q;if(L.substr(Q,4).toLowerCase()===Kd){var X=L.substr(Q,4);Q+=4}else X=D,0===ua&&q(Sa);if(X!==
D){X=Q;ua++;var a=l();ua--;a===D?X=void 0:(Q=X,X=D);X!==D?V="WHEN":(Q=V,V=D)}else Q=V,V=D;return V}function qb(){var V=Q;if(L.substr(Q,4).toLowerCase()===Jc){var X=L.substr(Q,4);Q+=4}else X=D,0===ua&&q(Ya);if(X!==D){X=Q;ua++;var a=l();ua--;a===D?X=void 0:(Q=X,X=D);X!==D?V="THEN":(Q=V,V=D)}else Q=V,V=D;return V}function hb(){if(44===L.charCodeAt(Q)){var V=Lc;Q++}else V=D,0===ua&&q(sc);return V}function Va(){if(40===L.charCodeAt(Q)){var V=Kc;Q++}else V=D,0===ua&&q(Nc);return V}function ab(){if(41===
L.charCodeAt(Q)){var V=Ld;Q++}else V=D,0===ua&&q(Sd);return V}function wa(){var V;var X=[];for(V=Pb();V!==D;)X.push(V),V=Pb();return X}function Pb(){if(vc.test(L.charAt(Q))){var V=L.charAt(Q);Q++}else V=D,0===ua&&q(Oc);return V}function fb(V,X,a,C){V={type:"binary_expr",operator:V,left:X,right:a};void 0!==C&&(V.escape=C);return V}function sb(V,X){for(var a=0;a<X.length;a++)V=fb(X[a][1],V,X[a][3]);return V}K=void 0!==K?K:{};var D={},Ab=K.grammarSource,Bb={start:I},Ib=I,Ub="!",bb="\x3d",Qb="\x3e\x3d",
Jb="\x3e",Cb="\x3c\x3d",Db="\x3c\x3e",Z="\x3c",ja="!\x3d",sa="+",Ga="-",Ha="*",Pa="/",Ta="@",cb="'",Za="N'",jb="''",cc=".",Wb="null",Eb="true",tb="false",Ud="in",Vd="is",Wd="like",Tb="escape",Qc="not",mb="and",Fb="or",tc="between",Rc="from",Xd="for",Sc="substring",Tc="extract",Uc="trim",Vc="position",Wc="timestamp",Xc="date",Yc="leading",Zc="trailing",$c="both",ad="to",bd="interval",cd="year",dd="month",ed="day",Yd="hour",fd="minute",gd="second",hd="case",id="end",Kd="when",Jc="then",Jd="else",Lc=
",",Kc="(",Ld=")",uc="`",Od=/^[A-Za-z_\x80-\uFFFF]/,Nd=/^[A-Za-z0-9_]/,Md=/^[A-Za-z0-9_.\x80-\uFFFF]/,jd=/^[^']/,kb=/^[0-9]/,rb=/^[eE]/,Sb=/^[+\-]/,vc=/^[ \t\n\r]/,wc=/^[^`]/,dc=M("!",!1),kd=M("\x3d",!1),ec=M("\x3e\x3d",!1),zb=M("\x3e",!1),xc=M("\x3c\x3d",!1),ib=M("\x3c\x3e",!1),Pd=M("\x3c",!1),ld=M("!\x3d",!1),fc=M("+",!1),gc=M("-",!1),md=M("*",!1),nd=M("/",!1),od=y([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),$a=y([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Mc=y([["A","Z"],["a","z"],["0",
"9"],"_",".",["\u0080","\uffff"]],!1,!1),qc=M("@",!1),Zb=M("'",!1),rc=M("N'",!1),Xb=M("''",!1),pd=y(["'"],!0,!1),Zd=M(".",!1),$d=y([["0","9"]],!1,!1),Xa=y(["e","E"],!1,!1),qd=y(["+","-"],!1,!1),yc=M("NULL",!0),rd=M("TRUE",!0),zc=M("FALSE",!0),ae=M("IN",!0),be=M("IS",!0),sd=M("LIKE",!0),ce=M("ESCAPE",!0),de=M("NOT",!0),ee=M("AND",!0),Qd=M("OR",!0),fe=M("BETWEEN",!0),ge=M("FROM",!0),he=M("FOR",!0),ie=M("SUBSTRING",!0),je=M("EXTRACT",!0),ke=M("TRIM",!0),le=M("POSITION",!0),me=M("TIMESTAMP",!0),ne=M("DATE",
!0),oe=M("LEADING",!0),pe=M("TRAILING",!0),qe=M("BOTH",!0),re=M("TO",!0),se=M("INTERVAL",!0),te=M("YEAR",!0),ue=M("MONTH",!0),ve=M("DAY",!0),td=M("HOUR",!0),we=M("MINUTE",!0),xe=M("SECOND",!0),Kb=M("CASE",!0),Rd=M("END",!0),Sa=M("WHEN",!0),Ya=M("THEN",!0),Yb=M("ELSE",!0),sc=M(",",!1),Nc=M("(",!1),Sd=M(")",!1),Oc=y([" ","\t","\n","\r"],!1,!1),$b=M("`",!1),Pc=y(["`"],!0,!1),ac=function(V){return{type:"interval-period",period:V.value,precision:null,secondary:null}},bc=function(V,X){return{type:"interval-period",
period:"second",precision:V,secondary:X}},Q=0,Vb=[{line:1,column:1}],ub=0,Ac=[],ua=0;if("startRule"in K){if(!(K.startRule in Bb))throw Error("Can't start parsing from rule \""+K.startRule+'".');Ib=Bb[K.startRule]}var Bc=Ib();if(Bc!==D&&Q===L.length)return Bc;Bc!==D&&Q<L.length&&q({type:"end"});throw function(V,X,a){return new u(u.buildMessage(V,X),V,X,a)}(Ac,ub<L.length?L.charAt(ub):null,ub<L.length?m(ub,ub+1):m(ub,ub));}}})})(c);let B=function(){function g(){}g.parse=function(u){return c.exports.parse(u)};
return g}();d.WhereGrammar=B;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(d,h,c){function B(r){const G=null!=r.minValue||null!=r.maxValue,H=!!r.sqlExpression&&r.supportsSQLExpression;return!(null!=r.normalizationField||null!=r.normalizationType)&&!G&&!H}function g(r){const {values:G,useSampleStdDev:H,supportsNullCount:w}=r;var e=Number.POSITIVE_INFINITY;
let z=Number.NEGATIVE_INFINITY,S=null,J=null;var O=null;let t=null,l=0;const b=null==r.minValue?-Infinity:r.minValue,f=null==r.maxValue?Infinity:r.maxValue;for(const n of G)Number.isFinite(n)?n>=b&&n<=f&&(S+=n,e=Math.min(e,n),z=Math.max(z,n),l++):"string"===typeof n&&l++;if(l&&null!=S){J=S/l;O=0;for(const n of G)Number.isFinite(n)&&n>=b&&n<=f&&(O+=(n-J)**2);t=H?1<l?O/(l-1):0:0<l?O/l:0;O=Math.sqrt(t)}else z=e=null;e={avg:J,count:l,max:z,min:e,stddev:O,sum:S,variance:t};w&&(e.nullcount=G.length-l);
r.percentileParams&&(e.median=u(G,r.percentileParams));return e}function u(r,G){const {fieldType:H,value:w,orderBy:e,isDiscrete:z}=G,S=F(H,"desc"===e);r=[...r].filter(l=>null!=l).sort((l,b)=>S(l,b));if(0===r.length)return null;if(0>=w)return r[0];if(1<=w)return r[r.length-1];var J=(r.length-1)*w,O=Math.floor(J);G=O+1;J%=1;O=r[O];const t=r[G];return G>=r.length||z||"string"===typeof O||"string"===typeof t?O:O*(1-J)+t*J}function F(r,G){const H=G?1:-1,w=K(G),e=L(G);if(!r||!["esriFieldTypeDate","esriFieldTypeString",
"esriFieldTypeGUID","esriFieldTypeGlobalID",...x].includes(r))return(z,S)=>"number"===typeof z&&"number"===typeof S?w(z,S):"string"===typeof z&&"string"===typeof S?e(z,S):H;if("esriFieldTypeDate"===r)return(z,S)=>{z=(new Date(z)).getTime();S=(new Date(S)).getTime();return isNaN(z)||isNaN(S)?H:w(z,S)};if(x.has(r))return(z,S)=>w(z,S);if("esriFieldTypeString"===r)return(z,S)=>e(z,S);if("esriFieldTypeGUID"===r||"esriFieldTypeGlobalID"===r){const z=L(G);return(S,J)=>z(M(S),M(J))}return G?(z,S)=>1:(z,S)=>
-1}function L(r){return r?(G,H)=>{var w,e;G=null==(w=G)?void 0:w.toUpperCase();H=null==(e=H)?void 0:e.toUpperCase();return G>H?-1:G<H?1:0}:(G,H)=>{var w,e;G=null==(w=G)?void 0:w.toUpperCase();H=null==(e=H)?void 0:e.toUpperCase();return G<H?-1:G>H?1:0}}function K(r){return r?(G,H)=>H-G:(G,H)=>G-H}function M(r){return r.substr(24,12)+r.substr(19,4)+r.substr(16,2)+r.substr(14,2)+r.substr(11,2)+r.substr(9,2)+r.substr(6,2)+r.substr(4,2)+r.substr(2,2)+r.substr(0,2)}function y(r,G){const H=m({field:G.field,
normalizationType:G.normalizationType,normalizationField:G.normalizationField,classificationMethod:G.classificationMethod,standardDeviationInterval:G.standardDeviationInterval,breakCount:G.numClasses||5});r=k(r,G.minValue,G.maxValue);return c.createGenerateRendererClassBreaks({definition:H,values:r,normalizationTotal:G.normalizationTotal})}function k(r,G,H){G=null==G?-Infinity:G;H=null==H?Infinity:H;return r.filter(w=>Number.isFinite(w)&&w>=G&&w<=H)}function m(r){const G=r.field,H=r.classificationMethod||
"equal-interval",w=r.normalizationType,e=r.normalizationField,z=new h;z.classificationField=G;z.breakCount=r.breakCount;z.classificationMethod=H;z.standardDeviationInterval="standard-deviation"===H?r.standardDeviationInterval||1:void 0;z.normalizationType=w;z.normalizationField="field"===w?e:void 0;return z}function q(r,G){const {field:H,classificationMethod:w,standardDeviationInterval:e,normalizationType:z,normalizationField:S,normalizationTotal:J,minValue:O,maxValue:t}=G,l=G.numBins||10;let b=G=
null,f=null;w&&"equal-interval"!==w||z?({classBreaks:r}=y(r,{field:H,normalizationType:z,normalizationField:S,normalizationTotal:J,classificationMethod:w,standardDeviationInterval:e,minValue:O,maxValue:t,numClasses:l}),G=r[0].minValue,b=r[r.length-1].maxValue,f=r.map(n=>[n.minValue,n.maxValue])):(null!=O&&null!=t?(G=O,b=t):(r=g({values:r,minValue:O,maxValue:t,useSampleStdDev:!z,supportsNullCount:B({normalizationType:z,normalizationField:S,minValue:O,maxValue:t})}),G=r.min,b=r.max),f=p(G,b,l));return{min:G,
max:b,intervals:f}}function I(r,G){let H=-1;for(let w=r.length-1;0<=w;w--)if(G>=r[w][0]){H=w;break}return H}function p(r,G,H){const w=(G-r)/H,e=[];let z;for(let S=1;S<=H;S++)z=r+w,z=Number(z.toFixed(16)),e.push([r,S===H?G:z]),r=z;return e}const E=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,x=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),A="min max avg stddev count sum variance nullcount median".split(" ");d.calculateClassBreaks=y;d.calculateHistogram=
function(r,G){const {min:H,max:w,intervals:e}=q(r,G),z=e.map((S,J)=>({minValue:e[J][0],maxValue:e[J][1],count:0}));for(const S of r)null!=S&&S>=H&&S<=w&&(r=I(e,S),-1<r&&z[r].count++);return{bins:z,minValue:H,maxValue:w,normalizationTotal:G.normalizationTotal}};d.calculatePercentile=u;d.calculateStatistics=g;d.calculateStringStatistics=function(r){const G=r.returnDistinct?[...new Set(r.values)]:r.values,H=G.filter(e=>null!=e).length,w={count:H};r.supportsNullCount&&(w.nullcount=G.length-H);r.percentileParams&&
(w.median=u(G,r.percentileParams));return w};d.calculateUniqueValuesCount=function(r){const G={};for(let H of r){if(null==H||"string"===typeof H&&""===H.trim())H=null;null==G[H]?G[H]={count:1,data:H}:G[H].count++}return{count:G}};d.createClassBreaksDefinition=m;d.createUVResult=function(r,G,H){const w=r.count;r=[];H&&G&&"coded-value"===G.type&&G.codedValues.forEach(e=>{e=e.code;w.hasOwnProperty(e)||(w[e]={data:e,count:0})});for(const e in w)G=w[e],r.push({value:G.data,count:G.count,label:G.label});
return{uniqueValueInfos:r}};d.getAttributeComparator=F;d.getEqualIntervalBins=p;d.getNormalizedValue=function(r,G,H,w){let e=null;switch(G){case "log":0!==r&&(e=Math.log(r)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(w)&&0!==w&&(e=r/w*100);break;case "field":Number.isFinite(H)&&0!==H&&(e=r/H);break;case "natural-log":0<r&&(e=Math.log(r));break;case "square-root":0<r&&(e=r**.5)}return e};d.isNullCountSupported=B;d.processSummaryStatisticsResult=function(r,G){let H;for(H in r)-1<A.indexOf(H)&&
(Number.isFinite(r[H])||(r[H]=null));if(!G)return r;["avg","stddev","variance"].forEach(w=>{null!=r[w]&&(r[w]=Math.ceil(r[w]))});return r};d.resolveCBResult=function(r,G){let H=r.classBreaks;const w=H[0].minValue,e=H[H.length-1].maxValue,z="standard-deviation"===G;H=H.map(S=>{const J=S.label;S={minValue:S.minValue,maxValue:S.maxValue,label:J};if(z&&J){const O=J.match(E).map(t=>+t.trim());2===O.length?(S.minStdDev=O[0],S.maxStdDev=O[1],0>O[0]&&0<O[1]&&(S.hasAvg=!0)):1===O.length&&(J.includes("\x3c")?
(S.minStdDev=null,S.maxStdDev=O[0]):J.includes("\x3e")&&(S.minStdDev=O[0],S.maxStdDev=null))}return S});return{minValue:w,maxValue:e,classBreakInfos:H,normalizationTotal:r.normalizationTotal}};d.statisticTypes=A;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(d,h,c,B,g,u,F,L,K){g=new c.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});c=new c.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});K=function(M){function y(){var k=M.apply(this,arguments)||this;k.breakCount=null;k.classificationField=
null;k.classificationMethod=null;k.normalizationField=null;k.normalizationType=null;k.type="class-breaks-definition";return k}d._inheritsLoose(y,M);d._createClass(y,[{key:"standardDeviationInterval",set:function(k){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",k)}},{key:"definedInterval",set:function(k){"defined-interval"===this.classificationMethod&&this._set("definedInterval",k)}}]);return y}(K);h.__decorate([B.property({json:{write:!0}})],K.prototype,"breakCount",
void 0);h.__decorate([B.property({json:{write:!0}})],K.prototype,"classificationField",void 0);h.__decorate([B.property({type:String,json:{read:g.read,write:g.write}})],K.prototype,"classificationMethod",void 0);h.__decorate([B.property({json:{write:!0}})],K.prototype,"normalizationField",void 0);h.__decorate([B.property({json:{read:c.read,write:c.write}})],K.prototype,"normalizationType",void 0);h.__decorate([B.property({value:null,json:{write:!0}})],K.prototype,"standardDeviationInterval",null);
h.__decorate([B.property({value:null,json:{write:!0}})],K.prototype,"definedInterval",null);h.__decorate([B.property()],K.prototype,"type",void 0);return K=h.__decorate([L.subclass("esri.rest.support.ClassBreaksDefinition")],K)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y){c=new c.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});B=function(k){function m(){var q=k.apply(this,arguments)||this;q.baseSymbol=null;q.colorRamp=null;q.type=null;return q}d._inheritsLoose(m,k);return m}(B.JSONSupport);h.__decorate([g.property({type:y,json:{write:!0}})],B.prototype,"baseSymbol",void 0);h.__decorate([g.property({types:M.types,json:{read:{reader:M.fromJSON},write:!0}})],B.prototype,"colorRamp",void 0);h.__decorate([g.property({json:{read:c.read,
write:c.write}})],B.prototype,"type",void 0);return B=h.__decorate([K.subclass("esri.rest.support.ClassificationDefinition")],B)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(d){function h(y){const {classificationMethod:k,breakCount:m,normalizationType:q,definedInterval:I}=y.definition,p=[];var E=y.values;if(0===E.length)return[];E=E.sort((w,e)=>w-e);var x=E[0],A=E[E.length-1];if("equal-interval"===k)if(E.length>=m){E=(A-x)/m;y=x;for(var r=1;r<m;r++){var G=Number((x+
r*E).toFixed(6));p.push({minValue:y,maxValue:G,label:c(y,G,q)});y=G}p.push({minValue:y,maxValue:A,label:c(y,A,q)})}else E.forEach(w=>{p.push({minValue:w,maxValue:w,label:c(w,w,q)})});else if("natural-breaks"===k){E=B(E);y=g(E.uniqueValues,y.valueFrequency||E.valueFrequency,m);for(r=1;r<m;r++)E.uniqueValues.length>r&&(G=Number(E.uniqueValues[y[r]].toFixed(6)),p.push({minValue:x,maxValue:G,label:c(x,G,q)}),x=G);p.push({minValue:x,maxValue:A,label:c(x,A,q)})}else if("quantile"===k)if(E.length>=m&&x!==
A){y=Math.ceil(E.length/m);r=0;for(G=1;G<m;G++){var H=y+r-1;H>E.length&&(H=E.length-1);0>H&&(H=0);p.push({minValue:x,maxValue:E[H],label:c(x,E[H],q)});x=E[H];r+=y;y=Math.ceil((E.length-r)/(m-G))}p.push({minValue:x,maxValue:A,label:c(x,A,q)})}else for(A=-1,x=0;x<E.length;x++)y=E[x],y!==A&&(A=y,p.push({minValue:A,maxValue:y,label:c(A,y,q)}),A=y);else if("standard-deviation"===k)if(y=L(E),r=K(E,y),0===r)p.push({minValue:E[0],maxValue:E[0],label:c(E[0],E[0],q)});else{E=F(x,A,m,y,r)*r;r=0;for(G=m;1<=G;G--)H=
Number((y-(G-.5)*E).toFixed(6)),p.push({minValue:x,maxValue:H,label:c(x,H,q)}),x=H,r++;G=Number((y+.5*E).toFixed(6));p.push({minValue:x,maxValue:G,label:c(x,G,q)});x=G;r++;for(H=1;H<=m;H++)G=r===2*m?A:Number((y+(H+.5)*E).toFixed(6)),p.push({minValue:x,maxValue:G,label:c(x,G,q)}),x=G,r++}else if("defined-interval"===k){if(!I)return p;A=E[0];E=E[E.length-1];x=Math.ceil((E-A)/I);y=A;for(r=1;r<x;r++)G=Number((A+r*I).toFixed(6)),p.push({minValue:y,maxValue:G,label:c(y,G,q)}),y=G;p.push({minValue:y,maxValue:E,
label:c(y,E,q)})}return p}function c(y,k,m){let q=null;return q=y===k?m&&"percent-of-total"===m?y+"%":y.toString():m&&"percent-of-total"===m?y+"% - "+k+"%":y+" - "+k}function B(y){const k=[],m=[];let q=Number.MIN_VALUE,I=1,p=-1;for(let E=0;E<y.length;E++){const x=y[E];x===q?(I++,m[p]=I):null!==x&&(k.push(x),q=x,I=1,m.push(I),p++)}return{uniqueValues:k,valueFrequency:m}}function g(y,k,m){var q=y.length;const I=[];m>q&&(m=q);for(var p=0;p<m;p++)I.push(Math.round(p*q/m-1));I.push(q-1);p=u(I,y,k,m);{q=
p.mean;p=p.sdcm;var E=m,x=0,A=0;let G=0,H=0,w=!0;for(let e=0;2>e&&w;e++){0===e&&(w=!1);for(var r=0;r<E-1;r++)for(;I[r+1]+1!==I[r+2];)if(I[r+1]+=1,x=M(r,I,y,k),G=x.sbMean,x=x.sbSdcm,A=M(r+1,I,y,k),H=A.sbMean,A=A.sbSdcm,x+A<p[r]+p[r+1])p[r]=x,p[r+1]=A,q[r]=G,q[r+1]=H,w=!0;else{--I[r+1];break}for(r=E-1;0<r;r--)for(;I[r]!==I[r-1]+1;)if(--I[r],x=M(r-1,I,y,k),G=x.sbMean,x=x.sbSdcm,A=M(r,I,y,k),H=A.sbMean,A=A.sbSdcm,x+A<p[r-1]+p[r])p[r-1]=x,p[r]=A,q[r-1]=G,q[r]=H,w=!0;else{I[r]+=1;break}}q=w}q&&(p=u(I,y,
k,m));return I}function u(y,k,m,q){let I=[];var p=[],E=[];let x=0;const A=[],r=[];for(var G=0;G<q;G++){var H=M(G,y,k,m);A.push(H.sbMean);r.push(H.sbSdcm);x+=r[G]}H=x;for(G=!0;G||x<H;){G=!1;I=[];for(p=0;p<q;p++)I.push(y[p]);for(E=0;E<q;E++)for(H=y[E]+1;H<=y[E+1];H++)if(p=k[H],0<E&&H!==y[E+1]&&Math.abs(p-A[E])>Math.abs(p-A[E-1]))y[E]=H;else if(E<q-1&&y[E]!==H-1&&Math.abs(p-A[E])>Math.abs(p-A[E+1])){y[E+1]=H-1;break}H=x;x=0;p=[];E=[];for(let w=0;w<q;w++){p.push(A[w]);E.push(r[w]);const e=M(w,y,k,m);
A[w]=e.sbMean;r[w]=e.sbSdcm;x+=r[w]}}if(x>H){for(k=0;k<q;k++)y[k]=I[k],A[k]=p[k],r[k]=E[k];x=H}return{mean:A,sdcm:r}}function F(y,k,m,q,I){y=Math.max(q-y,k-q)/I/m;return 1<=y?1:.5<=y?.5:.25}function L(y){let k=0;for(let m=0;m<y.length;m++)k+=y[m];return k/=y.length}function K(y,k){let m=0;for(let q=0;q<y.length;q++){const I=y[q];m+=(I-k)*(I-k)}m/=y.length;return Math.sqrt(m)}function M(y,k,m,q){var I=0,p=0;for(var E=k[y]+1;E<=k[y+1];E++){const x=q[E];I+=m[E]*x;p+=x}0>=p&&console.log("Exception in Natural Breaks calculation");
I/=p;p=0;for(E=k[y]+1;E<=k[y+1];E++)p+=q[E]*(m[E]-I)**2;return{sbMean:I,sbSdcm:p}}d.createGenerateRendererClassBreaks=function(y){const {normalizationTotal:k}=y;return{classBreaks:h(y),normalizationTotal:k}};d.createGenerateRendererUniqueValues=function(y){y=B(y);const k=[],m=y.uniqueValues.length;for(let q=0;q<m;q++){const I=y.uniqueValues[q];k.push({value:I,count:y.valueFrequency[q],label:I.toString()})}return{uniqueValues:k}};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(d,h,c,B,g,u,F){function L(p,E){if(!E)return null;if("x"in E){var x={x:0,y:0};[x.x,x.y]=p(E.x,E.y,k);null!=E.z&&(x.z=E.z);null!=E.m&&(x.m=E.m);return x}if("xmin"in E)return x={xmin:0,ymin:0,xmax:0,ymax:0},[x.xmin,x.ymin]=p(E.xmin,E.ymin,k),[x.xmax,x.ymax]=p(E.xmax,E.ymax,k),E.hasZ&&(x.zmin=E.zmin,x.zmax=E.zmax,x.hasZ=!0),E.hasM&&(x.mmin=E.mmin,x.mmax=E.mmax,x.hasM=!0),x;if("rings"in E)return{rings:K(E.rings,p),hasM:E.hasM,hasZ:E.hasZ};if("paths"in E)return{paths:K(E.paths,p),hasM:E.hasM,hasZ:E.hasZ};
if("points"in E)return{points:M(E.points,p),hasM:E.hasM,hasZ:E.hasZ}}function K(p,E){const x=[];for(const A of p)x.push(M(A,E));return x}function M(p,E){const x=[];for(const A of p)p=E(A[0],A[1],[0,0]),x.push(p),2<A.length&&p.push(A[2]),3<A.length&&p.push(A[3]);return x}function y(){y=h._asyncToGenerator(function*(p,E){E&&(p=Array.isArray(p)?p.map(x=>c.isSome(x.geometry)&&x.geometry.spatialReference):[p],yield B.initializeProjection(p.map(x=>({source:x,dest:E}))))});return y.apply(this,arguments)}
const k=[0,0],m=L.bind(null,F.lngLatToXY),q=L.bind(null,F.xyToLngLat),I=new (function(){function p(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var E=p.prototype;E.push=function(){var x=h._asyncToGenerator(function*(A,r,G){if(!(A&&A.length&&r&&G)||u.equals(r,G))return A;const H={geometries:A,inSpatialReference:r,outSpatialReference:G,resolve:null};this._jobs.push(H);return new Promise(w=>{H.resolve=w;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(A,
r,G){return x.apply(this,arguments)}}();E._process=function(){this._timer=null;const x=this._jobs.shift();if(x){var {geometries:A,inSpatialReference:r,outSpatialReference:G,resolve:H}=x;F.canProject(r,G)?u.isWebMercator(G)?H(A.map(m)):H(A.map(q)):H(B.projectMany(g.jsonAdapter,A,r,G,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return p}());d.checkProjectionSupport=function(p,E){return y.apply(this,arguments)};d.project=function(p,E,x){if(!p)return p;x||(x=E,E=p.spatialReference);
return u.isValid(E)&&u.isValid(x)&&!u.equals(E,x)?F.canProject(E,x)?(p=u.isWebMercator(x)?m(p):q(p),p.spatialReference=x,p):B.projectMany(g.jsonAdapter,[p],E,x,null)[0]:p};d.projectMany=function(p,E,x){return I.push(p,E,x)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(d){let h=function(F,L,K){this.x=F;this.y=L;this.spatialReference=K;this.m=this.z=void 0},c=function(F,L,K,M){this.rings=F;this.spatialReference=L;this.hasM=
this.hasZ=void 0;K&&(this.hasZ=K);M&&(this.hasM=M)},B=function(F,L,K,M){this.paths=F;this.spatialReference=L;this.hasM=this.hasZ=void 0;K&&(this.hasZ=K);M&&(this.hasM=M)},g=function(F,L,K,M){this.points=F;this.spatialReference=L;this.hasM=this.hasZ=void 0;K&&(this.hasZ=K);M&&(this.hasM=M)},u=function(F,L,K,M,y){this.xmin=F;this.ymin=L;this.xmax=K;this.ymax=M;this.spatialReference=y;this.mmax=this.mmin=this.zmax=this.zmin=void 0};d.jsonAdapter={convertToGEGeometry:function(F,L){return null==L?null:
F.convertJSONToGeometry(L)},exportPoint:function(F,L,K){K=new h(F.getPointX(L),F.getPointY(L),K);const M=F.hasZ(L),y=F.hasM(L);M&&(K.z=F.getPointZ(L));y&&(K.m=F.getPointM(L));return K},exportPolygon:function(F,L,K){return new c(F.exportPaths(L),K,F.hasZ(L),F.hasM(L))},exportPolyline:function(F,L,K){return new B(F.exportPaths(L),K,F.hasZ(L),F.hasM(L))},exportMultipoint:function(F,L,K){return new g(F.exportPoints(L),K,F.hasZ(L),F.hasM(L))},exportExtent:function(F,L,K){var M=F.hasZ(L);const y=F.hasM(L);
K=new u(F.getXMin(L),F.getYMin(L),F.getXMax(L),F.getYMax(L),K);M&&(M=F.getZExtent(L),K.zmin=M.vmin,K.zmax=M.vmax);y&&(F=F.getMExtent(L),K.mmin=F.vmin,K.mmax=F.vmax);return K}};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(d){function h(g,u,F,L,K){if(null!=L&&null!=K)return M=>{const y=g.getAttribute(M,u);M=g.getAttribute(M,F);return(null==y||y<=K)&&(null==M||M>=L)};if(null!=L)return M=>{M=g.getAttribute(M,F);return null==
M||M>=L};if(null!=K)return M=>{M=g.getAttribute(M,u);return null==M||M<=K}}function c(g,u,F,L){if(null!=F&&null!=L&&F===L)return K=>g.getAttribute(K,u)===F;if(null!=F&&null!=L)return K=>{K=g.getAttribute(K,u);return K>=F&&K<=L};if(null!=F)return K=>g.getAttribute(K,u)>=F;if(null!=L)return K=>g.getAttribute(K,u)<=L}function B(){return()=>!1}d.getTimeExtent=function(g,u){if(!g)return null;const F=u.featureAdapter,{startTimeField:L,endTimeField:K}=g;let M=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY;
if(L&&K)u.forEach(k=>{const m=F.getAttribute(k,L);k=F.getAttribute(k,K);null==m||isNaN(m)||(M=Math.min(M,m));null==k||isNaN(k)||(y=Math.max(y,k))});else{const k=L||K;u.forEach(m=>{m=F.getAttribute(m,k);null==m||isNaN(m)||(M=Math.min(M,m),y=Math.max(y,m))})}return{start:M,end:y}};d.getTimeOperator=function(g,u,F){if(!u||!g)return null;const {startTimeField:L,endTimeField:K}=g;if(!L&&!K)return null;const {start:M,end:y}=u;return null===M&&null===y?null:void 0===M&&void 0===y?B():L&&K?h(F,L,K,M,y):c(F,
L||K,M,y)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),function(d,
h,c,B,g,u,F,L,K,M,y,k,m,q){function I(b,f,n,P=b.hasZ,U=b.hasM){if(g.isNone(f))return null;const T=b.hasZ&&P,v=b.hasM&&U;return n?(b=k.quantizeOptimizedGeometry(O,f,b.hasZ,b.hasM,"esriGeometryPoint",n,P,U),k.convertToPoint(b,T,v)):k.convertToPoint(f,T,v)}function p(){p=c._asyncToGenerator(function*(b,f,n){const {outFields:P,orderByFields:U,groupByFieldsForStatistics:T,outStatistics:v}=b;if(P)for(var N=0;N<P.length;N++)P[N]=P[N].trim();if(U)for(N=0;N<U.length;N++)U[N]=U[N].trim();if(T)for(N=0;N<T.length;N++)T[N]=
T[N].trim();if(v)for(N=0;N<v.length;N++)v[N].onStatisticField&&(v[N].onStatisticField=v[N].onStatisticField.trim());b.geometry&&!b.outSR&&(b.outSR=b.geometry.spatialReference);return x(b,f,n)});return p.apply(this,arguments)}function E(){E=c._asyncToGenerator(function*(b,f,n){return x(b,f,n)});return E.apply(this,arguments)}function x(b,f,n){return A.apply(this,arguments)}function A(){A=c._asyncToGenerator(function*(b,f,n){if(!b)return null;var {where:P}=b;b.where=P=P&&P.trim();if(!P||/^1 *= *1$/.test(P)||
f&&f===P)b.where=null;if(!b.geometry)return b;f=yield r(b);b.distance=0;b.units=null;"esriSpatialRelEnvelopeIntersects"===b.spatialRel&&({spatialReference:P}=b.geometry,f=F.getGeometryExtent(f),f.spatialReference=P);b.geometry=f;yield q.checkProjectionSupport(f.spatialReference,n);f=(yield K.normalizeCentralMeridian(L.fromJSON(f)))[0];if(g.isNone(f))throw z;f=f.toJSON();f=yield q.project(f,f.spatialReference,n);if(!f)throw z;f.spatialReference=n;b.geometry=f;return b});return A.apply(this,arguments)}
function r(b){return G.apply(this,arguments)}function G(){G=c._asyncToGenerator(function*(b){const {geometry:f,distance:n,units:P}=b;if(null==n||"vertexAttributes"in f)return f;var U=f.spatialReference;b=P?e.fromJSON(P):u.getUnitString(U);U=U&&(M.isGeographic(U)||M.isWebMercator(U))?f:yield q.checkProjectionSupport(U,M.WGS84).then(()=>q.project(f,M.WGS84));return(yield H())(U.spatialReference,U,n,b)});return G.apply(this,arguments)}function H(){return w.apply(this,arguments)}function w(){w=c._asyncToGenerator(function*(){return(yield new Promise((b,
f)=>d(["../../../geometry/geometryEngineJSON"],b,f))).geodesicBuffer});return w.apply(this,arguments)}const e=new B.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),z=Object.freeze({}),S=new m,J=new m,O=new m,t={esriGeometryPoint:k.convertToPoint,esriGeometryPolyline:k.convertToPolyline,esriGeometryPolygon:k.convertToPolygon,esriGeometryMultipoint:k.convertToMultipoint},
l=(b,f)=>"_geVersion"!==b?f:void 0;h.QUERY_ENGINE_EMPTY_RESULT=z;h.cleanFromGeometryEngine=function(b){return b&&"_geVersion"in b?JSON.parse(JSON.stringify(b,l)):b};h.getCentroid=function(b,f,n){if("esriGeometryPolygon"!==b.geometryType||!f||!f.centroid&&!f.geometry)return null;f.centroid||(f.centroid=y.getCentroidOptimizedGeometry(new m,f.geometry,b.hasZ,b.hasM));return I(b,f.centroid,n)};h.getGeometry=function(b,f,n,P,U,T,v=f,N=n){const R=f&&v,W=n&&N;P=g.isSome(P)?"coords"in P?P:P.geometry:null;
if(g.isNone(P))return null;if(U)return f=k.generalizeOptimizedGeometry(J,P,f,n,b,U,v,N),T&&(f=k.quantizeOptimizedGeometry(O,f,R,W,b,T)),t[b](f,R,W);if(T)return T=k.quantizeOptimizedGeometry(O,P,f,n,b,T,v,N),t[b](T,R,W);k.removeZMValues(S,P,f,n,v,N);return t[b](S,R,W)};h.normalizeFilter=function(b,f,n){return E.apply(this,arguments)};h.normalizeQuery=function(b,f,n){return p.apply(this,arguments)};h.normalizeQueryLike=x;h.transformCentroid=I;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports",
"../../core/maybe"],function(d,h){function c(g,u,F,L,K,M,y=1){M=K?M?4:3:M?3:2;let k=F,m=F+M,q=0,I=0,p=F=0,E=0;for(let x=0,A=L-1;x<A;x++,k+=M,m+=M){L=u[k];const r=u[k+1],G=u[k+2],H=u[m],w=u[m+1],e=u[m+2];let z=L*w-H*r;p+=z;q+=(L+H)*z;I+=(r+w)*z;K&&(z=L*e-H*G,F+=(G+e)*z,E+=z);L<g[0]&&(g[0]=L);L>g[1]&&(g[1]=L);r<g[2]&&(g[2]=r);r>g[3]&&(g[3]=r);K&&(G<g[4]&&(g[4]=G),G>g[5]&&(g[5]=G))}0<p*y&&(p*=-1);0<E*y&&(E*=-1);if(!p)return null;g=[q,I,.5*p];K&&(g[3]=F,g[4]=.5*E);return g}function B(g,u,F,L,K){K=L?K?
4:3:K?3:2;let M=u,y=u+K,k=0,m=0,q=0,I=0;for(let A=0,r=F-1;A<r;A++,M+=K,y+=K){var p=g[M];const G=g[M+1],H=g[M+2],w=g[y],e=g[y+1],z=g[y+2];if(L){{var E=w-p;var x=e-G;const S=z-H;E=Math.sqrt(E*E+x*x+S*S)}}else E=w-p,x=e-G,E=Math.sqrt(E*E+x*x);E&&(k+=E,L?(p=[p+.5*(w-p),G+.5*(e-G),H+.5*(z-H)],m+=E*p[0],q+=E*p[1],I+=E*p[2]):(p=[p+.5*(w-p),G+.5*(e-G)],m+=E*p[0],q+=E*p[1]))}return 0<k?L?[m/k,q/k,I/k]:[m/k,q/k]:0<F?L?[g[u],g[u+1],g[u+2]]:[g[u],g[u+1]]:null}d.getCentroidOptimizedGeometry=function(g,u,F,L,K){if(h.isNone(u)||
!u.lengths.length)return null;const M="upperLeft"===(null==K?void 0:K.originPosition)?-1:1;g.lengths.length&&(g.lengths.length=0);g.coords.length&&(g.coords.length=0);K=g.coords;const y=[],k=F?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:m,coords:q}=u,I=F?L?4:3:L?3:2;let p=0;for(var E of m){const x=
c(k,q,p,E,F,L,M);x&&y.push(x);p+=E*I}y.sort((x,A)=>{let r=M*x[2]-M*A[2];0===r&&F&&(r=x[4]-A[4]);return r});y.length&&(E=6*y[0][2],K[0]=y[0][0]/E,K[1]=y[0][1]/E,F&&(E=6*y[0][4],K[2]=0!==E?y[0][3]/E:0),K[0]<k[0]||K[0]>k[1]||K[1]<k[2]||K[1]>k[3]||F&&(K[2]<k[4]||K[2]>k[5]))&&(K.length=0);if(!K.length)if(u=u.lengths[0]?B(q,0,m[0],F,L):null)K[0]=u[0],K[1]=u[1],F&&2<u.length&&(K[2]=u[2]);else return null;return g};d.lineCentroid=B;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/SnappingConstraint":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/vec2 ../../../chunks/vec2f64 ./Settings ./snappingUtils ../../support/geometry2dUtils".split(" "),
function(d,h,c,B,g,u,F){let L=function(I){this.coordinateHelper=I},K=function(I){function p(x,A){x=I.call(this,x)||this;x.point=A;return x}h._inheritsLoose(p,I);var E=p.prototype;E.objectEqual=function(x){return x instanceof p?u.objectEqual(this.point,x.point):!1};E.check=function(x){return c.squaredDistance(x,this.point)<g.defaults.pointThreshold};E.closestTo=function(){return this.coordinateHelper.clone(this.point)};E.intersect=function(x){const A=[];x instanceof M?A.push(...F.intersectLineAndPoint({start:x.start,
end:x.end,type:x instanceof k?F.LineType.LINE:F.LineType.RAY},this.point)):x instanceof q&&A.push(...F.intersectCircleAndPoint(x.center,x.radius,this.point));return A.map(r=>new m(this.coordinateHelper,r,this,x))};return p}(L),M=function(I){function p(x,A,r){x=I.call(this,x)||this;x.start=A;x.end=r;return x}h._inheritsLoose(p,I);var E=p.prototype;E.objectEqual=function(x){return x instanceof p?u.objectEqual(this.start,x.start)&&u.objectEqual(this.end,x.end):!1};E.intersect=function(x){const A=[];
x instanceof K?A.push(...F.intersectLineAndPoint({start:this.start,end:this.end,type:this instanceof k?F.LineType.LINE:F.LineType.RAY},x.point)):x instanceof p?A.push(...F.intersectLineAndRay({start:this.start,end:this.end,type:this instanceof k?F.LineType.LINE:F.LineType.RAY},{start:x.start,end:x.end,type:x instanceof k?F.LineType.LINE:F.LineType.RAY})):x instanceof q&&A.push(...F.intersectLineLikeAndCircle({start:this.start,end:this.end,type:this instanceof k?F.LineType.LINE:F.LineType.RAY},x.center,
x.radius));return A.map(r=>new m(this.coordinateHelper,r,this,x))};return p}(L),y=function(I){function p(x,A,r){x=I.call(this,x,A,r)||this;x.dir=B.create();x.p=B.create();return x}h._inheritsLoose(p,I);var E=p.prototype;E.objectEqual=function(x){return x instanceof p?I.prototype.objectEqual.call(this,x):!1};E.check=function(x){c.subtract(this.dir,this.end,this.start);c.subtract(this.p,x,this.start);return 0<=c.dot(this.dir,this.p)?F.pointToLineDistance(x,this.start,this.end)<g.defaults.pointOnLineThreshold:
!1};E.closestTo=function(x){const A=this.coordinateHelper.clone(x);F.projectPointToRay(A,x,this.start,this.end);return A};return p}(M),k=function(I){function p(x,A,r){return I.call(this,x,A,r)||this}h._inheritsLoose(p,I);var E=p.prototype;E.objectEqual=function(x){return x instanceof p?I.prototype.objectEqual.call(this,x):!1};E.check=function(x){return F.pointToLineDistance(x,this.start,this.end)<g.defaults.pointOnLineThreshold};E.closestTo=function(x){const A=this.coordinateHelper.clone(x);F.projectPointToLine(A,
x,this.start,this.end);return A};return p}(M),m=function(I){function p(x,A,r,G){x=I.call(this,x)||this;x.intersection=A;x.first=r;x.second=G;return x}h._inheritsLoose(p,I);var E=p.prototype;E.objectEqual=function(x){return x instanceof p?this.first.objectEqual(x.first)&&this.second.objectEqual(x.second):!1};E.check=function(){return!1};E.closestTo=function(x){x=this.coordinateHelper.clone(x);c.copy(x,this.intersection);return x};E.intersect=function(){return[]};return p}(L),q=function(I){function p(x,
A,r){x=I.call(this,x)||this;x.center=A;x.radius=r;return x}h._inheritsLoose(p,I);var E=p.prototype;E.objectEqual=function(x){return x instanceof p?this.center[0]===x.center[0]&&this.center[1]===x.center[1]&&this.radius===x.radius:!1};E.check=function(){return!1};E.closestTo=function(x){const A=this.coordinateHelper.clone(x);F.projectPointToCircle(A,x,this.center,this.radius);return A};E.intersect=function(x){const A=[];x instanceof M?A.push(...F.intersectLineLikeAndCircle({start:x.start,end:x.end,
type:x instanceof k?F.LineType.LINE:F.LineType.RAY},this.center,this.radius)):x instanceof K&&A.push(...F.intersectCircleAndPoint(this.center,this.radius,x.point));return A.map(r=>new m(this.coordinateHelper,r,this,x))};return p}(L);d.IntersectionConstraint=m;d.LineConstraint=k;d.LineLikeConstraint=M;d.PlanarCircleConstraint=q;d.PointConstraint=K;d.RayConstraint=y;d.SnappingConstraint=L;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/chunks/vec2f64":function(){define(["exports"],function(d){function h(){return[0,
0]}function c(p){return[p[0],p[1]]}function B(p,E){return[p,E]}function g(p){const E=[0,0],x=Math.min(2,p.length);for(let A=0;A<x;++A)E[A]=p[A];return E}function u(p,E){return new Float64Array(p,E,2)}function F(){return[0,0]}function L(){return[1,1]}function K(){return[1,0]}function M(){return[0,1]}const y=[0,0],k=[1,1],m=[1,0],q=[0,1],I=Object.freeze({__proto__:null,create:h,clone:c,fromValues:B,fromArray:g,createView:u,zeros:F,ones:L,unitX:K,unitY:M,ZEROS:y,ONES:k,UNIT_X:m,UNIT_Y:q});d.ONES=k;d.UNIT_X=
m;d.UNIT_Y=q;d.ZEROS=y;d.clone=c;d.create=h;d.createView=u;d.fromArray=g;d.fromValues=B;d.ones=L;d.unitX=K;d.unitY=M;d.vec2f64=I;d.zeros=F})},"esri/views/interactive/snapping/snappingUtils":function(){define("exports ../../../core/screenUtils ../../../chunks/vec2 ../../../chunks/vec3f64 ../../../geometry/Point ../../../support/elevationInfoUtils".split(" "),function(d,h,c,B,g,u){function F(y,k,m,q,I=B.create()){y=k.toXYZ(y);y[2]=u.getConvertedElevationFromVector(q,y,k.spatialReference,m)||0;q.renderCoordsHelper.toRenderCoords(y,
k.spatialReference,I);return I}d.LineSegmentHintType=void 0;(function(y){y[y.TARGET=0]="TARGET";y[y.REFERENCE=1]="REFERENCE";y[y.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(d.LineSegmentHintType||(d.LineSegmentHintType={}));const L=B.create(),K=h.createScreenPointArray(),M=new g;d.anyMapPointToRender=F;d.anyMapPointToScreenPoint=function(y,k,m,q){if("2d"===q.type)return q.toScreen(k.vectorToPoint(y,M));F(y,k,m,q,L);q.state.camera.projectToScreen(L,K);return h.createScreenPoint(K[0],K[1])};d.anyMapPointsToRenderWithEqualZ=
function(y,k,m,q,I,p,E){y=m.toXYZ(y);k=m.toXYZ(k);const x=u.getConvertedElevationFromVector(I,y,m.spatialReference,q);q=u.getConvertedElevationFromVector(I,k,m.spatialReference,q);q=(null==x?q:null==q?x:Math.min(x,q))||0;y[2]=q;k[2]=q;I.renderCoordsHelper.toRenderCoords(y,m.spatialReference,p);I.renderCoordsHelper.toRenderCoords(k,m.spatialReference,E)};d.objectEqual=function(y,k){const m=y.length===k.length&&y[0]===k[0]&&y[1]===k[1];switch(y.length){case 2:return m;case 3:return m&&y[2]===k[2];case 4:return m&&
y[3]===k[3]}return!1};d.sortCandidatesInPlace=function(y,k){k.sort((m,q)=>{m=c.squaredDistance(m.targetPoint,y);q=c.squaredDistance(q.targetPoint,y);return m-q})};d.squareDistance=function(y,k){const m=y.x-k.x;y=y.y-k.y;return m*m+y*y};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/support/geometry2dUtils":function(){define(["exports","../../core/mathUtils","../../chunks/vec2","../../chunks/vec2f64"],function(d,h,c,B){function g(m,q){return m[0]*q[1]-m[1]*q[0]}function u(m,q,I){q=
c.dot(I,q)/c.squaredLength(I);return c.scale(m,I,q)}function F(m,q,I,p,E=I){c.subtract(K,p,I);c.subtract(y,q,E);u(k,y,K);return c.add(m,E,k)}function L(m,q,I,p){c.subtract(K,q,I);q=p/c.length(K);return c.scaleAndAdd(m,I,K,q)}d.LineType=void 0;(function(m){m[m.RAY=0]="RAY";m[m.LINE=1]="LINE"})(d.LineType||(d.LineType={}));const K=B.create(),M=B.create(),y=B.create(),k=B.create();d.cross=g;d.intersectCircleAndPoint=function(m,q,I){L(y,I,m,q);return h.floatEqualAbsolute(y[0],I[0])&&h.floatEqualAbsolute(y[1],
I[1])?[B.clone(I)]:[]};d.intersectLineAndPoint=function(m,q){F(y,q,m.start,m.end);return h.floatEqualAbsolute(y[0],q[0])&&h.floatEqualAbsolute(y[1],q[1])?[B.clone(q)]:[]};d.intersectLineAndRay=function(m,q){const I=m.start;var p=q.start,E=q.end;const x=c.subtract(K,m.end,I);var A=c.subtract(M,E,p);E=g(x,A);if(1E-6>=Math.abs(E))return[];p=c.subtract(y,I,p);A=g(A,p)/E;E=g(x,p)/E;if(0<=A){if(0<=E||q.type===d.LineType.LINE)return[c.scaleAndAdd(k,I,x,A)]}else if(m.type===d.LineType.LINE&&(0<=E||q.type===
d.LineType.LINE))return[c.scaleAndAdd(k,I,x,A)];return[]};d.intersectLineLikeAndCircle=function(m,q,I){const p=[],E=c.subtract(K,m.end,m.start);var x=c.subtract(M,m.start,q);q=c.squaredLength(E);const A=2*c.dot(E,x);I=c.squaredLength(x)-I*I;I=A*A-4*q*I;0===I?(q=-A/(2*q),(m.type===d.LineType.LINE||0<=q)&&p.push(c.scaleAndAdd(k,m.start,E,q))):0<I&&(I=Math.sqrt(I),x=(-A+I)/(2*q),(m.type===d.LineType.LINE||0<=x)&&p.push(c.scaleAndAdd(k,m.start,E,x)),q=(-A-I)/(2*q),(m.type===d.LineType.LINE||0<=q)&&p.push(c.scaleAndAdd(y,
m.start,E,q)));return p};d.pointToLineDistance=function(m,q,I){return Math.abs((q[0]-m[0])*(I[1]-m[1])-(q[1]-m[1])*(I[0]-m[0]))/c.distance(q,I)};d.projectPoint=u;d.projectPointToCircle=L;d.projectPointToLine=F;d.projectPointToRay=function(m,q,I,p){c.subtract(K,p,I);c.subtract(y,q,I);q=c.dot(K,y)/c.squaredLength(K);return 0<q?c.scaleAndAdd(m,I,K,q):c.copy(m,I)};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/EdgeSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../SnappingConstraint ../snappingUtils ./FeatureSnappingCandidate ../hints/LineSnappingHint".split(" "),
function(d,h,c,B,g,u){g=function(F){function L(K){return F.call(this,{...K,constraint:new c.LineConstraint(K.coordinateHelper,K.edgeStart,K.edgeEnd)})||this}h._inheritsLoose(L,F);h._createClass(L,[{key:"hints",get:function(){return[new u.LineSnappingHint(B.LineSegmentHintType.REFERENCE,this.constraint.start,this.constraint.end)]}}]);return L}(g.FeatureSnappingCandidate);d.EdgeSnappingCandidate=g;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/FeatureSnappingCandidate":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","./SnappingCandidate"],function(d,h,c){c=function(B){function g({coordinateHelper:u,targetPoint:F,objectId:L,constraint:K}){u=B.call(this,u,F,K)||this;u.objectId=L;return u}h._inheritsLoose(g,B);return g}(c.SnappingCandidate);d.FeatureSnappingCandidate=c;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/SnappingCandidate":function(){define(["exports"],function(d){d.SnappingCandidate=function(h,c,B){this.coordinateHelper=
h;this.targetPoint=c;this.constraint=B};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/LineSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),function(d,h,c,B,g,u){B.getLogger("esri.views.interactive.snapping.hints.LineSnappingHint");c=function(F){function L(K,M,y,k=!0,m=!0){var q=F.call(this)||this;q.type=K;q.lineStart=M;q.lineEnd=
y;q.fadeLeft=k;q.fadeRight=m;return q}h._inheritsLoose(L,F);L.prototype.equals=function(K){return K instanceof L?this.type===K.type&&g.objectEqual(this.lineStart,K.lineStart)&&g.objectEqual(this.lineEnd,K.lineEnd)&&this.fadeLeft===K.fadeLeft&&this.fadeRight===K.fadeRight:!1};return L}(u.SnappingHint);d.LineSnappingHint=c;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/SnappingHint":function(){define(["exports"],function(d){d.SnappingHint=function(){};Object.defineProperty(d,
"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/RightAngleSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../snappingUtils ./SnappingCandidate ../hints/LineSnappingHint ../hints/RightAngleSnappingHint".split(" "),function(d,h,c,B,g,u){B=function(F){function L({coordinateHelper:K,targetPoint:M,constraint:y,previousVertex:k,otherVertex:m,otherVertexType:q,objectId:I}){K=F.call(this,K,M,y)||this;K.previousVertex=k;K.otherVertex=m;K.otherVertexType=
q;K.objectId=I;return K}h._inheritsLoose(L,F);h._createClass(L,[{key:"hints",get:function(){const K=this.previousVertex,M=this.otherVertexType===d.OtherVertexType.CENTER?this.otherVertex:this.targetPoint,y=this.otherVertexType===d.OtherVertexType.CENTER?this.targetPoint:this.otherVertex;return[new g.LineSnappingHint(c.LineSegmentHintType.TARGET,M,y),new g.LineSnappingHint(c.LineSegmentHintType.REFERENCE,K,M),new u.RightAngleSnappingHint(this.previousVertex,M,y)]}}]);return L}(B.SnappingCandidate);
d.OtherVertexType=void 0;(function(F){F[F.NEXT=0]="NEXT";F[F.CENTER=1]="CENTER"})(d.OtherVertexType||(d.OtherVertexType={}));d.RightAngleSnappingCandidate=B;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/RightAngleSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),function(d,h,c,B,g,u){B.getLogger("esri.views.interactive.snapping.hints.RightAngleSnappingHint");
c=function(F){function L(K,M,y){var k=F.call(this)||this;k.previousVertex=K;k.centerVertex=M;k.nextVertex=y;return k}h._inheritsLoose(L,F);L.prototype.equals=function(K){return K instanceof L?g.objectEqual(this.previousVertex,K.previousVertex)&&g.objectEqual(this.centerVertex,K.centerVertex)&&g.objectEqual(this.nextVertex,K.nextVertex):!1};return L}(u.SnappingHint);d.RightAngleSnappingHint=c;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/SelfSnappingEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./LineSnapper ./ParallelLineSnapper ./RightAngleSnapper ./RightAngleTriangleSnapper ./snappingUtils".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I){d.SelfSnappingEngine=function(p){function E(A){A=p.call(this,A)||this;A.updating=!1;A._snappers=new g;return A}h._inheritsLoose(E,p);var x=E.prototype;x.initialize=function(){this._snappers.push(new k.ParallelLineSnapper(this.view,this.options),new y.LineSnapper(this.view,this.options),new m.RightAngleSnapper(this.view,this.options),new q.RightAngleTriangleSnapper(this.view,this.options))};x.fetchCandidates=function(){var A=h._asyncToGenerator(function*(r,G){if(!this.options.effectiveSelfEnabled)return[];
const H=[];for(const w of this._snappers.items)H.push(...w.snap(r,G));I.sortCandidatesInPlace(r,H);return H});return function(r,G){return A.apply(this,arguments)}}();h._createClass(E,[{key:"options",set:function(A){this._set("options",A);for(const r of this._snappers)r.options=A}}]);return E}(B);c.__decorate([u.property({readOnly:!0})],d.SelfSnappingEngine.prototype,"updating",void 0);c.__decorate([u.property({constructOnly:!0})],d.SelfSnappingEngine.prototype,"view",void 0);c.__decorate([u.property()],
d.SelfSnappingEngine.prototype,"options",null);d.SelfSnappingEngine=c.__decorate([M.subclass("esri.views.interactive.snapping.SelfSnappingEngine")],d.SelfSnappingEngine);Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/LineSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2f64 ./SnappingAlgorithm ./snappingUtils ./candidates/LineSnappingCandidate ../../support/geometry2dUtils".split(" "),function(d,
h,c,B,g,u,F,L){g=function(K){function M(){return K.apply(this,arguments)||this}h._inheritsLoose(M,K);var y=M.prototype;y.snapNewVertex=function(k,m){var q=m.editGeometryOperations.data.components[0],I=q.edges.length;const p=[];if(1>I)return p;const E=u.anyMapPointToScreenPoint(k,m.coordinateHelper,m.elevationInfo,this.view);I=q=q.edges[I-1];do this.edgeExceedsShortLineThreshold(I,m)&&this._processCandidateProposal(I.leftVertex.pos,I.rightVertex.pos,k,E,m,p),I=I.leftVertex.leftEdge;while(I&&I!==q);
return p};y.snapExistingVertex=function(k,m){const q=[],I=c.unwrap(m.vertexHandle);var p=I.component;if(2>p.edges.length)return q;const E=u.anyMapPointToScreenPoint(k,m.coordinateHelper,m.elevationInfo,this.view);var x=I.leftEdge;const A=I.rightEdge;x&&A&&this.edgeExceedsShortLineThreshold(x,m)&&this.edgeExceedsShortLineThreshold(A,m)&&this._processCandidateProposal(x.leftVertex.pos,A.rightVertex.pos,k,E,m,q);x=p=p.edges[0];do x!==I.leftEdge&&x!==I.rightEdge&&this.edgeExceedsShortLineThreshold(x,
m)&&this._processCandidateProposal(x.leftVertex.pos,x.rightVertex.pos,k,E,m,q),x=x.rightVertex.rightEdge;while(x&&x!==p);return q};y._processCandidateProposal=function(k,m,q,I,p,E){const x=L.projectPointToLine(B.create(),q,k,m),A=p.coordinateHelper;q=A.fromXYZ(x,A.getZ(q,0));u.squareDistance(I,u.anyMapPointToScreenPoint(q,A,p.elevationInfo,this.view))<this.squaredProximityTreshold(p.pointer)&&E.push(new F.LineSnappingCandidate({coordinateHelper:p.coordinateHelper,lineStart:k,lineEnd:m,targetPoint:q}))};
return M}(g.SnappingAlgorithm);d.LineSnapper=g;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/SnappingAlgorithm":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/maybe","./Settings","./snappingUtils"],function(d,h,c,B,g){let u=function(){function F(K,M){this.view=K;this.options=M;this.squaredShortLineThreshold=B.defaults.shortLineThreshold*B.defaults.shortLineThreshold}var L=F.prototype;L.snap=function(K,M){return c.isSome(M.vertexHandle)?
"vertex"!==M.vertexHandle.type?[]:this.snapExistingVertex(K,M):this.snapNewVertex(K,M)};L.edgeExceedsShortLineThreshold=function(K,M){return this.exceedsShortLineThreshold(K.leftVertex.pos,K.rightVertex.pos,M)};L.exceedsShortLineThreshold=function(K,M,{elevationInfo:y,editGeometryOperations:k}){k=k.data.coordinateHelper;return 0===this.squaredShortLineThreshold||g.squareDistance(g.anyMapPointToScreenPoint(M,k,y,this.view),g.anyMapPointToScreenPoint(K,k,y,this.view))>this.squaredShortLineThreshold};
L.squaredProximityTreshold=function(K){return"touch"===K?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold};h._createClass(F,[{key:"squaredMouseProximityTreshold",get:function(){return this.options.distance*this.options.distance}},{key:"squaredTouchProximityThreshold",get:function(){const {distance:K,touchSensitivityMultiplier:M}=this.options,y=K*M;return y*y}}]);return F}();d.SnappingAlgorithm=u;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/LineSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../SnappingConstraint ../snappingUtils ./SnappingCandidate ../hints/LineSnappingHint".split(" "),
function(d,h,c,B,g,u,F,L){F=function(y){function k({coordinateHelper:m,lineStart:q,lineEnd:I,targetPoint:p}){m=y.call(this,m,p,new g.LineConstraint(m,q,I))||this;m.referenceLineHint=new L.LineSnappingHint(u.LineSegmentHintType.REFERENCE_EXTENSION,q,I);return m}h._inheritsLoose(k,y);k.prototype._lineEndClosestToTarget=function(){const m=this.constraint.start,q=this.constraint.end;return 0<Math.sign(c.dot(c.subtract(M,q,m),c.subtract(K,this.targetPoint,m)))?q:m};h._createClass(k,[{key:"hints",get:function(){return[this.referenceLineHint,
new L.LineSnappingHint(u.LineSegmentHintType.TARGET,this._lineEndClosestToTarget(),this.targetPoint)]}}]);return k}(F.SnappingCandidate);const K=B.create(),M=B.create();d.LineSnappingCandidate=F;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/ParallelLineSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ./Settings ./SnappingAlgorithm ./snappingUtils ./candidates/ParallelLineSnappingCandidate ../../support/geometry2dUtils".split(" "),
function(d,h,c,B,g,u,F,L,K,M){F=function(y){function k(){var q=y.apply(this,arguments)||this;q._tmpProjection=g.create();return q}h._inheritsLoose(k,y);var m=k.prototype;m.snapNewVertex=function(q,I){var p=I.editGeometryOperations.data.components[0],E=p.edges.length,x=p.vertices.length;const A=[];if(2>E)return A;const r=L.anyMapPointToScreenPoint(q,I.coordinateHelper,I.elevationInfo,this.view);x=p.vertices[x-1];const G=p.vertices[0];E=p=p.edges[E-1];do this.edgeExceedsShortLineThreshold(E,I)&&(this._checkEdgeForParalleLines(E,
x.pos,q,r,I,A),this._checkEdgeForParalleLines(E,G.pos,q,r,I,A)),E=E.leftVertex.leftEdge;while(E&&E!==p);return A};m.snapExistingVertex=function(q,I){const p=[],E=c.unwrap(I.vertexHandle);var x=E.component;if(3>x.edges.length)return p;const A=L.anyMapPointToScreenPoint(q,I.coordinateHelper,I.elevationInfo,this.view),r=E.leftEdge,G=E.rightEdge,H=x.vertices[0],w=x.vertices[x.vertices.length-1];let e=x=x.edges[0];do e!==r&&e!==G&&this.edgeExceedsShortLineThreshold(e,I)&&(r&&this._checkEdgeForParalleLines(e,
r.leftVertex.pos,q,A,I,p),G&&this._checkEdgeForParalleLines(e,G.rightVertex.pos,q,A,I,p),E===H?this._checkEdgeForParalleLines(e,w.pos,q,A,I,p):E===w&&this._checkEdgeForParalleLines(e,H.pos,q,A,I,p)),e=e.rightVertex.rightEdge;while(e&&e!==x);return p};m._checkEdgeForParalleLines=function(q,I,p,E,x,A){var r=q.leftVertex.pos;const G=q.rightVertex.pos;M.projectPointToLine(this._tmpProjection,I,r,G);B.squaredDistance(this._tmpProjection,I)<u.defaults.parallelLineThreshold||(M.projectPointToLine(this._tmpProjection,
p,r,G,I),r=x.coordinateHelper,p=r.fromXYZ(this._tmpProjection,r.getZ(p,0)),L.squareDistance(E,L.anyMapPointToScreenPoint(p,r,x.elevationInfo,this.view))<this.squaredProximityTreshold(x.pointer)&&!this._parallelToPreviousCandidate(q,A)&&A.push(new K.ParallelLineSnappingCandidate({coordinateHelper:r,referenceLine:q,lineStart:I,targetPoint:p})))};m._parallelToPreviousCandidate=function(q,I){const p=q.leftVertex.pos,E=q.rightVertex.pos;for(const x of I)if(M.projectPointToLine(this._tmpProjection,E,x.constraint.start,
x.constraint.end,p),B.squaredDistance(this._tmpProjection,E)<u.defaults.parallelLineThreshold)return x.addReferenceLine(q),!0;return!1};return k}(F.SnappingAlgorithm);d.ParallelLineSnapper=F;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/ParallelLineSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2 ../SnappingConstraint ../snappingUtils ./SnappingCandidate ../hints/LineSnappingHint ../hints/ParallelSnappingHint".split(" "),
function(d,h,c,B,g,u,F,L){u=function(K){function M({coordinateHelper:y,referenceLine:k,lineStart:m,targetPoint:q}){const I=y.clone(m);c.subtract(I,c.add(I,I,k.rightVertex.pos),k.leftVertex.pos);y=K.call(this,y,q,new B.LineConstraint(y,m,I))||this;y._referenceLines=[{edge:k,fadeLeft:!0,fadeRight:!0}];return y}h._inheritsLoose(M,K);M.prototype.addReferenceLine=function(y){const k={edge:y,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(m=>{y.rightVertex.rightEdge===m.edge&&(m.fadeLeft=!1,k.fadeRight=
!1);y.leftVertex.leftEdge===m.edge&&(m.fadeRight=!1,k.fadeLeft=!1)});this._referenceLines.push(k)};h._createClass(M,[{key:"hints",get:function(){return[new F.LineSnappingHint(g.LineSegmentHintType.TARGET,this.constraint.start,this.targetPoint),new L.ParallelSnappingHint(this.constraint.start,this.targetPoint),...this._referenceLines.map(y=>new F.LineSnappingHint(g.LineSegmentHintType.REFERENCE,y.edge.leftVertex.pos,y.edge.rightVertex.pos,y.fadeLeft,y.fadeRight))]}}]);return M}(u.SnappingCandidate);
d.ParallelLineSnappingCandidate=u;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/ParallelSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),function(d,h,c,B,g,u){B.getLogger("esri.views.interactive.snapping.hints.ParallelSnappingHint");c=function(F){function L(K,M){var y=F.call(this)||this;y.lineStart=K;y.lineEnd=M;return y}h._inheritsLoose(L,
F);L.prototype.equals=function(K){return K instanceof L?g.objectEqual(this.lineStart,K.lineStart)&&g.objectEqual(this.lineEnd,K.lineEnd):!1};return L}(u.SnappingHint);d.ParallelSnappingHint=c;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/RightAngleSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ./SnappingAlgorithm ./SnappingConstraint ./snappingUtils ./candidates/RightAngleSnappingCandidate".split(" "),
function(d,h,c,B,g,u,F,L,K){u=function(M){function y(){var m=M.apply(this,arguments)||this;m._tmp=g.create();return m}h._inheritsLoose(y,M);var k=y.prototype;k.snapNewVertex=function(m,q){var I=q.editGeometryOperations.data.components[0],p=I.vertices.length;const E=[];if(2>p)return E;const x=L.anyMapPointToScreenPoint(m,q.coordinateHelper,q.elevationInfo,this.view);p=I.vertices[p-1];this._checkForSnappingCandidate(E,p.leftEdge,p.pos,m,p.leftEdge.leftVertex.pos,p.pos,q,m,x);I=I.vertices[0];this._checkForSnappingCandidate(E,
I.rightEdge,I.pos,m,I.rightEdge.rightVertex.pos,I.pos,q,m,x);return E};k.snapExistingVertex=function(m,q){const I=[];var p=c.unwrap(q.vertexHandle),E=p.component;const x=E.vertices.length;if(3>x)return I;const A=L.anyMapPointToScreenPoint(m,q.coordinateHelper,q.elevationInfo,this.view);var r=p.leftEdge;p=p.rightEdge;const G=E.vertices[0];E=E.vertices[x-1];if(!r)return this._checkForSnappingCandidate(I,G.rightEdge.rightVertex.rightEdge,G.rightEdge.rightVertex.pos,m,G.rightEdge.rightVertex.rightEdge.rightVertex.pos,
G.rightEdge.rightVertex.pos,q,m,A),I;if(!p)return this._checkForSnappingCandidate(I,E.leftEdge.leftVertex.leftEdge,E.leftEdge.leftVertex.pos,m,E.leftEdge.leftVertex.leftEdge.leftVertex.pos,E.leftEdge.leftVertex.pos,q,m,A),I;r&&r.leftVertex.leftEdge&&(E=r.leftVertex.leftEdge,this._checkForSnappingCandidate(I,E,r.leftVertex.pos,m,E.leftVertex.pos,r.leftVertex.pos,q,m,A));p&&p.rightVertex.rightEdge&&(r=p.rightVertex.rightEdge,this._checkForSnappingCandidate(I,r,p.rightVertex.pos,m,r.rightVertex.pos,
p.rightVertex.pos,q,m,A));return I};k._checkForSnappingCandidate=function(m,q,I,p,E,x,A,r,G){this.edgeExceedsShortLineThreshold(q,A)&&(B.subtract(this._tmp,q.rightVertex.pos,q.leftVertex.pos),q=g.fromValues(this._tmp[1],-this._tmp[0]),I=B.dot(q,B.subtract(this._tmp,p,I))/B.squaredLength(q),p=A.coordinateHelper,r=p.fromXYZ(B.scaleAndAdd(g.create(),x,q,I),p.getZ(r,0)),L.squareDistance(G,L.anyMapPointToScreenPoint(r,p,A.elevationInfo,this.view))<this.squaredProximityTreshold(A.pointer)&&m.push(new K.RightAngleSnappingCandidate({coordinateHelper:p,
targetPoint:r,constraint:new F.RayConstraint(p,x,B.scaleAndAdd(p.createVector(),x,q,Math.sign(I))),previousVertex:E,otherVertex:x,otherVertexType:K.OtherVertexType.CENTER})))};return y}(u.SnappingAlgorithm);d.RightAngleSnapper=u;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/RightAngleTriangleSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ./SnappingAlgorithm ./snappingUtils ./candidates/RightAngleTriangleSnappingCandidate ../../support/geometry2dUtils".split(" "),
function(d,h,c,B,g,u,F,L,K){u=function(M){function y(){return M.apply(this,arguments)||this}h._inheritsLoose(y,M);var k=y.prototype;k.snapNewVertex=function(m,q){const I=q.editGeometryOperations.data.components[0],p=[],E=I.vertices.length;if("polygon"!==q.editGeometryOperations.data.type||2>E)return p;this._processCandidateProposal(I.vertices[0].pos,I.vertices[E-1].pos,m,q,p);return p};k.snapExistingVertex=function(m,q){const I=[],p=c.unwrap(q.vertexHandle),E=p.component;if(2>E.edges.length||"polyline"===
q.editGeometryOperations.data.type&&(0===p.index||p.index===E.vertices.length-1))return I;this._processCandidateProposal(p.leftEdge.leftVertex.pos,p.rightEdge.rightVertex.pos,m,q,I);return I};k._processCandidateProposal=function(m,q,I,p,E){if(this.exceedsShortLineThreshold(m,q,p)){var x=B.lerp(g.create(),m,q,.5),A=.5*B.distance(m,q);A=K.projectPointToCircle(g.create(),I,x,A);x=p.coordinateHelper;A=x.fromXYZ(A,x.getZ(I,0));I=F.anyMapPointToScreenPoint(I,x,p.elevationInfo,this.view);F.squareDistance(I,
F.anyMapPointToScreenPoint(A,x,p.elevationInfo,this.view))<this.squaredProximityTreshold(p.pointer)&&E.push(new L.RightAngleTriangleSnappingCandidate({coordinateHelper:x,targetPoint:A,point1:m,point2:q}))}};return y}(u.SnappingAlgorithm);d.RightAngleTriangleSnapper=u;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/RightAngleTriangleSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../SnappingConstraint ../snappingUtils ./SnappingCandidate ../hints/LineSnappingHint ../hints/RightAngleSnappingHint".split(" "),
function(d,h,c,B,g,u,F,L,K){F=function(y){function k({coordinateHelper:m,targetPoint:q,point1:I,point2:p}){m=y.call(this,m,q,new g.PlanarCircleConstraint(m,c.lerp(M,I,p,.5),.5*c.distance(I,p)))||this;m.p1=I;m.p2=p;return m}h._inheritsLoose(k,y);h._createClass(k,[{key:"hints",get:function(){return[new L.LineSnappingHint(u.LineSegmentHintType.REFERENCE,this.targetPoint,this.p1),new L.LineSnappingHint(u.LineSegmentHintType.REFERENCE,this.targetPoint,this.p2),new K.RightAngleSnappingHint(this.p1,this.targetPoint,
this.p2)]}}]);return k}(F.SnappingCandidate);const M=B.create();d.RightAngleTriangleSnappingCandidate=F;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/IntersectionSnappingCandidate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../SnappingConstraint","./SnappingCandidate","../hints/IntersectionSnappingHint"],function(d,h,c,B,g){B=function(u){function F(L,K,M,y){L=u.call(this,L,K,new c.IntersectionConstraint(L,K,M.constraint,
y.constraint))||this;L.first=M;L.second=y;return L}h._inheritsLoose(F,u);h._createClass(F,[{key:"hints",get:function(){this.first.targetPoint=this.targetPoint;this.second.targetPoint=this.targetPoint;return[...this.first.hints,...this.second.hints,new g.IntersectionSnappingHint(this.targetPoint)]}}]);return F}(B.SnappingCandidate);d.IntersectionSnappingCandidate=B;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/IntersectionSnappingHint":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../snappingUtils","./SnappingHint"],function(d,h,c,B){B=function(g){function u(F){var L=g.call(this)||this;L.intersectionPoint=F;return L}h._inheritsLoose(u,g);u.prototype.equals=function(F){return F instanceof u?c.objectEqual(this.intersectionPoint,F.intersectionPoint):!1};return u}(B.SnappingHint);d.IntersectionSnappingHint=B;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/widgets/Sketch/support/OperationHandle":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/compilerUtils ../../../core/Evented ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(d,h,c,B,g,u,F,L,K,M){d.OperationHandle=function(y){function k(q){q=y.call(this,q)||this;q.cancelled=!1;q.history={undo:[],redo:[]};q.type=null;return q}h._inheritsLoose(k,y);var m=k.prototype;m.addToHistory=function(q){this.history.redo=[];this.history.undo.push(q)};m.resetHistory=function(){this.history.redo=[];this.history.undo=[]};m.canUndo=function(){return 0<this.history.undo.length};m.canRedo=function(){return 0<this.history.redo.length};m.complete=function(){this._reset();this.onEnd();
this.emit("complete")};m.cancel=function(){this.cancelled=!0;this.complete()};m._reset=function(){this.activeComponent.reset()};m.refreshComponent=function(){const q=this.activeComponent;q&&("box"!==q.type&&"reshape"!==q.type&&"graphic-mover"!==q.type||q.refresh())};h._createClass(k,[{key:"tool",get:function(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case "graphic-mover":case "move-3d":return"move";case "box":case "transform-3d":return"transform";case "reshape":case "reshape-3d":return"reshape";
case "draw-2d":case "draw-3d":return this.activeComponent.geometryType;default:B.neverReached(this.activeComponent)}return null}},{key:"undo",set:function(q){this._set("undo",()=>{this.canUndo()&&q()})}},{key:"redo",set:function(q){this._set("redo",()=>{this.canRedo()&&q()})}}]);return k}(g.EventedAccessor);c.__decorate([u.property()],d.OperationHandle.prototype,"activeComponent",void 0);c.__decorate([u.property()],d.OperationHandle.prototype,"cancelled",void 0);c.__decorate([u.property()],d.OperationHandle.prototype,
"history",void 0);c.__decorate([u.property()],d.OperationHandle.prototype,"tool",null);c.__decorate([u.property()],d.OperationHandle.prototype,"type",void 0);c.__decorate([u.property()],d.OperationHandle.prototype,"canUndo",null);c.__decorate([u.property()],d.OperationHandle.prototype,"canRedo",null);c.__decorate([u.property()],d.OperationHandle.prototype,"onEnd",void 0);c.__decorate([u.property()],d.OperationHandle.prototype,"undo",null);c.__decorate([u.property()],d.OperationHandle.prototype,"redo",
null);c.__decorate([u.property()],d.OperationHandle.prototype,"toggleTool",void 0);c.__decorate([u.property()],d.OperationHandle.prototype,"addToSelection",void 0);c.__decorate([u.property()],d.OperationHandle.prototype,"removeFromSelection",void 0);d.OperationHandle=c.__decorate([M.subclass("esri.widgets.Sketch.support.OperationHandle")],d.OperationHandle);d.CreateOperationHandle=function(y){function k(){return y.apply(this,arguments)||this}h._inheritsLoose(k,y);return k}(d.OperationHandle);c.__decorate([u.property()],
d.CreateOperationHandle.prototype,"activeComponent",void 0);d.CreateOperationHandle=c.__decorate([M.subclass("esri.widgets.Sketch.support.CreateOperationHandle")],d.CreateOperationHandle);d.UpdateOperationHandle=function(y){function k(m){return y.call(this,m)||this}h._inheritsLoose(k,y);return k}(d.OperationHandle);c.__decorate([u.property()],d.UpdateOperationHandle.prototype,"activeComponent",void 0);d.UpdateOperationHandle=c.__decorate([M.subclass("esri.widgets.Sketch.support.UpdateOperationHandle")],
d.UpdateOperationHandle);Object.defineProperty(d,"__esModule",{value:!0})})},"esri/widgets/support/SnappingControls":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./widgetUtils ./decorators/messageBundle ../../core/Logger ./jsxFactory ./SnappingControls/SnappingControlsViewModel".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p){const E={header:!0,enabledToggle:!0,selfEnabledToggle:!0,featureEnabledToggle:!0,layerList:!0};u=function(x){function A(G,H){H=x.call(this,(()=>{const {view:w,viewModel:e,snappingOptions:z,...S}=G;return S})(),H)||this;H.label=void 0;H.messages=null;H.messagesCommon=null;H.snappingOptions=null;H.view=null;H.visibleElements={...E};H._defaultViewModel=null;null!=G&&G.viewModel?H.viewModel=G.viewModel:(H._defaultViewModel=new p({snappingOptions:G.snappingOptions,
view:G.view}),H.viewModel=H._defaultViewModel);return H}h._inheritsLoose(A,x);var r=A.prototype;r.destroy=function(){this._defaultViewModel=B.destroyMaybe(this._defaultViewModel)};r.loadDependencies=function(){return Promise.all([new Promise((G,H)=>d(["../../chunks/calcite-action"],G,H)),new Promise((G,H)=>d(["../../chunks/calcite-block"],G,H)),new Promise((G,H)=>d(["../../chunks/calcite-icon"],G,H)),new Promise((G,H)=>d(["../../chunks/calcite-label"],G,H)),new Promise((G,H)=>d(["../../chunks/calcite-panel"],
G,H)),new Promise((G,H)=>d(["../../chunks/calcite-pick-list"],G,H)),new Promise((G,H)=>d(["../../chunks/calcite-pick-list-item"],G,H)),new Promise((G,H)=>d(["../../chunks/calcite-switch"],G,H))])};r.castVisibleElements=function(G){return{...E,...G}};r.render=function(){const {label:G,visibleElements:{header:H}}=this;return I.tsx("div",{"aria-label":G,class:this.classes("esri-snapping-controls","esri-widget")},I.tsx("div",{class:"esri-snapping-controls__container"},H?this.renderHeaderView():this.renderContent()))};
r.renderHeaderView=function(){return I.tsx("calcite-panel",{heading:this.label,class:"esri-snapping-controls__panel"},this.renderContent())};r.renderContent=function(){return[this.renderToggles(),this.renderLayerList()]};r.renderToggles=function(){return I.tsx("calcite-block",{class:"esri-snapping-controls__toggle-block",heading:"",open:!0},this.renderEnabledToggle(),I.tsx("div",{class:"esri-snapping-controls__nested-container"},this.renderSelfEnabledToggle(),this.renderFeatureEnabledToggle()))};
r.renderEnabledToggle=function(){if(this.visibleElements.enabledToggle){var {messages:{enableSnapping:G},viewModel:{snappingOptions:{enabled:H,enabledToggled:w}}}=this;return I.tsx("calcite-label",{layout:"inline-space-between"},G,I.tsx("calcite-switch",{checked:H,disabled:w,bind:this,onCalciteSwitchChange:this._enableSnappingSwitchChange}))}};r.renderSelfEnabledToggle=function(){if(this.visibleElements.selfEnabledToggle){var {messages:{geometryGuides:G},viewModel:{snappingOptions:{enabled:H,selfEnabled:w,
enabledToggled:e}}}=this;return I.tsx("calcite-label",{layout:"inline-space-between"},G,I.tsx("calcite-switch",{checked:w,disabled:e||!H,bind:this,onCalciteSwitchChange:this._selfEnabledSwitchChange}))}};r.renderFeatureEnabledToggle=function(){if(this.visibleElements.featureEnabledToggle){var {messages:{featureToFeature:G},viewModel:{snappingOptions:{enabled:H,featureEnabled:w,enabledToggled:e}}}=this;return I.tsx("calcite-label",{layout:"inline-space-between"},G,I.tsx("calcite-switch",{checked:w,
disabled:e||!H,bind:this,onCalciteSwitchChange:this._featureEnabledSwitchChange}))}};r.renderLayerList=function(){if(this.visibleElements.layerList){var {messages:{snappingLayers:G,searchLayers:H}}=this;return I.tsx("calcite-block",{heading:G,class:"esri-snapping-controls__layer-list-block",open:!0,collapsible:!0},I.tsx("calcite-pick-list",{class:"esri-snapping-controls__layer-list",multiple:!0,bind:this,onCalciteListChange:this._layerListChange,filterEnabled:10<=this.viewModel.layerListViewModel.operationalItems.length,
"filter-placeholder":H},this.renderLayerListItemCollection(this.viewModel.layerListViewModel.operationalItems)))}};r.renderLayerListItemCollection=function(G){return G.map(H=>0<H.children.length?this.renderLayerListItemGroup(H):this.renderLayerListItem(H)).toArray()};r.renderLayerListItem=function(G){var H,{messages:{untitledLayer:w}}=this;w=G.title||w;const e=0<(null==(H=G.children)?void 0:H.length);return I.tsx("calcite-pick-list-item",{slot:e?"parent-item":null,key:`${this.id}-pick-list-item-${G.uid}`,
label:w,value:G.layer.id,selected:G.enabled})};r.renderLayerListItemGroup=function(G){return I.tsx("calcite-pick-list-group",{"group-title":G.title||this.messages.untitledLayer,key:G.uid},[...this.renderLayerListItemCollection(G.children)])};r._enableSnappingSwitchChange=function(G){this.snappingOptions.enabled=G.target.checked};r._featureEnabledSwitchChange=function(G){this.snappingOptions.featureEnabled=G.target.checked};r._selfEnabledSwitchChange=function(G){this.snappingOptions.selfEnabled=G.target.checked};
r._layerListChange=function(){var G=h._asyncToGenerator(function*(H){H=yield H.target.getSelectedItems();this.viewModel.updateEnabledFeatureSources([...H.keys()])});return function(H){return G.apply(this,arguments)}}();h._createClass(A,[{key:"viewModel",set:function(G){if(G!==this._get("viewModel")){if(B.isNone(this._defaultViewModel)||this._defaultViewModel!==G)this._defaultViewModel=B.destroyMaybe(this._defaultViewModel);this._set("viewModel",G)}}}]);return A}(y);c.__decorate([K.property({aliasOf:{source:"messages.widgetLabel",
overridable:!0}})],u.prototype,"label",void 0);c.__decorate([K.property(),m.messageBundle("esri/widgets/support/SnappingControls/t9n/SnappingControls")],u.prototype,"messages",void 0);c.__decorate([K.property(),m.messageBundle("esri/t9n/common")],u.prototype,"messagesCommon",void 0);c.__decorate([g.aliasOf("viewModel.snappingOptions")],u.prototype,"snappingOptions",void 0);c.__decorate([g.aliasOf("viewModel.view")],u.prototype,"view",void 0);c.__decorate([K.property()],u.prototype,"viewModel",null);
c.__decorate([K.property()],u.prototype,"visibleElements",void 0);c.__decorate([L.cast("visibleElements")],u.prototype,"castVisibleElements",null);return u=c.__decorate([M.subclass("esri.widgets.support.SnappingControls")],u)})},"esri/widgets/support/SnappingControls/SnappingControlsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/HandleOwner ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../LayerList/support/layerListUtils ./SnappingLayerListViewModel".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k){c=function(m){function q(p){p=m.call(this,p)||this;p.layerListViewModel=new k.SnappingLayerListViewModel;p.snappingOptions=null;p.view=null;return p}d._inheritsLoose(q,m);var I=q.prototype;I.initialize=function(){this.handles.add([g.init(this,"view",p=>{this.layerListViewModel.view=p}),g.init(this,"snappingOptions.featureSources",()=>{this.layerListViewModel.featureSnappingSources=this.snappingOptions.featureSources})])};I.updateEnabledFeatureSources=function(p){for(const E of this.snappingOptions.featureSources)y.canDisplayLayer(E.layer)&&
(E.enabled=p.includes(E.layer.id))};d._createClass(q,[{key:"state",get:function(){return this.get("snappingOptions")?"ready":"disabled"}}]);return q}(B.HandleOwnerMixin(c));h.__decorate([u.property({constructOnly:!0})],c.prototype,"layerListViewModel",void 0);h.__decorate([u.property({constructOnly:!0})],c.prototype,"snappingOptions",void 0);h.__decorate([u.property()],c.prototype,"state",null);h.__decorate([u.property({constructOnly:!0})],c.prototype,"view",void 0);return c=h.__decorate([M.subclass("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],
c)})},"esri/widgets/LayerList/support/layerListUtils":function(){define(["exports"],function(d){function h(K){if(K)return null!=K.listMode?K.listMode:void 0}function c(K){if(K)return null!=K.minScale?K.minScale:void 0}function B(K){if(K)return null!=K.maxScale?K.maxScale:void 0}function g(K){if(K){if(!("type"in K))return"sublayers";if(K.listMode!==L.hideChildren&&"wmts"!==K.type)switch(K.type){case "group":return"layers";case "analysis":return"analyses";default:return"sublayers"}}}function u(K,M){K&&
K.sort((y,k)=>{y=M.indexOf(y.uid);k=M.indexOf(k.uid);return y>k?-1:y<k?1:0})}function F(K){return!(null==K||!K.layer)}const L={hide:"hide",hideChildren:"hide-children"};d.canDisplayLayer=function(K){return h(K)!==L.hide};d.canSortSublayers=function(K){K=K&&(K.get("layer.layer")||K.layer);if(!K)return!1;K=K.get("capabilities.exportMap.supportsDynamicLayers");return"boolean"===typeof K?K:!0};d.findLayerListMode=h;d.findLayerMaxScale=B;d.findLayerMinScale=c;d.findLayerVisibilityMode=function(K){if(!K)return"inherited";
var M=K.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"===typeof M)return M?"independent":"inherited";M=K.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"===typeof M?M?"independent":"inherited":null!=K.visibilityMode?K.visibilityMode:"independent"};d.findSelectedItem=function(K,M){var y;const k=null==(y=K.layer)?void 0:y.uid;return k&&M.find(m=>{var q;return(null==(q=m.layer)?void 0:q.uid)===k})};d.getItemLayers=function(K){return(K=null==K?void 0:
K.layer)&&"group"===K.type?K.layers:null};d.getLegendLayerInfo=function(K){var M=F(K)?K:null;const y=null==K?void 0:K.parent;return(M="map-image"===(null==y?void 0:y.type)&&M.source)&&y?{layer:y,title:"",sublayerIds:[M.mapLayerId]}:{layer:K,title:""}};d.getNormalizedChildLayerProperty=g;d.isLayerOutsideScaleRange=function(K,M){if(!K||isNaN(M))return!1;var y=c(K);K=B(K);y=!isNaN(y)&&0<y&&M>y;M=!isNaN(K)&&0<K&&M<K;return y||M};d.isSublayer=F;d.sortChildLayersToIds=function(K,M){if(K=null==K?void 0:
K.layer){var y=g(K);y&&(K=K.get(y),u(K,M))}};d.sortLayersToIds=u;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/widgets/support/SnappingControls/SnappingLayerListViewModel":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../views/interactive/snapping/FeatureSnappingLayerSource ../../LayerList/LayerListViewModel ./snappingLayerListUtils ./SnappingListItem".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m){d.SnappingLayerListViewModel=function(I){function p(){var x=I.apply(this,arguments)||this;x.featureSnappingSources=new B;return x}h._inheritsLoose(p,I);var E=p.prototype;E._compileList=function(){var x=this.get("view.map.layers");x&&(x=x.filter(k.isValidSnappingLayer),this._watchLayersListMode(x),(x=this._getViewableLayers(x))&&x.length?(this._createNewItems(x),this._removeItems(x),this._sortItems(x),this._beforeCallListItemsCreated()):this._removeAllItems())};
E._createListItem=function(x){const {view:A}=this,r=q(this.featureSnappingSources,x);x=new m.SnappingListItem({layer:x,view:A,featureSource:r});for(const G of x.children)G.featureSource=q(this.featureSnappingSources,G.layer);this._watchItemProperties(x);return x};h._createClass(p,[{key:"operationalItemsFlat",get:function(){return this.operationalItems.flatten(x=>x.children)}}]);return p}(y);c.__decorate([g.property()],d.SnappingLayerListViewModel.prototype,"featureSnappingSources",void 0);c.__decorate([g.property()],
d.SnappingLayerListViewModel.prototype,"operationalItems",void 0);d.SnappingLayerListViewModel=c.__decorate([K.subclass("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],d.SnappingLayerListViewModel);const q=(I,p)=>{if(!k.isValidSnappingLayerSource(p))return null;let E=I.find(x=>x.layer===p);E||(E=new M({layer:p,enabled:!1}),I.add(E));return E};Object.defineProperty(d,"__esModule",{value:!0})})},"esri/widgets/LayerList/LayerListViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/Evented ../../core/Handles ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ListItem ./support/layerListUtils".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q){const I=c.ofType(m);c=function(p){function E(A){var r=p.call(this,A)||this;r._handles=new g;r.listItemCreatedFunction=null;r.operationalItems=new I;r.view=null;r._callListItemsCreatedDebounced=u.debounce(d._asyncToGenerator(function*(){return r._callListItemsCreated()}),300);return r}d._inheritsLoose(E,p);var x=E.prototype;x.initialize=function(){this._handles.add(F.init(this,["view","view.ready"],()=>this._viewHandles()),"view")};x.destroy=function(){this._handles.destroy();
this.view=this._handles=null;this.operationalItems.removeAll()};x.triggerAction=function(A,r){A&&!A.disabled&&this.emit("trigger-action",{action:A,item:r})};x.moveListItem=function(A,r,G,H){var w,e;const z=null==A?void 0:A.layer;if(z){var S=null==(w=this.view)?void 0:null==(e=w.map)?void 0:e.layers;w=r?q.getItemLayers(r):S;S=G?q.getItemLayers(G):S;w&&S&&({operationalItems:e}=this,r=(null==r?void 0:r.children)||e,e=(null==G?void 0:G.children)||e,H=S.length-H,A.parent=G||null,r.includes(A)&&r.remove(A),
w.includes(z)&&w.remove(z),e.includes(A)||e.add(A,H),S.includes(z)||S.add(z,H))}};x._createLayerViewHandles=function(A){const {_handles:r}=this;r.remove("layer-views");this._compileList();A&&r.add(A.on("change",()=>this._compileList()),"layer-views")};x._createMapLayerHandles=function(A){const {_handles:r}=this;r.remove("map-layers");this._compileList();A&&r.add(A.on("change",()=>this._compileList()),"map-layers")};x._watchItemProperties=function(A){this._watchItemChildren(A,`${"children"}-${A.uid}`)};
x._watchItemChildren=function(A,r){this._handles.add([A.children.on("change",()=>{this._callListItemCreatedChildren(A.children)})],r);A.children.forEach(G=>this._watchItemChildren(G,r))};x._callListItemCreatedChildren=function(A){A.forEach(r=>this._callListItemCreated(r))};x._callListItemCreated=function(A){"function"===typeof this.listItemCreatedFunction&&this.listItemCreatedFunction.call(null,{item:A});this._callListItemCreatedChildren(A.children)};x._createListItem=function(A){const {view:r}=this;
A=new m({layer:A,view:r});this._watchItemProperties(A);return A};x._removeAllItems=function(){const {_handles:A,operationalItems:r}=this;r.forEach(G=>{A.remove(`${"children"}-${G.uid}`)});r.removeAll()};x._getViewableLayers=function(A){if(A)return A.filter(r=>"hide"!==q.findLayerListMode(r))};x._watchLayersListMode=function(A){const {_handles:r}=this;r.remove("layer-list-mode");A&&A.forEach(G=>{r.add(F.watch(G,"listMode",()=>this._compileList()),"layer-list-mode")})};x._compileList=function(){var A=
this.get("view.map.layers");this._watchLayersListMode(A);(A=this._getViewableLayers(A))&&A.length?(this._createNewItems(A),this._removeItems(A),this._sortItems(A),this._beforeCallListItemsCreated()):this._removeAllItems()};x._beforeCallListItemsCreated=function(){var A=d._asyncToGenerator(function*(){return this._callListItemsCreatedDebounced().catch(u.throwIfNotAbortError)});return function(){return A.apply(this,arguments)}}();x._callListItemsCreated=function(){var A=d._asyncToGenerator(function*(){var r;
yield null==(r=this.view)?void 0:r.when();this.operationalItems.forEach(G=>this._callListItemCreated(G))});return function(){return A.apply(this,arguments)}}();x._createNewItems=function(A){const {operationalItems:r}=this;A.forEach(G=>{r.find(H=>H.layer===G)||r.add(this._createListItem(G))})};x._removeItems=function(A){const {_handles:r,operationalItems:G}=this,H=[];G.forEach(w=>{w&&A&&A.find(e=>w.layer===e)||(r.remove(`${"children"}-${w.uid}`),H.push(w))});G.removeMany(H)};x._sortItems=function(A){const {operationalItems:r}=
this;r.sort((G,H)=>{G=A.indexOf(G.layer);H=A.indexOf(H.layer);return G>H?-1:G<H?1:0})};x._viewHandles=function(){const {_handles:A,view:r}=this;A.remove(["map-layers","layer-views","view-layers"]);this._compileList();r&&r.ready&&A.add([F.init(this,"view.map.allLayers",G=>this._createMapLayerHandles(G)),F.init(this,"view.allLayerViews",G=>this._createLayerViewHandles(G)),F.init(this,"listItemCreatedFunction",()=>this._compileList())],"view-layers")};d._createClass(E,[{key:"state",get:function(){const A=
this.get("view");return this.get("view.ready")?"ready":A?"loading":"disabled"}}]);return E}(B.EventedAccessor);h.__decorate([L.property()],c.prototype,"listItemCreatedFunction",void 0);h.__decorate([L.property({type:I})],c.prototype,"operationalItems",void 0);h.__decorate([L.property({readOnly:!0})],c.prototype,"state",null);h.__decorate([L.property()],c.prototype,"view",void 0);return c=h.__decorate([k.subclass("esri.widgets.LayerList.LayerListViewModel")],c)})},"esri/widgets/LayerList/ListItem":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/HandleOwner ../../core/Identifiable ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionSlider ../../support/actions/ActionToggle ./ListItemPanel ./support/layerListUtils".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I,p,E,x,A){var r;K=B.ofType({key:"type",defaultKeyValue:"button",base:q,typeMap:{button:I,toggle:E,slider:p}});const G=B.ofType(K);c=r=function(H){function w(z){z=H.call(this,z)||this;z.actionsSections=new G;z.actionsOpen=!1;z.children=new (B.ofType(r));z.childrenSortable=!0;z.error=null;z.layer=null;z.layerView=null;z.open=!1;z.panel=null;z.parent=null;z.sortable=!0;z.view=null;z.visible=null;return z}d._inheritsLoose(w,H);var e=w.prototype;e.initialize=function(){this.handles.add([F.init(this,
"layer",z=>this._watchLayerProperties(z)),F.init(this,"view",z=>this._updateChildren(z)),F.init(this,"panel",z=>this._setListItemOnPanel(z)),F.init(this,["layer","view"],()=>this._getLayerView())])};e.destroy=function(){this.view=null};e.castPanel=function(z){this.get("panel.open")&&!z.hasOwnProperty("open")&&(z.open=!0);return z?new x(z):null};e.clone=function(){return new r({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,children:this.children.clone(),layer:this.layer,
open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})};e._setListItemOnPanel=function(z){z&&(z.listItem=this)};e._updateChildren=function(z){const S=this.children;S&&S.forEach(J=>J.view=z)};e._addChildren=function(z){this.handles.remove("child-list-mode");this.children.removeAll();if(z){z.forEach(J=>{this.handles.add(F.watch(J,"listMode",()=>this._addChildren(z)),"child-list-mode")});var S=z.filter(J=>"hide"!==A.findLayerListMode(J));this.children.addMany(this._makeChildren(S))}};
e._watchSublayerChanges=function(z){z&&this.handles.add(z.on("change",()=>{this._addChildren(z)}),"layer")};e._initializeChildLayers=function(z){this._addChildren(z);this._watchSublayerChanges(z)};e._makeChildren=function(z){return z.map(S=>A.canDisplayLayer(S)?new r({layer:S,parent:this,view:this.view}):null).reverse()};e._watchLayerProperties=function(z){if(this.handles&&(this.handles.remove("layer"),this.handles.remove("child-list-mode"),z))if(this.handles.add(F.watch(z,"listMode",()=>this._watchLayerProperties(z)),
"layer"),"hide-children"===A.findLayerListMode(z))this.children.removeAll();else{var S=A.getNormalizedChildLayerProperty(z);S&&this.handles.add(F.init(z,S,()=>{z.hasOwnProperty(S)&&this._initializeChildLayers(z[S])}),"layer")}};e._getLayerView=function(){var z=d._asyncToGenerator(function*(){const {layer:S,view:J}=this;if(S&&J)try{const O=yield J.whenLayerView(S);O.layer===this.layer&&this._set("layerView",O)}catch{}});return function(){return z.apply(this,arguments)}}();e._isLayerUpdating=function(z){return z&&
"loading"===z.loadStatus};d._createClass(w,[{key:"incompatible",get:function(){const {layerView:z}=this;return z&&"spatialReferenceSupported"in z?!z.spatialReferenceSupported:!1}},{key:"title",get:function(){const z=this.get("layer.layer");return(!z||z&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""},set:function(z){void 0===z?this._clearOverride("title"):this._override("title",z)}},{key:"updating",get:function(){const z=this.layerView;return z?z.updating:
this._isLayerUpdating(this.layer)}},{key:"visibleAtCurrentScale",get:function(){return!A.isLayerOutsideScaleRange(this.layer,this.get("view.scale"))}},{key:"visibilityMode",get:function(){return A.findLayerVisibilityMode(this.layer)}}]);return w}(u.IdentifiableMixin(g.HandleOwnerMixin(c)));h.__decorate([k.property({type:G})],c.prototype,"actionsSections",void 0);h.__decorate([k.property()],c.prototype,"actionsOpen",void 0);h.__decorate([k.property({type:B})],c.prototype,"children",void 0);h.__decorate([k.property()],
c.prototype,"childrenSortable",void 0);h.__decorate([L.aliasOf("layer.loadError?")],c.prototype,"error",void 0);h.__decorate([k.property({readOnly:!0})],c.prototype,"incompatible",null);h.__decorate([k.property()],c.prototype,"layer",void 0);h.__decorate([k.property({readOnly:!0})],c.prototype,"layerView",void 0);h.__decorate([k.property()],c.prototype,"open",void 0);h.__decorate([k.property({type:x})],c.prototype,"panel",void 0);h.__decorate([y.cast("panel")],c.prototype,"castPanel",null);h.__decorate([k.property()],
c.prototype,"parent",void 0);h.__decorate([k.property()],c.prototype,"sortable",void 0);h.__decorate([k.property()],c.prototype,"title",null);h.__decorate([k.property({readOnly:!0})],c.prototype,"updating",null);h.__decorate([k.property({value:null})],c.prototype,"view",void 0);h.__decorate([L.aliasOf("layer.visible")],c.prototype,"visible",void 0);h.__decorate([k.property({readOnly:!0})],c.prototype,"visibleAtCurrentScale",null);h.__decorate([k.property({readOnly:!0})],c.prototype,"visibilityMode",
null);return c=r=h.__decorate([m.subclass("esri.widgets.LayerList.ListItem")],c)})},"esri/support/actions/ActionSlider":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ActionBase".split(" "),function(d,h,c,B,g,u,F,L){var K;B=K=function(M){function y(k){k=M.call(this,k)||this;k.displayValueEnabled=
!1;k.max=1;k.min=0;k.step=.1;k.type="slider";k.value=null;return k}d._inheritsLoose(y,M);y.prototype.clone=function(){return new K({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})};return y}(L);h.__decorate([c.property()],B.prototype,"displayValueEnabled",void 0);h.__decorate([c.property()],B.prototype,
"max",void 0);h.__decorate([c.property()],B.prototype,"min",void 0);h.__decorate([c.property()],B.prototype,"step",void 0);h.__decorate([c.property()],B.prototype,"value",void 0);return B=K=h.__decorate([F.subclass("esri.support.Action.ActionSlider")],B)})},"esri/widgets/LayerList/ListItemPanel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Handles ../../core/Identifiable ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./support/layerListUtils ../support/widget ../support/jsxFactory".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k,m,q,I){g=function(p){function E(A,r){A=p.call(this,A,r)||this;A._legend=null;A._handles=new B;A.content=null;A.image=null;A.listItem=null;A.open=!1;A.visible=!0;return A}h._inheritsLoose(E,p);var x=E.prototype;x.initialize=function(){this.own([u.init(this,"content",A=>this._createLegend(A))])};x.destroy=function(){const {_legend:A}=this;A&&A.destroy();this._legend=null};x.render=function(){return I.tsx("div",{class:"esri-layer-list-panel"},this._renderContents())};
x._renderContent=function(A){const {_legend:r,listItem:G}=this;return A?"legend"===A?G&&G.view&&G.layer&&r?I.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--legend"),key:r},r.render()):null:"string"===typeof A?I.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--string"),key:A,innerHTML:A}):q.isWidget(A)?I.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--widget"),
key:A},A.render()):A instanceof HTMLElement?I.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--html-element"),key:A,bind:A,afterCreate:this._attachToNode}):null:null};x._renderContents=function(){const {content:A}=this;return Array.isArray(A)?A.map(r=>this._renderContent(r)):this._renderContent(A)};x._getLegendOptions=function(){const {listItem:A}=this;if(!A)return{};const {layer:r,view:G}=A;return r&&G?{view:G,layerInfos:[m.getLegendLayerInfo(r)]}:{}};
x._createLegend=function(A){this._hasLegend(A)&&!this._legend&&(new Promise((r,G)=>d(["../Legend"],H=>r(Object.freeze({__proto__:null,default:H})),G))).then(({default:r})=>{const {_handles:G}=this,H=new r(this._getLegendOptions());this._legend=H;this.notifyChange("className");this.notifyChange("title");r=u.init(this,["listItem.view","listItem.layer","listItem.layer.source","listItem.layer.parent"],()=>this._updateLegend(H));G.add(r,"legends");this.scheduleRender()})};x._hasLegend=function(A){return"legend"===
A?!0:Array.isArray(A)?A.some(r=>"legend"===r):!1};x._attachToNode=function(A){A.appendChild(this)};x._updateLegend=function(A){A.set(this._getLegendOptions());this.scheduleRender()};x._getWidget=function(A){return"legend"===A?this._legend:q.isWidget(A)?A:null};x._getFirstWidget=function(){const {content:A}=this;if(Array.isArray(A)){let r=null;A.some(G=>{(G=this._getWidget(G))&&(r=G);return!!G});return r}return this._getWidget(A)};h._createClass(E,[{key:"className",get:function(){const {image:A}=this,
r=this._getFirstWidget();return this._get("className")||!A&&r?r.iconClass:""},set:function(A){void 0===A?this._clearOverride("className"):this._override("className",A)}},{key:"title",get:function(){const A=this._getFirstWidget();return this._get("title")||A?A.label:""},set:function(A){void 0===A?this._clearOverride("title"):this._override("title",A)}}]);return E}(g.IdentifiableMixin(k));c.__decorate([F.property()],g.prototype,"className",null);c.__decorate([F.property()],g.prototype,"content",void 0);
c.__decorate([F.property()],g.prototype,"image",void 0);c.__decorate([F.property()],g.prototype,"listItem",void 0);c.__decorate([F.property()],g.prototype,"title",null);c.__decorate([F.property()],g.prototype,"open",void 0);c.__decorate([F.property()],g.prototype,"visible",void 0);return g=c.__decorate([y.subclass("esri.widgets.LayerList.ListItemPanel")],g)})},"esri/widgets/support/SnappingControls/snappingLayerListUtils":function(){define(["exports","../../../core/maybe","../../LayerList/support/layerListUtils"],
function(d,h,c){const B=F=>g(F)||u(F),g=F=>{if(!("type"in F))return!1;switch(F.type){case "feature":case "geojson":case "csv":case "graphics":case "wfs":return!0;default:return!1}},u=F=>{const L=c.getNormalizedChildLayerProperty(F);if(F.hasOwnProperty(L)&&h.isSome(F[L]))for(const K of F[L])if(B(K))return!0;return!1};d.isValidSnappingLayer=B;d.isValidSnappingLayerGroup=u;d.isValidSnappingLayerSource=g;Object.defineProperty(d,"__esModule",{value:!0})})},"esri/widgets/support/SnappingControls/SnappingListItem":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../LayerList/ListItem ../../LayerList/support/layerListUtils ./snappingLayerListUtils".split(" "),
function(d,h,c,B,g,u,F,L,K,M,y,k){var m;d.SnappingListItem=m=function(q){function I(){var E=q.apply(this,arguments)||this;E.featureSource=null;return E}h._inheritsLoose(I,q);var p=I.prototype;p._initializeChildLayers=function(E){E=E.filter(k.isValidSnappingLayer);q.prototype._initializeChildLayers.call(this,E)};p._makeChildren=function(E){return E.map(x=>y.canDisplayLayer(x)?new m({layer:x,parent:this,view:this.view}):null).reverse()};h._createClass(I,[{key:"enabled",get:function(){return B.isSome(this.featureSource)?
this.featureSource.enabled:!1}}]);return I}(M);c.__decorate([g.property()],d.SnappingListItem.prototype,"children",void 0);c.__decorate([g.property()],d.SnappingListItem.prototype,"enabled",null);c.__decorate([g.property()],d.SnappingListItem.prototype,"featureSource",void 0);c.__decorate([g.property()],d.SnappingListItem.prototype,"parent",void 0);d.SnappingListItem=m=c.__decorate([K.subclass("esri.widgets.support.SnappingControls.SnappingListItem")],d.SnappingListItem);Object.defineProperty(d,"__esModule",
{value:!0})})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/HandleOwner ../core/Logger ../core/maybe ../core/reactiveUtils ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ../layers/support/fieldUtils ../views/interactive/snapping/SnappingOptions ./Attachments ./FeatureForm ./FeatureTemplates ./Spinner ./Widget ./Editor/deprecationUtils ./Editor/EditorViewModel ./FeatureTemplates/ItemList ./support/Heading ./support/SnappingControls ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../intl/substitute".split(" "),function(d,
h,c,B,g,u,F,L,K,M,y,k,m,q,I,p,E,x,A,r,G,H,w,e,z,S,J,O,t,l,b,f,n){function P(v){v.focus()}const U={undoRedoButtons:!1},T=u.getLogger("esri.widgets.Editor");B=function(v){function N(W,ea){var da=v.call(this,W,ea)||this;da._candidateCommitted=!1;da._featureForm=new A;da._stateStack=[];da._attachments=new x({visibleElements:{addSubmitButton:!1,cancelAddButton:!1,cancelUpdateButton:!1,deleteButton:!1,errorMessage:!1,progressBar:!1,updateButton:!1}});da._featureTemplates=new r({enableListScroll:!1});da._filterText=
"";da._prompt=null;da._spinner=new G;da._snappingPopover=null;da.activeWorkflow=null;da.allowedWorkflows=null;da.useDeprecatedCreateWorkflow=!1;da.headingLevel=4;da.iconClass="esri-icon-edit";da.label=void 0;da.layerInfos=null;da.messages=null;da.messagesCommon=null;da.messagesTemplates=null;da.snappingOptions=new E;da.supportingWidgetDefaults=null;da.view=null;da.viewModel=new e;da.visibleElements={...U};da._setCandidateFeature=(qa,va=!1)=>{if(!da._candidateCommitted){var Ca=da._assertActiveUpdateWorkflow();
Ca.data.edits.feature=qa;va&&(Ca.next(),da._candidateCommitted=!0)}};da._handleSave=da._handleSave.bind(h._assertThisInitialized(da));da._handleBack=da._handleBack.bind(h._assertThisInitialized(da));da._handleDone=da._handleDone.bind(h._assertThisInitialized(da));da._handleDelete=da._handleDelete.bind(h._assertThisInitialized(da));da._handleAdd=da._handleAdd.bind(h._assertThisInitialized(da));da._handleEdit=da._handleEdit.bind(h._assertThisInitialized(da));da._handleAttachmentAdd=da._handleAttachmentAdd.bind(h._assertThisInitialized(da));
da._handleAttachmentUpdate=da._handleAttachmentUpdate.bind(h._assertThisInitialized(da));da._handleAttachmentDelete=da._handleAttachmentDelete.bind(h._assertThisInitialized(da));da.EditorPanel=da.EditorPanel.bind(h._assertThisInitialized(da));return da}h._inheritsLoose(N,v);var R=N.prototype;R.initialize=function(){const {view:W,snappingOptions:ea}=this;this._snappingControls=new J({snappingOptions:ea,view:W,visibleElements:{header:!1}});this.own([K.init(this,"headingLevel",da=>{this._featureForm.headingLevel=
S.incrementHeadingLevel(da);this._featureTemplates.headingLevel=S.incrementHeadingLevel(da)}),this.viewModel.featureTemplatesViewModel.on("select",({item:da})=>this.useDeprecatedCreateWorkflow?this.startCreateWorkflowAtFeatureCreation(da):this.startCreateFeaturesWorkflowAtFeatureCreation(da)),L.watch(()=>this.viewModel.state,(da,qa)=>{da=this._stateStack.indexOf(da);-1===da?this._stateStack.push(qa):this._stateStack.splice(da)}),K.init(this,"viewModel",da=>{this._featureForm.viewModel=da?da.featureFormViewModel:
null;this._attachments.viewModel=da?da.attachmentsViewModel:null;this._featureTemplates.viewModel=da?da.featureTemplatesViewModel:null;this._spinner.viewModel=da?da.spinnerViewModel:null}),K.init(this,"view",(da,qa)=>{const va=`editor-${this.id}-spinner`;qa&&qa.ui.remove(this._spinner,va);da&&da.ui.add(this._spinner,{key:va,position:"manual"})}),K.on(this,"viewModel.sketchViewModel","create",()=>{this.scheduleRender()}),K.on(this,"viewModel.activeWorkflow","cancel-request",({controller:da})=>{const {messages:qa,
messagesCommon:va}=this;this._prompt={title:qa.cancelRequestTitle,message:qa.cancelRequestWarningMessage,context:"danger",actions:{primary:{label:va.form.yes,action:()=>{da.allow();this._prompt=null}},secondary:{label:va.form.no,action:()=>{da.deny();return this._prompt=null}}}};this.scheduleRender()}),K.init(this,"supportingWidgetDefaults",da=>{da&&(this._featureForm.set(da.featureForm),this._attachments.set(da.attachments),this._featureTemplates.set(da.featureTemplates),this.viewModel.sketchViewModel.set(da.sketch))}),
K.watch(this,"_attachments.error",da=>{if(da){var {messages:qa,messagesCommon:va}=this;this._prompt={title:qa.errorWarningTitle,message:da.message,context:"warning",actions:{primary:{label:va.form.ok,action:()=>{this._prompt=null}}}}}}),K.watch(this,"viewModel.failures",da=>{if(da){var {messages:qa}=this,[{error:va,retry:Ca,cancel:Ba}]=da;this._prompt={title:qa.errorWarningTitle,message:n.substitute(qa.errorWarningMessageTemplate,{errorMessage:va.message}),context:"warning",actions:{primary:{label:qa.retry,
action:()=>{Ca();this._prompt=null}},secondary:{label:qa.ignore,action:()=>{Ba();return this._prompt=null}}}}}}),K.watch(this,"viewModel.state",da=>{"awaiting-feature-to-update"===da&&(this._filterText="");"awaiting-update-feature-candidate"===da&&(this._candidateCommitted=!1)}),K.watch(this,["_attachments.selectedFile","_attachments.submitting"],()=>this.scheduleRender()),K.whenNot(this,"viewModel.activeWorkflow",()=>this._featureTemplates.filterText="")])};R.destroy=function(){this._attachments.destroy();
this._featureForm.destroy();this._featureTemplates.destroy();this._snappingControls.destroy()};R.loadDependencies=function(){return Promise.all([new Promise((W,ea)=>d(["../chunks/calcite-action"],W,ea)),new Promise((W,ea)=>d(["../chunks/calcite-action-menu"],W,ea)),new Promise((W,ea)=>d(["../chunks/calcite-button"],W,ea)),new Promise((W,ea)=>d(["../chunks/calcite-flow"],W,ea)),new Promise((W,ea)=>d(["../chunks/calcite-icon"],W,ea)),new Promise((W,ea)=>d(["../chunks/calcite-loader"],W,ea)),new Promise((W,
ea)=>d(["../chunks/calcite-panel"],W,ea)),new Promise((W,ea)=>d(["../chunks/calcite-popover"],W,ea)),new Promise((W,ea)=>d(["../chunks/calcite-popover-manager"],W,ea)),new Promise((W,ea)=>d(["../chunks/calcite-scrim"],W,ea)),new Promise((W,ea)=>d(["../chunks/calcite-tooltip-manager"],W,ea))])};R.castVisibleElements=function(W){return{...U,...W}};R.startCreateWorkflowAtFeatureTypeSelection=function(){w.workflowDeprecation(T,"startCreateWorkflowAtFeatureTypeSelection","startCreateFeaturesWorkflowAtFeatureTypeSelection");
return this.viewModel.startCreateWorkflowAtFeatureTypeSelection()};R.startCreateFeaturesWorkflowAtFeatureTypeSelection=function(){return this.viewModel.startCreateFeaturesWorkflowAtFeatureTypeSelection()};R.startCreateWorkflowAtFeatureCreation=function(W){w.workflowDeprecation(T,"startCreateWorkflowAtFeatureCreation","startCreateFeaturesWorkflowAtFeatureCreation");return this.viewModel.startCreateWorkflowAtFeatureCreation(W)};R.startCreateFeaturesWorkflowAtFeatureCreation=function(W){return this.viewModel.startCreateFeaturesWorkflowAtFeatureCreation(W)};
R.startCreateWorkflowAtFeatureEdit=function(W){w.workflowDeprecation(T,"startCreateWorkflowAtFeatureEdit");return this.viewModel.startCreateWorkflowAtFeatureEdit(W)};R.startUpdateWorkflowAtFeatureSelection=function(){return this.viewModel.startUpdateWorkflowAtFeatureSelection()};R.startUpdateWorkflowAtMultipleFeatureSelection=function(W){return this.viewModel.startUpdateWorkflowAtMultipleFeatureSelection(W)};R.startUpdateWorkflowAtFeatureEdit=function(W){return this.viewModel.startUpdateWorkflowAtFeatureEdit(W)};
R.deleteFeatureFromWorkflow=function(){return this.viewModel.deleteFeatureFromWorkflow()};R.cancelWorkflow=function(W){return this.viewModel.cancelWorkflow(W)};R.render=function(){const {_attachments:W,_prompt:ea,viewModel:da}=this;if(!da)return b.tsx("div",{class:"esri-editor esri-widget esri-widget--panel"});const {state:qa}=da,va=F.isSome(ea)?b.tsx("calcite-scrim",null,this.renderPrompt(ea)):null;return b.tsx("div",{class:"esri-editor esri-widget esri-widget--panel"},da.syncing||W.submitting?this.renderProgressBar():
null,b.tsx("calcite-flow",null,this._stateStack.map(Ca=>this.renderState(Ca)),this.renderState(qa)),va)};R.renderState=function(W){switch(W){case "ready":return this.renderLanding(W);case "awaiting-feature-creation-info":return this.renderTemplates(W);case "creating-features":case "editing-new-feature":case "editing-existing-feature":return this.renderAttributeEditing(W);case "awaiting-feature-to-update":return this.renderFeatureUpdating(W);case "awaiting-update-feature-candidate":return this.renderFeatureList(W);
case "awaiting-feature-to-create":return this.renderFeatureCreation(W);case "adding-attachment":return this.renderAttachmentAdding(W);case "editing-attachment":return this.renderAttachmentEditing(W)}return b.tsx("div",null)};R.isPanelActive=function(W){return this.viewModel.state===W};R.renderTemplates=function(W){const {EditorPanel:ea,headingLevel:da,messages:qa,messagesCommon:va,_handleBack:Ca,_snappingControls:Ba,viewModel:{sketchViewModel:ta}}=this;return b.tsx(ea,{active:this.isPanelActive(W),
key:"templates-panel",handleBack:Ca,heading:qa.selectTemplate,headingLevel:da,messages:qa,messagesCommon:va,sketchViewModel:ta,snappingControls:Ba},this._featureTemplates.render())};R.renderAttributeEditing=function(W){const {activeWorkflow:ea,EditorPanel:da,messages:qa,messagesCommon:va,headingLevel:Ca,_handleBack:Ba,_snappingControls:ta,viewModel:fa}=this,{sketchViewModel:la}=fa,ma=fa.featureFormViewModel;if("create-features"===ea.type&&1>ea.pendingFeatures.length)return this.renderFeatureCreation(W);
var aa="update"===ea.type&&!ea.data.edits.modified||fa.syncing;const ba="update"===ea.type?qa.editFeature:qa.createFeatures,ha="update"===ea.type?va.update:va.create,ka="create-features"===ea.type&&"create-new"===ea.createFeatureState;aa=[{label:"create-features"===ea.type&&1<ea.numPendingFeatures?n.substitute(qa.createFeaturesTemplate,{numFeatures:ea.numPendingFeatures}):ha,type:"primary",disabled:aa,clickHandler:this._handleSave}];let pa=!1;"update"===ea.type&&(ea.data.editableItem.hasAttachments&&
(pa=!0),ea.data.editableItem.supports.includes("delete")&&aa.push({label:va.delete,type:"tertiary",clickHandler:this._handleDelete}));return b.tsx(da,{active:this.isPanelActive(W),key:"attribute-editing-panel",heading:ba,headingLevel:Ca,showContentScrim:ka,handleBack:Ba,messages:qa,messagesCommon:va,sketchViewModel:la,snappingControls:ta},b.tsx("div",{class:"esri-editor__panel-content--section"},b.tsx("div",{class:"esri-editor__content-group"},0<ma.inputFields.length?this._featureForm.render():this.renderMessage(n.substitute(qa.clickToFinishTemplate,
{button:ha})),pa?b.tsx("div",{key:"attachments"},b.tsx("div",null,qa.attachments),this._attachments.render()):null)),b.tsx("div",{class:this._prompt?"":"esri-editor__scrim-overlay"},this.renderControls(aa)))};R.renderAttachmentAdding=function(W){const {_attachments:ea,EditorPanel:da,_handleBack:qa,headingLevel:va,messages:Ca,messagesCommon:Ba,_snappingControls:ta,viewModel:{sketchViewModel:fa}}=this,la=[{label:ea.submitting?Ba.cancel:Ba.add,disabled:ea.submitting||!ea.selectedFile,type:"primary",
clickHandler:this._handleAttachmentAdd}];return b.tsx(da,{active:this.isPanelActive(W),key:"attachment-adding-panel",heading:Ca.addAttachment,headingLevel:va,handleBack:qa,messages:Ca,messagesCommon:Ba,sketchViewModel:fa,snappingControls:ta},b.tsx("div",{class:this.classes("esri-editor__content","esri-editor__scroller")},ea.render()),this.renderControls(la))};R.renderAttachmentEditing=function(W){const {_attachments:ea,EditorPanel:da,_handleBack:qa,headingLevel:va,messages:Ca,messagesCommon:Ba,_snappingControls:ta,
viewModel:{sketchViewModel:fa}}=this,la=[{label:Ba.update,disabled:ea.submitting||!ea.selectedFile,type:"primary",clickHandler:this._handleAttachmentUpdate},{label:Ba.delete,disabled:ea.submitting,type:"tertiary",clickHandler:this._handleAttachmentDelete}];return b.tsx(da,{active:this.isPanelActive(W),key:"attachment-editing-panel",heading:Ca.editAttachment,headingLevel:va,handleBack:qa,messages:Ca,messagesCommon:Ba,sketchViewModel:fa,snappingControls:ta},b.tsx("div",{class:this.classes("esri-editor__content",
"esri-editor__scroller")},ea.render()),this.renderControls(la))};R.renderFeatureUpdating=function(W){const {EditorPanel:ea,_handleBack:da,headingLevel:qa,messages:va,messagesCommon:Ca,_snappingControls:Ba,viewModel:{sketchViewModel:ta}}=this;return b.tsx(ea,{active:this.isPanelActive(W),key:"feature-updating-panel",heading:va.selectFeature,headingLevel:qa,handleBack:da,messages:va,messagesCommon:Ca,sketchViewModel:ta,snappingControls:Ba},b.tsx("div",{class:this.classes("esri-editor__content","esri-editor__scroller")},
this.renderMessage(va.selectFeatureToEdit)))};R.renderMessage=function(W){return b.tsx("div",{class:"esri-editor__message"},W)};R.renderFeatureCreation=function(W){const {EditorPanel:ea,_handleBack:da,headingLevel:qa,messages:va,messagesCommon:Ca,_snappingControls:Ba,viewModel:ta}=this,{sketchViewModel:fa}=ta;var la=ta.sketchViewModel,ma=this._assertActiveCreateWorkflow().data.creationInfo.layer;la=la.canUndo()&&la.createGraphic?la.createGraphic:null;ma=this._getSketchingTip(ma.geometryType,la);return b.tsx(ea,
{active:this.isPanelActive(W),key:"feature-creation-panel",heading:va.placeFeature,headingLevel:qa,handleBack:da,messages:va,messagesCommon:Ca,sketchViewModel:fa,snappingControls:Ba},b.tsx("div",{class:this.classes("esri-editor__content","esri-editor__scroller")},this.renderMessage(ma)))};R.renderControls=function(W){return b.tsx("div",{class:"esri-editor__controls",key:"controls"},W.map(({disabled:ea=!1,label:da,type:qa,clickHandler:va},Ca)=>this.renderButton({label:da,class:this.classes("esri-editor__control-button",
"esri-button","secondary"===qa?"esri-button--secondary":"tertiary"===qa?"esri-button--tertiary":null,ea?"esri-button--disabled":null),disabled:ea,clickHandler:va,key:Ca})))};R.renderPrompt=function({title:W,message:ea,context:da,actions:qa}){const va=!!qa.secondary,Ca=b.tsx("calcite-button",{appearance:"solid",color:"danger"===da?"red":"blue",width:va?"half":"full",onclick:qa.primary.action,key:"prompt-primary-button",afterCreate:P},qa.primary.label);qa=va?b.tsx("calcite-button",{appearance:"clear",
color:"danger"===da?"red":"blue",width:"half",onclick:qa.secondary.action,key:"prompt-secondary-button"},qa.secondary.label):null;return b.tsx("div",{class:`${"esri-editor__prompt"}--${da}`},b.tsx("div",{class:"esri-editor__prompt__header"},b.tsx("calcite-icon",{icon:"exclamation-mark-triangle"}),b.tsx(S.Heading,{class:"esri-editor__prompt__header__heading",level:this.headingLevel},W)),b.tsx("div",{class:"esri-editor__prompt__message"},ea),b.tsx("div",{class:"esri-editor__prompt__divider"}),b.tsx("div",
{class:"esri-editor__prompt__actions"},qa,Ca))};R.renderProgressBar=function(){return b.tsx("div",{class:this.classes("esri-editor__progress-bar"),key:"progress-bar"})};R.renderButton=function(W){return b.tsx("button",{class:W.class,disabled:W.disabled,key:W.key,onclick:W.clickHandler,type:"button"},W.label)};R.renderLanding=function(W){const {EditorPanel:ea,headingLevel:da,messages:qa,messagesCommon:va,_snappingControls:Ca,viewModel:{sketchViewModel:Ba}}=this;return b.tsx(ea,{active:this.isPanelActive(W),
key:"landing-panel",heading:qa.widgetLabel,headingLevel:da,showBackButton:!1,messages:qa,messagesCommon:va,sketchViewModel:Ba,snappingControls:Ca},b.tsx("div",{key:"edit-actions",class:"esri-editor__panel-content--section"},this.renderUpdateActions()),b.tsx("div",{key:"create-actions",class:"esri-editor__panel-content--section"},this.renderCreateActions()))};R.renderUpdateActions=function(){const {messages:W,messagesCommon:ea}=this;return b.tsx("div",null,b.tsx(S.Heading,{level:S.incrementHeadingLevel(this.headingLevel)},
W.editFeatures),b.tsx("div",{class:"esri-editor__update-features-action-buttons"},b.tsx("calcite-action",{text:ea.select,textEnabled:!0,icon:"cursor",alignment:"start",class:"esri-editor__update-features-action-buttons--button",onclick:this._handleEdit})))};R.renderCreateActions=function(){const {messages:W}=this;return b.tsx("div",null,b.tsx(S.Heading,{level:S.incrementHeadingLevel(this.headingLevel)},W.createFeatures),b.tsx("div",{key:"templates",class:"esri-editor__feature-templates-container"},
this._featureTemplates.render()))};R.renderFeatureList=function(W){const {EditorPanel:ea,_handleBack:da,headingLevel:qa,messages:va,messagesCommon:Ca,messagesTemplates:Ba,_snappingControls:ta,viewModel:{editableItems:fa,sketchViewModel:la}}=this;var ma=this._assertActiveUpdateWorkflow().data.candidates;const aa=n.substitute(va.multipleFeaturesTemplate,{total:ma.length}),ba=new Map;let ha=0;ma.map(pa=>({label:this._getLabel(pa),id:pa.attributes[pa.layer.objectIdField],data:pa})).filter(pa=>{const {label:oa,
data:ra}=pa;pa=this._filterText.toLowerCase();const {title:Aa}=ra.layer;return-1<this.viewModel.editableItems.find(Fa=>Fa.layer===ra.layer).supports.indexOf("update")&&(!pa||-1<oa.toLowerCase().indexOf(pa)||-1<Aa.toLowerCase().indexOf(pa))}).forEach(pa=>{ha++;const oa=pa.data.layer;ba.has(oa)?ba.get(oa).items.push(pa):ba.set(oa,{id:`${oa.id}`,label:oa.title,items:[pa]})});ma=fa.filter(({layer:pa})=>ba.has(pa)).map(({layer:pa})=>ba.get(pa)).toArray();const ka=10<ha||0<this._filterText.length;return b.tsx(ea,
{active:this.isPanelActive(W),key:"feature-list",heading:aa,headingLevel:qa,handleBack:da,messages:va,messagesCommon:Ca,sketchViewModel:la,snappingControls:ta},z.ItemList({id:this.id,enableListScroll:!1,filterEnabled:ka,filterText:this._filterText,items:ma,messages:{filterPlaceholder:Ba.filterPlaceholder,noItems:Ba.noItems,noMatches:Ba.noMatches},onItemMouseEnter:({data:pa})=>this._setCandidateFeature(pa),onItemMouseLeave:()=>this._setCandidateFeature(null),onItemSelect:({data:pa})=>this._setCandidateFeature(pa,
!0),onFilterChange:pa=>this._filterText=pa}))};R.EditorPanel=function(W,...ea){const {active:da,handleBack:qa,heading:va,headingLevel:Ca,key:Ba,messages:ta,messagesCommon:fa,showBackButton:la,showContentScrim:ma,sketchViewModel:aa,snappingControls:ba}=W;return b.tsx("calcite-panel",{bind:this,key:Ba,heading:va,headingLevel:Ca,showBackButton:null!=la?la:!0,beforeBack:null!=qa?qa:null,onCalcitePanelScroll:this._onSnappingPopoverPanelScroll},b.tsx("calcite-popover-manager",{autoClose:da,class:"esri-editor__panel-toolbar"},
b.tsx("calcite-popover",{afterCreate:this._afterSnappingPopoverCreated,afterUpdate:this._afterSnappingPopoverUpdated,bind:this,label:ta.snappingSettings,heading:ta.snappingSettings,"reference-element":`${Ba}__snappingButton`,"overlay-positioning":"fixed",placement:"bottom"},b.tsx("div",{class:"esri-editor__snapping-controls-popover"},ba.render())),b.tsx("calcite-button",{id:`${Ba}__snappingButton`,text:ta.snapping,appearance:"transparent",color:"neutral",alignment:"icon-end-space-between","icon-start":"vertex-gps",
"icon-end":"caret-down",width:"full",class:"esri-editor__panel-toolbar__snapping-button"},ta.snapping),this.visibleElements.undoRedoButtons?[b.tsx("calcite-button",{key:"undo-button",text:fa.undo,appearance:"transparent",color:"neutral",alignment:"center","icon-start":"undo",scale:"l",disabled:!aa.canUndo(),onclick:aa.undo.bind(aa)}),b.tsx("calcite-button",{key:"redo-button",text:fa.redo,appearance:"transparent",color:"neutral",alignment:"center","icon-start":"redo",scale:"l",disabled:!aa.canRedo(),
onclick:aa.redo.bind(aa)})]:null),b.tsx("div",{class:f.classes("esri-editor__panel-content","esri-editor__scroller")},ea,ma?b.tsx("calcite-scrim",null):null))};R._onSnappingPopoverPanelScroll=function(){var W;null!=(W=this._snappingPopover)&&W.open&&this._snappingPopover.toggle()};R._afterSnappingPopoverCreated=function(W){this._snappingPopover=W};R._afterSnappingPopoverUpdated=function(W){this._snappingPopover=W};R._getSketchingTip=function(W,ea){const {messages:da}=this;if("point"===W)return da.tips.clickToAddPoint;
if("polygon"===W||"polyline"===W){if(!ea)return da.tips.clickToStart;[ea]=ea.geometry["polygon"===W?"rings":"paths"];return"polygon"===W&&4>ea?da.tips.clickToContinue:da.tips.clickToContinueThenDoubleClickToEnd}return da.tips.clickToAddFeature};R._getLabel=function(W){var ea=W.layer;if(!ea)return null;const {objectIdField:da}=ea;({attributes:W}=W);return(ea=p.getDisplayFieldName(ea))&&W[ea]&&`${W[ea]}`||n.substitute(this.messages.untitledFeatureTemplate,{id:W[da]})};R._handleDelete=function(){const {messages:W,
messagesCommon:ea}=this;this._prompt={title:W.deleteWarningTitle,message:W.deleteWarningMessage,context:"danger",actions:{primary:{label:ea.delete,action:()=>{this.viewModel.deleteFeatureFromWorkflow();this._prompt=null}},secondary:{label:W.keepFeature,action:()=>this._prompt=null}}}};R._handleSave=function(){const {featureFormViewModel:W}=this.viewModel;W.submit();!W.submittable||0<W.validateContingencyConstraints(W.getValues(),{includeIncompleteViolations:!0}).length||this.viewModel.activeWorkflow.commit()};
R._handleAttachmentAdd=function(){const {_attachments:W}=this,{activeWorkflow:ea}=this.viewModel;W.addAttachment().then(()=>ea.previous())};R._handleAttachmentUpdate=function(){const {_attachments:W}=this,{activeWorkflow:ea}=this.viewModel;W.updateAttachment().then(()=>ea.previous())};R._handleAttachmentDelete=function(){const {messages:W,messagesCommon:ea}=this;this._prompt={title:W.deleteAttachmentWarningTitle,message:W.deleteAttachmentWarningMessage,context:"danger",actions:{primary:{label:ea.delete,
action:()=>{const {_attachments:da}=this,{activeWorkflow:qa}=this.viewModel;da.deleteAttachment(da.viewModel.activeAttachmentInfo).then(()=>{qa.previous();this._prompt=null})}},secondary:{label:W.keepAttachment,action:()=>this._prompt=null}}}};R._handleAdd=function(){};R._handleEdit=function(){this.viewModel.canUpdate&&this.viewModel.startUpdateWorkflowAtFeatureSelection()};R._handleDone=function(){this.viewModel.cancelWorkflow({force:!0})};R._handleBack=function(){var W=h._asyncToGenerator(function*(){const {messages:ea}=
this,da=this.activeWorkflow,qa=()=>{da.hasPreviousStep?da.previous({cancelCurrentStep:!0}):this.viewModel.cancelWorkflow({force:!0})};if("create"===da.type||"create-features"===da.type&&0<da.numPendingFeatures||"update"===da.type&&da.data.edits.modified){const {type:va}=da;this._prompt={title:"create"===va?ea.cancelAddTitle:ea.cancelEditTitle,message:"create"===va?ea.cancelAddWarningMessage:ea.cancelEditWarningMessage,context:"danger",actions:{primary:{label:"create"===va?ea.discardFeature:ea.discardEdits,
action:()=>{qa();this._prompt=null}},secondary:{label:"create"===va?ea.continueAdding:ea.continueEditing,action:()=>this._prompt=null}}};this.scheduleRender();return Promise.reject()}qa()});return function(){return W.apply(this,arguments)}}();R._assertActiveCreateWorkflow=function(){const {type:W}=this.viewModel.activeWorkflow;if("create"===W||"create-features"===W)return this.viewModel.activeWorkflow;throw Error("Expected activeWorkflow to be instance of CreateWorkflow or CreateFeaturesWorkflow");
};R._assertActiveUpdateWorkflow=function(){if("update"===this.viewModel.activeWorkflow.type)return this.viewModel.activeWorkflow;throw Error("Expected activeWorkflow to be an UpdateWorkflow");};return N}(g.HandleOwnerMixin(H));c.__decorate([q.property()],B.prototype,"_attachments",void 0);c.__decorate([M.aliasOf("viewModel.activeWorkflow")],B.prototype,"activeWorkflow",void 0);c.__decorate([M.aliasOf("viewModel.allowedWorkflows")],B.prototype,"allowedWorkflows",void 0);c.__decorate([q.property()],
B.prototype,"useDeprecatedCreateWorkflow",void 0);c.__decorate([q.property()],B.prototype,"headingLevel",void 0);c.__decorate([q.property()],B.prototype,"iconClass",void 0);c.__decorate([q.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],B.prototype,"label",void 0);c.__decorate([M.aliasOf("viewModel.layerInfos")],B.prototype,"layerInfos",void 0);c.__decorate([q.property(),t.messageBundle("esri/widgets/Editor/t9n/Editor")],B.prototype,"messages",void 0);c.__decorate([q.property(),
t.messageBundle("esri/t9n/common")],B.prototype,"messagesCommon",void 0);c.__decorate([q.property(),t.messageBundle("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],B.prototype,"messagesTemplates",void 0);c.__decorate([M.aliasOf("viewModel.snappingOptions")],B.prototype,"snappingOptions",void 0);c.__decorate([q.property()],B.prototype,"supportingWidgetDefaults",void 0);c.__decorate([M.aliasOf("viewModel.view")],B.prototype,"view",void 0);c.__decorate([q.property(),l.vmEvent(["workflow-cancel",
"workflow-commit"])],B.prototype,"viewModel",void 0);c.__decorate([q.property()],B.prototype,"visibleElements",void 0);c.__decorate([m.cast("visibleElements")],B.prototype,"castVisibleElements",null);c.__decorate([O.accessibleHandler()],B.prototype,"_handleDelete",null);c.__decorate([O.accessibleHandler()],B.prototype,"_handleAttachmentAdd",null);c.__decorate([O.accessibleHandler()],B.prototype,"_handleAttachmentUpdate",null);c.__decorate([O.accessibleHandler()],B.prototype,"_handleAttachmentDelete",
null);c.__decorate([O.accessibleHandler()],B.prototype,"_handleAdd",null);c.__decorate([O.accessibleHandler()],B.prototype,"_handleEdit",null);c.__decorate([O.accessibleHandler()],B.prototype,"_handleDone",null);return B=c.__decorate([I.subclass("esri.widgets.Editor")],B)});