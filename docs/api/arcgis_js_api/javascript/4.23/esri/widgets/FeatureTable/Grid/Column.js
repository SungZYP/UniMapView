// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Evented ../../../core/HandleOwner ../../../core/maybe ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./support/ButtonMenu ../../support/widgetUtils".split(" "),function(p,e,d,u,v,w,f,A,B,C,x,y,z){d=function(r){function q(b){var a=r.call(this,b)||this;
a._menuContainer=null;a.activeRowIndex=null;a.autoWidth=!1;a.cellValueFormatFunction=({value:c})=>z.renderingSanitizer.sanitize(c);a.flexGrow=1;a.footerRenderFunction=null;a.frozen=!1;a.grid=null;a.header=null;a.headerRenderFunction=c=>{const {root:g}=c,{header:h,headerMenuEnabled:k,path:l,sortable:n}=p._assertThisInitialized(a);a.removeCellContent(g);n?(a.headerSorterRenderFunction(c),k&&a.headerMenuRenderFunction(c)):(k&&a.headerMenuRenderFunction(c),c=h||l,g.innerHTML!==c&&(g.innerHTML=c))};a.headerMenuRenderFunction=
({root:c})=>{var g,h;(null==(g=a.menu)?0:null==(h=g.items)?0:h.length)&&c.appendChild(a._menuContainer)};a.headerSorterRenderFunction=({root:c})=>{var g;const {header:h,path:k,sortElement:l}=p._assertThisInitialized(a),n=h||k;l?(l.innerHTML!==n&&l.setAttribute("innerHTML",n),c.appendChild(l),c=null==(g=a.grid)?void 0:g.getSlotElementByName(c.slot),(g=null==c?void 0:c.parentElement)&&!g.onkeydown&&(g.onkeydown=({key:t})=>{"Enter"!==t&&"Spacebar"!==t||l.click()})):c.innerHTML=n};a.hidden=!1;a.headerMenuEnabled=
!0;a.initialSortPriority=null;a.menu=null;a.menuConfig=null;a.messages=null;a.messagesCommon=null;a.renderFunction=({root:c,column:g,rowData:h})=>{const k=a.getCellValue(g,h);g=a.cellValueFormatFunction({column:g,rowData:h,value:k});c.innerHTML!==g&&(c.innerHTML=g)};a.resizable=!0;a.sortable=!0;a.sortElement=null;a.textAlign="start";a.width=200;return a}p._inheritsLoose(q,r);var m=q.prototype;m.initialize=function(){const {messages:b,path:a}=this;this._set("sortElement",this.createSortElement());
this.sortElement.setAttribute("path",a);this._menuContainer=document.createElement("div");this._menuContainer.classList.add("esri-column__menu-container");this.menu=new y({label:null==b?void 0:b.options,iconClass:"esri-icon-handle-horizontal",...this.menuConfig});this.menu.container=this._menuContainer;this.menu.set("items",this.getMenuItems());this.handles.add([w.watch(this,"hidden",()=>{var c;return null==(c=this.menu)?void 0:c.set("open",!1)})])};m.destroy=function(){var b;null==(b=this.menu)?
void 0:b.destroy()};m.getMenuItems=function(){const {menuConfig:b,sortable:a}=this,c=null==b?void 0:b.items,g=this.getSortMenuItems(),h=[];a&&h.push(...g);(null==c?0:c.length)&&h.push(...c);return h.length?h:null};m.getSortMenuItems=function(){const {messages:b}=this;return[{selected:"asc"===this.direction,iconClass:"esri-icon-arrow-up",label:null==b?void 0:b.sortAsc,autoCloseMenu:!0,clickFunction:()=>this.set("direction","asc"!==this.direction?"asc":null)},{selected:"desc"===this.direction,iconClass:"esri-icon-arrow-down",
label:null==b?void 0:b.sortDesc,autoCloseMenu:!0,clickFunction:()=>this.set("direction","desc"!==this.direction?"desc":null)}]};m.getCellValue=function(b,a){var c;return null!=(c=null==a?void 0:a.item[null==b?void 0:b.path])?c:""};m.createSortElement=function(){const {direction:b,header:a,path:c,initialSortPriority:g}=this,h=a||c,k=document.createElement("vaadin-grid-sorter");k.classList.add("esri-column__sorter");k.setAttribute("path",c);k.setAttribute("title",h);k.innerHTML=h;b&&k.setAttribute("direction",
b);v.isSome(g)&&(k._initialOrder=g);k.addEventListener("direction-changed",()=>{this.direction!==k.direction&&this._set("direction",k.direction)});return k};m.removeCellContent=function(b){if(b)for(;b.firstChild;)try{b.removeChild(b.firstChild)}catch(a){}};p._createClass(q,[{key:"direction",get:function(){return this._get("direction")||null},set:function(b){this.sortable&&(this.sortElement&&(b?this.sortElement.direction!==b&&this.sortElement.setAttribute("direction",b):this.sortElement.removeAttribute("direction")),
this._set("direction",b))}},{key:"path",set:function(b){this.sortElement&&this.sortElement.path!==b&&this.sortElement.setAttribute("path",b);this._set("path",b)}}]);return q}(u.HandleOwnerMixin(d.EventedAccessor));e.__decorate([f.property()],d.prototype,"activeRowIndex",void 0);e.__decorate([f.property()],d.prototype,"autoWidth",void 0);e.__decorate([f.property()],d.prototype,"cellValueFormatFunction",void 0);e.__decorate([f.property()],d.prototype,"direction",null);e.__decorate([f.property()],d.prototype,
"flexGrow",void 0);e.__decorate([f.property()],d.prototype,"footerRenderFunction",void 0);e.__decorate([f.property()],d.prototype,"frozen",void 0);e.__decorate([f.property()],d.prototype,"grid",void 0);e.__decorate([f.property()],d.prototype,"header",void 0);e.__decorate([f.property()],d.prototype,"headerRenderFunction",void 0);e.__decorate([f.property()],d.prototype,"headerMenuRenderFunction",void 0);e.__decorate([f.property()],d.prototype,"headerSorterRenderFunction",void 0);e.__decorate([f.property()],
d.prototype,"hidden",void 0);e.__decorate([f.property()],d.prototype,"headerMenuEnabled",void 0);e.__decorate([f.property({constructOnly:!0})],d.prototype,"initialSortPriority",void 0);e.__decorate([f.property()],d.prototype,"menu",void 0);e.__decorate([f.property()],d.prototype,"menuConfig",void 0);e.__decorate([f.property()],d.prototype,"messages",void 0);e.__decorate([f.property()],d.prototype,"messagesCommon",void 0);e.__decorate([f.property()],d.prototype,"path",null);e.__decorate([f.property()],
d.prototype,"renderFunction",void 0);e.__decorate([f.property()],d.prototype,"resizable",void 0);e.__decorate([f.property()],d.prototype,"sortable",void 0);e.__decorate([f.property({readOnly:!0})],d.prototype,"sortElement",void 0);e.__decorate([f.property()],d.prototype,"textAlign",void 0);e.__decorate([f.property()],d.prototype,"width",void 0);return d=e.__decorate([x.subclass("esri.widgets.FeatureTable.Grid.Column")],d)});