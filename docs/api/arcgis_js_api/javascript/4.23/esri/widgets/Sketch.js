// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.23/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/interactive/snapping/SnappingOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./FeatureSnappingLayerSource ./Settings".split(" "),function(e,q,b,E,h,r,w,D,K,I,x){b=function(d){function g(k){k=d.call(this,
k)||this;k.enabled=!1;k.enabledToggled=!1;k.selfEnabled=!0;k.featureEnabled=!0;k.featureSources=new E;k.distance=x.defaults.distance;k.touchSensitivityMultiplier=x.defaults.touchSensitivityMultiplier;return k}e._inheritsLoose(g,d);e._createClass(g,[{key:"effectiveEnabled",get:function(){return this.enabledToggled?!this.enabled:this.enabled}},{key:"effectiveSelfEnabled",get:function(){return this.effectiveEnabled&&this.selfEnabled}},{key:"effectiveFeatureEnabled",get:function(){return this.effectiveEnabled&&
this.featureEnabled}}]);return g}(b);q.__decorate([h.property()],b.prototype,"enabled",void 0);q.__decorate([h.property()],b.prototype,"enabledToggled",void 0);q.__decorate([h.property()],b.prototype,"selfEnabled",void 0);q.__decorate([h.property()],b.prototype,"featureEnabled",void 0);q.__decorate([h.property({type:E.ofType(I)})],b.prototype,"featureSources",void 0);q.__decorate([h.property()],b.prototype,"distance",void 0);q.__decorate([h.property()],b.prototype,"touchSensitivityMultiplier",void 0);
q.__decorate([h.property({readOnly:!0})],b.prototype,"effectiveEnabled",null);q.__decorate([h.property({readOnly:!0})],b.prototype,"effectiveSelfEnabled",null);q.__decorate([h.property({readOnly:!0})],b.prototype,"effectiveFeatureEnabled",null);return b=q.__decorate([K.subclass("esri.views.interactive.snapping.SnappingOptions")],b)})},"esri/views/interactive/snapping/FeatureSnappingLayerSource":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(e,q,b,E,h,r,w,D){b=function(K){function I(x){x=K.call(this,x)||this;x.layer=null;x.enabled=!0;x.updating=!1;x.availability=1;return x}e._inheritsLoose(I,K);return I}(b);q.__decorate([E.property({constructOnly:!0})],b.prototype,"layer",void 0);q.__decorate([E.property()],b.prototype,"enabled",void 0);q.__decorate([E.property()],b.prototype,"updating",void 0);q.__decorate([E.property()],b.prototype,"availability",void 0);return b=q.__decorate([D.subclass("esri.views.interactive.snapping.SnappingLayerSource")],
b)})},"esri/views/interactive/snapping/Settings":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass".split(" "),function(e,q,b,E,h,r,w){let D=function(K){function I(){var x=K.apply(this,arguments)||this;x.enabled=!0;return x}q._inheritsLoose(I,K);return I}(h.JSONSupport);b.__decorate([r.property({type:Boolean})],D.prototype,
"enabled",void 0);D=b.__decorate([w.subclass("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],D);h=function(K){function I(x){x=K.call(this,x)||this;x.lineSnapper=new D;x.parallelLineSnapper=new D;x.rightAngleSnapper=new D;x.rightAngleTriangleSnapper=new D;x.shortLineThreshold=15;x.distance=5;x.pointThreshold=1E-6;x.intersectionParallelLineThreshold=1E-6;x.parallelLineThreshold=1E-6;x.touchSensitivityMultiplier=1.5;x.pointOnLineThreshold=1E-6;x.orange=new E([255,127,0]);x.lineHintWidthReference=
3;x.lineHintWidthTarget=3;x.lineHintFadedExtensions=.3;x.parallelLineHintWidth=2;x.parallelLineHintLength=24;x.parallelLineHintOffset=1.5;x.rightAngleHintSize=24;x.rightAngleHintOutlineSize=1.5;return x}q._inheritsLoose(I,K);return I}(h.JSONSupport);b.__decorate([r.property({type:D,constructOnly:!0,nonNullable:!0,json:{write:!0}})],h.prototype,"lineSnapper",void 0);b.__decorate([r.property({type:D,constructOnly:!0,nonNullable:!0,json:{write:!0}})],h.prototype,"parallelLineSnapper",void 0);b.__decorate([r.property({type:D,
constructOnly:!0,nonNullable:!0,json:{write:!0}})],h.prototype,"rightAngleSnapper",void 0);b.__decorate([r.property({type:D,constructOnly:!0,nonNullable:!0,json:{write:!0}})],h.prototype,"rightAngleTriangleSnapper",void 0);b.__decorate([r.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],h.prototype,"shortLineThreshold",void 0);b.__decorate([r.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],h.prototype,"distance",void 0);b.__decorate([r.property({type:Number,
nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],h.prototype,"pointThreshold",void 0);b.__decorate([r.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],h.prototype,"intersectionParallelLineThreshold",void 0);b.__decorate([r.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],h.prototype,"parallelLineThreshold",void 0);b.__decorate([r.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],h.prototype,"touchSensitivityMultiplier",
void 0);b.__decorate([r.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],h.prototype,"pointOnLineThreshold",void 0);b.__decorate([r.property({type:E,nonNullable:!0})],h.prototype,"orange",void 0);b.__decorate([r.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],h.prototype,"lineHintWidthReference",void 0);b.__decorate([r.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],h.prototype,"lineHintWidthTarget",void 0);b.__decorate([r.property({type:Number,
nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],h.prototype,"lineHintFadedExtensions",void 0);b.__decorate([r.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],h.prototype,"parallelLineHintWidth",void 0);b.__decorate([r.property({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],h.prototype,"parallelLineHintLength",void 0);b.__decorate([r.property({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],h.prototype,"parallelLineHintOffset",
void 0);b.__decorate([r.property({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],h.prototype,"rightAngleHintSize",void 0);b.__decorate([r.property({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],h.prototype,"rightAngleHintOutlineSize",void 0);h=b.__decorate([w.subclass("esri.views.interactive.snapping.Settings.Defaults")],h);b=new h;e.defaults=b;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Sketch/SketchViewModel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../symbols ../../core/Collection ../../core/has ../../core/Error ../../core/Evented ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/projection ../../geometry/projectionEllipsoid ../../geometry/support/coordsUtils ../../geometry/support/spatialReferenceUtils ../../layers/GraphicsLayer ../../views/DOMContainer ../../views/3d/interactive/editingTools/isSupportedGraphicUtils ../../views/3d/interactive/editingTools/moveGraphic/isSupportedGraphic ../../views/3d/interactive/editingTools/reshapeGraphic/isSupportedGraphic ../../views/3d/interactive/editingTools/transformGraphic/isSupportedGraphic ../../views/draw/support/layerUtils ../../views/input/InputManager ../../views/interactive/keybindings ../../views/interactive/snapping/SnappingManager ../../views/interactive/snapping/SnappingOptions ../../views/support/screenUtils ./support/OperationHandle ../../symbols/SimpleMarkerSymbol ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g,k,B,c,t,n,u,p,y,O,z,f,F,S,M,P,H,L,A,C,J,W,ba,X,v){function N(ka){return"polygon"===ka||"rectangle"===ka||"circle"===ka?!0:!1}function Q(ka,na){ja("undo",ka.history.undo,ka.history.redo,na)}function Z(ka,na){ja("redo",ka.history.redo,ka.history.undo,na)}function ja(ka,na,ma,aa){const da=na.pop().updates,fa=[];aa.forEach((ha,sa)=>{sa=da[sa];null!=sa&&("geometry"in sa&&x.isSome(sa.geometry)&&(fa.push({geometry:ha.geometry}),ha.geometry=sa.geometry),"symbol"in sa&&x.isSome(sa.symbol)&&
(fa.push({symbol:ha.symbol}),ha.symbol=sa.symbol),"undo"in sa&&(fa.push(sa),sa[ka](ha)))});ma.push({updates:fa})}function la(ka){return{updates:ka.map(na=>({geometry:na.geometry}))}}function ua(ka){return"requireError"in ka&&"aborted"===ka.requireError}const Ba=ka=>Object.freeze({__proto__:null,default:ka}),Ga=I.getLogger("esri.widgets.Sketch.SketchViewModel"),Fa={defaultZ:0},Ma={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,
enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,tool:"transform"};r=function(ka){function na(aa){aa=ka.call(this,aa)||this;aa._numUpdating=0;aa._handles=new K;aa._internalGraphicsLayer=new O({listMode:"hide",internal:!0,title:"SVM Internal"});aa._operationHandle=null;aa._viewHandles=new K;aa.activeFillSymbol=null;aa.activeLineSymbol=null;aa.activeVertexSymbol=null;aa.allowDeleteKey=!0;aa.layer=null;aa.pointSymbol=new ba({style:"circle",size:6,color:[255,
255,255],outline:{color:[50,50,50],width:1}});aa.polygonSymbol=new X({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}});aa.polylineSymbol=new v({color:[130,130,130,1],width:2});aa._snappingManager=null;aa.updateGraphics=new h;aa.updateOnGraphicClick=!0;aa.updatePointSymbol=new ba({size:10,color:[0,200,255,.5],outline:{color:"black",width:1}});aa.updatePolygonSymbol=new X({color:[12,207,255,.2],outline:{join:"round",color:[12,207,255],width:2}});aa.updatePolylineSymbol=new v({color:[12,207,
255],width:2});aa.vertexSymbol=new ba({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}});aa._moduleLoaderAbortController=null;aa._viewReadyAbortController=null;aa._originalAutoOpenEnabled=null;aa.defaultCreateOptions=Fa;aa.defaultUpdateOptions=Ma;aa.snappingOptions=new C;return aa}q._inheritsLoose(na,ka);var ma=na.prototype;ma.initialize=function(){this._handles.add([g.on(()=>{var aa,da;return null==(aa=this.view)?void 0:null==(da=aa.map)?void 0:da.layers},"change",aa=>
{aa.removed.includes(this.layer)&&this.cancel()}),g.on(()=>{var aa;return null==(aa=this.layer)?void 0:aa.graphics},"change",aa=>{if(x.isSome(this._operationHandle))for(const da of aa.removed)this.updateGraphics.includes(da)&&(1<this.updateGraphics.length?this._operationHandle.removeFromSelection(da):this._operationHandle.cancel())}),g.watch(()=>{var aa,da;return null!=(aa=null==(da=this.layer)?void 0:da.elevationInfo)?aa:null},aa=>{aa!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=
aa)},g.syncAndInitial),g.watch(()=>this.view,aa=>{x.destroyMaybe(this._snappingManager);aa&&(this._snappingManager=new A.SnappingManager({view:aa,options:this.snappingOptions}),"2d"===aa.type?new Promise((da,fa)=>e(["../../views/2d/interactive/editingTools"],da,fa)):"3d"===aa.type&&(new Promise((da,fa)=>e(["../../views/3d/interactive/editingTools"],da,fa)),new Promise((da,fa)=>e(["../../views/3d/layers/GraphicsLayerView3D"],ha=>da(Ba(ha)),fa))))},g.syncAndInitial),g.watch(()=>{var aa;return null==
(aa=this.view)?void 0:aa.spatialReference},(aa,da)=>{aa&&da&&!aa.equals(da)&&this.cancel()})])};ma.destroy=function(){this.cancel();this._handles=x.destroyMaybe(this._handles);this._viewHandles=x.destroyMaybe(this._viewHandles);this._removeDefaultLayer();this._snappingManager=x.destroyMaybe(this._snappingManager);this._set("view",null);this.emit("destroy")};ma.cancel=function(){this._moduleLoaderAbortController=x.abortMaybe(this._moduleLoaderAbortController);this._viewReadyAbortController=x.abortMaybe(this._viewReadyAbortController);
this._operationHandle&&this._operationHandle.cancel()};ma.complete=function(){this._operationHandle&&this._operationHandle.complete()};ma.delete=function(){const {state:aa,updateGraphics:da}=this;if("active"===aa&&da.length){const {activeTool:fa,layer:ha}=this,sa=da.toArray();ha.removeMany(sa);this.cancel();this._emitDeleteEvent({graphics:sa,tool:fa})}};ma.create=function(){var aa=q._asyncToGenerator(function*(da,fa){this.cancel();yield this._waitViewReady();if("disabled"===this.state)throw this.layer||
this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),this.view||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),d.createAbortError();x.isSome(this.view.activeTool)&&(this.view.activeTool=null);if(da){P.addUniqueLayer(this.view,this._internalGraphicsLayer);var ha=yield this._setupCreateOperation(da,fa);x.isNone(ha)||this.destroyed?this.view.map.remove(this._internalGraphicsLayer):(ha.on("complete",()=>{if(ha===this._operationHandle){const sa=
this.createGraphic,pa=this._operationHandle.cancelled;this._operationHandle.destroy();this._operationHandle=null;this._set("createGraphic",null);this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer);ha.cancelled||null==sa||this.layer.add(sa);this.emit("create",{graphic:sa,state:pa?"cancel":"complete",tool:da,toolEventInfo:null,type:"create"})}}),this._operationHandle=ha,this.view.ready&&z.isDOMContainer(this.view)&&this.view.focus())}else this._logError("sketch:missing-parameter",
"Missing parameter 'tool'.")});return function(da,fa){return aa.apply(this,arguments)}}();ma.update=function(){var aa=q._asyncToGenerator(function*(da,fa){this.cancel();yield this._waitViewReady();const {layer:ha,view:sa,state:pa}=this;if("disabled"===pa)throw sa||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),ha||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),d.createAbortError();x.isSome(this.view.activeTool)&&
(this.view.activeTool=null);const qa=Array.isArray(da)?da:[da];null!=da&&qa&&qa.length?qa.some(Aa=>Aa.layer!==ha?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):x.isNone(Aa.geometry)?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0):!1)||(da=yield this._setupUpdateOperation(qa,fa),this.destroyed||x.isNone(da)||ua(da)||(P.addUniqueLayer(this.view,
this._internalGraphicsLayer),this._setUpdateOperationHandle(da,fa),this.emit("update",{graphics:qa,state:"start",aborted:!1,tool:da.tool,toolEventInfo:null,type:"update"}))):this._logError("sketch:missing-parameter","Missing parameter 'graphics'.")});return function(da,fa){return aa.apply(this,arguments)}}();ma._updateSpatialReference=function(){var aa=q._asyncToGenerator(function*(da){this._beginAsyncOperation();da=Array.isArray(da)?da:[da];for(const fa of da)x.isSome(fa.geometry)&&"mesh"!==fa.geometry.type&&
!y.equals(fa.geometry.spatialReference,this.view.spatialReference)&&(n.canProjectWithoutEngine(fa.geometry.spatialReference,this.view.spatialReference)||n.isLoaded()||(yield n.load()),fa.geometry=n.project(fa.geometry,this.view.spatialReference));this._endAsyncOperation()});return function(da){return aa.apply(this,arguments)}}();ma.undo=function(){this.canUndo()&&this._operationHandle.undo()};ma.redo=function(){this.canRedo()&&this._operationHandle.redo()};ma.canUndo=function(){return!(!this._operationHandle||
!this._operationHandle.canUndo())};ma.canRedo=function(){return!(!this._operationHandle||!this._operationHandle.canRedo())};ma.toggleUpdateTool=function(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()};ma._getFirstHit=function(){var aa=q._asyncToGenerator(function*(da){const fa=[];switch(this.view.type){case "2d":{const sa=[];this.view.map.allLayers.forEach(pa=>{"vector-tile"!==pa.type&&"imagery"!==pa.type||sa.push(pa)});var ha=yield this.view.hitTest(da,
{exclude:sa});0<ha.results.length&&(ha=ha.results[0],ha.graphic&&fa.push(ha))}break;case "3d":{const sa=[this.view.map.ground];this.view.map.allLayers.forEach(pa=>{"integrated-mesh"===pa.type&&sa.push(pa)});ha=yield this.view.hitTest(da,{exclude:sa});if(0<ha.results.length){const pa=ha.results[0];(!ha.ground.mapPoint||1>this.view.map.ground.opacity||ha.ground.distance-x.unwrapOr(pa.distance,0)>-Math.min(3*ha.ground.distance,"global"===this.view.viewingMode?u.getReferenceEllipsoid(this.view.renderCoordsHelper.spatialReference).radius/
this.view.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY))&&fa.push(pa)}}}return{screenPoint:da,results:fa}});return function(da){return aa.apply(this,arguments)}}();ma._generateViewHandles=function(aa){var da=this;return[aa.on("immediate-click",function(){var fa=q._asyncToGenerator(function*(ha){var sa="active"===da.state&&"create"===da._operationHandle.type;if("disabled"!==da.state&&!sa&&da.updateOnGraphicClick){da._beginAsyncOperation();var pa=(yield ha.async(()=>da._getFirstHit(J.createScreenPointFromEvent(ha)))).results;
sa=null;if(pa.length)for(const qa of pa){if(qa.graphic){pa=qa.graphic;if(da.updateGraphics.includes(pa)||pa.layer===da.layer){ha.stopPropagation();sa=pa;break}"2d"!==aa.type||da._isComponentGraphic(pa)||"active"!==da.state||da.cancel()}}else"active"===da.state&&da.cancel();x.isSome(sa)&&!da.updateGraphics.includes(sa)&&(yield da.update([sa],{...da.defaultUpdateOptions,reshapeOptions:{...da.defaultUpdateOptions.reshapeOptions}}));da._endAsyncOperation()}});return function(ha){return fa.apply(this,
arguments)}}(),H.ViewEventPriorities.WIDGET)]};ma._setupCreateOperation=function(){var aa=q._asyncToGenerator(function*(da,fa){da=yield this._setupDrawGraphicTool(da,this.view,{hasZ:"3d"===this.view.type,...this.defaultCreateOptions,...fa});if(x.isNone(da))return null;this.view.tools.add(da);this.view.activeTool=da;return this._setupCreateOperationHandle(da)});return function(da,fa){return aa.apply(this,arguments)}}();ma._setupDrawGraphicTool=function(){var aa=q._asyncToGenerator(function*(da,fa,
ha){if("multipoint"===da&&"3d"===fa.type)return this._logError("sketch:create","Multipoint geometries are not supported in SceneView"),null;const sa="rectangle"!==da,pa="rectangle"!==da;this.snappingOptions.enabledToggled=!1;da={view:fa,mode:"rectangle"===da||"circle"===da?"hybrid":"click",...ha,snapToScene:!1,geometryType:da,graphicSymbol:this._getGraphicSymbolFromTool(da),snappingManager:this._snappingManager,forceUniformSize:pa,centered:sa};return"2d"===this.view.type?this._makeDrawGraphicTool2D(da):
this._makeDrawGraphicTool3D(da)});return function(da,fa,ha){return aa.apply(this,arguments)}}();ma._makeDrawGraphicTool2D=function(){var aa=q._asyncToGenerator(function*(da){const fa=yield this._requireModule(new Promise((ha,sa)=>e(["../../views/2d/interactive/editingTools"],ha,sa)));return ua(fa)||this.destroyed?null:new fa.module.DrawGraphicTool2D({...da,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:N(da.geometryType)?
this.activeFillSymbol:null})});return function(da){return aa.apply(this,arguments)}}();ma._makeDrawGraphicTool3D=function(){var aa=q._asyncToGenerator(function*(da){const fa=yield this._requireModule(new Promise((ha,sa)=>e(["../../views/3d/interactive/editingTools"],ha,sa)));return ua(fa)||this.destroyed?null:new fa.module.DrawGraphicTool3D({...da,elevationInfo:this.layer.elevationInfo,snapToScene:x.isSome(this.layer.elevationInfo)?"absolute-height"===this.layer.elevationInfo.mode:!0})});return function(da){return aa.apply(this,
arguments)}}();ma._setupCreateOperationHandle=function(aa){let da=null;const fa=aa.forceUniformSize,ha=aa.centered,sa=[this.view.on("key-down",qa=>{if(qa.key===L.SKETCH_KEYS.pan)qa.stopPropagation(),qa.repeat||(aa.enabled=!1);else if(qa.key===L.SKETCH_KEYS.complete)qa.stopPropagation(),aa.completeCreateOperation();else if(qa.key!==L.SKETCH_KEYS.vertexAdd||qa.repeat)qa.key===L.SKETCH_KEYS.undo?(qa.stopPropagation(),pa.undo()):qa.key===L.SKETCH_KEYS.redo?(qa.stopPropagation(),pa.redo()):qa.key!==L.SKETCH_KEYS.snappingToggle||
"rectangle"===aa.geometryType||"circle"===aa.geometryType||qa.repeat?qa.key!==L.SKETCH_KEYS.constraint||"rectangle"!==aa.geometryType&&"circle"!==aa.geometryType||qa.repeat?qa.key!==L.SKETCH_KEYS.center||qa.repeat||(aa.centered=!ha,qa.stopPropagation()):(aa.forceUniformSize=!fa,qa.stopPropagation()):(this.snappingOptions.enabledToggled=!0,qa.stopPropagation());else{const Aa=aa.drawOperation.geometryType;if("polyline"===Aa||"polygon"===Aa||"multipoint"===Aa)qa.stopPropagation(),aa.drawOperation.commitStagedVertex()}},
H.ViewEventPriorities.WIDGET),this.view.on("key-up",qa=>{qa.key===L.SKETCH_KEYS.pan?aa.enabled=!0:qa.key===L.SKETCH_KEYS.snappingToggle&&"rectangle"!==aa.geometryType&&"circle"!==aa.geometryType?(this.snappingOptions.enabledToggled=!1,qa.stopPropagation()):qa.key!==L.SKETCH_KEYS.constraint||"rectangle"!==aa.geometryType&&"circle"!==aa.geometryType?qa.key===L.SKETCH_KEYS.center&&(aa.centered=ha,qa.stopPropagation()):(aa.forceUniformSize=fa,qa.stopPropagation())},H.ViewEventPriorities.WIDGET),aa.on("vertex-add",
qa=>{da=x.isNone(da)?"start":"active";switch(qa.operation){case "apply":this.emit("create",{graphic:x.unwrap(aa.graphic),state:da,tool:this.activeTool,toolEventInfo:qa,type:"create"});break;case "undo":this._emitUndoEvent({graphics:[x.unwrap(aa.graphic)],tool:aa.geometryType});break;case "redo":this._emitRedoEvent({graphics:[x.unwrap(aa.graphic)],tool:aa.geometryType})}}),aa.on("cursor-update",qa=>{0<aa.drawOperation.numCommittedVertices&&this.emit("create",{graphic:x.unwrap(aa.graphic),state:"active",
tool:this.activeTool,toolEventInfo:{coordinates:qa.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),aa.on("vertex-remove",qa=>{switch(qa.operation){case "apply":this.emit("create",{graphic:x.unwrap(aa.graphic),state:"active",tool:this.activeTool,toolEventInfo:qa,type:"create"});break;case "undo":this._emitUndoEvent({graphics:[x.unwrap(aa.graphic)],tool:aa.geometryType});break;case "redo":this._emitRedoEvent({graphics:[x.unwrap(aa.graphic)],tool:aa.geometryType})}}),aa.on("complete",
qa=>{this._set("createGraphic",x.unwrap(qa.graphic));da="complete";qa.aborted?pa&&pa.cancel():pa&&pa.complete()}),g.watch(()=>this._getGraphicSymbolFromTool(aa.geometryType),qa=>{aa.graphicSymbol=qa})],pa=new W.OperationHandle({activeComponent:aa,tool:aa.geometryType,type:"create",onEnd:()=>{var qa;sa.forEach(Aa=>Aa.remove());sa.length=0;null==(qa=this.view.tools)?void 0:qa.remove(aa);aa.destroy()},undo:()=>{aa.canUndo&&aa.undo()},redo:()=>{aa.canRedo&&aa.redo()},canUndo:()=>aa.canUndo,canRedo:()=>
aa.canRedo});return pa};ma._getGraphicSymbolFromTool=function(aa){switch(aa){case "point":case "multipoint":return this.pointSymbol;case "polyline":return this.polylineSymbol;case "circle":case "rectangle":case "polygon":return this.polygonSymbol;default:return null}};ma._setupUpdateOperation=function(){var aa=q._asyncToGenerator(function*(da,fa){const {layer:ha,view:sa}=this;fa={tool:this._defaultUpdateTool,...this.defaultUpdateOptions,...fa,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,
...null==fa?void 0:fa.reshapeOptions}};var pa=fa.tool;for(var qa of da)ha.remove(qa),ha.add(qa);if("3d"===sa.type){if(0===da.length)return null;switch(pa){case "move":return this._setupMove3DOperation(da,fa,sa,pa);case "reshape":if(1<da.length)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;pa=S.isSupportedGraphic(da[0]);if(pa===f.SupportedGraphicResult.SUPPORTED)return this._setupReshape3DOperation(da[0],fa,sa);this._logError("sketch:reshape",
`Reshape operation not supported for provided graphic(s) (${f.isSupportedGraphicResultMessage(pa)}).`);return null;case "transform":return this._setupGraphicTransform3DOperation(da,fa,sa)}}switch(pa){case "move":return this._setupMove2DOperation(da,fa,sa);case "reshape":if(1<da.length)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;qa=S.isSupportedGraphic(da[0]);if(qa===f.SupportedGraphicResult.SUPPORTED)return this._setupTransformOrReshape2DOperation(da,
pa,fa,sa);this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${f.isSupportedGraphicResultMessage(qa)}).`);return null;case "transform":return 1===da.length&&(qa=x.get(da[0].geometry,"type"),"point"===qa||"multipoint"===qa)&&(pa="reshape"),this._setupTransformOrReshape2DOperation(da,pa,fa,sa)}});return function(da,fa){return aa.apply(this,arguments)}}();ma._setupMove3DOperation=function(){var aa=q._asyncToGenerator(function*(da,fa,ha,sa,pa=!1){var qa=this;for(var Aa of da){const wa=
F.isSupportedGraphic(Aa);if(wa!==f.SupportedGraphicResult.SUPPORTED)return this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${f.isSupportedGraphicResultMessage(wa)}).`),null}Aa=yield this._requireModule(new Promise((wa,Ia)=>e(["../../views/3d/interactive/editingTools"],wa,Ia)));if(ua(Aa))return Aa;const Ha=new Aa.module.GraphicMoveTool({view:ha,enableZ:fa.enableZ,snappingManager:this._snappingManager});this.view.tools.add(Ha);Ha.graphics.addMany(da);pa||this.updateGraphics.addMany(da);
const xa=[],za=new W.UpdateOperationHandle({activeComponent:Ha,tool:sa,type:"update",onEnd:()=>{var wa;xa.forEach(Ia=>Ia.remove());xa.length=0;null==(wa=this.view.tools)?void 0:wa.remove(Ha);Ha.destroyed||Ha.destroy()},undo:()=>{Q(za,this.updateGraphics.toArray());this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:sa})},redo:()=>{Z(za,this.updateGraphics.toArray());this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:sa})},addToSelection:wa=>{this.updateGraphics.push(wa);
Ha.graphics.push(wa);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[wa],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:wa=>{const Ia=this.updateGraphics.indexOf(wa);za.history.undo.forEach(Ka=>Ka.updates.splice(Ia,1));za.history.redo.forEach(Ka=>Ka.updates.splice(Ia,1));this.updateGraphics.remove(wa);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,
toolEventInfo:{added:[],removed:[wa],type:"selection-change"},type:"update"});0===this.updateGraphics.length?za.complete():Ha.graphics.remove(wa)},toggleTool:function(){var wa=q._asyncToGenerator(function*(){if(1===qa.updateGraphics.length&&!1!==fa.toggleToolOnClick&&"transform"===sa){var Ia=qa.updateGraphics.getItemAt(0);S.isSupportedGraphic(Ia)===f.SupportedGraphicResult.SUPPORTED&&(Ia=yield qa._setupReshape3DOperation(Ia,fa,ha,!0),ua(Ia)||(za.onEnd(),za.destroy(),qa._setUpdateOperationHandle(Ia,
fa)))}});return function(){return wa.apply(this,arguments)}}()});xa.push(...this._getHandlesForComponent(za,fa),this.view.on("immediate-click",wa=>this._getCommonUpdateOperationClickHandlers(za,wa,fa),H.ViewEventPriorities.WIDGET),ha.on("key-down",wa=>{this._getCommonUpdateOperationKeyDownHandlers(za,wa);wa.key===L.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!0,wa.stopPropagation())},H.ViewEventPriorities.WIDGET),ha.on("key-up",wa=>{wa.key===L.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=
!1,wa.stopPropagation())},H.ViewEventPriorities.WIDGET));return za});return function(da,fa,ha,sa){return aa.apply(this,arguments)}}();ma._setupGraphicTransform3DOperation=function(aa,da,fa,ha=!1){if(1===aa.length&&M.isSupportedGraphic(aa[0])===f.SupportedGraphicResult.SUPPORTED){const sa=aa[0],pa=sa.geometry;if(x.isSome(pa)&&("point"===pa.type||"mesh"===pa.type))return this._setupPointTransform3DOperation(sa,da,fa);if(x.isSome(pa)&&("polygon"===pa.type||"polyline"===pa.type))return this._setupPolyTransform3DOperation(sa,
da,fa,ha)}return this._setupMove3DOperation(aa,da,fa,"transform",ha)};ma._setupPointTransform3DOperation=function(){var aa=q._asyncToGenerator(function*(da,fa,ha){var sa=this;const {enableRotation:pa,enableScaling:qa,enableZ:Aa}=fa,Ha=yield this._requireModule(new Promise((Ia,Ka)=>e(["../../views/3d/interactive/editingTools"],Ia,Ka)));if(ua(Ha))return Ha;const xa=new Ha.module.GraphicTransformTool({graphic:da,view:ha,enableRotation:pa,enableScaling:qa,enableZ:Aa,snappingManager:this._snappingManager});
this.view.tools.add(xa);this.updateGraphics.add(da);const za=[],wa=new W.UpdateOperationHandle({activeComponent:xa,tool:"transform",type:"update",onEnd:()=>{var Ia;za.forEach(Ka=>Ka.remove());za.length=0;null==(Ia=this.view.tools)?void 0:Ia.remove(xa);xa.destroyed||xa.destroy()},undo:()=>{Q(wa,this.updateGraphics.toArray());this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},redo:()=>{Z(wa,this.updateGraphics.toArray());this._emitRedoEvent({graphics:this.updateGraphics.toArray(),
tool:"transform"})},addToSelection:function(){var Ia=q._asyncToGenerator(function*(Ka){sa.updateGraphics.add(Ka);sa.emit("update",{graphics:sa.updateGraphics.toArray(),state:"active",aborted:!1,tool:sa.activeTool,toolEventInfo:{added:[Ka],removed:[],type:"selection-change"},type:"update"});Ka=yield sa._setupMove3DOperation(sa.updateGraphics.toArray(),fa,ha,"transform",!0);ua(Ka)||(wa.onEnd(),wa.destroy(),sa._setUpdateOperationHandle(Ka,fa))});return function(Ka){return Ia.apply(this,arguments)}}(),
removeFromSelection:Ia=>{this.updateGraphics.remove(Ia);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Ia],type:"selection-change"},type:"update"});wa.complete()},toggleTool:()=>{}});za.push(...this._getHandlesForComponent(wa,fa),this.view.on("immediate-click",Ia=>this._getCommonUpdateOperationClickHandlers(wa,Ia,fa),H.ViewEventPriorities.WIDGET),ha.on("key-down",Ia=>{this._getCommonUpdateOperationKeyDownHandlers(wa,
Ia);Ia.key===L.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!0,Ia.stopPropagation())},H.ViewEventPriorities.WIDGET),ha.on("key-up",Ia=>{Ia.key===L.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!1,Ia.stopPropagation())},H.ViewEventPriorities.WIDGET));return wa});return function(da,fa,ha){return aa.apply(this,arguments)}}();ma._setupPolyTransform3DOperation=function(){var aa=q._asyncToGenerator(function*(da,fa,ha,sa=!1){var pa=this;const {enableRotation:qa,enableScaling:Aa,
enableZ:Ha,preserveAspectRatio:xa}=fa,za=yield this._requireModule(new Promise((Ra,Ta)=>e(["../../views/3d/interactive/editingTools"],Ra,Ta)));if(ua(za))return za;const wa=new za.module.ExtentTransformTool({graphic:da,view:ha,enableRotation:qa,enableScaling:Aa,enableZ:Ha,preserveAspectRatio:xa});this.view.tools.add(wa);sa||this.updateGraphics.add(da);const Ia=[],Ka=new W.UpdateOperationHandle({activeComponent:wa,tool:"transform",type:"update",onEnd:()=>{var Ra;Ia.forEach(Ta=>Ta.remove());Ia.length=
0;null==(Ra=this.view.tools)?void 0:Ra.remove(wa);wa.destroyed||wa.destroy()},canUndo:()=>wa.canUndo,undo:()=>{wa.undo();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},canRedo:()=>wa.canRedo,redo:()=>{wa.redo();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},addToSelection:function(){var Ra=q._asyncToGenerator(function*(Ta){pa.updateGraphics.add(Ta);pa.emit("update",{graphics:pa.updateGraphics.toArray(),state:"active",aborted:!1,tool:pa.activeTool,
toolEventInfo:{added:[Ta],removed:[],type:"selection-change"},type:"update"});Ta=yield pa._setupMove3DOperation(pa.updateGraphics.toArray(),fa,ha,"transform",!0);ua(Ta)||(Ka.onEnd(),Ka.destroy(),pa._setUpdateOperationHandle(Ta,fa))});return function(Ta){return Ra.apply(this,arguments)}}(),removeFromSelection:Ra=>{this.updateGraphics.remove(Ra);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Ra],type:"selection-change"},
type:"update"});Ka.complete()},toggleTool:function(){var Ra=q._asyncToGenerator(function*(){if(1===pa.updateGraphics.length&&!1!==fa.toggleToolOnClick){var Ta=pa.updateGraphics.getItemAt(0);S.isSupportedGraphic(Ta)===f.SupportedGraphicResult.SUPPORTED&&(Ta=yield pa._setupReshape3DOperation(Ta,fa,ha,!0),ua(Ta)||(Ka.onEnd(),Ka.destroy(),pa._setUpdateOperationHandle(Ta,fa)))}});return function(){return Ra.apply(this,arguments)}}()});Ia.push(...this._getHandlesForComponent(Ka,fa),this.view.on("immediate-click",
Ra=>this._getCommonUpdateOperationClickHandlers(Ka,Ra,fa),H.ViewEventPriorities.WIDGET),this.view.on("key-down",Ra=>this._getCommonUpdateOperationKeyDownHandlers(Ka,Ra),H.ViewEventPriorities.WIDGET),this.view.on("key-down",Ra=>{Ra.key!==L.SKETCH_KEYS.constraint||Ra.repeat||(wa.preserveAspectRatio=!wa.preserveAspectRatio,Ra.stopPropagation())},H.ViewEventPriorities.WIDGET),this.view.on("key-up",Ra=>{Ra.key===L.SKETCH_KEYS.constraint&&(wa.preserveAspectRatio=!wa.preserveAspectRatio,Ra.stopPropagation())},
H.ViewEventPriorities.WIDGET));return Ka});return function(da,fa,ha){return aa.apply(this,arguments)}}();ma._setupMove2DOperation=function(){var aa=q._asyncToGenerator(function*(da,fa,ha){var sa=this;this.updateGraphics.addMany(da);yield this._updateSpatialReference(da);const pa=yield this._getGraphicMover(da,fa,ha);if(ua(pa))return pa;const qa=new W.UpdateOperationHandle({activeComponent:pa,tool:"move",type:"update",onEnd:()=>{var za;this._displayDefaultCursor();xa.forEach(wa=>wa.remove());Ha.forEach(wa=>
wa.remove());xa=[];Ha=[];pa.destroy();null==(za=this._internalGraphicsLayer)?void 0:za.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const za=this.updateGraphics.toArray();Q(qa,za);qa.refreshComponent();this._emitUndoEvent({graphics:za,tool:"move"})},redo:()=>{const za=this.updateGraphics.toArray();Z(qa,za);qa.refreshComponent();this._emitRedoEvent({graphics:za,tool:"move"})},addToSelection:function(){var za=q._asyncToGenerator(function*(wa){yield sa._updateSpatialReference(wa);sa.updateGraphics.push(wa);
pa.graphics=sa.updateGraphics.toArray();sa.emit("update",{graphics:sa.updateGraphics.toArray(),state:"active",aborted:!1,tool:sa.activeTool,toolEventInfo:{added:[wa],removed:[],type:"selection-change"},type:"update"})});return function(wa){return za.apply(this,arguments)}}(),removeFromSelection:za=>{const wa=this.updateGraphics.indexOf(za);qa.history.undo.forEach(Ka=>Ka.updates.splice(wa,1));qa.history.redo.forEach(Ka=>Ka.updates.splice(wa,1));this.updateGraphics.remove(za);const Ia=this.updateGraphics.toArray();
this.emit("update",{graphics:Ia,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[za],type:"selection-change"},type:"update"});0===this.updateGraphics.length?qa.complete():pa.graphics=Ia}});let Aa=!1,Ha=[ha.on("immediate-click",za=>this._getCommonUpdateOperationClickHandlers(qa,za,fa),H.ViewEventPriorities.WIDGET),ha.on("key-down",za=>{this._getCommonUpdateOperationKeyDownHandlers(qa,za);za.key!==L.SKETCH_KEYS.constraint||za.repeat||(Aa=!0,pa.enableMoveAllGraphics=!pa.enableMoveAllGraphics)},
H.ViewEventPriorities.WIDGET),ha.on("key-up",za=>{za.key===L.SKETCH_KEYS.constraint&&Aa&&(Aa=!1,pa.enableMoveAllGraphics=!pa.enableMoveAllGraphics)},H.ViewEventPriorities.WIDGET)],xa=this._getHandlesForComponent(qa,fa);return qa});return function(da,fa,ha){return aa.apply(this,arguments)}}();ma._setupReshape3DOperation=function(){var aa=q._asyncToGenerator(function*(da,fa,ha,sa=!1){var pa=this;const qa=yield this._requireModule(new Promise((za,wa)=>e(["../../views/3d/interactive/editingTools"],za,
wa)));if(ua(qa))return qa;this.snappingOptions.enabledToggled=!1;const Aa=new qa.module.GraphicReshapeTool({view:ha,graphic:da,enableZVertex:fa.enableZ&&"move"===fa.reshapeOptions.vertexOperation,enableZShape:fa.enableZ&&"move"===fa.reshapeOptions.shapeOperation,enableMoveGraphic:"move"===fa.reshapeOptions.shapeOperation||"move-xy"===fa.reshapeOptions.shapeOperation,enableMidpoints:"split"===fa.reshapeOptions.edgeOperation,enableEdgeOffset:"offset"===fa.reshapeOptions.edgeOperation,snappingManager:this._snappingManager});
ha.tools.add(Aa);sa||this.updateGraphics.add(da);const Ha=[],xa=new W.UpdateOperationHandle({activeComponent:Aa,tool:"reshape",type:"update",onEnd:()=>{var za;Ha.forEach(wa=>wa.remove());Ha.length=0;null==(za=this.view.tools)?void 0:za.remove(Aa);Aa.destroyed||Aa.destroy()},canUndo:()=>Aa.canUndo,undo:()=>{Aa.undo();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"reshape"})},canRedo:()=>Aa.canRedo,redo:()=>{Aa.redo();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"reshape"})},
addToSelection:function(){var za=q._asyncToGenerator(function*(wa){pa.updateGraphics.add(wa);pa.emit("update",{graphics:pa.updateGraphics.toArray(),state:"active",aborted:!1,tool:pa.activeTool,toolEventInfo:{added:[wa],removed:[],type:"selection-change"},type:"update"});wa=yield pa._setupMove3DOperation(pa.updateGraphics.toArray(),fa,ha,"transform",!0);ua(wa)||(xa.onEnd(),xa.destroy(),pa._setUpdateOperationHandle(wa,fa))});return function(wa){return za.apply(this,arguments)}}(),removeFromSelection:za=>
{this.updateGraphics.remove(za);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[za],type:"selection-change"},type:"update"});xa.complete()},toggleTool:function(){var za=q._asyncToGenerator(function*(){if(!1!==fa.toggleToolOnClick){var wa=yield pa._setupGraphicTransform3DOperation(pa.updateGraphics.toArray(),fa,ha,!0);ua(wa)||(xa.onEnd(),xa.destroy(),pa._setUpdateOperationHandle(wa,fa))}});return function(){return za.apply(this,
arguments)}}()});Ha.push(...this._getHandlesForComponent(xa,fa),ha.on("immediate-click",za=>this._getCommonUpdateOperationClickHandlers(xa,za,fa),H.ViewEventPriorities.WIDGET),ha.on("key-down",za=>{this._getCommonUpdateOperationKeyDownHandlers(xa,za);za.key===L.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!0,za.stopPropagation())},H.ViewEventPriorities.WIDGET),ha.on("key-up",za=>{za.key===L.SKETCH_KEYS.snappingToggle&&(this.snappingOptions.enabledToggled=!1,za.stopPropagation())},
H.ViewEventPriorities.WIDGET));return xa});return function(da,fa,ha){return aa.apply(this,arguments)}}();ma._setupTransformOrReshape2DOperation=function(){var aa=q._asyncToGenerator(function*(da,fa,ha,sa){var pa=this;this.updateGraphics.addMany(da);yield this._updateSpatialReference(da);da="transform"===fa?yield this._getBox(da,ha,sa):yield this._getReshape(da,ha,sa);if(ua(da))return da;const qa=new W.UpdateOperationHandle({activeComponent:da,type:"update",onEnd:()=>{Ha.forEach(xa=>xa.remove());Aa.forEach(xa=>
xa.remove());Ha=[];Aa=[];qa.activeComponent&&!qa.activeComponent.destroyed&&qa.activeComponent.destroy();this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{Q(qa,this.updateGraphics.toArray());qa.refreshComponent();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:qa.tool})},redo:()=>{Z(qa,this.updateGraphics.toArray());qa.refreshComponent();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:qa.tool})},addToSelection:function(){var xa=q._asyncToGenerator(function*(za){var wa=
qa.activeComponent;if("reshape"===wa.type){wa=[...pa.updateGraphics,za];pa.updateGraphics.removeAll();wa=yield pa._setupMove2DOperation(wa,ha,sa);if(ua(wa))return;qa.onEnd();qa.destroy();pa._setUpdateOperationHandle(wa,ha)}else pa.updateGraphics.add(za),wa.graphics=pa.updateGraphics.toArray(),wa.refresh(),qa.resetHistory();pa.emit("update",{graphics:pa.updateGraphics.toArray(),state:"active",aborted:!1,tool:pa.activeTool,toolEventInfo:{added:[za],removed:[],type:"selection-change"},type:"update"})});
return function(za){return xa.apply(this,arguments)}}(),removeFromSelection:function(){var xa=q._asyncToGenerator(function*(za){const wa=pa.updateGraphics.indexOf(za);qa.history.undo.forEach(Ka=>Ka.updates.splice(wa,1));qa.history.redo.forEach(Ka=>Ka.updates.splice(wa,1));pa.updateGraphics.remove(za);const Ia=pa.updateGraphics.toArray();if(0===Ia.length)qa.complete();else{const Ka=Ia[0].geometry;1!==Ia.length||!x.isSome(Ka)||"point"!==Ka.type&&"multipoint"!==Ka.type?qa.activeComponent.graphics=Ia:
qa.toggleTool()}pa.emit("update",{graphics:Ia,state:"active",aborted:!1,tool:pa.activeTool,toolEventInfo:{added:[],removed:[za],type:"selection-change"},type:"update"})});return function(za){return xa.apply(this,arguments)}}(),toggleTool:function(){var xa=q._asyncToGenerator(function*(){if(!(1<pa.updateGraphics.length)){var za=pa.updateGraphics.getItemAt(0),wa=za.geometry;x.isSome(wa)&&("reshape"===qa.tool&&("point"===wa.type||"multipoint"===wa.type)||"transform"===qa.tool&&"extent"===wa.type)||(wa=
null,"transform"===qa.tool?wa=yield pa._getReshape([za],ha,sa):"reshape"===qa.tool&&(wa=yield pa._getBox([za],ha,sa)),ua(wa)||(qa.activeComponent.destroy(),qa.activeComponent=wa,qa.activeComponent&&(Ha.forEach(Ia=>Ia.remove()),Ha=pa._getHandlesForComponent(qa,ha))))}});return function(){return xa.apply(this,arguments)}}()});let Aa=[sa.on("immediate-click",xa=>this._getCommonUpdateOperationClickHandlers(qa,xa,ha),H.ViewEventPriorities.WIDGET),sa.on("key-down",xa=>{this._getCommonUpdateOperationKeyDownHandlers(qa,
xa);xa.key!==L.SKETCH_KEYS.snappingToggle||xa.repeat||(this.snappingOptions.enabledToggled=!0,xa.stopPropagation());xa.key===L.SKETCH_KEYS.constraint&&!xa.repeat&&qa&&(xa=qa.activeComponent)&&"box"===xa.type&&(xa.preserveAspectRatio=!xa.preserveAspectRatio)},H.ViewEventPriorities.WIDGET),sa.on("key-up",xa=>{var za;xa.key===L.SKETCH_KEYS.snappingToggle&&"reshape"===(null==qa?void 0:null==(za=qa.activeComponent)?void 0:za.type)&&(this.snappingOptions.enabledToggled=!1,xa.stopPropagation());xa.key===
L.SKETCH_KEYS.constraint&&qa&&(xa=qa.activeComponent)&&"box"===xa.type&&(xa.preserveAspectRatio=!xa.preserveAspectRatio)},H.ViewEventPriorities.WIDGET)],Ha=this._getHandlesForComponent(qa,ha);return qa});return function(da,fa,ha,sa){return aa.apply(this,arguments)}}();ma._getGraphicMover=function(){var aa=q._asyncToGenerator(function*(da,fa,ha){({enableMoveAllGraphics:fa}=fa);const sa=yield this._requireModule(new Promise((pa,qa)=>e(["../../views/draw/support/GraphicMover"],Aa=>pa(Ba(Aa)),qa)));return ua(sa)?
sa:new sa.module.default({enableMoveAllGraphics:fa,highlightsEnabled:!0,indicatorsEnabled:!1,graphics:da,view:ha,callbacks:{onGraphicMoveStart:({dx:pa,dy:qa,graphic:Aa})=>{this._displayGrabbingCursor();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:pa,dy:qa,mover:Aa,type:"move-start"},type:"update"})},onGraphicMove:({dx:pa,dy:qa,graphic:Aa})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,
tool:this.activeTool,toolEventInfo:{dx:pa,dy:qa,mover:Aa,type:"move"},type:"update"}),onGraphicMoveStop:({dx:pa,dy:qa,graphic:Aa})=>{this._displayPointerCursor();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:pa,dy:qa,mover:Aa,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})});return function(da,fa,ha){return aa.apply(this,arguments)}}();
ma._getBox=function(){var aa=q._asyncToGenerator(function*(da,fa,ha){const {enableRotation:sa,enableScaling:pa,preserveAspectRatio:qa}=fa;fa=yield this._requireModule(new Promise((Aa,Ha)=>e(["../../views/draw/support/Box"],xa=>Aa(Ba(xa)),Ha)));return ua(fa)?fa:new fa.module.default({graphics:da,enableRotation:sa,enableScaling:pa,preserveAspectRatio:qa,layer:this._internalGraphicsLayer,view:ha,callbacks:{onMoveStart:Aa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,
tool:this.activeTool,toolEventInfo:{...Aa},type:"update"}),onMove:Aa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Aa},type:"update"}),onMoveStop:Aa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Aa},type:"update"}),onScaleStart:Aa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Aa},
type:"update"}),onScale:Aa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Aa},type:"update"}),onScaleStop:Aa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Aa},type:"update"}),onRotateStart:Aa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Aa},type:"update"}),onRotate:Aa=>
this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Aa},type:"update"}),onRotateStop:Aa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Aa},type:"update"})}})});return function(da,fa,ha){return aa.apply(this,arguments)}}();ma._getReshape=function(){var aa=q._asyncToGenerator(function*(da,fa,ha){var sa,pa;const qa="split"===(null==(sa=fa.reshapeOptions)?
void 0:sa.edgeOperation);fa="move"===(null==(pa=fa.reshapeOptions)?void 0:pa.shapeOperation);pa=yield this._requireModule(new Promise((Aa,Ha)=>e(["../../views/draw/support/Reshape"],xa=>Aa(Ba(xa)),Ha)));return ua(pa)?pa:new pa.module.default({enableMidpoints:qa,enableMovement:fa,graphic:da[0],layer:this._internalGraphicsLayer,snappingManager:this._snappingManager,view:ha,callbacks:{onReshapeStart:Aa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,
toolEventInfo:{...Aa},type:"update"}),onReshape:Aa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Aa},type:"update"}),onReshapeStop:({mover:Aa,type:Ha})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:Aa,type:Ha},type:"update"}),onMoveStart:({dx:Aa,dy:Ha,mover:xa,type:za})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",
aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Aa,dy:Ha,mover:xa,type:za},type:"update"}),onMove:({dx:Aa,dy:Ha,mover:xa,type:za})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Aa,dy:Ha,mover:xa,type:za},type:"update"}),onMoveStop:({dx:Aa,dy:Ha,mover:xa,type:za})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Aa,dy:Ha,mover:xa,type:za},type:"update"}),
onVertexAdd:({added:Aa,type:Ha,vertices:xa})=>{Aa=Aa.map(za=>p.geometryToCoordinates(za.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:Aa,vertices:xa,type:Ha},type:"update"})},onVertexRemove:({removed:Aa,type:Ha,vertices:xa})=>{Aa=Aa.map(za=>p.geometryToCoordinates(za.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:Aa,
vertices:xa,type:Ha},type:"update"})}}})});return function(da,fa,ha){return aa.apply(this,arguments)}}();ma._getHandlesForComponent=function(aa,da){const fa=aa.activeComponent;switch(fa.type){case "graphic-mover":return[fa.on("graphic-click",({graphic:ha,viewEvent:sa})=>{var pa;null!=(pa=sa.native)&&pa.shiftKey&&(sa.stopPropagation(),aa.removeFromSelection(ha))}),fa.on("graphic-move-start",ha=>aa.addToHistory(la(ha.allGraphics)))];case "box":return[fa.on("graphic-click",ha=>this._onTransformOrReshape2DGraphicClick(aa,
da,ha)),fa.on("move-start",ha=>aa.addToHistory(la(ha.graphics))),fa.on("rotate-start",ha=>aa.addToHistory(la(ha.graphics))),fa.on("scale-start",ha=>aa.addToHistory(la(ha.graphics)))];case "reshape":return[fa.on("graphic-click",ha=>this._onTransformOrReshape2DGraphicClick(aa,da,ha)),fa.on("move-start",ha=>aa.addToHistory(la([ha.mover]))),fa.on("reshape-start",ha=>aa.addToHistory(la([ha.graphic]))),fa.on("vertex-add",ha=>aa.addToHistory(la([ha.oldGraphic]))),fa.on("vertex-remove",ha=>aa.addToHistory(la([ha.oldGraphic])))];
case "move-3d":return[fa.on("graphic-move-start",ha=>{aa.addToHistory(la(ha.allGraphics));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:0<ha.allGraphics.length?ha.allGraphics[0]:null,type:"move-start"},type:"update"})}),fa.on("graphic-move",ha=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ha.dx,dy:ha.dy,mover:0<ha.allGraphics.length?
ha.allGraphics[0]:null,type:"move"},type:"update"})}),fa.on("graphic-move-stop",ha=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:0<ha.allGraphics.length?ha.allGraphics[0]:null,type:"move-stop"},type:"update"})}),fa.on("immediate-click",ha=>{ha.shiftKey?this._toggleSelection([ha.graphic],aa,da):aa.toggleTool()})];case "transform-3d":return[fa.on("record-undo",({record:ha})=>{aa.addToHistory({updates:[ha]})}),
fa.on("graphic-translate-start",ha=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ha.graphic,dx:ha.dxScreen,dy:ha.dyScreen,type:"move-start"},type:"update"})}),fa.on("graphic-translate-stop",ha=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ha.graphic,dx:ha.dxScreen,dy:ha.dyScreen,type:"move-stop"},type:"update"})}),fa.on("graphic-rotate-start",
ha=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ha.graphic,angle:ha.angle,type:"rotate-start"},type:"update"})}),fa.on("graphic-rotate-stop",ha=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ha.graphic,angle:ha.angle,type:"rotate-stop"},type:"update"})}),fa.on("graphic-scale-start",ha=>{this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ha.graphic,xScale:ha.xScale,yScale:ha.yScale,type:"scale-start"},type:"update"})}),fa.on("graphic-scale-stop",ha=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ha.graphic,xScale:ha.xScale,yScale:ha.yScale,type:"scale-stop"},type:"update"})}),fa.on("graphic-translate",ha=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,
tool:this.activeTool,toolEventInfo:{mover:ha.graphic,dx:ha.dxScreen,dy:ha.dyScreen,type:"move"},type:"update"})}),fa.on("graphic-rotate",ha=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ha.graphic,angle:ha.angle,type:"rotate"},type:"update"})}),fa.on("graphic-scale",ha=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ha.graphic,xScale:ha.xScale,
yScale:ha.yScale,type:"scale"},type:"update"})}),fa.on("immediate-click",ha=>{ha.shiftKey?this._toggleSelection([ha.graphic],aa,da):aa.toggleTool()})];case "reshape-3d":return[fa.on("reshape",ha=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:ha,type:"update"})}),fa.on("move",ha=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:ha,type:"update"})}),fa.on("vertex-add",
ha=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:ha,type:"update"})}),fa.on("vertex-remove",ha=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:ha,type:"update"})}),fa.on("immediate-click",ha=>{ha.shiftKey?this._toggleSelection([ha.graphic],aa,da):aa.toggleTool()})]}};ma._onTransformOrReshape2DGraphicClick=function(aa,da,fa){var ha;const {graphic:sa,
viewEvent:pa}=fa;if(null!=(ha=pa.native)&&ha.shiftKey&&sa.layer===this.layer)return pa.stopPropagation(),aa.removeFromSelection(sa);if(da.toggleToolOnClick)return pa.stopPropagation(),aa.toggleTool()};ma._setUpdateOperationHandle=function(aa,da){this._operationHandle=aa;const fa=this.view.map;this._disablePopup(da);aa.on("complete",()=>{if(aa===this._operationHandle){const ha=this.updateGraphics.toArray(),sa=this._operationHandle.tool;this._operationHandle.destroy();this._operationHandle=null;this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray());
this.updateGraphics.removeAll();fa&&fa.remove(this._internalGraphicsLayer);this._restorePopup(da);this.emit("update",{graphics:ha,state:"complete",aborted:aa.cancelled,tool:sa,toolEventInfo:null,type:"update"})}})};ma._getCommonUpdateOperationClickHandlers=function(){var aa=q._asyncToGenerator(function*(da,fa,ha){const sa=J.createScreenPointFromEvent(fa),pa=(yield fa.async(()=>this._getFirstHit(sa))).results;pa.length?fa.native.shiftKey&&this._toggleSelection(pa.map(qa=>qa.graphic),da,ha)?fa.stopPropagation():
pa.some(qa=>qa.graphic&&this.updateGraphics.includes(qa.graphic))?fa.stopPropagation():da.complete():da.complete()});return function(da,fa,ha){return aa.apply(this,arguments)}}();ma._toggleSelection=function(aa,da,fa){const ha=!!fa.multipleSelectionEnabled;return aa.some(sa=>null==sa?!1:ha&&sa.layer===this.layer?(this.updateGraphics.includes(sa)?da.removeFromSelection(sa):da.addToSelection(sa),!0):!1)};ma._getCommonUpdateOperationKeyDownHandlers=function(aa,da){if(aa){var fa=da.key;fa===L.SKETCH_KEYS.undo&&
aa.canUndo()?(da.stopPropagation(),aa.undo()):fa===L.SKETCH_KEYS.redo&&aa.canRedo()?(da.stopPropagation(),aa.redo()):fa===L.SKETCH_KEYS.cancel?(da.stopPropagation(),aa.cancel()):this.allowDeleteKey&&L.SKETCH_KEYS.delete.includes(fa)&&this._onDeleteKey(da)}};ma._onDeleteKey=function(aa){if(this._operationHandle&&"update"===this._operationHandle.type){var da=this.activeComponent,fa=this.updateGraphics.toArray();x.isNone(da)||"reshape-3d"===da.type||"reshape"===da.type&&(1!==fa.length||"point"!==x.get(fa[0].geometry,
"type"))||(aa.stopPropagation(),this.delete())}};ma._removeDefaultLayer=function(){this._internalGraphicsLayer&&(this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=x.destroyMaybe(this._internalGraphicsLayer))};ma._isComponentGraphic=function(aa){const {activeComponent:da}=this;return!aa||x.isNone(da)?!1:aa.attributes&&aa.attributes.esriSketchTool||"draw-2d"===da.type&&da.graphic===aa||("box"===da.type||"reshape"===da.type)&&da.isUIGraphic(aa)};
ma._displayPointerCursor=function(){this.view&&this.view.container&&"pointer"!==this.view.cursor&&(this.view.cursor="pointer")};ma._displayGrabbingCursor=function(){this.view&&this.view.container&&"grabbing"!==this.view.cursor&&(this.view.cursor="grabbing")};ma._displayDefaultCursor=function(){this.view&&this.view.container&&null!==this.view.cursor&&(this.view.cursor=null)};ma._logError=function(aa,da,fa){Ga.error(new w(aa,da,fa))};ma._requireModule=function(){var aa=q._asyncToGenerator(function*(da){const fa=
new AbortController;this._moduleLoaderAbortController=fa;da=yield da;return this._moduleLoaderAbortController!==fa||fa.signal.aborted?{requireError:"aborted"}:{module:da}});return function(da){return aa.apply(this,arguments)}}();ma._emitUndoEvent=function(aa){this.emit("undo",{...aa,type:"undo"})};ma._emitRedoEvent=function(aa){this.emit("redo",{...aa,type:"redo"})};ma._emitDeleteEvent=function(aa){this.emit("delete",{...aa,type:"delete"})};ma.test=function(){return{operationHandle:this._operationHandle,
defaultUpdateOptions:Ma}};ma.wait=function(){return g.whenOnce(()=>!this.updating)};ma._beginAsyncOperation=function(){this._numUpdating+=1;this.notifyChange("updating")};ma._endAsyncOperation=function(){--this._numUpdating;this.notifyChange("updating")};ma._disablePopupEnabled=function(aa){var da;return"3d"!==(null==(da=this.view)?void 0:da.type)||this.updateOnGraphicClick||x.isSome(aa)&&aa.toggleToolOnClick};ma._disablePopup=function(aa){this._disablePopupEnabled(aa)&&(aa=this.view.popup)&&x.isNone(this._originalAutoOpenEnabled)&&
(this._originalAutoOpenEnabled=aa.autoOpenEnabled,aa.autoOpenEnabled=!1)};ma._restorePopup=function(aa){this._disablePopupEnabled(aa)&&(aa=this.view.popup)&&x.isSome(this._originalAutoOpenEnabled)&&(aa.autoOpenEnabled=this._originalAutoOpenEnabled,this._originalAutoOpenEnabled=null)};ma._waitViewReady=function(){var aa=q._asyncToGenerator(function*(){const da=this.view;da&&(x.abortMaybe(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,yield d.whenOrAbort(g.whenOnce(()=>
null==da?void 0:da.ready),this._viewReadyAbortController.signal))});return function(){return aa.apply(this,arguments)}}();q._createClass(na,[{key:"_defaultUpdateTool",get:function(){return"3d"===this.view.type?"move":"transform"}},{key:"updating",get:function(){return 0<this._numUpdating}},{key:"activeTool",get:function(){return this._operationHandle&&this._operationHandle.tool?this._operationHandle.tool:null}},{key:"activeComponent",get:function(){return this._operationHandle?this._operationHandle.activeComponent:
null}},{key:"createGraphic",get:function(){return!x.isSome(this.activeComponent)||"draw-3d"!==this.activeComponent.type&&"draw-2d"!==this.activeComponent.type?this._get("createGraphic"):x.unwrap(this.activeComponent.graphic)}},{key:"defaultCreateOptions",set:function(aa){this._set("defaultCreateOptions",{...Fa,...aa})}},{key:"defaultUpdateOptions",set:function(aa){this._set("defaultUpdateOptions",{...Ma,...aa,reshapeOptions:{...Ma.reshapeOptions,...null==aa?void 0:aa.reshapeOptions}})}},{key:"snappingOptions",
set:function(aa){x.isSome(this._snappingManager)&&(this._snappingManager.options=aa);this._set("snappingOptions",aa)}},{key:"state",get:function(){var aa;const da=!(null==(aa=this.view)||!aa.ready||!this.layer);aa=this._operationHandle;return da&&aa?"active":da?"ready":"disabled"}},{key:"view",get:function(){return this._get("view")},set:function(aa){const da=this._get("view");if(da){const {container:fa,map:ha}=da;fa&&(da.cursor=null);ha&&ha.remove(this._internalGraphicsLayer);this._viewHandles.removeAll();
this.cancel()}this._handles.remove("view-ready");aa&&this._handles.add(g.when(()=>aa.ready,fa=>{this._viewHandles.removeAll();fa&&this._viewHandles.add(this._generateViewHandles(aa))},g.syncAndInitial),"view-ready");this._set("view",aa)}}]);return na}(D.EventedAccessor);b.__decorate([k.property()],r.prototype,"updating",null);b.__decorate([k.property()],r.prototype,"_operationHandle",void 0);b.__decorate([k.property({readOnly:!0})],r.prototype,"activeTool",null);b.__decorate([k.property()],r.prototype,
"activeFillSymbol",void 0);b.__decorate([k.property()],r.prototype,"activeLineSymbol",void 0);b.__decorate([k.property()],r.prototype,"activeVertexSymbol",void 0);b.__decorate([k.property()],r.prototype,"allowDeleteKey",void 0);b.__decorate([k.property({readOnly:!0})],r.prototype,"createGraphic",null);b.__decorate([k.property()],r.prototype,"defaultCreateOptions",null);b.__decorate([k.property()],r.prototype,"defaultUpdateOptions",null);b.__decorate([k.property()],r.prototype,"layer",void 0);b.__decorate([k.property({types:E.symbolTypes})],
r.prototype,"pointSymbol",void 0);b.__decorate([k.property({types:E.symbolTypes})],r.prototype,"polygonSymbol",void 0);b.__decorate([k.property({types:E.symbolTypes})],r.prototype,"polylineSymbol",void 0);b.__decorate([k.property({type:C,nonNullable:!0})],r.prototype,"snappingOptions",null);b.__decorate([k.property()],r.prototype,"_snappingManager",void 0);b.__decorate([k.property({readOnly:!0})],r.prototype,"state",null);b.__decorate([k.property({readOnly:!0})],r.prototype,"updateGraphics",void 0);
b.__decorate([k.property()],r.prototype,"updateOnGraphicClick",void 0);b.__decorate([k.property({types:E.symbolTypes})],r.prototype,"updatePointSymbol",void 0);b.__decorate([k.property({types:E.symbolTypes})],r.prototype,"updatePolygonSymbol",void 0);b.__decorate([k.property({types:E.symbolTypes})],r.prototype,"updatePolylineSymbol",void 0);b.__decorate([k.property({types:E.symbolTypes})],r.prototype,"vertexSymbol",void 0);b.__decorate([k.property({value:null})],r.prototype,"view",null);return r=
b.__decorate([t.subclass("esri.widgets.Sketch.SketchViewModel")],r)})},"esri/layers/GraphicsLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../core/support/OwningCollection ./Layer ./mixins/BlendLayer ./mixins/ScaleRangeLayer ../support/GraphicsCollection ../symbols/support/ElevationInfo".split(" "),function(e,q,
b,E,h,r,w,D,K,I,x,d,g){E=function(k){function B(t){t=k.call(this,t)||this;t.elevationInfo=null;t.graphics=new d.GraphicsCollection;t.screenSizePerspectiveEnabled=!0;t.type="graphics";t.internal=!1;return t}e._inheritsLoose(B,k);var c=B.prototype;c.destroy=function(){this.removeAll();this.graphics.destroy()};c.add=function(t){this.graphics.add(t);return this};c.addMany=function(t){this.graphics.addMany(t);return this};c.removeAll=function(){this.graphics.removeAll();return this};c.remove=function(t){this.graphics.remove(t)};
c.removeMany=function(t){this.graphics.removeMany(t)};c.on=function(t,n){return k.prototype.on.call(this,t,n)};c.graphicChanged=function(t){this.emit("graphic-update",t)};return B}(I.BlendLayer(x.ScaleRangeLayer(K)));q.__decorate([b.property({type:g})],E.prototype,"elevationInfo",void 0);q.__decorate([b.property(D.owningCollectionProperty(d.GraphicsCollection,"graphics"))],E.prototype,"graphics",void 0);q.__decorate([b.property({type:["show","hide"]})],E.prototype,"listMode",void 0);q.__decorate([b.property()],
E.prototype,"screenSizePerspectiveEnabled",void 0);q.__decorate([b.property({readOnly:!0})],E.prototype,"type",void 0);q.__decorate([b.property({constructOnly:!0})],E.prototype,"internal",void 0);return E=q.__decorate([w.subclass("esri.layers.GraphicsLayer")],E)})},"esri/views/DOMContainer":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/domUtils ../core/reactiveUtils ../core/scheduling ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./overlay/ViewOverlay ../widgets/Popup".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g){function k(c){c&&(E.empty(c),c.parentNode&&c.parentNode.removeChild(c))}const B=[0,0];e.DOMContainer=c=>{c=function(t){function n(...p){var y=t.call(this,...p)||this;y._freqInfo={freq:16,time:750};y._overlayRenderTaskHandle=null;y.height=0;y.position=null;y.resizing=!1;y.root=null;y.surface=null;y.suspended=!0;y.ui=null;y.userContent=null;y.width=0;y.widthBreakpoint=null;y.handles.add([y.watch("cursor",O=>{const z=y.surface;z&&z.setAttribute("data-cursor",O)}),
y.watch("interacting",O=>{const z=y.surface;z&&z.setAttribute("data-interacting",O.toString())})]);return y}q._inheritsLoose(n,t);var u=n.prototype;u.initialize=function(){this.handles.add(this.watch("ui",(p,y)=>this._handleUIChange(p,y)));this._wireUI(this.ui);this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])};u.destroy=function(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),
this.container=null)};u.blur=function(){this.surface&&this.surface.blur()};u.focus=function(){this.surface&&this.surface.focus()};u.pageToContainer=function(p,y,O){const z=this.position;p-=z[0];y-=z[1];O?(O[0]=p,O[1]=y):O=[p,y];return O};u.containerToPage=function(p,y,O){const z=this.position;p+=z[0];y+=z[1];O?(O[0]=p,O[1]=y):O=[p,y];return O};u._handleUIChange=function(p,y){y&&(this.handles.remove("ui"),y.destroy());p&&this._wireUI(p);this._set("ui",p)};u._wireUI=function(p){this.handles.remove("ui");
p&&(p.view=this,this.handles.add([h.watch(()=>this.root,y=>{if(y){{const O=document.createElement("div");y.appendChild(O);y=O}}else y=null;p.container=y},h.initial),h.watch(()=>this.popup,(y,O)=>{O&&p.remove(O,"popup");y&&(y.view=p.view,p.add(y,{key:"popup",position:"manual"}))},h.initial)],"ui"))};u._stopMeasuring=function(){this.handles.remove("measuring");this._get("resizing")&&this._set("resizing",!1)};u._startMeasuring=function(){const p=this._freqInfo;p.freq=16;p.time=750;this.handles.add([(()=>
{const y=()=>{p.freq=16;p.time=750};window.addEventListener("resize",y);return{remove(){window.removeEventListener("resize",y)}}})(),r.addFrameTask({prepare:y=>{const O=this._measure(),z=this._freqInfo;z.time+=y.deltaTime;O&&(z.freq=16,this._get("resizing")||this._set("resizing",!0));z.time<z.freq||(z.time=0,this._position()||O?z.freq=16:z.freq=Math.min(750,2*z.freq),!O&&512<=z.freq&&this._get("resizing")&&this._set("resizing",!1))}})],"measuring");this._measure();this._position()};u._measure=function(){var p=
this.container;const y=p?p.clientWidth:0;p=p?p.clientHeight:0;if(0===y||0===p)return this.suspended||this._set("suspended",!0),!1;const O=this.width,z=this.height;if(y===O&&p===z)return this.suspended&&this._set("suspended",!1),!1;this._set("width",y);this._set("height",p);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:O,oldHeight:z,width:y,height:p});return!0};u._position=function(){var p=this.container;const y=this.position;{const O=(p.ownerDocument||window.document).defaultView;
p=p.getBoundingClientRect();B[0]=p.left+O.pageXOffset;B[1]=p.top+O.pageYOffset}return y&&B[0]===y[0]&&B[1]===y[1]?!1:(this._set("position",[B[0],B[1]]),!0)};u.forceDOMReadyCycle=function(){};q._createClass(n,[{key:"container",set:function(p){var y=this._get("container");if(y!==p)if(this.handles.remove("dom-size"),this._stopMeasuring(),y&&(y.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),
this._set("overlay",null),k(this.root),this._set("root",null),E.reparent(this.userContent,y),k(this.userContent),this._set("userContent",null)),p){p.classList.add("esri-view");y=document.createElement("div");y.className="esri-view-user-storage";E.reparent(p,y);p.appendChild(y);this._set("userContent",y);y=document.createElement("div");y.className="esri-view-root";p.insertBefore(y,p.firstChild);this._set("root",y);const O=document.createElement("div");O.className="esri-view-surface";O.setAttribute("role",
"application");O.tabIndex=0;y.appendChild(O);this._set("surface",O);const z=new d;y.appendChild(z.surface);this._set("overlay",z);z.watch("needsRender",f=>{f&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=r.addFrameTask({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)});this.forceDOMReadyCycle();this.handles.add(h.watch(()=>this.size,f=>{const [F,S]=f;F>=document.body.clientWidth||S>=document.body.clientHeight?
O.classList.add("esri-view-surface--inset-outline"):O.classList.remove("esri-view-surface--inset-outline")},h.initial),"dom-size");this._set("container",p);this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}},{key:"focused",get:function(){const p=document.activeElement===this.surface;return document.hasFocus()&&p}},{key:"popup",get:function(){return this._get("popup")||new g({view:this})},
set:function(p){const y=this._get("popup");y&&y!==p&&y.destroy();this._set("popup",p)}},{key:"size",get:function(){return[this.width,this.height]}}]);return n}(c);b.__decorate([w.property({value:null,cast:t=>E.byId(t)})],c.prototype,"container",null);b.__decorate([w.property({readOnly:!0})],c.prototype,"focused",null);b.__decorate([w.property({readOnly:!0})],c.prototype,"height",void 0);b.__decorate([w.property({type:g})],c.prototype,"popup",null);b.__decorate([w.property({type:d})],c.prototype,"overlay",
void 0);b.__decorate([w.property({readOnly:!0})],c.prototype,"position",void 0);b.__decorate([w.property({readOnly:!0})],c.prototype,"resizing",void 0);b.__decorate([w.property({readOnly:!0})],c.prototype,"root",void 0);b.__decorate([w.property({value:null,readOnly:!0})],c.prototype,"size",null);b.__decorate([w.property({readOnly:!0})],c.prototype,"surface",void 0);b.__decorate([w.property({readOnly:!0})],c.prototype,"suspended",void 0);b.__decorate([w.property()],c.prototype,"ui",void 0);b.__decorate([w.property({readOnly:!0})],
c.prototype,"userContent",void 0);b.__decorate([w.property({readOnly:!0})],c.prototype,"width",void 0);b.__decorate([w.property()],c.prototype,"widthBreakpoint",void 0);return c=b.__decorate([x.subclass("esri.views.DOMContainer")],c)};e.isDOMContainer=function(c){return c&&"focus"in c};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/overlay/ViewOverlay":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../libs/maquette/projection ../../libs/maquette/projector ../support/WatchUpdatingTracking".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d){b=function(g){function k(){var c=g.apply(this,arguments)||this;c.items=new E;c._watchUpdatingTracking=new d.WatchUpdatingTracking;c._callbacks=new Map;c._projector=x.createProjector();c._hiddenProjector=x.createProjector();return c}e._inheritsLoose(k,g);var B=k.prototype;B.initialize=function(){const c=document.createElement("div");c.className="esri-overlay-surface";this._set("surface",c);this._hiddenSurface=document.createElement("div");this._hiddenSurface.setAttribute("style",
"visibility: hidden;");c.appendChild(this._hiddenSurface);this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,t=>{for(const n of t.added){const u=()=>n.render();this._callbacks.set(n,u);this._projector.append(this.surface,u)}for(const n of t.removed)t=this._projector.detach(this._callbacks.get(n)),this.surface.removeChild(t.domNode),this._callbacks.delete(n)})};B.addItem=function(c){this.items.add(c)};B.removeItem=function(c){this.items.remove(c)};B.destroy=function(){this.items.removeAll();
this._callbacks.forEach(c=>this._projector.detach(c));this._projector=this._callbacks=null;this._watchUpdatingTracking.destroy()};B.render=function(){this._projector.renderNow()};B.computeBoundingRect=function(c){const t=this._hiddenSurface,n=this._hiddenProjector;let u=null;const p=()=>u=c.render();n.append(t,p);n.renderNow();const y={left:0,top:0,right:0,bottom:0};if(u&&u.domNode){const O=u.domNode.getBoundingClientRect();y.left=O.left;y.top=O.top;y.right=O.right;y.bottom=O.bottom}for(n.detach(p);t.firstChild;)t.removeChild(t.firstChild);
return y};B.overlaps=function(c,t){c=this.computeBoundingRect(c);t=this.computeBoundingRect(t);return Math.max(c.left,t.left)<=Math.min(c.right,t.right)&&Math.max(c.top,t.top)<=Math.min(c.bottom,t.bottom)};B.renderCanvas=function(c){if(this.items.some(n=>n.visible)){var t=c.getContext("2d");t.save();t.font=`10px ${getComputedStyle(this.surface).fontFamily}`;this.items.forEach(n=>{t.save();n.renderCanvas(t);t.restore()});t.restore()}};e._createClass(k,[{key:"needsRender",get:function(){return 0<this.items.length}},
{key:"hasVisibleItems",get:function(){return this.items.some(c=>c.visible)}}]);return k}(b);q.__decorate([h.property({readOnly:!0})],b.prototype,"surface",void 0);q.__decorate([h.property({readOnly:!0})],b.prototype,"items",void 0);q.__decorate([h.property({readOnly:!0})],b.prototype,"needsRender",null);q.__decorate([h.property({readOnly:!0})],b.prototype,"_watchUpdatingTracking",void 0);q.__decorate([h.property({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],b.prototype,"updating",void 0);
return b=q.__decorate([K.subclass("esri.views.overlay.ViewOverlay")],b)})},"esri/widgets/Popup":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/Collection ../core/events ../core/Handles ../core/Logger ../core/maybe ../core/reactiveUtils ../core/throttle ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Feature ./Spinner ./Widget ./Feature/support/FeatureContentMixin ./Popup/PopupViewModel ./support/Heading ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../intl/substitute".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g,k,B,c,t,n,u,p,y,O,z,f,F,S,M,P,H){function L(W,ba){return void 0===ba?`${"esri-popup"}__${W}`:`${"esri-popup"}__${W}-${ba}`}const A={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},C=w.getLogger("esri.widgets.Popup"),J={closeButton:!0,featureNavigation:!0};b=function(W){function ba(v,N){var Q=W.call(this,v,N)||this;Q._blurClose=!1;Q._blurContainer=!1;Q._containerNode=null;Q._mainContainerNode=null;Q._featureMenuNode=null;Q._actionsMenuNode=null;Q._focusClose=
!1;Q._focusContainer=!1;Q._focusDockButton=!1;Q._focusFeatureMenuButton=!1;Q._focusActionsMenuButton=!1;Q._focusFirstFeature=!1;Q._focusFirstAction=!1;Q._handles=new r;Q._pointerOffsetInPx=16;Q._spinner=null;Q._feature=null;Q._featureMenuIntersectionObserverCallback=([Z])=>{null!=Z&&Z.isIntersecting&&Q.viewModel.featurePage++};Q._featureMenuIntersectionObserver=new IntersectionObserver(Q._featureMenuIntersectionObserverCallback,{root:window.document});Q._displaySpinnerThrottled=I.throttle(()=>Q._displaySpinner(),
0);Q.actions=null;Q.alignment="auto";Q.autoCloseEnabled=null;Q.autoOpenEnabled=null;Q.defaultPopupTemplateEnabled=null;Q.content=null;Q.collapsed=!1;Q.collapseEnabled=!0;Q.dockEnabled=!1;Q.featureCount=null;Q.featureMenuOpen=!1;Q.features=null;Q.goToOverride=null;Q.headingLevel=2;Q.highlightEnabled=null;Q.location=null;Q.label=void 0;Q.maxInlineActions=3;Q.messages=null;Q.messagesCommon=null;Q.promises=null;Q.selectedFeature=null;Q.selectedFeatureIndex=null;Q.spinnerEnabled=!0;Q.title=null;Q.updateLocationEnabled=
null;Q.view=null;Q.viewModel=new O;Q.visible=null;Q.visibleElements={...J};Q._addSelectedFeatureIndexHandle();Q.own([x.watch(e._assertThisInitialized(Q),"viewModel.screenLocation",()=>Q._positionContainer()),x.watch(e._assertThisInitialized(Q),["viewModel.active","dockEnabled"],()=>Q._toggleScreenLocationEnabled()),x.watch(e._assertThisInitialized(Q),"viewModel.screenLocation",(Z,ja)=>{!!Z!==!!ja&&Q.reposition()}),x.watch(e._assertThisInitialized(Q),["viewModel.view.padding","viewModel.view.size",
"viewModel.active","viewModel.location","alignment"],()=>Q.reposition()),x.watch(e._assertThisInitialized(Q),"spinnerEnabled",Z=>Q._spinnerEnabledChange(Z)),x.watch(e._assertThisInitialized(Q),"viewModel.view.size",(Z,ja)=>Q._updateDockEnabledForViewSize(Z,ja)),x.watch(e._assertThisInitialized(Q),"viewModel.view",(Z,ja)=>Q._viewChange(Z,ja)),x.watch(e._assertThisInitialized(Q),"viewModel.view.ready",(Z,ja)=>Q._viewReadyChange(Z,ja)),x.watch(e._assertThisInitialized(Q),["viewModel.waitingForResult",
"viewModel.location"],()=>{Q._hideSpinner();Q._displaySpinnerThrottled()}),x.watch(e._assertThisInitialized(Q),["selectedFeatureWidget.viewModel.title","selectedFeatureWidget.viewModel.state"],()=>Q._setTitleFromFeatureWidget()),x.watch(e._assertThisInitialized(Q),["selectedFeatureWidget.viewModel.content","selectedFeatureWidget.viewModel.state"],()=>Q._setContentFromFeatureWidget()),x.whenFalse(e._assertThisInitialized(Q),"collapsed",()=>{var Z,ja;"xsmall"===(null==(Z=Q.viewModel)?void 0:null==(ja=
Z.view)?void 0:ja.widthBreakpoint)&&Q.viewModel.active&&Q.collapseEnabled&&Q.viewModel.centerAtLocation()}),x.on(e._assertThisInitialized(Q),"viewModel.allActions","change",()=>Q._watchActions()),x.init(e._assertThisInitialized(Q),"viewModel.allActions",()=>Q._watchActions()),x.watch(e._assertThisInitialized(Q),"viewModel.featureViewModels",()=>Q._featureMenuViewportScrollTop())]);return Q}e._inheritsLoose(ba,W);var X=ba.prototype;X.destroy=function(){var v,N;this._destroySelectedFeatureWidget();
this._destroySpinner();null==(v=this._handles)?void 0:v.destroy();this._unobserveFeatureMenuObserver();null==(N=this._featureMenuIntersectionObserver)?void 0:N.disconnect();this._handles=null};X.castVisibleElements=function(v){return{...J,...v}};X.blur=function(){const {active:v}=this.viewModel;v||C.warn("Popup can only be blurred when currently active.");this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0;this.scheduleRender()};X.clear=function(){this.viewModel.clear()};X.close=
function(){this.visible=!1};X.fetchFeatures=function(v,N){return this.viewModel.fetchFeatures(v,N)};X.focus=function(){const {active:v}=this.viewModel;v||C.warn("Popup can only be focused when currently active.");this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0;this.scheduleRender()};X.next=function(){return this.viewModel.next()};X.open=function(v){var N,Q;this._handles.remove("selected-index");const Z={collapsed:v?!!v.collapsed:!1,actionsMenuOpen:v?!!v.actionsMenuOpen:
!1,featureMenuOpen:v?!!v.featureMenuOpen:!1};"xsmall"===(null==(N=this.viewModel)?void 0:null==(Q=N.view)?void 0:Q.widthBreakpoint)&&(Z.collapsed=!0);this.set(Z);this.viewModel.open(v);this._shouldFocus(v);this._addSelectedFeatureIndexHandle()};X.previous=function(){return this.viewModel.previous()};X.reposition=function(){this.renderNow();this._positionContainer();this._setCurrentAlignment()};X.triggerAction=function(v){this.viewModel.triggerAction(v)};X.render=function(){var v,N,Q,Z;const {actionsMenuOpen:ja,
dockEnabled:la,featureMenuVisible:ua,dividedActions:Ba,currentAlignment:Ga,currentDockPosition:Fa}=this,{active:Ma}=this.viewModel;var {menuActions:ka}=Ba;ka=Ma&&1<ka.length&&ja;const na=null==(v=this.selectedFeature)?void 0:null==(N=v.layer)?void 0:N.title;v=null==(Q=this.selectedFeature)?void 0:null==(Z=Q.layer)?void 0:Z.id;return M.tsx("div",{class:this.classes("esri-popup",{["esri-popup--aligned-top-center"]:"top-center"===Ga,["esri-popup--aligned-bottom-center"]:"bottom-center"===Ga,["esri-popup--aligned-top-left"]:"top-left"===
Ga,["esri-popup--aligned-bottom-left"]:"bottom-left"===Ga,["esri-popup--aligned-top-right"]:"top-right"===Ga,["esri-popup--aligned-bottom-right"]:"bottom-right"===Ga,["esri-popup--is-docked"]:Ma&&la,["esri-popup--shadow"]:Ma&&!la,["esri-popup--is-docked-top-left"]:"top-left"===Fa,["esri-popup--is-docked-top-center"]:"top-center"===Fa,["esri-popup--is-docked-top-right"]:"top-right"===Fa,["esri-popup--is-docked-bottom-left"]:"bottom-left"===Fa,["esri-popup--is-docked-bottom-center"]:"bottom-center"===
Fa,["esri-popup--is-docked-bottom-right"]:"bottom-right"===Fa,["esri-popup--feature-menu-open"]:ua,["esri-popup--actions-menu-open"]:ka}),role:"presentation","data-layer-title":na,"data-layer-id":v,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},Ma?[this.renderMainContainer(),this.renderPointer()]:null)};X.renderLoadingIcon=function(){return M.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-loading-indicator","esri-rotating")})};
X.renderNavigationLoading=function(){const {messagesCommon:v}=this;return this.viewModel.pendingPromisesCount?M.tsx("div",{key:L("loading-container"),role:"presentation",class:"esri-popup__loading-container","aria-label":v.loading,title:v.loading},this.renderLoadingIcon()):null};X.renderPreviousIcon=function(){const v=P.isRTL(this.container);return M.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",{["esri-icon-right-triangle-arrow"]:v,["esri-popup__pagination-previous-icon--rtl"]:v,
["esri-icon-left-triangle-arrow"]:!v,["esri-popup__pagination-previous-icon"]:!v})})};X.renderPreviousButton=function(){const {messages:v}=this;return M.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes("esri-popup__button","esri-popup__pagination-previous"),"aria-label":v.previous,title:v.previous},this.renderPreviousIcon())};X.renderNextIcon=function(){const v=P.isRTL(this.container);return M.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",
{["esri-icon-left-triangle-arrow"]:v,["esri-popup__pagination-next-icon--rtl"]:v,["esri-icon-right-triangle-arrow"]:!v,["esri-popup__pagination-next-icon"]:!v})})};X.renderNextButton=function(){const {messages:v}=this;return M.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes("esri-popup__button","esri-popup__pagination-next"),"aria-label":v.next,title:v.next},this.renderNextIcon())};X.renderFeatureMenuButton=function(){const {featureMenuOpen:v,
featureMenuId:N,messagesCommon:Q}=this,{featureCount:Z,selectedFeatureIndex:ja}=this.viewModel;return M.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes("esri-popup__button","esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":N,"aria-expanded":v.toString(),"aria-label":Q.menu,title:Q.menu},this._getPageText(Z,
ja))};X.renderNavigationButtons=function(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null};X.renderDockIcon=function(){const {dockEnabled:v}=this,N=this._wouldDockTo();return M.tsx("span",{"aria-hidden":"true",class:this.classes({["esri-icon-minimize"]:v,["esri-popup__icon--dock-icon"]:!v,["esri-icon-dock-right"]:!v&&("top-right"===N||"bottom-right"===N),["esri-icon-dock-left"]:!v&&("top-left"===
N||"bottom-left"===N),["esri-icon-maximize"]:!v&&"top-center"===N,["esri-icon-dock-bottom"]:!v&&"bottom-center"===N},"esri-popup__icon")})};X.renderDockButton=function(){var v,N,Q;const {dockEnabled:Z,messages:ja}=this,la=null==(v=this.viewModel)?void 0:null==(N=v.view)?void 0:N.widthBreakpoint;v=Z?ja.undock:ja.dock;return"xsmall"!==la&&null!=(Q=this.dockOptions)&&Q.buttonEnabled?M.tsx("div",{role:"button","aria-label":v,title:v,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,
afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes("esri-popup__button","esri-popup__button--dock")},this.renderDockIcon()):null};X.renderTitle=function(){const {title:v}=this.viewModel,{titleId:N,collapsible:Q,contentCollapsed:Z,messagesCommon:ja}=this;var la={["esri-popup__header-container--button"]:Q};const ua=M.tsx(z.Heading,{level:this.headingLevel,class:"esri-popup__header-title",innerHTML:v});la=Q?M.tsx("button",{key:`${v}--collapsible`,id:N,title:Z?
ja.expand:ja.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",la),"aria-expanded":Z?"false":"true",onclick:this._toggleCollapsed,type:"button"},ua):M.tsx("div",{key:v,id:N,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",la)},ua);return v?la:null};X.renderCloseIcon=function(){return M.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-close")})};
X.renderCloseButton=function(){const {visibleElements:v,messagesCommon:N}=this;return v.closeButton?M.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:"esri-popup__button","aria-label":N.close,title:N.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null};X.renderHeader=function(){return M.tsx("header",{class:"esri-popup__header"},this.renderTitle(),M.tsx("div",{class:"esri-popup__header-buttons"},
this.renderDockButton(),this.renderCloseButton()))};X.renderContentContainer=function(){const {contentId:v,hasContent:N,contentCollapsed:Q}=this,{content:Z}=this.viewModel;return N&&!Q?M.tsx("article",{key:Z,enterAnimation:this._createFeatureUpdatedAnimation(),id:v,class:"esri-popup__content"},this.renderContent()):null};X.renderActionsMenuButton=function(){const {actionsMenuId:v,actionsMenuButtonId:N,actionsMenuOpen:Q,dividedActions:Z,messagesCommon:ja}=this,la=Q?ja.close:ja.open,{menuActions:ua}=
Z;return ua.length?M.tsx("div",{key:L("actions-menu-button"),class:this.classes("esri-popup__button","esri-popup__actions-menu-button"),role:"button",id:N,"aria-haspopup":"true","aria-controls":Q?v:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":la,title:la},M.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null};X.renderMenuActions=
function(){const {actionsMenuId:v,actionsMenuButtonId:N,actionsMenuOpen:Q,dividedActions:Z}=this,{menuActions:ja}=Z;return ja.length&&Q?M.tsx("ul",{id:v,role:"menu","aria-labelledby":N,key:L("actions"),class:"esri-popup__actions",bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},ja.toArray().map(la=>this.renderAction({action:la,type:"menu-item"}))):null};X.renderInlineActions=function(){const {inlineActions:v}=this.dividedActions;
return!!v.length&&v.toArray().map(N=>this.renderAction({action:N,type:"inline"}))};X.renderInlineActionsContainer=function(){const {inlineActions:v,menuActions:N}=this.dividedActions,Q=!!v.length,Z=!!N.length;return Q||Z?M.tsx("div",{key:"inline-actions-container","data-inline-actions":Q.toString(),"data-menu-actions":Z.toString(),class:"esri-popup__inline-actions-container"},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null};X.renderNavigation=function(){return this.featureNavigationVisible?
M.tsx("section",{key:L("navigation"),class:this.classes("esri-popup__navigation")},this.renderNavigationButtons()):null};X.renderFooter=function(){const {featureNavigationVisible:v,dividedActions:N}=this,{inlineActions:Q,menuActions:Z}=N,ja=!!Q.length,la={["esri-popup__footer--has-pagination"]:v,["esri-popup__footer--has-actions"]:ja,["esri-popup__footer--has-actions-menu"]:!!Z.length};return v||ja?M.tsx("div",{key:L("feature-buttons"),class:this.classes("esri-popup__footer",la)},this.renderInlineActionsContainer(),
this.renderNavigation()):null};X.renderFeatureMenuContainer=function(){var {messages:v}=this;const {featureViewModels:N,isLoadingFeature:Q}=this.viewModel;v=H.substitute(v.selectedFeatures,{total:N.length});return M.tsx("section",{key:L("menu"),class:"esri-popup__feature-menu"},M.tsx("strong",{class:"esri-popup__feature-menu-header"},v),M.tsx("nav",{bind:this,class:"esri-popup__feature-menu-viewport","data-node-ref":"_featureMenuViewportNode",afterCreate:P.storeNode},this.renderFeatureMenu(),M.tsx("div",
{class:"esri-popup__feature-menu-observer",bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),Q?M.tsx("div",{class:"esri-popup__feature-menu-loader"},this.renderLoadingIcon()):null))};X.renderPointer=function(){return this.dockEnabled?null:M.tsx("div",{key:L("pointer"),class:"esri-popup__pointer",role:"presentation"},M.tsx("div",{class:this.classes("esri-popup__pointer-direction","esri-popup--shadow")}))};X.renderMainContainer=function(){const {dockEnabled:v,currentAlignment:N,currentDockPosition:Q,
titleId:Z,contentId:ja,collapsible:la,hasContent:ua,contentCollapsed:Ba,visibleElements:Ga}=this,{title:Fa}=this.viewModel,Ma="bottom-left"===N||"bottom-center"===N||"bottom-right"===N||"top-left"===Q||"top-center"===Q||"top-right"===Q,ka="top-left"===N||"top-center"===N||"top-right"===N||"bottom-left"===Q||"bottom-center"===Q||"bottom-right"===Q;return M.tsx("div",{class:this.classes("esri-popup__main-container","esri-widget",{["esri-popup--shadow"]:v,["esri-popup--is-collapsible"]:la,["esri-popup--is-collapsed"]:Ba}),
tabIndex:Ga.closeButton?null:-1,role:"dialog","aria-labelledby":Fa?Z:"","aria-describedby":ua&&!Ba?ja:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},Ma?this.renderFooter():null,Ma?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),ka?this.renderFooter():null,ka?this.renderFeatureMenuContainer():null)};X.renderContent=function(){var v;const N=null==(v=this.viewModel)?void 0:v.content;
return N?"string"===typeof N?M.tsx("div",{key:N,innerHTML:N}):this.renderNodeContent(N):null};X.renderActionText=function(v){return M.tsx("span",{key:"text",class:"esri-popup__action-text"},v)};X.renderActionIcon=function(v){const N=this._getActionClass(v),Q=this._getActionImage(v),Z={["esri-icon-loading-indicator"]:v.active,["esri-rotating"]:v.active,["esri-popup__icon"]:!!N,["esri-popup__action-image"]:!v.active&&!!Q};N&&(Z[N]=!v.active);return M.tsx("span",{key:"icon","aria-hidden":"true",class:this.classes("esri-popup__icon",
Z),styles:this._getIconStyles(Q)})};X.renderAction=function(v){const {action:N,type:Q}=v;v=this._getActionTitle(N);const Z={["esri-popup__action"]:"toggle"!==N.type,["esri-popup__action-toggle"]:"toggle"===N.type,["esri-popup__action-toggle--on"]:"toggle"===N.type&&N.value,["esri-popup__button--disabled"]:N.disabled},ja=[this.renderActionIcon(N),this.renderActionText(v)];v="menu-item"===Q?M.tsx("li",{key:N.uid,role:"menuitem",tabIndex:0,title:v,"aria-label":v,class:this.classes("esri-popup__button",
Z),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":N.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},ja):M.tsx("div",{key:N.uid,role:"button",tabIndex:0,title:v,"aria-label":v,class:this.classes("esri-popup__button",Z),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":N.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},ja);return N.visible?v:null};X.renderFeatureMenuItem=function(v,N){const {messages:Q,messagesCommon:Z}=this,{selectedFeatureIndex:ja,
selectedFeatureViewModel:la}=this.viewModel;var ua=v===la;const Ba={["esri-popup__feature-menu-item--selected"]:ua};ua=ua?M.tsx("span",{key:L(`feature-menu-selected-feature-${ja}`),title:Q.selectedFeature,"aria-label":Q.selectedFeature,class:"esri-icon-check-mark"}):null;v=M.tsx("span",{innerHTML:v.title||Z.untitled});return M.tsx("li",{role:"menuitem",tabIndex:-1,key:L(`feature-menu-feature-${ja}`),class:this.classes(Ba,"esri-popup__feature-menu-item"),bind:this,"data-feature-index":N,onkeyup:this._handleFeatureMenuItemKeyup,
onclick:this._selectFeature,onkeydown:this._selectFeature},M.tsx("span",{class:"esri-popup__feature-menu-title"},v,ua))};X.renderFeatureMenu=function(){const {featureMenuId:v}=this,{featureViewModels:N}=this.viewModel;return 1<N.length?M.tsx("ol",{class:"esri-popup__feature-menu-list",id:v,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},N.filter(Q=>!!Q.graphic).map((Q,Z)=>this.renderFeatureMenuItem(Q,Z))):
null};X._getActionTitle=function(v){const {messages:N,selectedFeature:Q,messagesCommon:Z}=this,{id:ja}=v,la=null==Q?void 0:Q.attributes;return(v="zoom-to-feature"===ja?H.substitute(v.title,{messages:N}):"remove-selected-feature"===ja?H.substitute(v.title,{messages:Z}):"zoom-to-clustered-features"===ja?H.substitute(v.title,{messages:N}):"browse-clustered-features"===ja?H.substitute(v.title,{messages:N}):v.title)&&la?H.substitute(v,la):v};X._getActionClass=function(v){var {selectedFeature:N}=this;N=
null==N?void 0:N.attributes;const {className:Q,image:Z}=v;return(v=Z||Q?Q:"esri-icon-default-action")&&N?H.substitute(v,N):v};X._getActionImage=function(v){var {selectedFeature:N}=this;N=null==N?void 0:N.attributes;({image:v}=v);return v&&N?H.substitute(v,N):v};X._createFeatureUpdatedAnimation=function(){return P.cssTransition("enter","esri-popup--feature-updated")};X._getInlineActionCount=function(){const {maxInlineActions:v,featureNavigationVisible:N}=this;if("number"!==typeof v)return null;const Q=
Math.round(v);return Math.max(N?Q-1:Q,0)};X._watchActions=function(){const {allActions:v}=this.viewModel;this.notifyChange("dividedActions");this._handles.remove("actions");v&&v.forEach(N=>{this._handles.add(x.watch(N,"uid active className disabled id title image visible".split(" "),()=>this.scheduleRender()),"actions")})};X._divideActions=function(){var {allActions:v}=this.viewModel;v=v.filter(ja=>ja.visible);const N=this._getInlineActionCount(),Q=null===N,Z=0===N;return{inlineActions:Q?v.slice(0):
Z?new E:v.slice(0,N),menuActions:Q?new E:Z?v.slice(0):v.slice(N)}};X._featureMenuOpenChanged=function(v){v?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0};X._actionsMenuOpenChanged=function(v){v?this._focusFirstAction=!0:this._focusActionsMenuButton=!0};X._setTitleFromFeatureWidget=function(){const {selectedFeatureWidget:v,messagesCommon:N}=this;if(v){var Q,Z;this.viewModel.title="error"===(null==(Q=v.viewModel)?void 0:Q.state)?N.errorMessage:(null==(Z=v.viewModel)?void 0:Z.title)||""}};
X._setContentFromFeatureWidget=function(){const {selectedFeatureWidget:v}=this;v&&(this.viewModel.content=v)};X._unobserveFeatureMenuObserver=function(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)};X._featureMenuIntersectionObserverCreated=function(v){this._unobserveFeatureMenuObserver();this._featureMenuIntersectionObserver.observe(v);this._featureMenuIntersectionObserverNode=v};X._handleFeatureMenuKeyup=function(v){"Escape"===
h.eventKey(v)&&(v.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())};X._handleActionMenuKeyup=function(v){"Escape"===h.eventKey(v)&&(v.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())};X._handleFeatureMenuItemKeyup=function(v){const N=h.eventKey(v);var {_featureMenuNode:Q}=this;const Z=v.currentTarget["data-feature-index"];if(Q){Q=Q.querySelectorAll("li");var ja=Q.length;"ArrowUp"===N?(v.stopPropagation(),
Q[(Z-1+ja)%ja].focus()):"ArrowDown"===N?(v.stopPropagation(),Q[(Z+1+ja)%ja].focus()):"Home"===N?(v.stopPropagation(),Q[0].focus()):"End"===N&&(v.stopPropagation(),Q[Q.length-1].focus())}};X._handleActionMenuItemKeyup=function(v){const N=h.eventKey(v);var {_actionsMenuNode:Q}=this;const Z=v.currentTarget.dataset.actionUid;var {menuActions:ja}=this.dividedActions;ja=ja.findIndex(ua=>ua.uid===Z);if(Q){Q=Q.querySelectorAll("li");var la=Q.length;"ArrowUp"===N?(v.stopPropagation(),Q[(ja-1+la)%la].focus()):
"ArrowDown"===N?(v.stopPropagation(),Q[(ja+1+la)%la].focus()):"Home"===N?(v.stopPropagation(),Q[0].focus()):"End"===N&&(v.stopPropagation(),Q[Q.length-1].focus())}};X._handleMainKeyup=function(v){const N=h.eventKey(v);"ArrowLeft"===N&&(v.stopPropagation(),this.previous());"ArrowRight"===N&&(v.stopPropagation(),this.next())};X._spinnerEnabledChange=function(v){this._destroySpinner();v&&(v=this.get("viewModel.view"),this._createSpinner(v))};X._hideSpinner=function(){const {_spinner:v}=this;v&&(v.location=
null,v.hide())};X._displaySpinner=function(){const {_spinner:v}=this;if(v){var {location:N,waitingForResult:Q}=this.viewModel;Q?v.show({location:N}):v.hide()}};X._getIconStyles=function(v){return{"background-image":v?`url(${v})`:""}};X._shouldFocus=function(){var v=e._asyncToGenerator(function*(N){N.shouldFocus&&(yield K.whenOnce(()=>{var Q;return!0===(null==(Q=this.viewModel)?void 0:Q.active)}),this.focus())});return function(N){return v.apply(this,arguments)}}();X._addSelectedFeatureIndexHandle=
function(){const v=x.watch(this,"viewModel.selectedFeatureIndex",(N,Q)=>this._selectedFeatureIndexUpdated(N,Q));this._handles.add(v,"selected-index")};X._selectedFeatureIndexUpdated=function(v,N){const {featureCount:Q}=this;Q&&v!==N&&-1!==v&&(this.featureMenuOpen=this.actionsMenuOpen=!1)};X._destroySelectedFeatureWidget=function(){const {_feature:v}=this;v&&(v.viewModel=null,v&&!v.destroyed&&v.destroy());this._feature=null};X._isScreenLocationWithinView=function(v,N){return-1<v.x&&-1<v.y&&v.x<=N.width&&
v.y<=N.height};X._isOutsideView=function(v){const {popupHeight:N,popupWidth:Q,screenLocation:Z,side:ja,view:la}=v;if(isNaN(Q)||isNaN(N)||!la||!Z)return!1;v=la.padding;return"right"===ja&&Z.x+Q/2>la.width-v.right||"left"===ja&&Z.x-Q/2<v.left||"top"===ja&&Z.y-N<v.top||"bottom"===ja&&Z.y+N>la.height-v.bottom?!0:!1};X._calculateAutoAlignment=function(v){if("auto"!==v)return v;const {_pointerOffsetInPx:N,_containerNode:Q,_mainContainerNode:Z,viewModel:ja}=this,{screenLocation:la,view:ua}=ja;if(D.isNone(la)||
!ua||!Q)return"top-center";if(!this._isScreenLocationWithinView(la,ua))return this._get("currentAlignment")||"top-center";var Ba=(v=Z?window.getComputedStyle(Z,null):null)?parseInt(v.getPropertyValue("max-height").replace(/[^-\d\.]/g,""),10):0,Ga=v?parseInt(v.getPropertyValue("height").replace(/[^-\d\.]/g,""),10):0;const {height:Fa,width:Ma}=Q.getBoundingClientRect();v=Ma+N;const ka=Math.max(Fa,Ba,Ga)+N;Ba=this._isOutsideView({popupHeight:ka,popupWidth:v,screenLocation:la,side:"right",view:ua});Ga=
this._isOutsideView({popupHeight:ka,popupWidth:v,screenLocation:la,side:"left",view:ua});const na=this._isOutsideView({popupHeight:ka,popupWidth:v,screenLocation:la,side:"top",view:ua});v=this._isOutsideView({popupHeight:ka,popupWidth:v,screenLocation:la,side:"bottom",view:ua});return Ga?na?"bottom-right":"top-right":Ba?na?"bottom-left":"top-left":na?v?"top-center":"bottom-center":"top-center"};X._callCurrentAlignment=function(v){return"function"===typeof v?v.call(this):v};X._getCurrentAlignment=
function(){const {alignment:v,dockEnabled:N}=this;return N||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(v)))};X._setCurrentAlignment=function(){this._set("currentAlignment",this._getCurrentAlignment())};X._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())};X._calculatePositionResult=function(v){const N=["left","right"];P.isRTL(this.container)&&N.reverse();return v.replace(/leading/gi,
N[0]).replace(/trailing/gi,N[1])};X._callDockPosition=function(v){return"function"===typeof v?v.call(this):v};X._getDockPosition=function(){var v;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(null==(v=this.dockOptions)?void 0:v.position)))};X._getCurrentDockPosition=function(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null};X._wouldDockTo=function(){return this.dockEnabled?null:this._getDockPosition()};X._calculateAutoDockPosition=
function(v){var N;if("auto"!==v)return v;v=null==(N=this.viewModel)?void 0:N.view;N=P.isRTL(this.container)?"top-left":"top-right";if(!v)return N;var Q=v.padding||{left:0,right:0,top:0,bottom:0};Q=v.width-Q.left-Q.right;({breakpoints:v}=v);return v&&Q<=v.xsmall?"bottom-center":N};X._positionContainer=function(v=this._containerNode){v&&(this._containerNode=v);if(v){var {screenLocation:N}=this.viewModel,{width:Q}=v.getBoundingClientRect();if(N=this._calculatePositionStyle(N,Q))v.style.top=N.top,v.style.left=
N.left,v.style.bottom=N.bottom,v.style.right=N.right}};X._calculateFullWidth=function(v){const {currentAlignment:N,_pointerOffsetInPx:Q}=this;return"top-left"===N||"bottom-left"===N||"top-right"===N||"bottom-right"===N?v+Q:v};X._calculateAlignmentPosition=function(v,N,Q,Z){const {currentAlignment:ja,_pointerOffsetInPx:la}=this;Z/=2;const ua=Q.height-N;Q=Q.width-v;const {padding:Ba}=this.view;if("bottom-center"===ja)return{top:N+la-Ba.top,left:v-Z-Ba.left};if("top-left"===ja)return{bottom:ua+la-Ba.bottom,
right:Q+la-Ba.right};if("bottom-left"===ja)return{top:N+la-Ba.top,right:Q+la-Ba.right};if("top-right"===ja)return{bottom:ua+la-Ba.bottom,left:v+la-Ba.left};if("bottom-right"===ja)return{top:N+la-Ba.top,left:v+la-Ba.left};if("top-center"===ja)return{bottom:ua+la-Ba.bottom,left:v-Z-Ba.left}};X._calculatePositionStyle=function(v,N){const {dockEnabled:Q,view:Z}=this;if(Z){if(Q)return{left:"",top:"",right:"",bottom:""};if(!D.isNone(v)&&N&&(N=this._calculateFullWidth(N),v=this._calculateAlignmentPosition(v.x,
v.y,Z,N)))return{top:void 0!==v.top?`${v.top}px`:"auto",left:void 0!==v.left?`${v.left}px`:"auto",bottom:void 0!==v.bottom?`${v.bottom}px`:"auto",right:void 0!==v.right?`${v.right}px`:"auto"}}};X._viewChange=function(v,N){v&&N&&(this.close(),this.clear())};X._viewReadyChange=function(v,N){v?(v=this.get("viewModel.view"),this._wireUpView(v)):N&&(this.close(),this.clear())};X._wireUpView=function(v){this._destroySpinner();if(v){var {spinnerEnabled:N}=this;N&&this._createSpinner(v);this._setDockEnabledForViewSize(this.dockOptions)}};
X._dockingThresholdCrossed=function(v,N,Q){const [Z,ja]=v,[la,ua]=N,{width:Ba,height:Ga}=Q;return Z<=Ba&&la>Ba||Z>Ba&&la<=Ba||ja<=Ga&&ua>Ga||ja>Ga&&ua<=Ga};X._updateDockEnabledForViewSize=function(v,N){if(v&&N){var Q=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},Z=Q.left+Q.right,ja=Q.top+Q.bottom;Q=[];var la=[];Q[0]=v[0]-Z;Q[1]=v[1]-ja;la[0]=N[0]-Z;la[1]=N[1]-ja;({dockOptions:v}=this);this._dockingThresholdCrossed(Q,la,v.breakpoint)&&this._setDockEnabledForViewSize(v);this._setCurrentDockPosition()}};
X._focusDockButtonNode=function(v){this._focusDockButton&&(this._focusDockButton=!1,v.focus())};X._closeButtonNodeUpdated=function(v){this._focusClose?(this._focusClose=!1,v.focus()):this._blurClose&&(this._blurClose=!1,v.blur())};X._mainContainerNodeUpdated=function(v){this._mainContainerNode=v;this._focusContainer?(this._focusContainer=!1,v.focus()):this._blurContainer&&(this._blurContainer=!1,v.blur())};X._featureMenuNodeUpdated=function(v){(this._featureMenuNode=v)&&this._focusFirstFeature&&(this._focusFirstFeature=
!1,v=v.querySelectorAll("li"),v.length&&v[0].focus())};X._actionsMenuNodeUpdated=function(v){(this._actionsMenuNode=v)&&this._focusFirstAction&&(this._focusFirstAction=!1,v=v.querySelectorAll("li"),v.length&&v[0].focus())};X._focusFeatureMenuButtonNode=function(v){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,v.focus())};X._focusActionsMenuButtonNode=function(v){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,v.focus())};X._featureMenuViewportScrollTop=function(){this._featureMenuViewportNode&&
(this._featureMenuViewportNode.scrollTop=0)};X._toggleScreenLocationEnabled=function(){const {dockEnabled:v,viewModel:N}=this;N&&(N.screenLocationEnabled=N.active&&!v)};X._shouldDockAtCurrentViewSize=function(v){var N,Q;v=v.breakpoint;const Z=null==(N=this.viewModel)?void 0:null==(Q=N.view)?void 0:Q.ui;if(!Z)return!1;const {width:ja,height:la}=Z;if(isNaN(ja)||isNaN(la))return!1;N=v.hasOwnProperty("width")&&ja<=v.width;Q=v.hasOwnProperty("height")&&la<=v.height;return N||Q};X._setDockEnabledForViewSize=
function(v){v.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(v))};X._getPageText=function(v,N){return this.featureNavigationVisible?H.substitute(this.messages.pageText,{index:N+1,total:v}):null};X._destroySpinner=function(){const {_spinner:v,view:N}=this;v&&(N&&N.ui&&N.ui.remove(this._spinner,"popup-spinner"),v.destroy(),this._spinner=null)};X._createSpinner=function(v){v&&(this._spinner=new u({view:v}),v.ui.add(this._spinner,{key:"popup-spinner",position:"manual"}))};X._toggleCollapsed=
function(){this.collapsed=!this.collapsed};X._close=function(){this.close();this.view&&this.view.focus()};X._toggleDockEnabled=function(){this.dockEnabled=!this.dockEnabled;this._focusDockButton=!0;this.scheduleRender()};X._toggleFeatureMenu=function(){const v=!this.featureMenuOpen;this._featureMenuOpenChanged(v);this.actionsMenuOpen=!1;this.featureMenuOpen=v};X._toggleActionsMenu=function(){const v=!this.actionsMenuOpen;this._actionsMenuOpenChanged(v);this.featureMenuOpen=!1;this.actionsMenuOpen=
v};X._triggerAction=function(v){const N=v.currentTarget.dataset.actionUid;var {allActions:Q}=this.viewModel;v=Q.findIndex(Z=>Z.uid===N);(Q=Q.getItemAt(v))&&"toggle"===Q.type&&(Q.value=!Q.value);this.actionsMenuOpen=!1;this.viewModel.triggerAction(v)};X._selectFeature=function(v){v=v.currentTarget["data-feature-index"];isNaN(v)||(this.viewModel.selectedFeatureIndex=v);this.featureMenuOpen=!1;this._focusFeatureMenuButton=!0;this.scheduleRender()};X._next=function(){this.next()};X._previous=function(){this.previous()};
e._createClass(ba,[{key:"actionsMenuId",get:function(){return`${this.id}-actions-menu`}},{key:"actionsMenuButtonId",get:function(){return`${this.id}-actions-menu-button`}},{key:"featureMenuId",get:function(){return`${this.id}-feature-menu`}},{key:"titleId",get:function(){return`${this.id}-popup-title`}},{key:"contentId",get:function(){return`${this.id}-popup-content`}},{key:"hasContent",get:function(){var v,N,Q,Z,ja,la,ua;return!!(this.selectedFeatureWidget?(null==(v=this.selectedFeatureWidget)?0:
null==(N=v.viewModel)?0:N.waitingForContent)||"error"===(null==(Q=this.selectedFeatureWidget)?void 0:null==(Z=Q.viewModel)?void 0:Z.state)||(null==(ja=this.selectedFeatureWidget)?0:null==(la=ja.viewModel)?0:la.content):null==(ua=this.viewModel)?0:ua.content)}},{key:"featureNavigationVisible",get:function(){return this.viewModel.active&&1<this.viewModel.featureCount&&this.visibleElements.featureNavigation}},{key:"collapsible",get:function(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}},
{key:"featureMenuVisible",get:function(){return this.featureNavigationVisible&&this.featureMenuOpen}},{key:"contentCollapsed",get:function(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}},{key:"dividedActions",get:function(){return this._divideActions()}},{key:"actionsMenuOpen",get:function(){return this.viewModel.active?this._get("actionsMenuOpen"):!1},set:function(v){this._set("actionsMenuOpen",!!v)}},{key:"currentAlignment",get:function(){return this._getCurrentAlignment()}},
{key:"currentDockPosition",get:function(){return this._getCurrentDockPosition()}},{key:"dockOptions",get:function(){return this._get("dockOptions")||A},set:function(v){var N={...A};const Q=this.get("viewModel.view.breakpoints");var Z={};Q&&(Z.width=Q.xsmall,Z.height=Q.xsmall);v={...N,...v};N={...N.breakpoint,...Z};({breakpoint:Z}=v);!0===Z?v.breakpoint=N:"object"===typeof Z&&(v.breakpoint={...N,...Z});this._set("dockOptions",v);this._setCurrentDockPosition();this.reposition()}},{key:"selectedFeatureWidget",
get:function(){const {_feature:v,visibleElements:N,headingLevel:Q}=this,{selectedFeatureViewModel:Z}=this.viewModel,ja={...N,title:!1};if(!Z)return null;v?(v.viewModel=Z,v.visibleElements=ja):this._feature=new n({headingLevel:Q+1,viewModel:Z,visibleElements:ja});return this._feature}}]);return ba}(y.FeatureContentMixin(p));q.__decorate([c.property({readOnly:!0})],b.prototype,"actionsMenuId",null);q.__decorate([c.property({readOnly:!0})],b.prototype,"actionsMenuButtonId",null);q.__decorate([c.property({readOnly:!0})],
b.prototype,"featureMenuId",null);q.__decorate([c.property({readOnly:!0})],b.prototype,"titleId",null);q.__decorate([c.property({readOnly:!0})],b.prototype,"contentId",null);q.__decorate([c.property({readOnly:!0})],b.prototype,"hasContent",null);q.__decorate([c.property({readOnly:!0})],b.prototype,"featureNavigationVisible",null);q.__decorate([c.property({readOnly:!0})],b.prototype,"collapsible",null);q.__decorate([c.property({readOnly:!0})],b.prototype,"featureMenuVisible",null);q.__decorate([c.property({readOnly:!0})],
b.prototype,"contentCollapsed",null);q.__decorate([c.property({readOnly:!0})],b.prototype,"dividedActions",null);q.__decorate([d.aliasOf("viewModel.actions")],b.prototype,"actions",void 0);q.__decorate([c.property()],b.prototype,"actionsMenuOpen",null);q.__decorate([c.property()],b.prototype,"alignment",void 0);q.__decorate([d.aliasOf("viewModel.autoCloseEnabled")],b.prototype,"autoCloseEnabled",void 0);q.__decorate([d.aliasOf("viewModel.autoOpenEnabled")],b.prototype,"autoOpenEnabled",void 0);q.__decorate([d.aliasOf("viewModel.defaultPopupTemplateEnabled")],
b.prototype,"defaultPopupTemplateEnabled",void 0);q.__decorate([d.aliasOf("viewModel.content")],b.prototype,"content",void 0);q.__decorate([c.property()],b.prototype,"collapsed",void 0);q.__decorate([c.property()],b.prototype,"collapseEnabled",void 0);q.__decorate([c.property({readOnly:!0})],b.prototype,"currentAlignment",null);q.__decorate([c.property({readOnly:!0})],b.prototype,"currentDockPosition",null);q.__decorate([c.property()],b.prototype,"dockOptions",null);q.__decorate([c.property()],b.prototype,
"dockEnabled",void 0);q.__decorate([d.aliasOf("viewModel.featureCount")],b.prototype,"featureCount",void 0);q.__decorate([c.property()],b.prototype,"featureMenuOpen",void 0);q.__decorate([d.aliasOf("viewModel.features")],b.prototype,"features",void 0);q.__decorate([d.aliasOf("viewModel.goToOverride")],b.prototype,"goToOverride",void 0);q.__decorate([c.property()],b.prototype,"headingLevel",void 0);q.__decorate([d.aliasOf("viewModel.highlightEnabled")],b.prototype,"highlightEnabled",void 0);q.__decorate([d.aliasOf("viewModel.location")],
b.prototype,"location",void 0);q.__decorate([c.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],b.prototype,"label",void 0);q.__decorate([c.property()],b.prototype,"maxInlineActions",void 0);q.__decorate([c.property(),F.messageBundle("esri/widgets/Popup/t9n/Popup")],b.prototype,"messages",void 0);q.__decorate([c.property(),F.messageBundle("esri/t9n/common")],b.prototype,"messagesCommon",void 0);q.__decorate([d.aliasOf("viewModel.promises")],b.prototype,"promises",void 0);q.__decorate([d.aliasOf("viewModel.selectedFeature")],
b.prototype,"selectedFeature",void 0);q.__decorate([d.aliasOf("viewModel.selectedFeatureIndex")],b.prototype,"selectedFeatureIndex",void 0);q.__decorate([c.property({readOnly:!0})],b.prototype,"selectedFeatureWidget",null);q.__decorate([c.property()],b.prototype,"spinnerEnabled",void 0);q.__decorate([d.aliasOf("viewModel.title")],b.prototype,"title",void 0);q.__decorate([d.aliasOf("viewModel.updateLocationEnabled")],b.prototype,"updateLocationEnabled",void 0);q.__decorate([d.aliasOf("viewModel.view")],
b.prototype,"view",void 0);q.__decorate([c.property({type:O}),S.vmEvent(["triggerAction","trigger-action"])],b.prototype,"viewModel",void 0);q.__decorate([d.aliasOf("viewModel.visible")],b.prototype,"visible",void 0);q.__decorate([c.property()],b.prototype,"visibleElements",void 0);q.__decorate([B.cast("visibleElements")],b.prototype,"castVisibleElements",null);q.__decorate([f.accessibleHandler()],b.prototype,"_close",null);q.__decorate([f.accessibleHandler()],b.prototype,"_toggleDockEnabled",null);
q.__decorate([f.accessibleHandler()],b.prototype,"_toggleFeatureMenu",null);q.__decorate([f.accessibleHandler()],b.prototype,"_toggleActionsMenu",null);q.__decorate([f.accessibleHandler()],b.prototype,"_triggerAction",null);q.__decorate([f.accessibleHandler()],b.prototype,"_selectFeature",null);q.__decorate([f.accessibleHandler()],b.prototype,"_next",null);q.__decorate([f.accessibleHandler()],b.prototype,"_previous",null);return b=q.__decorate([t.subclass("esri.widgets.Popup")],b)})},"esri/core/throttle":function(){define(["exports"],
function(e){e.throttle=function(q,b,E,h){let r=null,w=1E3;"number"===typeof b?(w=b,h=E):(r=null!=b?b:null,w=E);let D=0,K;const I=()=>{D=0;q.apply(h,K)};b=(...x)=>{r&&r.apply(h,x);K=x;w?D||(D=setTimeout(I,w)):I()};b.remove=()=>{D&&(clearTimeout(D),D=0)};b.forceUpdate=()=>{D&&(clearTimeout(D),I())};b.hasPendingUpdates=()=>!!D;return b};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Feature":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Feature/FeatureAttachments ./Feature/FeatureContent ./Feature/FeatureExpression ./Feature/FeatureFields ./Feature/FeatureMedia ./Feature/FeatureViewModel ./Feature/support/FeatureContentMixin ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/jsxFactory ../intl/substitute".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g,k,B,c,t,n,u,p,y,O,z,f,F){const S={title:!0,content:!0,lastEditedInfo:!0};E=function(M){function P(L,A){L=M.call(this,L,A)||this;L._contentWidgets=[];L.graphic=null;L.defaultPopupTemplateEnabled=!1;L.headingLevel=2;L.label=void 0;L.messages=null;L.messagesCommon=null;L.messagesURIUtils=null;L.spatialReference=null;L.title=null;L.visibleElements={...S};L.map=null;L.view=null;L.viewModel=new n;return L}q._inheritsLoose(P,M);var H=P.prototype;H.initialize=function(){this.own(h.init(this,
"viewModel.contentViewModels",()=>this._setupContentWidgets()))};H.loadDependencies=function(){return new Promise((L,A)=>e(["../chunks/calcite-notice"],L,A))};H.destroy=function(){this._destroyContentWidgets()};H.castVisibleElements=function(L){return{...S,...L}};H.render=function(){var {state:L}=this.viewModel;L=f.tsx("div",{class:"esri-feature__size-container",key:"container"},this.renderTitle(),"error"===L?this.renderError():"loading"===L?this.renderLoading():this.renderContentContainer());return f.tsx("div",
{class:this.classes("esri-feature","esri-widget")},L)};H.setActiveMedia=function(L,A){this.viewModel.setActiveMedia(L,A)};H.nextMedia=function(L){this.viewModel.nextMedia(L)};H.previousMedia=function(L){this.viewModel.previousMedia(L)};H.renderError=function(){const {messagesCommon:L,messages:A,visibleElements:C}=this;return f.tsx("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},C.title?f.tsx("div",{key:"error-title",slot:"title"},L.errorMessage):null,f.tsx("div",
{key:"error-message",slot:"message"},A.loadingError))};H.renderLoading=function(){return f.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},f.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))};H.renderContentContainer=function(){const {visibleElements:L}=this;return L.content?f.tsx("div",{class:"esri-feature__main-container"},[this.renderContent(),this.renderLastEditInfo()]):null};H.renderTitle=function(){const {visibleElements:L,
title:A}=this;return L.title?f.tsx(p.Heading,{level:this.headingLevel,class:"esri-feature__title",innerHTML:A}):null};H.renderContent=function(){var L=this.viewModel.content;return L?Array.isArray(L)?L.length?f.tsx("div",{key:"content-content-elements"},L.map(this.renderContentElement,this)):null:"string"===typeof L?(L=this._contentWidgets[0],!L||L.destroyed?null:f.tsx("div",{key:"content-content"},L.render())):this.renderNodeContent(L):null};H.renderContentElement=function(L,A){const {visibleElements:C}=
this;if("boolean"!==typeof C.content&&!C.content[L.type])return null;switch(L.type){case "attachments":return this.renderAttachments(A);case "custom":return this.renderCustom(L,A);case "fields":return this.renderFields(A);case "media":return this.renderMedia(A);case "text":return this.renderText(L,A);case "expression":return this.renderExpression(A);default:return null}};H.renderAttachments=function(L){const A=this._contentWidgets[L];if(!A||A.destroyed)return null;const {state:C,attachmentInfos:J}=
A.viewModel;return"loading"===C||0<J.length?f.tsx("div",{key:this._buildKey("attachments-element",L),class:this.classes("esri-feature__content-element")},A.render()):null};H.renderExpression=function(L){const A=this._contentWidgets[L];return!A||A.destroyed?null:f.tsx("div",{key:this._buildKey("expression-element",L),class:"esri-feature__content-element"},A.render())};H.renderCustom=function(L,A){({creator:L}=L);const C=this._contentWidgets[A];return!C||C.destroyed?null:L?f.tsx("div",{key:this._buildKey("custom-element",
A),class:"esri-feature__content-element"},C.render()):null};H.renderFields=function(L){const A=this._contentWidgets[L];return!A||A.destroyed?null:f.tsx("div",{key:this._buildKey("fields-element",L),class:"esri-feature__content-element"},A.render())};H.renderMedia=function(L){const A=this._contentWidgets[L];return!A||A.destroyed?null:f.tsx("div",{key:this._buildKey("media-element",L),class:"esri-feature__content-element"},A.render())};H.renderLastEditInfo=function(){const {visibleElements:L,messages:A}=
this;var {lastEditInfo:C}=this.viewModel;if(!C||!L.lastEditedInfo)return null;const {date:J,user:W}=C;C=F.substitute("edit"===C.type?W?A.lastEditedByUser:A.lastEdited:W?A.lastCreatedByUser:A.lastCreated,{date:J,user:W});return f.tsx("div",{key:"edit-info-element",class:this.classes("esri-feature__last-edited-info","esri-feature__content-element")},C)};H.renderText=function(L,A){const C=this._contentWidgets[A];return!C||C.destroyed?null:L.text?f.tsx("div",{key:this._buildKey("text-element",A),class:this.classes("esri-feature__content-element",
"esri-feature__text")},C.render()):null};H._buildKey=function(L,...A){const C=this.get("viewModel.graphic.uid")||"0";A=A.join("-");return`${L}__${C}-${A}`};H._destroyContentWidget=function(L){L&&(L.viewModel=null,!L.destroyed&&L.destroy())};H._destroyContentWidgets=function(){this._contentWidgets.forEach(L=>this._destroyContentWidget(L));this._contentWidgets=[]};H._setupContentWidgets=function(){this._destroyContentWidgets();const {headingLevel:L,visibleElements:A}=this;var C=this.get("viewModel.content");
const {contentViewModels:J}=this.viewModel;Array.isArray(C)?C.forEach((W,ba)=>{"attachments"===W.type&&(this._contentWidgets[ba]=new g({displayType:W.displayType,headingLevel:A.title?L+1:L,viewModel:J[ba]}));"fields"===W.type&&(this._contentWidgets[ba]=new c({viewModel:J[ba]}));"media"===W.type&&(this._contentWidgets[ba]=new t({viewModel:J[ba]}));"text"===W.type&&(this._contentWidgets[ba]=new k({viewModel:J[ba]}));"custom"===W.type&&(this._contentWidgets[ba]=new k({viewModel:J[ba]}));"expression"===
W.type&&(this._contentWidgets[ba]=new B({viewModel:J[ba]}))},this):(C=J[0])&&!C.destroyed&&(this._contentWidgets[0]=new k({viewModel:C}));this.scheduleRender()};return P}(u.FeatureContentMixin(d));b.__decorate([r.aliasOf("viewModel.graphic")],E.prototype,"graphic",void 0);b.__decorate([r.aliasOf("viewModel.defaultPopupTemplateEnabled")],E.prototype,"defaultPopupTemplateEnabled",void 0);b.__decorate([I.property()],E.prototype,"headingLevel",void 0);b.__decorate([I.property({aliasOf:{source:"messages.widgetLabel",
overridable:!0}})],E.prototype,"label",void 0);b.__decorate([I.property(),O.messageBundle("esri/widgets/Feature/t9n/Feature")],E.prototype,"messages",void 0);b.__decorate([I.property(),O.messageBundle("esri/t9n/common")],E.prototype,"messagesCommon",void 0);b.__decorate([I.property(),O.messageBundle("esri/widgets/support/t9n/uriUtils")],E.prototype,"messagesURIUtils",void 0);b.__decorate([r.aliasOf("viewModel.spatialReference")],E.prototype,"spatialReference",void 0);b.__decorate([r.aliasOf("viewModel.title")],
E.prototype,"title",void 0);b.__decorate([I.property()],E.prototype,"visibleElements",void 0);b.__decorate([K.cast("visibleElements")],E.prototype,"castVisibleElements",null);b.__decorate([r.aliasOf("viewModel.map")],E.prototype,"map",void 0);b.__decorate([r.aliasOf("viewModel.view")],E.prototype,"view",void 0);b.__decorate([I.property({type:n})],E.prototype,"viewModel",void 0);return E=b.__decorate([x.subclass("esri.widgets.Feature")],E)})},"esri/widgets/Feature/FeatureAttachments":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Attachments ../Widget ./FeatureAttachments/FeatureAttachmentsViewModel ./support/FeatureElementInfo ../support/widgetUtils ../../core/Logger ../support/jsxFactory".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g,k,B,c){h=function(t){function n(p,y){p=t.call(this,p,y)||this;p._featureElementInfo=null;p.attachmentsWidget=new I;p.description=null;p.displayType=null;p.graphic=null;p.headingLevel=2;p.title=null;p.viewModel=new d;return p}e._inheritsLoose(n,t);var u=n.prototype;u.initialize=function(){this._featureElementInfo=new g;b.init(this,["viewModel.description","viewModel.title","headingLevel"],()=>this._setupFeatureElementInfo());b.init(this,"viewModel.graphic",p=>this.attachmentsWidget.graphic=
p)};u.destroy=function(){this.attachmentsWidget.destroy();this._featureElementInfo.destroy()};u.render=function(){var p;const {attachmentsWidget:y}=this;return c.tsx("div",{class:"esri-feature-attachments"},null==(p=this._featureElementInfo)?void 0:p.render(),null==y?void 0:y.render())};u._setupFeatureElementInfo=function(){const {description:p,title:y,headingLevel:O}=this;this._featureElementInfo.set({description:p,title:y,headingLevel:O})};return n}(x);q.__decorate([D.property({readOnly:!0})],h.prototype,
"attachmentsWidget",void 0);q.__decorate([E.aliasOf("viewModel.description")],h.prototype,"description",void 0);q.__decorate([E.aliasOf("attachmentsWidget.displayType")],h.prototype,"displayType",void 0);q.__decorate([E.aliasOf("viewModel.graphic")],h.prototype,"graphic",void 0);q.__decorate([D.property()],h.prototype,"headingLevel",void 0);q.__decorate([E.aliasOf("viewModel.title")],h.prototype,"title",void 0);q.__decorate([D.property({type:d})],h.prototype,"viewModel",void 0);return h=q.__decorate([K.subclass("esri.widgets.Feature.FeatureAttachments")],
h)})},"esri/widgets/Attachments":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/unitFormatUtils ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Attachments/AttachmentsViewModel ./Attachments/support/attachmentUtils ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/jsxFactory".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g,k,B,c,t,n){const u={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},p=window.CSS;w=function(y){function O(f,F){f=y.call(this,f,F)||this;f.abilities=null;f.displayType="auto";f.graphic=null;f.label=void 0;f.messages=null;f.messagesUnits=null;f.selectedFile=null;f.submitting=!1;f.viewModel=new g;f.visibleElements={...u};f._supportsImageOrientation=p&&p.supports&&p.supports("image-orientation",
"from-image");f._addAttachmentForm=null;f._updateAttachmentForm=null;return f}e._inheritsLoose(O,y);var z=O.prototype;z.initialize=function(){this.own(h.on(this,"viewModel.attachmentInfos","change",()=>this.scheduleRender()),h.init(this,"viewModel.mode",()=>this._modeChanged()))};z.castVisibleElements=function(f){return{...u,...f}};z.addAttachment=function(){const {_addAttachmentForm:f,viewModel:F}=this;this._set("submitting",!0);this._set("error",null);return F.addAttachment(f).then(S=>{this._set("submitting",
!1);this._set("error",null);F.mode="view";return S}).catch(S=>{this._set("submitting",!1);this._set("error",new b("attachments:add-attachment",this.messages.addErrorMessage,S));throw S;})};z.deleteAttachment=function(f){const {viewModel:F}=this;this._set("submitting",!0);this._set("error",null);return F.deleteAttachment(f).then(S=>{this._set("submitting",!1);this._set("error",null);F.mode="view";return S}).catch(S=>{this._set("submitting",!1);this._set("error",new b("attachments:delete-attachment",
this.messages.deleteErrorMessage,S));throw S;})};z.updateAttachment=function(){const {viewModel:f}=this,{_updateAttachmentForm:F}=this;this._set("submitting",!0);this._set("error",null);return f.updateAttachment(F).then(S=>{this._set("submitting",!1);this._set("error",null);f.mode="view";return S}).catch(S=>{this._set("submitting",!1);this._set("error",new b("attachments:update-attachment",this.messages.updateErrorMessage,S));throw S;})};z.render=function(){const {submitting:f,viewModel:F}=this,{state:S}=
F;return n.tsx("div",{class:this.classes("esri-attachments","esri-widget")},f?this.renderProgressBar():null,"loading"===S?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())};z.renderErrorMessage=function(){const {error:f,visibleElements:F}=this;return f&&F.errorMessage?n.tsx("div",{key:"error-message",class:"esri-attachments__error-message"},f.message):null};z.renderAttachments=function(){const {mode:f,activeAttachmentInfo:F}=this.viewModel;return"add"===f?this.renderAddForm():
"edit"===f?this.renderDetailsForm(F):this.renderAttachmentContainer()};z.renderLoading=function(){return n.tsx("div",{class:"esri-attachments__loader-container",key:"loader"},n.tsx("div",{class:"esri-attachments__loader"}))};z.renderProgressBar=function(){return this.visibleElements.progressBar?n.tsx("div",{class:"esri-attachments__progress-bar",key:"progress-bar"}):null};z.renderAddForm=function(){const {submitting:f,selectedFile:F}=this;var S=f||!F,M=this.visibleElements.cancelAddButton?n.tsx("button",
{type:"button",bind:this,disabled:f,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--tertiary","esri-button--small","esri-button--half",f&&"esri-button--disabled")},this.messages.cancel):null;S=this.visibleElements.addSubmitButton?n.tsx("button",{type:"submit",disabled:S,class:this.classes("esri-button","esri-button--secondary","esri-button--small","esri-button--half",{["esri-button--disabled"]:S})},this.messages.add):null;const P=F?n.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},
F.name):null;M=n.tsx("form",{bind:this,afterCreate:B.storeNode,afterRemoved:B.discardNode,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},n.tsx("fieldset",{class:"esri-attachments__file-fieldset"},P,n.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},F?this.messages.changeFile:this.messages.selectFile,n.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),
S,M);return n.tsx("div",{key:"add-form-container",class:"esri-attachments__form-node"},M)};z.renderDetailsForm=function(f){const {visibleElements:F,viewModel:S,selectedFile:M,submitting:P}=this,{contentType:H,size:L,url:A}=f;var {abilities:C}=S,J=P||!M,W=C.editing&&C.operations.delete&&F.deleteButton?n.tsx("button",{key:"delete-button",type:"button",disabled:P,bind:this,onclick:N=>this._submitDeleteAttachment(N,f),class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-attachments__delete-button",
{["esri-button--disabled"]:P})},this.messages.delete):null;J=C.editing&&C.operations.update&&F.updateButton?n.tsx("button",{disabled:J,key:"update-button",type:"submit",class:this.classes("esri-button","esri-button--small","esri-button--third",{["esri-button--disabled"]:J})},this.messages.update):null;const ba=this.visibleElements.cancelUpdateButton?n.tsx("button",{disabled:P,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--small",
"esri-button--tertiary","esri-button--third",{["esri-button--disabled"]:P})},this.messages.cancel):null;var X=M?n.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},M.name):null;C=C.editing&&C.operations.update?n.tsx("fieldset",{key:"file",class:"esri-attachments__file-fieldset"},X,n.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},this.messages.changeFile,n.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",
bind:this,onchange:this._handleFileInputChange}))):null;X=n.tsx("fieldset",{key:"size",class:"esri-attachments__metadata-fieldset"},n.tsx("label",null,E.formatFileSize(this.messagesUnits,L)));const v=n.tsx("fieldset",{key:"content-type",class:"esri-attachments__metadata-fieldset"},n.tsx("label",null,H));W=n.tsx("form",{bind:this,afterCreate:B.storeNode,afterRemoved:B.discardNode,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},n.tsx("div",{class:"esri-attachments__metadata"},
X,v),C,n.tsx("div",{class:"esri-attachments__actions"},W,ba,J));return n.tsx("div",{key:"edit-form-container",class:"esri-attachments__form-node"},n.tsx("a",{class:"esri-attachments__item-link",href:A,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:f,size:400}),n.tsx("div",{class:"esri-attachments__item-link-overlay"},n.tsx("span",{class:"esri-attachments__item-link-overlay-icon"},n.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},n.tsx("path",
{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),n.tsx("path",{fill:"none",d:"M0 0h32v32H0z"}))))),W)};z.renderImageMask=function({attachmentInfo:f,size:F}){var {supportsResizeAttachments:S}=this.viewModel;const {contentType:M,name:P,url:H}=f,L=S&&k.isSupportedImage(M);f=(f=this._getCSSTransform(f,L))?{transform:f,"image-orientation":"none"}:{};const A=-1===H.indexOf("?")?"?":"\x26";F=L?`${H}${A}w=${F}`:k.getIconPath(M);S={["esri-attachments__image--resizable"]:S};
return n.tsx("div",{class:this.classes({["esri-attachments__item-mask--icon"]:!L},"esri-attachments__item-mask")},n.tsx("img",{styles:f,alt:P,src:F,class:this.classes(S,"esri-attachments__image")}))};z.renderAttachmentInfo=function({attachmentInfo:f,displayType:F}){var {viewModel:S}=this;({abilities:S}=S);const {name:M,url:P}=f;F=this.renderImageMask({attachmentInfo:f,size:"list"===F?48:400});var H=S.editing?n.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",
B.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}):null;H=n.tsx("label",{class:"esri-attachments__label"},n.tsx("span",{class:"esri-attachments__filename"},M||this.messages.noTitle),H);F=[F,H];S=S.editing?n.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":f.id,onclick:()=>this._startEditAttachment(f),type:"button"},F):n.tsx("a",{key:"details-link",
class:"esri-attachments__item-button",href:P,target:"_blank"},F);return n.tsx("li",{class:"esri-attachments__item",key:f},S)};z.renderAttachmentContainer=function(){const {effectiveDisplayType:f,viewModel:F,visibleElements:S}=this,{attachmentInfos:M,abilities:P}=F;var H=M&&M.length;const L={["esri-attachments__container--list"]:"preview"!==f,["esri-attachments__container--preview"]:"preview"===f},A=P.editing&&P.operations.add&&S.addButton?n.tsx("button",{bind:this,onclick:()=>this._startAddAttachment(),
class:this.classes("esri-button","esri-button--tertiary","esri-attachments__add-attachment-button"),type:"button"},n.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon","esri-icon-plus")}),this.messages.add):null;H=H?n.tsx("ul",{class:"esri-attachments__items"},M.toArray().map(C=>this.renderAttachmentInfo({attachmentInfo:C,displayType:f}))):n.tsx("div",{class:"esri-widget__content--empty"},this.messages.noAttachments);return n.tsx("div",{key:"attachments-container",
class:this.classes("esri-attachments__container",L)},H,A)};z._modeChanged=function(){this._set("error",null);this._set("selectedFile",null)};z._handleFileInputChange=function(f){f=(f=f.target)&&f.files&&f.files.item(0);this._set("selectedFile",f)};z._submitDeleteAttachment=function(f,F){f.preventDefault();this.deleteAttachment(F)};z._submitAddAttachment=function(f){f.preventDefault();this.addAttachment()};z._submitUpdateAttachment=function(f){f.preventDefault();this.updateAttachment()};z._startEditAttachment=
function(f){const {viewModel:F}=this;F.activeAttachmentInfo=f;F.mode="edit"};z._startAddAttachment=function(){this.viewModel.mode="add"};z._cancelForm=function(f){f.preventDefault();this.viewModel.mode="view"};z._getCSSTransform=function(f,F){({orientationInfo:f}=f);return!this._supportsImageOrientation&&F&&f?[f.rotation?`rotate(${f.rotation}deg)`:"",f.mirrored?"scaleX(-1)":""].join(" "):""};e._createClass(O,[{key:"effectiveDisplayType",get:function(){const {displayType:f}=this;return f&&"auto"!==
f?f:this.viewModel.supportsResizeAttachments?"preview":"list"}}]);return O}(d);q.__decorate([r.aliasOf("viewModel.abilities")],w.prototype,"abilities",void 0);q.__decorate([I.property()],w.prototype,"displayType",void 0);q.__decorate([I.property({readOnly:!0})],w.prototype,"effectiveDisplayType",null);q.__decorate([r.aliasOf("viewModel.graphic")],w.prototype,"graphic",void 0);q.__decorate([I.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],w.prototype,"label",void 0);q.__decorate([I.property(),
c.messageBundle("esri/widgets/Attachments/t9n/Attachments")],w.prototype,"messages",void 0);q.__decorate([I.property(),c.messageBundle("esri/core/t9n/Units")],w.prototype,"messagesUnits",void 0);q.__decorate([I.property({readOnly:!0})],w.prototype,"selectedFile",void 0);q.__decorate([I.property({readOnly:!0})],w.prototype,"submitting",void 0);q.__decorate([I.property({readOnly:!0})],w.prototype,"error",void 0);q.__decorate([I.property({type:g})],w.prototype,"viewModel",void 0);q.__decorate([I.property()],
w.prototype,"visibleElements",void 0);q.__decorate([K.cast("visibleElements")],w.prototype,"castVisibleElements",null);return w=q.__decorate([x.subclass("esri.widgets.Attachments")],w)})},"esri/core/unitFormatUtils":function(){define("exports ./byteSizeEstimations ./mathUtils ./string ./unitUtils ../intl/number".split(" "),function(e,q,b,E,h,r){function w(I,x,d){return I.units[x][d]}function D(I,x,d,g=2,k="abbr"){return`${r.formatNumber(x,{minimumFractionDigits:g,maximumFractionDigits:g})} ${w(I,
d,k)}`}const K=["B","kB","MB","GB","TB"];e.formatAngleDegrees=function(I,x,d=2){I=h.convertUnit(I,x,"degrees");return r.formatNumber(I,{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:d,minimumFractionDigits:d})};e.formatDMS=function(I,x,d=2){I=h.convertUnit(I,x,"degrees");x=I-Math.floor(I);I-=x;x*=60;let g=x-Math.floor(x);x-=g;g*=60;return`${I.toFixed()}\u00b0 ${x.toFixed()}' ${g.toFixed(d)}"`};e.formatDecimal=D;e.formatFileSize=function(I,x){let d=0===x?0:Math.floor(Math.log(x)/
Math.log(q.ByteSizeUnit.KILOBYTES));d=b.clamp(d,0,K.length-1);x=r.formatNumber(x/q.ByteSizeUnit.KILOBYTES**d,{maximumFractionDigits:2});return E.replace(I.units.bytes[K[d]],{fileSize:x})};e.formatImperialArea=function(I,x,d,g=2,k="abbr"){const B=h.preferredImperialAreaUnit(x,d);return D(I,h.convertUnit(x,d,B),B,g,k)};e.formatImperialLength=function(I,x,d,g=2,k="abbr"){const B=h.preferredImperialLengthUnit(x,d);return D(I,h.convertUnit(x,d,B),B,g,k)};e.formatImperialVerticalLength=function(I,x,d,g=
2,k="abbr"){const B=h.preferredImperialVerticalLengthUnit(x,d);return D(I,h.convertUnit(x,d,B),B,g,k)};e.formatMetricArea=function(I,x,d,g=2,k="abbr"){const B=h.preferredMetricAreaUnit(x,d);return D(I,h.convertUnit(x,d,B),B,g,k)};e.formatMetricLength=function(I,x,d,g=2,k="abbr"){const B=h.preferredMetricLengthUnit(x,d);return D(I,h.convertUnit(x,d,B),B,g,k)};e.formatMetricVerticalLength=function(I,x,d,g=2,k="abbr"){const B=h.preferredMetricVerticalLengthUnit(x,d);return D(I,h.convertUnit(x,d,B),B,
g,k)};e.unitName=w;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(e){function q(b){return 32+b.length}e.ByteSizeUnit=void 0;(function(b){b[b.KILOBYTES=1024]="KILOBYTES";b[b.MEGABYTES=1048576]="MEGABYTES";b[b.GIGABYTES=1073741824]="GIGABYTES"})(e.ByteSizeUnit||(e.ByteSizeUnit={}));e.estimateAttributesObjectSize=function(b){if(!b)return 0;let E=32;for(const h in b)if(b.hasOwnProperty(h)){const r=b[h];switch(typeof r){case "string":E+=
q(r);break;case "number":E+=16;break;case "boolean":E+=4}}return E};e.estimateFixedArraySize=function(b,E){return 32+b.length*E};e.estimateNumberByteSize=function(){return 16};e.estimateStringByteSize=q;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Attachments/AttachmentsViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Collection ../../core/Error ../../core/HandleOwner ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../Feature/support/featureUtils".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g,k,B,c){const t={editing:!1,operations:{add:!0,update:!0,delete:!0}},n=E.ofType(k);E=function(u){function p(O){var z=u.call(this,O)||this;z._getAttachmentsPromise=null;z._attachmentLayer=null;z.abilities={...t};z.activeAttachmentInfo=null;z.attachmentInfos=new n;z.graphic=null;z.mode="view";z.handles.add([D.init(e._assertThisInitialized(z),"graphic",()=>z._graphicChanged())]);return z}e._inheritsLoose(p,u);var y=p.prototype;y.destroy=function(){this.graphic=this._attachmentLayer=
null};y.castAbilities=function(O){return{...t,...O}};y.getAttachments=function(){var O=e._asyncToGenerator(function*(){const {_attachmentLayer:z,attachmentInfos:f}=this;if(!z||"function"!==typeof z.queryAttachments)throw new h("invalid-layer","getAttachments(): A valid layer is required.");const F=this._getFeatureId();var S=new B({objectIds:[F],returnMetadata:!0});const M=[];this._getAttachmentsPromise=S=z.queryAttachments(S).then(P=>P[F]||M).catch(()=>M);this.notifyChange("state");S=yield S;f.removeAll();
S.length&&f.addMany(S);this._getAttachmentsPromise=null;this.notifyChange("state");return S});return function(){return O.apply(this,arguments)}}();y.addAttachment=function(){var O=e._asyncToGenerator(function*(z){const {_attachmentLayer:f,attachmentInfos:F,graphic:S,abilities:M}=this;if(!z)throw new h("invalid-attachment","addAttachment(): An attachment is required.",{attachment:z});if(!M.operations.add)throw new h("invalid-abilities","addAttachment(): add abilities are required.");if(!f||"function"!==
typeof f.addAttachment)throw new h("invalid-layer","addAttachment(): A valid layer is required.");z=yield f.addAttachment(S,z).then(P=>this._queryAttachment(P.objectId));F.add(z);return z});return function(z){return O.apply(this,arguments)}}();y.deleteAttachment=function(){var O=e._asyncToGenerator(function*(z){const {_attachmentLayer:f,attachmentInfos:F,graphic:S,abilities:M}=this;if(!z)throw new h("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:z});
if(!M.operations.delete)throw new h("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!f||"function"!==typeof f.deleteAttachments)throw new h("invalid-layer","deleteAttachment(): A valid layer is required.");const P=yield f.deleteAttachments(S,[z.id]).then(()=>z);F.remove(P);return P});return function(z){return O.apply(this,arguments)}}();y.updateAttachment=function(){var O=e._asyncToGenerator(function*(z,f=this.activeAttachmentInfo){const {_attachmentLayer:F,attachmentInfos:S,
graphic:M,abilities:P}=this;if(!z)throw new h("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:z});if(!f)throw new h("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:f});if(!P.operations.update)throw new h("invalid-abilities","updateAttachment(): Update abilities are required.");const H=S.findIndex(L=>L===f);if(!F||"function"!==typeof F.updateAttachment)throw new h("invalid-layer","updateAttachment(): A valid layer is required.");
z=yield F.updateAttachment(M,f.id,z).then(L=>this._queryAttachment(L.objectId));S.splice(H,1,z);return z});return function(z){return O.apply(this,arguments)}}();y._queryAttachment=function(){var O=e._asyncToGenerator(function*(z){if(!z)throw new h("invalid-attachment-id","Could not query attachment.");const {_attachmentLayer:f}=this,F=this._getFeatureId();z=new B({objectIds:[F],attachmentsWhere:`AttachmentId=${z}`,returnMetadata:!0});return f.queryAttachments(z).then(S=>S[F][0])});return function(z){return O.apply(this,
arguments)}}();y._getFeatureId=function(){const {_attachmentLayer:O,graphic:z}=this;if(!O||!z)return null;const {objectIdField:f}=O,{attributes:F}=z;return F&&F[f]};y._graphicChanged=function(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))};y._setAttachmentLayer=function(){var {graphic:O}=this;this._attachmentLayer=(O=c.getSourceLayer(O))?"scene"===O.type&&w.isSome(O.associatedLayer)?O.associatedLayer:O:null};e._createClass(p,[{key:"state",get:function(){return this._getAttachmentsPromise?
"loading":this.graphic?"ready":"disabled"}},{key:"supportsResizeAttachments",get:function(){return this.get("graphic.layer.capabilities.operations.supportsResizeAttachments")||!1}}]);return p}(r.HandleOwner);q.__decorate([K.property()],E.prototype,"abilities",void 0);q.__decorate([d.cast("abilities")],E.prototype,"castAbilities",null);q.__decorate([K.property()],E.prototype,"activeAttachmentInfo",void 0);q.__decorate([K.property({readOnly:!0,type:n})],E.prototype,"attachmentInfos",void 0);q.__decorate([K.property({type:b})],
E.prototype,"graphic",void 0);q.__decorate([K.property()],E.prototype,"mode",void 0);q.__decorate([K.property({readOnly:!0})],E.prototype,"state",null);q.__decorate([K.property({readOnly:!0})],E.prototype,"supportsResizeAttachments",null);return E=q.__decorate([g.subclass("esri.widgets.Attachments.AttachmentsViewModel")],E)})},"esri/widgets/Feature/support/featureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Logger ../../../core/maybe ../../../core/string ../../../intl/date ../../../intl/number ../../../layers/support/fieldUtils ../../../popup/support/FieldInfoFormat ../../../support/arcadeOnDemand".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x){function d(){d=q._asyncToGenerator(function*(ka,na){return"function"===typeof ka?ka.call(null,na):ka});return d.apply(this,arguments)}function g(ka){return ka?Z.test(ka):!1}function k(ka,na){if(!g(na)||!ka)return null;const ma=na.replace(Z,"").toLowerCase();let aa;ka.some(da=>da.name.toLowerCase()===ma?(aa=da,!0):!1);return aa}function B(ka,na){return(na=c(na,ka))?na.name:ka}function c(ka,na){return ka&&"function"===typeof ka.getField?ka.getField(na):null}function t({formattedAttributes:ka,
template:na,fieldInfoMap:ma}){return`${r.replace(r.replace(na,aa=>{{const da=ma.get(aa.toLowerCase());aa=`{${da&&da.fieldName||aa}}`}return aa}),ka).replace(v,"")}`.trim()}function n(ka,na,ma=!1){const aa=na[ka];"string"===typeof aa&&(ma=(ma?encodeURIComponent(aa):aa).replace(Q,"%27"),na[ka]=ma)}function u(ka,na=!1){const ma={...ka};Object.keys(ma).forEach(aa=>n(aa,ma,na));return ma}function p(ka,na){return ka.replace(N,(ma,aa,da)=>(ma=c(na,da))?`{${ma.name}}`:aa)}function y(ka,na,ma){return(ka=p(ka,
ma))?ka.replace(ua,(aa,da,fa)=>{da=`${da||fa}`.trim();return r.replace(aa,u(na,da&&"{"!==da[0]))}):ka}function O(ka,na){var ma=na.fieldName,aa=z(na.fieldInfos,ma),da=null==aa?void 0:aa.clone();aa=na.preventPlacesFormatting;na=na.layer;ma=c(na,ma);if(da&&"date"===(null==ma?void 0:ma.type)){ma=da.format||new I;ma.dateFormat=ma.dateFormat||"short-date-short-time";var fa;if(!(fa="feature"===(null==na?void 0:na.type)&&na.datesInUnknownTimezone)){if(fa=!(null==na||!na.layer))fa=na.layer,fa="map-image"===
(null==fa?void 0:fa.type);fa=fa&&na.layer.datesInUnknownTimezone}ma.dateTimeFormatOptions=fa?{timeZone:"UTC"}:null;da.format=ma}da=da&&da.format;"string"!==typeof ka||!da||null!=da.dateFormat||null==da.places&&null==da.digitSeparator||(na=Number(ka),isNaN(na)||(ka=na));return"string"===typeof ka||null==ka||null==da?S(ka):aa?D.formatNumber(ka,{...D.convertNumberFormatToIntlOptions(da),minimumFractionDigits:0,maximumFractionDigits:20}):da.format(ka)}function z(ka,na){if(ka&&ka.length&&na){var ma=na.toLowerCase(),
aa=void 0;ka.some(da=>da.fieldName&&da.fieldName.toLowerCase()===ma?(aa=da,!0):!1);return aa}}function f({fieldName:ka,graphic:na,layer:ma}){if(J(ka)||!ma||"function"!==typeof ma.getFeatureType)return null;const {typeIdField:aa}=ma;return aa&&ka===aa?(ka=ma.getFeatureType(na))?ka.name:null:null}function F({fieldName:ka,value:na,graphic:ma,layer:aa}){return J(ka)||!aa||"function"!==typeof aa.getFieldDomain?null:(ka=aa.getFieldDomain(ka,{feature:ma}))&&"coded-value"===ka.type?ka.getName(na):null}function S(ka){return"string"===
typeof ka?ka.replace(ja,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):ka}function M(ka){const {value:na,fieldName:ma,fieldInfos:aa,fieldInfoMap:da,layer:fa,graphic:ha}=ka;return null==na?"":(ka=F({fieldName:ma,value:na,graphic:ha,layer:fa}))||(ka=f({fieldName:ma,graphic:ha,layer:fa}))?ka:da.get(ma.toLowerCase())?O(na,{fieldInfos:aa,fieldName:ma,layer:fa}):(ka=fa&&fa.fieldsIndex)&&ka.isDateField(ma)?w.formatDate(na,Ga):S(na)}function P(ka,na){return H.apply(this,arguments)}function H(){H=q._asyncToGenerator(function*(ka,
na){var ma,aa;const {layer:da,graphic:fa,outFields:ha,objectIds:sa,returnGeometry:pa,spatialReference:qa}=ka;ka=sa[0];if("number"!==typeof ka&&"string"!==typeof ka)return X.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",{layer:da,graphic:fa,objectId:ka,requiredFields:ha}),null;if(null==(ma=da.capabilities)||null==(aa=ma.operations)||!aa.supportsQuery)return X.warn("The specified layer cannot be queried. The following fields will not be available.",{layer:da,
graphic:fa,requiredFields:ha,returnGeometry:pa}),null;ma=da.createQuery();ma.objectIds=sa;ma.outFields=null!=ha&&ha.length?ha:[da.objectIdField];ma.returnGeometry=!!pa;ma.returnZ=!!pa;ma.returnM=!!pa;ma.outSpatialReference=qa;return(yield da.queryFeatures(ma,na)).features[0]});return H.apply(this,arguments)}function L(ka){return A.apply(this,arguments)}function A(){A=q._asyncToGenerator(function*(ka){var na;if(null==(na=ka.expressionInfos)||!na.length)return!1;na=yield x.loadArcade();({arcadeUtils:{hasGeometryFunctions:na}}=
na);return na(ka)});return A.apply(this,arguments)}function C(){C=q._asyncToGenerator(function*({graphic:ka,popupTemplate:na,layer:ma,spatialReference:aa},da){if(ma&&na&&("function"===typeof ma.load&&(yield ma.load(da)),ka.attributes)){var fa=ka.attributes[ma.objectIdField];if(null!=fa){fa=[fa];var ha=yield na.getRequiredFields(ma.fieldsIndex),sa=K.featureHasFields(ha,ka);ha=sa?[]:ha;na=na.returnGeometry||(yield L(na));if(!sa||na)if(ma=yield P({layer:ma,graphic:ka,outFields:ha,objectIds:fa,returnGeometry:na,
spatialReference:aa},da))ma.geometry&&(ka.geometry=ma.geometry),ma.attributes&&(ka.attributes={...ka.attributes,...ma.attributes})}}});return C.apply(this,arguments)}function J(ka=""){return ka?-1!==ka.indexOf("relationships/"):!1}function W({attributes:ka,graphic:na,relatedInfo:ma}){ka&&na&&ma&&Object.keys(na.attributes).forEach(aa=>{var da={layerId:ma.relation.id.toString(),fieldName:aa};ka[da?`${"relationships/"}${da.layerId}/${da.fieldName}`:""]=na.attributes[aa]})}function ba(ka,na){ka&&na&&
(na.relatedFeatures&&na.relatedFeatures&&na.relatedFeatures.forEach(ma=>W({attributes:ka,graphic:ma,relatedInfo:na})),na.relatedStatsFeatures&&na.relatedStatsFeatures&&na.relatedStatsFeatures.forEach(ma=>W({attributes:ka,graphic:ma,relatedInfo:na})))}const X=E.getLogger("esri.widgets.Feature.support.featureUtils"),v=/href=(""|'')/gi,N=/(\{([^\{\r\n]+)\})/g,Q=/'/g,Z=/^\s*expression\//i,ja=/(\n)/gi,la=/[\u00A0-\u9999<>&]/gim,ua=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,Ba=/^(?:mailto:|tel:)/,Ga=w.convertDateFormatToIntlOptions("short-date-short-time"),
Fa=ka=>{if(!ka)return!1;ka=ka.toUpperCase();return-1<ka.indexOf("CURRENT_TIMESTAMP")||-1<ka.indexOf("CURRENT_DATE")||-1<ka.indexOf("CURRENT_TIME")},Ma=({layer:ka,method:na,query:ma,definitionExpression:aa})=>{var da,fa;null!=(da=ka.capabilities)&&null!=(fa=da.query)&&fa.supportsCacheHint&&"attachments"!==na&&(ka=h.isSome(ma.where)&&ma.where,na=h.isSome(ma.geometry)&&ma.geometry,Fa(aa)||Fa(ka)||"extent"===(null==na?void 0:na.type)||"tile"===ma.resultType||(ma.cacheHint=!0))};e.applyTextFormattingHTML=
S;e.createfieldInfoMap=function(ka,na){const ma=new Map;ka&&ka.forEach(aa=>{const da=B(aa.fieldName,na);aa.fieldName=da;ma.set(da.toLowerCase(),aa)});return ma};e.fixTokens=p;e.formatAttributes=function({fieldInfos:ka,attributes:na,layer:ma,graphic:aa,fieldInfoMap:da,relatedInfos:fa}){const ha={};null==fa?void 0:fa.forEach(sa=>ba(ha,sa));Object.keys(na).forEach(sa=>{ha[sa]=M({fieldName:sa,fieldInfos:ka,fieldInfoMap:da,layer:ma,value:na[sa],graphic:aa})});return ha};e.formatEditInfo=function(ka,na){const {creatorField:ma,
creationDateField:aa,editorField:da,editDateField:fa}=ka;if(na){ka=na[fa];if("number"===typeof ka)return na=na[da],{type:"edit",date:w.formatDate(ka,Ga),user:na};ka=na[aa];return"number"===typeof ka?(na=na[ma],{type:"create",date:w.formatDate(ka,Ga),user:na}):null}};e.formatValueToFieldInfo=O;e.getAllFieldInfos=function(ka){const na=[];if(!ka)return na;const {fieldInfos:ma,content:aa}=ka;ma&&na.push(...ma);if(!aa||!Array.isArray(aa))return na;aa.forEach(da=>{"fields"===da.type&&(da=da&&da.fieldInfos)&&
na.push(...da)});return na};e.getFieldInfo=z;e.getFieldInfoLabel=function(ka,na){return(na=k(na,null==ka?void 0:ka.fieldName))?na.title||null:ka?ka.label||ka.fieldName:null};e.getFixedFieldName=B;e.getFixedFieldNames=function(ka,na){return ka&&ka.map(ma=>B(ma,na))};e.getSourceLayer=function(ka){if(!h.isNone(ka))return ka.get("sourceLayer")||ka.get("layer")};e.graphicCallback=function(ka,na){return d.apply(this,arguments)};e.htmlEntities=function(ka){return ka.replace(la,na=>`&#${na.charCodeAt(0)};`)};
e.isExpressionField=g;e.isRelatedField=J;e.preLayerQueryCallback=({query:ka,layer:na,method:ma})=>{Ma({layer:na,method:ma,query:ka,definitionExpression:`${na.definitionExpression} ${na.serviceDefinitionExpression}`})};e.preRequestCallback=({queryPayload:ka,layer:na,method:ma})=>{Ma({layer:na,method:ma,query:ka,definitionExpression:`${na.definitionExpression} ${na.serviceDefinitionExpression}`})};e.queryUpdatedFeature=function(ka,na){return C.apply(this,arguments)};e.shouldOpenInNewTab=function(ka=
""){if(ka)return!Ba.test(ka.trim().toLowerCase())};e.substituteAttributes=t;e.substituteFieldsInLinksAndAttributes=function({attributes:ka,globalAttributes:na,layer:ma,text:aa,expressionAttributes:da,fieldInfoMap:fa}){return aa?t({formattedAttributes:na,template:y(aa,{...na,...da,...ka},ma),fieldInfoMap:fa}):""};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Attachments/support/attachmentUtils":function(){define(["exports","../../../assets"],function(e,q){e.getIconPath=function(b){const E=
q.getAssetUrl("esri/themes/base/images/files/");return b?"text/plain"===b?`${E}text-32.svg`:"application/pdf"===b?`${E}pdf-32.svg`:"text/csv"===b?`${E}csv-32.svg`:"application/gpx+xml"===b?`${E}gpx-32.svg`:"application/x-dwf"===b?`${E}cad-32.svg`:"application/postscript"===b||"application/json"===b||"text/xml"===b||"model/vrml"===b?`${E}code-32.svg`:"application/x-zip-compressed"===b||"application/x-7z-compressed"===b||"application/x-gzip"===b||"application/x-tar"===b||"application/x-gtar"===b||"application/x-bzip2"===
b||"application/gzip"===b||"application/x-compress"===b||"application/x-apple-diskimage"===b||"application/x-rar-compressed"===b||"application/zip"===b?`${E}zip-32.svg`:-1!==b.indexOf("image/")?`${E}image-32.svg`:-1!==b.indexOf("audio/")?`${E}sound-32.svg`:-1!==b.indexOf("video/")?`${E}video-32.svg`:-1!==b.indexOf("msexcel")||-1!==b.indexOf("ms-excel")||-1!==b.indexOf("spreadsheetml")?`${E}excel-32.svg`:-1!==b.indexOf("msword")||-1!==b.indexOf("ms-word")||-1!==b.indexOf("wordprocessingml")?`${E}word-32.svg`:
-1!==b.indexOf("powerpoint")||-1!==b.indexOf("presentationml")?`${E}report-32.svg`:`${E}generic-32.svg`:`${E}generic-32.svg`};e.isSupportedImage=function(b){b=b.toLowerCase();return"image/bmp"===b||"image/emf"===b||"image/exif"===b||"image/gif"===b||"image/x-icon"===b||"image/jpeg"===b||"image/png"===b||"image/tiff"===b||"image/x-wmf"===b};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureAttachments/FeatureAttachmentsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Attachments/AttachmentsViewModel".split(" "),
function(e,q,b,E,h,r,w,D){E=function(K){function I(x){x=K.call(this,x)||this;x.description=null;x.title=null;return x}e._inheritsLoose(I,K);return I}(D);q.__decorate([b.property()],E.prototype,"description",void 0);q.__decorate([b.property()],E.prototype,"title",void 0);return E=q.__decorate([w.subclass("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],E)})},"esri/widgets/Feature/support/FeatureElementInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Widget ../../support/Heading ../../support/widgetUtils ../../../core/Logger ../../support/jsxFactory".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d){E=function(g){function k(c,t){c=g.call(this,c,t)||this;c.description=null;c.headingLevel=2;c.title=null;return c}e._inheritsLoose(k,g);var B=k.prototype;B.render=function(){return d.tsx("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())};B.renderTitle=function(){const {title:c}=this;return c?d.tsx(K.Heading,{level:this.headingLevel,class:"esri-feature-element-info__title"},c):null};B.renderDescription=function(){const {description:c}=
this;return c?d.tsx("div",{key:"description",class:"esri-feature-element-info__description"},c):null};return k}(D);q.__decorate([b.property()],E.prototype,"description",void 0);q.__decorate([b.property()],E.prototype,"headingLevel",void 0);q.__decorate([b.property()],E.prototype,"title",void 0);return E=q.__decorate([w.subclass("esri.widgets.Feature.support.FeatureElementInfo")],E)})},"esri/widgets/support/Heading":function(){define("exports ../../core/mathUtils ./widgetUtils ../../core/has ../../core/Logger ./jsxFactory".split(" "),
function(e,q,b,E,h,r){const w={heading:"esri-widget__heading"};e.CSS=w;e.Heading=function(D,K){const I=q.clamp(Math.ceil(D.level),1,6),x=`h${I}`;delete D.level;return r.tsx(x,{...D,class:b.classes(w.heading,D.class),role:"heading","aria-level":String(I)},K)};e.incrementHeadingLevel=function(D,K=1){return q.clamp(Math.ceil(D+K),1,6)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent/FeatureContentViewModel ./support/featureUtils ../support/widget ../support/jsxFactory".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g){E=function(k){function B(t,n){t=k.call(this,t,n)||this;t.creator=null;t.graphic=null;t.viewModel=null;t._addTargetToAnchors=u=>{Array.from(u.querySelectorAll("a")).forEach(p=>{x.shouldOpenInNewTab(p.href)&&!p.hasAttribute("target")&&p.setAttribute("target","_blank")})};return t}e._inheritsLoose(B,k);var c=B.prototype;c.renderLoading=function(){return g.tsx("div",{class:"esri-feature-content__loader-container",key:"loader"},g.tsx("div",{class:"esri-feature-content__loader"}))};
c.renderCreated=function(){var t;const n=null==(t=this.viewModel)?void 0:t.created;return n?n instanceof HTMLElement?g.tsx("div",{key:n,bind:n,afterCreate:this._attachToNode}):d.isWidget(n)?g.tsx("div",{key:n},!n.destroyed&&n.render()):g.tsx("div",{key:n,innerHTML:n,afterCreate:this._addTargetToAnchors}):null};c.render=function(){var t;const n=null==(t=this.viewModel)?void 0:t.state;return g.tsx("div",{class:"esri-feature-content"},"loading"===n?this.renderLoading():this.renderCreated())};c._attachToNode=
function(t){t.appendChild(this)};return B}(K);q.__decorate([b.aliasOf("viewModel.creator")],E.prototype,"creator",void 0);q.__decorate([b.aliasOf("viewModel.graphic")],E.prototype,"graphic",void 0);q.__decorate([w.property({type:I})],E.prototype,"viewModel",void 0);return E=q.__decorate([D.subclass("esri.widgets.Feature.FeatureContent")],E)})},"esri/widgets/Feature/FeatureContent/FeatureContentViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../support/featureUtils".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d){E=function(g){function k(c){var t=g.call(this,c)||this;t._loadingPromise=null;t.created=null;t.creator=null;t.destroyer=null;t.graphic=null;t.handles.add(r.init(e._assertThisInitialized(t),"creator",n=>{t._destroyContent();t._createContent(n)}));return t}e._inheritsLoose(k,g);var B=k.prototype;B.destroy=function(){this._destroyContent()};B._destroyContent=function(){const {created:c,graphic:t,destroyer:n}=this;c&&(d.graphicCallback(n,{graphic:t}).catch(()=>null),
this._set("created",null))};B._createContent=function(){var c=e._asyncToGenerator(function*(t){var {graphic:n}=this;this._loadingPromise=t=d.graphicCallback(t,{graphic:n}).catch(()=>null);this.notifyChange("state");n=yield t;t===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",n))});return function(t){return c.apply(this,arguments)}}();e._createClass(k,[{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}}]);return k}(h.HandleOwnerMixin(E));
q.__decorate([w.property({readOnly:!0})],E.prototype,"created",void 0);q.__decorate([w.property()],E.prototype,"creator",void 0);q.__decorate([w.property()],E.prototype,"destroyer",void 0);q.__decorate([w.property({type:b})],E.prototype,"graphic",void 0);q.__decorate([w.property({readOnly:!0})],E.prototype,"state",null);return E=q.__decorate([x.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],E)})},"esri/widgets/Feature/FeatureExpression":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent ./FeatureFields ./FeatureMedia ./FeatureExpression/FeatureExpressionViewModel ../support/widgetUtils ../../core/Logger ../support/jsxFactory".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g,k,B,c){h=function(t){function n(p,y){p=t.call(this,p,y)||this;p.viewModel=new g;return p}e._inheritsLoose(n,t);var u=n.prototype;u.initialize=function(){b.init(this,"viewModel.contentElementViewModel",()=>this._setupExpressionWidget())};u.destroy=function(){this._destroyContentWidget()};u.renderLoading=function(){return c.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},c.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating",
"esri-feature__loading-spinner")}))};u.render=function(){var p;const {state:y}=this.viewModel;return c.tsx("div",{class:"esri-feature-expression"},"loading"===y?this.renderLoading():"disabled"===y?null:null==(p=this._contentWidget)?void 0:p.render())};u._destroyContentWidget=function(){const {_contentWidget:p}=this;p&&(p.viewModel=null,p.destroy());this._contentWidget=null};u._setupExpressionWidget=function(){const {contentElementViewModel:p,contentElement:y}=this.viewModel,O=null==y?void 0:y.type;
this._destroyContentWidget();this._contentWidget=p?"fields"===O?new x({viewModel:p}):"media"===O?new d({viewModel:p}):"text"===O?new I({viewModel:p}):null:null;this.scheduleRender()};return n}(K);q.__decorate([E.property({type:g})],h.prototype,"viewModel",void 0);return h=q.__decorate([D.subclass("esri.widgets.Feature.FeatureExpression")],h)})},"esri/widgets/Feature/FeatureFields":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureFields/FeatureFieldsViewModel ./support/FeatureElementInfo ../support/uriUtils ../support/widgetUtils ../support/decorators/messageBundle ../../core/Logger ../support/jsxFactory".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g,k,B,c,t){h=function(n){function u(y,O){y=n.call(this,y,O)||this;y._featureElementInfo=null;y.attributes=null;y.description=null;y.expressionInfos=null;y.fieldInfos=null;y.title=null;y.viewModel=new x;y.messages=null;y.messagesURIUtils=null;return y}e._inheritsLoose(u,n);var p=u.prototype;p.initialize=function(){this._featureElementInfo=new d;b.init(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo())};p.destroy=function(){this._featureElementInfo.destroy()};
p.renderFieldInfo=function(y,O){var {attributes:z}=this.viewModel;const f=y.fieldName,F=y.label||f;z=z?null==z[f]?"":z[f]:"";y=!(!y.format||!y.format.dateFormat);z="number"!==typeof z||y?g.autoLink(this.messagesURIUtils,z):this._forceLTR(z);y={["esri-feature-fields__field-data--date"]:y};return t.tsx("tr",{key:`fields-element-info-row-${f}-${O}`},t.tsx("th",{key:`fields-element-info-row-header-${f}-${O}`,class:"esri-feature-fields__field-header",innerHTML:F}),t.tsx("td",{key:`fields-element-info-row-data-${f}-${O}`,
class:this.classes("esri-feature-fields__field-data",y),innerHTML:z}))};p.renderFields=function(){const {formattedFieldInfos:y}=this.viewModel;return null!=y&&y.length?t.tsx("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},t.tsx("tbody",null,y.map((O,z)=>this.renderFieldInfo(O,z)))):null};p.render=function(){var y;return t.tsx("div",{class:"esri-feature-fields"},null==(y=this._featureElementInfo)?void 0:y.render(),this.renderFields())};p._setupFeatureElementInfo=function(){const {description:y,
title:O}=this;this._featureElementInfo.set({description:y,title:O})};p._forceLTR=function(y){return`&lrm;${y}`};return u}(I);q.__decorate([E.aliasOf("viewModel.attributes")],h.prototype,"attributes",void 0);q.__decorate([E.aliasOf("viewModel.description")],h.prototype,"description",void 0);q.__decorate([E.aliasOf("viewModel.expressionInfos")],h.prototype,"expressionInfos",void 0);q.__decorate([E.aliasOf("viewModel.fieldInfos")],h.prototype,"fieldInfos",void 0);q.__decorate([E.aliasOf("viewModel.title")],
h.prototype,"title",void 0);q.__decorate([D.property({type:x})],h.prototype,"viewModel",void 0);q.__decorate([D.property(),B.messageBundle("esri/widgets/Feature/t9n/Feature")],h.prototype,"messages",void 0);q.__decorate([D.property(),B.messageBundle("esri/widgets/support/t9n/uriUtils")],h.prototype,"messagesURIUtils",void 0);return h=q.__decorate([K.subclass("esri.widgets.Feature.FeatureFields")],h)})},"esri/widgets/Feature/FeatureFields/FeatureFieldsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/ExpressionInfo ../../../popup/FieldInfo ../support/featureUtils".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x){b=function(d){function g(k){k=d.call(this,k)||this;k.attributes=null;k.expressionInfos=null;k.description=null;k.fieldInfos=null;k.title=null;return k}e._inheritsLoose(g,d);e._createClass(g,[{key:"formattedFieldInfos",get:function(){const {expressionInfos:k,fieldInfos:B}=this,c=[];null==B?void 0:B.forEach(t=>{if(!t.hasOwnProperty("visible")||t.visible)t=t.clone(),t.label=x.getFieldInfoLabel(t,k),c.push(t)});return c}}]);return g}(b);q.__decorate([E.property()],b.prototype,
"attributes",void 0);q.__decorate([E.property({type:[K]})],b.prototype,"expressionInfos",void 0);q.__decorate([E.property()],b.prototype,"description",void 0);q.__decorate([E.property({type:[I]})],b.prototype,"fieldInfos",void 0);q.__decorate([E.property({readOnly:!0})],b.prototype,"formattedFieldInfos",null);q.__decorate([E.property()],b.prototype,"title",void 0);return b=q.__decorate([D.subclass("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],b)})},"esri/widgets/support/uriUtils":function(){define(["exports",
"../../core/string"],function(e,q){function b(h){let r=null;E.some(w=>{w.pattern.test(h)&&(r=w);return!!r});return r}const E=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];e.autoLink=function(h,r){if("string"!==typeof r||!r)return r;const w=b(r);if(!w)return r;const D=r.match(w.pattern);
h=q.replace(q.replace(w.label,{messages:h,hierPart:D&&D[2]}),{appName:w.appName});return r.replace(w.pattern,`<a${w.target?` target="${w.target}"`:""} href="$1"${"_blank"===w.target?' rel\x3d"noreferrer"':""}>${h}</a>`)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureMedia":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/events ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureMedia/FeatureMediaViewModel ./support/FeatureElementInfo ./support/featureUtils ../support/chartUtils ../support/widgetUtils ../support/decorators/messageBundle ../../core/Logger ../support/jsxFactory ../support/widgetThemeUtils".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g,k,B,c,t,n,u,p){r=function(y){function O(f,F){var S=y.call(this,f,F)||this;S._refreshTimer=null;S._refreshIntervalInfo=null;S._featureElementInfo=null;S.attributes=null;S.activeMediaInfoIndex=null;S.description=null;S.fieldInfoMap=null;S.layer=null;S.mediaInfos=null;S.popupTemplate=null;S.relatedInfos=null;S.title=null;S.viewModel=new d;S.messages=null;S._getChartDependencies=function(){var M=e._asyncToGenerator(function*(P){const H=yield B.loadChartsModule(),{destroyed:L,
viewModel:A}=e._assertThisInitialized(S);if(!L&&A&&P){var {activeMediaInfo:C}=A;S._renderChart({chartDiv:P,mediaInfo:C,chartsModule:H})}});return function(P){return M.apply(this,arguments)}}();return S}e._inheritsLoose(O,y);var z=O.prototype;z.initialize=function(){this._featureElementInfo=new g;this.own(E.init(this,["viewModel.activeMediaInfo","viewModel.activeMediaInfoIndex"],()=>this._setupMediaRefreshTimer()),E.init(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo()))};
z.destroy=function(){this._clearMediaRefreshTimer();this._featureElementInfo.destroy()};z.render=function(){var f;return u.tsx("div",{bind:this,class:"esri-feature-media",onkeyup:this._handleMediaKeyup},null==(f=this._featureElementInfo)?void 0:f.render(),this.renderMedia())};z.renderMedia=function(){const {formattedMediaInfoCount:f}=this.viewModel;return f?u.tsx("div",{key:"media-element-container",class:"esri-feature-media__container"},this.renderMediaPageButton("previous"),this.renderMediaInfo(),
this.renderMediaPageButton("next")):null};z.renderImageMediaInfo=function(f){var {_refreshIntervalInfo:F}=this;const {activeMediaInfoIndex:S,formattedMediaInfoCount:M}=this.viewModel,{value:P,refreshInterval:H,altText:L,title:A,type:C}=f,{sourceURL:J,linkURL:W}=P;f=k.shouldOpenInNewTab(W)?"_blank":"_self";const ba="_blank"===f?"noreferrer":"";F=H?F:null;F=u.tsx("img",{alt:L||A,key:`media-${C}-${S}-${M}-${F?F.timestamp:0}`,src:F?F.sourceURL:J});return(f=W?u.tsx("a",{title:A,href:W,rel:ba,target:f},
F):null)?f:F};z.renderChartMediaInfo=function(f){const {activeMediaInfoIndex:F,formattedMediaInfoCount:S}=this.viewModel;return u.tsx("div",{key:`media-${f.type}-${F}-${S}`,bind:this,class:"esri-feature-media__chart",afterCreate:this._getChartDependencies})};z.renderMediaInfoType=function(){const {activeMediaInfo:f}=this.viewModel;return f?"image"===f.type?this.renderImageMediaInfo(f):-1!==f.type.indexOf("chart")?this.renderChartMediaInfo(f):null:null};z.renderMediaInfo=function(){var {activeMediaInfo:f}=
this.viewModel;if(!f)return null;const F=f.title?u.tsx("div",{key:"media-title",class:"esri-feature-media__item-title",innerHTML:f.title}):null;f=f.caption?u.tsx("div",{key:"media-caption",class:"esri-feature-media__item-caption",innerHTML:f.caption}):null;return u.tsx("div",{key:"media-container",class:"esri-feature-media__item-container"},u.tsx("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType()),F,f)};z.renderMediaPageButton=function(f){if(2>this.viewModel.formattedMediaInfoCount)return null;
const F=(f="previous"===f)?this.messages.previous:this.messages.next,S=f?this.classes("esri-feature-media__button","esri-feature-media__previous"):this.classes("esri-feature-media__button","esri-feature-media__next"),M=f?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon","esri-icon-left-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon","esri-icon-right-triangle-arrow"),P=f?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon--rtl",
"esri-icon-right-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon--rtl","esri-icon-left-triangle-arrow");return u.tsx("button",{type:"button",key:f?"media-previous":"media-next",title:F,"aria-label":F,tabIndex:0,class:S,bind:this,onclick:f?this._previous:this._next},u.tsx("span",{"aria-hidden":"true",class:M}),u.tsx("span",{"aria-hidden":"true",class:P}))};z._setupFeatureElementInfo=function(){const {description:f,title:F}=this;this._featureElementInfo.set({description:f,
title:F})};z._next=function(){this.viewModel.next()};z._previous=function(){this.viewModel.previous()};z._handleMediaKeyup=function(f){const F=b.eventKey(f);"ArrowLeft"===F&&(f.stopPropagation(),this.viewModel.previous());"ArrowRight"===F&&(f.stopPropagation(),this.viewModel.next())};z._renderChart=function(f){const {abilities:F}=this.viewModel,{chartsModule:S,chartDiv:M,mediaInfo:P}=f,{value:H,type:L}=P,{am4core:A}=S,C=B.getColorSet(A);p.isDarkTheme()&&A.useTheme(S.am4themes_dark);const J=window.matchMedia("(prefers-reduced-motion: reduce)");
F.chartAnimation&&!J.matches?A.useTheme(S.am4themes_animated):A.unuseTheme(S.am4themes_animated);A.useTheme(function(W){W instanceof A.ColorSet&&C&&(W.list=C)});f="pie-chart"===L?this._createPieChart(f):this._createXYChart(f);M.setAttribute("aria-label",P.altText||P.title);f.data=H.series.map(W=>({tooltip:W.tooltip,value:W.value})).filter(W=>"pie-chart"===L?0<W.value:!0)};z._customizeChartTooltip=function(f,F){f.label.wrap=!0;f.label.maxWidth=200;f.autoTextColor=!1;f.getFillFromObject=!1;f.label.fill=
F.color("#ffffff");f.background.fill=F.color({r:0,g:0,b:0,a:.7})};z._createPieChart=function(f){const {chartDiv:F,chartsModule:S}=f,{am4core:M,am4charts:P}=S;f=M.create(F,P.PieChart);f.rtl=c.isRTL(this.container);const H=f.series.push(new P.PieSeries);H.labels.template.disabled=!0;H.ticks.template.disabled=!0;H.dataFields.value="value";H.dataFields.category="tooltip";this._customizeChartTooltip(H.tooltip,M);H.slices.template.tooltipText=f.rtl?"{category}: %{value.percent.formatNumber('#.0')}":"{category}: {value.percent.formatNumber('#.0')}%";
return f};z._getMinSeriesValue=function(f){let F=0;f.forEach(S=>F=Math.min(S.value,F));return F};z._createColumnChart=function(f,F){const {chartsModule:S,mediaInfo:M}=F;({value:F}=M);const {am4core:P,am4charts:H}=S,L=f.xAxes.push(new H.CategoryAxis);L.dataFields.category="tooltip";L.renderer.labels.template.disabled=!0;this._customizeChartTooltip(L.tooltip,P);L.tooltip.events.on("sizechanged",()=>{L.tooltip.dy=-L.tooltip.contentHeight});var A=f.yAxes.push(new H.ValueAxis);const C=A.renderer.labels.template;
A.renderer.minLabelPosition=.05;A.renderer.maxLabelPosition=.95;A.min=this._getMinSeriesValue(F.series);this._customizeChartTooltip(A.tooltip,P);C.wrap=!0;A=f.series.push(new H.ColumnSeries);A.dataFields.valueY="value";A.dataFields.categoryX="tooltip";f.cursor=new H.XYCursor;15<F.series.length&&(f.scrollbarX=new P.Scrollbar)};z._createBarChart=function(f,F){const {chartsModule:S,mediaInfo:M}=F;({value:F}=M);const {am4core:P,am4charts:H}=S,L=f.yAxes.push(new H.CategoryAxis);L.dataFields.category="tooltip";
L.renderer.inversed=!0;L.renderer.labels.template.disabled=!0;this._customizeChartTooltip(L.tooltip,P);L.tooltip.events.on("sizechanged",()=>{L.tooltip.dx=L.tooltip.contentWidth});var A=f.xAxes.push(new H.ValueAxis);const C=A.renderer.labels.template;A.renderer.minLabelPosition=.05;A.renderer.maxLabelPosition=.95;A.min=this._getMinSeriesValue(F.series);this._customizeChartTooltip(A.tooltip,P);C.wrap=!0;A=f.series.push(new H.ColumnSeries);A.dataFields.valueX="value";A.dataFields.categoryY="tooltip";
f.cursor=new H.XYCursor;15<F.series.length&&(f.scrollbarY=new P.Scrollbar)};z._createLineChart=function(f,F){const {chartsModule:S,mediaInfo:M}=F;({value:F}=M);const {am4core:P,am4charts:H}=S,L=f.xAxes.push(new H.CategoryAxis);L.dataFields.category="tooltip";L.renderer.labels.template.disabled=!0;this._customizeChartTooltip(L.tooltip,P);L.tooltip.events.on("sizechanged",()=>{L.tooltip.dy=-L.tooltip.contentHeight});var A=f.yAxes.push(new H.ValueAxis);const C=A.renderer.labels.template;A.renderer.minLabelPosition=
.05;A.renderer.maxLabelPosition=.95;A.min=this._getMinSeriesValue(F.series);this._customizeChartTooltip(A.tooltip,P);C.wrap=!0;A=f.series.push(new H.LineSeries);A.dataFields.categoryX="tooltip";A.dataFields.valueY="value";f.cursor=new H.XYCursor;15<F.series.length&&(f.scrollbarX=new P.Scrollbar)};z._createXYChart=function(f){const {chartDiv:F,chartsModule:S,mediaInfo:M}=f,{type:P}=M,{am4core:H,am4charts:L}=S,A=H.create(F,L.XYChart);A.rtl=c.isRTL(this.container);"column-chart"===P&&this._createColumnChart(A,
f);"bar-chart"===P&&this._createBarChart(A,f);"line-chart"===P&&this._createLineChart(A,f);return A};z._clearMediaRefreshTimer=function(){const {_refreshTimer:f}=this;f&&(clearTimeout(f),this._refreshTimer=null)};z._updateMediaInfoTimestamp=function(f){const F=Date.now();this._refreshIntervalInfo={timestamp:F,sourceURL:this._getImageSource(f,F)};this.scheduleRender()};z._setupMediaRefreshTimer=function(){this._clearMediaRefreshTimer();const {activeMediaInfo:f}=this.viewModel;f&&"image"===f.type&&
f.refreshInterval&&this._setRefreshTimeout(f)};z._setRefreshTimeout=function(f){const {refreshInterval:F,value:S}=f;F&&(f=6E4*F,this._updateMediaInfoTimestamp(S.sourceURL),this._refreshTimer=setInterval(()=>{this._updateMediaInfoTimestamp(S.sourceURL)},f))};z._getImageSource=function(f,F){const S=-1!==f.indexOf("?")?"\x26":"?",[M,P=""]=f.split("#");return`${M}${S}timestamp=${F}${P?"#":""}${P}`};return O}(x);q.__decorate([h.aliasOf("viewModel.attributes")],r.prototype,"attributes",void 0);q.__decorate([h.aliasOf("viewModel.activeMediaInfoIndex")],
r.prototype,"activeMediaInfoIndex",void 0);q.__decorate([h.aliasOf("viewModel.description")],r.prototype,"description",void 0);q.__decorate([h.aliasOf("viewModel.fieldInfoMap")],r.prototype,"fieldInfoMap",void 0);q.__decorate([h.aliasOf("viewModel.layer")],r.prototype,"layer",void 0);q.__decorate([h.aliasOf("viewModel.mediaInfos")],r.prototype,"mediaInfos",void 0);q.__decorate([h.aliasOf("viewModel.popupTemplate")],r.prototype,"popupTemplate",void 0);q.__decorate([h.aliasOf("viewModel.relatedInfos")],
r.prototype,"relatedInfos",void 0);q.__decorate([h.aliasOf("viewModel.title")],r.prototype,"title",void 0);q.__decorate([K.property({type:d})],r.prototype,"viewModel",void 0);q.__decorate([K.property(),t.messageBundle("esri/widgets/Feature/t9n/Feature")],r.prototype,"messages",void 0);return r=q.__decorate([I.subclass("esri.widgets.Feature.FeatureMedia")],r)})},"esri/widgets/Feature/FeatureMedia/FeatureMediaViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/subclass ../../../popup/FieldInfo ../../../popup/content/support/ChartMediaInfoValueSeries ../support/featureUtils ../support/relatedFeatureUtils".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d){const g={chartAnimation:!0};b=function(k){function B(t){t=k.call(this,t)||this;t.abilities={...g};t.activeMediaInfoIndex=0;t.attributes=null;t.description=null;t.fieldInfoMap=null;t.formattedAttributes=null;t.expressionAttributes=null;t.layer=null;t.mediaInfos=null;t.popupTemplate=null;t.relatedInfos=null;t.title=null;return t}e._inheritsLoose(B,k);var c=B.prototype;c.castAbilities=function(t){return{...g,...t}};c.setActiveMedia=function(t){this._setContentElementMedia(t)};
c.next=function(){this._pageContentElementMedia(1)};c.previous=function(){this._pageContentElementMedia(-1)};c._setContentElementMedia=function(t){const {formattedMediaInfoCount:n}=this;this.activeMediaInfoIndex=(t+n)%n};c._pageContentElementMedia=function(t){const {activeMediaInfoIndex:n}=this;this._setContentElementMedia(n+t)};c._formatMediaInfos=function(){const {attributes:t,mediaInfos:n,formattedAttributes:u,expressionAttributes:p,fieldInfoMap:y,layer:O}=this;return null==n?void 0:n.map(z=>{z=
null==z?void 0:z.clone();if(!z)return null;z.title=x.substituteFieldsInLinksAndAttributes({attributes:t,fieldInfoMap:y,globalAttributes:u,expressionAttributes:p,layer:O,text:z.title});z.caption=x.substituteFieldsInLinksAndAttributes({attributes:t,fieldInfoMap:y,globalAttributes:u,expressionAttributes:p,layer:O,text:z.caption});z.altText=x.substituteFieldsInLinksAndAttributes({attributes:t,fieldInfoMap:y,globalAttributes:u,expressionAttributes:p,layer:O,text:z.altText});if("image"===z.type){var {value:f}=
z;this._setImageValue({value:f,formattedAttributes:u,layer:O});return z.value.sourceURL?z:void 0}return"pie-chart"===z.type||"line-chart"===z.type||"column-chart"===z.type||"bar-chart"===z.type?({value:f}=z,this._setChartValue({value:f,chartType:z.type,attributes:t,formattedAttributes:u,layer:O}),z):null}).filter(Boolean)};c._setImageValue=function(t){const {fieldInfoMap:n}=this,{value:u,formattedAttributes:p,layer:y}=t,{linkURL:O,sourceURL:z}=u;z&&(t=x.fixTokens(z,y),u.sourceURL=x.substituteAttributes({formattedAttributes:p,
template:t,fieldInfoMap:n}));O&&(t=x.fixTokens(O,y),u.linkURL=x.substituteAttributes({formattedAttributes:p,template:t,fieldInfoMap:n}))};c._setChartValue=function(t){const {value:n,attributes:u,formattedAttributes:p,chartType:y,layer:O}=t,{popupTemplate:z,relatedInfos:f}=this,{fields:F,normalizeField:S}=n;n.fields=x.getFixedFieldNames(F,O);S&&(n.normalizeField=x.getFixedFieldName(S,O));if(F.some(P=>!!(null!=p[P]||x.isRelatedField(P)&&f.size))){var M=null==z?void 0:z.fieldInfos;F.forEach(P=>{x.isRelatedField(P)?
n.series=[...n.series,...this._getRelatedChartInfos({fieldInfos:M,fieldName:P,formattedAttributes:p,chartType:y,value:n})]:(P=this._getChartOption({value:n,attributes:u,chartType:y,formattedAttributes:p,fieldName:P,fieldInfos:M}),n.series.push(P))})}};c._getRelatedChartInfos=function(t){var n;const {fieldInfos:u,fieldName:p,formattedAttributes:y,chartType:O,value:z}=t,f=[];t=d.getRelatedFieldInfo(p);const {layerId:F,fieldName:S}=t;t=null==(n=this.relatedInfos)?void 0:n.get(F.toString());if(!t)return f;
const {relatedFeatures:M,relation:P}=t;if(!P||!M)return f;({cardinality:n}=P);M.forEach(H=>{const {attributes:L}=H;L&&Object.keys(L).forEach(A=>{A===S&&f.push(this._getChartOption({value:z,attributes:L,formattedAttributes:y,fieldName:p,chartType:O,relatedFieldName:A,fieldInfos:u}))})});return"one-to-many"===n||"many-to-many"===n?f:[f[0]]};c._getTooltip=function({label:t,value:n,chartType:u}){return"pie-chart"===u?t:`${t}: ${n}`};c._getChartOption=function(t){const {value:n,attributes:u,formattedAttributes:p,
fieldName:y,relatedFieldName:O,fieldInfos:z,chartType:f}=t;var {layer:F}=this;const {normalizeField:S,tooltipField:M}=n;var P=S?x.isRelatedField(S)?u[d.getRelatedFieldInfo(S).fieldName]:u[S]:null;t=O&&void 0!==u[O]?u[O]:void 0!==u[y]?u[y]:p[y];const H=void 0===t?null:t&&P?t/P:t;t=new I({value:H});if(x.isRelatedField(y)){var L=d.getRelatedFieldInfo(y);var A=d.getRelatedFieldInfo(M);A=A?A.fieldName:null;F=x.formatValueToFieldInfo(H,{fieldInfos:z,fieldName:O,layer:F,preventPlacesFormatting:!!P});L=L?
L.label||L.fieldName:O;t.tooltip=this._getTooltip({label:A&&void 0!==u[A]?u[A]:L,value:F,chartType:f});return t}P=x.getFieldInfo(z,y);F=x.getFixedFieldName(y,F);P=M&&void 0!==p[M]?p[M]:x.getFieldInfoLabel(P||new K({fieldName:F}),null==(L=this.popupTemplate)?void 0:L.expressionInfos);t.tooltip=this._getTooltip({label:P,value:p[F],chartType:f});return t};e._createClass(B,[{key:"activeMediaInfo",get:function(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}},{key:"formattedMediaInfos",
get:function(){return this._formatMediaInfos()||[]}},{key:"formattedMediaInfoCount",get:function(){return this.formattedMediaInfos.length}}]);return B}(b);q.__decorate([E.property()],b.prototype,"abilities",void 0);q.__decorate([w.cast("abilities")],b.prototype,"castAbilities",null);q.__decorate([E.property()],b.prototype,"activeMediaInfoIndex",void 0);q.__decorate([E.property({readOnly:!0})],b.prototype,"activeMediaInfo",null);q.__decorate([E.property()],b.prototype,"attributes",void 0);q.__decorate([E.property()],
b.prototype,"description",void 0);q.__decorate([E.property()],b.prototype,"fieldInfoMap",void 0);q.__decorate([E.property()],b.prototype,"formattedAttributes",void 0);q.__decorate([E.property()],b.prototype,"expressionAttributes",void 0);q.__decorate([E.property({readOnly:!0})],b.prototype,"formattedMediaInfos",null);q.__decorate([E.property()],b.prototype,"layer",void 0);q.__decorate([E.property({readOnly:!0})],b.prototype,"formattedMediaInfoCount",null);q.__decorate([E.property()],b.prototype,"mediaInfos",
void 0);q.__decorate([E.property()],b.prototype,"popupTemplate",void 0);q.__decorate([E.property()],b.prototype,"relatedInfos",void 0);q.__decorate([E.property()],b.prototype,"title",void 0);return b=q.__decorate([D.subclass("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],b)})},"esri/widgets/Feature/support/relatedFeatureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../layers/support/fieldUtils ../../../rest/support/Query ../../../rest/support/RelationshipQuery ../../../rest/support/StatisticDefinition ../../../tasks/QueryTask ./featureUtils".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d){function g(z,f){if(!f.relationships)return null;let F=null;({relationships:f}=f);f.some(S=>S.id===parseInt(z,10)?(F=S,!0):!1);return F}function k({originRelationship:z,relationships:f,layerId:F}){let S;f&&f.some(M=>{`${M.relatedTableId}`===F&&M.id===z.id&&(S=M);return!!S});return S}function B(z,f){f=f.toLowerCase();for(const F in z)if(F.toLowerCase()===f)return z[F];return null}function c(z,f,F,S){const M=new K;M.outFields=["*"];M.relationshipId="number"===typeof f.id?
f.id:parseInt(f.id,10);M.objectIds=[z.attributes[F.objectIdField]];return F.queryRelatedFeatures(M,S)}function t(z,f,F){let S=0;const M=[];for(;S<f.length;)M.push(`${z} IN (${f.slice(S,F+S)})`),S+=F;return M.join(" OR ")}function n(z,f,F,S){return u.apply(this,arguments)}function u(){u=q._asyncToGenerator(function*(z,f,F,S){var M=F.layerId.toString();const {layerInfo:P,queryTask:H,relation:L,relatedFields:A,outStatistics:C}=f;M=k({originRelationship:L,relationships:P.relationships,layerId:M});if(M.relationshipTableId&&
M.keyFieldInRelationshipTable){F=(yield c(z,M,F,S))[z.attributes[F.objectIdField]];if(!F)return null;const J=F.features.map(W=>W.attributes[P.objectIdField]);if(0<(null==C?void 0:C.length)&&P.supportsStatistics)return f=new D,f.where=t(P.objectIdField,J,1E3),f.outFields=A,f.outStatistics=C,f={features:Promise.resolve(F),statsFeatures:H.execute(f)},r.eachAlways(f)}return(M=null==M?void 0:M.keyField)?(F=w.isNumericField(p(P.fields,M)),z=B(z.attributes,L.keyField),M=F?`${M}=${z}`:`${M}='${z}'`,z=H.execute(new D({where:M,
outFields:f.relatedFields}),S),f=f.outStatistics&&0<f.outStatistics.length&&P.supportsStatistics?H.execute(new D({where:M,outFields:f.relatedFields,outStatistics:f.outStatistics}),S):null,S={features:z},f&&(S.statsFeatures=f),r.eachAlways(S)):null});return u.apply(this,arguments)}function p(z,f){if(null!=z){f=f.toLowerCase();for(const F of z)if(F&&F.name.toLowerCase()===f)return F}return null}const y=h.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),O=new Map;e.createRelatedInfo=function(z,
f){if(z=g(z,f)){var F=`${f.url}/${z.relatedTableId}`;f=new x({url:F,sourceSpatialReference:f.spatialReference});return{url:F,queryTask:f,relation:z,relatedFields:[],outStatistics:[]}}};e.getDestinationRelation=k;e.getRelatedFieldInfo=function(z){if(!d.isRelatedField(z))return null;const [f,F]=z.split("/").slice(1);return{layerId:f,fieldName:F}};e.queryLayerInfos=function({relatedInfos:z,layer:f},F){const S={};z.forEach((M,P)=>{({relation:M}=M);if(!M)throw P=new E("relation-required","A relation is required on a layer to retrieve related records."),
y.error(P),P;({relatedTableId:M}=M);if("number"!==typeof M)throw P=new E("A related table ID is required on a layer to retrieve related records."),y.error(P),P;M=`${f.url}/${M}`;const H=O.get(M),L=H?H:b(M,{query:{f:"json"},signal:F&&F.signal});H||O.set(M,L);S[P]=L});return r.eachAlways(S)};e.queryRelatedFeatures=function({graphic:z,relatedInfos:f,layer:F},S){const M={};f.forEach((P,H)=>{P.layerInfo&&(M[H]=n(z,P,F,S))});return r.eachAlways(M)};e.setRelatedFeatures=function(z,f){if(f&&z){var {features:F,
statsFeatures:S}=z;z=F&&F.value;f.relatedFeatures=z?z.features:[];z=S&&S.value;f.relatedStatsFeatures=z?z.features:[]}};e.updateRelatedInfo=function({relatedInfo:z,fieldName:f,fieldInfo:F}){z.relatedFields.push(f);F.statisticType&&(f=new I({statisticType:F.statisticType,onStatisticField:f,outStatisticFieldName:f}),z.outStatistics.push(f))};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/support/chartUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../intl ../../core/has ../../intl/locale".split(" "),
function(e,q,b,E,h,r){function w(g){if(!g)return"en-us";if(I.has(g.toLowerCase()))return g.toLowerCase();{g=g.split("-")[0].toLowerCase();let B=null;for(k of I.keys())if(k.startsWith(g)){B=k;break}var k=B}return k||"en-us"}function D(){D=b._asyncToGenerator(function*(g=r.getLocale()){g=w(g);if(x&&g===d)return x;x=(new Promise((k,B)=>e(["../../chunks/index"],k,B))).then(k=>k.index);d=g;try{const [k,B]=yield Promise.all([x,I.get(d)()]);d===g&&(k.am4core.options.defaultLocale=B.default);k.am4core.options.suppressWarnings=
!0;k.am4core.options.autoDispose=!0}catch{return d=x=null}return x});return D.apply(this,arguments)}E="#ffffff #858585 #ffbebe #ffebbe #ffebaf #ffffbe #e9ffbe #d3ffbe #beffe8 #bee8ff #bed2ff #e8beff #ffbee8 #ebebeb #707070 #ff7f7f #ffa77f #ffd37f #ffff73 #d1ff73 #a3ff73 #73ffdf #73dfff #73b2ff #df73ff #ff73df #d6d6d6 #5c5c5c #ff0000 #ff5500 #ffaa00 #ffff00 #aaff00 #55ff00 #00ffc5 #00c5ff #0070ff #c500ff #ff00c5 #c2c2c2 #474747 #e60000 #e64c00 #e69800 #e6e600 #98e600 #4ce600 #00e6a9 #00a9e6 #005ce6 #a900e6 #e600a9 #adadad #242424 #a80000 #a83800 #a87000 #a8a800 #70a800 #38a800 #00a884 #0084a8 #004da8 #8400a8 #a80084 #999999 #1a1a1a #730000 #732600 #734c00 #737300 #4c7300 #267300 #00734c #004c73 #002673 #4c0073 #73004".split(" ");
var K=[{name:"default",colors:[].concat(E.slice(30,39),E.slice(28,30).reverse())},{name:"cat-dark",colors:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8 #b7814a #3caf99 #6b6bd6 #b54779 #7f7f7f".split(" ")},{name:"tropical-bliss",colors:"#fce138 #ff9399 #fcd27e #f1983c #a553b7 #b1a9d0 #6ecffc #4c81cd #fc6f84 #fc3e5a #6af689 #48885c".split(" ")},{name:"desert-blooms",colors:"#102432 #144d59 #ffc730 #ed9310 #a64f1b #661510 #d9351a #b31515 #4a0932 #8c213f #18382e #2c6954".split(" ")},{name:"under-the-sea",
colors:"#bf9727 #607100 #00734c #704489 #01acca #024e76 #f09100 #ea311f #c6004b #7570b3 #666666 #333333".split(" ")},{name:"vibrant-rainbow",colors:"#fffb00 #f5cb11 #9fd40c #46e39c #32b8a6 #7ff2fa #ac08cc #dd33ff #eb7200 #e8a784 #bf2e2e #6c7000".split(" ")},{name:"ocean-bay",colors:"#191921 #11495c #78b1c2 #454f4b #8f8f82 #9be0c0 #87b051 #f7ec88 #ebdcc1 #dbb658 #c43541 #75351e".split(" ")},{name:"prairie-summer",colors:"#332424 #751555 #d47013 #d68989 #211173 #82aad6 #7bfaeb #6ec9a8 #6b6408 #eada40 #ccc54a #1fc235".split(" ")},
{name:"pastel-chalk",colors:"#fffd99 #f5e6a4 #c1d48c #b8e3d0 #a0b8b5 #cbf7fa #d791f2 #dfc1eb #f2b983 #e8c4b2 #bf8e8e #94995c".split(" ")},{name:"seq-yellow-orange-red-bright",colors:"#910000 #b1260b #c0370f #e05919 #ef6a1d #ff7b22 #ffa143 #ffb454 #ffda74 #ffed85".split(" ")},{name:"seq-reds-bright",colors:"#57453b #7b4238 #9f4036 #c23d33 #d7483c #ec5244 #f3696c #f9816c #ffc4ae #fff0dc".split(" ")},{name:"seq-purples-bright",colors:"#4e465c #5a4a78 #695291 #775baa #8663c3 #946bdc #aa89e8 #c1a6f3 #d7c4ff #e6e1ff".split(" ")},
{name:"seq-blues-bright",colors:"#404d54 #435c6c #48799d #4b88b6 #4d96ce #50a5e7 #74bbed #98d0f3 #bce6f9 #e6faff".split(" ")},{name:"seq-greens-bright",colors:"#39544c #386757 #368165 #359b73 #33b581 #4bc392 #64d2a2 #7ce0b3 #cbf6d9 #f4ffea".split(" ")},{name:"seq-browns-bright",colors:"#524834 #715b38 #8f6e3c #ae8140 #cc9444 #eba748 #eeb664 #f0c47f #f9e0b7 #fff8eb".split(" ")}];const I=new Map([["ar",()=>(new Promise((g,k)=>e(["../../chunks/ar"],g,k))).then(g=>g.ar)],["bg-bg",()=>(new Promise((g,
k)=>e(["../../chunks/bg_BG"],g,k))).then(g=>g.bg_BG)],["bs-ba",()=>(new Promise((g,k)=>e(["../../chunks/bs_BA"],g,k))).then(g=>g.bs_BA)],["ca-es",()=>(new Promise((g,k)=>e(["../../chunks/ca_ES"],g,k))).then(g=>g.ca_ES)],["cs-cz",()=>(new Promise((g,k)=>e(["../../chunks/cs_CZ"],g,k))).then(g=>g.cs_CZ)],["da-dk",()=>(new Promise((g,k)=>e(["../../chunks/da_DK"],g,k))).then(g=>g.da_DK)],["de-de",()=>(new Promise((g,k)=>e(["../../chunks/de_DE"],g,k))).then(g=>g.de_DE)],["de-ch",()=>(new Promise((g,k)=>
e(["../../chunks/de_CH"],g,k))).then(g=>g.de_CH)],["el-gr",()=>(new Promise((g,k)=>e(["../../chunks/el_GR"],g,k))).then(g=>g.el_GR)],["en-us",()=>(new Promise((g,k)=>e(["../../chunks/en_US"],g,k))).then(g=>g.en_US)],["en-ca",()=>(new Promise((g,k)=>e(["../../chunks/en_CA"],g,k))).then(g=>g.en_CA)],["es-es",()=>(new Promise((g,k)=>e(["../../chunks/es_ES"],g,k))).then(g=>g.es_ES)],["et-ee",()=>(new Promise((g,k)=>e(["../../chunks/et_EE"],g,k))).then(g=>g.et_EE)],["fi-fi",()=>(new Promise((g,k)=>e(["../../chunks/fi_FI"],
g,k))).then(g=>g.fi_FI)],["fr-fr",()=>(new Promise((g,k)=>e(["../../chunks/fr_FR"],g,k))).then(g=>g.fr_FR)],["he-il",()=>(new Promise((g,k)=>e(["../../chunks/he_IL"],g,k))).then(g=>g.he_IL)],["hr-hr",()=>(new Promise((g,k)=>e(["../../chunks/hr_HR"],g,k))).then(g=>g.hr_HR)],["hu-hu",()=>(new Promise((g,k)=>e(["../../chunks/hu_HU"],g,k))).then(g=>g.hu_HU)],["id-id",()=>(new Promise((g,k)=>e(["../../chunks/id_ID"],g,k))).then(g=>g.id_ID)],["it-it",()=>(new Promise((g,k)=>e(["../../chunks/it_IT"],g,k))).then(g=>
g.it_IT)],["ja-jp",()=>(new Promise((g,k)=>e(["../../chunks/ja_JP"],g,k))).then(g=>g.ja_JP)],["ko-kr",()=>(new Promise((g,k)=>e(["../../chunks/ko_KR"],g,k))).then(g=>g.ko_KR)],["lt-lt",()=>(new Promise((g,k)=>e(["../../chunks/lt_LT"],g,k))).then(g=>g.lt_LT)],["lv-lv",()=>(new Promise((g,k)=>e(["../../chunks/lv_LV"],g,k))).then(g=>g.lv_LV)],["nb-no",()=>(new Promise((g,k)=>e(["../../chunks/nb_NO"],g,k))).then(g=>g.nb_NO)],["nl-nl",()=>(new Promise((g,k)=>e(["../../chunks/nl_NL"],g,k))).then(g=>g.nl_NL)],
["pl-pl",()=>(new Promise((g,k)=>e(["../../chunks/pl_PL"],g,k))).then(g=>g.pl_PL)],["pt-br",()=>(new Promise((g,k)=>e(["../../chunks/pt_BR"],g,k))).then(g=>g.pt_BR)],["pt-pt",()=>(new Promise((g,k)=>e(["../../chunks/pt_PT"],g,k))).then(g=>g.pt_PT)],["ro-ro",()=>(new Promise((g,k)=>e(["../../chunks/ro_RO"],g,k))).then(g=>g.ro_RO)],["ru-ru",()=>(new Promise((g,k)=>e(["../../chunks/ru_RU"],g,k))).then(g=>g.ru_RU)],["sk-sk",()=>(new Promise((g,k)=>e(["../../chunks/sk_SK"],g,k))).then(g=>g.sk_SK)],["sl-sl",
()=>(new Promise((g,k)=>e(["../../chunks/sl_SL"],g,k))).then(g=>g.sl_SL)],["sr-rs",()=>(new Promise((g,k)=>e(["../../chunks/sr_RS"],g,k))).then(g=>g.sr_RS)],["sv-se",()=>(new Promise((g,k)=>e(["../../chunks/sv_SE"],g,k))).then(g=>g.sv_SE)],["th-th",()=>(new Promise((g,k)=>e(["../../chunks/th_TH"],g,k))).then(g=>g.th_TH)],["tr-tr",()=>(new Promise((g,k)=>e(["../../chunks/tr_TR"],g,k))).then(g=>g.tr_TR)],["uk-ua",()=>(new Promise((g,k)=>e(["../../chunks/uk_UA"],g,k))).then(g=>g.uk_UA)],["vi-vn",()=>
(new Promise((g,k)=>e(["../../chunks/vi_VN"],g,k))).then(g=>g.vi_VN)],["zh-cn",()=>(new Promise((g,k)=>e(["../../chunks/zh_Hans"],g,k))).then(g=>g.zh_Hans)],["zh-hk",()=>(new Promise((g,k)=>e(["../../chunks/zh_Hant"],g,k))).then(g=>g.zh_Hant)],["zh-tw",()=>(new Promise((g,k)=>e(["../../chunks/zh_Hant"],g,k))).then(g=>g.zh_Hant)]]);let x,d;q.getChartLocale=w;q.getColorSet=function(g,k="default"){const B=K.find(c=>c.name===k);return B?B.colors.map(c=>g.color(c)):null};q.loadChartsModule=function(){return D.apply(this,
arguments)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureExpression/FeatureExpressionViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../chunks/languageUtils ../../../core/Accessor ../../../core/HandleOwner ../../../core/throttle ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/content/AttachmentsContent ../../../popup/content/Content ../../../popup/content/CustomContent ../../../popup/content/ExpressionContent ../../../popup/content/FieldsContent ../../../popup/content/MediaContent ../../../popup/content/TextContent ../../../popup/ElementExpressionInfo ../FeatureContent/FeatureContentViewModel ../FeatureFields/FeatureFieldsViewModel ../FeatureMedia/FeatureMediaViewModel ../support/arcadeFeatureUtils".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g,k,B,c,t,n,u,p,y,O,z,f,F){h=function(S){function M(P){var H=S.call(this,P)||this;H._abortController=null;H.expressionInfo=null;H.graphic=null;H.contentElement=null;H.contentElementViewModel=null;H.interceptor=null;H.view=null;H._cancelQuery=()=>{const {_abortController:L}=e._assertThisInitialized(H);L&&L.abort();H._abortController=null};H._createVM=()=>{var L,A;const C=null==(L=H.contentElement)?void 0:L.type;null==(A=H.contentElementViewModel)?void 0:A.destroy();
L="fields"===C?new z:"media"===C?new f:"text"===C?new O:null;H._set("contentElementViewModel",L)};H._compile=e._asyncToGenerator(function*(){H._cancelQuery();const L=new AbortController;H._abortController=L;yield H._compileExpression();H._abortController===L&&(H._abortController=null)});H._compileThrottled=w.throttle(H._compile,1,e._assertThisInitialized(H));H._compileExpression=e._asyncToGenerator(function*(){const {expressionInfo:L,graphic:A,interceptor:C,spatialReference:J,map:W,view:ba,_abortController:X}=
e._assertThisInitialized(H);if(L&&A&&J&&W){var v=yield F.loadArcadeUtils();if(X===H._abortController)if((v=yield F.createCompiledExpression({arcadeUtils:v,expressionInfo:L,graphic:A,interceptor:C,map:W,spatialReference:J,view:ba}))&&"esri.arcade.Dictionary"===v.declaredClass){v=yield E.castAsJsonAsync(v,X.signal);var N=null==v?void 0:v.type;v="media"===N?u.fromJSON(v):"text"===N?p.fromJSON(v):"fields"===N?n.fromJSON(v):null;H._set("contentElement",v)}else H._set("contentElement",null)}else H._set("contentElement",
null)});H.handles.add([D.init(e._assertThisInitialized(H),["expressionInfo","graphic","map","spatialReference","view"],H._compileThrottled),D.init(e._assertThisInitialized(H),"contentElement",H._createVM)]);return H}e._inheritsLoose(M,S);M.prototype.destroy=function(){var P;this._cancelQuery();null==(P=this.contentElementViewModel)?void 0:P.destroy();this._set("contentElementViewModel",null);this._set("contentElement",null)};e._createClass(M,[{key:"spatialReference",get:function(){var P;return(null==
(P=this.view)?void 0:P.spatialReference)||null},set:function(P){void 0===P?this._clearOverride("spatialReference"):this._override("spatialReference",P)}},{key:"state",get:function(){const {_abortController:P,contentElement:H,contentElementViewModel:L}=this;return P?"loading":H||L?"ready":"disabled"}},{key:"map",get:function(){var P;return(null==(P=this.view)?void 0:P.map)||null},set:function(P){void 0===P?this._clearOverride("map"):this._override("map",P)}}]);return M}(r.HandleOwnerMixin(h));q.__decorate([K.property()],
h.prototype,"_abortController",void 0);q.__decorate([K.property({type:y})],h.prototype,"expressionInfo",void 0);q.__decorate([K.property({type:b})],h.prototype,"graphic",void 0);q.__decorate([K.property({readOnly:!0})],h.prototype,"contentElement",void 0);q.__decorate([K.property({readOnly:!0})],h.prototype,"contentElementViewModel",void 0);q.__decorate([K.property()],h.prototype,"interceptor",void 0);q.__decorate([K.property()],h.prototype,"spatialReference",null);q.__decorate([K.property({readOnly:!0})],
h.prototype,"state",null);q.__decorate([K.property()],h.prototype,"map",null);q.__decorate([K.property()],h.prototype,"view",void 0);return h=q.__decorate([g.subclass("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],h)})},"esri/chunks/languageUtils":function(){define("exports ../arcade/FunctionWrapper ../arcade/ImmutableArray ../arcade/ImmutablePathArray ../arcade/ImmutablePointArray ../core/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ./datetime ../core/maybe ../core/number ../geometry/support/coordsUtils ../intl/locale ../arcade/featureset/support/shared".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g,k,B,c,t,n){function u(V,ea,oa){return""===ea||null===ea||void 0===ea||ea===oa||ea===oa?V:V=V.split(ea).join(oa)}function p(V){return V instanceof xb||V instanceof q||V instanceof yb}function y(V){return z(V)||F(V)||C(V)||f(V)||null===V||V===bb||"number"===typeof V?!0:!1}function O(V,ea){return void 0===V?ea:V}function z(V){return"string"===typeof V||V instanceof String}function f(V){return"boolean"===typeof V}function F(V){return"number"===typeof V}function S(V){return"number"===
typeof V&&isFinite(V)&&Math.floor(V)===V}function M(V){return V instanceof Array}function P(V){return"esri.arcade.Feature"===(null==V?void 0:V.arcadeDeclaredClass)?!0:!1}function H(V){return!0===(V&&V.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===V.declaredRootClass)}function L(V){return!0===(V&&V.declaredRootClass&&"esri.arcade.featureSetCollection"===V.declaredRootClass)}function A(V){return V instanceof b}function C(V){return V instanceof Date}function J(V,ea,oa){if(V.length<
ea||V.length>oa)throw Error("Function called with wrong number of Parameters");}function W(V){return 0>V?-Math.round(-V):Math.round(V)}function ba(){let V=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ea){const oa=(V+16*Math.random())%16|0;V=Math.floor(V/16);return("x"===ea?oa:oa&3|8).toString(16)})}function X(V,ea){if(!1===isNaN(V)){if(void 0===ea||null===ea||""===ea)return V.toString();ea=u(ea,"\u2030","");ea=u(ea,"\u00a4","");return B.format(V,{pattern:ea})}return V.toString()}
function v(V,ea){V=g.DateTime.fromJSDate(V);return void 0===ea||null===ea||""===ea?V.toISO({suppressMilliseconds:!0}):V.toFormat(N(ea),{locale:t.getLocale(),numberingSystem:"latn"})}function N(V){V=V.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let ea="";const oa=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const Ca of V.match(oa))switch(Ca){case "D":ea+=
"d";break;case "DD":ea+="dd";break;case "DDD":ea+="o";break;case "d":ea+="c";break;case "ddd":ea+="ccc";break;case "dddd":ea+="cccc";break;case "M":ea+="L";break;case "MM":ea+="LL";break;case "MMM":ea+="LLL";break;case "MMMM":ea+="LLLL";break;case "YY":ea+="yy";break;case "Y":case "YYYY":ea+="yyyy";break;case "Q":ea+="q";break;case "Z":ea+="ZZ";break;case "ZZ":ea+="ZZZ";break;case "S":ea+="'S'";break;case "SS":ea+="'SS'";break;case "SSS":ea+="u";break;case "A":case "a":ea+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":ea+=
Ca;break;default:ea=2<=Ca.length&&"["===Ca.slice(0,1)&&"]"===Ca.slice(-1)?ea+`'${Ca.slice(1,-1)}'`:ea+`'${Ca}'`}return ea}function Q(V,ea,oa){switch(oa){case "\x3e":return V>ea;case "\x3c":return V<ea;case "\x3e\x3d":return V>=ea;case "\x3c\x3d":return V<=ea}return!1}function Z(V,ea,oa){if(null===V){if(null===ea||ea===bb)return Q(null,null,oa);if(F(ea))return Q(0,ea,oa);if(z(ea)||f(ea))return Q(0,Fa(ea),oa);if(C(ea))return Q(0,ea.getTime(),oa)}if(V===bb){if(null===ea||ea===bb)return Q(null,null,oa);
if(F(ea))return Q(0,ea,oa);if(z(ea)||f(ea))return Q(0,Fa(ea),oa);if(C(ea))return Q(0,ea.getTime(),oa)}else if(F(V)){if(F(ea))return Q(V,ea,oa);if(f(ea))return Q(V,Fa(ea),oa);if(null===ea||ea===bb)return Q(V,0,oa);if(z(ea))return Q(V,Fa(ea),oa);if(C(ea))return Q(V,ea.getTime(),oa)}else if(z(V)){if(z(ea))return Q(la(V),la(ea),oa);if(C(ea))return Q(Fa(V),ea.getTime(),oa);if(F(ea))return Q(Fa(V),ea,oa);if(null===ea||ea===bb)return Q(Fa(V),0,oa);if(f(ea))return Q(Fa(V),Fa(ea),oa)}else if(C(V)){if(C(ea))return Q(V,
ea,oa);if(null===ea||ea===bb)return Q(V.getTime(),0,oa);if(F(ea))return Q(V.getTime(),ea,oa);if(f(ea)||z(ea))return Q(V.getTime(),Fa(ea),oa)}else if(f(V)){if(f(ea))return Q(V,ea,oa);if(F(ea))return Q(Fa(V),Fa(ea),oa);if(C(ea))return Q(Fa(V),ea.getTime(),oa);if(null===ea||ea===bb)return Q(Fa(V),0,oa);if(z(ea))return Q(Fa(V),Fa(ea),oa)}return!ja(V,ea)||"\x3c\x3d"!==oa&&"\x3e\x3d"!==oa?!1:!0}function ja(V,ea){if(V===ea||null===V&&ea===bb||null===ea&&V===bb)return!0;if(C(V)&&C(ea))return V.getTime()===
ea.getTime();if(V instanceof E||V instanceof h)return V.equalityTest(ea);if(V instanceof I&&ea instanceof I){const oa=V.cache._arcadeCacheId,Ca=ea.cache._arcadeCacheId;if(void 0!==oa&&null!==oa)return oa===Ca}return void 0!==V&&void 0!==ea&&null!==V&&null!==ea&&"object"===typeof V&&"object"===typeof ea&&(V._arcadeCacheId===ea._arcadeCacheId&&void 0!==V._arcadeCacheId&&null!==V._arcadeCacheId||V._underlyingGraphic===ea._underlyingGraphic&&void 0!==V._underlyingGraphic&&null!==V._underlyingGraphic)?
!0:!1}function la(V,ea){if(z(V))return V;if(null===V)return"";if(F(V))return X(V,ea);if(f(V))return V.toString();if(C(V))return v(V,ea);if(V instanceof D)return JSON.stringify(V.toJSON());if(M(V)){ea=[];for(var oa=0;oa<V.length;oa++)ea[oa]=Ga(V[oa]);return"["+ea.join(",")+"]"}if(V instanceof b){ea=[];for(oa=0;oa<V.length();oa++)ea[oa]=Ga(V.get(oa));return"["+ea.join(",")+"]"}return null!==V&&"object"===typeof V&&void 0!==V.castToText?V.castToText():p(V)?"object, Function":""}function ua(V){const ea=
[];if(!1===M(V))return null;if(V instanceof b){for(var oa=0;oa<V.length();oa++)ea[oa]=Fa(V.get(oa));return ea}for(oa=0;oa<V.length;oa++)ea[oa]=Fa(V[oa]);return ea}function Ba(V,ea){if(z(V))return V;if(null===V)return"";if(F(V))return X(V,ea);if(f(V))return V.toString();if(C(V))return v(V,ea);if(V instanceof D)return V instanceof w?'{"xmin":'+V.xmin.toString()+',"ymin":'+V.ymin.toString()+","+(V.hasZ?'"zmin":'+V.zmin.toString()+",":"")+(V.hasM?'"mmin":'+V.mmin.toString()+",":"")+'"xmax":'+V.xmax.toString()+
',"ymax":'+V.ymax.toString()+","+(V.hasZ?'"zmax":'+V.zmax.toString()+",":"")+(V.hasM?'"mmax":'+V.mmax.toString()+",":"")+'"spatialReference":'+qa(V.spatialReference)+"}":qa(V.toJSON(),(Ca,Da)=>Ca.key===Da.key?0:"spatialReference"===Ca.key?1:"spatialReference"===Da.key||Ca.key<Da.key?-1:Ca.key>Da.key?1:0);if(M(V)){ea=[];for(var oa=0;oa<V.length;oa++)ea[oa]=Ga(V[oa]);return"["+ea.join(",")+"]"}if(V instanceof b){ea=[];for(oa=0;oa<V.length();oa++)ea[oa]=Ga(V.get(oa));return"["+ea.join(",")+"]"}return null!==
V&&"object"===typeof V&&void 0!==V.castToText?V.castToText():p(V)?"object, Function":""}function Ga(V){return null===V?"null":f(V)||F(V)||z(V)?JSON.stringify(V):V instanceof D||V instanceof b||V instanceof Array?Ba(V):V instanceof Date?JSON.stringify(v(V,"")):null!==V&&"object"===typeof V&&void 0!==V.castToText?V.castToText():"null"}function Fa(V,ea){return F(V)?V:null===V||""===V?0:C(V)?NaN:f(V)?V?1:0:M(V)||""===V||void 0===V?NaN:void 0!==ea&&z(V)?(ea=u(ea,"\u2030",""),ea=u(ea,"\u00a4",""),B.parse(V,
{pattern:ea})):V===bb?0:Number(V)}function Ma(V){return C(V)?V:z(V)&&(V=na(V))?V.toJSDate():null}function ka(V){return C(V)?g.DateTime.fromJSDate(V):z(V)?na(V):null}function na(V){const ea=/ (\d\d)/;let oa=g.DateTime.fromISO(V);return oa.isValid||ea.test(V)&&(V=V.replace(ea,"T$1"),oa=g.DateTime.fromISO(V),oa.isValid)?oa:null}function ma(V){return f(V)?V:z(V)?(V=V.toLowerCase(),"true"===V?!0:!1):F(V)?0===V||isNaN(V)?!1:!0:!1}function aa(V,ea){if(k.isNone(V))return null;if(null===V.spatialReference||
void 0===V.spatialReference)V.spatialReference=ea;return V}function da(V){if(null===V)return null;if(V instanceof I)return"NaN"===V.x||null===V.x||isNaN(V.x)?null:V;if(V instanceof x){if(0===V.rings.length)return null;for(const ea of V.rings)if(0<ea.length)return V;return null}if(V instanceof d){if(0===V.paths.length)return null;for(const ea of V.paths)if(0<ea.length)return V;return null}return V instanceof K?0===V.points.length?null:V:V instanceof w?"NaN"===V.xmin||null===V.xmin||isNaN(V.xmin)?null:
V:null}function fa(V,ea){if(!V||!V.domain)return ea;let oa=null;if("string"===V.field.type||"esriFieldTypeString"===V.field.type)ea=la(ea);else{if(null===ea||void 0===ea)return null;if(""===ea)return ea;ea=Fa(ea)}for(let Ca=0;Ca<V.domain.codedValues.length;Ca++){const Da=V.domain.codedValues[Ca];Da.code===ea&&(oa=Da)}return null===oa?ea:oa.name}function ha(V,ea){if(!V||!V.domain)return ea;let oa=null;ea=la(ea);for(let Ca=0;Ca<V.domain.codedValues.length;Ca++){const Da=V.domain.codedValues[Ca];Da.name===
ea&&(oa=Da)}return null===oa?ea:oa.code}function sa(V,ea,oa=null,Ca=null){if(!ea||!ea.fields)return null;let Da=null;for(let cb=0;cb<ea.fields.length;cb++){const Ya=ea.fields[cb];Ya.name.toLowerCase()===V.toString().toLowerCase()&&(Da=Ya)}if(null===Da)throw Error("Field not found");let Na,Sa;null===Ca&&oa&&ea.typeIdField&&(Ca=oa.hasField(ea.typeIdField)?oa.field(ea.typeIdField):null);null!==Ca&&void 0!==Ca&&ea.types.some(function(cb){return cb.id===Ca?((Na=cb.domains&&cb.domains[Da.name])&&"inherited"===
Na.type&&(Na=pa(Da.name,ea),Sa=!0),!0):!1});Sa||Na||(Na=pa(V,ea));return{field:Da,domain:Na}}function pa(V,ea){let oa;ea.fields.some(function(Ca){Ca.name.toLowerCase()===V.toLowerCase()&&(oa=Ca.domain);return!!oa});return oa}function qa(V,ea){ea||(ea={});"function"===typeof ea&&(ea={cmp:ea});const oa="boolean"===typeof ea.cycles?ea.cycles:!1,Ca=ea.cmp&&function(Na){return function(Sa){return function(cb,Ya){return Na({key:cb,value:Sa[cb]},{key:Ya,value:Sa[Ya]})}}}(ea.cmp),Da=[];return function cb(Sa){Sa&&
Sa.toJSON&&"function"===typeof Sa.toJSON&&(Sa=Sa.toJSON());if(void 0!==Sa){if("number"===typeof Sa)return isFinite(Sa)?""+Sa:"null";if("object"!==typeof Sa)return JSON.stringify(Sa);var Ya;if(Array.isArray(Sa)){var hb="[";for(Ya=0;Ya<Sa.length;Ya++)Ya&&(hb+=","),hb+=cb(Sa[Ya])||"null";return hb+"]"}if(null===Sa)return"null";if(-1!==Da.indexOf(Sa)){if(oa)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var Yb=Da.push(Sa)-1,Rb=Object.keys(Sa).sort(Ca&&
Ca(Sa));hb="";for(Ya=0;Ya<Rb.length;Ya++){const zb=Rb[Ya],rb=cb(Sa[zb]);rb&&(hb&&(hb+=","),hb+=JSON.stringify(zb)+":"+rb)}Da.splice(Yb,1);return"{"+hb+"}"}}(V)}function Aa(V){if(null===V)return null;const ea=[];for(const oa of V)oa&&oa.arcadeDeclaredClass&&"esri.arcade.Feature"===oa.arcadeDeclaredClass?ea.push(oa.geometry()):ea.push(oa);return ea}function Ha(V,ea){if(ea instanceof I)V.push(ea.hasZ?ea.hasM?[ea.x,ea.y,ea.z,ea.m]:[ea.x,ea.y,ea.z]:[ea.x,ea.y]);else throw Error("Invalid Argument");}function xa(V,
ea){if(M(V)||A(V)){let oa=!1,Ca=!1,Da=[];if(M(V)){for(const Na of V)Ha(Da,Na);0<Da.length&&(ea=V[0].spatialReference,oa=V[0].hasZ,Ca=V[0].hasM)}else if(V instanceof h)Da=V._elements,0<Da.length&&(oa=V._hasZ,Ca=V._hasM,ea=V.get(0).spatialReference);else if(A(V)){for(const Na of V.toArray())Ha(Da,Na);0<Da.length&&(ea=V.get(0).spatialReference,oa=!0===V.get(0).hasZ,Ca=!0===V.get(0).hasM)}else throw Error("Invalid Argument");if(0===Da.length)return null;!1===c.isClockwise(Da,Ca,oa)&&(Da=Da.slice(0).reverse());
return new x({rings:[Da],spatialReference:ea,hasZ:oa,hasM:Ca})}return V}function za(V,ea){if(M(V)||A(V)){let oa=!1,Ca=!1,Da=[];if(M(V)){for(const Na of V)Ha(Da,Na);0<Da.length&&(ea=V[0].spatialReference,oa=!0===V[0].hasZ,Ca=!0===V[0].hasM)}else if(V instanceof h)Da=V._elements,0<Da.length&&(oa=V._hasZ,Ca=V._hasM,ea=V.get(0).spatialReference);else if(A(V)){for(const Na of V.toArray())Ha(Da,Na);0<Da.length&&(ea=V.get(0).spatialReference,oa=!0===V.get(0).hasZ,Ca=!0===V.get(0).hasM)}return 0===Da.length?
null:new d({paths:[Da],spatialReference:ea,hasZ:oa,hasM:Ca})}return V}function wa(V,ea){if(M(V)||A(V)){let oa=!1,Ca=!1,Da=[];if(M(V)){for(const Na of V)Ha(Da,Na);0<Da.length&&(ea=V[0].spatialReference,oa=!0===V[0].hasZ,Ca=!0===V[0].hasM)}else if(V instanceof h)Da=V._elements,0<Da.length&&(oa=V._hasZ,Ca=V._hasM,ea=V.get(0).spatialReference);else if(A(V)){for(const Na of V.toArray())Ha(Da,Na);0<Da.length&&(ea=V.get(0).spatialReference,oa=!0===V.get(0).hasZ,Ca=!0===V.get(0).hasM)}return 0===Da.length?
null:new K({points:Da,spatialReference:ea,hasZ:oa,hasM:Ca})}return V}function Ia(V,ea=!1){const oa=[];if(null===V)return oa;if(!0===M(V)){for(var Ca=0;Ca<V.length;Ca++){var Da=la(V[Ca]);""===Da&&!0!==ea||oa.push(Da)}return oa}if(V instanceof b){for(Ca=0;Ca<V.length();Ca++)Da=la(V.get(Ca)),""===Da&&!0!==ea||oa.push(Da);return oa}return y(V)?(V=la(V),""===V&&!0!==ea||oa.push(V),oa):[]}function Ka(V){Ab++;return 0===Ab%100?(Ab=0,r.create(ea=>{setTimeout(()=>{ea(V)},0)})):V}function Ra(V,ea,oa){switch(oa){case "\x26":return V&
ea;case "|":return V|ea;case "^":return V^ea;case "\x3c\x3c":return V<<ea;case "\x3e\x3e":return V>>ea;case "\x3e\x3e\x3e":return V>>>ea}}function Ta(V,ea=null){if(null!=V){if(f(V)||F(V)||z(V))return V;if(V instanceof D)return!0===(null==ea?void 0:ea.keepGeometryType)?V:V.toJSON();if(V instanceof b)return V.toArray().map(oa=>Ta(oa,ea));if(V instanceof Array)return V.map(oa=>Ta(oa,ea));if(V instanceof Date)return V;if(null!==V&&"object"===typeof V&&void 0!==V.castAsJson)return V.castAsJson(ea)}return null}
function Zb(V,ea,oa,Ca,Da){return Bb(V,ea,oa).then(Na=>{Da[Ca]=Na})}function Bb(V,ea=null,oa=null){V instanceof b&&(V=V.toArray());if(null!=V){if(y(V)||V instanceof D||V instanceof Date)return r.resolve(Ta(V,oa));if(V instanceof Array){const Ca=[],Da=[];for(const Na of V)null===Na||y(Na)||Na instanceof D||Na instanceof Date?Da.push(Ta(Na,oa)):(Da.push(null),Ca.push(Zb(Na,ea,oa,Da.length-1,Da)));return 0<Ca.length?r.all(Ca).then(()=>Da):r.resolve(Da)}if(null!==V&&"object"===typeof V&&void 0!==V.castAsJsonAsync)return V.castAsJsonAsync(ea,
oa)}return r.resolve(null)}function $a(V,ea,oa){const Ca=V.fullSchema();return null!==Ca&&Ca.fields?sa(ea,Ca,V,oa):null}function ab(V){V=V.fullSchema();return null!==V&&V.fields?V.typeIdField?{subtypeField:V.typeIdField,subtypes:V.types?V.types.map(ea=>({name:ea.name,code:ea.id})):[]}:null:null}function ta(V,ea,oa,Ca){const Da=V.fullSchema();if(null===Da||!Da.fields)return null;Ca=sa(ea,Da,V,Ca);if(void 0===oa)try{oa=V.field(ea)}catch(Na){return null}return fa(Ca,oa)}function Ob(V,ea,oa,Ca){const Da=
V.fullSchema();if(null===Da||!Da.fields)return null;if(void 0===oa){try{oa=V.field(ea)}catch(Na){return null}return oa}V=sa(ea,Da,V,Ca);return ha(V,oa)}function fb(V){V=V.fullSchema();if(null===V||!V.fields)return null;const ea=[];for(const oa of V.fields)ea.push(n.esriFieldToJson(oa));return{objectIdField:V.objectIdField,globalIdField:V.globalIdField,geometryType:void 0===n.layerGeometryEsriRestConstants[V.geometryType]?"":n.layerGeometryEsriRestConstants[V.geometryType],fields:ea}}let pb=function(V){this.value=
V},l=function(V){this.value=V},xb=function(V){this.fn=V},yb=function(V,ea){this.paramCount=ea;this.fn=V};const Hb=xb,Sb=yb,bb={type:"VOID"},Pb={type:"BREAK"},Ib={type:"CONTINUE"};let Ab=0;const Cb=Object.freeze({__proto__:null,ReturnResultE:pb,ImplicitResultE:l,NativeFunctionE:xb,SizzleFunctionE:yb,NativeFunction:Hb,ImplicitResult:l,ReturnResult:pb,SizzleFunction:Sb,voidOperation:bb,breakResult:Pb,continueResult:Ib,multiReplace:u,isFunctionParameter:p,isSimpleType:y,defaultUndefined:O,isString:z,
isBoolean:f,isNumber:F,isInteger:S,isArray:M,isFeature:P,isFeatureSet:H,isFeatureSetCollection:L,isImmutableArray:A,isDate:C,pcCheck:J,absRound:W,generateUUID:ba,formatNumber:X,formatDate:v,standardiseDateFormat:N,greaterThanLessThan:Z,equalityTest:ja,toString:la,toNumberArray:ua,toStringExplicit:Ba,toNumber:Fa,toDate:Ma,toDateTime:ka,toBoolean:ma,fixSpatialReference:aa,fixNullGeometry:da,getDomainValue:fa,getDomainCode:ha,getDomain:sa,stableStringify:qa,autoCastFeatureToGeometry:Aa,autoCastArrayOfPointsToPolygon:xa,
autoCastArrayOfPointsToPolyline:za,autoCastArrayOfPointsToMultiPoint:wa,toStringArray:Ia,tick:Ka,binaryOperator:Ra,castAsJson:Ta,castAsJsonAsync:Bb,featureFullDomain:$a,featureSubtypes:ab,featureDomainValueLookup:ta,featureDomainCodeLookup:Ob,featureSchema:fb});e.ImplicitResult=l;e.ImplicitResultE=l;e.NativeFunction=Hb;e.NativeFunctionE=xb;e.ReturnResult=pb;e.ReturnResultE=pb;e.SizzleFunction=Sb;e.SizzleFunctionE=yb;e.absRound=W;e.autoCastArrayOfPointsToMultiPoint=wa;e.autoCastArrayOfPointsToPolygon=
xa;e.autoCastArrayOfPointsToPolyline=za;e.autoCastFeatureToGeometry=Aa;e.binaryOperator=Ra;e.breakResult=Pb;e.castAsJson=Ta;e.castAsJsonAsync=Bb;e.continueResult=Ib;e.defaultUndefined=O;e.equalityTest=ja;e.featureDomainCodeLookup=Ob;e.featureDomainValueLookup=ta;e.featureFullDomain=$a;e.featureSchema=fb;e.featureSubtypes=ab;e.fixNullGeometry=da;e.fixSpatialReference=aa;e.formatDate=v;e.formatNumber=X;e.generateUUID=ba;e.getDomain=sa;e.getDomainCode=ha;e.getDomainValue=fa;e.greaterThanLessThan=Z;e.isArray=
M;e.isBoolean=f;e.isDate=C;e.isFeature=P;e.isFeatureSet=H;e.isFeatureSetCollection=L;e.isFunctionParameter=p;e.isImmutableArray=A;e.isInteger=S;e.isNumber=F;e.isSimpleType=y;e.isString=z;e.lc=Cb;e.multiReplace=u;e.pcCheck=J;e.stableStringify=qa;e.standardiseDateFormat=N;e.tick=Ka;e.toBoolean=ma;e.toDate=Ma;e.toDateTime=ka;e.toNumber=Fa;e.toNumberArray=ua;e.toString=la;e.toStringArray=Ia;e.toStringExplicit=Ba;e.voidOperation=bb})},"esri/arcade/FunctionWrapper":function(){define(function(){return function(e,
q){this.context=this.definition=null;this.definition=e;this.context=q}})},"esri/arcade/ImmutableArray":function(){define(function(){return function(){function e(b=[]){this._elements=b}var q=e.prototype;q.length=function(){return this._elements.length};q.get=function(b){return this._elements[b]};q.toArray=function(){const b=[];for(let E=0;E<this.length();E++)b.push(this.get(E));return b};return e}()})},"esri/arcade/ImmutablePathArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray",
"./ImmutablePointArray"],function(e,q,b){return function(E){function h(w,D,K,I,x){w=E.call(this,w)||this;w._lazyPath=[];w._hasZ=!1;w._hasM=!1;w._hasZ=K;w._hasM=I;w._spRef=D;w._cacheId=x;return w}e._inheritsLoose(h,E);var r=h.prototype;r.get=function(w){if(void 0===this._lazyPath[w]){const D=this._elements[w];if(void 0===D)return;this._lazyPath[w]=new b(D,this._spRef,this._hasZ,this._hasM,this._cacheId,w)}return this._lazyPath[w]};r.equalityTest=function(w){return w===this?!0:null===w||!1===w instanceof
h?!1:w.getUniqueHash()===this.getUniqueHash()};r.getUniqueHash=function(){return this._cacheId.toString()};return h}(q)})},"esri/arcade/ImmutablePointArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./ImmutableArray","../geometry/Point"],function(e,q,b){return function(E){function h(w,D,K,I,x,d){w=E.call(this,w)||this;w._lazyPt=[];w._hasZ=!1;w._hasM=!1;w._spRef=D;w._hasZ=K;w._hasM=I;w._cacheId=x;w._partId=d;return w}e._inheritsLoose(h,E);var r=h.prototype;r.get=function(w){if(void 0===
this._lazyPt[w]){const D=this._elements[w];if(void 0===D)return;const K=this._hasZ,I=this._hasM;let x=null;x=K&&!I?new b(D[0],D[1],D[2],void 0,this._spRef):I&&!K?new b(D[0],D[1],void 0,D[2],this._spRef):K&&I?new b(D[0],D[1],D[2],D[3],this._spRef):new b(D[0],D[1],this._spRef);x.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+w.toString();this._lazyPt[w]=x}return this._lazyPt[w]};r.equalityTest=function(w){return w===this?!0:null===w||!1===w instanceof h?!1:w.getUniqueHash()===
this.getUniqueHash()};r.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return h}(q)})},"esri/chunks/datetime":function(){define(["exports"],function(e){function q(a){return"undefined"===typeof a}function b(a){return"number"===typeof a}function E(a){return"number"===typeof a&&0===a%1}function h(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(a){return!1}}function r(a,m,U){if(0!==a.length)return a.reduce((Y,ca)=>{ca=[m(ca),ca];return Y?U(Y[0],
ca[0])===Y[0]?Y:ca:ca},null)[1]}function w(a,m){return m.reduce((U,Y)=>{U[Y]=a[Y];return U},{})}function D(a,m){return Object.prototype.hasOwnProperty.call(a,m)}function K(a,m,U){return E(a)&&a>=m&&a<=U}function I(a,m=2){return 0>a?"-"+(""+-a).padStart(m,"0"):(""+a).padStart(m,"0")}function x(a){if(!q(a)&&null!==a&&""!==a)return parseInt(a,10)}function d(a){if(!q(a)&&null!==a&&""!==a)return parseFloat(a)}function g(a){if(!q(a)&&null!==a&&""!==a)return a=1E3*parseFloat("0."+a),Math.floor(a)}function k(a,
m,U=!1){m=10**m;return(U?Math.trunc:Math.round)(a*m)/m}function B(a){return 0===a%4&&(0!==a%100||0===a%400)}function c(a,m){var U=m-1;U=U-12*Math.floor(U/12)+1;return 2===U?B(a+(m-U)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][U-1]}function t(a){let m=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);100>a.year&&0<=a.year&&(m=new Date(m),m.setUTCFullYear(m.getUTCFullYear()-1900));return+m}function n(a){var m=a-1;m=(m+Math.floor(m/4)-Math.floor(m/100)+Math.floor(m/400))%
7;return 4===(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7||3===m?53:52}function u(a){return 99<a?a:60<a?1900+a:2E3+a}function p(a,m,U,Y=null){a=new Date(a);const ca={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};Y&&(ca.timeZone=Y);return(m=(new Intl.DateTimeFormat(U,{timeZoneName:m,...ca})).formatToParts(a).find(ia=>"timezonename"===ia.type.toLowerCase()))?m.value:null}function y(a,m){a=parseInt(a,10);Number.isNaN(a)&&(a=0);m=parseInt(m,
10)||0;m=0>a||Object.is(a,-0)?-m:m;return 60*a+m}function O(a){const m=Number(a);if("boolean"===typeof a||""===a||Number.isNaN(m))throw new lb(`Invalid unit value ${a}`);return m}function z(a,m){const U={};for(const Y in a)if(D(a,Y)){const ca=a[Y];void 0!==ca&&null!==ca&&(U[m(Y)]=O(ca))}return U}function f(a,m){const U=Math.trunc(Math.abs(a/60)),Y=Math.trunc(Math.abs(a%60));a=0<=a?"+":"-";switch(m){case "short":return`${a}${I(U,2)}:${I(Y,2)}`;case "narrow":return`${a}${U}${0<Y?`:${Y}`:""}`;case "techie":return`${a}${I(U,
2)}${I(Y,2)}`;default:throw new RangeError(`Value format ${m} is out of range for property format`);}}function F(a){return w(a,["hour","minute","second","millisecond"])}function S(a){switch(a){case "narrow":return[...Jd];case "short":return[...Jc];case "long":return[...Kd];case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function M(a){switch(a){case "narrow":return[...Ld];case "short":return[...Kc];
case "long":return[...Lc];case "numeric":return"1234567".split("");default:return null}}function P(a){switch(a){case "narrow":return[...Md];case "short":return[...Nd];case "long":return[...Od];default:return null}}function H(a,m,U="always",Y=!1){const ca={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var ia=-1===["hours","minutes","seconds"].indexOf(a);
if("auto"===U&&ia)switch(U="days"===a,m){case 1:return U?"tomorrow":`next ${ca[a][0]}`;case -1:return U?"yesterday":`last ${ca[a][0]}`;case 0:return U?"today":`this ${ca[a][0]}`}U=Object.is(m,-0)||0>m;m=Math.abs(m);ia=1===m;const va=ca[a];a=Y?ia?va[1]:va[2]||va[1]:ia?ca[a][0]:a;return U?`${m} ${a} ago`:`in ${m} ${a}`}function L(a,m){let U="";for(const Y of a)U=Y.literal?U+Y.val:U+m(Y.val);return U}function A(a,m){if(q(a)||null===a)return m;if(a instanceof Tb)return a;if("string"===typeof a){const U=
a.toLowerCase();return"local"===U||"system"===U?m:"utc"===U||"gmt"===U?ib.utcInstance:ib.parseSpecifier(U)||Db.create(a)}return b(a)?ib.instance(a):"object"===typeof a&&a.offset&&"number"===typeof a.offset?a:new Pd(a)}function C(a,m={}){const U=JSON.stringify([a,m]);let Y=Mc[U];Y||(Y=new Intl.ListFormat(a,m),Mc[U]=Y);return Y}function J(a,m={}){const U=JSON.stringify([a,m]);let Y=qc[U];Y||(Y=new Intl.DateTimeFormat(a,m),qc[U]=Y);return Y}function W(a,m={}){const U=JSON.stringify([a,m]);let Y=$b[U];
Y||(Y=new Intl.NumberFormat(a,m),$b[U]=Y);return Y}function ba(a,m={}){const {base:U,...Y}=m,ca=JSON.stringify([a,Y]);let ia=rc[ca];ia||(ia=new Intl.RelativeTimeFormat(a,m),rc[ca]=ia);return ia}function X(a){const m=[];for(let U=1;12>=U;U++){const Y=T.utc(2016,U,1);m.push(a(Y))}return m}function v(a){const m=[];for(let U=1;7>=U;U++){const Y=T.utc(2016,11,13+U);m.push(a(Y))}return m}function N(a,m,U,Y,ca){a=a.listingMode(U);return"error"===a?null:"en"===a?Y(m):ca(m)}function Q(...a){a=a.reduce((m,
U)=>m+U.source,"");return RegExp(`^${a}$`)}function Z(...a){return m=>a.reduce(([U,Y,ca],ia)=>{const [va,ya,Ea]=ia(m,ca);return[{...U,...va},Y||ya,Ea]},[{},null,1]).slice(0,2)}function ja(a,...m){if(null==a)return[null,null];for(const [U,Y]of m)if(m=U.exec(a))return Y(m);return[null,null]}function la(...a){return(m,U)=>{const Y={};let ca;for(ca=0;ca<a.length;ca++)Y[a[ca]]=x(m[U+ca]);return[Y,null,U+ca]}}function ua(a,m,U){a=a[m];return q(a)?U:x(a)}function Ba(a,m){return[{year:ua(a,m),month:ua(a,
m+1,1),day:ua(a,m+2,1)},null,m+3]}function Ga(a,m){return[{hours:ua(a,m,0),minutes:ua(a,m+1,0),seconds:ua(a,m+2,0),milliseconds:g(a[m+3])},null,m+4]}function Fa(a,m){const U=!a[m]&&!a[m+1];a=y(a[m+1],a[m+2]);return[{},U?null:ib.instance(a),m+3]}function Ma(a,m){return[{},a[m]?Db.create(a[m]):null,m+1]}function ka(a){const [m,U,Y,ca,ia,va,ya,Ea,Oa]=a,Ja="-"===m[0];a=Ea&&"-"===Ea[0];const Pa=(La,gb=!1)=>void 0!==La&&(gb||La&&Ja)?-La:La;return[{years:Pa(d(U)),months:Pa(d(Y)),weeks:Pa(d(ca)),days:Pa(d(ia)),
hours:Pa(d(va)),minutes:Pa(d(ya)),seconds:Pa(d(Ea),"-0"===Ea),milliseconds:Pa(g(Oa),a)}]}function na(a,m,U,Y,ca,ia,va){m={year:2===m.length?u(x(m)):x(m),month:Jc.indexOf(U)+1,day:x(Y),hour:x(ca),minute:x(ia)};va&&(m.second=x(va));a&&(m.weekday=3<a.length?Lc.indexOf(a)+1:Kc.indexOf(a)+1);return m}function ma(a){const [,m,U,Y,ca,ia,va,ya,Ea,Oa,Ja,Pa]=a;a=na(m,ca,Y,U,ia,va,ya);let La;La=Ea?Qd[Ea]:Oa?0:y(Ja,Pa);return[a,new ib(La)]}function aa(a){const [,m,U,Y,ca,ia,va,ya]=a;return[na(m,ca,Y,U,ia,va,
ya),ib.utcInstance]}function da(a){const [,m,U,Y,ca,ia,va,ya]=a;return[na(m,ya,U,Y,ca,ia,va),ib.utcInstance]}function fa(a,m,U=!1){a={values:U?m.values:{...a.values,...m.values||{}},loc:a.loc.clone(m.loc),conversionAccuracy:m.conversionAccuracy||a.conversionAccuracy};return new Qa(a)}function ha(a,m,U,Y,ca){a=a[ca][U];var ia=m[U]/a;ia=Math.sign(ia)!==Math.sign(Y[ca])&&0!==Y[ca]&&1>=Math.abs(ia)?0>ia?Math.floor(ia):Math.ceil(ia):Math.trunc(ia);Y[ca]+=ia;m[U]-=ia*a}function sa(a,m){Rd.reduce((U,Y)=>
{if(q(m[Y]))return U;U&&ha(a,m,U,m,Y);return Y},null)}function pa(a,m){a=m.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()-a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf();return Math.floor(Qa.fromMillis(a).as("days"))}function qa(a,m,U){var Y=[["years",(ya,Ea)=>Ea.year-ya.year],["quarters",(ya,Ea)=>Ea.quarter-ya.quarter],["months",(ya,Ea)=>Ea.month-ya.month+12*(Ea.year-ya.year)],["weeks",(ya,Ea)=>{ya=pa(ya,Ea);return(ya-ya%7)/7}],["days",pa]];const ca={};let ia,va;for(const [ya,Ea]of Y)0<=
U.indexOf(ya)&&(ia=ya,Y=Ea(a,m),va=a.plus({[ya]:Y}),va>m?(a=a.plus({[ya]:Y-1}),--Y):a=va,ca[ya]=Y);return[a,ca,va,ia]}function Aa(a,m,U,Y){let [ca,ia,va,ya]=qa(a,m,U);a=m-ca;U=U.filter(Ea=>0<=["hours","minutes","seconds","milliseconds"].indexOf(Ea));0===U.length&&(va<m&&(va=ca.plus({[ya]:1})),va!==ca&&(ia[ya]=(ia[ya]||0)+a/(va-ca)));m=Qa.fromObject(ia,Y);return 0<U.length?Qa.fromMillis(a,Y).shiftTo(...U).plus(m):m}function Ha({numberingSystem:a},m=""){return new RegExp(`${sc[a||"latn"]}${m}`)}function xa(a,
m=U=>U){return{regex:a,deser:([U])=>{{let Y=parseInt(U,10);if(isNaN(Y)){Y="";for(let ca=0;ca<U.length;ca++){const ia=U.charCodeAt(ca);if(-1!==U[ca].search(sc.hanidec))Y+=Sd.indexOf(U[ca]);else for(const va in Nc){const [ya,Ea]=Nc[va];ia>=ya&&ia<=Ea&&(Y+=ia-ya)}}U=parseInt(Y,10)}else U=Y}return m(U)}}}function za(a){return a.replace(/\./g,"\\.?").replace(ac,Oc)}function wa(a,m){return null===a?null:{regex:RegExp(a.map(za).join("|")),deser:([U])=>a.findIndex(Y=>U.replace(/\./g,"").replace(ac," ").toLowerCase()===
Y.replace(/\./g,"").replace(ac," ").toLowerCase())+m}}function Ia(a,m){return{regex:a,deser:([,U,Y])=>y(U,Y),groups:m}}function Ka(a){return{regex:a,deser:([m])=>m}}function Ra(a,m){const U=Ha(m),Y=Ha(m,"{2}"),ca=Ha(m,"{3}"),ia=Ha(m,"{4}"),va=Ha(m,"{6}"),ya=Ha(m,"{1,2}"),Ea=Ha(m,"{1,3}"),Oa=Ha(m,"{1,6}"),Ja=Ha(m,"{1,9}"),Pa=Ha(m,"{2,4}"),La=Ha(m,"{4,6}"),gb=tb=>({regex:RegExp(tb.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:([Td])=>Td,literal:!0}),ub=(tb=>{if(a.literal)return gb(tb);
switch(tb.val){case "G":return wa(m.eras("short",!1),0);case "GG":return wa(m.eras("long",!1),0);case "y":return xa(Oa);case "yy":return xa(Pa,u);case "yyyy":return xa(ia);case "yyyyy":return xa(La);case "yyyyyy":return xa(va);case "M":return xa(ya);case "MM":return xa(Y);case "MMM":return wa(m.months("short",!0,!1),1);case "MMMM":return wa(m.months("long",!0,!1),1);case "L":return xa(ya);case "LL":return xa(Y);case "LLL":return wa(m.months("short",!1,!1),1);case "LLLL":return wa(m.months("long",
!1,!1),1);case "d":return xa(ya);case "dd":return xa(Y);case "o":return xa(Ea);case "ooo":return xa(ca);case "HH":return xa(Y);case "H":return xa(ya);case "hh":return xa(Y);case "h":return xa(ya);case "mm":return xa(Y);case "m":return xa(ya);case "q":return xa(ya);case "qq":return xa(Y);case "s":return xa(ya);case "ss":return xa(Y);case "S":return xa(Ea);case "SSS":return xa(ca);case "u":return Ka(Ja);case "uu":return Ka(ya);case "uuu":return xa(U);case "a":return wa(m.meridiems(),0);case "kkkk":return xa(ia);
case "kk":return xa(Pa,u);case "W":return xa(ya);case "WW":return xa(Y);case "E":case "c":return xa(U);case "EEE":return wa(m.weekdays("short",!1,!1),1);case "EEEE":return wa(m.weekdays("long",!1,!1),1);case "ccc":return wa(m.weekdays("short",!0,!1),1);case "cccc":return wa(m.weekdays("long",!0,!1),1);case "Z":case "ZZ":return Ia(new RegExp(`([+-]${ya.source})(?::(${Y.source}))?`),2);case "ZZZ":return Ia(new RegExp(`([+-]${ya.source})(${Y.source})?`),2);case "z":return Ka(/[a-z_+-/]{1,256}?/i);default:return gb(tb)}})(a)||
{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};ub.token=a;return ub}function Ta(a){return[`^${a.map(m=>m.regex).reduce((m,U)=>`${m}(${U.source})`,"")}$`,a]}function Zb(a,m,U){if(a=a.match(m)){m={};let Y=1;for(const ca in U)if(D(U,ca)){const ia=U[ca],va=ia.groups?ia.groups+1:1;!ia.literal&&ia.token&&(m[ia.token.val[0]]=ia.deser(a.slice(Y,Y+va)));Y+=va}return[a,m]}return[a,{}]}function Bb(a){const m=ca=>{switch(ca){case "S":return"millisecond";case "s":return"second";case "m":return"minute";
case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}};let U=null,Y;q(a.z)||(U=Db.create(a.z));q(a.Z)||(U||(U=new ib(a.Z)),Y=a.Z);q(a.q)||(a.M=3*(a.q-1)+1);q(a.h)||(12>a.h&&1===a.a?a.h+=12:12===a.h&&0===a.a&&(a.h=0));0===a.G&&a.y&&(a.y=-a.y);q(a.u)||(a.S=g(a.u));return[Object.keys(a).reduce((ca,
ia)=>{const va=m(ia);va&&(ca[va]=a[ia]);return ca},{}),U,Y]}function $a(){bc||(bc=T.fromMillis(1555555555555));return bc}function ab(a,m){if(a.literal)return a;const U=jb.macroTokenToFormatOpts(a.val);if(!U)return a;m=jb.create(m,U).formatDateTimeParts($a()).map(Y=>{{const {type:ia,value:va}=Y;if("literal"===ia)Y={literal:!0,val:va};else{Y=U[ia];var ca=Pc[ia];"object"===typeof ca&&(ca=ca[Y]);Y=ca?{literal:!1,val:ca}:void 0}}return Y});return m.includes(void 0)?a:m}function ta(a,m){return Array.prototype.concat(...a.map(U=>
ab(U,m)))}function Ob(a,m,U){U=ta(jb.parseFormat(U),a);var Y=U.map(ia=>Ra(ia,a));const ca=Y.find(ia=>ia.invalidReason);if(ca)return{input:m,tokens:U,invalidReason:ca.invalidReason};{const [ia,va]=Ta(Y);Y=RegExp(ia,"i");const [ya,Ea]=Zb(m,Y,va),[Oa,Ja,Pa]=Ea?Bb(Ea):[null,null,void 0];if(D(Ea,"a")&&D(Ea,"H"))throw new Ub("Can't include meridiem when specifying 24-hour format");return{input:m,tokens:U,regex:Y,rawMatches:ya,matches:Ea,result:Oa,zone:Ja,specificOffset:Pa}}}function fb(a,m){return new qb("unit out of range",
`you specified ${m} (of type ${typeof m}) as a ${a}, which is invalid`)}function pb(a,m,U){a=(new Date(Date.UTC(a,m-1,U))).getUTCDay();return 0===a?7:a}function l(a,m){a=B(a)?G:cc;const U=a.findIndex(Y=>Y<m);return{month:U+1,day:m-a[U]}}function xb(a){const {year:m,month:U,day:Y}=a;var ca=Y+(B(m)?G:cc)[U-1];const ia=pb(m,U,Y);ca=Math.floor((ca-ia+10)/7);let va;1>ca?(va=m-1,ca=n(va)):ca>n(m)?(va=m+1,ca=1):va=m;return{weekYear:va,weekNumber:ca,weekday:ia,...F(a)}}function yb(a){const {weekYear:m,weekNumber:U,
weekday:Y}=a;var ca=pb(m,1,4),ia=B(m)?366:365;ca=7*U+Y-ca-3;1>ca?(ia=m-1,ca+=B(ia)?366:365):ca>ia?(ia=m+1,ca-=B(m)?366:365):ia=m;const {month:va,day:ya}=l(ia,ca);return{year:ia,month:va,day:ya,...F(a)}}function Hb(a){const {year:m,month:U,day:Y}=a;var ca=Y+(B(m)?G:cc)[U-1];return{year:m,ordinal:ca,...F(a)}}function Sb(a){const {year:m,ordinal:U}=a,{month:Y,day:ca}=l(m,U);return{year:m,month:Y,day:ca,...F(a)}}function bb(a){const m=E(a.year),U=K(a.month,1,12),Y=K(a.day,1,c(a.year,a.month));return m?
U?Y?!1:fb("day",a.day):fb("month",a.month):fb("year",a.year)}function Pb(a){const {hour:m,minute:U,second:Y,millisecond:ca}=a;a=K(m,0,23)||24===m&&0===U&&0===Y&&0===ca;const ia=K(U,0,59),va=K(Y,0,59),ya=K(ca,0,999);return a?ia?va?ya?!1:fb("millisecond",ca):fb("second",Y):fb("minute",U):fb("hour",m)}function Ib(a){return new qb("unsupported zone",`the zone "${a.name}" is not supported`)}function Ab(a){null===a.weekData&&(a.weekData=xb(a.c));return a.weekData}function Cb(a,m){a={ts:a.ts,zone:a.zone,
c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new T({...a,...m,old:a})}function V(a,m,U){let Y=a-6E4*m;const ca=U.offset(Y);if(m===ca)return[Y,m];Y-=6E4*(ca-m);m=U.offset(Y);return ca===m?[Y,ca]:[a-6E4*Math.min(ca,m),Math.max(ca,m)]}function ea(a,m){a=new Date(a+6E4*m);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function oa(a,m,U){return V(t(a),m,U)}function Ca(a,
m){const U=a.o;var Y=a.c.year+Math.trunc(m.years);const ca=a.c.month+Math.trunc(m.months)+3*Math.trunc(m.quarters);Y={...a.c,year:Y,month:ca,day:Math.min(a.c.day,c(Y,ca))+Math.trunc(m.days)+7*Math.trunc(m.weeks)};m=Qa.fromObject({years:m.years-Math.trunc(m.years),quarters:m.quarters-Math.trunc(m.quarters),months:m.months-Math.trunc(m.months),weeks:m.weeks-Math.trunc(m.weeks),days:m.days-Math.trunc(m.days),hours:m.hours,minutes:m.minutes,seconds:m.seconds,milliseconds:m.milliseconds}).as("milliseconds");
Y=t(Y);let [ia,va]=V(Y,U,a.zone);0!==m&&(ia+=m,va=a.zone.offset(ia));return{ts:ia,o:va}}function Da(a,m,U,Y,ca,ia){const {setZone:va,zone:ya}=U;return a&&0!==Object.keys(a).length?(a=T.fromObject(a,{...U,zone:m||ya,specificOffset:ia}),va?a:a.setZone(ya)):T.invalid(new qb("unparsable",`the input "${ca}" can't be parsed as ${Y}`))}function Na(a,m,U=!0){return a.isValid?jb.create(Wa.create("en-US"),{allowZ:U,forceSimple:!0}).formatDateTimeFromString(a,m):null}function Sa(a,m){const U=9999<a.c.year||
0>a.c.year;let Y="";U&&0<=a.c.year&&(Y+="+");Y+=I(a.c.year,U?6:4);m?(Y=Y+"-"+I(a.c.month),Y=Y+"-"+I(a.c.day)):(Y+=I(a.c.month),Y+=I(a.c.day));return Y}function cb(a,m,U,Y,ca){let ia=I(a.c.hour);m?(ia=ia+":"+I(a.c.minute),0===a.c.second&&U||(ia+=":")):ia+=I(a.c.minute);0===a.c.second&&U||(ia+=I(a.c.second),0===a.c.millisecond&&Y||(ia=ia+"."+I(a.c.millisecond,3)));ca&&(a.isOffsetFixed&&0===a.offset?ia+="Z":0>a.o?(ia=ia+"-"+I(Math.trunc(-a.o/60)),ia=ia+":"+I(Math.trunc(-a.o%60))):(ia=ia+"+"+I(Math.trunc(a.o/
60)),ia=ia+":"+I(Math.trunc(a.o%60))));return ia}function Ya(a){const m={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];
if(!m)throw new Qc(a);return m}function hb(a,m){const U=A(m.zone,Za.defaultZone);m=Wa.fromObject(m);const Y=Za.now();var ca;if(q(a.year))a=Y;else{for(const ia of ra)q(a[ia])&&(a[ia]=Vb[ia]);if(ca=bb(a)||Pb(a))return T.invalid(ca);ca=U.offset(Y);[a,ca]=oa(a,ca,U)}return new T({ts:a,zone:U,loc:m,o:ca})}function Yb(a,m,U){const Y=q(U.round)?!0:U.round,ca=(va,ya)=>{va=k(va,Y||U.calendary?0:2,!0);return m.loc.clone(U).relFormatter(U).format(va,ya)},ia=va=>U.calendary?m.hasSame(a,va)?0:m.startOf(va).diff(a.startOf(va),
va).get(va):m.diff(a,va).get(va);if(U.unit)return ca(ia(U.unit),U.unit);for(const va of U.units){const ya=ia(va);if(1<=Math.abs(ya))return ca(ya,va)}return ca(a>m?-0:0,U.units[U.units.length-1])}function Rb(a){let m={};0<a.length&&"object"===typeof a[a.length-1]?(m=a[a.length-1],a=Array.from(a).slice(0,a.length-1)):a=Array.from(a);return[m,a]}function zb(a){if(T.isDateTime(a))return a;if(a&&a.valueOf&&b(a.valueOf()))return T.fromJSDate(a);if(a&&"object"===typeof a)return T.fromObject(a);throw new lb(`Unknown datetime argument: ${a}, of type ${typeof a}`);
}class rb extends Error{}class Ud extends rb{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}class Vd extends rb{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}class Wd extends rb{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}class Ub extends rb{}class Qc extends rb{constructor(a){super(`Invalid unit ${a}`)}}class lb extends rb{}class Eb extends rb{constructor(){super("Zone is an abstract class")}}const tc={year:"numeric",month:"numeric",day:"numeric"},Rc={year:"numeric",
month:"short",day:"numeric"},Xd={year:"numeric",month:"short",day:"numeric",weekday:"short"},Sc={year:"numeric",month:"long",day:"numeric"},Tc={year:"numeric",month:"long",day:"numeric",weekday:"long"},Uc={hour:"numeric",minute:"numeric"},Vc={hour:"numeric",minute:"numeric",second:"numeric"},Wc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},Xc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},Yc={hour:"numeric",minute:"numeric",hourCycle:"h23"},Zc={hour:"numeric",
minute:"numeric",second:"numeric",hourCycle:"h23"},$c={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},ad={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},bd={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},cd={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},dd={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},ed={year:"numeric",
month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},Yd={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},fd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},gd={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},hd={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},
id={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},Kd="January February March April May June July August September October November December".split(" "),Jc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Jd="JFMAMJJASOND".split(""),Lc="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Kc="Mon Tue Wed Thu Fri Sat Sun".split(" "),Ld="MTWTFSS".split(""),uc=["AM","PM"],Od=["Before Christ","Anno Domini"],
Nd=["BC","AD"],Md=["B","A"],jd={D:tc,DD:Rc,DDD:Sc,DDDD:Tc,t:Uc,tt:Vc,ttt:Wc,tttt:Xc,T:Yc,TT:Zc,TTT:$c,TTTT:ad,f:bd,ff:dd,fff:fd,ffff:hd,F:cd,FF:ed,FFF:gd,FFFF:id};class jb{static create(a,m={}){return new jb(a,m)}static parseFormat(a){let m=null,U="",Y=!1;const ca=[];for(let ia=0;ia<a.length;ia++){const va=a.charAt(ia);"'"===va?(0<U.length&&ca.push({literal:Y,val:U}),m=null,U="",Y=!Y):Y?U+=va:va===m?U+=va:(0<U.length&&ca.push({literal:!1,val:U}),m=U=va)}0<U.length&&ca.push({literal:Y,val:U});return ca}static macroTokenToFormatOpts(a){return jd[a]}constructor(a,
m){this.opts=m;this.loc=a;this.systemLoc=null}formatWithSystemDefault(a,m){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(a,{...this.opts,...m}).format()}formatDateTime(a,m={}){return this.loc.dtFormatter(a,{...this.opts,...m}).format()}formatDateTimeParts(a,m={}){return this.loc.dtFormatter(a,{...this.opts,...m}).formatToParts()}resolvedOptions(a,m={}){return this.loc.dtFormatter(a,{...this.opts,...m}).resolvedOptions()}num(a,m=0){if(this.opts.forceSimple)return I(a,
m);const U={...this.opts};0<m&&(U.padTo=m);return this.loc.numberFormatter(U).format(a)}formatDateTimeFromString(a,m){const U="en"===this.loc.listingMode(),Y=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,ca=(Ja,Pa)=>this.loc.extract(a,Ja,Pa),ia=Ja=>a.isOffsetFixed&&0===a.offset&&Ja.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,Ja.format):"",va=(Ja,Pa)=>U?S(Ja)[a.month-1]:ca(Pa?{month:Ja}:{month:Ja,day:"numeric"},"month"),ya=(Ja,Pa)=>U?M(Ja)[a.weekday-1]:ca(Pa?{weekday:Ja}:{weekday:Ja,
month:"long",day:"numeric"},"weekday"),Ea=Ja=>{const Pa=jb.macroTokenToFormatOpts(Ja);return Pa?this.formatWithSystemDefault(a,Pa):Ja},Oa=Ja=>U?P(Ja)[0>a.year?0:1]:ca({era:Ja},"era");return L(jb.parseFormat(m),Ja=>{switch(Ja){case "S":return this.num(a.millisecond);case "u":case "SSS":return this.num(a.millisecond,3);case "s":return this.num(a.second);case "ss":return this.num(a.second,2);case "uu":return this.num(Math.floor(a.millisecond/10),2);case "uuu":return this.num(Math.floor(a.millisecond/
100));case "m":return this.num(a.minute);case "mm":return this.num(a.minute,2);case "h":return this.num(0===a.hour%12?12:a.hour%12);case "hh":return this.num(0===a.hour%12?12:a.hour%12,2);case "H":return this.num(a.hour);case "HH":return this.num(a.hour,2);case "Z":return ia({format:"narrow",allowZ:this.opts.allowZ});case "ZZ":return ia({format:"short",allowZ:this.opts.allowZ});case "ZZZ":return ia({format:"techie",allowZ:this.opts.allowZ});case "ZZZZ":return a.zone.offsetName(a.ts,{format:"short",
locale:this.loc.locale});case "ZZZZZ":return a.zone.offsetName(a.ts,{format:"long",locale:this.loc.locale});case "z":return a.zoneName;case "a":return U?uc[12>a.hour?0:1]:ca({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return Y?ca({day:"numeric"},"day"):this.num(a.day);case "dd":return Y?ca({day:"2-digit"},"day"):this.num(a.day,2);case "c":return this.num(a.weekday);case "ccc":return ya("short",!0);case "cccc":return ya("long",!0);case "ccccc":return ya("narrow",!0);case "E":return this.num(a.weekday);
case "EEE":return ya("short",!1);case "EEEE":return ya("long",!1);case "EEEEE":return ya("narrow",!1);case "L":return Y?ca({month:"numeric",day:"numeric"},"month"):this.num(a.month);case "LL":return Y?ca({month:"2-digit",day:"numeric"},"month"):this.num(a.month,2);case "LLL":return va("short",!0);case "LLLL":return va("long",!0);case "LLLLL":return va("narrow",!0);case "M":return Y?ca({month:"numeric"},"month"):this.num(a.month);case "MM":return Y?ca({month:"2-digit"},"month"):this.num(a.month,2);
case "MMM":return va("short",!1);case "MMMM":return va("long",!1);case "MMMMM":return va("narrow",!1);case "y":return Y?ca({year:"numeric"},"year"):this.num(a.year);case "yy":return Y?ca({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),2);case "yyyy":return Y?ca({year:"numeric"},"year"):this.num(a.year,4);case "yyyyyy":return Y?ca({year:"numeric"},"year"):this.num(a.year,6);case "G":return Oa("short");case "GG":return Oa("long");case "GGGGG":return Oa("narrow");case "kk":return this.num(a.weekYear.toString().slice(-2),
2);case "kkkk":return this.num(a.weekYear,4);case "W":return this.num(a.weekNumber);case "WW":return this.num(a.weekNumber,2);case "o":return this.num(a.ordinal);case "ooo":return this.num(a.ordinal,3);case "q":return this.num(a.quarter);case "qq":return this.num(a.quarter,2);case "X":return this.num(Math.floor(a.ts/1E3));case "x":return this.num(a.ts);default:return Ea(Ja)}})}formatDurationFromString(a,m){const U=ca=>{switch(ca[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";
case "h":return"hour";case "d":return"day";case "M":return"month";case "y":return"year";default:return null}};m=jb.parseFormat(m);const Y=m.reduce((ca,{literal:ia,val:va})=>ia?ca:ca.concat(va),[]);a=a.shiftTo(...Y.map(U).filter(ca=>ca));return L(m,(ca=>ia=>{const va=U(ia);return va?this.num(ca.get(va),ia.length):ia})(a))}}class qb{constructor(a,m){this.reason=a;this.explanation=m}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}class Tb{get type(){throw new Eb;
}get name(){throw new Eb;}get isUniversal(){throw new Eb;}offsetName(a,m){throw new Eb;}formatOffset(a,m){throw new Eb;}offset(a){throw new Eb;}equals(a){throw new Eb;}get isValid(){throw new Eb;}}let vc=null;class wc extends Tb{static get instance(){null===vc&&(vc=new wc);return vc}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,{format:m,locale:U}){return p(a,m,U)}formatOffset(a,m){return f(this.offset(a),m)}offset(a){return-(new Date(a)).getTimezoneOffset()}equals(a){return"system"===
a.type}get isValid(){return!0}}let dc={};const kd={year:0,month:1,day:2,hour:3,minute:4,second:5};let ec={};class Db extends Tb{static create(a){ec[a]||(ec[a]=new Db(a));return ec[a]}static resetCache(){ec={};dc={}}static isValidSpecifier(a){return this.isValidZone(a)}static isValidZone(a){if(!a)return!1;try{return(new Intl.DateTimeFormat("en-US",{timeZone:a})).format(),!0}catch(m){return!1}}constructor(a){super();this.zoneName=a;this.valid=Db.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,
{format:m,locale:U}){return p(a,m,U,this.name)}formatOffset(a,m){return f(this.offset(a),m)}offset(a){a=new Date(a);if(isNaN(a))return NaN;var m=this.name;dc[m]||(dc[m]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:m,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}));m=dc[m];if(m.formatToParts){m=m.formatToParts(a);var U=[];for(let Oa=0;Oa<m.length;Oa++){const {type:Ja,value:Pa}=m[Oa],La=kd[Ja];q(La)||(U[La]=parseInt(Pa,10))}m=U}else{{m=m.format(a).replace(/\u200E/g,
"");m=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(m);const [,Oa,Ja,Pa,La,gb,ub]=m;m=[Pa,Oa,Ja,La,gb,ub]}}const [Y,ca,ia,va,ya,Ea]=m;m=t({year:Y,month:ca,day:ia,hour:24===va?0:va,minute:ya,second:Ea,millisecond:0});a=+a;U=a%1E3;return(m-(a-(0<=U?U:1E3+U)))/6E4}equals(a){return"iana"===a.type&&a.name===this.name}get isValid(){return this.valid}}let xc=null;class ib extends Tb{static get utcInstance(){null===xc&&(xc=new ib(0));return xc}static instance(a){return 0===a?ib.utcInstance:new ib(a)}static parseSpecifier(a){return a&&
(a=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new ib(y(a[1],a[2])):null}constructor(a){super();this.fixed=a}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${f(this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,m){return f(this.fixed,m)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===a.type&&a.fixed===this.fixed}get isValid(){return!0}}class Pd extends Tb{constructor(a){super();this.zoneName=a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}
let ld=()=>Date.now(),fc="system",gc=null,md=null,nd=null,od;class Za{static get now(){return ld}static set now(a){ld=a}static set defaultZone(a){fc=a}static get defaultZone(){return A(fc,wc.instance)}static get defaultLocale(){return gc}static set defaultLocale(a){gc=a}static get defaultNumberingSystem(){return md}static set defaultNumberingSystem(a){md=a}static get defaultOutputCalendar(){return nd}static set defaultOutputCalendar(a){nd=a}static get throwOnInvalid(){return od}static set throwOnInvalid(a){od=
a}static resetCaches(){Wa.resetCache();Db.resetCache()}}let Mc={},qc={},$b={},rc={},Wb=null;class pd{constructor(a,m,U){this.padTo=U.padTo||0;this.floor=U.floor||!1;const {padTo:Y,floor:ca,...ia}=U;if(!m||0<Object.keys(ia).length)m={useGrouping:!1,...U},0<U.padTo&&(m.minimumIntegerDigits=U.padTo),this.inf=W(a,m)}format(a){if(this.inf)return this.inf.format(this.floor?Math.floor(a):a);a=this.floor?Math.floor(a):k(a,3);return I(a,this.padTo)}}class Zd{constructor(a,m,U){this.opts=U;if(a.zone.isUniversal){var Y=
a.offset/60*-1;Y=0<=Y?`Etc/GMT+${Y}`:`Etc/GMT${Y}`;0!==a.offset&&Db.create(Y).valid?this.dt=a:(Y="UTC",this.dt=U.timeZoneName?a:0===a.offset?a:T.fromMillis(a.ts+6E4*a.offset))}else"system"===a.zone.type?this.dt=a:(this.dt=a,Y=a.zone.name);a={...this.opts};Y&&(a.timeZone=Y);this.dtf=J(m,a)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class $d{constructor(a,m,U){this.opts={style:"long",
...U};!m&&h()&&(this.rtf=ba(a,U))}format(a,m){return this.rtf?this.rtf.format(a,m):H(m,a,this.opts.numeric,"long"!==this.opts.style)}formatToParts(a,m){return this.rtf?this.rtf.formatToParts(a,m):[]}}class Wa{static fromOpts(a){return Wa.create(a.locale,a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,m,U,Y=!1){a=a||Za.defaultLocale;var ca;(ca=a)||(Y?Y="en-US":(Wb||(Wb=(new Intl.DateTimeFormat).resolvedOptions().locale),Y=Wb),ca=Y);return new Wa(ca,m||Za.defaultNumberingSystem,U||
Za.defaultOutputCalendar,a)}static resetCache(){Wb=null;qc={};$b={};rc={}}static fromObject({locale:a,numberingSystem:m,outputCalendar:U}={}){return Wa.create(a,m,U)}constructor(a,m,U,Y){var ca=a.indexOf("-u-");if(-1===ca)a=[a];else{let Ea;ca=a.substring(0,ca);try{Ea=J(a).resolvedOptions()}catch(Pa){Ea=J(ca).resolvedOptions()}const {numberingSystem:Oa,calendar:Ja}=Ea;a=[ca,Oa,Ja]}const [ia,va,ya]=a;this.locale=ia;this.numberingSystem=m||va||null;this.outputCalendar=U||ya||null;m=this.locale;U=this.numberingSystem;
if((a=this.outputCalendar)||U)m+="-u",a&&(m+=`-ca-${a}`),U&&(m+=`-nu-${U}`);this.intl=m;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=Y;this.fastNumbersCached=null}get fastNumbers(){if(null==this.fastNumbersCached){var a=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;
this.fastNumbersCached=a}return this.fastNumbersCached}listingMode(){const a=this.isEnglish(),m=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return a&&m?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?Wa.create(a.locale||this.specifiedLocale,a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a=
{}){return this.clone({...a,defaultToEN:!1})}months(a,m=!1,U=!0){return N(this,a,U,S,()=>{const Y=m?{month:a,day:"numeric"}:{month:a},ca=m?"format":"standalone";this.monthsCache[ca][a]||(this.monthsCache[ca][a]=X(ia=>this.extract(ia,Y,"month")));return this.monthsCache[ca][a]})}weekdays(a,m=!1,U=!0){return N(this,a,U,M,()=>{const Y=m?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},ca=m?"format":"standalone";this.weekdaysCache[ca][a]||(this.weekdaysCache[ca][a]=v(ia=>this.extract(ia,
Y,"weekday")));return this.weekdaysCache[ca][a]})}meridiems(a=!0){return N(this,void 0,a,()=>uc,()=>{if(!this.meridiemCache){const m={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[T.utc(2016,11,13,9),T.utc(2016,11,13,19)].map(U=>this.extract(U,m,"dayperiod"))}return this.meridiemCache})}eras(a,m=!0){return N(this,a,m,P,()=>{const U={era:a};this.eraCache[a]||(this.eraCache[a]=[T.utc(-40,1,1),T.utc(2017,1,1)].map(Y=>this.extract(Y,U,"era")));return this.eraCache[a]})}extract(a,m,U){return(a=this.dtFormatter(a,
m).formatToParts().find(Y=>Y.type.toLowerCase()===U))?a.value:null}numberFormatter(a={}){return new pd(this.intl,a.forceSimple||this.fastNumbers,a)}dtFormatter(a,m={}){return new Zd(a,this.intl,m)}relFormatter(a={}){return new $d(this.intl,this.isEnglish(),a)}listFormatter(a={}){return C(this.intl,a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===a.locale&&this.numberingSystem===
a.numberingSystem&&this.outputCalendar===a.outputCalendar}}const qd=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,yc=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,rd=RegExp(`${yc.source}${qd.source}?`),zc=RegExp(`(?:T${rd.source})?`),ae=la("weekYear","weekNumber","weekDay"),be=la("year","ordinal"),sd=RegExp(`${yc.source} ?(?:${qd.source}|(${/[A-Za-z_+-]{1,256}(:?\/[A-Za-z0-9_+-]{1,256}(\/[A-Za-z0-9_+-]{1,256})?)?/.source}))?`),ce=RegExp(`(?: ${sd.source})?`),de=RegExp(`^T?${yc.source}$`),ee=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/,
Qd={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},fe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,ge=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,he=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
ie=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,je=Q(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,zc),ke=Q(/(\d{4})-?W(\d\d)(?:-?(\d))?/,zc),le=Q(/(\d{4})-?(\d{3})/,zc),me=Q(rd),ne=Z(Ba,Ga,Fa),oe=Z(ae,Ga,Fa),pe=Z(be,Ga,Fa),qe=Z(Ga,Fa),re=Z(Ga),se=Q(/(\d{4})-(\d\d)-(\d\d)/,ce),te=Q(sd),ue=Z(Ba,Ga,Fa,Ma),ve=Z(Ga,Fa,Ma),td={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,
seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},we={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,milliseconds:2592E6},...td},xe={years:{quarters:4,months:12,weeks:52.1775,
days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3},...td},Jb="years quarters months weeks days hours minutes seconds milliseconds".split(" "),Rd=Jb.slice(0).reverse();class Qa{constructor(a){const m="longterm"===a.conversionAccuracy||
!1;this.values=a.values;this.loc=a.loc||Wa.create();this.conversionAccuracy=m?"longterm":"casual";this.invalid=a.invalid||null;this.matrix=m?xe:we;this.isLuxonDuration=!0}static fromMillis(a,m){return Qa.fromObject({milliseconds:a},m)}static fromObject(a,m={}){if(null==a||"object"!==typeof a)throw new lb(`Duration.fromObject: argument expected to be an object, got ${null===a?"null":typeof a}`);return new Qa({values:z(a,Qa.normalizeUnit),loc:Wa.fromObject(m),conversionAccuracy:m.conversionAccuracy})}static fromDurationLike(a){if(b(a))return Qa.fromMillis(a);
if(Qa.isDuration(a))return a;if("object"===typeof a)return Qa.fromObject(a);throw new lb(`Unknown duration argument ${a} of type ${typeof a}`);}static fromISO(a,m){const [U]=ja(a,[ee,ka]);return U?Qa.fromObject(U,m):Qa.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,m){const [U]=ja(a,[de,re]);return U?Qa.fromObject(U,m):Qa.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,m=null){if(!a)throw new lb("need to specify a reason the Duration is invalid");
a=a instanceof qb?a:new qb(a,m);if(Za.throwOnInvalid)throw new Wd(a);return new Qa({invalid:a})}static normalizeUnit(a){const m={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a?a.toLowerCase():a];if(!m)throw new Qc(a);return m}static isDuration(a){return a&&
a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(a,m={}){m={...m,floor:!1!==m.round&&!1!==m.floor};return this.isValid?jb.create(this.loc,m).formatDurationFromString(this,a):"Invalid Duration"}toHuman(a={}){const m=Jb.map(U=>{const Y=this.values[U];return q(Y)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...a,unit:U.slice(0,-1)}).format(Y)}).filter(U=>U);return this.loc.listFormatter({type:"conjunction",
style:a.listStyle||"narrow",...a}).format(m)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let a="P";0!==this.years&&(a+=this.years+"Y");if(0!==this.months||0!==this.quarters)a+=this.months+3*this.quarters+"M";0!==this.weeks&&(a+=this.weeks+"W");0!==this.days&&(a+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)a+="T";0!==this.hours&&(a+=this.hours+"H");0!==this.minutes&&(a+=this.minutes+"M");if(0!==this.seconds||
0!==this.milliseconds)a+=k(this.seconds+this.milliseconds/1E3,3)+"S";"P"===a&&(a+="T0S");return a}toISOTime(a={}){if(!this.isValid)return null;var m=this.toMillis();if(0>m||864E5<=m)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...a};m=this.shiftTo("hours","minutes","seconds","milliseconds");let U="basic"===a.format?"hhmm":"hh:mm";a.suppressSeconds&&0===m.seconds&&0===m.milliseconds||(U+="basic"===a.format?"ss":":ss",a.suppressMilliseconds&&0===m.milliseconds||
(U+=".SSS"));m=m.toFormat(U);a.includePrefix&&(m="T"+m);return m}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;a=Qa.fromDurationLike(a);const m={};for(const U of Jb)if(D(a.values,U)||D(this.values,U))m[U]=a.get(U)+this.get(U);return fa(this,{values:m},!0)}minus(a){if(!this.isValid)return this;a=Qa.fromDurationLike(a);return this.plus(a.negate())}mapUnits(a){if(!this.isValid)return this;
const m={};for(const U of Object.keys(this.values))m[U]=O(a(this.values[U],U));return fa(this,{values:m},!0)}get(a){return this[Qa.normalizeUnit(a)]}set(a){if(!this.isValid)return this;a={...this.values,...z(a,Qa.normalizeUnit)};return fa(this,{values:a})}reconfigure({locale:a,numberingSystem:m,conversionAccuracy:U}={}){a={loc:this.loc.clone({locale:a,numberingSystem:m})};U&&(a.conversionAccuracy=U);return fa(this,a)}as(a){return this.isValid?this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;
const a=this.toObject();sa(this.matrix,a);return fa(this,{values:a},!0)}shiftTo(...a){if(!this.isValid||0===a.length)return this;a=a.map(ia=>Qa.normalizeUnit(ia));const m={},U={},Y=this.toObject();let ca;for(const ia of Jb)if(0<=a.indexOf(ia)){ca=ia;let va=0;for(const Ea in U)va+=this.matrix[Ea][ia]*U[Ea],U[Ea]=0;b(Y[ia])&&(va+=Y[ia]);const ya=Math.trunc(va);m[ia]=ya;U[ia]=(1E3*va-1E3*ya)/1E3;for(const Ea in Y)Jb.indexOf(Ea)>Jb.indexOf(ia)&&ha(this.matrix,Y,Ea,m,ia)}else b(Y[ia])&&(U[ia]=Y[ia]);for(const ia in U)0!==
U[ia]&&(m[ca]+=ia===ca?U[ia]:U[ia]/this.matrix[ca][ia]);return fa(this,{values:m},!0).normalize()}negate(){if(!this.isValid)return this;const a={};for(const m of Object.keys(this.values))a[m]=0===this.values[m]?0:-this.values[m];return fa(this,{values:a},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?
this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;
for(const Y of Jb){var m=this.values[Y];var U=a.values[Y];m=void 0===m||0===m?void 0===U||0===U:m===U;if(!m)return!1}return!0}}class Xa{constructor(a){this.s=a.start;this.e=a.end;this.invalid=a.invalid||null;this.isLuxonInterval=!0}static invalid(a,m=null){if(!a)throw new lb("need to specify a reason the Interval is invalid");a=a instanceof qb?a:new qb(a,m);if(Za.throwOnInvalid)throw new Vd(a);return new Xa({invalid:a})}static fromDateTimes(a,m){a=zb(a);m=zb(m);var U=a&&a.isValid?m&&m.isValid?m<a?
Xa.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${m.toISO()}`):null:Xa.invalid("missing or invalid end"):Xa.invalid("missing or invalid start");return null==U?new Xa({start:a,end:m}):U}static after(a,m){m=Qa.fromDurationLike(m);a=zb(a);return Xa.fromDateTimes(a,a.plus(m))}static before(a,m){m=Qa.fromDurationLike(m);a=zb(a);return Xa.fromDateTimes(a.minus(m),a)}static fromISO(a,m){const [U,Y]=(a||"").split("/",2);if(U&&Y){let va;
try{var ca=T.fromISO(U,m);va=ca.isValid}catch(Ea){va=!1}let ya;try{var ia=T.fromISO(Y,m);ya=ia.isValid}catch(Ea){ya=!1}if(va&&ya)return Xa.fromDateTimes(ca,ia);if(va){if(ia=Qa.fromISO(Y,m),ia.isValid)return Xa.after(ca,ia)}else if(ya&&(ca=Qa.fromISO(U,m),ca.isValid))return Xa.before(ia,ca)}return Xa.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&a.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:
null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(a="milliseconds"){return this.isValid?this.toDuration(...[a]).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const m=this.start.startOf(a),U=this.end.startOf(a);return Math.floor(U.diff(m,a).get(a))+1}hasSame(a){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,a):!1}isEmpty(){return this.s.valueOf()===
this.e.valueOf()}isAfter(a){return this.isValid?this.s>a:!1}isBefore(a){return this.isValid?this.e<=a:!1}contains(a){return this.isValid?this.s<=a&&this.e>a:!1}set({start:a,end:m}={}){return this.isValid?Xa.fromDateTimes(a||this.s,m||this.e):this}splitAt(...a){if(!this.isValid)return[];a=a.map(zb).filter(ia=>this.contains(ia)).sort();const m=[];let {s:U}=this,Y=0;for(;U<this.e;){var ca=a[Y]||this.e;ca=+ca>+this.e?this.e:ca;m.push(Xa.fromDateTimes(U,ca));U=ca;Y+=1}return m}splitBy(a){a=Qa.fromDurationLike(a);
if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let {s:m}=this,U=1;const Y=[];for(;m<this.e;){var ca=this.start.plus(a.mapUnits(ia=>ia*U));ca=+ca>+this.e?this.e:ca;Y.push(Xa.fromDateTimes(m,ca));m=ca;U+=1}return Y}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return this.isValid?+this.e===+a.s:!1}abutsEnd(a){return this.isValid?+a.e===+this.s:!1}engulfs(a){return this.isValid?this.s<=a.s&&this.e>=
a.e:!1}equals(a){return this.isValid&&a.isValid?this.s.equals(a.s)&&this.e.equals(a.e):!1}intersection(a){if(!this.isValid)return this;const m=this.s>a.s?this.s:a.s;a=this.e<a.e?this.e:a.e;return m>=a?null:Xa.fromDateTimes(m,a)}union(a){return this.isValid?Xa.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const [m,U]=a.sort((Y,ca)=>Y.s-ca.s).reduce(([Y,ca],ia)=>ca?ca.overlaps(ia)||ca.abutsStart(ia)?[Y,ca.union(ia)]:[Y.concat([ca]),ia]:[Y,ia],[[],null]);U&&m.push(U);
return m}static xor(a){let m=null,U=0;const Y=[];a=a.map(ca=>[{time:ca.s,type:"s"},{time:ca.e,type:"e"}]);a=Array.prototype.concat(...a).sort((ca,ia)=>ca.time-ia.time);for(const ca of a)U+="s"===ca.type?1:-1,1===U?m=ca.time:(m&&+m!==+ca.time&&Y.push(Xa.fromDateTimes(m,ca.time)),m=null);return Xa.merge(Y)}difference(...a){return Xa.xor([this].concat(a)).map(m=>this.intersection(m)).filter(m=>m&&!m.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:"Invalid Interval"}toISO(a){return this.isValid?
`${this.s.toISO(a)}/${this.e.toISO(a)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:"Invalid Interval"}toFormat(a,{separator:m=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(a)}${m}${this.e.toFormat(a)}`:"Invalid Interval"}toDuration(a,m){return this.isValid?this.e.diff(this.s,a,m):Qa.invalid(this.invalidReason)}mapEndpoints(a){return Xa.fromDateTimes(a(this.s),
a(this.e))}}class Xb{static hasDST(a=Za.defaultZone){const m=T.now().setZone(a).set({month:12});return!a.isUniversal&&m.offset!==m.set({month:6}).offset}static isValidIANAZone(a){return Db.isValidZone(a)}static normalizeZone(a){return A(a,Za.defaultZone)}static months(a="long",{locale:m=null,numberingSystem:U=null,locObj:Y=null,outputCalendar:ca="gregory"}={}){return(Y||Wa.create(m,U,ca)).months(a)}static monthsFormat(a="long",{locale:m=null,numberingSystem:U=null,locObj:Y=null,outputCalendar:ca=
"gregory"}={}){return(Y||Wa.create(m,U,ca)).months(a,!0)}static weekdays(a="long",{locale:m=null,numberingSystem:U=null,locObj:Y=null}={}){return(Y||Wa.create(m,U,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:m=null,numberingSystem:U=null,locObj:Y=null}={}){return(Y||Wa.create(m,U,null)).weekdays(a,!0)}static meridiems({locale:a=null}={}){return Wa.create(a).meridiems()}static eras(a="short",{locale:m=null}={}){return Wa.create(m,null,"gregory").eras(a)}static features(){return{relative:h()}}}
const sc={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",
tibt:"[\u0f20-\u0f29]",latn:"\\d"},Nc={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Sd=sc.hanidec.replace(/[\[|\]]/g,"").split(""),Oc=`( |${String.fromCharCode(160)})`,ac=new RegExp(Oc,"g"),Pc={year:{"2-digit":"yy",
numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};let bc=null;const cc=[0,31,59,90,120,151,181,212,243,273,304,334],G=[0,31,60,91,121,152,182,213,244,274,305,335],Vb={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},sb={weekNumber:1,weekday:1,hour:0,minute:0,second:0,
millisecond:0},Ac={ordinal:1,hour:0,minute:0,second:0,millisecond:0},ra="year month day hour minute second millisecond".split(" "),Bc="weekYear weekNumber weekday hour minute second millisecond".split(" "),R="year ordinal hour minute second millisecond".split(" ");class T{constructor(a){const m=a.zone||Za.defaultZone;let U=a.invalid||(Number.isNaN(a.ts)?new qb("invalid input"):null)||(m.isValid?null:Ib(m));this.ts=q(a.ts)?Za.now():a.ts;let Y=null;var ca=null;U||(a.old&&a.old.ts===this.ts&&a.old.zone.equals(m)?
[Y,ca]=[a.old.c,a.old.o]:(ca=m.offset(this.ts),Y=ea(this.ts,ca),Y=(U=Number.isNaN(Y.year)?new qb("invalid input"):null)?null:Y,ca=U?null:ca));this._zone=m;this.loc=a.loc||Wa.create();this.invalid=U;this.weekData=null;this.c=Y;this.o=ca;this.isLuxonDateTime=!0}static now(){return new T({})}static local(){const [a,m]=Rb(arguments),[U,Y,ca,ia,va,ya,Ea]=m;return hb({year:U,month:Y,day:ca,hour:ia,minute:va,second:ya,millisecond:Ea},a)}static utc(){const [a,m]=Rb(arguments),[U,Y,ca,ia,va,ya,Ea]=m;a.zone=
ib.utcInstance;return hb({year:U,month:Y,day:ca,hour:ia,minute:va,second:ya,millisecond:Ea},a)}static fromJSDate(a,m={}){a="[object Date]"===Object.prototype.toString.call(a)?a.valueOf():NaN;if(Number.isNaN(a))return T.invalid("invalid input");const U=A(m.zone,Za.defaultZone);return U.isValid?new T({ts:a,zone:U,loc:Wa.fromObject(m)}):T.invalid(Ib(U))}static fromMillis(a,m={}){if(b(a))return-864E13>a||864E13<a?T.invalid("Timestamp out of range"):new T({ts:a,zone:A(m.zone,Za.defaultZone),loc:Wa.fromObject(m)});
throw new lb(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`);}static fromSeconds(a,m={}){if(b(a))return new T({ts:1E3*a,zone:A(m.zone,Za.defaultZone),loc:Wa.fromObject(m)});throw new lb("fromSeconds requires a numerical input");}static fromObject(a,m={}){a=a||{};var U=A(m.zone,Za.defaultZone);if(!U.isValid)return T.invalid(Ib(U));var Y=Za.now();const ca=q(m.specificOffset)?U.offset(Y):m.specificOffset,ia=z(a,Ya);var va=!q(ia.ordinal),ya=!q(ia.year),Ea=!q(ia.month)||
!q(ia.day);ya=ya||Ea;var Oa=ia.weekYear||ia.weekNumber;m=Wa.fromObject(m);if((ya||va)&&Oa)throw new Ub("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Ea&&va)throw new Ub("Can't mix ordinal dates with month/day");Ea=Oa||ia.weekday&&!ya;let Ja=ea(Y,ca);Ea?(Y=Bc,Oa=sb,Ja=xb(Ja)):va?(Y=R,Oa=Ac,Ja=Hb(Ja)):(Y=ra,Oa=Vb);let Pa=!1;for(var La of Y)q(ia[La])?ia[La]=Pa?Oa[La]:Ja[La]:Pa=!0;Ea?(La=E(ia.weekYear),Y=K(ia.weekNumber,1,n(ia.weekYear)),Oa=K(ia.weekday,1,7),La=La?Y?Oa?!1:
fb("weekday",ia.weekday):fb("week",ia.week):fb("weekYear",ia.weekYear)):va?(La=E(ia.year),Y=K(ia.ordinal,1,B(ia.year)?366:365),La=La?Y?!1:fb("ordinal",ia.ordinal):fb("year",ia.year)):La=bb(ia);if(La=La||Pb(ia))return T.invalid(La);va=Ea?yb(ia):va?Sb(ia):ia;const [gb,ub]=oa(va,ca,U);U=new T({ts:gb,zone:U,o:ub,loc:m});return ia.weekday&&ya&&a.weekday!==U.weekday?T.invalid("mismatched weekday",`you can't specify both a weekday of ${ia.weekday} and a date of ${U.toISO()}`):U}static fromISO(a,m={}){const [U,
Y]=ja(a,[je,ne],[ke,oe],[le,pe],[me,qe]);return Da(U,Y,m,"ISO 8601",a)}static fromRFC2822(a,m={}){const [U,Y]=ja(a.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[fe,ma]);return Da(U,Y,m,"RFC 2822",a)}static fromHTTP(a,m={}){const [U,Y]=ja(a,[ge,aa],[he,aa],[ie,da]);return Da(U,Y,m,"HTTP",m)}static fromFormat(a,m,U={}){if(q(a)||q(m))throw new lb("fromFormat requires an input string and a format");const {locale:Y=null,numberingSystem:ca=null}=U;var ia=Wa.fromOpts({locale:Y,numberingSystem:ca,
defaultToEN:!0});{const {result:Ja,zone:Pa,specificOffset:La,invalidReason:gb}=Ob(ia,a,m);ia=[Ja,Pa,La,gb]}const [va,ya,Ea,Oa]=ia;return Oa?T.invalid(Oa):Da(va,ya,U,`format ${m}`,a,Ea)}static fromString(a,m,U={}){return T.fromFormat(a,m,U)}static fromSQL(a,m={}){const [U,Y]=ja(a,[se,ue],[te,ve]);return Da(U,Y,m,"SQL",a)}static invalid(a,m=null){if(!a)throw new lb("need to specify a reason the DateTime is invalid");a=a instanceof qb?a:new qb(a,m);if(Za.throwOnInvalid)throw new Ud(a);return new T({invalid:a})}static isDateTime(a){return a&&
a.isLuxonDateTime||!1}get(a){return this[a]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?
this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Ab(this).weekYear:NaN}get weekNumber(){return this.isValid?Ab(this).weekNumber:NaN}get weekday(){return this.isValid?
Ab(this).weekday:NaN}get ordinal(){return this.isValid?Hb(this.c).ordinal:NaN}get monthShort(){return this.isValid?Xb.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Xb.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Xb.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Xb.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?
this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return B(this.year)}get daysInMonth(){return c(this.year,this.month)}get daysInYear(){return this.isValid?B(this.year)?
366:365:NaN}get weeksInWeekYear(){return this.isValid?n(this.weekYear):NaN}resolvedLocaleOptions(a={}){const {locale:m,numberingSystem:U,calendar:Y}=jb.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:m,numberingSystem:U,outputCalendar:Y}}toUTC(a=0,m={}){return this.setZone(ib.instance(a),m)}toLocal(){return this.setZone(Za.defaultZone)}setZone(a,{keepLocalTime:m=!1,keepCalendarTime:U=!1}={}){a=A(a,Za.defaultZone);if(a.equals(this.zone))return this;if(a.isValid){let Y=this.ts;if(m||
U)m=a.offset(this.ts),U=this.toObject(),[Y]=oa(U,m,a);return Cb(this,{ts:Y,zone:a})}return T.invalid(Ib(a))}reconfigure({locale:a,numberingSystem:m,outputCalendar:U}={}){a=this.loc.clone({locale:a,numberingSystem:m,outputCalendar:U});return Cb(this,{loc:a})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;a=z(a,Ya);var m=!q(a.weekYear)||!q(a.weekNumber)||!q(a.weekday);const U=!q(a.ordinal),Y=!q(a.year),ca=!q(a.month)||!q(a.day),ia=a.weekYear||a.weekNumber;if((Y||
ca||U)&&ia)throw new Ub("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ca&&U)throw new Ub("Can't mix ordinal dates with month/day");m?m=yb({...xb(this.c),...a}):q(a.ordinal)?(m={...this.toObject(),...a},q(a.day)&&(m.day=Math.min(c(m.year,m.month),m.day))):m=Sb({...Hb(this.c),...a});const [va,ya]=oa(m,this.o,this.zone);return Cb(this,{ts:va,o:ya})}plus(a){if(!this.isValid)return this;a=Qa.fromDurationLike(a);return Cb(this,Ca(this,a))}minus(a){if(!this.isValid)return this;
a=Qa.fromDurationLike(a).negate();return Cb(this,Ca(this,a))}startOf(a){if(!this.isValid)return this;const m={};a=Qa.normalizeUnit(a);switch(a){case "years":m.month=1;case "quarters":case "months":m.day=1;case "weeks":case "days":m.hour=0;case "hours":m.minute=0;case "minutes":m.second=0;case "seconds":m.millisecond=0}"weeks"===a&&(m.weekday=1);"quarters"===a&&(m.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(m)}endOf(a){return this.isValid?this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,
m={}){return this.isValid?jb.create(this.loc.redefaultToEN(m)).formatDateTimeFromString(this,a):"Invalid DateTime"}toLocaleString(a=tc,m={}){return this.isValid?jb.create(this.loc.clone(m),a).formatDateTime(this):"Invalid DateTime"}toLocaleParts(a={}){return this.isValid?jb.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO({format:a="extended",suppressSeconds:m=!1,suppressMilliseconds:U=!1,includeOffset:Y=!0}={}){if(!this.isValid)return null;a="extended"===a;let ca=Sa(this,a);return ca=
ca+"T"+cb(this,a,m,U,Y)}toISODate({format:a="extended"}={}){return this.isValid?Sa(this,"extended"===a):null}toISOWeekDate(){return Na(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=!1,suppressSeconds:m=!1,includeOffset:U=!0,includePrefix:Y=!1,format:ca="extended"}={}){return this.isValid?(Y?"T":"")+cb(this,"extended"===ca,m,a,U):null}toRFC2822(){return Na(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Na(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?
Sa(this,!0):null}toSQLTime({includeOffset:a=!0,includeZone:m=!1,includeOffsetSpace:U=!0}={}){let Y="HH:mm:ss.SSS";if(m||a)U&&(Y+=" "),m?Y+="z":a&&(Y+="ZZ");return Na(this,Y,!0)}toSQL(a={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1E3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1E3):
NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const m={...this.c};a.includeConfig&&(m.outputCalendar=this.outputCalendar,m.numberingSystem=this.loc.numberingSystem,m.locale=this.loc.locale);return m}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(a,m="milliseconds",U={}){if(!this.isValid||!a.isValid)return Qa.invalid("created by diffing an invalid DateTime");U={locale:this.locale,numberingSystem:this.numberingSystem,...U};const Y=
(Array.isArray(m)?m:[m]).map(Qa.normalizeUnit);m=a.valueOf()>this.valueOf();a=Aa(m?this:a,m?a:this,Y,U);return m?a.negate():a}diffNow(a="milliseconds",m={}){return this.diff(T.now(),a,m)}until(a){return this.isValid?Xa.fromDateTimes(this,a):this}hasSame(a,m){if(!this.isValid)return!1;const U=a.valueOf();a=this.setZone(a.zone,{keepLocalTime:!0});return a.startOf(m)<=U&&U<=a.endOf(m)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a=
{}){if(!this.isValid)return null;const m=a.base||T.fromObject({},{zone:this.zone}),U=a.padding?this<m?-a.padding:a.padding:0;let Y="years months days hours minutes seconds".split(" "),ca=a.unit;Array.isArray(a.unit)&&(Y=a.unit,ca=void 0);return Yb(m,this.plus(U),{...a,numeric:"always",units:Y,unit:ca})}toRelativeCalendar(a={}){return this.isValid?Yb(a.base||T.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every(T.isDateTime))throw new lb("min requires all arguments be DateTimes");
return r(a,m=>m.valueOf(),Math.min)}static max(...a){if(!a.every(T.isDateTime))throw new lb("max requires all arguments be DateTimes");return r(a,m=>m.valueOf(),Math.max)}static fromFormatExplain(a,m,U={}){const {locale:Y=null,numberingSystem:ca=null}=U;U=Wa.fromOpts({locale:Y,numberingSystem:ca,defaultToEN:!0});return Ob(U,a,m)}static fromStringExplain(a,m,U={}){return T.fromFormatExplain(a,m,U)}static get DATE_SHORT(){return tc}static get DATE_MED(){return Rc}static get DATE_MED_WITH_WEEKDAY(){return Xd}static get DATE_FULL(){return Sc}static get DATE_HUGE(){return Tc}static get TIME_SIMPLE(){return Uc}static get TIME_WITH_SECONDS(){return Vc}static get TIME_WITH_SHORT_OFFSET(){return Wc}static get TIME_WITH_LONG_OFFSET(){return Xc}static get TIME_24_SIMPLE(){return Yc}static get TIME_24_WITH_SECONDS(){return Zc}static get TIME_24_WITH_SHORT_OFFSET(){return $c}static get TIME_24_WITH_LONG_OFFSET(){return ad}static get DATETIME_SHORT(){return bd}static get DATETIME_SHORT_WITH_SECONDS(){return cd}static get DATETIME_MED(){return dd}static get DATETIME_MED_WITH_SECONDS(){return ed}static get DATETIME_MED_WITH_WEEKDAY(){return Yd}static get DATETIME_FULL(){return fd}static get DATETIME_FULL_WITH_SECONDS(){return gd}static get DATETIME_HUGE(){return hd}static get DATETIME_HUGE_WITH_SECONDS(){return id}}
e.DateTime=T;e.Info=Xb;e.Interval=Xa})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(e,q,b){function E(d){d||(d=b.getLocale());let g=d in K;if(!g){const t=d.split("-");1<t.length&&t[0]in K&&(d=t[0],g=!0);g||(d="en")}const [k,B,c="#,##0.###"]=K[d];return{decimal:k,group:B,pattern:c}}function h(d,g,k){k=k||{};!0===k.places&&(k.places=0);Infinity===k.places&&(k.places=6);g=g.split(".");var B="string"===typeof k.places&&k.places.indexOf(","),c=k.places;B?c=k.places.substring(B+
1):0<=c||(c=(g[1]||[]).length);0>k.round||(d=Number(d.toFixed(Number(c))));d=String(Math.abs(d)).split(".");const t=d[1]||"";g[1]||k.places?(B&&(k.places=k.places.substring(0,B)),B=void 0!==k.places?k.places:g[1]&&g[1].lastIndexOf("0")+1,B>t.length&&(d[1]=t.padEnd(Number(B),"0")),c<t.length&&(d[1]=t.substr(0,Number(c)))):d[1]&&d.pop();c=g[0].replace(",","");B=c.indexOf("0");-1!==B&&(B=c.length-B,B>d[0].length&&(d[0]=d[0].padStart(B,"0")),-1===c.indexOf("#")&&(d[0]=d[0].substr(d[0].length-B)));c=g[0].lastIndexOf(",");
let n,u;-1!==c&&(n=g[0].length-c-1,g=g[0].substr(0,c),c=g.lastIndexOf(","),-1!==c&&(u=g.length-c-1));g=[];for(c=d[0];c;)B=c.length-n,g.push(0<B?c.substr(B):c),c=0<B?c.slice(0,B):"",u&&(n=u,u=void 0);d[0]=g.reverse().join(k.group||",");return d.join(k.decimal||".")}function r(d){d=d||{};var g=E(d.locale);const k=d.pattern||g.pattern,B=g.group,c=g.decimal;let t=1;if(-1!==k.indexOf("%"))t/=100;else if(-1!==k.indexOf("\u2030"))t/=1E3;else if(-1!==k.indexOf("\u00a4"))throw Error("currency notation not supported");
g=k.split(";");1===g.length&&g.push("-"+g[0]);return{regexp:x(g,function(n){n="(?:"+q.escapeRegExpString(n,".")+")";return n.replace(I,function(u){const p={signed:!1,separator:d.strict?B:[B,""],fractional:d.fractional,decimal:c,exponent:!1};u=u.split(".");let y=d.places;1===u.length&&1!==t&&(u[1]="###");1===u.length||0===y?p.fractional=!1:(void 0===y&&(y=d.pattern?u[1].lastIndexOf("0")+1:Infinity),y&&null==d.fractional&&(p.fractional=!0),!d.places&&y<u[1].length&&(y+=","+u[1].length),p.places=y);
u=u[0].split(",");1<u.length&&(p.groupSize=u.pop().length,1<u.length&&(p.groupSize2=u.pop().length));return"("+w(p)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:B,decimal:c,factor:t}}function w(d){d=d||{};"places"in d||(d.places=Infinity);"string"!==typeof d.decimal&&(d.decimal=".");"fractional"in d&&!/^0/.test(String(d.places))||(d.fractional=[!0,!1]);"exponent"in d||(d.exponent=[!0,!1]);"eSigned"in d||(d.eSigned=[!0,!1]);var g=D(d);const k=x(d.fractional,function(c){let t="";c&&0!==d.places&&
(t="\\"+d.decimal,t=Infinity===d.places?"(?:"+t+"\\d+)?":t+("\\d{"+d.places+"}"));return t},!0),B=x(d.exponent,function(c){return c?"([eE]"+D({signed:d.eSigned})+")":""});g+=k;k&&(g="(?:(?:"+g+")|(?:"+k+"))");return g+B}function D(d){d=d||{};"signed"in d||(d.signed=[!0,!1]);"separator"in d?"groupSize"in d||(d.groupSize=3):d.separator="";const g=x(d.signed,function(B){return B?"[-+]":""},!0),k=x(d.separator,function(B){if(!B)return"(?:\\d+)";B=q.escapeRegExpString(B);" "===B?B="\\s":"\u00a0"===B&&
(B="\\s\\xa0");const c=d.groupSize,t=d.groupSize2;return t?(B="(?:0|[1-9]\\d{0,"+(t-1)+"}(?:["+B+"]\\d{"+t+"})*["+B+"]\\d{"+c+"})",0<c-t?"(?:"+B+"|(?:0|[1-9]\\d{0,"+(c-1)+"}))":B):"(?:0|[1-9]\\d{0,"+(c-1)+"}(?:["+B+"]\\d{"+c+"})*)"},!0);return g+k}const K={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],
"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},I=/[#0,]*[#0](?:\.0*#*)?/,x=function(d,
g,k){if(!(d instanceof Array))return g(d);const B=[];for(let c=0;c<d.length;c++)B.push(g(d[c]));d=B.join("|");return"("+(k?"?:":"")+d+")"};e._parseInfo=r;e.format=function(d,g){g={...g};var k=E(g.locale);g.customs=k;var B=g.pattern||k.pattern;if(isNaN(d)||Infinity===Math.abs(d))return null;{g=g||{};k=g.customs.group;const t=g.customs.decimal;B=B.split(";");var c=B[0];B=B[0>d?1:0]||"-"+c;if(-1!==B.indexOf("%"))d*=100;else if(-1!==B.indexOf("\u2030"))d*=1E3;else{if(-1!==B.indexOf("\u00a4"))throw Error("currency notation not supported");
if(-1!==B.indexOf("E"))throw Error("exponential notation not supported");}const n=I;c=c.match(n);if(!c)throw Error("unable to find a number expression in pattern: "+B);!1===g.fractional&&(g.places=0);d=B.replace(n,h(d,c[0],{decimal:t,group:k,places:g.places,round:g.round}))}return d};e.getCustoms=E;e.parse=function(d,g){g=r(g);d=(new RegExp("^"+g.regexp+"$")).exec(d);if(!d)return NaN;let k=d[1];if(!d[1]){if(!d[2])return NaN;k=d[2];g.factor*=-1}k=k.replace(new RegExp("["+g.group+"\\s\\xa0]","g"),"").replace(g.decimal,
".");return Number(k)*g.factor};e.regexp=function(d){return r(d).regexp};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/arcade/featureset/support/shared":function(){define(["exports","../../../core/promiseUtils","../../../geometry/Extent","../../../layers/support/Field"],function(e,q,b,E){function h(r){return r instanceof Date}e.FeatureServiceDatabaseType=void 0;(function(r){r[r.Standardised=0]="Standardised";r[r.StandardisedNoInterval=1]="StandardisedNoInterval";r[r.SqlServer=2]="SqlServer";
r[r.Oracle=3]="Oracle";r[r.Postgres=4]="Postgres";r[r.PGDB=5]="PGDB";r[r.FILEGDB=6]="FILEGDB";r[r.NotEvaluated=7]="NotEvaluated"})(e.FeatureServiceDatabaseType||(e.FeatureServiceDatabaseType={}));e.IdState=void 0;(function(r){r[r.InFeatureSet=0]="InFeatureSet";r[r.NotInFeatureSet=1]="NotInFeatureSet";r[r.Unknown=2]="Unknown"})(e.IdState||(e.IdState={}));e.callback=function(r,w){return function(){try{r.apply(null,arguments)}catch(D){w.reject(D)}}};e.cloneAttributes=function(r){const w={};for(const D in r)w[D]=
r[D];return w};e.cloneField=function(r){return E.fromJSON(r.toJSON())};e.convertLinearUnitsToCode=function(r){if(void 0===r)return null;if("number"===typeof r||"number"===typeof r)return r;switch(r.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};e.convertSquareUnitsToCode=function(r){if(void 0===r)return null;if("number"===typeof r)return r;switch(r.toLowerCase()){case "meters":case "meter":return 109404;
case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};e.defaultMaxRecords=1E3;e.equalityTest=function(r,w){return r===w?!0:h(r)&&h(w)?r.getTime()===w.getTime():!1};e.errback=function(r){return function(w){r.reject(w)}};e.esriFieldToJson=function(r){return r.toJSON?r.toJSON():r};e.extractServiceUrl=function(r){if(void 0===r)return"";r=r.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");r=r.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return r=
r.split("?")[0]};e.isArray=function(r){return r instanceof Array};e.isBoolean=function(r){return"boolean"===typeof r};e.isDate=h;e.isNumber=function(r){return"number"===typeof r};e.isString=function(r){return"string"===typeof r||r instanceof String};e.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",
geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",
esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};e.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",
envelope:"extent"};e.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};e.reduceArrayWithPromises=function(r,w){return q.create((D,
K)=>{const I=q.resolve(!0);r.reduce((x,d,g,k)=>x.then(B=>{try{return w(B,d,g,k)}catch(c){return q.reject(c)}},B=>q.reject(B)),I).then(D,K)})};e.sameGeomType=function(r,w){return r===w||"point"===r&&"esriGeometryPoint"===w||"polyline"===r&&"esriGeometryPolyline"===w||"polygon"===r&&"esriGeometryPolygon"===w||"extent"===r&&"esriGeometryEnvelope"===w||"multipoint"===r&&"esriGeometryMultipoint"===w||"point"===w&&"esriGeometryPoint"===r||"polyline"===w&&"esriGeometryPolyline"===r||"polygon"===w&&"esriGeometryPolygon"===
r||"extent"===w&&"esriGeometryEnvelope"===r||"multipoint"===w&&"esriGeometryMultipoint"===r?!0:!1};e.shapeExtent=function(r){if(null===r)return null;switch(r.type){case "polygon":case "multipoint":case "polyline":return r.extent;case "point":return new b({xmin:r.x,ymin:r.y,xmax:r.x,ymax:r.y,spatialReference:r.spatialReference});case "extent":return r}return null};e.stableStringify=function(r,w){w||(w={});"function"===typeof w&&(w={cmp:w});const D="boolean"===typeof w.cycles?w.cycles:!1,K=w.cmp&&function(x){return function(d){return function(g,
k){return x({key:g,value:d[g]},{key:k,value:d[k]})}}}(w.cmp),I=[];return function g(d){d&&d.toJSON&&"function"===typeof d.toJSON&&(d=d.toJSON());if(void 0!==d){if("number"===typeof d)return isFinite(d)?""+d:"null";if("object"!==typeof d)return JSON.stringify(d);var k;if(Array.isArray(d)){var B="[";for(k=0;k<d.length;k++)k&&(B+=","),B+=g(d[k])||"null";return B+"]"}if(null===d)return"null";if(-1!==I.indexOf(d)){if(D)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");
}var c=I.push(d)-1,t=Object.keys(d).sort(K&&K(d));B="";for(k=0;k<t.length;k++){const n=t[k],u=g(d[n]);u&&(B&&(B+=","),B+=JSON.stringify(n)+":"+u)}I.splice(c,1);return"{"+B+"}"}}(r)};e.toEsriGeometryType=function(r){switch(r){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Feature/support/arcadeFeatureUtils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Logger ../../../core/promiseUtils ../../../layers/FeatureLayer ./featureUtils".split(" "),
function(e,q,b,E,h,r,w){function D(u){return`<ul class="esri-widget__list">${u.map(p=>`<li>${"string"===typeof p?w.applyTextFormattingHTML(w.htmlEntities(p)):p}</li>`).join("")}</ul>`}function K(u){return`<table class="esri-widget__table">${u.keys().map(p=>{var y=u.field(p);y="string"===typeof y?w.applyTextFormattingHTML(w.htmlEntities(y)):y;return`<tr><th>${p}</th><td>${y}</td></tr>`}).join("")}</table>`}function I({aggregatedFeatures:u,arcadeUtils:p,featureSetVars:y,context:O,viewInfo:z,map:f,graphic:F,
interceptor:S}){y.forEach(M=>{M=M.toLowerCase();var P={map:f,spatialReference:z.sr,interceptor:S};"$map"===M&&(O.vars[M]=p.convertMapToFeatureSetCollection(P));"$layer"===M&&(O.vars[M]=p.convertFeatureLayerToFeatureSet({layer:F.sourceLayer,spatialReference:z.sr,interceptor:S}));"$datastore"===M&&(O.vars[M]=p.convertServiceUrlToWorkspace({url:F.sourceLayer.url,spatialReference:z.sr,interceptor:S}));if("$aggregatedfeatures"===M){P=F.layer;const {fields:H,objectIdField:L,geometryType:A,spatialReference:C,
displayField:J}=P;P=new r({fields:H,objectIdField:L,geometryType:A,spatialReference:C,displayField:J,..."feature"===P.type?{templates:P.templates,typeIdField:P.typeIdField,types:P.types}:null,source:u});O.vars[M]=p.convertFeatureLayerToFeatureSet({layer:P,spatialReference:z.sr,interceptor:S})}})}function x(){return new Promise((u,p)=>e(["../../../support/arcadeUtils"],u,p))}function d(u){return g.apply(this,arguments)}function g(){g=b._asyncToGenerator(function*({graphic:u,view:p}){const {isAggregate:y,
layer:O}=u;if(!y||!O||"2d"!==(null==p?void 0:p.type))return[];p=yield p.whenLayerView(O);if(!p.createQuery||!p.queryFeatures)return[];const z=p.createQuery();z.aggregateIds=[u.getObjectId()];({features:u}=yield p.queryFeatures(z));return u});return g.apply(this,arguments)}function k(u){return B.apply(this,arguments)}function B(){B=b._asyncToGenerator(function*({expressionInfo:u,arcadeUtils:p,interceptor:y,spatialReference:O,map:z,graphic:f,view:F}){if(!u||!u.expression)return null;const S=p.createSyntaxTree(u.expression),
M=t.filter(H=>p.hasVariable(S,H));[F]=yield h.all([d({graphic:f,view:F}),p.loadScriptDependencies(S,!0,M)]);const P=p.getViewInfo({spatialReference:O});O=p.createExecContext(f,P);O.interceptor=y;O.useAsync=!0;I({aggregatedFeatures:F,arcadeUtils:p,featureSetVars:M,context:O,viewInfo:P,map:z,graphic:f,interceptor:y});y=p.createFunction(S,O);return p.executeAsyncFunction(y,O).catch(H=>n.error("arcade-execution-error",{error:H,graphic:f,expressionInfo:u}))});return B.apply(this,arguments)}function c(){c=
b._asyncToGenerator(function*({expressionInfos:u,spatialReference:p,graphic:y,interceptor:O,map:z,view:f}){if(!u||!u.length)return{};const F=yield x(),S={};for(const M of u)S[`expression/${M.name}`]=k({expressionInfo:M,arcadeUtils:F,interceptor:O,spatialReference:p,map:z,graphic:y,view:f});u=yield h.eachAlways(S);p={};for(const M in u)y=u[M].value,y="string"===typeof y?w.applyTextFormattingHTML(w.htmlEntities(y)):Array.isArray(y)?D(y):"esri.arcade.Dictionary"===(null==y?void 0:y.declaredClass)?K(y):
y,p[M]=y;return p});return c.apply(this,arguments)}const t=["$datastore","$map","$layer","$aggregatedfeatures"],n=E.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");q.createCompiledExpression=k;q.createCompiledExpressions=function(u){return c.apply(this,arguments)};q.loadArcadeUtils=x;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/widgets/Feature/FeatureViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../arcade/featureset/support/FeatureSetQueryInterceptor ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/throttle ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../popup/content/TextContent ./FeatureAttachments/FeatureAttachmentsViewModel ./FeatureContent/FeatureContentViewModel ./FeatureExpression/FeatureExpressionViewModel ./FeatureFields/FeatureFieldsViewModel ./FeatureMedia/FeatureMediaViewModel ./support/arcadeFeatureUtils ./support/featureUtils ./support/relatedFeatureUtils".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g,k,B,c,t,n,u,p,y,O,z,f,F){var S;const M=w.getLogger("esri.widgets.FeatureViewModel"),P={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};h=S=function(H){function L(C){var J=H.call(this,C)||this;J._handles=new r;J._error=null;J._featureAbortController=null;J.graphicChangedThrottled=I.throttle(J._graphicChanged,1,e._assertThisInitialized(J));J._expressionAttributes=null;J._graphicExpressionAttributes=
null;J.abilities={...P};J.content=null;J.contentViewModels=[];J.defaultPopupTemplateEnabled=!1;J.formattedAttributes=null;J.lastEditInfo=null;J.relatedInfos=new Map;J.title="";J.view=null;J._isAllowedContentType=W=>{const {abilities:ba}=e._assertThisInitialized(J);return"attachments"===W.type&&ba.attachmentsContent||"custom"===W.type&&ba.customContent||"fields"===W.type&&ba.fieldsContent||"media"===W.type&&ba.mediaContent||"text"===W.type&&ba.textContent||"expression"===W.type&&ba.expressionContent};
J._handles.add(x.init(e._assertThisInitialized(J),["graphic","_effectivePopupTemplate","abilities"],()=>J.graphicChangedThrottled()));return J}e._inheritsLoose(L,H);var A=L.prototype;A.destroy=function(){this._clear();this._cancelFeatureQuery();this._error=null;this._handles.destroy();this.graphic=this._handles=null;this._destroyContentViewModels();this.relatedInfos.clear()};A.castAbilities=function(C){return{...P,...C}};A.setActiveMedia=function(C,J){C=this.contentViewModels[C];C instanceof O&&C.setActiveMedia(J)};
A.nextMedia=function(C){C=this.contentViewModels[C];C instanceof O&&C.next()};A.previousMedia=function(C){C=this.contentViewModels[C];C instanceof O&&C.previous()};A._clear=function(){this._set("title","");this._set("content",null);this._set("formattedAttributes",null)};A._graphicChanged=function(){var C=e._asyncToGenerator(function*(){this._cancelFeatureQuery();this._error=null;this._clear();const {graphic:J}=this;if(J){var W=new AbortController;this._featureAbortController=W;try{yield this._queryFeature({signal:W.signal})}catch(ba){K.isAbortError(ba)||
(this._error=ba,M.error("error","The popupTemplate could not be displayed for this feature.",{error:ba,graphic:J,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===W&&(this._featureAbortController=null)}});return function(){return C.apply(this,arguments)}}();A._cancelFeatureQuery=function(){const {_featureAbortController:C}=this;C&&C.abort();this._featureAbortController=null};A._compileContentElement=function(C,J){if("attachments"===C.type)return this._compileAttachments(C,
J);if("custom"===C.type)return this._compileCustom(C,J);if("fields"===C.type)return this._compileFields(C,J);if("media"===C.type)return this._compileMedia(C,J);if("text"===C.type)return this._compileText(C,J);if("expression"===C.type)return this._compileExpression(C,J)};A._compileContent=function(C){this._destroyContentViewModels();if(this.graphic)return Array.isArray(C)?C.filter(this._isAllowedContentType).map((J,W)=>this._compileContentElement(J,W)):"string"===typeof C?this._compileText(new t({text:C}),
0).text:C};A._destroyContentViewModels=function(){var C;null==(C=this._handles)?void 0:C.remove("content-view-models");this.contentViewModels.forEach(J=>J&&!J.destroyed&&J.destroy());this._set("contentViewModels",[])};A._setExpressionContentVM=function(C,J){const {formattedAttributes:W}=this,{contentElement:ba,contentElementViewModel:X}=C;C=null==ba?void 0:ba.type;X&&C&&("fields"===C&&(this._createFieldsFormattedAttributes({contentElement:ba,contentElementIndex:J,formattedAttributes:W}),X.set(this._createFieldsVMParams(ba,
J))),"media"===C&&(this._createMediaFormattedAttributes({contentElement:ba,contentElementIndex:J,formattedAttributes:W}),X.set(this._createMediaVMParams(ba,J))),"text"===C&&X.set(this._createTextVMParams(ba)))};A._compileExpression=function(C,J){const {expressionInfo:W}=C,{graphic:ba,map:X,spatialReference:v,view:N}=this,Q=new p({expressionInfo:W,graphic:ba,interceptor:S.interceptor,map:X,spatialReference:v,view:N});this.contentViewModels[J]=Q;this._handles.add(x.init(Q,"contentElementViewModel",
()=>this._setExpressionContentVM(Q,J)),"content-view-models");return C};A._compileAttachments=function(C,J){const {graphic:W}=this,{description:ba,title:X}=C;this.contentViewModels[J]=new n({graphic:W,...this._compileTitleAndDesc({title:X,description:ba})});return C};A._compileCustom=function(C,J){const {graphic:W}=this,{creator:ba,destroyer:X}=C;this.contentViewModels[J]=new u({graphic:W,creator:ba,destroyer:X});return C};A._compileTitleAndDesc=function({title:C,description:J}){const {_fieldInfoMap:W,
_sourceLayer:ba,graphic:X,formattedAttributes:v,_expressionAttributes:N}=this,{attributes:Q}=X,Z=v.global;return{title:f.substituteFieldsInLinksAndAttributes({attributes:Q,fieldInfoMap:W,globalAttributes:Z,expressionAttributes:N,layer:ba,text:C}),description:f.substituteFieldsInLinksAndAttributes({attributes:Q,fieldInfoMap:W,globalAttributes:Z,expressionAttributes:N,layer:ba,text:J})}};A._createFieldsVMParams=function(C,J){const {_effectivePopupTemplate:W,formattedAttributes:ba}=this,X={...ba.global,
...ba.content[J]};J=(null==C?void 0:C.fieldInfos)||(null==W?void 0:W.fieldInfos);J=null==J?void 0:J.filter(({fieldName:Z})=>f.isExpressionField(Z)||f.isRelatedField(Z)||X.hasOwnProperty(Z));const v=null==W?void 0:W.expressionInfos,{description:N,title:Q}=C;return{attributes:X,expressionInfos:v,fieldInfos:J,...this._compileTitleAndDesc({title:Q,description:N})}};A._compileFields=function(C,J){const W=C.clone();C=new y(this._createFieldsVMParams(C,J));this.contentViewModels[J]=C;W.fieldInfos=C.formattedFieldInfos.slice(0);
return W};A._createMediaVMParams=function(C,J){const {abilities:W,graphic:ba,_fieldInfoMap:X,formattedAttributes:v,_effectivePopupTemplate:N,relatedInfos:Q,_sourceLayer:Z,_expressionAttributes:ja}=this,{attributes:la}=ba,{description:ua,mediaInfos:Ba,title:Ga}=C;return{abilities:{chartAnimation:W.chartAnimation},activeMediaInfoIndex:C.activeMediaInfoIndex||0,attributes:la,layer:Z,fieldInfoMap:X,formattedAttributes:{...v.global,...v.content[J]},expressionAttributes:ja,mediaInfos:Ba,popupTemplate:N,
relatedInfos:Q,...this._compileTitleAndDesc({title:Ga,description:ua})}};A._compileMedia=function(C,J){const W=C.clone();C=new O(this._createMediaVMParams(C,J));W.mediaInfos=C.formattedMediaInfos.slice(0);this.contentViewModels[J]=C;return W};A._createTextVMParams=function(C){const {graphic:J,_fieldInfoMap:W,_sourceLayer:ba,_expressionAttributes:X}=this;if(C&&C.text){const {attributes:v}=J;C.text=f.substituteFieldsInLinksAndAttributes({attributes:v,fieldInfoMap:W,globalAttributes:this.formattedAttributes.global,
expressionAttributes:X,layer:ba,text:C.text})}return{graphic:J,creator:C.text}};A._compileText=function(C,J){C=C.clone();this.contentViewModels[J]=new u(this._createTextVMParams(C));return C};A._compileLastEditInfo=function(){const {_effectivePopupTemplate:C,_sourceLayer:J,graphic:W}=this;if(C){var {lastEditInfoEnabled:ba}=C,X=null==J?void 0:J.editFieldsInfo;if(ba&&X)return f.formatEditInfo(X,W.attributes)}};A._compileTitle=function(C){const {_fieldInfoMap:J,_sourceLayer:W,graphic:ba,_expressionAttributes:X}=
this,{attributes:v}=ba;return f.substituteFieldsInLinksAndAttributes({attributes:v,fieldInfoMap:J,globalAttributes:this.formattedAttributes.global,expressionAttributes:X,layer:W,text:C})};A._getTitle=function(){var C=e._asyncToGenerator(function*(){const {_effectivePopupTemplate:J,graphic:W}=this;return f.graphicCallback(null==J?void 0:J.title,{graphic:W})});return function(){return C.apply(this,arguments)}}();A._getContent=function(){var C=e._asyncToGenerator(function*(){const {_effectivePopupTemplate:J,
graphic:W}=this;return f.graphicCallback(null==J?void 0:J.content,{graphic:W})});return function(){return C.apply(this,arguments)}}();A._queryFeature=function(){var C=e._asyncToGenerator(function*(J){const {_featureAbortController:W,_sourceLayer:ba,graphic:X,_effectivePopupTemplate:v,spatialReference:N,map:Q,view:Z}=this,{content:{value:ja},title:{value:la}}=yield K.eachAlways({content:this._getContent(),title:this._getTitle()});W===this._featureAbortController&&X&&(yield f.queryUpdatedFeature({graphic:X,
popupTemplate:v,layer:ba,spatialReference:N},J),{expressionAttributes:{value:J}}=yield K.eachAlways({checkForRelatedFeatures:this._checkForRelatedFeatures(J),expressionAttributes:z.createCompiledExpressions({expressionInfos:null==v?void 0:v.expressionInfos,spatialReference:N,graphic:X,map:Q,interceptor:S.interceptor,view:Z})}),W===this._featureAbortController&&X&&(this._expressionAttributes=J,this._graphicExpressionAttributes={...X.attributes,...J},this._set("formattedAttributes",this._createFormattedAttributes(ja)),
this._set("title",this._compileTitle(la)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(ja)||null)))});return function(J){return C.apply(this,arguments)}}();A._createMediaFormattedAttributes=function({contentElement:C,contentElementIndex:J,formattedAttributes:W}){const {_effectivePopupTemplate:ba,graphic:X,relatedInfos:v,_sourceLayer:N,_fieldInfoMap:Q,_graphicExpressionAttributes:Z}=this;W.content[J]=f.formatAttributes({fieldInfos:null==ba?void 0:
ba.fieldInfos,graphic:X,attributes:{...Z,...C.attributes},layer:N,fieldInfoMap:Q,relatedInfos:v})};A._createFieldsFormattedAttributes=function({contentElement:C,contentElementIndex:J,formattedAttributes:W}){if(C.fieldInfos){const {graphic:ba,relatedInfos:X,_sourceLayer:v,_fieldInfoMap:N,_graphicExpressionAttributes:Q}=this;W.content[J]=f.formatAttributes({fieldInfos:C.fieldInfos,graphic:ba,attributes:{...Q,...C.attributes},layer:v,fieldInfoMap:N,relatedInfos:X})}};A._createFormattedAttributes=function(C){const {_effectivePopupTemplate:J,
graphic:W,relatedInfos:ba,_sourceLayer:X,_fieldInfoMap:v,_graphicExpressionAttributes:N}=this,Q={global:f.formatAttributes({fieldInfos:null==J?void 0:J.fieldInfos,graphic:W,attributes:N,layer:X,fieldInfoMap:v,relatedInfos:ba}),content:[]};Array.isArray(C)&&C.forEach((Z,ja)=>{"fields"===Z.type&&this._createFieldsFormattedAttributes({contentElement:Z,contentElementIndex:ja,formattedAttributes:Q});"media"===Z.type&&this._createMediaFormattedAttributes({contentElement:Z,contentElementIndex:ja,formattedAttributes:Q})});
return Q};A._checkForRelatedFeatures=function(C){const {graphic:J,_effectivePopupTemplate:W}=this;return this._queryRelatedInfos(J,f.getAllFieldInfos(W),C)};A._queryRelatedInfos=function(){var C=e._asyncToGenerator(function*(J,W,ba){const {relatedInfos:X,_sourceLayer:v}=this;X.clear();const N=D.isSome(v.associatedLayer)?yield v.associatedLayer.load(ba):v;if(N){var Q=W.filter(la=>la&&f.isRelatedField(la.fieldName));if(Q&&Q.length){W.forEach(la=>this._configureRelatedInfo(la,N));var Z=yield F.queryLayerInfos({relatedInfos:X,
layer:N},ba);Object.keys(Z).forEach(la=>{var ua;const Ba=X.get(la.toString());la=null==(ua=Z[la])?void 0:ua.value;Ba&&la&&(Ba.layerInfo=la.data)});var ja=yield F.queryRelatedFeatures({graphic:J,relatedInfos:X,layer:N},ba);Object.keys(ja).forEach(la=>{var ua;F.setRelatedFeatures(null==(ua=ja[la])?void 0:ua.value,X.get(la.toString()))})}}});return function(J,W,ba){return C.apply(this,arguments)}}();A._configureRelatedInfo=function(C,J){const {relatedInfos:W}=this,ba=F.getRelatedFieldInfo(C.fieldName);
if(ba){var {layerId:X,fieldName:v}=ba;X&&(J=W.get(X.toString())||F.createRelatedInfo(X,J))&&(F.updateRelatedInfo({relatedInfo:J,fieldName:v,fieldInfo:C}),this.relatedInfos.set(X,J))}};e._createClass(L,[{key:"_effectivePopupTemplate",get:function(){return D.isSome(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}},{key:"_fieldInfoMap",get:function(){return f.createfieldInfoMap(f.getAllFieldInfos(this._effectivePopupTemplate),this._sourceLayer)}},{key:"_sourceLayer",
get:function(){return f.getSourceLayer(this.graphic)}},{key:"state",get:function(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}},{key:"graphic",set:function(C){this._set("graphic",C?C.clone():null)}},{key:"spatialReference",get:function(){return this.get("view.spatialReference")||null},set:function(C){void 0===C?this._clearOverride("spatialReference"):this._override("spatialReference",C)}},{key:"map",get:function(){return this.get("view.map")||null},
set:function(C){void 0===C?this._clearOverride("map"):this._override("map",C)}},{key:"waitingForContent",get:function(){return!!this._featureAbortController}}]);return L}(h);h.interceptor=new E.FeatureSetQueryInterceptor(f.preLayerQueryCallback,f.preRequestCallback);q.__decorate([d.property()],h.prototype,"_error",void 0);q.__decorate([d.property()],h.prototype,"_featureAbortController",void 0);q.__decorate([d.property({readOnly:!0})],h.prototype,"_effectivePopupTemplate",null);q.__decorate([d.property({readOnly:!0})],
h.prototype,"_fieldInfoMap",null);q.__decorate([d.property({readOnly:!0})],h.prototype,"_sourceLayer",null);q.__decorate([d.property()],h.prototype,"abilities",void 0);q.__decorate([B.cast("abilities")],h.prototype,"castAbilities",null);q.__decorate([d.property({readOnly:!0})],h.prototype,"content",void 0);q.__decorate([d.property({readOnly:!0})],h.prototype,"contentViewModels",void 0);q.__decorate([d.property({type:Boolean})],h.prototype,"defaultPopupTemplateEnabled",void 0);q.__decorate([d.property({readOnly:!0})],
h.prototype,"state",null);q.__decorate([d.property({readOnly:!0})],h.prototype,"formattedAttributes",void 0);q.__decorate([d.property({type:b,value:null})],h.prototype,"graphic",null);q.__decorate([d.property({readOnly:!0})],h.prototype,"lastEditInfo",void 0);q.__decorate([d.property({readOnly:!0})],h.prototype,"relatedInfos",void 0);q.__decorate([d.property()],h.prototype,"spatialReference",null);q.__decorate([d.property({readOnly:!0})],h.prototype,"title",void 0);q.__decorate([d.property()],h.prototype,
"map",null);q.__decorate([d.property({readOnly:!0})],h.prototype,"waitingForContent",null);q.__decorate([d.property()],h.prototype,"view",void 0);return h=S=q.__decorate([c.subclass("esri.widgets.FeatureViewModel")],h)})},"esri/arcade/featureset/support/FeatureSetQueryInterceptor":function(){define(["exports"],function(e){e.FeatureSetQueryInterceptor=function(q,b){this.preLayerQueryCallback=q;this.preRequestCallback=b;this.preLayerQueryCallback||(this.preLayerQueryCallback=E=>{});this.preRequestCallback||
(this.preLayerQueryCallback=E=>{})};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Feature/support/FeatureContentMixin":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/set ../../../core/accessorSupport/decorators/subclass ../../support/widget ../../support/jsxFactory".split(" "),function(e,q,b,E,h,r,
w,D,K,I,x){e.FeatureContentMixin=d=>{d=function(g){function k(){var B=g.apply(this,arguments)||this;B.renderNodeContent=c=>I.isWidget(c)&&!c.destroyed?x.tsx("div",{key:c},c.render()):c instanceof HTMLElement?x.tsx("div",{key:c,bind:c,afterCreate:B._attachToNode}):I.hasDomNode(c)?x.tsx("div",{key:c,bind:c.domNode,afterCreate:B._attachToNode}):null;return B}q._inheritsLoose(k,g);k.prototype._attachToNode=function(B){B.appendChild(this)};return k}(d);return d=b.__decorate([K.subclass("esri.widgets.Feature.ContentMixin")],
d)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Spinner":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ./Widget ./Spinner/SpinnerViewModel ./support/widgetUtils ../core/Logger ./support/jsxFactory".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g,k,B,c){w=function(t){function n(p,y){p=t.call(this,p,y)||this;p._animationDelay=500;p._animationPromise=null;p.location=null;p.view=null;p.viewModel=new g;p.visible=!1;return p}e._inheritsLoose(n,t);var u=n.prototype;u.initialize=function(){this.own([h.watch(this,"visible",p=>this._visibleChange(p))])};u.destroy=function(){this._animationPromise=null};u.show=function(p){const {location:y,promise:O}=p;y&&(this.viewModel.location=y);this.visible=!0;p=()=>this.hide();
O&&O.catch(()=>{}).then(p)};u.hide=function(){this.visible=!1};u.render=function(){var {visible:p}=this,{screenLocation:y}=this.viewModel;y=!!y;p={["esri-spinner--start"]:p&&y,["esri-spinner--finish"]:!p&&y};y=this._getPositionStyles();return c.tsx("div",{class:this.classes("esri-spinner",p),styles:y})};u._visibleChange=function(p){if(p)this.viewModel.screenLocationEnabled=!0;else{var y=E.after(this._animationDelay);this._animationPromise=y;y.catch(()=>{}).then(()=>{this._animationPromise===y&&(this.viewModel.screenLocationEnabled=
!1,this._animationPromise=null)})}};u._getPositionStyles=function(){const {screenLocation:p,view:y}=this.viewModel;if(!y||b.isNone(p))return{};const {padding:O}=y;return{left:`${p.x-O.left}px`,top:`${p.y-O.top}px`}};return n}(d);q.__decorate([r.aliasOf("viewModel.location")],w.prototype,"location",void 0);q.__decorate([r.aliasOf("viewModel.view")],w.prototype,"view",void 0);q.__decorate([I.property({type:g})],w.prototype,"viewModel",void 0);q.__decorate([r.aliasOf("viewModel.visible")],w.prototype,
"visible",void 0);return w=q.__decorate([x.subclass("esri.widgets.Spinner")],w)})},"esri/widgets/Spinner/SpinnerViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../support/AnchorElementViewModel".split(" "),function(e,q,b,E,h,r,w,D){E=function(K){function I(x){x=K.call(this,x)||this;x.visible=
!1;return x}e._inheritsLoose(I,K);return I}(D);q.__decorate([b.property()],E.prototype,"visible",void 0);return E=q.__decorate([w.subclass("esri.widgets.CompassViewModel")],E)})},"esri/widgets/support/AnchorElementViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Evented ../../core/Handles ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x){b=function(d){function g(B){var c=d.call(this,B)||this;c._anchorHandles=new E;c.location=null;c.screenLocation=null;c.screenLocationEnabled=!1;c.view=null;c._anchorHandles.add([r.watch(e._assertThisInitialized(c),["screenLocationEnabled","location","view.size","view.stationary"],()=>c._updateScreenPointAndHandle()),r.watch(e._assertThisInitialized(c),["view","view.ready"],()=>c._wireUpView())]);return c}e._inheritsLoose(g,d);var k=g.prototype;k.destroy=function(){this.view=
null;this._anchorHandles&&this._anchorHandles.destroy();this._viewpointHandle=this._anchorHandles=null};k._wireUpView=function(){this._anchorHandles.remove("view");this._viewpointHandle=null;if(this.get("view.ready")){this._setScreenLocation();var {view:B}=this;B=r.pausable(B,"3d"===B.type?"camera":"viewpoint",()=>this._viewpointChange());this._anchorHandles.add(B,"view");this._viewpointHandle=B;this._toggleWatchingViewpoint()}};k._viewpointChange=function(){this._setScreenLocation();this.emit("view-change")};
k._updateScreenPointAndHandle=function(){this._setScreenLocation();this._toggleWatchingViewpoint()};k._toggleWatchingViewpoint=function(){const {_viewpointHandle:B,location:c,screenLocationEnabled:t}=this;B&&(c&&t?B.resume():B.pause())};k._setScreenLocation=function(){const {location:B,view:c,screenLocationEnabled:t}=this;var n=this.get("view.ready");n=t&&n&&h.isSome(B)?c.toScreen(B):null;this._set("screenLocation",n)};return g}(b.EventedAccessor);q.__decorate([w.property()],b.prototype,"location",
void 0);q.__decorate([w.property({readOnly:!0})],b.prototype,"screenLocation",void 0);q.__decorate([w.property()],b.prototype,"screenLocationEnabled",void 0);q.__decorate([w.property()],b.prototype,"view",void 0);return b=q.__decorate([x.subclass("esri.widgets.support.AnchorElementViewModel")],b)})},"esri/widgets/Popup/PopupViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../symbols ../../core/Collection ../../core/Error ../../core/Handles ../../core/Logger ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/webMercatorUtils ../../layers/Layer ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionToggle ../../symbols/support/symbolUtils ../../views/input/InputManager ../../views/support/layerViewUtils ../Feature/FeatureViewModel ./actions ./actionUtils ../support/AnchorElementViewModel ../support/GoTo ../../geometry/Point ../../symbols/SimpleFillSymbol".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g,k,B,c,t,n,u,p,y,O,z,f,F,S,M,P,H,L,A){const C=r.ofType({key:"type",defaultKeyValue:"button",base:u,typeMap:{button:p,toggle:y}}),J=K.getLogger("esri.widgets.Popup.PopupViewModel");b=function(W){function ba(v){v=W.call(this,v)||this;v._handles=new D;v._pendingPromises=new Set;v._fetchFeaturesController=null;v._selectedClusterFeature=null;v.featurePage=null;v.actions=new C;v.defaultPopupTemplateEnabled=!1;v.autoCloseEnabled=!1;v.autoOpenEnabled=!0;v.browseClusterEnabled=
!1;v.content=null;v.featuresPerPage=20;v.featureViewModelAbilities=null;v.featureViewModels=[];v.highlightEnabled=!0;v.includeDefaultActions=!0;v.selectedClusterBoundaryFeature=new E({symbol:new A({outline:{width:1.5,color:"cyan"},style:"none"})});v.title=null;v.updateLocationEnabled=!1;v.view=null;v.visible=!1;v.zoomFactor=4;v.zoomToLocation=null;return v}e._inheritsLoose(ba,W);var X=ba.prototype;X.initialize=function(){this._handles.add([x.init(this,["autoOpenEnabled","view"],()=>this._autoOpenEnabledChange()),
this.on("view-change",()=>this._autoClose()),x.watch(this,["highlightEnabled","selectedFeature","visible","view"],()=>this._highlightFeature()),x.watch(this,"view.animation.state",v=>this._animationStateChange(v)),x.watch(this,"location",v=>this._locationChange(v)),x.watch(this,"selectedFeature",v=>this._selectedFeatureChange(v)),x.watch(this,["selectedFeatureIndex","featureCount","featuresPerPage"],()=>this._selectedFeatureIndexChange()),x.watch(this,["featurePage","selectedFeatureIndex","featureCount",
"featuresPerPage, featureViewModels"],()=>this._setGraphicOnFeatureViewModels()),x.watch(this,"featureViewModels",()=>this._featureViewModelsChange()),this.on("trigger-action",v=>M.triggerAction({event:v,view:this.view})),x.whenFalse(this,"waitingForResult",()=>this._waitingForResultChange(),!0),x.watch(this,["features","view","view.map","view.spatialReference"],()=>this._updateFeatureVMs()),x.watch(this,["view.scale"],this._viewScaleChange),x.whenFalse(this,"visible",()=>this.browseClusterEnabled=
!1),x.watch(this,"browseClusterEnabled",v=>v?this.enableClusterBrowsing():this.disableClusterBrowsing())])};X.destroy=function(){this._cancelFetchingFeatures();this._handles.destroy();this._handles=null;this._pendingPromises.clear();this.browseClusterEnabled=!1;this.view=null};X.centerAtLocation=function(){var {view:v}=this;const N=M.getSelectedTarget(this);return N?this.callGoTo({target:{target:N,scale:v.scale}}):(v=new w("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",
{target:N,view:v}),J.error(v),Promise.reject(v))};X.clear=function(){this.set({promises:[],features:[],content:null,title:null,location:null})};X.fetchFeatures=function(v,N){const {view:Q}=this;return Q&&v?Q.fetchPopupFeatures(v,{event:N&&N.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:N&&N.signal}):(v=new w("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:v,view:Q}),J.error(v),Promise.reject(v))};X.open=
function(v){v={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...v,visible:!0};var {fetchFeatures:N}=v;delete v.fetchFeatures;N&&this._setFetchFeaturesPromises(v.location);N=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const Q of N)delete v[Q];this.set(v)};X.triggerAction=function(v){(v=this.allActions.getItemAt(v))&&!v.disabled&&this.emit("trigger-action",{action:v})};X.next=function(){this.selectedFeatureIndex+=1;return this};X.previous=function(){--this.selectedFeatureIndex;return this};
X.disableClusterBrowsing=function(){M.removeClusteredFeaturesForBrowsing(this);this._clearBrowsedClusterGraphics()};X.enableClusterBrowsing=function(){var v=e._asyncToGenerator(function*(){yield M.displayClusterExtent(this);yield M.browseAggregateFeatures(this)});return function(){return v.apply(this,arguments)}}();X._animationStateChange=function(v){this.zoomToLocation||(S.zoomToFeature.disabled="waiting-for-target"===v)};X._clearBrowsedClusterGraphics=function(){var v;const N=null==(v=this.view)?
void 0:v.graphics;N&&(N.remove(this.selectedClusterBoundaryFeature),N.remove(this._selectedClusterFeature));this._selectedClusterFeature=null;this.selectedClusterBoundaryFeature.geometry=null};X._viewScaleChange=function(){var v;null!=(v=this.selectedFeature)&&v.isAggregate?(this.visible=this.browseClusterEnabled=!1,this.clear()):this.browseClusterEnabled&&(this.browseClusterEnabled=!1,this.features=[this.selectedFeature])};X._locationChange=function(v){const {selectedFeature:N,updateLocationEnabled:Q}=
this;Q&&v&&(!N||N.geometry)&&this.centerAtLocation()};X._selectedFeatureIndexChange=function(){this.featurePage=1<this.featureCount?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null};X._featureViewModelsChange=function(){this.featurePage=1<this.featureCount?1:null};X._setGraphicOnFeatureViewModels=function(){const {features:v,featureCount:N,featurePage:Q,featuresPerPage:Z,featureViewModels:ja}=this;if(null!==Q){var la=((Q-1)*Z+N)%N;ja.slice(la,la+Z).forEach((ua,Ba)=>{ua&&!ua.graphic&&
(ua.graphic=v[la+Ba])})}};X._selectedFeatureChange=function(){var v=e._asyncToGenerator(function*(N){if(N){var {location:Q,updateLocationEnabled:Z,view:ja}=this;this.browseClusterEnabled?(this._selectedClusterFeature&&(ja.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),N.isAggregate||(N.symbol=yield O.getDisplayedSymbol(N),this._selectedClusterFeature=N,ja.graphics.add(this._selectedClusterFeature))):!Z&&Q||!N.geometry?Z&&!N.geometry&&this.centerAtLocation().then(()=>
{this.location=ja.center.clone()}):this.location=I.unwrap(this._getPointFromGeometry(N.geometry))}});return function(N){return v.apply(this,arguments)}}();X._waitingForResultChange=function(){!this.featureCount&&this.promises&&(this.visible=!1)};X._setFetchFeaturesPromises=function(v){return this._fetchFeaturesWithController(this._getScreenPoint(v||this.location)).then(N=>{const {clientOnlyGraphics:Q,promisesPerLayerView:Z}=N;N=Promise.resolve(Q);const ja=Z.map(la=>la.promise);this.promises=[N,...ja]})};
X._destroyFeatureVMs=function(){this.featureViewModels.forEach(v=>v&&!v.destroyed&&v.destroy());this._set("featureViewModels",[])};X._updateFeatureVMs=function(){const {selectedFeature:v,features:N,featureViewModels:Q}=this;null!=v&&v.isAggregate||(this.browseClusterEnabled=!1);this._destroyFeatureVMs();if(N&&N.length){var Z=Q.slice(0),ja=[];N.forEach((la,ua)=>{if(la){var Ba=null;Z.some((Ma,ka)=>{Ma&&Ma.graphic===la&&(Ba=Ma,Z.splice(ka,1));return!!Ba});if(Ba)ja[ua]=Ba;else{var Ga,Fa;const Ma=new F({abilities:this.featureViewModelAbilities,
defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:null==(Ga=this.view)?void 0:Ga.spatialReference,graphic:la===v?la:null,map:null==(Fa=this.view)?void 0:Fa.map,view:this.view});ja[ua]=Ma}}});Z.forEach(la=>la&&!la.destroyed&&la.destroy());this._set("featureViewModels",ja)}};X._getScreenPoint=function(v){const {view:N}=this;return N&&v&&"function"===typeof N.toScreen?N.toScreen(v):null};X._autoOpenEnabledChange=function(){const {_handles:v,autoOpenEnabled:N}=this;v.remove("auto-fetch-features");
if(N&&this.view){const Q=this.view.on("click",Z=>{"mouse"===Z.pointerType&&0!==Z.button||this._fetchFeaturesAndOpen(Z)},z.ViewEventPriorities.WIDGET);v.add(Q,"auto-fetch-features")}};X._cancelFetchingFeatures=function(){const v=this._fetchFeaturesController;v&&v.abort();this._fetchFeaturesController=null;this.notifyChange("waitingForResult")};X._fetchFeaturesWithController=function(v,N){this._cancelFetchingFeatures();const Q=new AbortController,{signal:Z}=Q;this._fetchFeaturesController=Q;this.notifyChange("waitingForResult");
v=this.fetchFeatures(v,{signal:Z,event:N});v.catch(()=>{}).then(()=>{this._fetchFeaturesController=null;this.notifyChange("waitingForResult")});return v};X._fetchFeaturesAndOpen=function(v){const {screenPoint:N,mapPoint:Q}=v,{view:Z}=this;this._fetchFeaturesWithController(N,v).then(ja=>{const {clientOnlyGraphics:la,promisesPerLayerView:ua,location:Ba}=ja,Ga=[Promise.resolve(la),...ua.map(Fa=>Fa.promise)];Z.popup.open({location:Ba||Q,promises:Ga});return ja})};X._updatePendingPromises=function(v){v&&
this._pendingPromises.has(v)&&(this._pendingPromises.delete(v),this.notifyChange("pendingPromisesCount"))};X._autoClose=function(){this.autoCloseEnabled&&(this.visible=!1)};X._getPointFromGeometry=function(v){return I.isNone(v)?null:"point"===v.type?v:"extent"===v.type?v.center:"polygon"===v.type?v.centroid:"multipoint"===v.type||"polyline"===v.type?v.extent.center:null};X._getLayerView=function(){var v=e._asyncToGenerator(function*(N,Q){yield N.when();return N.whenLayerView(Q)});return function(N,
Q){return v.apply(this,arguments)}}();X._highlightFeature=function(){var v=e._asyncToGenerator(function*(){this._handles.remove("highlight");const {selectedFeature:N,highlightEnabled:Q,view:Z,visible:ja}=this;if(N&&Z&&Q&&ja){var {layer:la,sourceLayer:ua}=N;if("map-notes"===(null==ua?void 0:ua.type)||"subtype-group"===(null==ua?void 0:ua.type))la=ua;if(la&&la instanceof n){var Ba=this._getLayerView(Z,la);this._highlightPromise=Ba;var Ga=yield Ba;if(Ga&&f.highlightsSupported(Ga)&&this._highlightPromise===
Ba&&this.selectedFeature&&this.highlightEnabled&&this.visible){Ba="imagery"===la.type?void 0:"objectIdField"in la&&la.objectIdField;var Fa=N.attributes;Ga=Ga.highlight(Fa&&Ba&&Fa[Ba]||N);this._handles.add(Ga,"highlight")}}}});return function(){return v.apply(this,arguments)}}();X._updateFeatures=function(v){const {features:N}=this;v&&v.length&&(N.length?(v=v.filter(Q=>-1===N.indexOf(Q)),this.features=N.concat(v)):this.features=v)};e._createClass(ba,[{key:"isLoadingFeature",get:function(){return this.featureViewModels.some(v=>
v.waitingForContent)}},{key:"active",get:function(){return!(!this.visible||this.waitingForResult)}},{key:"allActions",get:function(){const v=this._get("allActions")||new C;v.removeAll();const {actions:N,defaultActions:Q,defaultPopupTemplateEnabled:Z,includeDefaultActions:ja,selectedFeature:la}=this;var ua=ja?Q.concat(N):N;const Ba=la&&("function"===typeof la.getEffectivePopupTemplate&&la.getEffectivePopupTemplate(Z)||la.popupTemplate),Ga=Ba&&Ba.actions;(ua=Ba&&Ba.overwriteActions?Ga:Ga?Ga.concat(ua):
ua)&&ua.filter(Boolean).forEach(Fa=>v.add(Fa));return v}},{key:"defaultActions",get:function(){var v;const N=this._get("defaultActions")||new C;N.removeAll();N.addMany(null!=(v=this.selectedFeature)&&v.isAggregate?[S.zoomToClusteredFeatures.clone(),S.browseClusteredFeatures.clone()]:[S.zoomToFeature.clone()]);return N}},{key:"featureCount",get:function(){return this.features.length}},{key:"features",get:function(){return this._get("features")||[]},set:function(v){v=v||[];this._set("features",v);const {pendingPromisesCount:N,
promiseCount:Q,selectedFeatureIndex:Z}=this,ja=Q&&v.length;ja&&N&&-1===Z?this.selectedFeatureIndex=0:ja&&-1!==Z||(this.selectedFeatureIndex=v.length?0:-1)}},{key:"location",get:function(){return this._get("location")||null},set:function(v){const N=this.get("view.spatialReference.isWebMercator");v&&v.get("spatialReference.isWGS84")&&N&&(v=t.geographicToWebMercator(v));this._set("location",v)}},{key:"pendingPromisesCount",get:function(){return this._pendingPromises.size}},{key:"waitingForResult",get:function(){return!(!(this._fetchFeaturesController||
0<this.pendingPromisesCount)||0!==this.featureCount)}},{key:"promiseCount",get:function(){return this.promises.length}},{key:"promises",get:function(){return this._get("promises")||[]},set:function(v){this._pendingPromises.clear();this.features=[];Array.isArray(v)&&v.length?(this._set("promises",v),v=v.slice(0),v.forEach(N=>{this._pendingPromises.add(N);N.then(Q=>{this._pendingPromises.has(N)&&this._updateFeatures(Q);this._updatePendingPromises(N)},()=>this._updatePendingPromises(N))})):this._set("promises",
[]);this.notifyChange("pendingPromisesCount")}},{key:"selectedFeature",get:function(){const {features:v,selectedFeatureIndex:N}=this;return-1===N?null:v[N]||null}},{key:"selectedFeatureIndex",get:function(){const v=this._get("selectedFeatureIndex");return"number"===typeof v?v:-1},set:function(v){const {featureCount:N}=this;v=isNaN(v)||-1>v||!N?-1:(v+N)%N;this._set("selectedFeatureIndex",v)}},{key:"selectedFeatureViewModel",get:function(){return this.featureViewModels[this.selectedFeatureIndex]||null}},
{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}}]);return ba}(H.GoToMixin(P));q.__decorate([d.property()],b.prototype,"featurePage",void 0);q.__decorate([d.property()],b.prototype,"isLoadingFeature",null);q.__decorate([d.property({type:C})],b.prototype,"actions",void 0);q.__decorate([d.property({readOnly:!0})],b.prototype,"active",null);q.__decorate([d.property({readOnly:!0})],b.prototype,"allActions",null);q.__decorate([d.property({type:Boolean})],b.prototype,"defaultPopupTemplateEnabled",
void 0);q.__decorate([d.property()],b.prototype,"autoCloseEnabled",void 0);q.__decorate([d.property()],b.prototype,"autoOpenEnabled",void 0);q.__decorate([d.property()],b.prototype,"browseClusterEnabled",void 0);q.__decorate([d.property()],b.prototype,"content",void 0);q.__decorate([d.property({type:C,readOnly:!0})],b.prototype,"defaultActions",null);q.__decorate([d.property({readOnly:!0})],b.prototype,"featureCount",null);q.__decorate([d.property()],b.prototype,"features",null);q.__decorate([d.property()],
b.prototype,"featuresPerPage",void 0);q.__decorate([d.property()],b.prototype,"featureViewModelAbilities",void 0);q.__decorate([d.property({readOnly:!0})],b.prototype,"featureViewModels",void 0);q.__decorate([d.property()],b.prototype,"highlightEnabled",void 0);q.__decorate([d.property()],b.prototype,"includeDefaultActions",void 0);q.__decorate([d.property({type:L})],b.prototype,"location",null);q.__decorate([d.property({readOnly:!0})],b.prototype,"pendingPromisesCount",null);q.__decorate([d.property({readOnly:!0})],
b.prototype,"selectedClusterBoundaryFeature",void 0);q.__decorate([d.property({readOnly:!0})],b.prototype,"waitingForResult",null);q.__decorate([d.property({readOnly:!0})],b.prototype,"promiseCount",null);q.__decorate([d.property()],b.prototype,"promises",null);q.__decorate([d.property({value:null,readOnly:!0})],b.prototype,"selectedFeature",null);q.__decorate([d.property({value:-1})],b.prototype,"selectedFeatureIndex",null);q.__decorate([d.property({readOnly:!0})],b.prototype,"selectedFeatureViewModel",
null);q.__decorate([d.property({readOnly:!0})],b.prototype,"state",null);q.__decorate([d.property()],b.prototype,"title",void 0);q.__decorate([d.property()],b.prototype,"updateLocationEnabled",void 0);q.__decorate([d.property()],b.prototype,"view",void 0);q.__decorate([d.property()],b.prototype,"visible",void 0);q.__decorate([d.property()],b.prototype,"zoomFactor",void 0);q.__decorate([d.property()],b.prototype,"zoomToLocation",void 0);q.__decorate([d.property()],b.prototype,"centerAtLocation",null);
return b=q.__decorate([c.subclass("esri.widgets.Popup.PopupViewModel")],b)})},"esri/symbols/support/symbolUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ../../support/arcadeOnDemand ./previewUtils ./utils".split(" "),function(e,q,b,E,h,r,w,D){function K(c,t){if(t&&(c.style.filter=D.getCSSFilterFromEffectList(t),t=t.effects))for(const n of t)if("drop-shadow"===(null==n?void 0:n.type)){0>n.offsetX?c.style.marginLeft=`${Math.abs(n.offsetX)}px`:
c.style.marginRight=`${n.offsetX}px`;break}}function I(c,t){return x.apply(this,arguments)}function x(){x=b._asyncToGenerator(function*(c,t){switch(c.type){case "web-style":var {previewWebStyleSymbol:n}=yield new Promise((u,p)=>e(["./previewWebStyleSymbol"],u,p));return n(c,I,t);case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return{previewSymbol3D:n}=yield new Promise((u,p)=>e(["./previewSymbol3D"],u,p)),n(c,t);case "simple-marker":case "simple-line":case "simple-fill":case "picture-marker":case "picture-fill":case "text":return{previewSymbol2D:n}=
yield new Promise((u,p)=>e(["./previewSymbol2D"],u,p)),n(c,t);case "cim":return{previewCIMSymbol:n}=yield new Promise((u,p)=>e(["./previewCIMSymbol"],u,p)),n(c,t)}});return x.apply(this,arguments)}function d(c){return c&&"opacity"in c?c.opacity*d(c.parent):1}function g(){g=b._asyncToGenerator(function*(c,t){var n,u;if(c){var p=c.sourceLayer;p=null!=(n=h.isSome(t)&&null!=(u=t.useSourceLayer)&&u?p:c.layer)?n:p;n=d(p);if(h.isSome(c.symbol)&&(!h.isSome(t)||!0!==t.ignoreGraphicSymbol))return c="web-style"===
c.symbol.type?yield c.symbol.fetchSymbol(h.isSome(t)?t.abortOptions:null):c.symbol.clone(),D.applyColorToSymbol(c,null,n),c;var y=h.isSome(t)&&t.renderer||p&&"renderer"in p&&p.renderer;if(u=y&&"getSymbolAsync"in y?yield y.getSymbolAsync(c,t):null){u="web-style"===u.type?yield u.fetchSymbol(h.isSome(t)?t.abortOptions:null):u.clone();if(!("visualVariables"in y&&y.visualVariables&&y.visualVariables.length))return D.applyColorToSymbol(u,null,n),u;"arcadeRequiredForVisualVariables"in y&&y.arcadeRequiredForVisualVariables&&
(h.isNone(t)||h.isNone(t.arcade))&&(t={...h.unwrap(t)},t.arcade=yield r.loadArcade());p=yield new Promise((M,P)=>e(["../../renderers/visualVariables/support/visualVariableUtils"],M,P));var O=[],z=[],f=[],F=[];for(var S of y.visualVariables)switch(S.type){case "color":O.push(S);break;case "opacity":z.push(S);break;case "rotation":F.push(S);break;case "size":S.target||f.push(S)}S=(S=!!O.length&&O[O.length-1])?p.getColor(S,c,t):null;z=(z=!!z.length&&z[z.length-1])?p.getOpacity(z,c,t):null;null!=n&&(z=
null!=z?z*n:n);D.applyColorToSymbol(u,S,z);f.length&&(n=p.getAllSizes(f,c,t),yield D.applySizesToSymbol(u,n));for(const M of F)D.applyRotationToSymbol(u,p.getRotationAngle(M,c,t),M.axis);return u}}});return g.apply(this,arguments)}function k(){k=b._asyncToGenerator(function*(c,t){var n;if(c){var u=d(c.layer||c.sourceLayer);if(h.isSome(c.symbol)&&(!h.isSome(t)||!0!==t.ignoreGraphicSymbol))return c="web-style"===c.symbol.type?yield c.symbol.fetchSymbol(h.isSome(t)?t.abortOptions:null):c.symbol.clone(),
D.getColorFromSymbol(c,u);var p=h.isSome(t)&&t.renderer||c.get("layer.renderer")||c.get("sourceLayer.renderer"),y=yield p.getSymbolAsync(c,t);if(y){y="web-style"===y.type?yield y.fetchSymbol(h.isSome(t)?t.abortOptions:null):y.clone();y=D.getColorFromSymbol(y,u);if(!("visualVariables"in p)||"visualVariables"in p&&!p.visualVariables||"visualVariables"in p&&(null==(n=p.visualVariables)||!n.length))return y;p.arcadeRequiredForVisualVariables&&(h.isNone(t)||h.isNone(t.arcade))&&(t={...h.unwrap(t)},t.arcade=
yield r.loadArcade());n=yield new Promise((f,F)=>e(["../../renderers/visualVariables/support/visualVariableUtils"],f,F));var O=[],z=[];for(const f of p.visualVariables)switch(f.type){case "color":O.push(f);break;case "opacity":z.push(f)}p=(p=0<O.length?O[O.length-1]:null)?n.getColor(p,c,t):y;c=(y=0<z.length?z[z.length-1]:null)?n.getOpacity(y,c,t):null;null!=u&&(c=null!=c?c*u:u);return p?D.applyOpacityToColor(p,c):null}}});return k.apply(this,arguments)}let B=null;q.getDisplayedColor=function(c,t){return k.apply(this,
arguments)};q.getDisplayedSymbol=function(c,t){return g.apply(this,arguments)};q.renderColorRampPreviewHTML=function(c,t={}){var n="horizontal"===t.align;const {width:u=n?75:24,height:p=n?24:75,gradient:y=!0}=t;var O=window.devicePixelRatio,z=u*O,f=p*O;O=document.createElement("canvas");O.width=z;O.height=f;O.style.width=`${u}px`;O.style.height=`${p}px`;const F=O.getContext("2d");var S=n?z:0,M=n?0:f;if(y){const P=F.createLinearGradient(0,0,S,M);n=c.length;const H=1===n?0:1/(n-1);c.forEach((L,A)=>
P.addColorStop(A*H,L.toString()));F.fillStyle=P;F.fillRect(0,0,z,f)}else{z=n?z/c.length:z;f=n?f:f/c.length;M=S=0;for(const P of c)F.fillStyle=P.toString(),F.fillRect(S,M,z,f),S=n?S+z:0,M=n?0:M+f}c=document.createElement("div");c.style.width=`${u}px`;c.style.height=`${p}px`;K(c,null==t?void 0:t.effectList);c.appendChild(O);return c};q.renderDotDensityPreviewHTML=function(c,t,n){const {backgroundColor:u,outline:p,dotSize:y}=c;n=n&&n.swatchSize||w.SymbolSizeDefaults.size;const O=Math.round(n*n/y**2*
.8),z=window.devicePixelRatio;c=document.createElement("canvas");const f=n*z;c.width=f;c.height=f;c.style.width=`${c.width/z}px`;c.style.height=`${c.height/z}px`;const F=c.getContext("2d");u&&(F.fillStyle=u.toCss(!0),F.fillRect(0,0,f,f),F.fill());F.fillStyle=t.toCss(!0);if(B&&B.length/2===O)for(t=0;t<2*O;t+=2)F.fillRect(B[t],B[t+1],y*z,y*z),F.fill();else for(B=[],t=0;t<2*O;t+=2){const S=Math.floor(Math.random()*(f-0+1)),M=Math.floor(Math.random()*(f-0+1));B.push(S,M);F.fillRect(S,M,y*z,y*z);F.fill()}p&&
(p.color&&(F.strokeStyle=p.color.toCss(!0)),F.lineWidth=p.width,F.strokeRect(0,0,f,f));n=new Image(n,n);n.src=c.toDataURL();return n};q.renderPreviewHTML=I;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/symbols/support/previewUtils":function(){define(["exports","../../Color"],function(e,q){function b(E,h){return Math.round(Math.min(Math.max(E+191.25*h,0),255))}e.SymbolSizeDefaults=void 0;(function(E){E[E.size=22]="size";E[E.lineWidth=50]="lineWidth";E[E.maxSize=120]="maxSize";E[E.maxOutlineSize=
80]="maxOutlineSize";E[E.tallSymbolWidth=20]="tallSymbolWidth"})(e.SymbolSizeDefaults||(e.SymbolSizeDefaults={}));e.adjustColorBrightness=function(E,h){if("type"in E&&("linear"===E.type||"pattern"===E.type))return E;E=new q(E);return new q([b(E.r,h),b(E.g,h),b(E.b,h),E.a])};e.adjustColorComponentBrightness=b;e.getConeShapes=function(E,h){let r=h?e.SymbolSizeDefaults.tallSymbolWidth:E;h=h?4:6;r=r<=e.SymbolSizeDefaults.size?r-.5*h:r-h;h=.15*r;const w=r;E-=h;return[{type:"ellipse",cx:.5*r,cy:E,rx:.5*
r,ry:h},{type:"path",path:[{command:"M",values:[.5*w,0]},{command:"L",values:[w,E]},{command:"L",values:[0,E]},{command:"Z",values:[]}]}]};e.getCubeShapes=function(E,h){let r=h?e.SymbolSizeDefaults.tallSymbolWidth:E;var w=h?4:6;w=r=r<=e.SymbolSizeDefaults.size?r-.5*w:r-w;h=h?.35*r:.5*r;return[{type:"path",path:[{command:"M",values:[.5*w,0]},{command:"L",values:[w,.5*h]},{command:"L",values:[.5*w,h]},{command:"L",values:[0,.5*h]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,
.5*h]},{command:"L",values:[.5*w,h]},{command:"L",values:[.5*w,E]},{command:"L",values:[0,E-.5*h]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*w,h]},{command:"L",values:[.5*w,E]},{command:"L",values:[w,E-.5*h]},{command:"L",values:[w,.5*h]},{command:"Z",values:[]}]}]};e.getCylinderShapes=function(E,h){var r=h?e.SymbolSizeDefaults.tallSymbolWidth:E;h=h?4:6;r=r<=e.SymbolSizeDefaults.size?r-.5*h:r-h;h=.5*r;const w=.15*r;E-=w;return[{type:"ellipse",cx:.5*r,cy:E,rx:h,ry:w},{type:"path",
path:[{command:"M",values:[0,w]},{command:"L",values:[0,E]},{command:"L",values:[r,E]},{command:"L",values:[r,w]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*r,cy:w,rx:h,ry:w}]};e.getDiamondShapes=function(E){var h=E;h=h<e.SymbolSizeDefaults.size?h-2:h-4;const r=Math.floor(E/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*h,0]},{command:"L",values:[h,.5*E-r]},{command:"L",values:[.45*h-r,.5*E+r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*h,0]},{command:"L",
values:[.45*h-r,.5*E+r]},{command:"L",values:[0,.5*E-r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*E-r]},{command:"L",values:[.45*h-r,.5*E+r]},{command:"L",values:[.45*h,E]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*h,E]},{command:"L",values:[h,.5*E-r]},{command:"L",values:[.45*h-r,.5*E+r]},{command:"Z",values:[]}]}]};e.getExtrudeSymbolShapes=function(E){const h=e.SymbolSizeDefaults.size;E*=.5;return[{type:"path",path:[{command:"M",values:[0,
.35*h]},{command:"L",values:[.3*h,.7*h]},{command:"L",values:[.3*h,.7*h+E]},{command:"L",values:[0,.7*h+E-.35*h]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*h,.7*h]},{command:"L",values:[.3*h,.7*h+E]},{command:"L",values:[h,E]},{command:"L",values:[h,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*h,0]},{command:"L",values:[h,0]},{command:"L",values:[.3*h,.7*h]},{command:"L",values:[0,.35*h]},{command:"Z",values:[]}]}]};e.getInvertedConeShapes=function(E){let h=
E;h=h<e.SymbolSizeDefaults.size?h-3:h-6;const r=.15*h,w=h;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[w,0]},{command:"L",values:[.5*w,E-r]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*h,cy:0,rx:.5*h,ry:r}]};e.getPathSymbolShapes=function(E,h,r){var w=e.SymbolSizeDefaults.size;let D=w,K=w;1>E?D*=.75:1<E&&(K*=1.25);E=w;h&&r&&(D=K=E=w=0);return[{type:"path",path:[{command:"M",values:[E,0]},{command:"L",values:[r?E:.875*E,0]},{command:"L",values:[r?D-.5*E:0,K-.5*w]},
{command:"L",values:[D-.5*E,K-.5*w]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[E,0]},{command:"L",values:[E,h?0:.125*w]},{command:"L",values:[D-.5*E,h?K-.5*w:w]},{command:"L",values:[D-.5*E,K-.5*w]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[D-.5*E,K-.5*w]},{command:"L",values:[r?D-.5*E:0,K-.5*w]},{command:"L",values:[r?D-.5*E:0,h?K-.5*w:w]},{command:"L",values:[D-.5*E,h?K-.5*w:w]},{command:"Z",values:[]}]}]};e.getTetrahedronShapes=function(E){var h=
E;h=h<e.SymbolSizeDefaults.size?h-1:h-2;return[{type:"path",path:[{command:"M",values:[.45*E,0]},{command:"L",values:[E,h]},{command:"L",values:[.45*E,.6*h]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*E,0]},{command:"L",values:[.45*E,.6*h]},{command:"L",values:[0,h]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,h]},{command:"L",values:[.45*E,.6*h]},{command:"L",values:[E,h]},{command:"Z",values:[]}]}]};e.getWaterSymbolShapes=function(){return[{type:"path",
path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},
{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]};
e.shapes={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],
cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],
tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",
path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g){function k(A){A=A.symbolLayers;if(!A)return null;let C=null;A.forEach(J=>{if("object"!==J.type||null==J.resource.href)C="water"===J.type?D.unwrap(J.color):D.isSome(J.material)?D.unwrap(J.material.color):null});return C?new E(C):null}function B(A,C){if(null==C)return A;A=A.toRgba();A[3]*=C;return new E(A)}function c(A,C,J){if(A=A.symbolLayers){var W=ba=>{ba=D.isSome(ba)?ba:null;C=C||ba||null!=J&&L;return B(C,J)};A.forEach(ba=>{if("object"!==ba.type||null==ba.resource.href||
C)if("water"===ba.type)ba.color=W(ba.color);else{var X=D.isSome(ba.material)?ba.material.color:null;X=W(X);D.isNone(ba.material)?ba.material=new g.Symbol3DMaterial({color:X}):ba.material.color=X;null!=J&&"outline"in ba&&D.isSome(ba.outline)&&D.isSome(ba.outline.color)&&(ba.outline.color=B(ba.outline.color,J))}})}}function t(A,C){return n.apply(this,arguments)}function n(){n=b._asyncToGenerator(function*(A,C){(A=A.symbolLayers)&&(yield r.forEach(A,function(){var J=b._asyncToGenerator(function*(W){return u(W,
C)});return function(W){return J.apply(this,arguments)}}()))});return n.apply(this,arguments)}function u(A,C){return p.apply(this,arguments)}function p(){p=b._asyncToGenerator(function*(A,C){switch(A.type){case "extrude":A.size="number"===typeof C[2]?C[2]:0;break;case "icon":case "line":case "text":C=y(C);D.isSome(C)&&(A.size=C);break;case "path":{const J=f(C,I.ONES,[A.width,void 0,A.height]);A.width=M(C[0],A.width,1,J);A.height=M(C[2],A.height,1,J)}break;case "object":yield O(A,C)}});return p.apply(this,
arguments)}function y(A){for(const C of A)if("number"===typeof C)return C;return null}function O(A,C){return z.apply(this,arguments)}function z(){z=b._asyncToGenerator(function*(A,C){const {resourceSize:J,symbolSize:W}=yield F(A),ba=f(C,J,W);A.width=M(C[0],W[0],J[0],ba);A.depth=M(C[1],W[1],J[1],ba);A.height=M(C[2],W[2],J[2],ba)});return z.apply(this,arguments)}function f(A,C,J){for(let W=0;3>W;W++){const ba=A[W];switch(ba){case "symbol-value":return null!=J[W]?J[W]/C[W]:1;case "proportional":break;
default:if(ba&&C[W])return ba/C[W]}}return 1}function F(A){return S.apply(this,arguments)}function S(){S=b._asyncToGenerator(function*(A){const C=yield(yield new Promise((N,Q)=>e(["./symbolLayerUtils"],N,Q))).computeObjectLayerResourceSize(A,10),{width:J,height:W,depth:ba}=A;A=[J,ba,W];let X=1;for(var v=0;3>v;v++)if(null!=A[v]){X=A[v]/C[v];break}for(v=0;3>v;v++)null==A[v]&&(A[v]=C[v]*X);return{resourceSize:C,symbolSize:A}});return S.apply(this,arguments)}function M(A,C,J,W){switch(A){case "proportional":return J*
W;case "symbol-value":return null!=C?C:J;default:return A}}function P(){P=b._asyncToGenerator(function*(A,C){if(A&&C){if(h.isSymbol3D(A))return t(A,C);if(h.isSymbol2D(A)&&(C=y(C),!D.isNone(C)))switch(A.type){case "simple-marker":A.size=C;break;case "picture-marker":{const J=A.width/A.height;1<J?(A.width=C,A.height=C*J):(A.width=C*J,A.height=C);break}case "simple-line":A.width=C;break;case "text":A.font.size=C}}});return P.apply(this,arguments)}const H=/\/resource\/(.*?)\.svg$/,L=new E("white");q.applyColorToSymbol=
function(A,C,J){if(A&&(C||null!=J))if(C&&(C=new E(C)),h.isSymbol3D(A))c(A,C,J);else if(h.isSymbol2D(A)){if(C=C||A.color)A.color=B(C,J);null!=J&&"outline"in A&&A.outline&&A.outline.color&&(A.outline.color=B(A.outline.color,J))}};q.applyOpacityToColor=B;q.applyRotationToSymbol=function(A,C,J){A&&null!=C&&(h.isSymbol3D(A)?(A=A.symbolLayers)&&A.forEach(W=>{if(W&&"object"===W.type)switch(J){case "tilt":W.tilt=C;break;case "roll":W.roll=C;break;default:W.heading=C}}):!h.isSymbol2D(A)||"simple-marker"!==
A.type&&"picture-marker"!==A.type&&"text"!==A.type||(A.angle=C))};q.applySizesToSymbol=function(A,C){return P.apply(this,arguments)};q.getCSSFilterFromEffectList=function(A){if(!A)return null;A=A.effects.filter(C=>"bloom"!==C.type).map(C=>C.toJSON());return x.effectFunctionsFromJSON(A)};q.getColorFromSymbol=function(A,C){if(!A)return null;let J=null;h.isSymbol3D(A)?J=k(A):h.isSymbol2D(A)&&(J=A.color?new E(A.color):null);return J?B(J,C):null};q.getIconHref=function(A,C){C=C.resource.href;return!w("esri-canvas-svg-support")&&
A.styleOrigin&&H.test(C)?C.replace(H,"/resource/png/$1.png"):C};q.getSymbolOutlineSize=function(A){if(!A)return 0;if(h.isSymbol3D(A)){{const C=A.symbolLayers&&A.symbolLayers.length;C?(A=A.symbolLayers.getItemAt(C-1),A="outline"in A?D.get(A,"outline","size"):void 0):A=void 0}return D.isSome(A)?A:0}return(A=d.getStroke(A))&&K.px2pt(A.width)||0};q.isVolumetricSymbol=function(A){if(D.isNone(A)||!("symbolLayers"in A)||D.isNone(A.symbolLayers))return!1;switch(A.type){case "point-3d":return A.symbolLayers.some(C=>
"object"===C.type);case "line-3d":return A.symbolLayers.some(C=>"path"===C.type);case "polygon-3d":return A.symbolLayers.some(C=>"object"===C.type||"extrude"===C.type);default:return!1}};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(e,q,b,E,h,r,w){function D(g){if(!g)return null;let k;switch(g.type){case "simple-fill":case "picture-fill":case "simple-marker":k=
D(g.outline);break;case "simple-line":{const B=r.pt2px(g.width);"none"!==g.style&&0!==B&&(k={color:g.color,style:d(g.style),width:B,cap:g.cap,join:"miter"===g.join?r.pt2px(g.miterLimit):g.join});break}default:k=null}return k}const K={left:"start",center:"middle",right:"end",justify:"start"},I={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},x=new h(1E3),d=function(){const g={};return function(k){if(g[k])return g[k];const B=k.replace(/-/g,"");return g[k]=B}}();
b=new b([128,128,128]);e.defaultThematicColor=b;e.dekebabifyLineStyle=d;e.getFill=function(g){const k=g.style;let B=null;if(g)switch(g.type){case "simple-marker":"cross"!==k&&"x"!==k&&(B=g.color);break;case "simple-fill":"solid"===k?B=g.color:"none"!==k&&(B={type:"pattern",x:0,y:0,src:q.getAssetUrl(`esri/symbols/patterns/${k}.png`),width:5,height:5});break;case "picture-fill":B={type:"pattern",src:g.url,width:r.pt2px(g.width)*g.xscale,height:r.pt2px(g.height)*g.yscale,x:r.pt2px(g.xoffset),y:r.pt2px(g.yoffset)};
break;case "text":B=g.color;break;case "cim":B=w.getCIMSymbolColor(g)}return B};e.getPatternUrlWithColor=function(g,k){const B=g+"-"+k;return void 0!==x.get(B)?Promise.resolve(x.get(B)):E(g,{responseType:"image"}).then(c=>{c=c.data;const t=c.naturalWidth,n=c.naturalHeight,u=document.createElement("canvas");u.width=t;u.height=n;const p=u.getContext("2d");p.fillStyle=k;p.fillRect(0,0,t,n);p.globalCompositeOperation="destination-in";p.drawImage(c,0,0);c=u.toDataURL();x.put(B,c);return c})};e.getSVGAlign=
function(g){return g=(g=g.horizontalAlignment)&&K[g.toLowerCase()]||"middle"};e.getSVGBaseline=function(g){return(g=g.verticalAlignment)&&I[g.toLowerCase()]||"alphabetic"};e.getSVGBaselineShift=function(g){return"bottom"===g.verticalAlignment?"super":null};e.getStroke=D;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(e){return function(){function q(E,h){this._storage=new e.MemCacheStorage;this._storage.maxSize=E;h&&this._storage.registerRemoveFunc("",
h)}var b=q.prototype;b.put=function(E,h){this._storage.put(E,h,1,1)};b.pop=function(E){return this._storage.pop(E)};b.get=function(E){return this._storage.get(E)};b.clear=function(){this._storage.clearAll()};b.destroy=function(){this._storage.destroy()};return q}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(e,q,b){function E(d){d=b.toCIMSymbolJSON(d);if("CIMTextSymbol"===d.type)return d.height;let g=0;if(d.symbolLayers)for(const k of d.symbolLayers)b.isCIMMarker(k)&&
k.size>g?g=k.size:b.isCIMStroke(k)&&k.width>g?g=k.width:b.isCIMFill(k);return g}function h(d,g,k,B){if("CIMTextSymbol"===d.type)d.height*=g;else{if(k&&d.effects)for(const c of d.effects)D(c,g);if(d.symbolLayers)for(const c of d.symbolLayers)switch(c.type){case "CIMPictureMarker":case "CIMVectorMarker":r(c,g,B);break;case "CIMPictureStroke":case "CIMSolidStroke":null!=B&&B.preserveOutlineWidth||!c.width||(c.width*=g);break;case "CIMPictureFill":c.height&&(c.height*=g);c.offsetX&&(c.offsetX*=g);c.offsetY&&
(c.offsetY*=g);break;case "CIMHatchFill":h(c.lineSymbol,g,!0,{...B,preserveOutlineWidth:!1}),c.offsetX&&(c.offsetX*=g),c.offsetY&&(c.offsetY*=g),c.separation&&(c.separation*=g)}}}function r(d,g,k){d.markerPlacement&&w(d.markerPlacement,g);d.offsetX&&(d.offsetX*=g);d.offsetY&&(d.offsetY*=g);d.anchorPoint&&"Absolute"===d.anchorPointUnits&&(d.anchorPoint={x:d.anchorPoint.x*g,y:d.anchorPoint.y*g});d.size*=g;if("CIMVectorMarker"===d.type&&d.markerGraphics)for(const B of d.markerGraphics)d.scaleSymbolsProportionally||
h(B.symbol,g,!0,k)}function w(d,g){b.isCIMMarkerStrokePlacement(d)&&d.offset&&(d.offset*=g);switch(d.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":d.customEndingOffset&&(d.customEndingOffset*=g);d.offsetAlongLine&&(d.offsetAlongLine*=g);if(d.placementTemplate&&d.placementTemplate.length){var k=d.placementTemplate.map(B=>B*g);d.placementTemplate=k}break;case "CIMMarkerPlacementAlongLineVariableSize":d.maxRandomOffset&&(d.maxRandomOffset*=g);d.placementTemplate&&
d.placementTemplate.length&&(k=d.placementTemplate.map(B=>B*g),d.placementTemplate=k);break;case "CIMMarkerPlacementOnLine":d.startPointOffset&&(d.startPointOffset*=g);break;case "CIMMarkerPlacementAtExtremities":d.offsetAlongLine&&(d.offsetAlongLine*=g);break;case "CIMMarkerPlacementAtRatioPositions":d.beginPosition&&(d.beginPosition*=g);d.endPosition&&(d.endPosition*=g);break;case "CIMMarkerPlacementPolygonCenter":d.offsetX&&(d.offsetX*=g);d.offsetY&&(d.offsetY*=g);break;case "CIMMarkerPlacementInsidePolygon":d.offsetX&&
(d.offsetX*=g),d.offsetY&&(d.offsetY*=g),d.stepX&&(d.stepX*=g),d.stepY&&(d.stepY*=g)}}function D(d,g){switch(d.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":d.width&&(d.width*=g);break;case "CIMGeometricEffectBuffer":d.size&&(d.size*=g);break;case "CIMGeometricEffectCut":d.beginCut&&(d.beginCut*=g);d.endCut&&(d.endCut*=g);d.middleCut&&(d.middleCut*=g);break;case "CIMGeometricEffectDashes":d.customEndingOffset&&(d.customEndingOffset*=g);d.offsetAlongLine&&(d.offsetAlongLine*=
g);if(d.dashTemplate&&d.dashTemplate.length){const k=d.dashTemplate.map(B=>B*g);d.dashTemplate=k}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":d.length&&(d.length*=g);break;case "CIMGeometricEffectMove":d.offsetX&&(d.offsetX*=g);d.offsetY&&(d.offsetY*=g);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":d.offset&&(d.offset*=g);break;case "CIMGeometricEffectRegularPolygon":d.radius&&(d.radius*=g);break;case "CIMGeometricEffectTaperedPolygon":d.fromWidth&&
(d.fromWidth*=g);d.length&&(d.length*=g);d.toWidth&&(d.toWidth*=g);break;case "CIMGeometricEffectWave":d.amplitude&&(d.amplitude*=g),d.period&&(d.period*=g)}}function K(d,g){let k;k="CIMTextSymbol"===d.type?d.symbol:d;d="CIMPolygonSymbol"===d.type;if(k.symbolLayers)for(const B of k.symbolLayers)if(!(B.colorLocked||d&&(b.isCIMStroke(B)||b.isCIMMarker(B)&&B.markerPlacement&&b.isCIMMarkerStrokePlacement(B.markerPlacement))))switch(B.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":B.tintColor&&
I(g,B.tintColor);break;case "CIMVectorMarker":B.markerGraphics.forEach(c=>{K(c.symbol,g)});break;case "CIMSolidStroke":case "CIMSolidFill":I(g,B.color);break;case "CIMHatchFill":K(B.lineSymbol,g)}}function I(d,g){for(const k of d)if(k.join(".")===g.join("."))return;d.push(g)}function x(d,g,k){var B="CIMTextSymbol"===d.type?d.symbol:d;d="CIMPolygonSymbol"===B.type?!0:!1;if(B.symbolLayers)for(const c of B.symbolLayers)if(!c.colorLocked){if(d)if(k){if({layersToColor:B}=k,(b.isCIMStroke(c)||b.isCIMMarker(c)&&
c.markerPlacement&&b.isCIMMarkerStrokePlacement(c.markerPlacement))&&"fill"===B||b.isCIMFill(c)&&"outline"===B)continue}else if(b.isCIMStroke(c)||b.isCIMMarker(c)&&c.markerPlacement&&b.isCIMMarkerStrokePlacement(c.markerPlacement))continue;B=g.toArray();switch(c.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":c.tintColor=B;break;case "CIMVectorMarker":c.markerGraphics.forEach(t=>{x(t.symbol,g,k)});break;case "CIMSolidStroke":case "CIMSolidFill":c.color=B;break;case "CIMHatchFill":x(c.lineSymbol,
g,k)}}}e.applyCIMSymbolColor=function(d,g,k){g instanceof q||(g=new q(g));(d=b.toCIMSymbolJSON(d))&&x(d,g,k)};e.applyCIMSymbolRotation=function(d,g,k=!1){d=b.toCIMSymbolJSON(d);k&&0!==g&&(g=360-g);if("CIMTextSymbol"===d.type)d.angle=g;else if("CIMPointSymbol"===d.type&&d.symbolLayers){k=g-(d.angle||0);for(const B of d.symbolLayers)if(b.isCIMMarker(B)){let c=B.rotation||0;c=B.rotateClockwise?c-k:c+k;B.rotation=c}d.angle=g}};e.getCIMSymbolColor=function(d){d=b.toCIMSymbolJSON(d);const g=[];K(d,g);return g.length?
new q(b.fromCIMColor(g[0])):null};e.getCIMSymbolRotation=function(d,g=!1){d=b.toCIMSymbolJSON(d);return"CIMTextSymbol"===d.type||"CIMPointSymbol"===d.type?g&&0!==d.angle?360-d.angle:d.angle||0:0};e.getCIMSymbolSize=E;e.scaleCIMMarker=r;e.scaleCIMSymbolTo=function(d,g,k){const B=b.toCIMSymbolJSON(d);d=E(d);if(0===d)if("CIMTextSymbol"===B.type)B.height=g;else{if(B.symbolLayers)for(const c of B.symbolLayers)switch(c.type){case "CIMPictureMarker":case "CIMVectorMarker":c.size=g;break;case "CIMPictureStroke":case "CIMSolidStroke":c.width=
g}}else h(B,g/d,!1,k)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/symbols/cim/utils":function(){define(["require","exports"],function(e,q){function b(E,h){"string"!==typeof E&&(E=String(E));switch(h){case "LowerCase":return E.toLowerCase();case "Allcaps":return E.toUpperCase();default:return E}}q._adjustTextCase=b;q.colorToArray=function(E){return[E.r,E.g,E.b,E.a]};q.createLabelOverrideFunction=function(E,h,r){const w=x=>{let d=x.length;for(;d--;)if(-1===" /-,\n".indexOf(x.charAt(d)))return!1;
return!0},D=[];var K=0;let I=-1;do I=h.indexOf("[",K),I>=K&&(I>K&&(K=h.substr(K,I-K),D.push([K,null,w(K)])),K=I+1,I=h.indexOf("]",K),I>=K&&(I>K&&(K=h.substr(K,I-K),(K=E[K])&&D.push([null,K,!1])),K=I+1));while(-1!==I);K<h.length-1&&(E=h.substr(K),D.push([E,null,w(E)]));return x=>{let d="",g=null;for(const k of D){const [B,c,t]=k;if(B)t?g=B:(g&&(d+=g,g=null),d+=B);else{const n=x.attributes[c];n&&(g&&(d+=g,g=null),d+=n)}}return b(d,r)}};q.evaluateValueOrFunction=function(E,h,r,w){return"function"===
typeof E?E(h,r,w):E};q.fromCIMColor=function(E){return E?{r:E[0],g:E[1],b:E[2],a:E[3]/255}:{r:0,g:0,b:0,a:0}};q.getValue=E=>isNaN(E)||!E?0:E;q.importGeometryEngine=function(){return new Promise((E,h)=>e(["../../geometry/geometryEngineJSON"],E,h))};q.isCIMFill=function(E){return"CIMGradientFill"===E.type||"CIMHatchFill"===E.type||"CIMPictureFill"===E.type||"CIMSolidFill"===E.type||"CIMWaterFill"===E.type};q.isCIMMarker=function(E){return"CIMVectorMarker"===E.type||"CIMPictureMarker"===E.type||"CIMBarChartMarker"===
E.type||"CIMCharacterMarker"===E.type||"CIMPieChartMarker"===E.type||"CIMStackedBarChartMarker"===E.type};q.isCIMMarkerStrokePlacement=function(E){return"CIMMarkerPlacementAlongLineRandomSize"===E.type||"CIMMarkerPlacementAlongLineSameSize"===E.type||"CIMMarkerPlacementAlongLineVariableSize"===E.type||"CIMMarkerPlacementAtExtremities"===E.type||"CIMMarkerPlacementAtMeasuredUnits"===E.type||"CIMMarkerPlacementAtRatioPositions"===E.type||"CIMMarkerPlacementOnLine"===E.type||"CIMMarkerPlacementOnVertices"===
E.type};q.isCIMStroke=function(E){return"CIMGradientStroke"===E.type||"CIMPictureStroke"===E.type||"CIMSolidStroke"===E.type};q.isGeometryEngineRequired=E=>{if(!E)return!1;for(const h of E)switch(h.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":return!0}return!1};q.resampleHermite=function(E,h,r,w,D,K,I=!0){const x=h/D;r/=K;const d=Math.ceil(x/2),g=Math.ceil(r/2);for(let c=0;c<K;c++)for(let t=0;t<D;t++){const n=4*(t+(I?K-c-1:c)*D);var k=0;let u=0,p=0,y=0,O=0,z=0,f=0;const F=
(c+.5)*r;for(let S=Math.floor(c*r);S<(c+1)*r;S++){var B=Math.abs(F-(S+.5))/g;const M=(t+.5)*x;B*=B;for(let P=Math.floor(t*x);P<(t+1)*x;P++){let H=Math.abs(M-(P+.5))/d;k=Math.sqrt(B+H*H);-1<=k&&1>=k&&(k=2*k*k*k-3*k*k+1,0<k&&(H=4*(P+S*h),f+=k*E[H+3],p+=k,255>E[H+3]&&(k=k*E[H+3]/250),y+=k*E[H],O+=k*E[H+1],z+=k*E[H+2],u+=k))}}w[n]=y/u;w[n+1]=O/u;w[n+2]=z/u;w[n+3]=f/p}};q.toCIMSymbolJSON=function(E){var h;return null==(h=E.data)?void 0:h.symbol};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/support/layerViewUtils":function(){define(["exports",
"../../core/maybe"],function(e,q){e.extractSafeScaleBounds=function(b){var E,h;const r=b.effectiveScaleRange;b=null!=(E=null==r?void 0:r.minScale)?E:0;E=null!=(h=null==r?void 0:r.maxScale)?h:0;return{minScale:b,maxScale:E}};e.highlightsSupported=function(b){return b&&"function"===typeof b.highlight};e.isScaleRangeActive=function(b,E){return 0<b||0<E};e.occludeesSupported=function(b){return b&&"function"===typeof b.maskOccludee};e.scaleBoundsPredicate=function(b,E,h){return q.isNone(b)||b>h&&(0===
E||b<E)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Popup/actions":function(){define(["exports","../../support/actions/ActionButton"],function(e,q){const b=new q({id:"zoom-to-feature",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"}),E=new q({id:"remove-selected-feature",title:"{messages.remove}",className:"esri-icon-trash"}),h=new q({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"});q=new q({id:"browse-clustered-features",
title:"{messages.browseClusteredFeatures}",className:"esri-icon-table"});e.all=[b,E,q,h];e.browseClusteredFeatures=q;e.removeSelectedFeature=E;e.zoomToClusteredFeatures=h;e.zoomToFeature=b;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Popup/actionUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/Logger ../../core/promiseUtils ./actions".split(" "),function(e,q,b,E,h,r){function w(c){const {selectedFeature:t,location:n,view:u}=
c;return u?"3d"===u.type?t||n:c.get("selectedFeature.geometry")||n:null}function D(c,t){if("3d"!==(null==t?void 0:t.type)||!c||"esri.Graphic"!==c.declaredClass)return!0;if((t=t.getViewForGraphic(c))&&"whenGraphicBounds"in t){let n=!1;t.whenGraphicBounds(c,{useViewElevation:!0}).then(u=>{n=!u||!u.boundingBox||u.boundingBox[0]===u.boundingBox[3]&&u.boundingBox[1]===u.boundingBox[4]&&u.boundingBox[2]===u.boundingBox[5]}).catch(()=>{const u=new b("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",
{graphic:c});B.error(u)});return n}return!0}function K(c){return I.apply(this,arguments)}function I(){I=q._asyncToGenerator(function*(c){const {location:t,selectedFeature:n,view:u,zoomFactor:p}=c,y=w(c);if(!y)return c=new b("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:y,view:u}),B.error(c),Promise.reject(c);const O=u.scale/p,z=c.get("selectedFeature.geometry")||t,f=z&&"point"===z.type&&D(n,u);r.zoomToFeature.active=!0;r.zoomToFeature.disabled=!0;try{yield c.view.goTo({target:y,
scale:f?O:void 0})}finally{r.zoomToFeature.active=!1,r.zoomToFeature.disabled=!1,c.zoomToLocation=null,f&&(c.location=z)}});return I.apply(this,arguments)}function x(c){return d.apply(this,arguments)}function d(){d=q._asyncToGenerator(function*(c){const {selectedFeature:t,view:n}=c;if("2d"!==(null==n?void 0:n.type))throw c=new b("zoomToCluster:invalid-view","View must be 2d MapView.",{view:n}),B.error(c),c;if(!t.isAggregate)throw c=new b("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",
{selectedFeature:t}),B.error(c),c;c=yield n.whenLayerView(t.sourceLayer);const u=c.createQuery();u.aggregateIds=[t.getObjectId()];r.zoomToClusteredFeatures.active=!0;r.zoomToClusteredFeatures.disabled=!0;({extent:c}=yield c.queryExtent(u));yield n.goTo({target:c});r.zoomToClusteredFeatures.active=!1;r.zoomToClusteredFeatures.disabled=!1});return d.apply(this,arguments)}function g(){g=q._asyncToGenerator(function*(c){const {selectedFeature:t,view:n}=c;if("2d"!==(null==n?void 0:n.type))throw c=new b("displayClusterExtent:invalid-view",
"View must be 2d MapView.",{view:n}),B.error(c),c;if(!t.isAggregate)throw c=new b("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t}),B.error(c),c;var u=yield n.whenLayerView(t.sourceLayer);const p=u.createQuery();p.aggregateIds=[t.getObjectId()];({extent:u}=yield u.queryExtent(p));c.selectedClusterBoundaryFeature.geometry=u;n.graphics.add(c.selectedClusterBoundaryFeature)});return g.apply(this,arguments)}function k(){k=q._asyncToGenerator(function*(c){const {selectedFeature:t,
view:n}=c;if("2d"!==(null==n?void 0:n.type))throw c=new b("browseAggregateFeatures:invalid-view","View must be 2d MapView.",{view:n}),B.error(c),c;if(!t.isAggregate)throw c=new b("browseAggregateFeatures:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t}),B.error(c),c;c=yield n.whenLayerView(t.sourceLayer);const u=c.createQuery();u.aggregateIds=[t.getObjectId()];r.browseClusteredFeatures.active=!0;r.browseClusteredFeatures.disabled=!0;({features:c}=
yield c.queryFeatures(u));r.browseClusteredFeatures.active=!1;r.browseClusteredFeatures.disabled=!1;n.popup.open({features:[t].concat(c),featureMenuOpen:!0})});return k.apply(this,arguments)}const B=E.getLogger("esri.widgets.Popup.PopupViewModel");e.browseAggregateFeatures=function(c){return k.apply(this,arguments)};e.displayClusterExtent=function(c){return g.apply(this,arguments)};e.getSelectedTarget=w;e.isZoomScreenSize=D;e.removeClusteredFeaturesForBrowsing=function(c){var t;null!=(t=c.selectedFeature)&&
t.isAggregate&&(c.features=c.features.filter(n=>n.isAggregate))};e.triggerAction=function(c){const {event:t,view:n}=c;({action:c}=t);var u=n&&n.popup;if(!c)return Promise.reject(new b("trigger-action:missing-arguments","Event has no action"));if(!u)return Promise.reject(new b("trigger-action:missing-arguments","view.popup is missing"));const {disabled:p,id:y}=c;if(!y)return Promise.reject(new b("trigger-action:invalid-action","action.id is missing"));if(p)return Promise.reject(new b("trigger-action:invalid-action",
"Action is disabled"));if(y===r.zoomToFeature.id)return K(u.viewModel).catch(h.throwIfNotAbortError);if(y===r.zoomToClusteredFeatures.id)return x(u.viewModel);if(y===r.browseClusteredFeatures.id)return u.featureMenuOpen=!u.featureMenuOpen,u.viewModel.browseClusterEnabled=!u.viewModel.browseClusterEnabled,Promise.resolve();u.viewModel.browseClusterEnabled=!1;if(y===r.removeSelectedFeature.id){u.close();({selectedFeature:c}=u);if(!c)return Promise.reject(new b(`trigger-action:${r.removeSelectedFeature.id}`,
"selectedFeature is required",{selectedFeature:c}));({sourceLayer:u}=c);u?u.remove(c):n.graphics.remove(c)}return Promise.resolve()};e.zoomToClusterExtent=x;e.zoomToLocation=K;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(e,q,b,E,h,r,w,D){e.GoToMixin=K=>{K=function(I){function x(...d){d=I.call(this,...d)||this;d.goToOverride=null;d.view=null;return d}q._inheritsLoose(x,I);x.prototype.callGoTo=function(d){const {view:g}=this;return this.goToOverride?this.goToOverride(g,d):g.goTo(d.target,d.options)};return x}(K);b.__decorate([E.property()],K.prototype,"goToOverride",void 0);b.__decorate([E.property()],K.prototype,"view",void 0);return K=b.__decorate([D.subclass("esri.widgets.support.GoTo")],K)};Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/isSupportedGraphicUtils":function(){define(["exports","../../../../core/has"],function(e,q){e.SupportedGraphicResult=void 0;(function(b){b[b.SUPPORTED=0]="SUPPORTED";b[b.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING";b[b.GEOMETRY_MISSING=2]="GEOMETRY_MISSING";b[b.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED";b[b.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED";b[b.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"})(e.SupportedGraphicResult||
(e.SupportedGraphicResult={}));e.isSupportedGraphicResultMessage=function(b){switch(b){case e.SupportedGraphicResult.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case e.SupportedGraphicResult.GEOMETRY_MISSING:return"no geometry";case e.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case e.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case e.SupportedGraphicResult.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""};
Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/moveGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/has","../../../../../core/maybe","../../../../../support/elevationInfoUtils","../isSupportedGraphicUtils"],function(e,q,b,E,h){e.isSupportedGraphic=function(r){var w;if("graphics"!==(null==(w=r.layer)?void 0:w.type))return h.SupportedGraphicResult.GRAPHICS_LAYER_MISSING;if(b.isNone(r.geometry))return h.SupportedGraphicResult.GEOMETRY_MISSING;
switch(r.geometry.type){case "polygon":case "point":case "polyline":case "mesh":break;case "multipoint":case "extent":return h.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED;default:return h.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED}return"on-the-ground"!==E.getGraphicEffectiveElevationMode(r)&&E.hasGraphicFeatureExpressionInfo(r)?h.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED:h.SupportedGraphicResult.SUPPORTED};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/support/elevationInfoUtils":function(){define(["exports",
"../core/maybe","../symbols/support/unitConversionUtils"],function(e,q,b){function E(I,x){return q.isNone(x)||!x.mode?I?"absolute-height":"on-the-ground":x.mode}function h(I,x){return E(q.isSome(I)?I.hasZ:!1,x)}function r(I){const x=w(I);return h(I.geometry,x)}function w(I){return I.layer&&"elevationInfo"in I.layer?I.layer.elevationInfo:null}function D(I,x,d,g,k,B,c=null){if(!q.isNone(B)){var t=q.isSome(c)?c.mode:"absolute-height";if("on-the-ground"===t)return 0;a:{B=K(x,d,g,k,I,B);c=q.isSome(c)&&
q.isSome(c.offset)?c.offset:0;switch(t){case "absolute-height":I=B-c;break a;case "relative-to-ground":I=B-(q.unwrapOr(I.elevationProvider.getElevation(x,d,g,k,"ground"),0)+c);break a;case "relative-to-scene":I=B-(q.unwrapOr(I.elevationProvider.getElevation(x,d,g,k,"scene"),0)+c);break a}I=void 0}return I}}function K(I,x,d,g,k,B){const c=q.isSome(B.offset)?B.offset:0;switch(B.mode){case "absolute-height":return d+c;case "on-the-ground":return q.unwrapOr(k.elevationProvider.getElevation(I,x,0,g,"ground"),
0);case "relative-to-ground":return d+q.unwrapOr(k.elevationProvider.getElevation(I,x,d,g,"ground"),0)+c;case "relative-to-scene":return d+q.unwrapOr(k.elevationProvider.getElevation(I,x,d,g,"scene"),0)+c}}e.getConvertedElevation=function(I,x,d,g=null){return D(I,x.x,x.y,x.hasZ?x.z:0,x.spatialReference,d,g)};e.getConvertedElevationFromVector=function(I,x,d,g,k=null){return D(I,x[0],x[1],2<x.length?x[2]:0,d,g,k)};e.getEffectiveElevationMode=E;e.getGeometryEffectiveElevationMode=h;e.getGraphicEffectiveElevationInfo=
function(I){var x=w(I);I=h(I.geometry,x);x=q.isSome(x)&&"on-the-ground"!==I?q.unwrapOr(x.offset,0)*b.getMetersPerUnit(q.unwrapOr(x.unit,"meters")):0;return{mode:I,offset:x}};e.getGraphicEffectiveElevationMode=r;e.getZForElevationMode=function(I,x,d){if(!q.isNone(d)&&d.mode){var g=I.hasZ?I.z:0,k=q.isSome(d.offset)?d.offset:0;switch(d.mode){case "absolute-height":return g-k;case "on-the-ground":return 0;case "relative-to-ground":return I=q.unwrapOr(x.elevationProvider.getElevation(I.x,I.y,I.z,I.spatialReference,
"ground"),0)+k,g-I;case "relative-to-scene":return I=q.unwrapOr(x.elevationProvider.getElevation(I.x,I.y,I.z,I.spatialReference,"scene"),0)+k,g-I}}};e.hasGraphicFeatureExpressionInfo=function(I){if("on-the-ground"===r(I))return!1;I=w(I);I=q.isSome(I)&&I.featureExpressionInfo?I.featureExpressionInfo.expression:null;return!(!I||"0"===I)};e.zValueInAbsoluteHeightMode=K;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/reshapeGraphic/isSupportedGraphic":function(){define(["exports",
"../../../../../core/maybe","../../../../../geometry/Circle","../../../../../support/elevationInfoUtils","../isSupportedGraphicUtils"],function(e,q,b,E,h){function r(w){var D;return"graphics"!==(null==(D=w.layer)?void 0:D.type)?{result:h.SupportedGraphicResult.GRAPHICS_LAYER_MISSING,geometry:null}:q.isNone(w.geometry)?{result:h.SupportedGraphicResult.GEOMETRY_MISSING,geometry:null}:"on-the-ground"!==E.getGraphicEffectiveElevationMode(w)&&E.hasGraphicFeatureExpressionInfo(w)?{result:h.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED,
geometry:null}:"point"!==w.geometry.type&&"polyline"!==w.geometry.type&&("polygon"!==w.geometry.type||w.geometry instanceof b)?{result:h.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED,geometry:null}:{result:h.SupportedGraphicResult.SUPPORTED,geometry:w.geometry}}e.geometryOfSupportedGraphic=function(w){return r(w).geometry};e.isSupportedGraphic=function(w){return r(w).result};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/geometry/Circle":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/unitUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/has ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./Point ./Polygon ./projectionEllipsoid ./support/geodesicUtils ./support/webMercatorUtils ./support/WKIDUnitConversion".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g,k){var B;h=B=function(c){function t(...u){u=c.call(this,...u)||this;u.center=null;u.geodesic=!1;u.numberOfPoints=60;u.radius=1E3;u.radiusUnit="meters";return u}e._inheritsLoose(t,c);var n=t.prototype;n.normalizeCtorArgs=function(u,p){if(!u||!u.center){if(u&&u.rings)return c.prototype.normalizeCtorArgs.call(this,u,p);u={center:u}}return{...c.prototype.normalizeCtorArgs.call(this),...u,...p}};n.initialize=function(){var u=this.center;const p=this.numberOfPoints;this.hasZ=
u&&u.hasZ;if(0===this.rings.length&&u){var y=b.convertUnit(this.radius,this.radiusUnit,"meters"),O=u.spatialReference,z="geographic";if(O.isWebMercator)z="webMercator";else if(null!=k[O.wkid]||O.wkt&&0===O.wkt.indexOf("PROJCS"))z="projected";if(this.geodesic){let f;switch(z){case "webMercator":f=g.webMercatorToGeographic(u);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":f=
u}u=this._createGeodesicCircle(f,y,p);"webMercator"===z&&(u=g.geographicToWebMercator(u))}else{let f;"webMercator"===z||"projected"===z?f=y/this._convert2Meters(1,u.spatialReference):"geographic"===z&&(f=b.lengthToDegrees(y,"meters",x.getReferenceEllipsoid(u.spatialReference).radius));u=this._createPlanarCircle(u,f,p)}this.spatialReference=u.spatialReference;this.addRing(u.rings[0])}};n.clone=function(){const {center:u,numberOfPoints:p,radius:y,radiusUnit:O,geodesic:z}=this;return new B({center:u.clone(),
numberOfPoints:p,radius:y,radiusUnit:O,geodesic:z})};n._createGeodesicCircle=function(u,p,y){let O=0;const z=[];for(;360>O;){const f=[0,0];d.directGeodeticSolver(f,[u.x,u.y],O,p);this.hasZ&&f.push(u.z);z.push(f);O+=360/y}z.push(z[0]);return new I(z)};n._createPlanarCircle=function(u,p,y){const O=[],z=2*Math.PI/y;for(let F=0;F<y;++F){var f=z*F;f=[u.x+Math.cos(-f)*p,u.y+Math.sin(-f)*p];this.hasZ&&f.push(u.z);O.push(f)}O.push(O[0]);return new I({spatialReference:u.spatialReference,rings:[O]})};n._convert2Meters=
function(u,p){if(null!=k[p.wkid])p=k.values[k[p.wkid]];else{p=p.wkt;const y=p.lastIndexOf(",")+1,O=p.lastIndexOf("]]");p=parseFloat(p.substring(y,O))}return u*p};return t}(I);q.__decorate([E.property({type:K})],h.prototype,"center",void 0);q.__decorate([E.property()],h.prototype,"geodesic",void 0);q.__decorate([E.property()],h.prototype,"numberOfPoints",void 0);q.__decorate([E.property()],h.prototype,"radius",void 0);q.__decorate([E.property()],h.prototype,"radiusUnit",void 0);return h=B=q.__decorate([D.subclass("esri.geometry.Circle")],
h)})},"esri/geometry/support/geodesicUtils":function(){define("exports ../../geometry ../../core/Error ../../core/unitUtils ./geodesicConstants ../Polyline ../Polygon ../Point ../SpatialReference".split(" "),function(e,q,b,E,h,r,w,D,K){function I(n){if(!n)return null;if(n.isGeographic&&n.wkid){var u=h.spheroids[n.wkid];if(u)return u}return n.wkt&&((n=h.WKT_SPHEROID_REGEX.exec(n.wkt))&&2===n.length?(u=n[1].split(","),!u||3>u.length?n=null:(n=parseFloat(u[1]),u=parseFloat(u[2]),n=isNaN(n)||isNaN(u)?
null:{a:n,f:0===u?0:1/u})):n=null,n)?n:null}function x(n){n=I(n||K.WGS84);if("b"in n&&"eSq"in n&&"radius"in n)return n;const u=n.a*(1-n.f);return Object.assign(n,{b:u,eSq:1-(u/n.a)**2,radius:(2*n.a+u)/3,densificationRatio:1E4/((2*n.a+u)/3)})}function d(n){return 0>n?n+360:n}function g(n,u,p){const {a:y,eSq:O}=x(p);p=Math.sqrt(O);const z=Math.sin(u[1]*h.toRadians);u=y*u[0]*h.toRadians;p=0<O?y*(1-O)*(z/(1-O*z*z)-1/(2*p)*Math.log((1-p*z)/(1+p*z)))*.5:y*z;n[0]=u;n[1]=p;return n}function k(n){return null!==
I(n)}function B(n,u){if("polyline"!==n.type&&"polygon"!==n.type)throw new b("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const {spatialReference:p}=n;if(!k(p))throw new b("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");var y="polyline"===n.type?n.paths:n.rings;const O=[],z=[0,0],f={distance:null};for(const M of y){y=[];O.push(y);y.push([M[0][0],M[0][1]]);var F=M[0][0],S=M[0][1];let P,H;for(let L=0;L<
M.length-1;L++){P=M[L+1][0];H=M[L+1][1];if(F===P&&S===H)continue;const A=[F,S];t(f,[F,S],[P,H],p);const {azimuth:C,distance:J}=f;F=J/u;if(1<F){for(S=1;S<=F-1;S++)c(z,A,C,S*u,p),y.push(z.slice(0));c(z,A,C,(J+Math.floor(F-1)*u)/2,p);y.push(z.slice(0))}c(z,A,C,J,p);y.push(z.slice(0));F=z[0];S=z[1]}}return"polyline"===n.type?new r({paths:O,spatialReference:p}):new w({rings:O,spatialReference:p})}function c(n,u,p,y,O){const z=u[0]*h.toRadians;u=u[1]*h.toRadians;p*=h.toRadians;const {a:f,b:F,f:S}=x(O);
O=Math.sin(p);p=Math.cos(p);var M=(1-S)*Math.tan(u);u=1/Math.sqrt(1+M*M);const P=M*u,H=Math.atan2(M,p);M=u*O;const L=M*M;var A=1-L,C=A*(f*f-F*F)/(F*F);const J=1+C/16384*(4096+C*(-768+C*(320-175*C))),W=C/1024*(256+C*(-128+C*(74-47*C)));C=y/(F*J);let ba=2*Math.PI,X,v,N,Q;for(;1E-12<Math.abs(C-ba);)N=Math.cos(2*H+C),X=Math.sin(C),v=Math.cos(C),Q=W*X*(N+W/4*(v*(-1+2*N*N)-W/6*N*(-3+4*X*X)*(-3+4*N*N))),ba=C,C=y/(F*J)+Q;y=P*X-u*v*p;A=S/16*A*(4+S*(4-3*A));y=Math.atan2(P*v+u*X*p,(1-S)*Math.sqrt(L+y*y))/h.toRadians;
n[0]=(z+(Math.atan2(X*O,u*v-P*X*p)-(1-A)*S*M*(C+A*X*(N+A*v*(-1+2*N*N)))))/h.toRadians;n[1]=y;return n}function t(n,u,p,y){var O=u[0]*h.toRadians;u=u[1]*h.toRadians;var z=p[0]*h.toRadians;p=p[1]*h.toRadians;const {a:f,b:F,f:S,radius:M}=x(y),P=z-O;var H=Math.atan((1-S)*Math.tan(u)),L=Math.atan((1-S)*Math.tan(p));y=Math.sin(H);H=Math.cos(H);const A=Math.sin(L);L=Math.cos(L);let C=1E3,J=P,W,ba,X;let v,N,Q;do{var Z=Math.sin(J);var ja=Math.cos(J);X=Math.sqrt(L*Z*L*Z+(H*A-y*L*ja)*(H*A-y*L*ja));if(0===X)return n.distance=
0,n.azimuth=void 0,n.reverseAzimuth=void 0,n;ja=y*A+H*L*ja;v=Math.atan2(X,ja);N=H*L*Z/X;ba=1-N*N;Z=ja-2*y*A/ba;isNaN(Z)&&(Z=0);Q=S/16*ba*(4+S*(4-3*ba));W=J;J=P+(1-Q)*S*N*(v+Q*X*(Z+Q*ja*(-1+2*Z*Z)))}while(1E-12<Math.abs(J-W)&&0<--C);if(0===C)return y=Math.acos(Math.sin(u)*Math.sin(p)+Math.cos(u)*Math.cos(p)*Math.cos(z-O))*M,O=z-O,n.azimuth=Math.atan2(Math.sin(O)*Math.cos(p),Math.cos(u)*Math.sin(p)-Math.sin(u)*Math.cos(p)*Math.cos(O))/h.toRadians,n.distance=y,n.reverseAzimuth=void 0,n;O=ba*(f*f-F*F)/
(F*F);u=O/1024*(256+O*(-128+O*(74-47*O)));z=Math.atan2(H*Math.sin(J),H*A*Math.cos(J)-y*L);n.azimuth=Math.atan2(L*Math.sin(J),H*A-y*L*Math.cos(J))/h.toRadians;n.distance=F*(1+O/16384*(4096+O*(-768+O*(320-175*O))))*(v-u*X*(Z+u/4*(ja*(-1+2*Z*Z)-u/6*Z*(-3+4*X*X)*(-3+4*Z*Z))));n.reverseAzimuth=z/h.toRadians;return n}e.directGeodeticSolver=c;e.geodesicAreas=function(n,u="square-meters"){if(n.some(z=>!k(z.spatialReference)))throw new b("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");
const p=[];for(var y=0;y<n.length;y++){var O=n[y];const {radius:z,densificationRatio:f}=x(O.spatialReference);p.push(B(O,z*f))}n=[];y=[0,0];O=[0,0];for(let z=0;z<p.length;z++){const {rings:f,spatialReference:F}=p[z];let S=0;for(let M=0;M<f.length;M++){const P=f[M];g(y,P[0],F);g(O,P[P.length-1],F);let H=O[0]*y[1]-y[0]*O[1];for(let L=0;L<P.length-1;L++)g(y,P[L+1],F),g(O,P[L],F),H+=O[0]*y[1]-y[0]*O[1];S+=H}S=E.convertUnit(S,"square-meters",u);n.push(S/-2)}return n};e.geodesicDensify=B;e.geodesicDistance=
function(n,u,p="meters"){if(!n||!u)throw new b("geodesic-distance:missing-parameters","one or both input parameters are missing");if(!n.spatialReference||!u.spatialReference)throw new b("geodesic-distance:invalid-parameters","one or both input points do not have a spatial reference");if(!n.spatialReference.equals(u.spatialReference))throw new b("geodesic-distance:invalid-parameters","spatial references of input parameters do not match");const {spatialReference:y}=n;if(!k(y))throw new b("geodesic-distance:not-supported",
"input geometry spatial reference is not supported");if(n.equals(u))return{distance:0,azimuth:0,reverseAzimuth:0};const O={distance:null};t(O,[n.x,n.y],[u.x,u.y],y);O.distance=E.convertUnit(O.distance,"meters",p);O.azimuth=d(O.azimuth);O.reverseAzimuth=d(O.reverseAzimuth);return O};e.geodesicLengths=function(n,u="meters"){if(!n)throw new b("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(n.some(O=>!k(O.spatialReference)))throw new b("geodesic-lengths:invalid-spatial-reference",
"the input geometries spatial reference is not supported");const p=[];for(let O=0;O<n.length;O++){var y=n[O];const {spatialReference:z}=y;y="polyline"===y.type?y.paths:y.rings;let f=0;for(let F=0;F<y.length;F++){const S=y[F];let M=0;for(let P=1;P<S.length;P++){const H=S[P-1][0],L=S[P][0],A=S[P-1][1],C=S[P][1];if(A!==C||H!==L){const J={distance:null};t(J,[H,A],[L,C],z);M+=J.distance}}f+=M}f=E.convertUnit(f,"meters",u);p.push(f)}return p};e.inverseGeodeticSolver=t;e.isSupported=k;e.pointFromDistance=
function(n,u,p){if(!n||null==u||null==p)throw new b("point-from-distance:missing-parameters","one or more input parameters are missing or undefined");if(0>p||360<p)throw new b("point-from-distance:-of-bounds","azimuth is restricted to angles between, and including, 0\u00b0 to 360\u00b0 degrees");if(!n.spatialReference)throw new b("point-from-distance:missing-spatial-reference","the input point must have a spatial reference");const {spatialReference:y}=n;if(!k(y))throw new b("geodesic-distance:not-supported",
"input geometry spatial reference is not supported");const O=[0,0];c(O,[n.x,n.y],p,u,y);return new D({x:O[0],y:O[1],spatialReference:y})};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/transformGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/has","../../../../../core/maybe","../../../../../support/elevationInfoUtils","../isSupportedGraphicUtils"],function(e,q,b,E,h){e.isSupportedGraphic=function(r){var w;if("graphics"!==(null==
(w=r.layer)?void 0:w.type))return h.SupportedGraphicResult.GRAPHICS_LAYER_MISSING;if(b.isNone(r.geometry))return h.SupportedGraphicResult.GEOMETRY_MISSING;switch(r.geometry.type){case "point":break;case "polygon":case "polyline":case "multipoint":case "extent":case "mesh":return h.SupportedGraphicResult.SUPPORTED;default:return h.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED}return(w=b.isSome(r.symbol)&&"point-3d"===r.symbol.type&&r.symbol.symbolLayers)&&0<w.length&&w.some(D=>"object"===D.type)?
"on-the-ground"!==E.getGraphicEffectiveElevationMode(r)&&E.hasGraphicFeatureExpressionInfo(r)?h.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED:h.SupportedGraphicResult.SUPPORTED:h.SupportedGraphicResult.SYMBOL_TYPE_UNSUPPORTED};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/draw/support/layerUtils":function(){define(["exports","../../../core/maybe"],function(e,q){e.addUniqueLayer=function(b,E,h){if(E&&b&&b.map){({map:b}=b);var r=b.layers.find(w=>w===E);r||b.add(E,h);void 0!==h&&
null!==h&&b.layers.reorder(r,h)}};e.findLayerView=function(b,E){return b.allLayerViews.find(h=>{h=h.layer;return"sublayers"in h&&q.isSome(h.sublayers)&&!!h.sublayers.find(r=>r===E)||h===E})};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/keybindings":function(){define(["exports"],function(e){e.SKETCH_KEYS={redo:"r",undo:"z",center:"Alt",constraint:"Shift",snappingToggle:"Control",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "};Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/views/interactive/snapping/SnappingManager":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Evented ../../../core/HandleOwner ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../../geometry/SpatialReference ./FeatureSnappingEngine ./SelfSnappingEngine ./SnappingOptions ./snappingUtils ./candidates/IntersectionSnappingCandidate".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g,k,B,c,t,n,u,p){e.SnappingManager=function(y){function O(f){f=y.call(this,f)||this;f.options=new n;f.engines=[];f._currentMainCandidate=null;f._currentOtherActiveCandidates=[];return f}q._inheritsLoose(O,y);var z=O.prototype;z.initialize=function(){this.handles.add([D.watch(()=>{const {effectiveFeatureEnabled:f,effectiveSelfEnabled:F,touchSensitivityMultiplier:S,distance:M}=this.options;return{effectiveFeatureEnabled:f,effectiveSelfEnabled:F,touchSensitivityMultiplier:S,
distance:M}},()=>{this.doneSnapping();this.emit("changed")},D.sync),D.watch(()=>this.options,f=>{for(const F of this.engines)F.options=f},D.sync),D.watch(()=>({ready:this.view.ready,spatialReference:this.view.spatialReference}),({ready:f,spatialReference:F})=>this._onViewChange(f,F),D.syncAndInitial)])};z.destroy=function(){this._destroyEngines()};z._onViewChange=function(f,F){this._destroyEngines();f&&(this.engines=[new t.SelfSnappingEngine({view:this.view,options:this.options}),new c.FeatureSnappingEngine({view:this.view,
spatialReference:null!=F?F:B.WGS84,options:this.options})])};z._destroyEngines=function(){for(const f of this.engines)f.destroy();this.engines.length=0};z.snap=function(){var f=q._asyncToGenerator(function*(F,S,M){const P=S.coordinateHelper.pointToVector(F),H=yield this._fetchCandidates(P,S,M);return{get valid(){return!w.isAborted(M)},apply:()=>{const {snappedPoint:L,hints:A}=this._processCandidates(P,H,S);this._removeVisualization();r.isSome(S.visualizer)&&this.handles.add(S.visualizer.draw(A,{coordinateHelper:S.coordinateHelper,
elevationInfo:S.elevationInfo,view:this.view}),"visualization-handle");return L}}});return function(F,S,M){return f.apply(this,arguments)}}();z.update=function(f,F){this._removeVisualization();let S=f;const M=[];if(r.isSome(this._currentMainCandidate)){const P=F.coordinateHelper;f=P.pointToVector(f);const H=this._currentMainCandidate.constraint.closestTo(f);if(u.squareDistance(u.anyMapPointToScreenPoint(f,P,F.elevationInfo,this.view),u.anyMapPointToScreenPoint(H,P,F.elevationInfo,this.view))<this._squaredPointProximityThreshold(F.pointer)){S=
P.vectorToDehydratedPoint(H);this._currentMainCandidate.targetPoint=H;M.push(...this._currentMainCandidate.hints);for(const L of this._currentOtherActiveCandidates)L.targetPoint=H,M.push(...L.hints)}else this._currentMainCandidate=null,this._currentOtherActiveCandidates=[]}r.isSome(F.visualizer)&&this.handles.add(F.visualizer.draw(M,{coordinateHelper:F.coordinateHelper,elevationInfo:F.elevationInfo,view:this.view}),"visualization-handle");return S};z.doneSnapping=function(){this._removeVisualization();
this._currentMainCandidate=null;this._currentOtherActiveCandidates=[]};z._removeVisualization=function(){this.handles.remove("visualization-handle")};z._fetchCandidates=function(){var f=q._asyncToGenerator(function*(F,S,M){return(yield Promise.all(this.engines.map(P=>P.fetchCandidates(F,S,M)))).flat()});return function(F,S,M){return f.apply(this,arguments)}}();z._processCandidates=function(f,F,S){if(1>F.length)return this.doneSnapping(),{snappedPoint:S.coordinateHelper.vectorToDehydratedPoint(f),
hints:[]};u.sortCandidatesInPlace(f,F);const M=this._currentMainCandidate;if(r.isSome(M)){const P=this._findOldConstraintInNewCandidates(M,F);if(0<=P)if(F[P]instanceof p.IntersectionSnappingCandidate){if(k.squaredDistance(f,M.targetPoint)<this._squaredPointProximityThreshold(S.pointer))return this._updateSnappingCandidate(M,F,S)}else return this._intersectWithOtherCandidates(P,F,f,S)}return this._intersectWithOtherCandidates(0,F,f,S)};z._findOldConstraintInNewCandidates=function(f,F){return f instanceof
p.IntersectionSnappingCandidate?0<=this._findOldCandidateIndex(F,f.first)&&0<=this._findOldCandidateIndex(F,f.second)?0:-1:this._findOldCandidateIndex(F,f)};z._intersectWithOtherCandidates=function(f,F,S,M){const P=F[f],H=[],L=M.coordinateHelper;for(let A=0;A<F.length;++A){if(A===f)continue;const C=F[A];for(const J of P.constraint.intersect(C.constraint)){const W=L.fromXYZ(J.intersection,P.targetPoint[2]);H.push([new p.IntersectionSnappingCandidate(L,W,P,C),u.squareDistance(u.anyMapPointToScreenPoint(S,
M.coordinateHelper,M.elevationInfo,this.view),u.anyMapPointToScreenPoint(W,M.coordinateHelper,M.elevationInfo,this.view))])}}return 0<H.length&&(H.sort((A,C)=>A[1]-C[1]),H[0][1]<this._squaredPointProximityThreshold(M.pointer))?this._updateSnappingCandidate(H[0][0],F,M):this._updateSnappingCandidate(P,F,M)};z._updateSnappingCandidate=function(f,F,S){this.doneSnapping();this._currentMainCandidate=f;const M=this._currentMainCandidate.targetPoint,P=[];P.push(...f.hints);for(const H of F){if(f instanceof
p.IntersectionSnappingCandidate){if(H.constraint.objectEqual(f.first.constraint)||H.constraint.objectEqual(f.second.constraint))continue}else if(H.constraint.objectEqual(f.constraint))continue;H.constraint.check(M)&&(H.targetPoint=M,this._currentOtherActiveCandidates.push(H),P.push(...H.hints))}return{snappedPoint:S.coordinateHelper.vectorToDehydratedPoint(M),hints:P}};z._squaredPointProximityThreshold=function(f){return"touch"===f?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold};
z._findOldCandidateIndex=function(f,F){let S=-1;for(let M=0;M<f.length;++M)if(F.constraint.objectEqual(f[M].constraint)){S=M;break}return S};q._createClass(O,[{key:"updating",get:function(){return this.engines.some(f=>f.updating)}},{key:"squaredMouseProximityTreshold",get:function(){return this.options.distance*this.options.distance}},{key:"squaredTouchProximityThreshold",get:function(){const {distance:f,touchSensitivityMultiplier:F}=this.options,S=f*F;return S*S}},{key:"test",get:function(){return{visualizationsActive:this.handles.has("visualization-handle"),
engines:this.engines}}}]);return O}(E.EventedMixin(h.HandleOwner));b.__decorate([K.property({constructOnly:!0})],e.SnappingManager.prototype,"view",void 0);b.__decorate([K.property()],e.SnappingManager.prototype,"options",void 0);b.__decorate([K.property({readOnly:!0})],e.SnappingManager.prototype,"updating",null);b.__decorate([K.property()],e.SnappingManager.prototype,"engines",void 0);b.__decorate([K.property()],e.SnappingManager.prototype,"squaredMouseProximityTreshold",null);b.__decorate([K.property()],
e.SnappingManager.prototype,"squaredTouchProximityThreshold",null);e.SnappingManager=b.__decorate([g.subclass("esri.views.interactive.snapping.SnappingManager")],e.SnappingManager);Object.defineProperty(e,"__esModule",{value:!0})})},"esri/chunks/vec2":function(){define(["exports","./common"],function(e,q){function b(N,Q){N[0]=Q[0];N[1]=Q[1];return N}function E(N,Q,Z){N[0]=Q;N[1]=Z;return N}function h(N,Q,Z){N[0]=Q[0]+Z[0];N[1]=Q[1]+Z[1];return N}function r(N,Q,Z){N[0]=Q[0]-Z[0];N[1]=Q[1]-Z[1];return N}
function w(N,Q,Z){N[0]=Q[0]*Z[0];N[1]=Q[1]*Z[1];return N}function D(N,Q,Z){N[0]=Q[0]/Z[0];N[1]=Q[1]/Z[1];return N}function K(N,Q){N[0]=Math.ceil(Q[0]);N[1]=Math.ceil(Q[1]);return N}function I(N,Q){N[0]=Math.floor(Q[0]);N[1]=Math.floor(Q[1]);return N}function x(N,Q,Z){N[0]=Math.min(Q[0],Z[0]);N[1]=Math.min(Q[1],Z[1]);return N}function d(N,Q,Z){N[0]=Math.max(Q[0],Z[0]);N[1]=Math.max(Q[1],Z[1]);return N}function g(N,Q){N[0]=Math.round(Q[0]);N[1]=Math.round(Q[1]);return N}function k(N,Q,Z){N[0]=Q[0]*
Z;N[1]=Q[1]*Z;return N}function B(N,Q,Z,ja){N[0]=Q[0]+Z[0]*ja;N[1]=Q[1]+Z[1]*ja;return N}function c(N,Q){const Z=Q[0]-N[0];N=Q[1]-N[1];return Math.sqrt(Z*Z+N*N)}function t(N,Q){const Z=Q[0]-N[0];N=Q[1]-N[1];return Z*Z+N*N}function n(N){const Q=N[0];N=N[1];return Math.sqrt(Q*Q+N*N)}function u(N){const Q=N[0];N=N[1];return Q*Q+N*N}function p(N,Q){N[0]=-Q[0];N[1]=-Q[1];return N}function y(N,Q){N[0]=1/Q[0];N[1]=1/Q[1];return N}function O(N,Q){var Z=Q[0];const ja=Q[1];Z=Z*Z+ja*ja;0<Z&&(Z=1/Math.sqrt(Z),
N[0]=Q[0]*Z,N[1]=Q[1]*Z);return N}function z(N,Q){return N[0]*Q[0]+N[1]*Q[1]}function f(N,Q,Z){Q=Q[0]*Z[1]-Q[1]*Z[0];N[0]=N[1]=0;N[2]=Q;return N}function F(N,Q,Z,ja){const la=Q[0];Q=Q[1];N[0]=la+ja*(Z[0]-la);N[1]=Q+ja*(Z[1]-Q);return N}function S(N,Q){Q=Q||1;const Z=2*q.RANDOM()*Math.PI;N[0]=Math.cos(Z)*Q;N[1]=Math.sin(Z)*Q;return N}function M(N,Q,Z){const ja=Q[0];Q=Q[1];N[0]=Z[0]*ja+Z[2]*Q;N[1]=Z[1]*ja+Z[3]*Q;return N}function P(N,Q,Z){const ja=Q[0];Q=Q[1];N[0]=Z[0]*ja+Z[2]*Q+Z[4];N[1]=Z[1]*ja+Z[3]*
Q+Z[5];return N}function H(N,Q,Z){const ja=Q[0];Q=Q[1];N[0]=Z[0]*ja+Z[3]*Q+Z[6];N[1]=Z[1]*ja+Z[4]*Q+Z[7];return N}function L(N,Q,Z){const ja=Q[0];Q=Q[1];N[0]=Z[0]*ja+Z[4]*Q+Z[12];N[1]=Z[1]*ja+Z[5]*Q+Z[13];return N}function A(N,Q,Z,ja){const la=Q[0]-Z[0];Q=Q[1]-Z[1];const ua=Math.sin(ja);ja=Math.cos(ja);N[0]=la*ja-Q*ua+Z[0];N[1]=la*ua+Q*ja+Z[1];return N}function C(N,Q){var Z=N[0];N=N[1];const ja=Q[0];Q=Q[1];let la=Z*Z+N*N;0<la&&(la=1/Math.sqrt(la));let ua=ja*ja+Q*Q;0<ua&&(ua=1/Math.sqrt(ua));Z=(Z*
ja+N*Q)*la*ua;return 1<Z?0:-1>Z?Math.PI:Math.acos(Z)}function J(N){return"vec2("+N[0]+", "+N[1]+")"}function W(N,Q){return N[0]===Q[0]&&N[1]===Q[1]}function ba(N,Q){const Z=N[0];N=N[1];const ja=Q[0];Q=Q[1];return Math.abs(Z-ja)<=q.EPSILON*Math.max(1,Math.abs(Z),Math.abs(ja))&&Math.abs(N-Q)<=q.EPSILON*Math.max(1,Math.abs(N),Math.abs(Q))}function X(N,Q,Z,ja,la){let ua=Q[0]-Z[0];Z=Q[1]-Z[1];la=(ja[0]*ua+ja[1]*Z)*(la-1);ua=ja[0]*la;Z=ja[1]*la;N[0]=Q[0]+ua;N[1]=Q[1]+Z;return N}const v=Object.freeze({__proto__:null,
copy:b,set:E,add:h,subtract:r,multiply:w,divide:D,ceil:K,floor:I,min:x,max:d,round:g,scale:k,scaleAndAdd:B,distance:c,squaredDistance:t,length:n,squaredLength:u,negate:p,inverse:y,normalize:O,dot:z,cross:f,lerp:F,random:S,transformMat2:M,transformMat2d:P,transformMat3:H,transformMat4:L,rotate:A,angle:C,str:J,exactEquals:W,equals:ba,projectAndScale:X,len:n,sub:r,mul:w,div:D,dist:c,sqrDist:t,sqrLen:u});e.add=h;e.angle=C;e.ceil=K;e.copy=b;e.cross=f;e.dist=c;e.distance=c;e.div=D;e.divide=D;e.dot=z;e.equals=
ba;e.exactEquals=W;e.floor=I;e.inverse=y;e.len=n;e.length=n;e.lerp=F;e.max=d;e.min=x;e.mul=w;e.multiply=w;e.negate=p;e.normalize=O;e.projectAndScale=X;e.random=S;e.rotate=A;e.round=g;e.scale=k;e.scaleAndAdd=B;e.set=E;e.sqrDist=t;e.sqrLen=u;e.squaredDistance=t;e.squaredLength=u;e.str=J;e.sub=r;e.subtract=r;e.transformMat2=M;e.transformMat2d=P;e.transformMat3=H;e.transformMat4=L;e.vec2=v})},"esri/views/interactive/snapping/FeatureSnappingEngine":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/HandleOwner ../../../core/Handles ../../../core/MapUtils ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec3f64 ../../../layers/graphics/data/QueryEngineResult ./SnappingConstraint ./snappingUtils ./candidates/EdgeSnappingCandidate ./candidates/FeatureSnappingCandidate ./candidates/RightAngleSnappingCandidate".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g,k,B,c,t,n,u,p,y,O,z){q.FeatureSnappingEngine=function(S){function M(H){H=S.call(this,H)||this;H.sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null}};return H}b._inheritsLoose(M,S);var P=M.prototype;P.initialize=function(){this.updatingHandles.add(()=>this.snappingSources,()=>this.notifyChange("updating"),I.sync);D.isSome(this.view)&&this.handles.add([this.view.on("layerview-create",
H=>this._updateLayerView(H.layer,H.layerView)),this.view.on("layerview-destroy",H=>this._updateLayerView(H.layer,null))])};P._updateLayerView=function(H,L){for(const [,A]of this.snappingSources)A.snappingSource.layerSource.layer===H&&(A.layerView=L)};P.destroy=function(){this._set("options",null);for(const [,H]of this.snappingSources)H.destroy()};P.fetchCandidates=function(){var H=b._asyncToGenerator(function*(L,A,C){if(!this.options.effectiveFeatureEnabled)return[];var J=[];const W=this._computeScreeenSizeDistanceParameters(L,
A),ba={distance:W,point:L,coordinateHelper:A.coordinateHelper,types:this.types,filter:null};for(const [,{snappingSource:X,layerView:v}]of this.snappingSources)!X.layerSource.enabled||D.isSome(v)&&v.suspended||J.push(X.fetchCandidates(ba,C).then(N=>N.filter(Q=>!this._candidateIsExcluded(X,Q,A.excludeFeature))));J=(yield K.eachAlwaysValues(J)).flat();this._addRightAngleCandidates(J,L,W,A);K.throwIfAborted(C);p.sortCandidatesInPlace(L,J);return J});return function(L,A,C){return H.apply(this,arguments)}}();
P._addRightAngleCandidates=function(H,L,A,C){var J,W,ba,X,v,N,Q,Z;const ja=D.isSome(C.vertexHandle)?null==(J=C.vertexHandle.rightEdge)?void 0:null==(W=J.rightVertex)?void 0:W.pos:D.isSome(C.editGeometryOperations)&&"polygon"===C.editGeometryOperations.data.type?null==(ba=D.unwrap(null==(X=C.editGeometryOperations.data.components[0])?void 0:X.getFirstVertex()))?void 0:ba.pos:null;J=D.isSome(C.vertexHandle)?null==(v=C.vertexHandle.leftEdge)?void 0:null==(N=v.leftVertex)?void 0:N.pos:D.isSome(C.editGeometryOperations)?
null==(Q=D.unwrap(null==(Z=C.editGeometryOperations.data.components[0])?void 0:Z.getLastVertex()))?void 0:Q.pos:null;v=H.length;for(N=0;N<v;N++)this._addRightAngleCandidate(H[N],J,L,A,C,H),this._addRightAngleCandidate(H[N],ja,L,A,C,H)};P._addRightAngleCandidate=function(H,L,A,C,J,W){if(!D.isNone(L)&&H instanceof y.EdgeSnappingCandidate){var ba=H.constraint.closestTo(L),X=(ba[0]-A[0])/C.x;A=(ba[1]-A[1])/C.y;1>=X*X+A*A&&(J=J.coordinateHelper,W.push(new z.RightAngleSnappingCandidate({coordinateHelper:J,
targetPoint:ba,otherVertex:L,otherVertexType:z.OtherVertexType.NEXT,previousVertex:H.constraint.start,constraint:new u.RayConstraint(J,L,ba),objectId:H.objectId})))}};P._computeScreeenSizeDistanceParameters=function(H,L){const A=this.options.distance*("touch"===L.pointer?this.options.touchSensitivityMultiplier:1);return D.isNone(this.view)?{x:A,y:A}:"2d"===this.view.type?{x:A*this.view.resolution,y:A*this.view.resolution}:this._computeScreeenSizeDistanceParameters3D(H,A,this.view,L)};P._computeScreeenSizeDistanceParameters3D=
function(H,L,A,C){const {coordinateHelper:J,elevationInfo:W}=C,ba=A.state.camera.computeScreenPixelSizeAt(p.anyMapPointToRender(H,J,W,A,F))*A.renderCoordsHelper.unitInMeters/A.mapCoordsHelper.unitInMeters;L*=ba;const X=this._computeScreenMagnitudeOfMapOffset(H,ba,0,A,C);H=this._computeScreenMagnitudeOfMapOffset(H,0,ba,A,C);return{x:L/X,y:L/H}};P._computeScreenMagnitudeOfMapOffset=function(H,L,A,C,{coordinateHelper:J,elevationInfo:W}){const ba=J.clone(H);ba[0]+=L;ba[1]+=A;H=p.anyMapPointToScreenPoint(H,
J,W,C);J=p.anyMapPointToScreenPoint(ba,J,W,C);C=J.x-H.x;J=J.y-H.y;return Math.sqrt(C*C+J*J)};P._candidateIsExcluded=function(H,L,A){if(D.isNone(A))return!1;L=this._getCandidateObjectId(L);if(D.isNone(L))return!1;H=H.layerSource.layer;return"graphics"===H.type?A.uid===L:A.sourceLayer===H&&A.attributes&&"objectIdField"in H?A.attributes[H.objectIdField]===L:!1};P._getCandidateObjectId=function(H){return H instanceof O.FeatureSnappingCandidate?H.objectId:null};P._createSourceInfo=function(H){const L=
this._createFeatureSnappingSourceType(H);if(D.isNone(L))return null;if("loading"in L)return this.updatingHandles.addPromise(L.loading.then(()=>{this.destroyed||this.notifyChange("snappingSources")})),null;const A=D.isSome(this.view)?this.view.allLayerViews.find(C=>C.layer===H.layer):null;return new f(L.source,A)};P._createFeatureSnappingSourceType=function(H){switch(H.layer.type){case "feature":case "geojson":case "csv":case "subtype-group":case "wfs":return this._createFeatureSnappingSourceFeatureLayer(H);
case "graphics":return this._createFeatureSnappingSourceGraphicsLayer(H)}return null};P._createFeatureSnappingSourceFeatureLayer=function(H){switch(H.layer.source.type){case "feature-layer":var L=this._getSourceModule("featureService");return D.isSome(L.module)?{source:new L.module.FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:H})}:{loading:L.loader};case "memory":case "csv":case "geojson":case "wfs":if("mesh"!==H.layer.geometryType)return L=this._getSourceModule("featureCollection"),
D.isSome(L.module)?{source:new L.module.FeatureCollectionSnappingSource({layerSource:H})}:{loading:L.loader}}return null};P._createFeatureSnappingSourceGraphicsLayer=function(H){const L=this._getSourceModule("graphics");return D.isSome(L.module)?{source:new L.module.GraphicsSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:H})}:{loading:L.loader}};P._getSourceModule=function(H){const L=this.sourceModules[H];return D.isNone(L.loader)?(H=this._loadSourceModule(H).then(A=>
{L.module=A}),L.loader=H,{module:L.module,loader:H}):{module:L.module,loader:L.loader}};P._loadSourceModule=function(H){switch(H){case "featureService":return this.updatingHandles.addPromise(new Promise((L,A)=>e(["./featureSources/FeatureServiceSnappingSource"],L,A)));case "featureCollection":return this.updatingHandles.addPromise(new Promise((L,A)=>e(["./featureSources/FeatureCollectionSnappingSource"],L,A)));case "graphics":return this.updatingHandles.addPromise(new Promise((L,A)=>e(["./featureSources/GraphicsSnappingSource"],
L,A)))}return null};b._createClass(M,[{key:"updating",get:function(){return w.someMap(this.snappingSources,({snappingSource:H})=>H.updating)||this.updatingHandles.updating}},{key:"snappingSources",get:function(){var H;const L=this._get("snappingSources")||new Map,A=new Map;if(null!=(H=this.options)&&H.featureSources)for(const J of this.options.featureSources.items){H=J.layer.uid;var C=L.get(H);C?(L.delete(H),A.set(H,C)):J.layer.loaded?(C=this._createSourceInfo(J),D.isSome(C)&&A.set(H,C)):this.updatingHandles.addPromise(J.layer.load())}for(const [,
J]of L)J.destroy();return A}},{key:"types",get:function(){return n.SnappingTypes.EDGE|n.SnappingTypes.VERTEX}}]);return M}(h.HandleOwner);E.__decorate([d.property({constructOnly:!0})],q.FeatureSnappingEngine.prototype,"spatialReference",void 0);E.__decorate([d.property({constructOnly:!0})],q.FeatureSnappingEngine.prototype,"view",void 0);E.__decorate([d.property()],q.FeatureSnappingEngine.prototype,"options",void 0);E.__decorate([d.property({readOnly:!0})],q.FeatureSnappingEngine.prototype,"updating",
null);E.__decorate([d.property({readOnly:!0})],q.FeatureSnappingEngine.prototype,"snappingSources",null);q.FeatureSnappingEngine=E.__decorate([c.subclass("esri.views.interactive.snapping.FeatureSnappingEngine")],q.FeatureSnappingEngine);let f=function(){function S(M,P){this.snappingSource=M;this.layerView=P;this.handles=new r;P=this.snappingSource.layerSource.layer;"refresh"in P&&this.handles.add(P.on("refresh",()=>M.refresh()));this.handles.add([x.init(M,"updating",H=>M.layerSource.updating=H,!0),
x.init(M,"availability",H=>M.layerSource.availability=H,!0)])}S.prototype.destroy=function(){this.snappingSource.destroy();this.handles.destroy()};return S}();const F=t.create();Object.defineProperty(q,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./timeSupport ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g,k,B,c,t){function n(y,O,z,f,F,S){F-=z;S-=f;y=Math.min(1,Math.max(0,((y-z)*F+(O-f)*S)/(F*F+S*S)));return{x:z+F*y,y:f+S*y}}function u(y,O){return y?O?4:3:O?3:2}let p=function(){function y(z,f,F){this.items=z;this.queryGeometry=f;this.definitionExpression=F.definitionExpression;this.geometryType=F.geometryType;this.hasM=F.hasM;this.hasZ=F.hasZ;this.objectIdField=F.objectIdField;this.spatialReference=F.spatialReference;this.fieldsIndex=F.fieldsIndex;this.timeInfo=F.timeInfo;
this.featureAdapter=F.featureAdapter;this.aggregateAdapter=F.aggregateAdapter}var O=y.prototype;O.createQueryResponseForCount=function(z){const f=new I(z,this.featureAdapter,this.fieldsIndex);if(!z.outStatistics)return f.countDistinctValues(this.items);const {groupByFieldsForStatistics:F,having:S}=z;if(null==F||!F.length)return 1;const M=new Map,P=new Map,H=new Set;z=z.outStatistics;for(const A of z){({statisticType:z}=A);z="exceedslimit"!==z?A.onStatisticField:void 0;if(!P.has(z)){var L=[];for(const C of F){const J=
this._getAttributeValues(f,C,M);L.push(J)}P.set(z,this._calculateUniqueValues(L,f.returnDistinctValues))}z=P.get(z);for(const C in z){const {data:J,items:W}=z[C];L=J.join(",");S&&!f.validateItems(W,S)||H.add(L)}}return H.size};O.createQueryResponse=function(){var z=b._asyncToGenerator(function*(f){let F;F=f.outStatistics?f.outStatistics.some(S=>"exceedslimit"===S.statisticType)?this._createExceedsLimitQueryResponse(f):yield this._createStatisticsQueryResponse(f):this._createFeatureQueryResponse(f);
f.returnQueryGeometry&&(D.isValid(f.outSR)&&!D.equals(this.queryGeometry.spatialReference,f.outSR)?F.queryGeometry=k.cleanFromGeometryEngine({spatialReference:f.outSR,...d.project(this.queryGeometry,this.queryGeometry.spatialReference,f.outSR)}):F.queryGeometry=k.cleanFromGeometryEngine({spatialReference:f.outSR,...this.queryGeometry}));return F});return function(f){return z.apply(this,arguments)}}();O.createSnappingResponse=function(z,f){const F=this.featureAdapter,S=u(this.hasZ,this.hasM),{x:M,
y:P}=z.point,H="number"===typeof z.distance?z.distance:z.distance.x,L="number"===typeof z.distance?z.distance:z.distance.y,A={candidates:[]},C="esriGeometryPolygon"===this.geometryType;f=this._getPointCreator(z.point,this.spatialReference,f);for(const Z of this.items){var J=F.getGeometry(Z);if(E.isNone(J))continue;const {coords:ja,lengths:la}=J;if(z.types&q.SnappingTypes.EDGE){J=0;for(var W=0;W<la.length;W++){var ba=la[W];for(var X=0;X<ba;X++,J+=S){var v=ja[J],N=ja[J+1];if(X!==ba-1){const ua=ja[J+
S],Ba=ja[J+S+1],{x:Ga,y:Fa}=n(M,P,v,N,ua,Ba);var Q=(M-Ga)/H;const Ma=(P-Fa)/L;Q=Q*Q+Ma*Ma;1>=Q&&A.candidates.push({type:"edge",objectId:F.getObjectId(Z),distance:Math.sqrt(Q),target:f(Ga,Fa),start:f(v,N),end:f(ua,Ba)})}}}}if(z.types&q.SnappingTypes.VERTEX)for(J=C?ja.length-S:ja.length,W=0;W<J;W+=S)ba=ja[W],X=ja[W+1],v=(M-ba)/H,N=(P-X)/L,v=v*v+N*N,1>=v&&A.candidates.push({type:"vertex",objectId:F.getObjectId(Z),distance:Math.sqrt(v),target:f(ba,X)})}A.candidates.sort((Z,ja)=>Z.distance-ja.distance);
return A};O._getPointCreator=function(z,f,F){const S=E.isSome(F)&&!D.equals(f,F)?M=>d.project(M,f,F):M=>M;return null!=z.z&&null!=z.m?(M,P)=>S({x:M,y:P,z:z.z,m:z.m}):null!=z.z?(M,P)=>S({x:M,y:P,z:z.z}):null!=z.m?(M,P)=>S({x:M,y:P,m:z.m}):(M,P)=>S({x:M,y:P})};O.executeAttributesQuery=function(z){var f=x.getWhereClause(z.where,this.fieldsIndex);if(!f)return Promise.resolve(this);if(f.isStandardized){let F=0;const S=[];for(const M of this.items)f.testFeature(M,this.featureAdapter)&&(S[F++]=M);f=new y(S,
this.queryGeometry,this);f.definitionExpression=z.where;return Promise.resolve(f)}return Promise.reject(new TypeError("Where clause is not standardized"))};O.executeAggregateIdsQuery=function(z){if(!z.aggregateIds||!z.aggregateIds.length||E.isNone(this.aggregateAdapter))return Promise.resolve(this);const f=new Set;for(const S of z.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(S).forEach(M=>f.add(M));const F=this.featureAdapter.getObjectId;return Promise.resolve(new y(this.items.filter(S=>
f.has(F(S))),this.queryGeometry,this))};O.executeObjectIdsQuery=function(z){if(!z.objectIds||!z.objectIds.length)return Promise.resolve(this);const f=new Set(z.objectIds),F=this.featureAdapter.getObjectId;return Promise.resolve(new y(this.items.filter(S=>f.has(F(S))),this.queryGeometry,this))};O.executeTimeQuery=function(z){z=g.getTimeOperator(this.timeInfo,z.timeExtent,this.featureAdapter);if(!E.isSome(z))return Promise.resolve(this);z=this.items.filter(z);return Promise.resolve(new y(z,this.queryGeometry,
this))};O.filterLatest=function(){const {trackIdField:z,startTimeField:f,endTimeField:F}=this.timeInfo;var S=F||f;const M=new Map,P=this.featureAdapter.getAttribute;for(const H of this.items){const L=P(H,z),A=P(H,S),C=M.get(L);(!C||A>P(C,S))&&M.set(L,H)}S=Array.from(M.values());return Promise.resolve(new y(S,this.queryGeometry,this))};O.project=function(){var z=b._asyncToGenerator(function*(f){if(!f||D.equals(this.spatialReference,f))return this;const F=this.featureAdapter,S=(yield d.projectMany(this.items.map(M=>
k.getGeometry(this.geometryType,this.hasZ,this.hasM,F.getGeometry(M))),this.spatialReference,f)).map((M,P)=>F.cloneWithGeometry(this.items[P],K.convertFromGeometry(M,this.hasZ,this.hasM)));return new y(S,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:f,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})});return function(f){return z.apply(this,
arguments)}}();O.createSummaryStatisticsResponse=function(){var z=b._asyncToGenerator(function*(f,F){const {field:S,valueExpression:M,normalizationField:P,normalizationType:H,normalizationTotal:L,minValue:A,maxValue:C,scale:J}=F;F=this.fieldsIndex.isDateField(S);f=yield this._getDataValues(f,{field:S,valueExpression:M,normalizationField:P,normalizationType:H,normalizationTotal:L,scale:J});const W=c.isNullCountSupported({normalizationType:H,normalizationField:P,minValue:A,maxValue:C}),ba=this.fieldsIndex.get(S),
X={value:.5,fieldType:null==ba?void 0:ba.type};f=B.isStringField(ba)?c.calculateStringStatistics({values:f,supportsNullCount:W,percentileParams:X}):c.calculateStatistics({values:f,minValue:A,maxValue:C,useSampleStdDev:!H,supportsNullCount:W,percentileParams:X});return c.processSummaryStatisticsResult(f,F)});return function(f,F){return z.apply(this,arguments)}}();O.createUniqueValuesResponse=function(){var z=b._asyncToGenerator(function*(f,F){const {field:S,valueExpression:M,domain:P,returnAllCodedValues:H,
scale:L}=F;f=yield this._getDataValues(f,{field:S,valueExpression:M,scale:L});f=c.calculateUniqueValuesCount(f);return c.createUVResult(f,P,H)});return function(f,F){return z.apply(this,arguments)}}();O.createClassBreaksResponse=function(){var z=b._asyncToGenerator(function*(f,F){const {field:S,valueExpression:M,normalizationField:P,normalizationType:H,normalizationTotal:L,classificationMethod:A,standardDeviationInterval:C,minValue:J,maxValue:W,numClasses:ba,scale:X}=F;f=yield this._getDataValues(f,
{field:S,valueExpression:M,normalizationField:P,normalizationType:H,normalizationTotal:L,scale:X});f=c.calculateClassBreaks(f,{field:S,normalizationField:P,normalizationType:H,normalizationTotal:L,classificationMethod:A,standardDeviationInterval:C,minValue:J,maxValue:W,numClasses:ba});return c.resolveCBResult(f,A)});return function(f,F){return z.apply(this,arguments)}}();O.createHistogramResponse=function(){var z=b._asyncToGenerator(function*(f,F){const {field:S,valueExpression:M,normalizationField:P,
normalizationType:H,normalizationTotal:L,classificationMethod:A,standardDeviationInterval:C,minValue:J,maxValue:W,numBins:ba,scale:X}=F;f=yield this._getDataValues(f,{field:S,valueExpression:M,normalizationField:P,normalizationType:H,normalizationTotal:L,scale:X});return c.calculateHistogram(f,{field:S,normalizationField:P,normalizationType:H,normalizationTotal:L,classificationMethod:A,standardDeviationInterval:C,minValue:J,maxValue:W,numBins:ba})});return function(f,F){return z.apply(this,arguments)}}();
O._sortFeatures=function(z,f,F){if(1<z.length&&f&&f.length)for(const S of f.reverse()){f=S.split(" ");const M=f[0],P=this.fieldsIndex.get(M);f=f[1]&&"desc"===f[1].toLowerCase();const H=c.getAttributeComparator(null==P?void 0:P.type,f);z.sort((L,A)=>{L=F(L,M,P);A=F(A,M,P);return H(L,A)})}};O._createFeatureQueryResponse=function(z){const f=this.items,{geometryType:F,hasM:S,hasZ:M,objectIdField:P,spatialReference:H}=this,{outFields:L,outSR:A,quantizationParameters:C,resultRecordCount:J,resultOffset:W,
returnZ:ba,returnM:X}=z,v=null!=J?f.length>(W||0)+J:!1,N=L&&(L.includes("*")?[...this.fieldsIndex.fields]:L.map(Q=>this.fieldsIndex.get(Q)));return{exceededTransferLimit:v,features:this._createFeatures(z,f),fields:N,geometryType:F,hasM:S&&X,hasZ:M&&ba,objectIdFieldName:P,spatialReference:k.cleanFromGeometryEngine(A?A:H),transform:C&&w.toQuantizationTransform(C)||null}};O._createFeatures=function(z,f){const F=new I(z,this.featureAdapter,this.fieldsIndex),{hasM:S,hasZ:M}=this,{orderByFields:P,quantizationParameters:H,
returnGeometry:L,returnCentroid:A,maxAllowableOffset:C,resultOffset:J,resultRecordCount:W,returnZ:ba=!1,returnM:X=!1}=z,v=M&&ba,N=S&&X;z=[];var Q=0;f=[...f];this._sortFeatures(f,P,(la,ua,Ba)=>F.getFieldValue(la,ua,Ba));if(L||A){var Z=w.toQuantizationTransform(H);if(L&&!A)for(var ja of f)z[Q++]={attributes:F.getAttributes(ja),geometry:k.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ja),C,Z,v,N)};else if(!L&&A)for(const la of f)z[Q++]={attributes:F.getAttributes(la),
centroid:k.transformCentroid(this,this.featureAdapter.getCentroid(la,this),Z)};else for(const la of f)z[Q++]={attributes:F.getAttributes(la),centroid:k.transformCentroid(this,this.featureAdapter.getCentroid(la,this),Z),geometry:k.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(la),C,Z,v,N)}}else for(Z of f)(ja=F.getAttributes(Z))&&(z[Q++]={attributes:ja});Q=J||0;null!=W&&(z=z.slice(Q,Math.min(z.length,Q+W)));return z};O._createExceedsLimitQueryResponse=function(z){var f=
!1;let F=Number.POSITIVE_INFINITY,S=Number.POSITIVE_INFINITY;f=Number.POSITIVE_INFINITY;for(const M of z.outStatistics)if("exceedslimit"===M.statisticType){F=null!=M.maxPointCount?M.maxPointCount:Number.POSITIVE_INFINITY;S=null!=M.maxRecordCount?M.maxRecordCount:Number.POSITIVE_INFINITY;f=null!=M.maxVertexCount?M.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)f=this.items.length>F;else if(this.items.length>S)f=!0;else{z=this.hasZ?this.hasM?4:3:this.hasM?3:
2;const M=this.featureAdapter;f=this.items.reduce((P,H)=>{H=M.getGeometry(H);return P+(E.isSome(H)&&H.coords.length||0)},0)/z>f}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(f)}}]}};O._createStatisticsQueryResponse=function(){var z=b._asyncToGenerator(function*(f){var F={attributes:{}};const S=[],M=new Map,P=new Map,H=new Map,L=new Map,A=new I(f,this.featureAdapter,
this.fieldsIndex);var C=f.outStatistics;const {groupByFieldsForStatistics:J,having:W,orderByFields:ba}=f;f=J&&J.length;const X=!!f,v=X&&J[0],N=X&&!this.fieldsIndex.get(v);for(const ua of C){const {outStatisticFieldName:Ba,statisticType:Ga}=ua;C=ua;var Q="exceedslimit"!==Ga?ua.onStatisticField:void 0;const Fa="percentile_disc"===Ga||"percentile_cont"===Ga,Ma="EnvelopeAggregate"===Ga||"CentroidAggregate"===Ga||"ConvexHullAggregate"===Ga,ka=X&&1===f&&(Q===v||N)&&"count"===Ga;if(X){if(!H.has(Q)){var Z=
[];for(const na of J){var ja=this._getAttributeValues(A,na,M);Z.push(ja)}H.set(Q,this._calculateUniqueValues(Z,A.returnDistinctValues))}Z=H.get(Q);for(const na in Z){const {count:ma,data:aa,items:da,itemPositions:fa}=Z[na];ja=aa.join(",");if(!W||A.validateItems(da,W)){const ha=L.get(ja)||{attributes:{}};if(Ma){ha.aggregateGeometries||(ha.aggregateGeometries={});const {aggregateGeometries:sa,outStatisticFieldName:pa}=yield this._getAggregateGeometry(C,da);ha.aggregateGeometries[pa]=sa}else{var la=
null;if(ka)la=ma;else{const sa=this._getAttributeValues(A,Q,M);la=fa.map(pa=>sa[pa]);la=Fa&&"statisticParameters"in C?this._getPercentileValue(C,la):this._getStatisticValue(C,la,null,A.returnDistinctValues)}ha.attributes[Ba]=la}J.forEach((sa,pa)=>ha.attributes[this.fieldsIndex.get(sa)?sa:`EXPR_${pa+1}`]=aa[pa]);L.set(ja,ha)}}}else if(Ma){F.aggregateGeometries||(F.aggregateGeometries={});const {aggregateGeometries:na,outStatisticFieldName:ma}=yield this._getAggregateGeometry(C,this.items);F.aggregateGeometries[ma]=
na}else Q=this._getAttributeValues(A,Q,M),F.attributes[Ba]=Fa&&"statisticParameters"in C?this._getPercentileValue(C,Q):this._getStatisticValue(C,Q,P,A.returnDistinctValues);S.push({name:Ba,alias:Ba,type:"esriFieldTypeDouble"})}F=X?Array.from(L.values()):[F];this._sortFeatures(F,ba,(ua,Ba)=>ua.attributes[Ba]);return{fields:S,features:F}});return function(f){return z.apply(this,arguments)}}();O._getAggregateGeometry=function(){var z=b._asyncToGenerator(function*(f,F){var S=yield new Promise((ba,X)=>
e(["../../../geometry/geometryEngineJSON"],ba,X));const {statisticType:M,outStatisticFieldName:P}=f,{featureAdapter:H,spatialReference:L,geometryType:A,hasZ:C,hasM:J}=this;F=F.map(ba=>k.getGeometry(A,C,J,H.getGeometry(ba)));const W=S.convexHull(L,F,!0)[0];f={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===M?(S=W?r.getPolygonExtent(W):r.getGeometryExtent(S.union(L,F)),f.aggregateGeometries={...S,spatialReference:L},f.outStatisticFieldName=P||"extent"):"CentroidAggregate"===
M?(S=W?h.polygonCentroid(W):h.extentCentroid(r.getGeometryExtent(S.union(L,F))),f.aggregateGeometries={x:S[0],y:S[1],spatialReference:L},f.outStatisticFieldName=P||"centroid"):"ConvexHullAggregate"===M&&(f.aggregateGeometries=W,f.outStatisticFieldName=P||"convexHull");return f});return function(f,F){return z.apply(this,arguments)}}();O._getStatisticValue=function(z,f,F,S){const {onStatisticField:M,statisticType:P}=z;z=null;z=null!=F&&F.has(M)?F.get(M):B.isStringField(this.fieldsIndex.get(M))?c.calculateStringStatistics({values:f,
returnDistinct:S}):c.calculateStatistics({values:f,minValue:null,maxValue:null,useSampleStdDev:!0});F&&F.set(M,z);return z["var"===P?"variance":P]};O._getPercentileValue=function(z,f){const {onStatisticField:F,statisticParameters:S,statisticType:M}=z,{value:P,orderBy:H}=S;z=this.fieldsIndex.get(F);return c.calculatePercentile(f,{value:P,orderBy:H,fieldType:null==z?void 0:z.type,isDiscrete:"percentile_disc"===M})};O._getAttributeValues=function(z,f,F){if(F.has(f))return F.get(f);const S=this.fieldsIndex.get(f),
M=this.items.map(P=>z.getFieldValue(P,f,S));F.set(f,M);return M};O._getAttributeNormalizedValues=function(z,f){return this.items.map(F=>z.getNormalizedValue(F,{field:f.field,fieldInfo:this.fieldsIndex.get(f.field),normalizationField:f.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(f.normalizationField),normalizationType:f.normalizationType,normalizationTotal:f.normalizationTotal}))};O._getAttributeExpressionValues=function(){var z=b._asyncToGenerator(function*(f,F,S){const {arcadeUtils:M}=
yield t.loadArcade(),P=M.createFunction(F),H=S&&M.getViewInfo(S);return this.items.map(L=>f.getExpressionValue(L,{compiledFunc:P,viewInfo:H},M))});return function(f,F,S){return z.apply(this,arguments)}}();O._calculateUniqueValues=function(z,f){const F={},S=this.items,M=S.length;for(let P=0;P<M;P++){const H=S[P],L=[];for(const C of z)L.push(C[P]);const A=L.join(",");f?null==F[A]&&(F[A]={count:1,data:L,items:[H],itemPositions:[P]}):null==F[A]?F[A]={count:1,data:L,items:[H],itemPositions:[P]}:(F[A].count++,
F[A].items.push(H),F[A].itemPositions.push(P))}return F};O._getDataValues=function(){var z=b._asyncToGenerator(function*(f,F){const S=new I(f,this.featureAdapter,this.fieldsIndex),{valueExpression:M,field:P,normalizationField:H,normalizationType:L,normalizationTotal:A,scale:C}=F;f=M?{viewingMode:"map",scale:C,spatialReference:f.outSR||this.spatialReference}:null;return M?this._getAttributeExpressionValues(S,M,f):this._getAttributeNormalizedValues(S,{field:P,normalizationField:H,normalizationType:L,
normalizationTotal:A})});return function(f,F){return z.apply(this,arguments)}}();b._createClass(y,[{key:"size",get:function(){return this.items.length}}]);return y}();q.SnappingTypes=void 0;(function(y){y[y.NONE=0]="NONE";y[y.EDGE=1]="EDGE";y[y.VERTEX=2]="VERTEX"})(q.SnappingTypes||(q.SnappingTypes={}));q.default=p;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(e,q,b){function E({scale:M,
translate:P},H){return Math.round((H-P[0])/M[0])}function h({scale:M,translate:P},H){return Math.round((P[1]-H)/M[1])}function r(M,P,H){const L=[];let A,C,J,W;for(let ba=0;ba<H.length;ba++){const X=H[ba];if(0<ba){if(J=E(M,X[0]),W=h(M,X[1]),J!==A||W!==C)L.push(P(X,J-A,W-C)),A=J,C=W}else A=E(M,X[0]),C=h(M,X[1]),L.push(P(X,A,C))}return 0<L.length?L:null}function w(M,P,H,L){return r(M,H?L?S:F:L?F:f,P)}function D(M,P,H,L){const A=[];H=H?L?S:F:L?F:f;for(L=0;L<P.length;L++){const C=r(M,H,P[L]);C&&3<=C.length&&
A.push(C)}return A.length?A:null}function K(M,P,H,L){const A=[];H=H?L?S:F:L?F:f;for(L=0;L<P.length;L++){const C=r(M,H,P[L]);C&&2<=C.length&&A.push(C)}return A.length?A:null}function I({scale:M,translate:P},H){return H*M[0]+P[0]}function x({scale:M,translate:P},H){return P[1]-H*M[1]}function d(M,P,H){const L=Array(H.length);if(!H.length)return L;const [A,C]=M.scale;let J=I(M,H[0][0]);M=x(M,H[0][1]);L[0]=P(H[0],J,M);for(let W=1;W<H.length;W++){const ba=H[W];J+=ba[0]*A;M-=ba[1]*C;L[W]=P(ba,J,M)}return L}
function g(M,P,H){const L=Array(H.length);for(let A=0;A<H.length;A++)L[A]=d(M,P,H[A]);return L}function k(M,P,H,L){return d(M,H?L?S:F:L?F:f,P)}function B(M,P,H,L){return g(M,H?L?S:F:L?F:f,P)}function c(M,P,H,L){return g(M,H?L?S:F:L?F:f,P)}function t(M,P,H){let [L,A]=H[0],C=Math.min(L,P[0]),J=Math.min(A,P[1]),W=Math.max(L,P[2]);P=Math.max(A,P[3]);for(let ba=1;ba<H.length;ba++){const [X,v]=H[ba];L+=X;A+=v;0>X&&(C=Math.min(C,L));0<X&&(W=Math.max(W,L));0>v?J=Math.min(J,A):0<v&&(P=Math.max(P,A))}M[0]=
C;M[1]=J;M[2]=W;M[3]=P;return M}function n(M,P){if(!P.length)return null;M[0]=M[1]=Number.POSITIVE_INFINITY;M[2]=M[3]=Number.NEGATIVE_INFINITY;for(let H=0;H<P.length;H++)t(M,M,P[H]);return M}function u(M,P,H,L,A){P.xmin=E(M,H.xmin);P.ymin=h(M,H.ymin);P.xmax=E(M,H.xmax);P.ymax=h(M,H.ymax);P!==H&&(L&&(P.zmin=H.zmin,P.zmax=H.zmax),A&&(P.mmin=H.mmin,P.mmax=H.mmax));return P}function p(M,P,H,L,A){P.points=w(M,H.points,L,A);return P}function y(M,P,H,L,A){P.x=E(M,H.x);P.y=h(M,H.y);P!==H&&(L&&(P.z=H.z),A&&
(P.m=H.m));return P}function O(M,P,H,L,A){M=D(M,H.rings,L,A);if(!M)return null;P.rings=M;return P}function z(M,P,H,L,A){M=K(M,H.paths,L,A);if(!M)return null;P.paths=M;return P}const f=(M,P,H)=>[P,H],F=(M,P,H)=>[P,H,M[2]],S=(M,P,H)=>[P,H,M[2],M[3]];e.equals=function(M,P){if(M===P||null==M&&null==P)return!0;if(null==M||null==P)return!1;let H,L,A,C;M&&"upperLeft"===M.originPosition?(H=M.translate[0],L=M.translate[1],M=M.scale[0]):(H=q.isSome(M.extent)?M.extent.xmin:0,L=q.isSome(M.extent)?M.extent.ymax:
0,M=M.tolerance);P&&"upperLeft"===P.originPosition?(A=P.translate[0],C=P.translate[1],P=P.scale[0]):(A=q.isSome(P.extent)?P.extent.xmin:0,C=q.isSome(P.extent)?P.extent.ymax:0,P=P.tolerance);return H===A&&L===C&&M===P};e.getQuantizedBoundsCoordsArray=t;e.getQuantizedBoundsCoordsArrayArray=n;e.getQuantizedBoundsPaths=function(M){return n([0,0,0,0],M)};e.getQuantizedBoundsPoints=function(M){const P=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];
return t(P,P,M)};e.getQuantizedBoundsRings=function(M){return n([0,0,0,0],M)};e.quantizeBounds=function(M,P,H){P[0]=E(M,H[0]);P[3]=h(M,H[1]);P[2]=E(M,H[2]);P[1]=h(M,H[3]);return P};e.quantizeExtent=u;e.quantizeGeometry=function(M,P){return M&&P?b.isPoint(P)?y(M,{},P,!1,!1):b.isPolyline(P)?z(M,{},P,!1,!1):b.isPolygon(P)?O(M,{},P,!1,!1):b.isMultipoint(P)?p(M,{},P,!1,!1):b.isExtent(P)?u(M,{},P,!1,!1):null:null};e.quantizeMultipoint=p;e.quantizePaths=K;e.quantizePoint=y;e.quantizePoints=w;e.quantizePolygon=
O;e.quantizePolyline=z;e.quantizeRings=D;e.quantizeX=E;e.quantizeY=h;e.toQuantizationTransform=function(M){return M?{originPosition:"upper-left"===M.originPosition?"upperLeft":"lower-left"===M.originPosition?"lowerLeft":M.originPosition,scale:M.tolerance?[M.tolerance,M.tolerance]:[1,1],translate:q.isSome(M.extent)?[M.extent.xmin,M.extent.ymax]:[0,0]}:null};e.unquantizeBounds=function(M,P,H){return H?(P[0]=I(M,H[0]),P[1]=x(M,H[3]),P[2]=I(M,H[2]),P[3]=x(M,H[1]),P):[I(M,P[0]),x(M,P[3]),I(M,P[2]),x(M,
P[1])]};e.unquantizeCoordsArray=d;e.unquantizeCoordsArrayArray=g;e.unquantizeExtent=function(M,P,H,L,A){P.xmin=I(M,H.xmin);P.ymin=x(M,H.ymin);P.xmax=I(M,H.xmax);P.ymax=x(M,H.ymax);P!==H&&(L&&(P.zmin=H.zmin,P.zmax=H.zmax),A&&(P.mmin=H.mmin,P.mmax=H.mmax));return P};e.unquantizeMultipoint=function(M,P,H,L,A){q.isSome(H)&&(P.points=k(M,H.points,L,A));return P};e.unquantizePaths=B;e.unquantizePoint=function(M,P,H,L,A){if(q.isNone(H))return P;P.x=I(M,H.x);P.y=x(M,H.y);P!==H&&(L&&(P.z=H.z),A&&(P.m=H.m));
return P};e.unquantizePoints=k;e.unquantizePolygon=function(M,P,H,L,A){q.isSome(H)&&(P.rings=c(M,H.rings,L,A));return P};e.unquantizePolyline=function(M,P,H,L,A){q.isSome(H)&&(P.paths=B(M,H.paths,L,A));return P};e.unquantizeRings=c;e.unquantizeX=I;e.unquantizeY=x;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport","../../../statistics/utils"],function(e,q,b){return function(){function E(r,w,
D){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=r.returnDistinctValues;this.fieldsIndex=D;this.featureAdapter=w;if((w=r.outFields)&&-1===w.indexOf("*")){this.outFields=w;r=0;for(const I of w){var K=q.getExpressionFromFieldName(I);K=(w=this.fieldsIndex.get(K))?null:q.getWhereClause(K,D);w=w?w.name:q.getAliasFromFieldName(I)||`FIELD_EXP_${r++}`;this._fieldDataCache.set(I,{alias:w,clause:K})}}}var h=E.prototype;h.countDistinctValues=function(r){if(!this.returnDistinctValues)return r.length;
r.forEach(w=>this.getAttributes(w));return this._returnDistinctMap.size};h.getAttributes=function(r){r=this._processAttributesForOutFields(r);return this._processAttributesForDistinctValues(r)};h.getFieldValue=function(r,w,D){const K=D?D.name:w;let I=null;this._fieldDataCache.has(K)?I=this._fieldDataCache.get(K).clause:D||(I=q.getWhereClause(w,this.fieldsIndex),this._fieldDataCache.set(K,{alias:K,clause:I}));return D?this.featureAdapter.getAttribute(r,K):I.calculateValue(r,this.featureAdapter)};h.getNormalizedValue=
function(r,w){const D=w.normalizationType,K=w.normalizationTotal;let I=this.getFieldValue(r,w.field,w.fieldInfo);D&&Number.isFinite(I)&&(r=this.getFieldValue(r,w.normalizationField,w.normalizationFieldInfo),I=b.getNormalizedValue(I,D,r,K));return I};h.getExpressionValue=function(r,w,D){r={attributes:this.featureAdapter.getAttributes(r)};r=D.createExecContext(r,w.viewInfo);return D.executeFunction(w.compiledFunc,r)};h.validateItem=function(r,w){this._fieldDataCache.has(w)||this._fieldDataCache.set(w,
{alias:w,clause:q.getWhereClause(w,this.fieldsIndex)});return this._fieldDataCache.get(w).clause.testFeature(r,this.featureAdapter)};h.validateItems=function(r,w){this._fieldDataCache.has(w)||this._fieldDataCache.set(w,{alias:w,clause:q.getWhereClause(w,this.fieldsIndex)});return this._fieldDataCache.get(w).clause.testSet(r,this.featureAdapter)};h._processAttributesForOutFields=function(r){const w=this.outFields;if(!w||!w.length)return this.featureAdapter.getAttributes(r);const D={};for(const K of w){const {alias:I,
clause:x}=this._fieldDataCache.get(K);D[I]=x?x.calculateValue(r,this.featureAdapter):this.featureAdapter.getAttribute(r,I)}return D};h._processAttributesForDistinctValues=function(r){if(e.isNone(r)||!this.returnDistinctValues)return r;var w=this.outFields,D=[];if(w)for(const I of w){var {alias:K}=this._fieldDataCache.get(I);D.push(r[K])}else for(K in r)D.push(r[K]);w=`${(w||["*"]).join(",")}=${D.join(",")}`;D=this._returnDistinctMap.get(w)||0;this._returnDistinctMap.set(w,++D);return 1<D?null:r};
return E}()})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],function(e,q,b){function E(K,I){return K?w.get(K,I):null}function h(K,I,x,d=!0){const g=[];for(const k of I)if("*"!==k&&!K.has(k))if(d){I=r(k);try{const B=E(I,K);if(!B)throw new q("feature-store:unsupported-query","invalid SQL expression",{where:I});if(!B.isStandardized)throw new q("feature-store:unsupported-query","expression is not standard",{clause:B});
h(K,B.fieldNames,"expression contains missing fields")}catch(B){if((I=B&&B.details)&&(I.clause||I.where))throw B;I&&I.missingFields?g.push(...I.missingFields):g.push(k)}}else g.push(k);if(g.length)throw new q("feature-store:unsupported-query",x,{missingFields:g});}function r(K){return K.split(" as ")[0]}const w=new b.WhereClauseCache(50,500),D=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));
e.getAliasFromFieldName=function(K){return K.split(" as ")[1]};e.getExpressionFromFieldName=r;e.getWhereClause=E;e.hasInvalidFieldType=function(K,I){return(K=I.get(K))?!D.has(K.type):!1};e.validateFields=h;e.validateHaving=function(K,I,x){if(!I)return!0;const d=w.get(I,K);if(!d)throw new q("feature-store:unsupported-query","invalid SQL expression",{having:I});if(!d.isAggregate)throw new q("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:I});h(K,d.fieldNames,
"having contains missing fields");if(!d.getExpressions().every(g=>{const {aggregateType:k,field:B}=g,c=K.has(B)&&K.get(B).name;return x.some(t=>{const {onStatisticField:n,statisticType:u}=t;return(K.has(n)&&K.get(n).name)===c&&u.toLowerCase().trim()===k})}))throw new q("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:I});return!0};e.validateWhere=function(K,I){if(!I)return!0;const x=w.get(I,K);if(!x)throw new q("feature-store:unsupported-query",
"invalid SQL expression",{where:I});if(!x.isStandardized)throw new q("feature-store:unsupported-query","where clause is not standard",{where:I});h(K,x.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(e,q,b){let E=function(){function h(r,w){this._cache=new q(r);this._invalidCache=new q(w)}h.prototype.get=function(r,w){const D=`${w.uid}:${r}`,
K=this._cache.get(D);if(K)return K;if(void 0!==this._invalidCache.get(D))return null;try{const I=b.WhereClause.create(r,w);this._cache.put(D,I);return I}catch{return this._invalidCache.put(D,null),null}};return h}();e.WhereClauseCache=E;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(e,q,b,E,h,r){function w(A,C){A+=
"";return A.length>=C?A:Array(C-A.length+1).join("0")+A}function D(A,C,J="0",W="0",ba="0",X="0",v="",N="0",Q="0"){return"+"===v||"-"===v?(A=`${w(parseInt(A,10),4)}-${w(parseInt(C,10),2)}-${w(parseInt(J,10),2)}`,C="",10>parseFloat(X)&&(C="0"),W=`${w(parseInt(W,10),2)}:${w(parseInt(ba,10),2)}:${C+parseFloat(X).toString()}`,v=`${v}${w(parseInt(N,10),2)}:${w(parseInt(Q,10),2)}`,new Date(A+"T"+W+v)):new Date(parseInt(A,10),parseInt(C,10)-1,parseInt(J,10),parseInt(W,10),parseInt(ba,10),parseFloat(X))}function K(A){let C=
O.exec(A);if(null!==C){const [,J,W,ba,X,v,N]=C;return D(J,W,ba,X,v,N)}C=z.exec(A);if(null!==C){const [,J,W,ba,X,v,N,Q,Z,ja]=C;return D(J,W,ba,X,v,N,Q,Z,ja)}C=f.exec(A);if(null!==C){const [,J,W,ba,X,v,N,Q,Z]=C;return D(J,W,ba,X,v,"0",N,Q,Z)}C=F.exec(A);if(null!==C){const [,J,W,ba,X,v]=C;return D(J,W,ba,X,v)}C=y.exec(A);if(null!==C){const [,J,W,ba]=C;return D(J,W,ba)}throw Error("SQL Invalid Timestamp");}function I(A){A=y.exec(A);if(null===A)throw Error("SQL Invalid Date");const [,C,J,W]=A;return new Date(parseInt(C,
10),parseInt(J,10)-1,parseInt(W,10))}function x(A){return Array.isArray(A)?A:[A]}function d(A){return null!==A?!0!==A:null}function g(A,C){return null!=A&&null!=C?!0===A&&!0===C:!1===A||!1===C?!1:null}function k(A,C){return null!=A&&null!=C?!0===A||!0===C:!0===A||!0===C?!0:null}function B(A,C){if(null==A)return null;let J=!1;for(const W of C)if(null==W)J=null;else if(A===W){J=!0;break}return J}function c(A,C,J){if(null==A)return null;{let W="",ba=H.Normal;for(let X=0;X<C.length;X++){const v=C.charAt(X);
switch(ba){case H.Normal:v===J?ba=H.Escaped:W="-[]/{}()*+?.\\^$|".includes(v)?W+("\\"+v):"%"===v?W+".*":"_"===v?W+".":W+v;break;case H.Escaped:W="-[]/{}()*+?.\\^$|".includes(v)?W+("\\"+v):W+v,ba=H.Normal}}C=new RegExp("^"+W+"$","m")}return C.test(A)}function t(A){return A instanceof Date?A.valueOf():A}function n(A,C,J){if(null==C||null==J)return null;C=t(C);J=t(J);switch(A){case "\x3c\x3e":return C!==J;case "\x3d":return C===J;case "\x3e":return C>J;case "\x3c":return C<J;case "\x3e\x3d":return C>=
J;case "\x3c\x3d":return C<=J}}function u(A,C,J){if(C instanceof h.SqlInterval)if(J instanceof Date)switch(A){case "+":return new Date(C.valueInMilliseconds()+J.getTime());case "-":return C.valueInMilliseconds()-J.getTime();case "*":return C.valueInMilliseconds()*J.getTime();case "/":return C.valueInMilliseconds()/J.getTime()}else if(J instanceof h.SqlInterval)switch(A){case "+":return h.SqlInterval.createFromMilliseconds(C.valueInMilliseconds()+J.valueInMilliseconds());case "-":return h.SqlInterval.createFromMilliseconds(C.valueInMilliseconds()-
J.valueInMilliseconds());case "*":return C.valueInMilliseconds()*J.valueInMilliseconds();case "/":return C.valueInMilliseconds()/J.valueInMilliseconds()}else C=C.valueInMilliseconds();else if(J instanceof h.SqlInterval)if(C instanceof Date)switch(A){case "+":return new Date(J.valueInMilliseconds()+C.getTime());case "-":return new Date(C.getTime()-J.valueInMilliseconds());case "*":return C.getTime()*J.valueInMilliseconds();case "/":return C.getTime()/J.valueInMilliseconds()}else J=J.valueInMilliseconds();
else if(C instanceof Date&&"number"===typeof J)switch(J*=864E5,C=C.getTime(),A){case "+":return new Date(C+J);case "-":return new Date(C-J);case "*":return new Date(C*J);case "/":return new Date(C/J)}else if(J instanceof Date&&"number"===typeof C)switch(C*=864E5,J=J.getTime(),A){case "+":return new Date(C+J);case "-":return new Date(C-J);case "*":return new Date(C*J);case "/":return new Date(C/J)}switch(A){case "+":return C+J;case "-":return C-J;case "*":return C*J;case "/":return C/J}}function p(A,
C,J,W){A=W.getAttribute(A,C);return null!=A&&1===J[C]?new Date(A):A}const y=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,O=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,z=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,f=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,F=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,S=new Set(["current_timestamp","current_date","current_time"]);let M=function(){function A(){}
A.makeBool=function(C){return!0===C};A.featureValue=function(C,J,W,ba){return p(C,J,W,ba)};A.equalsNull=function(C){return null===C};A.applyLike=function(C,J,W){return c(C,J,W)};A.ensureArray=function(C){return x(C)};A.applyIn=function(C,J){return B(C,J)};A.currentDate=function(){const C=new Date;C.setHours(0,0,0,0);return C};A.makeSqlInterval=function(C,J,W){return h.SqlInterval.createFromValueAndQualifer(C,J,W)};A.convertInterval=function(C){return C instanceof h.SqlInterval?C.valueInMilliseconds():
C};A.currentTimestamp=function(){return new Date};A.compare=function(C,J,W){return n(C,J,W)};A.calculate=function(C,J,W){return u(C,J,W)};A.makeComparable=function(C){return t(C)};A.evaluateFunction=function(C,J){return h.evaluateFunction(C,J)};A.lookup=function(C,J){C=J[C];return void 0===C?null:C};A.between=function(C,J){return null==C||null==J[0]||null==J[1]?null:C>=J[0]&&C<=J[1]};A.notbetween=function(C,J){return null==C||null==J[0]||null==J[1]?null:C<J[0]||C>J[1]};A.ternaryNot=function(C){return d(C)};
A.ternaryAnd=function(C,J){return g(C,J)};A.ternaryOr=function(C,J){return k(C,J)};return A}(),P=function(){function A(J,W){this.fieldsIndex=W;this.datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=r.WhereGrammar.parse(J);const {isStandardized:ba,isAggregate:X,referencedFieldNames:v}=this._extractExpressionInfo(W);this.referencedFieldNames=v;this.isStandardized=ba;this.isAggregate=X}A.create=function(J,W){return new A(J,W)};var C=A.prototype;C.testSet=function(J,W=L){const ba=
{};for(const X of this.fieldNames)ba[X]=J.map(v=>W.getAttribute(v,X));return!!this._evaluateNode(this.parseTree,{attributes:ba},L)};C.calculateValue=function(J,W=L){J=this._evaluateNode(this.parseTree,J,W);return J instanceof h.SqlInterval?J.valueInMilliseconds()/864E5:J};C.calculateValueCompiled=function(J,W=L){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(J,this.parameters,W,this.datefields);if(b("esri-csp-restrictions"))return this.calculateValue(J,W);this._compileMe();
return this.parseTree._compiledVersion(J,this.parameters,W,this.datefields)};C.testFeature=function(J,W=L){return!!this._evaluateNode(this.parseTree,J,W)};C.testFeatureCompiled=function(J,W=L){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(J,this.parameters,W,this.datefields);if(b("esri-csp-restrictions"))return this.testFeature(J,W);this._compileMe();return!!this.parseTree._compiledVersion(J,this.parameters,W,this.datefields)};C.getFunctions=function(){const J=new Set;
this._visitAll(this.parseTree,W=>{"function"===W.type&&J.add(W.name.toLowerCase())});return Array.from(J)};C.getExpressions=function(){const J=new Map;this._visitAll(this.parseTree,W=>{if("function"===W.type){const ba=W.name.toLowerCase();W=W.args.value[0];if("column_ref"===W.type){W=W.column;const X=`${ba}-${W}`;J.has(X)||J.set(X,{aggregateType:ba,field:W})}}});return[...J.values()]};C.getVariables=function(){const J=new Set;this._visitAll(this.parseTree,W=>{"param"===W.type&&J.add(W.value.toLowerCase())});
return Array.from(J)};C._compileMe=function(){const J="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",J)).bind(M)};C._extractExpressionInfo=function(J){const W=[],ba=new Set;let X=!0,v=!0;this._visitAll(this.parseTree,N=>{switch(N.type){case "column_ref":{const Q=J.get(N.column);let Z,ja;Q?Z=ja=Q.name:(ja=N.column,Z=ja.toLowerCase());!Q||"date"!==Q.type&&"esriFieldTypeDate"!==
Q.type||(this.datefields[Q.name]=1);ba.has(Z)||(ba.add(Z),W.push(ja));N.column=ja;break}case "function":{const {name:Q,args:Z}=N;N=Z.value.length;X&&(X=h.isStandardized(Q,N));v&&(v=E.isAggregate(Q,N))}}});return{referencedFieldNames:Array.from(W),isStandardized:X,isAggregate:v}};C._visitAll=function(J,W){if(null!=J)switch(W(J),J.type){case "when_clause":this._visitAll(J.operand,W);this._visitAll(J.value,W);break;case "case_expression":for(const ba of J.clauses)this._visitAll(ba,W);"simple"===J.format&&
this._visitAll(J.operand,W);null!==J.else&&this._visitAll(J.else,W);break;case "expr_list":for(const ba of J.value)this._visitAll(ba,W);break;case "unary_expr":this._visitAll(J.expr,W);break;case "binary_expr":this._visitAll(J.left,W);this._visitAll(J.right,W);break;case "function":this._visitAll(J.args,W)}};C.evaluateNodeToJavaScript=function(J){switch(J.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(J.value)+", "+JSON.stringify(J.qualifier)+","+JSON.stringify(J.op)+
")";case "case_expression":var W="";if("simple"===J.format){var ba="this.makeComparable("+this.evaluateNodeToJavaScript(J.operand)+")";W="( ";for(let X=0;X<J.clauses.length;X++)W+=" ("+ba+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(J.clauses[X].operand)+")) ? ("+this.evaluateNodeToJavaScript(J.clauses[X].value)+") : "}else for(W="( ",ba=0;ba<J.clauses.length;ba++)W+=" this.makeBool("+this.evaluateNodeToJavaScript(J.clauses[ba].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(J.clauses[ba].value)+
") : ";W=null!==J.else?W+this.evaluateNodeToJavaScript(J.else):W+"null";return W+=" )";case "param":return"this.lookup("+JSON.stringify(J.value.toLowerCase())+",lookups)";case "expr_list":W="[";for(ba of J.value)"["!==W&&(W+=","),W+=this.evaluateNodeToJavaScript(ba);return W+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(J.expr)+")";case "binary_expr":switch(J.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(J.left)+","+this.evaluateNodeToJavaScript(J.right)+
" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(J.left)+","+this.evaluateNodeToJavaScript(J.right)+" )";case "IS":if("null"!==J.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(J.left)+")";case "ISNOT":if("null"!==J.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(J.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(J.left)+",this.ensureArray("+
this.evaluateNodeToJavaScript(J.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(J.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(J.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(J.left)+","+this.evaluateNodeToJavaScript(J.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(J.left)+","+this.evaluateNodeToJavaScript(J.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(J.left)+
","+this.evaluateNodeToJavaScript(J.right)+","+JSON.stringify(J.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(J.left)+","+this.evaluateNodeToJavaScript(J.right)+","+JSON.stringify(J.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(J.operator)+","+this.evaluateNodeToJavaScript(J.left)+","+this.evaluateNodeToJavaScript(J.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+
JSON.stringify(J.operator)+","+this.evaluateNodeToJavaScript(J.left)+","+this.evaluateNodeToJavaScript(J.right)+")"}throw Error("Not Supported Operator "+J.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(J.value);case "date":return"(new Date("+I(J.value).getTime().toString()+"))";case "timestamp":return"(new Date("+K(J.value).getTime().toString()+"))";case "current_time":return"date"===J.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+
JSON.stringify(J.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(J.name)+","+this.evaluateNodeToJavaScript(J.args)+")"}throw Error("Unsupported sql syntax "+J.type);};C._evaluateNode=function(J,W,ba){switch(J.type){case "interval":return W=this._evaluateNode(J.value,W,ba),h.SqlInterval.createFromValueAndQualifer(W,J.qualifier,J.op);case "case_expression":if("simple"===J.format){var X=t(this._evaluateNode(J.operand,W,ba));for(var v=0;v<J.clauses.length;v++)if(X===
t(this._evaluateNode(J.clauses[v].operand,W,ba)))return this._evaluateNode(J.clauses[v].value,W,ba)}else for(X=0;X<J.clauses.length;X++)if(!0===this._evaluateNode(J.clauses[X].operand,W,ba))return this._evaluateNode(J.clauses[X].value,W,ba);return null!==J.else?this._evaluateNode(J.else,W,ba):null;case "param":return this.parameters[J.value.toLowerCase()];case "expr_list":X=[];for(v of J.value)X.push(this._evaluateNode(v,W,ba));return X;case "unary_expr":return d(this._evaluateNode(J.expr,W,ba));
case "binary_expr":switch(J.operator){case "AND":return g(this._evaluateNode(J.left,W,ba),this._evaluateNode(J.right,W,ba));case "OR":return k(this._evaluateNode(J.left,W,ba),this._evaluateNode(J.right,W,ba));case "IS":if("null"!==J.right.type)throw Error("Unsupported RHS for IS");return null===this._evaluateNode(J.left,W,ba);case "ISNOT":if("null"!==J.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(J.left,W,ba);case "IN":return X=x(this._evaluateNode(J.right,W,ba)),
B(this._evaluateNode(J.left,W,ba),X);case "NOT IN":return X=x(this._evaluateNode(J.right,W,ba)),d(B(this._evaluateNode(J.left,W,ba),X));case "BETWEEN":return X=this._evaluateNode(J.left,W,ba),J=this._evaluateNode(J.right,W,ba),null==X||null==J[0]||null==J[1]?null:X>=t(J[0])&&X<=t(J[1]);case "NOTBETWEEN":return X=this._evaluateNode(J.left,W,ba),J=this._evaluateNode(J.right,W,ba),null==X||null==J[0]||null==J[1]?null:X<t(J[0])||X>t(J[1]);case "LIKE":return c(this._evaluateNode(J.left,W,ba),this._evaluateNode(J.right,
W,ba),J.escape);case "NOT LIKE":return d(c(this._evaluateNode(J.left,W,ba),this._evaluateNode(J.right,W,ba),J.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return n(J.operator,this._evaluateNode(J.left,W,ba),this._evaluateNode(J.right,W,ba));case "-":case "+":case "*":case "/":return u(J.operator,this._evaluateNode(J.left,W,ba),this._evaluateNode(J.right,W,ba))}case "null":case "bool":case "string":case "number":return J.value;case "date":return I(J.value);
case "timestamp":return K(J.value);case "current_time":return W=new Date,"date"===J.mode&&W.setHours(0,0,0,0),W;case "column_ref":return p(W,J.column,this.datefields,ba);case "function":return W=this._evaluateNode(J.args,W,ba),this.isAggregate?E.aggregateFunction(J.name,W):h.evaluateFunction(J.name,W)}throw Error("Unsupported sql syntax "+J.type);};q._createClass(A,[{key:"fieldNames",get:function(){return this.referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;
this._hasDateFunctions=!1;this._visitAll(this.parseTree,J=>{"current_time"===J.type?this._hasDateFunctions=!0:"function"===J.type&&(this._hasDateFunctions=this._hasDateFunctions||S.has(J.name.toLowerCase()))});return this._hasDateFunctions}}]);return A}();var H;(function(A){A[A.Normal=0]="Normal";A[A.Escaped=1]="Escaped"})(H||(H={}));const L={getAttribute(A,C){return(A&&"object"===typeof A.attributes?A.attributes:A)[C]}};e.WhereClause=P;e.defaultAttributeAdapter=L;Object.defineProperty(e,"__esModule",
{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(e){function q(h){let r=0;for(let w=0;w<h.length;w++)r+=h[w];return r/h.length}function b(h){const r=q(h),w=h.length;let D=0;for(const K of h)D+=(K-r)**2;return 1<w?D/(w-1):0}const E={min:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.min.apply(Math,h[0])},max:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.max.apply(Math,h[0])},avg:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:q(h[0])},
sum:{minParams:1,maxParams:1,evaluate:h=>{if(null==h[0])h=null;else{{h=h[0];let r=0;for(let w=0;w<h.length;w++)r+=h[w];h=r}}return h}},stddev:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.sqrt(b(h[0]))},count:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:h[0].length},var:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:b(h[0])}};e.aggregateFunction=function(h,r){const w=E[h.toLowerCase()];if(null==w)throw Error("Function Not Recognised");if(r.length<w.minParams||r.length>w.maxParams)throw Error(`Invalid Parameter count for call to ${h.toUpperCase()}`);
return w.evaluate(r)};e.isAggregate=function(h,r){h=E[h.toLowerCase()];return null!=h&&r>=h.minParams&&r<=h.maxParams};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(e,q){let b=function(){function h(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}h._fixDefaults=function(r){if(null!==r.precision||null!==r.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");
};h.createFromMilliseconds=function(r){const w=new h;w.second=r/1E3;return w};h.createFromValueAndQualifer=function(r,w,D){let K=null;const I=new h;I.op="-"===D?"-":"+";if("interval-period"===w.type){h._fixDefaults(w);if("year"===w.period||"month"===w.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(r))I[w.period]=parseFloat(r);else throw Error("Illegal Interval");}else{h._fixDefaults(w.start);h._fixDefaults(w.end);if("year"===w.start.period||"month"===w.start.period)throw Error("Year-Month Intervals not supported");
if("year"===w.end.period||"month"===w.end.period)throw Error("Year-Month Intervals not supported");switch(w.start.period){case "day":switch(w.end.period){case "hour":K=/^[0-9]{1,} [0-9]{1,}$/;if(K.test(r))I[w.start.period]=parseFloat(r.split(" ")[0]),I[w.end.period]=parseFloat(r.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":K=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(K.test(r))I[w.start.period]=parseFloat(r.split(" ")[0]),r=r.split(" ")[1].split(":"),I.hour=parseFloat(r[0]),
I.minute=parseFloat(r[1]);else throw Error("Illegal Interval");break;case "second":K=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(K.test(r))I[w.start.period]=parseFloat(r.split(" ")[0]),r=r.split(" ")[1].split(":"),I.hour=parseFloat(r[0]),I.minute=parseFloat(r[1]),I.second=parseFloat(r[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(w.end.period){case "minute":K=/^[0-9]{1,}:[0-9]{1,}$/;if(K.test(r))I.hour=parseFloat(r.split(":")[0]),
I.minute=parseFloat(r.split(":")[1]);else throw Error("Illegal Interval");break;case "second":K=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(K.test(r))r=r.split(":"),I.hour=parseFloat(r[0]),I.minute=parseFloat(r[1]),I.second=parseFloat(r[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(w.end.period){case "second":K=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(K.test(r))r=r.split(":"),I.minute=parseFloat(r[0]),I.second=parseFloat(r[1]);
else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return I};h.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return h}();const E={extract:{minParams:2,maxParams:2,evaluate:([h,r])=>{if(null==r)return null;if(r instanceof Date)switch(h.toUpperCase()){case "SECOND":return r.getSeconds();case "MINUTE":return r.getMinutes();
case "HOUR":return r.getHours();case "DAY":return r.getDate();case "MONTH":return r.getMonth()+1;case "YEAR":return r.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:h=>{if(2===h.length){const [r,w]=h;return null==r||null==w?null:r.toString().substring(w-1)}if(3===h.length){const [r,w,D]=h;return null==r||null==w||null==D?null:0>=D?"":r.toString().substring(w-1,w+D-1)}}},position:{minParams:2,maxParams:2,evaluate:([h,r])=>null==h||
null==r?null:r.indexOf(h)+1},trim:{minParams:2,maxParams:3,evaluate:h=>{var r=3===h.length,w=r?h[1]:" ";r=r?h[2]:h[1];if(null==w||null==r)return null;w=`(${q.escapeRegExpString(w)})`;switch(h[0]){case "BOTH":return r.replace(new RegExp(`^${w}*|${w}*$`,"g"),"");case "LEADING":return r.replace(new RegExp(`^${w}*`,"g"),"");case "TRAILING":return r.replace(new RegExp(`${w}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.abs(h[0])},
ceiling:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.ceil(h[0])},floor:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.floor(h[0])},log:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.log(h[0])},log10:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.log(h[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.sin(h[0])},cos:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.cos(h[0])},tan:{minParams:1,maxParams:1,evaluate:h=>
null==h[0]?null:Math.tan(h[0])},asin:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.asin(h[0])},acos:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.acos(h[0])},atan:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:Math.atan(h[0])},sign:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:0<h[0]?1:0>h[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:h=>null==h[0]||null==h[1]?null:h[0]**h[1]},mod:{minParams:2,maxParams:2,evaluate:h=>null==h[0]||null==h[1]?null:h[0]%h[1]},round:{minParams:1,
maxParams:2,evaluate:h=>{const r=h[0];h=2===h.length?10**h[1]:1;return null==r?null:Math.round(r*h)/h}},truncate:{minParams:1,maxParams:2,evaluate:h=>null==h[0]?null:1===h.length?parseInt(h[0].toFixed(0),10):parseFloat(h[0].toFixed(h[1]))},char_length:{minParams:1,maxParams:1,evaluate:h=>"string"===typeof h[0]||h[0]instanceof String?h[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:h=>{let r="";for(let w=0;w<h.length;w++){if(null==h[w])return null;r+=h[w].toString()}return r}},lower:{minParams:1,
maxParams:1,evaluate:h=>null==h[0]?null:h[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:h=>null==h[0]?null:h[0].toString().toUpperCase()}};e.SqlInterval=b;e.evaluateFunction=function(h,r){const w=E[h.toLowerCase()];if(null==w)throw Error("Function Not Recognised");if(r.length<w.minParams||r.length>w.maxParams)throw Error(`Invalid Parameter count for call to ${h.toUpperCase()}`);return w.evaluate(r)};e.isStandardized=function(h,r){h=E[h.toLowerCase()];return null!=h&&r>=h.minParams&&
r<=h.maxParams};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(e,q){var b={exports:{}};(function(h){(function(r,w){h.exports&&(h.exports=w())})(q.commonjsGlobal,function(){function r(D,K,I,x){D=Error.call(this,D);Object.setPrototypeOf&&Object.setPrototypeOf(D,r.prototype);D.expected=K;D.found=I;D.location=x;D.name="SyntaxError";return D}function w(D,K,I){I=I||" ";if(D.length>K)return D;K-=D.length;
I+=I.repeat(K);return D+I.slice(0,K)}(function(D,K){function I(){this.constructor=D}I.prototype=K.prototype;D.prototype=new I})(r,Error);r.prototype.format=function(D){var K="Error: "+this.message;if(this.location){var I=null,x;for(x=0;x<D.length;x++)if(D[x].source===this.location.source){I=D[x].text.split(/\r\n|\n|\r/g);break}D=this.location.start;x=this.location.source+":"+D.line+":"+D.column;if(I){var d=this.location.end,g=w("",D.line.toString().length);I=I[D.line-1];d=D.line===d.line?d.column:
I.length+1;K+="\n --\x3e "+x+"\n"+g+" |\n"+D.line+" | "+I+"\n"+g+" | "+w("",D.column-1)+w("",d-D.column,"^")}else K+="\n at "+x}return K};r.buildMessage=function(D,K){function I(B){return B.charCodeAt(0).toString(16).toUpperCase()}function x(B){return B.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+I(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(c){return"\\x"+I(c)})}function d(B){return B.replace(/\\/g,
"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+I(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(c){return"\\x"+I(c)})}function g(B){return k[B.type](B)}var k={literal:function(B){return'"'+x(B.text)+'"'},class:function(B){var c=B.parts.map(function(t){return Array.isArray(t)?d(t[0])+"-"+d(t[1]):d(t)});return"["+(B.inverted?"^":"")+c+"]"},any:function(){return"any character"},
end:function(){return"end of input"},other:function(B){return B.description}};return"Expected "+function(B){B=B.map(g);var c,t;B.sort();if(0<B.length){for(t=c=1;c<B.length;c++)B[c-1]!==B[c]&&(B[t]=B[c],t++);B.length=t}switch(B.length){case 1:return B[0];case 2:return B[0]+" or "+B[1];default:return B.slice(0,-1).join(", ")+", or "+B[B.length-1]}}(D)+" but "+(K?'"'+x(K)+'"':"end of input")+" found."};return{SyntaxError:r,parse:function(D,K){function I(R,T){return{type:"literal",text:R,ignoreCase:T}}
function x(R,T,a){return{type:"class",parts:R,inverted:T,ignoreCase:a}}function d(R){var T=Vb[R],a;if(!T){for(a=R-1;!Vb[a];)a--;T=Vb[a];for(T={line:T.line,column:T.column};a<R;)10===D.charCodeAt(a)?(T.line++,T.column=1):T.column++,a++;Vb[R]=T}return T}function g(R,T){var a=d(R),m=d(T);return{source:xb,start:{offset:R,line:a.line,column:a.column},end:{offset:T,line:m.line,column:m.column}}}function k(R){G<sb||(G>sb&&(sb=G,Ac=[]),Ac.push(R))}function B(){var R=G;ta();var T=t();T!==l?(ta(),R=T):(G=R,
R=l);return R}function c(){var R=G;var T=t();if(T!==l){R=[];var a=G;var m=ta();var U=Bb();if(U!==l){var Y=ta();var ca=t();ca!==l?a=m=[m,U,Y,ca]:(G=a,a=l)}else G=a,a=l;for(;a!==l;)R.push(a),a=G,m=ta(),U=Bb(),U!==l?(Y=ta(),ca=t(),ca!==l?a=m=[m,U,Y,ca]:(G=a,a=l)):(G=a,a=l);a={type:"expr_list"};T=[T];for(m=0;m<R.length;m++)T.push(R[m][3]);a.value=T;R=a}else G=R,R=l;return R}function t(){var R=G;var T=n();if(T!==l){R=[];var a=G;var m=ta();var U=fa();if(U!==l){var Y=ta();var ca=n();ca!==l?a=m=[m,U,Y,ca]:
(G=a,a=l)}else G=a,a=l;for(;a!==l;)R.push(a),a=G,m=ta(),U=fa(),U!==l?(Y=ta(),ca=n(),ca!==l?a=m=[m,U,Y,ca]:(G=a,a=l)):(G=a,a=l);R=pb(T,R)}else G=R,R=l;return R}function n(){var R=G;var T=u();if(T!==l){R=[];var a=G;var m=ta();var U=da();if(U!==l){var Y=ta();var ca=u();ca!==l?a=m=[m,U,Y,ca]:(G=a,a=l)}else G=a,a=l;for(;a!==l;)R.push(a),a=G,m=ta(),U=da(),U!==l?(Y=ta(),ca=u(),ca!==l?a=m=[m,U,Y,ca]:(G=a,a=l)):(G=a,a=l);R=pb(T,R)}else G=R,R=l;return R}function u(){var R=G;var T=aa();if(T===l){T=G;if(33===
D.charCodeAt(G)){var a=Sb;G++}else a=l,0===ra&&k(dc);if(a!==l){var m=G;ra++;if(61===D.charCodeAt(G)){var U=bb;G++}else U=l,0===ra&&k(kd);ra--;U===l?m=void 0:(G=m,m=l);m!==l?T=a=[a,m]:(G=T,T=l)}else G=T,T=l}T!==l?(a=ta(),m=u(),m!==l?R={type:"unary_expr",operator:"NOT",expr:m}:(G=R,R=l)):(G=R,R=l);if(R===l){T=G;R=z();if(R!==l){ta();T=[];a=G;m=ta();U=p();if(U!==l){var Y=ta();var ca=z();ca!==l?a=m=[m,U,Y,ca]:(G=a,a=l)}else G=a,a=l;if(a!==l)for(;a!==l;)T.push(a),a=G,m=ta(),U=p(),U!==l?(Y=ta(),ca=z(),ca!==
l?a=m=[m,U,Y,ca]:(G=a,a=l)):(G=a,a=l);else T=l;T!==l&&(T={type:"arithmetic",tail:T});T===l&&(T=G,a=O(),a!==l?(ta(),m=$a(),m!==l?(ta(),m=c(),m!==l?(ta(),U=ab(),U!==l?T={op:a,right:m}:(G=T,T=l)):(G=T,T=l)):(G=T,T=l)):(G=T,T=l),T===l&&(T=G,a=O(),a!==l?(ta(),m=$a(),m!==l?(ta(),m=ab(),m!==l?T={op:a,right:{type:"expr_list",value:[]}}:(G=T,T=l)):(G=T,T=l)):(G=T,T=l),T===l&&(T=G,a=O(),a!==l?(ta(),m=C(),m!==l?T={op:a,right:m}:(G=T,T=l)):(G=T,T=l))),T===l&&(T=G,U=aa(),U!==l?(ta(),a=ha(),a!==l?(ta(),m=z(),m!==
l?(ta(),Y=da(),Y!==l?(ta(),U=z(),U!==l?T={op:"NOT"+a,right:{type:"expr_list",value:[m,U]}}:(G=T,T=l)):(G=T,T=l)):(G=T,T=l)):(G=T,T=l)):(G=T,T=l),T===l&&(T=G,U=ha(),U!==l?(ta(),a=z(),a!==l?(ta(),m=da(),m!==l?(ta(),Y=z(),Y!==l?T={op:U,right:{type:"expr_list",value:[a,Y]}}:(G=T,T=l)):(G=T,T=l)):(G=T,T=l)):(G=T,T=l)),T===l&&(T=G,a=na(),a!==l?(ta(),m=aa(),m!==l?(ta(),m=z(),m!==l?T={op:a+"NOT",right:m}:(G=T,T=l)):(G=T,T=l)):(G=T,T=l),T===l&&(T=G,a=na(),a!==l?(ta(),m=z(),m!==l?T={op:a,right:m}:(G=T,T=l)):
(G=T,T=l)),T===l&&(T=G,a=y(),a!==l?(ta(),m=N(),m!==l?(ta(),U=G,D.substr(G,6).toLowerCase()===Ub?(Y=D.substr(G,6),G+=6):(Y=l,0===ra&&k(ce)),Y!==l?(Y=G,ra++,ca=L(),ra--,ca===l?Y=void 0:(G=Y,Y=l),Y!==l?U="ESCAPE":(G=U,U=l)):(G=U,U=l),U!==l?(ta(),U=Q(),U!==l?T={op:a,right:m,escape:U.value}:(G=T,T=l)):(G=T,T=l)):(G=T,T=l)):(G=T,T=l),T===l&&(T=G,a=y(),a!==l?(ta(),m=N(),m!==l?T={op:a,right:m,escape:""}:(G=T,T=l)):(G=T,T=l))))));T===l&&(T=null);""==T||void 0==T||null==T?T=R:(a=null,T=a="arithmetic"==T.type?
pb(R,T.tail):fb(T.op,R,T.right,T.escape))}else G=T,T=l;R=T}return R}function p(){if(D.substr(G,2)===Pb){var R=Pb;G+=2}else R=l,0===ra&&k(ec);R===l&&(62===D.charCodeAt(G)?(R=Ib,G++):(R=l,0===ra&&k(Db)),R===l&&(D.substr(G,2)===Ab?(R=Ab,G+=2):(R=l,0===ra&&k(xc)),R===l&&(D.substr(G,2)===Cb?(R=Cb,G+=2):(R=l,0===ra&&k(ib)),R===l&&(60===D.charCodeAt(G)?(R=V,G++):(R=l,0===ra&&k(Pd)),R===l&&(61===D.charCodeAt(G)?(R=bb,G++):(R=l,0===ra&&k(kd)),R===l&&(D.substr(G,2)===ea?(R=ea,G+=2):(R=l,0===ra&&k(ld))))))));
return R}function y(){var R=R=G;var T=aa();if(T!==l){var a=ta();var m=ma();m!==l?R=T=[T,a,m]:(G=R,R=l)}else G=R,R=l;R!==l&&(R=R[0]+" "+R[2]);R===l&&(R=ma());return R}function O(){var R=R=G;var T=aa();if(T!==l){var a=ta();var m=ka();m!==l?R=T=[T,a,m]:(G=R,R=l)}else G=R,R=l;R!==l&&(R=R[0]+" "+R[2]);R===l&&(R=ka());return R}function z(){var R=G;var T=F();if(T!==l){R=[];var a=G;var m=ta();var U=f();if(U!==l){var Y=ta();var ca=F();ca!==l?a=m=[m,U,Y,ca]:(G=a,a=l)}else G=a,a=l;for(;a!==l;)R.push(a),a=G,
m=ta(),U=f(),U!==l?(Y=ta(),ca=F(),ca!==l?a=m=[m,U,Y,ca]:(G=a,a=l)):(G=a,a=l);R=pb(T,R)}else G=R,R=l;return R}function f(){if(43===D.charCodeAt(G)){var R=oa;G++}else R=l,0===ra&&k(fc);R===l&&(45===D.charCodeAt(G)?(R=Ca,G++):(R=l,0===ra&&k(gc)));return R}function F(){var R=G;var T=M();if(T!==l){R=[];var a=G;var m=ta();var U=S();if(U!==l){var Y=ta();var ca=M();ca!==l?a=m=[m,U,Y,ca]:(G=a,a=l)}else G=a,a=l;for(;a!==l;)R.push(a),a=G,m=ta(),U=S(),U!==l?(Y=ta(),ca=M(),ca!==l?a=m=[m,U,Y,ca]:(G=a,a=l)):(G=
a,a=l);R=pb(T,R)}else G=R,R=l;return R}function S(){if(42===D.charCodeAt(G)){var R=Da;G++}else R=l,0===ra&&k(md);R===l&&(47===D.charCodeAt(G)?(R=Na,G++):(R=l,0===ra&&k(nd)));return R}function M(){var R=Q();if(R===l){var T=G;var a=G;var m=ua();if(m!==l){var U=Ba();if(U!==l){var Y=Ga();Y!==l?a=parseFloat(m+U+Y):(G=a,a=l)}else G=a,a=l}else G=a,a=l;a===l&&(a=G,m=ua(),m!==l?(U=Ba(),U!==l?a=parseFloat(m+U):(G=a,a=l)):(G=a,a=l),a===l&&(a=G,m=ua(),m!==l?(U=Ga(),U!==l?a=parseFloat(m+U):(G=a,a=l)):(G=a,a=l),
a===l&&(a=G,m=ua(),m!==l&&(m=parseFloat(m)),a=m)));var ca=a;if(ca!==l){var ia=G;ra++;var va=H();ra--;va===l?ia=void 0:(G=ia,ia=l);ia!==l?T={type:"number",value:ca}:(G=T,T=l)}else G=T,T=l;R=T;if(R===l){var ya=G;var Ea=G;if(D.substr(G,4).toLowerCase()===zb){var Oa=D.substr(G,4);G+=4}else Oa=l,0===ra&&k(rd);if(Oa!==l){var Ja=G;ra++;var Pa=L();ra--;Pa===l?Ja=void 0:(G=Ja,Ja=l);Ja!==l?Ea=Oa=[Oa,Ja]:(G=Ea,Ea=l)}else G=Ea,Ea=l;var La=Ea;La!==l&&(La={type:"bool",value:!0});ya=La;if(ya===l){ya=G;var gb=G;
if(D.substr(G,5).toLowerCase()===rb){var ub=D.substr(G,5);G+=5}else ub=l,0===ra&&k(zc);if(ub!==l){var tb=G;ra++;var Td=L();ra--;Td===l?tb=void 0:(G=tb,tb=l);tb!==l?gb=ub=[ub,tb]:(G=gb,gb=l)}else G=gb,gb=l;La=gb;La!==l&&(La={type:"bool",value:!1});ya=La}R=ya;if(R===l){var hc=G;if(D.substr(G,4).toLowerCase()===Rb){var ud=D.substr(G,4);G+=4}else ud=l,0===ra&&k(yc);if(ud!==l){var Cc=G;ra++;var bf=L();ra--;bf===l?Cc=void 0:(G=Cc,Cc=l);Cc!==l?hc=ud=[ud,Cc]:(G=hc,hc=l)}else G=hc,hc=l;var ye=hc;ye!==l&&(ye=
{type:"null",value:null});R=ye;if(R===l){var ic=G;var jc=G;if(D.substr(G,4).toLowerCase()===Xc){var Ke=D.substr(G,4);G+=4}else Ke=l,0===ra&&k(ne);if(Ke!==l){var vd=G;ra++;var cf=L();ra--;cf===l?vd=void 0:(G=vd,vd=l);vd!==l?jc="DATE":(G=jc,jc=l)}else G=jc,jc=l;if(jc!==l){ta();var Le=N();Le!==l?ic={type:"date",value:Le.value}:(G=ic,ic=l)}else G=ic,ic=l;R=ic;if(R===l){var kc=G;var lc=G;if(D.substr(G,9).toLowerCase()===Wc){var Me=D.substr(G,9);G+=9}else Me=l,0===ra&&k(me);if(Me!==l){var wd=G;ra++;var df=
L();ra--;df===l?wd=void 0:(G=wd,wd=l);wd!==l?lc="TIMESTAMP":(G=lc,lc=l)}else G=lc,lc=l;if(lc!==l){ta();var Ne=N();Ne!==l?kc={type:"timestamp",value:Ne.value}:(G=kc,kc=l)}else G=kc,kc=l;R=kc;if(R===l){var db=G;var ze=qa();if(ze!==l){ta();if(45===D.charCodeAt(G)){var Kb=Ca;G++}else Kb=l,0===ra&&k(gc);Kb===l&&(43===D.charCodeAt(G)?(Kb=oa,G++):(Kb=l,0===ra&&k(fc)));if(Kb!==l){ta();var Dc=N();if(Dc!==l){ta();var Oe=W();Oe!==l?db={type:"interval",value:Dc,qualifier:Oe,op:Kb}:(G=db,db=l)}else G=db,db=l}else G=
db,db=l}else G=db,db=l;db===l&&(db=G,ze=qa(),ze!==l?(ta(),Kb=N(),Kb!==l?(ta(),Dc=W(),Dc!==l?db={type:"interval",value:Kb,qualifier:Dc,op:""}:(G=db,db=l)):(G=db,db=l)):(G=db,db=l));R=db}}}}}}var Ua=R;if(Ua===l){var mb=G;var mc=G;if(D.substr(G,7).toLowerCase()===Tc){var Pe=D.substr(G,7);G+=7}else Pe=l,0===ra&&k(je);if(Pe!==l){var xd=G;ra++;var ef=L();ra--;ef===l?xd=void 0:(G=xd,xd=l);xd!==l?mc="EXTRACT":(G=mc,mc=l)}else G=mc,mc=l;if(mc!==l){ta();var ff=$a();if(ff!==l){ta();var vb=Aa();vb===l&&(vb=Ha(),
vb===l&&(vb=xa(),vb===l&&(vb=za(),vb===l&&(vb=wa(),vb===l&&(vb=Ia())))));var Qe=vb;if(Qe!==l){ta();var gf=sa();if(gf!==l){ta();var Re=t();if(Re!==l){ta();var hf=ab();hf!==l?mb={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:Qe},Re]}}:(G=mb,mb=l)}else G=mb,mb=l}else G=mb,mb=l}else G=mb,mb=l}else G=mb,mb=l}else G=mb,mb=l;Ua=mb;if(Ua===l){var nb=G;var nc=G;if(D.substr(G,9).toLowerCase()===Sc){var Se=D.substr(G,9);G+=9}else Se=l,0===ra&&k(ie);if(Se!==l){var yd=G;ra++;
var jf=L();ra--;jf===l?yd=void 0:(G=yd,yd=l);yd!==l?nc="SUBSTRING":(G=nc,nc=l)}else G=nc,nc=l;if(nc!==l){ta();var kf=$a();if(kf!==l){ta();var Ae=t();if(Ae!==l){ta();var lf=sa();if(lf!==l){ta();var Be=t();if(Be!==l){ta();var Lb=G;var oc=G;if(D.substr(G,3).toLowerCase()===Xd){var Te=D.substr(G,3);G+=3}else Te=l,0===ra&&k(he);if(Te!==l){var zd=G;ra++;var mf=L();ra--;mf===l?zd=void 0:(G=zd,zd=l);zd!==l?oc="FOR":(G=oc,oc=l)}else G=oc,oc=l;var Ec=oc;if(Ec!==l){var nf=ta();var Ue=t();if(Ue!==l){var of=ta();
Lb=Ec=[Ec,nf,Ue,of]}else G=Lb,Lb=l}else G=Lb,Lb=l;Lb===l&&(Lb=null);Ec=ab();Ec!==l?nb={type:"function",name:"substring",args:{type:"expr_list",value:Lb?[Ae,Be,Lb[2]]:[Ae,Be]}}:(G=nb,nb=l)}else G=nb,nb=l}else G=nb,nb=l}else G=nb,nb=l}else G=nb,nb=l}else G=nb,nb=l;Ua=nb;if(Ua===l){var Va=G;var Ce=pa();if(Ce!==l){ta();var De=$a();if(De!==l){ta();var Mb=J();Mb===l&&(Mb=null);ta();var Fc=t();if(Fc!==l){ta();var Ee=sa();if(Ee!==l){ta();var Ve=t();if(Ve!==l){ta();var pf=ab();pf!==l?Va={type:"function",name:"trim",
args:{type:"expr_list",value:[{type:"string",value:null==Mb?"BOTH":Mb},Fc,Ve]}}:(G=Va,Va=l)}else G=Va,Va=l}else G=Va,Va=l}else G=Va,Va=l}else G=Va,Va=l}else G=Va,Va=l;Va===l&&(Va=G,Ce=pa(),Ce!==l?(ta(),De=$a(),De!==l?(ta(),Mb=J(),Mb===l&&(Mb=null),ta(),Fc=t(),Fc!==l?(ta(),Ee=ab(),Ee!==l?Va={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==Mb?"BOTH":Mb},Fc]}}:(G=Va,Va=l)):(G=Va,Va=l)):(G=Va,Va=l)):(G=Va,Va=l));Ua=Va;if(Ua===l){var ob=G;var pc=G;if(D.substr(G,8).toLowerCase()===
Vc){var We=D.substr(G,8);G+=8}else We=l,0===ra&&k(le);if(We!==l){var Ad=G;ra++;var qf=L();ra--;qf===l?Ad=void 0:(G=Ad,Ad=l);Ad!==l?pc="POSITION":(G=pc,pc=l)}else G=pc,pc=l;if(pc!==l){ta();var rf=$a();if(rf!==l){ta();var Xe=t();if(Xe!==l){ta();var sf=ka();if(sf!==l){ta();var Ye=t();if(Ye!==l){ta();var tf=ab();tf!==l?ob={type:"function",name:"position",args:{type:"expr_list",value:[Xe,Ye]}}:(G=ob,ob=l)}else G=ob,ob=l}else G=ob,ob=l}else G=ob,ob=l}else G=ob,ob=l}else G=ob,ob=l;Ua=ob;if(Ua===l){var Qb=
G;var Bd;var wb=G;wb=Bd=P();if(wb===l)if(wb=G,96===D.charCodeAt(G)?(Bd=uc,G++):(Bd=l,0===ra&&k(ac)),Bd!==l){var Cd=[];if(wc.test(D.charAt(G))){var Nb=D.charAt(G);G++}else Nb=l,0===ra&&k(Pc);if(Nb!==l)for(;Nb!==l;)Cd.push(Nb),wc.test(D.charAt(G))?(Nb=D.charAt(G),G++):(Nb=l,0===ra&&k(Pc));else Cd=l;Cd!==l?(96===D.charCodeAt(G)?(Nb=uc,G++):(Nb=l,0===ra&&k(ac)),Nb!==l?wb=Cd.join(""):(G=wb,wb=l)):(G=wb,wb=l)}else G=wb,wb=l;var Ze=wb;if(Ze!==l){ta();var uf=$a();if(uf!==l){ta();var Dd=c();Dd===l&&(Dd=null);
ta();var vf=ab();vf!==l?Qb={type:"function",name:Ze,args:Dd?Dd:{type:"expr_list",value:[]}}:(G=Qb,Qb=l)}else G=Qb,Qb=l}else G=Qb,Qb=l;Ua=Qb;if(Ua===l){var Fb;var eb=G;var Fe=Ka();if(Fe!==l){ta();var Gc=t();if(Gc!==l){ta();var Hc=[];for(Fb=ja();Fb!==l;)Hc.push(Fb),Fb=ja();Fb=ta();var Ed=Ra();Ed!==l?eb={type:"case_expression",format:"simple",operand:Gc,clauses:Hc,else:null}:(G=eb,eb=l)}else G=eb,eb=l}else G=eb,eb=l;if(eb===l)if(eb=G,Fe=Ka(),Fe!==l)if(ta(),Gc=t(),Gc!==l){ta();Hc=[];for(Fb=ja();Fb!==
l;)Hc.push(Fb),Fb=ja();Fb=ta();Ed=la();if(Ed!==l){ta();var wf=Ra();wf!==l?eb={type:"case_expression",format:"simple",operand:Gc,clauses:Hc,else:Ed.value}:(G=eb,eb=l)}else G=eb,eb=l}else G=eb,eb=l;else G=eb,eb=l;var Ge=eb;if(Ge===l){var Gb;var kb=G;var He=Ka();if(He!==l){ta();var Ic=[];for(Gb=Z();Gb!==l;)Ic.push(Gb),Gb=Z();Gb=ta();var Fd=Ra();Fd!==l?kb={type:"case_expression",format:"searched",clauses:Ic,else:null}:(G=kb,kb=l)}else G=kb,kb=l;if(kb===l)if(kb=G,He=Ka(),He!==l){ta();Ic=[];for(Gb=Z();Gb!==
l;)Ic.push(Gb),Gb=Z();Gb=ta();Fd=la();if(Fd!==l){ta();var xf=Ra();xf!==l?kb={type:"case_expression",format:"searched",clauses:Ic,else:Fd.value}:(G=kb,kb=l)}else G=kb,kb=l}else G=kb,kb=l;Ge=kb}Ua=Ge;if(Ua===l){var Gd;var Hd=G;var $e=H();if($e!==l){var af=[];for(Gd=A();Gd!==l;)af.push(Gd),Gd=A();Hd=$e+af.join("")}else G=Hd,Hd=l;var Id=Hd;if(Id!==l){var Ie=Id;Id=/^CURRENT_DATE$/i.test(Ie)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Ie)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",
table:"",column:Ie}}Ua=Id;if(Ua===l&&(Ua=C(),Ua===l)){Ua=G;var yf=$a();if(yf!==l){ta();var Je=t();if(Je!==l){ta();var zf=ab();zf!==l?(Je.paren=!0,Ua=Je):(G=Ua,Ua=l)}else G=Ua,Ua=l}else G=Ua,Ua=l}}}}}}}}return Ua}function P(){var R;var T=G;var a=H();if(a!==l){T=[];for(R=L();R!==l;)T.push(R),R=L();T=a+T.join("")}else G=T,T=l;return T}function H(){if(Od.test(D.charAt(G))){var R=D.charAt(G);G++}else R=l,0===ra&&k(od);return R}function L(){if(Nd.test(D.charAt(G))){var R=D.charAt(G);G++}else R=l,0===ra&&
k(Za);return R}function A(){if(Md.test(D.charAt(G))){var R=D.charAt(G);G++}else R=l,0===ra&&k(Mc);return R}function C(){var R=G;if(64===D.charCodeAt(G)){var T=Sa;G++}else T=l,0===ra&&k(qc);if(T!==l){var a=P();a!==l?R=T=[T,a]:(G=R,R=l)}else G=R,R=l;R!==l&&(R={type:"param",value:R[1]});return R}function J(){var R=G;if(D.substr(G,7).toLowerCase()===Yc){var T=D.substr(G,7);G+=7}else T=l,0===ra&&k(oe);if(T!==l){T=G;ra++;var a=L();ra--;a===l?T=void 0:(G=T,T=l);T!==l?R="LEADING":(G=R,R=l)}else G=R,R=l;R===
l&&(R=G,D.substr(G,8).toLowerCase()===Zc?(T=D.substr(G,8),G+=8):(T=l,0===ra&&k(pe)),T!==l?(T=G,ra++,a=L(),ra--,a===l?T=void 0:(G=T,T=l),T!==l?R="TRAILING":(G=R,R=l)):(G=R,R=l),R===l&&(R=G,D.substr(G,4).toLowerCase()===$c?(T=D.substr(G,4),G+=4):(T=l,0===ra&&k(qe)),T!==l?(T=G,ra++,a=L(),ra--,a===l?T=void 0:(G=T,T=l),T!==l?R="BOTH":(G=R,R=l)):(G=R,R=l)));return R}function W(){var R=G;var T=G;var a=ba();if(a!==l){ta();var m=$a();if(m!==l)if(ta(),m=v(),m!==l){ta();var U=ab();U!==l?T={type:"interval-period",
period:a.value,precision:m,secondary:null}:(G=T,T=l)}else G=T,T=l;else G=T,T=l}else G=T,T=l;T===l&&(T=G,a=ba(),a!==l&&(a=bc(a)),T=a);if(T!==l)if(ta(),a=G,D.substr(G,2).toLowerCase()===ad?(m=D.substr(G,2),G+=2):(m=l,0===ra&&k(re)),m!==l?(m=G,ra++,U=L(),ra--,U===l?m=void 0:(G=m,m=l),m!==l?a="TO":(G=a,a=l)):(G=a,a=l),a!==l){ta();a=G;m=ba();m!==l&&(m={type:"interval-period",period:m.value,precision:null,secondary:null});a=m;if(a===l){a=G;m=Ia();if(m!==l)if(ta(),m=$a(),m!==l)if(ta(),m=v(),m!==l)if(ta(),
U=Bb(),U!==l)if(ta(),U=X(),U!==l){ta();var Y=ab();Y!==l?a=cc(m,U):(G=a,a=l)}else G=a,a=l;else G=a,a=l;else G=a,a=l;else G=a,a=l;else G=a,a=l;a===l&&(a=G,m=Ia(),m!==l?(ta(),m=$a(),m!==l?(ta(),m=v(),m!==l?(ta(),U=ab(),U!==l?a={type:"interval-period",period:"second",precision:m,secondary:null}:(G=a,a=l)):(G=a,a=l)):(G=a,a=l)):(G=a,a=l),a===l&&(a=G,m=Ia(),m!==l&&(m={type:"interval-period",period:"second",precision:null,secondary:null}),a=m))}a!==l?R={type:"interval-qualifier",start:T,end:a}:(G=R,R=l)}else G=
R,R=l;else G=R,R=l;R===l&&(R=G,a=ba(),a!==l?(ta(),T=$a(),T!==l?(ta(),T=X(),T!==l?(ta(),m=ab(),m!==l?R={type:"interval-period",period:a.value,precision:T,secondary:null}:(G=R,R=l)):(G=R,R=l)):(G=R,R=l)):(G=R,R=l),R===l&&(R=G,a=ba(),a!==l&&(a=bc(a)),R=a,R===l&&(R=G,a=Ia(),a!==l?(ta(),T=$a(),T!==l?(ta(),T=v(),T!==l?(ta(),m=Bb(),m!==l?(ta(),a=X(),a!==l?(ta(),m=ab(),m!==l?R=cc(T,a):(G=R,R=l)):(G=R,R=l)):(G=R,R=l)):(G=R,R=l)):(G=R,R=l)):(G=R,R=l),R===l&&(R=G,a=Ia(),a!==l?(ta(),T=$a(),T!==l?(ta(),T=X(),
T!==l?(ta(),m=ab(),m!==l?R={type:"interval-period",period:"second",precision:T,secondary:null}:(G=R,R=l)):(G=R,R=l)):(G=R,R=l)):(G=R,R=l),R===l&&(R=G,a=Ia(),a!==l&&(a={type:"interval-period",period:"second",precision:null,secondary:null}),R=a)))));return R}function ba(){var R=G;R=xa();R!==l&&(R={type:"string",value:"day"});R===l&&(R=G,R=za(),R!==l&&(R={type:"string",value:"hour"}),R===l&&(R=G,R=wa(),R!==l&&(R={type:"string",value:"minute"}),R===l&&(R=G,R=Ha(),R!==l&&(R={type:"string",value:"month"}),
R===l&&(R=G,R=Aa(),R!==l&&(R={type:"string",value:"year"})))));return R}function X(){var R=Fa();R!==l&&(R=parseFloat(R));return R}function v(){var R=Fa();R!==l&&(R=parseFloat(R));return R}function N(){var R=Q();R===l&&(R=C());return R}function Q(){var R=G;if(39===D.charCodeAt(G)){var T=cb;G++}else T=l,0===ra&&k($b);T===l&&(D.substr(G,2)===Ya?(T=Ya,G+=2):(T=l,0===ra&&k(rc)));if(T!==l){T=[];var a=G;D.substr(G,2)===hb?(a=hb,G+=2):(a=l,0===ra&&k(Wb));a!==l&&(a="'");a===l&&(jd.test(D.charAt(G))?(a=D.charAt(G),
G++):(a=l,0===ra&&k(pd)));for(;a!==l;)T.push(a),a=G,D.substr(G,2)===hb?(a=hb,G+=2):(a=l,0===ra&&k(Wb)),a!==l&&(a="'"),a===l&&(jd.test(D.charAt(G))?(a=D.charAt(G),G++):(a=l,0===ra&&k(pd)));39===D.charCodeAt(G)?(a=cb,G++):(a=l,0===ra&&k($b));a!==l?R={type:"string",value:T.join("")}:(G=R,R=l)}else G=R,R=l;return R}function Z(){var R=G;if(Ta()!==l){ta();var T=t();if(T!==l){ta();var a=Zb();a!==l?(ta(),a=t(),a!==l?R={type:"when_clause",operand:T,value:a}:(G=R,R=l)):(G=R,R=l)}else G=R,R=l}else G=R,R=l;return R}
function ja(){var R=G;if(Ta()!==l){ta();var T=t();if(T!==l){ta();var a=Zb();a!==l?(ta(),a=t(),a!==l?R={type:"when_clause",operand:T,value:a}:(G=R,R=l)):(G=R,R=l)}else G=R,R=l}else G=R,R=l;return R}function la(){var R=G;var T=G;if(D.substr(G,4).toLowerCase()===Jd){var a=D.substr(G,4);G+=4}else a=l,0===ra&&k(Xb);if(a!==l){a=G;ra++;var m=L();ra--;m===l?a=void 0:(G=a,a=l);a!==l?T="ELSE":(G=T,T=l)}else G=T,T=l;T!==l?(ta(),T=t(),T!==l?R={type:"else_clause",value:T}:(G=R,R=l)):(G=R,R=l);return R}function ua(){var R=
Fa();if(R===l){R=G;if(45===D.charCodeAt(G)){var T=Ca;G++}else T=l,0===ra&&k(gc);T===l&&(43===D.charCodeAt(G)?(T=oa,G++):(T=l,0===ra&&k(fc)));if(T!==l){var a=Fa();a!==l?R=T[0]+a:(G=R,R=l)}else G=R,R=l}return R}function Ba(){var R=G;if(46===D.charCodeAt(G)){var T=Yb;G++}else T=l,0===ra&&k(Zd);T!==l?(R=Fa(),R===l&&(R=null),R="."+(null!=R?R:"")):(G=R,R=l);return R}function Ga(){var R;var T=R=G;if(qb.test(D.charAt(G))){var a=D.charAt(G);G++}else a=l,0===ra&&k(Wa);a!==l?(Tb.test(D.charAt(G))?(T=D.charAt(G),
G++):(T=l,0===ra&&k(qd)),T===l&&(T=null),T="e"+(null===T?"":T)):(G=T,T=l);T!==l?(a=Fa(),a!==l?R=T+a:(G=R,R=l)):(G=R,R=l);return R}function Fa(){var R=[];var T=Ma();if(T!==l)for(;T!==l;)R.push(T),T=Ma();else R=l;R!==l&&(R=R.join(""));return R}function Ma(){if(jb.test(D.charAt(G))){var R=D.charAt(G);G++}else R=l,0===ra&&k($d);return R}function ka(){var R=G;if(D.substr(G,2).toLowerCase()===Ud){var T=D.substr(G,2);G+=2}else T=l,0===ra&&k(ae);if(T!==l){T=G;ra++;var a=L();ra--;a===l?T=void 0:(G=T,T=l);
T!==l?R="IN":(G=R,R=l)}else G=R,R=l;return R}function na(){var R=G;if(D.substr(G,2).toLowerCase()===Vd){var T=D.substr(G,2);G+=2}else T=l,0===ra&&k(be);if(T!==l){T=G;ra++;var a=L();ra--;a===l?T=void 0:(G=T,T=l);T!==l?R="IS":(G=R,R=l)}else G=R,R=l;return R}function ma(){var R=G;if(D.substr(G,4).toLowerCase()===Wd){var T=D.substr(G,4);G+=4}else T=l,0===ra&&k(sd);if(T!==l){T=G;ra++;var a=L();ra--;a===l?T=void 0:(G=T,T=l);T!==l?R="LIKE":(G=R,R=l)}else G=R,R=l;return R}function aa(){var R=G;if(D.substr(G,
3).toLowerCase()===Qc){var T=D.substr(G,3);G+=3}else T=l,0===ra&&k(de);if(T!==l){T=G;ra++;var a=L();ra--;a===l?T=void 0:(G=T,T=l);T!==l?R="NOT":(G=R,R=l)}else G=R,R=l;return R}function da(){var R=G;if(D.substr(G,3).toLowerCase()===lb){var T=D.substr(G,3);G+=3}else T=l,0===ra&&k(ee);if(T!==l){T=G;ra++;var a=L();ra--;a===l?T=void 0:(G=T,T=l);T!==l?R="AND":(G=R,R=l)}else G=R,R=l;return R}function fa(){var R=G;if(D.substr(G,2).toLowerCase()===Eb){var T=D.substr(G,2);G+=2}else T=l,0===ra&&k(Qd);if(T!==
l){T=G;ra++;var a=L();ra--;a===l?T=void 0:(G=T,T=l);T!==l?R="OR":(G=R,R=l)}else G=R,R=l;return R}function ha(){var R=G;if(D.substr(G,7).toLowerCase()===tc){var T=D.substr(G,7);G+=7}else T=l,0===ra&&k(fe);if(T!==l){T=G;ra++;var a=L();ra--;a===l?T=void 0:(G=T,T=l);T!==l?R="BETWEEN":(G=R,R=l)}else G=R,R=l;return R}function sa(){var R=G;if(D.substr(G,4).toLowerCase()===Rc){var T=D.substr(G,4);G+=4}else T=l,0===ra&&k(ge);if(T!==l){T=G;ra++;var a=L();ra--;a===l?T=void 0:(G=T,T=l);T!==l?R="FROM":(G=R,R=
l)}else G=R,R=l;return R}function pa(){var R=G;if(D.substr(G,4).toLowerCase()===Uc){var T=D.substr(G,4);G+=4}else T=l,0===ra&&k(ke);if(T!==l){T=G;ra++;var a=L();ra--;a===l?T=void 0:(G=T,T=l);T!==l?R="TRIM":(G=R,R=l)}else G=R,R=l;return R}function qa(){var R=G;if(D.substr(G,8).toLowerCase()===bd){var T=D.substr(G,8);G+=8}else T=l,0===ra&&k(se);if(T!==l){T=G;ra++;var a=L();ra--;a===l?T=void 0:(G=T,T=l);T!==l?R="INTERVAL":(G=R,R=l)}else G=R,R=l;return R}function Aa(){var R=G;if(D.substr(G,4).toLowerCase()===
cd){var T=D.substr(G,4);G+=4}else T=l,0===ra&&k(te);if(T!==l){T=G;ra++;var a=L();ra--;a===l?T=void 0:(G=T,T=l);T!==l?R="YEAR":(G=R,R=l)}else G=R,R=l;return R}function Ha(){var R=G;if(D.substr(G,5).toLowerCase()===dd){var T=D.substr(G,5);G+=5}else T=l,0===ra&&k(ue);if(T!==l){T=G;ra++;var a=L();ra--;a===l?T=void 0:(G=T,T=l);T!==l?R="MONTH":(G=R,R=l)}else G=R,R=l;return R}function xa(){var R=G;if(D.substr(G,3).toLowerCase()===ed){var T=D.substr(G,3);G+=3}else T=l,0===ra&&k(ve);if(T!==l){T=G;ra++;var a=
L();ra--;a===l?T=void 0:(G=T,T=l);T!==l?R="DAY":(G=R,R=l)}else G=R,R=l;return R}function za(){var R=G;if(D.substr(G,4).toLowerCase()===Yd){var T=D.substr(G,4);G+=4}else T=l,0===ra&&k(td);if(T!==l){T=G;ra++;var a=L();ra--;a===l?T=void 0:(G=T,T=l);T!==l?R="HOUR":(G=R,R=l)}else G=R,R=l;return R}function wa(){var R=G;if(D.substr(G,6).toLowerCase()===fd){var T=D.substr(G,6);G+=6}else T=l,0===ra&&k(we);if(T!==l){T=G;ra++;var a=L();ra--;a===l?T=void 0:(G=T,T=l);T!==l?R="MINUTE":(G=R,R=l)}else G=R,R=l;return R}
function Ia(){var R=G;if(D.substr(G,6).toLowerCase()===gd){var T=D.substr(G,6);G+=6}else T=l,0===ra&&k(xe);if(T!==l){T=G;ra++;var a=L();ra--;a===l?T=void 0:(G=T,T=l);T!==l?R="SECOND":(G=R,R=l)}else G=R,R=l;return R}function Ka(){var R=G;if(D.substr(G,4).toLowerCase()===hd){var T=D.substr(G,4);G+=4}else T=l,0===ra&&k(Jb);if(T!==l){T=G;ra++;var a=L();ra--;a===l?T=void 0:(G=T,T=l);T!==l?R="CASE":(G=R,R=l)}else G=R,R=l;return R}function Ra(){var R=G;if(D.substr(G,3).toLowerCase()===id){var T=D.substr(G,
3);G+=3}else T=l,0===ra&&k(Rd);if(T!==l){T=G;ra++;var a=L();ra--;a===l?T=void 0:(G=T,T=l);T!==l?R="END":(G=R,R=l)}else G=R,R=l;return R}function Ta(){var R=G;if(D.substr(G,4).toLowerCase()===Kd){var T=D.substr(G,4);G+=4}else T=l,0===ra&&k(Qa);if(T!==l){T=G;ra++;var a=L();ra--;a===l?T=void 0:(G=T,T=l);T!==l?R="WHEN":(G=R,R=l)}else G=R,R=l;return R}function Zb(){var R=G;if(D.substr(G,4).toLowerCase()===Jc){var T=D.substr(G,4);G+=4}else T=l,0===ra&&k(Xa);if(T!==l){T=G;ra++;var a=L();ra--;a===l?T=void 0:
(G=T,T=l);T!==l?R="THEN":(G=R,R=l)}else G=R,R=l;return R}function Bb(){if(44===D.charCodeAt(G)){var R=Lc;G++}else R=l,0===ra&&k(sc);return R}function $a(){if(40===D.charCodeAt(G)){var R=Kc;G++}else R=l,0===ra&&k(Nc);return R}function ab(){if(41===D.charCodeAt(G)){var R=Ld;G++}else R=l,0===ra&&k(Sd);return R}function ta(){var R;var T=[];for(R=Ob();R!==l;)T.push(R),R=Ob();return T}function Ob(){if(vc.test(D.charAt(G))){var R=D.charAt(G);G++}else R=l,0===ra&&k(Oc);return R}function fb(R,T,a,m){R={type:"binary_expr",
operator:R,left:T,right:a};void 0!==m&&(R.escape=m);return R}function pb(R,T){for(var a=0;a<T.length;a++)R=fb(T[a][1],R,T[a][3]);return R}K=void 0!==K?K:{};var l={},xb=K.grammarSource,yb={start:B},Hb=B,Sb="!",bb="\x3d",Pb="\x3e\x3d",Ib="\x3e",Ab="\x3c\x3d",Cb="\x3c\x3e",V="\x3c",ea="!\x3d",oa="+",Ca="-",Da="*",Na="/",Sa="@",cb="'",Ya="N'",hb="''",Yb=".",Rb="null",zb="true",rb="false",Ud="in",Vd="is",Wd="like",Ub="escape",Qc="not",lb="and",Eb="or",tc="between",Rc="from",Xd="for",Sc="substring",Tc=
"extract",Uc="trim",Vc="position",Wc="timestamp",Xc="date",Yc="leading",Zc="trailing",$c="both",ad="to",bd="interval",cd="year",dd="month",ed="day",Yd="hour",fd="minute",gd="second",hd="case",id="end",Kd="when",Jc="then",Jd="else",Lc=",",Kc="(",Ld=")",uc="`",Od=/^[A-Za-z_\x80-\uFFFF]/,Nd=/^[A-Za-z0-9_]/,Md=/^[A-Za-z0-9_.\x80-\uFFFF]/,jd=/^[^']/,jb=/^[0-9]/,qb=/^[eE]/,Tb=/^[+\-]/,vc=/^[ \t\n\r]/,wc=/^[^`]/,dc=I("!",!1),kd=I("\x3d",!1),ec=I("\x3e\x3d",!1),Db=I("\x3e",!1),xc=I("\x3c\x3d",!1),ib=I("\x3c\x3e",
!1),Pd=I("\x3c",!1),ld=I("!\x3d",!1),fc=I("+",!1),gc=I("-",!1),md=I("*",!1),nd=I("/",!1),od=x([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Za=x([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Mc=x([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),qc=I("@",!1),$b=I("'",!1),rc=I("N'",!1),Wb=I("''",!1),pd=x(["'"],!0,!1),Zd=I(".",!1),$d=x([["0","9"]],!1,!1),Wa=x(["e","E"],!1,!1),qd=x(["+","-"],!1,!1),yc=I("NULL",!0),rd=I("TRUE",!0),zc=I("FALSE",!0),ae=I("IN",!0),be=I("IS",!0),sd=I("LIKE",
!0),ce=I("ESCAPE",!0),de=I("NOT",!0),ee=I("AND",!0),Qd=I("OR",!0),fe=I("BETWEEN",!0),ge=I("FROM",!0),he=I("FOR",!0),ie=I("SUBSTRING",!0),je=I("EXTRACT",!0),ke=I("TRIM",!0),le=I("POSITION",!0),me=I("TIMESTAMP",!0),ne=I("DATE",!0),oe=I("LEADING",!0),pe=I("TRAILING",!0),qe=I("BOTH",!0),re=I("TO",!0),se=I("INTERVAL",!0),te=I("YEAR",!0),ue=I("MONTH",!0),ve=I("DAY",!0),td=I("HOUR",!0),we=I("MINUTE",!0),xe=I("SECOND",!0),Jb=I("CASE",!0),Rd=I("END",!0),Qa=I("WHEN",!0),Xa=I("THEN",!0),Xb=I("ELSE",!0),sc=I(",",
!1),Nc=I("(",!1),Sd=I(")",!1),Oc=x([" ","\t","\n","\r"],!1,!1),ac=I("`",!1),Pc=x(["`"],!0,!1),bc=function(R){return{type:"interval-period",period:R.value,precision:null,secondary:null}},cc=function(R,T){return{type:"interval-period",period:"second",precision:R,secondary:T}},G=0,Vb=[{line:1,column:1}],sb=0,Ac=[],ra=0;if("startRule"in K){if(!(K.startRule in yb))throw Error("Can't start parsing from rule \""+K.startRule+'".');Hb=yb[K.startRule]}var Bc=Hb();if(Bc!==l&&G===D.length)return Bc;Bc!==l&&G<
D.length&&k({type:"end"});throw function(R,T,a){return new r(r.buildMessage(R,T),R,T,a)}(Ac,sb<D.length?D.charAt(sb):null,sb<D.length?g(sb,sb+1):g(sb,sb));}}})})(b);let E=function(){function h(){}h.parse=function(r){return b.exports.parse(r)};return h}();e.WhereGrammar=E;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(e,q,b){function E(p){const y=null!=
p.minValue||null!=p.maxValue,O=!!p.sqlExpression&&p.supportsSQLExpression;return!(null!=p.normalizationField||null!=p.normalizationType)&&!y&&!O}function h(p){const {values:y,useSampleStdDev:O,supportsNullCount:z}=p;var f=Number.POSITIVE_INFINITY;let F=Number.NEGATIVE_INFINITY,S=null,M=null;var P=null;let H=null,L=0;const A=null==p.minValue?-Infinity:p.minValue,C=null==p.maxValue?Infinity:p.maxValue;for(const J of y)Number.isFinite(J)?J>=A&&J<=C&&(S+=J,f=Math.min(f,J),F=Math.max(F,J),L++):"string"===
typeof J&&L++;if(L&&null!=S){M=S/L;P=0;for(const J of y)Number.isFinite(J)&&J>=A&&J<=C&&(P+=(J-M)**2);H=O?1<L?P/(L-1):0:0<L?P/L:0;P=Math.sqrt(H)}else F=f=null;f={avg:M,count:L,max:F,min:f,stddev:P,sum:S,variance:H};z&&(f.nullcount=y.length-L);p.percentileParams&&(f.median=r(y,p.percentileParams));return f}function r(p,y){const {fieldType:O,value:z,orderBy:f,isDiscrete:F}=y,S=w(O,"desc"===f);p=[...p].filter(L=>null!=L).sort((L,A)=>S(L,A));if(0===p.length)return null;if(0>=z)return p[0];if(1<=z)return p[p.length-
1];var M=(p.length-1)*z,P=Math.floor(M);y=P+1;M%=1;P=p[P];const H=p[y];return y>=p.length||F||"string"===typeof P||"string"===typeof H?P:P*(1-M)+H*M}function w(p,y){const O=y?1:-1,z=K(y),f=D(y);if(!p||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...n].includes(p))return(F,S)=>"number"===typeof F&&"number"===typeof S?z(F,S):"string"===typeof F&&"string"===typeof S?f(F,S):O;if("esriFieldTypeDate"===p)return(F,S)=>{F=(new Date(F)).getTime();S=(new Date(S)).getTime();
return isNaN(F)||isNaN(S)?O:z(F,S)};if(n.has(p))return(F,S)=>z(F,S);if("esriFieldTypeString"===p)return(F,S)=>f(F,S);if("esriFieldTypeGUID"===p||"esriFieldTypeGlobalID"===p){const F=D(y);return(S,M)=>F(I(S),I(M))}return y?(F,S)=>1:(F,S)=>-1}function D(p){return p?(y,O)=>{var z,f;y=null==(z=y)?void 0:z.toUpperCase();O=null==(f=O)?void 0:f.toUpperCase();return y>O?-1:y<O?1:0}:(y,O)=>{var z,f;y=null==(z=y)?void 0:z.toUpperCase();O=null==(f=O)?void 0:f.toUpperCase();return y<O?-1:y>O?1:0}}function K(p){return p?
(y,O)=>O-y:(y,O)=>y-O}function I(p){return p.substr(24,12)+p.substr(19,4)+p.substr(16,2)+p.substr(14,2)+p.substr(11,2)+p.substr(9,2)+p.substr(6,2)+p.substr(4,2)+p.substr(2,2)+p.substr(0,2)}function x(p,y){const O=g({field:y.field,normalizationType:y.normalizationType,normalizationField:y.normalizationField,classificationMethod:y.classificationMethod,standardDeviationInterval:y.standardDeviationInterval,breakCount:y.numClasses||5});p=d(p,y.minValue,y.maxValue);return b.createGenerateRendererClassBreaks({definition:O,
values:p,normalizationTotal:y.normalizationTotal})}function d(p,y,O){y=null==y?-Infinity:y;O=null==O?Infinity:O;return p.filter(z=>Number.isFinite(z)&&z>=y&&z<=O)}function g(p){const y=p.field,O=p.classificationMethod||"equal-interval",z=p.normalizationType,f=p.normalizationField,F=new q;F.classificationField=y;F.breakCount=p.breakCount;F.classificationMethod=O;F.standardDeviationInterval="standard-deviation"===O?p.standardDeviationInterval||1:void 0;F.normalizationType=z;F.normalizationField="field"===
z?f:void 0;return F}function k(p,y){const {field:O,classificationMethod:z,standardDeviationInterval:f,normalizationType:F,normalizationField:S,normalizationTotal:M,minValue:P,maxValue:H}=y,L=y.numBins||10;let A=y=null,C=null;z&&"equal-interval"!==z||F?({classBreaks:p}=x(p,{field:O,normalizationType:F,normalizationField:S,normalizationTotal:M,classificationMethod:z,standardDeviationInterval:f,minValue:P,maxValue:H,numClasses:L}),y=p[0].minValue,A=p[p.length-1].maxValue,C=p.map(J=>[J.minValue,J.maxValue])):
(null!=P&&null!=H?(y=P,A=H):(p=h({values:p,minValue:P,maxValue:H,useSampleStdDev:!F,supportsNullCount:E({normalizationType:F,normalizationField:S,minValue:P,maxValue:H})}),y=p.min,A=p.max),C=c(y,A,L));return{min:y,max:A,intervals:C}}function B(p,y){let O=-1;for(let z=p.length-1;0<=z;z--)if(y>=p[z][0]){O=z;break}return O}function c(p,y,O){const z=(y-p)/O,f=[];let F;for(let S=1;S<=O;S++)F=p+z,F=Number(F.toFixed(16)),f.push([p,S===O?y:F]),p=F;return f}const t=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,
n=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),u="min max avg stddev count sum variance nullcount median".split(" ");e.calculateClassBreaks=x;e.calculateHistogram=function(p,y){const {min:O,max:z,intervals:f}=k(p,y),F=f.map((S,M)=>({minValue:f[M][0],maxValue:f[M][1],count:0}));for(const S of p)null!=S&&S>=O&&S<=z&&(p=B(f,S),-1<p&&F[p].count++);return{bins:F,minValue:O,maxValue:z,normalizationTotal:y.normalizationTotal}};e.calculatePercentile=
r;e.calculateStatistics=h;e.calculateStringStatistics=function(p){const y=p.returnDistinct?[...new Set(p.values)]:p.values,O=y.filter(f=>null!=f).length,z={count:O};p.supportsNullCount&&(z.nullcount=y.length-O);p.percentileParams&&(z.median=r(y,p.percentileParams));return z};e.calculateUniqueValuesCount=function(p){const y={};for(let O of p){if(null==O||"string"===typeof O&&""===O.trim())O=null;null==y[O]?y[O]={count:1,data:O}:y[O].count++}return{count:y}};e.createClassBreaksDefinition=g;e.createUVResult=
function(p,y,O){const z=p.count;p=[];O&&y&&"coded-value"===y.type&&y.codedValues.forEach(f=>{f=f.code;z.hasOwnProperty(f)||(z[f]={data:f,count:0})});for(const f in z)y=z[f],p.push({value:y.data,count:y.count,label:y.label});return{uniqueValueInfos:p}};e.getAttributeComparator=w;e.getEqualIntervalBins=c;e.getNormalizedValue=function(p,y,O,z){let f=null;switch(y){case "log":0!==p&&(f=Math.log(p)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(z)&&0!==z&&(f=p/z*100);break;case "field":Number.isFinite(O)&&
0!==O&&(f=p/O);break;case "natural-log":0<p&&(f=Math.log(p));break;case "square-root":0<p&&(f=p**.5)}return f};e.isNullCountSupported=E;e.processSummaryStatisticsResult=function(p,y){let O;for(O in p)-1<u.indexOf(O)&&(Number.isFinite(p[O])||(p[O]=null));if(!y)return p;["avg","stddev","variance"].forEach(z=>{null!=p[z]&&(p[z]=Math.ceil(p[z]))});return p};e.resolveCBResult=function(p,y){let O=p.classBreaks;const z=O[0].minValue,f=O[O.length-1].maxValue,F="standard-deviation"===y;O=O.map(S=>{const M=
S.label;S={minValue:S.minValue,maxValue:S.maxValue,label:M};if(F&&M){const P=M.match(t).map(H=>+H.trim());2===P.length?(S.minStdDev=P[0],S.maxStdDev=P[1],0>P[0]&&0<P[1]&&(S.hasAvg=!0)):1===P.length&&(M.includes("\x3c")?(S.minStdDev=null,S.maxStdDev=P[0]):M.includes("\x3e")&&(S.minStdDev=P[0],S.maxStdDev=null))}return S});return{minValue:z,maxValue:f,classBreakInfos:O,normalizationTotal:p.normalizationTotal}};e.statisticTypes=u;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(e,q,b,E,h,r,w,D,K){h=new b.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});b=new b.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});K=function(I){function x(){var d=I.apply(this,arguments)||this;d.breakCount=null;d.classificationField=
null;d.classificationMethod=null;d.normalizationField=null;d.normalizationType=null;d.type="class-breaks-definition";return d}e._inheritsLoose(x,I);e._createClass(x,[{key:"standardDeviationInterval",set:function(d){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",d)}},{key:"definedInterval",set:function(d){"defined-interval"===this.classificationMethod&&this._set("definedInterval",d)}}]);return x}(K);q.__decorate([E.property({json:{write:!0}})],K.prototype,"breakCount",
void 0);q.__decorate([E.property({json:{write:!0}})],K.prototype,"classificationField",void 0);q.__decorate([E.property({type:String,json:{read:h.read,write:h.write}})],K.prototype,"classificationMethod",void 0);q.__decorate([E.property({json:{write:!0}})],K.prototype,"normalizationField",void 0);q.__decorate([E.property({json:{read:b.read,write:b.write}})],K.prototype,"normalizationType",void 0);q.__decorate([E.property({value:null,json:{write:!0}})],K.prototype,"standardDeviationInterval",null);
q.__decorate([E.property({value:null,json:{write:!0}})],K.prototype,"definedInterval",null);q.__decorate([E.property()],K.prototype,"type",void 0);return K=q.__decorate([D.subclass("esri.rest.support.ClassBreaksDefinition")],K)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x){b=new b.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});E=function(d){function g(){var k=d.apply(this,arguments)||this;k.baseSymbol=null;k.colorRamp=null;k.type=null;return k}e._inheritsLoose(g,d);return g}(E.JSONSupport);q.__decorate([h.property({type:x,json:{write:!0}})],E.prototype,"baseSymbol",void 0);q.__decorate([h.property({types:I.types,json:{read:{reader:I.fromJSON},write:!0}})],E.prototype,"colorRamp",void 0);q.__decorate([h.property({json:{read:b.read,
write:b.write}})],E.prototype,"type",void 0);return E=q.__decorate([K.subclass("esri.rest.support.ClassificationDefinition")],E)})},"esri/rest/support/generateRendererUtils":function(){define(["exports"],function(e){function q(x){const {classificationMethod:d,breakCount:g,normalizationType:k,definedInterval:B}=x.definition,c=[];var t=x.values;if(0===t.length)return[];t=t.sort((z,f)=>z-f);var n=t[0],u=t[t.length-1];if("equal-interval"===d)if(t.length>=g){t=(u-n)/g;x=n;for(var p=1;p<g;p++){var y=Number((n+
p*t).toFixed(6));c.push({minValue:x,maxValue:y,label:b(x,y,k)});x=y}c.push({minValue:x,maxValue:u,label:b(x,u,k)})}else t.forEach(z=>{c.push({minValue:z,maxValue:z,label:b(z,z,k)})});else if("natural-breaks"===d){t=E(t);x=h(t.uniqueValues,x.valueFrequency||t.valueFrequency,g);for(p=1;p<g;p++)t.uniqueValues.length>p&&(y=Number(t.uniqueValues[x[p]].toFixed(6)),c.push({minValue:n,maxValue:y,label:b(n,y,k)}),n=y);c.push({minValue:n,maxValue:u,label:b(n,u,k)})}else if("quantile"===d)if(t.length>=g&&n!==
u){x=Math.ceil(t.length/g);p=0;for(y=1;y<g;y++){var O=x+p-1;O>t.length&&(O=t.length-1);0>O&&(O=0);c.push({minValue:n,maxValue:t[O],label:b(n,t[O],k)});n=t[O];p+=x;x=Math.ceil((t.length-p)/(g-y))}c.push({minValue:n,maxValue:u,label:b(n,u,k)})}else for(u=-1,n=0;n<t.length;n++)x=t[n],x!==u&&(u=x,c.push({minValue:u,maxValue:x,label:b(u,x,k)}),u=x);else if("standard-deviation"===d)if(x=D(t),p=K(t,x),0===p)c.push({minValue:t[0],maxValue:t[0],label:b(t[0],t[0],k)});else{t=w(n,u,g,x,p)*p;p=0;for(y=g;1<=y;y--)O=
Number((x-(y-.5)*t).toFixed(6)),c.push({minValue:n,maxValue:O,label:b(n,O,k)}),n=O,p++;y=Number((x+.5*t).toFixed(6));c.push({minValue:n,maxValue:y,label:b(n,y,k)});n=y;p++;for(O=1;O<=g;O++)y=p===2*g?u:Number((x+(O+.5)*t).toFixed(6)),c.push({minValue:n,maxValue:y,label:b(n,y,k)}),n=y,p++}else if("defined-interval"===d){if(!B)return c;u=t[0];t=t[t.length-1];n=Math.ceil((t-u)/B);x=u;for(p=1;p<n;p++)y=Number((u+p*B).toFixed(6)),c.push({minValue:x,maxValue:y,label:b(x,y,k)}),x=y;c.push({minValue:x,maxValue:t,
label:b(x,t,k)})}return c}function b(x,d,g){let k=null;return k=x===d?g&&"percent-of-total"===g?x+"%":x.toString():g&&"percent-of-total"===g?x+"% - "+d+"%":x+" - "+d}function E(x){const d=[],g=[];let k=Number.MIN_VALUE,B=1,c=-1;for(let t=0;t<x.length;t++){const n=x[t];n===k?(B++,g[c]=B):null!==n&&(d.push(n),k=n,B=1,g.push(B),c++)}return{uniqueValues:d,valueFrequency:g}}function h(x,d,g){var k=x.length;const B=[];g>k&&(g=k);for(var c=0;c<g;c++)B.push(Math.round(c*k/g-1));B.push(k-1);c=r(B,x,d,g);{k=
c.mean;c=c.sdcm;var t=g,n=0,u=0;let y=0,O=0,z=!0;for(let f=0;2>f&&z;f++){0===f&&(z=!1);for(var p=0;p<t-1;p++)for(;B[p+1]+1!==B[p+2];)if(B[p+1]+=1,n=I(p,B,x,d),y=n.sbMean,n=n.sbSdcm,u=I(p+1,B,x,d),O=u.sbMean,u=u.sbSdcm,n+u<c[p]+c[p+1])c[p]=n,c[p+1]=u,k[p]=y,k[p+1]=O,z=!0;else{--B[p+1];break}for(p=t-1;0<p;p--)for(;B[p]!==B[p-1]+1;)if(--B[p],n=I(p-1,B,x,d),y=n.sbMean,n=n.sbSdcm,u=I(p,B,x,d),O=u.sbMean,u=u.sbSdcm,n+u<c[p-1]+c[p])c[p-1]=n,c[p]=u,k[p-1]=y,k[p]=O,z=!0;else{B[p]+=1;break}}k=z}k&&(c=r(B,x,
d,g));return B}function r(x,d,g,k){let B=[];var c=[],t=[];let n=0;const u=[],p=[];for(var y=0;y<k;y++){var O=I(y,x,d,g);u.push(O.sbMean);p.push(O.sbSdcm);n+=p[y]}O=n;for(y=!0;y||n<O;){y=!1;B=[];for(c=0;c<k;c++)B.push(x[c]);for(t=0;t<k;t++)for(O=x[t]+1;O<=x[t+1];O++)if(c=d[O],0<t&&O!==x[t+1]&&Math.abs(c-u[t])>Math.abs(c-u[t-1]))x[t]=O;else if(t<k-1&&x[t]!==O-1&&Math.abs(c-u[t])>Math.abs(c-u[t+1])){x[t+1]=O-1;break}O=n;n=0;c=[];t=[];for(let z=0;z<k;z++){c.push(u[z]);t.push(p[z]);const f=I(z,x,d,g);
u[z]=f.sbMean;p[z]=f.sbSdcm;n+=p[z]}}if(n>O){for(d=0;d<k;d++)x[d]=B[d],u[d]=c[d],p[d]=t[d];n=O}return{mean:u,sdcm:p}}function w(x,d,g,k,B){x=Math.max(k-x,d-k)/B/g;return 1<=x?1:.5<=x?.5:.25}function D(x){let d=0;for(let g=0;g<x.length;g++)d+=x[g];return d/=x.length}function K(x,d){let g=0;for(let k=0;k<x.length;k++){const B=x[k];g+=(B-d)*(B-d)}g/=x.length;return Math.sqrt(g)}function I(x,d,g,k){var B=0,c=0;for(var t=d[x]+1;t<=d[x+1];t++){const n=k[t];B+=g[t]*n;c+=n}0>=c&&console.log("Exception in Natural Breaks calculation");
B/=c;c=0;for(t=d[x]+1;t<=d[x+1];t++)c+=k[t]*(g[t]-B)**2;return{sbMean:B,sbSdcm:c}}e.createGenerateRendererClassBreaks=function(x){const {normalizationTotal:d}=x;return{classBreaks:q(x),normalizationTotal:d}};e.createGenerateRendererUniqueValues=function(x){x=E(x);const d=[],g=x.uniqueValues.length;for(let k=0;k<g;k++){const B=x.uniqueValues[k];d.push({value:B,count:x.valueFrequency[k],label:B.toString()})}return{uniqueValues:d}};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(e,q,b,E,h,r,w){function D(c,t){if(!t)return null;if("x"in t){var n={x:0,y:0};[n.x,n.y]=c(t.x,t.y,d);null!=t.z&&(n.z=t.z);null!=t.m&&(n.m=t.m);return n}if("xmin"in t)return n={xmin:0,ymin:0,xmax:0,ymax:0},[n.xmin,n.ymin]=c(t.xmin,t.ymin,d),[n.xmax,n.ymax]=c(t.xmax,t.ymax,d),t.hasZ&&(n.zmin=t.zmin,n.zmax=t.zmax,n.hasZ=!0),t.hasM&&(n.mmin=t.mmin,n.mmax=t.mmax,n.hasM=!0),n;if("rings"in t)return{rings:K(t.rings,c),hasM:t.hasM,hasZ:t.hasZ};if("paths"in t)return{paths:K(t.paths,c),hasM:t.hasM,hasZ:t.hasZ};
if("points"in t)return{points:I(t.points,c),hasM:t.hasM,hasZ:t.hasZ}}function K(c,t){const n=[];for(const u of c)n.push(I(u,t));return n}function I(c,t){const n=[];for(const u of c)c=t(u[0],u[1],[0,0]),n.push(c),2<u.length&&c.push(u[2]),3<u.length&&c.push(u[3]);return n}function x(){x=q._asyncToGenerator(function*(c,t){t&&(c=Array.isArray(c)?c.map(n=>b.isSome(n.geometry)&&n.geometry.spatialReference):[c],yield E.initializeProjection(c.map(n=>({source:n,dest:t}))))});return x.apply(this,arguments)}
const d=[0,0],g=D.bind(null,w.lngLatToXY),k=D.bind(null,w.xyToLngLat),B=new (function(){function c(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var t=c.prototype;t.push=function(){var n=q._asyncToGenerator(function*(u,p,y){if(!(u&&u.length&&p&&y)||r.equals(p,y))return u;const O={geometries:u,inSpatialReference:p,outSpatialReference:y,resolve:null};this._jobs.push(O);return new Promise(z=>{O.resolve=z;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(u,
p,y){return n.apply(this,arguments)}}();t._process=function(){this._timer=null;const n=this._jobs.shift();if(n){var {geometries:u,inSpatialReference:p,outSpatialReference:y,resolve:O}=n;w.canProject(p,y)?r.isWebMercator(y)?O(u.map(g)):O(u.map(k)):O(E.projectMany(h.jsonAdapter,u,p,y,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return c}());e.checkProjectionSupport=function(c,t){return x.apply(this,arguments)};e.project=function(c,t,n){if(!c)return c;n||(n=t,t=c.spatialReference);
return r.isValid(t)&&r.isValid(n)&&!r.equals(t,n)?w.canProject(t,n)?(c=r.isWebMercator(n)?g(c):k(c),c.spatialReference=n,c):E.projectMany(h.jsonAdapter,[c],t,n,null)[0]:c};e.projectMany=function(c,t,n){return B.push(c,t,n)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(e){let q=function(w,D,K){this.x=w;this.y=D;this.spatialReference=K;this.m=this.z=void 0},b=function(w,D,K,I){this.rings=w;this.spatialReference=D;this.hasM=
this.hasZ=void 0;K&&(this.hasZ=K);I&&(this.hasM=I)},E=function(w,D,K,I){this.paths=w;this.spatialReference=D;this.hasM=this.hasZ=void 0;K&&(this.hasZ=K);I&&(this.hasM=I)},h=function(w,D,K,I){this.points=w;this.spatialReference=D;this.hasM=this.hasZ=void 0;K&&(this.hasZ=K);I&&(this.hasM=I)},r=function(w,D,K,I,x){this.xmin=w;this.ymin=D;this.xmax=K;this.ymax=I;this.spatialReference=x;this.mmax=this.mmin=this.zmax=this.zmin=void 0};e.jsonAdapter={convertToGEGeometry:function(w,D){return null==D?null:
w.convertJSONToGeometry(D)},exportPoint:function(w,D,K){K=new q(w.getPointX(D),w.getPointY(D),K);const I=w.hasZ(D),x=w.hasM(D);I&&(K.z=w.getPointZ(D));x&&(K.m=w.getPointM(D));return K},exportPolygon:function(w,D,K){return new b(w.exportPaths(D),K,w.hasZ(D),w.hasM(D))},exportPolyline:function(w,D,K){return new E(w.exportPaths(D),K,w.hasZ(D),w.hasM(D))},exportMultipoint:function(w,D,K){return new h(w.exportPoints(D),K,w.hasZ(D),w.hasM(D))},exportExtent:function(w,D,K){var I=w.hasZ(D);const x=w.hasM(D);
K=new r(w.getXMin(D),w.getYMin(D),w.getXMax(D),w.getYMax(D),K);I&&(I=w.getZExtent(D),K.zmin=I.vmin,K.zmax=I.vmax);x&&(w=w.getMExtent(D),K.mmin=w.vmin,K.mmax=w.vmax);return K}};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(e){function q(h,r,w,D,K){if(null!=D&&null!=K)return I=>{const x=h.getAttribute(I,r);I=h.getAttribute(I,w);return(null==x||x<=K)&&(null==I||I>=D)};if(null!=D)return I=>{I=h.getAttribute(I,w);return null==
I||I>=D};if(null!=K)return I=>{I=h.getAttribute(I,r);return null==I||I<=K}}function b(h,r,w,D){if(null!=w&&null!=D&&w===D)return K=>h.getAttribute(K,r)===w;if(null!=w&&null!=D)return K=>{K=h.getAttribute(K,r);return K>=w&&K<=D};if(null!=w)return K=>h.getAttribute(K,r)>=w;if(null!=D)return K=>h.getAttribute(K,r)<=D}function E(){return()=>!1}e.getTimeExtent=function(h,r){if(!h)return null;const w=r.featureAdapter,{startTimeField:D,endTimeField:K}=h;let I=Number.POSITIVE_INFINITY,x=Number.NEGATIVE_INFINITY;
if(D&&K)r.forEach(d=>{const g=w.getAttribute(d,D);d=w.getAttribute(d,K);null==g||isNaN(g)||(I=Math.min(I,g));null==d||isNaN(d)||(x=Math.max(x,d))});else{const d=D||K;r.forEach(g=>{g=w.getAttribute(g,d);null==g||isNaN(g)||(I=Math.min(I,g),x=Math.max(x,g))})}return{start:I,end:x}};e.getTimeOperator=function(h,r,w){if(!r||!h)return null;const {startTimeField:D,endTimeField:K}=h;if(!D&&!K)return null;const {start:I,end:x}=r;return null===I&&null===x?null:void 0===I&&void 0===x?E():D&&K?q(w,D,K,I,x):b(w,
D||K,I,x)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../centroid ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),function(e,
q,b,E,h,r,w,D,K,I,x,d,g,k){function B(A,C,J,W=A.hasZ,ba=A.hasM){if(h.isNone(C))return null;const X=A.hasZ&&W,v=A.hasM&&ba;return J?(A=d.quantizeOptimizedGeometry(P,C,A.hasZ,A.hasM,"esriGeometryPoint",J,W,ba),d.convertToPoint(A,X,v)):d.convertToPoint(C,X,v)}function c(){c=b._asyncToGenerator(function*(A,C,J){const {outFields:W,orderByFields:ba,groupByFieldsForStatistics:X,outStatistics:v}=A;if(W)for(var N=0;N<W.length;N++)W[N]=W[N].trim();if(ba)for(N=0;N<ba.length;N++)ba[N]=ba[N].trim();if(X)for(N=
0;N<X.length;N++)X[N]=X[N].trim();if(v)for(N=0;N<v.length;N++)v[N].onStatisticField&&(v[N].onStatisticField=v[N].onStatisticField.trim());A.geometry&&!A.outSR&&(A.outSR=A.geometry.spatialReference);return n(A,C,J)});return c.apply(this,arguments)}function t(){t=b._asyncToGenerator(function*(A,C,J){return n(A,C,J)});return t.apply(this,arguments)}function n(A,C,J){return u.apply(this,arguments)}function u(){u=b._asyncToGenerator(function*(A,C,J){if(!A)return null;var {where:W}=A;A.where=W=W&&W.trim();
if(!W||/^1 *= *1$/.test(W)||C&&C===W)A.where=null;if(!A.geometry)return A;C=yield p(A);A.distance=0;A.units=null;"esriSpatialRelEnvelopeIntersects"===A.spatialRel&&({spatialReference:W}=A.geometry,C=w.getGeometryExtent(C),C.spatialReference=W);A.geometry=C;yield k.checkProjectionSupport(C.spatialReference,J);C=(yield K.normalizeCentralMeridian(D.fromJSON(C)))[0];if(h.isNone(C))throw F;C=C.toJSON();C=yield k.project(C,C.spatialReference,J);if(!C)throw F;C.spatialReference=J;A.geometry=C;return A});
return u.apply(this,arguments)}function p(A){return y.apply(this,arguments)}function y(){y=b._asyncToGenerator(function*(A){const {geometry:C,distance:J,units:W}=A;if(null==J||"vertexAttributes"in C)return C;var ba=C.spatialReference;A=W?f.fromJSON(W):r.getUnitString(ba);ba=ba&&(I.isGeographic(ba)||I.isWebMercator(ba))?C:yield k.checkProjectionSupport(ba,I.WGS84).then(()=>k.project(C,I.WGS84));return(yield O())(ba.spatialReference,ba,J,A)});return y.apply(this,arguments)}function O(){return z.apply(this,
arguments)}function z(){z=b._asyncToGenerator(function*(){return(yield new Promise((A,C)=>e(["../../../geometry/geometryEngineJSON"],A,C))).geodesicBuffer});return z.apply(this,arguments)}const f=new E.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),F=Object.freeze({}),S=new g,M=new g,P=new g,H={esriGeometryPoint:d.convertToPoint,esriGeometryPolyline:d.convertToPolyline,
esriGeometryPolygon:d.convertToPolygon,esriGeometryMultipoint:d.convertToMultipoint},L=(A,C)=>"_geVersion"!==A?C:void 0;q.QUERY_ENGINE_EMPTY_RESULT=F;q.cleanFromGeometryEngine=function(A){return A&&"_geVersion"in A?JSON.parse(JSON.stringify(A,L)):A};q.getCentroid=function(A,C,J){if("esriGeometryPolygon"!==A.geometryType||!C||!C.centroid&&!C.geometry)return null;C.centroid||(C.centroid=x.getCentroidOptimizedGeometry(new g,C.geometry,A.hasZ,A.hasM));return B(A,C.centroid,J)};q.getGeometry=function(A,
C,J,W,ba,X,v=C,N=J){const Q=C&&v,Z=J&&N;W=h.isSome(W)?"coords"in W?W:W.geometry:null;if(h.isNone(W))return null;if(ba)return C=d.generalizeOptimizedGeometry(M,W,C,J,A,ba,v,N),X&&(C=d.quantizeOptimizedGeometry(P,C,Q,Z,A,X)),H[A](C,Q,Z);if(X)return X=d.quantizeOptimizedGeometry(P,W,C,J,A,X,v,N),H[A](X,Q,Z);d.removeZMValues(S,W,C,J,v,N);return H[A](S,Q,Z)};q.normalizeFilter=function(A,C,J){return t.apply(this,arguments)};q.normalizeQuery=function(A,C,J){return c.apply(this,arguments)};q.normalizeQueryLike=
n;q.transformCentroid=B;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(e,q){function b(h,r,w,D,K,I,x=1){I=K?I?4:3:I?3:2;let d=w,g=w+I,k=0,B=0,c=w=0,t=0;for(let n=0,u=D-1;n<u;n++,d+=I,g+=I){D=r[d];const p=r[d+1],y=r[d+2],O=r[g],z=r[g+1],f=r[g+2];let F=D*z-O*p;c+=F;k+=(D+O)*F;B+=(p+z)*F;K&&(F=D*f-O*y,w+=(y+f)*F,t+=F);D<h[0]&&(h[0]=D);D>h[1]&&(h[1]=D);p<h[2]&&(h[2]=p);p>h[3]&&(h[3]=p);K&&(y<h[4]&&(h[4]=y),
y>h[5]&&(h[5]=y))}0<c*x&&(c*=-1);0<t*x&&(t*=-1);if(!c)return null;h=[k,B,.5*c];K&&(h[3]=w,h[4]=.5*t);return h}function E(h,r,w,D,K){K=D?K?4:3:K?3:2;let I=r,x=r+K,d=0,g=0,k=0,B=0;for(let u=0,p=w-1;u<p;u++,I+=K,x+=K){var c=h[I];const y=h[I+1],O=h[I+2],z=h[x],f=h[x+1],F=h[x+2];if(D){{var t=z-c;var n=f-y;const S=F-O;t=Math.sqrt(t*t+n*n+S*S)}}else t=z-c,n=f-y,t=Math.sqrt(t*t+n*n);t&&(d+=t,D?(c=[c+.5*(z-c),y+.5*(f-y),O+.5*(F-O)],g+=t*c[0],k+=t*c[1],B+=t*c[2]):(c=[c+.5*(z-c),y+.5*(f-y)],g+=t*c[0],k+=t*c[1]))}return 0<
d?D?[g/d,k/d,B/d]:[g/d,k/d]:0<w?D?[h[r],h[r+1],h[r+2]]:[h[r],h[r+1]]:null}e.getCentroidOptimizedGeometry=function(h,r,w,D,K){if(q.isNone(r)||!r.lengths.length)return null;const I="upperLeft"===(null==K?void 0:K.originPosition)?-1:1;h.lengths.length&&(h.lengths.length=0);h.coords.length&&(h.coords.length=0);K=h.coords;const x=[],d=w?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,
Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:g,coords:k}=r,B=w?D?4:3:D?3:2;let c=0;for(var t of g){const n=b(d,k,c,t,w,D,I);n&&x.push(n);c+=t*B}x.sort((n,u)=>{let p=I*n[2]-I*u[2];0===p&&w&&(p=n[4]-u[4]);return p});x.length&&(t=6*x[0][2],K[0]=x[0][0]/t,K[1]=x[0][1]/t,w&&(t=6*x[0][4],K[2]=0!==t?x[0][3]/t:0),K[0]<d[0]||K[0]>d[1]||K[1]<d[2]||K[1]>d[3]||w&&(K[2]<d[4]||K[2]>d[5]))&&(K.length=0);if(!K.length)if(r=r.lengths[0]?E(k,0,g[0],w,D):null)K[0]=r[0],K[1]=r[1],
w&&2<r.length&&(K[2]=r[2]);else return null;return h};e.lineCentroid=E;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/SnappingConstraint":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/vec2 ../../../chunks/vec2f64 ./Settings ./snappingUtils ../../support/geometry2dUtils".split(" "),function(e,q,b,E,h,r,w){let D=function(B){this.coordinateHelper=B},K=function(B){function c(n,u){n=B.call(this,n)||this;n.point=u;return n}q._inheritsLoose(c,
B);var t=c.prototype;t.objectEqual=function(n){return n instanceof c?r.objectEqual(this.point,n.point):!1};t.check=function(n){return b.squaredDistance(n,this.point)<h.defaults.pointThreshold};t.closestTo=function(){return this.coordinateHelper.clone(this.point)};t.intersect=function(n){const u=[];n instanceof I?u.push(...w.intersectLineAndPoint({start:n.start,end:n.end,type:n instanceof d?w.LineType.LINE:w.LineType.RAY},this.point)):n instanceof k&&u.push(...w.intersectCircleAndPoint(n.center,n.radius,
this.point));return u.map(p=>new g(this.coordinateHelper,p,this,n))};return c}(D),I=function(B){function c(n,u,p){n=B.call(this,n)||this;n.start=u;n.end=p;return n}q._inheritsLoose(c,B);var t=c.prototype;t.objectEqual=function(n){return n instanceof c?r.objectEqual(this.start,n.start)&&r.objectEqual(this.end,n.end):!1};t.intersect=function(n){const u=[];n instanceof K?u.push(...w.intersectLineAndPoint({start:this.start,end:this.end,type:this instanceof d?w.LineType.LINE:w.LineType.RAY},n.point)):
n instanceof c?u.push(...w.intersectLineAndRay({start:this.start,end:this.end,type:this instanceof d?w.LineType.LINE:w.LineType.RAY},{start:n.start,end:n.end,type:n instanceof d?w.LineType.LINE:w.LineType.RAY})):n instanceof k&&u.push(...w.intersectLineLikeAndCircle({start:this.start,end:this.end,type:this instanceof d?w.LineType.LINE:w.LineType.RAY},n.center,n.radius));return u.map(p=>new g(this.coordinateHelper,p,this,n))};return c}(D),x=function(B){function c(n,u,p){n=B.call(this,n,u,p)||this;
n.dir=E.create();n.p=E.create();return n}q._inheritsLoose(c,B);var t=c.prototype;t.objectEqual=function(n){return n instanceof c?B.prototype.objectEqual.call(this,n):!1};t.check=function(n){b.subtract(this.dir,this.end,this.start);b.subtract(this.p,n,this.start);return 0<=b.dot(this.dir,this.p)?w.pointToLineDistance(n,this.start,this.end)<h.defaults.pointOnLineThreshold:!1};t.closestTo=function(n){const u=this.coordinateHelper.clone(n);w.projectPointToRay(u,n,this.start,this.end);return u};return c}(I),
d=function(B){function c(n,u,p){return B.call(this,n,u,p)||this}q._inheritsLoose(c,B);var t=c.prototype;t.objectEqual=function(n){return n instanceof c?B.prototype.objectEqual.call(this,n):!1};t.check=function(n){return w.pointToLineDistance(n,this.start,this.end)<h.defaults.pointOnLineThreshold};t.closestTo=function(n){const u=this.coordinateHelper.clone(n);w.projectPointToLine(u,n,this.start,this.end);return u};return c}(I),g=function(B){function c(n,u,p,y){n=B.call(this,n)||this;n.intersection=
u;n.first=p;n.second=y;return n}q._inheritsLoose(c,B);var t=c.prototype;t.objectEqual=function(n){return n instanceof c?this.first.objectEqual(n.first)&&this.second.objectEqual(n.second):!1};t.check=function(){return!1};t.closestTo=function(n){n=this.coordinateHelper.clone(n);b.copy(n,this.intersection);return n};t.intersect=function(){return[]};return c}(D),k=function(B){function c(n,u,p){n=B.call(this,n)||this;n.center=u;n.radius=p;return n}q._inheritsLoose(c,B);var t=c.prototype;t.objectEqual=
function(n){return n instanceof c?this.center[0]===n.center[0]&&this.center[1]===n.center[1]&&this.radius===n.radius:!1};t.check=function(){return!1};t.closestTo=function(n){const u=this.coordinateHelper.clone(n);w.projectPointToCircle(u,n,this.center,this.radius);return u};t.intersect=function(n){const u=[];n instanceof I?u.push(...w.intersectLineLikeAndCircle({start:n.start,end:n.end,type:n instanceof d?w.LineType.LINE:w.LineType.RAY},this.center,this.radius)):n instanceof K&&u.push(...w.intersectCircleAndPoint(this.center,
this.radius,n.point));return u.map(p=>new g(this.coordinateHelper,p,this,n))};return c}(D);e.IntersectionConstraint=g;e.LineConstraint=d;e.LineLikeConstraint=I;e.PlanarCircleConstraint=k;e.PointConstraint=K;e.RayConstraint=x;e.SnappingConstraint=D;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/chunks/vec2f64":function(){define(["exports"],function(e){function q(){return[0,0]}function b(c){return[c[0],c[1]]}function E(c,t){return[c,t]}function h(c){const t=[0,0],n=Math.min(2,c.length);for(let u=
0;u<n;++u)t[u]=c[u];return t}function r(c,t){return new Float64Array(c,t,2)}function w(){return[0,0]}function D(){return[1,1]}function K(){return[1,0]}function I(){return[0,1]}const x=[0,0],d=[1,1],g=[1,0],k=[0,1],B=Object.freeze({__proto__:null,create:q,clone:b,fromValues:E,fromArray:h,createView:r,zeros:w,ones:D,unitX:K,unitY:I,ZEROS:x,ONES:d,UNIT_X:g,UNIT_Y:k});e.ONES=d;e.UNIT_X=g;e.UNIT_Y=k;e.ZEROS=x;e.clone=b;e.create=q;e.createView=r;e.fromArray=h;e.fromValues=E;e.ones=D;e.unitX=K;e.unitY=I;
e.vec2f64=B;e.zeros=w})},"esri/views/interactive/snapping/snappingUtils":function(){define("exports ../../../core/screenUtils ../../../chunks/vec2 ../../../chunks/vec3f64 ../../../geometry/Point ../../../support/elevationInfoUtils".split(" "),function(e,q,b,E,h,r){function w(x,d,g,k,B=E.create()){x=d.toXYZ(x);x[2]=r.getConvertedElevationFromVector(k,x,d.spatialReference,g)||0;k.renderCoordsHelper.toRenderCoords(x,d.spatialReference,B);return B}e.LineSegmentHintType=void 0;(function(x){x[x.TARGET=
0]="TARGET";x[x.REFERENCE=1]="REFERENCE";x[x.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(e.LineSegmentHintType||(e.LineSegmentHintType={}));const D=E.create(),K=q.createScreenPointArray(),I=new h;e.anyMapPointToRender=w;e.anyMapPointToScreenPoint=function(x,d,g,k){if("2d"===k.type)return k.toScreen(d.vectorToPoint(x,I));w(x,d,g,k,D);k.state.camera.projectToScreen(D,K);return q.createScreenPoint(K[0],K[1])};e.anyMapPointsToRenderWithEqualZ=function(x,d,g,k,B,c,t){x=g.toXYZ(x);d=g.toXYZ(d);const n=
r.getConvertedElevationFromVector(B,x,g.spatialReference,k);k=r.getConvertedElevationFromVector(B,d,g.spatialReference,k);k=(null==n?k:null==k?n:Math.min(n,k))||0;x[2]=k;d[2]=k;B.renderCoordsHelper.toRenderCoords(x,g.spatialReference,c);B.renderCoordsHelper.toRenderCoords(d,g.spatialReference,t)};e.objectEqual=function(x,d){const g=x.length===d.length&&x[0]===d[0]&&x[1]===d[1];switch(x.length){case 2:return g;case 3:return g&&x[2]===d[2];case 4:return g&&x[3]===d[3]}return!1};e.sortCandidatesInPlace=
function(x,d){d.sort((g,k)=>{g=b.squaredDistance(g.targetPoint,x);k=b.squaredDistance(k.targetPoint,x);return g-k})};e.squareDistance=function(x,d){const g=x.x-d.x;x=x.y-d.y;return g*g+x*x};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/support/geometry2dUtils":function(){define(["exports","../../core/mathUtils","../../chunks/vec2","../../chunks/vec2f64"],function(e,q,b,E){function h(g,k){return g[0]*k[1]-g[1]*k[0]}function r(g,k,B){k=b.dot(B,k)/b.squaredLength(B);return b.scale(g,
B,k)}function w(g,k,B,c,t=B){b.subtract(K,c,B);b.subtract(x,k,t);r(d,x,K);return b.add(g,t,d)}function D(g,k,B,c){b.subtract(K,k,B);k=c/b.length(K);return b.scaleAndAdd(g,B,K,k)}e.LineType=void 0;(function(g){g[g.RAY=0]="RAY";g[g.LINE=1]="LINE"})(e.LineType||(e.LineType={}));const K=E.create(),I=E.create(),x=E.create(),d=E.create();e.cross=h;e.intersectCircleAndPoint=function(g,k,B){D(x,B,g,k);return q.floatEqualAbsolute(x[0],B[0])&&q.floatEqualAbsolute(x[1],B[1])?[E.clone(B)]:[]};e.intersectLineAndPoint=
function(g,k){w(x,k,g.start,g.end);return q.floatEqualAbsolute(x[0],k[0])&&q.floatEqualAbsolute(x[1],k[1])?[E.clone(k)]:[]};e.intersectLineAndRay=function(g,k){const B=g.start;var c=k.start,t=k.end;const n=b.subtract(K,g.end,B);var u=b.subtract(I,t,c);t=h(n,u);if(1E-6>=Math.abs(t))return[];c=b.subtract(x,B,c);u=h(u,c)/t;t=h(n,c)/t;if(0<=u){if(0<=t||k.type===e.LineType.LINE)return[b.scaleAndAdd(d,B,n,u)]}else if(g.type===e.LineType.LINE&&(0<=t||k.type===e.LineType.LINE))return[b.scaleAndAdd(d,B,n,
u)];return[]};e.intersectLineLikeAndCircle=function(g,k,B){const c=[],t=b.subtract(K,g.end,g.start);var n=b.subtract(I,g.start,k);k=b.squaredLength(t);const u=2*b.dot(t,n);B=b.squaredLength(n)-B*B;B=u*u-4*k*B;0===B?(k=-u/(2*k),(g.type===e.LineType.LINE||0<=k)&&c.push(b.scaleAndAdd(d,g.start,t,k))):0<B&&(B=Math.sqrt(B),n=(-u+B)/(2*k),(g.type===e.LineType.LINE||0<=n)&&c.push(b.scaleAndAdd(d,g.start,t,n)),k=(-u-B)/(2*k),(g.type===e.LineType.LINE||0<=k)&&c.push(b.scaleAndAdd(x,g.start,t,k)));return c};
e.pointToLineDistance=function(g,k,B){return Math.abs((k[0]-g[0])*(B[1]-g[1])-(k[1]-g[1])*(B[0]-g[0]))/b.distance(k,B)};e.projectPoint=r;e.projectPointToCircle=D;e.projectPointToLine=w;e.projectPointToRay=function(g,k,B,c){b.subtract(K,c,B);b.subtract(x,k,B);k=b.dot(K,x)/b.squaredLength(K);return 0<k?b.scaleAndAdd(g,B,K,k):b.copy(g,B)};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/EdgeSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../SnappingConstraint ../snappingUtils ./FeatureSnappingCandidate ../hints/LineSnappingHint".split(" "),
function(e,q,b,E,h,r){h=function(w){function D(K){return w.call(this,{...K,constraint:new b.LineConstraint(K.coordinateHelper,K.edgeStart,K.edgeEnd)})||this}q._inheritsLoose(D,w);q._createClass(D,[{key:"hints",get:function(){return[new r.LineSnappingHint(E.LineSegmentHintType.REFERENCE,this.constraint.start,this.constraint.end)]}}]);return D}(h.FeatureSnappingCandidate);e.EdgeSnappingCandidate=h;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/FeatureSnappingCandidate":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","./SnappingCandidate"],function(e,q,b){b=function(E){function h({coordinateHelper:r,targetPoint:w,objectId:D,constraint:K}){r=E.call(this,r,w,K)||this;r.objectId=D;return r}q._inheritsLoose(h,E);return h}(b.SnappingCandidate);e.FeatureSnappingCandidate=b;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/SnappingCandidate":function(){define(["exports"],function(e){e.SnappingCandidate=function(q,b,E){this.coordinateHelper=
q;this.targetPoint=b;this.constraint=E};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/LineSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),function(e,q,b,E,h,r){E.getLogger("esri.views.interactive.snapping.hints.LineSnappingHint");b=function(w){function D(K,I,x,d=!0,g=!0){var k=w.call(this)||this;k.type=K;k.lineStart=I;k.lineEnd=
x;k.fadeLeft=d;k.fadeRight=g;return k}q._inheritsLoose(D,w);D.prototype.equals=function(K){return K instanceof D?this.type===K.type&&h.objectEqual(this.lineStart,K.lineStart)&&h.objectEqual(this.lineEnd,K.lineEnd)&&this.fadeLeft===K.fadeLeft&&this.fadeRight===K.fadeRight:!1};return D}(r.SnappingHint);e.LineSnappingHint=b;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/SnappingHint":function(){define(["exports"],function(e){e.SnappingHint=function(){};Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/RightAngleSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../snappingUtils ./SnappingCandidate ../hints/LineSnappingHint ../hints/RightAngleSnappingHint".split(" "),function(e,q,b,E,h,r){E=function(w){function D({coordinateHelper:K,targetPoint:I,constraint:x,previousVertex:d,otherVertex:g,otherVertexType:k,objectId:B}){K=w.call(this,K,I,x)||this;K.previousVertex=d;K.otherVertex=g;K.otherVertexType=
k;K.objectId=B;return K}q._inheritsLoose(D,w);q._createClass(D,[{key:"hints",get:function(){const K=this.previousVertex,I=this.otherVertexType===e.OtherVertexType.CENTER?this.otherVertex:this.targetPoint,x=this.otherVertexType===e.OtherVertexType.CENTER?this.targetPoint:this.otherVertex;return[new h.LineSnappingHint(b.LineSegmentHintType.TARGET,I,x),new h.LineSnappingHint(b.LineSegmentHintType.REFERENCE,K,I),new r.RightAngleSnappingHint(this.previousVertex,I,x)]}}]);return D}(E.SnappingCandidate);
e.OtherVertexType=void 0;(function(w){w[w.NEXT=0]="NEXT";w[w.CENTER=1]="CENTER"})(e.OtherVertexType||(e.OtherVertexType={}));e.RightAngleSnappingCandidate=E;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/RightAngleSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),function(e,q,b,E,h,r){E.getLogger("esri.views.interactive.snapping.hints.RightAngleSnappingHint");
b=function(w){function D(K,I,x){var d=w.call(this)||this;d.previousVertex=K;d.centerVertex=I;d.nextVertex=x;return d}q._inheritsLoose(D,w);D.prototype.equals=function(K){return K instanceof D?h.objectEqual(this.previousVertex,K.previousVertex)&&h.objectEqual(this.centerVertex,K.centerVertex)&&h.objectEqual(this.nextVertex,K.nextVertex):!1};return D}(r.SnappingHint);e.RightAngleSnappingHint=b;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/SelfSnappingEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./LineSnapper ./ParallelLineSnapper ./RightAngleSnapper ./RightAngleTriangleSnapper ./snappingUtils".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g,k,B){e.SelfSnappingEngine=function(c){function t(u){u=c.call(this,u)||this;u.updating=!1;u._snappers=new h;return u}q._inheritsLoose(t,c);var n=t.prototype;n.initialize=function(){this._snappers.push(new d.ParallelLineSnapper(this.view,this.options),new x.LineSnapper(this.view,this.options),new g.RightAngleSnapper(this.view,this.options),new k.RightAngleTriangleSnapper(this.view,this.options))};n.fetchCandidates=function(){var u=q._asyncToGenerator(function*(p,y){if(!this.options.effectiveSelfEnabled)return[];
const O=[];for(const z of this._snappers.items)O.push(...z.snap(p,y));B.sortCandidatesInPlace(p,O);return O});return function(p,y){return u.apply(this,arguments)}}();q._createClass(t,[{key:"options",set:function(u){this._set("options",u);for(const p of this._snappers)p.options=u}}]);return t}(E);b.__decorate([r.property({readOnly:!0})],e.SelfSnappingEngine.prototype,"updating",void 0);b.__decorate([r.property({constructOnly:!0})],e.SelfSnappingEngine.prototype,"view",void 0);b.__decorate([r.property()],
e.SelfSnappingEngine.prototype,"options",null);e.SelfSnappingEngine=b.__decorate([I.subclass("esri.views.interactive.snapping.SelfSnappingEngine")],e.SelfSnappingEngine);Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/LineSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2f64 ./SnappingAlgorithm ./snappingUtils ./candidates/LineSnappingCandidate ../../support/geometry2dUtils".split(" "),function(e,
q,b,E,h,r,w,D){h=function(K){function I(){return K.apply(this,arguments)||this}q._inheritsLoose(I,K);var x=I.prototype;x.snapNewVertex=function(d,g){var k=g.editGeometryOperations.data.components[0],B=k.edges.length;const c=[];if(1>B)return c;const t=r.anyMapPointToScreenPoint(d,g.coordinateHelper,g.elevationInfo,this.view);B=k=k.edges[B-1];do this.edgeExceedsShortLineThreshold(B,g)&&this._processCandidateProposal(B.leftVertex.pos,B.rightVertex.pos,d,t,g,c),B=B.leftVertex.leftEdge;while(B&&B!==k);
return c};x.snapExistingVertex=function(d,g){const k=[],B=b.unwrap(g.vertexHandle);var c=B.component;if(2>c.edges.length)return k;const t=r.anyMapPointToScreenPoint(d,g.coordinateHelper,g.elevationInfo,this.view);var n=B.leftEdge;const u=B.rightEdge;n&&u&&this.edgeExceedsShortLineThreshold(n,g)&&this.edgeExceedsShortLineThreshold(u,g)&&this._processCandidateProposal(n.leftVertex.pos,u.rightVertex.pos,d,t,g,k);n=c=c.edges[0];do n!==B.leftEdge&&n!==B.rightEdge&&this.edgeExceedsShortLineThreshold(n,
g)&&this._processCandidateProposal(n.leftVertex.pos,n.rightVertex.pos,d,t,g,k),n=n.rightVertex.rightEdge;while(n&&n!==c);return k};x._processCandidateProposal=function(d,g,k,B,c,t){const n=D.projectPointToLine(E.create(),k,d,g),u=c.coordinateHelper;k=u.fromXYZ(n,u.getZ(k,0));r.squareDistance(B,r.anyMapPointToScreenPoint(k,u,c.elevationInfo,this.view))<this.squaredProximityTreshold(c.pointer)&&t.push(new w.LineSnappingCandidate({coordinateHelper:c.coordinateHelper,lineStart:d,lineEnd:g,targetPoint:k}))};
return I}(h.SnappingAlgorithm);e.LineSnapper=h;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/SnappingAlgorithm":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/maybe","./Settings","./snappingUtils"],function(e,q,b,E,h){let r=function(){function w(K,I){this.view=K;this.options=I;this.squaredShortLineThreshold=E.defaults.shortLineThreshold*E.defaults.shortLineThreshold}var D=w.prototype;D.snap=function(K,I){return b.isSome(I.vertexHandle)?
"vertex"!==I.vertexHandle.type?[]:this.snapExistingVertex(K,I):this.snapNewVertex(K,I)};D.edgeExceedsShortLineThreshold=function(K,I){return this.exceedsShortLineThreshold(K.leftVertex.pos,K.rightVertex.pos,I)};D.exceedsShortLineThreshold=function(K,I,{elevationInfo:x,editGeometryOperations:d}){d=d.data.coordinateHelper;return 0===this.squaredShortLineThreshold||h.squareDistance(h.anyMapPointToScreenPoint(I,d,x,this.view),h.anyMapPointToScreenPoint(K,d,x,this.view))>this.squaredShortLineThreshold};
D.squaredProximityTreshold=function(K){return"touch"===K?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold};q._createClass(w,[{key:"squaredMouseProximityTreshold",get:function(){return this.options.distance*this.options.distance}},{key:"squaredTouchProximityThreshold",get:function(){const {distance:K,touchSensitivityMultiplier:I}=this.options,x=K*I;return x*x}}]);return w}();e.SnappingAlgorithm=r;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/LineSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../SnappingConstraint ../snappingUtils ./SnappingCandidate ../hints/LineSnappingHint".split(" "),
function(e,q,b,E,h,r,w,D){w=function(x){function d({coordinateHelper:g,lineStart:k,lineEnd:B,targetPoint:c}){g=x.call(this,g,c,new h.LineConstraint(g,k,B))||this;g.referenceLineHint=new D.LineSnappingHint(r.LineSegmentHintType.REFERENCE_EXTENSION,k,B);return g}q._inheritsLoose(d,x);d.prototype._lineEndClosestToTarget=function(){const g=this.constraint.start,k=this.constraint.end;return 0<Math.sign(b.dot(b.subtract(I,k,g),b.subtract(K,this.targetPoint,g)))?k:g};q._createClass(d,[{key:"hints",get:function(){return[this.referenceLineHint,
new D.LineSnappingHint(r.LineSegmentHintType.TARGET,this._lineEndClosestToTarget(),this.targetPoint)]}}]);return d}(w.SnappingCandidate);const K=E.create(),I=E.create();e.LineSnappingCandidate=w;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/ParallelLineSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ./Settings ./SnappingAlgorithm ./snappingUtils ./candidates/ParallelLineSnappingCandidate ../../support/geometry2dUtils".split(" "),
function(e,q,b,E,h,r,w,D,K,I){w=function(x){function d(){var k=x.apply(this,arguments)||this;k._tmpProjection=h.create();return k}q._inheritsLoose(d,x);var g=d.prototype;g.snapNewVertex=function(k,B){var c=B.editGeometryOperations.data.components[0],t=c.edges.length,n=c.vertices.length;const u=[];if(2>t)return u;const p=D.anyMapPointToScreenPoint(k,B.coordinateHelper,B.elevationInfo,this.view);n=c.vertices[n-1];const y=c.vertices[0];t=c=c.edges[t-1];do this.edgeExceedsShortLineThreshold(t,B)&&(this._checkEdgeForParalleLines(t,
n.pos,k,p,B,u),this._checkEdgeForParalleLines(t,y.pos,k,p,B,u)),t=t.leftVertex.leftEdge;while(t&&t!==c);return u};g.snapExistingVertex=function(k,B){const c=[],t=b.unwrap(B.vertexHandle);var n=t.component;if(3>n.edges.length)return c;const u=D.anyMapPointToScreenPoint(k,B.coordinateHelper,B.elevationInfo,this.view),p=t.leftEdge,y=t.rightEdge,O=n.vertices[0],z=n.vertices[n.vertices.length-1];let f=n=n.edges[0];do f!==p&&f!==y&&this.edgeExceedsShortLineThreshold(f,B)&&(p&&this._checkEdgeForParalleLines(f,
p.leftVertex.pos,k,u,B,c),y&&this._checkEdgeForParalleLines(f,y.rightVertex.pos,k,u,B,c),t===O?this._checkEdgeForParalleLines(f,z.pos,k,u,B,c):t===z&&this._checkEdgeForParalleLines(f,O.pos,k,u,B,c)),f=f.rightVertex.rightEdge;while(f&&f!==n);return c};g._checkEdgeForParalleLines=function(k,B,c,t,n,u){var p=k.leftVertex.pos;const y=k.rightVertex.pos;I.projectPointToLine(this._tmpProjection,B,p,y);E.squaredDistance(this._tmpProjection,B)<r.defaults.parallelLineThreshold||(I.projectPointToLine(this._tmpProjection,
c,p,y,B),p=n.coordinateHelper,c=p.fromXYZ(this._tmpProjection,p.getZ(c,0)),D.squareDistance(t,D.anyMapPointToScreenPoint(c,p,n.elevationInfo,this.view))<this.squaredProximityTreshold(n.pointer)&&!this._parallelToPreviousCandidate(k,u)&&u.push(new K.ParallelLineSnappingCandidate({coordinateHelper:p,referenceLine:k,lineStart:B,targetPoint:c})))};g._parallelToPreviousCandidate=function(k,B){const c=k.leftVertex.pos,t=k.rightVertex.pos;for(const n of B)if(I.projectPointToLine(this._tmpProjection,t,n.constraint.start,
n.constraint.end,c),E.squaredDistance(this._tmpProjection,t)<r.defaults.parallelLineThreshold)return n.addReferenceLine(k),!0;return!1};return d}(w.SnappingAlgorithm);e.ParallelLineSnapper=w;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/ParallelLineSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2 ../SnappingConstraint ../snappingUtils ./SnappingCandidate ../hints/LineSnappingHint ../hints/ParallelSnappingHint".split(" "),
function(e,q,b,E,h,r,w,D){r=function(K){function I({coordinateHelper:x,referenceLine:d,lineStart:g,targetPoint:k}){const B=x.clone(g);b.subtract(B,b.add(B,B,d.rightVertex.pos),d.leftVertex.pos);x=K.call(this,x,k,new E.LineConstraint(x,g,B))||this;x._referenceLines=[{edge:d,fadeLeft:!0,fadeRight:!0}];return x}q._inheritsLoose(I,K);I.prototype.addReferenceLine=function(x){const d={edge:x,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(g=>{x.rightVertex.rightEdge===g.edge&&(g.fadeLeft=!1,d.fadeRight=
!1);x.leftVertex.leftEdge===g.edge&&(g.fadeRight=!1,d.fadeLeft=!1)});this._referenceLines.push(d)};q._createClass(I,[{key:"hints",get:function(){return[new w.LineSnappingHint(h.LineSegmentHintType.TARGET,this.constraint.start,this.targetPoint),new D.ParallelSnappingHint(this.constraint.start,this.targetPoint),...this._referenceLines.map(x=>new w.LineSnappingHint(h.LineSegmentHintType.REFERENCE,x.edge.leftVertex.pos,x.edge.rightVertex.pos,x.fadeLeft,x.fadeRight))]}}]);return I}(r.SnappingCandidate);
e.ParallelLineSnappingCandidate=r;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/ParallelSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),function(e,q,b,E,h,r){E.getLogger("esri.views.interactive.snapping.hints.ParallelSnappingHint");b=function(w){function D(K,I){var x=w.call(this)||this;x.lineStart=K;x.lineEnd=I;return x}q._inheritsLoose(D,
w);D.prototype.equals=function(K){return K instanceof D?h.objectEqual(this.lineStart,K.lineStart)&&h.objectEqual(this.lineEnd,K.lineEnd):!1};return D}(r.SnappingHint);e.ParallelSnappingHint=b;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/RightAngleSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ./SnappingAlgorithm ./SnappingConstraint ./snappingUtils ./candidates/RightAngleSnappingCandidate".split(" "),
function(e,q,b,E,h,r,w,D,K){r=function(I){function x(){var g=I.apply(this,arguments)||this;g._tmp=h.create();return g}q._inheritsLoose(x,I);var d=x.prototype;d.snapNewVertex=function(g,k){var B=k.editGeometryOperations.data.components[0],c=B.vertices.length;const t=[];if(2>c)return t;const n=D.anyMapPointToScreenPoint(g,k.coordinateHelper,k.elevationInfo,this.view);c=B.vertices[c-1];this._checkForSnappingCandidate(t,c.leftEdge,c.pos,g,c.leftEdge.leftVertex.pos,c.pos,k,g,n);B=B.vertices[0];this._checkForSnappingCandidate(t,
B.rightEdge,B.pos,g,B.rightEdge.rightVertex.pos,B.pos,k,g,n);return t};d.snapExistingVertex=function(g,k){const B=[];var c=b.unwrap(k.vertexHandle),t=c.component;const n=t.vertices.length;if(3>n)return B;const u=D.anyMapPointToScreenPoint(g,k.coordinateHelper,k.elevationInfo,this.view);var p=c.leftEdge;c=c.rightEdge;const y=t.vertices[0];t=t.vertices[n-1];if(!p)return this._checkForSnappingCandidate(B,y.rightEdge.rightVertex.rightEdge,y.rightEdge.rightVertex.pos,g,y.rightEdge.rightVertex.rightEdge.rightVertex.pos,
y.rightEdge.rightVertex.pos,k,g,u),B;if(!c)return this._checkForSnappingCandidate(B,t.leftEdge.leftVertex.leftEdge,t.leftEdge.leftVertex.pos,g,t.leftEdge.leftVertex.leftEdge.leftVertex.pos,t.leftEdge.leftVertex.pos,k,g,u),B;p&&p.leftVertex.leftEdge&&(t=p.leftVertex.leftEdge,this._checkForSnappingCandidate(B,t,p.leftVertex.pos,g,t.leftVertex.pos,p.leftVertex.pos,k,g,u));c&&c.rightVertex.rightEdge&&(p=c.rightVertex.rightEdge,this._checkForSnappingCandidate(B,p,c.rightVertex.pos,g,p.rightVertex.pos,
c.rightVertex.pos,k,g,u));return B};d._checkForSnappingCandidate=function(g,k,B,c,t,n,u,p,y){this.edgeExceedsShortLineThreshold(k,u)&&(E.subtract(this._tmp,k.rightVertex.pos,k.leftVertex.pos),k=h.fromValues(this._tmp[1],-this._tmp[0]),B=E.dot(k,E.subtract(this._tmp,c,B))/E.squaredLength(k),c=u.coordinateHelper,p=c.fromXYZ(E.scaleAndAdd(h.create(),n,k,B),c.getZ(p,0)),D.squareDistance(y,D.anyMapPointToScreenPoint(p,c,u.elevationInfo,this.view))<this.squaredProximityTreshold(u.pointer)&&g.push(new K.RightAngleSnappingCandidate({coordinateHelper:c,
targetPoint:p,constraint:new w.RayConstraint(c,n,E.scaleAndAdd(c.createVector(),n,k,Math.sign(B))),previousVertex:t,otherVertex:n,otherVertexType:K.OtherVertexType.CENTER})))};return x}(r.SnappingAlgorithm);e.RightAngleSnapper=r;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/RightAngleTriangleSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ./SnappingAlgorithm ./snappingUtils ./candidates/RightAngleTriangleSnappingCandidate ../../support/geometry2dUtils".split(" "),
function(e,q,b,E,h,r,w,D,K){r=function(I){function x(){return I.apply(this,arguments)||this}q._inheritsLoose(x,I);var d=x.prototype;d.snapNewVertex=function(g,k){const B=k.editGeometryOperations.data.components[0],c=[],t=B.vertices.length;if("polygon"!==k.editGeometryOperations.data.type||2>t)return c;this._processCandidateProposal(B.vertices[0].pos,B.vertices[t-1].pos,g,k,c);return c};d.snapExistingVertex=function(g,k){const B=[],c=b.unwrap(k.vertexHandle),t=c.component;if(2>t.edges.length||"polyline"===
k.editGeometryOperations.data.type&&(0===c.index||c.index===t.vertices.length-1))return B;this._processCandidateProposal(c.leftEdge.leftVertex.pos,c.rightEdge.rightVertex.pos,g,k,B);return B};d._processCandidateProposal=function(g,k,B,c,t){if(this.exceedsShortLineThreshold(g,k,c)){var n=E.lerp(h.create(),g,k,.5),u=.5*E.distance(g,k);u=K.projectPointToCircle(h.create(),B,n,u);n=c.coordinateHelper;u=n.fromXYZ(u,n.getZ(B,0));B=w.anyMapPointToScreenPoint(B,n,c.elevationInfo,this.view);w.squareDistance(B,
w.anyMapPointToScreenPoint(u,n,c.elevationInfo,this.view))<this.squaredProximityTreshold(c.pointer)&&t.push(new D.RightAngleTriangleSnappingCandidate({coordinateHelper:n,targetPoint:u,point1:g,point2:k}))}};return x}(r.SnappingAlgorithm);e.RightAngleTriangleSnapper=r;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/RightAngleTriangleSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../SnappingConstraint ../snappingUtils ./SnappingCandidate ../hints/LineSnappingHint ../hints/RightAngleSnappingHint".split(" "),
function(e,q,b,E,h,r,w,D,K){w=function(x){function d({coordinateHelper:g,targetPoint:k,point1:B,point2:c}){g=x.call(this,g,k,new h.PlanarCircleConstraint(g,b.lerp(I,B,c,.5),.5*b.distance(B,c)))||this;g.p1=B;g.p2=c;return g}q._inheritsLoose(d,x);q._createClass(d,[{key:"hints",get:function(){return[new D.LineSnappingHint(r.LineSegmentHintType.REFERENCE,this.targetPoint,this.p1),new D.LineSnappingHint(r.LineSegmentHintType.REFERENCE,this.targetPoint,this.p2),new K.RightAngleSnappingHint(this.p1,this.targetPoint,
this.p2)]}}]);return d}(w.SnappingCandidate);const I=E.create();e.RightAngleTriangleSnappingCandidate=w;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/IntersectionSnappingCandidate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../SnappingConstraint","./SnappingCandidate","../hints/IntersectionSnappingHint"],function(e,q,b,E,h){E=function(r){function w(D,K,I,x){D=r.call(this,D,K,new b.IntersectionConstraint(D,K,I.constraint,
x.constraint))||this;D.first=I;D.second=x;return D}q._inheritsLoose(w,r);q._createClass(w,[{key:"hints",get:function(){this.first.targetPoint=this.targetPoint;this.second.targetPoint=this.targetPoint;return[...this.first.hints,...this.second.hints,new h.IntersectionSnappingHint(this.targetPoint)]}}]);return w}(E.SnappingCandidate);e.IntersectionSnappingCandidate=E;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/IntersectionSnappingHint":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../snappingUtils","./SnappingHint"],function(e,q,b,E){E=function(h){function r(w){var D=h.call(this)||this;D.intersectionPoint=w;return D}q._inheritsLoose(r,h);r.prototype.equals=function(w){return w instanceof r?b.objectEqual(this.intersectionPoint,w.intersectionPoint):!1};return r}(E.SnappingHint);e.IntersectionSnappingHint=E;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/Sketch/support/OperationHandle":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/compilerUtils ../../../core/Evented ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(e,q,b,E,h,r,w,D,K,I){e.OperationHandle=function(x){function d(k){k=x.call(this,k)||this;k.cancelled=!1;k.history={undo:[],redo:[]};k.type=null;return k}q._inheritsLoose(d,x);var g=d.prototype;g.addToHistory=function(k){this.history.redo=[];this.history.undo.push(k)};g.resetHistory=function(){this.history.redo=[];this.history.undo=[]};g.canUndo=function(){return 0<this.history.undo.length};g.canRedo=function(){return 0<this.history.redo.length};g.complete=function(){this._reset();this.onEnd();
this.emit("complete")};g.cancel=function(){this.cancelled=!0;this.complete()};g._reset=function(){this.activeComponent.reset()};g.refreshComponent=function(){const k=this.activeComponent;k&&("box"!==k.type&&"reshape"!==k.type&&"graphic-mover"!==k.type||k.refresh())};q._createClass(d,[{key:"tool",get:function(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case "graphic-mover":case "move-3d":return"move";case "box":case "transform-3d":return"transform";case "reshape":case "reshape-3d":return"reshape";
case "draw-2d":case "draw-3d":return this.activeComponent.geometryType;default:E.neverReached(this.activeComponent)}return null}},{key:"undo",set:function(k){this._set("undo",()=>{this.canUndo()&&k()})}},{key:"redo",set:function(k){this._set("redo",()=>{this.canRedo()&&k()})}}]);return d}(h.EventedAccessor);b.__decorate([r.property()],e.OperationHandle.prototype,"activeComponent",void 0);b.__decorate([r.property()],e.OperationHandle.prototype,"cancelled",void 0);b.__decorate([r.property()],e.OperationHandle.prototype,
"history",void 0);b.__decorate([r.property()],e.OperationHandle.prototype,"tool",null);b.__decorate([r.property()],e.OperationHandle.prototype,"type",void 0);b.__decorate([r.property()],e.OperationHandle.prototype,"canUndo",null);b.__decorate([r.property()],e.OperationHandle.prototype,"canRedo",null);b.__decorate([r.property()],e.OperationHandle.prototype,"onEnd",void 0);b.__decorate([r.property()],e.OperationHandle.prototype,"undo",null);b.__decorate([r.property()],e.OperationHandle.prototype,"redo",
null);b.__decorate([r.property()],e.OperationHandle.prototype,"toggleTool",void 0);b.__decorate([r.property()],e.OperationHandle.prototype,"addToSelection",void 0);b.__decorate([r.property()],e.OperationHandle.prototype,"removeFromSelection",void 0);e.OperationHandle=b.__decorate([I.subclass("esri.widgets.Sketch.support.OperationHandle")],e.OperationHandle);e.CreateOperationHandle=function(x){function d(){return x.apply(this,arguments)||this}q._inheritsLoose(d,x);return d}(e.OperationHandle);b.__decorate([r.property()],
e.CreateOperationHandle.prototype,"activeComponent",void 0);e.CreateOperationHandle=b.__decorate([I.subclass("esri.widgets.Sketch.support.CreateOperationHandle")],e.CreateOperationHandle);e.UpdateOperationHandle=function(x){function d(g){return x.call(this,g)||this}q._inheritsLoose(d,x);return d}(e.OperationHandle);b.__decorate([r.property()],e.UpdateOperationHandle.prototype,"activeComponent",void 0);e.UpdateOperationHandle=b.__decorate([I.subclass("esri.widgets.Sketch.support.UpdateOperationHandle")],
e.UpdateOperationHandle);Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/support/SelectionToolbar":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/handleUtils ../../core/maybe ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./widgetUtils ./decorators/messageBundle ../../core/Logger ./jsxFactory ./SelectionToolbar/SelectionToolbarViewModel".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g,k,B,c,t){const n={lassoTool:!0,rectangleTool:!0},u={createTool:"polygon",createOptions:{mode:"freehand"}},p={createTool:"rectangle"};w=function(y){function O(f,F){var S=y.call(this,f,F)||this;S._viewModelHandlesGroup=null;S.activeToolInfo=null;S.label=void 0;S.layers=[];S.messages=null;S.toolConfigs=[];S.view=null;S.viewModel=new t;S.visibleElements={...n};S._viewModelHandlesGroup=E.handlesGroup([S.viewModel.on("selection-change",M=>S.emit("selection-change",M)),
S.viewModel.on("complete",M=>{S._set("activeToolInfo",null);S.emit("complete",M)})]);return S}q._inheritsLoose(O,y);var z=O.prototype;z.destroy=function(){this._viewModelHandlesGroup=h.removeMaybe(this._viewModelHandlesGroup)};z.loadDependencies=function(){return Promise.all([new Promise((f,F)=>e(["../../chunks/calcite-action"],f,F)),new Promise((f,F)=>e(["../../chunks/calcite-icon"],f,F))])};z.castVisibleElements=function(f){return{...n,...f}};z.activate=function(f){this.cancel();switch(f){case "lasso":this._activateTool("lasso");
case "rectangle":this._activateTool("rectangle");default:this._activateTool(f)}};z.cancel=function(){this.viewModel.cancel();this._set("activeToolInfo",null)};z.render=function(){return c.tsx("div",{"aria-label":this.label,class:this.classes("esri-selection-toolbar","esri-widget")},c.tsx("div",{class:"esri-selection-toolbar__container"},this.renderDefaultTools(),this.renderCustomTools()))};z.renderDefaultTools=function(){var f;if("2d"===(null==(f=this.view)?void 0:f.type))return[this.renderRectangleTool(),
this.renderLassoTool()]};z.renderCustomTools=function(){if(this.toolConfigs&&this.toolConfigs.length)return this.toolConfigs.map(f=>{var F;return c.tsx("calcite-action",{active:(null==(F=this.activeToolInfo)?void 0:F.toolName)===f.toolName,bind:this,class:"esri-selection-toolbar__tool-button",label:f.toolName,onclick:()=>this._onCustomToolClick(f.toolName),scale:"s",text:f.toolName,title:f.toolName},c.tsx("calcite-icon",{scale:"s",icon:f.icon||"selection"}))})};z.renderLassoTool=function(){const {activeToolInfo:f,
messages:F,visibleElements:S}=this;if(S.lassoTool)return c.tsx("calcite-action",{active:"lasso"===(null==f?void 0:f.toolName),bind:this,label:F.selectByLasso,onclick:this._onLassoToolClick,scale:"s",text:F.selectByLasso,title:F.selectByLasso},c.tsx("calcite-icon",{scale:"s",icon:"lasso"}))};z.renderRectangleTool=function(){const {activeToolInfo:f,messages:F,visibleElements:S}=this;if(S.rectangleTool)return c.tsx("calcite-action",{active:"rectangle"===(null==f?void 0:f.toolName),bind:this,label:F.selectByRectangle,
onclick:this._onRectangleToolClick,scale:"s",text:F.selectByRectangle,title:F.selectByRectangle},c.tsx("calcite-icon",{scale:"s",icon:"cursor-marquee"}))};z._onCustomToolClick=function(f){this._toggleTool(f)};z._onLassoToolClick=function(){this._toggleTool("lasso")};z._onRectangleToolClick=function(){this._toggleTool("rectangle")};z._activateTool=function(f){var F=this._getToolOptions(f);F&&(F=this.viewModel.activate(F),this._set("activeToolInfo",{toolName:f,operation:F}))};z._toggleTool=function(f){if(this.activeToolInfo){const F=
this.activeToolInfo.toolName;this.cancel();if(F===f)return}this._activateTool(f)};z._getToolOptions=function(f){if("lasso"===f)return u;if("rectangle"===f)return p;const F=this.toolConfigs.find(H=>H.toolName===f);if(F){var {createTool:S,createOptions:M,selectionOptions:P}=F;return{createTool:S,createOptions:M,selectionOptions:P}}};return O}(d);b.__decorate([I.property({readOnly:!0})],w.prototype,"activeToolInfo",void 0);b.__decorate([I.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],
w.prototype,"label",void 0);b.__decorate([r.aliasOf("viewModel.layers")],w.prototype,"layers",void 0);b.__decorate([I.property(),k.messageBundle("esri/widgets/support/SelectionToolbar/t9n/SelectionToolbar")],w.prototype,"messages",void 0);b.__decorate([I.property()],w.prototype,"toolConfigs",void 0);b.__decorate([r.aliasOf("viewModel.view")],w.prototype,"view",void 0);b.__decorate([I.property()],w.prototype,"viewModel",void 0);b.__decorate([I.property()],w.prototype,"visibleElements",void 0);b.__decorate([K.cast("visibleElements")],
w.prototype,"castVisibleElements",null);return w=b.__decorate([x.subclass("esri.widgets.support.SelectionToolbar")],w)})},"esri/widgets/support/SelectionToolbar/SelectionToolbarViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Evented ../../../core/handleUtils ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../Selector2D".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x){b=function(d){function g(B){B=d.call(this,B)||this;B._operationHandlesGroup=null;B.activeOperation=null;B.layers=null;B.selector=new x;return B}e._inheritsLoose(g,d);var k=g.prototype;k.destroy=function(){this._operationHandlesGroup=h.removeMaybe(this._operationHandlesGroup);this.selector.destroy()};k.cancel=function(){"active"===this.state&&(this.activeOperation.cancel(),this.activeOperation=null);this.selector.candidates=null};k.activate=function(B){const {state:c}=
this;if("disabled"!==c)return"active"===c&&this.cancel(),this.selector.candidates=this._getCandidates(),B=this.selector.draw(B),this._operationHandlesGroup=E.handlesGroup([B.once("complete",t=>this._onOperationComplete(t)),B.on("selection-change",t=>this._onOperationSelectionChange(t))]),this.activeOperation=B};k._getCandidates=function(){let B=[];this.layers.forEach(c=>{B=B.concat(...c.graphics.toArray())});return B};k._onOperationSelectionChange=function(B){this.emit("selection-change",B)};k._onOperationComplete=
function(B){this._operationHandlesGroup=h.removeMaybe(this._operationHandlesGroup);this.activeOperation=null;this.emit("complete",B)};e._createClass(g,[{key:"state",get:function(){var B,c;return this.activeOperation?"active":null!=(B=this.view)&&B.ready&&null!=(c=this.layers)&&c.length?"ready":"disabled"}},{key:"view",set:function(B){this.selector.view=B;this._set("view",B)}}]);return g}(b.EventedAccessor);q.__decorate([r.property()],b.prototype,"activeOperation",void 0);q.__decorate([r.property()],
b.prototype,"layers",void 0);q.__decorate([r.property({readOnly:!0})],b.prototype,"selector",void 0);q.__decorate([r.property({readOnly:!0})],b.prototype,"state",null);q.__decorate([r.property()],b.prototype,"view",null);return b=q.__decorate([I.subclass("esri.widgets.support.SelectionToolbar.SelectionToolbarViewModel")],b)})},"esri/widgets/support/Selector2D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/HandleOwner ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./Selector2D/SelectionOperation2D ./Selector2D/selectorUtils".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d){b=function(g){function k(c){c=g.call(this,c)||this;c._defaultSelectionOptions={intersects:!0,overlaps:!0,contains:!0};c.candidates=null;c.options=null;c.view=null;return c}e._inheritsLoose(k,g);var B=k.prototype;B.draw=function(c){const {_defaultSelectionOptions:t,candidates:n,options:u,view:p}=this;return new x({candidates:n,options:{...c,selectionOptions:{...t,...u,...null==c?void 0:c.selectionOptions}},view:p})};B.selectionFrom=function(){var c=e._asyncToGenerator(function*(t,
n){const {_defaultSelectionOptions:u,candidates:p,options:y,view:O}=this,z=new E;yield d.updateSelection({selector:t,candidates:p,currentSelection:z,options:{...u,...y,...n},view:O});return z.toArray()});return function(t,n){return c.apply(this,arguments)}}();return k}(h.HandleOwnerMixin(b));q.__decorate([r.property()],b.prototype,"candidates",void 0);q.__decorate([r.property()],b.prototype,"options",void 0);q.__decorate([r.property({value:null})],b.prototype,"view",void 0);return b=q.__decorate([I.subclass("esri.widgets.support.Selector2D")],
b)})},"esri/widgets/support/Selector2D/SelectionOperation2D":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../symbols ../../../core/Collection ../../../core/Evented ../../../core/Handles ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../layers/GraphicsLayer ../../Sketch/SketchViewModel ./selectorUtils ../../../symbols/SimpleFillSymbol ../../../symbols/SimpleLineSymbol ../../../symbols/SimpleMarkerSymbol".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g,k,B,c,t){b=function(n){function u({candidates:y,options:O,view:z}){var f=n.call(this)||this;f._activeOptions=null;f._dashedFillSymbol=new B({color:[0,0,0,0],outline:{style:"dash",color:[12,207,255],width:2}});f._dashedLineSymbol=new c({style:"dash",color:[12,207,255],width:2});f._defaultOptions={createTool:"rectangle",createOptions:null,selectionOptions:{overlaps:!0,intersects:!0,contains:!1}};f._completed=!1;f._handles=new r;f._sketchViewModel=new g;f._sketchGraphicsLayer=
new d({listMode:"hide",internal:!0});f._transparentPointSymbol=new t({color:[0,0,0,0],outline:{style:"none",width:0}});f.candidates=null;f.geometry=null;f.options=null;f.selection=new E;f.view=null;f.candidates=y;f.options=O;f.view=z;const {_dashedFillSymbol:F,_dashedLineSymbol:S,_sketchViewModel:M,_sketchGraphicsLayer:P,_transparentPointSymbol:H}=e._assertThisInitialized(f);M.set({layer:P,view:f.view,activePointSymbol:H,activeLineSymbol:S,activeVertexSymbol:H,activeFillSymbol:F,pointSymbol:H,polygonSymbol:F,
polylineSymbol:S,vertexSymbol:H});f._handles.add([M.on("create",L=>f._onSketchEvent(L)),M.on(["undo","redo"],L=>f._onSketchEvent(L))]);return f}e._inheritsLoose(u,n);var p=u.prototype;p.initialize=function(){this._load()};p.destroy=function(){this._handles.destroy();this._handles=null};p.cancel=function(){this._sketchViewModel.cancel()};p._load=function(){var y=e._asyncToGenerator(function*(){yield this.view.whenReady();const {options:O}=this,{createTool:z,createOptions:f}=this._activeOptions={...this._defaultOptions,
...O};this._sketchViewModel.create(z,f)});return function(){return y.apply(this,arguments)}}();p._onSketchEvent=function(y){const O="create"===y.type?y.graphic:y.graphics[0];this._processSelectionGeometry((null==O?void 0:O.geometry)||null,"create"===y.type&&"complete"===y.state,"create"===y.type&&"cancel"===y.state)};p._processSelectionGeometry=function(y,O,z){this._set("geometry",y);if(O||z)this._completed=!0;if(z)this._onComplete([],!0);else{var {_activeOptions:f,candidates:F,selection:S,view:M}=
this;k.updateSelection({selector:y,candidates:F,currentSelection:S,options:f.selectionOptions,view:M}).then(({added:P,removed:H})=>{O?this._onComplete(this.selection.toArray(),!1):(P.length||H.length)&&this.emit("selection-change",{added:P,removed:H,type:"selection-change"})})}};p._onComplete=function(y,O){this._handles.removeAll();this.notifyChange("state");this.emit("complete",{aborted:O,selection:y,type:"complete"})};e._createClass(u,[{key:"state",get:function(){const {_completed:y,_sketchViewModel:{state:O}}=
this;return y?"complete":"active"===O?"active":"disabled"}}]);return u}(h.EventedAccessor);q.__decorate([w.property()],b.prototype,"_completed",void 0);q.__decorate([w.property()],b.prototype,"candidates",void 0);q.__decorate([w.property({readOnly:!0})],b.prototype,"geometry",void 0);q.__decorate([w.property()],b.prototype,"options",void 0);q.__decorate([w.property({readOnly:!0})],b.prototype,"selection",void 0);q.__decorate([w.property({readOnly:!0})],b.prototype,"state",null);q.__decorate([w.property({value:null})],
b.prototype,"view",void 0);return b=q.__decorate([x.subclass("esri.widgets.support.Selector2D.SelectionOperation2D")],b)})},"esri/widgets/support/Selector2D/selectorUtils":function(){define(["require","exports","../../../chunks/_rollupPluginBabelHelpers"],function(e,q,b){function E(){return h.apply(this,arguments)}function h(){h=b._asyncToGenerator(function*(){return new Promise((K,I)=>e(["../../../geometry/geometryEngineJSON"],K,I))});return h.apply(this,arguments)}function r(){return w.apply(this,
arguments)}function w(){w=b._asyncToGenerator(function*(){return E().then(({contains:K,intersects:I,overlaps:x,simplify:d})=>({contains:K,intersects:I,overlaps:x,simplify:d}))});return w.apply(this,arguments)}function D(){D=b._asyncToGenerator(function*(K){const {selector:I,candidates:x,currentSelection:d,options:g,view:k}=K;if(!(x&&x.length&&d&&k))return{added:[],removed:[]};const {overlaps:B,intersects:c,contains:t}=g,{spatialReference:n}=k;if(!I)return{added:[],removed:d.removeAll()};const u=yield r(),
p=[],y=[];x.forEach(O=>{var z=O.geometry;const f=B&&!!u.overlaps(n,I,z),F=c&&!!u.intersects(n,I,z);z=t&&!!u.contains(n,I,z);const S=d.includes(O);f||F||z?!S&&p.push(O):S&&y.push(O)});d.removeMany(y);d.addMany(p);return{added:p,removed:y}});return D.apply(this,arguments)}q.getGeometryEngineOperations=r;q.importGeometryEngine=E;q.updateSelection=function(K){return D.apply(this,arguments)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/widgets/support/SnappingControls":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../Widget ./widgetUtils ./decorators/messageBundle ../../core/Logger ./jsxFactory ./SnappingControls/SnappingControlsViewModel".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g,k,B,c){const t={header:!0,enabledToggle:!0,selfEnabledToggle:!0,featureEnabledToggle:!0,layerList:!0};r=function(n){function u(y,O){O=n.call(this,(()=>{const {view:z,viewModel:f,snappingOptions:F,...S}=y;return S})(),O)||this;O.label=void 0;O.messages=null;O.messagesCommon=null;O.snappingOptions=null;O.view=null;O.visibleElements={...t};O._defaultViewModel=null;null!=y&&y.viewModel?O.viewModel=y.viewModel:(O._defaultViewModel=new c({snappingOptions:y.snappingOptions,
view:y.view}),O.viewModel=O._defaultViewModel);return O}q._inheritsLoose(u,n);var p=u.prototype;p.destroy=function(){this._defaultViewModel=E.destroyMaybe(this._defaultViewModel)};p.loadDependencies=function(){return Promise.all([new Promise((y,O)=>e(["../../chunks/calcite-action"],y,O)),new Promise((y,O)=>e(["../../chunks/calcite-block"],y,O)),new Promise((y,O)=>e(["../../chunks/calcite-icon"],y,O)),new Promise((y,O)=>e(["../../chunks/calcite-label"],y,O)),new Promise((y,O)=>e(["../../chunks/calcite-panel"],
y,O)),new Promise((y,O)=>e(["../../chunks/calcite-pick-list"],y,O)),new Promise((y,O)=>e(["../../chunks/calcite-pick-list-item"],y,O)),new Promise((y,O)=>e(["../../chunks/calcite-switch"],y,O))])};p.castVisibleElements=function(y){return{...t,...y}};p.render=function(){const {label:y,visibleElements:{header:O}}=this;return B.tsx("div",{"aria-label":y,class:this.classes("esri-snapping-controls","esri-widget")},B.tsx("div",{class:"esri-snapping-controls__container"},O?this.renderHeaderView():this.renderContent()))};
p.renderHeaderView=function(){return B.tsx("calcite-panel",{heading:this.label,class:"esri-snapping-controls__panel"},this.renderContent())};p.renderContent=function(){return[this.renderToggles(),this.renderLayerList()]};p.renderToggles=function(){return B.tsx("calcite-block",{class:"esri-snapping-controls__toggle-block",heading:"",open:!0},this.renderEnabledToggle(),B.tsx("div",{class:"esri-snapping-controls__nested-container"},this.renderSelfEnabledToggle(),this.renderFeatureEnabledToggle()))};
p.renderEnabledToggle=function(){if(this.visibleElements.enabledToggle){var {messages:{enableSnapping:y},viewModel:{snappingOptions:{enabled:O,enabledToggled:z}}}=this;return B.tsx("calcite-label",{layout:"inline-space-between"},y,B.tsx("calcite-switch",{checked:O,disabled:z,bind:this,onCalciteSwitchChange:this._enableSnappingSwitchChange}))}};p.renderSelfEnabledToggle=function(){if(this.visibleElements.selfEnabledToggle){var {messages:{geometryGuides:y},viewModel:{snappingOptions:{enabled:O,selfEnabled:z,
enabledToggled:f}}}=this;return B.tsx("calcite-label",{layout:"inline-space-between"},y,B.tsx("calcite-switch",{checked:z,disabled:f||!O,bind:this,onCalciteSwitchChange:this._selfEnabledSwitchChange}))}};p.renderFeatureEnabledToggle=function(){if(this.visibleElements.featureEnabledToggle){var {messages:{featureToFeature:y},viewModel:{snappingOptions:{enabled:O,featureEnabled:z,enabledToggled:f}}}=this;return B.tsx("calcite-label",{layout:"inline-space-between"},y,B.tsx("calcite-switch",{checked:z,
disabled:f||!O,bind:this,onCalciteSwitchChange:this._featureEnabledSwitchChange}))}};p.renderLayerList=function(){if(this.visibleElements.layerList){var {messages:{snappingLayers:y,searchLayers:O}}=this;return B.tsx("calcite-block",{heading:y,class:"esri-snapping-controls__layer-list-block",open:!0,collapsible:!0},B.tsx("calcite-pick-list",{class:"esri-snapping-controls__layer-list",multiple:!0,bind:this,onCalciteListChange:this._layerListChange,filterEnabled:10<=this.viewModel.layerListViewModel.operationalItems.length,
"filter-placeholder":O},this.renderLayerListItemCollection(this.viewModel.layerListViewModel.operationalItems)))}};p.renderLayerListItemCollection=function(y){return y.map(O=>0<O.children.length?this.renderLayerListItemGroup(O):this.renderLayerListItem(O)).toArray()};p.renderLayerListItem=function(y){var O,{messages:{untitledLayer:z}}=this;z=y.title||z;const f=0<(null==(O=y.children)?void 0:O.length);return B.tsx("calcite-pick-list-item",{slot:f?"parent-item":null,key:`${this.id}-pick-list-item-${y.uid}`,
label:z,value:y.layer.id,selected:y.enabled})};p.renderLayerListItemGroup=function(y){return B.tsx("calcite-pick-list-group",{"group-title":y.title||this.messages.untitledLayer,key:y.uid},[...this.renderLayerListItemCollection(y.children)])};p._enableSnappingSwitchChange=function(y){this.snappingOptions.enabled=y.target.checked};p._featureEnabledSwitchChange=function(y){this.snappingOptions.featureEnabled=y.target.checked};p._selfEnabledSwitchChange=function(y){this.snappingOptions.selfEnabled=y.target.checked};
p._layerListChange=function(){var y=q._asyncToGenerator(function*(O){O=yield O.target.getSelectedItems();this.viewModel.updateEnabledFeatureSources([...O.keys()])});return function(O){return y.apply(this,arguments)}}();q._createClass(u,[{key:"viewModel",set:function(y){if(y!==this._get("viewModel")){if(E.isNone(this._defaultViewModel)||this._defaultViewModel!==y)this._defaultViewModel=E.destroyMaybe(this._defaultViewModel);this._set("viewModel",y)}}}]);return u}(x);b.__decorate([K.property({aliasOf:{source:"messages.widgetLabel",
overridable:!0}})],r.prototype,"label",void 0);b.__decorate([K.property(),g.messageBundle("esri/widgets/support/SnappingControls/t9n/SnappingControls")],r.prototype,"messages",void 0);b.__decorate([K.property(),g.messageBundle("esri/t9n/common")],r.prototype,"messagesCommon",void 0);b.__decorate([h.aliasOf("viewModel.snappingOptions")],r.prototype,"snappingOptions",void 0);b.__decorate([h.aliasOf("viewModel.view")],r.prototype,"view",void 0);b.__decorate([K.property()],r.prototype,"viewModel",null);
b.__decorate([K.property()],r.prototype,"visibleElements",void 0);b.__decorate([D.cast("visibleElements")],r.prototype,"castVisibleElements",null);return r=b.__decorate([I.subclass("esri.widgets.support.SnappingControls")],r)})},"esri/widgets/support/SnappingControls/SnappingControlsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/HandleOwner ../../../core/watchUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../LayerList/support/layerListUtils ./SnappingLayerListViewModel".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d){b=function(g){function k(c){c=g.call(this,c)||this;c.layerListViewModel=new d.SnappingLayerListViewModel;c.snappingOptions=null;c.view=null;return c}e._inheritsLoose(k,g);var B=k.prototype;B.initialize=function(){this.handles.add([h.init(this,"view",c=>{this.layerListViewModel.view=c}),h.init(this,"snappingOptions.featureSources",()=>{this.layerListViewModel.featureSnappingSources=this.snappingOptions.featureSources})])};B.updateEnabledFeatureSources=function(c){for(const t of this.snappingOptions.featureSources)x.canDisplayLayer(t.layer)&&
(t.enabled=c.includes(t.layer.id))};e._createClass(k,[{key:"state",get:function(){return this.get("snappingOptions")?"ready":"disabled"}}]);return k}(E.HandleOwnerMixin(b));q.__decorate([r.property({constructOnly:!0})],b.prototype,"layerListViewModel",void 0);q.__decorate([r.property({constructOnly:!0})],b.prototype,"snappingOptions",void 0);q.__decorate([r.property()],b.prototype,"state",null);q.__decorate([r.property({constructOnly:!0})],b.prototype,"view",void 0);return b=q.__decorate([I.subclass("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],
b)})},"esri/widgets/LayerList/support/layerListUtils":function(){define(["exports"],function(e){function q(K){if(K)return null!=K.listMode?K.listMode:void 0}function b(K){if(K)return null!=K.minScale?K.minScale:void 0}function E(K){if(K)return null!=K.maxScale?K.maxScale:void 0}function h(K){if(K){if(!("type"in K))return"sublayers";if(K.listMode!==D.hideChildren&&"wmts"!==K.type)switch(K.type){case "group":return"layers";case "analysis":return"analyses";default:return"sublayers"}}}function r(K,I){K&&
K.sort((x,d)=>{x=I.indexOf(x.uid);d=I.indexOf(d.uid);return x>d?-1:x<d?1:0})}function w(K){return!(null==K||!K.layer)}const D={hide:"hide",hideChildren:"hide-children"};e.canDisplayLayer=function(K){return q(K)!==D.hide};e.canSortSublayers=function(K){K=K&&(K.get("layer.layer")||K.layer);if(!K)return!1;K=K.get("capabilities.exportMap.supportsDynamicLayers");return"boolean"===typeof K?K:!0};e.findLayerListMode=q;e.findLayerMaxScale=E;e.findLayerMinScale=b;e.findLayerVisibilityMode=function(K){if(!K)return"inherited";
var I=K.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"===typeof I)return I?"independent":"inherited";I=K.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"===typeof I?I?"independent":"inherited":null!=K.visibilityMode?K.visibilityMode:"independent"};e.findSelectedItem=function(K,I){var x;const d=null==(x=K.layer)?void 0:x.uid;return d&&I.find(g=>{var k;return(null==(k=g.layer)?void 0:k.uid)===d})};e.getItemLayers=function(K){return(K=null==K?void 0:
K.layer)&&"group"===K.type?K.layers:null};e.getLegendLayerInfo=function(K){var I=w(K)?K:null;const x=null==K?void 0:K.parent;return(I="map-image"===(null==x?void 0:x.type)&&I.source)&&x?{layer:x,title:"",sublayerIds:[I.mapLayerId]}:{layer:K,title:""}};e.getNormalizedChildLayerProperty=h;e.isLayerOutsideScaleRange=function(K,I){if(!K||isNaN(I))return!1;var x=b(K);K=E(K);x=!isNaN(x)&&0<x&&I>x;I=!isNaN(K)&&0<K&&I<K;return x||I};e.isSublayer=w;e.sortChildLayersToIds=function(K,I){if(K=null==K?void 0:
K.layer){var x=h(K);x&&(K=K.get(x),r(K,I))}};e.sortLayersToIds=r;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/support/SnappingControls/SnappingLayerListViewModel":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../views/interactive/snapping/FeatureSnappingLayerSource ../../LayerList/LayerListViewModel ./snappingLayerListUtils ./SnappingListItem".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g){e.SnappingLayerListViewModel=function(B){function c(){var n=B.apply(this,arguments)||this;n.featureSnappingSources=new E;return n}q._inheritsLoose(c,B);var t=c.prototype;t._compileList=function(){var n=this.get("view.map.layers");n&&(n=n.filter(d.isValidSnappingLayer),this._watchLayersListMode(n),(n=this._getViewableLayers(n))&&n.length?(this._createNewItems(n),this._removeItems(n),this._sortItems(n),this._beforeCallListItemsCreated()):this._removeAllItems())};
t._createListItem=function(n){const {view:u}=this,p=k(this.featureSnappingSources,n);n=new g.SnappingListItem({layer:n,view:u,featureSource:p});for(const y of n.children)y.featureSource=k(this.featureSnappingSources,y.layer);this._watchItemProperties(n);return n};q._createClass(c,[{key:"operationalItemsFlat",get:function(){return this.operationalItems.flatten(n=>n.children)}}]);return c}(x);b.__decorate([h.property()],e.SnappingLayerListViewModel.prototype,"featureSnappingSources",void 0);b.__decorate([h.property()],
e.SnappingLayerListViewModel.prototype,"operationalItems",void 0);e.SnappingLayerListViewModel=b.__decorate([K.subclass("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],e.SnappingLayerListViewModel);const k=(B,c)=>{if(!d.isValidSnappingLayerSource(c))return null;let t=B.find(n=>n.layer===c);t||(t=new I({layer:c,enabled:!1}),B.add(t));return t};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/LayerList/LayerListViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/Evented ../../core/Handles ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ListItem ./support/layerListUtils".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g,k){const B=b.ofType(g);b=function(c){function t(u){var p=c.call(this,u)||this;p._handles=new h;p.listItemCreatedFunction=null;p.operationalItems=new B;p.view=null;p._callListItemsCreatedDebounced=r.debounce(e._asyncToGenerator(function*(){return p._callListItemsCreated()}),300);return p}e._inheritsLoose(t,c);var n=t.prototype;n.initialize=function(){this._handles.add(w.init(this,["view","view.ready"],()=>this._viewHandles()),"view")};n.destroy=function(){this._handles.destroy();
this.view=this._handles=null;this.operationalItems.removeAll()};n.triggerAction=function(u,p){u&&!u.disabled&&this.emit("trigger-action",{action:u,item:p})};n.moveListItem=function(u,p,y,O){var z,f;const F=null==u?void 0:u.layer;if(F){var S=null==(z=this.view)?void 0:null==(f=z.map)?void 0:f.layers;z=p?k.getItemLayers(p):S;S=y?k.getItemLayers(y):S;z&&S&&({operationalItems:f}=this,p=(null==p?void 0:p.children)||f,f=(null==y?void 0:y.children)||f,O=S.length-O,u.parent=y||null,p.includes(u)&&p.remove(u),
z.includes(F)&&z.remove(F),f.includes(u)||f.add(u,O),S.includes(F)||S.add(F,O))}};n._createLayerViewHandles=function(u){const {_handles:p}=this;p.remove("layer-views");this._compileList();u&&p.add(u.on("change",()=>this._compileList()),"layer-views")};n._createMapLayerHandles=function(u){const {_handles:p}=this;p.remove("map-layers");this._compileList();u&&p.add(u.on("change",()=>this._compileList()),"map-layers")};n._watchItemProperties=function(u){this._watchItemChildren(u,`${"children"}-${u.uid}`)};
n._watchItemChildren=function(u,p){this._handles.add([u.children.on("change",()=>{this._callListItemCreatedChildren(u.children)})],p);u.children.forEach(y=>this._watchItemChildren(y,p))};n._callListItemCreatedChildren=function(u){u.forEach(p=>this._callListItemCreated(p))};n._callListItemCreated=function(u){"function"===typeof this.listItemCreatedFunction&&this.listItemCreatedFunction.call(null,{item:u});this._callListItemCreatedChildren(u.children)};n._createListItem=function(u){const {view:p}=this;
u=new g({layer:u,view:p});this._watchItemProperties(u);return u};n._removeAllItems=function(){const {_handles:u,operationalItems:p}=this;p.forEach(y=>{u.remove(`${"children"}-${y.uid}`)});p.removeAll()};n._getViewableLayers=function(u){if(u)return u.filter(p=>"hide"!==k.findLayerListMode(p))};n._watchLayersListMode=function(u){const {_handles:p}=this;p.remove("layer-list-mode");u&&u.forEach(y=>{p.add(w.watch(y,"listMode",()=>this._compileList()),"layer-list-mode")})};n._compileList=function(){var u=
this.get("view.map.layers");this._watchLayersListMode(u);(u=this._getViewableLayers(u))&&u.length?(this._createNewItems(u),this._removeItems(u),this._sortItems(u),this._beforeCallListItemsCreated()):this._removeAllItems()};n._beforeCallListItemsCreated=function(){var u=e._asyncToGenerator(function*(){return this._callListItemsCreatedDebounced().catch(r.throwIfNotAbortError)});return function(){return u.apply(this,arguments)}}();n._callListItemsCreated=function(){var u=e._asyncToGenerator(function*(){var p;
yield null==(p=this.view)?void 0:p.when();this.operationalItems.forEach(y=>this._callListItemCreated(y))});return function(){return u.apply(this,arguments)}}();n._createNewItems=function(u){const {operationalItems:p}=this;u.forEach(y=>{p.find(O=>O.layer===y)||p.add(this._createListItem(y))})};n._removeItems=function(u){const {_handles:p,operationalItems:y}=this,O=[];y.forEach(z=>{z&&u&&u.find(f=>z.layer===f)||(p.remove(`${"children"}-${z.uid}`),O.push(z))});y.removeMany(O)};n._sortItems=function(u){const {operationalItems:p}=
this;p.sort((y,O)=>{y=u.indexOf(y.layer);O=u.indexOf(O.layer);return y>O?-1:y<O?1:0})};n._viewHandles=function(){const {_handles:u,view:p}=this;u.remove(["map-layers","layer-views","view-layers"]);this._compileList();p&&p.ready&&u.add([w.init(this,"view.map.allLayers",y=>this._createMapLayerHandles(y)),w.init(this,"view.allLayerViews",y=>this._createLayerViewHandles(y)),w.init(this,"listItemCreatedFunction",()=>this._compileList())],"view-layers")};e._createClass(t,[{key:"state",get:function(){const u=
this.get("view");return this.get("view.ready")?"ready":u?"loading":"disabled"}}]);return t}(E.EventedAccessor);q.__decorate([D.property()],b.prototype,"listItemCreatedFunction",void 0);q.__decorate([D.property({type:B})],b.prototype,"operationalItems",void 0);q.__decorate([D.property({readOnly:!0})],b.prototype,"state",null);q.__decorate([D.property()],b.prototype,"view",void 0);return b=q.__decorate([d.subclass("esri.widgets.LayerList.LayerListViewModel")],b)})},"esri/widgets/LayerList/ListItem":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/HandleOwner ../../core/Identifiable ../../core/watchUtils ../../core/accessorSupport/decorators/aliasOf ../../core/arrayUtils ../../core/has ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionSlider ../../support/actions/ActionToggle ./ListItemPanel ./support/layerListUtils".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g,k,B,c,t,n,u){var p;K=E.ofType({key:"type",defaultKeyValue:"button",base:k,typeMap:{button:B,toggle:t,slider:c}});const y=E.ofType(K);b=p=function(O){function z(F){F=O.call(this,F)||this;F.actionsSections=new y;F.actionsOpen=!1;F.children=new (E.ofType(p));F.childrenSortable=!0;F.error=null;F.layer=null;F.layerView=null;F.open=!1;F.panel=null;F.parent=null;F.sortable=!0;F.view=null;F.visible=null;return F}e._inheritsLoose(z,O);var f=z.prototype;f.initialize=function(){this.handles.add([w.init(this,
"layer",F=>this._watchLayerProperties(F)),w.init(this,"view",F=>this._updateChildren(F)),w.init(this,"panel",F=>this._setListItemOnPanel(F)),w.init(this,["layer","view"],()=>this._getLayerView())])};f.destroy=function(){this.view=null};f.castPanel=function(F){this.get("panel.open")&&!F.hasOwnProperty("open")&&(F.open=!0);return F?new n(F):null};f.clone=function(){return new p({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,children:this.children.clone(),layer:this.layer,
open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})};f._setListItemOnPanel=function(F){F&&(F.listItem=this)};f._updateChildren=function(F){const S=this.children;S&&S.forEach(M=>M.view=F)};f._addChildren=function(F){this.handles.remove("child-list-mode");this.children.removeAll();if(F){F.forEach(M=>{this.handles.add(w.watch(M,"listMode",()=>this._addChildren(F)),"child-list-mode")});var S=F.filter(M=>"hide"!==u.findLayerListMode(M));this.children.addMany(this._makeChildren(S))}};
f._watchSublayerChanges=function(F){F&&this.handles.add(F.on("change",()=>{this._addChildren(F)}),"layer")};f._initializeChildLayers=function(F){this._addChildren(F);this._watchSublayerChanges(F)};f._makeChildren=function(F){return F.map(S=>u.canDisplayLayer(S)?new p({layer:S,parent:this,view:this.view}):null).reverse()};f._watchLayerProperties=function(F){if(this.handles&&(this.handles.remove("layer"),this.handles.remove("child-list-mode"),F))if(this.handles.add(w.watch(F,"listMode",()=>this._watchLayerProperties(F)),
"layer"),"hide-children"===u.findLayerListMode(F))this.children.removeAll();else{var S=u.getNormalizedChildLayerProperty(F);S&&this.handles.add(w.init(F,S,()=>{F.hasOwnProperty(S)&&this._initializeChildLayers(F[S])}),"layer")}};f._getLayerView=function(){var F=e._asyncToGenerator(function*(){const {layer:S,view:M}=this;if(S&&M)try{const P=yield M.whenLayerView(S);P.layer===this.layer&&this._set("layerView",P)}catch{}});return function(){return F.apply(this,arguments)}}();f._isLayerUpdating=function(F){return F&&
"loading"===F.loadStatus};e._createClass(z,[{key:"incompatible",get:function(){const {layerView:F}=this;return F&&"spatialReferenceSupported"in F?!F.spatialReferenceSupported:!1}},{key:"title",get:function(){const F=this.get("layer.layer");return(!F||F&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""},set:function(F){void 0===F?this._clearOverride("title"):this._override("title",F)}},{key:"updating",get:function(){const F=this.layerView;return F?F.updating:
this._isLayerUpdating(this.layer)}},{key:"visibleAtCurrentScale",get:function(){return!u.isLayerOutsideScaleRange(this.layer,this.get("view.scale"))}},{key:"visibilityMode",get:function(){return u.findLayerVisibilityMode(this.layer)}}]);return z}(r.IdentifiableMixin(h.HandleOwnerMixin(b)));q.__decorate([d.property({type:y})],b.prototype,"actionsSections",void 0);q.__decorate([d.property()],b.prototype,"actionsOpen",void 0);q.__decorate([d.property({type:E})],b.prototype,"children",void 0);q.__decorate([d.property()],
b.prototype,"childrenSortable",void 0);q.__decorate([D.aliasOf("layer.loadError?")],b.prototype,"error",void 0);q.__decorate([d.property({readOnly:!0})],b.prototype,"incompatible",null);q.__decorate([d.property()],b.prototype,"layer",void 0);q.__decorate([d.property({readOnly:!0})],b.prototype,"layerView",void 0);q.__decorate([d.property()],b.prototype,"open",void 0);q.__decorate([d.property({type:n})],b.prototype,"panel",void 0);q.__decorate([x.cast("panel")],b.prototype,"castPanel",null);q.__decorate([d.property()],
b.prototype,"parent",void 0);q.__decorate([d.property()],b.prototype,"sortable",void 0);q.__decorate([d.property()],b.prototype,"title",null);q.__decorate([d.property({readOnly:!0})],b.prototype,"updating",null);q.__decorate([d.property({value:null})],b.prototype,"view",void 0);q.__decorate([D.aliasOf("layer.visible")],b.prototype,"visible",void 0);q.__decorate([d.property({readOnly:!0})],b.prototype,"visibleAtCurrentScale",null);q.__decorate([d.property({readOnly:!0})],b.prototype,"visibilityMode",
null);return b=p=q.__decorate([g.subclass("esri.widgets.LayerList.ListItem")],b)})},"esri/support/actions/ActionSlider":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ActionBase".split(" "),function(e,q,b,E,h,r,w,D){var K;E=K=function(I){function x(d){d=I.call(this,d)||this;d.displayValueEnabled=
!1;d.max=1;d.min=0;d.step=.1;d.type="slider";d.value=null;return d}e._inheritsLoose(x,I);x.prototype.clone=function(){return new K({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})};return x}(D);q.__decorate([b.property()],E.prototype,"displayValueEnabled",void 0);q.__decorate([b.property()],E.prototype,
"max",void 0);q.__decorate([b.property()],E.prototype,"min",void 0);q.__decorate([b.property()],E.prototype,"step",void 0);q.__decorate([b.property()],E.prototype,"value",void 0);return E=K=q.__decorate([w.subclass("esri.support.Action.ActionSlider")],E)})},"esri/widgets/LayerList/ListItemPanel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Handles ../../core/Identifiable ../../core/watchUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/has ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./support/layerListUtils ../support/widget ../support/jsxFactory".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d,g,k,B){h=function(c){function t(u,p){u=c.call(this,u,p)||this;u._legend=null;u._handles=new E;u.content=null;u.image=null;u.listItem=null;u.open=!1;u.visible=!0;return u}q._inheritsLoose(t,c);var n=t.prototype;n.initialize=function(){this.own([r.init(this,"content",u=>this._createLegend(u))])};n.destroy=function(){const {_legend:u}=this;u&&u.destroy();this._legend=null};n.render=function(){return B.tsx("div",{class:"esri-layer-list-panel"},this._renderContents())};
n._renderContent=function(u){const {_legend:p,listItem:y}=this;return u?"legend"===u?y&&y.view&&y.layer&&p?B.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--legend"),key:p},p.render()):null:"string"===typeof u?B.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--string"),key:u,innerHTML:u}):k.isWidget(u)?B.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--widget"),
key:u},u.render()):u instanceof HTMLElement?B.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--html-element"),key:u,bind:u,afterCreate:this._attachToNode}):null:null};n._renderContents=function(){const {content:u}=this;return Array.isArray(u)?u.map(p=>this._renderContent(p)):this._renderContent(u)};n._getLegendOptions=function(){const {listItem:u}=this;if(!u)return{};const {layer:p,view:y}=u;return p&&y?{view:y,layerInfos:[g.getLegendLayerInfo(p)]}:{}};
n._createLegend=function(u){this._hasLegend(u)&&!this._legend&&(new Promise((p,y)=>e(["../Legend"],O=>p(Object.freeze({__proto__:null,default:O})),y))).then(({default:p})=>{const {_handles:y}=this,O=new p(this._getLegendOptions());this._legend=O;this.notifyChange("className");this.notifyChange("title");p=r.init(this,["listItem.view","listItem.layer","listItem.layer.source","listItem.layer.parent"],()=>this._updateLegend(O));y.add(p,"legends");this.scheduleRender()})};n._hasLegend=function(u){return"legend"===
u?!0:Array.isArray(u)?u.some(p=>"legend"===p):!1};n._attachToNode=function(u){u.appendChild(this)};n._updateLegend=function(u){u.set(this._getLegendOptions());this.scheduleRender()};n._getWidget=function(u){return"legend"===u?this._legend:k.isWidget(u)?u:null};n._getFirstWidget=function(){const {content:u}=this;if(Array.isArray(u)){let p=null;u.some(y=>{(y=this._getWidget(y))&&(p=y);return!!y});return p}return this._getWidget(u)};q._createClass(t,[{key:"className",get:function(){const {image:u}=this,
p=this._getFirstWidget();return this._get("className")||!u&&p?p.iconClass:""},set:function(u){void 0===u?this._clearOverride("className"):this._override("className",u)}},{key:"title",get:function(){const u=this._getFirstWidget();return this._get("title")||u?u.label:""},set:function(u){void 0===u?this._clearOverride("title"):this._override("title",u)}}]);return t}(h.IdentifiableMixin(d));b.__decorate([w.property()],h.prototype,"className",null);b.__decorate([w.property()],h.prototype,"content",void 0);
b.__decorate([w.property()],h.prototype,"image",void 0);b.__decorate([w.property()],h.prototype,"listItem",void 0);b.__decorate([w.property()],h.prototype,"title",null);b.__decorate([w.property()],h.prototype,"open",void 0);b.__decorate([w.property()],h.prototype,"visible",void 0);return h=b.__decorate([x.subclass("esri.widgets.LayerList.ListItemPanel")],h)})},"esri/widgets/support/SnappingControls/snappingLayerListUtils":function(){define(["exports","../../../core/maybe","../../LayerList/support/layerListUtils"],
function(e,q,b){const E=w=>h(w)||r(w),h=w=>{if(!("type"in w))return!1;switch(w.type){case "feature":case "geojson":case "csv":case "graphics":case "wfs":return!0;default:return!1}},r=w=>{const D=b.getNormalizedChildLayerProperty(w);if(w.hasOwnProperty(D)&&q.isSome(w[D]))for(const K of w[D])if(E(K))return!0;return!1};e.isValidSnappingLayer=E;e.isValidSnappingLayerGroup=r;e.isValidSnappingLayerSource=h;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/support/SnappingControls/SnappingListItem":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../LayerList/ListItem ../../LayerList/support/layerListUtils ./snappingLayerListUtils".split(" "),
function(e,q,b,E,h,r,w,D,K,I,x,d){var g;e.SnappingListItem=g=function(k){function B(){var t=k.apply(this,arguments)||this;t.featureSource=null;return t}q._inheritsLoose(B,k);var c=B.prototype;c._initializeChildLayers=function(t){t=t.filter(d.isValidSnappingLayer);k.prototype._initializeChildLayers.call(this,t)};c._makeChildren=function(t){return t.map(n=>x.canDisplayLayer(n)?new g({layer:n,parent:this,view:this.view}):null).reverse()};q._createClass(B,[{key:"enabled",get:function(){return E.isSome(this.featureSource)?
this.featureSource.enabled:!1}}]);return B}(I);b.__decorate([h.property()],e.SnappingListItem.prototype,"children",void 0);b.__decorate([h.property()],e.SnappingListItem.prototype,"enabled",null);b.__decorate([h.property()],e.SnappingListItem.prototype,"featureSource",void 0);b.__decorate([h.property()],e.SnappingListItem.prototype,"parent",void 0);e.SnappingListItem=g=b.__decorate([K.subclass("esri.widgets.support.SnappingControls.SnappingListItem")],e.SnappingListItem);Object.defineProperty(e,"__esModule",
{value:!0})})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/Collection ../core/handleUtils ../core/maybe ../core/accessorSupport/decorators/aliasOf ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/subclass ../views/interactive/snapping/SnappingOptions ./Widget ./Sketch/SketchViewModel ./support/SelectionToolbar ./support/SnappingControls ./support/widgetUtils ./support/decorators/messageBundle ../core/Logger ./support/decorators/vmEvent ./support/jsxFactory ../intl/substitute".split(" "),function(e,
q,b,E,h,r,w,D,K,I,x,d,g,k,B,c,t,n,u,p,y,O,z,f){const F={createTools:{point:!0,polyline:!0,polygon:!0,rectangle:!0,circle:!0},selectionTools:{"rectangle-selection":!0,"lasso-selection":!0},undoRedoMenu:!0,settingsMenu:!0,snappingControls:!0,snappingControlsElements:{header:!1,enabledToggle:!0,selfEnabledToggle:!0,featureEnabledToggle:!0,layerList:!0}};E=function(S){function M(H,L){L=S.call(this,H,L)||this;L._activeCreateOptions=null;L._defaultViewModel=null;L._menuOpen=!1;L._selectionToolbar=null;
L._selectionHandlesGroup=null;L._snappingControls=null;L._viewModelHandlesGroup=null;L.availableCreateTools=["point","polyline","polygon","rectangle","circle"];L.createGraphic=null;L.creationMode="continuous";L.defaultCreateOptions=null;L.defaultUpdateOptions=null;L.iconClass="esri-icon-edit";L.label=void 0;L.layer=null;L.layout="horizontal";L.messages=null;L.snappingOptions=new k;L.updateGraphics=new h;L.view=null;L.visibleElements={...F};L._activateCreateTool=L._activateCreateTool.bind(q._assertThisInitialized(L));
null!=H&&H.viewModel||(L._defaultViewModel=new c,L.viewModel=L._defaultViewModel);return L}q._inheritsLoose(M,S);var P=M.prototype;P.initialize=function(){const {layer:H,view:L}=this,A=new t({view:"2d"===(null==L?void 0:L.type)?L:null,layers:H?[H]:null});this._selectionHandlesGroup=r.handlesGroup([A.watch("activeToolInfo",C=>{C&&this.viewModel.cancel()}),A.on("complete",C=>this._onSelectionOperationComplete(C))]);this._selectionToolbar=A;this._setUpSnappingControls()};P.loadDependencies=function(){return Promise.all([new Promise((H,
L)=>e(["../chunks/calcite-action"],H,L)),new Promise((H,L)=>e(["../chunks/calcite-icon"],H,L))])};P.destroy=function(){this._selectionToolbar.destroy();this._cleanupViewModel();this._selectionHandlesGroup=w.removeMaybe(this._selectionHandlesGroup);this._snappingControls=w.destroyMaybe(this._snappingControls)};P.castVisibleElements=function(H){H={...F,...H,createTools:{...F.createTools,...null==H?void 0:H.createTools},selectionTools:{...F.selectionTools,...null==H?void 0:H.selectionTools},snappingControlsElements:{...F.snappingControlsElements,
...null==H?void 0:H.snappingControlsElements}};w.isSome(this._snappingControls)&&(this._snappingControls.visibleElements=H.snappingControlsElements);return H};P.create=function(H,L){this._activeCreateOptions=L||null;this.viewModel.create(H,L)};P.update=function(H,L){return this.viewModel.update(H,L)};P.complete=function(){};P.cancel=function(){this._selectionToolbar.cancel();this.viewModel.cancel()};P.undo=function(){var H;this.viewModel.undo();null==(H=this.view)?void 0:H.focus()};P.redo=function(){var H;
this.viewModel.redo();null==(H=this.view)?void 0:H.focus()};P.delete=function(){};P.render=function(){const {label:H,layout:L,viewModel:{state:A}}=this;return z.tsx("div",{"aria-label":H,class:this.classes("esri-sketch","esri-widget",{["esri-disabled"]:"disabled"===A,["esri-sketch--vertical"]:"vertical"===L})},z.tsx("div",{role:"toolbar",class:"esri-sketch__panel"},this.renderTopPanelContents()),z.tsx("div",{class:this.classes("esri-sketch__panel","esri-sketch__info-panel")},this.renderInfoPanelContents()))};
P.renderTopPanelContents=function(){const H=this.classes("esri-sketch__section","esri-sketch__tool-section"),{availableCreateTools:L,visibleElements:A}=this;return[z.tsx("div",{role:"menu",key:"selection-button-container",class:H},this.renderDefaultSelectionButton(),this.renderSelectionToolbar()),L&&L.length?z.tsx("div",{role:"menu",class:H},this.renderDrawButtons()):null,A.undoRedoMenu?z.tsx("div",{role:"menu",key:"undo-redo-menu-button-container",class:H},this.renderUndoRedoMenuButtons()):null,
A.settingsMenu?z.tsx("div",{key:"settings-menu-button-container",class:"esri-sketch__section"},this.renderSettingsMenuButton()):null]};P.renderInfoPanelContents=function(){if(this._menuOpen)return this.renderSettingsMenu();if(this.updateGraphics.length)return[z.tsx("div",{class:this.classes("esri-sketch__section","esri-sketch__info-section","esri-sketch__info-count-section"),key:"feature-count-container"},this.renderFeatureCount()),z.tsx("div",{class:this.classes("esri-sketch__section","esri-sketch__info-section"),
key:"delete-button-container"},this.renderDeleteButton())]};P.renderSettingsMenu=function(){const {settings:H}=this.messages;return[z.tsx("div",{role:"menu",class:"esri-sketch__menu-container",key:"settings-menu-container"},z.tsx("header",{class:"esri-sketch__menu-header",key:"settings-menu-header"},z.tsx("span",{class:"esri-sketch__menu-title"},H)),this.renderSnappingControls())]};P.renderSnappingControls=function(){const {snappingControls:H}=this.visibleElements;if(w.isSome(this._snappingControls)&&
H)return this._snappingControls.render()};P.renderFeatureCount=function(){const {layout:H,messages:L,updateGraphics:{length:A}}=this,C=f.substitute(1===A?L.featureCount:L.featuresCount,{count:A});return z.tsx("div",{class:"esri-sketch__feature-count-badge","aria-label":C},z.tsx("span",{class:"esri-sketch__feature-count-number"},"vertical"===H?A:C))};P.renderDeleteButton=function(){const H=this.messages.deleteFeature;return z.tsx("calcite-action",{bind:this,label:H,onclick:this.delete,scale:"s",text:H,
title:H},z.tsx("calcite-icon",{scale:"s",icon:"trash"}))};P.renderDefaultSelectionButton=function(){if(this.viewModel.updateOnGraphicClick){var H=this.messages.selectFeature;return z.tsx("calcite-action",{active:"ready"===this.state,bind:this,label:H,onclick:this._activateDefaultSelectTool,scale:"s",text:H,title:H},z.tsx("calcite-icon",{scale:"s",icon:"cursor"}))}};P.renderSelectionToolbar=function(){var H;if("2d"===(null==(H=this.view)?void 0:H.type))return H=this.visibleElements.selectionTools,
this._selectionToolbar.visibleElements={lassoTool:!!H["lasso-selection"],rectangleTool:!!H["rectangle-selection"]},this._selectionToolbar.render()};P.renderDrawButtons=function(){const H=this.visibleElements.createTools;return this.availableCreateTools.map(L=>{if("point"===L&&H.point)return this.renderPointButton();if("polyline"===L&&H.polyline)return this.renderPolylineButton();if("polygon"===L&&H.polygon)return this.renderPolygonButton();if("rectangle"===L&&H.rectangle)return this.renderRectangleButton();
if("circle"===L&&H.circle)return this.renderCircleButton()})};P.renderPointButton=function(){const H=this.messages.drawPoint;return z.tsx("calcite-action",{active:"point"===this.activeTool,bind:this,label:H,onclick:()=>this._activateCreateTool("point"),scale:"s",text:H,title:H},z.tsx("calcite-icon",{scale:"s",icon:"pin"}))};P.renderPolygonButton=function(){const H=this.messages.drawPolygon;return z.tsx("calcite-action",{active:"polygon"===this.activeTool,bind:this,label:H,onclick:()=>this._activateCreateTool("polygon"),
scale:"s",text:H,title:H},z.tsx("calcite-icon",{scale:"s",icon:"polygon"}))};P.renderPolylineButton=function(){const H=this.messages.drawPolyline;return z.tsx("calcite-action",{active:"polyline"===this.activeTool,bind:this,label:H,onclick:()=>this._activateCreateTool("polyline"),scale:"s",text:H,title:H},z.tsx("calcite-icon",{scale:"s",icon:"line"}))};P.renderCircleButton=function(){const H=this.messages.drawCircle;return z.tsx("calcite-action",{active:"circle"===this.activeTool,bind:this,label:H,
onclick:()=>this._activateCreateTool("circle"),scale:"s",text:H,title:H},z.tsx("calcite-icon",{scale:"s",icon:"circle"}))};P.renderRectangleButton=function(){const H=this.messages.drawRectangle;return z.tsx("calcite-action",{active:"rectangle"===this.activeTool,bind:this,label:H,onclick:()=>this._activateCreateTool("rectangle"),scale:"s",text:H,title:H},z.tsx("calcite-icon",{scale:"s",icon:"rectangle"}))};P.renderUndoRedoMenuButtons=function(){return[this.renderUndoButton(),this.renderRedoButton()]};
P.renderUndoButton=function(){const H=this.messages.undo;return z.tsx("calcite-action",{disabled:!this.viewModel.canUndo(),bind:this,label:H,onclick:this.undo,scale:"s",text:H,title:H},z.tsx("calcite-icon",{scale:"s",icon:u.isRTL(this.container)?"redo":"undo"}))};P.renderRedoButton=function(){const H=this.messages.redo;return z.tsx("calcite-action",{disabled:!this.viewModel.canRedo(),bind:this,label:H,onclick:this.redo,scale:"s",text:H,title:H},z.tsx("calcite-icon",{scale:"s",icon:u.isRTL(this.container)?
"undo":"redo"}))};P.renderSettingsMenuButton=function(){const H=this.messages.settings;return z.tsx("calcite-action",{active:this._menuOpen,bind:this,label:H,onclick:this._toggleMenu,scale:"s",text:H,title:H},z.tsx("calcite-icon",{scale:"s",icon:"gear"}))};P._activateCreateTool=function(H){this.activeTool===H?this.cancel():(this._selectionToolbar.cancel(),this.create(H))};P._onCreateOperation=function(H){if("complete"===H.state){var {creationMode:L}=this,{type:A}=H;if("create"===A){const {tool:C,
graphic:J}=H;H=this._activeCreateOptions;this._activeCreateOptions=null;"continuous"===L?this.create(C,H):"update"===L&&this.update([J])}}};P._toggleMenu=function(){this._menuOpen=!this._menuOpen;this.scheduleRender()};P._onSelectionOperationComplete=function(H){const {viewModel:{defaultUpdateOptions:L}}=this,{selection:A}=H;!H.aborted&&A.length&&(H=L.tool,this.update(A,{...L,tool:1<A.length&&"reshape"===H?"transform":H}));this.notifyChange("state")};P._activateDefaultSelectTool=function(){var H;
this.cancel();null==(H=this.view)?void 0:H.focus()};P._cleanupViewModel=function(){this._defaultViewModel=w.destroyMaybe(this._defaultViewModel);this._viewModelHandlesGroup=w.removeMaybe(this._viewModelHandlesGroup)};P._setUpSnappingControls=function(){const {snappingOptions:H,view:L}=this;this._snappingControls=w.destroyMaybe(this._snappingControls);H&&L&&(this._snappingControls=new n({snappingOptions:H,view:L,visibleElements:this.visibleElements.snappingControlsElements}))};q._createClass(M,[{key:"activeTool",
get:function(){const H=this._selectionToolbar.activeToolInfo;if(H)switch(H.toolName){case "lasso":return"lasso-selection";case "rectangle":return"rectangle-selection";case "default":return"custom-selection"}return this.viewModel.activeTool}},{key:"state",get:function(){return this._selectionToolbar.activeToolInfo?"active":this.viewModel.state}},{key:"viewModel",set:function(H){H!==this._get("viewModel")&&((w.isNone(this._defaultViewModel)||this._defaultViewModel!==H)&&this._cleanupViewModel(),this._set("viewModel",
H),this.viewModel&&(this._viewModelHandlesGroup=r.handlesGroup([this.viewModel.on("create",L=>{this.scheduleRender();this._onCreateOperation(L)}),this.viewModel.on("update",()=>this.scheduleRender()),this.viewModel.on("delete",L=>this.emit("delete",L)),this.viewModel.on("undo",()=>this.scheduleRender()),this.viewModel.on("redo",()=>this.scheduleRender()),this.viewModel.watch("layer",L=>{this._selectionToolbar.layers=L?[L]:null}),this.viewModel.watch("view",L=>{this._selectionToolbar.view="2d"===(null==
L?void 0:L.type)?L:null;this._setUpSnappingControls()}),this.viewModel.watch("state",()=>this.notifyChange("state"))])))}}]);return M}(B);b.__decorate([d.property()],E.prototype,"activeTool",null);b.__decorate([d.property({cast:S=>{if(!S||!S.length)return null;const M=new Set(["point","polyline","polygon","rectangle","circle"]);return S.filter(P=>M.has(P))}})],E.prototype,"availableCreateTools",void 0);b.__decorate([D.aliasOf("viewModel.createGraphic")],E.prototype,"createGraphic",void 0);b.__decorate([d.property()],
E.prototype,"creationMode",void 0);b.__decorate([D.aliasOf("viewModel.defaultCreateOptions")],E.prototype,"defaultCreateOptions",void 0);b.__decorate([D.aliasOf("viewModel.defaultUpdateOptions")],E.prototype,"defaultUpdateOptions",void 0);b.__decorate([d.property()],E.prototype,"iconClass",void 0);b.__decorate([d.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],E.prototype,"label",void 0);b.__decorate([D.aliasOf("viewModel.layer")],E.prototype,"layer",void 0);b.__decorate([d.property({type:["horizontal",
"vertical"]})],E.prototype,"layout",void 0);b.__decorate([d.property(),p.messageBundle("esri/widgets/Sketch/t9n/Sketch")],E.prototype,"messages",void 0);b.__decorate([D.aliasOf("viewModel.snappingOptions")],E.prototype,"snappingOptions",void 0);b.__decorate([d.property()],E.prototype,"state",null);b.__decorate([D.aliasOf("viewModel.updateGraphics")],E.prototype,"updateGraphics",void 0);b.__decorate([D.aliasOf("viewModel.view")],E.prototype,"view",void 0);b.__decorate([d.property(),O.vmEvent(["create",
"update","undo","redo"])],E.prototype,"viewModel",null);b.__decorate([d.property()],E.prototype,"visibleElements",void 0);b.__decorate([x.cast("visibleElements")],E.prototype,"castVisibleElements",null);b.__decorate([D.aliasOf("viewModel.complete")],E.prototype,"complete",null);b.__decorate([D.aliasOf("viewModel.delete")],E.prototype,"delete",null);return E=b.__decorate([g.subclass("esri.widgets.Sketch")],E)});