"use strict";(self["webpackChunkunimapview"]=self["webpackChunkunimapview"]||[]).push([[685],{6685:function(e,i,t){t.r(i),t.d(i,{default:function(){return b}});var a,r,n,o=function(){var e=this,i=e._self._c;return i("div",{staticClass:"home"},[i("el-container",[i("el-header",[i("el-menu",{attrs:{mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:e.handleSelect}},[i("el-menu-item",{attrs:{index:"1"}},[e._v("UniMapView")]),i("el-submenu",{attrs:{index:"2"}},[i("template",{slot:"title"},[e._v("基础操作")]),i("el-submenu",{attrs:{index:"2-1"}},[i("template",{slot:"title"},[e._v("切换地图")]),i("el-menu-item",{attrs:{index:"2-1-1"}},[e._v("ArcGIS")]),i("el-menu-item",{attrs:{index:"2-1-2"}},[e._v("Cesium")])],2),i("el-menu-item",{attrs:{index:"2-2"}},[e._v("地图放大")]),i("el-menu-item",{attrs:{index:"2-3"}},[e._v("地图缩小")]),i("el-menu-item",{attrs:{index:"2-4"}},[e._v("移动中心点")]),i("el-menu-item",{attrs:{index:"2-5"}},[e._v("重置地图")])],2),i("el-submenu",{attrs:{index:"3"}},[i("template",{slot:"title"},[e._v("地图操作")]),"ArcGIS"===e.mapConfig.mapType?i("el-submenu",{attrs:{index:"3-1"}},[i("template",{slot:"title"},[e._v("切换底图")]),e._l(e.arcgisBaseMap,(function(t,a){return i("div",{key:"arcgis-"+a},["referenceLayer"!==t.id?i("el-menu-item",{attrs:{index:"3-1-"+a}},[e._v(e._s(t.title))]):e._e()],1)}))],2):e._e(),"Cesium"===e.mapConfig.mapType?i("el-submenu",{attrs:{index:"3-1"}},[i("template",{slot:"title"},[e._v("切换底图")]),e._l(e.cesiumBaseMap,(function(t,a){return i("div",{key:"cesium-"+a},["referenceLayer"!==t.id?i("el-menu-item",{attrs:{index:"3-1-"+a}},[e._v(e._s(t.title))]):e._e()],1)}))],2):e._e(),i("el-menu-item",{attrs:{index:"3-3"}},[e._v("添加点")]),i("el-menu-item",{attrs:{index:"3-4"}},[e._v("添加线")])],2)],1)],1),i("el-main",[i("div",{attrs:{id:"container"}})])],1)],1)},s=[],m={mapEl:"",mapType:"",mapZoom:"",mapCenter:[116.3972282409668,39.90960456049752],mapBaseMap:""},l=[];function u(e,i){m=e,l=i;var o=m.mapType;o&&("ArcGIS"===o&&(n=t(6414)),"Cesium"===o&&(n=t(7315))),n.initMapView(m).then((e=>{a=e.map,r=e.view,n.initBaseMap(a,l,m)}))}function p(){n.destroyMapView(r),n=null}function c(e){n.changeBaseMap(a,e,m),m.mapBaseMap=e.id}function d(){n.mapZoomIn(r)}function f(){n.mapZoomOut(r)}function g(e){n.mapCenterMove(r,e)}function h(){n.mapReset(r,m)}function y(e,i){n.addPoint(r,e,i)}function T(e,i){n.addLine(r,e,i)}var v={name:"homePage",components:{},data(){return{mapConfig:{mapEl:"container",mapType:"ArcGIS",mapZoom:11,mapCenter:[116.3972282409668,39.90960456049752],mapBaseMap:"topo"},arcgisBaseMap:[{id:"topo",title:"默认",url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",type:"TileLayer"},{id:"shiliangqiumian",title:"天地图-矢量球面",url:"https://{subDomain}.tianditu.gov.cn/vec_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=vec&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={col}&TILEROW={row}&TILEMATRIX={level}&tk=b55d3009063383e1a63f3fa139eb506b",type:"WebTileLayer"},{id:"yingxiangqiumian",title:"天地图-影像球面",url:"https://{subDomain}.tianditu.gov.cn/img_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={col}&TILEROW={row}&TILEMATRIX={level}&tk=b55d3009063383e1a63f3fa139eb506b",type:"WebTileLayer"},{id:"referenceLayer",title:"天地图-矢量标注",url:"https://{subDomain}.tianditu.gov.cn/cva_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cva&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={col}&TILEROW={row}&TILEMATRIX={level}&tk=b55d3009063383e1a63f3fa139eb506b",type:"WebTileLayer"}],cesiumBaseMap:[{id:"topo",title:"默认",url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",type:"ArcGisMapServerImageryProvider"},{id:"shiliangqiumian",title:"天地图-矢量球面",url:"https://{subDomain}.tianditu.gov.cn/vec_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=vec&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={col}&TILEROW={row}&TILEMATRIX={level}&tk=b55d3009063383e1a63f3fa139eb506b",type:"WebMapTileServiceImageryProvider"},{id:"yingxiangqiumian",title:"天地图-影像球面",url:"https://{subDomain}.tianditu.gov.cn/img_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={col}&TILEROW={row}&TILEMATRIX={level}&tk=b55d3009063383e1a63f3fa139eb506b",type:"WebMapTileServiceImageryProvider"},{id:"referenceLayer",title:"天地图-矢量标注",url:"https://{subDomain}.tianditu.gov.cn/cva_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cva&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={col}&TILEROW={row}&TILEMATRIX={level}&tk=b55d3009063383e1a63f3fa139eb506b",type:"WebMapTileServiceImageryProvider"}],pointList:[{center:[116.500997,39.873927],img:t(13),attributes:{id:"huanlegu",name:"北京欢乐谷",desc:"地址：北京市朝阳区东四环小武基北路"}},{center:[116.254886,39.891152],img:t(13),attributes:{id:"huanleshuimofang",name:"北京欢乐水魔方水上乐园",desc:"地址：北京市丰台区小屯路11号"}},{center:[116.104308,39.848027],img:t(13),attributes:{id:"lvyexianzong",name:"绿野仙踪郊野乐园",desc:"地址：北京市丰台区王佐镇西庄店甲2号"}}],lineList:[{attributes:{id:"jhgs3-5",name:"京沪高速三环至五环"},color:"rgba(162,98,250,1)",paths:[[[116.461817,39.868685],[116.485245,39.848191],[116.511691,39.825919]]]},{attributes:{id:"jcgs3-5",name:"机场高速三环至五环"},color:"rgba(162,98,250,1)",paths:[[[116.461314,39.963648],[116.476262,39.977361],[116.506732,40.005553]]]}]}},mounted(){this.initMapView()},methods:{initMapView(){"ArcGIS"===this.mapConfig.mapType?u(this.mapConfig,this.arcgisBaseMap):"Cesium"===this.mapConfig.mapType&&u(this.mapConfig,this.cesiumBaseMap)},destroyMapView(){p()},handleSelect(e,i){if("2-1"===i[1]&&(this.destroyMapView(),"2-1-1"===e&&"ArcGIS"!==this.mapConfig.mapType&&(this.mapConfig.mapType="ArcGIS"),"2-1-2"===e&&"Cesium"!==this.mapConfig.mapType&&(this.mapConfig.mapType="Cesium"),this.initMapView()),"3-1"===i[1]){let i="ArcGIS"===this.mapConfig.mapType?this.arcgisBaseMap:this.cesiumBaseMap;"3-1-0"===e&&c(i[0]),"3-1-1"===e&&c(i[1]),"3-1-2"===e&&c(i[2])}"2-2"===i[1]&&d(),"2-3"===i[1]&&f(),"2-4"===i[1]&&g([121.480248,31.236276]),"2-5"===i[1]&&h(),"3-2"===i[1]&&h(),"3-3"===i[1]&&y("leyuan",this.pointList),"3-4"===i[1]&&T("gaosu",this.lineList)}}},M=v,C=t(1001),E=(0,C.Z)(M,o,s,!1,null,"109caf4c",null),b=E.exports},6414:function(e,i,t){t.r(i),t.d(i,{addLine:function(){return d},addPoint:function(){return c},changeBaseMap:function(){return s},destroyMapView:function(){return o},initBaseMap:function(){return n},initMapView:function(){return r},mapCenterMove:function(){return u},mapReset:function(){return p},mapZoomIn:function(){return m},mapZoomOut:function(){return l}});var a=t(3725);function r(e){return new Promise(((i,t)=>{(0,a.loadModules)(["esri/Map","esri/views/MapView"]).then((([t,a])=>{let r=new t({id:e.mapEl}),n={container:e.mapEl,map:r,center:e.mapCenter,zoom:e.mapZoom};var o=new a(n);o["ui"].remove("zoom"),o["ui"].remove("attribution"),o["ui"].empty("top-left"),o.when((()=>{o.center=e.mapCenter,o.zoom=e.mapZoom})).catch((e=>{console.log(e)})),i({view:o,map:r})}))}))}function n(e,i,t){(0,a.loadModules)(["esri/Basemap","esri/layers/FeatureLayer","esri/layers/ImageryLayer","esri/layers/WebTileLayer","esri/layers/TileLayer"]).then((([a,r,n,o,s])=>{let m=[];i.forEach((e=>{let i=null;-1!==e.url.indexOf("tianditu.gov.cn")?"WebTileLayer"===e.type&&(i=new o({urlTemplate:e.url,subDomains:["t0","t1","t2","t3","t4","t5","t6","t7"],id:e.id,title:"baseMapLayer",visible:e.id===t.mapBaseMap})):"WebTileLayer"===e.type?i=new o({urlTemplate:e.url,id:e.id,title:"baseMapLayer",visible:e.id===t.mapBaseMap}):"FeatureLayer"===e.type?i=new r({url:e.url,id:e.id,title:"baseMapLayer",visible:e.id===t.mapBaseMap}):"ImageryLayer"===e.type?i=new n({url:e.url,id:e.id,title:"baseMapLayer",visible:e.id===t.mapBaseMap}):"TileLayer"===e.type&&(i=new s({url:e.url,id:e.id,title:"baseMapLayer",visible:e.id===t.mapBaseMap})),"referenceLayer"===e.id&&(i.visible="referenceLayer"===e.id),m.push(i)})),e.basemap=new a({baseLayers:m})}))}function o(e){e&&e.destroy()}function s(e,i,t){e.basemap.baseLayers.forEach((e=>{e.visible=e.id===i.id,"referenceLayer"===e.id&&(e.visible=!0)}))}function m(e){e.goTo({center:e.center,zoom:e.zoom+1})}function l(e){e.goTo({center:e.center,zoom:e.zoom-1})}function u(e,i){e.goTo({center:i,zoom:e.zoom})}function p(e,i){e.map.removeAll(),e.goTo({center:i.mapCenter,zoom:i.mapZoom})}function c(e,i,t){(0,a.loadModules)(["esri/Graphic","esri/geometry/Point","esri/layers/GraphicsLayer","esri/symbols/PictureMarkerSymbol"]).then((([a,r,n,o])=>{let s=new n({id:i,graphics:[]});t.map((e=>{if(e.center[0]&&e.center[1]&&Number(e.center[0])&&Number(e.center[1])){const i=new r(parseFloat(e.center[0]),parseFloat(e.center[1])),t=new o({angle:0,height:"30px",width:"30px",yoffset:"15px",url:e.img}),n=new a(i,t,e);s.graphics.push(n)}})),e.map.add(s),e.goTo(s.graphics)}))}function d(e,i,t){(0,a.loadModules)(["esri/Graphic","esri/layers/GraphicsLayer"]).then((([a,r])=>{var n=new r({id:i,graphics:[]});t.forEach((e=>{if(e.paths&&e.paths.length){var i={type:"simple-line",color:e.color,width:4},t={type:"polyline",paths:[]};e.paths.forEach((e=>{e.forEach((e=>{t.paths.push(e)}))}));var r=new a({attributes:e.attributes,geometry:t,symbol:i});n.graphics.add(r)}})),e.map.add(n),e.goTo(n.graphics)}))}},7315:function(e,i,t){function a(e){return new Promise(((i,t)=>{let a=new Cesium.Viewer(e.mapEl,{terrainProvider:new Cesium.EllipsoidTerrainProvider({}),baseLayerPicker:!1,geocoder:!1,homeButton:!1,sceneModePicker:!1,navigationHelpButton:!1,animation:!1,timeline:!1,CreditsDisplay:!1,fullscreenButton:!1,selectionIndicator:!1,infoBox:!1});a._cesiumWidget._creditContainer.style.display="none",a.imageryLayers.get(0).show=!1,a.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(e.mapCenter[0],e.mapCenter[1],1e3*e.mapZoom),orientation:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:0}}),i({view:a,map:a})}))}function r(e,i,t){i.forEach((i=>{if(i.id===t.mapBaseMap){let t=s(i);e.imageryLayers.addImageryProvider(t)}if("referenceLayer"===i.id){let t=s(i);e.imageryLayers.addImageryProvider(t)}}))}function n(e){e&&e.destroy()}function o(e,i,t){let a=e.imageryLayers._layers.length-1;if(e.imageryLayers._layers.forEach(((i,r)=>{i.imageryProvider&&t.mapBaseMap===i.imageryProvider.id&&(a=r,e.imageryLayers.remove(i,!0))})),a){let t=s(i);e.imageryLayers.addImageryProvider(t,a)}}function s(e){let i=null;if(-1!==e.url.indexOf("tianditu.gov.cn")){let t=e.url.replace(/subDomain/,"s");t=t.replace(/col/,"TileCol"),t=t.replace(/row/,"TileRow"),t=t.replace(/level/,"TileMatrix"),i=new Cesium.WebMapTileServiceImageryProvider({url:t,subdomains:["t0","t1","t2","t3","t4","t5","t6","t7"]})}else"ArcGisMapServerImageryProvider"===e.type?i=new Cesium.ArcGisMapServerImageryProvider({url:e.url}):"WebMapTileServiceImageryProvider"===e.type&&(i=new Cesium.WebMapTileServiceImageryProvider({url:e.url}));return Object.assign(i,{id:e.id}),i}function m(e){let i=Cesium.Math.toDegrees(e.camera.positionCartographic.longitude),t=Cesium.Math.toDegrees(e.camera.positionCartographic.latitude);e.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(i,t,e.camera.positionCartographic.height+1e4),orientation:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:0}})}function l(e){let i=Cesium.Math.toDegrees(e.camera.positionCartographic.longitude),t=Cesium.Math.toDegrees(e.camera.positionCartographic.latitude);e.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(i,t,e.camera.positionCartographic.height-1e4),orientation:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:0}})}function u(e,i){e.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(i[0],i[1],Cesium.Ellipsoid.WGS84.cartesianToCartographic(e.camera.position).height),orientation:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:0}})}function p(e,i){e.dataSources.removeAll(),e.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(i.mapCenter[0],i.mapCenter[1],1e3*i.mapZoom),orientation:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:0}})}function c(e,i,t){var a=new Cesium.CustomDataSource(i);t.map((e=>{e.center[0]&&e.center[1]&&Number(e.center[0])&&Number(e.center[1])&&a.entities.add({position:new Cesium.Cartesian3.fromDegrees(e.center[0],e.center[1]),billboard:{image:e.img,height:30,width:30,rotation:0,sizeInMeters:!1,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,horizontalOrigin:Cesium.HorizontalOrigin.CENTER,scale:1,show:!0}})})),e.dataSources.add(a),e.zoomTo(a)}function d(e,i,t){var a=new Cesium.CustomDataSource(i);t.map((e=>{if(e.paths&&e.paths.length){var i=e.paths;i.forEach((i=>{let t=i.reduce((function(e,i){return e.concat(i)}));a.entities.add({polyline:{positions:Cesium.Cartesian3.fromDegreesArray(t),width:4,material:Cesium.Color.fromCssColorString(e.color),zIndex:10,show:!0}})}))}})),e.dataSources.add(a),e.zoomTo(a)}t.r(i),t.d(i,{addLine:function(){return d},addPoint:function(){return c},changeBaseMap:function(){return o},destroyMapView:function(){return n},initBaseMap:function(){return r},initMapView:function(){return a},mapCenterMove:function(){return u},mapReset:function(){return p},mapZoomIn:function(){return m},mapZoomOut:function(){return l}})},13:function(e,i,t){e.exports=t.p+"img/hot-air-balloon.7d9ecb12.png"}}]);
//# sourceMappingURL=685.3db02408.js.map