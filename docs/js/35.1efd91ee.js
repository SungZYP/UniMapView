"use strict";(self["webpackChunkunimapview"]=self["webpackChunkunimapview"]||[]).push([[35],{8035:function(e,i,t){t.r(i),t.d(i,{default:function(){return T}});var a=function(){var e=this,i=e._self._c;return i("div",{staticClass:"home"},[i("el-container",[i("el-header",[i("el-menu",{attrs:{mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:e.handleSelect}},[i("el-menu-item",{attrs:{index:"1"}},[e._v("UniMapView")]),i("el-submenu",{attrs:{index:"2"}},[i("template",{slot:"title"},[e._v("基础操作")]),i("el-submenu",{attrs:{index:"2-1"}},[i("template",{slot:"title"},[e._v("切换地图")]),i("el-menu-item",{attrs:{index:"2-1-1"}},[e._v("ArcGIS")]),i("el-menu-item",{attrs:{index:"2-1-2"}},[e._v("Cesium")])],2),i("el-menu-item",{attrs:{index:"2-2"}},[e._v("地图放大")]),i("el-menu-item",{attrs:{index:"2-3"}},[e._v("地图缩小")]),i("el-menu-item",{attrs:{index:"2-4"}},[e._v("移动中心点")]),i("el-menu-item",{attrs:{index:"2-5"}},[e._v("重置地图")])],2),i("el-submenu",{attrs:{index:"3"}},[i("template",{slot:"title"},[e._v("地图操作")]),"ArcGIS"===e.mapConfig.mapType?i("el-submenu",{attrs:{index:"3-1"}},[i("template",{slot:"title"},[e._v("切换底图")]),e._l(e.arcgisBaseMap,(function(t,a){return i("div",{key:"arcgis-"+a},["referenceLayer"!==t.id?i("el-menu-item",{attrs:{index:"3-1-"+a}},[e._v(e._s(t.title))]):e._e()],1)}))],2):e._e(),"Cesium"===e.mapConfig.mapType?i("el-submenu",{attrs:{index:"3-1"}},[i("template",{slot:"title"},[e._v("切换底图")]),e._l(e.cesiumBaseMap,(function(t,a){return i("div",{key:"cesium-"+a},["referenceLayer"!==t.id?i("el-menu-item",{attrs:{index:"3-1-"+a}},[e._v(e._s(t.title))]):e._e()],1)}))],2):e._e()],2)],1)],1),i("el-main",[i("div",{attrs:{id:"container"}})])],1)],1)},r=[];function n(e,i,a){this.mapConfig=e,this.mapBaseMap=i,this.mapRefrenceMap=a;var r=this.mapConfig.mapType;r&&("ArcGIS"===r&&(this.umv=t(6414)),"Cesium"===r&&(this.umv=t(7315))),this.umv.initMapView(this.mapConfig).then((e=>{this.map=e.map,this.mapView=e.view,this.umv.initBaseMap(this.map,this.mapBaseMap,this.mapConfig)}))}function o(){this.umv.destroyMapView(this.mapView),this.umv=null}function s(e){this.umv.changeBaseMap(this.map,e,this.mapConfig),this.mapConfig.mapBaseMap=e.id}function m(){this.umv.mapZoomIn(this.mapView)}function l(){this.umv.mapZoomOut(this.mapView)}function p(e){this.umv.mapCenterMove(this.mapView,e)}function u(){this.umv.mapReset(this.mapView,this.mapConfig)}var c={name:"homePage",components:{},data(){return{mapConfig:{mapEl:"container",mapType:"ArcGIS",mapZoom:11,mapCenter:[116.3972282409668,39.90960456049752],mapBaseMap:"topo"},arcgisBaseMap:[{id:"topo",title:"默认",url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",type:"TileLayer"},{id:"shiliangqiumian",title:"天地图-矢量球面",url:"https://{subDomain}.tianditu.gov.cn/vec_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=vec&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={col}&TILEROW={row}&TILEMATRIX={level}&tk=b55d3009063383e1a63f3fa139eb506b",type:"WebTileLayer"},{id:"yingxiangqiumian",title:"天地图-影像球面",url:"https://{subDomain}.tianditu.gov.cn/img_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={col}&TILEROW={row}&TILEMATRIX={level}&tk=b55d3009063383e1a63f3fa139eb506b",type:"WebTileLayer"},{id:"referenceLayer",title:"天地图-矢量标注",url:"https://{subDomain}.tianditu.gov.cn/cva_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cva&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={col}&TILEROW={row}&TILEMATRIX={level}&tk=b55d3009063383e1a63f3fa139eb506b",type:"WebTileLayer"}],cesiumBaseMap:[{id:"topo",title:"默认",url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",type:"ArcGisMapServerImageryProvider"},{id:"shiliangqiumian",title:"天地图-矢量球面",url:"https://{subDomain}.tianditu.gov.cn/vec_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=vec&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={col}&TILEROW={row}&TILEMATRIX={level}&tk=b55d3009063383e1a63f3fa139eb506b",type:"WebMapTileServiceImageryProvider"},{id:"yingxiangqiumian",title:"天地图-影像球面",url:"https://{subDomain}.tianditu.gov.cn/img_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={col}&TILEROW={row}&TILEMATRIX={level}&tk=b55d3009063383e1a63f3fa139eb506b",type:"WebMapTileServiceImageryProvider"},{id:"referenceLayer",title:"天地图-矢量标注",url:"https://{subDomain}.tianditu.gov.cn/cva_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cva&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={col}&TILEROW={row}&TILEMATRIX={level}&tk=b55d3009063383e1a63f3fa139eb506b",type:"WebMapTileServiceImageryProvider"}]}},mounted(){this.initMapView()},methods:{initMapView(){"ArcGIS"===this.mapConfig.mapType?n(this.mapConfig,this.arcgisBaseMap):"Cesium"===this.mapConfig.mapType&&n(this.mapConfig,this.cesiumBaseMap)},destroyMapView(){o()},handleSelect(e,i){if("2-1"===i[1]&&(this.destroyMapView(),"2-1-1"===e&&"ArcGIS"!==this.mapConfig.mapType&&(this.mapConfig.mapType="ArcGIS"),"2-1-2"===e&&"Cesium"!==this.mapConfig.mapType&&(this.mapConfig.mapType="Cesium"),this.initMapView()),"3-1"===i[1]){let i="ArcGIS"===this.mapConfig.mapType?this.arcgisBaseMap:this.cesiumBaseMap;"3-1-0"===e&&s(i[0]),"3-1-1"===e&&s(i[1]),"3-1-2"===e&&s(i[2])}"2-2"===i[1]&&m(),"2-3"===i[1]&&l(),"2-4"===i[1]&&p([121.480248,31.236276]),"2-5"===i[1]&&u()}}},d=c,f=t(1001),h=(0,f.Z)(d,a,r,!1,null,"af853e36",null),T=h.exports},6414:function(e,i,t){t.r(i),t.d(i,{changeBaseMap:function(){return s},destroyMapView:function(){return o},initBaseMap:function(){return n},initMapView:function(){return r},mapCenterMove:function(){return p},mapReset:function(){return u},mapZoomIn:function(){return m},mapZoomOut:function(){return l}});var a=t(3725);function r(e){return new Promise(((i,t)=>{(0,a.loadModules)(["esri/Map","esri/views/MapView"]).then((([t,a])=>{let r=new t({id:e.mapEl}),n={container:e.mapEl,map:r,center:e.mapCenter,zoom:e.mapZoom};var o=new a(n);o["ui"].remove("zoom"),o["ui"].remove("attribution"),o["ui"].empty("top-left"),o.when((()=>{o.center=e.mapCenter,o.zoom=e.mapZoom})).catch((e=>{console.log(e)})),i({view:o,map:r})}))}))}function n(e,i,t){(0,a.loadModules)(["esri/Basemap","esri/layers/FeatureLayer","esri/layers/ImageryLayer","esri/layers/WebTileLayer","esri/layers/TileLayer"]).then((([a,r,n,o,s])=>{let m=[];i.forEach((e=>{let i=null;-1!==e.url.indexOf("tianditu.gov.cn")?"WebTileLayer"===e.type&&(i=new o({urlTemplate:e.url,subDomains:["t0","t1","t2","t3","t4","t5","t6","t7"],id:e.id,title:"baseMapLayer",visible:e.id===t.mapBaseMap})):"WebTileLayer"===e.type?i=new o({urlTemplate:e.url,id:e.id,title:"baseMapLayer",visible:e.id===t.mapBaseMap}):"FeatureLayer"===e.type?i=new r({url:e.url,id:e.id,title:"baseMapLayer",visible:e.id===t.mapBaseMap}):"ImageryLayer"===e.type?i=new n({url:e.url,id:e.id,title:"baseMapLayer",visible:e.id===t.mapBaseMap}):"TileLayer"===e.type&&(i=new s({url:e.url,id:e.id,title:"baseMapLayer",visible:e.id===t.mapBaseMap})),"referenceLayer"===e.id&&(i.visible="referenceLayer"===e.id),m.push(i)})),e.basemap=new a({baseLayers:m})}))}function o(e){e&&e.destroy()}function s(e,i,t){e.basemap.baseLayers.forEach((e=>{e.visible=e.id===i.id,"referenceLayer"===e.id&&(e.visible=!0)}))}function m(e){e.goTo({center:e.center,zoom:e.zoom+1})}function l(e){e.goTo({center:e.center,zoom:e.zoom-1})}function p(e,i){e.goTo({center:i,zoom:e.zoom})}function u(e,i){e.goTo({center:i.mapCenter,zoom:i.mapZoom})}},7315:function(e,i,t){function a(e){return new Promise(((i,t)=>{let a=new Cesium.Viewer(e.mapEl,{terrainProvider:new Cesium.EllipsoidTerrainProvider({}),baseLayerPicker:!1,geocoder:!1,homeButton:!1,sceneModePicker:!1,navigationHelpButton:!1,animation:!1,timeline:!1,CreditsDisplay:!1,fullscreenButton:!1,selectionIndicator:!1,infoBox:!1});a._cesiumWidget._creditContainer.style.display="none",a.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(e.mapCenter[0],e.mapCenter[1],1e3*e.mapZoom),orientation:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:0}}),i({view:a,map:a})}))}function r(e,i,t){i.forEach((i=>{if(i.id===t.mapBaseMap){let t=s(i);e.imageryLayers.addImageryProvider(t)}if("referenceLayer"===i.id){let t=s(i);e.imageryLayers.addImageryProvider(t)}}))}function n(e){e&&e.destroy()}function o(e,i,t){let a=e.imageryLayers._layers.length-1;if(e.imageryLayers._layers.forEach(((i,r)=>{i.imageryProvider&&t.mapBaseMap===i.imageryProvider.id&&(a=r,e.imageryLayers.remove(i,!0))})),a){let t=s(i);e.imageryLayers.addImageryProvider(t,a)}}function s(e){let i=null;if(-1!==e.url.indexOf("tianditu.gov.cn")){let t=e.url.replace(/subDomain/,"s");t=t.replace(/col/,"TileCol"),t=t.replace(/row/,"TileRow"),t=t.replace(/level/,"TileMatrix"),i=new Cesium.WebMapTileServiceImageryProvider({url:t,subdomains:["t0","t1","t2","t3","t4","t5","t6","t7"]})}else"ArcGisMapServerImageryProvider"===e.type?i=new Cesium.ArcGisMapServerImageryProvider({url:e.url}):"WebMapTileServiceImageryProvider"===e.type&&(i=new Cesium.WebMapTileServiceImageryProvider({url:e.url}));return Object.assign(i,{id:e.id}),i}function m(e){let i=Cesium.Math.toDegrees(e.camera.positionCartographic.longitude),t=Cesium.Math.toDegrees(e.camera.positionCartographic.latitude);e.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(i,t,e.camera.positionCartographic.height+1e4),orientation:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:0}})}function l(e){let i=Cesium.Math.toDegrees(e.camera.positionCartographic.longitude),t=Cesium.Math.toDegrees(e.camera.positionCartographic.latitude);e.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(i,t,e.camera.positionCartographic.height-1e4),orientation:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:0}})}function p(e,i){e.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(i[0],i[1],Cesium.Ellipsoid.WGS84.cartesianToCartographic(e.camera.position).height),orientation:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:0}})}function u(e,i){e.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(i.mapCenter[0],i.mapCenter[1],1e3*i.mapZoom),orientation:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-90),roll:0}})}t.r(i),t.d(i,{changeBaseMap:function(){return o},destroyMapView:function(){return n},initBaseMap:function(){return r},initMapView:function(){return a},mapCenterMove:function(){return p},mapReset:function(){return u},mapZoomIn:function(){return m},mapZoomOut:function(){return l}})}}]);
//# sourceMappingURL=35.1efd91ee.js.map